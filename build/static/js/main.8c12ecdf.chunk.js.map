{"version":3,"sources":["img/logo.png","img/document_icon.png","img/linkedin_logo.png","img/admin_logo.png","img/group_admin_help_my_dashboard.png","img/group_admin_help_navigation_bar.png","img/group_admin_help_notifications.png","img/group_admin_help_user_management.png","img/group_admin_help_inviting_a_new_user_01.png","img/group_admin_help_inviting_a_new_user_02.png","img/group_admin_help_inviting_a_new_user_03.png","img/group_admin_help_manage_access_requests.png","img/group_admin_help_manage_group_members.png","img/group_admin_help_viewing_an_offer.png","img/group_admin_help_accept_reject_offer.png","img/group_admin_help_accept_reject_2_offer.png","img/group_admin_help_edit_offer_01.png","img/group_admin_help_edit_offer_02.png","img/group_admin_help_temporarily_closing_an_offer.png","img/group_admin_help_reopening_a_temporarily_closed_offer.png","img/group_admin_help_manage_group_admins.png","img/group_admin_help_explore_offers.png","img/group_admin_help_explore_groups.png","img/group_admin_help_resources.png","img/group_admin_help_settings.png","img/group_admin_help_public_offer.png","img/group_admin_help_restricted_offer.png","img/group_admin_help_audit_log.png","img/group_admin_help_password.png","img/group_admin_help_change_password.png","img/group_admin_help_logging_out.png","img/investor_help_my_dashboard.png","img/investor_help_navigation_bar.png","img/investor_help_notifications.png","img/investor_help_viewing_offers.png","img/investor_help_viewing_offers_campaign.png","img/investor_help_pitch_phase_02.png","img/investor_contacting_fundraiser.png","img/investor_help_exploring_groups.png","img/investor_help_resources.png","img/investor_help_profile.png","img/investor_help_editing_your_profile.png","img/investor_help_setting_up_business_profile.png","img/investor_help_self_certification.png","img/investor_help_reset_password.png","img/investor_help_change_password.png","img/investor_help_support_01.png","img/investor_help_support_02.png","img/investor_help_log_out.png","img/issuer_help_my_dashboard.png","img/issuer_help_navigation_bar.png","img/issuer_help_notifications.png","img/issuer_help_create_new_offer_01.png","img/issuer_help_create_new_offer_02.png","img/issuer_help_manage_offer.png","img/issuer_help_edit_offer.png","img/issuer_help_replying_to_comments_in_offer_01.png","img/issuer_help_replying_to_comments_in_offer_02.png","img/issuer_help_exploring_groups.png","img/issuer_help_resources.png","img/issuer_help_edit_profile_01.png","img/issuer_help_edit_profile_02.png","img/issuer_help_setting_business_profile_01.png","img/issuer_help_setting_business_profile_02.png","img/issuer_help_reset_password.png","img/issuer_help_change_password.png","img/issuer_help_support_01.png","img/issuer_help_support_02.png","img/issuer_help_log_out.png","img/front_page_cover_image.png","firebase/firebaseApp.jsx","redux-store/actions/uploadingStatusActions.jsx","shared-components/uploading-dialog/UploadingDialog.jsx","values/colors.jsx","shared-js-css-styles/SharedStyles.jsx","firebase/databaseConsts.jsx","utils/utils.jsx","redux-store/actions/feedbackSnackbarActions.jsx","redux-store/actions/editImageActions.jsx","shared-components/edit-image/EditImageDialog.jsx","redux-store/actions/editVideoActions.jsx","shared-components/edit-video/EditVideoDialog.jsx","shared-components/page-not-found/PageNotFound.jsx","shared-components/page-not-found/PageNotFoundWhole.jsx","models/admin.tsx","models/group_of_membership.tsx","models/user.tsx","router/routes.tsx","api/Api.tsx","redux-store/reducers/authenticationReducer.tsx","firebase/realtimeDBUtils.jsx","redux-store/actions/changePasswordActions.jsx","shared-components/change-password/ChangePasswordPage.jsx","redux-store/actions/manageGroupFromParamsActions.jsx","shared-components/nav-bars/HeaderWithoutDesc.jsx","pages/signin/Signin.jsx","redux-store/actions/authActions.jsx","redux-store/actions/dashboardSidebarActions.jsx","redux-store/actions/forumsActions.jsx","redux-store/actions/authenticationActions.tsx","api/repositories/InvestorSelfCertificationRepository.tsx","api/repositories/UserRepository.tsx","redux-store/actions/manageGroupUrlActions.tsx","shared-components/nav-bars/SidebarContent.jsx","shared-components/profile/LetterAvatar.jsx","redux-store/actions/manageJSONCompareChangesDialogActions.jsx","shared-components/activities-components/JSONCompareChangesDialog.jsx","redux-store/actions/activitiesTableActions.jsx","shared-components/activities-components/ActivitiesTable.jsx","redux-store/actions/createBusinessProfileActions.jsx","redux-store/actions/editUserActions.jsx","redux-store/actions/uploadFilesActions.jsx","redux-store/actions/legalDocumentsActions.jsx","redux-store/actions/investorSelfCertificationAgreementsActions.jsx","api/repositories/GroupRepository.tsx","api/repositories/OfferRepository.tsx","redux-store/reducers/manageGroupUrlReducer.tsx","shared-components/offers-table/OffersTableActions.tsx","shared-components/explore-offers/ExploreOffersActions.tsx","shared-components/offers-table/OffersTableReducer.tsx","shared-js-css-styles/CustomLink.tsx","models/project.tsx","utils/colorUtils.tsx","shared-components/offers-table/OffersTable.tsx","shared-components/footer/Footer.tsx","shared-components/profile/Profile.jsx","redux-store/actions/notificationsActions.jsx","shared-components/notifications/NotificationsBox.jsx","shared-components/explore-groups/ExploreGroupsActions.tsx","shared-components/explore-offers/ExploreOffersReducer.tsx","models/group_properties.tsx","shared-components/explore-offers/OfferItem.tsx","shared-components/risk-warning/RiskWarning.tsx","shared-components/explore-offers/ExploreOffers.tsx","api/repositories/AccessRequestRepository.tsx","api/repositories/EmailRepository.tsx","shared-components/explore-groups/ExploreGroupsReducer.tsx","shared-components/explore-groups/GroupItem.tsx","shared-components/explore-groups/ExploreGroups.tsx","shared-components/feedback-snackbar/FeedbackSnackbarActions.tsx","shared-components/feedback-snackbar/FeedbackSnackbarReducer.tsx","pages/resources/ResourcesActions.tsx","pages/admin/components/manage-sectors/ManageSectorsActions.tsx","pages/resources/ResourcesReducer.tsx","pages/resources/components/ContactResourceDialog.tsx","shared-components/feedback-snackbar/FeedbackSnackbarNew.tsx","pages/resources/pages/keltie/Keltie.tsx","pages/resources/ResourceItem.tsx","pages/resources/pages/founder-catalyst/FounderCatalyst.tsx","pages/resources/pages/grant-funding/GrantFunding.tsx","pages/resources/pages/merix-studio/merixStudio.tsx","pages/resources/Resources.tsx","pages/dashboard-issuer/IssuerDashboard.jsx","pages/dashboard-investor/InvestorDashboard.jsx","utils/emailUtils.jsx","redux-store/actions/invitationDialogActions.jsx","pages/admin/components/InvitationDialog.jsx","redux-store/actions/superAdminSettingsActions.jsx","api/repositories/SystemAttributesRepository.tsx","redux-store/actions/manageSystemAttributesActions.tsx","shared-components/documents-download/DocumentsDownloadActions.tsx","redux-store/reducers/manageSystemAttributesReducer.tsx","pages/admin/components/manage-sectors/ManageSectorsReducer.tsx","pages/admin/components/manage-sectors/ManageSectors.tsx","pages/admin/components/SuperAdminSettings.jsx","redux-store/actions/groupAdminSettingsActions.jsx","pages/admin/components/GroupAdminSettings.jsx","shared-components/info_overlay/InfoOverlay.jsx","redux-store/actions/invitedUsersActions.jsx","pages/admin/components/InvitedUsers.jsx","pages/admin/components/AddAngelNetWorkDialog.jsx","redux-store/actions/addAngelNetworkDialogActions.jsx","redux-store/actions/angelNetworksActions.jsx","pages/admin/components/AngelNetworks.jsx","redux-store/actions/manageJoinRequestsActions.jsx","pages/admin/components/JoinRequests.jsx","redux-store/actions/groupAdminsTableActions.jsx","pages/admin/components/GroupAdminsTable.jsx","pages/admin/AdminDashboard.jsx","shared-components/upload-documents/DocumentsUpload.jsx","shared-components/download-documents/DocumentsDownload.jsx","redux-store/actions/selectProjectVisibilityActions.jsx","shared-components/select-pitch-visibility/SelectPitchVisibility.jsx","pages/create-project/CreateProject.jsx","pages/profile/ProfilePageViewOnly.jsx","shared-components/select-pledge-visibility/SelectPledgeVisibility.jsx","redux-store/actions/createPledgeDialogActions.jsx","shared-components/create-pledge-dialog/CreatePledgeDialog.jsx","redux-store/actions/pledgesTableActions.jsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions.tsx","shared-components/documents-download/DocumentsDownload.tsx","pages/group-details/GroupDetailsActions.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialog.tsx","pages/project-details/ProjectDetails.jsx","pages/system-public-pages/PrivacyPolicyPage.jsx","pages/system-public-pages/TermsOfUsePage.jsx","pages/system-public-pages/RiskWarningPage.jsx","pages/system-public-pages/CreatePitchTermsAndConditionsPage.jsx","pages/system-public-pages/ContactUs.jsx","pages/system-public-pages/ContactUs2.jsx","pages/system-public-pages/HelpPage.jsx","pages/signin/SignInActions.tsx","pages/group-details/GroupDetailsReducer.tsx","pages/group-details/GroupDetails.tsx","pages/system-public-pages/MarketingPreferencesPage.jsx","pages/profile/ProfilePageEditable.jsx","pages/front/Front.tsx","pages/reset-password/ResetPasswordActions.tsx","pages/signin/SignInReducer.tsx","pages/signin/SignInNew.tsx","shared-components/page-not-found/PageNotFoundNew.tsx","shared-components/header/Header.tsx","router/GroupRoute.tsx","pages/signup/SignUpActions.tsx","pages/reset-password/ResetPasswordReducer.tsx","pages/reset-password/ResetPassword.tsx","pages/resources/pages/ResourceDetail.tsx","utils/passwordUtils.tsx","redux-store/actions/mediaQueryActions.tsx","pages/signup/SignUpReducer.tsx","models/invited_user.tsx","pages/signup/SignUpNew.tsx","router/router.tsx","shared-components/feedback-snackbar/FeedbackSnackbar.jsx","redux-store/actions/clubAttributesActions.jsx","redux-store/actions/manageSystemIdleTimeActions.tsx","redux-store/actions/manageSystemGroupsActions.jsx","redux-store/reducers/manageSystemIdleTimeReducer.tsx","App.jsx","serviceWorker.js","shared-components/profile/ProfileActions.tsx","redux-store/reducers/authReducer.jsx","redux-store/reducers/createBusinessProfileReducer.jsx","redux-store/reducers/editUserReducer.jsx","redux-store/reducers/editImageReducer.jsx","redux-store/reducers/editVideoReducer.jsx","redux-store/reducers/uploadFilesReducer.jsx","redux-store/reducers/uploadingStatusReducer.jsx","redux-store/reducers/changePasswordReducer.jsx","redux-store/reducers/clubAttributesReducer.jsx","shared-components/forums/CreateForum.jsx","shared-components/forums/CreateThread.jsx","shared-components/forums/IndividualForum.jsx","shared-components/forums/CreateReply.jsx","shared-components/forums/IndividualThread.jsx","shared-components/forums/Forums.jsx","redux-store/reducers/forumsReducer.jsx","redux-store/reducers/notificationsReducer.jsx","redux-store/reducers/dashboardSidebarReducer.jsx","redux-store/reducers/mediaQueryReducer.tsx","redux-store/reducers/superAdminSettingsReducer.jsx","redux-store/reducers/groupAdminSettingsReducer.jsx","redux-store/reducers/legalDocumentsReducer.jsx","redux-store/reducers/invitedUsersReducer.jsx","redux-store/reducers/invitationDialogReducer.jsx","redux-store/reducers/addAngelNetworkDialogReducer.jsx","redux-store/reducers/manageGroupFromParamsReducer.jsx","redux-store/reducers/investorSelfCertificationAgreementsReducer.jsx","redux-store/reducers/angelNetworksReducer.jsx","redux-store/reducers/manageJoinRequestsReducer.jsx","redux-store/reducers/pledgesTableReducer.jsx","redux-store/reducers/feedbackSnackbarReducer.jsx","redux-store/reducers/activitiesTableReducer.jsx","redux-store/reducers/manageJSONCompareChangesDialogReducer.jsx","redux-store/reducers/groupAdminsTableReducer.jsx","redux-store/reducers/createPledgeDialogReducer.jsx","redux-store/reducers/selectProjectVisiblityReducer.jsx","redux-store/reducers/manageSystemGroupsReducer.jsx","redux-store/actions/manageMarketingPreferencesActions.jsx","redux-store/reducers/manageMarketingPreferencesReducer.jsx","redux-store/actions/createProjectActions.jsx","redux-store/reducers/createProjectReducer.jsx","shared-components/documents-download/DocumentsDownloadReducer.tsx","shared-components/profile/components/edit-image-dialog/EditImageDialogActions.tsx","shared-components/profile/components/business-profile/BusinessProfileActions.tsx","shared-components/profile/ProfileReducer.tsx","redux-store/reducers/index.tsx","index.tsx"],"names":["firebaseApp","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","UPLOADING","DISMISS_UPLOADING_STATUS","UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE","UPLOAD_DONE_MODE","UPLOAD_ERROR","UploadingDialog","this","props","forwardRef","mode","progress","dismiss","Dialog","ref","open","fullWidth","DialogTitle","DialogContent","column","ProgressBar","variant","striped","now","label","Typography","style","marginTop","DialogActions","Button","color","size","disabled","onClick","margin","Component","connect","state","uploadingStatus","dispatch","type","React","forwardedRef","black","white","red_700","dark_green","gray_50","gray_100","gray_200","gray_300","gray_400","gray_600","blue_gray_50","blue_gray_600","blue_gray_700","background_a","background_b","background_c","background_d","background_e","background_f","background_g","background_h","background_i","background_j","background_k","background_l","background_m","background_n","background_o","background_p","background_q","background_r","background_s","background_t","background_u","background_v","background_w","background_x","background_y","background_z","primaryColor","secondaryColor","errorColor","kick_starter_background_color","kick_starter_background_color_1","kick_starter_gray_box_border","sharedStyles","StyleSheet","create","nav_link_hover","appColors","textDecoration","cursor","nav_link_white_text_hover_without_changing_text_color","nav_link_hover_without_changing_text_color","page_title","marginLeft","hamburger_button","tab_title","textTransform","fontSize","kick_starter_border_box","border","boxShadow","no_text_transform","error_text","white_text","black_text","StyledTableCell","classes","makeStyles","root","background","cellColor","textColor","useStyles","TableCell","className","colSpan","component","SlideTransitionUp","Slide","direction","SlideTransitionDown","GROUP_PROPERTIES_CHILD","ADMINISTRATORS_CHILD","CLUB_ATTRIBUTES_CHILD","USERS_CHILD","PROJECTS_CHILD","ACTIVITIES_LOG_CHILD","INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD","REQUESTS_TO_JOIN_CHILD","CONTACT_US_ENQUIRIES_CHILD","MARKETING_PREFERENCES_CHILD","INVITED_USERS_CHILD","BUSINESS_PROFILE_CHILD","ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD","COMMENTS_CHILD","COMMENT_REPLIES_CHILD","PLEDGES_CHILD","VOTES_CHILD","PLEDGE_FAQS_CHILD","NOTIFICATIONS_CHILD","FORUMS_CHILD","FORUM_THREADS_CHILD","FORUM_THREAD_REPLIES_CHILD","LEGAL_DOCUMENTS_CHILD","LOGOS_CHILD","INTRO_VIDEOS_CHILD","PROFILE_PICTURES_CHILD","PROJECT_SUPPORTING_DOCUMENTS_CHILD","PROJECT_PRESENTATION_DOCUMENT_CHILD","PROJECT_COVER_CHILD","PROJECT_STATUS_DRAFT","USER_TITLES","FINANCIAL_ROUNDS","MAX_FILE_SIZE_IN_BYTES","MAX_VIDEO_OR_IMAGE_SIZE_IN_MB","MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES","MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS","STORAGE_FILE_NAME_ID_SPLIT","getCurrentDate","Date","getTime","getDateWithDaysFurtherThanToday","days","neededDate","currentDate","setDate","getDate","dateInReadableFormat","milliseconds","toLocaleDateString","dateTimeInReadableFormat","date","toLocaleTimeString","passwordBlacklist","checkPasswordStrength","password","strength","length","match","findIndex","badPassword","toLowerCase","convertQuillDeltaToHTML","ops","QuillDeltaToHtmlConverter","convert","dateDiff","Math","abs","toFixed","findAddress","postcode","a","addressQuery","Promise","resolve","reject","fetch","then","results","json","data","apiAddresses","formattedAddresses","error","addresses","forEach","address","push","formattedAddress","element","index","trim","slice","calculatePledgesAmount","pledges","pledgesAmount","pledge","amount","getNumberFromInputString","inputString","includes","commaSplits","split","invalidSeparator","part","commaFreeString","replace","isNaN","number","parseFloat","constructStorageFileName","document","newStorageID","originalName","file","name","nameSplits","DB_CONST","isValidLinkedInURL","url","startsWith","getLogoFromGroup","getLogoType","groupProperties","hasOwnProperty","plainLogo","logo","logoWithText","shouldAProjectBeEdited","user","project","status","id","issuerID","Pitch","isValidHexColorCode","hexColorCode","test","isValidWebURL","isProjectLive","isProjectInLivePitchPhase","isProjectInLivePledgePhase","isDraftProject","isProjectWaitingToGoLive","isProjectRejectedToGoLive","isProjectPitchExpiredWaitingForAdminToCheck","isProjectWaitingForPledgeToBeCreated","isProjectWaitingForPledgeToBeChecked","isProjectSuccessful","isProjectFailed","isProjectTemporarilyClosed","temporarilyClosed","CLOSE_FEEDBACK_SNACKBAR","closeFeedbackSnackbar","SET_FEEDBACK_SNACKBAR_CONTENT","setFeedbackSnackbarContent","message","position","RESET_STATES_WHEN_SNACKBAR_CLOSED","TOGGLE_EDIT_IMAGE_DIALOG","toggleEditImageDialog","getState","auth","SET_IMAGE_EDITOR_REFERENCE","LOADING_IMAGE_FILE","IMAGE_FILES_LOADED","LOADING_PREVIOUS_IMAGE","FINISHED_LOADING_PREVIOUS_IMAGE","IMAGE_ZOOM_CHANGED","CANCEL_EDITING_CURRENT_IMAGE","EDITED_IMAGE_OBTAINED","getEditedImage","imgEditor","getCroppingRect","x","getImage","toBlob","blob","CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE","uploadImage","editImageState","imgPreIndex","firebaseStorage","storage","firebaseDB","database","storageID","storageLocation","imgName","BusinessProfile","child","delete","myUtils","profilePicture","storageRef","uploadTask","put","on","snapshot","bytesTransferred","totalBytes","getDownloadURL","imgDownloadURL","imgUploadedObj","prevNodeImgs","firebaseRef","splice","imgItem","removed","set","waitForUploading","catch","EditImageDialog","renderSelectedPreviousPhotoStatus","msg","profilePic","align","isMobile","previousPhotos","imgPreEdited","imgPreEditedLoaded","imgEdited","imgZoom","onClose","setEditorReference","handleImageFilesChanged","handleImageFileError","handleSliderChanged","onPreviousImageItemClick","cancelEditingCurrentImage","viewEditedImagePreview","saveEditedImage","other","maxWidth","fullScreen","padding","Container","fluid","Row","noGutters","Col","xs","sm","md","lg","backgroundColor","colors","paddingTop","paddingBottom","paddingLeft","paddingRight","vAlignContent","grow","hAlignContent","IconButton","Divider","width","marginBottom","css","styles","img_drop_zone","onChange","onError","accepts","maxFileSize","minFileSize","multiple","clickable","marginRight","height","image","borderRadius","disableBoundaryChecks","disableHiDPIScaling","scale","top","zIndex","CircularProgress","Slider","min","max","step","value","Image","src","window","URL","createObjectURL","roundedCircle","thumbnail","objectFit","sort","photo1","photo2","map","previousPhoto","previous_img_item_selected","editImage","editImageDialogOpen","MediaQueryState","editImageActions","editor","files","manageFeedbackSnackbar","Blob","code","feedbackSnackbarActions","event","newValue","zoom","response","selectedIndex","textAlign","opacity","TOGGLE_EDIT_VIDEO_DIALOG","toggleEditVideoDialog","VIDEO_TYPE_CHOSEN","VIDEO_URL_CHANGED","VIDEO_FILE_CHANGED","CREATE_BUSINESS_PROFILE_SAVE_VIDEO","PREVIOUS_VIDEO_SELECTED","CANCEL_EDITING_CURRENT_VIDEO","uploadVideo","editVideoState","video","videoPreIndex","downloadedPreviousVideo","videoName","videoUploadedObj","dateUploaded","utils","putUploadedVideoToFirebaseRealtime","videoUploadTask","videoDownloadURL","prevNodeVideos","EditVideoDialog","renderSelectedPreviousVideoStatus","allowVideoUpload","videoTypeSelected","previousVideos","videoChosen","chooseVideoType","handleVideoURLChanged","handleVideoFileChanged","handleVideoFileError","cancelEditingCurrentVideo","handlePreviousVideoItemClick","handleSaveVideo","video_drop_zone","TextField","placeholder","playing","controls","video1","video2","previousVideo","playsinline","previous_video_item_selected","manageClubAttributes","clubAttributes","editVideo","editVideoDialogOpen","editVideoActions","videoType","target","PageNotFound","page_not_found_text","explain_text","fontWeight","PageNotFoundWhole","isAdmin","JSON","parse","stringify","getHomeGroup","groups","group","isHomeGroup","UserTitles","isIssuer","isInvestor","Routes","baseGroup","nonGroupFront","groupFront","nonGroupSignIn","groupSignIn","superAdminSignIn","nonGroupSignUp","groupSignUp","nonGroupAdminDashboard","groupAdminDashboard","groupIssuerDashboard","groupInvestorDashboard","nonGroupViewUserProfile","groupViewUserProfile","nonGroupEditUserProfile","groupEditUserProfile","nonGroupCreateOffer","groupCreateOffer","nonGroupViewOffer","groupViewOffer","nonGroupViewPledge","groupViewPledge","nonGroupViewGroup","groupViewGroup","nonGroupViewResourceDetail","groupViewResourceDetail","nonGroupContactUs","groupContactUs","nonGroupContactUs2","groupContactUs2","groupHelp","nonGroupTermsOfUse","nonGroupPrivacyPolicy","nonGroupRiskWarning","nonGroupCreatePitchTermsAndConditions","nonGroupMarketingPreferences","nonGroupAuthAction","error404","isProtectedRoute","route","isRouteReservedForSuperAdmin","isGroupAdminRoute","isIssuerDashboardRoute","isInvestorDashboardRoute","isSignInRoute","isSuperAdminSignInRoute","isSignUpRoute","isErrorRoute","isSystemPublicRoute","constructPublicRoute","constructHomeRoute","routeParams","ManageGroupUrlState","AuthenticationState","currentUser","groupUserName","currentAdmin","superAdmin","groupsOfMembership","adminGroup","homeGroup","filter","groupOfMembership","constructSignInRoute","constructSignUpRoute","invitedUserID","constructContactUsRoute","constructContactUsRoute2","constructDashboardRoute","constructProjectDetailRoute","projectID","constructCreateProjectRoute","params","undefined","edit","admin","issuer","constructGroupDetailRoute","viewedGroupUserName","constructViewResourceDetailRoute","resourceName","GROUP_PATH","FRONT","SIGN_IN","ADMIN","ADMIN_INVEST_WEST_SUPER","DASHBOARD_ISSUER","DASHBOARD_ISSUER_INVEST_WEST_SUPER","DASHBOARD_INVESTOR","DASHBOARD_INVESTOR_INVEST_WEST_SUPER","USER_PROFILE","USER_PROFILE_INVEST_WEST_SUPER","EDIT_USER_PROFILE","EDIT_USER_PROFILE_INVEST_WEST_SUPER","PLEDGE","PLEDGE_INVEST_WEST_SUPER","CREATE_OFFER","EDIT_OFFER","CREATE_OFFER_INVEST_WEST_SUPER","EDIT_OFFER_INVEST_WEST_SUPER","PROJECT_DETAILS","PROJECT_DETAILS_INVEST_WEST_SUPER","VIEW_GROUP_DETAILS","VIEW_GROUP_DETAILS_INVEST_WEST_SUPER","CONTACT_US","CONTACT_US_INVEST_WEST_SUPER","HELP","HELP_INVEST_WEST_SUPER","TERMS_OF_USE","PRIVACY_POLICY","CREATE_PITCH_TERMS_AND_CONDITIONS","ApiRoutes","retrieveSystemAttributesRoute","systemAttributesBaseRoute","updateSystemAttributesRoute","requestResetPasswordRoute","authBaseRoute","verifyAuthRoute","sendEmailRoute","emailBaseRoute","createUser","usersBaseRoute","retrieveUser","retrieveInvitedUser","updateUser","listGroupsOfMembership","exportUsersCsvRoute","listGroups","groupsBaseRoute","retrieveGroup","addMembersToGroup","listGroupMembers","listProjectsRoute","projectsBaseRoute","sendProjectBackToIssuerRoute","exportProjectsToCsvRoute","addGroupAdminRoute","groupAdminsBaseRoute","listAccessRequestsRoute","accessRequestsBaseRoute","removeAccessRequestRoute","createAccessRequestRoute","retrieveInvestorSelfCertificationRoute","investorSelfCertificationBaseRoute","uploadSingleFileRoute","fileBaseRoute","testRoute","AuthenticationStatus","Api","baseUrl","endPoint","queryParameters","fullUrl","buildQueryParameters","encodeURI","requestType","optionalParams","formDataRequest","Error","buildUrl","idToken","getIdToken","bodyData","requestBody","buildFormData","config","method","timeout","headers","_boundary","axios","request","parseResponse","parseError","console","log","statusCode","isRequestSuccessful","result","key","endsWith","toString","formData","FormData","append","httpError","detail","trackActivity","userID","activityType","interactedObjectLocation","interactedObjectID","activitySummary","action","time","FETCH_ACTIVITIES_BY_USER","fetchActivitiesBy","shouldLoadUserProfile","fetchBy","activitiesRef","orderByChild","equalTo","activities","once","snapshots","exists","val","numChildren","all","activity","getUserBasedOnID","userProfile","ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT","ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY","sendNotification","title","db","logContactUsEnquiry","anid","email","phone","subject","description","dbRef","enquiryID","groupContacted","loadGroupAdminsBasedOnGroupID","groupID","groupAdmins","doesUserExist","userExists","userIsAnAdmin","loadGroupsUserIsIn","groupsUserIsIn","invitedUser","invitedBy","userInGroupStatus","groupUserIsIn","angelNetwork","isInvestWest","groupDetails","loadAngelNetworkBasedOnANID","loadAngelNetworkBasedOnGroupUserName","loadAngelNetworks","angelNetworks","startAt","displayNameLower","loadAngelNetworksInvitedAUser","angelNetworksInvitedUser","Invitor","Invitee","angelNetworkInvitedUser","displayName","getUser","uid","createForum","forumObj","forumID","LOAD_LIVE_FORUMS","LOAD_DELETED_FORUMS","loadForums","forums","forum","deleted","author","editForum","editedForum","update","deleteForum","createThread","threadObj","threadID","editThread","editedThread","deleteThread","LOAD_LIVE_THREADS","loadThreads","forumSelected","threads","thread","createThreadReply","replyObj","replyID","editThreadReply","editedThreadReply","deleteThreadReply","threadReplyID","loadThreadReplies","threadSelected","replies","reply","loadClubAttributes","loadInvitedUsers","invitedUsers","officialUserID","officialUser","loadRequestsToJoin","requestsRef","requests","groupToJoin","getInvitedUserBasedOnIDOrEmail","idOrEmail","loadAParticularProject","loadPledges","LOAD_PLEDGES_ORDER_BY_PROJECT","toggleProjectLivelinessTemporarily","shouldSendNotificationForIssuer","projectBeforeUpdating","projectName","ROUTES","before","after","loadVotes","LOAD_VOTES_ORDER_BY_PROJECT","votes","listOfInvestorsToBeNotified","vote","investorID","notifications","notification","makeProjectGoLiveDecision","decisionObj","projectBeforeDecision","decision","visibility","projectVisibilitySetting","emailType","emailInfo","makeProjectGoToPledgePhaseDecision","makeProjectPledgeGoLiveDecision","PrimaryOffer","loadComments","comments","comment","commentedBy","pledgesRef","investor","votesRef","voted","loadNotifications","deleteAllNotifications","remove","loadMarketingPreferences","marketingPreferencesRef","marketingPreferences","marketingPreference","updateMarketingPreferencesSetting","field","accepted","settings","updateGroupPropertiesSetting","bringPitchBackToLive","newPitchExpiryDate","expiredDate","CHANGE_PASSWORD_TEXT_CHANGED","RESET_CHANGE_PASSWORD","RE_AUTHENTICATING_USER","ERROR_CHANGING_PASSWORD","changePassword","passwords","newPassword","newPasswordVerified","PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED","PASSWORD_CHANGE_NOT_STRONG_ENOUGH","signInWithEmailAndPassword","currentPassword","credential","updatePassword","PASSWORD_CHANGE_SUCCESS","PASSWORD_CHANGE_FAIL","PASSWORD_CHANGE_RE_AUTH_FAILED","ChangePasswordPage","passwordChangeResponseCode","handleTextChanged","reset","requestChangePassword","responseCode","onCloseMessage","PasswordUpdate","renderMessage","changing_password_text_background","changePasswordActions","realtimeDBUtils","errorCode","SET_GROUP_USER_NAME_FROM_PARAMS","setGroupUserNameFromParams","manageGroupFromParams","SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING","setExpectedAndCurrentPathsForChecking","expectedPath","currentPath","LOADING_ANGEL_NETWORK","ANGEL_NETWORK_LOADED","loadAngelNetwork","groupPropertiesLoaded","angelNetworkBeingLoaded","firebaseUser","shouldLoadOtherData","angelNetworkListener","ANGEL_NETWORK_PROPERTIES_CHANGED","HeaderWithoutDesc","authStatus","span","order","AUTH_SUCCESS","to","navigation_text","widht","logo_field","alt","require","default","href","manageGroupFromParamsActions","Signin","setState","resetPassword","handleSignin","preventDefault","resetEmailSent","signin","openResetPasswordDialog","resetPasswordDialogOpen","handleCloseResetPasswordDialog","resetEmail","resetChecking","resetError","handleSendResetEmail","sendPasswordResetEmail","handleClickShowPassword","showPassword","renderAuthStatus","authenticating","reset_email_sent","errorMsg","auth_error","firebaseAuth","resetAuthStatus","path","prevProps","prevState","history","pathname","search","overflow","offset","Paper","elevation","square","onSubmit","paragraph","FormControl","InputProps","endAdornment","InputAdornment","edge","aria-label","onTextChanged","onSendEmailClick","ResetPasswordDialog","userLoaded","authActions","handleClose","renderReset","reset_email_error_text","reset_password_actions_layout","no_margin","hover","INITIALIZE_AUTH_STATE","RESET_AUTH_STATUS","SIGNING_IN","AUTHENTICATING","FINISHED_AUTHENTICATING","logOutWithIndirectDispatch","TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP","USER_PROFILE_LOADED","AUTH_LOADING_GROUPS_USER_IS_IN","AUTH_GROUPS_USER_IS_IN_LOADED","signOut","LOG_OUT","logout","userListener","groupsUserIsInListener","CURRENT_USER_PROFILE_HAS_CHANGED","GROUPS_USER_IS_IN_HAVE_CHANGED","TOGGLE_SIDEBAR","toggleSidebar","checkSidebarDocked","isLaptop","isDesktop","sidebarDocked","dashboardSidebar","sidebarOpen","LOADING_FORUMS","FINISHED_LOADING_FORUMS","ERROR_LOADING_FORUMS","GO_BACK_TO_FORUMS_MAIN","TOGGLE_CREATE_NEW_FORUM","toggleCreateNewForum","forumEdited","ERROR_CREATING_NEW_FORUM","FORUMS_INPUT_CHANGED","handleForumsInputChanged","targetName","targetValue","manageForums","LOADING_THREADS_IN_A_FORUM","FINISHED_LOADING_THREADS_IN_A_FORUM","GO_BACK_TO_FORUMS_LIST","TOGGLE_CREATE_NEW_THREAD","toggleCreateNewThread","threadEdited","ERROR_CREATING_NEW_THREAD","LOADING_REPLIES_IN_A_THREAD","FINISHED_LOADING_REPLIES_IN_A_THREAD","GO_BACK_TO_THREADS_LIST","TOGGLE_THREAD_REPLY","toggleThreadReply","threadReplyEdited","ERROR_CREATING_THREAD_REPLY","MANAGE_FORUMS_TABLE_PAGE_CHANGED","changePage","table","newPage","MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED","changeRowsPerPage","parseInt","FORUMS_QUILL_CHANGED","THREAD_CONTENT_QUILL","THREAD_REPLY_CONTENT_QUILL","handleQuillChanged","getText","quill","getContents","forumsListener","forumThreadsListener","forumThreadRepliesListener","FORUMS_CHANGED","stopListeningForForumsChanged","off","THREADS_CHANGED","stopListeningForThreadsChanged","THREAD_REPLIES_CHANGED","stopListeningForThreadRepliesChanged","AuthenticationEvents","initialState","NotInitialized","authIsNotInitialized","isAuthenticating","Authenticating","successfullyAuthenticated","Authenticated","hasAuthenticationError","authenticationReducer","StartAuthenticating","CompleteAuthentication","completeAuthenticationAction","selfCertification","SignOut","Unauthenticated","UpdateUserChanges","updateUserChangesAction","updatedUser","InvestorSelfCertificationRepository","UserRepository","ManageGroupUrlEvents","signIn","authenticationCompleteAction","currentFirebaseUser","setPersistence","Firebase","Auth","Persistence","LOCAL","retrieveUserResponse","validSuperAdminSignIn","routePath","getInvestorSelfCertification","selfCertificationResponse","listGroupsOfMembershipResponse","HOME_TAB","PROFILE_TAB","MY_OFFERS_TAB","SETTINGS_TAB","CHANGE_PASSWORD_TAB","RESOURCES_TAB","EXPLORE_GROUPS_TAB","EXPLORE_OFFERS_TAB","MY_ACTIVITIES_TAB","GROUP_ACTIVITIES_TAB","SidebarContent","onLogoutClick","dashboardProps","signOutNew","onForumsTabClick","goBackToForumsMain","List","ListItem","button","ListItemIcon","ListItemText","School","dashboardSidebarActions","LetterAvatar","getBackgroundColor","firstName","lastName","textVariant","Avatar","toUpperCase","JSON_COMPARE_CHANGES_DIALOG_SET_DATA","JSON_COMPARE_CHANGES_DIALOG_RESET_DATA","JSONCompareChangesDialog","dialogOpen","jsonBefore","jsonAfter","resetData","theme","collapseStringsAfterLength","enableClipboard","copy","navigator","clipboard","writeText","manageJSONCompareChangesDialog","ACTIVITIES_TABLE_SET_TABLE_USER","setTableUser","newUser","prevTableUser","manageActivitiesTable","tableUser","ACTIVITIES_TABLE_LOADING_ACTIVITIES","ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES","ACTIVITIES_TABLE_PAGE_CHANGED","ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED","activitiesListener","ACTIVITIES_IN_TABLE_CHANGED","stopListeningForActivitiesChanged","ActivitiesTable","loadData","loadingActivities","activitiesLoaded","loadActivities","addListener","startListeningForActivitiesChanged","renderTableRows","page","rowsPerPage","jsonCompareDialog_setData","TableRow","activity1","activity2","overflowX","Table","TableHead","TableBody","TableFooter","TablePagination","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","SelectProps","native","onChangePage","onChangeRowsPerPage","allActivities","groupAdmin","activitiesTableActions","existingActivity","adminIndex","manageJSONCompareChangesActions","ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED","REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED","TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED","BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED","SEARCHING_REGISTERED_OFFICE_ADDRESSES","DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES","SEARCHING_TRADING_ADDRESSES","DONE_SEARCHING_TRADING_ADDRESSES","SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS","SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS","TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE","CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION","TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR","putBusinessProfileToFirebaseDB","businessProfile","registeredOffice","tradingAddress","SET_ORIGINAL_USER_AND_EDITED_USER","setOriginalUserAndEditedUser","previouslySetUser","editUser","originalUser","allowEditing","userHomeGroup","requestedToJoin","EDIT_PERSONAL_INFORMATION","EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION","EDIT_TRADING_ADDRESS_BUSINESS_PROFILE","EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE","ADDING_NEW_DIRECTOR","TOGGLE_ADD_NEW_DIRECTOR","ADD_NEW_DIRECTOR_TEMPORARILY","DELETE_DIRECTOR_TEMPORARILY","RESET_PERSONAL_INFORMATION","RESET_BUSINESS_PROFILE","COMMIT_PERSONAL_INFORMATION_CHANGES","COMMIT_BUSINESS_PROFILE_CHANGES","originalUserListener","EDIT_USER_ORIGINAL_USER_CHANGED","stopOriginalUserChangedListener","FILE_UPLOAD_CHANGED","FILE_UPLOAD_ERROR","CLOSE_FILE_UPLOAD_ERROR_SNACKBAR","RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED","DELETE_UPLOADED_LEGAL_DOCUMENT","DELETE_UPLOADED_PITCH_COVER","DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","DELETE_TO_BE_UPLOADED_FILE","DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_COVER","DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_A_LEGAL_DOCUMENT","FINISHED_UPLOADING_A_PITCH_COVER","FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT","FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_ALL_FILES","uploadIndividualFile","totalFiles","fileRef","storageFileName","extension","fileDownloadURL","percentDone","legalDocument","fileName","readableSize","sizeReadable","downloadURL","fileDBRef","formattedCover","fileType","fileExtension","formattedPresentationDocument","formattedSupportingDocument","putFilesReferencesToDatabase","legalDocumentsUserID","legalDocuments","existingLegalDocuments","filesDBReferences","uploadFiles","filesReferencesToBeUploaded","LEGAL_DOCUMENTS_SET_USER","LOADING_LEGAL_DOCUMENTS","FINISHED_LOADING_LEGAL_DOCUMENTS","legalDocumentsListener","LEGAL_DOCUMENTS_CHANGED","INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER","setUser","manageInvestorSelfCertificationAgreement","LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT","FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT","loadInvestorSelfCertificationAgreement","INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED","UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT","INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED","GroupRepository","FetchProjectsOrderByOptions","FetchProjectsPhaseOptions","groupNameFromUrl","groupLoaded","loadingGroup","groupRouteTheme","defaultTheme","validGroupUrl","isValidatingGroupUrl","routeContainsGroupName","successfullyValidatedGroupUrl","getGroupRouteTheme","manageGroupUrlReducer","SetGroupUrl","setGroupUrlAction","ValidatingGroupUrl","FinishedValidatingGroupUrl","finishedValidatingGroupUrlAction","responsiveFontSizes","createMuiTheme","palette","primary","main","secondary","text","blueGrey","typography","fontFamily","OffersTableEvents","OfferRepository","options","link","createElement","download","setAttribute","body","appendChild","click","removeChild","ExploreOffersEvents","fetchOffers","OffersTableLocalState","tableUserGroupsOfMembership","visibilityFilter","groupFilter","phaseFilter","fetchOffersOptions","phase","completeAction","CompleteFetchingOffers","offerInstances","shouldFetchOffers","orderBy","Issuer","Investor","Group","FetchingOffers","filterOffersByName","nameFilter","FilterOffersByName","isFilteringByName","offerInstance","projectDetail","offerInstancesFilteredByName","fetchingOffers","offersFetched","filteringOffersByName","currentPage","exportingCsv","isFetchingOffers","successfullyFetchedOffers","hasOffersForCurrentFilters","isFilteringOffersByName","hasErrorFetchingOffers","hasErrorExportingCsv","errorExportingCsv","hasGroupsSelect","groupsSelect","offersTableReducer","SetTableUser","setTableUserAction","completeFetchingOffersAction","FilterChanged","filterChangedAction","filterOffersByNameAction","CancelFilteringOffersByName","ChangePage","changePageAction","ChangeRowsPerPage","changeRowsPerPageAction","ExportingCsv","CompleteExportingCsv","completeExportingCsvAction","CustomLink","link_style","childComponent","activeColor","activeUnderline","isDraftProjectNotSubmitted","isProjectCreatedByGroupAdmin","createdByGroupAdmin","isImagePitchCover","pitchCover","isProjectPublic","isProjectRestricted","isProjectPrivate","shouldHideProjectInformationFromUser","isProjectOwner","toRGBWithOpacity","rgbColor","colorString","get","rgb","hex","OffersTable","directTableUser","filterChanged","cancelFilteringOffersByName","exportCsv","tableAdmin","TableContainer","Box","ImportExportOutlined","CreateOutlined","display","alignItems","bgcolor","grey","InputBase","startAdornment","justifyContent","Refresh","paddingY","Select","input","OutlinedInput","MenuItem","LivePitch","TemporarilyClosed","ExpiredPitch","flexDirection","fundRequired","Number","toLocaleString","postedDate","ManageSystemAttributesState","currentTableUser","shouldSetTableUser","groupsOfMembershipResponse","isTableAdminUser","fetchGroups","allGroupsResponse","Footer","paddingX","borderTop","borderColor","minHeightScreen","bottom","marginY","Profile","legalDocuments_userID","userLegalDocumentsLoaded","userLegalDocumentsBeingLoaded","investorSelfCertificationAgreement_userID","investorSelfCertificationAgreementLoaded","investorSelfCertificationAgreementBeingLoaded","legalDocuments_setUserID","getUserLegalDocuments","investorSelfCertificationAgreement_setUser","handleEditUser","editUserLocally","property","handleCreateBusinessProfileTextChanged","fieldType","toggleTradingAddressSameAsRegisteredOffice","checked","handleFilesChanged","deleteToBeUploadedFile","deleteUploadedFile","renderSelfCertificationAgreement","investorSelfCertificationAgreement","investorSelfCertificationAgreementCheckBox1Checked","investorSelfCertificationAgreementCheckBox2Checked","investorSelfCertificationAgreementCheckBox3Checked","investorSelfCertificationAgreementStatementType","investorSelfCertificationAgreement_handleCheckBoxChanged","investorSelfCertificationAgreement_handleStatementTypeChanged","setInvestorSelfCertificationAgreement","agreedDate","maxHeight","overflowY","FormGroup","row","FormControlLabel","control","Checkbox","labelPlacement","renderBusinessProfile","userEdited","createBusinessProfile","addNewDirector","newDirectorText","searchAddress","toggleEnterAddressManually","resetCreatingBusinessProfile","handleRecommendedAddressSelected","toggleExpandBusinessProfileFillingForInvestor","uploadBusinessProfile","logoItem","videoItem","FormLabel","companyName","editUserActions","registrationNo","address1","address2","address3","townCity","sector","Sectors","directors","director","ListItemSecondaryAction","deleteDirectorTemporarily","toggleAddNewDirector","addNewDirectorTemporarily","companyWebsite","cancelEditingUser","commitUserProfileChanges","expandBusinessProfileFilling","required","createBusinessProfileActions","FormHelperText","registeredOfficeSearchPostcode","disableRipple","registeredOfficeEnterAddressManually","registeredOfficeRecommendedAddresses","address_list","enter_address_manually","tradingAddressSameAsRegisteredOffice","tradingAddressSearchPostcode","tradingAddressEnterAddressManually","tradingAddressRecommendedAddresses","upload_files_area_style","logoToBeUploaded","OverlayTrigger","trigger","placement","flip","overlay","Tooltip","videoToBeUploaded","shouldUploadButtonBeDisabled","startListeningForLegalDocumentsChanged","stopListeningForLegalDocumentsChanged","linkedin","checkBox1Ticked","checkBox2Ticked","checkBox3Ticked","statementType","userLegalDocuments","legalDocumentsLoaded","legalDocumentsBeingLoaded","toBeUploadedLegalDocuments","filesToBeUploaded","fileUploadErrorMessage","fileUploadErrorSnackbarOpen","fieldName","fieldValue","selectedAddress","Object","assign","isEditingExistingBusinessProfile","userRef","investorSelfCertificationAgreementsActions","agreementObject","agreement","legalDocumentsActions","updatedLegalDocuments","doc","reader","FileReader","addEventListener","fileRead","preview","LegalDocuments","readAsDataURL","uploadFilesActions","handleFileError","errorMessage","charAt","closeFileUploadSnackbarError","resetErrorMessageWhenFileUploadSnackbarExited","updatedFilesToBeUploaded","pitchPresentationDocument","pitchSupportingDocuments","updateLegalDocuments","waitingForUploadingReferences","TOGGLE_NOTIFICATIONS","toggleNotifications","manageNotifications","notificationsAnchorEl","currentTarget","LOADING_NOTIFICATIONS","FINISHED_LOADING_NOTIFICATIONS","notificationsListener","NOTIFICATIONS_LIST_CHANGED","NotificationsBox","loadingNotifications","notificationsLoaded","startListeningForNotificationsChanged","stopListeningForNotificationsChanged","deleteANotification","Popper","Boolean","anchorEl","disablePortal","transition","modifiers","enabled","preventOverflow","boundariesElement","TransitionProps","Fade","clear_all_text","minHeight","notifications_placeholder_icon","notification1","notification2","divider","notification_item","notification_item_icon","notificationsActions","existingNotification","notificationIndex","ExploreGroupsEvents","ExploreOffersLocalState","searchFilter","sectorFilter","maxOffersPerPage","isSearchFilterActive","exploreOffersReducer","ClearSearchFilter","PaginationChanged","paginationChangedAction","getGroupLogo","CoverMaxHeight","OfferItem","cover","getPitchCover","light","right","noWrap","RiskWarning","systemAttributes","riskWarningFooter","splits","join","urlText","whiteSpace","ExploreOffers","Phase","clearSearchFilter","paginationChanged","onSearchEnter","paginationPages","paginationIndices","startIndex","endIndex","calculatePaginationIndices","Pagination","Visibility","Sector","AccessRequestRepository","requestID","ClientEmailTypes","ExploreGroupsLocalState","accessRequestsInstances","FetchingGroups","CompleteFetchingGroups","groupsResponse","fetchAccessRequests","accessRequestInstancesResponse","accessRequestInstances","filterGroupsByGroupFilter","groupsFiltered","satisfiedFilter","accessRequestInstance","FilterGroupsByGroupFilter","maxGroupsPerPage","fetchingGroups","groupsFetched","filteringGroupsByName","isFetchingGroups","successfullyFetchedGroups","isFilteringGroupsByName","hasGroupsForCurrentFilters","isSendingAccessRequest","sendingAccessRequestToGroup","isRemovingAccessRequest","removingAccessRequestFromGroup","exploreGroupsReducer","completeFetchingGroupsAction","FilterGroupsByName","CancelFilterGroupsByName","filterGroupsByGroupFilterAction","SendingAccessRequest","sendingAccessRequestAction","errorSendingAccessRequest","CompleteSendingAccessRequest","completeSendingAccessRequestAction","updatedAccessRequestInstances","RemovingAccessRequest","removingAccessRequestAction","errorRemovingAccessRequest","CompleteRemovingAccessRequest","completeRemovingAccessRequestAction","GroupItem","sendAccessRequest","removeAccessRequest","groupMember","find","hasRequestedToAccessGroup","Card","CardActionArea","CheckCircle","CardActions","sendingAction","createAccessRequest","currentAccessRequestInstances","removingAction","accessRequestIndex","accessRequest","ExploreGroups","filterGroupsByName","cancelFilteringGroupsByName","xl","FeedbackSnackbarEvents","EmailRepository","FeedbackSnackbarTypes","openFeedbackSnackbar","Open","snackbarType","ResourcesEvents","Success","feedbackSnackbarReducerNew","openFeedbackSnackbarAction","Close","ManageSectorsEvents","toggleContactResourceDialog","DetailedPageToggleContactDialog","detailedPageContactDialogOpen","detailedPageSendingContactEmail","isDetailedPageSendingContactEmail","resourcesReducer","DetailedPageSendingContactEmail","detailedPageErrorSendingContactEmail","DetailedPageCompleteSendingContactEmail","detailedPageCompleteSendingContactEmailAction","ContactResourceDialog","resourceEmail","ResourcesLocalState","toggle","sendContactEmail","receiver","sender","userName","userCompanyName","sendEmail","ContactResource","FeedbackSnackbarNew","FeedbackSnackbarLocalState","close","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","TransitionComponent","transitionDuration","enter","exit","Alert","severity","keltieLogo","sullivanFountainImg","richardLawrenceImg","keltieDocuments","keltieVideos","Keltie","AttachFile","clone","ResourceItem","resource","founderCatalystLogo","justynWaterworthImg","samSimpsonImg","charlesFrankImg","founderCatalystResources","FounderCatalyst","grantFundingLogo","grantFundingResources","img","GrantFunding","MerixSolution","MerixSolution3","MerixStudioResources","MerixStudio","resources","Resources","IssuerDashboard","setDataForComponents","editUserProfile_userEdited","editUserProfile_setOriginalUserAndEditedUser","renderPageContent","queryString","location","tab","renderPageTitle","sidebar","shadow","docked","onSetOpen","transitions","content","Badge","badgeContent","invisible","InvestorDashboard","clubAttributesLoaded","isValidEmailAddress","serverURL","requestConfig","post","TOGGLE_INVITATION_DIALOG","toggleInvitationDialog","INVITATION_DIALOG_INPUT_CHANGED","INVITATION_DIALOG_SEND_BUTTON_CLICKED","INVITATION_DIALOG_SEND_RESULT_CHANGED","SEND_INVITATION_PROCESSING","SEND_INVITATION_INVITED_BEFORE","SEND_INVITATION_USER_CANNOT_BE_INVITED","SEND_INVITATION_ERROR_HAPPENED","SEND_INVITATION_SUCCESS","InvitationDialog","renderRespondCode","sendResult","sendStatusExtraInfo","res","invitationDialogOpen","userType","sendButtonClick","handleInputChanged","sendInvitation","disableTypography","RadioGroup","Radio","manageInvitationDialog","invitationDialogActions","currentGroupAdmin","invitedBefore","userIsAnIssuerOfAnotherGroup","extraInfo","invitedID","invitedDate","emailUtils","groupName","groupLogo","groupWebsite","website","websiteURL","receiverName","signupURL","SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED","SUPER_ADMIN_SETTINGS_INPUT_CHANGED","SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED","SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","SystemAttributesRepository","ManageSystemAttributesEvents","setSectors","sectors","SetSectors","toggleAddNewSector","ToggleAddNewSector","DocumentsDownloadEvents","systemAttributesLoaded","loadingSystemAttributes","isLoadingSystemAttributes","manageSystemAttributesReducer","LoadingSystemAttributes","FinishedLoadingSystemAttributes","finishedAction","addingNewSector","newSector","savingSectors","isSavingSectorsChanges","manageSectorsReducer","setSectorsAction","AddNewSectorTextChanged","addNewSectorTextChangedAction","SavingSectorsChanges","errorSavingSectors","CompletedSavingSectorsChanges","completedSavingSectorsChanges","ManageSectors","ManageSectorsLocalState","addNewSector","deleteSector","saveSectorsChanges","cancelSectorsChanges","eSector","updateSystemAttributes","SuperAdminSettings","handleExpandPledgeFAQPanel","FAQ","isExpanded","handleQuillEditorChanged","delta","source","initializeClubAttributesEdited","clubAttributesEdited","addNewPledgeFAQ","addedPledgeQuestion","addedPledgeAnswer","expandedPledgeFAQ","editExpandedPledgeFAQ","editedPledgeQuestion","editedPledgeAnswer","toggleAddNewPledgeFAQ","submitNewPledgeFAQ","toggleEditExpandedPledgeFAQ","saveEditedPledgeFAQ","deleteExistingPledgeFAQ","saveEditedQuill","supportEmail","multiline","rowsMax","ExpansionPanel","frequently_asked_question_box","expanded","ExpansionPanelSummary","expandIcon","question","ExpansionPanelDetails","answer","modules","privacyPolicy","termsOfUse","rows","riskWarning","createPitchTermsAndConditions","superAdminSettings","isPropertyOfClubAttributes","superAdminSettingsActions","faq","editedFAQ","toolbar","GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED","GROUP_ADMIN_SETTINGS_CHANGED","GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR","GroupAdminSettings","initializeGroupAttributesEdited","groupAttributesEdited","groupDescription","handlePitchExpiryDateChanged","handleSavePitchExpiryDate","handleCancelEditingPitchExpiryDate","saveGroupDetails","cancelEditingGroupDetails","saveColor","cancelEditingColor","helperText","autoOk","inputVariant","format","minDate","defaultPitchExpiryDate","InputAdornmentProps","projectVisibility","groupAdminSettings","isPropertyOfGroupAttributes","updateValue","shouldUpdateDatabase","groupAdminSettingsActions","NaN","groupSettings","InfoOverlay","LOADING_INVITED_USERS","FINISHED_LOADING_INVITED_USERS","INVITED_USERS_TOGGLE_SEARCH_MODE","INVITED_USERS_SEARCH_VARIABLE_CHANGED","getUpdatedInvitedUsers","sourceInvitedUsers","searchText","filterRegistrationStatus","filterUserType","filterMembers","filterGroup","currentGroupProperties","matchedInvitedUsers","satisfiedRegistrationStatusFilter","satisfiedUserTypeFilter","satisfiedGroupMembersFilter","satisfiedGroupFilter","FILTER_REGISTRATION_STATUS_ALL","FILTER_GROUP_MEMBERS_ALL","FILTER_HOME_MEMBERS","FILTER_PLATFORM_MEMBERS","INVITED_USERS_CHANGE_PAGE","INVITED_USERS_CHANGE_ROWS_PER_PAGE","INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED","INVITED_USERS_REQUESTING_CSV_STATE_CHANGED","invitedUsersListener","INVITED_USERS_CHANGED","InvitedUsers","invitedUsersLoaded","startListeningForInvitedUsersChanged","renderInvitedUsersRows","invitedUsersPage","invitedUsersRowsPerPage","invitedUsersInSearchMode","resendInvite","renderedInvitedUsers","matchedUsersInvitedByTheGroup","user1","user2","matchedUsersRequestedToJoin","requestedToJoinDate","renderInvitedUserRegistrationStatus","joinedDate","msgObj","invitedUsersBeingLoaded","invitedUserSearchText","systemGroups","groupsLoaded","requestingCsv","addingMembersFromOneGroupToAnotherGroup","toggleSearchMode","exportToCsv","addMembersFromOneGroupToAnotherGroup","InputLabel","labelWidth","basis","renderInvitedUsersTable","handleChangeTablePage","handleChangeTableRowsPerPage","manageSystemGroups","prevMatchedInvitedUsers","newSearchText","newRegistrationStatusFilter","newUserTypeFilter","newGroupFilter","newMembersFilter","invitedUsersActions","shouldAddInvitedUser","existingInvitedUser","shouldChangeInvitedUser","invitedUserIndex","fromGroup","toGroup","addUserType","AddAngelNetworkDialog","uploadMode","uploadProgress","addAngelNetworkDialogOpen","angelNetworkName","angelNetworkUsername","loadingPlainLogo","imgUploadError","loadingLogoWithText","imgUploadErrorSnackbarOpen","addButtonClicked","toggleAddAngelNetworkDialog","addNewAngelNetwork","closeErrorSnackbar","resetImageFileErrorMessageWhenSnackbarExited","onExited","SnackbarContent","manageAddAngelNetworkDialog","addResult","addAngelNetworkDialogActions","TOGGLE_ADD_ANGEL_NETWORK_DIALOG","ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED","handleAddAngelNetworkInputChanged","ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED","ADD_ANGEL_NETWORK_RESULT_CHANGED","uploadLogo","uploadedPlainLogo","uploadedLogoWithText","newGroupProperties","dateAdded","makeInvestorsContactDetailsVisibleToIssuers","adder","newGroupAdminEmail","ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE","ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED","ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR","ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR","closeImageFileErrorSnackbar","ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED","LOADING_ANGEL_NETWORKS","FINISHED_LOADING_ANGEL_NETWORKS","ANGEL_NETWORKS_TABLE_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_INPUT_CHANGED","TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE","angelNetworksListener","ANGEL_NETWORKS_IN_TABLE_CHANGED","AngelNetworks","inComponentDidMount","loadingAngelNetworks","angelNetworksLoaded","startListeningForAngelNetworksChanged","renderAngelNetworksTable","inSearchMode","handleAngelNetworksTableInputChanged","angelNetwork1","angelNetwork2","renderAngelNetworkRows","matchedAngelNetworks","renderedAngelNetworks","stopListeningForAngelNetworksChanged","manageAngelNetworks","angelNetworksActions","existingAN","angelNetworkIndex","MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE","MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED","joinRequestsListener","MANAGE_JOIN_REQUESTS_CHANGED","stopListeningForJoinRequestsChanged","JoinRequests","loadingJoinRequests","joinRequestsLoaded","loadJoinRequests","attachListener","joinRequests","startListeningForJoinRequestsChanged","renderJoinRequestsRows","matchedJoinRequests","acceptJoinRequest","rejectJoinRequest","renderedJoinRequests","joinRequest","requestedDate","handleJoinRequestsTableInputChanged","joinRequest1","joinRequest2","manageJoinRequests","manageJoinRequestsActions","pushKey","existingJoinRequest","GROUP_ADMINS_TABLE_SET_GROUP","GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_PAGE_CHANGED","GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE","GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG","GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED","groupAdminsListener","GROUP_ADMINS_TABLE_CHANGED","stopListeningForGroupAdminsChanged","ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL","ADD_NEW_GROUP_ADMIN_STATUS_CHECKING","ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED","GroupAdminsTable","tableGroup","loadingGroupAdmins","groupAdminsLoaded","loadGroupAdmins","addListeners","startListeningForGroupAdminsChanged","getRenderedGroupAdmins","superGroupAdmin","searchedGroupAdmins","groupAdmin1","groupAdmin2","addNewGroupAdminDialogOpen","addNewGroupAdminStatus","handleAddNewGroupAdmin","toggleAddNewGroupAdminDialog","fli","manageGroupAdminsTable","groupAdminsTableActions","existingGroupAdmin","newGroupAdmin","AddGroupAdminDialog","renderStatusMessage","tex","AdminDashboard","activitiesTable_setUser","groupAdminsTable_setGroup","projectsAwaitingDecision","Accordion","card_style","AccordionSummary","AccordionDetails","card_details_expansion","currentUserLoaded","AddAngelNetWorkDialog","newGroup","prevTableGroup","onDeleteDocument","documents","preview_icon","file_name","file_size","DocumentsDownload","onDocumentClick","deleteEnable","rel","SELECT_PROJECT_VISIBILITY_SET_PROJECT","setProject","HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED","handleProjectVisibilityChanged","SelectPitchVisibility","manageSelectProjectVisibility","selectProjectVisibilityActions","initState","recoveredFromPreviousState","projectBeforeEdited","projectEdited","projectEditedLoaded","requestToLoadData","projectIDToBeLoadedAfterSavingFirstTime","saveProgress","progressBeingSaved","draftBeingDeleted","createProject","activeStep","groupIssuerCreateOfferFor","pitchSector","pitchProjectName","pitchProjectDescription","pitchExpiryDate","pitchAmountRaisedToDate","pitchRaiseRequired","howFundIsBeingRaised","financialRound","pitchPostMoneyValuation","detailsAboutEarlierFundraisingRounds","pitchInvestorsCommitted","hasRaisedMoneyBefore","pitchCoverVideoURL","pitchCoverTypeSelected","pitchPresentationText","pitchPresentationPlainText","pitchPublishCheck","pitchNextStepButtonTarget","pitchPublishErrorMessageShowed","uploadFileProgress","uploadFileMode","openUploadingProgressDialog","acceptedTermsAndConditions","agreedToShareRaisePublicly","agreedToReceiveLocalInvestmentInfo","qibSpecialNews","CreatePitchPageMain","navigateToTheSamePageWithActiveStepSaved","selectProjectVisibility_setProject","projectEditedSaveModeRefListener","orderByKey","amountRaised","postMoneyValuation","investorsCommitted","presentationText","handleNextStepClick","coverItem","presentationDocument","uploadProject","handleSaveProgressClick","handleBackClick","handleSelectPitchCoverTypeClick","supportingDocuments","handleCreatePitchInputChanged","handlePitchEditorChanged","presentationItem","projectRef","projectStorageRef","uploadMultipleFiles","successful","updatedProject","edited","totalRaise","pitchSupportingDocumentsRealtimeDB","presentationPlainText","pitchPresentationDocumentRealtimeDB","pitchCoverRealtimeDB","acceptedTCsObj","projectObj","filesArray","pitchStorageRef","docRef","handleDeleteDocument","attachNextStepButtonRef","handlePopoverErrorMessageClose","handleDownloadDocumentDeleteClick","updatedProjectEdited","handleCloseErrorSnackbar","reason","errorSnackbarOpen","handleDateChanged","handleCheckboxChanged","handleDeleteDraftClick","deleteMultiplesOnStorage","selectedProjectVisibilitySetting","reload","deleteASingleFileOnStorage","previousState","createProjectState","onSelectPitchCoverTypeClick","onFilesChanged","onFilesError","onInputChanged","onPitchEditorChanged","onPopoverErrorMessageClose","onNextStepClick","onBackClick","onDownloadDocumentDeleteClick","onDateChanged","onCheckboxChanged","onSaveProgressClick","onDeleteDraftClick","CreateProject","renderPitchPublishErrorMessage","Stepper","alternativeLabel","Step","StepLabel","round","playsInline","file_drop_zone","Overlay","show","Popover","Fab","thickness","left","renderUploadFileMode","ProfilePageViewOnly","userToBeViewed","userToBeViewedLoaded","userToBeViewedInvitedLoaded","loadingUserToBeViewed","loadUserToBeViewedProfile","userToBeViewedID","userToBeViewedInvited","renderUserStatus","statusMessage","pictureItem","divider_style","SelectPledgeVisibility","TOGGLE_CREATE_PLEDGE_DIALOG","toggleCreatePledgeDialog","CREATE_PLEDGE_DIALOG_SET_PROJECT","CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED","CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED","CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED","CREATE_PLEDGE_STATUS_VALID","CREATE_PLEDGE_STATUS_MISSING_FIELDS","CREATE_PLEDGE_STATUS_INVALID_FUND","CREATE_PLEDGE_STATUS_INVALID_DATE","CreatePledgeDialog","renderCreatePledgeError","createStatus","extraNotes","createPledge","AppBar","Toolbar","manageCreatePledgeDialog","creatPledgeDialogActions","primaryOfferObj","shouldSendNotificationToIssuer","MANAGE_PLEDGES_TABLE_SET_PROJECT","MANAGE_PLEDGES_TABLE_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE","MANAGE_PLEDGES_TABLE_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_INPUT_CHANGED","pledgesListener","MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED","ContactPitchOwnerDialogEvents","shouldShowRiskWarningOnDownload","DocumentsDownloadLocalState","onAcceptRiskWarningClick","onCancelRiskWarningClick","riskWarningTextSplits","openRiskWarningDialog","shouldShowRiskWarning","OpenRiskWarningDialog","selectedDocument","CloseRiskWarningDialog","GroupDetailsEvents","toggleContactPitchOwnerDialog","projectOwnerEmail","ToggleContactDialog","contactDialogOpen","sendingContactEmail","isSendingContactEmail","contactPitchOwnerDialogReducer","toggleContactDialogAction","SendingContactEmail","errorSendingContactEmail","CompleteSendingContactEmail","completeSendingContactEmailFunction","ContactPitchOwnerDialog","ContactPitchOwnerDialogLocalState","toggleContactDialog","ContactPitchOwner","MAX_COVER_HEIGHT_IN_MOBILE_MODE","MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE","ProjectDetailsMain","dataLoaded","dataBeingLoaded","projectLoaded","mainBody","adminOfferStatesActiveStep","votesLoaded","currentUserPledgeIndex","investorPledge","investorPledgeLoaded","pledgesLoaded","projectIssuer","projectIssuerLoaded","loadDataWhenUIElementsChange","pledgesTable_setProject","commentsLoaded","votesListener","existingVote","voteIndex","updatedVotes","voteRemovedID","existingPledge","pledgeIndex","updatedPledges","currentPledge","pledgeRemovedID","returnedComments","updatedComments","repliedBy","commentsWithReplies","commentsListener","currenComment","currentComment","currentCommentText","existingComment","commentIndex","commentsRepliesListener","correspondingCommentIndex","commentID","existingReply","replyIndex","handleVotePitch","voteVal","currentVoteObj","getInvestorVote","newVoteObj","attachProjectChangedListener","projectListener","detachProjectChangedListener","handleDocumentClick","handleMakeProjectGoLiveDecision","handleMakeProjectGoToPledgePhaseDecision","handleMakeProjectPledgeGoLiveDecision","handleMainBodyTabChanged","handlePostACommentClick","commentDialogOpen","handleCloseCommentDialog","commentText","commentSubmitClick","changedPitchExpiryDate","handleSubmitCommentClick","commenterANID","commentedDate","handleCancelUpdateCurrentComment","handleSubmitUpdateCurrentComment","newComment","handleToggleReplyToComment","replyEdited","replyingToComment","replyText","handleSubmitCommentReply","updatedCommentReply","replyBeforeUpdating","replyAfterUpdating","repliedDate","commentReply","handleDeleteCommentReply","commentReplyID","handleAdminOfferStatesStepClick","toggleRejectFeedback","addingRejectFeedback","rejectFeedback","sendProjectBackToIssuer","sendingProjectBack","feedback","userBeingLoaded","pledgesTable_stopListeningForPledgesChanged","createPledgeDialog_toggleDialog","createPledgeDialog_setProject","onVote","onMakeProjectGoLiveDecision","onMakeProjectGoToPledgePhaseDecision","onMakeProjectPledgeGoLiveDecision","onTabChanged","onPostACommentClick","onCancelUpdateCurrentComment","onSubmitUpdateCurrentComment","onToggleReplyToComment","onSubmitCommentReply","onDeleteCommentReply","onAdminOfferStatesStepClick","onCommentTextChanged","onSubmitCommentClick","ProjectDetails","sortedComments","comment1","comment2","currentCommentIndex","reverse","reply1","reply2","shouldHideInformation","gray_text","pip","renderProjectStatus","renderInvestorSelfCertifyReminder","sticky_body_sections_bar","Tabs","indicatorColor","scrollButtons","Tab","main_body_section","nonLinear","orientation","completed","StepButton","StepContent","admin_state_control_box","dangerouslySetInnerHTML","__html","border_box","stt","shouldVoteDisabled","displayVote","yesVotes","noVotes","investorVoteIndex","CommentDialog","DialogContentText","CommentReplyInputArea","prevProject","managePledgesTable","pledgesTableActions","createPledgeDialogActions","faq_box","PrivacyPolicyPage","TermsOfUsePage","RiskWarningPage","CreatePitchTermsAndConditionsPage","subjects","submitClick","sending","hasSetData","ContactUs","onSubmitClick","senderName","senderPhone","ContactUs2","HelpPage","autoSwitchToAppropriateHelpTab","helpType","autoSwitching","handleTabChanged","expandedPanel","handleExpandPanel","panel","renderGroupAdminHelp","image_style","renderInvestorHelp","renderIssuerHelp","SignInEvents","loadingData","sendingAccessRequest","removingAccessRequest","successfullyLoadedData","members","offers","groupDetailsReducer","LoadingData","CompleteLoadingData","completeLoadingDataAction","GroupDetails","GroupDetailsLocalState","hasErrorLoadingData","hasAccessRequestsBeenSatisfied","getGroup","groupResponse","fetchGroupMembers","membersResponse","offersResponse","MarketingPreferencesPage","ProfilePageEditable","userToBeEditedID","editUserProfile_startOriginalUserChangedListener","userToBeEdited","userToBeEditedLoaded","loadingUserToBeEdited","activitiesTable_stopListeningForActivitiesChanged","editUserProfile_stopOriginalUserChangedListener","adminLoaded","projectsTable_user","projectsTable","userChanged","Front","flexGrow","ResetPasswordEvents","toggleResetPasswordDialog","ToggleResetPasswordDialog","signInEmail","signInPassword","errorSignInEmail","errorSignInPassword","showResetPasswordDialog","resetPasswordDialogEmail","resetPasswordDialogProcessing","resetPasswordDialogEmailSent","isProcessingResetPasswordRequest","signInReducer","ResetAllStates","TextChanged","textChangedAction","TogglePasswordVisibility","SignInEmailError","SignInPasswordError","ClearErrors","resetPasswordDialogError","ProcessingResetPasswordRequest","CompleteProcessingResetPasswordRequest","mapStateToProps","SignInLocalState","mapDispatchToProps","togglePasswordVisibility","onSignInClick","allowSignIn","onSendResetPasswordClick","SignInNew","ResetPasswordDialogComponent","Header","homUrl","dashboardUrl","signInUrl","navigatingFromSignInOrSignUpToDashboard","navigatingToSignIn","navigatingToError","GroupRoute","authListener","validateRouteAndAuthentication","updateRouteAndParams","loadSystemAttributes","validateGroupUrl","attachAuthListener","onAuthStateChanged","detachAuthListener","dashboardRoute","shouldRedirectToError","showHeader","getSystemAttributes","shouldValidateGroupUrl","validatingGroupUrlAction","finishedLoadingGroupUrlAction","retrievedGroup","SignUpEvents","verifyingCode","codeVerified","actionCode","confirmedPassword","resettingPassword","passwordReset","isResettingPassword","hasErrorResettingPassword","errorResettingPassword","resetPasswordReducer","VerifyingCode","CompleteVerifyingCode","completeVerifyingCodeAction","errorVerifyingCode","ConfirmingResetPassword","CompleteConfirmingResetPassword","completeConfirmingResetPasswordAction","ResetPassword","oobCode","verifyCode","ResetPasswordLocalState","confirmPasswordReset","hasErrorVerifyingCode","successfullyResettingPassword","verifyPasswordResetCode","ResourceDetail","resourceIndex","MediaQueryEvents","invitedUserLoaded","loadingInvitedUser","confirmedEmail","acceptMarketingPreferences","creatingAccount","hasErrorLoadingInvitedUser","errorLoadingInvitedUser","notFoundInvitedUser","isCreatingAccount","hasErrorCreatingAccount","errorCreatingAccount","signUpReducer","LoadingInvitedUser","CompleteLoadingInvitedUser","completeLoadingInvitedUserAction","InputFieldChanged","inputFieldChangedAction","CreatingAccount","successfullyCreatedAccount","CompleteCreatingAccount","completeCreatingAccountAction","hasRegistered","SignUpNew","invitedUserId","loadInvitedUser","SignUpLocalState","handleInputFieldChanged","createAccount","inputFieldType","inputFieldName","inputFieldValue","inputFieldChecked","toLocaleLowerCase","signUp","isPublicRegistration","AppRouter","exact","render","FeedbackSnackbar","resetStatesWhenSnackbarClosed","LOADING_CLUB_ATTRIBUTES","CLUB_ATTRIBUTES_LOADED","CLUB_ATTRIBUTES_CHANGED","screenSizeQueries","mobileScreen","matchMedia","tabletScreen","laptopScreen","desktopScreen","ManageSystemIdleTimeEvents","listener","MediaQueryChanged","LOADING_SYSTEM_GROUPS","FINISHED_LOADING_SYSTEM_GROUPS","groupsListener","SYSTEM_GROUPS_CHANGED","nowIdle","nowActive","manageSystemIdleTimeReducer","OnActive","OnIdle","App","cancelAllListeners","stopListeningForUserProfileChanges","stopListeningForGroupsUserIsIn","joinRequestsTable_stopListeningForJoinRequestsChanged","adminDashboard_stopListeningForInvitedUsersChanged","groupAdminsTable_stopListeningForGroupAdminsChanged","stopListeningForSystemGroupsChanged","loadClubAttributesIfNotLoaded","clubAttributesBeingLoaded","loadSystemGroups","loadingGroups","attachListeners","initializeAuthState","getUserProfileAndValidateUser","startListeningForClubAttributesChanged","startListeningForUserProfileChanges","startListeningForAngelNetworkChanged","startListeningForGroupsUserIsIn","startListeningForSystemGroupsChanged","getTheme","addMediaQueryListeners","removeMediaQueryListeners","stopListeningForAngelNetworkChanged","stopListeningForClubAttributesChanged","onIdle","DateFnsUtils","signingIn","preventValidatingUserWhenSigningUp","groupFound","matches","removeEventListener","forumsActions","existingGroup","groupIndex","hostname","ProfileEvents","loadingGroupsUserIsIn","groupsUserIsInLoaded","authReducer","shouldPrevent","singingIn","createBusinessProfileReducer","editedDirectors","editUserReducer","editImageReducer","editVideoReducer","uploadFilesReducer","uploadingStatusReducer","uploadingStatusActions","changePasswordReducer","clubAttributesReducer","clubAttributesActions","CreateForum","createForumName","createForumDesc","createForumError","createNewForum","createForumAuthor","forumBeforeEditing","forumAfterEditing","lastEdited","dateCreated","CreateThread","createThreadName","createThreadBriefDesc","createThreadMessage","createThreadError","createNewThread","threadBeforeEditing","threadAfterEditing","IndividualForum","tableChangePage","tableChangeRowsPerPage","renderThreads","forumThreadsLoaded","forumThreads","threadsSortedMode","threadsTablePage","threadsTableRowsPerPage","clickOnAParticularThread","sortedThreads","SORT_BY_CURRENT_USER","thread1","thread2","SORT_BY_LAST","SORT_BY_OLDEST","ButtonBase","threadsLoadMode","goBackToForumsList","threadBeforeChanging","threadAfterChanging","CreateReply","threadReplySubject","threadReplyMessage","createThreadReplyError","submitThreadReply","thread_reply_style","forumThreadSelected","threadReplyBeforeEditing","threadReplyAfterEditing","replyDate","AVATAR_MAX_HEIGHT","IndividualThread","renderReplies","forumThreadReplies","threadInReplyMode","forumThreadRepliesLoaded","goBackToThreadsList","threadReplies","threadReplyBeforeChanging","threadReplyAfterChanging","Forums","addAndRemoveListeners","forumsLoaded","startListeningForForumsChanged","startListeningForThreadsChanged","startListeningForThreadRepliesChanged","renderContent","modeForums","forumsSortedMode","forumsLoadMode","forumsTablePage","forumsTableRowsPerPage","sortedForums","forum1","forum2","renderForums","clickOnAParticularForum","onForumClick","toggleEditForum","ForumRow","existingForum","forumsChanged","existingForumIndex","existingThread","threadsChanged","existingThreadIndex","repliesChanged","existingReplyIndex","forumBeforeChanging","forumAfterChanging","forumsReducer","notificationsReducer","mediaQueryActions","dashboardSidebarReducer","isTablet","mediaQueryReducer","superAdminSettingsReducer","groupAdminSettingsReducer","manageANIDFromParamsActions","legalDocumentsReducer","invitedUsersReducer","invitationDialogReducer","addAngelNetworkDialogReducer","manageGroupFromParamsReducer","investorSelfCertificationAgreementsReducer","angelNetworksReducer","manageJoinRequestsReducer","loadingPledges","matchedPledges","pledgesTableReducer","feedbackSnackbarReducer","activitiesTableReducer","manageJSONCompareChangesDialogReducer","manageJSONCompareChangesDialogActions","groupAdminsTableReducer","createPledgeDialogReducer","selectProjectVisibilityReducer","manageSystemGroupsReducer","manageSystemGroupsActions","LOADING_MARKETING_PREFERENCES","FINISHED_LOADING_MARKETING_PREFERENCES","loadingMarketingPreferences","marketingPreferencesLoaded","manageMarketingPreferencesReducer","manageMarketingPreferencesActions","CREATE_PROJECT_SET_COMPONENT_PROPS","CREATE_PROJECT_LOADING_DATA","CREATE_PROJECT_FINISHED_LOADING_DATA","CREATE_PROJECT_DRAFT_PROJECT_CHANGED","componentContext","createNewPitch","pitchExpiredDate","snackbarErrorMessage","createProjectReducer","createProjectActions","context","projectChanged","documentsDownloadReducer","openRiskWarningDialogAction","InputCategories","EditImageDialogEvents","BusinessProfileEvents","AddressStates","EditImageDialogModes","initialBusinessProfileState","editedBusinessProfile","registeredOfficeState","EnterPostcode","tradingAddressState","initialEditImageDialogState","AddPhoto","rotate","savingImage","deletingImage","hasInitiallySetCopiedUser","PersonalDetailsState","BusinessProfileState","EditImageDialogState","profileReducer","SetCopiedUser","setCopiedUserAction","copiedUser","firstTimeSetCopiedUser","ToggleDialog","toggleDialogAction","rawImage","SetEditor","setEditorAction","ChangeMode","changeModeAction","SuccessfullySelectedImage","successfullySelectedImageAction","selectedImage","SliderChanged","sliderChangedAction","SavingImage","savingImageAction","saving","DeletingImage","deletingImageAction","deleting","CheckBoxChanged","businessProfileCheckBoxChangedAction","FindingAddress","findingAddressAction","FindingAddresses","FinishedFindingAddress","finishedFindingAddressAction","foundAddressesForRegisteredOffice","foundAddresses","foundAddressesForTradingAddress","errorFindingAddressesForRegisteredOffice","errorFindingAddressesForTradingAddress","ChangeAddressState","changeAddressStateAction","addressState","rootReducer","combineReducers","ManageSystemIdleTimeState","newExploreGroupsReducer","ProfileLocalState","manageMarketingPreferences","manageCreateProject","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"kHAAA,OAAe,cAA0B,kC,uDCAzC,OAAe,48N,iCCAf,OAAe,wkK,iCCAf,OAAe,cAA0B,wC,6ECAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,oE,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,2E,iCCAzC,OAAe,cAA0B,mF,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,qD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,gE,iCCAzC,OAAe,cAA0B,uE,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,oD,iCCAzC,OAAe,cAA0B,0E,iCCAzC,OAAe,cAA0B,0E,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,oD,iCCAzC,OAAe,cAA0B,oD,iCCAzC,OAAe,cAA0B,iD,iCCAzC,OAAe,cAA0B,oD,gVCqB1BA,G,qBADKC,IAASC,cATd,CACXC,OAAQC,0CACRC,WAAYD,8BACZE,YAAaF,0CACbG,UAAWH,cACXI,cAAeJ,mBACfK,kBAAmBL,eACnBM,MAAON,yC,8DClBEO,EAAY,YASZC,EAA2B,2B,OCgB3BC,EAAyC,GACzCC,EAAmB,GACnBC,EAAe,GAgBtBC,E,4JAEF,WAEI,MAOIC,KAAKC,MANLC,EADJ,EACIA,WAEAC,EAHJ,EAGIA,KACAC,EAJJ,EAIIA,SAEAC,EANJ,EAMIA,QAGJ,OACI,eAACC,EAAA,EAAD,CACIC,IAAKL,EACLM,KA5CW,IA4CLL,EACNM,WAAS,EAHb,UAKI,cAACC,EAAA,EAAD,UA7CgB,IA+CRP,GAhDmB,IAgDUA,EAEzB,iBAhDe,IAmDXA,EAEI,4BAnDH,IAsDOA,GAvDI,IAuD0BA,EAE1B,kBAvDD,IA0DKA,EAEI,sBA3DO,IA8DHA,EAEI,6BAGIA,IAASL,EAEL,kBAGIK,IAASN,EAEL,cAEA,KAS5D,cAACc,EAAA,EAAD,UACI,eAAC,IAAD,CAAUC,QAAM,EAAhB,UACI,cAACC,EAAA,EAAD,CACIC,QAAQ,UACRC,SAAO,EACPC,IAAKZ,EACLa,MAAK,UAAKb,EAAL,OAET,cAACc,EAAA,EAAD,CACIJ,QAAQ,QACRK,MAAO,CACHC,UAAW,IAHnB,SAOQjB,IAASN,EAEL,kDAEA,gDAKpB,cAACwB,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNC,KAAK,QACLC,SAAUtB,IAASN,GAAoBM,IAASL,EAChD4B,QAASrB,EACTc,MAAO,CACHQ,OAAQ,GAPhB,4B,GAzFUC,aA2GfC,eAxHS,SAAAC,GACpB,MAAO,CACH3B,KAAM2B,EAAMC,gBAAgB5B,KAC5BC,SAAU0B,EAAMC,gBAAgB3B,aAIb,SAAA4B,GACvB,MAAO,CACH3B,QAAS,kBAAM2B,ED5BZ,CACHC,KAAMtC,QC0ICkC,CACXK,IAAMhC,YAAW,SAACD,EAAOM,GAAR,OAAgB,cAAC,EAAD,2BAAqBN,GAArB,IAA4BkC,aAAc5B,S,kLCrJlE6B,GAAQ,UACRC,GAAQ,UAGRC,GAAU,UAEVC,GAAa,UAMbC,GAAU,UACVC,GAAW,UACXC,GAAW,UACXC,GAAW,UACXC,GAAW,UAEXC,GAAW,UAQXC,GAAe,UAEfC,GAAgB,UAChBC,GAAgB,UAGhBC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UACfC,GAAe,UAOfC,GAAepC,GACfqC,GA3CW,UA4CXC,GAAa,UAEbC,GAAgC,UAChCC,GAAkC,UAClCC,GAA+B,UCJ7BC,GA1DMC,IAAWC,OAAO,CACnCC,eAAgB,CACZ,SAAU,CACN7D,MAAO8D,GACPC,eAAgB,OAChBC,OAAQ,YAIhBC,sDAAuD,CACnDjE,MAAO8D,GACP,SAAU,CACNC,eAAgB,SAIxBG,2CAA4C,CACxC,SAAU,CACNH,eAAgB,SAIxBI,WAAY,CACRC,WAAY,GACZpE,MAAO8D,IAGXO,iBAAkB,CACdrE,MAAO8D,GACPM,WAAY,IAGhBE,UAAW,CACPC,cAAe,OACfC,SAAU,SAGdC,wBAAyB,CACrBC,OAAO,aAAD,OAAeZ,IACrBa,UAAW,QAGfC,kBAAmB,CACfL,cAAe,QAGnBM,WAAY,CACR7E,MAAO8D,IAGXgB,WAAY,CACR9E,MAAO8D,IAGXiB,WAAY,CACR/E,MAAO8D,MAYR,SAASkB,GAAgBtG,GAC5B,IAMMuG,EANYC,aAAW,CACzBC,KAAM,CACFC,WAAY,SAAA1G,GAAK,OAAIA,EAAM2G,WAC3BrF,MAAOtB,EAAM4G,YAGLC,CAAU7G,GAC1B,OACI,cAAC8G,GAAA,EAAD,CACIC,UAAWR,EAAQE,KACnBO,QAAShH,EAAMgH,QAFnB,SAIKhH,EAAMiH,YAYZ,IAAMC,GAAoBjF,IAAMhC,YAAW,SAACD,EAAOM,GAAR,OAAgB,cAAC6G,GAAA,EAAD,2BAAWnH,GAAX,IAAkBM,IAAKA,EAAK8G,UAAU,WAS3FC,GAAsBpF,IAAMhC,YAAW,SAACD,EAAOM,GAAR,OAAgB,cAAC6G,GAAA,EAAD,2BAAWnH,GAAX,IAAkBM,IAAKA,EAAK8G,UAAU,aCpG7FE,GAAyB,yBAGzBC,GAAuB,iBAGvBC,GAAwB,iBAGxBC,GAAc,QAGdC,GAAiB,WAGjBC,GAAuB,gBAGvBC,GAA+C,sCAG/CC,GAAyB,iBAGzBC,GAA6B,qBAG7BC,GAA8B,uBAG9BC,GAAsB,eAGtBC,GAAyB,kBAGzBC,GAAkD,wCAGlDC,GAAiB,WAGjBC,GAAwB,iBAGxBC,GAAgB,UAGhBC,GAAc,QAGdC,GAAoB,aAGpBC,GAAsB,gBAGtBC,GAAe,SAGfC,GAAsB,eAGtBC,GAA6B,qBAkB7BC,GAAwB,iBAGxBC,GAAc,QAGdC,GAAqB,SAGrBC,GAAyB,kBAUzBC,GAAqC,sBAErCC,GAAsC,uBAItCC,GAAsB,QAiGtBC,IAAwB,EAkExBC,GAAc,CAAC,gBAAiB,MAAO,OAAQ,OAAQ,MAAO,MAAO,SAUrEC,GAAmB,CAAC,WAAY,OAAQ,WAAY,WAAY,YAsBhEC,GAAyB,KAEzBC,GAAgC,GAChCC,GAAmC,IAGnCC,GAA2C,GAE3CC,GAA6B,gB,sCCzT7BC,GAAiB,WAE1B,OADa,IAAIC,MACLC,WAUHC,GAAkC,SAAAC,GAC3C,IAAIC,EAAa,IAAIJ,KACfK,EAAc,IAAIL,KAExB,OADAI,EAAWE,QAAQD,EAAYE,UAAYJ,GACpCC,EAAWH,WAUTO,GAAuB,SAAAC,GAEhC,OADa,IAAIT,KAAKS,GACVC,sBAUHC,GAA2B,SAAAF,GACpC,IAAMG,EAAO,IAAIZ,KAAKS,GACtB,MAAM,GAAN,OAAUG,EAAKF,qBAAf,YAAuCE,EAAKC,uBAgD1CC,GAAoB,CAAC,WAAY,WAAY,eAAgB,WAAY,WAAY,WAAY,WAAY,WAAY,YAAa,WACxI,WAAY,YAAa,aAAc,WAAY,WAAY,WAAY,WAAY,WACvF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAOvFC,GAAwB,SAAAC,GACjC,IAAIC,EAAW,EAmCf,OA/BIA,EADAD,EAASE,OAFK,EAhBY,EAEL,EAuBrBF,EAASE,OATK,IASkBF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAUH,EAASG,MAAM,mCAKnGH,EAASE,OAdK,IAeZF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAYH,EAASG,MAAM,QAChEH,EAASG,MAAM,mCAAuCH,EAASG,MAAM,UAAYH,EAASG,MAAM,mCAKvGH,EAASE,OArBK,GAqBiBF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAUH,EAASG,MAAM,kCAKlGH,EAASE,OAAS,IAAMF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAUH,EAASG,MAAM,mCAIW,IAAtGL,GAAkBM,WAAU,SAAAC,GAAW,OAAIA,EAAYC,gBAAkBN,EAASM,mBAClFL,EA/C0B,GAkDvBA,GASEM,GAA0B,SAAAC,GACnC,IAAKA,EACD,OAAO,KAiBX,OADgB,IAAIC,6BAA0BD,EAdpC,IAeOE,WASRC,GAAW,SAAClB,GACrB,IAAMJ,EAAc,IAAIL,KACxB,GAAIS,EAAeJ,EAAYJ,UAAY,EACvC,OAAO,EAEX,IAAM0B,EAAWC,KAAKC,IAAIpB,EAAeJ,EAAYJ,WACrD,OAAQ0B,EAAQ,OAA0BG,QAAQ,IAQzCC,GAAW,yCAAG,WAAOC,GAAP,gBAAAC,EAAA,4DACK,8BACtBC,EAFiB,yCAEgCF,EAFhC,oBACK,8BADL,4CAIhB,IAAIG,SAAQ,SAACC,EAASC,GACzBC,MAAMJ,GACDK,MAAK,SAAAC,GACF,OAAOA,EAAQC,UAElBF,MAAK,SAAAG,GACF,IAAIF,EAAU,CACVG,aAAc,GACdC,mBAAoB,GACpBC,OAAO,GAGX,OAAKH,EAAKI,WAIVJ,EAAKI,UACAC,SAAQ,SAAAC,GACLR,EAAQG,aAAaM,KAAKD,GAE1B,IAAIE,EAAmB,GACvBF,EAAQD,SAAQ,SAACI,EAASC,GACN,KAAZD,IACAD,GAAqBC,EAAU,SAIe,OADtDD,EAAmBA,EAAiBG,QACfH,EAAiBhC,OAAS,KAC3CgC,EAAmBA,EAAiBI,MAAM,EAAGJ,EAAiBhC,OAAS,IAE3EsB,EAAQI,mBAAmBK,KAAKC,MAEjCd,EAAQI,KAnBXA,EAAQK,OAAQ,EACTT,EAAQI,WAlBR,2CAAH,sDAyDXe,GAAyB,SAAAC,GAElC,IAAIC,EAAgB,EAEpB,OAAKD,GAA8B,IAAnBA,EAAQtC,QAIxBsC,EAAQT,SAAQ,SAAAW,GACU,KAAlBA,EAAOC,SACPF,GAAiBC,EAAOC,WAIzBF,GATIA,GAmBFG,GAA2B,SAAAC,GAGpC,GAAIA,EAAYC,SAAS,KACrB,OAAO,KAGX,IAAIC,EAAcF,EAAYG,MAAM,KAEpC,GAAID,EAAY7C,OAAS,EAAG,CACxB,IAAI+C,GAAmB,EAcvB,GAZAF,EAAYhB,SAAQ,SAACmB,EAAMd,GACT,IAAVA,GACIc,EAAKhD,OAAS,GAAKgD,EAAKhD,OAAS,KACjC+C,GAAmB,GAGH,IAAhBC,EAAKhD,SACL+C,GAAmB,MAK3BA,EACA,OAAO,KAIf,IAAIE,EAAkBN,EAAYO,QAAQ,KAAM,IAEhD,IAA+B,IAA3BC,MAAMF,GACN,OAAO,KAGX,IAAIG,EAASC,WAAWJ,GACxB,OAAIG,EAAS,EACF,KAGJA,GAUEE,GAA2B,SAACC,EAAUC,GAE/C,IAEIC,EAAeF,EAASG,KAAKC,KAC7BC,EAAaH,EAAaX,MAAMe,IAUpC,OARID,EAAW5D,OAAS,EACFwD,EAAeK,GAAsCD,EAAW,GAIhEJ,EAAeK,GAAsCJ,GAYlEK,GAAqB,SAAAC,GAC9B,OAAKA,GAGEA,EAAIC,WAAW,iCAKbC,GAAmB,SAACC,EAAaC,GAC1C,IAAKA,EACD,OAAO,KAGX,OAAQD,GACJ,KARsB,EASlB,OAAKC,EAAgBC,eAAe,cAC5BD,EAAgBC,eAAe,cAA8C,OAA9BD,EAAgBE,UAE5D,KAEJF,EAAgBE,UAAUF,EAAgBE,UAAUnE,WAAU,SAAAoE,GAAI,OAAKA,EAAKF,eAAe,eAAaL,IACnH,KAd0B,EAetB,OAAKI,EAAgBC,eAAe,iBAC5BD,EAAgBC,eAAe,iBAAoD,OAAjCD,EAAgBI,aAE/D,KAEJJ,EAAgBI,aAAaJ,EAAgBI,aAAarE,WAAU,SAAAoE,GAAI,OAAKA,EAAKF,eAAe,eAAaL,IACzH,QACI,OAAO,OA0BNS,GAAyB,SAACC,EAAMC,GACzC,ODtOyB,ICsOrBD,EAAKvN,ODpOa,ICwOlBuN,EAAKvN,OD1L4B,IC2LxBwN,EAAQC,QD1LY,IC2LtBD,EAAQC,SDlMgB,ICmMxBD,EAAQC,QAKfF,EAAKG,KAAOF,EAAQG,WAIpBH,EAAQC,SAAWd,ID3MiB,IC4MjCa,EAAQC,QD3MuB,ICgNlCD,EAAQC,QDxMqB,ICyMtBD,EAAQI,MAAMH,UAYhBI,GAAsB,SAACC,GAEhC,MADa,qCACCC,KAAKD,IASVE,GAAgB,SAACnB,GAE1B,MADa,2dACCkB,KAAKlB,IAoBVoB,GAAgB,SAAAT,GACzB,OAAOU,GAA0BV,IAAYW,GAA2BX,IAS/DY,GAAiB,SAAAZ,GAC1B,OAAOA,EAAQC,SAAWd,IASjB0B,GAA2B,SAAAb,GACpC,ODpRwC,ICoRjCA,EAAQC,QASNa,GAA4B,SAAAd,GACrC,OD/RmC,IC+R5BA,EAAQC,QASNS,GAA4B,SAAAV,GACrC,ODvSsC,ICuS/BA,EAAQC,QD/RkB,ICgS1BD,EAAQI,MAAMH,QASZc,GAA8C,SAAAf,GACvD,ODjToE,ICiT7DA,EAAQC,QDnS2B,ICoSnCD,EAAQI,MAAMH,QASZe,GAAuC,SAAAhB,GAChD,OD5ToE,IC4T5DA,EAAQC,QDhTsC,ICiT3CD,EAAQI,MAAMH,QD9Ta,ICiU9BD,EAAQC,QDpTsC,ICqT3CD,EAAQI,MAAMH,QAUhBgB,GAAuC,SAAAjB,GAChD,OD3UsE,IC2U/DA,EAAQC,QASNU,GAA6B,SAAAX,GACtC,ODpV8C,ICoVvCA,EAAQC,QASNiB,GAAsB,SAAAlB,GAC/B,OD7VqC,IC6V9BA,EAAQC,QAQNkB,GAAkB,SAAAnB,GAC3B,ODrWiC,ICqW1BA,EAAQC,QASNmB,GAA6B,SAAApB,GACtC,OAAOA,EAAQN,eAAe,uBAAsD,IAA9BM,EAAQqB,mBC7kBrDC,GAA0B,0BAC1BC,GAAwB,WACjC,MAAO,CACH/O,KAAM8O,KAIDE,GAA+B,gCAC/BC,GAA6B,SAACC,EAAS5P,EAAO6P,GACvD,MAAO,CACHnP,KAAMgP,GACNE,UACA5P,QACA6P,aAIKC,GAAoC,oCCJpCC,GAA2B,2BAC3BC,GAAwB,SAAApR,GACjC,OAAO,SAAC6B,EAAUwP,GACdxP,EAAS,CACLC,KAAMqP,GACNnR,OACAqP,KAAMgC,IAAWC,KAAKjC,SAKrBkC,GAA6B,6BAQ7BC,GAAqB,qBACrBC,GAAqB,qBA+BrBC,GAAyB,yBACzBC,GAAkC,kCA0BlCC,GAAqB,qBAQrBC,GAA+B,+BAO/BC,GAAwB,wBAoB/BC,GAAc,yCAAG,WAAOC,GAAP,UAAArG,EAAA,+EACZ,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAIiG,GAAcjE,MAAMiE,EAAUC,kBAAkBC,GAQhD,OAAOnG,IALPiG,EAAUG,WAAWC,QAAO,SAAAC,GACxB,OAAOvG,EAAQuG,KAChB,iBAPQ,2CAAH,sDAePC,GAA4C,4CAgC5CC,GAAW,yCAAG,WAAO1Q,EAAUwN,EAAMmD,EAAgBH,GAAvC,gCAAA1G,EAAA,yDAEnB3L,EAEAwS,EAFAxS,KACAyS,EACAD,EADAC,YAGAC,EAAkB7T,EAAS8T,UAC3BC,EAAa/T,EAASgU,WNlKa,IMoKnC7S,GNtKmC,IMsKKA,GNrKhB,IMqKwDA,EAT7D,oDAavB6B,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAU,IAGV6S,EAAY,EACZC,EAAkB,GNhLM,IMmLxB/S,GNpLmC,IMoLNA,EAvBV,qBA0BE,IAAjByS,EA1Be,wBA4BTO,EAAU3D,EAAK4D,gBAAgB/D,KAAKuD,GAAaK,UA5BxC,UA8BTJ,EACDtS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAHC,UAGQzE,GAHR,YAGgCuE,IACjCG,SAlCU,gCAsCnBL,EAAYM,KACZL,EAAe,UAAMtE,GAAN,YAA8BqE,GAvC1B,2BN3JgB,IMqM9B9S,EA1Cc,qBA6CE,IAAjByS,EA7Ce,wBA+CTO,EAAU3D,EAAKgE,eAAeZ,GAAaK,UA/ClC,UAiDTJ,EACDtS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAHC,UAGQzE,GAHR,YAG2CuE,IAC5CG,SArDU,gCAyDnBL,EAAYM,KACZL,EAAe,UAAMtE,GAAN,YAAyCqE,GA1DrC,iEAiEjBQ,EAAaZ,EACdtS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAAMH,GApEY,kBAsEhB,IAAIlH,SAAQ,SAACC,EAASC,GAEzB,IAAMwH,EAAaD,EAAWE,IAAInB,GAClCkB,EAAWE,GAAG,iBAAiB,SAAAC,GAC3B,IAAIzT,EAAYyT,EAASC,iBAAmBD,EAASE,WAAc,IACnE/R,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAUA,EAASuL,QAAQ,QAGhC,SAAAe,GAQC,OANA1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,MAGP8L,EAAOQ,MAEf,WAGCgH,EAAWG,SAAStT,IAAIyT,iBAAiB5H,MAAK,SAAA6H,GAE1C,IAAMC,EAAiB,CACnBjB,UAAWA,EACXnE,IAAKmF,GAGLE,EAAe,GACfC,EAAcrB,EACbxS,IAAIqO,IACJyE,MAAM7D,EAAKG,INpQA,IMuQZxP,GNxQuB,IMwQMA,IAExBqP,EAAK4D,iBAAoB5D,EAAK4D,kBAAoB5D,EAAK4D,gBAAgB/D,MACxE8E,EAAe,IACFrH,KAAKoH,IAIlBC,EAAe3E,EAAK4D,gBAAgB/D,MAGf,IAAjBuD,GACAuB,EAAaE,OAAOzB,EAAa,GACjCuB,EAAavH,SAAQ,SAAA0H,GACjBA,EAAQC,SAAU,KAEtBJ,EAAarH,KAAKoH,KAIlBC,EAAavH,SAAQ,SAAA0H,GACjBA,EAAQC,SAAU,KAEtBJ,EAAarH,KAAKoH,KAI1BE,EAAcA,EACTf,MAAMzE,IACNyE,MH9LC,UGmMD7D,EAAKgE,gBAINW,EAAe3E,EAAKgE,gBAGC,IAAjBZ,GACAuB,EAAaE,OAAOzB,EAAa,GACjCuB,EAAavH,SAAQ,SAAA0H,GACjBA,EAAQC,SAAU,KAEtBJ,EAAarH,KAAKoH,KAIlBC,EAAavH,SAAQ,SAAA0H,GACjBA,EAAQC,SAAU,KAEtBJ,EAAarH,KAAKoH,MAlBtBC,EAAe,IACFrH,KAAKoH,GAqBtBE,EAAcA,EACTf,MH/NY,mBGmOrBe,EACKI,IAAIL,GACJ/H,MAAK,WAYF,OAXApK,EAAS,CACLC,KAAMvC,EACNS,KAAMN,EACNO,SAAU,MAGd4B,EAAS,CACLC,KAAMqP,GACNmD,kBAAkB,IAGfxI,OAEVyI,OAAM,SAAAhI,GAYH,OAXA1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,MAGd4B,EAAS,CACLC,KAAMqP,GACNmD,kBAAkB,IAGfvI,EAAOQ,gBArMX,4CAAH,4DCtGlBiI,G,4MAmYFC,kCAAoC,WAChC,MAII,EAAK3U,MAHLuP,EADJ,EACIA,KACAoD,EAFJ,EAEIA,YACAzS,EAHJ,EAGIA,KAGA0U,EAAM,GAEV,IAAqB,IAAjBjC,EACA,OAAO,KAIX,GPtcmC,IOsc/BzS,EAAsC,CAEtC,IAAKqP,EAAKgE,eACN,OAAO,KAMHqB,EADAjC,IAAgBpD,EAAKgE,eAAevI,WAAU,SAAA6J,GAAU,OAAKA,EAAW3F,eAAe,cACjF,4CAEA,iDAKb,CAED,IAAKK,EAAK4D,iBAAoB5D,EAAK4D,kBAAoB5D,EAAK4D,gBAAgB/D,KACxE,OAAO,KAMHwF,EADAjC,IAAgBpD,EAAK4D,gBAAgB/D,KAAKpE,WAAU,SAAAoE,GAAI,OAAKA,EAAKF,eAAe,cAC3E,iCAEA,kCAKlB,OACI,cAACjO,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,QACRS,MAAM,gBACNJ,MAAO,CACHC,UAAW,IALnB,SAQKyT,K,4CAzbb,WACI,MA4BI7U,KAAKC,MA3BLkC,EADJ,EACIA,aACA6S,EAFJ,EAEIA,SAIAxU,GANJ,EAIIgP,KAJJ,EAMIhP,MACAL,EAPJ,EAOIA,KACA8U,EARJ,EAQIA,eACAC,EATJ,EASIA,aACAC,EAVJ,EAUIA,mBAEAC,GAZJ,EAWIxC,YAXJ,EAYIwC,WACAC,EAbJ,EAaIA,QAEAC,EAfJ,EAeIA,QACAC,EAhBJ,EAgBIA,mBACAC,EAjBJ,EAiBIA,wBACAC,EAlBJ,EAkBIA,qBACAC,EAnBJ,EAmBIA,oBACAC,EApBJ,EAoBIA,yBACAC,EArBJ,EAqBIA,0BACAC,EAtBJ,EAsBIA,uBACAC,EAvBJ,EAuBIA,gBAEA9E,EAzBJ,EAyBIA,sBAEG+E,EA3BP,yXA8BA,OACI,cAACzV,EAAA,EAAD,yBACIC,IAAK4B,EACL3B,KAAMA,EACNwV,SAAS,KACTvV,WAAS,EACTwV,WAAYjB,EACZM,QAASA,GACLS,GAPR,aASI,cAACpV,EAAA,EAAD,CACIQ,MAAO,CACH+U,QAAS,GAFjB,SAKI,cAACC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAMI,eAACG,EAAA,EAAD,CACIC,WAAS,EADb,UAII,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACHyV,gBAAiBC,GACjBC,WAAY,EACZC,cAAe,EACfC,YAAa,GACbC,aAAc,IAVtB,SAaI,eAAC,IAAD,CACIC,cAAc,SADlB,UAGI,cAAC,IAAD,CACIC,KAAM,EADV,SAGI,cAACjW,EAAA,EAAD,CACIJ,QAAQ,QADZ,SPjIG,IOqIKX,EAEI,yBAEA,kBAKhB,cAAC,IAAD,CACIgX,KAAM,EACNC,cAAc,QAFlB,SAII,cAACC,EAAA,EAAD,CACI3V,QAAS4T,EADb,SAGI,cAAC,KAAD,CACIvP,SAAS,mBAO7B,cAACwQ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,MAGJ,cAACf,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IANjB,SASI,eAAC,IAAD,CACItV,QAAM,EACN2W,MAAM,OACNH,cAAc,SAHlB,UAKI,cAAClW,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,SACN5T,MAAO,CACHqW,aAAc,IALtB,oEAWA,cAAC,KAAD,CACIxQ,UAAWyQ,YAAIC,GAAOC,eACtBC,SAAUpC,EACVqC,QAASpC,EACTqC,QAAS,CAAC,YAAa,YAAa,cACpCC,YAAanJ,GACboJ,YAAa,EACbC,UAAQ,EACRC,WAAS,EACTxW,QAASsP,EATb,SAWI,eAAC,IAAD,CACIkG,cAAc,SACdE,cAAc,SAFlB,UAII,cAAC,KAAD,CACIrR,SAAS,QACT5E,MAAO,CACHgX,YAAa,KAPzB,oBAcJ,eAAC,IAAD,CACI/W,UAAW,GACXgW,cAAc,SACdjW,MAAO,CACHiQ,SAAU,WACVmG,MAAO,OACPa,OAAQ,KANhB,UASI,cAAC,KAAD,CACI7X,IAAKgV,EACL8C,MAAOnD,EACPqC,MAAO,IACPa,OAAQ,IACRnS,OAAQ,GACRqS,aAAc,IACdC,uBAAuB,EACvBC,qBAAqB,EACrBC,MAAOpD,EACPlU,MAAO,CACHiQ,SAAU,WACVsH,IAAK,KAITvD,EAEI,KAEA,cAAC,IAAD,CACIiC,cAAc,SACdF,cAAc,SACd/V,MAAO,CACHiQ,SAAU,WACVmG,MAAO,OACPa,OAAQ,OACRM,IAAK,EACLC,OAAQ,GARhB,SAWI,cAACC,EAAA,EAAD,CACIrX,MAAM,iBAOtBvB,KAAK4U,oCAGT,eAAC,IAAD,CACI2C,MAAO,IACPnW,UAAW,GACX8V,cAAc,SAHlB,UAKI,cAAC,KAAD,CAAWnR,SAAS,UACpB,cAAC8S,GAAA,EAAD,CACIC,IAAK,EACLC,IAAK,IACLC,KAAM,KACNC,MAAO5D,EACPuC,SAAUlC,EACVvU,MAAO,CACHwE,WAAY,GACZwS,YAAa,MAGrB,cAAC,KAAD,CAAWpS,SAAS,aAGxB,eAAC,IAAD,CACI3E,UAAW,GACXgW,cAAc,QAFlB,UAII,cAAC9V,EAAA,EAAD,CACIE,KAAK,SACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UACNG,QAAS,kBAAMkU,KALnB,oBASA,cAACtU,EAAA,EAAD,CACIE,KAAK,SACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,YACRS,MAAM,YACNE,UAAWyT,EACXxT,QAAS,kBAAMmU,KACf1U,MAAO,CACHwE,WAAY,GACZwS,YAAa,IATrB,qBAcA,cAAC7W,EAAA,EAAD,CACIE,KAAK,SACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,YACRS,MAAM,UACNE,UAAWyT,EACXxT,QAAS,kBAAMoU,KANnB,qBAaCV,EAKO,cAAC,IAAD,CACIhU,UAAW,GACXmW,MAAO,IACPa,OAAQ,IAHZ,SAKI,cAACc,GAAA,EAAD,CACIC,IAAKC,OAAOC,IAAIC,gBAAgBlE,GAChCmE,eAAa,EACbC,WAAS,EACTrY,MAAO,CACHoW,MAAO,OACPa,OAAQ,OACRqB,UAAW,kBAf3B,UAyBhB,cAAClD,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,MAKCrC,EAIG,eAACsB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IANjB,UASI,cAAChV,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBAFV,yBAOA,cAAC8U,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACH+U,QAAS,IAHjB,SAOQjB,EACKyE,MAAK,SAACC,EAAQC,GAAT,OAAoBA,EAAO3G,UAAY0G,EAAO1G,aACnD4G,KAAI,SAACC,EAAe7M,GAAhB,OACD,cAACsJ,EAAA,EAAD,CAEIC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJjV,QAAS,kBAAMiU,EAAyB1I,IAN5C,SAQI,cAAC,IAAD,CACImK,cAAc,SACdF,cAAc,SACd/V,MAAO,CACHoW,MAAO,OACPrB,QAAS,GALjB,SAQI,cAACgD,GAAA,EAAD,CAEIC,IAAKW,EAAchL,IACnB9H,UAAWyQ,YAAIC,GAAOqC,4BACtB5Y,MAAO,CACHiX,OAAQ,IACRb,MAAO,IACPkC,UAAW,YANVxM,MAhBRA,WA7B7B,mB,GA1TNrL,aAgcfC,gBAjeS,SAAAC,GACpB,MAAO,CACH0N,KAAM1N,EAAM2P,KAAKjC,KAEjBhP,KAAMsB,EAAMkY,UAAUC,oBACtB9Z,KAAM2B,EAAMkY,UAAU7Z,KACtB8U,eAAgBnT,EAAMkY,UAAU/E,eAChCC,aAAcpT,EAAMkY,UAAU9E,aAC9BC,mBAAoBrT,EAAMkY,UAAU7E,mBACpCvC,YAAa9Q,EAAMkY,UAAUpH,YAC7BwC,UAAWtT,EAAMkY,UAAU5E,UAC3BC,QAASvT,EAAMkY,UAAU3E,QAEzBL,SAAUlT,EAAMoY,gBAAgBlF,aAIb,SAAAhT,GACvB,MAAO,CACHsT,QAAS,kBAAMtT,EAASmY,GAAuC,QAC/D5E,mBAAoB,SAAC6E,GAAD,OAAYpY,EDjCD,SAAAoY,GACnC,MAAO,CACHnY,KAAMyP,GACN0I,UC8ByCD,CAAyCC,KAClF5E,wBAAyB,SAAC6E,GAAD,OAAWrY,EDzBL,SAAAqY,GACnC,OAAO,SAACrY,EAAUwP,GACd,KAAIA,IAAW8I,uBAAuBnJ,QAAQjE,OAAOnC,OAAS,GAAKyG,IAAW8I,uBAAuB9Z,MAArG,CAIAwB,EAAS,CACLC,KAAM0P,KAGV,IAAMa,EAAO,IAAI+H,KAAK,CAACF,EAAMA,EAAMtP,OAAS,IAAK,CAAC9I,KAAM,cAExDD,EAAS,CACLC,KAAM2P,GACNY,WCWyC2H,CAAyCE,KACtF5E,qBAAsB,SAAC/I,EAAO+B,GAAR,OAAiBzM,EDPX,SAAC0K,EAAO+B,GACxC,GAAmB,IAAf/B,EAAM8N,KACN,MAAO,CACHvY,KAAMwY,GACNtJ,QAAQ,2CAAD,OAA6CvC,GAA7C,OACPrN,MAAO,QACP6P,SAAU,UCCkC+I,CAAsCzN,KACtFgJ,oBAAqB,SAACgF,EAAOC,GAAR,OAAqB3Y,ED+BX,SAAC0Y,EAAOC,GAC3C,MAAO,CACH1Y,KAAM8P,GACN6I,KAAMD,GClC6CR,CAAyCO,EAAOC,KACnGhF,yBAA0B,SAAC1I,GAAD,OAAWjL,EDID,SAAAiL,GACxC,OAAO,SAACjL,EAAUwP,GAEdxP,EAAS,CACLC,KAAM4P,KAOV1F,MAFiB,uCAEAqF,IAAWwI,UAAU/E,eAAehI,GAAO6B,KACvD1C,MAAK,SAAAyO,GACF,OAAOA,EAASrI,UAEnBpG,MAAK,SAAAoG,GACFxQ,EAAS,CACLC,KAAM6P,GACNgJ,cAAe7N,EACfuF,aCvBkC2H,CAA8ClN,KAC5F2I,0BAA2B,kBAAM5T,EDsC9B,CACHC,KAAM+P,MCtCN6D,uBAAwB,kBAAM7T,GD4C3B,SAACA,EAAUwP,GACd,IAAMW,EAAYX,IAAWwI,UAAU7H,UAEvCD,GAAeC,GACV/F,MAAK,SAAAoG,GACFxQ,EAAS,CACLC,KAAMgQ,GACNO,gBClDZsD,gBAAiB,kBAAM9T,GD8EpB,SAACA,EAAUwP,GN/HqB,IMgI/BA,IAAWwI,UAAU7Z,KAWzB+R,GAAeV,IAAWwI,UAAU7H,WAC/B/F,MAAK,SAAAoG,GAEFxQ,EAAS,CACLC,KAAMqP,GACNmD,kBAAkB,IAGtB/B,GAAY1Q,EAAUwP,IAAWC,KAAKjC,KAAMgC,IAAWwI,UAAWxH,MAlBtEN,GAAeV,IAAWwI,UAAU7H,WAC/B/F,MAAK,SAAAoG,GACFxQ,EAAS,CACLC,KAAMwQ,GACND,gBClFhBxB,sBAAuB,kBAAMhP,EAASyY,UAoc/B5Y,CACXK,IAAMhC,YAAW,SAACD,EAAOM,GAAR,OAAiB,cAAC,GAAD,2BAAqBN,GAArB,IAA4BkC,aAAc5B,SAG1EmX,GAASxS,IAAWC,OAAO,CAE7BwS,cAAe,CACXb,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,GACd8D,UAAW,SACX9U,OAAO,aAAD,OAAe4Q,IAErB,SAAU,CACND,gBAAiBC,GACjBtR,OAAQ,YAIhBwU,2BAA4B,CACxB,SAAU,CACN9T,OAAO,aAAD,OAAe4Q,IACrBtR,OAAQ,UACRyV,QAAS,O,8BCphBRC,GAA2B,2BAC3BC,GAAwB,SAAA/a,GACjC,OAAO,SAAC6B,EAAUwP,GACdxP,EAAS,CACLC,KAAMgZ,GACN9a,OACAqP,KAAMgC,IAAWC,KAAKjC,SAKrB2L,GAAoB,oBAQpBC,GAAoB,oBAQpBC,GAAqB,qBA0BrBC,GAAqC,qCAoBrCC,GAA0B,0BAQ1BC,GAA+B,+BAgB/BC,GAAW,yCAAG,WAAOzZ,EAAUwN,EAAMkM,EAAgBC,GAAvC,gCAAA7P,EAAA,yDAGnB3L,EAEAub,EAFAvb,KACAyb,EACAF,EADAE,cAGJ5Z,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAU,IAGVyb,EAA0B,MAIP,IAAnBD,EAjBmB,oBAmByC,KAAxDpM,EAAK4D,gBAAgBuI,MAAMC,GAAe3I,UAnB3B,uBAsBE,uCAtBF,SAwBT9G,MAFW,uCAEMqD,EAAK4D,gBAAgBuI,MAAMC,GAAe9M,KAC5D1C,MAAK,SAAAyO,GACF,OAAOA,EAASrI,UAEnBpG,MAAK,SAAAoG,GACFqJ,EAA0BrJ,KA7BnB,OAiCTsJ,EAAYtM,EAAK4D,gBAAgBuI,MAAMC,GAAe3I,UAE5DjU,EAAS8T,UACJvS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAHL,UAGczE,GAHd,YAG6CkN,IACxCxI,SAvCU,+BA2CTyI,EAAmB,CACrB9I,UAAW,GACX+I,aAAcC,KACdnN,IAAK6M,GA9CM,kBAiDR,IAAI3P,SAAQ,SAACC,EAASC,GACzBgQ,GAAmCla,EAAUwN,EAAMuM,EAAkBH,GAChExP,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAvDX,mCAgEA,kBAAXiP,EAhEW,wBAiEbI,EAAmB,CACrB9I,UAAW,GACX+I,aAAcC,KACdnN,IAAK6M,GApEU,kBAuEZ,IAAI3P,SAAQ,SAACC,EAASC,GACzBgQ,GAAmCla,EAAUwN,EAAMuM,EAAkBH,GAChExP,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UA7EP,eAkFjBuG,EAAYgJ,KACZ/I,EAnFiB,UAmFItE,GAnFJ,YAmFmCqE,GAEpDQ,EAAazU,EAAS8T,UACvBvS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAAMH,GAxFY,kBA0FhB,IAAIlH,SAAQ,SAACC,EAASC,GAEzB,IAAMiQ,EAAkB1I,EAAWE,IAAIkI,GAAoDF,GAC3FQ,EAAgBvI,GAAG,iBAAiB,SAAAC,GAChC,IAAIzT,EAAYyT,EAASC,iBAAmBD,EAASE,WAAc,IACnE/R,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAUA,EAASuL,QAAQ,QAGhC,SAAAe,GAQC,OANA1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,MAGP8L,EAAOQ,MAEf,WAGCyP,EAAgBtI,SAAStT,IAAIyT,iBAAiB5H,MAAK,SAAAgQ,GAQ/CF,GAAmCla,EAAUwN,EANpB,CACrByD,UAAWA,EACX+I,aAAc/I,EACdnE,IAAKsN,GAG4DR,GAChExP,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,gBA/HX,4CAAH,4DA+IlBwP,GAAkC,yCAAG,WAAOla,EAAUwN,EAAMuM,EAAkBH,GAAzC,UAAA9P,EAAA,+EAEhC,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAImQ,EAAiB,GACjBjI,EAAcpV,EAASgU,WACtBzS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAAMzE,IACNyE,ML1IoB,UK6IpB7D,EAAK4D,iBAAoB5D,EAAK4D,kBAAoB5D,EAAK4D,gBAAgBuI,OACxEU,EAAiB,IACFvP,KAAKiP,IAIpBM,EAAiB7M,EAAK4D,gBAAgBuI,OAGf,IAAnBC,GACAS,EAAehI,OAAOuH,EAAe,GACrCS,EAAezP,SAAQ,SAAA0H,GACnBA,EAAQC,SAAU,KAEtB8H,EAAevP,KAAKiP,KAIpBM,EAAezP,SAAQ,SAAA0H,GACnBA,EAAQC,SAAU,KAEtB8H,EAAevP,KAAKiP,KAI5B3H,EACKI,IAAI6H,GACJjQ,MAAK,WAYF,OAXApK,EAAS,CACLC,KAAMvC,EACNS,KAAMN,EACNO,SAAU,MAGd4B,EAAS,CACLC,KAAMgZ,GACNxG,kBAAkB,IAGfxI,OAEVyI,OAAM,SAAAhI,GAaH,OAXA1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,MAGd4B,EAAS,CACLC,KAAMgZ,GACNxG,kBAAkB,IAGfvI,EAAOQ,UAjEa,2CAAH,4DCnLlC4P,G,4MAgaFC,kCAAoC,WAChC,MAGI,EAAKtc,MAFLuP,EADJ,EACIA,KACAoM,EAFJ,EAEIA,cAGA/G,EAAM,GAEV,OAAuB,IAAnB+G,IAKCpM,EAAK4D,iBAAoB5D,EAAK4D,kBAAoB5D,EAAK4D,gBAAgBuI,MAJjE,MAWH9G,EADA+G,IAAkBpM,EAAK4D,gBAAgBuI,MAAM1Q,WAAU,SAAA0Q,GAAK,OAAKA,EAAMxM,eAAe,cAChF,+CAGA,gDAKV,cAACjO,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,QACRS,MAAM,gBACNJ,MAAO,CACHC,UAAW,IALnB,SAQKyT,M,4CAlcb,WAEI,MA0BI7U,KAAKC,MAzBLkC,EADJ,EACIA,aAEA6S,EAHJ,EAGIA,SACAxU,EAJJ,EAIIA,KAGAgc,GAPJ,EAKIhN,KALJ,EAOIgN,kBACAC,EARJ,EAQIA,kBAEAC,EAVJ,EAUIA,eACAC,EAXJ,EAWIA,YAGArH,GAdJ,EAYIsG,cAZJ,EAcItG,SACAsH,EAfJ,EAeIA,gBACAC,EAhBJ,EAgBIA,sBACAC,EAjBJ,EAiBIA,uBACAC,EAlBJ,EAkBIA,qBACAC,EAnBJ,EAmBIA,0BACAC,EApBJ,EAoBIA,6BACAC,EArBJ,EAqBIA,gBAEAlM,EAvBJ,EAuBIA,sBAEG+E,EAzBP,wVA4BA,OACI,cAACzV,EAAA,EAAD,yBACIC,IAAK4B,EACL3B,KAAMA,EACNwV,SAAS,KACTvV,WAAS,EACTwV,WAAYjB,EACZM,QAASA,GACLS,GAPR,aASI,cAACpV,EAAA,EAAD,CACIQ,MAAO,CACH+U,QAAS,GAFjB,SAKI,cAACC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAMI,eAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,UAEI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACHyV,gBAAiBC,GACjBC,WAAY,EACZC,cAAe,EACfC,YAAa,GACbC,aAAc,IAVtB,SAaI,eAAC,IAAD,CAAUC,cAAc,SAAxB,UACI,cAAC,IAAD,CACIC,KAAM,EADV,SAGI,cAACjW,EAAA,EAAD,CACIJ,QAAQ,QADZ,yCAOJ,cAAC,IAAD,CACIqW,KAAM,EACNC,cAAc,QAFlB,SAII,cAACC,EAAA,EAAD,CACI3V,QAAS4T,EADb,SAGI,cAAC,KAAD,CAAWvP,SAAS,mBAMpC,cAACwQ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,MAGJ,cAACf,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IANjB,SASI,eAAC,IAAD,CACItV,QAAM,EACN2W,MAAM,OACNH,cAAc,SAHlB,UAKI,cAAClW,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,SACN5T,MAAO,CACHqW,aAAc,IALtB,oEAYIgF,EAEI,eAAC,IAAD,WACI,cAAClb,EAAA,EAAD,CACIR,QA5KV,IA4KmB2b,EAAmD,YAAc,WAC1Elb,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QACI,kBAAMkb,EAhLpB,IAiLkBH,EAEI,KAnLtB,IA2KM,SA3KN,IA0LcA,EAEI,wBAEA,mBAGZ,cAACnb,EAAA,EAAD,CACIR,QAjMX,IAiMoB2b,EAAkD,YAAc,WACzElb,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QACI,kBAAMkb,EArMrB,IAsMmBH,EAEI,KAxMvB,IA6MWtb,MAAO,CACHwE,WAAY,IAdpB,SAhMP,IAkNe8W,EAEI,4BAEA,0BAKhB,cAACnb,EAAA,EAAD,CACIR,QA5NP,IA4NgB2b,EAAkD,YAAc,WACzElb,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMkb,EA/NtB,IA2NG,SA3NH,IAkOWH,EAEI,4BAEA,uBAOfA,EA9OC,IAkPEA,EAEI,cAAC,IAAD,CACI7b,QAAM,EACNQ,UAAW,GAFf,SAII,cAAC,KAAD,CACI4F,UAAWyQ,YAAIC,GAAOyF,iBACtBvF,SAAUkF,EACVjF,QAASkF,EACTjF,QAAS,CAAC,aACVC,YAAanJ,GACboJ,YAAa,EACbC,UAAQ,EACRC,WAAS,EACTxW,QAASsP,EATb,SAWI,eAAC,IAAD,CACIkG,cAAc,SACdE,cAAc,SAFlB,UAII,cAAC,KAAD,CACIrR,SAAS,QACT5E,MAAO,CACHgX,YAAa,KAPzB,sBAeR,cAACiF,GAAA,EAAD,CACI1O,KAAK,cACL2O,YAAY,uBACZvc,QAAQ,WACRmY,MACK0D,GAI2B,kBAAjBA,EAEHA,EAJJ,GAQRlc,WAAS,EACTmX,SAAUiF,EACV1b,MAAO,CACHC,UAAW,MApDvB,KA2DHub,EAIG,cAAC,IAAD,CACIvb,UAAW,GACXgW,cAAc,SACdjW,MAAO,CACHoW,MAAO,QAJf,SAOI,cAAC,KAAD,CACIzI,IAC4B,kBAAjB6N,EAEHA,EAEAvD,OAAOC,IAAIC,gBAAgBqD,GAEnCW,SAAS,EACTC,UAAU,EACVhG,MAAM,OACNa,OAAQ,QApBhB,KA2BJpY,KAAKuc,oCAKJI,EAIG,eAAC,IAAD,CACIvb,UAAW,GACXgW,cAAc,QAFlB,UAII,cAAC9V,EAAA,EAAD,CACIE,KAAK,SACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UACNG,QAAS,kBAAMsb,KACf7b,MAAO,CACHgX,YAAa,GAPrB,oBAYA,cAAC7W,EAAA,EAAD,CACIE,KAAK,SACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,YACRS,MAAM,UACNE,UAAWkb,EACXjb,QAASwb,EACT/b,MAAO,CACHwE,WAAY,GARpB,qBAlBJ,UAqChB,cAAC4Q,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,OAQlBsb,EAIG,eAACnG,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IANjB,UASI,cAAChV,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBAFV,yBAOA,cAAC8U,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACH+U,QAAS,IAHjB,SAOQwG,EACKhD,MAAK,SAAC8D,EAAQC,GAAT,OAAoBA,EAAOzB,aAAewB,EAAOxB,gBACtDnC,KAAI,SAAC6D,EAAezQ,GAAhB,OACD,cAACsJ,EAAA,EAAD,CAEIC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJjV,QAAS,kBAAMub,EAA6BhQ,IANhD,SAQI,cAAC,IAAD,CACImK,cAAc,SACdF,cAAc,SACd/V,MAAO,CACHoW,MAAO,OACPrB,QAAS,IALjB,SAQI,cAAC,KAAD,CACIpH,IAAK4O,EAAc5O,IACnBwO,SAAS,EACTC,UAAU,EACVI,aAAa,EACbpG,MAAM,OACNa,OAAO,OACPpR,UAAWyQ,YAAIC,GAAOkG,mCAtBzB3Q,WA7B7B,mB,GA7VNrL,aAycfC,gBA/eS,SAAAC,GACpB,MAAO,CACH0N,KAAM1N,EAAM2P,KAAKjC,KAEjBgN,oBACI1a,EAAM+b,qBAAqBC,iBAAkBhc,EAAM+b,qBAAqBC,eAAe3O,eAAe,sBAElGrN,EAAM+b,qBAAqBC,eAAetB,iBAIlDhc,KAAMsB,EAAMic,UAAUC,oBACtB7d,KAAM2B,EAAMic,UAAU5d,KAEtBsc,kBAAmB3a,EAAMic,UAAUtB,kBACnCE,YAAa7a,EAAMic,UAAUpB,YAC7BD,eAAgB5a,EAAMic,UAAUrB,eAChCd,cAAe9Z,EAAMic,UAAUnC,cAE/B5G,SAAUlT,EAAMoY,gBAAgBlF,aAIb,SAAAhT,GACvB,MAAO,CACHsT,QAAS,kBAAMtT,EAASic,GAAuC,QAC/DrB,gBAAiB,SAACsB,GAAD,OAAelc,EDrCT,SAAAkc,GAC3B,MAAO,CACHjc,KAAMkZ,GACN+C,aCkCyCD,CAAiCC,KAC1ErB,sBAAuB,SAACnC,GAAD,OAAW1Y,ED9BL,SAAA0Y,GACjC,MAAO,CACHzY,KAAMmZ,GACNtM,IAAK4L,EAAMyD,OAAOlF,OC2ByBgF,CAAuCvD,KAClFoC,uBAAwB,SAACzC,GAAD,OAAWrY,EDvBJ,SAAAqY,GACnC,OAAO,SAACrY,EAAUwP,GACd,KAAIA,IAAW8I,uBAAuBnJ,QAAQjE,OAAOnC,OAAS,GAAKyG,IAAW8I,uBAAuB9Z,MAArG,CAGA,IAAMgS,EAAO,IAAI+H,KAAK,CAACF,EAAMA,EAAMtP,OAAS,IAAK,CAAC9I,KAAM,cACxDD,EAAS,CACLC,KAAMoZ,GACN7I,WCewCyL,CAAyC5D,KACrF0C,qBAAsB,SAACrQ,EAAO+B,GAAR,OAAiBzM,EDVX,SAAC0K,EAAO+B,GACxC,GAAmB,IAAf/B,EAAM8N,KACN,MAAO,CACHvY,KAAMwY,GACNtJ,QAAQ,2CAAD,OAA6CvC,GAA7C,OACPrN,MAAO,QACP6P,SAAU,UCIkC6M,CAAsCvR,KACtFsQ,0BAA2B,kBAAMhb,ED8B9B,CACHC,KAAMuZ,MC9BNyB,6BAA8B,SAAChQ,GAAD,OAAWjL,EDoBL,SAAAiL,GACxC,MAAO,CACHhL,KAAMsZ,GACNT,cAAe7N,GCvBmCgR,CAA8ChR,KAChGiQ,gBAAiB,kBAAMlb,GDApB,SAACA,EAAUwP,GR/CsB,IQgDhCA,IAAWuM,UAAU5d,MAQzB6B,EAAS,CACLC,KAAMgZ,GACNxG,kBAAkB,IAGtBgH,GAAYzZ,EAAUwP,IAAWC,KAAKjC,KAAMgC,IAAWuM,UAAWvM,IAAWuM,UAAUpB,cAZnF3a,EAAS,CACLC,KAAMqZ,GACNK,MAAOnK,IAAWuM,UAAUpB,kBCFpC3L,sBAAuB,kBAAMhP,EAASyY,UA6c/B5Y,CACXK,IAAMhC,YAAW,SAACD,EAAOM,GAAR,OAAgB,cAAC,GAAD,2BAAqBN,GAArB,IAA4BkC,aAAc5B,SAGzEmX,GAASxS,IAAWC,OAAO,CAE7BgY,gBAAiB,CACbrG,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,GACd8D,UAAW,SACX9U,OAAO,aAAD,OAAe4Q,IAErB,SAAU,CACND,gBAAiBC,GACjBtR,OAAQ,YAIhBqY,6BAA8B,CAC1B,SAAU,CACN3X,OAAO,aAAD,OAAe4Q,IACrBtR,OAAQ,UACRyV,QAAS,OCjiBAoD,G,4JACjB,WACI,OACI,eAAC,IAAD,CACIxd,QAAM,EACNwW,cAAc,SACdhW,UAAW,GACXuE,WAAW,MACXwS,YAAY,MALhB,UAOI,cAACjX,EAAA,EAAD,CACI8F,UAAWyQ,YAAIC,GAAOtR,YAD1B,uBAKA,cAAClF,EAAA,EAAD,CACI8F,UAAWyQ,YAAIC,GAAO2G,qBAD1B,4BAKA,cAACnd,EAAA,EAAD,CACI8F,UAAWyQ,YAAIC,GAAO4G,cAD1B,6E,GApB0B1c,aA8BpC8V,GAASxS,IAAWC,OAAO,CAC7BiB,WAAY,CACRL,SAAU,GACVxE,MAAOsV,GACPkE,UAAW,UAGfsD,oBAAqB,CACjBtY,SAAU,GACVwY,WAAY,OACZnd,UAAW,GACXoW,aAAc,GACduD,UAAW,UAGfuD,aAAc,CACVvY,SAAU,GACVxE,MAAOsV,GACPkE,UAAW,YC/CEyD,G,4JACjB,WACI,OACI,cAACrI,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAMI,eAACG,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,UAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GAHR,SAKI,cAAC,IAAD,CACIyB,OAAQ,EACRjX,MAAO,CACHyV,gBAAiBC,QAI7B,cAACN,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GAHR,SAKI,cAAC,GAAD,e,GAhCuB/U,a,SCYlC6c,GAAU,SAACjP,GACpB,MAAI,SAAUA,EACHkP,KAAKC,MAAMD,KAAKE,UAAUpP,IAE9B,MChBEqP,GAAe,SAACC,GACzB,IAAM7R,EAAQ6R,EAAO7T,WAAU,SAAA8T,GAAK,OAAIA,EAAMC,eAC9C,OAAe,IAAX/R,EACO6R,EAAO7R,GAEX,MCLEgS,GAAa,CAAC,MAAO,OAAQ,OAAQ,MAAO,MAAO,SAuCnDC,GAAW,SAAC1P,GACrB,OX6HuB,IW7HhBA,EAAKvN,MAGHkd,GAAa,SAAC3P,GACvB,OXwHyB,IWxHlBA,EAAKvN,MCzCKmd,G,kCAAAA,GACVC,UAAoB,yBADVD,GAGVE,cAAwB,IAHdF,GAIVG,W,UAAwBH,GAAOC,WAJrBD,GAMVI,eAAyB,UANfJ,GAOVK,Y,UAAyBL,GAAOC,U,WAPtBD,GAQVM,iBAA2B,sBARjBN,GAUVO,eAAwB,4BAVdP,GAWVQ,Y,UAAyBR,GAAOC,U,gBAXtBD,GAaVS,uBAAiC,SAbvBT,GAcVU,oB,UAAiCV,GAAOC,U,UAd9BD,GAgBVW,qB,UAAkCX,GAAOC,U,qBAhB/BD,GAkBVY,uB,UAAoCZ,GAAOC,U,uBAlBjCD,GAoBVa,wBAAkC,wBApBxBb,GAqBVc,qB,UAAkCd,GAAOC,U,yBArB/BD,GAuBVe,wBAAkC,wBAvBxBf,GAwBVgB,qB,UAAkChB,GAAOC,U,yBAxB/BD,GA0BViB,oBAA8B,gBA1BpBjB,GA2BVkB,iB,UAA8BlB,GAAOC,U,iBA3B3BD,GA6BVmB,kBAA4B,uBA7BlBnB,GA8BVoB,e,UAA4BpB,GAAOC,U,wBA9BzBD,GAgCVqB,mBAA6B,UAhCnBrB,GAiCVsB,gB,UAA6BtB,GAAOC,U,WAjC1BD,GAmCVuB,kBAA4B,2CAnClBvB,GAoCVwB,e,UAA4BxB,GAAOC,U,4CApCzBD,GAsCVyB,2BAAqC,2BAtC3BzB,GAuCV0B,wB,UAAqC1B,GAAOC,U,4BAvClCD,GAyCV2B,kBAA4B,cAzClB3B,GA0CV4B,e,UAA4B5B,GAAOC,U,eA1CzBD,GA4CV6B,mBAA6B,gBA5CnB7B,GA6CV8B,gB,UAA6B9B,GAAOC,U,iBA7C1BD,GA+CV+B,U,UAAuB/B,GAAOC,U,SA/CpBD,GAiDVgC,mBAA6B,gBAjDnBhC,GAkDViC,sBAAgC,kBAlDtBjC,GAmDVkC,oBAA8B,uBAnDpBlC,GAoDVmC,sCAAgD,uCApDtCnC,GAqDVoC,6BAAuC,yBArD7BpC,GAuDVqC,mBAA6B,eAvDnBrC,GAyDVsC,SAAmB,aAzDTtC,GAgEHuC,iBAAmB,SAACC,GAC9B,OAAOA,IAAUxC,GAAOE,eACjBsC,IAAUxC,GAAOG,YACjBqC,IAAUxC,GAAOI,gBACjBoC,IAAUxC,GAAOK,aACjBmC,IAAUxC,GAAOO,gBACjBiC,IAAUxC,GAAOQ,aACjBgC,IAAUxC,GAAO2B,mBACjBa,IAAUxC,GAAO4B,gBACjBY,IAAUxC,GAAO6B,oBACjBW,IAAUxC,GAAO8B,iBACjBU,IAAUxC,GAAOiC,uBACjBO,IAAUxC,GAAOgC,oBACjBQ,IAAUxC,GAAOkC,qBACjBM,IAAUxC,GAAOmC,uCACjBK,IAAUxC,GAAOoC,8BACjBI,IAAUxC,GAAOqC,oBACjBG,IAAUxC,GAAOsC,UAjFXtC,GAyFHyC,6BAA+B,SAACD,GAC1C,OAAOA,IAAUxC,GAAOS,wBACjB+B,IAAUxC,GAAOa,yBACjB2B,IAAUxC,GAAOe,yBACjByB,IAAUxC,GAAOiB,qBACjBuB,IAAUxC,GAAOmB,mBACjBqB,IAAUxC,GAAOqB,oBACjBmB,IAAUxC,GAAOuB,mBAhGXvB,GAwGH0C,kBAAoB,SAACF,GAC/B,OAAOA,IAAUxC,GAAOU,qBAzGXV,GAiHH2C,uBAAyB,SAACH,GACpC,OAAOA,IAAUxC,GAAOW,sBAlHXX,GA0HH4C,yBAA2B,SAACJ,GACtC,OAAOA,IAAUxC,GAAOY,wBA3HXZ,GAmIH6C,cAAgB,SAACL,GAC3B,OAAOA,IAAUxC,GAAOI,gBAAkBoC,IAAUxC,GAAOK,aAAemC,IAAUxC,GAAOM,kBApI9EN,GA4IH8C,wBAA0B,SAACN,GACrC,OAAOA,IAAUxC,GAAOM,kBA7IXN,GAqJH+C,cAAgB,SAACP,GAC3B,OAAOA,IAAUxC,GAAOO,gBAAkBiC,IAAUxC,GAAOQ,aAtJ9CR,GA8JHgD,aAAe,SAACR,GAC1B,OAAOA,IAAUxC,GAAOsC,UA/JXtC,GAuKHiD,oBAAsB,SAACT,GACjC,OAAOA,IAAUxC,GAAOiC,uBACjBO,IAAUxC,GAAOkC,qBACjBM,IAAUxC,GAAOgC,oBACjBQ,IAAUxC,GAAOmC,uCACjBK,IAAUxC,GAAOoC,8BA5KXpC,GAoLHkD,qBAAuB,SAACV,GAClC,OAAQA,GACJ,IAAK,gBACD,OAAOxC,GAAOiC,sBAClB,IAAK,cACD,OAAOjC,GAAOkC,oBAClB,IAAK,aACD,OAAOlC,GAAOgC,mBAClB,IAAK,gCACD,OAAOhC,GAAOmC,sCAClB,IAAK,uBACD,OAAOnC,GAAOoC,+BA/LTpC,GA0MHmD,mBAAqB,SAACC,EAAkBC,EAClBC,GAChC,IAAId,EAAgB,GAEpB,IAAKc,EAAoBC,YACrB,OAAKH,EAAYI,cAGNxD,GAAOG,WAAWtR,QAAQ,iBAAkBuU,EAAYI,eAFxDxD,GAAOE,cAMtB,IAAMuD,EAA6BpE,GAAQiE,EAAoBC,aAE/D,GAAIE,GAEA,GAAIA,EAAaC,WACblB,EAAQxC,GAAOE,mBAIf,GAAsD,IAAlDoD,EAAoBK,mBAAmBhY,OAAc,CACrD,IAAMiY,EAAgCN,EAAoBK,mBAAmB,GAC7EnB,EAAQxC,GAAOG,WAAWtR,QAAQ,iBAAkB+U,EAAWjE,MAAM6D,oBAM5E,CACD,IAAMK,EAAsCpE,GAAa6D,EAAoBK,oBACzEP,EAAYI,eACRF,EAAoBK,mBACnBG,QAAO,SAAAC,GAAiB,OACrBA,EAAkBpE,MAAM6D,gBAAkBJ,EAAYI,iBAAe7X,OAAS,EAElF6W,EAAQxC,GAAOG,WAAWtR,QAAQ,iBAAkBuU,EAAYI,eAI7DK,IACPrB,EAAQxC,GAAOG,WAAWtR,QAAQ,iBAAkBgV,EAAUlE,MAAM6D,gBAI5E,OAAKhB,GACMxC,GAAOE,eAxPLF,GAmQHgE,qBAAuB,SAACZ,GAClC,OAAIA,EAAYI,cACLxD,GAAOK,YAAYxR,QAAQ,iBAAkBuU,EAAYI,eAEzDxD,GAAOI,gBAvQLJ,GAiRHiE,qBAAuB,SAACT,EAAuBU,GACzD,OAAIV,EACOxD,GAAOQ,YACT3R,QAAQ,iBAAkB2U,GAC1B3U,QAAQqV,EAAgB,OAAS,QAF/B,OAEwCA,QAFxC,IAEwCA,IAAiB,IAEzDlE,GAAOO,gBAvRLP,GAgSHmE,wBAA0B,SAACf,GACrC,OAAIA,EAAYI,cACLxD,GAAO4B,eAAe/S,QAAQ,iBAAkBuU,EAAYI,eAE5DxD,GAAO2B,mBApSL3B,GA6SDoE,yBAA2B,SAAChB,GACxC,OAAIA,EAAYI,cACLxD,GAAO8B,gBAAgBjT,QAAQ,iBAAkBuU,EAAYI,eAE7DxD,GAAO6B,oBAjTL7B,GA4THqE,wBAA0B,SAACjB,EAAkBC,EAClBC,GACrC,IAAId,EAAgB,GAEpB,IAAKc,EAAoBC,YACrB,OAAOvD,GAAOgE,qBAAqBZ,GAGvC,IAAMK,EAA6BpE,GAAQiE,EAAoBC,aAE/D,GAAIE,GAGA,GAAIA,EAAaC,WACblB,EAAQxC,GAAOS,4BAKf,GAAsD,IAAlD6C,EAAoBK,mBAAmBhY,OAAc,CACrD,IAAMiY,EAAgCN,EAAoBK,mBAAmB,GAC7EnB,EAAQxC,GAAOU,oBAAoB7R,QAAQ,iBAAkB+U,EAAWjE,MAAM6D,oBAMrF,CACD,IAAMK,EAAsCpE,GAAa6D,EAAoBK,oBACzEP,EAAYI,eACRF,EAAoBK,mBACnBG,QAAO,SAAAC,GAAiB,OACrBA,EAAkBpE,MAAM6D,gBAAkBJ,EAAYI,iBAAe7X,OAAS,EAG9E6W,EADAzC,GAAWuD,EAAoBC,aACvBvD,GAAOY,uBAAuB/R,QAAQ,iBAAkBuU,EAAYI,eAEpExD,GAAOW,qBAAqB9R,QAAQ,iBAAkBuU,EAAYI,eAS3EK,IAEHrB,EADAzC,GAAWuD,EAAoBC,aACvBvD,GAAOY,uBAAuB/R,QAAQ,iBAAkBgV,EAAUlE,MAAM6D,eAExExD,GAAOW,qBAAqB9R,QAAQ,iBAAkBgV,EAAUlE,MAAM6D,gBAK1F,MAAc,KAAVhB,EACOxC,GAAOgE,qBAAqBZ,GAEvCZ,GAAS,aAtXIxC,GAgYHsE,4BAA8B,SAACd,EAA8Be,GAQvE,OANIf,EACQxD,GAAOoB,eAAevS,QAAQ,iBAAkB2U,GAEhDxD,GAAOmB,mBAELtS,QAAQ,aAAc0V,IAvYvBvE,GAiZHwE,4BAA8B,SAAChB,EAA8BiB,GACvE,IAAIjC,EAkBJ,OAhBIA,EADAgB,EACQxD,GAAOkB,iBAAiBrS,QAAQ,iBAAkB2U,GAElDxD,GAAOiB,yBAGJyD,IAAXD,IAEIA,EAAOE,KACPnC,GAAK,gBAAaiC,EAAOE,MAGpBF,EAAOG,OAASH,EAAOI,SAC5BrC,GAAK,iBAAciC,EAAOG,MAArB,mBAAqCH,EAAOI,UAIlDrC,GApaMxC,GA6aH8E,0BAA4B,SAACtB,EAA8BuB,GAQrE,OANIvB,EACQxD,GAAOwB,eAAe3S,QAAQ,iBAAkB2U,GAEhDxD,GAAOuB,mBAEL1S,QAAQ,uBAAwBkW,IApbjC/E,GA8bHgF,iCAAmC,SAACxB,EAA8ByB,GAS5E,OAPIzB,EACQxD,GAAO0B,wBACV7S,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,gBAAiBoW,GAEtBjF,GAAOyB,2BAA2B5S,QAAQ,gBAAiBoW,IAQxE,IAGMC,GAAa,yBAGbC,GAAQD,GAKRE,GAAO,UAAMF,GAAN,WAKPG,GAAK,UAAMH,GAAN,UAELI,GAA0B,SAG1BC,GAAgB,UAAML,GAAN,qBAEhBM,GAAqC,oBAGrCC,GAAkB,UAAMP,GAAN,uBAElBQ,GAAuC,sBAQvCC,IALO,UAAMT,GAAN,eAKK,UAAMA,GAAN,0BAEZU,GAAiC,wBAGjCC,GAAiB,UAAMX,GAAN,yBAEjBY,GAAsC,wBAGtCC,GAAM,UAAMb,GAAN,WAENc,GAA2B,UAG3BC,GAAY,UAAMf,GAAN,iBACZgB,GAAU,UAAMD,GAAN,oBAGVE,IAF4C,UAAMF,GAAN,oCAEX,iBACjCG,GAA4B,UAAMD,GAAN,oBAG5BE,GAAe,UAAMnB,GAAN,wBAEfoB,GAAoC,uBAEpCC,GAAkB,UAAMrB,GAAN,gCAClBsB,GAAuC,+BAEvCC,GAAU,UAAMvB,GAAN,eACVwB,GAA+B,cAK/BC,IAHY,UAAMzB,GAAN,iBAGR,UAAMA,GAAN,UACJ0B,GAAyB,QAEzBC,GAAe,gBACfC,GAAiB,kBAEjBC,GAAoC,uC,qBChiBpCC,GAAb,kCAAaA,GAEFC,+BAFED,GACFE,0BAA4B,sBAC0C,YAFpEF,GAGFG,4BAA8BH,GAAUE,0BAA4B,UAHlEF,GAMFI,2BANEJ,GAKFK,cAAgB,SACsC,0BANpDL,GAOFM,gBAAkBN,GAAUK,cAAgB,UAP1CL,GAUFO,gBAVEP,GASFQ,eAAiB,UAC2B,QAV1CR,GAaFS,YAbET,GAYFU,eAAiB,UACuB,UAbtCV,GAcFW,aAAeX,GAAUU,eAAiB,iBAdxCV,GAeFY,oBAAsBZ,GAAUU,eAAiB,mCAf/CV,GAgBFa,WAAab,GAAUU,eAAiB,UAhBtCV,GAiBFc,uBAAyBd,GAAUU,eAAiB,6BAjBlDV,GAkBFe,oBAAsBf,GAAUU,eAAiB,UAlB/CV,GAqBFgB,YArBEhB,GAoBFiB,gBAAkB,WACuB,QArBvCjB,GAsBFkB,cAAgBlB,GAAUiB,gBAAkB,kBAtB1CjB,GAuBFmB,kBAAoBnB,GAAUiB,gBAAkB,sBAvB9CjB,GAwBFoB,iBAAmBpB,GAAUiB,gBAAkB,uBAxB7CjB,GA2BFqB,mBA3BErB,GA0BFsB,kBAAoB,aAC8B,QA3BhDtB,GA4BFuB,6BAA+BvB,GAAUsB,kBAAoB,uBA5B3DtB,GA6BFwB,yBAA2BxB,GAAUsB,kBAAoB,UA7BvDtB,GAgCFyB,oBAhCEzB,GA+BF0B,qBAAuB,iBAC+B,OAhCpD1B,GAmCF2B,yBAnCE3B,GAkCF4B,wBAA0B,oBACoC,QAnC5D5B,GAqCF6B,0BArCE7B,GAoCF8B,yBAA2B9B,GAAU4B,wBAA0B,WACC,UArC9D5B,GAwCF+B,wCAxCE/B,GAuCFgC,mCAAqC,iCACmD,YAxCtFhC,GA2CFiC,uBA3CEjC,GA0CFkC,cAAgB,SACkC,iBA3ChDlC,GA6CFmC,UAAY,Q,ICxCXC,GDmDSC,G,iDACjBC,QAA8BvpB,wC,4CAS9B,SAAiBwpB,EAAkBC,GAC/B,IAAIC,EAAU7oB,KAAK0oB,QAAUC,EAAWF,EAAIK,qBAAqBF,GACjE,OAAOG,UAAUF,K,8DAoErB,WAAqBG,EACAL,EACAM,EACAC,GAHrB,uFAKqB,OAAbP,GAAyC,IAApBA,EAAS5d,OALtC,sBAMc,IAAIoe,MAAM,aANxB,cASUra,EAAc9O,KAAKopB,SACrBT,OACmB7E,IAAnBmF,GAAmD,OAAnBA,GAA8D,OAAnCA,EAAeL,gBACpEK,EAAeL,gBACf,MAbd,SAgB0D5pB,EAASyS,OAAOkR,YAhB1E,UAgBQA,EAhBR,gBAmBY0G,EAAyB,MAEzB1G,EArBZ,kCAsB4BA,EAAY2G,aAtBxC,QAsBYD,EAtBZ,sBA4BYE,OADoBzF,IAApBoF,GAAiCA,OACHpF,IAAnBmF,GAAmD,OAAnBA,GACT,OAA/BA,EAAeO,YACZf,EAAIgB,cAAcR,EAAeO,aACjC,UAGwB1F,IAAnBmF,GAAmD,OAAnBA,GACT,OAA/BA,EAAeO,YACZP,EAAeO,YACf,KAGJE,EAA6B,CAC/BC,OAAQX,EACRla,IAAKA,EACLvC,KAAMgd,EACNK,QAAS,KAGTP,IACAK,EAAOG,QAAU,CACb,cAAiBR,QAGGvF,IAApBoF,GAAiCA,IACjCQ,EAAOG,QAAP,2BACOH,EAAOG,SADd,IAGI,eAAe,iCAAf,OAAiDN,EAASO,eAxD9E,UA6D4CC,KAAMC,QAAQN,GA7D1D,eA6DY7O,EA7DZ,yBA+De7a,KAAKiqB,cAAcpP,IA/DlC,wCAiEcnO,EAAQ+b,EAAIyB,WAAJ,MACdC,QAAQC,IAAR,0CAA+C1d,EAAM2d,WAArD,oBAA2E3d,EAAMyE,UAC3E,IAAIgY,MAAMzc,EAAM2d,WAAa,IAAM3d,EAAMyE,SAnEvD,0D,wFA6EA,SAAsB0J,GAClB,GAAiB,OAAbA,EACA,MAAM,IAAIsO,MAAM,kBAGpB,GAAInpB,KAAKsqB,oBAAoBzP,GACzB,OAAOA,EAGX,MAAM,IAAIsO,MAAM,qB,iCA+CpB,SAA2BtO,GACvB,OAAmB,MAAZA,GAAoBA,EAASnL,QAAU,KAAOmL,EAASnL,OAAS,O,mCAjM3E,SAAoCkZ,GAChC,GAAwB,OAApBA,EACA,MAAO,GAGX,IAAI2B,EAAiB,IAErB,IAAK,IAAIC,KAAO5B,EACZ,GAAIA,EAAgBzZ,eAAeqb,GAAM,CACrC,IAAIvR,EAAQ2P,EAAgB4B,QACd1G,IAAV7K,GAAiC,OAAVA,IAClBsR,EAAOE,SAAS,OACjBF,GAAU,KAEdA,GAAM,UAAOC,EAAP,YAAcvR,EAAMyR,aAStC,OAJIH,EAAOE,SAAS,OAChBF,EAAS,IAGNA,I,2BASX,SAA6Bhe,GACzB,GAAa,OAATA,EACA,OAAO,KAGX,IAAMoe,EAAW,IAAIC,SAErB,IAAK,IAAIJ,KAAOje,EACZ,GAAIA,EAAK4C,eAAeqb,GAAM,CAC1B,IAAIvR,EAAQ1M,EAAKie,QACH1G,IAAV7K,GAAiC,OAAVA,GACvB0R,EAASE,OAAOL,EAAKvR,GAKjC,OAAO0R,I,wBA0GX,SAA0Bje,GACtB,IAO6B,EAPzBoe,EAA+B,CAC/BT,YAAa,EACblZ,QAAS,IAITzE,EAAMmO,SACFnO,EAAMmO,SAAStO,OACfue,EAAY,CACRT,WAAY3d,EAAMmO,SAAStO,KAAKiO,KAChCrJ,QAAO,UAAEzE,EAAMmO,SAAStO,KAAKwe,cAAtB,QAAgCre,EAAMmO,SAAStO,KAAK4E,UAMnE2Z,EADKpe,EAAMsd,QACC,CACRK,YAAa,EACblZ,QAAS,6BAKD,CACRkZ,YAAa,EACblZ,QAAS,qBAIjB,OAAO2Z,M,KEtPFE,GAAgB,SAAC,GAaxB,IAXEC,EAWH,EAXGA,OACAC,EAUH,EAVGA,aAUH,IATGC,gCASH,MAT8B,KAS9B,MARGC,0BAQH,MARwB,KAQxB,EAPGC,EAOH,EAPGA,gBAOH,IANGC,cAMH,MANY,KAMZ,MALGrS,aAKH,MALW,KAKX,EACKtJ,EAAK3Q,EACNgU,WACAzS,IAAIqO,IACJ9B,OACA0d,IAELxrB,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAI,CACD7E,KACAsb,SACAC,eACAC,2BACAC,qBACAC,kBACAC,SACArS,QACAsS,KAAMtP,OAET7P,MAAK,eAGLsI,OAAM,SAAAhI,QAQF8e,GAA2B,2BAc3BC,GAAiB,yCAAG,gDAAA3f,EAAA,iEAEzBmf,cAFyB,MAEhB,KAFgB,MAGzBC,oBAHyB,MAGV,KAHU,MAIzBE,0BAJyB,MAIJ,KAJI,MAOzBM,6BAPyB,aAQzBC,eARyB,MAQf,KARe,oBAWtB,IAAI3f,SAAQ,SAACC,EAASC,GACzB,IAAKyf,EACD,OAAOzf,EAAO,iBAGlB,IAAI0f,EAAgB5sB,EACfgU,WACAzS,IAAIqO,IAET,OAAQ+c,GACJ,KAAKH,GACD,IAAKP,EACD,OAAO/e,EAAO,iCAGlB0f,EAAgBA,EACXC,aAAa,UACbC,QAAQb,GAEb,MAEJ,IA7C4B,2BA8CxB,IAAKC,EACD,OAAOhf,EAAO,uCAGlB0f,EAAgBA,EACXC,aAAa,gBACbC,QAAQZ,GAEb,MAEJ,IAvDyC,wCAwDrC,IAAKE,EACD,OAAOlf,EAAO,6CAGlB0f,EAAgBA,EACXC,aAAa,sBACbC,QAAQV,GAEb,MAEJ,QACI,OAAOlf,EAAO,iBAGtB,IAAI6f,EAAa,GAEjBH,EACKI,KAAK,SAAS,SAAAC,GACX,OAAKA,GACGA,EAAUC,YACVD,GAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,gBAKpDH,EAAUrf,SAAQ,SAAAiH,GACdkY,EAAWjf,KAAK+G,EAASsY,UAGzBT,OACA1f,QAAQqgB,IACJN,EAAWlS,KAAI,SAAAyS,GACX,OAAO,IAAItgB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBD,EAASrB,QACrB7e,MAAK,SAAAoD,GAEF,OADA8c,EAASE,YAAchd,EAChBvD,EAAQ8f,MAElBrX,OAAM,SAAAhI,GAEH,OAAOR,EAAOQ,aAIhCN,MAAK,WACH,OAAOH,EAAQ8f,MAChBrX,OAAM,SAAAhI,GAEL,OAAOR,EAAOQ,MAGXT,EAAQ8f,IA7BR9f,EAAQ8f,MAgCtBrX,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAnGG,2CAAH,sDAmHjB+f,GAA4C,2BAsB5CC,GAA4C,oCA0B5CC,GAAgB,yCAAG,4CAAA7gB,EAAA,iEAAQ8gB,aAAR,MAAgB,GAAhB,MAAoBzb,eAApB,MAA8B,GAA9B,MAAkC8Z,cAAlC,MAA2C,GAA3C,MAA+CK,cAA/C,MAAwD,GAAxD,oBACrB,IAAItf,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WACdrD,EAAKkd,EACNtsB,IAAIqO,IACJ9B,OACA0d,IACLqC,EACKtsB,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAI,CACD7E,KACAid,QACAzb,UACA8Z,SACAK,SACA7gB,KAAMwR,OAET7P,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAO,uCAtBE,2CAAH,sDAmChB4gB,GAAsB,SAAC,GAU9B,IAAD,IARG7B,cAQH,MARY,KAQZ,MAPG8B,YAOH,MAPU,KAOV,EANGC,EAMH,EANGA,MACAte,EAKH,EALGA,KAKH,IAJGue,aAIH,MAJW,KAIX,EAHGC,EAGH,EAHGA,QACAC,EAEH,EAFGA,YAGJ,OAAO,IAAInhB,SAAQ,SAACC,EAASC,GACzB,IAAMkhB,EAAQpuB,EACTgU,WACAzS,IAAIqO,IAEHye,EAAYD,EAAMtgB,OAAO0d,IAE/B4C,EACK/Z,MAAMga,GACN7Y,IAAI,CACDyW,SACAqC,eAAgBP,EAChBC,QACAte,OACAue,QACAC,UACAC,cACAxd,GAAI0d,EACJ9B,KAAMtP,OAET7P,MAAK,WACF,OAAOH,EAAQohB,MAElB3Y,OAAM,SAAAhI,WAeN6gB,GAA6B,yCAAG,WAAOC,GAAP,UAAA1hB,EAAA,+EAClC,IAAIE,SAAQ,SAACC,EAASC,GAEzB,IAAIuhB,EAAc,GAElBzuB,EACKgU,WACAzS,IAAIqO,IACJid,aAAa,QACbC,QAAQ0B,GACRxB,KAAK,SAAS,SAAAC,GACX,OAAKA,GACGA,EAAUC,YACVD,GAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,gBAKpDH,EAAUrf,SAAQ,SAAAiH,GACd4Z,EAAY3gB,KAAK+G,EAASsY,UAGvBlgB,EAAQwhB,IAPJxhB,EAAQwhB,MAStB/Y,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAzBe,2CAAH,sDAwC7BghB,GAAa,yCAAG,WAAOV,GAAP,UAAAlhB,EAAA,+EAClB,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAM6G,EAAa/T,EAASgU,WAE5BD,EACKxS,IAAIqO,IACJid,aAAa,SACbC,QAAQkB,EAAM7hB,eACd6gB,KAAK,SAAS,SAAAC,GACX,GAAIA,GAAaA,EAAUE,OAASF,EAAUG,cAAgB,EAAG,CAE7D,IAAIpI,EAAQ,KAMZ,OALAiI,EAAUrf,SAAQ,SAAAiH,GACdmQ,EAAQnQ,EAASsY,SAIdlgB,EAAQ,CACX0hB,YAAY,EACZC,eAAe,EACf5J,MAAOA,IAIfjR,EACKxS,IAAIqO,IACJid,aAAa,SACbC,QAAQkB,EAAM7hB,eACd6gB,KAAK,SAAS,SAAAC,GACX,GAAIA,GAAaA,EAAUE,OAASF,EAAUG,cAAgB,EAAG,CAE7D,IAAI5c,EAAO,KAMX,OALAyc,EAAUrf,SAAQ,SAAAiH,GACdrE,EAAOqE,EAASsY,SAIblgB,EAAQ,CACX0hB,YAAY,EACZC,eAAe,EACfpe,KAAMA,IAIV,OAAOvD,EAAQ,CACX0hB,YAAY,OAIvBjZ,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAGzBgI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAtDD,2CAAH,sDAoEbmhB,GAAkB,yCAAG,WAAO5C,GAAP,gBAAAnf,EAAA,6DAE1BgiB,EAAiB,GAFS,kBAIvB,IAAI9hB,SAAQ,SAACC,EAASC,GAEzBlN,EACKgU,WACAzS,IAAIqO,IACJid,aAAa,kBACbC,QAAQb,GACRe,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQ6hB,GAGnB7B,EAAUrf,SAAQ,SAAAiH,GACd,IAAMka,EAAcla,EAASsY,MAEzB4B,EAAY5e,eAAe,mBAC3B2e,EAAehhB,KAAK,CAChBihB,YAAaA,EACbhB,KAAMgB,EAAYC,UAClBC,kBAAmBF,EAAYre,YAK3C1D,QAAQqgB,IAAIyB,EAAejU,KAAI,SAAAqU,GAC3B,OAAO,IAAIliB,SAAQ,SAACC,EAASC,GACzBlN,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM6a,EAAcnB,MACpBf,KAAK,SAAS,SAAAnY,GACX,IAAMsa,EAAeta,EAASsY,MAG9B,OAFA+B,EAAcE,aAAeD,EAAaC,aAC1CF,EAAcG,aAAeF,EACtBliB,EAAQiiB,aAI1B9hB,MAAK,WACF,OAAOH,EAAQ6hB,MAElBpZ,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAGzBgI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UArDI,2CAAH,sDAmElB4hB,GAA2B,yCAAG,WAAOvB,GAAP,UAAAjhB,EAAA,+EAChC,IAAIE,SAAQ,SAACC,EAASC,GACzBlN,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM0Z,GACNf,KAAK,SAAS,SAAAnY,GACX,OAAKA,GAAaA,EAASqY,SAIpBjgB,EAAQ4H,EAASsY,OAHbjgB,EAAO,kCARS,2CAAH,sDAyB3BqiB,GAAoC,yCAAG,WAAO3L,GAAP,UAAA9W,EAAA,+EACzC,IAAIE,SAAQ,SAACC,EAASC,GACzBlN,EACKgU,WACAzS,IAAIqO,IACJid,aAAa,iBACbC,QAAQlJ,GACRoJ,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOlgB,EAAO,mBAGlB+f,EAAUrf,SAAQ,SAAAiH,GACd,OAAO5H,EAAQ4H,EAASsY,iBAhBQ,2CAAH,sDAgCpCqC,GAAiB,yCAAG,aAAoCruB,GAApC,oBAAA2L,EAAA,iEAAQ4C,YAAR,MAAe,KAAf,MAAqBse,WAArB,MAA6B,KAA7B,oBACtB,IAAIhhB,SAAQ,SAACC,EAASC,GAEzB,GAVkC,IAU9B/L,GATiC,IAU9BA,EAEH,OAAO+L,EAAO,kBAGlB,IAAIuiB,EAAgB,IAhBc,IAoB9BtuB,EACmBnB,EACdgU,WACAzS,IAAIqO,IAEU5P,EACdgU,WACAzS,IAAIqO,IACJid,aAAa,oBACb6C,QAAQhgB,EAAKvD,gBAIjB6gB,KAAK,SAAS,SAAAC,GACX,OAAKA,GACGA,EAAUC,YACVD,GAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,gBAKpDH,EAAUrf,SAAQ,SAAAiH,GACd,IAAMsa,EAAeta,EAASsY,MAzCL,IA0CrBhsB,EACIguB,EAAaQ,iBAAiBhhB,SAASe,EAAKvD,gBAC5CsjB,EAAc3hB,KAAK+G,EAASsY,OAGhCsC,EAAc3hB,KAAK+G,EAASsY,UAI7BlgB,EAAQwiB,IAdJxiB,EAAQwiB,UA/BF,2CAAH,wDA2DjBG,GAA6B,yCAAG,WAAO5B,GAAP,kBAAAlhB,EAAA,6DAEnC+gB,EAAK7tB,EAASgU,WAChB6b,EAA2B,GAHU,kBAKlC,IAAI7iB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJid,aAAa,SACbC,QAAQkB,EAAM7hB,eACd6gB,KAAK,SAAS,SAAAC,GAGX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQ4iB,GAGnB5C,EAAUrf,SAAQ,SAAAiH,GACd,IAAMka,EAAcla,EAASsY,MAC7B0C,EAAyB/hB,KAAK,CAC1BgiB,QAASf,EAAYC,UACrBe,QAAShB,OAIjB/hB,QAAQqgB,IAAIwC,EAAyBhV,KAAI,SAAAmV,GACrC,OAAO,IAAIhjB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJyE,MAAM2b,EAAwBF,SAC9B9C,KAAK,SAAS,SAAAnY,GACX,IAAMsa,EAAeta,EAASsY,MAM9B,OALA6C,EAAwBF,QAAU,CAC9B/B,KAAMoB,EAAapB,KACnBkC,YAAad,EAAac,YAC1B5f,KAAM8e,EAAa9e,MAEhBpD,EAAQ4iB,aAI1BziB,MAAK,WACF,OAAOH,EAAQ4iB,MAElBna,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAhDO,2CAAH,sDA4F7BwiB,GAAO,yCAAG,WAAOjtB,EAAMgpB,GAAb,UAAAnf,EAAA,+EACZ,IAAIE,SAAQ,SAACC,EAASC,GAEZ,IAATjK,EACAjD,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM4X,GACNe,KAAK,SAAS,SAAAnY,GAEX,OAAKA,GAAaA,EAASqY,SAKpBjgB,EAAQ4H,EAASsY,OAJbjgB,EAAO,qBAMrBwI,OAAM,SAAAhI,GACH,OAAOR,EAAO,qBAIR,IAATjK,GACLjD,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM4X,GACNe,KAAK,SAAS,SAAAnY,GAEX,OAAKA,GAAaA,EAASqY,SAKpBjgB,EAAQ4H,EAASsY,OAJbjgB,EAAO,qBAMrBwI,OAAM,SAAAhI,GACH,OAAOR,EAAO,yBArCX,2CAAH,wDAmDPqgB,GAAgB,yCAAG,WAAO4C,GAAP,UAAArjB,EAAA,+EACrB,IAAIE,SAAQ,SAACC,EAASC,GAEzB,IAAKijB,EACD,OAAOjjB,EAAO,oBAIlBgjB,GAAQ,EAAGC,GACN/iB,MAAK,SAAAoD,GACF,OAAOvD,EAAQuD,MAElBkF,OAAM,SAAAhI,GAEHwiB,GAAQ,EAAGC,GACN/iB,MAAK,SAAA4X,GAEF,GAAKA,EAAMlB,WAYP,OAAO7W,EAAQ+X,GAXfsK,GAA4BtK,EAAM+I,MAC7B3gB,MAAK,SAAAiiB,GAEF,OADArK,EAAMqK,aAAeA,EACdpiB,EAAQ+X,MAElBtP,OAAM,SAAAhI,GACH,OAAOR,EAAO,yBAQ7BwI,OAAM,SAAAhI,GACH,OAAOR,EAAO,+BAjCN,2CAAH,sDAuDhBkjB,GAAW,yCAAG,WAAOC,GAAP,UAAAvjB,EAAA,+EAChB,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WACdsc,EAAUzC,EAAGtsB,IAAIqO,IAAuB9B,OAAO0d,IACrD6E,EAAS1f,GAAK2f,EACdzC,EACKtsB,IAAIqO,IACJyE,MAAMgc,EAAS1f,IACf6E,IAAI6a,GACJjjB,MAAK,WACF,OAAOH,EAAQqjB,MAElB5a,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAbH,2CAAH,sDAqBX6iB,GAAmB,mBACnBC,GAAsB,sBAetBC,GAAU,yCAAG,WAAOtvB,GAAP,UAAA2L,EAAA,+EACf,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAIwjB,EAAS,GAEb,GAAIvvB,IAASovB,IAAoBpvB,IAASqvB,GACtC,OAAOtjB,EAAO,iBAGPlN,EAASgU,WAGfzS,IAAIqO,IACJod,KAAK,SAAS,SAAAC,GAGX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQyjB,GAGnBzD,EAAUrf,SAAQ,SAAAiH,GACd,IAAI8b,EAAQ9b,EAASsY,MACjBhsB,IAASovB,KACJI,EAAMxgB,eAAe,YAClBwgB,EAAMxgB,eAAe,aAAgC,IAAlBwgB,EAAMC,UAC7CF,EAAO5iB,KAAK6iB,GAGZA,EAAMxgB,eAAe,aAAgC,IAAlBwgB,EAAMC,SACzCF,EAAO5iB,KAAK6iB,MAKxB3jB,QAAQqgB,IAAIqD,EAAO7V,KAAI,SAAA8V,GACnB,OAAO,IAAI3jB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBoD,EAAME,OAAOlgB,IACzBvD,MAAK,SAAAoD,GAEF,OADAmgB,EAAME,OAASrgB,EACRvD,EAAQyjB,MAElBhb,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIzBN,MAAK,WACF,OAAOH,EAAQyjB,MAElBhb,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aApDZ,2CAAH,sDAmEVojB,GAAS,yCAAG,WAAOC,GAAP,UAAAjkB,EAAA,+EACd,IAAIE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAM0c,EAAYpgB,IAClBqgB,OAAOD,GACP3jB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAXL,2CAAH,sDAyBTujB,GAAW,yCAAG,WAAOX,GAAP,UAAAxjB,EAAA,+EAChB,IAAIE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAMic,GACNjc,MAAM,WACNmB,KAAI,GACJpI,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAZH,2CAAH,sDAyBXwjB,GAAY,yCAAG,WAAOC,GAAP,UAAArkB,EAAA,+EACjB,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WACdod,EAAWvD,EAAGtsB,IAAIqO,IAA8B9B,OAAO0d,IAC7D2F,EAAUxgB,GAAKygB,EACfvD,EACKtsB,IAAIqO,IACJyE,MAAM8c,EAAUxgB,IAChB6E,IAAI2b,GACJ/jB,MAAK,WACF,OAAOH,EAAQmkB,MAElB1b,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAbF,2CAAH,sDA2BZ2jB,GAAU,yCAAG,WAAOC,GAAP,UAAAxkB,EAAA,+EACf,IAAIE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAMid,EAAa3gB,IACnBqgB,OAAOM,GACPlkB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAXJ,2CAAH,sDAyBV6jB,GAAY,yCAAG,WAAOH,GAAP,UAAAtkB,EAAA,+EACjB,IAAIE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAM+c,GACN/c,MAAM,WACNmB,KAAI,GACJpI,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAZF,2CAAH,sDAoBZ8jB,GAAoB,oBAUpBC,GAAW,yCAAG,WAAOtwB,EAAMuwB,GAAb,kBAAA5kB,EAAA,6DACjB+gB,EAAK7tB,EAASgU,WAChB2d,EAAU,GAFS,kBAIhB,IAAI3kB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJid,aAAa,WACbC,QAAQ4E,EAAc/gB,IACtBqc,KAAK,SAAS,SAAAC,GAEX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQ0kB,GAGnB1E,EAAUrf,SAAQ,SAAAiH,GACd,IAAI+c,EAAS/c,EAASsY,MAElBhsB,IAASqwB,KACJI,EAAOzhB,eAAe,YACnByhB,EAAOzhB,eAAe,aAAiC,IAAnByhB,EAAOhB,UAC/Ce,EAAQ7jB,KAAK8jB,GAGbA,EAAOzhB,eAAe,aAAiC,IAAnByhB,EAAOhB,SAC3Ce,EAAQ7jB,KAAK8jB,MAKzB5kB,QAAQqgB,IAAIsE,EAAQ9W,KAAI,SAAA+W,GACpB,OAAO,IAAI5kB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBqE,EAAOf,OAAOlgB,IAC1BvD,MAAK,SAAAoD,GAEF,OADAohB,EAAOf,OAASrgB,EACTvD,EAAQ0kB,MAElBjc,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAG1BN,MAAK,WACL,OAAOH,EAAQ0kB,MAChBjc,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,aA/CP,2CAAH,wDA6DXmkB,GAAiB,yCAAG,WAAOC,GAAP,UAAAhlB,EAAA,+EACtB,IAAIE,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WACd+d,EAAUlE,EAAGtsB,IAAIqO,IAAqC9B,OAAO0d,IACnEsG,EAASnhB,GAAKohB,EACdlE,EACKtsB,IAAIqO,IACJyE,MAAMyd,EAASnhB,IACf6E,IAAIsc,GACJ1kB,MAAK,WACF,OAAOH,EAAQ8kB,MAElBrc,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAbG,2CAAH,sDA2BjBskB,GAAe,yCAAG,WAAOC,GAAP,UAAAnlB,EAAA,+EACpB,IAAIE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAM4d,EAAkBthB,IACxBqgB,OAAOiB,GACP7kB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAXC,2CAAH,sDAyBfwkB,GAAiB,yCAAG,WAAOC,GAAP,UAAArlB,EAAA,+EACtB,IAAIE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAM8d,GACN9d,MAAM,WACNmB,KAAI,GACJpI,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAZG,2CAAH,sDA2BjB0kB,GAAiB,yCAAG,WAAOC,GAAP,kBAAAvlB,EAAA,6DACvB+gB,EAAK7tB,EAASgU,WAChBse,EAAU,GAFe,kBAItB,IAAItlB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJid,aAAa,YACbC,QAAQuF,EAAe1hB,IACvBqc,KAAK,SAAS,SAAAC,GAEX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQqlB,GAGnBrF,EAAUrf,SAAQ,SAAAiH,GACd,IAAIid,EAAWjd,EAASsY,MACxBmF,EAAQxkB,KAAKgkB,MAGjB9kB,QAAQqgB,IAAIiF,EAAQzX,KAAI,SAAA0X,GACpB,OAAO,IAAIvlB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBgF,EAAM1B,OAAOlgB,IACzBvD,MAAK,SAAAoD,GAEF,OADA+hB,EAAM1B,OAASrgB,EACRvD,EAAQqlB,MAElB5c,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAG1BN,MAAK,WACL,OAAOH,EAAQqlB,MAChB5c,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,aArCD,2CAAH,sDAmDjB8kB,GAAkB,yCAAG,6BAAA1lB,EAAA,6DACxB+gB,EAAK7tB,EAASgU,WADU,kBAEvB,IAAIhH,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJod,KAAK,SAAS,SAAAnY,GACX,IAAMiK,EAAiBjK,EAASsY,MAChC,OAAOlgB,EAAQ6R,UAPG,2CAAH,qDAiBlB2T,GAAgB,yCAAG,WAAO1E,GAAP,gBAAAjhB,EAAA,6DACtB+gB,EAAK7tB,EAASgU,WADQ,kBAErB,IAAIhH,SAAQ,SAACC,EAASC,GACzB,IAAIwlB,EAAe,IAKf3E,EACQF,EACHtsB,IAAIqO,IACJid,aAAa,aACbC,QAAQiB,GAILF,EACHtsB,IAAIqO,KAIRod,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQylB,GAEnBzF,EAAUrf,SAAQ,SAAAiH,GACd,IAAIrE,EAAOqE,EAASsY,MACpBuF,EAAa5kB,KAAK0C,MAGtBxD,QAAQqgB,IAAIqF,EAAa7X,KAAI,SAAAkU,GACzB,OAAO,IAAI/hB,SAAQ,SAACC,EAASC,GACzBoiB,GAA4BP,EAAYC,WACnC5hB,MAAK,SAAA+hB,GAOF,GANAJ,EAAYe,QAAU,CAClB/B,KAAMoB,EAAapB,KACnBkC,YAAad,EAAac,YAC1B5f,KAAM8e,EAAa9e,OAGnB0e,EAAY5e,eAAe,kBAO3B,OAAOlD,EAAQylB,GANfnF,GAAiBwB,EAAY4D,gBACxBvlB,MAAK,SAAAwlB,GAEF,OADA7D,EAAY6D,aAAeA,EACpB3lB,EAAQylB,gBAQtCtlB,MAAK,WACF,OAAOH,EAAQylB,MAElBhd,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAGzBgI,OAAM,SAAAhI,GACH,OAAOR,EAAO,CAACQ,MAAO,oBA/DN,2CAAH,sDA8EhBmlB,GAAkB,yCAAG,oCAAA/lB,EAAA,iEAAQmf,cAAR,MAAiB,KAAjB,MAAuB8B,YAAvB,MAA8B,KAA9B,oBACvB,IAAI/gB,SAAQ,SAACC,EAASC,GACzB,IAAI4lB,EAAc9yB,EACbgU,WACAzS,IAAIqO,IAET,GAAIqc,GAAU8B,EACV,OAAO7gB,EAAO,sDAelB,GAZI+e,IACA6G,EAAcA,EACTjG,aAAa,UACbC,QAAQb,IAGb8B,IACA+E,EAAcA,EACTjG,aAAa,eACbC,QAAQiB,KAGZ+E,EACD,OAAO5lB,EAAO,kBAGlB,IAAI6lB,EAAW,GAEfD,EACK9F,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQ8lB,GAGnB9F,EAAUrf,SAAQ,SAAAiH,GACdke,EAASjlB,KAAK+G,EAASsY,UAG3BngB,QAAQqgB,IAAI0F,EAASlY,KAAI,SAAAmQ,GACrB,OAAO,IAAIhe,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBvC,EAAQiB,QACpB7e,MAAK,SAAAogB,GAEFxC,EAAQwC,YAAcA,EAEtB8B,GAA4BtE,EAAQgI,aAC/B5lB,MAAK,SAAA+hB,GAIF,OAFAnE,EAAQjL,MAAQoP,EAETliB,EAAQ8lB,MAElBrd,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAGzBgI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIzBN,MAAK,WACF,OAAOH,EAAQ8lB,MAElBrd,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aApEJ,2CAAH,sDAuFlBulB,GAA8B,yCAAG,WAAOC,EAAW/xB,GAAlB,gBAAA2L,EAAA,6DACpC+gB,EAAK7tB,EAASgU,WADsB,kBAEnC,IAAIhH,SAAQ,SAACC,EAASC,GAEzB,IAAIwlB,EAAe,GAEnB,GAT4C,IASxCvxB,GARyC,IAStCA,GARgC,IAShCA,EAEH,OAAO+L,EAAO,kBAGlB2gB,EACKtsB,IAAIqO,IACJid,aAlBuC,IAmBpC1rB,EAEI,KApBiC,IAsBjCA,EAEI,iBAEA,SAEX2rB,QAAQoG,GACRlG,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOlgB,EAAO,2BAGlB+f,EAAUrf,SAAQ,SAAAiH,GACd,IAAIka,EAAcla,EAASsY,MAC3BuF,EAAa5kB,KAAKihB,MAGtB/hB,QAAQqgB,IAAIqF,EAAa7X,KAAI,SAAAkU,GACzB,OAAO,IAAI/hB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJyE,MAAM0a,EAAYC,WAClBhC,KAAK,SAAS,SAAAnY,GACX,IAAMsa,EAAeta,EAASsY,MAM9B,OALA4B,EAAYe,QAAU,CAClB/B,KAAMoB,EAAapB,KACnBkC,YAAad,EAAac,YAC1B5f,KAAM8e,EAAa9e,MAEhBpD,EAAQylB,MAElBhd,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIzBN,MAAK,WACF,OAAOH,EAAQylB,MAElBhd,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aA/DQ,2CAAH,wDAuP9BylB,GAAsB,yCAAG,WAAOxO,GAAP,gBAAA7X,EAAA,6DAC5B+gB,EAAK7tB,EAASgU,WADc,kBAE3B,IAAIhH,SAAQ,SAACC,EAASC,GACzB2gB,EAAGtsB,IAAIqO,IACFyE,MAAMsQ,GACNqI,KAAK,SAAS,SAAAnY,GACX,IAAKA,IAAaA,EAASqY,WAAarY,EAASsY,MAC7C,OAAOjgB,EAAO,qBAGlB,IAAIuD,EAAUoE,EAASsY,MAEvBmC,GAA4B7e,EAAQsd,MAC/B3gB,MAAK,SAAA2S,GACFtP,EAAQsP,MAAQA,EAEhBwN,GAAiB9c,EAAQG,UACpBxD,MAAK,SAAA6X,GAIF,GAHAxU,EAAQwU,OAASA,Efn8CP,Ies8CNxU,EAAQC,OAYR,OAAOzD,EAAQwD,GAVf2iB,GAAYzO,EAAW,KAAM0O,IACxBjmB,MAAK,SAAAiB,GAEF,OADAoC,EAAQpC,QAAUA,EACXpB,EAAQwD,MAElBiF,OAAM,SAAAhI,GAEH,OAAOR,EAAOQ,SAM7BgI,OAAM,SAAAhI,GACH,OAAOR,EAAO,sCAGzBwI,OAAM,SAAAhI,GACH,OAAOR,EAAO,iCAzCA,2CAAH,sDAyDtBomB,GAAkC,yCAAG,WAAOtO,EAAOvU,GAAd,UAAA3D,EAAA,+EACvC,IAAIE,SAAQ,SAACC,EAASC,GAEzB,IAAIqmB,GAAkC,EfxhDnB,IeyhDf9iB,EAAQwU,OAAOhiB,OACfswB,GAAkC,GAGtC9iB,EAAQwU,OAAS,KACjBxU,EAAQpC,QAAU,KAClBoC,EAAQsP,MAAQ,KAEhB,IAAIyT,EAAwB9T,KAAKC,MAAMD,KAAKE,UAAUnP,IAEtDA,EAAQqB,mBAAqBrB,EAAQN,eAAe,uBAI/CM,EAAQqB,kBAEb9R,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM5D,EAAQE,IACdqgB,OAAOvgB,GACPrD,MAAK,WACF,IAAIif,GAC8B,IAA9B5b,EAAQqB,kBAlgD+C,gCACM,0BAwgDjEka,GAAc,CACVC,OAAQjH,EAAMrU,GACdub,afjmDc,EekmDdC,yBAA0Bvc,GAC1Bwc,mBAAoB3b,EAAQE,GAC5B0b,gBAAiBA,EAAgBpd,QAAQ,YAAawB,EAAQgjB,aAC9DnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,IAC/EsJ,MAAO,CACH0Z,OAAQH,EACRI,MAAOnjB,KAKX8iB,GACA5F,GAAiB,CACbC,MACInd,EAAQqB,kBAAR,UAEOrB,EAAQgjB,YAFf,0CAIOhjB,EAAQgjB,YAJf,0BAMJthB,QACI1B,EAAQqB,kBAEJ,2HAEA,6FAERma,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MAE9EvD,MAAK,eAGLsI,OAAM,SAAAhI,OAOfmmB,GAAUpjB,EAAQE,GAAI,KAAMmjB,IACvB1mB,MAAK,SAAA2mB,GAEF,IAAIC,EAA8B,GAClCD,EAAMnmB,SAAQ,SAAAqmB,GACVD,EAA4BlmB,KAAKmmB,EAAKC,eAI1Cd,GAAY3iB,EAAQE,GAAI,KAAM0iB,IACzBjmB,MAAK,SAAAiB,GACFA,EAAQT,SAAQ,SAAAW,IACmF,IAA3FylB,EAA4B/nB,WAAU,SAAAioB,GAAU,OAAIA,IAAe3lB,EAAO2lB,eAC1EF,EAA4BlmB,KAAKS,EAAO2lB,eAIhD,IAAIC,EAAgB,GACpBH,EAA4BpmB,SAAQ,SAAAsmB,GAChC,IAAME,EAAe,CACjBxG,MACInd,EAAQqB,kBAAR,UAEOrB,EAAQgjB,YAFf,0CAIOhjB,EAAQgjB,YAJf,0BAMJthB,QACI1B,EAAQqB,kBAEJ,0HAEA,4FAERma,OAAQiI,EACR5H,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,KAEnFwjB,EAAcrmB,KAAKsmB,MAIvBpnB,QAAQqgB,IAAI8G,EAActZ,KAAI,SAAAuZ,GAC1B,OAAO,IAAIpnB,SAAQ,SAACC,EAASC,GACzBygB,GAAiByG,GACZhnB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAG1BN,MAAK,eAENsI,OAAM,SAAAhI,oBAlIS,2CAAH,wDAsJlC2mB,GAAyB,yCAAG,WAAOrP,EAAOvU,EAAS6jB,GAAvB,UAAAxnB,EAAA,+EAC9B,IAAIE,QAAJ,yCAAY,WAAOC,EAASC,GAAhB,kBAAAJ,EAAA,6DACXynB,EAAwB7U,KAAKC,MAAMD,KAAKE,UAAUnP,KAChCwU,OAAS,KAC/BsP,EAAsBlmB,QAAU,KAChCkmB,EAAsBxU,MAAQ,KAG1BuU,EAAYE,UACZ/jB,EAAQgkB,YAAuD,IAA1CH,EAAYI,yBAAkCjkB,EAAQgkB,WAAaH,EAAYI,yBACpGjkB,EAAQC,Of1oDsB,Ie8oD9BD,EAAQC,QfhpDmB,EeipD3BD,EAAQI,MAAMH,OfroDW,GewoD7BD,EAAQwU,OAAS,KACjBxU,EAAQpC,QAAU,KAClBoC,EAAQsP,MAAQ,KAnBD,mBAsBL/f,EACDgU,WACAzS,IAAIqO,IACJyE,MAAM5D,EAAQE,IACdqgB,OAAOvgB,GA1BD,eA4BP4b,EACAiI,EAAYE,SA1rD6B,6BACD,4BA4pDjC,WAmCL,IAAI/K,IAAMuB,QACZ,OACA5D,GAAUO,eACV,CACIiC,gBAAiB,KACjBY,YAAa,CACTmK,UAAW,EACXC,UAAW,CACPjQ,UAAWlU,EAAQE,OA3CxB,eAkDXqb,GAAc,CACVC,OAAQjH,EAAMrU,GACdub,afxwDkB,EeywDlBC,yBAA0Bvc,GAC1Bwc,mBAAoB3b,EAAQE,GAC5B0b,gBAAiBA,EAAgBpd,QAAQ,YAAawB,EAAQgjB,aAC9DnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,IAC/EsJ,MAAO,CACH0Z,OAAQY,EACRX,MAAOnjB,KA3DJ,UAiEPkd,GAAiB,CACbC,MAAOnd,EAAQgjB,YACfthB,QACImiB,EAAYE,SAAZ,4JAMJvI,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MA3E5E,iCA8EJ1D,KA9EI,2DAgFJC,EAAO,EAAD,KAhFF,0DAAZ,0DAD8B,2CAAH,0DAiGzB2nB,GAAkC,yCAAG,WAAO7P,EAAOvU,EAAS+jB,GAAvB,gBAAA1nB,EAAA,6DAE1CynB,EAAwB7U,KAAKC,MAAMD,KAAKE,UAAUnP,KAChCwU,OAAS,KAC/BsP,EAAsBlmB,QAAU,KAChCkmB,EAAsBxU,MAAQ,KAG1ByU,EACA/jB,EAAQI,MAAMH,Of7tDoC,GeiuDlDD,EAAQC,OfzuDqB,Ee0uD7BD,EAAQI,MAAMH,OfruDe,GewuDjCD,EAAQwU,OAAS,KACjBxU,EAAQpC,QAAU,KAClBoC,EAAQsP,MAAQ,KAnB8B,kBAqBvC,IAAI/S,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAM5D,EAAQE,IACdqgB,OAAOvgB,GACPrD,MAAK,WACF,IAAIif,EACAmI,EAxxD2C,mCACT,0BA6xDtCxI,GAAc,CACVC,OAAQjH,EAAMrU,GACdub,afz1Dc,Ee01DdC,yBAA0Bvc,GAC1Bwc,mBAAoB3b,EAAQE,GAC5B0b,gBAAiBA,EAAgBpd,QAAQ,YAAawB,EAAQgjB,aAC9DnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,IAC/EsJ,MAAO,CACH0Z,OAAQY,EACRX,MAAOnjB,KAKfkd,GAAiB,CACbC,MAAOnd,EAAQgjB,YACfthB,QACIqiB,EAAQ,sTAMZvI,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MAE9EvD,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAGzBgI,OAAM,SAAAhI,GAEH,OAAOR,EAAO,yBAtEoB,2CAAH,0DAsFlC4nB,GAA+B,yCAAG,WAAO9P,EAAOvU,EAAS6jB,GAAvB,kBAAAxnB,EAAA,6DAEvCynB,EAAwB7U,KAAKC,MAAMD,KAAKE,UAAUnP,KAChCwU,OAAS,KAC/BsP,EAAsBlmB,QAAU,KAChCkmB,EAAsBxU,MAAQ,KAG1BuU,EAAYE,UACZ/jB,EAAQgkB,YAAuD,IAA1CH,EAAYI,yBAAkCjkB,EAAQgkB,WAAaH,EAAYI,yBACpGjkB,EAAQC,Of9zDkC,Iek0D1CD,EAAQC,Ofh0DqB,Eei0D7BD,EAAQskB,aAAarkB,OflzDgB,GeqzDzCD,EAAQwU,OAAS,KACjBxU,EAAQpC,QAAU,KAClBoC,EAAQsP,MAAQ,KAEV8N,EAAK7tB,EAASgU,WAtBuB,kBAuBpC,IAAIhH,SAAQ,SAACC,EAASC,GACzB2gB,EAAGtsB,IAAIqO,IACFyE,MAAM5D,EAAQE,IACdqgB,OAAOvgB,GACPrD,MAAK,WACF,IAAIif,EACAiI,EAAYE,SA52D0B,8BACD,6BAi3DzCxI,GAAc,CACVC,OAAQjH,EAAMrU,GACdub,af/6Dc,Eeg7DdC,yBAA0Bvc,GAC1Bwc,mBAAoB3b,EAAQE,GAC5B0b,gBAAiBA,EAAgBpd,QAAQ,YAAawB,EAAQgjB,aAC9DnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,IAC/EsJ,MAAO,CACH0Z,OAAQY,EACRX,MAAOnjB,KAKfkd,GAAiB,CACbC,MAAOnd,EAAQgjB,YACfthB,QACImiB,EAAYE,SAAZ,gNAMJvI,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MAE9EvD,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAGzBgI,OAAM,SAAAhI,GAEH,OAAOR,EAAO,yBAtEiB,4CAAH,0DAoF/B8nB,GAAY,yCAAG,WAAOrQ,GAAP,kBAAA7X,EAAA,6DAClB+gB,EAAK7tB,EAASgU,WAEhBihB,EAAW,GAHS,kBAKjB,IAAIjoB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJid,aAAa,aACbC,QAAQnI,GACRqI,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQgoB,GAGnBhI,EAAUrf,SAAQ,SAAAiH,GACd,IAAIqgB,EAAUrgB,EAASsY,MACvB8H,EAASnnB,KAAKonB,MAGlBloB,QAAQqgB,IACJ4H,EAASpa,KAAI,SAAAqa,GACT,OAAO,IAAIloB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiB2H,EAAQC,aACpB/nB,MAAK,SAAAoD,GAEF,OADA0kB,EAAQrE,OAASrgB,EACVvD,EAAQgoB,MAElBvf,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WACH,OAAOH,EAAQgoB,MAChBvf,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,aAvCN,2CAAH,sDAwDZ2lB,GAAgC,EAEhCD,GAAW,yCAAG,6CAAAtmB,EAAA,6DAAO6X,EAAP,+BAAmB,KAAMuP,EAAzB,+BAAsC,KAAM/yB,EAA5C,yCAChB,IAAI6L,SAAQ,SAACC,EAASC,GACzB,IACIkoB,EADOp1B,EAASgU,WACAzS,IAAIqO,IACxB,GAAI+U,GAAaxjB,IAASkyB,GACtB+B,EAAaA,EACRvI,aAAa,aACbC,QAAQnI,OACV,KAAIuP,GAT2B,IASb/yB,EAKrB,OAAO+L,EAAO,gBAJdkoB,EAAaA,EACRvI,aAAa,cACbC,QAAQoH,GAKjB,IAAI7lB,EAAU,GAEd+mB,EACKpI,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQoB,GAGnB4e,EAAUrf,SAAQ,SAAAiH,GACd,IAAItG,EAASsG,EAASsY,MACA,KAAlB5e,EAAOC,QACPH,EAAQP,KAAKS,MAIrBvB,QAAQqgB,IACJhf,EAAQwM,KAAI,SAAAtM,GACR,OAAO,IAAIvB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBhf,EAAO2lB,YACnB9mB,MAAK,SAAAioB,GAEF,OADA9mB,EAAO8mB,SAAWA,EACXpoB,EAAQoB,MAElBqH,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WACH,OAAOH,EAAQoB,MAChBqH,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,aAlDP,2CAAH,qDAmEXomB,GAA8B,EAE9BD,GAAS,yCAAG,mDAAA/mB,EAAA,yDAAO6X,EAAP,+BAAmB,KAAMuP,EAAzB,+BAAsC,KAAM/yB,EAA5C,uBACf0sB,EAAK7tB,EAASgU,WAChBshB,EAAWzH,EAAGtsB,IAAIqO,KAClB+U,GAAaxjB,IAAS2yB,GAHL,gBAIjBwB,EAAWA,EACNzI,aAAa,aACbC,QAAQnI,GANI,2BAOVuP,GAR6B,IAQf/yB,EAPJ,iBAQjBm0B,EAAWA,EACNzI,aAAa,cACbC,QAAQoH,GAVI,iDAYV,MAZU,eAejBH,EAAQ,GAfS,kBAiBd,IAAI/mB,SAAQ,SAACC,EAASC,GACzBooB,EACKtI,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQ8mB,GAGnB9G,EAAUrf,SAAQ,SAAAiH,GACd,IAAIof,EAAOpf,EAASsY,MACD,KAAf8G,EAAKsB,OACLxB,EAAMjmB,KAAKmmB,MAInBjnB,QAAQqgB,IACJ0G,EAAMlZ,KAAI,SAAAoZ,GACN,OAAO,IAAIjnB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiB0G,EAAKC,YACjB9mB,MAAK,SAAAioB,GAEF,OADApB,EAAKoB,SAAWA,EACTpoB,EAAQ8mB,MAElBre,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WACH,OAAOH,EAAQ8mB,MAChBre,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,aAlDT,4CAAH,qDAiET8nB,GAAiB,yCAAG,WAAOvJ,GAAP,kBAAAnf,EAAA,6DACvB+gB,EAAK7tB,EAASgU,WAEhBmgB,EAAgB,GAHS,kBAKtB,IAAInnB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJid,aAAa,UACbC,QAAQb,GACRe,KAAK,SAAS,SAAAC,GACX,OAAKA,GACGA,EAAUC,YACVD,GAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,gBAKpDH,EAAUrf,SAAQ,SAAAiH,GACd,IAAIuf,EAAevf,EAASsY,MAC5BgH,EAAcrmB,KAAKsmB,MAGhBnnB,EAAQknB,IARJlnB,EAAQknB,UAfF,2CAAH,sDAqCjBsB,GAAsB,yCAAG,WAAOxJ,GAAP,gBAAAnf,EAAA,6DAC5B+gB,EAAK7tB,EAASgU,WADc,kBAG3B,IAAIhH,SAAQ,SAACC,EAASC,GAEzBsoB,GAAkBvJ,GACb7e,MAAK,SAAA+mB,GAEFnnB,QAAQqgB,IAAI8G,EAActZ,KAAI,SAAAuZ,GAC1B,OAAO,IAAIpnB,SAAQ,SAACC,EAASC,GACzB2gB,EACKtsB,IAAIqO,IACJyE,MAAM+f,EAAazjB,IACnB+kB,SACAtoB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAG1BN,MAAK,WACL,OAAOH,OACRyI,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,SAGrBgI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UA5BQ,2CAAH,sDA0MtBioB,GAA2B,SAAC1J,GACrC,OAAO,IAAIjf,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WACd4hB,EACF3J,EAEI4B,EACKtsB,IAAIqO,IACJid,aAAa,UACbC,QAAQb,GAEb4B,EACKtsB,IAAIqO,IAEbimB,EAAuB,GAE3BD,EACK5I,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAEhD,OAAOngB,EAAQ4oB,GAGnB5I,EAAUrf,SAAQ,SAAAiH,GACd,IAAIihB,EAAsBjhB,EAASsY,MACnC0I,EAAqB/nB,KAAKgoB,MAG9B9oB,QAAQqgB,IACJwI,EAAqBhb,KAAI,SAAAib,GACrB,OAAO,IAAI9oB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBuI,EAAoB7J,QAChC7e,MAAK,SAAAoD,GAEF,OADAslB,EAAoBtlB,KAAOA,EACpBvD,EAAQ4oB,MAElBngB,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WACH,OAAOH,EAAQ4oB,MAChBngB,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,aAwFrBqoB,GAAiC,yCAAG,kCAAAjpB,EAAA,6DAEzCmf,EAFyC,EAEzCA,OACA+J,EAHyC,EAGzCA,MACA/b,EAJyC,EAIzCA,MAJyC,kBAOtC,IAAIjN,SAAQ,SAACC,EAASC,GACzByoB,GAAyB1J,GACpB7e,MAAK,SAAAyoB,GAEF,GAAoC,IAAhCA,EAAqB9pB,OAAc,CACnC,IAAM4E,EAAK3Q,EAASgU,WAAWzS,IAAIqO,IAAsC9B,OAAO0d,IAE1EqK,EAAuB,CACzBI,UAAU,EACVxqB,KAAMwR,KACNtM,KACAsb,SACAiK,SAAU,CACNF,MAAO/b,IAIfja,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAIqgB,GACJzoB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,WAKtB1N,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMwhB,EAAqB,GAAGllB,IAC9B0D,MAAM,YACNA,MAAM2hB,GACNxgB,IAAIyE,GACJ7M,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,SAI7BgI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAtDmB,2CAAH,sDAsEjCyoB,GAA4B,yCAAG,kCAAArpB,EAAA,6DAEpCihB,EAFoC,EAEpCA,KACAiI,EAHoC,EAGpCA,MACA/b,EAJoC,EAIpCA,MAJoC,kBAOjC,IAAIjN,SAAQ,SAACC,EAASC,GACzBlN,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM0Z,GACN1Z,MAAM,YACNA,MAAM2hB,GACNxgB,IAAIyE,GACJ7M,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAnBc,2CAAH,sDAkC5B0oB,GAAoB,yCAAG,gCAAAtpB,EAAA,6DAAQ2D,EAAR,EAAQA,QAAS4lB,EAAjB,EAAiBA,mBAAjB,kBACzB,IAAIrpB,QAAJ,yCAAY,WAAOC,EAASC,GAAhB,UAAAJ,EAAA,6DACf2D,EAAQI,MAAMH,OfliFe,EemiF7BD,EAAQC,Of3iF0B,Ee4iFlCD,EAAQI,MAAMylB,YAAcD,EAHb,kBAMLr2B,EACDgU,WACAzS,IAAIqO,IACJyE,MAAM5D,EAAQE,IACdqgB,OAAOvgB,GAVD,gCAYJxD,KAZI,yDAcJC,EAAO,EAAD,KAdF,yDAAZ,0DADyB,2CAAH,sDCtvFpBqpB,GAA+B,+BAS/BC,GAAwB,wBAOxBC,GAAyB,yBACzBC,GAA0B,0BAuCjCC,GAAc,yCAAG,WAAO3I,EAAO4I,GAAd,UAAA9pB,EAAA,+EACZ,IAAIE,SAAQ,SAACC,EAASC,GACzB,OAAI0pB,EAAUC,cAAgBD,EAAUE,oBAC7B5pB,EAAO6pB,IfoBQ,IejBD9Z,GAA4B2Z,EAAUC,aAEpD3pB,EAAO8pB,SAGlBh3B,EACKyS,OACAwkB,2BAA2BjJ,EAAO4I,EAAUM,iBAC5C9pB,MAAK,SAAA+pB,GACFn3B,EACKyS,OACAkR,YACAyT,eAAeR,EAAUC,aACzBzpB,MAAK,WACF,OAAOH,EAAQoqB,OAElB3hB,OAAM,SAAAhI,GACH,OAAOR,EAAOoqB,UAGzB5hB,OAAM,SAAAhI,GACH,OAAOR,EAAOqqB,WA3BP,2CAAH,wDC5CPF,GAA0B,EAC1BC,GAAuB,EACvBC,GAAiC,EACjCR,GAA0C,EAC1CC,GAAoC,EAmB3CQ,G,4JAEF,WACI,MASIx2B,KAAKC,MARLi2B,EADJ,EACIA,gBACAL,EAFJ,EAEIA,YACAC,EAHJ,EAGIA,oBACAW,EAJJ,EAIIA,2BAEAC,EANJ,EAMIA,kBACAC,EAPJ,EAOIA,MACAC,EARJ,EAQIA,sBAGJ,OACI,cAACzgB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAMI,cAACG,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IANjB,SASI,eAAC,IAAD,CACItV,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,KACRS,MAAM,UAHV,kCAOA,cAACL,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRS,MAAM,gBACNJ,MAAO,CACHC,UAAW,GACXoW,aAAc,IANtB,yHAYA,cAAC4F,GAAA,EAAD,CACInc,MAAM,mBACNyN,KAAK,kBACLuK,MAAOid,EACPj0B,KAAK,WACLN,OAAO,SACPb,QAAQ,WACR8W,SAAU8e,IAGd,cAACtZ,GAAA,EAAD,CACInc,MAAM,eACNyN,KAAK,cACLuK,MAAO4c,EACP5zB,KAAK,WACLN,OAAO,SACPb,QAAQ,WACR4L,MACI+pB,IAA+BV,GAEnCne,SAAU8e,IAGd,cAACtZ,GAAA,EAAD,CACInc,MAAM,kBACNyN,KAAK,sBACLuK,MAAO6c,EACP7zB,KAAK,WACLN,OAAO,SACPb,QAAQ,WACR4L,MACI+pB,IAA+BV,GAEnCne,SAAU8e,IAGd,eAACrgB,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,cAAC,GAAD,CACIy1B,aAAcJ,EACdK,eAAgBH,MAGxB,cAACpgB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,eAAC,IAAD,CACIgW,cAAc,QACdG,MAAM,OAFV,UAII,cAAC,IAAD,CACIY,YAAa,GADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNG,QAASi1B,EAHb,sBAOJ,cAAC,IAAD,UACI,cAACr1B,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNG,QAASk1B,EACTn1B,SAC+B,IAA3By0B,EAAgBnrB,QACO,IAAvB8qB,EAAY9qB,QACmB,IAA/B+qB,EAAoB/qB,OAP5B,yC,GApIXnJ,aA2J3Bm1B,G,4MAEFD,eAAiB,WACb,EAAK72B,MAAM62B,kB,EAGfE,cAAgB,WACZ,OAAQ,EAAK/2B,MAAM42B,cACf,KA3L2B,EA4LvB,MAAO,CAAC1lB,QAAS,wBAAyB5P,MAAOsV,IAErD,KAAKyf,GACD,MAAO,CAACnlB,QAAS,4BAA6B5P,MAAOsV,IAEzD,KAAKwf,GACD,MAAO,CACHllB,QAAS,gCACT5P,MAAOsV,IAGf,KAAK0f,GACD,MAAO,CAACplB,QAAS,4BAA6B5P,MAAOsV,IAEzD,KAAKkf,GACD,MAAO,CACH5kB,QAAS,0CACT5P,MAAOsV,IAGf,KAAKmf,GACD,MAAO,CACH7kB,QACI,2CACJ5P,MAAOsV,IAGf,QACI,OAAO,O,4CAInB,WAII,OAjO4B,IAgOxB7W,KAAKC,MADL42B,aAKI,KAEA,eAAC,IAAD,CACI1f,KAAM,EACNhW,MAAO,CACHyV,gBAAiB5W,KAAKg3B,gBAAgBz1B,OAE1C2V,cAAc,SALlB,UAQI,cAAC,IAAD,CACIlQ,UAAWyQ,YAAIC,GAAOuf,mCAD1B,SAGI,cAAC/1B,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,YACRS,MAAM,UAHV,SAKKvB,KAAKg3B,gBAAgB7lB,YAI9B,cAAC,IAAD,CACIgG,MAAI,EACJD,cAAc,SACdE,cAAc,QACdjW,MAAO,CACH+U,QAAS,GALjB,SAQI,cAACmB,EAAA,EAAD,CACI3V,QAAS1B,KAAK82B,eADlB,SAGI,cAAC,KAAD,CACI/wB,SAAS,QACT5E,MAAO,CACHI,MAAOsV,iB,GApFdjV,aA8FdC,gBA1QS,SAAAC,GACpB,MAAO,CACHo0B,gBAAiBp0B,EAAM6zB,eAAeO,gBACtCL,YAAa/zB,EAAM6zB,eAAeE,YAClCC,oBAAqBh0B,EAAM6zB,eAAeG,oBAC1CW,2BAA4B30B,EAAM6zB,eAAec,+BAI9B,SAAAz0B,GACvB,MAAO,CACH00B,kBAAmB,SAAChc,GAAD,OAAW1Y,ED5BL,SAAA0Y,GAC7B,MAAO,CACHzY,KAAMszB,GACN7mB,KAAMgM,EAAMyD,OAAOzP,KACnBuK,MAAOyB,EAAMyD,OAAOlF,OCwBmBie,CAAwCxc,KAC/Eic,MAAO,kBAAM30B,EDnBV,CACHC,KAAMuzB,MCmBNoB,sBAAuB,kBAAM50B,GDZ1B,SAACA,EAAUwP,GAEdxP,EAAS,CACLC,KAAMwzB,KAGV,IAAMG,EAAY,CACdM,gBAAiB1kB,IAAWmkB,eAAeO,gBAC3CL,YAAarkB,IAAWmkB,eAAeE,YACvCC,oBAAqBtkB,IAAWmkB,eAAeG,qBAG7CnT,EAAcnR,IAAWC,KAAKjC,KAEpCmmB,GAAehT,EAAYqK,MAAO4I,GAC7BxpB,MAAK,SAAAyqB,GACF70B,EAAS,CACLC,KAAMuzB,GACNqB,iBAGJM,GACmB,CACXlM,OAAQjsB,EAASyS,OAAOkR,YAAYwM,IACpCjE,ahBgFU,EgB/EVG,gBDmKkC,yBChK7C3W,OAAM,SAAA0iB,GACHp1B,EAAS,CACLC,KAAMyzB,GACN0B,wBC0OLv1B,CAA6C20B,IAEtD9e,GAASxS,IAAWC,OAAO,CAE7B8xB,kCAAmC,CAC/B11B,MAAOsV,GACPlR,WAAY,GACZvE,UAAW,GACXoW,aAAc,M,2WC3ST6f,GAAkC,kCAClCC,GAA6B,SAAA1U,GACtC,OAAO,SAAC5gB,EAAUwP,GACYA,IAAW+lB,sBAAsB3U,gBAGjCA,GACtB5gB,EAAS,CACLC,KAAMo1B,GACNzU,oBAMH4U,GAA8C,8CAC9CC,GAAwC,SAACC,EAAcC,GAChE,MAAO,CACH11B,KAAMu1B,GACNE,eACAC,gBAIKC,GAAwB,wBACxBC,GAAuB,uBACvBC,GAAmB,WAC5B,OAAO,SAAC91B,EAAUwP,GACd,MAQIA,IAAW+lB,sBAPX3U,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBACA6oB,EAHJ,EAGIA,sBACAC,EAJJ,EAIIA,wBAEAN,EANJ,EAMIA,aACAC,EAPJ,EAOIA,YAGEM,EAAej5B,EAASyS,OAAOkR,YAGrC,IAAKzT,IAAoB6oB,IAA0BC,EAAyB,CAOxE,GALAh2B,EAAS,CACLC,KAAM21B,KAINF,IAAiBC,EAMjB,YALA31B,EAAS,CACLC,KAAM41B,GACN1J,aAAc,KACd+J,qBAAqB,IAM7B,IAAKtV,EAED,OAAIqV,OACAd,GACsBc,EAAa9I,KAC9B/iB,MAAK,SAAAoD,GlB4GJ,IkB3GMA,EAAKvN,MACDuN,EAAKsT,WACL9gB,EAAS,CACLC,KAAM41B,GACN1J,aAAc,KACd+J,qBAAqB,IAY7Bl2B,EAAS,CACLC,KAAM41B,GACN1J,aAAc,KACd+J,qBAAqB,OAIhCxjB,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM41B,GACN1J,aAAc,KACd+J,qBAAqB,YAMjCl2B,EAAS,CACLC,KAAM41B,GACN1J,aAAc,KACd+J,qBAAqB,IAQjC,GAAIhpB,EAAiB,CAGjB,GAAI0T,IAAkB1T,EAAgB0T,cAMlC,YALA5gB,EAAS,CACLC,KAAM41B,GACN1J,aAAcjf,EACdgpB,qBAAqB,IAMzBl2B,EAAS,CACLC,KAAMo1B,GACNzU,kBAGJ5gB,EAAS,CACLC,KAAM21B,KAKlBT,GAC0CvU,GACrCxW,MAAK,SAAA+hB,GACFnsB,EAAS,CACLC,KAAM41B,GACN1J,eACA+J,qBAAqB,OAG5BxjB,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM41B,GACN1J,aAAc,KACd+J,qBAAqB,UAQzCC,GAAuB,KAEdC,GAAmC,mCCvH1CC,G,4JAEF,WACI,MAMIr4B,KAAKC,MALL2iB,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBAEAM,EAJJ,EAIIA,KACA8oB,EALJ,EAKIA,WAGJ,OACI,cAACniB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,EACTU,gBAAiBC,IAJzB,SAOI,eAACR,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GACtB9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GACrB7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAHzB,SAMStpB,EAIG,cAAC,IAAD,CACIgI,cAAc,SACdkB,OAAO,OACPzS,WAAY,GAHhB,SAMS6J,GAAQ8oB,IAAeG,GAoBpB,cAAC,IAAD,CACIzxB,UAAWyQ,YAAIxS,GAAaQ,4CAC5BizB,GnB0EtB,ImBzE0BlpB,EAAKvN,KAAL,UAEO2gB,EAAgB8P,GAAazkB,QAAQ,iBAAkB2U,GAAiB8P,GAF/E,anBwEzB,ImBnEiCljB,EAAKvN,KAAL,UAEO2gB,EAAgB8P,GAAwBzkB,QAAQ,iBAAkB2U,GAAiB8P,GAF1F,uBAIO9P,EAAgB8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAiB8P,GAJ5F,aARhB,SAeI,eAACxxB,EAAA,EAAD,CACIJ,QAAQ,QACRkG,UAAWyQ,YAAIC,GAAOihB,iBAF1B,UAII,cAAC,KAAD,CACIx3B,MAAO,CACHqW,aAAc,EACdW,YAAa,KAPzB,oBAjCJ,cAAC,IAAD,CACIugB,GAAI9V,EAAgB8P,GAAazkB,QAAQ,iBAAkB2U,GP+YpE,IO9YS5b,UAAWyQ,YAAIxS,GAAaQ,4CAFhC,SAII,eAACvE,EAAA,EAAD,CACIJ,QAAQ,QACRkG,UAAWyQ,YAAIC,GAAOihB,iBAF1B,UAII,cAAC,KAAD,CACIx3B,MAAO,CACHqW,aAAc,EACdW,YAAa,KAPzB,cAdhB,OA4DZ,cAAC5B,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GACtB9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GACrB7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAHzB,SAKI,cAAC,IAAD,CACIr3B,MAAO,CACH+U,QAAS,GAEbtV,QAAM,EACNwX,OAAO,OACPwgB,MAAM,OACNxhB,cAAc,SACdF,cAAc,SARlB,SAWShI,EAqCG,cAAC,IAAD,CACIlI,UAAWyQ,YAAIxS,GAAaQ,4CAC5BizB,GACI9V,EAEI8P,GAAazkB,QAAQ,iBAAkB2U,GPoShD,IOzSH,SAUI,eAAC,IAAD,CACIxL,cAAc,SACdxW,QAAM,EACNoG,UAAWyQ,YAAIC,GAAOmhB,YAH1B,UAKI,qBACI7xB,UAAWyQ,YAAIC,GAAOrI,MACtBypB,IAAI,OACJ3f,IACKjK,EAIG+M,GlBkJ1B,EkBlJuE/M,GAF7C6pB,EAAQ,KAAsBC,UAK1C,cAAC93B,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,SAKS2N,EAIGA,EAAgB+f,YAFhB,qBApEpB,mBACIgK,KPmUR,4BOlUQjyB,UAAWyQ,YAAIxS,GAAaQ,4CAFhC,SAII,eAAC,IAAD,CACI2R,cAAc,SACdxW,QAAM,EACNoG,UAAWyQ,YAAIC,GAAOmhB,YAH1B,UAKI,qBACI7xB,UAAWyQ,YAAIC,GAAOrI,MACtBypB,IAAI,OACJ3f,IACKjK,EAIG+M,GlB2L1B,EkB3LuE/M,GAF7C6pB,EAAQ,KAAsBC,UAK1C,cAAC93B,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,SAKS2N,EAIGA,EAAgB+f,YAFhB,yBAqDpC,cAAC1Y,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GACtB9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GACtB7hB,GAAI,CAAC4hB,KAAM,GAAIC,MAAO,GAH1B,SAKI,cAAC,IAAD,CACIpgB,OAAQ,EACRjX,MAAO,CACHyV,gBAAiBC,iB,GApMjBjV,aA8MjBC,gBA/NS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBAEnDvoB,KAAM1N,EAAM2P,KAAKjC,KACjB8oB,WAAYx2B,EAAM2P,KAAK6mB,eAIJ,SAAAt2B,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,QAkNzG/gB,CAA6Cw2B,IAEtD3gB,GAASxS,IAAWC,OAAO,CAC7BkK,KAAM,CACFkI,MAAO,OACPa,OAAQ,GACRZ,aAAc,GAGlBqhB,WAAY,CACR,SAAU,CACNtzB,OAAQ,YAIhBozB,gBAAiB,CACbh3B,OAAQ,GACRuU,QAAS,EACT3U,MAAOsV,GACP,SAAU,CACNtR,OAAQ,UACRqR,gBAAiBC,OCnOhB4hB,GAAe,EA4BtBU,G,kDAEF,WAAYl5B,GAAQ,IAAD,8BACf,cAAMA,IAgGVy2B,kBAAoB,SAAAhc,GAEhB,IAAMhM,EAAOgM,EAAMyD,OAAOzP,KAEpBuK,EAAQyB,EAAMyD,OAAOlF,MAEd,eAATvK,EACA,EAAK0qB,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAET,CAAC3qB,GAAOuK,MAIhB,EAAKmgB,SAAS,CACV,CAAC1qB,GAAOuK,KAhHD,EAwHnBqgB,aAAe,SAAA5e,GACXA,EAAM6e,iBAEN,IAAMvM,EAAQ,EAAKlrB,MAAMkrB,MAAM9f,OAAO/B,cAChCN,EAAW,EAAK/I,MAAM+I,SAE5B,EAAKuuB,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAETG,gBAAgB,MAIpBxM,EAAMjiB,OAAS,GAAKF,EAASE,OAAS,GACtC,EAAKquB,SAAS,CACVd,YAAY,EACZ5rB,MAAO,CACHsgB,OAAO,EACPniB,UAAU,KAIlB,EAAK5K,MAAMw5B,OAAOzM,EAAOniB,IAGJ,IAAjBmiB,EAAMjiB,QAAoC,IAApBF,EAASE,OAC/B,EAAKquB,SAAS,CACVd,YAAY,EACZ5rB,MAAO,CACHsgB,OAAO,EACPniB,UAAU,KAIG,IAAjBmiB,EAAMjiB,QAAgBF,EAASE,OAAS,EACxC,EAAKquB,SAAS,CACVd,YAAY,EACZ5rB,MAAO,CACHsgB,OAAO,EACPniB,UAAU,KAGS,IAApBA,EAASE,QAAgBiiB,EAAMjiB,OAAS,GAC/C,EAAKquB,SAAS,CACVd,YAAY,EACZ5rB,MAAO,CACHsgB,OAAO,EACPniB,UAAU,MAvKf,EAkLnB6uB,wBAA0B,WACtB,EAAKN,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAETM,yBAAyB,EAEzBH,gBAAgB,OAxLT,EAgMnBI,+BAAiC,WAC7B,EAAKR,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAETM,yBAAyB,EACzBE,WAAY,GACZC,eAAe,EACfC,YAAY,OAvML,EA+MnBC,qBAAuB,WACnB,IAAMhN,EAAQ,EAAKlrB,MAAMu3B,cAAcQ,WACvC,EAAKT,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAGTS,eAAe,MAGvB96B,EACKyS,OACAwoB,uBAAuBjN,GACvB5gB,MAAK,WACF,EAAKgtB,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAETG,gBAAgB,MAGxB,EAAKI,oCAERllB,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACVC,cAAc,2BACP,EAAKv3B,MAAMu3B,eADL,IAETS,eAAe,EACfC,YAAY,UAzOb,EAkPnBG,wBAA0B,WACtB,EAAKd,SAAS,CACVe,cAAe,EAAKr4B,MAAMq4B,gBApPf,EA2PnBC,iBAAmB,WACf,MAII,EAAKn6B,MAHLiP,EADJ,EACIA,gBACAmrB,EAFJ,EAEIA,eACA/B,EAHJ,EAGIA,WAGJ,GAAI,EAAKx2B,MAAMu3B,cAAcG,eACzB,OACI,cAAC,IAAD,CACIjiB,MAAM,OACNvQ,UAAWyQ,YAAIC,GAAO4iB,kBACtB9iB,aAAc,GAHlB,SAKI,cAACtW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,6FASR,GAAIslB,EACA,OACI,cAAC,IAAD,CACIjjB,cAAc,SACdI,aAAc,GAFlB,SAII,cAAC,KAAD,CACIjW,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAQpB,IAAI0jB,EAAW,GACf,OAAQjC,GACJ,KAzUa,EA2Ub,KAAKG,GACD,OAAO,KACX,KA5UuB,EA6UnB8B,EAAW,uEACX,MACJ,KA9UkC,EA+U9BA,EAAW,sCACX,MACJ,KAhVkB,EAiVdA,EAAW,4BACX,MACJ,KAlVwB,EAmVpBA,EAAW,2DACX,MACJ,QACI,OAAO,KAGf,OACI,cAAC,IAAD,CACIvzB,UAAWyQ,YAAIC,GAAO8iB,YACtBhjB,aAAc,GAFlB,SAII,cAACtW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKwlB,OAhUrB,EAAKE,aAAez7B,EAASyS,OAC7B,EAAKsB,WAAa/T,EAASgU,WAE3B,EAAKlR,MAAQ,CACTkrB,MAAO,GACPniB,SAAU,GACVsvB,cAAc,EAEdztB,MAAO,CACHsgB,OAAO,EACPniB,UAAU,GAGdwuB,cAAe,CACXM,yBAAyB,EACzBE,WAAY,GAEZC,eAAe,EACfC,YAAY,EACZP,gBAAgB,IAtBT,E,qDA2BnB,WACI,MAQIx5B,KAAKC,MAPL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBACAwC,EAHJ,EAGIA,gBAEApD,EALJ,EAKIA,2BACAG,EANJ,EAMIA,sCACAK,EAPJ,EAOIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GRsXpD,UQtXuG1nB,EAAM2vB,MAE9I7C,IAEIC,GAAyBG,GACzBwC,M,gCAIR,SAAmBE,EAAWC,EAAWhnB,GACrC,MAWI7T,KAAKC,MAVL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBACAtV,EAHJ,EAGIA,cAEAyX,EALJ,EAKIA,eACA7qB,EANJ,EAMIA,KAEA8oB,EARJ,EAQIA,WAOJ,IAFAR,EAbA,EAUIA,oBAKAC,GAAyBG,IACpBmC,GAAkB/B,IAAeG,GAClC,OAAQjpB,EAAKvN,MACT,KpBmCM,EoB9BF,YAJAjC,KAAKC,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SAAUnY,EAAgB8P,GAAazkB,QAAQ,iBAAkB2U,GAAiB8P,GAClFsI,OAAQ,cAGhB,KpB2BS,EoBtBL,YAJAh7B,KAAKC,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SAAUnY,EAAgB8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAiB8P,GAC/FsI,OAAQ,cAGhB,KpBsBO,EoBjBH,YAJAh7B,KAAKC,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SAAUnY,EAAgB8P,GAAwBzkB,QAAQ,iBAAkB2U,GAAiB8P,GAC7FsI,OAAQ,cAGhB,QACI,U,oBAoPpB,WACI,MAIIh7B,KAAKC,MAHLiP,EADJ,EACIA,gBACA6oB,EAFJ,EAEIA,sBACAG,EAHJ,EAGIA,oBAGJ,OAAKH,EAaAG,EAKD,eAAC/hB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,EACT9E,SAAU,QACVsH,IAAK,EACLN,OAAQ,OACR6iB,SAAU,OACVrkB,gBAAiBC,IARzB,UAWI,eAACR,EAAA,EAAD,CACIC,WAAS,EADb,UAII,cAAC,GAAD,IAEA,cAACC,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,GACvBxkB,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH+U,QAAS,IALjB,SAQI,cAAC,IAAD,CACItV,QAAM,EACNQ,UAAW,GACXoW,aAAc,GACdJ,cAAc,SACdF,cAAc,SALlB,SAQI,cAACikB,GAAA,EAAD,CACIC,UAAW,EACXC,QAAM,EACNr0B,UAAWyQ,YAAIxS,GAAae,yBAC5B7E,MAAO,CAAC+U,QAAS,IAJrB,SAMI,sBACIolB,SAAUt7B,KAAKs5B,aADnB,SAGI,eAAC,IAAD,CACI14B,QAAM,EADV,UAGI,eAAC,IAAD,CACIA,QAAM,EACNwW,cAAc,SACdI,aAAc,GAHlB,UAKI,cAACtW,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SACNwmB,WAAS,EACTh6B,MAAM,UAJV,qCAQA,cAACL,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,qFAQH/U,KAAKo6B,mBAEN,cAACoB,GAAA,EAAD,UACI,cAACpe,GAAA,EAAD,CACInc,MAAM,gBACNyN,KAAK,QACL/M,OAAO,SACPb,QAAQ,WACR4L,MAAO1M,KAAK8B,MAAM4K,MAAMsgB,MACxBpV,SAAU5X,KAAK02B,sBAIvB,cAAC8E,GAAA,EAAD,UACI,cAACpe,GAAA,EAAD,CACInc,MAAM,WACNyN,KAAK,WACLzM,KAAMjC,KAAK8B,MAAMq4B,aAAe,OAAS,WACzCx4B,OAAO,SACPb,QAAQ,WACR4L,MAAO1M,KAAK8B,MAAM4K,MAAM7B,SACxB+M,SAAU5X,KAAK02B,kBACf+E,WAAY,CACRC,aACI,cAACC,GAAA,EAAD,CACIvqB,SAAS,MADb,SAGI,cAACiG,EAAA,EAAD,CACIukB,KAAK,MACLC,aAAW,6BACXn6B,QAAS1B,KAAKk6B,wBAHlB,SAMSl6B,KAAK8B,MAAMq4B,aAIR,cAAC,KAAD,IAFA,cAAC,KAAD,aAWhC,cAAC,IAAD,CACI/4B,UAAW,GACXoW,aAAc,GAFlB,SAII,eAACtW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,kDAKI,cAAC,IAAD,CACI2jB,GAAIhG,GACJvU,OAAO,SACPnX,UAAWyQ,YAAIxS,GAAaG,gBAC5BjE,MAAO,CACHI,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IARhB,SAaI,uDAlBR,UAuBI,cAAC,IAAD,CACI6hB,GAAIhG,GACJvU,OAAO,SACPnX,UAAWyQ,YAAIxS,GAAaG,gBAC5BjE,MAAO,CACHI,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IARhB,SAaI,2DAOZ,cAAC2kB,GAAA,EAAD,UACI,cAACl6B,EAAA,EAAD,CACIW,KAAK,SACLnB,QAAQ,YACRS,MAAM,UACNC,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBALhC,uBAWJ,cAAC,IAAD,CACIiR,cAAc,SACdhW,UAAW,GACXM,QAAS1B,KAAK05B,wBAHlB,SAKI,cAACx4B,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAaG,gBAHhC,mDAe5B,cAAC,GAAD,CACI8J,gBAAiBA,EACjB1O,KAAMR,KAAK8B,MAAMu3B,cAAcM,wBAC/BrkB,QAAStV,KAAK45B,+BACdkC,cAAe97B,KAAK02B,kBACpBmD,WAAY75B,KAAK8B,MAAMu3B,cAAcQ,WACrCkC,iBAAkB/7B,KAAKg6B,qBACvBF,cAAe95B,KAAK8B,MAAMu3B,cAAcS,cACxCC,WAAY/5B,KAAK8B,MAAMu3B,cAAcU,gBA3MtC,cAAC,GAAD,IAZH,cAAC,IAAD,CACI34B,UAAW,GACXgW,cAAc,SAFlB,SAII,cAAC,KAAD,CACI7V,MAAOsV,W,GA5VVjV,aAujBfo6B,IAFSn6B,aA/kBS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD1oB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WAEvB5B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B/B,WAAYx2B,EAAM2P,KAAK6mB,eAIJ,SAAAt2B,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjCwB,gBAAiB,kBAAM14B,EAASk6B,OAChCzC,OAAQ,SAACzM,EAAOniB,GAAR,OAAqB7I,EAASk6B,GAAmBlP,EAAOniB,QAyjBzDhJ,CAA6Cs3B,I,4MAIxDgD,YAAc,WACV,EAAKl8B,MAAMqV,W,EAGfwmB,cAAgB,SAAAphB,GACZ,EAAKza,MAAM67B,cAAcphB,I,EAG7BqhB,iBAAmB,WACf,EAAK97B,MAAM87B,oB,EAGfK,YAAc,WACV,MAII,EAAKn8B,MAHLiP,EADJ,EACIA,gBACA4qB,EAFJ,EAEIA,cACAC,EAHJ,EAGIA,WAEJ,OAAID,EAEI,cAAC,IAAD,CACI1iB,cAAc,SACdI,aAAc,GAFlB,SAII,cAAC,KAAD,CACIjW,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAQhBkjB,EAEI,cAAC,IAAD,CACI54B,MAAO,CACHyV,gBAAiBC,IAErBK,cAAc,SACdM,aAAc,GALlB,SAOI,cAACtW,EAAA,EAAD,CACIJ,QAAQ,QACRkG,UAAWyQ,YAAIC,GAAO2kB,wBAF1B,qDASD,M,4CAKnB,WACI,MAUIr8B,KAAKC,MARL45B,GAFJ,EACI3qB,gBADJ,EAEI2qB,YAOG9jB,GATP,EAGIgkB,WAHJ,EAIID,cAJJ,EAMIxkB,QANJ,EAOIwmB,cAPJ,EAQIC,iBARJ,2HAWA,OACI,eAACz7B,EAAA,EAAD,yBACIG,WAAS,EACTuV,SAAS,KACTV,QAAStV,KAAKm8B,aACVpmB,GAJR,cAMI,cAACrV,EAAA,EAAD,UACI,cAAC,IAAD,CACI0W,cAAc,SACdhW,UAAW,GAFf,SAII,cAACF,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SACNwmB,WAAS,EAHb,qCASR,eAAC,IAAD,CACI36B,QAAM,EACNwW,cAAc,SAFlB,UAII,eAAC,IAAD,CACIxW,QAAM,EACNuX,YAAa,GACbxS,WAAY,GAHhB,UAKI,cAACzE,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SACNwmB,WAAS,EAHb,wGAQA,eAACr6B,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SACNwmB,WAAS,EAHb,2EAMyB,uGAG7B,eAAC,IAAD,CACI36B,QAAM,EACN2W,MAAM,OACNnW,UAAW,GACX4F,UAAWyQ,YAAIC,GAAO4kB,+BAJ1B,UAOKt8B,KAAKo8B,cAEN,cAACjmB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAMI,eAACG,EAAA,EAAD,WACI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAAC,IAAD,CACIyB,OAAO,OACPlB,cAAc,SAFlB,SAII,cAACkG,GAAA,EAAD,CACI1O,KAAK,aACLuK,MAAO4gB,EACP54B,MAAM,gBACNH,QAAQ,WACRL,WAAS,EACTmX,SAAU5X,KAAK87B,oBAI3B,cAACvlB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAAC,IAAD,CACIyB,OAAO,OACPlB,cAAc,SAFlB,SAII,cAAC5V,EAAA,EAAD,CACIb,WAAS,EACTc,MAAM,UACNT,QAAQ,YACRU,KAAK,SACLE,QAAS1B,KAAK+7B,iBACd/0B,UAAWyQ,YAAIxS,GAAakB,mBANhC,yC,GAtKNvE,cA2L5B8V,GAASxS,IAAWC,OAAO,CAC7Bo3B,UAAW,CACP56B,OAAQ,GAGZ66B,MAAO,CACH,SAAU,CACNj7B,MtBxyBY,UsByyBZgE,OAAQ,YAIhBi1B,WAAY,CACR5jB,gBAAiBC,GACjBtV,MAAOsV,GACPX,QAAS,IAGbokB,iBAAkB,CACd1jB,gBAAiBC,GACjBtV,MAAOsV,GACPX,QAAS,IAGbomB,8BAA+B,CAC3BtlB,YAAa,GACbC,aAAc,GACdH,WAAY,GACZC,cAAe,GACfH,gBAAiBC,IAGrBwlB,uBAAwB,CACpB96B,MAAOsV,GACPlR,WAAY,GACZvE,UAAW,GACXoW,aAAc,MCh1BTilB,GAAwB,wBAOxBC,GAAoB,oBACpBhC,GAAkB,WAC3B,MAAO,CACHz4B,KAAMy6B,KAIDC,GAAa,aACbC,GAAiB,iBACjBC,GAA0B,0BAC1BpD,GAAS,SAACzM,EAAOniB,GAC1B,OAAO,SAAC7I,EAAUwP,GAGdsrB,GAA2B96B,GAE3BA,EAAS,CACLC,KAAM06B,KAGV36B,EAAS,CACLC,KAAM26B,KAGV59B,EACKyS,OACAwkB,2BAA2BjJ,EAAOniB,GAClC6J,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM46B,GACNvE,WDXuB,ECYvB5rB,eAMPqwB,GAAiD,iDAQjDC,GAAsB,sBACtBC,GAAiC,iCACjCC,GAAgC,gCAkOhCJ,GAA6B,SAAC96B,GACvChD,EACKyS,OACA0rB,UACA/wB,MAAK,WACFpK,EAAS,CACLC,KAAMm7B,SAKTA,GAAU,UAQVC,GAAS,WAClB,OAAO,SAACr7B,EAAUwP,GAOd,OAAOxP,EAAS,CACZC,KAAMm7B,OAMdE,GAAe,KACfC,GAAyB,KAEhBC,GAAmC,mCAyCnCC,GAAiC,iCCjXjCC,GAAiB,iBACjBC,GAAgB,SAAAC,GACzB,OAAO,SAAC57B,EAAUwP,GAETosB,EAQDpsB,IAAW0I,gBAAgB2jB,UAAYrsB,IAAW0I,gBAAgB4jB,UAClE97B,EAAS,CACLC,KAAMy7B,GACNK,eAAgBvsB,IAAWwsB,iBAAiBD,cAC5CE,aAAa,IAIjBj8B,EAAS,CACLC,KAAMy7B,GACNK,eAAe,EACfE,aAAczsB,IAAWwsB,iBAAiBC,cAlB9Cj8B,EAAS,CACLC,KAAMy7B,GACNO,aAAa,MCAhBC,GAAiB,iBACjBC,GAA0B,0BAC1BC,GAAuB,uBAsCvBC,GAAyB,yBAOzBC,GAA0B,0BAC1BC,GAAuB,SAAC/9B,EAAMg+B,GACvC,MAAO,CACHv8B,KAAMq8B,GACN99B,OACAg+B,gBAIKC,GAA2B,2BAiM3BC,GAAuB,uBACvBC,GAA2B,SAAAjkB,GACpC,OAAO,SAAC1Y,EAAUwP,GACd,IAAMotB,EAAalkB,EAAMyD,OAAOzP,KAC1BmwB,EAAcnkB,EAAMyD,OAAOlF,MAQjC,OANAjX,EAAS,CACLC,KAAMy8B,GACNhwB,KAAMkwB,EACN3lB,MAAO4lB,IAGHD,GAEJ,IAAK,iBA4BD,OA3BA58B,EAAS,CACLC,KAAMi8B,UAGV/G,GACgB0H,GACXzyB,MAAK,SAAAsjB,GACF1tB,EAAS,CACLC,KAAMk8B,GACNzO,cAGPhb,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMk8B,GACNzO,OAAQ,GACRhjB,UAGJ1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,yCACT5P,MAAO,QACP6P,SAAU,cAO1B,IAAK,kBAED,IAAMsf,EAAgBlf,IAAWstB,aAAapO,cA8B9C,OA5BA1uB,EAAS,CACLC,KAAM88B,GACNrO,cAAeA,SAGnByG,GACiB0H,EAAanO,GACzBtkB,MAAK,SAAAukB,GACF3uB,EAAS,CACLC,KAAM+8B,GACNrO,eAGPjc,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM+8B,GACNrO,QAAS,GACTjkB,UAGJ1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,cAM1B,QACI,UAKH2tB,GAA6B,6BAC7BC,GAAsC,sCAoCtCC,GAAyB,yBAOzBC,GAA2B,2BAC3BC,GAAwB,SAAC3+B,EAAM4+B,GACxC,MAAO,CACHn9B,KAAMi9B,GACN1+B,OACA4+B,iBAIKC,GAA4B,4BA2M5BC,GAA8B,8BAC9BC,GAAuC,uCAiCvCC,GAA0B,0BAO1BC,GAAsB,sBACtBC,GAAoB,SAACl/B,EAAMm/B,GACpC,MAAO,CACH19B,KAAMw9B,GACNj/B,OACAm/B,sBAoEKC,GAA8B,8BA6H9BC,GAAmC,mCACnCC,GAAa,SAACC,EAAOC,GAC9B,MAAO,CACH/9B,KAAM49B,GACNG,UACAD,UAIKE,GAA4C,4CAC5CC,GAAoB,SAACH,EAAOrlB,GACrC,MAAO,CACHzY,KAAMg+B,GACNhnB,MAAOknB,SAASzlB,EAAMyD,OAAOlF,MAAO,IACpC8mB,UAIKK,GAAuB,uBACvBC,GAAuB,uBACvBC,GAA6B,6BAC7BC,GAAqB,SAACvL,EAAO5a,GAEtC,OAAuC,IAAnCA,EAAOomB,UAAUtzB,OAAOnC,OACjB,CACH9I,KAAMm+B,GACNK,MAAO,CAACp1B,IAAK,IACb2pB,SAGG,CACH/yB,KAAMm+B,GACNK,MAAOrmB,EAAOsmB,cACd1L,UAMR2L,GAAiB,KACjBC,GAAuB,KACvBC,GAA6B,KAEpBC,GAAiB,iBAoJjBC,GAAgC,WACzC,OAAO,SAAC/+B,EAAUwP,GACVmvB,KACAA,GAAeK,IAAI,eACnBL,GAAeK,IAAI,iBACnBL,GAAeK,IAAI,iBACnBL,GAAiB,QAKhBM,GAAkB,kBAwJlBC,GAAiC,WAC1C,OAAO,SAACl/B,EAAUwP,GACVovB,KACAA,GAAqBI,IAAI,eACzBJ,GAAqBI,IAAI,iBACzBJ,GAAqBI,IAAI,iBACzBJ,GAAuB,QAKtBO,GAAyB,yBAqFzBC,GAAuC,WAChD,OAAO,SAACp/B,EAAUwP,GACVqvB,KACAA,GAA2BG,IAAI,eAC/BH,GAA2BG,IAAI,iBAC/BH,GAA2BG,IAAI,iBAC/BH,GAA6B,S,SThwC7BrY,O,mCAAAA,I,mCAAAA,I,iCAAAA,I,sCAAAA,Q,KAeZ,IUbY6Y,GVaNC,GAAoC,CACtC5xB,OAAQ8Y,GAAqB+Y,eAC7B5e,YAAa,KACbI,mBAAoB,IAGXye,GAAuB,SAAC1/B,GACjC,OAAOA,EAAM4N,SAAW8Y,GAAqB+Y,gBAGpCE,GAAmB,SAAC3/B,GAC7B,OAAOA,EAAM4N,SAAW8Y,GAAqBkZ,gBAGpCC,GAA4B,SAAC7/B,GACtC,OAAOA,EAAM4N,SAAW8Y,GAAqBoZ,eAAiB9/B,EAAM6gB,kBAA+BmB,IAAhBhiB,EAAM4K,OAGhFm1B,GAAyB,SAAC//B,GACnC,YAAuBgiB,IAAhBhiB,EAAM4K,OAsDFo1B,GAnDe,WAAyD,IAAxDhgC,EAAuD,uDAA/Cw/B,GAAchW,EAAiC,uCAClF,OAAQA,EAAOrpB,MACX,KAAKo/B,GAAqBU,oBACtB,OAAO,2BACAT,IADP,IAEI5xB,OAAQ8Y,GAAqBkZ,iBAErC,KAAKL,GAAqBW,uBACtB,IAAMC,EAA8D3W,EACpE,OAAO,2BACAxpB,GADP,IAEI4N,OAAQuyB,EAA6BvyB,OACrCiT,YAAasf,EAA6Btf,YACpCjE,KAAKC,MAAMD,KAAKE,UAAUqjB,EAA6Btf,cAAgB7gB,EAAM6gB,YACnFuf,kBAAmBD,EAA6BC,kBAC1CxjB,KAAKC,MAAMD,KAAKE,UAAUqjB,EAA6BC,oBACvDpgC,EAAMogC,kBACZnf,mBAAoBrE,KAAKC,MAAMD,KAAKE,UAAUqjB,EAA6Blf,qBAC3ErW,MAAOu1B,EAA6Bv1B,QAE5C,KAAK20B,GAAqBc,QACtB,OAAO,2BACArgC,GADP,IAEI4N,OAAQ5N,EAAM4N,SAAW8Y,GAAqB+Y,gBAC3Cz/B,EAAM4N,SAAW8Y,GAAqBoZ,cACnCpZ,GAAqB4Z,gBACrBtgC,EAAM4N,OACZiT,YAAa7gB,EAAM4N,SAAW8Y,GAAqB+Y,gBAChDz/B,EAAM4N,SAAW8Y,GAAqBoZ,cACnC,KACA9/B,EAAM6gB,YACZI,mBAAoBjhB,EAAM4N,SAAW8Y,GAAqB+Y,gBACvDz/B,EAAM4N,SAAW8Y,GAAqBoZ,cACnC,GACA9/B,EAAMihB,mBACZrW,MAAO5K,EAAM4N,SAAW8Y,GAAqB+Y,gBAC1Cz/B,EAAM4N,SAAW8Y,GAAqBoZ,mBACnC9d,EACAhiB,EAAM4K,QAEpB,KAAK20B,GAAqBgB,kBACtB,IAAMC,EAAmDhX,EACzD,OAAO,2BACAxpB,GADP,IAEI6gB,YAAa2f,EAAwBC,cAE7C,QACI,OAAOzgC,IW9FE0gC,G,qJAOjB,WAA0CvX,GAA1C,mFACiB,IAAIxC,IACZuB,QACG,MACA5D,GAAU+B,uCACV,CACIqB,YAAa,KACbZ,gBAAiB,CACbqC,YARpB,mF,wECWiBwX,G,+HAOjB,WAAoBl2B,GAApB,mFACiB,IAAIkc,IACZuB,QACG,OACA5D,GAAUS,WACV,CACI+B,gBAAiB,KACjBY,YAAajd,IAP7B,mF,0HAiBA,WAA0B4iB,GAA1B,mFACiB,IAAI1G,IAAMuB,QAAQ,MAC3B5D,GAAUW,aAAa9Y,QAAQ,OAAQkhB,IAF/C,mF,iIAUA,WAAiC7L,GAAjC,mFACiB,IAAImF,IAAMuB,QAAQ,MAC3B5D,GAAUY,oBAAoB/Y,QAAQ,iBAAkBqV,IAFhE,mF,wHAUA,WAAwB/W,GAAxB,mFACiB,IAAIkc,IACZuB,QACG,MACA5D,GAAUa,WACV,CACI2B,gBAAiB,KACjBY,YAAajd,IAP7B,mF,oIAiBA,WAAoC4iB,GAApC,mFACiB,IAAI1G,IAAMuB,QAAQ,MAC3B5D,GAAUc,uBAAuBjZ,QAAQ,OAAQkhB,IAFzD,mF,wEFnEQkS,K,+DAAAA,E,qEAAAA,E,uCAAAA,E,4DAAAA,Q,KAsBL,IG9BKqB,GH8BCC,GAA6B,SAAC3V,EAAgBniB,GACvD,gDAAO,WAAO7I,EAAoBwP,GAA3B,4CAAA1F,EAAA,2DAIC0F,IAFAiR,EAFD,EAECA,oBACAC,EAHD,EAGCA,qBAGA+e,GAAiB/e,GANlB,wDAUGkgB,EAA6D,CAC/D3gC,KAAMo/B,GAAqBW,uBAC3BtyB,OAAQ8Y,GAAqBkZ,eAC7B/e,YAAa,KACbI,mBAAoB,IAdrB,kBAkB+D/jB,EAASyS,OAAOkR,YAlB/E,YAkBKkgB,EAlBL,6BAsBSlB,GAA0Bjf,GAtBnC,mDA0BK1gB,EAAS,CACLC,KAAMo/B,GAAqBU,sBA3BpC,gCAgCmBje,IAAVkJ,QAAoClJ,IAAbjZ,EAhChC,wBAiCS+3B,EAA6BlzB,OAAS8Y,GAAqB4Z,gBAC3DQ,EAA6Bl2B,MAAQ,CACjCqe,OAAQ,oCAnCrB,kBAqCgB/oB,EAAS4gC,IArCzB,eAwCK5gC,EAAS,CACLC,KAAMo/B,GAAqBU,sBAzCpC,UA6CW/iC,EAASyS,OAAOqxB,eAAeC,KAAStxB,KAAKuxB,KAAKC,YAAYC,OA7CzE,yBAiDelkC,EAASyS,OAAOwkB,2BAA2BjJ,EAAOniB,GAjDjE,QAgDWsrB,EAhDX,OAmDK0M,EAAsB1M,EAAW3mB,KAnDtC,YAsDKqzB,EAtDL,wBAuDW1T,EAA0B0T,EAAoB1T,IAvDzD,WA0DwC,IAAIsT,IAAiB1b,aAAaoI,GA1D1E,WA0DWgU,EA1DX,OA4DWxgB,EAA4BwgB,EAAqB52B,KACjDsW,EAA6BpE,GAAQkE,GAKvCygB,GAAiC,EAEjChkB,GAAO8C,wBAAP,UAA+BO,EAAoB4gB,iBAAnD,QAAgE,IAC1DxgB,GAAgBA,EAAaC,aAC/BsgB,GAAwB,EACxBR,EAA6Bl2B,MAAQ,CACjCqe,OAAQ,uCAGT3L,GAAO6C,cAAP,UAAqBQ,EAAoB4gB,iBAAzC,QAAsD,KACzDxgB,GAAgBA,EAAaC,aAC7BsgB,GAAwB,EACxBR,EAA6Bl2B,MAAQ,CACjCqe,OAAQ,4CAKfqY,EApFV,kCAqFephC,EAASm7B,MArFxB,eAsFSyF,EAA6BlzB,OAAS8Y,GAAqB4Z,gBAtFpE,kBAuFgBpgC,EAAS4gC,IAvFzB,WA0FKA,EAA6BjgB,YAAcA,GAEvCxD,GAAWwD,GA5FpB,mCA6FiD,IAAI6f,IAAsCc,6BAA6B3gB,EAAYhT,IA7FpI,QA6Fe4zB,EA7Ff,OA8FSX,EAA6BV,kBAAoBqB,EAA0Bh3B,KA9FpF,0BAkGkD,IAAIk2B,IAAiBvb,uBAAuBiI,GAlG9F,eAkGWqU,EAlGX,OAoGKZ,EAA6B7f,mBAAqBygB,EAA+Bj3B,KAEjFq2B,EAA6BlzB,OAAS8Y,GAAqBoZ,cAtGhE,kBAuGY5/B,EAAS4gC,IAvGrB,yBAyGW5gC,EAASm7B,MAzGpB,eA0GKyF,EAA6BlzB,OAAS8Y,GAAqB4Z,gBAC3DQ,EAA6Bl2B,MAAQ,CACjCqe,OAAQ,uBA5GjB,kBA8GY/oB,EAAS4gC,IA9GrB,2EAiHO5gC,EAASm7B,MAjHhB,eAkHCyF,EAA6BlzB,OAAS8Y,GAAqB4Z,gBAC3DQ,EAA6Bl2B,MAAQ,CACjCqe,OAAQ,KAAML,YApHnB,kBAsHQ1oB,EAAS4gC,IAtHjB,0DAAP,yDA2HSzF,GAA8B,WACvC,gDAAO,WAAOn7B,EAAoBwP,GAA3B,UAAA1F,EAAA,+EAEO9M,EAASyS,OAAO0rB,UAFvB,sDAIChT,QAAQC,IAAR,6BAAkC,KAAMM,aAJzC,gCAMI1oB,EAAS,CACZC,KAAMo/B,GAAqBc,WAP5B,wDAAP,yD,UInISsB,GAAW,OACXC,GAAc,UAEdC,GAAgB,YAEhBC,GAAe,WACfC,GAAsB,kBAGtBC,GAAgB,YAChBC,GAAqB,iBACrBC,GAAqB,iBACrBC,GAAoB,gBACpBC,GAAuB,YA0B9BC,G,4MAEFC,c,wBAAgB,uCAAAt4B,EAAA,+DAQR,EAAK7L,MANLokC,EAFQ,EAERA,eACAhH,EAHQ,EAGRA,OAEA5a,EALQ,EAKRA,oBACAC,EANQ,EAMRA,oBACA4hB,EAPQ,EAORA,WAPQ,SAUNA,IAVM,OAWZD,EAAevJ,QAAQhuB,KAAKsS,GAAOmD,mBAAmB8hB,EAAer5B,MAAM6Y,OAAQpB,EAAqBC,IAExG2a,IAbY,2C,EAgBhBkH,iBAAmB,WACf,EAAKtkC,MAAM09B,eAAc,GACzB,EAAK19B,MAAMukC,sB,4CAGf,WACI,MASIxkC,KAAKC,MARL2iB,EADJ,EACIA,cACAmV,EAFJ,EAEIA,sBACA7oB,EAHJ,EAGIA,gBAEAM,EALJ,EAKIA,KACA60B,EANJ,EAMIA,eAEA1G,EARJ,EAQIA,cAGJ,OAAK5F,EAKD,eAAC,IAAD,CACIn3B,QAAM,EACN2W,MAAO,IACPa,OAAO,OAHX,UAMI,cAAC,IAAD,CACIxX,QAAM,EACNwX,OAAQ,GACRlB,cAAc,SACdE,cAAc,SACdjW,MAAO,CACH+U,QAAS,GANjB,SASI,cAAC,IAAD,CACIwiB,GACI9V,EAEI8P,GAAazkB,QAAQ,iBAAkB2U,GhBiWhC,IgBrWnB,SASI,cAAC1J,GAAA,EAAD,CACI/X,MAAO,CACHoW,MAAO,OACPa,OAAQ,GACRzW,OAAQ,EACRuU,QAAS,GACTuD,UAAW,cAEfN,IACKjK,EAIG+M,G3B+MN,E2B/MmD/M,GAF7C6pB,EAAQ,KAAsBC,cAQlD,cAAC1hB,EAAA,EAAD,IAGA,cAAC,IAAD,CACI1W,QAAM,EACNQ,UAAW,GAFf,SAKI,eAACqjC,GAAA,EAAD,WACI,cAAC,IAAD,CACI/L,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAUyI,KAEpBz8B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKm9B,UAORj0B,G5BXF,I4BuCKA,EAAKvN,KAED,cAAC,IAAD,CACIy2B,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAU2I,KAEpB38B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKq9B,UA7CjB,K5BZN,I4BmEEn0B,EAAKvN,KAED,KAEA,cAAC,IAAD,CACIy2B,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAUgJ,KAEpBh9B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGK09B,UAOrB,cAAC,IAAD,CACItL,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAU+I,KAEpB/8B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKy9B,UAMb,cAAC,IAAD,CACIrL,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAU8I,KAEpB98B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAACE,GAAA,EAAD,MAEJ,cAACD,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKw9B,eAQrB,cAAC,IAAD,CACIljC,QAAM,EACNwX,OAAO,OACPlB,cAAc,SAHlB,SAKI,eAACutB,GAAA,EAAD,WAGSj1B,E5BvJH,I4B2JMA,EAAKvN,KAED,cAAC,IAAD,CACIy2B,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAU0I,KAEpB18B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKo9B,UAKb,cAAC,IAAD,CACIhL,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAU4I,KAEpB58B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKs9B,UA3CjB,K5BzJN,I4B4MEp0B,EAAKvN,KAED,KAEA,cAAC,IAAD,CACIy2B,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,O5BnNpB,I4BmN+BxrB,EAAKvN,MAAiCuN,EAAKsT,WAAqCmhB,GAAvBC,KAE9El9B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAIQ49B,UASnB10B,EAIG,cAAC,IAAD,CACIkpB,GAAI,CACAqC,SAAUsJ,EAAer5B,MAAM+vB,SAC/BC,OAAO,QAAD,OAAU6I,KAEpB78B,UAAWyQ,YAAIxS,GAAaO,uDALhC,SAOI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SAGKu9B,UAnBb,K5B7ON,I4B6REr0B,EAAKvN,KAED,KAEA,cAAC,IAAD,CACIy2B,GACI9V,EAEI8P,GAAkBzkB,QAAQ,iBAAkB2U,GAE5C8P,GAER1rB,UAAWyQ,YAAIxS,GAAaO,uDARhC,SAUI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SA5bV,oB5B0IJ,I4B8TEkJ,EAAKvN,MACFuN,EAAKsT,WAEJ,KAEA,cAAC,IAAD,CACI4V,GACI9V,EAEI8P,GAAYzkB,QAAQ,iBAAkB2U,GAEtC8P,GAER1rB,UAAWyQ,YAAIxS,GAAaO,uDARhC,SAUI,eAACk/B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS,kBAAMi8B,GAAc,IAFjC,UAII,cAACiH,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CACI79B,UAAWyQ,YAAIxS,GAAaqB,YADhC,SA7dX,cAueL,eAACo+B,GAAA,EAAD,CACIC,QAAM,EACNjjC,QAAS1B,KAAKokC,cAFlB,UAII,cAACQ,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,gCA3aT,S,GApCUjjC,aA0ddC,gBAlfS,SAAAC,GACpB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAE3BE,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBAEnDvoB,KAAM1N,EAAM2P,KAAKjC,SAIE,SAAAxN,GACvB,MAAO,CACHsiC,WAAW,WAAD,8BAAE,uBAAAx4B,EAAA,+EAAY9J,EAASm7B,OAArB,2CAAF,kDAAC,GAEXE,OAAQ,kBAAMr7B,EAASk6B,OACvByB,cAAe,SAACC,GAAD,OAAwB57B,EAAS+iC,GAAsCnH,KAEtF4G,mBAAoB,kBAAMxiC,ELhBvB,CACHC,KAAMo8B,SK6eCx8B,CAA6CsiC,I,gKCvhBvCa,G,4MA0BjBC,mBAAqB,WAGjB,OAFsB,EAAKhlC,MAAnBilC,UAEU,GAAG/5B,eACjB,IAAK,IACD,OAAO0L,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,IAAK,IACD,OAAOA,GACX,QACI,S,4CAlFZ,WACI,MAMI7W,KAAKC,MALLilC,EADJ,EACIA,UACAC,EAFJ,EAEIA,SACA5tB,EAHJ,EAGIA,MACAa,EAJJ,EAIIA,OACAgtB,EALJ,EAKIA,YAGJ,OACI,cAACC,GAAA,EAAD,CACIlkC,MAAO,CACHI,MAAOsV,GACPD,gBAAiB5W,KAAKilC,qBACtB1tB,MAAOA,EACPa,OAAQA,GALhB,SAQI,cAAClX,EAAA,EAAD,CAAYJ,QAASskC,EAArB,mBACQF,EAAU,GAAGI,eADrB,OACqCH,EAAS,GAAGG,uB,GApBvB1jC,a,sGCR7B2jC,GAAuC,uCASvCC,GAAyC,yCCyBhDC,G,4JACF,WACI,MAUIzlC,KAAKC,MATLkC,EADJ,EACIA,aAEAujC,EAHJ,EAGIA,WACAC,EAJJ,EAIIA,WACAC,EALJ,EAKIA,UAEAC,EAPJ,EAOIA,UAEA9vB,EATJ,EASIA,MAGJ,OACI,eAACzV,EAAA,EAAD,yBACIC,IAAK4B,EACL3B,KAAMklC,EACNjlC,WAAS,EACTuV,SAAS,KACTV,QAASuwB,GACL9vB,GANR,cAQI,cAACrV,EAAA,EAAD,UACI,eAAC,IAAD,CACIwW,cAAc,SADlB,UAGI,cAAC,IAAD,CACIC,KAAM,EADV,SAGI,cAACjW,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UACNwT,MAAM,OAHV,4BAQJ,cAAC,IAAD,CACIoC,KAAM,EACNC,cAAc,QAFlB,SAII,cAACC,EAAA,EAAD,CACI3V,QAASmkC,EADb,SAGI,cAAC,KAAD,aAKhB,cAACllC,EAAA,EAAD,CACIQ,MAAO,CACHqW,aAAc,IAFtB,SAKI,cAAC,IAAD,UACI,cAACrB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAOQwI,KAAKE,UAAU+mB,KAAgBjnB,KAAKE,UAAUgnB,GAG1C,cAACvvB,EAAA,EAAD,UACI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GACvBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAJ1B,SAMI,eAAC,IAAD,CACIt6B,QAAM,EACN2W,MAAM,OAFV,UAII,cAACrW,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OACNwmB,WAAS,EAHb,SAKI,sEAGJ,cAAC,KAAD,CACIpiB,IAAKwsB,EACLG,MAAM,UACNC,2BAA4B,GAG5BC,gBACI,SAACC,GACGC,UAAUC,UAAUC,UAAU1nB,KAAKE,UAAUqnB,EAAK9sB,IAAK,KAAM,iBASrF,eAAC9C,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EACN2W,MAAM,OAFV,UAII,cAACrW,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OACNwmB,WAAS,EAHb,SAKI,yCAGJ,cAAC,KAAD,CACIpiB,IAAKwsB,EACLG,MAAM,UACNC,2BAA4B,GAG5BC,gBACI,SAACC,GACGC,UAAUC,UAAUC,UAAU1nB,KAAKE,UAAUqnB,EAAK9sB,IAAK,KAAM,eAQjF,cAAC5C,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EACN2W,MAAM,OAFV,UAII,cAACrW,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OACNwmB,WAAS,EAHb,SAKI,wCAGJ,cAAC,KAAD,CACIpiB,IAAKysB,EACLE,MAAM,UACNC,2BAA4B,GAC5BC,gBACI,SAACC,GACGC,UAAUC,UAAUC,UAAU1nB,KAAKE,UAAUqnB,EAAK9sB,IAAK,KAAM,gC,GAlKlFvX,aAkLxBC,gBAhMS,SAAAC,GACpB,MAAO,CACH4jC,WAAY5jC,EAAMukC,+BAA+BX,WACjDC,WAAY7jC,EAAMukC,+BAA+BV,WACjDC,UAAW9jC,EAAMukC,+BAA+BT,cAI7B,SAAA5jC,GACvB,MAAO,CACH6jC,UAAW,kBAAM7jC,EDnBd,CACHC,KAAMujC,SCwMC3jC,CAA6C4jC,IChN/Ca,GAAkC,kCAClCC,GAAe,SAAAC,GACxB,OAAO,SAACxkC,EAAUwP,GACd,IAAMi1B,EAAgBj1B,IAAWk1B,sBAAsBC,UAIvD,GAAKH,GAAYC,EAAjB,CASA,GAAIA,EAAct3B,eAAe,OAE7B,GAAIq3B,EAAQr3B,eAAe,OACnBs3B,EAAc92B,KAAO62B,EAAQ72B,GAC7B,YAaR,GAAI62B,EAAQr3B,eAAe,YAKvB,GAAIs3B,EAAc1Z,OAASyZ,EAAQzZ,KAC/B,OAKZ/qB,EAAS,CACLC,KAAMqkC,GACN92B,KAAMg3B,SAtCNxkC,EAAS,CACLC,KAAMqkC,GACN92B,KAAMg3B,MAyCTI,GAAsC,sCACtCC,GAA+C,+CAqG/CC,GAAgC,gCAQhCC,GAAyC,yCASlDC,GAAqB,KAEZC,GAA8B,8BA+D9BC,GAAoC,WAC7C,OAAO,SAACllC,EAAUwP,GACVw1B,KACAA,GAAmBhG,IAAI,eACvBgG,GAAqB,QCtL3BG,G,4MA6BFC,SAAW,WACP,MAQI,EAAKnnC,MAPLi4B,EADJ,EACIA,oBAEAyO,EAHJ,EAGIA,UACAU,EAJJ,EAIIA,kBACAC,EALJ,EAKIA,iBAEAC,EAPJ,EAOIA,eAGArP,KACIyO,GAAcU,GAAsBC,GACpCC,M,EAQZC,YAAc,WACV,MAOI,EAAKvnC,MANLi4B,EADJ,EACIA,oBAEAnM,EAHJ,EAGIA,WACAub,EAJJ,EAIIA,iBAEAG,EANJ,EAMIA,mCAGAvP,GACInM,GAAcub,GACdG,K,EAqHZC,gBAAkB,WACd,MAYI,EAAKznC,MAXL2iB,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBAEAyT,EAJJ,EAIIA,YAEAoJ,EANJ,EAMIA,WACAub,EAPJ,EAOIA,iBACAK,EARJ,EAQIA,KACAC,EATJ,EASIA,YAEAC,EAXJ,EAWIA,0BAGJ,OAA0B,IAAtB9b,EAAWhhB,OAEP,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC,IAAD,CACImQ,cAAc,SACdF,cAAc,SACd/V,MAAO,CACHQ,OAAQ,IAJhB,SAQQ2lC,EAEI,cAACpmC,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,4BAOA,cAAC,aAAD,CACIxT,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAapCkV,EAAW5e,MAAMw6B,EAAOC,EAAaD,EAAOC,EAAcA,GAAa/tB,KAAI,SAAAyS,GAAQ,OAC3E,eAACwb,GAAA,EAAD,WAGI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAIQqlB,EAASnd,eAAe,UAEpB,eAAC,IAAD,CACIvO,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,eAAC,IAAD,CACI2jB,GACI9V,EAAa,UAEN8P,GAAkBzkB,QAAQ,iBAAkB2U,IAFtC,OAEuD0J,EAAShB,QAEzEgB,EAAShB,OAEjBtkB,UAAWyQ,YAAIxS,GAAaG,gBAC5BjE,MAAO,CACHI,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IAbhB,UAkBI,cAAC,KAAD,CACI9Q,SAAS,QACT5E,MAAO,CACHgX,YAAa,KAGpBmU,EAASjB,qBAIbiB,EAASnd,eAAe,eAIrB,cAACjO,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACHC,UAAW,GAJnB,SAOI,2CAAa,4BAAIkrB,EAASE,YAAYQ,QAAtC,UATJ,KjCvKtB,IiCoLkBrK,EAAY1gB,KAER,KAEC0gB,EAAYG,YAIRwJ,EAASnd,eAAe,SAIrB,cAAC,IAAD,CACI/N,UAAW,GADf,SAGI,cAACE,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNC,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QACI,kBAAMmmC,EACFvb,EAASrT,MAAM9J,eAAe,UAE1Bmd,EAASrT,MAAM0Z,OAEfrG,EAASrT,MAEbqT,EAASrT,MAAM9J,eAAe,SAE1Bmd,EAASrT,MAAM2Z,MAEftG,EAASrT,QAjBzB,4BATR,QAoChB,cAAC/X,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKuX,EAASjB,oBAI1B,cAACtkB,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKkH,GAA+BqQ,EAASf,YAnH5Ce,EAAS3c,Q,uDA1OlC,WACI3P,KAAKonC,WACLpnC,KAAKwnC,gB,gCAGT,SAAmB5M,EAAWC,EAAWhnB,GACrC,MAMI7T,KAAKC,MALLi4B,EADJ,EACIA,oBAEAyO,EAHJ,EAGIA,UAEAO,EALJ,EAKIA,kCAICP,GAAczO,GAKnBl4B,KAAKonC,WACLpnC,KAAKwnC,eALDN,M,oBAiDR,WACI,MAaIlnC,KAAKC,MAZLiP,EADJ,EACIA,gBACA6oB,EAFJ,EAEIA,sBAEApV,EAJJ,EAIIA,YACAgkB,EALJ,EAKIA,UAEA5a,EAPJ,EAOIA,WACA4b,EARJ,EAQIA,KACAC,EATJ,EASIA,YAEA9H,EAXJ,EAWIA,WACAI,EAZJ,EAYIA,kBAGJ,OAAKnI,GAA0B4O,GAAchkB,GAI7CoJ,EAAWrS,MAAK,SAACquB,EAAWC,GACxB,OAAOA,EAAUzc,KAAOwc,EAAUxc,QAIlC,gCACI,cAAC4P,GAAA,EAAD,CACIC,UAAW,EACXj6B,MAAO,CACH8mC,UAAW,QAHnB,SAMI,eAACC,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,UACI,eAACL,GAAA,EAAD,WACI,cAACvhC,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN/N,UAAWyQ,YAAIxS,GAAaoB,YAHhC,qBASR,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN/N,UAAWyQ,YAAIxS,GAAaoB,YAHhC,yBAWhB,cAAC+hC,GAAA,EAAD,UAEQpoC,KAAK0nC,oBAGb,cAACW,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CACInnC,MAAO,CACHyV,gBAAiBC,IAErB0xB,mBAAoB,CAAC,GAAI,GAAI,IAC7BC,MAAOzc,EAAWhhB,OAClB68B,YAAaA,EACbD,KAAMA,EACNc,oBAAqB,CACjB,aAAc,iBAElBC,oBAAqB,CACjB,aAAc,aAElBC,YAAa,CACTC,QAAQ,GAEZC,aAAc/I,EACdgJ,oBAAqB5I,aAOzC,cAAC,GAAD,QA1FG,S,GApFWt+B,aAyWfC,gBAvYS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3CmV,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDvV,YAAa7gB,EAAM2P,KAAKjC,KAExBm3B,UAAW7kC,EAAM4kC,sBAAsBC,UACvC5a,WAAYjqB,EAAM4kC,sBAAsB3a,WACxCub,iBAAkBxlC,EAAM4kC,sBAAsBY,iBAC9CD,kBAAmBvlC,EAAM4kC,sBAAsBW,kBAC/CM,KAAM7lC,EAAM4kC,sBAAsBiB,KAClCC,YAAa9lC,EAAM4kC,sBAAsBkB,gBAItB,SAAA5lC,GACvB,MAAO,CACHulC,eAAgB,kBAAMvlC,GDOnB,SAACA,EAAUwP,GACd,IAAMm1B,EAAYn1B,IAAWk1B,sBAAsBC,UAC7ChkB,EAAcnR,IAAWC,KAAKjC,KAE/Bm3B,GAAchkB,IhCiHD,IgCxGdA,EAAY1gB,MAER0kC,EAAUx3B,eAAe,OAASwT,EAAYhT,KAAOg3B,EAAUh3B,KAWvE3N,EAAS,CACLC,KAAM2kC,KAIND,EAAUx3B,eAAe,MACzBgoB,GACuB,CACflM,OAAQ0b,EAAUh3B,GAClBgc,QAASwL,KAEZ/qB,MAAK,SAAA2f,GACF/pB,EAAS,CACLC,KAAM4kC,GACN9a,WAAW,aAAKA,QAGvBrX,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM4kC,GACN9a,WAAY,QAMxBoL,GACmCwP,EAAU5Z,MACxC3gB,MAAK,SAAAqhB,GAEF,IAAIsb,EAAgB,GAEpB/8B,QAAQqgB,IACJoB,EAAY5T,KAAI,SAAAmvB,GACZ,OAAO,IAAIh9B,SAAQ,SAACC,EAASC,GACzBirB,GACuB,CACflM,OAAQ+d,EAAWr5B,GACnB+b,uBAAuB,EACvBC,QAASwL,KAEZ/qB,MAAK,SAAA2f,GAEF,OADAgd,EAAa,uBAAOA,GAAP,aAAyBhd,IAC/B9f,EAAQ88B,MAElBr0B,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WACHpK,EAAS,CACLC,KAAM4kC,GACN9a,WAAW,aAAKgd,QAErBr0B,OAAM,SAAAhI,GACL1K,EAAS,CACLC,KAAM4kC,GACN9a,WAAY,WAKvBrX,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM4kC,GACN9a,WAAY,SAvFxB/pB,EAAS,CACLC,KAAM4kC,GACN9a,WAAY,SCbpB+T,WAAY,SAACplB,EAAOslB,GAAR,OAAoBh+B,ED0Gd,SAAC0Y,EAAOslB,GAC9B,MAAO,CACH/9B,KAAM6kC,GACN9G,WC7GyCiJ,CAAkCvuB,EAAOslB,KAClFE,kBAAmB,SAACxlB,GAAD,OAAW1Y,EDiHL,SAAA0Y,GAC7B,MAAO,CACHzY,KAAM8kC,GACN9tB,MAAOknB,SAASzlB,EAAMyD,OAAOlF,MAAO,KCpHGgwB,CAAyCvuB,KAChF+sB,mCAAoC,kBAAMzlC,GD4HvC,SAACA,EAAUwP,GACd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9Bm3B,EAAYn1B,IAAWk1B,sBAAsBC,UhCLjC,IgCOdhkB,EAAY1gB,MAAgC0gB,EAAYhT,KAAOg3B,EAAUh3B,IAIzEq3B,KAMAA,GADAL,EAAUx3B,eAAe,MACJnQ,EAChBgU,WACAzS,IAAIqO,IACJid,aAAa,UACbC,QAAQ6a,EAAUh3B,IAIF3Q,EAChBgU,WACAzS,IAAIqO,KAIRgF,GAAG,eAAe,SAAAC,GACf,IAAMyY,EAAWzY,EAASsY,MACtBJ,EAAU,aAAOva,IAAWk1B,sBAAsB3a,aAG/B,IADDA,EAAW9gB,WAAU,SAAAi+B,GAAgB,OAAIA,EAAiBv5B,KAAO2c,EAAS3c,QAGxFg3B,EAAUx3B,eAAe,MACzBnN,EAAS,CACLC,KAAMglC,GACNlb,WAAW,GAAD,oBAAMA,GAAN,CAAkBO,MAKhC6K,GACmCwP,EAAU5Z,MACxC3gB,MAAK,SAAAqhB,GACF,IAAM0b,EAAa1b,EAAYxiB,WAAU,SAAA+9B,GAAU,OAAIA,EAAWr5B,KAAO2c,EAASrB,WAC9D,IAAhBke,IACA7c,EAASE,YAAciB,EAAY0b,GACnCnnC,EAAS,CACLC,KAAMglC,GACNlb,WAAW,GAAD,oBAAMA,GAAN,CAAkBO,kBC9K5D4a,kCAAmC,kBAAMllC,EAASinC,OAElDpB,0BAA2B,SAAClC,EAAYC,GAAb,OAA2B5jC,EHxDvC,SAAC2jC,EAAYC,GAChC,MAAO,CACH3jC,KAAMsjC,GACNI,aACAC,aGoD+DwD,CAAwCzD,EAAYC,QA6W5G/jC,CAA6CslC,ICxZ/CkC,GAA2C,2CAC3CC,GAAoD,oDACpDC,GAAkD,kDAElDC,GAA0C,0CAS1CC,GAAwC,wCACxCC,GAA6C,6CAC7CC,GAA8B,8BAC9BC,GAAmC,mCA6CnCC,GAA+C,+CAC/CC,GAA6C,6CAmB7CC,GAAkD,kDAClDC,GAAgD,gDAahDC,GAAmD,mDAQnDC,GAA4C,4CAO5CC,GAAsD,sDAsD7DC,GAAiC,SAACpoC,EAAUwN,EAAM66B,GACpD,OAAO,IAAIr+B,SAAQ,SAACC,EAASC,GAEzBlK,EAAS,CACLC,KAAMvC,EACNS,KrCjK+C,EqCkK/CC,SAAU,IAGdiqC,EAAgBC,iBAAiBz+B,SAAWw+B,EAAgBC,iBAAiBz+B,SAASy5B,cACtF+E,EAAgBE,eAAe1+B,SAAWw+B,EAAgBE,eAAe1+B,SAASy5B,cAElFtmC,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAAMzE,IACNohB,OAAOqa,GACPj+B,MAAK,WAiCF,OAhCApK,EAAS,CACLC,KAAMvC,EACNS,KAAMN,EACNO,SAAU,MAGd4B,EAAS,CACLC,KAAMioC,KAGVloC,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,wDACT5P,MAAO,UACP6P,SAAU,WAGd+lB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,alCnFU,EkCoFVC,yBAA0Bvc,GAC1Bwc,mBAAoB5b,EAAKG,GACzB0b,gBnBV2C,6BmBW3CpS,MAAM,2BACCzJ,GADF,IAED4D,gBAAgB,eACTi3B,OAKZp+B,OAEVyI,OAAM,SAAAhI,GAkBH,OAjBA1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,MAGd4B,EAAS,CACLC,KAAMioC,KAGVloC,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,4DACT5P,MAAO,QACP6P,SAAU,WAGPlF,EAAOQ,UClPjB89B,GAAoC,oCACpCC,GAA+B,SAAAj7B,GACxC,OAAO,SAACxN,EAAUwP,GACd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9Bk7B,EAAoBl5B,IAAWm5B,SAASC,aAE1CC,GAAe,EAGnB,GAAKr7B,GASL,IAAIk7B,GAAqBA,EAAkB/6B,KAAOH,EAAKG,GAAvD,CAIA,GAAIH,EAAKL,eAAe,mBnCkJN,ImCjJXwT,EAAY1gB,OACX0gB,EAAYG,WAClB,CACE,IAAIgoB,ElCiWgB,SAAAhd,GAC5B,IAAM7gB,EAAQ6gB,EAAe7iB,WAAU,SAAA8T,GAAK,OAA0C,IAAtCA,EAAMgP,YAAYgd,mBAClE,OAAe,IAAX99B,EACO6gB,EAAe7gB,GAEf,KkCtWiBgP,CAAuBzM,EAAKse,gBAG3Cgd,EAMGnoB,EAAYoK,OAAS+d,EAAc/d,OACnC8d,GAAe,GANnBA,GAAe,EAWvB7oC,EAAS,CACLC,KAAMuoC,GACNh7B,OACAq7B,uBAlCA7oC,EAAS,CACLC,KAAMuoC,GACNh7B,OACAq7B,mBAoCHG,GAA4B,4BAC5BC,GAA6C,6CAC7CC,GAAwC,wCACxCC,GAA0C,0CAC1CC,GAAsB,sBAatBC,GAA0B,0BAO1BC,GAA+B,+BAW/BC,GAA8B,8BAS9BC,GAA6B,6BAC7BC,GAAyB,yBAOzBC,GAAsC,sCACtCC,GAAkC,kCAuK3CC,GAAuB,KAEdC,GAAkC,kCAwClCC,GAAkC,WAC3C,OAAO,SAAC9pC,EAAUwP,GACVo6B,KACAA,GAAqB5K,IAAI,SACzB4K,GAAuB,QCrTtBG,GAAsB,sBA8EtBC,GAAoB,oBAcpBC,GAAmC,mCAOnCC,GAA6D,6DAO7DC,GAAiC,iCACjCC,GAA8B,8BAC9BC,GAA8C,+CAC9CC,GAA4C,4CA0B5CC,GAA6B,6BAC7BC,GAAuC,uCACvCC,GAAoC,oCACpCC,GAAoD,oDACpDC,GAAkD,kDAiClDC,GAAsC,sCACtCC,GAAmC,mCACnCC,GAAmD,mDACnDC,GAAiD,iDACjDC,GAA+B,+BAsEtCC,GAAoB,yCAAG,WAAOjrC,EAAU7B,EAAMsO,EAAMy+B,GAA7B,oCAAAphC,EAAA,sDAAyC0D,EAAzC,+BAAgD,KAAMC,EAAtD,+BAAgE,KAErF09B,EAAUnuC,EAAS8T,UAEjBG,EAAYgJ,KACZmxB,EAAkBnxB,GAA+BxN,EAAMwE,GALpC,KAOjB9S,EAPiB,OvC9Oc,IuC8Od,OvC5OU,IuC4OV,QvC3O0B,IuC2O1B,eAiChBP,EAjCgB,0BASjButC,EAAUA,EACL5sC,IAAIqO,IACJyE,MAAM7D,EAAKG,IACX0D,MAAMzE,IACNyE,MAAM+5B,GAbM,oCAgBjBD,EAAUA,EACL5sC,IAAIqO,IACJyE,MAAM5D,EAAQG,UACdyD,MAAMzE,IACNyE,MAAM5D,EAAQE,IACd0D,MAAMzE,IACNyE,MANK,UAMIJ,EANJ,YAMiB3E,SAASG,KAAK4+B,YAtBxB,oCAyBjBF,EAAUA,EACL5sC,IAAIqO,IACJyE,MAAM5D,EAAQG,UACdyD,MAAMzE,IACNyE,MAAM5D,EAAQE,IACd0D,MAAMzE,IACNyE,MAAM+5B,GA/BM,oCAkCjBD,EAAUA,EACL5sC,IAAIqO,IACJyE,MAAM5D,EAAQG,UACdyD,MAAMzE,IACNyE,MAAM5D,EAAQE,IACd0D,MAAMzE,IACNyE,MAAM+5B,GAxCM,wFA8ClB,IAAIphC,SAAQ,SAACC,EAASC,GACzB,IAAMwH,EAAay5B,EAAQx5B,IAAIlF,EAAKA,MACpCiF,EACKE,GAAG,iBAAiB,SAAAC,GAEjB,IAAIzT,EAAYyT,EAASC,iBAAmBD,EAASE,WAAc,IvC/R5C,IuCiSnB5T,GvChSmC,IuCgSCA,GACpC6B,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAUA,EAASuL,QAAQ,QAIpC,SAAAe,GAEC,OAAOR,EAAOQ,MACf,WAECgH,EACKG,SACAtT,IACAyT,iBACA5H,MAAK,SAAAkhC,GAEF,IAAIC,EAAc,EAElB,OAAQptC,GACJ,KvCzTe,EuC0TXotC,EAAc,IAAML,EACpB,IAAMM,EAAgB,CAClBC,SAAUL,EAAgBv/B,MAAMe,IAAqC,GACrE8+B,aAAcj/B,EAAKA,KAAKk/B,aACxBC,YAAaN,EACbr6B,UAAWA,GAGfjR,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAUmtC,IAGdvrC,EAAS,CACLC,KAAM2qC,GACNiB,UAAWL,IAEf,MACJ,KvC3UW,EuC4UP,IAAMM,EAAiB,CACnBh/B,IAAKw+B,EACLS,SAA6B,cAAnBt/B,EAAKA,KAAKxM,KpCzDzB,EACA,EoCyDK+rC,cAAe1/B,SAASG,KAAK4+B,UAC7Bp6B,UAAWA,GAGfjR,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAU,MAGd4B,EAAS,CACLC,KAAM4qC,GACNgB,UAAWC,IAEf,MACJ,KvC7V2B,EuC8VvB,IAAMG,EAAgC,CAClCR,SAAUL,EAAgBv/B,MAAMe,IAAqC,GACrE8+B,aAAcj/B,EAAKA,KAAKk/B,aACxBC,YAAaN,EACbr6B,UAAWA,GAGfjR,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAU,MAGd4B,EAAS,CACLC,KAAM6qC,GACNe,UAAWI,IAEf,MACJ,KAAKruC,EACD2tC,EAAc,IAAML,EACpB,IAAMgB,EAA8B,CAChCT,SAAUL,EAAgBv/B,MAAMe,IAAqC,GACrE8+B,aAAcj/B,EAAKA,KAAKk/B,aACxBC,YAAaN,EACbr6B,UAAWA,GAGfjR,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAUmtC,IAGdvrC,EAAS,CACLC,KAAM8qC,GACNc,UAAWK,IAOvB,OAAOjiC,cA7JF,4CAAH,4DAmKpBkiC,GAA4B,yCAAG,WAAOnsC,EAAUwP,EAAUrR,GAA3B,4BAAA2L,EAAA,4FAAwC,KAAxC,+BAAwD,KAErFsI,EAAcpV,EAASgU,WAFM,kBAI1B,IAAIhH,SAAQ,SAACC,EAASC,GACzB,OAAQ/L,GACJ,KvCvZ+B,EuCwZ3B,IAAMiuC,EAAuB58B,IAAW68B,eAAepjB,OACjDqjB,EAAyB98B,IAAW68B,eAAeA,eAEnDE,EAAoB/8B,IAAWg9B,YAAYD,kBAAkBF,eAC/DI,EAA8B,GAG9BA,EADAH,EAC2B,uBAAOA,GAAP,aAAkCC,IAE/BA,EAGlCn6B,EACK7T,IAAIqO,IACJyE,MAAM+6B,GACN55B,IAAIi6B,GACJriC,MAAK,WAMF,OALApK,EAAS,CACLC,KAAMvC,EACNS,KAAMN,EACNO,SAAU,MAEP6L,OAEVyI,OAAM,SAAAhI,GAMH,OALA1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,MAEP8L,EAAOQ,MAGtB,MACJ,KvCxb2B,EuC0b3B,KvCzb2C,EuC2b3C,KAAK9M,EAEL,QACI,YAhDqB,2CAAH,0DCnarB8uC,GAA2B,2BAQ3BC,GAA0B,0BAC1BC,GAAmC,mCAgC5CC,GAAyB,KAEhBC,GAA0B,0BCxC1BC,GAAiD,iDACjDC,GAAU,SAAC7f,GACpB,OAAO,SAACntB,EAAUwP,GACKA,IAAWy9B,yCAAyChkB,SAGpDkE,GAGnBntB,EAAS,CACLC,KAAM8sC,GACN5f,UAKC+f,GAAgD,gDAChDC,GAAyD,yDACzDC,GAAyC,WAClD,OAAO,SAACptC,EAAUwP,GACd,IACIyZ,EACAzZ,IAAWy9B,yCADXhkB,OAGJjpB,EAAS,CACLC,KAAMitC,KAGVlwC,EACKgU,WACAzS,IAAIqO,IACJid,aAAa,UACbC,QAAQb,GACRe,KAAK,SAAS,SAAAC,GACNA,GAAcA,EAAUC,UACzBlqB,EAAS,CACLC,KAAMktC,GACN5kB,OAAQ,OAIhB0B,EAAUrf,SAAQ,SAAAiH,GACd7R,EAAS,CACLC,KAAMktC,GACN5kB,OAAQ1W,EAASsY,gBAO5BkjB,GAAyD,yDAQzDC,GAA+C,+CAoE/CC,GAA+D,+D,yFC9HvDC,G,iIAOjB,WAAsB5sB,GAAtB,mFACiB,IAAI6F,IACZuB,QACG,MACA5D,GAAUkB,cAAcrZ,QAAQ,iBAAkB2U,IAJ9D,mF,yHAaA,WAAyBiB,GAAzB,mFACiB,IAAI4E,IACZuB,QACG,MACA5D,GAAUgB,WACV,CACIoC,YAAa,KACbZ,gBAAiB/E,IAPjC,mF,+HAiBA,WAA+B2J,GAA/B,mFACiB,IAAI/E,IACZuB,QACG,MACA5D,GAAUoB,iBAAiBvZ,QAAQ,SAAUuf,IAJzD,mF,wEZtCQkV,K,+CAAAA,E,6DAAAA,E,8EAAAA,Q,KA4BL,IahCK+M,GASAC,GCgBNpO,GAAoC,CACtC+B,eAAWvf,EACX6rB,sBAAkB7rB,EAElB/E,MAAO,KACP6wB,aAAa,EACbC,cAAc,EAEdC,gBAAiBC,GAEjBC,eAAe,GAGNC,GAAuB,SAACnuC,GACjC,OAASA,EAAMid,QAAUjd,EAAM8tC,aAAe9tC,EAAM+tC,eAC3C/tC,EAAMid,QAAUjd,EAAM8tC,cAAgB9tC,EAAM+tC,cAG5CK,GAAyB,SAACpuC,GACnC,OAAkC,OAA3BA,EAAM6tC,kBAGJQ,GAAgC,SAACruC,GAC1C,OAAOA,EAAMkuC,oBAAiClsB,IAAhBhiB,EAAM4K,OAO3B0jC,GAAqB,SAACtuC,GAC/B,YAA8BgiB,IAA1BhiB,EAAMguC,gBACCC,GAEJjuC,EAAMguC,iBA4DFO,GAzDe,WAA8E,IAA7EvuC,EAA4E,uDAA/Cw/B,GAAchW,EAAiC,uCACvG,OAAQA,EAAOrpB,MACX,KAAKygC,GAAqB4N,YACtB,IAAMC,EAAuCjlB,EAC7C,OAAO,2BACAxpB,GADP,IAEIuhC,UAAWkN,EAAkB5V,KAC7BgV,iBAAkBY,EAAkB3tB,gBAE5C,KAAK8f,GAAqB8N,mBACtB,OAAO,2BACA1uC,GADP,IAEIid,MAAO,KACP6wB,aAAa,EACbC,cAAc,EACdG,eAAe,IAEvB,KAAKtN,GAAqB+N,2BACtB,IAAMC,EAAqEplB,EAC3E,OAAO,2BACAxpB,GADP,IAEIid,MAAkD,OAA3C2xB,EAAiC3xB,MAAiB,KAAOL,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOvM,QACjG6wB,aAAa,EACbC,cAAc,EACdG,cAAeU,EAAiCV,cAChDtjC,MAAOgkC,EAAiChkC,MACxCojC,gBACIY,EAAiCV,eAAiBU,EAAiC3xB,MAE/E4xB,YACIC,YAAe,CACXC,QAAS,CACLC,QAAS,CACLC,KAAML,EAAiC3xB,MAAMmW,SAASvwB,cAG1DqsC,UAAW,CACPD,KAAML,EAAiC3xB,MAAMmW,SAAStwB,gBAG1DqsC,KAAM,CACFD,UAAWn6B,KAAOq6B,SAAS,OAGnCC,WAAY,CACRC,WAAY,uBAKxBrB,KAEhB,QACI,OAAOjuC,K,SDnHP2tC,K,wBAAAA,E,cAAAA,E,oBAAAA,E,gBAAAA,E,gBAAAA,E,eAAAA,Q,cASAC,K,UAAAA,E,YAAAA,E,sCAAAA,E,wBAAAA,E,gBAAAA,E,sBAAAA,E,6BAAAA,Q,SEGA2B,GFqBSC,G,oIAOjB,WAAyBC,GAAzB,mFACiB,IAAI9oB,IACZuB,QACG,MACA5D,GAAUqB,kBACV,CACI+B,YAAa,KACbZ,gBAAiB2oB,IAPjC,mF,uHAiBA,WAAuBA,GAAvB,2FACW,IAAIvlC,QAAJ,yCAAkB,WAAOC,EAASC,GAAhB,sBAAAJ,EAAA,gFAEM,IAAI2c,IACtBuB,QACG,MACA5D,GAAUwB,yBACV,CACI4B,YAAa,KACbZ,gBAAe,OAAE2oB,QAAF,IAAEA,IAAW,OARvB,cAEX12B,EAFW,OAaXrI,EAAO,IAAI+H,KAAK,CAACM,EAAStO,MAAO,CAACtK,KAAM,iCAExB6hB,KADhB0tB,EAAOljC,SAASmjC,cAAc,MAC3BC,WAEC5iC,EAAMuK,IAAIC,gBAAgB9G,GAChCg/B,EAAKG,aAAa,OAAQ7iC,GAC1B0iC,EAAKG,aAAa,WAAY,mBAC9BH,EAAKrwC,MAAMsyB,WAAa,SACxBnlB,SAASsjC,KAAKC,YAAYL,GAC1BA,EAAKM,QACLxjC,SAASsjC,KAAKG,YAAYP,IAvBb,kBAyBVvlC,KAzBU,2DA2BVC,EAAO,EAAD,KA3BI,0DAAlB,0DADX,2C,wEE7CQmlC,K,8CAAAA,E,kDAAAA,E,kEAAAA,E,gDAAAA,E,0DAAAA,E,4EAAAA,E,0CAAAA,E,wDAAAA,E,8CAAAA,E,+DAAAA,Q,KAmDL,ICvDKW,GD2GCC,GAAkC,WAC3C,gDAAO,WAAOjwC,EAAoBwP,GAA3B,sCAAA1F,EAAA,2DAOC0F,IAAW0gC,sBALXvL,EAFD,EAECA,UACAwL,EAHD,EAGCA,4BACAC,EAJD,EAICA,iBACAC,EALD,EAKCA,YACAC,EAND,EAMCA,aAGE3vB,EAAcnR,IAAWkR,oBAAoBC,cAE9BgkB,EAXlB,oDAeG9jB,EAA6BpE,GAAQkE,GAErC4vB,EAA2C,CAC7C9e,WAAY2e,EACZrzB,MAAOszB,EACPG,MAAOF,GAGLG,EAA+C,CACjDxwC,KAAMovC,GAAkBqB,uBACxBC,eAAgB,IAGhBC,GAA6B,EAG7BjwB,EAAYhT,KAAOg3B,EAAUh3B,GAC7BijC,GAAoB,EAGf/vB,IAEDA,EAAaC,WACb8vB,GAAoB,OAIgB9uB,IAAhCquB,IACuH,IAApHA,EAA4BlnC,WAAU,SAAAkY,GAAiB,OAAIA,EAAkBpE,MAAMgO,OAASlK,EAAakK,SACxGtO,GAAQkoB,KAEZiM,GAAoB,KAK5BA,EAnDD,qBAoDK1zB,GAASynB,GApDd,iBAqDK4L,EAAmBtuB,OAAS0iB,EAAUh3B,GACtC4iC,EAAmBM,QAAUpD,GAA4BqD,OAtD9D,4BAuDY3zB,GAAWwnB,GAvDvB,iBAwDK4L,EAAmBle,SAAWsS,EAAUh3B,GACxC4iC,EAAmBM,QAAUpD,GAA4BsD,SAzD9D,4BA0DYlwB,EA1DZ,iBA2DUA,EAAaC,aACdyvB,EAAmBxzB,MAAQ8D,EAAakK,KACxCwlB,EAAmBM,QAAUpD,GAA4BuD,OA7DlE,+BAgEKP,EAAe/lC,MAAQ,0BAhE5B,kBAiEY1K,EAASywC,IAjErB,uCAoECA,EAAe/lC,MAAQ,iDApExB,kBAqEQ1K,EAASywC,IArEjB,eAwEHzwC,EAAS,CACLC,KAAMovC,GAAkB4B,iBAzEzB,qBA6EwB,IAAI3B,IAAkBW,YAAYM,GA7E1D,eA6EO13B,EA7EP,OA8EC43B,EAAeE,eAAiB93B,EAAStO,KACzCvK,EAASywC,GA/EV,kBAgFQzwC,EAASkxC,OAhFjB,0CAkFCT,EAAe/lC,MAAQ,KAAMge,WAlF9B,kBAmFQ1oB,EAASywC,IAnFjB,2DAAP,yDAyGSS,GAAyC,WAClD,OAAO,SAAClxC,EAAoBwP,GACxB,IAAM2hC,EAAqB3hC,IAAW0gC,sBAAsBiB,WACxDR,EAAiC,aAAOnhC,IAAW0gC,sBAAsBS,gBAEvErnB,EAAmC,CACrCrpB,KAAMovC,GAAkB+B,mBACxBT,eAAgBA,EAChBU,mBAAmB,GAUvB,OAPIF,EAAWjmC,OAAOnC,OAAS,IAC3B4nC,EAAiBA,EAAezvB,QAC5B,SAAAowB,GAAa,uBAAIA,EAAcC,cAAc9gB,mBAAhC,aAAI,EAAyCtnB,cAAcwC,SAASwlC,EAAWhoC,kBAEhGmgB,EAAOqnB,eAAiBA,EACxBrnB,EAAO+nB,mBAAoB,GAExBrxC,EAASspB,KErMlBgW,GAAiC,CACnCqR,eAAgB,GAChBa,6BAA8B,GAC9BC,gBAAgB,EAChBC,eAAe,EAEfP,WAAY,GACZf,iBAAkB,MAClBC,YAAa,MACbC,YAAa,MACbqB,uBAAuB,EAEvBC,YAAa,EACbhM,YAAa,EAEbiM,cAAc,GAGLC,GAAmB,SAAChyC,GAC7B,OAAQA,EAAM4xC,eAAiB5xC,EAAM2xC,gBAG5BM,GAA4B,SAACjyC,GACtC,OAAOA,EAAM4xC,gBAAkB5xC,EAAM2xC,qBAAkC3vB,IAAhBhiB,EAAM4K,OAGpDsnC,GAA6B,SAAClyC,GACvC,OAAOiyC,GAA0BjyC,IAAUA,EAAM0xC,6BAA6BzoC,OAAS,GAG9EkpC,GAA0B,SAACnyC,GACpC,OAAOA,EAAM6xC,uBAGJO,GAAyB,SAACpyC,GACnC,YAAuBgiB,IAAhBhiB,EAAM4K,OAOJynC,GAAuB,SAACryC,GACjC,YAAmCgiB,IAA5BhiB,EAAMsyC,mBAGJC,GAAkB,SAACvyC,GAC5B,YAA8BgiB,IAAvBhiB,EAAMwyC,cAA8BxyC,EAAMwyC,aAAavpC,OAAS,GAiG5DwpC,GA9FY,WAAsD,IAArDzyC,EAAoD,uDAA5Cw/B,GAAchW,EAA8B,uCAC5E,OAAQA,EAAOrpB,MACX,KAAKo/B,GAAqBc,QACtB,OAAOb,GACX,KAAK+P,GAAkBmD,aACnB,IAAMC,EAAyCnpB,EAC/C,OAAO,2BACAgW,IADP,IAEIqF,eAAuC7iB,IAA5B2wB,EAAmBjlC,KACxBkP,KAAKC,MAAMD,KAAKE,UAAU61B,EAAmBjlC,YAC7CsU,EACNquB,iCAAuEruB,IAA1C2wB,EAAmB1xB,mBAAnB,aACnB0xB,EAAmB1xB,yBACvBe,EACNwwB,kBAAkDxwB,IAApC2wB,EAAmBH,aAAnB,aACJG,EAAmBH,mBACvBxwB,EACNpX,WAAoCoX,IAA7B2wB,EAAmB/nC,MAAsB,CAACqe,OAAQ0pB,EAAmB/nC,OAAS5K,EAAM4K,QAEnG,KAAK2kC,GAAkB4B,eACnB,OAAO,2BACAnxC,GADP,IAEI6wC,eAAgB,GAChBa,6BAA8B,GAC9BC,gBAAgB,EAChBC,eAAe,EACfhnC,WAAOoX,IAEf,KAAKutB,GAAkBqB,uBACnB,IAAMgC,EAA6DppB,EACnE,OAAO,2BACAxpB,GADP,IAEI6wC,eAAe,aAAK+B,EAA6B/B,gBACjDc,gBAAgB,EAChBC,eAAe,EACfE,YAAa,EACblnC,WAA8CoX,IAAvC4wB,EAA6BhoC,MAC9B,CAACqe,OAAQ2pB,EAA6BhoC,OAAS5K,EAAM4K,QAEnE,KAAK2kC,GAAkBsD,cACnB,IAAMC,EAA2CtpB,EACjD,OAAO,2BACAxpB,GADP,IAEI,CAAC8yC,EAAoBlmC,MAAOkmC,EAAoB37B,MAChD26B,YAAa,IAErB,KAAKvC,GAAkB+B,mBACnB,IAAMyB,EAAqDvpB,EAC3D,OAAO,2BACAxpB,GADP,IAEI0xC,6BAA6B,aAAKqB,EAAyBlC,gBAC3DgB,sBAAuBkB,EAAyBxB,kBAChDO,YAAa,IAErB,KAAKvC,GAAkByD,4BACnB,OAAO,2BACAhzC,GADP,IAEI0xC,6BAA6B,aAAK1xC,EAAM6wC,gBACxCQ,WAAY,GACZQ,uBAAuB,EACvBC,YAAa,IAErB,KAAKvC,GAAkB0D,WACnB,IAAMC,EAAqC1pB,EAC3C,OAAO,2BACAxpB,GADP,IAEI8xC,YAAaoB,EAAiBrN,OAEtC,KAAK0J,GAAkB4D,kBACnB,IAAMC,EAAmD5pB,EACzD,OAAO,2BACAxpB,GADP,IAEI8lC,YAAasN,EAAwBtN,YACrCgM,YAAa,IAErB,KAAKvC,GAAkB8D,aACnB,OAAO,2BACArzC,GADP,IAEI+xC,cAAc,EACdO,uBAAmBtwB,IAE3B,KAAKutB,GAAkB+D,qBACnB,IAAMC,EAAyD/pB,EAC/D,OAAO,2BACAxpB,GADP,IAEI+xC,cAAc,EACdO,uBAAwDtwB,IAArCuxB,EAA2B3oC,MACxC,CAACqe,OAAQsqB,EAA2B3oC,OAAS5K,EAAMsyC,oBAEjE,QACI,OAAOtyC,ICtJJwzC,GApBI,SAACr1C,GAChB,MAAwB,MAApBA,EAAMiH,UACC,mBACH+xB,KAAMh5B,EAAM6O,IACZqP,OAAQle,EAAMke,OACdnX,UAAWyQ,YAAIC,GAAOzX,GAAOs1C,YAH1B,SAKFt1C,EAAMu1C,iBAIR,cAAC,IAAD,CACH9c,GAAIz4B,EAAM6O,IACVqP,OAAQle,EAAMke,OACdnX,UAAWyQ,YAAIC,GAAOzX,GAAOs1C,YAH1B,SAKFt1C,EAAMu1C,kBAMT99B,GAAS,SAACzX,GAAD,OAA4BiF,IAAWC,OAAO,CACzDowC,WAAY,CACRh0C,MAAOtB,EAAMsB,MACb,SAAU,CACNA,MAAOtB,EAAMw1C,YACbnwC,eAAgBrF,EAAMy1C,gBAAkB,YAAc,Y,0CC2HrDxlC,GAAgB,SAACT,GAC1B,OAAOU,GAA0BV,IAAYW,GAA2BX,IAS/DY,GAAiB,SAACZ,GAC3B,OAAOA,EAAQC,SAAWd,IAQjB+mC,GAA6B,SAAClmC,GACvC,OAAOY,GAAeZ,IAAYA,EAAQI,MAAMH,SAAWd,IASlD0B,GAA2B,SAACb,GACrC,O9CsBwC,I8CtBjCA,EAAQC,QASNa,GAA4B,SAACd,GACtC,O9CWmC,I8CX5BA,EAAQC,QASNS,GAA4B,SAACV,GACtC,O9CGsC,I8CH/BA,EAAQC,Q9CWkB,I8CV1BD,EAAQI,MAAMH,QASZc,GAA8C,SAACf,GACxD,O9CPoE,I8CO7DA,EAAQC,Q9CO2B,I8CNnCD,EAAQI,MAAMH,QASZe,GAAuC,SAAChB,GACjD,O9ClBoE,I8CkB5DA,EAAQC,Q9CNsC,I8CO3CD,EAAQI,MAAMH,Q9CpBa,I8CuB9BD,EAAQC,Q9CVsC,I8CW3CD,EAAQI,MAAMH,QAUhBgB,GAAuC,SAACjB,GACjD,O9CjCsE,I8CiC/DA,EAAQC,QASNU,GAA6B,SAACX,GACvC,O9C1C8C,I8C0CvCA,EAAQC,QASNiB,GAAsB,SAAClB,GAChC,O9CnDqC,I8CmD9BA,EAAQC,QAQNkB,GAAkB,SAACnB,GAC5B,O9C3DiC,I8C2D1BA,EAAQC,QASNmB,GAA6B,SAACpB,GACvC,YAAqCqU,IAA9BrU,EAAQqB,mBAAmCrB,EAAQqB,mBAiBjD8kC,GAA+B,SAACnmC,GACzC,YAAuCqU,IAAhCrU,EAAQomC,qBAAqE,OAAhCpmC,EAAQomC,qBAyBnDC,GAAoB,SAACC,GAC9B,O9ClC2B,I8CkCpBA,EAAWhI,UAOTiI,GAAkB,SAACvmC,GAC5B,O9C1JqC,I8C0J9BA,EAAQgkB,YAGNwiB,GAAsB,SAACxmC,GAChC,O9C/JyC,I8C+JlCA,EAAQgkB,YAGNyiB,GAAmB,SAACzmC,GAC7B,O9CpKsC,I8CoK/BA,EAAQgkB,YAaN0iB,GAAuC,SAAC3mC,EAAoBuT,EAAyCtT,GAC9G,IAAMuU,EAAsBvF,GAAQjP,GAEpC,GAAIwU,EAAO,CAEP,GAAIA,EAAMlB,WACN,OAAO,EAIX,GAAIkB,EAAM+I,OAAStd,EAAQsd,KACvB,OAAO,EAIX,OAAQtd,EAAQgkB,YACZ,K9C/L6B,E8CgMzB,OAAO,EACX,K9ClMiC,E8CoMjC,K9CrM8B,E8CuM9B,QACI,OAAO,OAId,CAED,GAAIvU,GAAS1P,IAASA,EAAKG,KAAOF,EAAQG,SACtC,OAAO,EAIX,IAA0G,IAAtGmT,EAAmB9X,WAAU,SAAAkY,GAAiB,OAAIA,EAAkBpE,MAAMgO,OAAStd,EAAQsd,QAC3F,OAAO,EAIX,OAAQtd,EAAQgkB,YACZ,K9CvN6B,E8CwNzB,OAAO,EACX,K9C1NiC,E8C4NjC,K9C7N8B,E8C+N9B,QACI,OAAO,KAWV2iB,GAAiB,SAAC5mC,EAAoBC,GAC/C,IAAMuU,EAAsBvF,GAAQjP,GAEpC,QAAIwU,IAASA,EAAMlB,cAIfkB,EACOA,EAAM+I,OAAStd,EAAQsd,KAEvBvd,EAAKG,KAAOF,EAAQG,W,qBC9atBymC,GAAmB,SAAC90C,EAAeyZ,GAC5C,IAAMs7B,EAAqCC,KAAYC,IAAIC,IAAIl1C,GAC/D,OAAK+0C,EAGEC,KAAY7d,GAAGge,IAAIJ,EAAS,GAAIA,EAAS,GAAIA,EAAS,QAAgBxyB,IAAZ9I,EAAwB,EAAMA,GAFpFzZ,GCuHTo1C,G,uKAEF,WAAqB,IAAD,EAChB,EAII32C,KAAKC,MAHL22C,EADJ,EACIA,gBACAl0B,EAFJ,EAEIA,qBAGJssB,EALA,EAGIA,SAEG,iBAAC4H,QAAD,IAACA,IAAmBl0B,EAAoBC,mBAAxC,aAAuDmB,K,oBAGlE,WAAU,IAAD,MACL,EAWI9jB,KAAKC,MAVLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBACAwvB,EAHJ,EAGIA,sBACAD,EAJJ,EAIIA,YACA4E,EALJ,EAKIA,cACA3D,EANJ,EAMIA,mBACA4D,EAPJ,EAOIA,4BACAhX,EARJ,EAQIA,WACAI,EATJ,EASIA,kBACA6W,EAVJ,EAUIA,UAGJ,IAAKr0B,EAAoBC,YACrB,OAAO,KAGX,IAAMA,EAA4BD,EAAoBC,YAChDgkB,EAAsCuL,EAAsBvL,UAElE,IAAKhkB,IAAgBgkB,EACjB,OAAO,KAGX,IJ9EuB7kC,EI8EjB+gB,EAA6BpE,GAAQkE,GACrCq0B,EAA2Bv4B,GAAQkoB,GAEzC,OAAO,cAACsQ,GAAA,EAAD,CACH/vC,UAAWi0B,KADR,SAGH,eAAC+M,GAAA,EAAD,CACI3mC,MAAM,QADV,UAII,eAAC4mC,GAAA,EAAD,WAGUtlB,GAAgBm0B,GAAcn0B,EAAalT,KAAOqnC,EAAWrnC,GAEzD,cAACm4B,GAAA,EAAD,UACE,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,eAACiwC,GAAA,EAAD,WACI,eAAC51C,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMq1C,KAHnB,UAKI,cAACI,GAAA,EAAD,CACIpxC,SAAS,UAEb,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,UJ3GvBzV,EI8GgCowC,EJ7GpDpwC,EAAM+xC,aI8GqC,gBACA,iBAKTM,GAAqBjC,GAEhB,cAACgF,GAAA,EAAD,CACE91C,UAAU,OADZ,SAGE,cAACF,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QAFV,6BAIQ2wC,EAAsBkC,yBAJ9B,aAIQ,EAAyCrpB,OAJjD,uBAJF,YA1BpB,KA6CN5L,GAAWwD,IAAiBE,GAAgBA,EAAaC,WACnD,KACA,cAACglB,GAAA,EAAD,UACE,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC,GAAD,CACI6H,IACIoQ,GAASyD,IAAiBE,GAAgBm0B,GAAcn0B,EAAalT,KAAOqnC,EAAWrnC,GAGjFyP,GAAOwE,4BAAP,UAAmCnB,EAAoBktB,wBAAvD,QAA2E,MAC1E9sB,GAAgB3D,GAASynB,GAE1BvnB,GAAOwE,4BAAP,UAAmCnB,EAAoBktB,wBAAvD,QAA2E,KAAM,CAC/E3rB,MAAOnB,EAAalT,GACpBsU,OAAQ0iB,EAAUh3B,KAEpB,GAEVwO,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,eAACl0C,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAHhC,UAKI,cAACixC,GAAA,EAAD,CACIrxC,SAAS,UAEb,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,SATd,4BAoBxB,cAACuwB,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,eAACoP,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACugC,GAAA,EAAD,CACIG,QAAQ,OACRj/B,OAAO,OACPk/B,WAAW,SACXC,QACKtD,GAAwB/B,GAEnBmE,GAAiBjG,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAAM,KAD/El6B,KAAO2gC,KAAK,KAGtBl/B,aAAa,OATjB,SAWI,cAACm/B,GAAA,EAAD,CACIh3C,WAAS,EACTiO,KAAK,aACLuK,MAAOi5B,EAAsBiB,WAC7B91B,YAAY,uBACZzF,SAAUi/B,EACVp1C,UAAWsyC,GAA0B7B,GACrCwF,eACI,cAAC/b,GAAA,EAAD,CACIvqB,SAAS,QADb,SAGI,cAACiG,EAAA,EAAD,CACI3V,QAAS,kBAAMwxC,KACfzxC,UAAWsyC,GAA0B7B,GAFzC,SAII,cAAC,KAAD,CAAQnsC,SAAS,cAI7B21B,aACKuY,GAAwB/B,GAEnB,cAACvW,GAAA,EAAD,CACEvqB,SAAS,MADX,SAGE,cAACiG,EAAA,EAAD,CACI3V,QAAS,kBAAMo1C,KADnB,SAGI,cAAC,KAAD,CAAO/wC,SAAS,cAPtB,WAgBtB,cAACwQ,EAAA,EAAD,CACIC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACugC,GAAA,EAAD,CACIG,QAAQ,OACRj/B,OAAO,OACPu/B,eAAe,WACfL,WAAW,SAJf,SAMI,cAACjgC,EAAA,EAAD,CACI3V,QAAS,kBAAMuwC,KACfxwC,UAAWsyC,GAA0B7B,GAFzC,SAII,cAAC0F,GAAA,EAAD,iBASxB,cAAC9P,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,eAACoP,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIW,SAAS,MADb,UAGI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,QADZ,yBAKA,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,QAEX,eAAC0/B,GAAA,EAAD,CACIr3C,WAAS,EACTiO,KAAK,mBACLuK,MAAOi5B,EAAsBE,iBAC7BtxC,QAAQ,WACRa,OAAO,QACPo2C,MAAO,cAACC,GAAA,EAAD,IACPpgC,SAAUi/B,EACVp1C,UAAWsyC,GAA0B7B,GARzC,UAUI,cAAC+F,GAAA,EAAD,CAEIh/B,MAAM,MAFV,gBACQ,OAKR,cAACg/B,GAAA,EAAD,CAEIh/B,MhD1MP,EgDwMG,mBhDxMH,GgD8MG,cAACg/B,GAAA,EAAD,CAEIh/B,MhDjNH,EgD+MD,uBhD/MC,GgDqND,cAACg/B,GAAA,EAAD,CAEIh/B,MhDxNN,EgDsNE,oBhDtNF,WgDiOV,cAAC1C,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIW,SAAS,MADb,UAGI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,QADZ,oBAKA,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,QAEX,eAAC0/B,GAAA,EAAD,CACIr3C,WAAS,EACTiO,KAAK,cACLuK,MAAOi5B,EAAsBG,YAC7BvxC,QAAQ,WACRa,OAAO,QACPo2C,MAAO,cAACC,GAAA,EAAD,IACPpgC,SAAUi/B,EACVp1C,UAAWsyC,GAA0B7B,GARzC,UAUI,cAAC+F,GAAA,EAAD,CAEIh/B,MAAM,MAFV,gBACQ,OAMHo7B,GAAgBnC,IACbA,EAAsBoC,aAEpBpC,EAAsBoC,aAAaz6B,KAAI,SAAAkF,GAAK,OAC1C,cAACk5B,GAAA,EAAD,CAEIh/B,MAAO8F,EAAMgO,KAFjB,SAIKhO,EAAMkQ,aAHFlQ,EAAMgO,SAHjB,aAetB,cAACxW,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIW,SAAS,MADb,UAGI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,QADZ,qBAKA,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,QAEX,eAAC0/B,GAAA,EAAD,CACIr3C,WAAS,EACTiO,KAAK,cACLuK,MAAOi5B,EAAsBI,YAC7BxxC,QAAQ,WACRa,OAAO,QACPo2C,MAAO,cAACC,GAAA,EAAD,IACPpgC,SAAUi/B,EACVp1C,UAAWsyC,GAA0B7B,GARzC,UAUI,cAAC+F,GAAA,EAAD,CAEIh/B,MAAM,MAFV,gBACQ,OAKR,cAACg/B,GAAA,EAAD,CAEIh/B,MAAOy2B,GAA0BwI,UAFrC,iBACSxI,GAA0BwI,WAKnC,cAACD,GAAA,EAAD,CAEIh/B,MhDhSJ,EgD8RA,wChD9RA,GgDoSA,cAACg/B,GAAA,EAAD,CAEIh/B,MAAOy2B,GAA0ByI,kBAFrC,+BACSzI,GAA0ByI,mBAKnC,cAACF,GAAA,EAAD,CAEIh/B,MAAOy2B,GAA0B0I,aAFrC,oBACS1I,GAA0B0I,cAKnC,cAACH,GAAA,EAAD,CAEIh/B,MAAO7P,GAFX,kBACSA,mBAajC,eAAC0+B,GAAA,EAAD,WACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,uBAOJ,cAACwF,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,oBAOJ,cAACwF,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,qCAOJ,cAACwF,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,4BAWZ,cAAC6mC,GAAA,EAAD,UAGQ0L,GAAiB5B,GACX,cAACpK,GAAA,EAAD,UACE,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAACiwC,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACXl/B,OAAO,QAJX,SAMI,cAAC,aAAD,CACI7W,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,aAM7EmD,GAAuBhC,GACvB,cAACpK,GAAA,EAAD,UACE,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAACiwC,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACXl/B,OAAO,QAJX,SAMI,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SACNxT,MAAM,QAHV,wCAWTwyC,GAA0B7B,GAGtB8B,GAA2B9B,GAsBxBA,EAAsBsB,6BACnBrmC,MAAM+kC,EAAsB0B,YAAc1B,EAAsBtK,YAAasK,EAAsB0B,YAAc1B,EAAsBtK,YAAcsK,EAAsBtK,aAC3K/tB,KACG,SAAAy5B,GAAa,mBAAI,eAACxL,GAAA,EAAD,CAEbtL,OAAK,EAFQ,UAKb,cAACz1B,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,eAACiwC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdV,eAAe,SAHnB,UAMI,eAACT,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MAFlB,UAKQrC,GAAgB1C,EAAcC,eACxB,cAAC,KAAD,CAAYxtC,SAAS,UACrBkwC,GAAoB3C,EAAcC,eAClC,cAAC,KAAD,CAAgBxtC,SAAS,UACzB,cAAC,KAAD,CAAaA,SAAS,UAEhC,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAAC,GAAD,CACIzI,IACIuB,GAAeijC,EAAcC,eACvBn0B,GAAOwE,4BAAP,UAAmCnB,EAAoBktB,wBAAvD,QAA2E,KAAM,CAAC5rB,KAAMuvB,EAAcC,cAAc5jC,KACpHyP,GAAOsE,4BAAP,UAAmCjB,EAAoBktB,wBAAvD,QAA2E,KAAM2D,EAAcC,cAAc5jC,IAEvHwO,OACI9N,GAAeijC,EAAcC,eACvB,SACA,GAEVhyC,MAAM,QACNk0C,YAAarF,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACrE2E,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACI,cAACt0C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,mBAIKu+B,EAAcC,cAAc9gB,mBAJjC,QAIgD,UAQxDvT,GAASyD,SAC8BmB,IAApCouB,EAAsBvL,WACtBhkB,EAAYhT,KAAOuiC,EAAsBvL,UAAUh3B,GAChD,KACA,cAACunC,GAAA,EAAD,CACE91C,UAAU,OADZ,SAGE,cAACF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACNxT,MAAM,gBAHV,SAKI,4BAEQ+xC,EAAcC,cAAcsC,oBAA5B,qBACoBvC,EAAcv0B,MAAMkQ,YADxC,+BAEqBqkB,EAAcrvB,OAAgBihB,UAFnD,YAEiEoO,EAAcrvB,OAAgBkhB,gBASnHhmB,GAAWwD,GACL,KACCtS,GAAeijC,EAAcC,eAE9B,cAAC2D,GAAA,EAAD,CACE91C,UAAU,OADZ,SAGE,cAAC,GAAD,CACI0N,IACIsQ,GAAOwE,4BAAP,UAAmCnB,EAAoBktB,wBAAvD,QAA2E,KAAM,CAAC5rB,KAAMuvB,EAAcC,cAAc5jC,KAExHwO,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACI,eAACl0C,EAAA,EAAD,CACIR,QAAQ,WACRU,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAHhC,UAKI,cAACixC,GAAA,EAAD,CACIrxC,SAAS,UAEb,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,QATd,cAdV,UAmClB,cAACxQ,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAKSu+B,EAAcC,cAAc1jC,MAAMyoC,aAAnC,cAEUC,OAAOjF,EAAcC,cAAc1jC,MAAMyoC,aAAa3sC,QAAQ,IAAI6sC,kBADtE,OAOlB,cAACzxC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,eAACiwC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,gCAIqB1K,GAAqBipC,EAAcC,cAAc1jC,MAAM4oC,eAE5E,cAACvB,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAKSu+B,EAAcC,cAAc1jC,MAAMylB,YAAnC,uBAEsBjrB,GAAqBipC,EAAcC,cAAc1jC,MAAMylB,cADvE,8BAQtB,cAACvuB,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAKQ1E,GAAeijC,EAAcC,eACvB,QACAjjC,GAAyBgjC,EAAcC,eACvC,yCACApjC,GAA0BmjC,EAAcC,eACpC1iC,GAA2ByiC,EAAcC,eACrC,qBACA,OACJ/iC,GAA4C8iC,EAAcC,eACtD,uCACA,eAtLrBD,EAAcC,cAAc5jC,OAzB3C,cAACm4B,GAAA,EAAD,UACE,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAACiwC,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACXl/B,OAAO,QAJX,SAMI,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,qFAbd,OA4NlB,cAACszB,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CACIC,mBAAoB,CAAC,EAAG,GAAI,IAC5BC,MAAO0J,EAAsBsB,6BAA6BzoC,OAC1D68B,YAAasK,EAAsBtK,YACnCD,KAAMuK,EAAsB0B,YAC5BnL,oBAAqB,CACjB,aAAc,iBAElBC,oBAAqB,CACjB,aAAc,aAElBC,YAAa,CACTC,QAAQ,GAEZC,aAAc/I,EACdgJ,oBAAqB5I,iB,GAhuBvBt+B,aAyuBXC,gBAhwBS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBw+B,4BAA6B52C,EAAM42C,4BACnCj2B,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3BwvB,sBAAuBpwC,EAAMowC,0BAIV,SAAClwC,GACxB,MAAO,CACHgtC,QAAS,SAACx/B,GAAD,OAAyBxN,ENhDC,SAACwN,GACxC,gDAAO,WAAOxN,EAAoBwP,GAA3B,4BAAA1F,EAAA,yDACG6sC,EAAmBnnC,IAAW0gC,sBAAsBvL,UACtDiS,GAA8B,OACT90B,IAArB60B,OACa70B,IAATtU,IACAopC,GAAqB,QAGZ90B,IAATtU,EACImpC,EAAiBhpC,KAAOH,EAAKG,KAC7BipC,GAAqB,GAGzBA,GAAqB,GAIzBA,EAjBD,oBAkBOttB,EAA6B,CAC/BrpB,KAAMovC,GAAkBmD,aACxBhlC,KAAMA,EACNuT,wBAAoBe,EACpBwwB,kBAAcxwB,GAtBnB,UA0BStU,EA1BT,kCA2BkD,IAAIiZ,IAAMuB,QAAQ,MACvD5D,GAAUc,uBAAuBjZ,QAAQ,OAAQuB,EAAKG,KA5BnE,UA2BekpC,EA3Bf,OA6Be91B,EAA0C81B,EAA2BtsC,KAC3E+e,EAAOvI,mBAAqBA,IAEtB+1B,EAAiCr6B,GAAQjP,MAEvBspC,EAAiBh2B,WAlClD,mCAmC6C,IAAI0sB,IAAkBuJ,cAnCnE,QAmCmBC,EAnCnB,OAoCa1tB,EAAOgpB,aAAe0E,EAAkBzsC,KApCrD,wBAsCa+e,EAAOgpB,aAAevxB,EAAmBlJ,KAAI,SAAAsJ,GAAiB,OAAIA,EAAkBpE,SAtCjG,eAyCK/c,EAASspB,GAzCd,kBA0CYtpB,EAASiwC,OA1CrB,yCA4CK3mB,EAAO5e,MAAQ,KAAMge,WA5C1B,kBA6CY1oB,EAASspB,IA7CrB,0DAAP,wDM+C+C0jB,CAAQx/B,KACnDyiC,YAAa,kBAAMjwC,EAASiwC,OAC5B4E,cAAe,SAACn8B,GAAD,OAAgB1Y,EN2FU,SAAC0Y,GAC9C,OAAO,SAAC1Y,EAAoBwP,GACxB,IAAM9C,EAAOgM,EAAMyD,OAAOzP,KACpBuK,EAAQyB,EAAMyD,OAAOlF,MAO3BjX,EALoC,CAChCC,KAAMovC,GAAkBsD,cACxBjmC,KAAMA,EACNuK,MAAOA,IAGE,eAATvK,GACA1M,EAASiwC,OMvG2B4E,CAAcn8B,KACtDw4B,mBAAoB,kBAAMlxC,EAASkxC,OACnC4D,4BAA6B,kBAAM90C,GNiIhC,SAACA,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAMovC,GAAkByD,kCMlI5BhV,WAAY,SAACplB,EAAYitB,GAAb,OAA8B3lC,ENuIJ,SAAC0Y,EAAYitB,GACvD,OAAO,SAAC3lC,EAAoBwP,GAKxB,OAAOxP,EAJ0B,CAC7BC,KAAMovC,GAAkB0D,WACxBpN,KAAMA,KM3IyC7H,CAAWplB,EAAOitB,KACrEzH,kBAAmB,SAACxlB,GAAD,OAAgB1Y,ENgJU,SAAC0Y,GAClD,OAAO,SAAC1Y,EAAoBwP,GAKxB,OAAOxP,EAJiC,CACpCC,KAAMovC,GAAkB4D,kBACxBrN,YAAazH,SAASzlB,EAAMyD,OAAOlF,MAAO,OMpJFinB,CAAkBxlB,KAC9Dq8B,UAAW,kBAAM/0C,EN0JrB,yCAAO,WAAOA,EAAoBwP,GAA3B,sBAAA1F,EAAA,yDACG6W,EAAcnR,IAAWkR,oBAAoBC,YAC7CkxB,EAAeriC,IAAW0gC,sBAAsB2B,aAEjDlxB,EAJF,oDAQGE,EAA6BpE,GAAQkE,GARxC,qDAcCkxB,EAdD,wDAkBH7xC,EAAS,CACLC,KAAMovC,GAAkB8D,eAGtB1C,EAA6C,CAC/CxwC,KAAMovC,GAAkB+D,sBAvBzB,qBA2BO,IAAI9D,IAAkByF,UACxBl0B,EAAaC,gBACPgB,EACA,CAAC/E,MAAO8D,EAAakK,KAAM8lB,QAASpD,GAA4BuD,QA9B3E,iCAgCQhxC,EAASywC,IAhCjB,0CAkCCA,EAAe/lC,MAAQ,KAAMge,WAlC9B,kBAmCQ1oB,EAASywC,IAnCjB,2DAAP,6DMmlBW5wC,CAA6C80C,ICh1BtDsC,G,4JACF,WACI,MAGIj5C,KAAKC,MAFLmR,EADJ,EACIA,SACA8I,EAFJ,EAEIA,gBAGJ,OAAO,eAACg9B,GAAA,EAAD,CACHG,QAAQ,OACRgB,cAAc,SACda,SAAS,OACTrB,SAAS,OACTsB,UAAW,EACXC,YAAa/zC,GACbkyC,QAASlyC,GACTiyC,WAAW,SACX//B,MAAM,OACNnW,UAAU,QACVD,MAAO,CACHiQ,cAAuB0S,IAAb1S,EAAyBA,EAAY8I,EAAgBlF,WAAakF,EAAgBm/B,gBAAkB,WAAa,QAC3HC,YAAqBx1B,IAAb1S,EAAyB,EAAI,QAbtC,UAgBH,eAAC8lC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdV,eAAe,SAHnB,UAKI,cAAC,GAAD,CACIp2C,MAAM,QACN4c,OAAO,SACPs3B,YAAY,UACZC,iBAAiB,EACjB5mC,IAAKsQ,GAAOkD,qBAAqB,cACjCpb,UAAU,WACVsuC,eACI,cAACt0C,EAAA,EAAD,CACIJ,QAAQ,QADZ,4BAQR,cAACo2C,GAAA,EAAD,CACI3/B,MAAO,KAGX,cAAC,GAAD,CACIhW,MAAM,QACN4c,OAAO,SACPs3B,YAAY,UACZC,iBAAiB,EACjB5mC,IAAKsQ,GAAOkD,qBAAqB,iBACjCpb,UAAU,WACVsuC,eACI,cAACt0C,EAAA,EAAD,CACIJ,QAAQ,QADZ,iCASZ,cAACo2C,GAAA,EAAD,CACIqC,QAAQ,OACRhiC,MAAO2C,EAAgBlF,SAAW,OAAS,QAF/C,SAII,cAACsC,EAAA,EAAD,MAGJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SACXK,eAAe,SAJnB,UAMI,cAACz+B,GAAA,EAAD,CACI4f,IAAI,mBACJ3f,IAAK4f,EAAQ,KAAsBC,QACnC73B,MAAO,CACHoW,MAAO,OACPa,OAAQ,GACRqB,UAAW,aAGnB,cAACy9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,eAACrW,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,oCAKI,uBALJ,0E,GA1FKc,aAuGNC,gBA7GS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,mBA2GhBrY,CAAyBo3C,ICkDlCO,G,4MAiCFpS,SAAW,WACP,MAeI,EAAKnnC,MAdL2qC,EADJ,EACIA,aAEA6O,EAHJ,EAGIA,sBACAC,EAJJ,EAIIA,yBACAC,EALJ,EAKIA,8BAEAC,EAPJ,EAOIA,0CACAC,EARJ,EAQIA,yCACAC,EATJ,EASIA,8CAEAC,EAXJ,EAWIA,yBACAC,EAZJ,EAYIA,sBACAC,EAbJ,EAaIA,2CACA7K,EAdJ,EAcIA,uCAIAxE,IAEK6O,GlDtDU,IkDsDe7O,EAAa3oC,MACvC83C,EAAyBnP,EAAaj7B,IAIrCiqC,GlD5DY,IkD4DiChP,EAAa3oC,MAC3Dg4C,EAA2CrP,EAAaj7B,KAK5D8pC,IAEKC,GAA6BC,GlDnEnB,IkDmEoD/O,EAAa3oC,MAC5E+3C,KAKJJ,IAEKC,GAA6CC,GlD5EjC,IkD4EkFlP,EAAa3oC,MAC5GmtC,M,EAQZ8K,eAAiB,SAAAj4C,GAAI,OAAI,SAAAyY,GACrB,EAAKza,MAAMk6C,gBAAgBl4C,EAAM,CAACm4C,SAAU1/B,EAAMyD,OAAOzP,KAAMuK,MAAOyB,EAAMyD,OAAOlF,U,EAMvFohC,uCAAyC,SAAAC,GAAS,OAAI,SAAA5/B,GAClD,EAAKza,MAAMo6C,uCAAuCC,EAAW5/B,K,EAMjE6/B,2CAA6C,SAAA7/B,GACzC,EAAKza,MAAMs6C,2CAA2C7/B,EAAMyD,OAAOq8B,U,EAMvEC,mBAAqB,SAACt6C,EAAMqP,GAAP,OAAgB,SAAA6K,GACjC,EAAKpa,MAAMw6C,mBAAmBt6C,EAAMka,EAAO7K,EAAM,Q,EASrDkrC,uBAAyB,SAAAv6C,GAAI,OAAI,SAAA8M,GAC7B,EAAKhN,MAAMy6C,uBAAuBv6C,EAAM8M,K,EAU5C0tC,mBAAqB,SAACx6C,EAAMqP,GAAP,OAAgB,SAAAvC,GACjC,EAAKhN,MAAM06C,mBAAmBx6C,EAAM8M,EAAOuC,EAAM,Q,EAMrDg/B,YAAc,SAACruC,EAAMqP,GACjB,EAAKvP,MAAMuuC,YAAYruC,EAAMqP,EAAM,O,EA0zBvCorC,iCAAmC,WAC/B,MAgBI,EAAK36C,MAfLiP,EADJ,EACIA,gBAEAyT,EAHJ,EAGIA,YAEAioB,EALJ,EAKIA,aACAiQ,EANJ,EAMIA,mCACAhB,EAPJ,EAOIA,yCACAiB,EARJ,EAQIA,mDACAC,EATJ,EASIA,mDACAC,EAVJ,EAUIA,mDACAC,EAXJ,EAWIA,gDAEAC,EAbJ,EAaIA,yDACAC,EAdJ,EAcIA,8DACAC,EAfJ,EAeIA,sCAGJ,OlDn9BmB,IkDm9BfxQ,EAAa3oC,KACN,KAGN43C,EA+BDgB,EAEI,eAAC,IAAD,CACIj6C,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UACNwT,MAAM,OAHV,0CAQA,eAAC7T,EAAA,EAAD,CACIJ,QAAQ,YACRiU,MAAM,OACN5T,MAAO,CACHC,UAAW,GACXoW,aAAc,IALtB,UlDlgCM,IkD0gCDmL,EAAY1gB,KAA+B,oBAAsB,WARtE,+BAUO,4BlDl/BsB,IkDk/BlB44C,EAAmC54C,KAAsD,2BAA6B,2CAVjI,MAWQga,GAA2B4+B,EAAmCQ,YAXtE,UAkBR,eAAC,IAAD,CACIz6C,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,QACNwT,MAAM,OACNwmB,WAAS,EAJb,0CASA,cAACr6B,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACNwmB,WAAS,EAHb,SlDhiCU,IkDsiCF5Y,EAAY1gB,KAER,yFAEA,uJAIZ,eAAC61C,GAAA,EAAD,CACIppC,KAAK,gBACLuK,MAAOgiC,EACPn6C,QAAQ,WACRa,OAAO,QACPo2C,MAAO,cAACC,GAAA,EAAD,IACPpgC,SAAUujC,EANd,UAQI,cAAClD,GAAA,EAAD,CACIh/B,MlD5hCuC,EkD2hC3C,6DAKA,cAACg/B,GAAA,EAAD,CACIh/B,MlDliCyB,EkDiiC7B,kDAOJ,eAAC,IAAD,CACIrY,QAAM,EACNQ,UAAW,GACXD,MAAO,CACHm6C,UAAW,IACXC,UAAW,OACXt1C,OAAO,aAAD,OAAe4Q,IACrBX,QAAS,IAPjB,UAWI,cAAChV,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OACNwmB,WAAS,EAHb,SAKI,4BlDxjCyB,IkD0jCjB0f,EAEI,yDAEA,4DlD9jCa,IkDqkCzBA,EAEI,eAAC/5C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN7N,UAAU,OAHd,wKAOI,uBAAK,uBAPT,gCASI,qBACIjF,KAAK,IADT,UAGI,+JAIA,8IAIA,0FAGA,8FAEI,uBACA,qBACIA,KAAK,IADT,UAGI,qEAGA,sEAKR,8HArCR,sDA2CuD,4BAAG,yEAGtD,qBACIA,KAAK,IADT,UAGI,4JAIA,0MAII,qBACIA,KAAK,IADT,UAGI,mHAIA,qMAMA,gPAWhB,eAACf,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN7N,UAAU,OAHd,qKAOI,uBAAK,uBAPT,gCASI,qBACIjF,KAAK,IADT,UAGI,+JAIA,8IAIA,0FAGA,6FAEI,qBACIA,KAAK,IADT,UAGI,qEAGA,uEAKR,8HApCR,wDA0CyD,4BAAG,yEAGxD,qBACIA,KAAK,IADT,UAGI,qKAKA,qIAIA,gOAKA,uLAQhB,cAACqV,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAItB,cAACgkB,GAAA,EAAD,CACIt0B,UAAU,WACVzG,WAAS,EAFb,SAII,eAAC+6C,GAAA,EAAD,CACIC,KAAK,EADT,UAII,cAACC,GAAA,EAAD,CACIv6C,MAAO,CACHoW,MAAO,QAEXokC,QACI,cAACC,GAAA,EAAD,CACIltC,KAAK,kBACLnN,MAAM,UACN0X,MAAO6hC,EACPN,QAASM,EACTljC,SAAUsjC,IAGlBj6C,MACI,cAACC,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,wJAMR8mC,eAAe,QAInB,cAACH,GAAA,EAAD,CACIv6C,MAAO,CACHoW,MAAO,QAEXokC,QACI,cAACC,GAAA,EAAD,CACIltC,KAAK,kBACLnN,MAAM,UACN0X,MAAO8hC,EACPP,QAASO,EACTnjC,SAAUsjC,IAGlBj6C,MACI,cAACC,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,sHAQJ8mC,eAAe,QAInB,cAACH,GAAA,EAAD,CACIv6C,MAAO,CACHoW,MAAO,QAEXokC,QACI,cAACC,GAAA,EAAD,CACIltC,KAAK,kBACLnN,MAAM,UACN0X,MAAO+hC,EACPR,QAASQ,EACTpjC,SAAUsjC,IAGlBj6C,MACI,cAACC,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,iEAEI,cAAC,GAAD,CACIjG,IAAKsQ,GAAOkD,qBAAqB,cACjCnE,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eAAe,iBATvB,cAYI,cAAC,GAAD,CACI1mC,IAAKsQ,GAAOkD,qBAAqB,iBACjCnE,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eAAe,mBAnBvB,SAyBRqG,eAAe,gBAM/B,eAAC,IAAD,CACIj7C,QAAM,EACNuW,KAAM,EACNC,cAAc,QACdhW,UAAW,GACXoW,aAAc,GALlB,UAOI,cAAClW,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNG,QAAS05C,EACT35C,UACKq5C,IACGC,IACAC,GlD53CN,IkD63CKr4B,EAAY1gB,KARvB,oBlDr3CM,IkDm4CF0gB,EAAY1gB,KAER,cAACf,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,QACN5T,MAAO,CACHC,UAAW,IALnB,2DAWA,WAxbZ,eAAC,IAAD,CACIR,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KADZ,0CAMA,cAAC,IAAD,CACIsW,cAAc,SACdhW,UAAW,GACXoW,aAAc,GAHlB,SAKI,cAAC,aAAD,CACIjW,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,W,EAkbhCilC,sBAAwB,WACpB,MAmBI,EAAK77C,MAlBL0iB,EADJ,EACIA,YAEAioB,EAHJ,EAGIA,aACAmR,EAJJ,EAIIA,WACAlR,EALJ,EAKIA,aAEA/sB,EAPJ,EAOIA,eAEAk+B,EATJ,EASIA,sBACAC,EAVJ,EAUIA,eACAC,EAXJ,EAWIA,gBAEAC,EAbJ,EAaIA,cACAC,EAdJ,EAcIA,2BACAC,EAfJ,EAeIA,6BACAC,EAhBJ,EAgBIA,iCACAC,EAjBJ,EAiBIA,8CACAC,EAlBJ,EAkBIA,sBAIJ,OAAI5R,EAAax3B,gBAGT,cADA,CACC,IAAD,CACIxS,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,8BAMA,eAAC8U,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHC,UAAW,IAHnB,UAMI,cAACmV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACH+U,QAAS,GACTqB,MAAO,QAPf,SAUI,eAAC,IAAD,CACI3W,QAAM,EACNwW,cAAc,SAFlB,UAII,eAAC,IAAD,CACIxW,QAAM,EACN2W,MAAM,OACNH,cAAc,SAHlB,WAMSwzB,EAAax3B,gBAAgBjE,eAAe,SAEzCy7B,EAAax3B,gBAAgBjE,eAAe,UACyD,IAAlGy7B,EAAax3B,gBAAgB/D,KAAKpE,WAAU,SAAAwxC,GAAQ,OAAKA,EAASttC,eAAe,cAGpF,cAACjO,EAAA,EAAD,CACI6T,MAAM,SACNxT,MAAM,gBACNT,QAAQ,QAHZ,SlD/9ClB,IkDo+C0B6hB,EAAY1gB,KAER,yCAEA,2CAIZ,cAAC,IAAD,CACIsV,MAAO,IACPa,OAAQ,IAFZ,SAII,cAACc,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IACIyxB,EAAax3B,gBAAgB/D,KAAKu7B,EAAax3B,gBAAgB/D,KAAKpE,WAAU,SAAAwxC,GAAQ,OAAKA,EAASttC,eAAe,eAAaL,IAEpI3N,MAAO,CACHoW,MAAO,OACP+jC,UAAW,IACX7hC,UAAW,elDz/CzC,IkD+/CckJ,EAAY1gB,KAER,KAEA,cAAC,IAAD,CACIb,UAAW,GADf,SAGI,cAACE,EAAA,EAAD,CACIE,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UACNd,WAAS,EACTiB,QAAS,kBAAM,EAAKzB,MAAMsR,sBrD1qD9C,IqD2qDoBpQ,MAAO,CACHoW,MAAO,KARf,8BAiBhB,eAAC,IAAD,CACI3W,QAAM,EACNQ,UAAW,GACXoW,aAAc,GACdD,MAAM,OACNH,cAAc,SACdjW,MAAO,CACH6V,YAAa,GACbC,aAAc,IARtB,WAYS2zB,EAAax3B,gBAAgBjE,eAAe,UAEzCy7B,EAAax3B,gBAAgBjE,eAAe,WAC4D,IAArGy7B,EAAax3B,gBAAgBuI,MAAM1Q,WAAU,SAAAyxC,GAAS,OAAKA,EAAUvtC,eAAe,cAGvF,cAACjO,EAAA,EAAD,CACI6T,MAAM,SACNxT,MAAM,gBACNT,QAAQ,QAHZ,SlDziDlB,IkD8iD0B6hB,EAAY1gB,KAER,iCAEA,wCAIZ,cAAC,KAAD,CACI6M,IACI87B,EAAax3B,gBAAgBuI,MACzBivB,EAAax3B,gBAAgBuI,MAAM1Q,WAAU,SAAAyxC,GAAS,OAAKA,EAAUvtC,eAAe,eAClFL,IAEVyI,MAAM,OACNa,OAAO,OACPmF,UAAU,EACVD,SAAS,IlD/jD/B,IkDokDcqF,EAAY1gB,KAER,KAEA,cAAC,IAAD,CAAUb,UAAW,GAArB,SACI,cAACE,EAAA,EAAD,CACIR,QAAQ,WACRU,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5B5E,MAAM,UACNG,QAAS,kBAAM,EAAKzB,MAAMib,sBrDzuD7C,IqD0uDmB/Z,MAAO,CACHoW,MAAO,KAPf,iDAiBxB,eAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAOI,cAAC,IAAD,CAAU/V,QAAM,EAAhB,SACI,eAAC46B,GAAA,EAAD,WACI,cAACmhB,GAAA,EAAD,UACI,+CAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,cACL2O,YAAY,qBACZpE,MAAO8iC,EAAW3oC,gBAAgBjE,eAAe,eAAiB4sC,EAAW3oC,gBAAgBwpC,YAAc,GAC3Gj7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MAAOqvC,EAAW3oC,gBAAgBjE,eAAe,gBAA2E,IAAzD4sC,EAAW3oC,gBAAgBwpC,YAAY1vC,OAAOnC,cAK7H,cAACuM,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,eAAC46B,GAAA,EAAD,WACI,cAACmhB,GAAA,EAAD,UACI,sDAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,iBACL2O,YAAY,oCACZpE,MAAO8iC,EAAW3oC,gBAAgBjE,eAAe,kBAAoB4sC,EAAW3oC,gBAAgB0pC,eAAiB,GACjHn7C,OAAO,QACPb,QAAQ,WACRW,SlDxoDd,IkDwoDwBkhB,EAAY1gB,KACtBxB,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,WAK1C,cAACvlC,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CAAU5W,QAAM,EAAhB,SACI,eAAC46B,GAAA,EAAD,WACI,cAACmhB,GAAA,EAAD,UACI,oDAEJ,cAACnB,GAAA,EAAD,UACI,eAAC,IAAD,CAAU56C,QAAM,EAAhB,UACI,cAACwc,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,oBAEtC4sC,EAAW3oC,gBAAgBk3B,iBAAiByS,SAE5C,GAERp7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,qBACgC,IAAvE4sC,EAAW3oC,gBAAgBk3B,iBAAiByS,SAAS7vC,OAAOnC,SAGvE,cAACqS,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,oBAEtC4sC,EAAW3oC,gBAAgBk3B,iBAAiB0S,SAE5C,GAERr7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,MAElC,cAACz/B,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,oBAEtC4sC,EAAW3oC,gBAAgBk3B,iBAAiB2S,SAE5C,GAERt7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,MAElC,eAACxmC,EAAA,EAAD,WACI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,oBAEtC4sC,EAAW3oC,gBAAgBk3B,iBAAiB4S,SAE5C,GAERv7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,qBACgC,IAAvE4sC,EAAW3oC,gBAAgBk3B,iBAAiB4S,SAAShwC,OAAOnC,WAI3E,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,WACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,oBAEtC4sC,EAAW3oC,gBAAgBk3B,iBAAiBz+B,SAASy5B,cAErD,GAER3jC,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,qBACgC,IAAvE4sC,EAAW3oC,gBAAgBk3B,iBAAiBz+B,SAASqB,OAAOnC,wBAU/F,cAACuM,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CAAU5W,QAAM,EAAhB,SACI,eAAC46B,GAAA,EAAD,WACI,cAACmhB,GAAA,EAAD,UACI,kDAEJ,cAACnB,GAAA,EAAD,UACI,eAAC,IAAD,CAAU56C,QAAM,EAAhB,UACI,cAACwc,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,kBAEtC4sC,EAAW3oC,gBAAgBm3B,eAAewS,SAE1C,GAERp7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,mBAC8B,IAArE4sC,EAAW3oC,gBAAgBm3B,eAAewS,SAAS7vC,OAAOnC,SAGrE,cAACqS,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,kBAEtC4sC,EAAW3oC,gBAAgBm3B,eAAeyS,SAE1C,GAERr7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,MAElC,cAACz/B,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,kBAEtC4sC,EAAW3oC,gBAAgBm3B,eAAe0S,SAE1C,GAERt7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,MAElC,eAACxmC,EAAA,EAAD,WACI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,YACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,kBAEtC4sC,EAAW3oC,gBAAgBm3B,eAAe2S,SAE1C,GAERv7C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,mBAC8B,IAArE4sC,EAAW3oC,gBAAgBm3B,eAAe2S,SAAShwC,OAAOnC,WAIzE,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,WACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,kBAEtC4sC,EAAW3oC,gBAAgBm3B,eAAe1+B,SAASy5B,cAEnD,GAER3jC,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,mBAC8B,IAArE4sC,EAAW3oC,gBAAgBm3B,eAAe1+B,SAASqB,OAAOnC,wBAU7F,cAACuM,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKjBsG,EAKO,cAAC,IAAD,UACI,eAAC0d,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACk8C,GAAA,EAAD,UACI,yCAEJ,cAAC7E,GAAA,EAAD,CACIppC,KAAK,SACLuK,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,UAEtC4sC,EAAW3oC,gBAAgB+pC,OAE3B,GAERvlC,SAAU,EAAKsiC,eAAe2C,IAC9B9E,MAAO,cAACC,GAAA,EAAD,IACPr2C,OAAO,QAXX,SAeQmc,EAAes/B,QAAQvjC,KAAI,SAACsjC,EAAQlwC,GAAT,OACvB,cAACgrC,GAAA,EAAD,CAEIh/B,MAAOkkC,EAFX,SAIKA,GAHIlwC,aA3BjC,KAwCR,cAACqK,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CAAU5W,QAAM,EAAhB,SACI,eAAC46B,GAAA,EAAD,CACI9uB,MACIqvC,EAAW3oC,gBAAgBjE,eAAe,cACS,IAAhD4sC,EAAW3oC,gBAAgBiqC,UAAUtyC,OAHhD,UAMI,cAAC4xC,GAAA,EAAD,UACI,4CAGJ,eAACtmC,EAAA,EAAD,CAAKC,WAAS,EAAd,UACI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAOSolC,EAAW3oC,gBAAgBjE,eAAe,aAIvC,cAACs1B,GAAA,EAAD,UAEQsX,EAAW3oC,gBAAgBiqC,UAAUxjC,KAAI,SAACyjC,EAAUrwC,GAAX,OACrC,eAACy3B,GAAA,EAAD,WAGI,cAACG,GAAA,EAAD,UACKyY,IAEL,cAACC,GAAA,EAAD,UACI,cAAClmC,EAAA,EAAD,CACI3V,QAAS,kBAAM,EAAKzB,MAAMu9C,0BAA0BvwC,GAAO,IAD/D,SAGI,cAAC,KAAD,UATHA,QANrB,MAyBH8uC,EAAW3oC,gBAAgBjE,eAAe,cACvC4sC,EAAW3oC,gBAAgBjE,eAAe,cAAgE,IAAhD4sC,EAAW3oC,gBAAgBiqC,UAAUtyC,OAE/F,KAEA,cAACuM,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,SAMlC,cAACjB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,IAIR,cAACJ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAOSslC,EAiBG,eAAC,IAAD,CACIr7C,QAAM,EADV,UAGI,cAACwc,GAAA,EAAD,CACIC,YAAY,wBACZ3O,KAAK,kBACLuK,MAAOijC,EACPz7C,WAAS,EACTK,QAAQ,WACR8W,SAAU,EAAKsiC,eAAe2C,IAC9Bl7C,OAAO,UAGX,eAAC,IAAD,CACIP,UAAW,EACXgW,cAAc,QAFlB,UAII,cAAC9V,EAAA,EAAD,CACIR,QAAQ,WACRU,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,EAAKzB,MAAMw9C,qBACpBt8C,MAAO,CACHgX,YAAa,GANrB,oBAWA,cAAC7W,EAAA,EAAD,CACIR,QAAQ,YACRU,KAAK,QACLD,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAM,EAAKzB,MAAMy9C,2BAA0B,IACpDj8C,SAA4C,IAAlCy6C,EAAgBhvC,OAAOnC,OANrC,uBA3CR,eAACzJ,EAAA,EAAD,CACIR,QAAQ,WACRU,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,EAAKzB,MAAMw9C,qBAJxB,UAMI,cAAC,KAAD,CACI13C,SAAS,QACT5E,MAAO,CACHgX,YAAa,KATzB,4BA6DxB,cAACb,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,eAAC,IAAD,CAAU5W,QAAM,EAAhB,UACI,eAAC46B,GAAA,EAAD,WACI,cAACmhB,GAAA,EAAD,UACI,kDAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,iBACL2O,YAAY,wBACZpE,MACI8iC,EAAW3oC,gBAAgBjE,eAAe,kBAEtC4sC,EAAW3oC,gBAAgBuqC,eAE3B,GAERh8C,OAAO,QACPb,QAAQ,WACRL,WAAS,EACTmX,SAAU,EAAKsiC,eAAe2C,IAC9BnwC,MACKqvC,EAAW3oC,gBAAgBjE,eAAe,mBACwB,IAA5D4sC,EAAW3oC,gBAAgBuqC,eAAezwC,OAAOnC,QACpDgxC,EAAW3oC,gBAAgBjE,eAAe,mBACvC4sC,EAAW3oC,gBAAgBuqC,eAAezwC,OAAOnC,OAAS,IACzDkR,GAAoB8/B,EAAW3oC,gBAAgBuqC,sBAM9D5B,EAAW3oC,gBAAgBjE,eAAe,mBACvC4sC,EAAW3oC,gBAAgBjE,eAAe,mBACqB,IAA5D4sC,EAAW3oC,gBAAgBuqC,eAAezwC,OAAOnC,QAEpDgxC,EAAW3oC,gBAAgBjE,eAAe,mBACvC4sC,EAAW3oC,gBAAgBuqC,eAAezwC,OAAOnC,OAAS,GAC1DkR,GAAoB8/B,EAAW3oC,gBAAgBuqC,gBAGlD,KAEA,cAACz8C,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,OAHV,oCAUZ,eAAC,IAAD,CACIqC,cAAc,QACdhW,UAAW,GAFf,UAII,cAAC,IAAD,CACI+W,YAAa,GADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNG,QAAS,kBAAM,EAAKzB,MAAM29C,kBAAkBf,KAHhD,sBAQJ,cAAC,IAAD,UACI,cAACv7C,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNE,SlDvpEd,IkDypEsBkhB,EAAY1gB,OACR0gB,EAAYG,aACZ+nB,GAEJkR,EAAW3oC,gBAAgBjE,eAAe,gBAA2E,IAAzD4sC,EAAW3oC,gBAAgBwpC,YAAY1vC,OAAOnC,QAC1GgxC,EAAW3oC,gBAAgBjE,eAAe,qBAA8F,IAAvE4sC,EAAW3oC,gBAAgBk3B,iBAAiByS,SAAS7vC,OAAOnC,QAC7HgxC,EAAW3oC,gBAAgBjE,eAAe,qBAA8F,IAAvE4sC,EAAW3oC,gBAAgBk3B,iBAAiB4S,SAAShwC,OAAOnC,QAC7HgxC,EAAW3oC,gBAAgBjE,eAAe,qBAA8F,IAAvE4sC,EAAW3oC,gBAAgBk3B,iBAAiBz+B,SAASqB,OAAOnC,QAC7HgxC,EAAW3oC,gBAAgBjE,eAAe,mBAA0F,IAArE4sC,EAAW3oC,gBAAgBm3B,eAAewS,SAAS7vC,OAAOnC,QACzHgxC,EAAW3oC,gBAAgBjE,eAAe,mBAA0F,IAArE4sC,EAAW3oC,gBAAgBm3B,eAAe2S,SAAShwC,OAAOnC,QACzHgxC,EAAW3oC,gBAAgBjE,eAAe,mBAA0F,IAArE4sC,EAAW3oC,gBAAgBm3B,eAAe1+B,SAASqB,OAAOnC,QACzHgxC,EAAW3oC,gBAAgBjE,eAAe,cAAgE,IAAhD4sC,EAAW3oC,gBAAgBiqC,UAAUtyC,QAC/FgxC,EAAW3oC,gBAAgBjE,eAAe,mBAAiF,IAA5D4sC,EAAW3oC,gBAAgBuqC,eAAezwC,OAAOnC,QAChHgxC,EAAW3oC,gBAAgBjE,eAAe,mBACvC4sC,EAAW3oC,gBAAgBuqC,eAAezwC,OAAOnC,OAAS,IACzDkR,GAAoB8/B,EAAW3oC,gBAAgBuqC,iBAEpDj/B,KAAKE,UAAUgsB,EAAax3B,mBAAqBsL,KAAKE,UAAUm9B,EAAW3oC,iBAElF1R,QAAS,kBAAM,EAAKzB,MAAM49C,yBAAyBhB,KAxBvD,uBlDppEV,IkDmrEMl6B,EAAY1gB,MACR0gB,EAAYG,YACZ+nB,EAcA,KAZA,cAAC3pC,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,QACN5T,MAAO,CACHC,UAAW,IALnB,uGlDvrEV,IkD6sEVuhB,EAAY1gB,KAGR,cADA,CACC,IAAD,CACIrB,QAAM,EADV,UAGI,eAAC,IAAD,CACIA,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UACNJ,MAAO,CACHqW,aAAc,GAJtB,8BlDvtED,IkDiuEKozB,EAAa3oC,KAET,KAEA,cAACoU,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAJ1B,SAMI,cAAC55B,EAAA,EAAD,CACIb,WAAS,EACTuG,UAAWyQ,YAAIxS,GAAakB,mBAC5B5E,MACKy6C,EAAsB8B,6BAEjB,YADA,UAGVh9C,QAAQ,WACRU,KAAK,SACLE,QAAS66C,EACTp7C,MAAO,CACHC,UAAW,GACXoW,aAAc,IAbtB,SAiBSwkC,EAAsB8B,6BAInB,kCAFA,6ClDjwE7B,IkD4wEClT,EAAa3oC,MACV+5C,EAAsB8B,6BAGrB,eAAC,IAAD,CACIl9C,QAAM,EACNQ,UAAW,GAFf,UAKI,cAAC,IAAD,CACIR,QAAM,EADV,SAGI,eAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,UAGI,cAACpB,GAAA,EAAD,UACI,+CAEJ,cAACv/B,GAAA,EAAD,CACIC,YAAY,qBACZ3O,KAAK,cACLuK,MAAO+iC,EAAsB5oC,gBAAgBwpC,YAC7Cn8C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,WAM5D,cAAC1mC,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,eAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,UAGI,cAACpB,GAAA,EAAD,UACI,sDAEJ,cAACv/B,GAAA,EAAD,CACIC,YAAY,oCACZ3O,KAAK,iBACLuK,MAAO+iC,EAAsB5oC,gBAAgB0pC,eAC7Cr8C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,WAM5D,cAAC1mC,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,cAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,SAGI,eAAC5nC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,UAMI,cAACG,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAMI,cAACgmC,GAAA,EAAD,UACI,oDAEJ,cAACsB,GAAA,EAAD,6HAIA,eAACzC,GAAA,EAAD,WAEI,cAAC,IAAD,UACI,cAACp+B,GAAA,EAAD,CACIC,YAAY,oBACZ3O,KAAK,iCACLuK,MAAO+iC,EAAsBkC,+BAA+B5Y,cAC5D7kC,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,IAEhDviB,WAAY,CACRic,eACI,cAAC/b,GAAA,EAAD,CACIvqB,SAAS,QADb,SAGI,cAACiG,EAAA,EAAD,CACI8mC,eAAa,EACbh9C,MAAO,CACHoW,MAAO,GAAIa,OAAQ,IAEvB1W,QAAS,kBAAMy6C,EAAc6B,KALjC,SAOI,cAAC,KAAD,aAQnBhC,EAAsBoC,qCAInB,eAAC,IAAD,CACIx9C,QAAM,EADV,UAGI,cAACwc,GAAA,EAAD,CACIC,YAAY,cACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBk3B,iBAAiByS,SAC9Dt8C,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRp8C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIpD,cAAC5gC,GAAA,EAAD,CACIC,YAAY,aACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBk3B,iBAAiB0S,SAC9Dv8C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIpD,cAAC5gC,GAAA,EAAD,CACIC,YAAY,aACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBk3B,iBAAiB2S,SAC9Dx8C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIpD,eAAC3nC,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACIC,YAAY,cACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBk3B,iBAAiB4S,SAC9Dz8C,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRp8C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,QAIxD,cAACznC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACIC,YAAY,aACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBk3B,iBAAiBz+B,SAASy5B,cACvE7kC,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRp8C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,cA9EhE,aAyFpB,cAAC3nC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAOQqlC,EAAsBqC,sCACnBrC,EAAsBqC,qCAAqC3xC,MAE1D,cAACxL,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,OACN5T,MAAO,CACHC,UAAW,EACXoW,aAAc,GANtB,4JAgBA,KAIHwkC,EAAsBqC,qCAKnBrC,EAAsBqC,qCAAqC3xC,MAEvD,KAEA,cAAC+3B,GAAA,EAAD,CACIz9B,UAAWyQ,YAAIC,GAAO4mC,cAD1B,SAIQtC,EAAsBqC,qCAAqC5xC,mBAAmBoN,KAAI,SAAChN,EAASI,GAAV,OAC9E,cAACy3B,GAAA,EAAD,CACIC,QAAM,EAENjjC,QAAS,kBAAM46C,EAAiC0B,GAA2E/wC,IAH/H,SAKI,cAAC43B,GAAA,EAAD,CACIiM,QAASjkC,KAJRI,QAdzB,KA2BJ+uC,EAAsBoC,qCAElB,KAEA,cAACl9C,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UACNwT,MAAM,OACN/N,UAAWyQ,YAAIC,GAAO6mC,wBACtB78C,QAAS,kBAAM06C,EAA2B4B,KAL9C,iDAgB5B,cAAC1mC,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,cAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,SAGI,eAAC5nC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,UAMI,cAACG,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACgmC,GAAA,EAAD,UACI,sDAKZ,cAACtmC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAAC6kC,GAAA,EAAD,UACI,cAACE,GAAA,EAAD,CACIz6C,MAAM,oCACN46C,eAAe,MACfF,QACI,cAACC,GAAA,EAAD,CACIpB,QAASwB,EAAsBwC,qCAC/Bj9C,MAAM,UACNqW,SAAU,EAAK2iC,qDASnCyB,EAAsBwC,qCAElB,KAEA,cAACnoC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC6kC,GAAA,EAAD,WACI,cAACyC,GAAA,EAAD,6HAKA,cAAC,IAAD,UACI,cAAC7gC,GAAA,EAAD,CACIC,YAAY,oBACZ3O,KAAK,+BACLuK,MAAO+iC,EAAsByC,6BAA6BnZ,cAC1D7kC,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,IAEhDviB,WAAY,CACRic,eACI,cAAC/b,GAAA,EAAD,CACIvqB,SAAS,QADb,SAGI,cAACiG,EAAA,EAAD,CACI8mC,eAAa,EACbh9C,MAAO,CACHoW,MAAO,GAAIa,OAAQ,IAEvB1W,QAAS,kBAAMy6C,EAAc6B,KALjC,SAOI,cAAC,KAAD,aAQnBhC,EAAsB0C,mCAInB,eAAC,IAAD,CACI99C,QAAM,EADV,UAGI,cAACwc,GAAA,EAAD,CACIC,YAAY,cACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBm3B,eAAewS,SAC5Dt8C,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRp8C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIpD,cAAC5gC,GAAA,EAAD,CACIC,YAAY,aACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBm3B,eAAeyS,SAC5Dv8C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIpD,cAAC5gC,GAAA,EAAD,CACIC,YAAY,aACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBm3B,eAAe0S,SAC5Dx8C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIpD,eAAC3nC,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACIC,YAAY,cACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBm3B,eAAe2S,SAC5Dz8C,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRp8C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,QAIxD,cAACznC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACyG,GAAA,EAAD,CACIC,YAAY,aACZ3O,KAAK,WACLuK,MAAO+iC,EAAsB5oC,gBAAgBm3B,eAAe1+B,SAASy5B,cACrE7kC,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRp8C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,cA9EhE,YA2FxBhC,EAAsBwC,qCAElB,KAEA,cAACnoC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAOQqlC,EAAsB2C,oCACnB3C,EAAsB2C,mCAAmCjyC,MAExD,cAACxL,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,OACN5T,MAAO,CACHC,UAAW,EACXoW,aAAc,GANtB,4JAgBA,KAIHwkC,EAAsB2C,mCAKnB3C,EAAsB2C,mCAAmCjyC,MAErD,KAEA,cAAC+3B,GAAA,EAAD,CACIz9B,UAAWyQ,YAAIC,GAAO4mC,cAD1B,SAIQtC,EAAsB2C,mCAAmClyC,mBAAmBoN,KAAI,SAAChN,EAASI,GAAV,OAC5E,cAACy3B,GAAA,EAAD,CACIC,QAAM,EAENjjC,QAAS,kBAAM46C,EAAiC0B,GAAyE/wC,IAH7H,SAKI,cAAC43B,GAAA,EAAD,CACIiM,QAASjkC,KAJRI,QAdzB,KA2BJ+uC,EAAsB0C,mCAElB,KAEA,cAACx9C,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UACNwT,MAAM,OACN/N,UAAWyQ,YAAIC,GAAO6mC,wBACtB78C,QAAS,kBAAM06C,EAA2B4B,KAL9C,iDAiBpC,cAAC1mC,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,eAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,UAGI,cAACpB,GAAA,EAAD,UACI,oDAGJ,eAACtmC,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAMI,cAAC8tB,GAAA,EAAD,UAEQuX,EAAsB5oC,gBAAgBiqC,UAAUxjC,KAAI,SAACyjC,EAAUrwC,GAAX,OAChD,eAACy3B,GAAA,EAAD,WAGI,cAACG,GAAA,EAAD,UACKyY,IAEL,cAACC,GAAA,EAAD,UACI,cAAClmC,EAAA,EAAD,CACI3V,QAAS,kBAAM,EAAKzB,MAAMu9C,0BAA0BvwC,GAAO,IAD/D,SAGI,cAAC,KAAD,UATHA,QAkB0C,IAA3D+uC,EAAsB5oC,gBAAgBiqC,UAAUtyC,OAE5C,KAEA,cAACuM,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,SAMlC,cAACjB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,IAIR,cAACJ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAOSslC,EAiBG,eAAC,IAAD,CACIr7C,QAAM,EADV,UAGI,cAACwc,GAAA,EAAD,CACIC,YAAY,wBACZ3O,KAAK,kBACLuK,MAAOijC,EACPz7C,WAAS,EACTK,QAAQ,WACR8W,SAAU,EAAKsiC,eAAe2C,IAC9Bl7C,OAAO,UAGX,eAAC,IAAD,CACIP,UAAW,EACXgW,cAAc,QAFlB,UAII,cAAC9V,EAAA,EAAD,CACIR,QAAQ,WACRU,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,EAAKzB,MAAMw9C,qBACpBt8C,MAAO,CACHgX,YAAa,GANrB,oBAWA,cAAC7W,EAAA,EAAD,CACIR,QAAQ,YACRU,KAAK,QACLD,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAM,EAAKzB,MAAMy9C,2BAA0B,IACpDj8C,SAA4C,IAAlCy6C,EAAgBhvC,OAAOnC,OANrC,uBA3CR,eAACzJ,EAAA,EAAD,CACIR,QAAQ,WACRU,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,EAAKzB,MAAMw9C,qBAJxB,UAMI,cAAC,KAAD,CACI13C,SAAS,QACT5E,MAAO,CACHgX,YAAa,KATzB,4BA6DxB,cAACb,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,eAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,UAGI,cAACpB,GAAA,EAAD,UACI,kDAEJ,eAAC7E,GAAA,EAAD,CACIppC,KAAK,SACLuK,MAAO+iC,EAAsB5oC,gBAAgB+pC,OAC7CpF,MAAO,cAACC,GAAA,EAAD,IACPr2C,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,IANpD,UASI,cAAC/F,GAAA,EAAD,CAEIh/B,MAAO,OAFX,oCACU,GAMN6E,EAEIA,EAAes/B,QAAQvjC,KAAI,SAACsjC,EAAQlwC,GAAT,OACvB,cAACgrC,GAAA,EAAD,CAAsBh/B,MAAOkkC,EAA7B,SAAsCA,GAAvBlwC,MAGnB,aAMpB,cAACqK,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACI5W,QAAM,EADV,SAGI,eAAC46B,GAAA,EAAD,CACIuiB,UAAQ,EADZ,UAGI,cAACpB,GAAA,EAAD,UACI,kDAEJ,cAACv/B,GAAA,EAAD,CACIC,YAAY,wBACZ3O,KAAK,iBACLuK,MAAO+iC,EAAsB5oC,gBAAgBuqC,eAC7Cl9C,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SACI,EAAKyiC,uCAAuC2D,MAIuB,IAAvEhC,EAAsB5oC,gBAAgBuqC,eAAezwC,OAAOnC,QACzDkR,GAAoB+/B,EAAsB5oC,gBAAgBuqC,gBAEzD,KAEA,cAACz8C,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,OAHV,sCAWhB,cAACuC,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,MAKtB,cAAC,IAAD,CACIA,aAAc,GACdD,MAAM,OACNH,cAAc,SAHlB,SAKI,eAACf,EAAA,EAAD,CACIlV,MAAO,CACHoW,MAAO,QAFf,UAMI,cAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACH+U,QAAS,IANjB,SASI,eAAC,IAAD,CACItV,QAAM,EACN2W,MAAM,OACNH,cAAc,SAHlB,UAKI,cAAC,IAAD,CACIpQ,UAAWyQ,YAAIC,GAAOknC,yBACtBl9C,QAAS,kBAAM,EAAKzB,MAAMsR,sBrDvwGvC,IqDqwGS,SAII,cAACrQ,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,8CAQCinC,EAAsB6C,iBAInB,cAAC,IAAD,CACItnC,MAAO,IACPa,OAAQ,IACRhX,UAAW,GAHf,SAKI,cAAC8X,GAAA,EAAD,CACIC,IAAKC,OAAOC,IAAIC,gBAAgB0iC,EAAsB6C,kBACtDtlC,eAAa,EACbC,WAAS,EACTrY,MAAO,CACHm6C,UAAW,IACX/jC,MAAO,OACPkC,UAAW,kBAdvB,UAuBhB,cAAClD,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACH+U,QAAS,IANjB,SASI,eAAC,IAAD,CACItV,QAAM,EACN2W,MAAM,OACNH,cAAc,SAHlB,UAKI,eAAC,IAAD,CACIF,cAAc,SADlB,UAGI,cAAC,IAAD,CACIlQ,UAAWyQ,YAAIC,GAAOknC,yBACtBl9C,QAAS,kBAAM,EAAKzB,MAAMib,sBrD1zG1C,IqDwzGY,SAII,cAACha,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,oDAQJ,cAAC+pC,GAAA,EAAD,CACIC,QAAS,CAAC,QAAS,SACnBC,UAAU,MACVC,MAAI,EACJC,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAE,cADN,yFALR,SAYI,cAAC,KAAD,CACI5J,SAAS,UACT5E,MAAO,CACHwE,WAAY,GACZpE,MAAOsV,WAMlBmlC,EAAsBoD,kBAInB,cAAC,IAAD,CACIh+C,UAAW,GADf,SAGI,cAAC,KAAD,CACI0N,IACyD,kBAA7CktC,EAAsBoD,kBAE1BpD,EAAsBoD,kBAEtBhmC,OAAOC,IAAIC,gBAAgB0iC,EAAsBoD,mBAEzD7hC,UAAU,EACVD,SAAS,EACT/F,MAAM,OACNa,OAAO,WAhBf,eAyBxB,eAAC,IAAD,CACIjB,KAAM,EACNC,cAAc,QACdhW,UAAW,GACXoW,aAAc,GAJlB,UAMI,cAAC,IAAD,CACIW,YAAa,GADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNG,QAAS26C,EAHb,sBAQJ,cAAC,IAAD,UACI,cAAC/6C,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNG,QAAS86C,EACT/6C,SAAU,EAAK49C,+BAJnB,0BAYZ,QAMZ,eAAC,IAAD,CACIz+C,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,8BAMA,cAACL,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,SACN5T,MAAO,CACHC,UAAW,IALnB,yD,EAqBpBi+C,6BAA+B,WAC3B,MAGI,EAAKp/C,MAFL2qC,EADJ,EACIA,aACAoR,EAFJ,EAEIA,sBAIJ,GlDnyGmB,IkDmyGfpR,EAAa3oC,MACb,GAAwE,IAApE+5C,EAAsB5oC,gBAAgBwpC,YAAY1vC,OAAOnC,QACiB,IAAvEixC,EAAsB5oC,gBAAgB0pC,eAAe5vC,OAAOnC,QACsB,IAAlFixC,EAAsB5oC,gBAAgBk3B,iBAAiByS,SAAS7vC,OAAOnC,QACW,IAAlFixC,EAAsB5oC,gBAAgBk3B,iBAAiB4S,SAAShwC,OAAOnC,QACW,IAAlFixC,EAAsB5oC,gBAAgBk3B,iBAAiBz+B,SAASqB,OAAOnC,SAErEixC,EAAsBwC,uCAE6D,IAAhFxC,EAAsB5oC,gBAAgBm3B,eAAewS,SAAS7vC,OAAOnC,QACc,IAAhFixC,EAAsB5oC,gBAAgBm3B,eAAe2S,SAAShwC,OAAOnC,QACW,IAAhFixC,EAAsB5oC,gBAAgBm3B,eAAe1+B,SAASqB,OAAOnC,SAGlB,IAA3DixC,EAAsB5oC,gBAAgBiqC,UAAUtyC,QACC,SAAjDixC,EAAsB5oC,gBAAgB+pC,QACiC,IAAvEnB,EAAsB5oC,gBAAgBuqC,eAAezwC,OAAOnC,QAC3DixC,EAAsB5oC,gBAAgBuqC,eAAezwC,OAAOnC,OAAS,IACjEkR,GAAoB+/B,EAAsB5oC,gBAAgBuqC,gBAGlE,OAAO,OAIV,GlD7zGgB,IkD6zGZ/S,EAAa3oC,KAAiC,CACnD,IAAI+5C,EAAsB8B,6BAwBtB,OAAO,EAvBP,GAAwE,IAApE9B,EAAsB5oC,gBAAgBwpC,YAAY1vC,OAAOnC,QACiB,IAAvEixC,EAAsB5oC,gBAAgB0pC,eAAe5vC,OAAOnC,QACsB,IAAlFixC,EAAsB5oC,gBAAgBk3B,iBAAiByS,SAAS7vC,OAAOnC,QACW,IAAlFixC,EAAsB5oC,gBAAgBk3B,iBAAiB4S,SAAShwC,OAAOnC,QACW,IAAlFixC,EAAsB5oC,gBAAgBk3B,iBAAiBz+B,SAASqB,OAAOnC,SAErEixC,EAAsBwC,uCAE6D,IAAhFxC,EAAsB5oC,gBAAgBm3B,eAAewS,SAAS7vC,OAAOnC,QACc,IAAhFixC,EAAsB5oC,gBAAgBm3B,eAAe2S,SAAShwC,OAAOnC,QACW,IAAhFixC,EAAsB5oC,gBAAgBm3B,eAAe1+B,SAASqB,OAAOnC,SAGlB,IAA3DixC,EAAsB5oC,gBAAgBiqC,UAAUtyC,QACC,SAAjDixC,EAAsB5oC,gBAAgB+pC,QACiC,IAAvEnB,EAAsB5oC,gBAAgBuqC,eAAezwC,OAAOnC,QAC3DixC,EAAsB5oC,gBAAgBuqC,eAAezwC,OAAOnC,OAAS,IACjEkR,GAAoB+/B,EAAsB5oC,gBAAgBuqC,gBAGlE,OAAO,EAOnB,OAAO,G,uDAv1GX,WACI39C,KAAKonC,a,gCAGT,SAAmBxM,EAAWC,EAAWhnB,GACrC,MAII7T,KAAKC,MAHLy5C,EADJ,EACIA,yBAEA4F,EAHJ,EAGIA,uCAGJt/C,KAAKonC,WAEDsS,GACA4F,M,kCAIR,YAKIC,EAFIv/C,KAAKC,MADLs/C,2C,oBAqHR,WAAU,IAAD,OACL,EAQIv/C,KAAKC,MAPL2iB,EADJ,EACIA,cACAmV,EAFJ,EAEIA,sBAEApV,EAJJ,EAIIA,YACAioB,EALJ,EAKIA,aACAmR,EANJ,EAMIA,WACAlR,EAPJ,EAOIA,aAGJ,OAAK9S,GAMApV,GAAgBioB,GAAiBmR,EAKlC,eAAC5lC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,UAMI,eAACG,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,UAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IANjB,SASI,eAAC,IAAD,CACIkB,cAAc,QACdF,cAAc,SAFlB,UAII,cAAC,IAAD,CACIwhB,GACI9V,EAEI8P,GAAoBzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,UAAW8tC,EAAWpsC,IAE3F+iB,GAAsCzkB,QAAQ,UAAW8tC,EAAWpsC,IAE5EwO,OAAQwE,EAAYhT,KAAOi7B,EAAaj7B,GAAK,GAAK,SAClD3I,UAAWyQ,YAAIxS,GAAaO,uDAThC,SAWI,eAAClE,EAAA,EAAD,CACI0F,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UAHV,UAKI,cAAC,KAAD,CACIJ,MAAO,CACHgX,YAAa,KlD3M/B,IkD+McwK,EAAY1gB,KAER,eAEA,uBAIhB,cAAC68C,GAAA,EAAD,CACIC,QAAS,CAAC,QAAS,SACnBC,UAAU,SACVC,MAAI,EACJC,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAE,iBADN,SlD5NV,IkDgOkBgT,EAAY1gB,KAER,uJAEA,uCAbpB,SAiBI,cAAC,KAAD,CACI8D,SAAS,QACT5E,MAAO,CACHwE,WAAY,GACZpE,MAAOsV,aAO3B,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,SAKR,eAACjB,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,UAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IALjB,SAQI,eAAC,IAAD,CACItV,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,8BAOA,eAAC8U,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHC,UAAW,IAHnB,UAOI,cAACmV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EACNwW,cAAc,SACdjW,MAAO,CACH+U,QAAS,IAJjB,WAQS00B,EAAap3B,gBAEVo3B,EAAap3B,iBAC8F,IAAxGo3B,EAAap3B,eAAevI,WAAU,SAAAuI,GAAc,OAAKA,EAAerE,eAAe,cAG1F,cAAC,GAAD,CACI+1B,UAAW0F,EAAa1F,UACxBC,SAAUyF,EAAazF,SACvB5tB,MAAO,IACPa,OAAQ,IACRgtB,YAAY,OAGhB,cAAC,IAAD,CACI7tB,MAAO,IACPa,OAAQ,IAFZ,SAII,cAACc,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IACIyxB,EAAap3B,eACTo3B,EAAap3B,eAAevI,WAAU,SAAAuI,GAAc,OAAKA,EAAerE,eAAe,eACrFL,IAEV3N,MAAO,CACHoW,MAAO,OACP+jC,UAAW,IACX7hC,UAAW,elDxU7C,IkD8UkBkJ,EAAY1gB,KAER,KAEA,cAAC,IAAD,CACIb,UAAW,GACXoW,aAAc,GAFlB,SAII,cAAClW,EAAA,EAAD,CACIE,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UACNG,QAAS,kBAAM,EAAKzB,MAAMsR,sBrDxfvC,IqDyfapQ,MAAO,CACHoW,MAAO,KAPf,2CAiBpB,eAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,UAMI,eAACN,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GACrBr3B,MAAO,CACHqW,aAAc,IALtB,SAQI,eAACgkB,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACk8C,GAAA,EAAD,UACI,wCAEJ,cAAC7E,GAAA,EAAD,CACIppC,KAAK,QACLuK,MAAO8iC,EAAWnvB,MAClBhV,SAAU5X,KAAKk6C,eAAe2C,IAC9B9E,MACI,cAACC,GAAA,EAAD,IAEJr2C,OAAO,QAPX,SAUQiN,GAAqBiL,KAAI,SAAC+S,EAAO3f,GAAR,OACrB,cAACgrC,GAAA,EAAD,CAAsBh/B,MAAO2T,EAA7B,SAAqCA,GAAtB3f,aAQnC,cAACsJ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,KAMzB,cAACjiB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,GAAIC,MAAO,GAJ1B,SAMI,cAAClhB,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,QAM1B,cAACjB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GACrBr3B,MAAO,CACHqW,aAAc,IANtB,SASI,eAACgkB,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACk8C,GAAA,EAAD,UACI,6CAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,YACL2O,YAAY,mBACZpE,MAAO8iC,EAAW7W,UAClBvjC,OAAO,QACPb,QAAQ,WACR8W,SAAU5X,KAAKk6C,eAAe2C,IAC9BnwC,MAA8C,IAAvCqvC,EAAW7W,UAAUh4B,OAAOnC,cAM/C,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GACrBr3B,MAAO,CACHqW,aAAc,IANtB,SASI,eAACgkB,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACk8C,GAAA,EAAD,UACI,4CAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,kBACZpE,MAAO8iC,EAAW5W,SAClBxjC,OAAO,QACPb,QAAQ,WACR8W,SAAU5X,KAAKk6C,eAAe2C,IAC9BnwC,MAA6C,IAAtCqvC,EAAW5W,SAASj4B,OAAOnC,cAM9C,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,GAAIC,MAAO,GAJ1B,SAMI,cAAClhB,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,QAM1B,cAACjB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,GAAIC,MAAO,GACtBr3B,MAAO,CACHqW,aAAc,IANtB,SASI,eAACgkB,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACk8C,GAAA,EAAD,UACI,wCAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,QACL2O,YAAY,cACZpE,MAAO8iC,EAAW/uB,MAClBrrB,OAAO,QACPb,QAAQ,WACR8W,SAAU5X,KAAKk6C,eAAe2C,IAC9Bp7C,UAAU,EACViL,MAA0C,IAAnCqvC,EAAW/uB,MAAM9f,OAAOnC,cAM3C,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,GAAIC,MAAO,GAJ1B,SAMI,cAAClhB,EAAA,EAAD,CACInW,MAAO,CACHC,UAAW,GACXoW,aAAc,QAM1B,eAACjB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,GAAIC,MAAO,GACtBr3B,MAAO,CACHqW,aAAc,IANtB,UASI,eAACgkB,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACk8C,GAAA,EAAD,UACI,2CAEJ,cAACv/B,GAAA,EAAD,CACI1O,KAAK,WACL2O,YAAY,8BACZpE,MAAO8iC,EAAW5sC,eAAe,YAAc4sC,EAAWyD,SAAW,GACrE79C,OAAO,QACPb,QAAQ,WACR8W,SAAU5X,KAAKk6C,eAAe2C,IAC9BnwC,OAAQuP,GAAyB8/B,EAAWyD,eAIhDvjC,GAAyB8/B,EAAWyD,UAEhC,KAEA,cAACvB,GAAA,EAAD,CACIj3C,UAAWyQ,YAAIxS,GAAamB,YADhC,wCAShB,eAAC,IAAD,CACIgR,cAAc,QACdhW,UAAW,GAFf,UAII,cAAC,IAAD,CACI+W,YAAa,GADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNG,QAAS,kBAAM,EAAKzB,MAAM29C,kBAAkBf,KAHhD,sBAQJ,cAAC,IAAD,UACI,cAACv7C,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNE,SlDtlBtB,IkDwlB8BkhB,EAAY1gB,OACR0gB,EAAYG,aACZ+nB,GAG+B,IAAvCkR,EAAW7W,UAAUh4B,OAAOnC,QACa,IAAtCgxC,EAAW5W,SAASj4B,OAAOnC,QAG1BgxC,EAAWnvB,QAAUge,EAAahe,OAC/BmvB,EAAW7W,YAAc0F,EAAa1F,WACtC6W,EAAW5W,WAAayF,EAAazF,UACrC4W,EAAW/uB,QAAU4d,EAAa5d,QAEhC4d,EAAa4U,UAAYzD,EAAWyD,UAAYzD,EAAWyD,WAAa5U,EAAa4U,WAEpFzD,EAAWyD,WAAa5U,EAAa4U,UAEtCzD,EAAWyD,WAAa5U,EAAa4U,WAAavjC,GAAyB8/B,EAAWyD,WAEtFzD,EAAWyD,UAAY5U,EAAa4U,WAAavjC,GAAyB8/B,EAAWyD,WAIlG99C,QAAS,kBAAM,EAAKzB,MAAM49C,yBAAyBhB,KA7BvD,uBlDnlBlB,IkDunBcl6B,EAAY1gB,MACR0gB,EAAYG,YACZ+nB,EAcA,KAZA,cAAC3pC,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,QACN5T,MAAO,CACHC,UAAW,IALnB,yGAoBxB,cAACmV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACHC,UAAW,IANnB,SASI,cAACkW,EAAA,EAAD,SAKR,eAACjB,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,UAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IALjB,SASQlW,KAAK87C,0BAKb,cAACvlC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,SlDzrBK,IkD+rBTszB,EAAa3oC,KAET,KAEA,eAACoU,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,UAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH6V,YAAa,GACbC,aAAc,GACdH,WAAY,GACZC,cAAe,IATvB,SAaQ/W,KAAK46C,qCAKb,cAACrkC,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GAHR,SAKI,cAACW,EAAA,EAAD,SlD9tBN,IkDquBNqL,EAAY1gB,KAER,KAEA,eAACoU,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,UlD1uBG,IkDivBK+zB,EAAa3oC,KAET,KAEA,cAACsU,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IALjB,SAQI,eAAC,IAAD,CACItV,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,iCAOA,cAAC,IAAD,CACIX,QAAM,EACNQ,UAAW,GAFf,SAII,cAAC,GAAD,CACIw1C,gBAAiBhM,WlD5wB1C,IkDoxBKA,EAAa3oC,KAET,KAEA,cAACsU,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GACJxV,MAAO,CACHC,UAAW,IALnB,SAQI,cAACkW,EAAA,EAAD,SlD/xBd,IkDm4BNqL,EAAY1gB,KAER,KAEA,cAACoU,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,SAMI,eAACN,EAAA,EAAD,CACIC,GAAI,GACJE,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH+U,QAAS,IALjB,UAQI,cAAC,IAAD,CACItV,QAAM,EADV,SAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,0BAQJ,cAAC,IAAD,CACIX,QAAM,EACNQ,UAAW,GAFf,SAII,cAAC,GAAD,WAMpB,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,GAAD,CACIvF,SAAS,oBA9xBlB,S,GAvJGxP,aA61GPC,gBA38GS,SAAAC,GACpB,MAAO,CAEH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBAEnDpV,YAAa7gB,EAAM2P,KAAKjC,KAExBsO,eAAgBhc,EAAM+b,qBAAqBC,eAG3Ck+B,sBAAuBl6C,EAAMk6C,sBAI7BpR,aAAc9oC,EAAM6oC,SAASC,aAC7BmR,WAAYj6C,EAAM6oC,SAASoR,WAC3BlR,aAAc/oC,EAAM6oC,SAASE,aAI7B+O,0CAA2C93C,EAAMmtC,yCAAyChkB,OAC1F4vB,mCAAoC/4C,EAAMmtC,yCAAyC4L,mCACnFhB,yCAA0C/3C,EAAMmtC,yCAAyC4K,yCACzFC,8CAA+Ch4C,EAAMmtC,yCAAyC6K,8CAC9FgB,mDAAoDh5C,EAAMmtC,yCAAyCwQ,gBACnG1E,mDAAoDj5C,EAAMmtC,yCAAyCyQ,gBACnG1E,mDAAoDl5C,EAAMmtC,yCAAyC0Q,gBACnG1E,gDAAiDn5C,EAAMmtC,yCAAyC2Q,cAIhGnG,sBAAuB33C,EAAMusC,eAAepjB,OAC5C40B,mBAAoB/9C,EAAMusC,eAAeA,eACzCqL,yBAA0B53C,EAAMusC,eAAeyR,qBAC/CnG,8BAA+B73C,EAAMusC,eAAe0R,0BAIpDC,2BAA4Bl+C,EAAM0sC,YAAYyR,kBAAkB5R,eAChE6R,uBAAwBp+C,EAAM0sC,YAAY0R,uBAC1CC,4BAA6Br+C,EAAM0sC,YAAY2R,4BAI/ClE,eAAgBn6C,EAAM6oC,SAASsR,eAC/BC,gBAAiBp6C,EAAM6oC,SAASuR,oBAMb,SAAAl6C,GACvB,MAAO,CAEHq4C,uCAAwC,SAACC,EAAW5/B,GAAZ,OAAsB1Y,EhBrGrC,SAACs4C,EAAW5/B,GACzC,MAAO,CACHzY,KAAMq4C,EACN8F,UAAW1lC,EAAMyD,OAAOzP,KACxB2xC,WAAY3lC,EAAMyD,OAAOlF,OgBiG8C+kC,CAA+C1D,EAAW5/B,KACjIyhC,cAAe,SAACh8C,GAAD,OAAU6B,EhB1FF,SAAA7B,GAC3B,OAAO,SAAC6B,EAAUwP,GACd,GAAIrR,IAASspC,GAAuC,CAChD,IAAM59B,EAAW2F,IAAWwqC,sBAAsBkC,+BAClD,GAA+B,IAA3BryC,EAASqB,OAAOnC,OAChB,OAEJwI,GACiB1H,GACZO,MAAK,SAAAC,GACFrK,EAAS,CACLC,KAAMynC,GACNr9B,eAGPqI,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMynC,GACNr9B,QAAS,eAIlB,GAAIlM,IAASwpC,GAA6B,CAC7C,IAAM99B,EAAW2F,IAAWwqC,sBAAsByC,6BAClD,GAA+B,IAA3B5yC,EAASqB,OAAOnC,OAChB,OAEJwI,GAAoB1H,GACfO,MAAK,SAAAC,GACFrK,EAAS,CACLC,KAAM2nC,GACNv9B,eAGPqI,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM2nC,GACNv9B,QAAS,YgBqDS2xC,CAA6C79C,KAC/Ei8C,2BAA4B,SAACpnB,GAAD,OAAWhzB,EhBzBL,SAAAgzB,GACtC,OAAIA,IAAU+U,GACH,CACH9nC,KAAM8nC,IAEH/U,IAAUgV,GACV,CACH/nC,KAAM+nC,SAFP,EgBoB6CgU,CAAwDhpB,KACxGulB,2CAA4C,SAACC,GAAD,OAAax4C,EhBbP,SAAAw4C,GACtD,MAAO,CACHv4C,KAAMgoC,GACNuQ,WgBUkEwD,CAAwExD,KAC1I6B,6BAA8B,kBAAMr6C,EhBLjC,CACHC,KAAMioC,MgBKNoS,iCAAkC,SAACtnB,EAAO/nB,GAAR,OAAkBjL,EhBhDZ,SAACgzB,EAAO/nB,GACpD,OAAO,SAACjL,EAAUwP,GACd,GAAIwjB,IAAU6U,GAA8C,CACxD,IAAMyW,EAAkB9uC,IAAWwqC,sBAAsBqC,qCAAqC7xC,aAAaS,GAC3GjL,EAAS,CACLC,KAAM4nC,GACNyW,yBAED,GAAItrB,IAAU8U,GAA4C,CAC7D,IAAMwW,EAAkB9uC,IAAWwqC,sBAAsB2C,mCAAmCnyC,aAAaS,GACzGjL,EAAS,CACLC,KAAM6nC,GACNwW,sBgBoCqDtC,CAA8DhpB,EAAO/nB,KAClIsvC,8CAA+C,kBAAMv6C,EhBAlD,CACHC,KAAMkoC,MgBANqS,sBAAuB,kBAAMx6C,GhBK1B,SAACA,EAAUwP,GACd,IAAMhC,EAAO+wC,OAAOC,OAAO,GAAIhvC,IAAWC,KAAKjC,MACzCqvC,EAAmBrtC,IAAWwqC,sBAAsB6C,iBACpDO,EAAoB5tC,IAAWwqC,sBAAsBoD,kBACvD/U,EAAkBkW,OAAOC,OAAO,GAAIhvC,IAAWwqC,sBAAsB5oC,iBAGrE5B,IAAWwqC,sBAAsBwC,uCAEjCnU,EAAgBE,eAAiBF,EAAgBC,kBAGrDnwB,GACiBnY,EAAUwN,EAAMgC,IAAWwI,UAAW6kC,GAClDzyC,MAAK,WACEgzC,EACAnhC,GACiBjc,EAAUwN,EAAMgC,IAAWuM,UAAWqhC,GAClDhzC,MAAK,WACFg+B,GAA+BpoC,EAAUwN,EAAM66B,MAElD31B,OAAM,SAAAhI,GAEH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iDACT5P,MAAO,QACP6P,SAAU,cAItBg5B,GAA+BpoC,EAAUwN,EAAM66B,MAGtD31B,OAAM,SAAAhI,GAEH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,gDACT5P,MAAO,QACP6P,SAAU,kBgBzCtB+oC,gBAAiB,SAACl4C,EAAM8hB,GAAP,OAAgB/hB,EftEV,SAACC,EAAM8hB,GAClC,OAAO,SAAC/hB,EAAUwP,GACdxP,EAAS,CACLC,OACA8hB,KAAM,CACFq2B,SAAUr2B,EAAKq2B,SACfnhC,MAAO8K,EAAK9K,UegEsB4jC,CAAgC56C,EAAM8hB,KAChF05B,qBAAsB,kBAAMz7C,EfzDzB,CACHC,KAAMopC,MeyDNqS,0BAA2B,SAAC+C,GAAD,OAAsCz+C,EfpDhC,SAAAy+C,GACrC,OAAO,SAACz+C,EAAUwP,GACdxP,EAAS,CACLC,KAAMqpC,GACNmV,mCACAnD,SAAU9rC,IAAWm5B,SAASuR,mBe+CwCW,CAA0C4D,KACpHjD,0BAA2B,SAACvwC,EAAOwzC,GAAR,OAA6Cz+C,Ef1CvC,SAACiL,EAAOwzC,GAC7C,MAAO,CACHx+C,KAAMspC,GACNt+B,QACAwzC,oCesCiF5D,CAA0C5vC,EAAOwzC,KAClI7C,kBAAmB,SAAC37C,GAAD,OAAUD,EfjCJ,SAAAC,GAC7B,MAAO,CACHA,Qe+BsC46C,CAAkC56C,KACxE47C,yBAA0B,SAAC57C,GAAD,OAAUD,Ef1BJ,SAAAC,GACpC,OAAO,SAACD,EAAUwP,GAEd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9Bo7B,EAAelsB,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWm5B,SAASC,eAC7DmR,EAAar9B,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWm5B,SAASoR,aAE3D2E,EAAU1hD,EACXgU,WACAzS,IAAIqO,IACJyE,MAAM0oC,EAAWpsC,IAEtB,GAAI1N,IAASypC,GACTgV,EACK1wB,OAAO,CACJpD,MAAOmvB,EAAWnvB,MAClBsY,UAAW6W,EAAW7W,UACtBC,SAAU4W,EAAW5W,SACrBnY,MAAO+uB,EAAW/uB,MAClBwyB,SACIzD,EAAWyD,UAAYzD,EAAWyD,SAAStyC,OAAOnC,OAAS,EAEvDgxC,EAAWyD,SAEX,OAEXpzC,MAAK,WACFpK,EAAS,CACLC,KAAMwY,GACNtJ,QnCoCE,ImCnCEwR,EAAY1gB,KAGR,6CAGA,2CAERV,MAAO,UACP6P,SAAU,WAGd+lB,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,anCrBM,EmCsBNC,yBAA0Bvc,GAC1Bwc,mBAAoB2wB,EAAWpsC,GAC/B0b,gBACI1I,EAAYhT,KAAOosC,EAAWpsC,GpBqDI,4BAEW,sCoBhDpC1B,QAAQ,SAAU8tC,EAAW7W,UAAY,IAAM6W,EAAW5W,UAEvE7Z,OACI3I,EAAYhT,KAAOosC,EAAWpsC,GAG1B,KAGA+iB,GAAsCzkB,QAAQ,UAAW8tC,EAAWpsC,IAE5EsJ,MAAO,CACH0Z,OAAQiY,EACRhY,MAAOmpB,QAItBrnC,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QnCXE,ImCYEwR,EAAY1gB,KAGR,gEAGA,4DAERV,MAAO,QACP6P,SAAU,mBAGnB,GAAInP,IAAS0pC,GAAiC,CAEjD,IAAItB,EAAkB3rB,KAAKC,MAAMD,KAAKE,UAAUm9B,EAAW3oC,kBAC3Di3B,EAAgBC,iBAAiBz+B,SAAWw+B,EAAgBC,iBAAiBz+B,SAASy5B,cACtF+E,EAAgBE,eAAe1+B,SAAWw+B,EAAgBE,eAAe1+B,SAASy5B,cAElFob,EACK1wB,OAAO,CACJ5c,gBAAiBi3B,IAEpBj+B,MAAK,WACFpK,EAAS,CACLC,KAAMwY,GACNtJ,QnCrCE,ImCsCEwR,EAAY1gB,KAGR,4CAGA,0CAERV,MAAO,UACP6P,SAAU,WAGd+lB,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,anC9FM,EmC+FNC,yBAA0Bvc,GAC1Bwc,mBAAoB2wB,EAAWpsC,GAC/B0b,gBACI1I,EAAYhT,KAAOosC,EAAWpsC,GpBrBI,4BAEW,sCoB0BpC1B,QAAQ,SAAU8tC,EAAW7W,UAAY,IAAM6W,EAAW5W,UAEvE7Z,OACI3I,EAAYhT,KAAOosC,EAAWpsC,GAG1B,KAGA+iB,GAAsCzkB,QAAQ,UAAW8tC,EAAWpsC,IAE5EsJ,MAAO,CACH0Z,OAAQiY,EACRhY,MAAOmpB,QAItBrnC,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QnCpFE,ImCqFEwR,EAAY1gB,KAGR,gEAGA,4DAERV,MAAO,QACP6P,SAAU,gBerImByrC,CAAyC56C,KAItFg4C,2CAA4C,SAAC9qB,GAAD,OAASntB,EAAS2+C,GAAmDxxB,KACjHigB,uCAAwC,kBAAMptC,EAAS2+C,OACvDvF,sCAAuC,kBAAMp5C,GZ3E1C,SAACA,EAAUwP,GACd,MAGIA,IAAWy9B,yCAFXhkB,EADJ,EACIA,OACA20B,EAFJ,EAEIA,cAGEjwC,EAAM3Q,EACPgU,WACAzS,IAAIqO,IACJ9B,OACA0d,IAECo2B,EAAkB,CACpBjxC,KACAsb,OAAQA,EACRowB,WAAYp/B,KACZha,KAAM29C,GAGV5gD,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAIosC,GACJx0C,MAAK,WAEF+qB,GACmB,CACXlM,OAAQA,EACRC,atCsCU,EsCrCVC,yBAA0Bvc,GAC1Bwc,mBAAoBzb,EACpB0b,gBvB8G8C,kCuB1GtDrpB,EAAS,CACLC,KAAMqtC,GACNuR,UAAWD,IAIf5+C,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,+BACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMqtC,GACNuR,UAAW,OAIf7+C,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,wEACT5P,MAAO,QACP6P,SAAU,kBYgBtB8pC,yDAA0D,SAACxgC,GAAD,OAAW1Y,EZrFzC,SAAA0Y,GAChC,MAAO,CACHzY,KAAMotC,GACN30B,SYkF8EimC,CAAgEjmC,KAC9IygC,8DAA+D,SAACzgC,GAAD,OAAW1Y,EZVxC,SAAA0Y,GACtC,MAAO,CACHzY,KAAMstC,GACN70B,SYOmFimC,CAAsEjmC,KAIzJq/B,yBAA0B,SAAC9uB,GAAD,OAAYjpB,EbhJrB,SAAAipB,GACrB,MAAO,CACHhpB,KAAMysC,GACNzjB,Ua6I+C61B,CAAgC71B,KAC/E+uB,sBAAuB,kBAAMh4C,GbvI1B,SAACA,EAAUwP,GAEd,IAAMyZ,EAASzZ,IAAW68B,eAAepjB,OAEzCjpB,EAAS,CACLC,KAAM0sC,KAGV3vC,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM4X,GACNe,KAAK,SAAS,SAAAnY,GACNA,GAAaA,EAASqY,SAS3BlqB,EAAS,CACLC,KAAM2sC,GACNP,eAAgBx6B,EAASsY,QAVzBnqB,EAAS,CACLC,KAAM2sC,GACNP,eAAgB,KAChB3hC,MAAO,8BauHvB4yC,uCAAwC,kBAAMt9C,GbtG3C,SAACA,EAAUwP,GACd,IAAMyZ,EAASzZ,IAAW68B,eAAepjB,OAEpC4jB,KACDA,GAAyB7vC,EACpBgU,WACAzS,IAAIqO,IACJyE,MAAM4X,IAGNe,KAAK,SAAS,SAAAnY,GAENA,GAAaA,EAASqY,UAK3B2iB,GACKj7B,GAAG,eAAe,SAAAC,GACf,IAAIktC,EAAwBR,OAAOC,OAAO,GAAIhvC,IAAW68B,eAAeA,gBACnC,IAAjC0S,EAAsBh2C,OACtBg2C,EAAwB,CAACltC,EAASsY,QAInB,IADD40B,EAAsB91C,WAAU,SAAA+1C,GAAG,OAAIA,EAAI/tC,YAAcY,EAASsY,MAAMlZ,cAElF8tC,EAAsBj0C,KAAK+G,EAASsY,OAI5CnqB,EAAS,CACLC,KAAM6sC,GACNT,eAAgB0S,OAI5BlS,GACKj7B,GAAG,iBAAiB,SAAAC,GACjB,IAAIktC,EAAqB,aAAOvvC,IAAW68B,eAAeA,gBAC1D0S,EAAsBltC,EAAS2W,KAAO3W,EAASsY,MAE/CnqB,EAAS,CACLC,KAAM6sC,GACNT,eAAgB0S,QA9BxBlS,GAAyB,Ya0FzC0Q,sCAAuC,kBAAMv9C,GbnD1C,SAACA,EAAUwP,GACVq9B,KACAA,GAAuB7N,IAAI,eAC3B6N,GAAuB7N,IAAI,iBAC3B6N,GAAyB,UamD7B4L,mBAAoB,SAACt6C,EAAMka,EAAO7K,EAAMC,GAApB,OAAgCzN,Ed7I1B,SAAC7B,EAAMka,GAAwC,IAAjC7K,EAAgC,uDAAzB,KACnD,OAAO,SAACxN,EAAUwP,GAEd,IAAM0uC,EAAyB1uC,IAAWg9B,YAAY0R,uBAChDC,EAA8B3uC,IAAWg9B,YAAY2R,4BAE3D,KAAID,EAAuBhzC,OAAOnC,OAAS,GAAKo1C,GAAhD,CAIA,IAAMc,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,WAC5B,IAAMC,EAAW,CACb3yC,KAAM4L,EAAMA,EAAMtP,OAAS,GAC3Bs2C,QAASJ,EAAO12B,QAGpB,OAAQpqB,GACJ,KvCX2B,EuCavB,IAAMkuC,EAAiB78B,IAAWg9B,YAAYyR,kBAAkB5R,eAGhE,GpCyIO,IoCzIH7+B,EAAKvN,MACL,GAAIuN,EAAK8xC,gBACL,GAAIjT,EAAetjC,QpCsRM,EoCrR4ByE,EAAK8xC,eAAep+B,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAK7H,YAJA/I,EAAS,CACLC,KAAM+pC,GACNt/B,MAAO,gCAKf,GAAI2hC,EAAetjC,QpC6QM,EoCxQrB,YAJA/I,EAAS,CACLC,KAAM+pC,GACNt/B,MAAO,+BAOlB,IpCmHI,IoCnHA8C,EAAKvN,KAUV,OATA,GAAIosC,EAAetjC,QAAU,EAKzB,YAJA/I,EAAS,CACLC,KAAM+pC,GACNt/B,MAAO,2BAQnB,MACJ,KvChDuB,EuCkDvB,KvCjDuC,EuCmDvC,KAAK9M,EAEL,QACI,OAGRoC,EAAS,CACLC,KAAM8pC,GACN5rC,OACAihD,gBAGRH,EAAOM,cAAclnC,EAAMA,EAAMtP,OAAS,McoEmBy2C,CAAsCrhD,EAAMka,EAAO7K,EAAMC,KACtHgyC,gBAAiB,SAAC/0C,EAAO+B,GAAR,OAAiBzM,EdhEX,SAAC0K,EAAO+B,GACnC,OAAO,SAACzM,EAAUwP,GAEd,IAAIkwC,EAAeh1C,EAAMyE,QACzBuwC,EAAeA,EAAaC,OAAO,GAAGrc,cAAgBoc,EAAav0C,MAAM,GAEzEnL,EAAS,CACLC,KAAM+pC,GACNt/B,MAAOg1C,KcwDgCF,CAAmC90C,KAC9Ek1C,6BAA8B,kBAAM5/C,EdlDjC,CACHC,KAAMgqC,MckDN4V,8CAA+C,kBAAM7/C,Ed5ClD,CACHC,KAAMiqC,Mc4CNwO,uBAAwB,SAACv6C,EAAM8M,GAAP,OAAiBjL,EdNX,SAAC7B,EAAM8M,GACzC,OAAO,SAACjL,EAAUwP,GAEd,IAAIswC,EAA2B,KAE/B,OAAQ3hD,GACJ,KAAKqsC,GACDsV,EAA2BpjC,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWg9B,YAAYyR,kBAAkB5R,iBAC9F,MACJ,KAAK5B,GACDqV,EAA2BpjC,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWg9B,YAAYyR,kBAAkBlK,aAC9F,MACJ,KAAKrJ,GACDoV,EAA2BpjC,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWg9B,YAAYyR,kBAAkB8B,4BAC9F,MACJ,KAAKpV,GACDmV,EAA2BpjC,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWg9B,YAAYyR,kBAAkB+B,2BAC9F,MACJ,QACI,OAGRF,EAAyBztC,OAAOpH,EAAO,GAEvCjL,EAAS,CACLC,KAAMsqC,GACNpsC,OACA2hD,8BcrB8CN,CAA0CrhD,EAAM8M,KAClG0tC,mBAAoB,SAACx6C,EAAM8M,EAAOuC,EAAMC,GAApB,OAAgCzN,EdrC1B,SAAC7B,EAAM8M,GACrC,OAAO,SAACjL,EAAUwP,GACd,OAAQrR,GACJ,KAAKgsC,GACD,IAAMiC,EAAuB58B,IAAW68B,eAAepjB,OACnDg3B,EAAoB,aAAOzwC,IAAW68B,eAAeA,gBAOzD,OANA4T,EAAqBh1C,GAAOsH,SAAU,OACtCvV,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM+6B,GACNpe,OAAOiyB,GAEhB,KAAK7V,GAEL,KAAKC,GAEL,KAAKC,GAEL,QACI,SciBqDkV,CAAsCrhD,EAAM8M,KACzGuhC,YAAa,SAACruC,EAAMqP,EAAMC,GAAb,OAAyBzN,Ed6BnB,SAAC7B,GAAuC,IAAjCqP,EAAgC,uDAAzB,KAAMC,EAAmB,uDAAT,KACrD,OAAO,SAACzN,EAAUwP,GAEd,IAAI6I,EAAQ,GAEZ,OAAQla,GACJ,KvC/K+B,EuCgL3Bka,EAAQ7I,IAAWg9B,YAAYyR,kBAAkB5R,eACjD,MACJ,KvChL2B,EuCiLvBh0B,EAAQ7I,IAAWg9B,YAAYyR,kBAAkBlK,WACjD,MACJ,KvClL2C,EuCmLvC17B,EAAQ7I,IAAWg9B,YAAYyR,kBAAkB8B,0BACjD,MACJ,KAAKniD,EACDya,EAAQ7I,IAAWg9B,YAAYyR,kBAAkB+B,yBACjD,MACJ,QACI,OAGRhgD,EAAS,CACLC,KAAMvC,EACNS,OACAC,SAAU,IAGd4L,QAAQqgB,IACJhS,EAAMR,KAAI,SAAApL,GAAI,OAAIw+B,GAAqBjrC,EAAU7B,EAAMsO,EAAM4L,EAAMtP,OAAQyE,EAAMC,OACnFrD,MAAK,WAEHpK,EAAS,CACLC,KAAM+qC,GACN7sC,OACA+hD,+BAA+B,IAEnC/T,GAA6BnsC,EAAUwP,EAAUrR,EAAMqP,EAAMC,GACxDrD,MAAK,WACFpK,EAAS,CACLC,KAAM+qC,GACN7sC,OACA+hD,+BAA+B,OAGtCxtC,OAAM,SAAAhI,UAGZgI,OAAM,SAAAhI,GACL1K,EAAS,CACLC,KAAMvC,EACNS,KAAML,EACNM,SAAU,IACVsM,MAAOA,QclFgC80C,CAA+BrhD,EAAMqP,EAAMC,KAI1F8B,sBAAuB,SAACpR,GAAD,OAAU6B,EAASmY,GAAuCha,KAIjF+a,sBAAuB,SAAC/a,GAAD,OAAU6B,EAASic,GAAuC9d,QAk2G1E0B,CAA6C23C,IAEtD9hC,GAASxS,IAAWC,OAAO,CAC7By5C,wBAAyB,CACrB1oC,QAAS,GACT6E,UAAW,SACX9U,OAAO,aAAD,OAAe4Q,IAErB,SAAU,CACND,gBAAiBC,GACjBtR,OAAQ,YAIhB+4C,aAAc,CACV1nC,gBAAiBC,GACjByB,aAAc,EACdpC,QAAS,EACTqB,MAAO,MAEPnG,SAAU,WACV6pB,SAAU,OACVqgB,UAAW,KAGfiD,uBAAwB,CACpBn9C,UAAW,EACX,SAAU,CACNG,MAAOsV,GACPtR,OAAQ,UACRD,eAAgB,gB,6DCriHf68C,GAAuB,uBACvBC,GAAsB,SAAA1nC,GAC/B,OAAO,SAAC1Y,EAAUwP,GAWVxP,EAV0BwP,IAAW6wC,oBAAoBC,sBAUhD,CACLrgD,KAAMkgD,GACNG,sBAAuB,MARlB,CACLrgD,KAAMkgD,GACNG,sBAAuB5nC,EAAM6nC,kBAYhCC,GAAwB,wBACxBC,GAAiC,iCA6D1CC,GAAwB,KAEfC,GAA6B,6BC9BpCC,G,uKAEF,YAKIpuB,EAFIx0B,KAAKC,MADLu0B,uB,gCAMR,SAAmBoG,EAAWC,EAAWhnB,GACrC,MAKI7T,KAAKC,MAJL4iD,EADJ,EACIA,qBACAC,EAFJ,EAEIA,oBAEAC,EAJJ,EAIIA,uCAICF,GAAwBC,GACzBC,M,kCAIR,YAKIC,EAFIhjD,KAAKC,MADL+iD,0C,oBAMR,WACI,MAaIhjD,KAAKC,MAZL2iB,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBACA6oB,EAHJ,EAGIA,sBAEAuqB,EALJ,EAKIA,sBACAnvB,EANJ,EAMIA,cACA2vB,EAPJ,EAOIA,oBAEAV,EATJ,EASIA,oBACAa,EAVJ,EAUIA,oBACAxuB,EAXJ,EAWIA,uBAIJ,OAAKsD,EAKD,cAACmrB,GAAA,EAAD,CACI1iD,KAAM2iD,QAAQb,GACdc,SAAUd,EACVtD,UAAU,eACVqE,eAAe,EACfC,YAAU,EACVC,UAAW,CACPtE,KAAM,CACFuE,SAAS,GAEbC,gBAAiB,CACbD,SAAS,EACTE,kBAAmB,iBAG3BviD,MAAO,CAEHwX,OAAQ,KAjBhB,SAoBK,gBAAEgrC,EAAF,EAAEA,gBAAF,OACG,cAACC,GAAA,EAAD,2BACQD,GADR,IAEI/5B,QAAS,IAFb,SAII,cAACuR,GAAA,EAAD,CACIC,UAAW,EACXC,QAAM,EAFV,SAII,cAACllB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,EACTF,SAAU,KAJlB,SAOI,eAACK,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH6V,YAAa,GACbC,aAAc,GACdH,WAAY,EACZC,cAAe,EACfH,gBAAiBC,IAVzB,SAaI,eAACR,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,IAAD,CACIyB,OAAO,OACPlB,cAAc,SAFlB,SAII,cAAChW,EAAA,EAAD,CACIJ,QAAQ,QADZ,+BAOR,cAACyV,EAAA,EAAD,CACIC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAAC,IAAD,CACIS,cAAc,QADlB,SAGI,cAACC,EAAA,EAAD,CACIlW,MAAO,CACHoW,MAAO,GACPa,OAAQ,IAEZ1W,QAAS0gD,EALb,SAOI,cAAC,KAAD,CACIr8C,SAAS,qBAQjC,cAACwQ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,MAIyB,IAAzB6b,EAAcpoB,OAEV,KAEA,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH2V,WAAY,EACZC,cAAe,EACfE,aAAc,IARtB,SAWI,cAAC,IAAD,CACIG,cAAc,QADlB,SAGI,eAAC9V,EAAA,EAAD,CACIR,QAAQ,OACRkG,UAAWyQ,YAAIxS,GAAakB,kBAAmBuR,GAAOmsC,gBACtDriD,KAAK,SACLE,QAAS+yB,EAJb,UAMI,cAAC,KAAD,CACItzB,MAAO,CACHgX,YAAa,KARzB,mBAkBa,IAAzBgb,EAAcpoB,OAEV,KAEA,cAACwL,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,MAIZ,cAACf,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH2iD,UAAoC,IAAzB3wB,EAAcpoB,OAAe,IAAM,OAC9CuwC,UAAW,IACXC,UAAW,QARnB,SAYSuH,EAmB4B,IAAzB3vB,EAAcpoB,OAEV,eAAC,IAAD,CACInK,QAAM,EACNwX,OAAO,OACPlB,cAAc,SACdE,cAAc,SAJlB,UAMI,cAAC,IAAD,CACIpQ,UAAWyQ,YAAIC,GAAOqsC,kCAE1B,cAAC7iD,EAAA,EAAD,CACIJ,QAAQ,QADZ,6CAOJ,cAAC2jC,GAAA,EAAD,CACIv9B,UAAU,KACV/F,MAAO,CACH+U,QAAS,GAHjB,SAOQid,EACKzZ,MAAK,SAACsqC,EAAeC,GAClB,OAAQA,EAAcx5C,KAAOu5C,EAAcv5C,QAE9CoP,KAAI,SAAAuZ,GAAY,OACb,cAACsR,GAAA,EAAD,CACIx9B,UAAU,KAEVg9C,SAAO,EACPl9C,UAAWyQ,YAAIC,GAAOysC,mBAJ1B,SAMI,eAAC9tC,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHoW,MAAO,OACPT,WAAY,GACZC,cAAe,IALvB,UAQI,cAACR,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJxV,MAAO,CACH8V,aAAc,IANtB,SASI,cAAC,IAAD,CACIyhB,GACI9V,EAAa,UAEN8P,GAAkBzkB,QAAQ,iBAAkB2U,IAFtC,OAEuDwQ,EAAa9H,QAE7E8H,EAAa9H,OAErBtkB,UAAWyQ,YAAIxS,GAAaQ,4CAC5B/D,QAAS,kBAAMuhD,EAAoB7vB,IATvC,SAWI,eAAC,IAAD,CACIlc,cAAc,SADlB,UAGI,cAAC,IAAD,CACIlQ,UAAWyQ,YAAIC,GAAO0sC,0BAE1B,eAAC,IAAD,CACIxjD,QAAM,EACN+E,WAAY,GAFhB,UAII,cAACzE,EAAA,EAAD,CACIJ,QAAQ,QACRkG,UAAWyQ,YAAIC,GAAOpR,YAF1B,SAIK8sB,EAAaxG,QAElB,cAAC1rB,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNJ,MAAO,CACHC,UAAW,GAJnB,SAOKgyB,EAAajiB,UAElB,cAACjQ,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNJ,MAAO,CAACC,UAAW,IAHvB,SAKI,uCAAU6a,GAA+BmX,EAAa3oB,qBAM1E,cAAC8L,EAAA,EAAD,CACIC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACH6V,YAAa,EACbC,aAAc,GAPtB,SAUI,cAAC,IAAD,CACIM,MAAM,OACNa,OAAO,OACPlB,cAAc,SACdE,cAAc,SAJlB,SAMI,cAACC,EAAA,EAAD,CACI3V,QAAS,kBAAMuhD,EAAoB7vB,IADvC,SAGI,cAAC,KAAD,CACIrtB,SAAS,oBAxFxBqtB,EAAazjB,SAjD1C,cAAC,IAAD,CACI/O,QAAM,EACNwX,OAAO,OACPlB,cAAc,SACdE,cAAc,SAJlB,SAMI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,sBAzL7C,S,GAjDYjV,aA+XhBC,gBAxZS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBAEnDuqB,sBAAuBxgD,EAAMugD,oBAAoBC,sBACjDnvB,cAAerxB,EAAMugD,oBAAoBlvB,cACzC0vB,qBAAsB/gD,EAAMugD,oBAAoBQ,qBAChDC,oBAAqBhhD,EAAMugD,oBAAoBS,wBAI5B,SAAA9gD,GACvB,MAAO,CACHogD,oBAAqB,SAAC1nC,GAAD,OAAW1Y,EAASqiD,GAAyC3pC,KAClF8Z,kBAAmB,kBAAMxyB,GDtBtB,SAACA,EAAUwP,GACd,IAAMhC,EAAOgC,IAAWC,KAAKjC,KAExBA,IAILxN,EAAS,CACLC,KAAMugD,KAGVrrB,GACuB3nB,EAAKL,eAAe,QAAUK,EAAKud,KAAOvd,EAAKG,IACjEvD,MAAK,SAAA+mB,GACFnxB,EAAS,CACLC,KAAMwgD,GACNtvB,qBAGPze,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwgD,GACNtvB,cAAe,aCC3B8vB,oBAAqB,SAAC7vB,GAAD,OAAkBpxB,EDKZ,SAAAoxB,GAC/B,OAAO,SAACpxB,EAAUwP,GACdxS,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM+f,EAAazjB,IACnB+kB,SACAtoB,MAAK,WACFpK,EAAS,CACLC,KAAMkgD,GACNG,sBAAuB,WCfa+B,CAAyCjxB,KACzFqB,uBAAwB,kBAAMzyB,GDqB3B,SAACA,EAAUwP,GACd,IAAMhC,EAAOgC,IAAWC,KAAKjC,KAExBA,GAIL2nB,GAC4B3nB,EAAKL,eAAe,QAAUK,EAAKud,KAAOvd,EAAKG,QC3B3EozC,sCAAuC,kBAAM/gD,GDqC1C,SAACA,EAAUwP,GACd,IAAKkxC,GAAuB,CAExB,IAAMlzC,EAAOgC,IAAWC,KAAKjC,KAE7B,IAAKA,EACD,QAGJkzC,GAAwB1jD,EACnBgU,WACAzS,IAAIqO,IACJid,aAAa,UACbC,QAAQtc,EAAKL,eAAe,QAAUK,EAAKud,KAAOvd,EAAKG,KAGvDiE,GAAG,eAAe,SAAAC,GACf,IAAIuf,EAAevf,EAASsY,MAExBgH,EAAa,aAAO3hB,IAAW6wC,oBAAoBlvB,gBAE5B,IADHA,EAAcloB,WAAU,SAAAq5C,GAAoB,OAAIA,EAAqB30C,KAAOyjB,EAAazjB,OAE7G3N,EAAS,CACLC,KAAM0gD,GACNxvB,cAAc,GAAD,oBAAMA,GAAN,CAAqBC,SAKlDsvB,GACK9uC,GAAG,iBAAiB,SAAAC,GACjB,IAAIuf,EAAevf,EAASsY,MAExBgH,EAAa,aAAO3hB,IAAW6wC,oBAAoBlvB,eACnDoxB,EAAoBpxB,EAAcloB,WAAU,SAAAq5C,GAAoB,OAAIA,EAAqB30C,KAAOyjB,EAAazjB,OAEtF,IAAvB40C,IACApxB,EAAc9e,OAAOkwC,EAAmB,GACxCviD,EAAS,CACLC,KAAM0gD,GACNxvB,2BC5EpB6vB,qCAAsC,kBAAMhhD,GDqFzC,SAACA,EAAUwP,GACVkxC,KACAA,GAAsB1hB,IAAI,eAC1B0hB,GAAsB1hB,IAAI,iBAC1B0hB,GAAwB,aC0SrB7gD,CAA6C+gD,IAEtDlrC,GAASxS,IAAWC,OAAO,CAE7BmB,WAAY,CACR/E,MAAOsV,IAGXktC,+BAAgC,CAC5BxsC,MAAO,GACPa,OAAQ,OACR7W,MAAOsV,GACPW,aAAc,IAGlB4sC,uBAAwB,CACpB7sC,MAAO,GACPa,OAAQ,OACR7W,MAAOsV,IAGXgtC,eAAgB,CACZtiD,MAAOsV,IAGXstC,kBAAmB,CACfntC,YAAa,GACbC,aAAc,GACdH,WAAY,EACZC,cAAe,EAEf,SAAU,CACNxR,OAAQ,UACRqR,gBAAiBC,O,8BTjdjBm7B,K,oDAAAA,E,oEAAAA,E,kDAAAA,E,0DAAAA,E,2DAAAA,Q,KA0BL,IU3BKwS,GVkCCvS,GAAkC,SAACY,GAC5C,gDAAO,WAAO7wC,EAAoBwP,GAA3B,8BAAA1F,EAAA,+DAMC0F,IAAWizC,wBAJXC,EAFD,EAECA,aACAtS,EAHD,EAGCA,iBACAuS,EAJD,EAICA,aACArS,EALD,EAKCA,YAGEC,OAAuDzuB,IAAZ+uB,EAAwB,CACrE7X,OAAuC,IAA/B0pB,EAAax3C,OAAOnC,YAAe+Y,EAAY4gC,EACvDjxB,WAAiC,QAArB2e,G3CuIiB,I2CvIaA,G3CsIT,I2CrI9BA,EACGA,OAAmBtuB,EACzB/E,MAA4B,QAArBqzB,G3CoIsB,I2CpIQA,G3CmIJ,I2ClI9BA,OACGtuB,EAAYsuB,EAAiB1nB,WACnCyyB,OAAQwH,EACRnS,MAAOF,GACP,CACAtX,OAAuC,IAA/B0pB,EAAax3C,OAAOnC,YAAe+Y,EAAY4gC,EACvDjxB,WAAiC,QAArB2e,G3C6HiB,I2C7HaA,G3C4HT,I2C3H9BA,EACGA,OAAmBtuB,EACzB/E,MAA4B,QAArBqzB,G3C0HsB,I2C1HQA,G3CyHJ,I2CxH9BA,OACGtuB,EAAYsuB,EAAiB1nB,WACnCyyB,OAAQwH,EACRnS,MAAOF,EACPO,QAASA,GAGb7wC,EAAS,CACLC,KAAM+vC,GAAoBiB,iBAGxBR,EAA+C,CACjDxwC,KAAM+vC,GAAoBU,uBAC1BC,eAAgB,IArCjB,mBAyCwB,IAAIrB,IAAkBW,YAAYM,GAzC1D,cAyCO13B,EAzCP,OA0CC43B,EAAeE,eAAiB93B,EAAStO,KA1C1C,kBA2CQvK,EAASywC,IA3CjB,yCA6CCA,EAAe/lC,MAAQ,KAAMge,WA7C9B,kBA8CQ1oB,EAASywC,IA9CjB,0DAAP,yDWjCSmS,GAA2B,GAiBlCtjB,GAAmC,CACrCqR,eAAgB,GAChBc,gBAAgB,EAChBC,eAAe,EAEfgR,aAAc,GACdtS,iBAAkB,MAClBuS,aAAc,MACdrS,YAAa5C,GAA0BwI,UAEvCtE,YAAa,GAOJE,GAAmB,SAAChyC,GAC7B,OAAOA,EAAM2xC,gBAGJM,GAA4B,SAACjyC,GACtC,OAAOA,EAAM4xC,gBAAkB5xC,EAAM2xC,qBAAkC3vB,IAAhBhiB,EAAM4K,OAGpDsnC,GAA6B,SAAClyC,GACvC,OAAOiyC,GAA0BjyC,IAAUA,EAAM6wC,eAAe5nC,OAAS,GAGhE85C,GAAuB,SAAC/iD,GACjC,OAAOA,EAAM4iD,aAAax3C,OAAOnC,OAAS,GAqE/B+5C,GA3Cc,WAA4E,IAA3EhjD,EAA0E,uDAA9Cw/B,GAAchW,EAAgC,uCACpG,OAAQA,EAAOrpB,MACX,KAAK+vC,GAAoBiB,eACrB,OAAO,2BACAnxC,GADP,IAEI6wC,eAAgB,GAChBc,gBAAgB,EAChBC,eAAe,EACfhnC,WAAOoX,IAEf,KAAKkuB,GAAoBU,uBACrB,IAAMgC,EAA6DppB,EACnE,OAAO,2BACAxpB,GADP,IAEI6wC,eAAe,aAAK+B,EAA6B/B,gBACjDc,gBAAgB,EAChBC,eAAe,EACfE,YAAa,EACblnC,WAA8CoX,IAAvC4wB,EAA6BhoC,MAC9B,CAACqe,OAAQ2pB,EAA6BhoC,OAAS5K,EAAM4K,QAEnE,KAAKslC,GAAoB2C,cACrB,IAAMC,EAA2CtpB,EACjD,OAAO,2BACAxpB,GADP,IAEI,CAAC8yC,EAAoBlmC,MAAOkmC,EAAoB37B,QAExD,KAAK+4B,GAAoB+S,kBACrB,OAAO,2BACAjjD,GADP,IAEI4iD,aAAc,KAEtB,KAAK1S,GAAoBgT,kBACrB,IAAMC,EAAmD35B,EACzD,OAAO,2BACAxpB,GADP,IAEI8xC,YAAaqR,EAAwBtd,OAE7C,QACI,OAAO7lC,ICnENojD,GAAe,SAACnmC,GACzB,OAAKA,EAG0B,IAA3BA,EAAM3P,UAAUrE,OACT,KAEJgU,EAAM3P,UAAU2P,EAAM3P,UAAUnE,WAAU,SAAAoE,GAAI,YAAqByU,IAAjBzU,EAAKkF,YAAwBzF,IAL3E,MC5BTq2C,GAAiB,IAejBC,G,4JACF,WAAU,IAAD,MACL,EAIIplD,KAAKC,MAHLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBACA4wB,EAHJ,EAGIA,cAGJ,IAAK5wB,EAAoBC,YACrB,OAAO,KAGX,IAAMozB,EV0Qe,SAACtmC,GAC1B,QAA4BqU,IAAxBrU,EAAQI,MAAMw1C,MACd,OAAO,KAEX,IAAMp4C,EAAQwC,EAAQI,MAAMw1C,MAAMp6C,WAAU,SAAAo6C,GAAK,YAAsBvhC,IAAlBuhC,EAAM9wC,UAA0B8wC,EAAM9wC,WAC3F,OAAe,IAAXtH,EACO,KAEJwC,EAAQI,MAAMw1C,MAAMp4C,GUlReq4C,CAAchS,EAAcC,eAElE,OAAO,cAAC,GAAD,CACHzkC,IAAKsQ,GAAOsE,4BAAP,UAAmCjB,EAAoBktB,wBAAvD,QAA2E,KAAM2D,EAAcC,cAAc5jC,IAClHpO,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACI,cAAC0B,GAAA,EAAD,CACIjxC,OAAM,oBAAe4Q,KAAO2gC,KAAK,MADrC,SAGI,cAACrhC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAMI,cAACG,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,UAMI,eAACugC,GAAA,EAAD,CACI9+B,OAAM,UAAK+sC,GAAL,MACN5tC,MAAM,OACNggC,Q1D3EgD,U0DwEpD,UAMQpB,GAAqCzzB,EAAoBC,YAAaD,EAAoBK,mBAAoBuwB,EAAcC,eACtH,cAAC2D,GAAA,EAAD,CACEG,QAAQ,OACR9/B,MAAM,OACNa,OAAQ+sC,GACRxN,eAAe,SAJjB,SAME,cAACz+B,GAAA,EAAD,CACIC,IAAG,UAAE+rC,GAAa5R,EAAcv0B,cAA7B,QAAuC,GAC1CxH,MAAM,OACNa,OAAQ+sC,GACRhkD,MAAO,CACH+U,QAAS,GACTuD,UAAW,kBAIpBs8B,EAEDD,GAAkBC,GACd,cAAC78B,GAAA,EAAD,CACEC,IAAK48B,EAAWjnC,IAChByI,MAAM,OACNa,OAAQ+sC,GACRhkD,MAAO,CACHsY,UAAW,aAGjB,cAAC,KAAD,CACE3K,IAAKinC,EAAWjnC,IAChBy2C,OAAO,EACPhuC,MAAM,OACNa,OAAQ+sC,GACR7nC,SAAS,EACTC,UAAU,IAhBhB,KAqBV,cAACrE,GAAA,EAAD,CACIC,IAAG,UAAE+rC,GAAa5R,EAAcv0B,cAA7B,QAAuC,GAC1CxF,eAAa,EACbnB,OAAQ,GACRb,MAAO,GACPpW,MAAO,CACHiQ,SAAU,WACVo0C,MAAO,EACP9sC,IAAK,EACLC,OAAQ,EACRzC,QAAS,MACT9U,UAAW,MACX+W,YAAa,MACbvB,gBAAiBC,KAAO2gC,KAAK,KAC7B/9B,UAAW,gBAKvB,cAACnC,EAAA,EAAD,IAEA,eAAC4/B,GAAA,EAAD,CACIhhC,QAAQ,OADZ,UAII,eAACghC,GAAA,EAAD,WAEI,cAACA,GAAA,EAAD,CACIqC,QAAQ,MADZ,SAGI,cAACr4C,EAAA,EAAD,CACIukD,QAAM,EACN3kD,QAAQ,KACRiU,MAAM,OAHV,SAMQohC,GAAqCzzB,EAAoBC,YAAaD,EAAoBK,mBAAoBuwB,EAAcC,eACtH,qBACAD,EAAcC,cAAc9gB,gBAM9C,cAACykB,GAAA,EAAD,CACI31C,MAAOsV,KAAO2gC,KAAK,KADvB,SAGI,cAACt2C,EAAA,EAAD,CACIukD,QAAM,EACN3kD,QAAQ,QACRiU,MAAM,OAHV,SAMQohC,GAAqCzzB,EAAoBC,YAAaD,EAAoBK,mBAAoBuwB,EAAcC,eAA5H,aACYD,EAAcC,cAAc4J,OADxC,WAEM7J,EAAcC,cAAcpmB,gBAM9C,cAAC+pB,GAAA,EAAD,CACI31C,MAAM,QACNH,UAAU,MAFd,SAII,cAACF,EAAA,EAAD,CACIJ,QAAQ,QACR2kD,QAAM,EAFV,SAKQtP,GAAqCzzB,EAAoBC,YAAaD,EAAoBK,mBAAoBuwB,EAAcC,gBAEtHqC,GAA6BtC,EAAcC,eAFjD,aACYD,EAAcv0B,MAAMkQ,aAC1B,aAEOqkB,EAAcrvB,OAAgBihB,UAFrC,YAEmDoO,EAAcrvB,OAAgBkhB,iBAOvG,cAAC+R,GAAA,EAAD,CACIK,QAASnH,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACjE34B,OAAO,MACPhX,UAAU,OACVoW,aAAa,SAIjB,eAAC0/B,GAAA,EAAD,WACI,cAACh2C,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UACNwT,MAAM,OAHV,SAMQu+B,EAAcC,cAAc1jC,MAAMyoC,aAAlC,cACUC,OAAOjF,EAAcC,cAAc1jC,MAAMyoC,aAAa3sC,QAAQ,IAAI6sC,iBAD5E,SAEM,KAId,cAACtB,GAAA,EAAD,CACI91C,UAAU,OADd,SAGI,cAACF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACNxT,MAAM,gBAHV,SAMS2O,GAAcojC,EAAcC,eAA7B,UAESt3B,GAAeq3B,EAAcC,cAAc1jC,MAAMylB,aAF1D,eACM,uBAQtB,cAAC4hB,GAAA,EAAD,CACIG,QAAQ,OACRj2C,UAAU,OACVu2C,eAAe,WACfp2C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAJnE,SAMI,cAAC+N,GAAA,EAAD,CACIC,QAAS,CAAC,QAAS,SACnBC,UAAU,SACVC,MAAI,EACJC,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAG,iBADP,SAIQqmC,GAAgB1C,EAAcC,eACxB,0BACA0C,GAAoB3C,EAAcC,eAClC,8BACA2C,GAAiB5C,EAAcC,eAC3B,2BACA,OAf1B,SAqBQyC,GAAgB1C,EAAcC,eACxB,cAAC,KAAD,IACA0C,GAAoB3C,EAAcC,eAClC,cAAC,KAAD,IACA2C,GAAiB5C,EAAcC,eAC3B,cAAC,KAAD,IACA,cAAC2D,GAAA,EAAD,0B,GA7OlCt1C,aA2PTC,gBAlQS,SAACC,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,uBA+PpB7gB,CAAyBujD,I,UCnRlCM,G,4JACF,WACI,MAGI1lD,KAAKC,MAFLy4C,EADJ,EACIA,4BACAj2B,EAFJ,EAEIA,oBAGJ,IAAKi2B,EAA4BiN,iBAC7B,OAAO,KAGX,IAAIC,EAAoBlN,EAA4BiN,iBAAiBC,kBAQjEC,GAPJD,EAAoBA,EACf/3C,MAAM,eACNi4C,KAAKrjC,EAAoB1D,MACpB0D,EAAoB1D,MAAMkQ,YAC1B,gBAGqBphB,MAAM,SAE/Bk4C,EAAUF,EAAO,GAEvB,OAAO,eAAC3O,GAAA,EAAD,CACHjxC,OAAM,oBAAe4Q,KAAO2gC,KAAK,MACjCl/B,aAAa,OACbpC,QAAQ,OACRqhC,QAAS1gC,KAAO2gC,KAAK,KAJlB,UAMH,cAACt2C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,+CAGJ,cAACmiC,GAAA,EAAD,CACI91C,UAAU,OACV4kD,WAAW,WAFf,SAII,eAAC9kD,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,UAFV,UAIK8wC,EAAO,GACR,cAAC,GAAD,CACI/2C,IAAKsQ,GAAOkC,oBACZnD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQnkC,MAAMqkC,KAC7D0E,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACIuQ,IAGPF,EAAO,e,GAxDFjkD,aA+DXC,gBAtES,SAACC,GACrB,MAAO,CACH42C,4BAA6B52C,EAAM42C,4BACnCj2B,oBAAqB3gB,EAAM2gB,uBAmEpB5gB,CAAyB6jD,I,yCCHlCO,G,uKAEF,WJ1C+B,IAACnkD,KI2CJ9B,KAAKC,MAAMwkD,yBJ1CzBhR,gBAAmB3xC,EAAM4xC,eI2C/B1zC,KAAKC,MAAMgyC,YAAYxC,GAA4ByW,S,oBAI3D,WAAU,IAAD,EJ5B4BpkD,EI6BjC,EAWI9B,KAAKC,MAVLia,EADJ,EACIA,gBACAw+B,EAFJ,EAEIA,4BACAj2B,EAHJ,EAGIA,oBACAC,EAJJ,EAIIA,oBACA+hC,EALJ,EAKIA,wBACAxS,EANJ,EAMIA,YACA4E,EAPJ,EAOIA,cACAsP,EARJ,EAQIA,kBACAC,EATJ,EASIA,kBACAC,EAVJ,EAUIA,cAGEC,GJ1C2BxkD,EI0CgB2iD,GJzC3C9R,eAAe5nC,QAAU65C,GACxB,EAEP9iD,EAAM6wC,eAAe5nC,OAAS65C,KAAqB,EAC3C9iD,EAAM6wC,eAAe5nC,OAAS65C,GAAoB,EAEE,GAAvD9iD,EAAM6wC,eAAe5nC,OAAS65C,GAAoB,GIoCjD2B,EJjC4B,SAACzkD,GACvC,IAAI0kD,EAAYC,EAMhB,OAJAA,GADAD,GAAc1kD,EAAM8xC,YAAc,GAAKgR,IACfA,GAAmB,GAC5B9iD,EAAM6wC,eAAe5nC,OAAS,IACzC07C,EAAW3kD,EAAM6wC,eAAe5nC,OAAS,GAEtC,CACHy7C,aACAC,YIwB0BC,CAA2BjC,GAErD,OAAO,eAACvN,GAAA,EAAD,CACHgC,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAF3C,UAIH,eAACqB,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIW,SAAS,MADb,UAGI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,QADZ,yBAKA,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,QAEX,cAAC+iB,GAAA,EAAD,UACI,eAAC2c,GAAA,EAAD,CACIr3C,WAAS,EACTK,QAAQ,WACR4N,KAAK,mBACLuK,MAAOwrC,EAAwBrS,iBAC/Bx6B,SAAUi/B,EACVp1C,UAAWsyC,GAA0B0Q,GACrC1M,MAAO,cAACC,GAAA,EAAD,IAPX,UASI,cAACC,GAAA,EAAD,CAEIh/B,MAAM,MAFV,uBACQ,OAOHyJ,EAAoBC,YAEmC,IAAlDD,EAAoBK,mBAAmBhY,OACvC,KACA2X,EAAoBK,mBACjBlJ,KAAI,SAAAsJ,GAAiB,OAClB,eAAC80B,GAAA,EAAD,CAEIh/B,MAAOkK,EAAkBpE,MAAMgO,KAFnC,yBAIiB5J,EAAkBpE,MAAMkQ,cAHhC9L,EAAkBpE,MAAMgO,SANvC,KAcV,cAACkrB,GAAA,EAAD,CAEIh/B,M1DyBK,E0D3BT,0B1D2BS,G0DpBT,cAACg/B,GAAA,EAAD,CAEIh/B,M1DiBS,E0DnBb,8B1DmBa,a0DP7B,cAAC1C,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIW,SAAS,MADb,UAGI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,QADZ,qBAKA,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,QAEX,cAAC+iB,GAAA,EAAD,UACI,eAAC2c,GAAA,EAAD,CACIr3C,WAAS,EACTK,QAAQ,WACR4N,KAAK,eACLuK,MAAOwrC,EAAwBE,aAC/B/sC,SAAUi/B,EACVp1C,UAAWsyC,GAA0B0Q,GACrC1M,MAAO,cAACC,GAAA,EAAD,IAPX,UASI,cAACC,GAAA,EAAD,CAEIh/B,MAAM,MAFV,wBACQ,OAOHy/B,EAA4BiN,iBAEvBjN,EAA4BiN,iBAAiBvI,QAAQvjC,KAAI,SAACsjC,EAAQlwC,GAAT,OACvD,cAACgrC,GAAA,EAAD,CAEIh/B,MAAOkkC,EAFX,SAIKA,GAHIlwC,MAHX,eAgB1B,cAACsJ,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIW,SAAS,MADb,UAGI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,QADZ,qBAKA,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,QAEX,cAAC+iB,GAAA,EAAD,UACI,eAAC2c,GAAA,EAAD,CACIr3C,WAAS,EACTK,QAAQ,WACR4N,KAAK,cACLuK,MAAOwrC,EAAwBnS,YAC/B16B,SAAUi/B,EACVp1C,UAAWsyC,GAA0B0Q,GACrC1M,MAAO,cAACC,GAAA,EAAD,IAPX,UASI,cAACC,GAAA,EAAD,CAEIh/B,MAAOy2B,GAA0BwI,UAFrC,iBACSxI,GAA0BwI,WAMnC,cAACD,GAAA,EAAD,CAEIh/B,MAAOy2B,GAA0B0I,aAFrC,oBACS1I,GAA0B0I,2BAYvD,cAAC/hC,EAAA,EAAD,CACIlV,MAAO,CACHC,UAAW,IAFnB,SAKI,cAACmV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACugC,GAAA,EAAD,CACI3/B,MAAM,OACNa,OAAO,OACPm/B,QAAQ,QACRtxC,OAAQ,EACRmzC,YAAaviC,KAAO2gC,KAAK,KACzBl/B,aAAa,OACb4gC,SAAS,MACTrB,SAAS,MARb,SAUI,sBACIvc,SAAU+qB,EADd,SAGI,cAAC5O,GAAA,EAAD,CACIh3C,WAAS,EACTiO,KAAK,eACLuK,MAAOwrC,EAAwBC,aAC/BrnC,YAAY,+BACZzF,SAAUi/B,EACVp1C,UAAWsyC,GAA0B0Q,GACrC/M,eACI,cAAC/b,GAAA,EAAD,CACIvqB,SAAS,QADb,SAGI,cAACiG,EAAA,EAAD,CACIpV,KAAK,SACLP,QAAS,kBAAMuwC,EAAYxC,GAA4ByW,QACvDzkD,UAAWsyC,GAA0B0Q,GAHzC,SAKI,cAAC,KAAD,CAAQ1+C,SAAS,cAI7B21B,aACKmpB,GAAqBJ,GAEhB,cAAC9oB,GAAA,EAAD,CACEvqB,SAAS,MADX,SAGE,cAACiG,EAAA,EAAD,CACI3V,QAAS,kBAAMykD,KADnB,SAGI,cAAC,KAAD,CAAOpgD,SAAS,cAPtB,eAmBzB+tC,GAAiB2Q,GAEZ,cAACpuC,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACugC,GAAA,EAAD,CACIG,QAAQ,OACRkC,QAAQ,OACR5B,eAAe,SAHnB,SAKI,cAAC,aAAD,CACIp2C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,aAhB7E,KAyBLgD,GAA0B0Q,GAErB,cAACpuC,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAOSq9B,GAA2ByQ,GAWtB,eAACvN,GAAA,EAAD,WAEE,eAACA,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SACXl2C,UAAU,OACVoW,aAAa,OALjB,UAOI,cAACtW,EAAA,EAAD,CACIJ,QAAQ,KADZ,qBAKA,eAACI,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,iBAIU,8BAAIkjD,EAAwB9R,eAAe5nC,OAA3C,gBAGV,cAACmsC,GAAA,EAAD,CACIvxC,WAAW,MADf,SAGI,cAAC0R,EAAA,EAAD,CACI3V,QAAS,kBAAMuwC,EAAYxC,GAA4ByW,QAD3D,SAGI,cAAC,KAAD,WAOPxjC,EAAoBC,aAEdzD,GAASwD,EAAoBC,aAE9B,cAACu0B,GAAA,EAAD,CACE1/B,aAAa,OADf,SAGE,cAAC,GAAD,CACI1I,IAAKsQ,GAAOwE,4BAAP,UAAmCnB,EAAoBktB,wBAAvD,QAA2E,MAChFxxB,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,eAACl0C,EAAA,EAAD,CACIE,KAAK,SACLV,QAAQ,YACRS,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAJhC,UAMI,cAAC+wC,GAAA,EAAD,CACI/+B,YAAY,MADhB,SAGI,cAAC,KAAD,CACIpS,SAAS,YAVrB,0BAdV,KAmCV,cAACsQ,EAAA,EAAD,UAEQouC,EAAwB9R,eACnBxlC,MAAMo5C,EAAkBC,WAAYD,EAAkBE,SAAW,GACjE5sC,KAAI,SAAAy5B,GAAa,OACd,cAAC/8B,EAAA,EAAD,CAEIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EALR,SAOI,cAACugC,GAAA,EAAD,CACIv1C,OAAO,OADX,SAGI,cAAC,GAAD,CACI2xC,cAAeA,OAVlBA,EAAcC,cAAc5jC,YAtFvD,cAACunC,GAAA,EAAD,CACEqC,QAAQ,OADV,SAGE,cAACr4C,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,KAFZ,oFAflB,KA2HLizC,GAA0B0Q,GAED,IAApB6B,EACA,KACA,cAACjwC,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACugC,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfv2C,UAAU,OAHd,SAKI,cAACulD,GAAA,EAAD,CACIne,MAAO8d,EACP3e,KAAM8c,EAAwB7Q,YAC9BryC,MAAM,UACNqW,SAAUwuC,UArBxB,KA6BV,cAAC/vC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACugC,GAAA,EAAD,CACI91C,UAAU,QADd,SAGI,cAAC,GAAD,iB,GAxcIQ,aAgdbC,gBApeS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBw+B,4BAA6B52C,EAAM42C,4BACnCj2B,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3B+hC,wBAAyB3iD,EAAM2iD,4BAIZ,SAACziD,GACxB,MAAO,CACHqkD,cAAe,SAAC3rC,GAAD,OAAsB1Y,EfrCI,SAAC0Y,GAC9C,OAAO,SAAC1Y,EAAoBwP,GAExB,OADAkJ,EAAM6e,iBACCv3B,EAASiwC,GAAYxC,GAA4ByW,SekCVG,CAAc3rC,KAC5Du3B,YAAa,SAACY,GAAD,OAAsB7wC,EAASiwC,GAAYY,KACxDgE,cAAe,SAACn8B,GAAD,OAAgD1Y,EfoBtB,SAAC0Y,GAC9C,OAAO,SAAC1Y,EAAoBwP,GACxB,IAAM9C,EAAOgM,EAAMyD,OAAOzP,KACpBuK,EAAQyB,EAAMyD,OAAOlF,MAS3B,OAFAjX,EALoC,CAChCC,KAAM+vC,GAAoB2C,cAC1BjmC,KAAMA,EACNuK,MAAOA,IAIHvK,GACJ,IAAK,eACD,OACJ,IAAK,mBACD,MAAc,QAAVuK,GAAmBA,EAAMyR,a3C8EJ,G2C9E6CA,YAAczR,EAAMyR,a3C6E7D,G2C7E0GA,WAC5H1oB,EAASiwC,GAAYxC,GAA4BmX,aAErD5kD,EAASiwC,GAAYxC,GAA4BuD,QAC5D,IAAK,eACD,OAAOhxC,EAASiwC,GAAYxC,GAA4BoX,SAC5D,IAAK,cACD,OAAO7kD,EAASiwC,GAAYxC,GAA4ByW,QAC5D,QACI,Se7CgErP,CAAcn8B,KACtFyrC,kBAAmB,kBAAMnkD,GfkDtB,SAACA,EAAoBwP,GAIxB,OAHAxP,EAAS,CACLC,KAAM+vC,GAAoB+S,oBAEvB/iD,EAASiwC,GAAYxC,GAA4ByW,YerDxDE,kBAAmB,SAAC1rC,EAAmCitB,GAApC,OAAqD3lC,EfyD3B,SAAC0Y,EAAmCitB,GACrF,OAAO,SAAC3lC,EAAoBwP,GAKxB,OAAOxP,EAJiC,CACpCC,KAAM+vC,GAAoBgT,kBAC1Brd,KAAMA,Ke7DuEye,CAAkB1rC,EAAOitB,QAodnG9lC,CAA6CokD,ICzhBvCa,G,4IAKjB,WAAiCvV,GAAjC,mFACiB,IAAI9oB,IACZuB,QACG,MACA5D,GAAU2B,wBACV,CACIyB,YAAa,KACbZ,gBAAe,OAAE2oB,QAAF,IAAEA,IAAW,OAP5C,mF,iIAkBA,WAAiCtmB,EAAgBuC,GAAjD,mFACiB,IAAI/E,IACZuB,QACG,OACA5D,GAAU8B,yBACV,CACIU,gBAAiB,KACjBY,YAAa,CACTyB,SACAuC,aATpB,mF,mIAoBA,WAAiCu5B,GAAjC,mFACiB,IAAIt+B,IACZuB,QACG,SACA5D,GAAU6B,yBACV,CACIW,gBAAiB,KACjBY,YAAa,CACTu9B,eARpB,mF,wEN1CQvC,K,oDAAAA,E,oEAAAA,E,kDAAAA,E,4DAAAA,E,wEAAAA,E,0EAAAA,E,0DAAAA,E,gEAAAA,E,gFAAAA,E,kEAAAA,E,mFAAAA,Q,KAuDL,IO9DKwC,GP8DCjO,GAAkC,WAC3C,gDAAO,WAAO/2C,EAAoBwP,GAA3B,8BAAA1F,EAAA,2DAIC0F,IAAWy1C,wBAFXC,EAFD,EAECA,wBACA/T,EAHD,EAGCA,WAGJnxC,EAAS,CACLC,KAAMuiD,GAAoB2C,iBAGxBxkC,EAAcnR,IAAWkR,oBAAoBC,YAE7C8vB,EAA+C,CACjDxwC,KAAMuiD,GAAoB4C,uBAC1BtoC,OAAQ,IAGP6D,EAjBF,uBAkBC8vB,EAAe/lC,MAAQ,wBAlBxB,kBAmBQ1K,EAASywC,IAnBjB,kCAuB8B,IAAIjD,IAAkBuJ,YAClB,IAA7B5F,EAAWjmC,OAAOnC,YAAe+Y,EAAY,CAACpV,KAAMykC,IAxBzD,WAuBOkU,EAvBP,OA0BC5U,EAAe3zB,OAASuoC,EAAe96C,MAEjCyX,EAAsBvF,GAAQkE,OACrBqB,GAAUA,EAAMlB,YA7BhC,oBAgCUokC,EAhCV,mCAiCsD,IAAIJ,IAA0BQ,oBAAoB,CAC3F93C,KAAMmT,EAAYhT,GAClBkjC,QAAS,SAnCtB,QAiCe0U,EAjCf,OAqCS9U,EAAe+U,uBAAyBD,EAA+Bh7C,KArChF,eAwCCvK,EAASywC,GAxCV,kBAyCQzwC,EAASylD,OAzCjB,yCA2CChV,EAAe/lC,MAAQ,KAAMge,WA3C9B,kBA4CQ1oB,EAASywC,IA5CjB,0DAAP,yDAsFEgV,GAAgD,WAClD,gDAAO,WAAOzlD,EAAoBwP,GAA3B,8BAAA1F,EAAA,2DAKC0F,IAAWy1C,wBAHX5U,EAFD,EAECA,YACA6U,EAHD,EAGCA,wBACApoC,EAJD,EAICA,OAGE4D,EAAsBlR,IAAWkR,oBACjCC,EAAcD,EAAoBC,YARrC,wDAcG+kC,EAAoC,GAE1C5oC,EAAOjF,KAAI,SAAAkF,GACP,IAAI4oC,GAAkB,EACtB,OAAQtV,GACJ,IAAK,MACD,IAAMruB,EAAsBvF,GAAQkE,GAEhCglC,KADA3jC,IAASA,EAAMlB,cAI4D,IADzDJ,EAAoBK,mBAAmB9X,WACrD,SAAAkY,GAAiB,OAAIA,EAAkBpE,MAAMgO,OAAShO,EAAMgO,cAC7BjJ,IAA5BojC,IAEgF,IADhFA,EAAwBj8C,WACvB,SAAA28C,GAAqB,OAAIA,EAAsB7oC,MAAMgO,OAAShO,EAAMgO,QAEhF,MACJ,IAAK,qBACD46B,GAC2E,IADzDjlC,EAAoBK,mBAAmB9X,WACrD,SAAAkY,GAAiB,OAAIA,EAAkBpE,MAAMgO,OAAShO,EAAMgO,QAChE,MACJ,IAAK,yBACD46B,OAA8C7jC,IAA5BojC,IAEqE,IADhFA,EAAwBj8C,WACvB,SAAA28C,GAAqB,OAAIA,EAAsB7oC,MAAMgO,OAAShO,EAAMgO,QAKhF46B,GACAD,EAAe56C,KAAKiS,MAItBuM,EAA0C,CAC5CrpB,KAAMuiD,GAAoBqD,0BAC1BH,eAAgBA,GAlDjB,kBAoDI1lD,EAASspB,IApDb,2CAAP,yDQ1ISw8B,GAA2B,GAwBlCxmB,GAAmC,CACrCxiB,OAAQ,GACRipC,gBAAgB,EAChBC,eAAe,EAEfC,uBAAuB,EACvB9U,WAAY,GACZd,YAAa,MACbqV,eAAgB,GAEhB9T,YAAa,GAOJsU,GAAmB,SAACpmD,GAC7B,OAAQA,EAAMkmD,eAAiBlmD,EAAMimD,gBAG5BI,GAA4B,SAACrmD,GACtC,OAAOA,EAAMkmD,gBAAkBlmD,EAAMimD,qBAAkCjkC,IAAhBhiB,EAAM4K,OAGpD07C,GAA0B,SAACtmD,GACpC,OAAOA,EAAMmmD,uBAGJI,GAA6B,SAACvmD,GACvC,OAAOqmD,GAA0BrmD,IAAUA,EAAM4lD,eAAe38C,OAAS,GA8BhEu9C,GAAyB,SAACxmD,EAA2B0rB,GAC9D,YAA6C1J,IAAtChiB,EAAMymD,6BAA6CzmD,EAAMymD,8BAAgC/6B,GAOvFg7B,GAA0B,SAAC1mD,EAA2B0rB,GAC/D,YAAgD1J,IAAzChiB,EAAM2mD,gCAAgD3mD,EAAM2mD,iCAAmCj7B,GAsG3Fk7B,GA/Fc,WAAwD,IAAvD5mD,EAAsD,uDAA9Cw/B,GAAchW,EAAgC,uCAChF,OAAQA,EAAOrpB,MACX,KAAKuiD,GAAoB2C,eACrB,OAAO,2BACArlD,GADP,IAEIgd,OAAQ,GACRipC,gBAAgB,EAChBC,eAAe,EACft7C,WAAOoX,IAEf,KAAK0gC,GAAoB4C,uBACrB,IAAMuB,EAA6Dr9B,EACnE,OAAO,2BACAxpB,GADP,IAEIgd,OAAO,aAAK6pC,EAA6B7pC,QACzCooC,6BAAiFpjC,IAAxD6kC,EAA6BnB,uBAA7B,aACfmB,EAA6BnB,wBACjC1lD,EAAMolD,wBACZa,gBAAgB,EAChBC,eAAe,EACfpU,YAAa,EACblnC,WAA8CoX,IAAvC6kC,EAA6Bj8C,MAC9B,CAACqe,OAAQ49B,EAA6Bj8C,OAAS5K,EAAM4K,QAEnE,KAAK83C,GAAoB7P,cACrB,IAAMC,EAA2CtpB,EACjD,OAAO,2BACAxpB,GADP,IAEI,CAAC8yC,EAAoBlmC,MAAOkmC,EAAoB37B,QAExD,KAAKurC,GAAoBoE,mBACrB,OAAO,2BACA9mD,GADP,IAEImmD,uBAAuB,IAE/B,KAAKzD,GAAoBqE,yBACrB,OAAO,2BACA/mD,GADP,IAEIqxC,WAAY,GACZ8U,uBAAuB,IAE/B,KAAKzD,GAAoBqD,0BACrB,IAAMiB,EAAmEx9B,EACzE,OAAO,2BACAxpB,GADP,IAEI4lD,eAAe,aAAKoB,EAAgCpB,gBACpD9T,YAAa,IAErB,KAAK4Q,GAAoBQ,kBACrB,IAAMC,EAAmD35B,EACzD,OAAO,2BACAxpB,GADP,IAEI8xC,YAAaqR,EAAwBtd,OAE7C,KAAK6c,GAAoBuE,qBACrB,IAAMC,EAAyD19B,EAC/D,OAAO,2BACAxpB,GADP,IAEIymD,4BAA6BS,EAA2Bx7B,QACxDy7B,+BAA2BnlC,IAEnC,KAAK0gC,GAAoB0E,6BACrB,IAAMC,EAAyE79B,EAC/E,OAAO,2BACAxpB,GADP,IAEIymD,iCAA6BzkC,EAC7BojC,6BAA8FpjC,IAArEqlC,EAAmCC,8BAAnC,aACfD,EAAmCC,+BACvCtnD,EAAMolD,wBACZ+B,+BAAwEnlC,IAA7CqlC,EAAmCz8C,MACxD,CAACqe,OAAQo+B,EAAmCz8C,OAAS5K,EAAMmnD,4BAEzE,KAAKzE,GAAoB6E,sBACrB,IAAMC,EAA2Dh+B,EACjE,OAAO,2BACAxpB,GADP,IAEI2mD,+BAAgCa,EAA4B97B,QAC5D+7B,gCAA4BzlC,IAEpC,KAAK0gC,GAAoBgF,8BACrB,IAAMC,EAA2En+B,EACjF,OAAO,2BACAxpB,GADP,IAEI2mD,oCAAgC3kC,EAChCojC,6BAA+FpjC,IAAtE2lC,EAAoCL,8BAApC,aACfK,EAAoCL,+BACxCtnD,EAAMolD,wBACZqC,gCAA0EzlC,IAA9C2lC,EAAoC/8C,MAC1D,CAACqe,OAAQ0+B,EAAoC/8C,OAAS5K,EAAMynD,6BAE1E,QACI,OAAOznD,I,wCC1Jb4nD,G,4JACF,WAAU,IAAD,MACL,EAOI1pD,KAAKC,MANL8e,EADJ,EACIA,MACA0D,EAFJ,EAEIA,oBACAC,EAHJ,EAGIA,oBACAukC,EAJJ,EAIIA,wBACA0C,EALJ,EAKIA,kBACAC,EANJ,EAMIA,oBAGEjnC,EAAcD,EAAoBC,YAExC,IAAKA,EACD,OAAO,KAGX,IAI6D,EDDtB7gB,ECHnC+nD,EAA6CnnC,EAAoBK,mBAAmB+mC,MACpF,SAAA3mC,GAAiB,OAAIA,EAAkBpE,MAAMgO,OAAShO,EAAMgO,QAE5Dg9B,GAAqC,EDCtC5B,GADoCrmD,ECCJmlD,SDAsCnjC,IAAlChiB,EAAMolD,0BCCzC6C,GAC+F,KADnE,UAAA9C,EAAwBC,+BAAxB,eACtBj8C,WAAU,SAAA28C,GAAqB,OAAIA,EAAsB7oC,MAAMgO,OAAShO,EAAMgO,UAGxF,OAAO,cAACmqB,GAAA,EAAD,CACHqC,QAAQ,OADL,SAGH,eAACyQ,GAAA,EAAD,WACI,cAAC,GAAD,CACIl7C,IAAKsQ,GAAO8E,0BAAP,UAAiCzB,EAAoBktB,wBAArD,QAAyE,KAAM5wB,EAAM6D,eAC1FrhB,MAAM,QACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACI,cAACyU,GAAA,EAAD,CACIvoD,QACI,WACS+c,GAAQkE,IACTwU,GAA8B,CAC1BlM,OAAQtI,EAAYhT,GACpBub,a9DqCT,E8DpCSC,yBAA0Bvc,GAC1Bwc,mBAAoBrM,EAAMgO,KAC1B1B,gB/CqGmB,2B+CrG8Dpd,QAAQ,UAAW8Q,EAAMkQ,aAC1G3D,OAAQlM,GAAOuB,kBAAkB1S,QAAQ,WAAY8Q,EAAMgO,SAV/E,SAgBI,eAACmqB,GAAA,EAAD,WACI,cAACA,GAAA,EAAD,CACIG,QAAQ,OACRj/B,OAAO,QACPu/B,eAAe,SACfJ,QAAS1gC,KAAO2gC,KAAK,KAJzB,SAMI,cAACt+B,GAAA,EAAD,CACI4f,IAAG,UAAK/Z,EAAMkQ,YAAX,SACH9V,IAAG,UAAE+rC,GAAanmC,UAAf,aAAyB+E,EAC5B1L,OAAO,OACPb,MAAM,OACNpW,MAAO,CACH+U,QAAS,GACTuD,UAAW,kBAKvB,eAACy9B,GAAA,EAAD,CACIgC,SAAS,OACTrB,SAAS,OAFb,UAII,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,YACRiU,MAAM,SACN0wC,QAAM,EAHV,SAKI,4BAAI1mC,EAAMkQ,gBAIT46B,EAEK,eAAC3S,GAAA,EAAD,CACEG,QAAQ,OACRgB,cAAc,MACdj3C,UAAU,OACVk2C,WAAW,SACXK,eAAe,SALjB,UAOE,cAACuS,GAAA,EAAD,CACInkD,SAAS,QACTxE,MAAM,YAEV,cAAC21C,GAAA,EAAD,CACI3/B,MAAM,QAEV,cAACrW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SACN0wC,QAAM,EACNlkD,MAAM,gBAJV,UAOQ,UAAAsd,GAAa6D,EAAoBK,2BAAjC,eAAsDhE,MAAMgO,QAAS88B,EAAY9qC,MAAMgO,KACjF,cACA,uBAxBhB,eAoC1BtO,GAAQkE,IAEFknC,EADA,KAGA,cAACM,GAAA,EAAD,CACEhpD,MAAO,CACH+U,QAAS,GAFf,SAKE,cAACghC,GAAA,EAAD,CACIG,QAAQ,OACR9/B,MAAM,OACNrB,QAAQ,OACRyhC,eAAe,SAJnB,SAOSoS,EAcK,cAACzoD,EAAA,EAAD,CACER,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMkoD,EAAoB7qC,EAAMgO,OACzCtrB,SAAU+mD,GAAwBvB,EAAyBloC,EAAMgO,MAJnE,SAOMy7B,GAAwBvB,EAAyBloC,EAAMgO,MACjD,iBACA,mBAtBZ,cAACzrB,EAAA,EAAD,CACEb,WAAS,EACTK,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMioD,EAAkB5qC,EAAMgO,OACvCtrB,SAAU6mD,GAAuBrB,EAAyBloC,EAAMgO,MALlE,SAQMu7B,GAAuBrB,EAAyBloC,EAAMgO,MAChD,sBACA,4B,GArJ9BnrB,aA6KTC,gBA5LS,SAACC,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3BukC,wBAAyBnlD,EAAMmlD,4BAIZ,SAACjlD,GACxB,MAAO,CACH2nD,kBAAmB,SAACn8B,GAAD,OAAqBxrB,ET4KK,SAACwrB,GAClD,gDAAO,WAAOxrB,EAAoBwP,GAA3B,0BAAA1F,EAAA,yDACG6W,EAAcnR,IAAWkR,oBAAoBC,YADhD,wDAMGynC,EAA4C,CAC9CnoD,KAAMuiD,GAAoBuE,qBAC1Bv7B,WAEJxrB,EAASooD,GAEH3X,EAAqD,CACvDxwC,KAAMuiD,GAAoB0E,8BAb3B,mBAiBwB,IAAIpC,IAA0BuD,oBAAoB1nC,EAAYhT,GAAI6d,GAjB1F,cAiBO3S,EAjBP,OAkBO+sC,EAA+C/sC,EAAStO,KACxD+9C,EAAqE94C,IAAWy1C,wBAAwBC,wBAE1GzU,EAAe2W,mCADmBtlC,IAAlCwmC,EACA,uBACOA,GADP,CAEI1C,IAG2C,CAACA,GAEpD5lD,EAASywC,GA5BV,kBA6BQzwC,EAASylD,OA7BjB,yCA+BChV,EAAe/lC,MAAQ,KAAMge,WA/B9B,kBAgCQ1oB,EAASywC,IAhCjB,0DAAP,wDS7KqDkX,CAAkBn8B,KACnEo8B,oBAAqB,SAACp8B,GAAD,OAAqBxrB,ETiNK,SAACwrB,GACpD,gDAAO,WAAOxrB,EAAoBwP,GAA3B,4BAAA1F,EAAA,yDACG6W,EAAcnR,IAAWkR,oBAAoBC,YADhD,oDAMG4nC,EAA8C,CAChDtoD,KAAMuiD,GAAoB6E,sBAC1B77B,WAEJxrB,EAASuoD,GAEH9X,EAAsD,CACxDxwC,KAAMuiD,GAAoBgF,+BAb3B,SAiBOc,EAAqE94C,IAAWy1C,wBAAwBC,wBAjB/G,0CAmBYllD,EAASywC,IAnBrB,YAuB6B,KAFtB+X,EAAqBF,EAA8Br/C,WACrD,SAAA28C,GAAqB,OAAIA,EAAsB7oC,MAAMgO,OAASS,GAAWo6B,EAAsBp4C,KAAKG,KAAOgT,EAAYhT,OAtB5H,0CAwBY3N,EAASywC,IAxBrB,eA0BK2W,EA1BL,aA0BkEkB,GAC3DG,EAA+BrB,EAA8BoB,GAAoBxgC,QA3BxF,WA4BO,IAAI88B,IAA0B8C,oBAAoBa,EAAc96C,IA5BvE,eA6BCy5C,EAA8B/0C,OAAOm2C,EAAoB,GAEzD/X,EAAe2W,8BAAgCA,EAC/CpnD,EAASywC,GAhCV,kBAiCQzwC,EAASylD,OAjCjB,yCAmCChV,EAAe/lC,MAAQ,KAAMge,WAnC9B,kBAoCQ1oB,EAASywC,IApCjB,0DAAP,wDSlNuDmX,CAAoBp8B,QAiLhE3rB,CAA6C6nD,ICtJtDgB,G,uKAEF,WFzB+B,IAAC5oD,KE0BJ9B,KAAKC,MAAMgnD,yBFzBzBe,eAAkBlmD,EAAMimD,gBE0B9B/nD,KAAKC,MAAM84C,gB,oBAInB,WACI,MAUI/4C,KAAKC,MATLia,EADJ,EACIA,gBACAuI,EAFJ,EAEIA,oBACAC,EAHJ,EAGIA,oBACAukC,EAJJ,EAIIA,wBACAlO,EALJ,EAKIA,YACAlC,EANJ,EAMIA,cACA8T,EAPJ,EAOIA,mBACAC,EARJ,EAQIA,4BACAxE,EATJ,EASIA,kBAGJ,IAAK1jC,EAAoBC,YACrB,OAAO,KAGX,IFxBiC7gB,EEwB3BwkD,GFxB2BxkD,EEwBgBmlD,GFvB3CS,eAAe38C,QAAU+8C,GACxB,EAEPhmD,EAAM4lD,eAAe38C,OAAS+8C,KAAqB,EAC3ChmD,EAAM4lD,eAAe38C,OAAS+8C,GAAoB,EAEE,GAAvDhmD,EAAM4lD,eAAe38C,OAAS+8C,GAAoB,GEkBjDvB,EFf4B,SAACzkD,GACvC,IAAI0kD,EAAYC,EAMhB,OAJAA,GADAD,GAAc1kD,EAAM8xC,YAAc,GAAKkU,IACfA,GAAmB,GAC5BhmD,EAAM4lD,eAAe38C,OAAS,IACzC07C,EAAW3kD,EAAM4lD,eAAe38C,OAAS,GAEtC,CACHy7C,aACAC,YEM0BC,CAA2BO,GAErD,OAAO,eAAC/P,GAAA,EAAD,CACHgC,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAF3C,UAIH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAJ1B,SAMI,cAAC8uB,GAAA,EAAD,CACI5uB,UAAW,EADf,SAGI,eAAC8b,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdf,WAAW,SACXC,QAASnH,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACjExvC,MAAM,QACNs2C,SAAS,OANb,UAQI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,2CAOA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAC8+B,GAAA,EAAD,CACI3/B,MAAM,MACNa,OAAO,OACPm/B,QAAQ,QACRj/B,aAAa,OAJjB,SAMI,cAACm/B,GAAA,EAAD,CACIh3C,WAAS,EACTiO,KAAK,aACLuK,MAAOguC,EAAwB9T,WAC/B91B,YAAY,uBACZzF,SAAUi/B,EACVp1C,UAAW0mD,GAA0BlB,GACrCvP,eACI,cAAC/b,GAAA,EAAD,CACIvqB,SAAS,QADb,SAGI,cAACiG,EAAA,EAAD,CACI3V,QAAS,kBAAMipD,KACflpD,UAAW0mD,GAA0BlB,GAFzC,SAII,cAAC,KAAD,CAAQlhD,SAAS,cAI7B21B,aACK0sB,GAAwBnB,GAEnB,cAACtrB,GAAA,EAAD,CACEvqB,SAAS,MADX,SAGE,cAACiG,EAAA,EAAD,CACI3V,QAAS,kBAAMkpD,KADnB,SAGI,cAAC,KAAD,CAAO7kD,SAAS,cAPtB,kBAoB9B0Y,GAAQiE,EAAoBC,aACtB,KACA,cAACtM,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAACugC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdj3C,UAAU,OAHd,UAKI,eAAC02C,GAAA,EAAD,CACIr3C,WAAS,EACTiO,KAAK,cACLuK,MAAOguC,EAAwB5U,YAC/BvxC,QAAQ,WACRa,OAAO,QACPo2C,MAAO,cAACC,GAAA,EAAD,IACPpgC,SAAUi/B,EACVp1C,UAAW0mD,GAA0BlB,GARzC,UAUI,cAAChP,GAAA,EAAD,CAEIh/B,MAAM,MAFV,uBACQ,OAKR,cAACg/B,GAAA,EAAD,CAEIh/B,MAAM,qBAFV,sBACQ,sBAKR,cAACg/B,GAAA,EAAD,CAEIh/B,MAAM,yBAFV,6BACQ,6BAOZ,cAACi+B,GAAA,EAAD,CACI3/B,MAAM,SAGV,cAACF,EAAA,EAAD,CACI3V,QAAS,kBAAMq3C,KADnB,SAGI,cAACnB,GAAA,EAAD,aASnBsQ,GAAiBjB,GAEZ,cAAC5wC,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACugC,GAAA,EAAD,CACIG,QAAQ,OACRkC,QAAQ,OACR5B,eAAe,SAHnB,SAKI,cAAC,aAAD,CACIp2C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,aAhB7E,KAyBLoX,GAA0BlB,GAEpBoB,GAA2BpB,GAW5B,cAAC/P,GAAA,EAAD,CACE91C,UAAU,OADZ,SAGE,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACN,EAAA,EAAD,UAEQ4wC,EAAwBS,eACnBv6C,MAAMo5C,EAAkBC,WAAYD,EAAkBE,SAAW,GACjE5sC,KAAI,SAAAkF,GAAK,OACN,cAACxI,EAAA,EAAD,CAEIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJk0C,GAAI,EANR,SAQI,cAAC,GAAD,CACI9rC,MAAOA,KARNA,EAAMgO,iBA5BzC,cAACmqB,GAAA,EAAD,CACEqC,QAAQ,OADV,SAGE,cAACr4C,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,KAFZ,gFALF,KAmDLqnD,GAA0BlB,GAED,IAApBX,EACA,KACA,cAACjwC,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACugC,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfv2C,UAAU,OAHd,SAKI,cAACulD,GAAA,EAAD,CACIne,MAAO8d,EACP3e,KAAMsf,EAAwBrT,YAC9BryC,MAAM,UACNqW,SAAUwuC,UArBxB,Y,GA3PMxkD,aA0RbC,gBA7SS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBuI,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3BukC,wBAAyBnlD,EAAMmlD,4BAIZ,SAACjlD,GACxB,MAAO,CACH+2C,YAAa,kBAAM/2C,EAAS+2C,OAC5BlC,cAAe,SAACn8B,GAAD,OAAgB1Y,EV+CU,SAAC0Y,GAC9C,gDAAO,WAAO1Y,EAAoBwP,GAA3B,oBAAA1F,EAAA,sDACG4C,EAAOgM,EAAMyD,OAAOzP,KACpBuK,EAAQyB,EAAMyD,OAAOlF,MAErBqS,EAA8B,CAChCrpB,KAAMuiD,GAAoB7P,cAC1BjmC,KAAMA,EACNuK,MAAOA,GAGXjX,EAASspB,GAEI,gBAAT5c,GACA1M,EAASylD,MAbV,2CAAP,wDUhD4C5Q,CAAcn8B,KACtDiwC,mBAAoB,kBAAM3oD,EVkE9B,yCAAO,WAAOA,EAAoBwP,GAA3B,UAAA1F,EAAA,6DACH9J,EAAS,CACLC,KAAMuiD,GAAoBoE,qBAF3B,kBAII5mD,EAAS+2C,OAJb,2CAAP,0DUjEI6R,4BAA6B,kBAAM5oD,EV0EvC,yCAAO,WAAOA,EAAoBwP,GAA3B,UAAA1F,EAAA,6DACH9J,EAAS,CACLC,KAAMuiD,GAAoBqE,2BAF3B,kBAII7mD,EAAS+2C,OAJb,2CAAP,0DUzEIqN,kBAAmB,SAAC1rC,EAAmCitB,GAApC,OAAqD3lC,EV0I3B,SAAC0Y,EAAmCitB,GACrF,OAAO,SAAC3lC,EAAoBwP,GAKxB,OAAOxP,EAJiC,CACpCC,KAAMuiD,GAAoBQ,kBAC1Brd,KAAMA,KU9IuEye,CAAkB1rC,EAAOitB,QA8RnG9lC,CAA6C6oD,I,oBHlWhD1D,O,+BAAAA,I,qCAAAA,I,mCAAAA,I,yCAAAA,I,qCAAAA,I,0CAAAA,Q,SIEA8D,GJsDSC,G,kIAOjB,WAAuBx+C,GAAvB,mFACiB,IAAIkc,IACZuB,QACG,OACA5D,GAAUO,eACV,CACIiC,gBAAiB,KACjBY,YAAajd,IAP7B,mF,wEI7DQu+C,K,mCAAAA,E,sCAAAA,Q,KAcL,IChBKE,GDgBCC,GAA2C,SAAChpD,EAA6BkP,GAClF,OAAO,SAACnP,EAAoBwP,GAMxB,OAAOxP,EALoC,CACvCC,KAAM6oD,GAAuBI,KAC7BC,aAAclpD,EACdkP,QAASA,O,SCrBT65C,K,kBAAAA,E,mBAAAA,E,cAAAA,E,mBAAAA,Q,KAaZ,ICPYI,GDON9pB,GAAsC,CACxCr/B,KAAM+oD,GAAsBK,QAC5B7qD,MAAM,EACN2Q,QAAS,IAuBEm6C,GApBoB,WAA2D,IAA1DxpD,EAAyD,uDAAjDw/B,GAAchW,EAAmC,uCACzF,OAAQA,EAAOrpB,MACX,KAAK6oD,GAAuBI,KACxB,IAAMK,EAAyDjgC,EAC/D,OAAO,2BACAxpB,GADP,IAEItB,MAAM,EACNyB,KAAMspD,EAA2BJ,aACjCh6C,QAASo6C,EAA2Bp6C,UAE5C,KAAK25C,GAAuBU,MACxB,OAAO,2BACA1pD,GADP,IAEItB,MAAM,IAEd,QACI,OAAOsB,K,SC7BPspD,K,kFAAAA,E,kFAAAA,E,mGAAAA,Q,KAcL,ICdKK,GDcCC,GAAkD,WAC3D,OAAO,SAAC1pD,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAMmpD,GAAgBO,oCEhB5BrqB,GAA+B,CACjCsqB,+BAA+B,EAC/BC,iCAAiC,GAGxBC,GAAoC,SAAChqD,GAC9C,OAAOA,EAAM+pD,iCAmCFE,GA5BU,WAAoD,IAAnDjqD,EAAkD,uDAA1Cw/B,GAAchW,EAA4B,uCACxE,OAAQA,EAAOrpB,MACX,KAAKmpD,GAAgBO,gCACjB,OAAO,2BACA7pD,GADP,IAEI8pD,+BAAgC9pD,EAAM8pD,gCAE9C,KAAKR,GAAgBY,gCACjB,OAAO,2BACAlqD,GADP,IAEI+pD,iCAAiC,EACjCI,0CAAsCnoC,IAE9C,KAAKsnC,GAAgBc,wCACjB,IAAMC,EAA+F7gC,EACrG,OAAO,2BACAxpB,GADP,IAEI8pD,+BAA+B,EAC/BC,iCAAiC,EACjCI,0CAA8FnoC,IAAxDqoC,EAA8Cz/C,MAC9E,CAACqe,OAAQohC,EAA8Cz/C,OACvD5K,EAAMmqD,uCAEpB,QACI,OAAOnqD,ICZbsqD,G,4JACF,WACI,MAMIpsD,KAAKC,MALLokB,EADJ,EACIA,aACAgoC,EAFJ,EAEIA,cACAC,EAHJ,EAGIA,oBACAC,EAJJ,EAIIA,OACAC,EALJ,EAKIA,iBAGJ,OAAO,eAAClsD,EAAA,EAAD,CACHE,KAAM8rD,EAAoBV,8BAC1Bt2C,QAAS,kBAAMi3C,KAFZ,UAIH,cAAC5rD,EAAA,EAAD,UACI,eAACu2C,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,4CAIiCsP,EAJjC,kCAMA,cAAC6yB,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,kFAIuEsP,EAJvE,YAQR,eAAChjB,EAAA,EAAD,WAEQyqD,GAAkCQ,GAC5B,KACA,cAAChrD,EAAA,EAAD,CACEI,QAAS,kBAAM6qD,KACfvlD,UAAWyQ,YAAIxS,GAAakB,mBAF9B,oBAOV,cAAC7E,EAAA,EAAD,CACIC,MAAM,UACNT,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B1E,SAAUqqD,GAAkCQ,GAC5C5qD,QAAS,kBAAM8qD,EAAiBH,IALpC,SAQQP,GAAkCQ,GAAlC,2BAC0BjoC,EAD1B,QAEM,kB,GAzDMziB,aAiErBC,gBA9ES,SAACC,GACrB,MAAO,CACHwqD,oBAAqBxqD,EAAMwqD,wBAIR,SAACtqD,GACxB,MAAO,CACHuqD,OAAQ,kBAAMvqD,EAAS0pD,OACvBc,iBAAkB,SAACC,GAAD,OAAiCzqD,EHAP,SAACyqD,GACjD,gDAAO,WAAOzqD,EAAoBwP,GAA3B,wBAAA1F,EAAA,0DAGC0F,IAAW86C,oBADXT,gCAFD,oDAUClpC,EACAnR,IAAWkR,oBADXC,YAVD,wDAiBGqB,EAAsBvF,GAAQkE,GAEpC3gB,EAAS,CACLC,KAAMmpD,GAAgBY,kCAGpBvZ,EAAgE,CAClExwC,KAAMmpD,GAAgBc,yCAxBvB,SA4BOt4B,EAAsC,CACxC64B,SAAUA,EACVC,OAAQ/pC,EAAYqK,MACpB2/B,SAAS,GAAD,OAAMhqC,EAAqBuiB,UAA3B,YAAyCviB,EAAqBwiB,UACtEynB,gBAAgB,GAAD,OAAK5oC,EAAQ,iBvDPTxU,EuDO+CmT,OvDN9CmB,IAAzBtU,EAAK4D,gBuDM8C,UACvCuP,EAAqBvP,uBADkB,aACxC,EAAuCwpC,YAAc,oBAjChE,WAoCO,IAAImO,IAAkB8B,UAAU,CAClCl5B,UAAWqzB,GAAiB8F,gBAC5Bl5B,UAAWA,IAtChB,eAyCC5xB,EAASywC,GAzCV,kBA0CQzwC,EAASipD,GAAqBD,GAAsBK,QAAS,iBA1CrE,yCA4CC5Y,EAAe/lC,MAAQ,KAAMge,WAC7B1oB,EAASywC,GA7CV,kBA8CQzwC,EAASipD,GAAqBD,GAAsB7hC,MAAOspB,EAAe/lC,SA9ClF,kCvDyBuB,IAAC8C,IuDzBxB,qBAAP,wDGDgEg9C,CAAiBC,QAqEtE5qD,CAA6CuqD,I,oBCxEtDW,G,4JACF,WACI,MAGI/sD,KAAKC,MAFL+sD,EADJ,EACIA,2BACAC,EAFJ,EAEIA,MAGJ,OAAO,cAACC,GAAA,EAAD,CACH1sD,KAAMwsD,EAA2BxsD,KACjC2sD,aAAc,CACVC,SAAU,SACVC,WAAY,UAEhBC,iBAAkB,KAClBh4C,QAAS23C,EACTM,oBAAqBpmD,GACrBqmD,mBAAoB,CAChBC,MAAO,IACPC,KAAM,KAXP,SAcH,cAACC,GAAA,EAAD,CACI7sD,QAAQ,SACR8sD,SAAUZ,EAA2B/qD,KACrCqT,QAAS23C,EAHb,SAKKD,EAA2B77C,gB,GA1BVvP,aAgCnBC,gBA5CS,SAACC,GACrB,MAAO,CACHkrD,2BAA4BlrD,EAAMkrD,+BAIf,SAAChrD,GACxB,MAAO,CACHirD,MAAO,kBAAMjrD,GNOV,SAACA,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAM6oD,GAAuBU,eM2B1B3pD,CAA6CkrD,IAS/C5lD,GAAoBjF,IAAMhC,YAAW,SAACD,EAAmBM,GAApB,OAA4B,cAAC6G,GAAA,EAAD,2BAAWnH,GAAX,IAAkBM,IAAKA,EAChB8G,UAAU,WC1BzFwmD,GAAkB,UAAM1uD,gDAAN,8BAClB2uD,GAA2B,UAAM3uD,gDAAN,2CAC3B4uD,GAA0B,UAAM5uD,gDAAN,0CAE1B6uD,GAAoC,CACtC,CACIt/C,KAAM,wBACNI,IAAI,GAAD,OAAK3P,gDAAL,gDAEP,CACIuP,KAAM,uBACNI,IAAI,GAAD,OAAK3P,gDAAL,6CAEP,CACIuP,KAAM,kCACNI,IAAI,GAAD,OAAK3P,gDAAL,0DAEP,CACIuP,KAAM,mCACNI,IAAI,GAAD,OAAK3P,gDAAL,4DAEP,CACIuP,KAAM,eACNI,IAAI,GAAD,OAAK3P,gDAAL,yCAIL8uD,GAAiC,CACnC,CACIv/C,KAAM,iDACNI,IAAK,+CAET,CACIJ,KAAM,+CACNI,IAAI,GAAD,OAAK3P,gDAAL,qEAEP,CACIuP,KAAM,+CACNI,IAAI,GAAD,OAAK3P,gDAAL,qEAEP,CACIuP,KAAM,oDACNI,IAAK,+CAET,CACIJ,KAAM,qCACNI,IAAK,+CAET,CACIJ,KAAM,wDACNI,IAAK,gDAIPo/C,G,4JACF,WACI,MAGIluD,KAAKC,MAFLia,EADJ,EACIA,gBACAwxC,EAFJ,EAEIA,4BAGJ,OAAO,eAACxU,GAAA,EAAD,CACH9+B,OAAO,OACP0rC,UAAU,QACVvM,QAAS1gC,KAAO2gC,KAAK,KACrB0B,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAL3C,UAOH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GACvBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB2vB,GAAI,CAACtyB,KAAM,EAAG2C,OAAQ,GAL1B,SAOI,cAACC,GAAA,EAAD,UACI,eAAC+b,GAAA,EAAD,CACIhhC,QAAQ,OADZ,UAII,eAACghC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACd9gC,MAAM,OAHV,UAKI,eAAClB,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHoW,MAAO,QAHf,UAMI,cAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJk0C,GAAI,EALR,SAOI,cAAC3T,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACX//B,MAAM,OACNa,OAAO,OALX,SAOI,cAAC,KAAD,CACItJ,IAAKm/C,GAAa,GAAGn/C,IACrBsJ,OAAO,OACPb,MAAM,OACN+F,SAAS,EACTC,UAAU,QAItB,cAAChH,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJk0C,GAAI,EALR,SAOI,eAAC3T,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdV,eAAe,SACfL,WAAW,SACXl/B,OAAO,OACP8gC,SAAS,OANb,UAQI,cAAChC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACr4C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,qCAOJ,cAAC7T,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,mLAYZ,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAC/B,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHoW,MAAO,QAHf,SAMI,cAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJk0C,GAAI,GALR,SAOI,cAACvzC,EAAA,EAAD,QAIR,cAAC4/B,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAC/B,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHoW,MAAO,QAHf,SAMI,cAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJk0C,GAAI,GALR,SAOI,cAAC3pD,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,+pBAmBZ,cAACmiC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,2CAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN7N,UAAU,OAHd,SAKI,+BACI,4EAEI,uBACA,qBAAIjF,KAAK,IAAT,UACI,+BAAI,wCAAJ,qCACA,+BAAI,2CAAJ,oBACA,+BAAI,2CAAJ,kDACA,+BAAI,0CAAJ,6EAKR,uBACA,oEAEI,uBACA,6BACI,iNAOR,uBACA,gEAEI,uBACA,6BACI,2KAMR,uBACA,uGAEI,uBACA,+BACI,4KAKA,0XAUR,uBACA,8DAEI,uBACA,6BACI,2HAQhB,uBACA,eAACf,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,gHAKmB,uHALnB,OAOI,mBACIkkB,KAAK,4EACL9a,OAAO,SAFX,8CAPJ,UAiBJ,cAAC+4B,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,uBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,SAKQ2V,GAAgBn0C,KAAI,SAACvL,GAAD,OAChB,cAAC,GAAD,CAEIQ,IAAKR,EAASQ,IACdqP,OAAO,SACP5c,MAAM,QACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,eAAC0B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SACX9/B,aAAa,OAJjB,UAMI,cAAC22C,GAAA,EAAD,CAAYpoD,SAAS,UACrB,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAACrW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKzG,EAASI,WAtBjBJ,EAASI,cAiClC,cAACwoC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,sBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,SAKQ4V,GAAap0C,KAAI,SAAC8B,EAAY1O,GAAb,OACb,cAACiqC,GAAA,EAAD,CAEI1/B,aAAa,OAFjB,SAII,eAACnB,EAAA,EAAD,CACIlV,MAAO,CACHoW,MAAO,QAFf,UAKI,cAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAAC,KAAD,CACI7H,IAAK6M,EAAM7M,IACXsJ,OAAO,OACPb,MAAM,OACN+F,SAAS,EACTC,UAAU,MAGlB,cAAChH,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,cAACzV,EAAA,EAAD,CACIJ,QAAQ,YACRiU,MAAM,OAFV,SAII,4BAAI4G,EAAMjN,eAhCjBzB,WA2CzB,cAACiqC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,sBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,eAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,UAFV,yMAOI,uBAAK,uBAPT,qSAYI,uBAAK,uBAZT,qKAgBA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,eAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdV,eAAe,SAHnB,UAKI,cAAC,GAAD,CACI7oC,IAAI,yBACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAK00C,GACL/0B,IAAI,cACJvhB,MAAO2C,EAAgBlF,SAAW,IAAM,IACxCoD,OAAQ8B,EAAgBlF,SAAW,IAAM,IACzC7T,MAAO,CACHsY,UAAW,aAK3B,cAACy9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAAC,GAAD,CACIzI,IAAI,sDACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAK20C,GACLh1B,IAAI,oBACJvhB,MAAO2C,EAAgBlF,SAAW,IAAM,IACxCoD,OAAQ8B,EAAgBlF,SAAW,IAAM,IACzC7T,MAAO,CACHsY,UAAW,aAK3B,cAACy9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAAC,GAAD,CACIzI,IAAI,qDACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAK40C,GACLj1B,IAAI,mBACJvhB,MAAO2C,EAAgBlF,SAAW,IAAM,IACxCoD,OAAQ8B,EAAgBlF,SAAW,IAAM,IACzC7T,MAAO,CACHsY,UAAW,gBAM/B,cAACy9B,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SAHf,SAKI,cAACJ,GAAA,EAAD,CACIK,QAAQ,UACRh2C,MAAM,QACN6sD,OAAK,EAHT,SAKI,cAAC9sD,EAAA,EAAD,CACIR,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMgqD,KAHnB,4BASR,cAACxU,GAAA,EAAD,CACI9+B,OAAO,qBAQ/B,cAAC,GAAD,CACIiM,aAAa,aACbgoC,cAKU,2BAId,cAAC,GAAD,W,GAriBSzqD,aA0iBNC,gBAlnBS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBoyC,oBAAqBxqD,EAAMwqD,wBAIR,SAACtqD,GACxB,MAAO,CACH0pD,4BAA6B,kBAAM1pD,EAAS0pD,UAymBrC7pD,CAA6CqsD,IC7mBtDG,G,4JACF,WAAU,IAAD,EACL,EAGIruD,KAAKC,MAFLquD,EADJ,EACIA,SACA7rC,EAFJ,EAEIA,oBAGJ,OAAO,cAACy0B,GAAA,EAAD,CACHqC,QAAQ,OADL,SAGH,cAACyQ,GAAA,EAAD,UACI,cAAC,GAAD,CACIl7C,IAAKsQ,GAAOgF,iCAAP,UACD3B,EAAoBktB,wBADnB,QACuC,KAAM2e,EAAS5/C,MAC3DnN,MAAM,QACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACI,eAAC0B,GAAA,EAAD,WACI,cAACA,GAAA,EAAD,CACIG,QAAQ,OACRj/B,OAAO,QACPu/B,eAAe,SACfJ,QAAS1gC,KAAO2gC,KAAK,KAJzB,SAMI,cAACt+B,GAAA,EAAD,CACI4f,IAAG,UAAKw1B,EAAS5/C,KAAd,SACHyK,IAAKm1C,EAASj/C,KACd+I,OAAO,OACPb,MAAM,OACNpW,MAAO,CACH+U,QAAS,GACTuD,UAAW,kBAKvB,cAACy9B,GAAA,EAAD,CACIgC,SAAS,OACTrB,SAAS,OAFb,SAII,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,YACRiU,MAAM,SACN0wC,QAAM,EAHV,SAKI,4BAAI6I,EAAS5/C,wB,GA/CtB9M,aA0DZC,gBArES,SAACC,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,wBAIR,SAAC1gB,GACxB,MAAO,KA6DIH,CAA6CwsD,IC9CtDE,GAA2B,UAAMpvD,gDAAN,wCAC3BqvD,GAA2B,UAAMrvD,gDAAN,sDAC3BsvD,GAAqB,UAAMtvD,gDAAN,gDACrBuvD,GAAuB,UAAMvvD,gDAAN,kDAEvBwvD,GAAsD,CACxD,CACIjgD,KAAM,gCACNI,IAAI,GAAD,OAAK3P,gDAAL,kEAEP,CACIuP,KAAM,sBACNI,IAAI,GAAD,OAAK3P,gDAAL,wDAEP,CACIuP,KAAM,oDACNI,IAAI,GAAD,OAAK3P,gDAAL,iFAEP,CACIuP,KAAM,kCACNI,IAAI,GAAD,OAAK3P,gDAAL,oEAEP,CACIuP,KAAM,sBACNI,IAAI,GAAD,OAAK3P,gDAAL,wDAEP,CACIuP,KAAM,0BACNI,IAAI,GAAD,OAAK3P,gDAAL,4DAEP,CACIuP,KAAM,iCACNI,IAAI,GAAD,OAAK3P,gDAAL,mEAEP,CACIuP,KAAM,mBACNI,IAAI,GAAD,OAAK3P,gDAAL,sDAILyvD,G,4JACF,WACI,MAGI5uD,KAAKC,MAFLia,EADJ,EACIA,gBACAwxC,EAFJ,EAEIA,4BAGJ,OAAO,eAACxU,GAAA,EAAD,CACH9+B,OAAO,OACP0rC,UAAU,QACVvM,QAAS1gC,KAAO2gC,KAAK,KACrB0B,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAL3C,UAOH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GACvBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB2vB,GAAI,CAACtyB,KAAM,EAAG2C,OAAQ,GAL1B,SAOI,cAACC,GAAA,EAAD,UACI,eAAC+b,GAAA,EAAD,CACIhhC,QAAQ,OADZ,UAII,cAACghC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACd9gC,MAAM,OAHV,SAKI,eAAClB,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHoW,MAAO,QAHf,UAMI,cAAChB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJk0C,GAAI,EALR,SAOI,cAAC3T,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACX//B,MAAM,OACNa,OAAO,OACP8gC,SAAS,OANb,SAQI,cAAChgC,GAAA,EAAD,CACIC,IAAKo1C,GACLz1B,IAAI,wBACJvhB,MAAM,OACNa,OAAO,OACPjX,MAAO,CACHsY,UAAW,eAK3B,cAAClD,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJk0C,GAAI,EALR,SAOI,eAAC3T,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdV,eAAe,SACfL,WAAW,QACXl/B,OAAO,OACP8gC,SAAS,OANb,UAQI,cAAChC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACr4C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,gCAOJ,eAAC7T,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,6DAKI,uBAAK,uBALT,uLASI,uBAAK,uBATT,8VAuBhB,cAACmiC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,wEAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,+BACI,2KAIA,uBACA,0RAMA,uBACA,gNAKA,uBACA,mPAKA,uBACA,4RAMA,uBACA,6QAMA,uBACA,uLAIA,uBACA,kKAGI,uBAAK,uBACL,cAAC,GAAD,CACIpoC,IAAI,8CACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAAC0B,GAAA,EAAD,CACIK,QAAQ,UACRh2C,MAAM,QACN6sD,OAAK,EAHT,SAKI,cAAC9sD,EAAA,EAAD,CACIR,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAFhC,sCAaxB,cAAC+wC,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,uEAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,+BACI,+BACI,oDADJ,8FAIA,uBACA,+BACI,2DADJ,qHAIA,uBACA,+BACI,sDADJ,gJAKA,uBACA,+BACI,gFADJ,+IAKA,uBACA,+BACI,yDADJ,qFAIA,uBACA,+BACI,2CADJ,kHAIA,uBACA,+BACI,6CADJ,2HAIA,uBACA,+BACI,mDADJ,sHASZ,cAACA,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,uBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,SAKQsW,GAAyB90C,KAAI,SAACy0C,GAAD,OACzB,cAAC,GAAD,CAEIx/C,IAAKw/C,EAASx/C,IACdqP,OAAO,SACP5c,MAAM,QACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,eAAC0B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SACX9/B,aAAa,OAJjB,UAMI,cAAC22C,GAAA,EAAD,CAAYpoD,SAAS,UACrB,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAACrW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKu5C,EAAS5/C,WAtBjB4/C,EAAS5/C,cAiClC,cAACwoC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,sBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,eAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,UAFV,gLAMI,uBAAK,uBANT,yKAUA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,eAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdV,eAAe,SAHnB,UAKI,cAAC,GAAD,CACI7oC,IAAI,gDACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAKq1C,GACL11B,IAAI,oBACJvhB,MAAO2C,EAAgBlF,SAAW,IAAM,IACxCoD,OAAQ8B,EAAgBlF,SAAW,IAAM,IACzC7T,MAAO,CACHsY,UAAW,aAK3B,cAACy9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAAC,GAAD,CACIzI,IAAI,2CACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAKs1C,GACL31B,IAAI,cACJvhB,MAAO2C,EAAgBlF,SAAW,IAAM,IACxCoD,OAAQ8B,EAAgBlF,SAAW,IAAM,IACzC7T,MAAO,CACHsY,UAAW,aAK3B,cAACy9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAAC,GAAD,CACIzI,IAAI,qDACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAKu1C,GACL51B,IAAI,gBACJvhB,MAAO2C,EAAgBlF,SAAW,IAAM,IACxCoD,OAAQ8B,EAAgBlF,SAAW,IAAM,IACzC7T,MAAO,CACHsY,UAAW,gBAM/B,cAACy9B,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SAHf,SAKI,cAACJ,GAAA,EAAD,CACIK,QAAQ,UACRh2C,MAAM,QACN6sD,OAAK,EAHT,SAKI,cAAC9sD,EAAA,EAAD,CACIR,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMgqD,KAHnB,4BASR,cAACxU,GAAA,EAAD,CACI9+B,OAAO,qBAQ/B,cAAC,GAAD,CACIiM,aAAa,mBACbgoC,cAKU,2BAId,cAAC,GAAD,W,GA1dkBzqD,aA+dfC,gBAzhBS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBoyC,oBAAqBxqD,EAAMwqD,wBAIR,SAACtqD,GACxB,MAAO,CACH0pD,4BAA6B,kBAAM1pD,EAAS0pD,UAghBrC7pD,CAA6C+sD,IC7gBtDC,GAAwB,UAAM1vD,gDAAN,qCAQxB2vD,GAAgD,CAClD,CACIpgD,KAAM,wBACNI,IAAK,qEACLigD,IAAI,GAAD,OAAK5vD,gDAAL,uDAEP,CACIuP,KAAM,wBACNI,IAAK,qEACLigD,IAAI,GAAD,OAAK5vD,gDAAL,uDAEP,CACIuP,KAAM,iDACNI,IAAK,sDACLigD,IAAI,GAAD,OAAK5vD,gDAAL,4EAEP,CACIuP,KAAM,4DACNI,IAAK,sDACLigD,IAAI,GAAD,OAAK5vD,gDAAL,wFAEP,CACIuP,KAAM,mCACNI,IAAK,8BACLigD,IAAI,GAAD,OAAK5vD,gDAAL,kEAEP,CACIuP,KAAM,gEACNI,IAAK,8BACLigD,IAAI,GAAD,OAAK5vD,gDAAL,+FAIL6vD,G,4JACF,WACI,MAGIhvD,KAAKC,MAFLia,EADJ,EACIA,gBACAwxC,EAFJ,EAEIA,4BAGJ,OAAO,eAACxU,GAAA,EAAD,CACH9+B,OAAO,OACP0rC,UAAU,QACVvM,QAAS1gC,KAAO2gC,KAAK,KACrB0B,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAL3C,UAOH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GACvBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB2vB,GAAI,CAACtyB,KAAM,EAAG2C,OAAQ,GAL1B,SAOI,cAACC,GAAA,EAAD,UACI,eAAC+b,GAAA,EAAD,CACIhhC,QAAQ,OADZ,UAII,cAACghC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACd9gC,MAAM,OAHV,SAKI,cAACrW,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,6BASJ,cAACmiC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAGJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,qDAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,eAACh2C,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,gDAKI,+BACI,oEAGA,gDATR,8MAgBI,uBAAK,uBAhBT,qTAqBI,uBAAK,uBArBT,2CAuBI,uBACA,+BACI,gFAGA,kFAGA,6JAIA,+JAQZ,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,gEAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,eAACh2C,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,qLAOI,uBACA,+BACI,+BACI,2CADJ,oHAIA,+BACI,yCADJ,sFAKA,+BACI,sDADJ,gJAMA,+BACI,wCADJ,4FAIA,+BACI,yCADJ,oHAQZ,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,oEAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,cAACh2C,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,qWAYJ,cAACo2C,GAAA,EAAD,CACI9+B,OAAO,SAGX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,kDAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,eAACh2C,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,iVASI,uBAAK,uBATT,sLAkBR,cAACo2C,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,uBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,SAKQyW,GAAsBj1C,KAAI,SAACy0C,GAAD,OACtB,cAAC,GAAD,CAEIx/C,IAAKw/C,EAASx/C,IACdqP,OAAO,SACP5c,MAAM,QACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,eAAC0B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SACX9/B,aAAa,OAJjB,UAMI,cAAC0B,GAAA,EAAD,CACIC,IAAKm1C,EAASS,IACdj2B,IAAKw1B,EAAS5/C,KACdvN,MAAO,CACHsY,UAAW,WAGnB,cAACy9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAACrW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKu5C,EAAS5/C,WA5BjB4/C,EAAS5/C,cAuClC,cAACwoC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,sBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,eAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,UAFV,mQAOI,uBAAK,uBAPT,2QAYI,uBAAK,uBAZT,oHAeI,+BACI,sDAGA,0DAGA,qEAGA,0EAIJ,uBAAK,uBA7BT,uOAkCA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,UACI,cAAC,GAAD,CACIpoC,IAAI,2BACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAACt8B,GAAA,EAAD,CACIC,IAAK01C,GACL/1B,IAAI,OACJvhB,MAAO2C,EAAgBlF,SAAW,OAAS,IAC3CoD,OAAO,OACPjX,MAAO,CACHsY,UAAW,iBAO/B,cAACy9B,GAAA,EAAD,CACI9+B,OAAO,SAGX,eAAClX,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,UAII,+CACA,uBALJ,4EASA,cAACo2C,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACXl2C,UAAU,OAJd,SAMI,cAAC81C,GAAA,EAAD,CACIK,QAAQ,UACRh2C,MAAM,QACN6sD,OAAK,EAHT,SAKI,cAAC9sD,EAAA,EAAD,CACIR,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMgqD,KAHnB,4BASR,cAACxU,GAAA,EAAD,CACI9+B,OAAO,qBAQ/B,cAAC,GAAD,CACIiM,aAAa,gBACbgoC,cAKU,2BAId,cAAC,GAAD,W,GA5ZezqD,aAiaZC,gBAvdS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBoyC,oBAAqBxqD,EAAMwqD,wBAIR,SAACtqD,GACxB,MAAO,CACH0pD,4BAA6B,kBAAM1pD,EAAS0pD,UA8crC7pD,CAA6CmtD,ICzctDC,GAAqB,UAAM9vD,gDAAN,uCACrB+vD,GAAsB,UAAM/vD,gDAAN,uCAStBgwD,GAA8C,CAChD,CACIzgD,KAAM,mCACNI,IAAK,+GAET,CACIJ,KAAM,6CACNI,IAAK,sDAET,CACIJ,KAAM,cACNI,IAAK,qDAET,CACIJ,KAAM,4BACNI,IAAK,iFAET,CACIJ,KAAM,qCACNI,IAAK,8EAET,CACIJ,KAAM,+CACNI,IAAK,kFAET,CACIJ,KAAM,mDACNI,IAAK,gGAET,CACIJ,KAAM,4CACNI,IAAK,gGAET,CACIJ,KAAM,uBACNI,IAAK,kEAET,CACIJ,KAAM,2CACNI,IAAK,kFAIPsgD,G,4JACF,WACI,MAGIpvD,KAAKC,MAFLia,EADJ,EACIA,gBACAwxC,EAFJ,EAEIA,4BAGJ,OAAO,eAACxU,GAAA,EAAD,CACH9+B,OAAO,OACP0rC,UAAU,QACVvM,QAAS1gC,KAAO2gC,KAAK,KACrB0B,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAL3C,UAOH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GACvBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB2vB,GAAI,CAACtyB,KAAM,EAAG2C,OAAQ,GAL1B,SAOI,cAACC,GAAA,EAAD,UACI,eAAC+b,GAAA,EAAD,CAAKhhC,QAAQ,OAAb,UAEI,cAACghC,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAAS9gC,MAAM,OAAjD,SACI,cAACrW,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,2BAIJ,eAACmiC,GAAA,EAAD,WACI,cAACh2C,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,8RAIA,cAAC,GAAD,CACIgO,IAAI,uCACJqP,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,cAAC0B,GAAA,EAAD,CAAKK,QAAQ,UAAUh2C,MAAM,QAAQg4C,QAAQ,OAAO6U,OAAK,EAAzD,SACI,cAAC9sD,EAAA,EAAD,CAAQR,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAxD,+BAShB,cAAC+wC,GAAA,EAAD,CAAKqC,QAAQ,OAAb,SACI,cAACjiC,EAAA,EAAD,MAEJ,eAAC4/B,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAAlC,UACI,cAACnB,GAAA,EAAD,CAAKqC,QAAQ,OAAb,SACI,cAACr4C,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,0DAIA,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAAlC,6CAGA,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAAlC,wDAGJ,cAACmiC,GAAA,EAAD,CAAKqC,QAAQ,OAAb,SACI,cAACr4C,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,2SAIA,qBAAKwC,MAAM,OAAOa,OAAO,OAAOe,IAAK81C,GAAen2B,IAAI,gBACxD,qBAAKvhB,MAAM,OAAOa,OAAO,OAAOe,IAAK+1C,GAAgBp2B,IAAI,mBAIjE,cAACoe,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,uBAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,SAKQ8W,GAAqBt1C,KAAI,SAACy0C,GAAD,OACrB,cAAC,GAAD,CAEIx/C,IAAKw/C,EAASx/C,IACdqP,OAAO,SACP5c,MAAM,QACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eACI,eAAC0B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SACX9/B,aAAa,OAJjB,UAMI,cAAC22C,GAAA,EAAD,CAAYpoD,SAAS,UACrB,cAACmxC,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAACrW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKu5C,EAAS5/C,WAtBjB4/C,EAAS5/C,cAiClC,cAACwoC,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,MAIJ,eAAC4/B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,sBAMA,eAAC7T,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,UAFV,UAII,uBAAK,uBAJT,mRAQI,uBAAK,uBACL,+BACI,gDAGA,6DAMR,eAAC7T,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,UAII,8CACA,0BAGJ,cAACo2C,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,SACfL,WAAW,SACXl2C,UAAU,OAJd,SAMI,cAAC81C,GAAA,EAAD,CACIK,QAAQ,UACRh2C,MAAM,QACN6sD,OAAK,EAHT,SAKI,cAAC9sD,EAAA,EAAD,CACIR,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMgqD,KAHnB,4BASR,cAACxU,GAAA,EAAD,CACI9+B,OAAO,qBAQ/B,cAAC,GAAD,CACIiM,aAAa,eACbgoC,cAKU,8BAId,cAAC,GAAD,W,GAhOczqD,aAqOXC,gBAvSS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBoyC,oBAAqBxqD,EAAMwqD,wBAIR,SAACtqD,GACxB,MAAO,CACH0pD,4BAA6B,kBAAM1pD,EAAS0pD,UA8RrC7pD,CAA6CutD,ICvR/CC,GAAwB,CACjC,CACI3gD,KAAM,wBACNW,KAAK,GAAD,OAAKlQ,gDAAL,8BACJwoC,KAAM,cAAC,GAAD,KAEV,CACIj5B,KAAM,qBACNW,KAAK,GAAD,OAAKlQ,gDAAL,wCACJwoC,KAAM,cAAC,GAAD,KAEV,CACIj5B,KAAM,gBACNW,KAAK,GAAD,OAAKlQ,gDAAL,qCACJwoC,KAAM,cAAC,GAAD,KAEV,CACIj5B,KAAM,sBACNW,KAAK,GAAD,OAAKlQ,gDAAL,0CACJwoC,KAAM,cAAC,GAAD,MAIR2nB,G,4JACF,WACI,MAGItvD,KAAKC,MAFLia,EADJ,EACIA,gBACAuI,EAFJ,EAEIA,oBAGJ,OAAO,eAACy0B,GAAA,EAAD,CACHgC,SAAUh/B,EAAgBlF,SAAW,OAAS,OAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAF3C,UAIH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAJ1B,SAMI,cAAC8uB,GAAA,EAAD,CACI5uB,UAAW,EADf,SAGI,cAAC8b,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdf,WAAW,SACXC,QAASnH,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACjExvC,MAAM,QACNs2C,SAAS,OANb,SAQI,cAAC32C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,8CAsChB,cAACmiC,GAAA,EAAD,CACI91C,UAAU,OADd,SAGI,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACN,EAAA,EAAD,UAEQg5C,GACKx1C,KAAI,SAAAy0C,GAAQ,OACT,cAAC/3C,EAAA,EAAD,CAEIC,GAAI,GACJC,GAAI,GACJC,GAAI,EAJR,SAMI,cAAC,GAAD,CACI43C,SAAUA,KANTA,EAAS5/C,wB,GAtFlC9M,aAyITC,gBAjLS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBuI,oBAAqB3gB,EAAM2gB,wBAIR,SAACzgB,GACxB,MAAO,KAyKIH,CAA6CytD,ICvHtDC,G,kDAEF,WAAYtvD,GAAQ,IAAD,8BACf,cAAMA,IA6CVuvD,qBAAuB,WACnB,MAMI,EAAKvvD,MALLuP,EADJ,EACIA,KACAigD,EAFJ,EAEIA,2BAEAC,EAJJ,EAIIA,8CAIClgD,GAASA,G7EoCK,I6EpCGA,EAAKvN,MAItBwtD,GAEDC,EAA6ClgD,IA7DlC,EAuEnBmgD,kBAAoB,WAEhB,IAAM9rC,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAKrD,OAAInX,EAAOisC,MAAQrsB,GACR,cAAC,GAAD,IAMP5f,EAAOisC,MAAQnsB,GAEX,qBACIxiC,MAAO,CACHQ,OAAQ,IAFhB,SAKI,cAAC,GAAD,MAQRkiB,EAAOisC,MAAQpsB,GAEX,cAAC,GAAD,IAOJ7f,EAAOisC,MAAQjsB,GAEX,cAAC,GAAD,IAOJhgB,EAAOisC,MAAQ/rB,GAIR,cAAC,GAAD,IAePlgB,EAAOisC,MAAQhsB,GAEX,cAAC,GAAD,SAFR,GAzIe,EAsRnBisB,gBAAkB,WACd,IAEInjC,EAAQ,GAEZ,OAJegjC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAItC80B,KACX,KAAKrsB,GACD7W,EAAQ6W,GACR,MACJ,KAAKE,GACD/W,EAAQ+W,GACR,MACJ,KAAKD,GACD9W,EAAQ8W,GACR,MAIJ,KAAKI,GACDlX,EAAQkX,GACR,MACJ,KAAKD,GACDjX,EAAQiX,GACR,MACJ,KAAKE,GACDnX,EAAQmX,GACR,MACJ,QACI,OAGR,OACI,cAAC7iC,EAAA,EAAD,CAAYJ,QAAQ,KAAKkG,UAAWyQ,YAAIC,GAAOhS,YAA/C,SAA6DknB,KAnTjE,EAAK7Z,WAAa/T,EAASgU,WAHZ,E,qDAMnB,WACI,MAOIhT,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEAZ,EAJJ,EAIIA,2BACAG,EALJ,EAKIA,sCACAK,EANJ,EAMIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAA0BA,GAA2C1nB,EAAM2vB,MAEhK7C,IAEIC,GAAyBG,GACzBl4B,KAAKwvD,yB,gCAIb,SAAmB50B,EAAWC,EAAWhnB,GACrC,MAKI7T,KAAKC,MAJL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,qBAKJJ,EAPA,EAIIA,oBAKAC,GAAyBG,GACzBl4B,KAAKwvD,yB,oBA4Gb,WACI,MAiBIxvD,KAAKC,MAhBLi4B,EADJ,EACIA,oBACAhpB,EAFJ,EAEIA,gBACA6oB,EAHJ,EAGIA,sBAEAgG,EALJ,EAKIA,cACAE,EANJ,EAMIA,YAEA3F,EARJ,EAQIA,WACA+B,EATJ,EASIA,eACA7qB,EAVJ,EAUIA,KACAysB,EAXJ,EAWIA,WAEA9I,EAbJ,EAaIA,cAEAwK,EAfJ,EAeIA,cACAykB,EAhBJ,EAgBIA,oBAGJ,OAAKrqB,EAQAG,EAIDmC,IAAmB4B,EAEf,cAAC,IAAD,CAAU76B,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,aAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OASpByhB,IAAeG,KAAiBjpB,GAASA,G7ExG1B,I6EwGkCA,EAAKvN,KAC/C,cAAC,GAAD,IAIP,cAAC,IAAD,CACI+tD,QACI,cAAC,GAAD,CAAgB3rB,eAAgBrkC,KAAKC,QAEzCgwD,QAAQ,EACRzvD,KAAMy9B,EACNiyB,OAAQnyB,EACRoyB,UAAW,kBAAMxyB,GAAc,IAC/ByyB,aAAW,EACX14C,OAAQ,CAACs4C,QAAS,CAACp5C,gBAAiBC,IAAsBw5C,QAAS,CAACz5C,gBAAiBC,KATzF,SAYI,eAACV,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,UAEI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,IAAD,CAAUyB,OAAQ,GAAIb,MAAM,OAAOL,cAAc,SAC7C/V,MAAO,CACHyV,gBACK1H,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IALhB,SAUI,eAACR,EAAA,EAAD,CAAKlV,MAAO,CAACoW,MAAO,QAASjB,WAAS,EAAtC,UACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAUO,cAAc,SAASK,MAAM,OAAvC,UAEQ,cAACF,EAAA,EAAD,CAAYrQ,UAAWyQ,YAAIxS,GAAaW,kBAAmBlE,QAAS,kBAAMi8B,GAAc,IAAxF,SACI,cAAC,IAAD,MAIJ39B,KAAK+vD,uBAIjB,cAACx5C,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGxV,MAAO,CAAC8V,aAAc,IAAvD,SACI,cAAC,IAAD,CAAUC,cAAc,SAASE,cAAc,QAAQG,MAAM,OAA7D,SACI,cAACF,EAAA,EAAD,CAAY3V,QAAS0gD,EAArB,SACI,cAACkO,EAAA,EAAD,CAAOC,aAAcp9B,EAAcpoB,OAAQxJ,MAAM,YAAYivD,UAAoC,IAAzBr9B,EAAcpoB,OAAtF,SACI,cAAC,IAAD,CAAmB/D,UAAWyQ,YAAIxS,GAAaoB,+BAW3ErG,KAAK2vD,oBAIT,cAAC,GAAD,IAGA,cAAC,EAAD,IAGA,cAAC,GAAD,IAGA,cAAC,GAAD,SA3FD,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUvuD,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,aAAD,CAAY7V,MAAOsV,W,GA5KTjV,aA6TfC,gBAjWS,SAAAC,GACpB,MAAO,CACHi2B,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD6F,cAAej8B,EAAMk8B,iBAAiBD,cACtCE,YAAan8B,EAAMk8B,iBAAiBC,YAEpC3F,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B7qB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WAEvB9I,cAAerxB,EAAMugD,oBAAoBlvB,cAEzCs8B,2BAA4B3tD,EAAM6oC,SAASoR,eAIxB,SAAA/5C,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjCyE,cAAe,SAACC,GAAD,OAAwB57B,EAAS+iC,GAAsCnH,KAEtF8xB,6CAA8C,SAAClgD,GAAD,OAAUxN,EAAS66C,GAA6CrtC,KAI9G4yC,oBAAqB,SAAC1nC,GAAD,OAAW1Y,EAASqiD,GAAyC3pC,QAiU3E7Y,CAA6C0tD,IAEtD73C,GAASxS,IAAWC,OAAO,CAC7BO,WAAY,CACRK,SAAU,GACVJ,WAAY,EACZpE,MAAOsV,MClUT45C,G,4MA0CFjB,qBAAuB,WACnB,MAMI,EAAKvvD,MALLuP,EADJ,EACIA,KACAigD,EAFJ,EAEIA,2BAEAC,EAJJ,EAIIA,8CAIClgD,GAASA,G9EwCO,I8ExCCA,EAAKvN,MAItBwtD,GAEDC,EAA6ClgD,I,EAUrDmgD,kBAAoB,WAEhB,IAAM9rC,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAKrD,OAAInX,EAAOisC,MAAQrsB,GACR,cAAC,GAAD,IAMP5f,EAAOisC,MAAQpsB,GAEX,cAAC,GAAD,IAOJ7f,EAAOisC,MAAQjsB,GAEX,cAAC,GAAD,IAOJhgB,EAAOisC,MAAQ/rB,GAIR,cAAC,GAAD,IAePlgB,EAAOisC,MAAQhsB,GAEX,cAAC,GAAD,SAFR,G,EA4IJisB,gBAAkB,WACd,IAEInjC,EAAQ,GAEZ,OAJegjC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAItC80B,KACX,KAAKrsB,GACD7W,EAAQ6W,GACR,MACJ,KAAKC,GACD9W,EAAQ8W,GACR,MAOJ,KAAKI,GACDlX,EAAQkX,GACR,MACJ,KAAKD,GACDjX,EAAQiX,GACR,MACJ,KAAKE,GACDnX,EAAQmX,GACR,MACJ,QACI,OAGR,OACI,cAAC7iC,EAAA,EAAD,CAAYJ,QAAQ,KAAKkG,UAAWyQ,YAAIC,GAAOhS,YAA/C,SAA6DknB,K,uDAhSrE,WACI,MAOI5sB,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEAZ,EAJJ,EAIIA,2BACAG,EALJ,EAKIA,sCACAK,EANJ,EAMIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAA4BA,GAA6C1nB,EAAM2vB,MAEpK7C,IAEIC,GAAyBG,GACzBl4B,KAAKwvD,yB,gCAIb,SAAmB50B,EAAWC,EAAWhnB,GACrC,MAKI7T,KAAKC,MAJL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,qBAKJJ,EAPA,EAIIA,oBAKAC,GAAyBG,GACzBl4B,KAAKwvD,yB,oBA0Fb,WACI,MAiBIxvD,KAAKC,MAhBLi4B,EADJ,EACIA,oBACAhpB,EAFJ,EAEIA,gBACA6oB,EAHJ,EAGIA,sBAEAgG,EALJ,EAKIA,cACAE,EANJ,EAMIA,YAEA3F,EARJ,EAQIA,WACA+B,EATJ,EASIA,eACA7qB,EAVJ,EAUIA,KACAysB,EAXJ,EAWIA,WAEA9I,EAbJ,EAaIA,cAEAwK,EAfJ,EAeIA,cACAykB,EAhBJ,EAgBIA,oBAGJ,OAAKrqB,EAQAG,EAIDmC,IAAmB4B,EAEf,cAAC,IAAD,CAAU76B,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OASpByhB,IAAeG,KAAiBjpB,GAASA,G9ElFxB,I8EkFgCA,EAAKvN,KAC/C,cAAC,GAAD,IAIP,cAAC,IAAD,CACI+tD,QACI,cAAC,GAAD,CAAgB3rB,eAAgBrkC,KAAKC,QAEzCO,KAAMy9B,EACNiyB,OAAQnyB,EACRoyB,UAAW,kBAAMxyB,GAAc,IAC/ByyB,aAAW,EACXH,QAAQ,EACRv4C,OAAQ,CAACs4C,QAAS,CAACp5C,gBAAiBC,IAAsBw5C,QAAS,CAACz5C,gBAAiBC,KATzF,SAWI,eAACV,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,UAEI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,IAAD,CAAUyB,OAAQ,GAAIb,MAAM,OAAOL,cAAc,SAC7C/V,MAAO,CACHyV,gBACK1H,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IALhB,SASI,eAACR,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACoW,MAAO,QAA9B,UAEI,cAAChB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAUO,cAAc,SAASK,MAAM,OAAvC,UAEQ,cAACF,EAAA,EAAD,CAAYrQ,UAAWyQ,YAAIxS,GAAaW,kBAAmBlE,QAAS,kBAAMi8B,GAAc,IAAxF,SACI,cAAC,IAAD,MAIJ39B,KAAK+vD,uBAMjB,cAACx5C,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGxV,MAAO,CAAC8V,aAAc,IAAvD,SACI,cAAC,IAAD,CAAUC,cAAc,SAASE,cAAc,QAAQG,MAAM,OAA7D,SACI,cAACF,EAAA,EAAD,CAAY3V,QAAS0gD,EAArB,SACI,cAACkO,EAAA,EAAD,CAAOC,aAAcp9B,EAAcpoB,OAAQxJ,MAAM,YAAYivD,UAAoC,IAAzBr9B,EAAcpoB,OAAtF,SACI,cAAC,IAAD,CAAmB/D,UAAWyQ,YAAIxS,GAAaoB,+BAW3ErG,KAAK2vD,oBAIT,cAAC,GAAD,IAGA,cAAC,EAAD,IAGA,cAAC,GAAD,IAGA,cAAC,GAAD,SA5FD,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUvuD,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CAAY7V,MAAOsV,W,GApJPjV,aAuSjBC,gBA9US,SAAAC,GACpB,MAAO,CACHi2B,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD6F,cAAej8B,EAAMk8B,iBAAiBD,cACtCE,YAAan8B,EAAMk8B,iBAAiBC,YAEpCngB,eAAgBhc,EAAM+b,qBAAqBC,eAC3C4yC,qBAAsB5uD,EAAM+b,qBAAqB6yC,qBAEjDp4B,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B7qB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WAEvB9I,cAAerxB,EAAMugD,oBAAoBlvB,cAEzCs8B,2BAA4B3tD,EAAM6oC,SAASoR,eAIxB,SAAA/5C,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjCyE,cAAe,SAACC,GAAD,OAAwB57B,EAAS+iC,GAAsCnH,KAEtF8xB,6CAA8C,SAAClgD,GAAD,OAAUxN,EAAS66C,GAA6CrtC,KAI9G4yC,oBAAqB,SAAC1nC,GAAD,OAAW1Y,EAASqiD,GAAyC3pC,QA2S3E7Y,CAA6C4uD,IAEtD/4C,GAASxS,IAAWC,OAAO,CAC7BO,WAAY,CACRK,SAAU,GACVJ,WAAY,EACZpE,MAAOsV,M,qGCrXF85C,GAAsB,SAAC3jC,GAEhC,MADa,0JACChd,KAAKgd,EAAM9f,OAAO/B,gBAMvB0hD,GAAS,yCAAG,kCAAA/gD,EAAA,6DAEjB8kD,EAFiB,EAEjBA,UACAj9B,EAHiB,EAGjBA,UACApnB,EAJiB,EAIjBA,KAJiB,kBAOd,IAAIP,QAAJ,yCAAY,WAAOC,EAASC,GAAhB,kBAAAJ,EAAA,yDACX+kD,EAAgB,GADL,SATS,IAchBl9B,EALO,gCAOe30B,EAASyS,OAAOkR,YAAY2G,YAAW,GAPtD,OAODD,EAPC,OASPwnC,EAAgB,CACZhnC,QAAS,CACL,cAAiBR,IAXlB,uBAgBLU,KACD+mC,KADC,UAEKF,GAFL,OAEiBxqC,GAAUO,gBACzB,CACIgN,YACAC,UAAWrnB,GAEfskD,GAvBG,gCA0BJ5kD,KA1BI,2DA4BJC,EAAO,EAAD,KA5BF,0DAAZ,0DAPc,2CAAH,sDCFT6kD,GAA2B,2BAC3BC,GAAyB,WAClC,MAAO,CACH/uD,KAAM8uD,KAIDE,GAAkC,kCAQlCC,GAAwC,wCACxCC,GAAwC,wCCDxCC,GAA6B,EAC7BC,GAAiC,EACjCC,GAAyC,EACzCC,GAAiC,EACjCC,GAA0B,EAwBjCC,G,4MAoHFC,kBAAoB,WAChB,MAGI,EAAKzxD,MAFL0xD,EADJ,EACIA,WACAC,EAFJ,EAEIA,oBAGAC,EAAM,CACNh9C,IAAK,GACLtT,MAAO,IAGX,OAAQowD,GACJ,KA7JwB,EA8JpB,OAAO,KACX,KAAKP,GACDS,EAAIh9C,IAAM,cACVg9C,EAAItwD,MAAQ,UACZ,MACJ,KAAK8vD,GACDQ,EAAIh9C,IACA+8C,EAAoBziD,eAAe,kBAAnC,kCjFtBS,IiFwBsByiD,EAAoB3vD,KAAkC,WAAa,SAFlG,8DjFtBS,IiF0B+B2vD,EAAoB3vD,KAAkC,WAAa,SAJ3G,YAKJ4vD,EAAItwD,MAAQ,QACZ,MACJ,KAAK+vD,GACDO,EAAIh9C,IAAM,kDACVg9C,EAAItwD,MAAQ,QACZ,MACJ,KAAKgwD,GACDM,EAAIh9C,IAAM,6CACVg9C,EAAItwD,MAAQ,QACZ,MACJ,KAAKiwD,GACDK,EAAIh9C,IAAM,yCACVg9C,EAAItwD,MAAQ,UAMpB,OACI,cAACL,EAAA,EAAD,CACIK,MAAOswD,EAAItwD,MACXT,QAAQ,YAFZ,SAIK+wD,EAAIh9C,O,4CAlKjB,WACI,MAeI7U,KAAKC,MAdLkC,EADJ,EACIA,aACA2vD,EAFJ,EAEIA,qBACAllC,EAHJ,EAGIA,MACAsY,EAJJ,EAIIA,UACAC,EALJ,EAKIA,SACAnY,EANJ,EAMIA,MACA+kC,EAPJ,EAOIA,SACAC,EARJ,EAQIA,gBAGAhB,GAXJ,EASIW,WATJ,EAUIC,oBAVJ,EAWIZ,wBACAiB,EAZJ,EAYIA,mBACAC,EAbJ,EAaIA,eACGn8C,EAdP,6NAiBA,OACI,eAACzV,EAAA,EAAD,yBAAQC,IAAK4B,EAAc3B,KAAMsxD,EAAsBrxD,WAAS,EAACuV,SAAS,KAAKV,QAAS07C,GAA4Bj7C,GAApH,cACI,cAACrV,EAAA,EAAD,CAAayxD,mBAAiB,EAA9B,SACI,eAAC,IAAD,CAAUj7C,cAAc,SAAxB,UACI,cAAC,IAAD,CAAUC,KAAM,EAAhB,SACI,cAACjW,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAA/C,qCAEJ,cAAC,IAAD,CAAUoC,KAAM,EAAGC,cAAc,QAAjC,SACI,cAACC,EAAA,EAAD,CAAY3V,QAASsvD,EAArB,SACI,cAAC,KAAD,aAKhB,eAACrwD,EAAA,EAAD,CAAeQ,MAAO,CAAEC,UAAW,IAAnC,UACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACrxC,MAAOslD,GAAmBplC,IAAUhe,GAAqB,GAA/E,UACI,cAAC+tC,GAAA,EAAD,oBACA,cAAC7E,GAAA,EAAD,CAAQppC,KAAK,QAAQuK,MAAO2T,EAAOjrB,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,IAAkBpgC,SAAUq6C,EAArF,SAEQrjD,GAAqBiL,KAAI,SAAC+S,EAAOjd,GAAR,OACrB,cAACsoC,GAAA,EAAD,CAEIh/B,MAAO2T,EAFX,SAIKA,GAHIjd,WAUzB,cAACyN,GAAA,EAAD,CACInc,MAAM,aACNoc,YAAY,4BACZ3O,KAAK,YACLuK,MAAOisB,EACPzkC,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOslD,GAAwC,IAArB9sB,EAAUn6B,OACpC6M,SAAUq6C,IAEd,cAAC70C,GAAA,EAAD,CACInc,MAAM,YACNoc,YAAY,2BACZ3O,KAAK,WACLuK,MAAOksB,EACP1kC,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOslD,GAAuC,IAApB7sB,EAASp6B,OACnC6M,SAAUq6C,IAEd,cAAC70C,GAAA,EAAD,CACInc,MAAM,QACNoc,YAAY,uBACZ3O,KAAK,QACLuK,MAAO+T,EACPvsB,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOslD,GAAoC,IAAjBhlC,EAAMjiB,OAChC6M,SAAUq6C,IAEd,cAAC,IAAD,CAAU7wD,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACrxC,MAAOslD,GAAuC,IAApBD,EAAShnD,OAAzD,UACI,cAAC4xC,GAAA,EAAD,wBACA,eAACyV,GAAA,EAAD,CAAY3W,KAAG,EAAC/sC,KAAK,WAAWuK,MAAO84C,EAAUn6C,SAAUq6C,EAA3D,UACI,cAACvW,GAAA,EAAD,CAAkBziC,MjFwBvB,GiFxBmDyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,CAAO9wD,MAAM,YAAaN,MAAM,WACnG,cAACy6C,GAAA,EAAD,CAAkBziC,MjFsBrB,GiFtBmDyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,CAAO9wD,MAAM,YAAaN,MAAM,wBAKrH,cAACI,EAAA,EAAD,UACI,eAAC,IAAD,CAAUkW,MAAM,OAAOY,YAAa,GAAIX,aAAc,GAAIJ,cAAc,QAAQF,cAAc,SAA9F,UAEQlX,KAAK0xD,oBAET,eAACpwD,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUG,QAASwwD,EAAgB1wD,KAAK,SAASwF,UAAWyQ,YAAIxS,GAAakB,mBAAoBhF,MAAO,CAACwE,WAAY,IAAtJ,iBACI,cAAC,KAAD,CAAUI,SAAS,QAAQ5E,MAAO,CAACwE,WAAY,qB,GAvG5C/D,aA0KhBC,gBAhMS,SAAAC,GACpB,MAAO,CACHgwD,qBAAsBhwD,EAAMwwD,uBAAuBR,qBACnDllC,MAAO9qB,EAAMwwD,uBAAuB1lC,MACpCsY,UAAWpjC,EAAMwwD,uBAAuBptB,UACxCC,SAAUrjC,EAAMwwD,uBAAuBntB,SACvCnY,MAAOlrB,EAAMwwD,uBAAuBtlC,MACpC+kC,SAAUjwD,EAAMwwD,uBAAuBP,SACvCC,gBAAiBlwD,EAAMwwD,uBAAuBN,gBAC9CL,WAAY7vD,EAAMwwD,uBAAuBX,WACzCC,oBAAqB9vD,EAAMwwD,uBAAuBV,wBAI/B,SAAA5vD,GACvB,MAAO,CACHiwD,mBAAoB,SAACv3C,GAAD,OAAW1Y,ED7BL,SAAA0Y,GAC9B,MAAO,CACHzY,KAAMgvD,GACNv2C,SC0BwC63C,CAA2C73C,KACnFs2C,uBAAwB,kBAAMhvD,EAASuwD,OACvCL,eAAgB,kBAAMlwD,GDrBnB,SAACA,EAAUwP,GACdxP,EAAS,CACLC,KAAMivD,KAGV,MAMI1/C,IAAW8gD,uBALX1lC,EADJ,EACIA,MACAsY,EAFJ,EAEIA,UACAC,EAHJ,EAGIA,SACAnY,EAJJ,EAIIA,MACA+kC,EALJ,EAKIA,SAGJ,GAAInlC,IAAUhe,GAAqB,IACA,IAA5Bs2B,EAAUh4B,OAAOnC,QACU,IAA3Bo6B,EAASj4B,OAAOnC,QACQ,IAAxBiiB,EAAM9f,OAAOnC,QACc,IAA3BgnD,EAAS7kD,OAAOnC,OAJvB,CAQA/I,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQ6mC,KAUZ,IAAMoB,EAAoBhhD,IAAWC,KAAKjC,KACpCoT,EAAgBpR,IAAW+lB,sBAAsB3U,cACjD1T,EAAkBsC,IAAW+lB,sBAAsBroB,gBACnD4O,EAAiBtM,IAAWqM,qBAAqBC,eAEvDqZ,GACmCnK,GAC9B5gB,MAAK,SAAAyiB,GAEF,IAF8B,EAE1B4jC,GAAgB,EAChBC,GAA+B,EAHL,eAKM7jC,GALN,IAK9B,2BAA8D,CAAC,IAAtDG,EAAqD,QAE1D,GAAIA,EAAwBF,QAAQ/B,OAAS7d,EAAgB6d,KAAM,CAC/D0lC,GAAgB,EAChBzwD,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQ8mC,GACRsB,UAAW3jC,EAAwBD,UAEvC,MAIJ,GhFkFO,IgFlFHC,EAAwBD,QAAQ9sB,MAAiC+sB,EAAwBF,QAAQ/B,OAAS7d,EAAgB6d,KAAM,CAChI2lC,GAA+B,EAC/B1wD,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQ+mC,GACRqB,UAAW,OAEf,QAzBsB,8BA6B1BF,GAIAC,GAKCD,GAEDt7B,GACmBnK,GACd5gB,MAAK,SAAAme,GAEF,GAAIA,EAAOoD,YAAcpD,EAAOpb,eAAe,kBAAoBob,EAAOqD,cACtE5rB,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQ+mC,GACRqB,UAAW,WAJnB,CASA,IAAMC,EAAY5zD,EACbgU,WACAzS,IAAIqO,IACJ9B,OACA0d,IAECuD,EAAc,CAChBnB,MAAOA,EACPsY,UAAWA,EACXC,SAAUA,EACVnY,MAAOA,EAAM7hB,cACblJ,KAAMk+B,SAAS4xB,GAEfriD,OhFMW,EgFJXC,GAAIijD,EAEJC,YAAat/C,KACbya,UAAW9e,EAAgB6d,MAI/B+lC,GACe,CACPlC,UAAW9yC,EAAe8yC,UAC1Bj9B,UDxIJ,ECyIIpnB,KAAM,CACFwmD,UAAW7jD,EAAgB+f,YAC3B+jC,UAAW/2C,G/EsMrB,E+EtMkE/M,GACxD+jD,aAAc/jD,EAAgBgkD,QAC9BlyC,eAAe,GAAD,OAAKlD,EAAeq1C,WAApB,mBAAyCjkD,EAAgB0T,cAAzD,eACd8pC,OAAQ8F,EAAkBxlC,MAC1By/B,SAAU1+B,EAAYf,MACtBomC,aAAa,GAAD,OAAKrlC,EAAYnB,MAAjB,YAA0BmB,EAAYmX,UAAtC,YAAmDnX,EAAYoX,UAC3E4sB,ShFab,IgFZiBhkC,EAAY9rB,KAER,SAEA,WAERoxD,UACIzwC,EAAa,UAEN9E,EAAeq1C,WAFT,mBAE8BvwC,EAF9B,mBAEsDmL,EAAYpe,IAFlE,UAINmO,EAAeq1C,WAJT,mBAI8BplC,EAAYpe,OAGlEvD,MAAK,WAEFpN,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMu/C,GACNp+C,IAAIuZ,GACJ3hB,MAAK,WAGF+qB,GACmB,CACXlM,OAAQunC,EAAkB7iD,GAC1Bub,ahFvDlB,EgFwDkBC,yBAA0Bvc,GAC1Bwc,mBAAoB2C,EAAYpe,GAChC0b,gBjELY,kDiEOHpd,QAAQ,aADb,UAC8B8f,EAAYmX,UAD1C,YACuDnX,EAAYoX,WAC9Dl3B,QAAQ,UAAWiB,EAAgB+f,aACnChhB,QAAQ,ahFtB1C,IgFsBwD8f,EAAY9rB,KAAgC,SAAW,YAEtFqpB,OAAQoH,GACHzkB,QAAQ,UAAW8f,EAAYpe,IAEpCsJ,MAAO8U,IAGf/rB,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQinC,GACRmB,UAAW,OAGf3wD,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,uBACT5P,MAAO,UACP6P,SAAU,iBAIzBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQgnC,GACRoB,UAAW,OAGf3wD,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kBACT5P,MAAO,QACP6P,SAAU,kBAIzBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQgnC,GACRoB,UAAW,OAGf3wD,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kBACT5P,MAAO,QACP6P,SAAU,iBAK7BsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMkvD,GACN5mC,OAAQgnC,GACRoB,UAAW,kBCxBhB9wD,CACXK,IAAMhC,YAAW,SAACD,EAAOM,GAAR,OAAgB,cAAC,GAAD,2BAAsBN,GAAtB,IAA6BkC,aAAc5B,S,uEClOnE+yD,I,OAAyD,0DAUzDC,GAAqC,qCAkErCC,GAA4C,4CA6B5CC,GAA0D,0DAwB1DC,GAAuD,uDAOvDC,GAAiD,iDCzIzCC,G,4IAKjB,gGACiB,IAAInrC,IACZuB,QAAQ,MAAO5D,GAAUC,+BAFlC,mF,mIAQA,WAAoCs/B,GAApC,mFACiB,IAAIl9B,IACZuB,QACG,MACA5D,GAAUG,4BACV,CACIiD,YAAam8B,EACb/8B,gBAAiB,OAPjC,mF,wEhBRQ6iC,K,4CAAAA,E,4DAAAA,E,sEAAAA,E,gEAAAA,E,mFAAAA,Q,KAwBL,IiBzBKoI,GjByBCC,GAAiC,SAACC,GAC3C,OAAO,SAAC/xD,EAAoBwP,GAKxB,OAAOxP,EAJ0B,CAC7BC,KAAMwpD,GAAoBuI,WAC1BD,QAAQ,aAAKA,OAMZE,GAAyC,WAClD,OAAO,SAACjyD,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAMwpD,GAAoByI,wB,SiBtC1BL,K,+EAAAA,E,gGAAAA,Q,KAaL,IChBKM,GCWN7yB,GAA4C,CAC9CqkB,iBAAkB,KAClByO,wBAAwB,EACxBC,yBAAyB,GAGhBC,GAA4B,SAACxyD,GACtC,OAAOA,EAAMuyD,yBAkCFE,GAvBuB,WAAiE,IAAhEzyD,EAA+D,uDAAvDw/B,GAAchW,EAAyC,uCAClG,OAAQA,EAAOrpB,MACX,KAAK4xD,GAA6BW,wBAC9B,OAAO,2BACA1yD,GADP,IAEI6jD,iBAAkB,KAClByO,wBAAwB,EACxBC,yBAAyB,IAEjC,KAAMR,GAA6BY,gCAC/B,IAAMC,EAAyDppC,EAC/D,OAAO,2BACAxpB,GADP,IAEI6jD,iBAAkB+O,EAAe/O,iBACjCyO,wBAAwB,EACxBC,yBAAyB,EACzB3nD,MAAOgoD,EAAehoD,QAE9B,QACI,OAAO5K,ICnCbw/B,GAAmC,CACrCqzB,iBAAiB,EACjBC,UAAW,GACXb,QAAS,GACTc,eAAe,GAGNC,GAAyB,SAAChzD,GACnC,OAAOA,EAAM+yD,eA0CFE,GAvCqB,WAAwD,IAAvDjzD,EAAsD,uDAA9Cw/B,GAAchW,EAAgC,uCACvF,OAAQA,EAAOrpB,MACX,KAAKwpD,GAAoBuI,WACrB,IAAMgB,EAAqC1pC,EAC3C,OAAO,2BACAxpB,GADP,IAEIiyD,QAASiB,EAAiBjB,UAElC,KAAKtI,GAAoByI,mBACrB,OAAO,2BACApyD,GADP,IAEI6yD,iBAAkB7yD,EAAM6yD,gBACxBC,UAAW,KAEnB,KAAKnJ,GAAoBwJ,wBACrB,IAAMC,EAA+D5pC,EACrE,OAAO,2BACAxpB,GADP,IAEI8yD,UAAWM,EAA8Bj8C,QAEjD,KAAKwyC,GAAoB0J,qBACrB,OAAO,2BACArzD,GADP,IAEI+yD,eAAe,EACfO,wBAAoBtxC,IAE5B,KAAK2nC,GAAoB4J,8BACrB,IAAMC,EAAqEhqC,EAC3E,OAAO,2BACAxpB,GADP,IAEI+yD,eAAe,EACfO,wBAA4DtxC,IAAxCwxC,EAA8B5oD,MAC5C,CAACqe,OAAQuqC,EAA8B5oD,OAAS5K,EAAMszD,qBAEpE,QACI,OAAOtzD,ICVbyzD,G,4JACF,WACI,IF9B2CzzD,EE8B3C,EASI9B,KAAKC,MARLy4C,EADJ,EACIA,4BACA8c,EAFJ,EAEIA,wBACAvB,EAHJ,EAGIA,mBACAn4B,EAJJ,EAIIA,cACA25B,EALJ,EAKIA,aACAC,EANJ,EAMIA,aACAC,EAPJ,EAOIA,mBACAC,EARJ,EAQIA,qBAGJ,OFzC2C9zD,EEyCH42C,GFxC/BiN,uBAAoC7hC,IAAhBhiB,EAAM4K,ME4C5B,eAACwqC,GAAA,EAAD,WACH,cAACh2C,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,0BAEA,cAAC21C,GAAA,EAAD,CAAK9+B,OAAO,SAEZ,eAAC9W,EAAA,EAAD,CAAQ0F,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,WAAWY,QAAS,kBAAMuyD,KAA1F,UAESuB,EAAwBb,gBAEnB,cAAC,KAAD,IADA,cAAC,KAAD,IAIV,cAACzd,GAAA,EAAD,CACI3/B,MAAM,QAGLi+C,EAAwBb,gBAEnB,2BADA,oBAMTa,EAAwBb,gBAEnB,eAACzd,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,MAAMf,WAAW,SAASl2C,UAAU,OAAtE,UACE,cAACgc,GAAA,EAAD,CAAWtc,QAAQ,WAAWa,OAAO,QAAQiW,SAAUkkB,IACvD,cAACob,GAAA,EAAD,CAAK3/B,MAAM,SACX,cAACjW,EAAA,EAAD,CAAQ0F,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAM+zD,KAA3G,oBAJF,KAQV,cAACve,GAAA,EAAD,CAAK9+B,OAAO,SAGRo9C,EAAwBzB,QAAQl6C,KAAI,SAAAsjC,GAAM,OACtC,eAACjG,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,MAAMf,WAAW,SAAS9/B,aAAa,OAAzE,UACI,cAACtW,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAA0Cq8C,IAE1C,cAACjG,GAAA,EAAD,CAAK3/B,MAAM,SACX,cAACF,EAAA,EAAD,CAAY3V,QAAS,kBAAMg0D,EAAavY,IAAxC,SACI,cAAC,KAAD,CAAYp3C,SAAS,kBAMrC,eAACmxC,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,MAAMj3C,UAAU,OAAlD,UACI,cAACE,EAAA,EAAD,CAAQ0F,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,WAAWY,QAAS,kBAAMk0D,KAA1F,4BACA,cAAC1e,GAAA,EAAD,CAAK3/B,MAAM,SACX,cAACjW,EAAA,EAAD,CAAQ0F,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAMi0D,KAAsBl0D,SAAUqzD,GAAuBU,GAAlK,SAEQV,GAAuBU,GACjB,aACA,uBAzDX,S,GAdS5zD,aAgFbC,gBAlGS,SAACC,GACrB,MAAO,CACH42C,4BAA6B52C,EAAM42C,4BACnC8c,wBAAyB1zD,EAAM0zD,4BAIZ,SAACxzD,GACxB,MAAO,CACHiyD,mBAAoB,kBAAMjyD,EAASiyD,OACnCn4B,cAAe,SAACphB,GAAD,OAAgD1Y,ErBKtB,SAAC0Y,GAC9C,OAAO,SAAC1Y,EAAoBwP,GAKxB,OAAOxP,EAJuC,CAC1CC,KAAMwpD,GAAoBwJ,wBAC1Bh8C,MAAOyB,EAAMyD,OAAOlF,SqBTgD6iB,CAAcphB,KACtF+6C,aAAc,kBAAMzzD,GrBejB,SAACA,EAAoBwP,GACxB,IAAMuiD,EAAiB,aAAOviD,IAAWgkD,wBAAwBzB,SAC3Da,EAAoBpjD,IAAWgkD,wBAAwBZ,UAG7D,OAFAb,EAAQjnD,KAAK8nD,GACb5yD,EAAS8xD,GAAWC,IACb/xD,EAASiyD,UqBnBhByB,aAAc,SAACvY,GAAD,OAAoBn7C,ErBuBM,SAACm7C,GAC7C,OAAO,SAACn7C,EAAoBwP,GACxB,IAAMuiD,EAAiB,aAAOviD,IAAWgkD,wBAAwBzB,SAC3D9mD,EAAQ8mD,EAAQ9oD,WAAU,SAAA4qD,GAAO,OAAIA,IAAY1Y,KAIvD,OAHe,IAAXlwC,GACA8mD,EAAQ1/C,OAAOpH,EAAO,GAEnBjL,EAAS8xD,GAAWC,KqB9BgB2B,CAAavY,KACxDwY,mBAAoB,kBAAM3zD,ErB4C9B,yCAAO,WAAOA,EAAoBwP,GAA3B,oBAAA1F,EAAA,yDACG65C,EAA4CjnC,KAAKC,MAAMD,KAAKE,UAAUpN,IAAWknC,4BAA4BiN,mBADhH,wDAKGoO,EALH,aAK2BviD,IAAWgkD,wBAAwBzB,SAC3DthB,EAAsD,CACxDxwC,KAAMwpD,GAAoB4J,+BAP3B,SAUC1P,EAAiBvI,QAAU2W,EAC3B/xD,EAAS,CACLC,KAAMwpD,GAAoB0J,uBAZ/B,WAcO,IAAIvB,IAA6BkC,uBAAuBnQ,GAd/D,iCAeQ3jD,EAASywC,IAfjB,yCAiBCA,EAAe/lC,MAAQ,KAAMge,WAC7B1oB,EAASipD,GAAqBD,GAAsB7hC,MAAOspB,EAAe/lC,QAlB3E,kBAmBQ1K,EAASywC,IAnBjB,0DAAP,0DqB3CImjB,qBAAsB,kBAAM5zD,GrBiCzB,SAACA,EAAoBwP,GACxB,IAAMm0C,EAA4Cn0C,IAAWknC,4BAA4BiN,iBACzF,GAAKA,EAGL,OAAO3jD,EAAS8xD,GAAW,aAAInO,EAAiBvI,kBqB8CzCv7C,CAA6C0zD,ICnEtDQ,G,4MAEFC,2BAA6B,SAAAC,GAAG,OAAI,SAACv7C,EAAOw7C,GACxC,EAAKj2D,MAAM+1D,2BAA2BC,EAAKC,K,EAG/CC,yBAA2B,SAAA/V,GAAS,OAAI,SAACiQ,EAAS+F,EAAOC,EAAQj8C,GAC7D,EAAKna,MAAMk2D,yBAAyB/V,EAAWiQ,EAAS+F,EAAOC,EAAQj8C,K,uDAG3E,YAKIk8C,EAFIt2D,KAAKC,MADLq2D,oC,oBAMR,WAAU,IAAD,OACL,EAmBIt2D,KAAKC,MAlBL6d,EADJ,EACIA,eACAy4C,EAFJ,EAEIA,qBAEAC,EAJJ,EAIIA,gBACAC,EALJ,EAKIA,oBACAC,EANJ,EAMIA,kBACAC,EAPJ,EAOIA,kBACAC,EARJ,EAQIA,sBACAC,EATJ,EASIA,qBACAC,EAVJ,EAUIA,mBAEA7E,EAZJ,EAYIA,mBACA8E,EAbJ,EAaIA,sBACAC,EAdJ,EAcIA,mBACAC,EAfJ,EAeIA,4BACAC,EAhBJ,EAgBIA,oBACAC,EAjBJ,EAiBIA,wBACAC,EAlBJ,EAkBIA,gBAGJ,OAAKt5C,GAAmBy4C,EAKpB,eAACpgD,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,IAHjB,UAMI,cAAC,GAAD,IACA,eAACG,EAAA,EAAD,CACIC,WAAS,EADb,UAII,eAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,UACI,cAACzV,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,uCAEA,cAAC,IAAD,CAAUH,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,WACI,cAACkgB,GAAA,EAAD,CAAkBhtC,KAAK,mBACnBitC,QACI,cAACC,GAAA,EAAD,CAAUr6C,MAAM,UAAU0X,MAAOs9C,EAAqB/5C,iBAAkBg+B,QAAS+b,EAAqB/5C,iBAAkB5E,SAAUq6C,IAEtIhxD,MAAM,qBACN46C,eAAe,QAEnB,cAACoC,GAAA,EAAD,6OAWZ,cAAC1nC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAIlF,eAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,UACI,cAACzV,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,gCAEA,cAAC,IAAD,CAAUH,UAAW,GAArB,SACI,cAACgc,GAAA,EAAD,CAAW1O,KAAK,eAAezN,MAAM,gBAAgBgY,MAAOs9C,EAAqBc,aAAc11D,OAAO,SAASb,QAAQ,WAAWL,WAAS,EAACs9C,UAAQ,EAACnmC,SAAUq6C,SAKvK,cAAC17C,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAAEC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAInF,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAGC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAhC,SACI,cAAC,GAAD,MAIJ,cAACJ,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAIlF,eAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,UACI,cAACzV,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,sCAEA,eAACD,EAAA,EAAD,CAAQI,QAASq1D,EAAuBj2D,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBhF,MAAO,CAAEC,UAAW,IAA/H,UAESo1D,EAIG,cAAC,KAAD,CAAWzwD,SAAS,QAAQ5E,MAAO,CAACgX,YAAa,KAFjD,cAAC,KAAD,CAASpS,SAAS,QAAQ5E,MAAO,CAACgX,YAAa,KAKlDq+C,EAIG,wBAFA,iBAOPA,EAIG,eAAC,IAAD,CAAU51D,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACgc,GAAA,EAAD,CAAW1O,KAAK,sBAAsBzN,MAAM,WAAWgY,MAAOw9C,EAAqB90D,OAAO,QAAQb,QAAQ,WAAWL,WAAS,EAACs9C,UAAQ,EAACnmC,SAAUq6C,IAClJ,cAAC70C,GAAA,EAAD,CAAW1O,KAAK,oBAAoBzN,MAAM,SAASgY,MAAOy9C,EAAmB/0D,OAAO,QAAQb,QAAQ,WAAWL,WAAS,EAACs9C,UAAQ,EAACuZ,WAAS,EAACC,QAAS,EAAG3/C,SAAUq6C,EAAoB9wD,MAAO,CAACC,UAAW,MACzM,cAAC,IAAD,CAAUgW,cAAc,QAAQhW,UAAW,GAA3C,SACI,cAACE,EAAA,EAAD,CAAQI,QAASs1D,EAAoBl2D,QAAQ,YAAYS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAArG,sBANR,KAWR,cAAC,IAAD,CAAUvF,QAAM,EAACQ,UAAW,GAA5B,SAESm1D,EAAoB,WAIjBA,EAAoB,WAA6B18C,KAAI,SAAAo8C,GAAG,OACpD,eAACuB,GAAA,EAAD,CAA6Bp8B,UAAW,EAAGp0B,UAAWyQ,YAAIC,GAAO+/C,+BAAgCC,YAAWf,GAAqBV,EAAItmD,KAAOgnD,EAAkBhnD,IAAoBiI,SAAU,EAAKo+C,2BAA2BC,GAA5N,UACI,cAAC0B,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC12D,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAAyC,4BAAIkhD,EAAI4B,eAGrD,cAACC,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAC2W,MAAM,OAAvB,UACI,cAACrW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAA0CkhD,EAAI8B,SAE9C,eAAC,IAAD,CAAU32D,UAAW,GAArB,UACI,eAACE,EAAA,EAAD,CAAQI,QAASu1D,EAA6Bn2D,QAAQ,WAAWS,MAAOo1D,GAAqBA,EAAkBhnD,KAAOsmD,EAAItmD,IAAMinD,EAAwB,UAAY,UAAW5vD,UAAWyQ,YAAIxS,GAAakB,mBAA3M,UAEQwwD,GAAqBA,EAAkBhnD,KAAOsmD,EAAItmD,IAAMinD,EAEpD,cAAC,KAAD,CAAW7wD,SAAS,QAAQ5E,MAAO,CAACgX,YAAa,KAEjD,cAAC,KAAD,CAAYpS,SAAS,QAAQ5E,MAAO,CAAEgX,YAAa,KAGvDw+C,GAAqBA,EAAkBhnD,KAAOsmD,EAAItmD,IAAMinD,EAEpD,iBAEA,UAGZ,eAACt1D,EAAA,EAAD,CAAQI,QAASy1D,EAAyBr2D,QAAQ,WAAWS,MAAM,YAAYyF,UAAWyQ,YAAIxS,GAAakB,mBAAoBhF,MAAO,CAACwE,WAAY,IAAnJ,UACI,cAAC,KAAD,CAAYI,SAAS,QAAQ5E,MAAO,CAAEgX,YAAa,KADvD,eAOAw+C,GAAqBA,EAAkBhnD,KAAOsmD,EAAItmD,IAAMinD,EAEpD,eAAC,IAAD,CAAUh2D,QAAM,EAAC2W,MAAM,OAAOH,cAAc,QAAQhW,UAAW,GAA/D,UACI,cAACgc,GAAA,EAAD,CAAW1O,KAAK,uBAAuBzN,MAAM,WAAWgY,MAAO49C,EAAsBl1D,OAAO,QAAQb,QAAQ,WAAWL,WAAS,EAACs9C,UAAQ,EAACrxC,MAA8C,IAAvCmqD,EAAqB3pD,OAAOnC,OAAc6M,SAAUq6C,IACrM,cAAC70C,GAAA,EAAD,CAAW1O,KAAK,qBAAqBzN,MAAM,SAASgY,MAAO69C,EAAoBn1D,OAAO,QAAQb,QAAQ,WAAWL,WAAS,EAACs9C,UAAQ,EAACuZ,WAAS,EAACC,QAAS,EAAG7qD,MAA4C,IAArCoqD,EAAmB5pD,OAAOnC,OAAc6M,SAAUq6C,EAAoB9wD,MAAO,CAACC,UAAW,MAE1P,cAACE,EAAA,EAAD,CAAQI,QAASw1D,EAAqBp2D,QAAQ,YAAYS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAoBhF,MAAO,CAACC,UAAW,IAA7I,qBAGJ,YA1CC60D,EAAItmD,OAH7B,UAwDhB,cAAC4G,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAAEC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAInF,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAU/V,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,iCAEA,cAAC,IAAD,CAASm3B,GAAIhG,GAAuBvU,OAAO,SAASnX,UAAWyQ,YAAIxS,GAAaQ,4CAA6CtE,MAAO,CAACC,UAAW,IAAhJ,SACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAvE,wCAGJ,cAAC,KAAD,CAAY2/B,MAAM,OAAOluB,SAAU5X,KAAKm2D,yBAAyB,iBAAkB6B,QAASA,GAAS/+C,MAAOs9C,EAAqBpnD,eAAe,iBAAmBonD,EAAqB0B,cAAgB,CAAC5sD,IAAK,IAAKlK,MAAO,CAACC,UAAW,MAEtO,cAAC,IAAD,CAAUA,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,SACI,cAAC9V,EAAA,EAAD,CAAQR,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAM01D,EAAgB,kBAAkBj2D,MAAO,CAACwE,WAAY,IAAjH,yBAMZ,cAAC4Q,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAAEC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAInF,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAU/V,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,+BAEA,cAAC,IAAD,CAASm3B,GAAIhG,GAAqBvU,OAAO,SAASnX,UAAWyQ,YAAIxS,GAAaQ,4CAA6CtE,MAAO,CAAEC,UAAW,IAA/I,SACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAvE,sCAGJ,cAAC,KAAD,CAAY2/B,MAAM,OAAOluB,SAAU5X,KAAKm2D,yBAAyB,cAAe6B,QAASA,GAAS/+C,MAAOs9C,EAAqBpnD,eAAe,cAAgBonD,EAAqB2B,WAAa,CAAC7sD,IAAK,IAAKlK,MAAO,CAACC,UAAW,MAE7N,cAAC,IAAD,CAAUA,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,SACI,cAAC9V,EAAA,EAAD,CAAQR,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAM01D,EAAgB,eAAej2D,MAAO,CAACwE,WAAY,IAA9G,yBAMZ,cAAC4Q,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAIlF,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAU/V,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,gCAGA,eAAC,IAAD,CAAUX,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAAyC,sDACzC,uBACA,eAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOxT,MAAM,gBAA/C,sGAGI,uBAAK,uBAHT,6IAK2D,4BAAG,8CAL9D,IAMI,uBAAK,uBANT,6MAUI,uBAAK,uBACL,4BAAG,4DAXP,qBAYI,sFAZJ,+HAiBA,uBACA,cAAC6b,GAAA,EAAD,CAAWtc,QAAQ,WAAW4N,KAAK,oBAAoB2O,YAAY,2BAA2BpE,MAAOs9C,EAAqB3Q,kBAAmBhuC,SAAUq6C,EAAoBqF,WAAS,EAACC,QAAS,GAAIY,KAAM,QAG5M,cAAC7gD,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,MAE9C,eAAC,IAAD,CAAU5W,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAAyC,oDAEzC,uBAEA,cAAC,IAAD,CAAS2jB,G7EqMb,uB6ErMsCva,OAAO,SAASnX,UAAWyQ,YAAIxS,GAAaQ,4CAA9E,SACI,cAACnE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAvE,sCAGJ,cAAC,KAAD,CAAY2/B,MAAM,OAAOluB,SAAU5X,KAAKm2D,yBAAyB,eAAgB6B,QAASA,GAAS/+C,MAAOs9C,EAAqBpnD,eAAe,eAAiBonD,EAAqB6B,YAAc,CAAC/sD,IAAK,IAAKlK,MAAO,CAACC,UAAW,MAEhO,cAAC,IAAD,CAAUA,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,SACI,cAAC9V,EAAA,EAAD,CAAQR,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAM01D,EAAgB,gBAAgBj2D,MAAO,CAACwE,WAAY,IAA/G,4BAOhB,cAAC4Q,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAAEC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAInF,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAU/V,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,oDAEA,cAAC,IAAD,CAASm3B,GAAIhG,GAA0CvU,OAAO,SAASnX,UAAWyQ,YAAIxS,GAAaQ,4CAA6CtE,MAAO,CAACC,UAAW,IAAnK,SACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAvE,2DAGJ,cAAC,KAAD,CAAY2/B,MAAM,OAAOluB,SAAU5X,KAAKm2D,yBAAyB,iCAAkC6B,QAASA,GAAS/+C,MAAOs9C,EAAqBpnD,eAAe,iCAAmConD,EAAqB8B,8BAAgC,CAAChtD,IAAK,IAAKlK,MAAO,CAACC,UAAW,MAEtR,cAAC,IAAD,CAAUA,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,SACI,cAAC9V,EAAA,EAAD,CAAQR,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAM01D,EAAgB,kCAAkCj2D,MAAO,CAACwE,WAAY,IAAjI,0BAMZ,cAAC4Q,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAAEC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAAGxB,gBAAiBC,QAInF,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAU/V,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,wCAEA,cAAC,IAAD,CAASm3B,G7E2JA,yB6E3JkCva,OAAO,SAASnX,UAAWyQ,YAAIxS,GAAaQ,4CAA6CtE,MAAO,CAACC,UAAW,IAAvJ,SACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAvE,+CAGJ,cAAC,KAAD,CAAY2/B,MAAM,OAAOluB,SAAU5X,KAAKm2D,yBAAyB,wBAAyB6B,QAASA,GAAS/+C,MAAOs9C,EAAqBpnD,eAAe,wBAA0BonD,EAAqB1hC,qBAAuB,CAACxpB,IAAK,IAAKlK,MAAO,CAACC,UAAW,MAE3P,cAAC,IAAD,CAAUA,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,SACI,cAAC9V,EAAA,EAAD,CAAQR,QAAQ,YAAYS,MAAM,UAAUG,QAAS,kBAAM01D,EAAgB,yBAAyBj2D,MAAO,CAACwE,WAAY,IAAxH,+BA1Sb,S,GAzCc/D,aA6VlBC,gBA3XS,SAAAC,GACpB,MAAO,CACHgc,eAAgBhc,EAAM+b,qBAAqBC,eAC3Cy4C,qBAAsBz0D,EAAMw2D,mBAAmB/B,qBAE/CC,gBAAiB10D,EAAMw2D,mBAAmB9B,gBAC1CC,oBAAqB30D,EAAMw2D,mBAAmB7B,oBAC9CC,kBAAmB50D,EAAMw2D,mBAAmB5B,kBAC5CC,kBAAmB70D,EAAMw2D,mBAAmB3B,kBAC5CC,sBAAuB90D,EAAMw2D,mBAAmB1B,sBAChDC,qBAAsB/0D,EAAMw2D,mBAAmBzB,qBAC/CC,mBAAoBh1D,EAAMw2D,mBAAmBxB,uBAI1B,SAAA90D,GACvB,MAAO,CACHs0D,+BAAgC,kBAAMt0D,GP/CnC,SAACA,EAAUwP,GACdxP,EAAS,CACLC,KAAMqxD,GACNx1C,eAAgBtM,IAAWqM,qBAAqBC,qBO6CpDm0C,mBAAoB,SAACv3C,GAAD,OAAW1Y,EPvCL,SAAA0Y,GAC9B,OAAO,SAAC1Y,EAAUwP,GACd,IAAM+kD,EAAuB/kD,IAAW8mD,mBAAmB/B,qBACrDp4C,EAASzD,EAAMyD,OAEjBo6C,GAA6B,EAEjC,OAAQp6C,EAAOlc,MACX,IAAK,WACD,GAAIs0D,EAAqBpnD,eAAegP,EAAOzP,MAO3C,YANA1P,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM8K,EAAOzP,MACb8F,IAAI2J,EAAOq8B,SAIpB,MACJ,IAAK,QACD,GAAI+b,EAAqBpnD,eAAegP,EAAOzP,MAO3C,YANA1P,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM8K,EAAOzP,MACb8F,IAAKtG,MAAMiQ,EAAOlF,OAAkCkF,EAAOlF,MAAhCknB,SAAShiB,EAAOlF,QAIpD,MACJ,IAAK,OAWL,IAAK,WACGs9C,EAAqBpnD,eAAegP,EAAOzP,QAC3C6pD,GAA6B,EAE7Bv5D,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM8K,EAAOzP,MACb8F,IAAI2J,EAAOlF,QAEpB,MACJ,QACI,OAGRjX,EAAS,CACLC,KAAMsxD,GACN7kD,KAAMyP,EAAOzP,KACbuK,MAAuB,aAAhBkF,EAAOlc,KAAsBkc,EAAOq8B,QAAUr8B,EAAOlF,MAC5Ds/C,gCOrBoCC,CAA6C99C,KACrFs7C,2BAA4B,SAACC,EAAKC,GAAN,OAAqBl0D,EPuDf,SAACi0D,EAAKC,GAC5C,OAAO,SAACl0D,EAAUwP,GAEd,IAAMmlD,EAAoBnlD,IAAW8mD,mBAAmB3B,kBAEpDT,EACAl0D,EAAS,CACLC,KAAMwxD,GACNkD,kBAAmBV,EACnBW,uBAAuB,IAGvBD,GAAqBA,EAAkBhnD,KAAOsmD,EAAItmD,IAClD3N,EAAS,CACLC,KAAMwxD,GACNkD,kBAAmB,KACnBC,uBAAuB,KOvEuB4B,CAAqDvC,EAAKC,KACpHa,sBAAuB,kBAAM/0D,EPsF1B,CACHC,KAAM0xD,MOtFNqD,mBAAoB,kBAAMh1D,GP2FvB,SAACA,EAAUwP,GACd,MAGIA,IAAW8mD,mBAFX7B,EADJ,EACIA,oBACAC,EAFJ,EAEIA,kBAGEH,EAAuBhW,OAAOC,OAAO,GAAIhvC,IAAWqM,qBAAqBC,gBAE/E,GAA0C,IAAtC24C,EAAoBvpD,OAAOnC,QAAoD,IAApC2rD,EAAkBxpD,OAAOnC,OAAxE,CAIA,IAAM0tD,EAAM,CACR9oD,GAAI4D,KACJskD,SAAUpB,EACVsB,OAAQrB,GAGRH,EAAoB,WACpBA,EAAoB,WAA6BzpD,KAAK2rD,GAEtDlC,EAAoB,WAA+B,CAACkC,GAGxDz5D,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMzE,IACNohB,OAAOumC,EAAoB,YAC3BnqD,MAAK,WACFpK,EAAS,CACLC,KAAM0xD,aOzHlBsD,4BAA6B,kBAAMj1D,EP6EhC,CACHC,KAAMyxD,MO7ENwD,oBAAqB,kBAAMl1D,GP+HxB,SAACA,EAAUwP,GACd,MAKIA,IAAW8mD,mBAJX/B,EADJ,EACIA,qBACAI,EAFJ,EAEIA,kBACAE,EAHJ,EAGIA,qBACAC,EAJJ,EAIIA,mBAGJ,GAA2C,IAAvCD,EAAqB3pD,OAAOnC,QAAqD,IAArC+rD,EAAmB5pD,OAAOnC,OAA1E,CAIA,IAAM2tD,EAAY,CACd/oD,GAAIgnD,EAAkBhnD,GACtBkoD,SAAUhB,EACVkB,OAAQjB,GAGR7pD,EAAQspD,EAAoB,WAA6BtrD,WAAU,SAAAwtD,GAAG,OAAIA,EAAI9oD,KAAOgnD,EAAkBhnD,MAC3G4mD,EAAoB,WAA6BtpD,GAASyrD,EAE1D15D,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMzE,IACN4F,IAAI+hD,EAAoB,YACxBnqD,MAAK,WACFpK,EAAS,CACLC,KAAMyxD,aO1JlByD,wBAAyB,kBAAMn1D,GPiK5B,SAACA,EAAUwP,GACd,IAAMmlD,EAAoBnlD,IAAW8mD,mBAAmB3B,kBAClDJ,EAAuBhW,OAAOC,OAAO,GAAIhvC,IAAWqM,qBAAqB04C,sBAE3EtpD,EAAQspD,EAAoB,WAA6BtrD,WAAU,SAAAwtD,GAAG,OAAIA,EAAI9oD,KAAOgnD,EAAkBhnD,MAC3G4mD,EAAoB,WAA6BliD,OAAOpH,EAAO,GAE/DjO,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMzE,IACN4F,IAAI+hD,EAAoB,gBO3K7BJ,yBAA0B,SAAC/V,EAAWiQ,EAAS+F,EAAOC,EAAQj8C,GAApC,OAA+CpY,EPoBzC,SAACo+C,EAAWiQ,EAAS+F,EAAOC,EAAQj8C,GACxE,OAAO,SAACpY,EAAUwP,GACyB,IAAnC4I,EAAOomB,UAAUtzB,OAAOnC,OACxB/I,EAAS,CACLC,KAAMuxD,GACNpT,YACAnnC,MAAO,CAAC5N,IAAK,MAGjBrJ,EAAS,CACLC,KAAMuxD,GACNpT,YACAnnC,MAAOmB,EAAOsmB,iBOhC4D83B,CAAmDpY,EAAWiQ,EAAS+F,EAAOC,EAAQj8C,KACxKg9C,gBAAiB,SAAChX,GAAD,OAAep+C,EPqCT,SAAAo+C,GAC3B,OAAO,SAACp+C,EAAUwP,GACdxS,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM+sC,GACN5rC,IAAIhD,IAAW8mD,mBAAmB/B,qBAAqBnW,KO3CnBoY,CAA0CpY,QAiW5Ev+C,CAA6Ck0D,IAEtDiC,GAAU,CACZW,QAAS,CACL,CAAC,CAAC,OAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAC/B,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,cACD,CAAC,CAAC,KAAQ,WAAY,CAAC,KAAQ,UAAW,CAAC,OAAU,MAAO,CAAC,OAAU,MAAO,CAAC,MAAS,KACxF,CAAC,CAAC,OAAU,OAAQ,CAAC,OAAU,UAC/B,CAAC,CAAC,MAAS,IAAK,CAAC,WAAc,KAC/B,CAAC,OAAQ,SACT,CAAC,WAIHjhD,GAASxS,IAAWC,OAAO,CAC7BsyD,8BAA+B,CAC3BxxD,OAAO,aAAD,OAAe4Q,IACrBzV,UAAW,M,UC3aNw3D,GAA0D,0DAU1DC,GAA+B,+BAyI/BC,GAA0D,0DAwB1DC,GAAuD,uDAOvDC,GAAiD,iDAyHjDC,GAAoD,oDA4BpDC,GAA4C,4CCrPnDC,G,4MAEFnD,2BAA6B,SAAAC,GAAG,OAAI,SAACv7C,EAAOw7C,GACxC,EAAKj2D,MAAM+1D,2BAA2BC,EAAKC,K,uDAG/C,YAKIkD,EAFIp5D,KAAKC,MADLm5D,qC,oBAMR,WACI,MAkCIp5D,KAAKC,MAjCL2iB,EADJ,EACIA,cACAyL,EAFJ,EAEIA,aACAgrC,EAHJ,EAGIA,sBAIApG,GAPJ,EAKIn1C,eALJ,EAOIm1C,cACAqG,EARJ,EAQIA,iBACA30D,EATJ,EASIA,aACAC,EAVJ,EAUIA,eAgBAqtD,GA1BJ,EAYIuE,gBAZJ,EAaIC,oBAbJ,EAcIC,kBAdJ,EAeIC,kBAfJ,EAgBIC,sBAhBJ,EAiBIC,qBAjBJ,EAkBIC,mBAlBJ,EAoBIC,sBApBJ,EAqBIC,mBArBJ,EAsBIC,4BAtBJ,EAuBIC,oBAvBJ,EAwBIC,wBAxBJ,EA0BIlF,oBACAsH,EA3BJ,EA2BIA,6BACAC,EA5BJ,EA4BIA,0BACAC,EA7BJ,EA6BIA,mCACAC,EA9BJ,EA8BIA,iBACAC,EA/BJ,EA+BIA,0BACAC,EAhCJ,EAgCIA,UACAC,EAjCJ,EAiCIA,mBAGJ,OAAKR,EAKD,cAACljD,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,IAAlC,SACI,eAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,UAEI,eAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,UACI,cAACzV,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,kCAIA,cAAC,IAAD,CAAUH,UAAW,GAAIoW,aAAc,GAAvC,SACI,cAAC,IAAD,CACIkhB,GACI9V,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYogB,EAAatB,MAEpG2F,GAA4CzkB,QAAQ,WAAYogB,EAAatB,MAErF/lB,UAAWyQ,YAAIxS,GAAaO,uDARhC,SAUI,eAAClE,EAAA,EAAD,CAAQ0F,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,WAAWS,MAAM,UAAjF,UACI,cAAC,KAAD,CAAYJ,MAAO,CAACgX,YAAa,KADrC,kCAQR,eAAC,IAAD,CAAUvX,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACgc,GAAA,EAAD,CAAW1O,KAAK,cAAcuK,MAAOqgD,EAAkBx4D,QAAQ,WAAWG,MAAM,oBAAoBq2D,WAAS,EAACC,QAAS,EAAGY,KAAM,EAAGvgD,SAAUq6C,IAE7I,eAAC,IAAD,CAAU16C,MAAM,OAAOH,cAAc,QAAQhW,UAAW,GAAxD,UACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMi4D,EAA0B,gBAAgBx4D,MAAO,CAAEgX,YAAa,GAA1J,oBAGA,cAAC7W,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMg4D,EAAiB,cAAeJ,IAAmB73D,SAAU4sB,EAAalB,cAAgBmsC,EAAkBn4D,MAAO,CAACwE,WAAY,GAA3O,wBAOR,eAAC,IAAD,CAAUvE,UAAW,GAAIR,QAAM,EAA/B,UACI,eAAC46B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAAC2c,GAAA,EAAD,CAAWnc,MAAM,UAAUoc,YAAY,mBAAmB3O,KAAK,UAAUuK,MAAOg6C,EAAcxyD,WAAS,EAACkB,OAAO,QAAQb,QAAQ,WAAWi9C,UAAQ,EAACnmC,SAAUq6C,EACzJvlD,MACmC,IAA/BumD,EAAa/lD,OAAOnC,QAChBkoD,EAAa/lD,OAAOnC,OAAS,IAAMkR,GAAoBg3C,KAGhC,IAA/BA,EAAa/lD,OAAOnC,QAAgBkR,GAAoBg3C,GAEpD,KAEA,cAAC/xD,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAAQwT,MAAM,OAAhD,oCAMZ,eAAC,IAAD,CAAUwC,MAAM,OAAOH,cAAc,QAAQhW,UAAW,GAAxD,UACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMi4D,EAA0B,YAAYx4D,MAAO,CAACgX,YAAa,GAArJ,oBAGA,cAAC7W,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMg4D,EAAiB,UAAWzG,IACnIxxD,SACI4sB,EAAa6kC,UAAYD,GACS,IAA/BA,EAAa/lD,OAAOnC,QACnBkoD,EAAa/lD,OAAOnC,OAAS,IAAMkR,GAAoBg3C,GAE/D9xD,MAAO,CAACwE,WAAY,GANxB,wBAaR,cAAC,IAAD,CAAUvE,UAAW,GAAIR,QAAM,EAA/B,SACI,cAAC46B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,SACI,cAAC2c,GAAA,EAAD,CAAWnc,MAAM,2BAA2BR,WAAS,EAACkB,OAAO,QAAQb,QAAQ,WAAWg5D,WAAW,kKAAkK7gD,MAAQ9Z,gDAAmCigB,GAAOiE,qBAAqBT,SAKpV,eAAC,IAAD,CAAUxhB,UAAW,GAAIR,QAAM,EAA/B,UACI,eAAC,IAAD,CAAUsW,cAAc,SAAxB,UACI,cAACkG,GAAA,EAAD,CAAW2gC,UAAQ,EAACrvC,KAAK,eAAe5N,QAAQ,WAAWa,OAAO,QAAQV,MAAM,gBAAgBgY,MAAOtU,EAAa2gC,cAAe1tB,SAAUq6C,IAGzIh2C,GAA0BtX,GAEtB,cAAC,IAAD,CAAU4S,MAAO,GAAIa,OAAQ,GAAIzS,WAAY,GAAIxE,MAAO,CAACyV,gBAAiBjS,KAE1E,QAKRsX,GAA0BtX,GAEtB,KAEA,cAACzD,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAAQwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,GAA1E,2BAKR,eAAC,IAAD,CAAUmW,MAAM,OAAOnW,UAAW,GAAlC,UACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMm4D,EAAmB,iBAAiB14D,MAAO,CAAEgX,YAAa,GAApJ,oBAGA,cAAC7W,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMk4D,EAAU,iBACjHn4D,UAAWwa,GAA0BtX,IAAiB0pB,EAAa6G,SAASvwB,eAAiBA,EAC7FxD,MAAO,CAACwE,WAAY,GAFxB,wBASR,eAAC,IAAD,CAAUvE,UAAW,GAAIR,QAAM,EAA/B,UACI,eAAC,IAAD,CAAUsW,cAAc,SAAxB,UACI,cAACkG,GAAA,EAAD,CAAW2gC,UAAQ,EAACrvC,KAAK,iBAAiB5N,QAAQ,WAAWa,OAAO,QAAQV,MAAM,kBAAkBgY,MAAOrU,EAAe0gC,cAAe1tB,SAAUq6C,IAG/Ih2C,GAA0BrX,GAEtB,cAAC,IAAD,CAAU2S,MAAO,GAAIa,OAAQ,GAAIzS,WAAY,GAAIxE,MAAO,CAACyV,gBAAiBhS,KAE1E,QAKRqX,GAA0BrX,GAEtB,KAEA,cAAC1D,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAAQwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,GAA1E,2BAKR,eAAC,IAAD,CAAUmW,MAAM,OAAOnW,UAAW,GAAlC,UACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMm4D,EAAmB,mBAAmB14D,MAAO,CAACgX,YAAa,GAArJ,oBAGA,cAAC7W,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMk4D,EAAU,mBACjHn4D,UAAWwa,GAA0BrX,IAAmBypB,EAAa6G,SAAStwB,iBAAmBA,EACjGzD,MAAO,CAAEwE,WAAY,GAFzB,2BAUZ,cAAC4Q,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAClDxB,gBACKyX,EAIGA,EAAa6G,SAASvwB,aAFtBkS,QAOpB,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAU/V,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,qCAUsB,QAAlBqhB,EAEI,KAEA,eAAC,IAAD,CAAUhiB,QAAM,EAACQ,UAAW,GAA5B,UACI,cAAC,KAAD,CACI24D,QAAM,EACNt5D,WAAS,EACTK,QAAQ,SACRk5D,aAAa,WACb/4D,MAAM,qCACNg5D,OAAO,aACPC,QAASj+C,GAAsC,GAC/ChD,MACKogD,EAAsBlqD,eAAe,0BAIlCkqD,EAAsBc,uBAFtBl+C,GAAsC,GAI9Cm+C,oBAAqB,CAAChpD,SAAU,SAChC1E,QACI2sD,EAAsBlqD,eAAe,2BAEgB,OAAjDkqD,EAAsBc,wBACnBjsD,MAAMmrD,EAAsBc,yBAIvCviD,SAAU2hD,IAGd,eAAC,IAAD,CAAUhiD,MAAM,OAAOnW,UAAW,GAAlC,UACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS+3D,EAAoCt4D,MAAO,CAACgX,YAAa,GAA7I,oBAGA,cAAC7W,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS83D,EACjG/3D,WACI43D,EAAsBlqD,eAAe,4BAEgB,OAAjDkqD,EAAsBc,wBACnBjsD,MAAMmrD,EAAsBc,yBAE3B9rC,EAAa6G,SAAS/lB,eAAe,2BAClCkqD,EAAsBlqD,eAAe,2BACrCkf,EAAa6G,SAASilC,yBAA2Bd,EAAsBc,wBAItFh5D,MAAO,CAACwE,WAAY,GAbxB,qBAmBJ,cAAC2R,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,QAStE,cAAC,IAAD,CAAUhX,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,WACI,cAACt6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,4FAGA,eAAC62B,GAAA,EAAD,CAAY1jD,KAAK,oBAAoBuK,MAAOogD,EAAsBgB,kBAAkB3vC,WAAY9S,SAAUq6C,EAA1G,UACI,cAACvW,GAAA,EAAD,CAAkBziC,M3F/MhB,G2F+M2DyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,IAAUpxD,MAAM,YAClG,cAACy6C,GAAA,EAAD,CAAkBziC,M3F/Mb,G2F+M2DyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,IAAUpxD,MAAM,eACrG,cAACy6C,GAAA,EAAD,CAAkBziC,M3F/MjB,G2F+M2DyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,IAAUpxD,MAAM,mBAM7G,cAACqW,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,UA8ClE,cAAC7B,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,GAAIY,OAAQ,EAClDxB,gBACKyX,EAIGA,EAAa6G,SAASvwB,aAFtBkS,aAzTrB,S,GApDcjV,aAwXlBC,gBAtaS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3CyL,aAAcvsB,EAAMy1B,sBAAsBroB,gBAC1CmqD,sBAAuBv3D,EAAMw4D,mBAAmBjB,sBAEhDv7C,eAAgBhc,EAAM+b,qBAAqBC,eAE3Cm1C,aAAcnxD,EAAMw4D,mBAAmBpH,QACvCoG,iBAAkBx3D,EAAMw4D,mBAAmBntC,YAC3CxoB,aAAc7C,EAAMw4D,mBAAmB31D,aACvCC,eAAgB9C,EAAMw4D,mBAAmB11D,eAEzC4xD,gBAAiB10D,EAAMw4D,mBAAmB9D,gBAC1CC,oBAAqB30D,EAAMw4D,mBAAmB7D,oBAC9CC,kBAAmB50D,EAAMw4D,mBAAmB5D,kBAC5CC,kBAAmB70D,EAAMw4D,mBAAmB3D,kBAC5CC,sBAAuB90D,EAAMw4D,mBAAmB1D,sBAChDC,qBAAsB/0D,EAAMw4D,mBAAmBzD,qBAC/CC,mBAAoBh1D,EAAMw4D,mBAAmBxD,uBAI1B,SAAA90D,GACvB,MAAO,CACHo3D,gCAAiC,kBAAMp3D,GD3DpC,SAACA,EAAUwP,GACdxP,EAAS,CACLC,KAAM22D,GACN75C,MAAOvN,IAAW+lB,sBAAsBroB,sBCyD5C+iD,mBAAoB,SAACv3C,GAAD,OAAW1Y,EDnDL,SAAA0Y,GAC9B,OAAO,SAAC1Y,EAAUwP,GACd,IAAMtC,EAAkBsC,IAAW+lB,sBAAsBroB,gBACnDmqD,EAAwB7nD,IAAW8oD,mBAAmBjB,sBACtDl7C,EAASzD,EAAMyD,OAEjBo8C,GAA8B,EAE9BC,EAAc,KACdC,GAAuB,EAE3B,OAAQt8C,EAAOlc,MACX,IAAK,WACGo3D,EAAsBlqD,eAAegP,EAAOzP,QAC5C+rD,GAAuB,EACvBD,EAAcr8C,EAAOq8B,SAEzB,MACJ,IAAK,QACG6e,EAAsBlqD,eAAegP,EAAOzP,QAC5C+rD,GAAuB,EACvBD,EAAetsD,MAAMiQ,EAAOlF,OAAkCkF,EAAOlF,MAAhCknB,SAAShiB,EAAOlF,QAEzD,MACJ,IAAK,OACmB,iBAAhBkF,EAAOzP,MACY,mBAAhByP,EAAOzP,MACP2qD,EAAsBlqD,eAAegP,EAAOzP,QAE/C6rD,GAA8B,EAC9BE,GAAuB,EACvBD,EAAcr8C,EAAOlF,OAEzB,MACJ,IAAK,WACGogD,EAAsBlqD,eAAegP,EAAOzP,QAC5C6rD,GAA8B,GAElC,MACJ,QACI,OAGJE,GACAtjC,GACkC,CAC1BpK,KAAM7d,EAAgB6d,KACtBiI,MAAO7W,EAAOzP,KACduK,MAAOuhD,IAEV9lD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,+CACT5P,MAAO,QACP6P,SAAU,cAK1BpP,EAAS,CACLC,KAAM42D,GACNnqD,KAAMyP,EAAOzP,KACbuK,MAAuB,aAAhBkF,EAAOlc,KAAsBkc,EAAOq8B,QAAUr8B,EAAOlF,MAC5DshD,iCCboCG,CAA6ChgD,KAErFg/C,iBAAkB,SAAC1kC,EAAO/b,GAAR,OAAkBjX,ED8NZ,SAACgzB,EAAO/b,GACpC,OAAO,SAACjX,EAAUwP,GACd,IAAMuN,EAAQvN,IAAW+lB,sBAAsBroB,gBAE/ClQ,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM0L,EAAMgO,MACZ1Z,MAAM2hB,GACNxgB,IAAIyE,ICvOoCyhD,CAA2C1lC,EAAO/b,KAC/F0gD,0BAA2B,SAAC3kC,GAAD,OAAWhzB,ED2OL,SAACgzB,GACtC,OAAO,SAAChzB,EAAUwP,GACd,IAAMuN,EAAQvN,IAAW+lB,sBAAsBroB,gBAE/ClN,EAAS,CACLC,KAAMg3D,GACNvqD,KAAMsmB,EACN/b,MAAO8F,EAAMiW,MClP8B0lC,CAAoD1lC,KAEnG4kC,UAAW,SAAC5kC,GAAD,OAAWhzB,EDqPL,SAAAgzB,GACrB,OAAO,SAAChzB,EAAUwP,GACd,IAAMuN,EAAQvN,IAAW+lB,sBAAsBroB,gBACzC3N,EAAkB,iBAAVyzB,EAA2BxjB,IAAW8oD,mBAAmB31D,aAAe6M,IAAW8oD,mBAAmB11D,eAEpH5F,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM0L,EAAMgO,MACZ1Z,MAAM,YACNA,MAAM2hB,GACNxgB,IAAIjT,EAAM+jC,gBChQgBo1B,CAAoC1lC,KACnE6kC,mBAAoB,SAAC7kC,GAAD,OAAWhzB,EDoQL,SAAAgzB,GAC9B,OAAO,SAAChzB,EAAUwP,GACd,IAAMuN,EAAQvN,IAAW+lB,sBAAsBroB,gBACzC3N,EAAkB,iBAAVyzB,EAA2BjW,EAAMmW,SAASvwB,aAAeoa,EAAMmW,SAAStwB,eAEtF5C,EAAS,CACLC,KAAMi3D,GACNlkC,QACAzzB,WC5QoCm5D,CAA6C1lC,KACrFukC,6BAA8B,SAAC9uD,GAAD,OAAUzI,EDWJ,SAAAyI,GACxC,OAAO,SAACzI,EAAUwP,GAEVxP,EADAyI,GAAiB,iBAATA,EACC,CACLxI,KAAM42D,GACN0B,6BAA6B,EAC7B7rD,KAAM,yBACNuK,MAAO0hD,KAKN,CACL14D,KAAM42D,GACN0B,6BAA6B,EAC7B7rD,KAAM,yBACNuK,MACKxO,EAIGA,EAAKX,UAFL,QC9BqC4wD,CAAuDjwD,KACxG+uD,0BAA2B,kBAAMx3D,GDqC9B,SAACA,EAAUwP,GAEd,IAAMtC,EAAkBsC,IAAW+lB,sBAAsBroB,gBACnD0rD,EAAgBppD,IAAW8oD,mBAAmBjB,sBAEpDliC,GACkC,CAC1BpK,KAAM7d,EAAgB6d,KACtBiI,MAAO,yBACP/b,MAAO2hD,EAAcT,yBAExBzlD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,+CACT5P,MAAO,QACP6P,SAAU,kBCpDtBqoD,mCAAoC,kBAAMz3D,GD2DvC,SAACA,EAAUwP,GACd,IAAMtC,EAAkBsC,IAAW+lB,sBAAsBroB,gBAEzDlN,EAAS,CACLC,KAAM42D,GACN0B,6BAA6B,EAC7B7rD,KAAM,yBACNuK,MACK/J,EAAgBgmB,SAAS/lB,eAAe,0BAIrCD,EAAgBgmB,SAASilC,uBAFzB5mD,GAAwC,SCnEpDyiD,2BAA4B,SAACC,EAAKC,GAAN,OAAqBl0D,ED2Ef,SAACi0D,EAAKC,GAC5C,OAAO,SAACl0D,EAAUwP,GAEd,IAAMmlD,EAAoBnlD,IAAW8oD,mBAAmB3D,kBAEpDT,EACAl0D,EAAS,CACLC,KAAM62D,GACNnC,kBAAmBV,EACnBW,uBAAuB,IAGvBD,GAAqBA,EAAkBhnD,KAAOsmD,EAAItmD,IAClD3N,EAAS,CACLC,KAAM62D,GACNnC,kBAAmB,KACnBC,uBAAuB,KC3FuB8D,CAAqDzE,EAAKC,KACpHa,sBAAuB,kBAAM/0D,ED0G1B,CACHC,KAAM+2D,MC1GNhC,mBAAoB,kBAAMh1D,GD+GvB,SAACA,EAAUwP,GACd,MAGIA,IAAW8oD,mBAFX7D,EADJ,EACIA,oBACAC,EAFJ,EAEIA,kBAGExnD,EAAkBsC,IAAW+lB,sBAAsBroB,gBAEnDmqD,EAAwB9Y,OAAOC,OAAO,GAAIhvC,IAAW8oD,mBAAmBjB,uBAE9E,GAA0C,IAAtC5C,EAAoBvpD,OAAOnC,QAAoD,IAApC2rD,EAAkBxpD,OAAOnC,OAAxE,CAIA,IAAM0tD,EAAM,CACR9oD,GAAI4D,KACJskD,SAAUpB,EACVsB,OAAQrB,GAGR2C,EAAqB,WACrBA,EAAqB,WAA6BvsD,KAAK2rD,GAEvDY,EAAqB,WAA+B,CAACZ,GAGzDz5D,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMnE,EAAgB6d,MACtB1Z,MAAM,YACNA,MAAMzE,IACN4F,IAAI6kD,EAAqB,YACzBjtD,MAAK,WACFpK,EAAS,CACLC,KAAM+2D,aCjJlB/B,4BAA6B,kBAAMj1D,EDiGhC,CACHC,KAAM82D,MCjGN7B,oBAAqB,kBAAMl1D,GDuJxB,SAACA,EAAUwP,GACd,MAKIA,IAAW8oD,mBAJXjB,EADJ,EACIA,sBACA1C,EAFJ,EAEIA,kBACAE,EAHJ,EAGIA,qBACAC,EAJJ,EAIIA,mBAGE5nD,EAAkBsC,IAAW+lB,sBAAsBroB,gBAEzD,GAA2C,IAAvC2nD,EAAqB3pD,OAAOnC,QAAqD,IAArC+rD,EAAmB5pD,OAAOnC,OAA1E,CAIA,IAAM2tD,EAAY,CACd/oD,GAAIgnD,EAAkBhnD,GACtBkoD,SAAUhB,EACVkB,OAAQjB,GAGR7pD,EAAQosD,EAAqB,WAA6BpuD,WAAU,SAAAwtD,GAAG,OAAIA,EAAI9oD,KAAOgnD,EAAkBhnD,MAC5G0pD,EAAqB,WAA6BpsD,GAASyrD,EAE3D15D,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMnE,EAAgB6d,MACtB1Z,MAAM,YACNA,MAAMzE,IACN4F,IAAI6kD,EAAqB,YACzBjtD,MAAK,WACFpK,EAAS,CACLC,KAAM82D,aCtLlB5B,wBAAyB,kBAAMn1D,GD6L5B,SAACA,EAAUwP,GACd,IAAMmlD,EAAoBnlD,IAAW8oD,mBAAmB3D,kBAClD0C,EAAwB9Y,OAAOC,OAAO,GAAIhvC,IAAW8oD,mBAAmBjB,uBAExEnqD,EAAkBsC,IAAW+lB,sBAAsBroB,gBAErDjC,EAAQosD,EAAqB,WAA6BpuD,WAAU,SAAAwtD,GAAG,OAAIA,EAAI9oD,KAAOgnD,EAAkBhnD,MAC5G0pD,EAAqB,WAA6BhlD,OAAOpH,EAAO,GAEhEjO,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMnE,EAAgB6d,MACtB1Z,MAAM,YACNA,MAAMzE,IACN4F,IAAI6kD,EAAqB,mBCgLvBx3D,CAA6Cs3D,I,IAE7Cj0D,IAAWC,OAAO,CAC7BsyD,8BAA+B,CAC3BxxD,OAAO,aAAD,OAAe4Q,IACrBzV,UAAW,M,QChdEy5D,G,4JACjB,WACI,MAGI76D,KAAKC,MAFLkR,EADJ,EACIA,QACA6tC,EAFJ,EAEIA,UAGJ,OACI,cAACF,GAAA,EAAD,CACIC,QAAS,CAAC,QAAS,SACnBC,UAAWA,EACXC,MAAI,EACJC,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAE,kBAAaqvC,GADnB,SAGK7tC,IARb,SAYI,cAAC,KAAD,CACIpL,SAAS,QACT5E,MAAO,CACHI,MAAOsV,Y,GAvBUjV,aCW5Bk5D,GAAwB,wBACxBC,GAAiC,iCA4BjCC,GAAmC,mCAiDnCC,GAAwC,wCA4H/CC,GAAyB,SAAC,GAU1B,IAREC,EAQH,EARGA,mBACAC,EAOH,EAPGA,WACAC,EAMH,EANGA,yBACAC,EAKH,EALGA,eACAC,EAIH,EAJGA,cACAC,EAGH,EAHGA,YACAC,EAEH,EAFGA,uBAGAC,EAAsB,GAuG1B,OArGAP,EAAmBvuD,SAAQ,SAAAmhB,GACvB,IAAI4tC,GAAoC,EACpCC,GAA0B,EAC1BC,GAA8B,EAC9BC,GAAuB,EAG3B,OAAQT,GACJ,KAAKU,GACDJ,GAAoC,EACpC,MACJ,K7F9F8B,M6F+FtB5tC,EAAYre,SACZisD,GAAoC,GAExC,MACJ,K7FrG+B,M6FsGvB5tC,EAAYre,SACZisD,GAAoC,GAQhD,OAAQL,GACJ,K7FrFiB,M6FsFTvtC,EAAY9rB,OACZ25D,GAA0B,GAE9B,MACJ,K7FzFe,M6F0FP7tC,EAAY9rB,OACZ25D,GAA0B,GAE9B,MACJ,KAAK,EACDA,GAA0B,EAOlC,OAAQL,GACJ,KAAKS,GACDH,GAA8B,EAC9B,MACJ,KAAKI,GACGR,EACIA,EAAuB1uC,OAASgB,EAAYC,YACT,IAAhCD,EAAYgd,kBAEf8wB,GAA8B,GAGlCA,GAA8B,EAElC,MACJ,KAAKK,GACGT,EACIA,EAAuB1uC,OAASgB,EAAYC,YACT,IAAhCD,EAAYgd,kBAEf8wB,GAA8B,GAGlCA,GAA8B,EAQtB,SAAhBL,EACIztC,EAAYC,YAAcwtC,IAC1BM,GAAuB,GAK3BA,GAAuB,EAGvBH,GACGC,GACAC,GACAC,GAEHJ,EAAoB5uD,KAAKihB,MAId,OAAfqtC,IACAM,EAAsBA,EAAoBx4C,QACtC,SAAA6K,GAAW,OAAIA,EAAYf,MAAM7hB,cAAcwC,SAASytD,EAAWluD,OAAO/B,mBAI3EuwD,GAGES,GAA4B,4BAQ5BC,GAAqC,qCAmFrCC,GAA6E,6EAuD7EC,GAA6C,6CA0DtDC,GAAuB,KAEdC,GAAwB,wBCtfxBT,IAAkC,EAElCC,GAA2B,EAC3BC,GAAsB,EACtBC,GAA0B,EAkDjCO,G,4MAqCFj1B,YAAc,WACV,MAKI,EAAKvnC,MAJLyxB,EADJ,EACIA,aACAgrC,EAFJ,EAEIA,mBAEAC,EAJJ,EAIIA,qCAGAjrC,GAAgBgrC,GAChBC,K,EA4VRC,uBAAyB,WACrB,MAcI,EAAK38D,MAbL2iB,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBACA8U,EAHJ,EAGIA,MACA04C,EAJJ,EAIIA,mBACAhB,EALJ,EAKIA,oBACAmB,EANJ,EAMIA,iBACAC,EAPJ,EAOIA,wBACAC,EARJ,EAQIA,yBACA1B,EATJ,EASIA,yBACAC,EAVJ,EAUIA,eACAE,EAXJ,EAWIA,YACAD,EAZJ,EAYIA,cACAyB,EAbJ,EAaIA,aAGAC,EAAuB,GAE3B,GAAmC,IAA/BvB,EAAoB3wD,OACpB,OACI,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CAAWE,QAAS,GAApB,SACI,cAAC,IAAD,CAAU9F,MAAO,CAAEQ,OAAQ,IAAKyV,cAAc,SAASF,cAAc,SAArE,SAEQwlD,EAEI,cAACx7D,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,SAEQgoD,GACG1B,IAA6BU,IACV,IAAnBT,GACgB,SAAhBE,GACAD,IAAkBS,GAEjB,+DAEA,oBAIZ,cAAC,aAAD,CAAYz6D,MAAOsV,WAQ/C,IAAIqmD,EAAgCxB,EAAoBx4C,QACpD,SAAA1T,GAAI,OAAIA,EAAKL,eAAe,gBAAuC,SAArBK,EAAKqjD,eAEvDqK,EAA8BxjD,MAAK,SAACyjD,EAAOC,GACvC,OAAOA,EAAMvK,YAAcsK,EAAMtK,eAGrC,IAAIwK,EAA8B3B,EAAoBx4C,QAClD,SAAA1T,GAAI,OAAIA,EAAKL,eAAe,gBAAuC,SAArBK,EAAKqjD,eAcvD,OAZAwK,EAA4B3jD,MAAK,SAACyjD,EAAOC,GACrC,OAAOA,EAAME,oBAAsBH,EAAMG,wBAIzCL,EADA1B,IAAkBU,GACE,aAAOiB,GACpB3B,IAAkBW,GACL,aAAOmB,GAEP,uBAAOH,GAAP,aAAyCG,KAQzDJ,EACK9vD,MAAM0vD,EAAmBC,EAAyBD,EAAmBC,EAA0BA,GAC/FjjD,KAAI,SAAAkU,GAAW,OACZ,eAAC+Z,GAAA,EAAD,CAAUtL,OAAK,EAAf,UAEI,cAACz1B,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,eAAC,IAAD,CAAUrG,QAAM,EAAhB,UAEI,cAAC,IAAD,CACI83B,GACI3K,EAAY5e,eAAe,kBAEvByT,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,UAAW8f,EAAY4D,gBAEpCe,GACKzkB,QAAQ,UAAW8f,EAAY4D,gBAExC/O,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,UAAW8f,EAAYpe,IAEpC+iB,GACKzkB,QAAQ,UAAW8f,EAAYpe,IAEhD3I,UAAWyQ,YAAIxS,GAAaQ,4CAtBhC,SAwBI,cAACvE,EAAA,EAAD,CAAYK,MAAM,UAAUwT,MAAM,OAAlC,SAEQgZ,EAAY5e,eAAe,gBAA3B,UAEO4e,EAAY6D,aAAasT,UAFhC,YAE6CnX,EAAY6D,aAAauT,UAFtE,UAIOpX,EAAYmX,UAJnB,YAIgCnX,EAAYoX,c9FrclD,I8F4cFpX,EAAYre,QAMRsU,EAAMlB,aACDkB,EAAMlB,YACJ5T,GACAA,EAAgB6d,OAASgB,EAAYC,UAP5C,KAYI,cAAC,IAAD,CAAU5sB,UAAW,GAArB,SACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWU,KAAK,QAAQD,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMs7D,EAAajvC,IAApI,6BAMZ/J,EAAMlB,WAEF,KAEA,cAAC5hB,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAAgBJ,MAAO,CAAEC,UAAW,IAAnF,SAEQ2sB,EAAY5e,eAAe,gBACI,SAA5B4e,EAAY8kC,YAEX,cAEA,yBAQ5B,cAAC9rD,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,eAAC,IAAD,CAAUrG,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQy6B,UAAWvX,EAAMlB,WAA1D,SAAuEiL,EAAYf,QAG/EhJ,EAAMlB,WAEF,eAAC,IAAD,CAAUliB,QAAM,EAAhB,UACI,eAACM,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,UAA+D,4BAAG,8CAAlE,IAA0FwsB,EAAYpe,MAEjGoe,EAAY5e,eAAe,kBAIxB,eAACjO,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,UAA+D,4BAAG,uCAAlE,IAAmFwsB,EAAY4D,kBAF/F,QAMZ,UAOX3N,EAAMlB,WAIH,cAAC/b,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,eAAC,IAAD,CAAUrG,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQy6B,WAAS,EAAlD,SACKxN,EAAYe,QAAQG,cAGzB,cAAC/tB,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,SAEQwsB,EAAY5e,eAAe,gBACI,SAA5B4e,EAAY8kC,YAEX,cAEA,yBAfpB,KAuBR,cAAC9rD,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAQjU,QAAQ,QAAlC,S9F7gBL,I8F+gBaitB,EAAY9rB,KAER,SAEA,eAMhB,cAAC8E,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAEoC,SAA5BitB,EAAY8kC,aAER9kC,EAAY5e,eAAe,wBACY,SAApC4e,EAAYuvC,oBAHnB,wCAMqC/pD,GAA6Bwa,EAAY8kC,cAE9C,SAA5B9kC,EAAY8kC,YAAZ,qBAEkBt/C,GAA6Bwa,EAAY8kC,cAF3D,+BAI4Bt/C,GAA6Bwa,EAAYuvC,0BAMrF,cAACv2D,GAAA,EAAD,CAAWE,QAAS,EAApB,SAAwB,EAAKs2D,oCAAoCxvC,KAGjE,cAAChnB,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAESitB,EAAY5e,eAAe,cAIvB4e,EAAYgd,gBAAb,oBAIiBx3B,GAA6Bwa,EAAYyvC,aAJ1D,wBAEqBjqD,GAA6Bwa,EAAYyvC,aAJ9D,WA9KCzvC,EAAYpe,OALzC,M,EAwMZ4tD,oCAAsC,SAAAxvC,GAElC,IAAI0vC,EAAS,CACT5oD,IAAK,GACLtT,MAAO,IAGX,OAAQwsB,EAAYre,QAChB,K9F/mB+B,E8FgnB3B+tD,EAAO5oD,IAAM,iBACb4oD,EAAOl8D,MAAQ,QACf,MACJ,K9FjnB8B,E8FknB1Bk8D,EAAO5oD,IAAP,kB9FzlBa,I8FylBWkZ,EAAY9rB,KAAkC,WAAa,UACnFw7D,EAAOl8D,MAAQ,UACf,MACJ,K9FtnBqC,E8FunBjCk8D,EAAO5oD,IAAM,mBACb4oD,EAAOl8D,MAAQ,QACf,MACJ,K9FxnB4B,E8FynBxBk8D,EAAO5oD,IAAM,OACb4oD,EAAOl8D,MAAQ,QACf,MACJ,K9F3nBkC,E8F4nB9Bk8D,EAAO5oD,IAAM,aACb4oD,EAAOl8D,MAAQ,QACf,MACJ,QACI,OAAO,KAGf,OACI,cAACL,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAOk8D,EAAOl8D,MAAvD,SAA+Dk8D,EAAO5oD,O,uDA3rB9E,WACI,MAMI7U,KAAKC,MALLyxB,EADJ,EACIA,aACAgrC,EAFJ,EAEIA,mBACAgB,EAHJ,EAGIA,wBAEAjsC,EALJ,EAKIA,kBAGAC,GAAiBgsC,GAA4BhB,GAC7CjrC,IAGJzxB,KAAKwnC,gB,gCAGT,SAAmB5M,EAAWC,EAAWhnB,GACrC,MAMI7T,KAAKC,MALLyxB,EADJ,EACIA,aACAgrC,EAFJ,EAEIA,mBACAgB,EAHJ,EAGIA,wBAEAjsC,EALJ,EAKIA,kBAGAC,GAAiBgsC,GAA4BhB,GAC7CjrC,IAGJzxB,KAAKwnC,gB,oBAmBT,WACI,MAoBIxnC,KAAKC,MAnBL+jB,EADJ,EACIA,MAEAq3C,EAHJ,EAGIA,yBACAC,EAJJ,EAIIA,eACAC,EALJ,EAKIA,cACAC,EANJ,EAMIA,YACAmC,EAPJ,EAOIA,sBACAZ,EARJ,EAQIA,yBAEAa,EAVJ,EAUIA,aACAC,EAXJ,EAWIA,aACAC,EAZJ,EAYIA,cACAC,EAbJ,EAaIA,wCAEA/M,EAfJ,EAeIA,uBACAgN,EAhBJ,EAgBIA,iBACA/L,EAjBJ,EAiBIA,mBACAgM,EAlBJ,EAkBIA,YACAC,EAnBJ,EAmBIA,qCAGJ,OACI,eAAC,IAAD,CAAUt9D,QAAM,EAAC2W,MAAM,OAAvB,UACI,cAACD,EAAA,EAAD,CAASnW,MAAO,CAACqW,aAAc,MAI3BwM,EAAMlB,WAEF,KAEA,cAACzM,EAAA,EAAD,CAAKlV,MAAO,CAACqW,aAAc,IAA3B,SACI,cAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,EAAGC,GAAI,GAAxB,SACI,eAACrV,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAASsvD,EAApG,UACI,cAAC,KAAD,CAAK7vD,MAAO,CAAEgX,YAAa,GAAIZ,MAAO,GAAIa,OAAQ,UADtD,iCAOhB,eAAC/B,EAAA,EAAD,WAEI,cAACE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SACI,eAAC6kB,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAAC09D,GAAA,EAAD,UACI,cAACj9D,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,UAAUwT,MAAM,OAAlD,mCAEJ,eAAC+iC,GAAA,EAAD,CAAQn2C,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,CAAeomB,WAAY,EAAG1vD,KAAK,6BAE7DvN,MAAO,CAACC,UAAW,GAAImW,MAAO,QAC9B7I,KAAK,2BACLuK,MAAOoiD,EACPzjD,SAAUq6C,EALd,UAMI,cAACha,GAAA,EAAD,CAAUh/B,MAAO8iD,GAAjB,kBACA,cAAC9jB,GAAA,EAAD,CAAUh/B,M9FrDC,E8FqDX,4BACA,cAACg/B,GAAA,EAAD,CAAUh/B,M9FpDA,E8FoDV,4BAMZ,cAAC1C,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SACI,eAAC6kB,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAAC09D,GAAA,EAAD,UACI,cAACj9D,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,UAAUwT,MAAM,OAAlD,yBAEJ,eAAC+iC,GAAA,EAAD,CAAQn2C,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,CAAeomB,WAAY,EAAG1vD,KAAK,mBAE7DvN,MAAO,CAAEC,UAAW,GAAImW,MAAO,QAC/B7I,KAAK,iBACLuK,MAAOqiD,EACP1jD,SAAUq6C,EALd,UAMI,cAACha,GAAA,EAAD,CAAUh/B,MAAO,EAAjB,iBACA,cAACg/B,GAAA,EAAD,CAAUh/B,M9F7Cb,E8F6CG,sBACA,cAACg/B,GAAA,EAAD,CAAUh/B,M9F7Cf,E8F6CK,4BAOP+K,EAAMlB,WAgCH,cAACvM,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SACI,eAAC6kB,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAAC09D,GAAA,EAAD,UACI,cAACj9D,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,UAAUwT,MAAM,OAAlD,qBAEJ,eAAC+iC,GAAA,EAAD,CAAQn2C,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,CAAeomB,WAAY,EAAG1vD,KAAK,cAAcjN,UAAWo8D,IAEtF18D,MAAO,CAACC,UAAW,GAAImW,MAAO,QAC9B7I,KAAK,cACLuK,MAAOuiD,EACP5jD,SAAUq6C,EALd,UAMI,cAACha,GAAA,EAAD,CAAUh/B,MAAM,OAAhB,SAES4kD,EAIG,MAFA,sBAJe,QAUtBA,EAIGD,EAAa/jD,KAAI,SAAAkF,GAAK,OAClB,cAACk5B,GAAA,EAAD,CAAUh/B,MAAO8F,EAAMgO,KAAvB,SAA+ChO,EAAMkQ,aAAnBlQ,EAAMgO,SAH5C,aArDpB,cAACxW,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SACI,eAAC,IAAD,CAAUO,cAAc,SAAxB,UACI,eAACskB,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAAC09D,GAAA,EAAD,UACI,cAACj9D,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,UAAUwT,MAAM,OAAlD,uBAEJ,eAAC+iC,GAAA,EAAD,CAAQn2C,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,CAAeomB,WAAY,EAAG1vD,KAAK,kBAE7DvN,MAAO,CAAEC,UAAW,GAAImW,MAAO,QAC/B7I,KAAK,gBACLuK,MAAOsiD,EACP3jD,SAAUq6C,EALd,UAOI,cAACha,GAAA,EAAD,CAAUh/B,MAAO+iD,GAAjB,gBAAgDA,IAChD,cAAC/jB,GAAA,EAAD,CAAUh/B,MAAOgjD,GAAjB,yBAA2CA,IAC3C,cAAChkB,GAAA,EAAD,CAAUh/B,MAAOijD,GAAjB,6BAA+CA,UAIvD,cAAC,IAAD,CAAUv2D,WAAY,GAAtB,SACI,cAAC,GAAD,CACIq5C,UAAU,QACV7tC,QACI,oKA2ChC,cAACkF,EAAA,EAAD,CACIlV,MAAO,CAAEC,UAAW,GAAKoW,aAAc,IAD3C,SAEI,cAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAjC,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAU0nD,MAAM,MAAMnnD,cAAc,SAASE,cAAc,SAA3D,SAEI,cAACgG,GAAA,EAAD,CAAWnE,MAAO0kD,EAAuB18D,MAAM,kBAAkByN,KAAK,wBAAwBjO,WAAS,EAACK,QAAQ,WAAWa,OAAO,QAAQiW,SAAUq6C,MAExJ,cAAC,IAAD,CAAU76C,cAAc,SAASF,cAAc,SAASmnD,MAAM,MAAM14D,WAAY,GAAhF,SACI,cAAC0R,EAAA,EAAD,CAAYlW,MAAO,CAACoW,MAAO,GAAGa,OAAQ,IAClC1W,QAASs8D,EADb,SAGSjB,EAIG,cAAC,KAAD,IAFA,cAAC,KAAD,eAYvB/4C,EAAMlB,YAI8D,IAAjE86C,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAEiD,QAA5FoC,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAAc54C,eACqB,sBAA5Fg7C,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAAc54C,cAqC7E,KAlCA,cAAC,IAAD,CAAU1L,cAAc,SAAS9V,UAAW,GAAIoW,aAAc,GAA9D,SACI,cAAClW,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBACnDzE,QACgG,QAA5Fk8D,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAAc54C,cAEtE,kBAAMs7C,EAEFN,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAAczuC,KAE1E6wC,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,MAA4B,sBAAxBA,EAAM6D,kBAAwCmK,OAG/F,kBAAMmxC,EAEFN,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAAczuC,KAE1E6wC,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,MAA4B,QAAxBA,EAAM6D,kBAA0BmK,OAGzF5rB,MAAO,CAACgX,YAAa,IAlBzB,SAoBQ4lD,EAEI,aAE4F,QAA5FH,EAAaA,EAAa3yD,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAASyuC,MAAc54C,cAEtE,wCAEA,4CArCxB,K9FnJE,I8FkMNoB,EAAM/hB,KAEF,KAEA,eAAC,IAAD,CAAUiV,cAAc,SAAS9V,UAAW,GAAIoW,aAAc,GAA9D,UACI,cAAClW,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAASu8D,EAAa98D,MAAO,CAACgX,YAAa,IAAtH,SAGQ2lD,EAEI,gBAEA,kBAIZ,cAAC,GAAD,CAAa9e,UAAU,QACnB7tC,QACI6S,EAAMlB,WAEF,qDAEA,4DAOpB9iB,KAAKs+D,+B,qCAWrB,WACI,MAUIt+D,KAAKC,MATL+jB,EADJ,EACIA,MAEA03C,EAHJ,EAGIA,oBAEAmB,EALJ,EAKIA,iBACAC,EANJ,EAMIA,wBAEAyB,EARJ,EAQIA,sBACAC,EATJ,EASIA,6BAGJ,OACI,cAACrjC,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAACoW,MAAO,OAAQ0wB,UAAW,OAAQ7mC,UAAW,IAA1E,SACI,eAAC8mC,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,UACI,eAACL,GAAA,EAAD,WACI,cAAC/gC,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAAyC,yCAE7C,cAACiG,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAAyC,0CAGxCkjB,EAAMlB,WAIH,cAAC/b,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAAyC,0CAH7C,KAMR,cAACiG,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAAyC,8CAE7C,cAACiG,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAAyC,mEAE7C,cAACiG,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAAyC,wDAE7C,cAACiG,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SAA0C,gEAItD,cAACsnC,GAAA,EAAD,UAEQpoC,KAAK48D,2BAGb,cAACv0B,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CAAiBC,mBAAoB,CAAC,EAAG,GAAI,IAAKC,MAAOkzB,EAAoB3wD,OAAQ68B,YAAak1B,EAAyBn1B,KAAMk1B,EAC7Hp0B,oBAAqB,CACjB,aAAc,iBAElBC,oBAAqB,CACjB,aAAc,aAElBC,YAAa,CACTC,QAAQ,GAEZC,aAAc01B,EACdz1B,oBAAqB01B,iB,GA7X1B58D,aAksBZC,gBAlvBS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAE7C0uD,aAAc97D,EAAM28D,mBAAmBb,aACvCC,aAAc/7D,EAAM28D,mBAAmBZ,aAEvC75C,MAAOliB,EAAM2P,KAAKjC,KAElBkiB,aAAc5vB,EAAM4vB,aAAaA,aACjCgrC,mBAAoB56D,EAAM4vB,aAAagrC,mBACvCgB,wBAAyB57D,EAAM4vB,aAAagsC,wBAE5Cb,iBAAkB/6D,EAAM4vB,aAAamrC,iBACrCC,wBAAyBh7D,EAAM4vB,aAAaorC,wBAE5CzB,yBAA0Bv5D,EAAM4vB,aAAa2pC,yBAC7CC,eAAgBx5D,EAAM4vB,aAAa4pC,eACnCC,cAAez5D,EAAM4vB,aAAa6pC,cAClCC,YAAa15D,EAAM4vB,aAAa8pC,YAEhCmC,sBAAuB77D,EAAM4vB,aAAaisC,sBAC1CZ,yBAA0Bj7D,EAAM4vB,aAAaqrC,yBAE7Ce,cAAeh8D,EAAM4vB,aAAaosC,cAClCC,wCAAyCj8D,EAAM4vB,aAAaqsC,wCAE5DrC,oBAAqB55D,EAAM4vB,aAAagqC,wBAIrB,SAAA15D,GACvB,MAAO,CACHyvB,iBAAkB,kBAAMzvB,GD5DrB,SAACA,EAAUwP,GACdxP,EAAS,CACLC,KAAM64D,KAGV,IAAM92C,EAAQxS,IAAWC,KAAKjC,KAE9B2nB,GACsBnT,EAAMlB,WAAa,KAAOkB,EAAM+I,MACjD3gB,MAAK,SAAAslB,GACF1vB,EAAS,CACLC,KAAM84D,GACNrpC,eACAhlB,MAAO,UAGdgI,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM84D,GACNrpC,aAAc,GACdhlB,iBCyCZsxD,iBAAkB,kBAAMh8D,GDjCrB,SAACA,EAAUwP,GACd,IAcIkqD,EAdEhqC,EAAY,aAAOlgB,IAAWkgB,aAAaA,cAC3CgtC,EAAuB,aAAOltD,IAAWkgB,aAAagqC,qBAE5D,EAOIlqD,IAAWkgB,aANXisC,EADJ,EACIA,sBACAZ,EAFJ,EAEIA,yBACA1B,EAHJ,EAGIA,yBACAC,EAJJ,EAIIA,eACAC,EALJ,EAKIA,cACAC,EANJ,EAMIA,YAGEC,EAAyBjqD,IAAW+lB,sBAAsBroB,gBAM5DwsD,EADAqB,EACsB7B,GAAuB,CACzCC,mBAAoBzpC,EACpB0pC,WAAY,KACZC,2BACAC,iBACAC,gBACAC,cACAC,2BAKAkC,EAAsBzwD,OAAOnC,OAAS,EAChB2zD,EAAwBx7C,QAC1C,SAAA6K,GAAW,OAAIA,EAAYf,MAAM7hB,gBAAkBwyD,EAAsBzwD,OAAO/B,iBAG9DuzD,EAI9B18D,EAAS,CACLC,KAAM+4D,GACNU,4BCRJzJ,mBAAoB,SAACv3C,GAAD,OAAW1Y,EDcL,SAAA0Y,GAC9B,OAAO,SAAC1Y,EAAUwP,GACd,IAAMkgB,EAAY,aAAOlgB,IAAWkgB,aAAaA,cAC3CgtC,EAAuB,aAAOltD,IAAWkgB,aAAagqC,qBACxDA,EAAsB,GAE1B,EAOIlqD,IAAWkgB,aANXisC,EADJ,EACIA,sBACAZ,EAFJ,EAEIA,yBACA1B,EAHJ,EAGIA,yBACAC,EAJJ,EAIIA,eACAC,EALJ,EAKIA,cACAC,EANJ,EAMIA,YAGEC,EAAyBjqD,IAAW+lB,sBAAsBroB,gBAE1DR,EAAOgM,EAAMyD,OAAOzP,KACtBuK,EAAQ,KAEZ,OAAQvK,GACJ,IAAK,wBACD,IAAMiwD,EAAgBjkD,EAAMyD,OAAOlF,MAInC,GAHAA,EAAQ0lD,GAGH5B,EAA0B,CAE3BrB,EAAsBgD,EACtB,MAGJhD,EAAsBR,GAAuB,CACzCC,mBAAoBzpC,EACpB0pC,WAAYuD,EACZtD,2BACAC,iBACAC,gBACAC,cACAC,2BAEJ,MACJ,IAAK,2BACD,IAAMmD,EAA8BlkD,EAAMyD,OAAOlF,MACjDA,EAAQ2lD,EAERlD,EAAsBR,GAAuB,CACzCC,mBAAoBzpC,EACpB0pC,WAAY2B,EAA2BY,EAAwB,KAC/DtC,yBAA0BuD,EAC1BtD,iBACAC,gBACAC,cACAC,2BAEJ,MACJ,IAAK,iBACD,IAAMoD,EAAoBnkD,EAAMyD,OAAOlF,MACvCA,EAAQ4lD,EAERnD,EAAsBR,GAAuB,CACzCC,mBAAoBzpC,EACpB0pC,WAAY2B,EAA2BY,EAAwB,KAC/DtC,2BACAC,eAAgBuD,EAChBtD,gBACAC,cACAC,2BAEJ,MACJ,IAAK,cACD,IAAMqD,EAAiBpkD,EAAMyD,OAAOlF,MACpCA,EAAQ6lD,EAERpD,EAAsBR,GAAuB,CACzCC,mBAAoBzpC,EACpB0pC,WAAY2B,EAA2BY,EAAwB,KAC/DtC,2BACAC,iBACAC,gBACAC,YAAasD,EACbrD,2BAEJ,MACJ,IAAK,gBACD,IAAMsD,EAAmBrkD,EAAMyD,OAAOlF,MACtCA,EAAQ8lD,EAERrD,EAAsBR,GAAuB,CACzCC,mBAAoBzpC,EACpB0pC,WAAY2B,EAA2BY,EAAwB,KAC/DtC,2BACAC,iBACAC,cAAewD,EACfvD,cACAC,2BAOZz5D,EAAS,CACLC,KAAMg5D,GACNvsD,OACAuK,QACAyiD,yBCxHoCsD,CAAuCtkD,KAC/E6jD,sBAAuB,SAAC7jD,EAAOslB,GAAR,OAAoBh+B,ED8Pd,SAAC0Y,EAAOslB,GACzC,MAAO,CACH/9B,KAAMk6D,GACNn8B,WCjQoDg/B,CAA0CtkD,EAAOslB,KACrGw+B,6BAA8B,SAAC9jD,GAAD,OAAW1Y,EDqQL,SAAA0Y,GACxC,MAAO,CACHzY,KAAMm6D,GACNjE,KAAMz9C,EAAMyD,OAAOlF,OCxQ+B+lD,CAAiDtkD,KACnGiiD,qCAAsC,kBAAM36D,GD4czC,SAACA,EAAUwP,GACd,IAAK+qD,GAAsB,CACvB,IAAMv4C,EAAQxS,IAAWC,KAAKjC,MAE9B+sD,GAAuBv9D,EAClBgU,WACAzS,IAAIqO,KAGJgF,GAAG,cADR,yCACuB,WAAOC,GAAP,wCAAA/H,EAAA,yDACPiiB,EAAcla,EAASsY,MAEvB8yC,GAAuB,GAEvBj7C,EAAMlB,YAGFiL,EAAYC,YAAchK,EAAM+I,QAFpCkyC,GAAuB,GAOtBA,EAbM,qDAmBe,KAFtBvtC,EAjBO,aAiBYlgB,IAAWkgB,aAAaA,eACXzmB,WAAU,SAAAi0D,GAAmB,OAAIA,EAAoBvvD,KAAOoe,EAAYpe,MAlBjG,0BA2BH6B,IAAWkgB,aANXisC,EArBG,EAqBHA,sBACAZ,EAtBG,EAsBHA,yBACA1B,EAvBG,EAuBHA,yBACAC,EAxBG,EAwBHA,eACAC,EAzBG,EAyBHA,cACAC,EA1BG,EA0BHA,YAGEC,EAAyBjqD,IAAW+lB,sBAAsBroB,gBA7BzD,UA+BaioB,GAA4CpJ,EAAYC,WA/BrE,WA+BDjP,EA/BC,OAiCPgP,EAAYe,QAAU,CAClB/B,KAAMhO,EAAMgO,KACZkC,YAAalQ,EAAMkQ,YACnB5f,KAAM0P,EAAM1P,OAGZ0e,EAAY5e,eAAe,kBAvCxB,kCAwC8Bod,GAAiBwB,EAAY4D,gBAxC3D,QAwCH5D,EAAY6D,aAxCT,sBA2CH8pC,EAAsBR,GAAuB,CAC7CC,mBAAmB,GAAD,oBAAMzpC,GAAN,CAAoB3D,IACtCqtC,WAAY2B,EAA2BY,EAAwB,KAC/DtC,2BACAC,iBACAC,gBACAC,cACAC,2BAlDG,kBAqDAz5D,EAAS,CACZC,KAAMu6D,GACN9qC,aAAa,GAAD,oBAAMlgB,IAAWkgB,aAAaA,cAA9B,CAA4C3D,IACxD2tC,yBAxDG,4CADvB,uDA+DAa,GACK3oD,GAAG,gBADR,yCACyB,WAAOC,GAAP,wCAAA/H,EAAA,yDACbiiB,EAAcla,EAASsY,MAEvBgzC,GAA0B,GAE1Bn7C,EAAMlB,YAGFiL,EAAYC,YAAchK,EAAM+I,QAFpCoyC,GAA0B,GAOzBA,EAbY,oDAiBbztC,EAjBa,aAiBMlgB,IAAWkgB,aAAaA,eAIrB,KAHtB0tC,EAAmB1tC,EAAazmB,WAChC,SAAAi0D,GAAmB,OAAIA,EAAoBvvD,KAAOoe,EAAYpe,OAnBjD,wBAsBboe,EAAYe,QAAU4C,EAAa0tC,GAAkBtwC,QACrDf,EAAY6D,aAAeF,EAAa0tC,GAAkBxtC,aAC1DF,EAAa0tC,GAAoBrxC,EAxBpB,EAgCTvc,IAAWkgB,aANXisC,EA1BS,EA0BTA,sBACAZ,EA3BS,EA2BTA,yBACA1B,EA5BS,EA4BTA,yBACAC,EA7BS,EA6BTA,eACAC,EA9BS,EA8BTA,cACAC,EA/BS,EA+BTA,YAGEC,EAAyBjqD,IAAW+lB,sBAAsBroB,gBAE5DwsD,EAAsBR,GAAuB,CAC7CC,mBAAmB,aAAKzpC,GACxB0pC,WAAY2B,EAA2BY,EAAwB,KAC/DtC,2BACAC,iBACAC,gBACAC,cACAC,2BA3CS,kBA8CNz5D,EAAS,CACZC,KAAMu6D,GACN9qC,aAAa,aAAKA,GAClBgqC,yBAjDS,4CADzB,4DClhBJsB,aAAc,SAACjvC,GAAD,OAAiB/rB,ED0QX,SAAA+rB,GACxB,OAAO,SAAC/rB,EAAUwP,GACd,IAAMsM,EAAiBtM,IAAWqM,qBAAqBC,eACjD8E,EAAgBpR,IAAW+lB,sBAAsB3U,cACjD1T,EAAkBsC,IAAW+lB,sBAAsBroB,gBACnDsjD,EAAoBhhD,IAAWC,KAAKjC,KAE1CsjD,GACe,CACPlC,UAAW9yC,EAAe8yC,UAC1Bj9B,UdzVgB,Ec0VhBpnB,KAAM,CACFwmD,UAAW7jD,EAAgB+f,YAC3B+jC,UAAW/2C,G5FXD,E4FW8C/M,GACxD+jD,aAAc/jD,EAAgBgkD,QAC9BlyC,eAAe,GAAD,OAAKlD,EAAeq1C,WAApB,mBAAyCjkD,EAAgB0T,cAAzD,eACd8pC,OAAQ8F,EAAkBxlC,MAC1By/B,SAAU1+B,EAAYf,MACtBomC,aAAa,GAAD,OAAKrlC,EAAYnB,MAAjB,YAA0BmB,EAAYmX,UAAtC,YAAmDnX,EAAYoX,UAC3E4sB,S7FpMO,I6FqMHhkC,EAAY9rB,KAER,SAEA,WAERoxD,UACIzwC,EAAa,UAEN9E,EAAeq1C,WAFT,mBAE8BvwC,EAF9B,mBAEsDmL,EAAYpe,IAFlE,UAINmO,EAAeq1C,WAJT,mBAI8BplC,EAAYpe,OAGlEvD,MAAK,WAEF+qB,GACmB,CACXlM,OAAQunC,EAAkB7iD,GAC1Bub,a7FhQU,E6FiQVC,yBAA0Bvc,GAC1Bwc,mBAAoB2C,EAAYpe,GAChC0b,gB9E7M0C,qE8E+MjCpd,QAAQ,aADb,UAC8B8f,EAAYmX,UAD1C,YACuDnX,EAAYoX,WAC9Dl3B,QAAQ,UAAWiB,EAAgB+f,aACnChhB,QAAQ,a7F/Nd,I6F+N4B8f,EAAY9rB,KAAgC,SAAW,YAEtFqpB,OAAQoH,GACHzkB,QAAQ,UAAW8f,EAAYpe,IAEpCsJ,MAAM,2BACC8U,GADF,IAEDe,QAAS,SAIrB9sB,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,qBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kBACT5P,MAAO,QACP6P,SAAU,eC/UkB4tD,CAAiCjxC,KACzEkwC,YAAa,kBAAMj8D,ED6YvB,yCAAO,WAAOA,EAAUwP,GAAjB,0BAAA1F,EAAA,yDACG6W,EAAcnR,IAAWC,KAAKjC,KAC9BsuD,EAAgBtsD,IAAWkgB,aAAaosC,c7FtT5B,I6FwTdn7C,EAAY1gB,KAJb,qDAQC67D,EARD,iEAaC97D,EAAS,CACLC,KAAMq6D,GACNrjD,OAAO,IAfZ,WAkBsB,IAAIwP,IAAMuB,QAAQ,MAAO5D,GAAUe,qBAlBzD,QAkBKtM,EAlBL,OAqBOrI,EAAO,IAAI+H,KAAK,CAACM,EAAStO,MAAO,CAACtK,KAAM,iCAExB6hB,KADhB0tB,EAAOljC,SAASmjC,cAAc,MAC3BC,WAEC5iC,EAAMuK,IAAIC,gBAAgB9G,GAChCg/B,EAAKG,aAAa,OAAQ7iC,GAC1B0iC,EAAKG,aAAa,WAAY,YAC9BH,EAAKrwC,MAAMsyB,WAAa,SACxBnlB,SAASsjC,KAAKC,YAAYL,GAC1BA,EAAKM,QACLxjC,SAASsjC,KAAKG,YAAYP,IAG9BxvC,EAAS,CACLC,KAAMq6D,GACNrjD,OAAO,IApCZ,kDAuCCjX,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,KAAMuZ,WACfnpB,MAAO,QACP6P,SAAU,WAGdpP,EAAS,CACLC,KAAMq6D,GACNrjD,OAAO,IAhDZ,0DAAP,0DC5YIilD,qCAAsC,SAACmB,EAAWC,GAAZ,OAAwBt9D,EDoVlB,SAACq9D,EAAWC,GAC5D,gDAAO,WAAOt9D,EAAUwP,GAAjB,kBAAA1F,EAAA,yDACG6W,EAAcnR,IAAWC,KAAKjC,KAC9BuuD,EAA0CvsD,IAAWkgB,aAAaqsC,wC7F/PtD,I6FiQdp7C,EAAY1gB,KAJb,qDAQC87D,EARD,iEAaC/7D,EAAS,CACLC,KAAMo6D,GACNpjD,OAAO,IAfZ,WAkBO,IAAIwP,IACLuB,QACG,MACA5D,GAAUmB,kBAAkBtZ,QAAQ,SAAUqxD,GAC9C,CACI12C,gBAAiB,KACjBY,YAAa,CACT61C,YACAE,YAAa,SA1B9B,QA+BCv9D,EAAS,CACLC,KAAMo6D,GACNpjD,OAAO,IAGXjX,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iBACT5P,MAAO,UACP6P,SAAU,WAxCf,kDA2CCpP,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,KAAMuZ,WACfnpB,MAAO,QACP6P,SAAU,WA/Cf,0DAAP,wDCrV2E4tD,CAAyDK,EAAWC,KAE3ItO,uBAAwB,kBAAMhvD,EAASuwD,UAssBhC1wD,CAA6C46D,I,UC9sBtD+C,G,4MAEFhqD,wBAA0B,SAAArV,GAAI,OAAI,SAAAka,GAC9B,EAAKpa,MAAMuV,wBAAwBrV,EAAMka,K,EAG7C5E,qBAAuB,SAAAtV,GAAI,OAAI,SAACuM,EAAO+B,GACnC,EAAKxO,MAAMwV,qBAAqBtV,EAAMuM,EAAO+B,K,EA0RjDijD,kBAAoB,WAChB,MAII,EAAKzxD,MAHL4a,EADJ,EACIA,SACA4kD,EAFJ,EAEIA,WACAC,EAHJ,EAGIA,eAGA7N,EAAM,CACNh9C,IAAK,GACLtT,MAAO,IAGX,OAAQsZ,GACJ,KAnWmB,EAoWf,OAAO,KACX,KApWkD,EAqW9Cg3C,EAAIh9C,IAAM,0DACVg9C,EAAItwD,MAAQ,UACZ,MACJ,KAvW+B,EAwW3BswD,EAAIh9C,IAAM,uCACVg9C,EAAItwD,MAAQ,QACZ,MACJ,KAzW2C,EA0WvCswD,EAAIh9C,IAAJ,oBApWiB,IAoWM4qD,EAAmC,aAAe,iBAAzE,aAA8Ft/B,SAASu/B,GAAvG,eACA7N,EAAItwD,MAAQ,UACZ,MACJ,KA5W6C,EA6WzCswD,EAAIh9C,IAAM,uCACVg9C,EAAItwD,MAAQ,UACZ,MACJ,KAlXiC,EAmX7BswD,EAAIh9C,IAAM,oCACVg9C,EAAItwD,MAAQ,QACZ,MACJ,KAnXiC,EAoX7BswD,EAAIh9C,IAAM,yFACVg9C,EAAItwD,MAAQ,UACZ,MACJ,KAtX6B,EAuXzBswD,EAAIh9C,IAAM,kDACVg9C,EAAItwD,MAAQ,QAMpB,OACI,cAACL,EAAA,EAAD,CAAYK,MAAOswD,EAAItwD,MAAOT,QAAQ,YAAYiU,MAAM,OAAxD,SACK88C,EAAIh9C,O,4CAxUjB,WACI,MAiCI7U,KAAKC,MAhCLkC,EADJ,EACIA,aACAw9D,EAFJ,EAEIA,0BAEAC,EAJJ,EAIIA,iBACAC,EALJ,EAKIA,qBACA7yC,EANJ,EAMIA,MACAkmC,EAPJ,EAOIA,QACAvuD,EARJ,EAQIA,aACAC,EATJ,EASIA,eAEAwK,EAXJ,EAWIA,UAEAE,GAbJ,EAYIwwD,iBAZJ,EAaIxwD,cAGAywD,GAhBJ,EAcIC,oBAdJ,EAgBID,gBACAE,EAjBJ,EAiBIA,2BAEAC,EAnBJ,EAmBIA,iBAOAC,GA1BJ,EAqBIV,WArBJ,EAsBIC,eAtBJ,EAwBIlqD,wBAxBJ,EAyBIC,qBAzBJ,EA0BI0qD,6BACAlO,EA3BJ,EA2BIA,mBACAmO,EA5BJ,EA4BIA,mBACAC,EA7BJ,EA6BIA,mBACAC,EA9BJ,EA8BIA,6CAEGvqD,EAhCP,wfAmCA,OACI,eAACzV,EAAA,EAAD,yBAAQC,IAAK4B,EAAc3B,KAAMm/D,EAA2Bl/D,WAAS,EAACuV,SAAS,KAAKV,QAAS6qD,GAAiCpqD,GAA9H,cACI,cAACrV,EAAA,EAAD,CAAayxD,mBAAiB,EAA9B,SACI,eAAC,IAAD,CAAUj7C,cAAc,SAAxB,UACI,cAAC,IAAD,CAAUC,KAAM,EAAhB,SACI,cAACjW,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAA/C,6BAIJ,cAAC,IAAD,CAAUoC,KAAM,EAAGC,cAAc,QAAjC,SACI,cAACC,EAAA,EAAD,CAAY3V,QAASy+D,EAArB,SACI,cAAC,KAAD,aAKhB,eAACx/D,EAAA,EAAD,CAAeQ,MAAO,CAACC,UAAW,IAAlC,UACI,cAACgc,GAAA,EAAD,CACInc,MAAM,aACNoc,YAAY,mCACZ3O,KAAK,mBACLuK,MAAO2mD,EACPn/D,WAAS,EACTkB,OAAO,QACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOwzD,GAAgD,IAA5BN,EAAiB70D,OAC5C6M,SAAUq6C,IAGd,cAAC70C,GAAA,EAAD,CACInc,MAAM,iBACNoc,YAAY,iDACZy8C,WAAW,qHACXprD,KAAK,uBACLuK,MAAO4mD,EACPp/D,WAAS,EACTkB,OAAO,QACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOwzD,GAA2D,IAAvCL,EAAqB3yD,OAAOnC,OACvD6M,SAAUq6C,IAGd,cAACz2B,GAAA,EAAD,CAAa/6B,WAAS,EAACU,MAAO,CAACC,UAAW,GAAIoW,aAAc,IAA5D,SACI,cAAC4F,GAAA,EAAD,CACInc,MAAM,mBACNoc,YAAY,uBACZy8C,WAAW,gJACXprD,KAAK,QACLuK,MAAO+T,EACPvsB,WAAS,EACTkB,OAAO,QACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOwzD,GAA4C,IAAxBlzC,EAAM9f,OAAOnC,OACxC6M,SAAUq6C,MAIlB,eAACz2B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAAC2c,GAAA,EAAD,CACInc,MAAM,UACNoc,YAAY,2BACZ3O,KAAK,UACLuK,MAAOi6C,EACPzyD,WAAS,EACTkB,OAAO,QACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOwzD,GAA8C,IAA1BhN,EAAQhmD,OAAOnC,OAC1C6M,SAAUq6C,IAGgB,IAA1BiB,EAAQhmD,OAAOnC,QAAgBkR,GAAoBi3C,GAE/C,KAEA,cAAChyD,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,QACNwT,MAAM,OAHV,oCAUZ,eAACymB,GAAA,EAAD,CAAa/6B,WAAS,EAACU,MAAO,CAACC,UAAW,IAA1C,UACI,cAACgc,GAAA,EAAD,CACInc,MAAM,gBACNoc,YAAY,eACZ3O,KAAK,eACLuK,MAAOtU,EAAa2gC,cACpB7kC,WAAS,EACTkB,OAAO,QACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOwzD,GAAmD,IAA/Bv7D,EAAauI,OAAOnC,OAC/C6M,SAAUq6C,IAGqB,IAA/BttD,EAAauI,OAAOnC,QAAgBkR,GAA0BtX,GAE1D,KAEA,cAACzD,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAASwT,MAAM,OAAjD,8BAIZ,eAACymB,GAAA,EAAD,CAAa/6B,WAAS,EAACU,MAAO,CAACqW,aAAc,IAA7C,UACI,cAAC4F,GAAA,EAAD,CACInc,MAAM,kBACNoc,YAAY,eACZ3O,KAAK,iBACLuK,MAAOrU,EAAe0gC,cACtB7kC,WAAS,EACTkB,OAAO,QACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MAAOwzD,GAAqD,IAAjCt7D,EAAesI,OAAOnC,OACjD6M,SAAUq6C,IAIuB,IAAjCrtD,EAAesI,OAAOnC,QAAgBkR,GAA0BrX,GAE5D,KAEA,cAAC1D,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAAQwT,MAAM,OAAhD,8BAKZ,eAAC,IAAD,CAAUnU,QAAM,EAAhB,UACI,cAAC,KAAD,CACIoG,UAAWyQ,YAAIC,GAAOC,eACtBC,SAAU5X,KAAKwV,wBAlOV,GAmOLqC,QAAS7X,KAAKyV,qBAnOT,GAoOLqC,QAAS,CAAC,YAAa,YAAa,cACpCC,YAAanJ,GACboJ,YAAa,EACbC,UAAQ,EACRC,WAAS,EACT/W,MAAO,CAACC,UAAW,IATvB,SAWI,eAAC,IAAD,CAAU8V,cAAc,SAASE,cAAc,SAA/C,UACI,cAAC,KAAD,CAASrR,SAAS,QAAQ5E,MAAO,CAACgX,YAAa,KADnD,wCAKC/I,EAKO,cAAC,IAAD,CAAUhO,UAAW,GAAImW,MAAO,IAAKa,OAAQ,IAA7C,SACI,cAACc,GAAA,EAAD,CAAOC,IAAKC,OAAOC,IAAIC,gBAAgBlK,GAAYmK,eAAa,EAACC,WAAS,EAACrY,MAAO,CAACoW,MAAO,OAAQa,OAAQ,OAAQqB,UAAW,YAJrI,QAWZ,eAAC,IAAD,CAAU7Y,QAAM,EAACQ,UAAW,GAA5B,UACI,cAAC,KAAD,CACI4F,UAAWyQ,YAAIC,GAAOC,eACtBC,SAAU5X,KAAKwV,wBA/PN,GAgQTqC,QAAS7X,KAAKyV,qBAhQL,GAiQTqC,QAAS,CAAC,YAAa,YAAa,cACpCC,YAAanJ,GACboJ,YAAa,EACbC,UAAQ,EACRC,WAAS,EARb,SAUI,eAAC,IAAD,CAAUhB,cAAc,SAASE,cAAc,SAA/C,UACI,cAAC,KAAD,CAASrR,SAAS,QAAQ5E,MAAO,CAACgX,YAAa,KADnD,wCAKC7I,EAKO,cAAC,IAAD,CAAUlO,UAAW,GAAImW,MAAO,IAAKa,OAAQ,IAA7C,SACI,cAACc,GAAA,EAAD,CAAOC,IAAKC,OAAOC,IAAIC,gBAAgBhK,GAAekK,WAAS,EAACrY,MAAO,CAACoW,MAAO,OAAQa,OAAQ,OAAQqB,UAAW,YAJ1H,WAUhB,cAACpY,EAAA,EAAD,UACI,eAAC,IAAD,CAAUkW,MAAM,OAAOY,YAAa,GAAIX,aAAc,GAAIpW,UAAW,GAAIgW,cAAc,QAAQF,cAAc,SAA7G,UAEQlX,KAAK0xD,oBAET,eAACpwD,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUG,QAAS0+D,EAAoB5+D,KAAK,QAAQwF,UAAWyQ,YAAIxS,GAAakB,mBAC7G1E,SACuC,IAAnCm+D,EAAiB1yD,OAAOnC,QACkB,IAAvC80D,EAAqB3yD,OAAOnC,QACJ,IAAxBiiB,EAAM9f,OAAOnC,QACa,IAA1BmoD,EAAQhmD,OAAOnC,QACdmoD,EAAQhmD,OAAOnC,OAAS,IAAMkR,GAAoBi3C,IACpB,IAA/BvuD,EAAauI,OAAOnC,QACa,IAAjCnG,EAAesI,OAAOnC,QACrBpG,EAAauI,OAAOnC,OAAS,IAAMkR,GAA0BtX,IAC7DC,EAAesI,OAAOnC,OAAS,IAAMkR,GAA0BrX,KAC/DwK,EAERjO,MAAO,CAAEwE,WAAY,IAbzB,gBAeI,cAAC,KAAD,CAASI,SAAS,QAAQ5E,MAAO,CAACwE,WAAY,aAK1D,cAACunD,GAAA,EAAD,CACI1sD,KAAMy/D,EACN9S,aAAc,CAAEC,SAAU,MAAOC,WAAY,UAC7CC,iBAAkB,IAClBh4C,QAAS+qD,EACTE,SAAUD,EACV/S,oBAAqBjmD,GACrBkmD,mBAAoB,CAAEC,MAAO,IAAKC,KAAM,KAP5C,SAQI,cAAC8S,GAAA,EAAD,CAAiBr/D,MAAO,CAACyV,gBAAiBC,IACtC1F,QAAS4uD,EACTz0C,OAAQ,CACJ,cAACjU,EAAA,EAAD,CAAwB9V,MAAM,UAAUG,QAAS2+D,EAAjD,SACI,cAAC,KAAD,KADY,sB,GAlRRz+D,aAwVrBC,gBAhYS,SAAAC,GACpB,MAAO,CACH69D,0BAA2B79D,EAAM2+D,4BAA4Bd,0BAE7DC,iBAAkB99D,EAAM2+D,4BAA4Bb,iBACpDC,qBAAsB/9D,EAAM2+D,4BAA4BZ,qBACxD7yC,MAAOlrB,EAAM2+D,4BAA4BzzC,MACzCkmC,QAASpxD,EAAM2+D,4BAA4BvN,QAC3CvuD,aAAc7C,EAAM2+D,4BAA4B97D,aAChDC,eAAgB9C,EAAM2+D,4BAA4B77D,eAElDwK,UAAWtN,EAAM2+D,4BAA4BrxD,UAC7C0wD,iBAAkBh+D,EAAM2+D,4BAA4BX,iBACpDxwD,aAAcxN,EAAM2+D,4BAA4BnxD,aAChD0wD,oBAAqBl+D,EAAM2+D,4BAA4BT,oBAEvDP,WAAY39D,EAAM2+D,4BAA4BhB,WAC9CC,eAAgB59D,EAAM2+D,4BAA4Bf,eAElDK,eAAgBj+D,EAAM2+D,4BAA4BV,eAClDE,2BAA4Bn+D,EAAM2+D,4BAA4BR,2BAE9DC,iBAAkBp+D,EAAM2+D,4BAA4BP,iBACpDrlD,SAAU/Y,EAAM2+D,4BAA4BC,cAIzB,SAAA1+D,GACvB,MAAO,CACHm+D,4BAA6B,kBAAMn+D,EAAS2+D,OAC5C1O,mBAAoB,SAACv3C,GAAD,OAAW1Y,EAAS2+D,GAA+DjmD,KACvG0lD,mBAAoB,kBAAMp+D,EAAS2+D,OAEnCnrD,wBAAyB,SAACrV,EAAMka,GAAP,OAAiBrY,EAAS2+D,GAAqDxgE,EAAMka,KAC9G5E,qBAAsB,SAACtV,EAAMuM,EAAO+B,GAAd,OAAuBzM,EAAS2+D,GAAkDxgE,EAAMuM,EAAO+B,KACrH4xD,mBAAoB,kBAAMr+D,EAAS2+D,OACnCL,6CAA8C,kBAAMt+D,EAAS2+D,UA4VtD9+D,CAA6C29D,IAEtD9nD,GAASxS,IAAWC,OAAO,CAE7BwS,cAAe,CACXb,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,GACd8D,UAAW,SACX9U,OAAO,aAAD,OAAe4Q,IAErB,SAAU,CACND,gBAAiBC,GACjBtR,OAAQ,cCraPq7D,GAAkC,kCAClCT,GAA8B,WACvC,MAAO,CACHl+D,KAAM2+D,KAIDC,GAAyC,yCACzCC,GAAoC,SAAApmD,GAC7C,MAAO,CACHzY,KAAM4+D,GACNnmD,UAIKqmD,GAAuC,uCACvCC,GAAmC,mCACnCZ,GAAqB,WAC9B,gDAAO,WAAOp+D,EAAUwP,GAAjB,0CAAA1F,EAAA,6DAEG6W,EAAcnR,IAAWC,KAAKjC,KAEpCxN,EAAS,CACLC,KAAM8+D,KALP,EAiBCvvD,IAAWivD,4BARXb,EATD,EASCA,iBACAC,EAVD,EAUCA,qBACA7yC,EAXD,EAWCA,MACAkmC,EAZD,EAYCA,QACAvuD,EAbD,EAaCA,aACAC,EAdD,EAcCA,eACAwK,EAfD,EAeCA,UACAE,EAhBD,EAgBCA,aAGJtN,EAAS,CACLC,KAAM++D,GACNz2C,OD5BkD,ICgChDwC,EAAO/tB,EACRgU,WACAzS,IAAIqO,IACJ9B,OACA0d,IA7BF,kBAiCyBxrB,EACnBgU,WACAzS,IAAIqO,IACJid,aAAa,iBACbC,QAAQ+zC,EAAqB10D,eAC7B6gB,KAAK,SAtCX,mBAyCeI,cAAgB,GAzC/B,wBA0CKpqB,EAAS,CACLC,KAAM++D,GACNz2C,ODlDuB,ICMhC,4CAiDiC4M,GAA8BnK,GAjD/D,mBAoDuBW,WApDvB,wBAqDK3rB,EAAS,CACLC,KAAM++D,GACNz2C,OD5DyB,ICKlC,4CA6DiC02C,GAAWj/D,EAAU+qB,ED3DhC,EC2DyD3d,GA7D/E,eA6DO8xD,EA7DP,iBAgEoCD,GAAWj/D,EAAU+qB,ED7D/B,EC6D4Dzd,GAhEtF,eAgEO6xD,EAhEP,OAmEOC,EAAqB,CACvBr0C,OACAqB,cAAc,EACda,YAAa2wC,EACbjxC,iBAAkBixC,EAAiBz0D,cACnCyX,cAAei9C,EAAqB10D,cACpCgiB,YAAa,GACb+lC,QAASA,EACTmO,UAAW9tD,KACX7D,OhGkDmB,EgGjDnBN,UAAW,CAAC,CACR6D,UAAWiuD,EAAkBjuD,UAC7BnE,IAAKoyD,EAAkBpyD,MAE3BQ,aACK6xD,EAIG,CAAC,CACGluD,UAAWkuD,EAAqBluD,UAChCnE,IAAKqyD,EAAqBryD,MAJ9B,KAMRomB,SAAU,CACNmlC,kBhG4DsB,EgG3DtBiH,6CAA6C,EAC7C38D,aAAcA,EAAa2gC,cAC3B1gC,eAAgBA,EAAe0gC,gBA9FxC,UAmGOtmC,EACDgU,WACAzS,IAAIqO,IACJyE,MAAM0Z,GACNvY,IAAI4sD,GAvGV,eAyGCp/D,EAAS,CACLC,KAAM++D,GACNz2C,OD9GyC,ICG9C,WA8GO,IAAI9B,IAAMuB,QACZ,OACA5D,GAAUyB,mBACV,CACI2B,YAAa,CACT+3C,MAAO5+C,EACPzT,gBAAiBkyD,EACjBI,mBAAoBx0C,KArHjC,yBA2HOmK,GACgB,CACdvK,MAAO,uBACPzb,QAAS,uJACT8Z,OAAQ8B,EACRzB,OAAO,GAAD,OAAKoH,GAAL,0BAhIf,QAoIC1wB,EAAS,CACLC,KAAM++D,GACNz2C,ODxI6B,ICElC,mEA0IOvrB,EACDgU,WACAzS,IAAIqO,IACJyE,MAAM0Z,GACN2H,SA9IN,QAgJC1yB,EAAS,CACLC,KAAM++D,GACNz2C,ODnJyB,ECoJzB7d,MAAK,OAnJV,0DAAP,yDA8JEu0D,GAAU,yCAAG,WAAOj/D,EAAU+qB,EAAM5sB,EAAMqS,GAA7B,UAAA1G,EAAA,+EAER,IAAIE,SAAQ,SAACC,EAASC,GAEzB,IAAKsG,EACD,OAAOvG,EAAQ,MAGnB,IAAI4G,EAAkB7T,EAAS8T,UAE/B9Q,EAAS,CACLC,KAAM++D,GACNz2C,OD9K2C,EC+K3CnqB,SAAU,IAGd,IAAI6S,EAAYM,KACZL,EAAe,UD7KM,IC6KA/S,EhG7HA,aAGI,gBgG0HV,YAAkG8S,GAQ/GS,EANab,EACdtS,IAAIqO,IACJyE,MAAM0Z,GACN1Z,MAAMH,GAGmBS,IAAInB,GAClCkB,EAAWE,GAAG,iBAAiB,SAAAC,GAC3B,IAAIzT,EAAYyT,EAASC,iBAAmBD,EAASE,WAAc,IACnE/R,EAAS,CACLC,KAAM++D,GACNz2C,ODhMuC,ECiMvCnqB,WACAD,YAGL,SAAAuM,GAQC,OANA1K,EAAS,CACLC,KAAM++D,GACNz2C,ODtMyB,ECuMzBpqB,SAGG+L,EAAOQ,MAEf,WAGCgH,EAAWG,SAAStT,IAAIyT,iBAAiB5H,MAAK,SAAA6H,GAO1C,OAAOhI,EALgB,CACnBgH,UAAWA,EACXnE,IAAKmF,cApDN,2CAAH,4DA6DHwtD,GAAuC,uCACvCC,GAAuC,uCACvClsD,GAA0B,SAACrV,EAAMka,GAC1C,OAAO,SAACrY,EAAUwP,GACd,GAAIA,IAAWivD,4BAA4BV,eAAe7yD,OAAOnC,OAAS,GAAKyG,IAAWivD,4BAA4BR,2BAClH,OAAO,KAGXj+D,EAAS,CACLC,KAAMw/D,GACNthE,SAGJ,IAAMqS,EAAO,IAAI+H,KAAK,CAACF,EAAMA,EAAMtP,OAAS,IAAK,CAAC9I,KAAM,cAExDD,EAAS,CACLC,KAAMy/D,GACNlvD,OACArS,WAKCwhE,GAAqC,qCACrClsD,GAAuB,SAACtV,EAAMuM,EAAO+B,GAC9C,GAAmB,IAAf/B,EAAM8N,KACN,MAAO,CACHvY,KAAM0/D,GACNj1D,QACA+B,OACAtO,SAKCyhE,GAAoD,oDACpDC,GAA8B,WACvC,MAAO,CACH5/D,KAAM2/D,KAIDE,GAAwE,wEACxExB,GAA+C,WACxD,MAAO,CACHr+D,KAAM6/D,KCxSDC,GAAyB,yBACzBC,GAAkC,kCAiClCC,GAAoC,oCAQpCC,GAA6C,6CAQ7CC,GAAqC,qCAgBrCC,GAA6C,6CA0BtDC,GAAwB,KAEfC,GAAkC,kCC1BzCC,G,4MAqCFn7B,SAAW,YAAmC,IAAD,IAAhCo7B,2BAAgC,SACzC,EASI,EAAKviE,MARLi4B,EADJ,EACIA,oBAEAlU,EAHJ,EAGIA,MAEAy+C,EALJ,EAKIA,qBACAC,EANJ,EAMIA,oBAEAl0C,EARJ,EAQIA,kBAGA0J,IACIsqC,EACIx+C,GAASA,EAAMlB,YACf0L,IAMAxK,GAASA,EAAMlB,aAAe2/C,IAAyBC,GACvDl0C,M,EAShBgZ,YAAc,WACV,MAOI,EAAKvnC,MANLi4B,EADJ,EACIA,oBAEAzJ,EAHJ,EAGIA,cACAi0C,EAJJ,EAIIA,oBAEAC,EANJ,EAMIA,sCAGAzqC,GACIzJ,GAAiBi0C,GACjBC,K,EAoCZC,yBAA2B,WACvB,MAcI,EAAK3iE,MAbL83B,EADJ,EACIA,sBACA7oB,EAFJ,EAEIA,gBACA8U,EAHJ,EAGIA,MACAyK,EAJJ,EAIIA,cACAkZ,EALJ,EAKIA,KACAC,EANJ,EAMIA,YACAwzB,EAPJ,EAOIA,WACAyH,EARJ,EAQIA,aACAr0C,EATJ,EASIA,kBACAsR,EAVJ,EAUIA,WACAI,EAXJ,EAWIA,kBACA4iC,EAZJ,EAYIA,qCACA9E,EAbJ,EAaIA,iBAGJ,OAAKjmC,IAA0B/T,GAAUA,IAAUA,EAAMlB,WAC9C,MAIX2L,EAAc/U,MAAK,SAACqpD,EAAeC,GAC/B,OAAQA,EAAc3B,UAAY0B,EAAc1B,aAIhD,cAAClmC,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAAC8mC,UAAW,QAAxC,SACI,eAACC,GAAA,EAAD,WACI,eAACC,GAAA,EAAD,WACI,eAACL,GAAA,EAAD,WACI,cAACvhC,GAAD,CAAiBU,QAAS,EAAGL,UAAWiQ,GACpC3P,UACI,cAACuwC,GAAA,EAAD,CAAW/oC,KAAK,aAAauK,MAAOmiD,EAAaxjD,SAAUkrD,EAAsCriE,WAAS,EAAC4c,YAAY,uBAAuBpb,KAAK,OAC/Iy1C,eACI,cAAC/b,GAAA,EAAD,CAAgBvqB,SAAS,QAAzB,SACI,cAAC0tC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAWE,MAAI,EAACD,UAAU,SACzDE,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,SAEQkzD,EAEI,mBAEA,sBARpB,SAYI,cAACxrD,EAAA,EAAD,CAAY3V,QAASs8D,EAArB,SAEQ6E,EAEI,cAAC,KAAD,IAEA,cAAC,KAAD,cASpC,cAACt8D,GAAD,CAAiBU,QAAS,EAAGL,UAAWiQ,GACpC3P,UACI,cAAC,IAAD,CAAUkQ,cAAc,QAAQF,cAAc,SAA9C,SACI,cAAC4nC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUE,MAAI,EAAED,UAAU,SACzDE,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,qBAFR,SAII,cAAC0H,EAAA,EAAD,CAAY3V,QAAS8sB,EAAmBrtB,MAAO,CAACwE,WAAY,IAA5D,SACI,cAAC,KAAD,eAOxB,eAACmiC,GAAA,EAAD,WACI,cAACvhC,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIxS,GAAaoB,YAAc0O,MAAM,OAA5E,sBAER,cAACxO,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIxS,GAAaoB,YAAa0O,MAAM,OAA3E,kBAGR,cAACxO,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIxS,GAAaoB,YAAa0O,MAAM,OAA3E,0BAKR,cAACxO,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIxS,GAAaoB,YAAa0O,MAAM,OAA3E,4BAKhB,cAACqzB,GAAA,EAAD,UACK,EAAK66B,2BAEV,cAAC56B,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CAAiBnnC,MAAO,CAACyV,gBAAiBC,IAAsB0xB,mBAAoB,CAAC,EAAG,GAAI,IAAKC,MAAO/Z,EAAc1jB,OAAQ68B,YAAaA,EAAcD,KAAMA,EAAMc,oBAAqB,CAAC,aAAc,iBAAmBC,oBAAqB,CAAC,aAAc,aAAeC,YAAa,CAAEC,QAAQ,GAAQC,aAAc/I,EAAYgJ,oBAAqB5I,e,EAarX+iC,uBAAyB,WACrB,MASI,EAAKhjE,MARL2iB,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBACAuf,EAHJ,EAGIA,cACAi0C,EAJJ,EAIIA,oBACAQ,EALJ,EAKIA,qBACAL,EANJ,EAMIA,aACAl7B,EAPJ,EAOIA,KACAC,EARJ,EAQIA,YAGAu7B,EAAwB,GAQ5B,OAAqC,KALjCA,EADAN,EACwBK,EAEAz0C,GAGF1jB,OAElB,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC,IAAD,CACC9F,MAAO,CAAEQ,OAAQ,IAAKyV,cAAc,SAASF,cAAc,SAD5D,SAGQwrD,EAEI,cAACxhE,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,SAEQ8tD,EAEI,wCAEA,yBAIZ,cAAC,aAAD,CACIthE,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAYpCssD,EAAsBh2D,MAAMw6B,EAAOC,EAAaD,EAAOC,EAAcA,GAAa/tB,KAAI,SAAAsU,GAAY,OAC9F,eAAC2Z,GAAA,EAAD,CAAkCtL,OAAK,EAAvC,UACI,cAACz1B,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC,IAAD,CAASyxB,GAAItZ,GAAO8E,0BAA0BtB,EAAeuL,EAAavL,eAAgB5b,UAAWyQ,YAAIxS,GAAaQ,4CAAtH,SACI,cAACvE,EAAA,EAAD,CAAYK,MAAM,UAAlB,SAA6B4sB,EAAac,kBAGlD,cAACloB,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAYK,MAAM,UAAlB,SAA6B4sB,EAAapB,SAE9C,cAAChmB,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAYK,MAAM,UAAlB,SAA6BgS,GAAiC4a,EAAakzC,eAE/E,cAACt6D,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CACIK,MlGxPO,IkGyPH4sB,EAAaze,OAET,UAEA,QANZ,SlGvPW,IkGgQHye,EAAaze,OAET,SAEA,kBA1BLye,EAAapB,U,uDAlUxC,WACI/sB,KAAKonC,SAAS,CAACo7B,qBAAqB,IACpCxiE,KAAKwnC,gB,gCAGT,SAAmB5M,EAAWC,EAAWhnB,GACrC,MAMI7T,KAAKC,MALLi4B,EADJ,EACIA,oBAEAlU,EAHJ,EAGIA,MAEAo/C,EALJ,EAKIA,qCAICp/C,KAAUA,GAAUA,EAAMlB,aAAgBoV,GAK/Cl4B,KAAKonC,SAAS,CAACo7B,qBAAqB,IACpCxiE,KAAKwnC,eALD47B,M,kCAQR,YAKIA,EAFIpjE,KAAKC,MADLmjE,0C,oBAyDR,WACI,IACIjD,EACAngE,KAAKC,MADLkgE,4BAGJ,OACI,eAAC,IAAD,CACIv/D,QAAM,EACN2W,MAAM,OAFV,UAII,cAACD,EAAA,EAAD,CAASnW,MAAO,CAACqW,aAAc,MAC/B,cAACnB,EAAA,EAAD,CAAKlV,MAAO,CAACqW,aAAc,IAA3B,SACI,cAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,EAAGC,GAAI,GAAIxV,MAAO,CAACqW,aAAc,IAAlD,SACI,eAAClW,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAASy+D,EAApG,UACI,cAAC,KAAD,CAASh/D,MAAO,CAACgX,YAAa,GAAIZ,MAAO,GAAIa,OAAQ,UADzD,uBAOJpY,KAAK4iE,kC,GAzGGhhE,aAwWbC,gBA1YS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3CmV,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDlU,MAAOliB,EAAM2P,KAAKjC,KAElBif,cAAe3sB,EAAMuhE,oBAAoB50C,cACzCg0C,qBAAsB3gE,EAAMuhE,oBAAoBZ,qBAChDC,oBAAqB5gE,EAAMuhE,oBAAoBX,oBAC/C/6B,KAAM7lC,EAAMuhE,oBAAoB17B,KAChCC,YAAa9lC,EAAMuhE,oBAAoBz7B,YAEvCwzB,WAAYt5D,EAAMuhE,oBAAoBjI,WACtCyH,aAAc/gE,EAAMuhE,oBAAoBR,aACxCK,qBAAsBphE,EAAMuhE,oBAAoBH,yBAI7B,SAAAlhE,GACvB,MAAO,CACHm+D,4BAA6B,kBAAMn+D,EAAS2+D,OAC5CnyC,kBAAmB,kBAAMxsB,GDvDtB,SAACA,EAAUwP,GACd,IAAMwS,EAAQxS,IAAWC,KAAKjC,MAEzBwU,GAAUA,IAAUA,EAAMlB,WAC3B9gB,EAAS,CACLC,KAAM+/D,MAKdhgE,EAAS,CACLC,KAAM8/D,KAGV5qC,GACuB,GlFohBW,GkFnhB7B/qB,MAAK,SAAAqiB,GACFzsB,EAAS,CACLC,KAAM+/D,GACNvzC,qBAGP/Z,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM+/D,GACNt1D,kBC+BZozB,WAAY,SAACplB,EAAOslB,GAAR,OAAoBh+B,EDxBd,SAAC0Y,EAAOslB,GAC9B,MAAO,CACH/9B,KAAMggE,GACNjiC,WCqByCsjC,CAAgC5oD,EAAOslB,KAChFE,kBAAmB,SAACxlB,GAAD,OAAW1Y,EDjBL,SAAA0Y,GAC7B,MAAO,CACHzY,KAAMigE,GACNjpD,MAAOknB,SAASzlB,EAAMyD,OAAOlF,MAAO,KCcGqqD,CAAuC5oD,KAC9EooD,qCAAsC,SAACpoD,GAAD,OAAW1Y,EDVL,SAAA0Y,GAChD,OAAO,SAAC1Y,EAAUwP,GACd,IAAMid,EAAa,aAAOjd,IAAW6xD,oBAAoB50C,eAEnD2sC,EAAa1gD,EAAMyD,OAAOlF,MAC5BiqD,EAAuBz0C,EAAcvL,QAAO,SAAAiL,GAAY,OAAIA,EAAac,YAAY9jB,cAAcwC,SAASytD,EAAWluD,OAAO/B,kBAElInJ,EAAS,CACLC,KAAMkgE,GACN/G,aACA8H,0BCAsDI,CAA0D5oD,KACpHsjD,iBAAkB,kBAAMh8D,GDMrB,SAACA,EAAUwP,GACd,IAAMqxD,EAAerxD,IAAW6xD,oBAAoBR,aAC9CzH,EAAa5pD,IAAW6xD,oBAAoBjI,WAC5C3sC,EAAa,aAAOjd,IAAW6xD,oBAAoB50C,eAEzD,GAAIo0C,EACA7gE,EAAS,CACLC,KAAMmgE,GACN3U,OAAO,EACPyV,qBAAsB,SAEvB,CACH,IAAIA,EAAuBz0C,EAAcvL,QAAO,SAAAiL,GAAY,OAAIA,EAAac,YAAY9jB,cAAcwC,SAASytD,EAAWluD,OAAO/B,kBAClInJ,EAAS,CACLC,KAAMmgE,GACN3U,OAAO,EACPyV,8BCrBRP,sCAAuC,kBAAM3gE,GDkC1C,SAACA,EAAUwP,GACT6wD,MACDA,GAAwBrjE,EACnBgU,WACAzS,IAAIqO,KAGJgF,GAAG,eAAe,SAAAC,GACf,IAAIsa,EAAeta,EAASsY,MAExBsC,EAAa,aAAOjd,IAAW6xD,oBAAoB50C,gBAG5B,IAFHA,EAAcxjB,WAAU,SAAAs4D,GAAU,OAAIA,EAAWx2C,OAASoB,EAAapB,SAG3F/qB,EAAS,CACLC,KAAMqgE,GACN7zC,cAAc,GAAD,oBAAMA,GAAN,CAAqBN,SAKlDk0C,GACKzuD,GAAG,iBAAiB,SAAAC,GACjB,IAAIsa,EAAeta,EAASsY,MAExBsC,EAAa,aAAOjd,IAAW6xD,oBAAoB50C,eACnD+0C,EAAoB/0C,EAAcxjB,WAAU,SAAAs4D,GAAU,OAAIA,EAAWx2C,OAASoB,EAAapB,SAEpE,IAAvBy2C,IACA/0C,EAAc+0C,GAAqBr1C,EACnCnsB,EAAS,CACLC,KAAMqgE,GACN7zC,2BCjEpB20C,qCAAsC,kBAAMphE,GD0EzC,SAACA,EAAUwP,GACV6wD,KACAA,GAAsBrhC,IAAI,eAC1BqhC,GAAsBrhC,IAAI,iBAC1BqhC,GAAwB,aC8RrBxgE,CAA6C0gE,IC1a/CkB,GAA6C,6CAC7CC,GAAsD,sDAgCtDC,GAAgD,gDAwBhDC,GAA0C,0CAQ1CC,GAAmD,mDAQnDC,GAA2C,2CA+FpDC,GAAuB,KAEdC,GAA+B,+BA8D/BC,GAAsC,WAC/C,OAAO,SAACjiE,EAAUwP,GACVuyD,KACAA,GAAqB/iC,IAAI,eACzB+iC,GAAqB/iC,IAAI,iBACzB+iC,GAAuB,QC5K7BG,G,4MA2BF98B,SAAW,WACP,MASI,EAAKnnC,MARLi4B,EADJ,EACIA,oBAEA1oB,EAHJ,EAGIA,KAEA20D,EALJ,EAKIA,oBACAC,EANJ,EAMIA,mBAEAC,EARJ,EAQIA,iBAGAnsC,GACI1oB,IACK20D,GAAwBC,GACzBC,M,EAShBC,eAAiB,WACb,MAOI,EAAKrkE,MANLi4B,EADJ,EACIA,oBAEAqsC,EAHJ,EAGIA,aACAH,EAJJ,EAIIA,mBAEAI,EANJ,EAMIA,qCAGAtsC,GACIqsC,GAAgBH,GAChBI,K,EAmKZC,uBAAyB,WACrB,MAWI,EAAKxkE,MAVL2iB,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBACAq1D,EAHJ,EAGIA,aACAH,EAJJ,EAIIA,mBACAM,EALJ,EAKIA,oBACA7B,EANJ,EAMIA,aACAl7B,EAPJ,EAOIA,KACAC,EARJ,EAQIA,YACA+8B,EATJ,EASIA,kBACAC,EAVJ,EAUIA,kBAGAC,EAAuB,GAQ3B,OAAoC,KALhCA,EADAhC,EACuB6B,EAEAH,GAGFx5D,OAEjB,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC,IAAD,CAAU9F,MAAO,CAACQ,OAAQ,IAAKyV,cAAc,SAASF,cAAc,SAApE,SAEQktD,EAEI,cAACljE,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,SAEQ8tD,EAEI,iDAEA,4BAIZ,cAAC,aAAD,CACIthE,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAapCguD,EAAqB13D,MAAMw6B,EAAOC,EAAaD,EAAOC,EAAcA,GAAa/tB,KAAI,SAAAirD,GAAW,OAC5F,eAACh9B,GAAA,EAAD,CAA+BtL,OAAK,EAApC,UACI,cAACz1B,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC,IAAD,CAAUrG,QAAM,EAAhB,SACI,cAAC,IAAD,CACI83B,GACiB,UAAb9V,EAEO8P,GAAoBzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,UAAW62D,EAAY75C,QAE5FyH,GAAsCzkB,QAAQ,UAAW62D,EAAY75C,SAEhFjkB,UAAWyQ,YAAIxS,GAAaQ,4CARhC,SAUI,cAACvE,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,UAA/C,mBACQujE,EAAYt4C,YAAYI,MADhC,YACyCk4C,EAAYt4C,YAAY0Y,UADjE,YAC8E4/B,EAAYt4C,YAAY2Y,kBAKlH,cAACp+B,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SACKgkE,EAAYt4C,YAAYQ,UAGjC,cAACjmB,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SACKyS,GAA6BuxD,EAAYC,mBAGlD,cAACh+D,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,eAAC,IAAD,WACI,cAAC3F,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB5E,MAAM,YAAYG,QAAS,kBAAMkjE,EAAkBE,IAAc3jE,MAAO,CAACgX,YAAa,GAAjK,oBACA,cAAC7W,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB5E,MAAM,UAAUG,QAAS,kBAAMijE,EAAkBG,IAAc3jE,MAAO,CAACwE,WAAY,GAA9J,2BAhCGm/D,EAAYn1D,Q,uDA1RvC,WACI3P,KAAKonC,WACLpnC,KAAKskE,mB,gCAGT,SAAmB1pC,EAAWC,EAAWhnB,GACrC,MAII7T,KAAKC,MAHLi4B,EADJ,EACIA,oBACA1oB,EAFJ,EAEIA,KACAy0D,EAHJ,EAGIA,oCAICz0D,GAAS0oB,GAKdl4B,KAAKonC,WACLpnC,KAAKskE,kBALDL,M,oBAoDR,WACI,MAcIjkE,KAAKC,MAbLiP,EADJ,EACIA,gBACA6oB,EAFJ,EAEIA,sBACAvoB,EAHJ,EAGIA,KACA+0D,EAJJ,EAIIA,aACAnJ,EALJ,EAKIA,WACAyH,EANJ,EAMIA,aACAl7B,EAPJ,EAOIA,KACAC,EARJ,EAQIA,YACAy8B,EATJ,EASIA,iBACArG,EAVJ,EAUIA,iBACAl+B,EAXJ,EAWIA,WACAI,EAZJ,EAYIA,kBACA8kC,EAbJ,EAaIA,oCAGJ,OAAKjtC,GAA0BvoB,GAK/B+0D,EAAa7qD,MAAK,SAACurD,EAAcC,GAC7B,OAAQA,EAAaH,cAAgBE,EAAaF,iBAIlD,cAAC5pC,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAAEoW,MAAO,OAAQ0wB,UAAW,OAAQ7mC,UAAW,IAA3E,SACI,eAAC8mC,GAAA,EAAD,WACI,eAACC,GAAA,EAAD,WACI,eAACL,GAAA,EAAD,WACI,cAACvhC,GAAD,CAAiBU,QAAS,EAAGL,UAAWiQ,GACpC3P,UACI,cAACuwC,GAAA,EAAD,CAAW/oC,KAAK,aAAauK,MAAOmiD,EAAYxjD,SAAUotD,EAAqCvkE,WAAS,EAAC4c,YAAY,iCAAiCpb,KAAK,OACvJy1C,eACI,cAAC/b,GAAA,EAAD,CAAgBvqB,SAAS,QAAzB,SACI,cAAC0tC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUE,MAAI,EAACD,UAAU,SACxDE,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,SAEQkzD,EAEI,mBAEA,sBARpB,SAYI,cAACxrD,EAAA,EAAD,CAAY3V,QAASs8D,EAArB,SAEQ6E,EAEI,cAAC,KAAD,IAEA,cAAC,KAAD,cASpC,cAACt8D,GAAD,CAAiBU,QAAS,EAAGL,UAAWiQ,GACpC3P,UACI,cAAC,IAAD,CAAUkQ,cAAc,QAAQF,cAAc,SAA9C,SACI,cAAC4nC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUE,MAAI,EAACD,UAAU,SACxDE,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,qBAFR,SAII,cAAC0H,EAAA,EAAD,CAAY3V,QAAS2iE,EAAkBljE,MAAO,CAACwE,WAAY,IAA3D,SACI,cAAC,KAAD,eAOxB,eAACmiC,GAAA,EAAD,WACI,cAACvhC,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO/N,UAAWyQ,YAAIxS,GAAaoB,YAArE,2BAGR,cAACE,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO/N,UAAWyQ,YAAIxS,GAAaoB,YAArE,qBAGR,cAACE,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO/N,UAAWyQ,YAAIxS,GAAaoB,YAArE,8BAGR,cAACE,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIRhQ,UAAWgQ,GACX3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO/N,UAAWyQ,YAAIxS,GAAaoB,YAArE,4BAKhB,cAAC+hC,GAAA,EAAD,UAEQpoC,KAAKykE,2BAGb,cAACp8B,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CAAiBC,mBAAoB,CAAC,EAAG,GAAI,IAAKthC,QAAS,EAAGuhC,MAAO+7B,EAAax5D,OAAQ68B,YAAaA,EAAaD,KAAMA,EACtHc,oBAAqB,CAAC,aAAc,iBACpCC,oBAAqB,CAAC,aAAc,aACpCC,YAAa,CAAEC,QAAQ,GACvBC,aAAc/I,EACdgJ,oBAAqB5I,cA/HlC,S,GAtFQt+B,aAqUZC,gBAzWS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD1oB,KAAM1N,EAAM2P,KAAKjC,KAEjB+0D,aAAcziE,EAAMqjE,mBAAmBZ,aACvCJ,oBAAqBriE,EAAMqjE,mBAAmBhB,oBAC9CC,mBAAoBtiE,EAAMqjE,mBAAmBf,mBAE7ChJ,WAAYt5D,EAAMqjE,mBAAmB/J,WACrCyH,aAAc/gE,EAAMqjE,mBAAmBtC,aACvC6B,oBAAqB5iE,EAAMqjE,mBAAmBT,oBAE9C/8B,KAAM7lC,EAAMqjE,mBAAmBx9B,KAC/BC,YAAa9lC,EAAMqjE,mBAAmBv9B,gBAInB,SAAA5lC,GACvB,MAAO,CACHqiE,iBAAkB,kBAAMriE,GDlDrB,SAACA,EAAUwP,GAEd,IAAMtC,EAAkBsC,IAAW+lB,sBAAsBroB,gBAEpDA,IAILlN,EAAS,CACLC,KAAMwhE,KAGVtsC,GACwB,CAACpK,KAAM7d,EAAgB6d,OAC1C3gB,MAAK,SAAAm4D,GACFviE,EAAS,CACLC,KAAMyhE,GACNa,oBAGP7vD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMyhE,GACNa,aAAc,GACd73D,kBC2BZsxD,iBAAkB,kBAAMh8D,GDnBrB,SAACA,EAAUwP,GACd,IAAMqxD,EAAerxD,IAAW2zD,mBAAmBtC,aAC7CzH,EAAa5pD,IAAW2zD,mBAAmB/J,WAC3CmJ,EAAe/yD,IAAW2zD,mBAAmBZ,aAEnD,GAAI1B,EACA7gE,EAAS,CACLC,KAAM0hE,GACNlW,OAAO,EACPiX,oBAAqB,SAEtB,CACH,IAAIA,EAAsBH,EAAarhD,QAAO,SAAA4hD,GAAW,OAAIA,EAAYt4C,YAAYQ,MAAM7hB,cAAcwC,SAASytD,EAAWluD,OAAO/B,kBACpInJ,EAAS,CACLC,KAAM0hE,GACNlW,OAAO,EACPiX,6BCIR5kC,WAAY,SAACplB,EAAOslB,GAAR,OAAoBh+B,EDGd,SAAC0Y,EAAOslB,GAC9B,MAAO,CACH/9B,KAAM2hE,GACN5jC,WCNyColC,CAAqC1qD,EAAOslB,KACrFE,kBAAmB,SAACxlB,GAAD,OAAW1Y,EDUL,SAAA0Y,GAC7B,MAAO,CACHzY,KAAM4hE,GACN5qD,MAAOknB,SAASzlB,EAAMyD,OAAOlF,MAAO,KCbGmsD,CAA4C1qD,KACnFsqD,oCAAqC,SAACtqD,GAAD,OAAW1Y,EDiBL,SAAA0Y,GAC/C,OAAO,SAAC1Y,EAAUwP,GACd,IAAM+yD,EAAe/yD,IAAW2zD,mBAAmBZ,aAE7CnJ,EAAa1gD,EAAMyD,OAAOlF,MAC5ByrD,EAAsBH,EAAarhD,QACnC,SAAA4hD,GAAW,OAAIA,EAAYt4C,YAAYQ,MAAM7hB,cAAcwC,SAASytD,EAAWluD,OAAO/B,kBAG1FnJ,EAAS,CACLC,KAAM6hE,GACN1I,aACAsJ,yBC7BqDU,CAA8D1qD,KACvHiqD,kBAAmB,SAAC36C,GAAD,OAAahoB,EDiCP,SAACgoB,GAC9B,OAAO,SAAChoB,EAAUwP,GAEdxS,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM2W,EAAQra,IACd+kB,SACAtoB,MAAK,WACF,IAAMi5D,EAAUrmE,EAASgU,WAAWzS,IAAIqO,IAA8B9B,OAAO0d,IACvEtgB,EAAc+R,KAEpBjd,EACKgU,WACAzS,IAAIqO,IACJyE,MAAMgyD,GACN7wD,IAAI,CACD7E,GAAI01D,EACJr4C,MAAOhD,EAAQwC,YAAYQ,MAC3BkY,UAAWlb,EAAQwC,YAAY0Y,UAC/BC,SAAUnb,EAAQwC,YAAY2Y,SAC9BvY,MAAO5C,EAAQwC,YAAYI,MAC3B3qB,KAAM+nB,EAAQwC,YAAYvqB,KAC1ByN,OnG4BkB,EmG3BlBiiB,eAAgB3H,EAAQiB,OACxB+C,UAAWhE,EAAQgI,YACnB6gC,YAAa,OACb9nB,iBAAiB,EACjBuyB,oBAAqBpzD,EACrBszD,WAAYtzD,IAEfkC,MAAK,WACF+qB,GACsB,CACdvK,MAAM,GAAD,OAAK5C,EAAQjL,MAAMkQ,YAAnB,mCACL9d,QAAQ,4CAAD,OAA8C6Y,EAAQjL,MAAMkQ,YAA5D,2DAA0HjF,EAAQjL,MAAMkQ,YAAxI,KACPhE,OAAQjB,EAAQiB,OAChBK,OAAO,GAAD,OAAKoH,GAAL,yBAETtmB,MAAK,eAGLsI,OAAM,SAAAhI,cC3Ec04D,CAA4Cp7C,KACrF46C,kBAAmB,SAAC56C,GAAD,OAAahoB,EDkFP,SAACgoB,GAC9B,OAAO,SAAChoB,EAAUwP,GAEdxS,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM2W,EAAQra,IACd+kB,SACAtoB,MAAK,WACF+qB,GACsB,CACdvK,MAAM,GAAD,OAAK5C,EAAQjL,MAAMkQ,YAAnB,mCACL9d,QAAQ,wBAAD,OAA0B6Y,EAAQjL,MAAMkQ,YAAxC,+FACPhE,OAAQjB,EAAQiB,OAChBK,OAAO,GAAD,OAAKoH,GAAL,yBAETtmB,MAAK,eAGLsI,OAAM,SAAAhI,WCrGsB04D,CAA4Cp7C,KACrFw6C,qCAAsC,kBAAMxiE,GDgHzC,SAACA,EAAUwP,GACd,IAAMhC,EAAOgC,IAAWC,KAAKjC,KACvBN,EAAkBsC,IAAW+lB,sBAAsBroB,gBAEpDM,GAASN,IAIT60D,MACDA,GAAuB/kE,EAClBgU,WACAzS,IAAIqO,IACJid,aAAa,eACbC,QAAQ5c,EAAgB6d,OAGxBnZ,GAAG,eAAe,SAAAC,GACf,IAAIixD,EAAcjxD,EAASsY,MAEvBo4C,EAAY,aAAO/yD,IAAW2zD,mBAAmBZ,eAEtC,IADDA,EAAat5D,WAAU,SAAAq6D,GAAmB,OAAIA,EAAoB31D,KAAOm1D,EAAYn1D,OAE/FwnB,GACsB2tC,EAAY75C,QAC7B7e,MAAK,SAAAogB,GACFs4C,EAAYt4C,YAAcA,EAE1B2K,GACiC2tC,EAAY9yC,aACxC5lB,MAAK,SAAA+hB,GACF22C,EAAY/lD,MAAQoP,EAEpBnsB,EAAS,CACLC,KAAM+hE,GACNO,aAAa,GAAD,oBAAMA,GAAN,CAAoBO,eAOhEf,GACKnwD,GAAG,iBAAiB,SAAAC,GACjB,IAAIixD,EAAcjxD,EAASsY,MAEvBo4C,EAAY,aAAO/yD,IAAW2zD,mBAAmBZ,cAC/Ct3D,EAAQs3D,EAAat5D,WAAU,SAAAq6D,GAAmB,OAAIA,EAAoB31D,KAAOm1D,EAAYn1D,OAEpF,IAAX1C,IACAs3D,EAAalwD,OAAOpH,EAAO,GAC3BjL,EAAS,CACLC,KAAM+hE,GACNO,2BCnKpBN,oCAAqC,kBAAMjiE,EAASojE,UAyU7CvjE,CAA6CqiE,IChY/CqB,GAA+B,+BAwB/BC,GAA0C,0CAC1CC,GAAmD,mDA6CnDC,GAAkC,kCAQlCC,GAA2C,2CAQ3CC,GAAwC,wCAOxCC,GAA0C,0CAQ1CC,GAAuD,uDAOvDC,GAAkD,kDA+F3DC,GAAsB,KAEbC,GAA6B,6BAuE7BC,GAAqC,WAC9C,OAAO,SAAClkE,EAAUwP,GACVw0D,KACAA,GAAoBhlC,IAAI,eACxBglC,GAAoBhlC,IAAI,iBACxBglC,GAAoBhlC,IAAI,iBACxBglC,GAAsB,QC1PrBG,GAA2C,EAC3CC,GAAsC,EACtCC,GAAwC,EAuC/CC,G,4MA4BFl/B,SAAW,WACP,MAMI,EAAKnnC,MALLi4B,EADJ,EACIA,oBACAquC,EAFJ,EAEIA,WACAC,EAHJ,EAGIA,mBACAC,EAJJ,EAIIA,kBACAC,EALJ,EAKIA,gBAGAxuC,KACIquC,GAAeC,GAAuBC,GACtCC,M,EAQZC,aAAe,WACX,MAKI,EAAK1mE,MAJLi4B,EADJ,EACIA,oBACAzK,EAFJ,EAEIA,YACAg5C,EAHJ,EAGIA,kBACAG,EAJJ,EAIIA,oCAGA1uC,GACIzK,GAAeg5C,GACfG,K,EAwKZl/B,gBAAkB,WACd,MAMI,EAAKznC,MALLiP,EADJ,EACIA,gBACAu3D,EAFJ,EAEIA,kBACA9+B,EAHJ,EAGIA,KACAC,EAJJ,EAIIA,YACAi7B,EALJ,EAKIA,aAGJ,OAA6C,IAAzC,EAAKgE,yBAAyB97D,OAE1B,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC,IAAD,CAAUmQ,cAAc,SAASF,cAAc,SAAS/V,MAAO,CAACQ,OAAQ,IAAxE,SAEQ8kE,EAEI,cAACvlE,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAAlC,SAEQ8tD,EAEI,yBAEA,qBAIZ,cAAC,aAAD,CACIthE,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAapC,EAAKgwD,yBACA15D,MAAMw6B,EAAOC,EAAaD,EAAOC,EAAcA,GAAa/tB,KAAI,SAAAmvB,GAAU,OACvE,eAAClB,GAAA,EAAD,CAA8BtL,OAAK,EAAnC,UACI,cAACz1B,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SACKi0B,EAAWhc,UAGpB,cAACjmB,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAEQi0B,EAAW89B,gBAEP,oBAEA,kBAIhB,cAAC//D,GAAA,EAAD,CAAWE,QAAS,EAApB,SACI,cAAC/F,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SACKkH,GAA+B+sB,EAAWq4B,iBAnBxCr4B,EAAWr5B,Q,EAiC1Ck3D,uBAAyB,WACrB,MAII,EAAK5mE,MAHLm7D,EADJ,EACIA,WACAyH,EAFJ,EAEIA,aACAp1C,EAHJ,EAGIA,YAGAs5C,EAAmB,aAAOt5C,GAO9B,OALIo1C,IACAkE,EAAsBA,EACjB7jD,QAAO,SAAA8lB,GAAU,OAAIA,EAAWhc,MAAMrf,SAASytD,EAAWjwD,mBAG5D47D,EAAoBrtD,MAAK,SAACstD,EAAaC,GAC1C,OAAOA,EAAY17C,KAAOy7C,EAAYz7C,S,uDA7T9C,WACIvrB,KAAKonC,WACLpnC,KAAK2mE,iB,gCAGT,SAAmB/rC,EAAWC,EAAWhnB,GAErC,MAII7T,KAAKC,MAHLi4B,EADJ,EACIA,oBACAquC,EAFJ,EAEIA,WACAL,EAHJ,EAGIA,mCAICK,GAAeruC,GAKpBl4B,KAAKonC,WACLpnC,KAAK2mE,gBALDT,M,oBA6CR,WACI,MAmBIlmE,KAAKC,MAlBLiP,EADJ,EACIA,gBACAyT,EAFJ,EAEIA,YACA4jD,EAHJ,EAGIA,WACA5+B,EAJJ,EAIIA,KACAC,EALJ,EAKIA,YACAwzB,EANJ,EAMIA,WACAyH,EAPJ,EAOIA,aACAqE,EARJ,EAQIA,2BACA1F,EATJ,EASIA,mBACA2F,EAVJ,EAUIA,uBACArnC,EAXJ,EAWIA,WACAI,EAZJ,EAYIA,kBACAwmC,EAbJ,EAaIA,gBACAzU,EAdJ,EAcIA,mBACA+L,EAfJ,EAeIA,iBACAoJ,EAhBJ,EAgBIA,uBAEAC,EAlBJ,EAkBIA,6BAGJ,OACI,gCACI,cAAClsC,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAAC8mC,UAAW,QAAxC,SACI,eAACC,GAAA,EAAD,WACI,eAACC,GAAA,EAAD,WACI,eAACL,GAAA,EAAD,WACI,cAACvhC,GAAD,CAAiBU,QAAS,EAAGL,UAAWiQ,GACpC3P,UACI,cAACuwC,GAAA,EAAD,CAAW/oC,KAAK,aAAauK,MAAOmiD,EAAYxjD,SAAUq6C,EAAoBxxD,WAAS,EAAC4c,YAAY,kBAAkBpb,KAAK,OACvHy1C,eACI,cAAC/b,GAAA,EAAD,CAAgBvqB,SAAS,QAAzB,SACI,cAAC0tC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,SAASsoB,KAAG,EAC/DpoB,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,SAEQkzD,EAEI,mBAEA,sBARpB,SAYI,cAACxrD,EAAA,EAAD,CAAY3V,QAASs8D,EAArB,SAEQ6E,EAEI,cAAC,KAAD,IAEA,cAAC,KAAD,cASpC,cAACt8D,GAAD,CAAiBU,QAAS,EAAGL,UAAWiQ,GAAqB3P,UACrD,eAAC,IAAD,CAAUkQ,cAAc,QAAQF,cAAc,SAA9C,UAEQyL,EAAYmkD,iBACM,OAAfP,GACA5jD,EAAYoK,OAASw5C,EAAWx5C,KAE/B,cAACzrB,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS2lE,EAA8BlmE,MAAO,CAAEgX,YAAa,GAAxJ,iCAEA,KAER,cAAC2mC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,SAASC,MAAI,EAChEC,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,qBAFR,SAGI,cAAC0H,EAAA,EAAD,CAAY3V,QAASglE,EAAiBvlE,MAAO,CAACwE,WAAY,IAA1D,SACI,cAAC,KAAD,gBAOxB,eAACmiC,GAAA,EAAD,WACI,cAACvhC,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO/N,UAAWyQ,YAAIxS,GAAaoB,YAArE,qBACR,cAACE,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAQ/N,UAAWyQ,YAAIxS,GAAaoB,YAAtE,oBACR,cAACE,GAAD,CAAiBU,QAAS,EACtBL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO/N,UAAWyQ,YAAIxS,GAAaoB,YAArE,gCAGhB,cAAC+hC,GAAA,EAAD,UAEQpoC,KAAK0nC,oBAGb,cAACW,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CACInnC,MAAO,CAACyV,gBAAiBC,IACzB0xB,mBAAoB,CAAC,GAAI,GAAI,IAC7BC,MAAOxoC,KAAK6mE,yBAAyB97D,OACrC68B,YAAaA,EACbD,KAAMA,EACNc,oBAAqB,CACjB,aAAc,iBAElBC,oBAAqB,CACjB,aAAc,aAElBC,YAAa,CACTC,QAAQ,GAEZC,aAAc/I,EACdgJ,oBAAqB5I,aAOzC,cAAC,GAAD,CACIhxB,gBAAiBA,EACjBg4D,2BAA4BA,EAC5B1F,mBAAoBA,EACpB2F,uBAAwBA,EACxBE,6BAA8BA,EAC9BpV,mBAAoBA,EACpBmV,uBAAwBA,W,GAtNbxlE,aAoUhBC,gBAxWS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBACjDvV,YAAa7gB,EAAM2P,KAAKjC,KACxB+2D,WAAYzkE,EAAMylE,uBAAuBhB,WACzC94C,YAAa3rB,EAAMylE,uBAAuB95C,YAC1Cg5C,kBAAmB3kE,EAAMylE,uBAAuBd,kBAChDD,mBAAoB1kE,EAAMylE,uBAAuBf,mBACjD7+B,KAAM7lC,EAAMylE,uBAAuB5/B,KACnCC,YAAa9lC,EAAMylE,uBAAuB3/B,YAC1CwzB,WAAYt5D,EAAMylE,uBAAuBnM,WACzCyH,aAAc/gE,EAAMylE,uBAAuB1E,aAE3CqE,2BAA4BplE,EAAMylE,uBAAuBL,2BACzD1F,mBAAoB1/D,EAAMylE,uBAAuB/F,mBACjD2F,uBAAwBrlE,EAAMylE,uBAAuBJ,2BAIlC,SAAAnlE,GACvB,MAAO,CACH0kE,gBAAiB,kBAAM1kE,GDjCpB,SAACA,EAAUwP,GACd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9B+2D,EAAa/0D,IAAW+1D,uBAAuBhB,WrGsInC,IqGpId5jD,EAAY1gB,OAQX0gB,EAAYG,YACTH,EAAYoK,OAASw5C,EAAWx5C,KARpC/qB,EAAS,CACLC,KAAMwjE,GACNh4C,YAAa,MAerBzrB,EAAS,CACLC,KAAMujE,KAGVruC,GACmCovC,EAAWx5C,MACzC3gB,MAAK,SAAAqhB,GACFzrB,EAAS,CACLC,KAAMwjE,GACNh4C,YAAY,aAAKA,QAGxB/Y,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwjE,GACNh4C,YAAa,aCHzBqS,WAAY,SAACplB,EAAOslB,GAAR,OAAoBh+B,EDUd,SAAC0Y,EAAOslB,GAC9B,MAAO,CACH/9B,KAAMyjE,GACN1lC,WCbyCwnC,CAAmC9sD,EAAOslB,KACnFE,kBAAmB,SAACxlB,GAAD,OAAW1Y,EDiBL,SAAA0Y,GAC7B,MAAO,CACHzY,KAAM0jE,GACN1sD,MAAOknB,SAASzlB,EAAMyD,OAAOlF,MAAO,KCpBGuuD,CAA0C9sD,KACjFu3C,mBAAoB,SAACv3C,GAAD,OAAW1Y,ED+BL,SAAA0Y,GAC9B,MAAO,CACHzY,KAAM4jE,GACNnrD,SClCwC8sD,CAA2C9sD,KACnFsjD,iBAAkB,kBAAMh8D,EDwBrB,CACHC,KAAM2jE,MCxBNgB,oCAAqC,kBAAM5kE,GD8IxC,SAACA,EAAUwP,GACd,IAAIw0D,GAAJ,CAIA,IAAMrjD,EAAcnR,IAAWC,KAAKjC,KAC9B+2D,EAAa/0D,IAAW+1D,uBAAuBhB,WrGlDnC,IqGoDd5jD,EAAY1gB,OAIX0gB,EAAYG,YAAcH,EAAYoK,OAASw5C,EAAWx5C,SAI/Di5C,GAAsBhnE,EACjBgU,WACAzS,IAAIqO,KAGJgF,GAAG,eAAe,SAAAC,GACf,IAAMm1B,EAAan1B,EAASsY,MACxBsB,EAAW,aAAOjc,IAAW+1D,uBAAuB95C,cAGzC,IADDA,EAAYxiB,WAAU,SAAAw8D,GAAkB,OAAIA,EAAmB93D,KAAOq5B,EAAWr5B,OAGvFq5B,EAAWjc,OAASw5C,EAAWx5C,MAC/B/qB,EAAS,CACLC,KAAMgkE,GACNx4C,YAAY,GAAD,oBAAMA,GAAN,CAAmBub,SAMlDg9B,GACKpyD,GAAG,iBAAiB,SAAAC,GACjB,IAAMm1B,EAAan1B,EAASsY,MACxBsB,EAAW,aAAOjc,IAAW+1D,uBAAuB95C,aAElDxgB,EAAQwgB,EAAYxiB,WAAU,SAAAw8D,GAAkB,OAAIA,EAAmB93D,KAAOq5B,EAAWr5B,OAChF,IAAX1C,IACAwgB,EAAYxgB,GAAS+7B,EACrBhnC,EAAS,CACLC,KAAMgkE,GACNx4C,YAAY,aAAKA,SAKjCu4C,GACKpyD,GAAG,iBAAiB,SAAAC,GACjB,IAAMm1B,EAAan1B,EAASsY,MACxBsB,EAAW,aAAOjc,IAAW+1D,uBAAuB95C,aAElDxgB,EAAQwgB,EAAYxiB,WAAU,SAAAw8D,GAAkB,OAAIA,EAAmB93D,KAAOq5B,EAAWr5B,OAChF,IAAX1C,IACAwgB,EAAYpZ,OAAOpH,EAAO,GAC1BjL,EAAS,CACLC,KAAMgkE,GACNx4C,YAAY,aAAKA,eC3MjCy4C,mCAAoC,kBAAMlkE,EAASwlE,OACnDJ,uBAAwB,kBAAMplE,ED2ClC,yCAAO,WAAOA,EAAUwP,GAAjB,wBAAA1F,EAAA,yDACG01D,EAAqBhwD,IAAW+1D,uBAAuB/F,mBACvD7+C,EAAcnR,IAAWC,KAAKjC,KAC9BN,EAAkBsC,IAAW+lB,sBAAsBroB,gBAEpDyT,EALF,oDrGqDe,IqG5CdA,EAAY1gB,KATb,oDAaE0gB,EAAYmkD,gBAbd,oDAiBsC,IAArCtF,EAAmBt0D,OAAOnC,OAjB3B,wBAkBC/I,EAAS,CACLC,KAAM8jE,GACNr2D,OAAQy2D,KApBb,kCAyBHnkE,EAAS,CACLC,KAAM8jE,GACNr2D,OAAQ02D,KA3BT,oBA+B2BjvC,GAA8BqqC,EAAmBr2D,eA/B5E,mBAkCiBwiB,WAlCjB,iBAmCK3rB,EAAS,CACLC,KAAM8jE,GACNr2D,OAAQ22D,KArCjB,0CAwC4B,IAAI59C,IAAMuB,QAC7B,OACA5D,GAAUyB,mBACV,CACIe,gBAAiB,KACjBY,YAAa,CACT+3C,MAAO5+C,EACPzT,gBAAiBA,EACjBsyD,mBAAoBA,KAhDrC,QAwCW3mD,EAxCX,OAsDW6sD,EAAgB7sD,EAAStO,KAG/Bye,GAAc,CACVC,OAAQtI,EAAYhT,GACpBub,arG/Cc,EqGgDdC,yBAA0Bvc,GAC1Bwc,mBAAoBs8C,EAAc/3D,GAClC0b,gBtFsC6C,4CsFnCpCpd,QAAQ,oBAAqBuzD,GAEtCvoD,MAAOyuD,IAGX1lE,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kCACT5P,MAAO,UACP6P,SAAU,WAGdpP,EAAS,CACLC,KAAM6jE,KA9Ef,2DAkFC9jE,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iDACT5P,MAAO,QACP6P,SAAU,WAtFf,2DAAP,0DCzCIi2D,6BAA8B,kBAAMrlE,EDkCjC,CACHC,KAAM6jE,SCqSCjkE,CAA6CykE,IAEtDqB,G,4MAwDFC,oBAAsB,WAClB,MAGI,EAAK3nE,MAFLknE,EADJ,EACIA,uBACAj4D,EAFJ,EAEIA,gBAGA2F,EAAM,CACNo8B,KAAM,GACN1vC,MAAO,IAGX,OAAQ4lE,GACJ,KApbmC,EAqb/B,OAAO,KACX,KAAKhB,GACDtxD,EAAIgzD,IAAM,4BACVhzD,EAAItT,MAAQ,QACZ,MACJ,KAAK6kE,GACD,OACI,cAAC,aAAD,CAAY5kE,KAAM,GACdD,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,KAMpB,KAAKwvD,GACDxxD,EAAIo8B,KAAO,+CACXp8B,EAAItT,MAAQ,QACZ,MACJ,KAtcsC,EAwctC,QACI,OAAO,KAGf,OACI,cAACL,EAAA,EAAD,CAAYK,MAAOsT,EAAItT,MAAOT,QAAQ,QAAQiU,MAAM,OAApD,SACKF,EAAIo8B,Q,4CAjGjB,WACI,MAOIjxC,KAAKC,MANLkC,EADJ,EACIA,aACA+kE,EAFJ,EAEIA,2BACA1F,EAHJ,EAGIA,mBACA6F,EAJJ,EAIIA,6BACApV,EALJ,EAKIA,mBACAmV,EANJ,EAMIA,uBAGJ,OACI,eAAC9mE,EAAA,EAAD,CAAQE,KAAM0mE,EAA4B3mE,IAAK4B,EAAc1B,WAAS,EAACuV,SAAS,KAAKV,QAAS+xD,EAA9F,UACI,cAAC3mE,EAAA,EAAD,CAAayxD,mBAAiB,EAA9B,SACI,eAAC,IAAD,CAAUj7C,cAAc,SAAxB,UACI,cAAC,IAAD,CAAUC,KAAM,EAAhB,SACI,cAACjW,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAA/C,mCAGJ,cAAC,IAAD,CAAUoC,KAAM,EAAGC,cAAc,QAAjC,SACI,cAACC,EAAA,EAAD,CAAY3V,QAAS2lE,EAArB,SACI,cAAC,KAAD,aAKhB,cAAC1mE,EAAA,EAAD,UACI,cAACyc,GAAA,EAAD,CACItc,QAAQ,WACRG,MAAM,QACNyN,KAAK,qBACL2O,YAAY,mBACZpE,MAAOuoD,EACP5pD,SAAUq6C,EACVxxD,WAAS,EACTs9C,UAAQ,EACR58C,MAAO,CAAEC,UAAW,QAE5B,cAACC,EAAA,EAAD,UACI,eAAC,IAAD,CAAUkW,MAAM,OAAOY,YAAa,GAAIX,aAAc,GAAIpW,UAAW,GAAIgW,cAAc,QAAQF,cAAc,SAA7G,UAEQlX,KAAK4nE,sBAET,eAACtmE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUG,QAAS0lE,EAAwB5lE,KAAK,SAASwF,UAAWyQ,YAAIxS,GAAakB,mBAAoBhF,MAAO,CAACwE,WAAY,IAA9J,gBAAsK,cAAC,KAAD,CAASI,SAAS,QAAQ5E,MAAO,CAAEwE,WAAY,oB,GA3C3M/D,aCpT5BkmE,G,kDAEF,WAAY7nE,GAAQ,IAAD,8BACf,cAAMA,IAQVuvD,qBAAuB,WACnB,MAOI,EAAKvvD,MANL0iB,EADJ,EACIA,YACAzT,EAFJ,EAEIA,gBAGA64D,EALJ,EAKIA,wBACAC,EANJ,EAMIA,2BAGCrlD,GACGA,GvGkDU,IuGlDKA,EAAY1gB,OASnC8lE,EACIplD,EAAYG,WAERH,EAEAzT,GAIR84D,EAA0B94D,KAtCX,EAoFnBygD,kBAAoB,WAChB,MAQI,EAAK1vD,MAPLyiB,EADJ,EACIA,oBACAwvB,EAFJ,EAEIA,sBAEAvvB,EAJJ,EAIIA,YAEA4hD,EANJ,EAMIA,aACAH,EAPJ,EAOIA,mBAGEvgD,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAEjDitC,EAA2B,EAe/B,OAbI/1B,EAAsBvL,WAAauL,EAAsBvL,UAAUh3B,KAAO+S,EAAoBC,YAAYhT,IACtGokC,GAA0B7B,IAC1BA,EAAsBS,eAAe/lC,SAAQ,SAAA0mC,GACrChjC,GAAyBgjC,EAAcC,iBACvC00B,GAA4B,MASxCpkD,EAAOisC,MAAQrsB,GAEX,eAACptB,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACqW,aAAc,IAArC,UAGSmL,EAAYG,WAIT,cAACvM,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,eAACuxD,GAAA,EAAD,CAAWlhE,UAAWyQ,YAAIC,GAAOywD,YAAjC,UACI,cAACC,GAAA,EAAD,CAAkBxQ,WAAY,cAAC,KAAD,IAA9B,SACI,eAAC,IAAD,CAAUh3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAAzD,2BACA,cAAC7T,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,QAAQiU,MAAM,OAA5C,6DAGR,cAACszD,GAAA,EAAD,UACI,cAAC,IAAD,CAAUznE,QAAM,EAAC2W,MAAM,OAAvB,SACI,cAAC,GAAD,aAZhB,KAoBR,cAAChB,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,eAACuxD,GAAA,EAAD,CAAWlhE,UAAWyQ,YAAIC,GAAOywD,YAAjC,UACI,cAACC,GAAA,EAAD,CAAkBxQ,WAAY,cAAC,KAAD,IAA9B,SACI,eAAC,IAAD,CAAUh3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAAzD,SAEQ4N,EAAYG,WAER,sBAEA,yBAGZ,cAAC5hB,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,QAAQiU,MAAM,OAA5C,SAEQ4N,EAAYG,WAER,oHAEA,+KAKpB,cAACulD,GAAA,EAAD,CAAkBrhE,UAAWyQ,YAAIC,GAAO4wD,wBAAxC,SACI,cAAC,GAAD,WAOR3lD,EAAYG,WAER,KAEA,cAACvM,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,eAACuxD,GAAA,EAAD,CAAWlhE,UAAWyQ,YAAIC,GAAOywD,YAAjC,UACI,cAACC,GAAA,EAAD,CAAkBxQ,WAAY,cAAC,KAAD,IAA9B,SACI,eAAC,IAAD,CAAUh3D,QAAM,EAAhB,UACI,eAAC,IAAD,CAAU2W,MAAM,OAAhB,UACI,cAACrW,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAAzD,oCACA,cAAC,IAAD,CAAUpP,WAAY,GAAIvE,UAAW,EAArC,SACI,cAAC09C,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,YAAYC,MAAI,EACnEC,QACI,eAACC,GAAA,EAAD,CAASxvC,GAAE,cAAX,UACK40D,EAAax5D,OADlB,gDAFR,SAOI,cAACulD,EAAA,EAAD,CAAOC,aAAe6T,EAAyBG,EAAax5D,OAAjB,EAAyBxJ,MAAM,QACtEivD,WACK4T,GAI2B,IAAxBG,EAAax5D,gBAKrC,cAAC7J,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,QAAQiU,MAAM,OAA5C,yGAOR,cAACszD,GAAA,EAAD,CAAkBrhE,UAAWyQ,YAAIC,GAAO4wD,wBAAxC,SACI,cAAC,GAAD,WAOpB,cAAC/xD,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,eAACuxD,GAAA,EAAD,CAAWlhE,UAAWyQ,YAAIC,GAAOywD,YAAjC,UACI,cAACC,GAAA,EAAD,CAAkBxQ,WAAY,cAAC,KAAD,IAA9B,SACI,eAAC,IAAD,CAAUh3D,QAAM,EAAhB,UACI,eAAC,IAAD,CAAU2W,MAAM,OAAhB,UACI,cAACrW,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAAzD,2BACA,cAAC,IAAD,CAAUpP,WAAY,GAAIvE,UAAW,EAArC,SACI,cAAC09C,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,YAAYC,MAAI,EACnEC,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAE,cADN,SAIQgT,EAAYG,WAAZ,UAEOmlD,EAFP,4HAIOA,EAJP,0GANhB,SAcI,cAAC3X,EAAA,EAAD,CAAOC,aAAc0X,EAA0B1mE,MAAM,QACjDivD,UAAwC,IAA7ByX,WAI3B,cAAC/mE,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,QAAQiU,MAAM,OAA5C,SAEQ4N,EAAYG,WAER,mFAEA,sFAKpB,cAACulD,GAAA,EAAD,CAAkBrhE,UAAWyQ,YAAIC,GAAO4wD,wBAAxC,SACI,eAAC,IAAD,CAAU1nE,QAAM,EAAC2W,MAAM,OAAvB,UACI,cAACD,EAAA,EAAD,CAASnW,MAAO,CAACqW,aAAc,MAC/B,cAAC,GAAD,cAQZmL,EAAYG,WAER,KAEA,cAACvM,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,eAACuxD,GAAA,EAAD,CAAWlhE,UAAWyQ,YAAIC,GAAOywD,YAAjC,UACI,cAACC,GAAA,EAAD,CAAkBxQ,WAAY,cAAC,KAAD,IAA9B,SACI,eAAC,IAAD,CAAUh3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAAzD,iCACA,cAAC7T,EAAA,EAAD,CAAYq6B,WAAS,EAACz6B,QAAQ,QAAQiU,MAAM,OAA5C,yFAIR,cAACszD,GAAA,EAAD,UACI,cAAC,IAAD,CAAUznE,QAAM,EAAC2W,MAAM,OAAvB,SACI,cAAC,GAAD,gBAchCsM,EAAOisC,MAAQlsB,GAEXjhB,EAAYG,WAER,cAAC,GAAD,IAEA,cAAC,GAAD,IAORe,EAAOisC,MAAQjsB,GAEX,cAAC,GAAD,IAgBJhgB,EAAOisC,MAAQhsB,GAEX,cAAC,GAAD,IAOJjgB,EAAOisC,MAAQ5rB,IAAwBrgB,EAAOisC,MAAQ7rB,GAElD,qBACI9iC,MAAO,CACHQ,OAAQ,IAFhB,SAKI,cAAC,GAAD,MAQRkiB,EAAOisC,MAAQ9rB,GACR,cAAC,GAAD,IAMPngB,EAAOisC,MAAQ/rB,GAIR,cAAC,GAAD,SAJX,GAlWe,EAygBnBgsB,gBAAkB,WACd,IAEInjC,EAAQ,GAEZ,OAJegjC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAItC80B,KACX,KAAKrsB,GACD7W,EAAQ6W,GACR,MACJ,KAAKG,GACDhX,EAAQgX,GACR,MACJ,KAAKC,GACDjX,EAAQiX,GACR,MAIJ,KAAKC,GACDlX,EAAQkX,GACR,MACJ,KAAKI,GACDtX,EAAQsX,GACR,MACJ,KAAKH,GACDnX,EAAQmX,GACR,MACJ,KAAKC,GACDpX,EAAQoX,GACR,MACJ,QACI,OAGR,OACI,cAAC9iC,EAAA,EAAD,CAAYJ,QAAQ,KAAKkG,UAAWyQ,YAAIC,GAAOhS,YAA/C,SACKknB,KA1iBT,EAAK7Z,WAAa/T,EAASgU,WAHZ,E,qDA4CnB,WACI,MAOIhT,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEAZ,EAJJ,EAIIA,2BACAG,EALJ,EAKIA,sCACAK,EANJ,EAMIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAAeA,GAAgC1nB,EAAM2vB,MAE1I7C,IAEIC,GAAyBG,GACzBl4B,KAAKwvD,yB,gCAIb,SAAmB50B,EAAWC,EAAWhnB,GACrC,MAKI7T,KAAKC,MAJL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,qBAKJJ,EAPA,EAIIA,oBAKAC,GAAyBG,GACzBl4B,KAAKwvD,yB,oBA6Rb,WACI,MAiBIxvD,KAAKC,MAhBLi4B,EADJ,EACIA,oBACAH,EAFJ,EAEIA,sBACA7oB,EAHJ,EAGIA,gBAEA6uB,EALJ,EAKIA,cACAE,EANJ,EAMIA,YAEA3F,EARJ,EAQIA,WACA+B,EATJ,EASIA,eACA1X,EAVJ,EAUIA,YACA4lD,EAXJ,EAWIA,kBAEAp1C,EAbJ,EAaIA,cAEAwK,EAfJ,EAeIA,cACAykB,EAhBJ,EAgBIA,oBAGJ,OAAKrqB,EAQAG,EAIDmC,IAAmBkuC,EAEf,cAAC,IAAD,CAAUnnE,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OASpByhB,IAAeG,KACX9V,GACAA,GvGtVU,IuGsVKA,EAAY1gB,KAExB,cAAC,GAAD,IAGJ,eAAC,IAAD,CACH+tD,QACI,cAAC,GAAD,CACI3rB,eAAgBrkC,KAAKC,QAG7BgwD,QAAQ,EACRzvD,KAAMy9B,EACNiyB,OAAQnyB,EACRoyB,UAAW,kBAAMxyB,GAAc,IAC/ByyB,aAAW,EACX14C,OAAQ,CACJs4C,QAAS,CAACp5C,gBAAiBC,IAC3Bw5C,QAAS,CAACz5C,gBAAiBC,KAb5B,UAgBH,eAACV,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CAAE+U,QAAS,GAFtB,UAII,cAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,IAAD,CAAUyB,OAAQ,GAAIb,MAAM,OAAOL,cAAc,SAChD/V,MAAO,CAACyV,gBACI1H,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IAJhB,SAQI,eAACR,EAAA,EAAD,CAAKlV,MAAO,CAACoW,MAAO,QAASjB,WAAS,EAAtC,UAEI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAAC,IAAD,CAAUO,cAAc,SAASK,MAAM,OAAvC,UAEQ,cAACF,EAAA,EAAD,CAAYrQ,UAAWyQ,YAAIxS,GAAaW,kBAAmBlE,QAAS,kBAAMi8B,GAAc,IAAxF,SACI,cAAC,IAAD,MAIJ39B,KAAK+vD,uBAMjB,cAACx5C,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGxV,MAAO,CAAC8V,aAAc,IAAvD,SACI,cAAC,IAAD,CAAUC,cAAc,SAASE,cAAc,QAAQG,MAAM,OAA7D,SACI,cAACF,EAAA,EAAD,CAAY3V,QAAS0gD,EAArB,SACI,cAACkO,EAAA,EAAD,CAAOC,aAAcp9B,EAAcpoB,OAAQxJ,MAAM,YAAYivD,UAAoC,IAAzBr9B,EAAcpoB,OAAtF,SACI,cAAC,IAAD,CAAmB/D,UAAWyQ,YAAIxS,GAAaoB,+BAU/E,eAACgQ,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACyV,gBAAiBC,IAAxC,UACI,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAACzV,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAAS5T,MAAO,CAAC2V,WAAY,GAAGC,cAAe,IAAjF,UAEQ4L,EAAYG,WAER,eAEAH,EAAYmkD,gBAER,oBAEA,cAVhB,KAYM,4BAAInkD,EAAYqK,aAI1B,cAACzW,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,CAASnW,MAAO,CAACyV,gBAAiBC,WAKtC7W,KAAK2vD,uBAKb,cAAC,GAAD,IAGA,cAAC,GAAD,IAGA,cAAC6Y,GAAD,OAzHO,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUpnE,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CAAY7V,MAAOsV,W,GAnYVjV,aAqjBdC,gBAlmBS,SAAAC,GACpB,MAAO,CACH4gB,oBAAqB5gB,EAAM4gB,oBAC3BwvB,sBAAuBpwC,EAAMowC,sBAG7BtvB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3CmV,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD6F,cAAej8B,EAAMk8B,iBAAiBD,cACtCE,YAAan8B,EAAMk8B,iBAAiBC,YAEpCngB,eAAgBhc,EAAM+b,qBAAqBC,eAC3C4yC,qBAAsB5uD,EAAM+b,qBAAqB6yC,qBAEjDp4B,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B1X,YAAa7gB,EAAM2P,KAAKjC,KACxB+4D,kBAAmBzmE,EAAM2P,KAAKwqB,WAE9B9I,cAAerxB,EAAMugD,oBAAoBlvB,cAEzCoxC,aAAcziE,EAAMqjE,mBAAmBZ,aACvCH,mBAAoBtiE,EAAMqjE,mBAAmBf,uBAI1B,SAAApiE,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjCyE,cAAe,SAACC,GAAD,OAAwB57B,EAAS+iC,GAAsCnH,KAEtFmqC,wBAAyB,SAACv4D,GAAD,OAAUxN,EAASinC,GAAoCz5B,KAEhFw4D,0BAA2B,SAACjpD,GAAD,OAAW/c,GFpFtBymE,EEoFgE1pD,EFnF7E,SAAC/c,EAAUwP,GACd,IAAMk3D,EAAiBl3D,IAAW+1D,uBAAuBhB,WAEpDkC,GAAaC,EAQdA,EAAe37C,OAAS07C,EAAS17C,MAIrC/qB,EAAS,CACLC,KAAMsjE,GACNxmD,MAAO0pD,IAbPzmE,EAAS,CACLC,KAAMsjE,GACNxmD,MAAO0pD,OAPC,IAAAA,GEsFhBrmB,oBAAqB,SAAC1nC,GAAD,OAAW1Y,EAASqiD,GAAyC3pC,QAyjB3E7Y,CAA6CimE,IAEtDpwD,GAASxS,IAAWC,OAAO,CAC7BO,WAAY,CACRK,SAAU,GACVJ,WAAY,EACZpE,MAAOsV,IAGXsxD,WAAY,CACR/mE,UAAW,GACXuE,WAAY,GACZwS,YAAa,IAGjBmwD,uBAAwB,CACpBhtB,UApnB+B,IAqnB/BC,UAAW,U,iFC5pBE+F,G,4MAEjBqnB,iBAAmB,SAAA17D,GACf,EAAKhN,MAAM0oE,iBAAiB17D,I,4CAGhC,WAAU,IAAD,OAaD27D,EACA5oE,KAAKC,MADL2oE,UAGJ,OAAKA,GAAcA,GAAkC,IAArBA,EAAU79D,OAC/B,KAIP,cAAC,IAAD,CACInK,QAAM,EACNQ,UAAW,GAFf,SAII,cAACqjC,GAAA,EAAD,UAEQmkC,EAAU/uD,KAAI,SAACvL,EAAUrB,GAAX,OACV,eAAC,IAAD,CAEIiK,cAAc,SAFlB,UAII,eAACwtB,GAAA,EAAD,CACIC,QAAM,EACNxjC,MAAO,CACH+U,QAAS,GAHjB,UAMI,qBACI4iB,IAAI,WACJ9xB,UAAWyQ,YAAIC,GAAOmxD,cACtB1vD,IAAK4f,EAAQ,KAA+BC,UAEhD,eAAC,IAAD,CACIp4B,QAAM,EACNwW,cAAc,OAFlB,UAII,cAAClW,EAAA,EAAD,CACIJ,QAAQ,QACRkG,UAAWyQ,YAAIC,GAAOpR,YACtByO,MAAM,OAHV,SAKKzG,EAASG,KAAKC,OAEnB,cAACxN,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,OAHV,SAKKzG,EAASG,KAAKk/B,qBAK3B,cAACmR,GAAA,EAAD,CACIC,QAAS,CAAC,QAAS,SACnBE,MAAI,EACJD,UAAU,SACVE,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAE,iBADN,oBALR,SAWI,cAAC0H,EAAA,EAAD,CACIlW,MAAO,CACHoW,MAAO,GACPa,OAAQ,IAEZ1W,QAAS,kBAAM,EAAKinE,iBAAiB17D,IALzC,SAOI,cAAC,KAAD,CACIlH,SAAS,gBAtDhBkH,c,GAnCOrL,aAsGtC8V,GAASxS,IAAWC,OAAO,CAE7Bo3B,UAAW,CACP56B,OAAQ,GAGZknE,aAAc,CACVtxD,MAAO,GACPa,OAAQ,IAGZ0wD,UAAW,CACP/iE,SAAU,GACVyR,aAAc,GAGlBuxD,UAAW,CACPhjE,SAAU,GACVxE,MAAOsV,MCvHMmyD,G,4MAEjBC,gBAAkB,SAAAr7B,GACd,EAAK3tC,MAAMgpE,gBAAgBr7B,I,EAG/B+6B,iBAAmB,SAAA17D,GACf,EAAKhN,MAAM0oE,iBAAiB17D,I,4CAGhC,WAAU,IAAD,OAaL,EAGIjN,KAAKC,MAFL2oE,EADJ,EACIA,UACAM,EAFJ,EAEIA,aAGJ,OAAKN,GAAkC,IAArBA,EAAU79D,OAKxB,cAAC,IAAD,CACInK,QAAM,EACNQ,UAAW,GAFf,SAII,cAACqjC,GAAA,EAAD,UAEQmkC,EAAU/uD,KAAI,SAACvL,EAAUrB,GAAX,OACVqB,EAASa,eAAe,WAEpB,KAEA,eAAC,IAAD,CAEI+H,cAAc,SAFlB,UAKQ,mBACI+hB,KAAM3qB,EAASs/B,YACfu7B,IAAI,sBACJhrD,OAAO,SACPnX,UAAWyQ,YAAIxS,GAAaQ,4CAC5BtE,MAAO,CACHoW,MAAO,QANf,SASI,eAACmtB,GAAA,EAAD,CACIC,QAAM,EACNxjC,MAAO,CACH+U,QAAS,GAHjB,UAMI,qBACI4iB,IAAI,WACJ9xB,UAAWyQ,YAAIC,GAAOmxD,cACtB1vD,IAAK4f,EAAQ,KAA+BC,UAEhD,eAAC,IAAD,CACIp4B,QAAM,EACNwW,cAAc,OAFlB,UAII,cAAClW,EAAA,EAAD,CACIJ,QAAQ,QACRkG,UAAWyQ,YAAIC,GAAOpR,YACtByO,MAAM,OAHV,SAKKzG,EAASm/B,WAEd,cAACvsC,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,OAHV,SAKKzG,EAASo/B,uBAO1Bw7B,EAEI,cAACpqB,GAAA,EAAD,CACIC,QAAS,CAAC,QAAS,SACnBE,MAAI,EACJD,UAAU,MACVE,QACI,cAACC,GAAA,EAAD,CACIxvC,GAAE,cADN,kCALR,SAWI,cAAC0H,EAAA,EAAD,CACIlW,MAAO,CACHoW,MAAO,GACPa,OAAQ,IAEZ1W,QAAS,kBAAM,EAAKinE,iBAAiB17D,IALzC,SAOI,cAAC,KAAD,CACIlH,SAAS,cAKrB,OAzEHkH,UAhBtB,S,GA7B4BrL,aAiIzC8V,GAASxS,IAAWC,OAAO,CAE7Bo3B,UAAW,CACP56B,OAAQ,GAGZknE,aAAc,CACVtxD,MAAO,GACPa,OAAQ,IAGZ0wD,UAAW,CACP/iE,SAAU,GACVyR,aAAc,GAGlBuxD,UAAW,CACPhjE,SAAU,GACVxE,MAAOsV,IAGXvQ,WAAY,CACR/E,MAAOsV,MCzKFuyD,GAAwC,wCACxCC,GAAa,SAAA55D,GACtB,MAAO,CACHxN,KAAMmnE,GACN35D,YAIK65D,GAA4C,4CAC5CC,GAAiC,SAAC7uD,GAC3C,MAAO,CACHzY,KAAMqnE,GACN5uD,UCcF8uD,G,4JAEF,WACI,MAOIxpE,KAAKC,MANLwiB,EADJ,EACIA,oBAEAiR,EAHJ,EAGIA,yBACAjkB,EAJJ,EAIIA,QAEA85D,EANJ,EAMIA,+BAGJ,OAAIt5B,GAAqBxtB,GACd,KAIP,eAAC+Y,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACw9C,GAAA,EAAD,CACIj3C,UAAWyQ,YAAIxS,GAAaqB,YAC5BnF,MAAO,CACHqW,aAAc,GAHtB,qCAQA,eAACsgC,GAAA,EAAD,CACI7+B,OACkC,IAA9Bya,EAEKjkB,EAQGA,EAAQgkB,WANR0c,GAA8B1tB,GAE1BA,EAAoB1D,OAAS0D,EAAoB1D,MAAMmW,SAASmlC,kBAEhE5qD,EAAQsP,MAAMmW,SAASmlC,kBAI/B3mC,EAERhlB,KAAK,2BACL/M,OAAO,QACPiW,SAAU2xD,EACVxxB,MACI,cAACC,GAAA,EAAD,CACIomB,WAAY,EACZ1vD,KAAK,6BAtBjB,UA0BI,cAACupC,GAAA,EAAD,CACIh/B,M3G4GiB,E2G7GrB,qDAKQk3B,GAA8B1tB,GAE1BA,EAAoB1D,O3GsGX,I2GtGoB0D,EAAoB1D,MAAMmW,SAASmlC,kBAE5D,aAEA,G3GkGK,I2GhGT5qD,EAAQsP,MAAMmW,SAASmlC,kBAEnB,aAEA,GAjBhB,wFAqBA,cAACpiB,GAAA,EAAD,CACIh/B,M3GsFqB,E2GvFzB,yDAKQk3B,GAA8B1tB,GAE1BA,EAAoB1D,O3GgFP,I2GhFgB0D,EAAoB1D,MAAMmW,SAASmlC,kBAE5D,aAEA,G3G4ES,I2G1Eb5qD,EAAQsP,MAAMmW,SAASmlC,kBAEnB,aAEA,GAjBhB,oKAqBA,cAACpiB,GAAA,EAAD,CACIh/B,M3GgEkB,E2GjEtB,sDAKQk3B,GAA8B1tB,GAE1BA,EAAoB1D,O3G0DV,I2G1DmB0D,EAAoB1D,MAAMmW,SAASmlC,kBAE5D,aAEA,G3GsDM,I2GpDV5qD,EAAQsP,MAAMmW,SAASmlC,kBAEnB,aAEA,GAjBhB,yF,GAhGgBz4D,aA2HrBC,gBA1IS,SAAAC,GACpB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAE3BiR,yBAA0B5xB,EAAM2nE,8BAA8B/1C,yBAC9DjkB,QAAS3N,EAAM2nE,8BAA8Bh6D,YAI1B,SAAAzN,GACvB,MAAO,CACHunE,+BAAgC,SAAC7uD,GAAD,OAAW1Y,EAAS0nE,GAA8DhvD,QA+H3G7Y,CAA6C2nE,IC1BtDG,I,OAAY,CACdC,4BAA4B,EAE5BC,oBAAqB,KACrBC,cAAe,KACfC,qBAAqB,EAErBC,mBAAmB,EACnBC,wCAAyC,KAEzCC,cAAc,EACdC,oBAAoB,EACpBC,mBAAmB,EAEnBC,cAAe,CAEXC,WAxCsC,EA0CtCC,0BAA2B,YAG3BC,YAAa,IAEbC,iBAAkB,GAClBC,wBAAyB,GACzBC,gBAAiB,KAEjBC,wBAAyB,GACzBC,mBAAoB,GACpBC,qBAAsB,GACtBC,eAAgB,GAChBC,wBAAyB,GACzBC,qCAAsC,GACtCC,wBAAyB,GAEzBC,qBAAsB,GAGtBp1B,WAAY,GAEZq1B,mBAAoB,GAEpBC,uBAAwB,KAGxBrpB,yBAA0B,GAE1BD,0BAA2B,GAE3BupB,sBAAuB,CAACjgE,IAAK,IAE7BkgE,2BAA4B,KAG5BC,kBA9FgC,EAiGhCC,0BAA2B,KAC3BC,gCAAgC,EAEhCC,mBAAoB,EACpBC,eA5FmB,EA8FnBC,6BAA6B,EAG7BC,4BAA4B,EAC5BC,4BAA4B,EAC5BC,oCAAoC,EAGpCroD,UAAW,KAIXsoD,eAAgB,MAKlBC,G,kDAEF,WAAYjsE,GAAQ,IAAD,8BACf,cAAMA,IAkGVksE,yCAA2C,SAAC7B,EAAY3mD,GACpD,IACIlB,EACA,EAAKxiB,MADLwiB,oBAKAkB,EACA,EAAK1jB,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SACItY,EAAoBktB,iBAEhBjd,GACKzkB,QAAQ,iBAAkBwU,EAAoBktB,kBAEnDjd,GACRsI,OAAO,SAAD,OAAWrX,GACjB7hB,MAAO,CACHwoE,WAAYA,KAMpB,EAAKrqE,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SACItY,EAAoBktB,iBAEhBjd,GACKzkB,QAAQ,iBAAkBwU,EAAoBktB,kBAEnDjd,GACR5wB,MAAO,CACHwoE,WAAYA,MApIT,EA6InBljC,SAAW,WACP,MAII,EAAKnnC,MAHLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBACA0pD,EAHJ,EAGIA,mCAGJ,EAGI,EAAKtqE,MAFLioE,EADJ,EACIA,oBACAE,EAFJ,EAEIA,wCAGJ,IAAIh6B,GAAqBxtB,KAAwBgf,GAAiB/e,GAIlE,IAAKif,GAA0Bjf,IACvBA,EAAoBC,a5G9LP,I4G8LsBD,EAAoBC,YAAY1gB,KAElE8nE,GACD,EAAK3wC,SAAS,CACV2wC,qBAAqB,QALjC,CAWA,EAAK3wC,SAAS,CACV4wC,mBAAmB,IAIvB,IAAMnmD,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAGjDnX,EAAOE,MAAQkmD,EAEf9yC,GAC6BtT,EAAOE,KAAiDF,EAAOE,KAAjDkmD,GACtC79D,MAAK,SAAAqD,G5GlNI,I4GqNFiT,EAAoBC,YAAY1gB,MAChCmqE,EAAmC38D,GAInCA,EAAQC,SAAWd,KACd,EAAKy9D,mCACN,EAAKA,iCAAmC,EAAKt5D,WACxCxS,IAAIqO,IACJ09D,aACAxgD,QAAQrc,EAAQE,IAErB,EAAK08D,iCACAz4D,GAAG,iBAAiB,SAAAC,GAEjB,IAAIpE,EAAUoE,EAASsY,MAEvB,EAAKiN,SAAS,CACV0wC,cAAevpB,OAAOC,OAAO,GAAI/wC,UAMrD,EAAK2pB,SAAS,CACVywC,oBAAqBnrD,KAAKC,MAAMD,KAAKE,UAAUnP,IAC/Cq6D,cAAeprD,KAAKC,MAAMD,KAAKE,UAAUnP,IACzCs6D,qBAAqB,EACrBE,wCAAyC,KAEzCI,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETE,0BACK50B,GAA2BlmC,IAEtBA,EAAQN,eAAe,QACvBM,EAAQsd,KAFR,YAKVy9C,YACI/6D,EAAQN,eAAe,UAEnBM,EAAQ0tC,OAER,IAGRstB,iBACIh7D,EAAQN,eAAe,eAEnBM,EAAQgjB,YAER,GAERi4C,wBACIj7D,EAAQN,eAAe,eAEnBM,EAAQ0d,YAER,GAERw9C,gBACIl7D,EAAQI,MAAMV,eAAe,eAEzBM,EAAQI,MAAMylB,YAEd,KAERs1C,wBACIn7D,EAAQI,MAAMV,eAAe,gBAEzBopC,OAAO9oC,EAAQI,MAAM08D,aAAa5gE,QAAQ,IAAI6sC,iBAE9C,GAERqyB,mBACIp7D,EAAQI,MAAMV,eAAe,gBAEzBopC,OAAO9oC,EAAQI,MAAMyoC,aAAa3sC,QAAQ,IAAI6sC,iBAE9C,GAERsyB,qBACIr7D,EAAQI,MAAMV,eAAe,wBAEzBM,EAAQI,MAAMi7D,qBAEd,GAERC,eACIt7D,EAAQI,MAAMV,eAAe,kBAEzBM,EAAQI,MAAMk7D,eAEd,GAERC,wBACIv7D,EAAQI,MAAMV,eAAe,sBAEzBopC,OAAO9oC,EAAQI,MAAM28D,mBAAmB7gE,QAAQ,IAAI6sC,iBAEpD,GAERyyB,qCACIx7D,EAAQI,MAAMV,eAAe,wCAEzBM,EAAQI,MAAMo7D,qCAEd,GAERC,wBACIz7D,EAAQI,MAAMV,eAAe,sBAEzBM,EAAQI,MAAM48D,mBAEd,GAERtB,qBACI17D,EAAQI,MAAMV,eAAe,gBAGrBM,EAAQI,MAAM08D,aAAe,EAEzB,OAEA,QAGR,GAERjB,sBACK77D,EAAQI,MAAM68D,iBAIXj9D,EAAQI,MAAM68D,iBAFd,CAACrhE,IAAK,IAKd4gE,eACIx8D,EAAQI,MAAMV,eAAe,kBAEzBM,EAAQI,MAAMo8D,eAEd,UAInBv3D,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV2wC,qBAAqB,EACrBE,wCAAyC,WAMrD,EAAK7wC,SAAS,CACV2wC,qBAAqB,EACrBE,wCAAyC,KAEzCI,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETE,0BAA2B9nD,EAAoB1D,MACzC0D,EAAoB1D,MAAMgO,KAC+B,OAAzDlO,GAAa6D,EAAoBK,oBAC7B,YACAlE,GAAa6D,EAAoBK,oBAAoBhE,MAAMgO,KACrE49C,gBACgD,QAA5CloD,EAAoB1D,MAAM6D,cAKtBH,EAAoB1D,MAAMmW,SAASilC,uBAEnC,EAAKr4D,MAAMuoE,cAAcM,oB5GpY3B,I4GyYVjoD,EAAoBC,YAAY1gB,MAChCmqE,EAAmC,SA5W5B,EAoXnBO,oBAAsB,WAElB,IAAM9oD,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAErD,EAGI,EAAK/6B,MAFLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBAGJ,EAGI,EAAK5gB,MAFLgoE,EADJ,EACIA,cACAK,EAFJ,EAEIA,mBAGJ,EA0BI,EAAKroE,MAAMuoE,cAzBXE,EADJ,EACIA,0BAEAD,EAHJ,EAGIA,WAEAE,EALJ,EAKIA,YACAC,EANJ,EAMIA,iBACAC,EAPJ,EAOIA,wBACAC,EARJ,EAQIA,gBAEAC,EAVJ,EAUIA,wBACAC,EAXJ,EAWIA,mBACAC,EAZJ,EAYIA,qBACAC,EAbJ,EAaIA,eACAC,EAdJ,EAcIA,wBAEAj1B,EAhBJ,EAgBIA,WACAq1B,EAjBJ,EAiBIA,mBACAC,EAlBJ,EAkBIA,uBACAtpB,EAnBJ,EAmBIA,0BACAupB,EApBJ,EAoBIA,sBAEAH,EAtBJ,EAsBIA,qBAGAc,EAzBJ,EAyBIA,eAKJ,IAAI9B,EAAJ,CAIA,OAAQG,GAEJ,KAhhBkC,EAkhB9B,GAAoB,MAAhBE,GACsC,IAAnCC,EAAiBv9D,OAAOnC,QACkB,IAA1C2/D,EAAwBx9D,OAAOnC,QACX,OAApB4/D,GACqC,IAArCE,EAAmB39D,OAAOnC,QACa,IAAvC+/D,EAAqB59D,OAAOnC,QACK,IAAjCggE,EAAe79D,OAAOnC,QACiB,IAAvCogE,EAAqBj+D,OAAOnC,QACF,SAAzBogE,GAA6E,IAA1CP,EAAwB19D,OAAOnC,QACzB,QAAzC0X,EAAoBktB,kBAA+D,IAAjCs8B,EAAe/+D,OAAOnC,QACxEmU,GAASwD,EAAoBC,gBAAkBkB,EAAOE,OAAQ+lD,IAAgD,cAA9BS,EAUpF,YARA,EAAKnxC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA/iB6C,EAgjB7CE,gCAAgC,MAQ5C,GAAIx9D,MAAMy8D,IAELA,GAAoBA,EAAkB1uD,GAAsC,GAS7E,YAPA,EAAKmd,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA7jBoB,EA8jBpBE,gCAAgC,MAO5C,GAA8B,SAAzBP,IAAoClvD,GAA+B2uD,KAChE3uD,GAA+B4uD,IAC/BG,EAAwB99D,OAAOnC,OAAS,IAAMkR,GAA+B+uD,GAWjF,YARA,EAAK5xC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA5kBoB,EA6kBpBE,gCAAgC,MAM5C,EAAKtyC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETC,WAAYA,EAAa,EACzBkB,kBA5lBgB,EA6lBhBE,gCAAgC,MAGxC,MAEJ,KAjlBoB,EAmlBhB,GAAI7nD,EAAOE,MAAQ+lD,GACf,KAESA,EAAcj6D,MAAMw1C,OAEpBykB,EAAcj6D,MAAMw1C,OACiF,IAA/FykB,EAAcj6D,MAAMw1C,MAAMniC,QAAO,SAAA0pD,GAAS,OAAKA,EAAUz9D,eAAe,cAAYpE,WAG1FsgE,GAjnBiB,IAknBdA,GAAmF,IAAtBt1B,EAAWhrC,QAjnBrD,IAknBnBsgE,GAAuG,IAArCD,EAAmBl+D,OAAOnC,QAUpG,YAPA,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA/mBuB,EAgnBvBE,gCAAgC,WAO5C,IAAKL,GAjoBqB,IAkoBlBA,GAAmF,IAAtBt1B,EAAWhrC,QAjoBjD,IAkoBvBsgE,GAAuG,IAArCD,EAAmBl+D,OAAOnC,OAShG,YAPA,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA9nBuB,EA+nBvBE,gCAAgC,MAMhD,EAAKtyC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETC,WAAYA,EAAa,EACzBkB,kBA/oBgB,EAgpBhBE,gCAAgC,MAGxC,MAEJ,KAnoBmB,EAsoBf,GAA6C,QAAzCjpD,EAAoBktB,kBAEpB,GAAI9rB,EAAOE,MAAQ+lD,GACf,GAAyC,IAArC/nB,EAA0Bh3C,UAErB++D,EAAcj6D,MAAMg9D,sBAGjB/C,EAAcj6D,MAAMg9D,sBAC2F,IAA5G/C,EAAcj6D,MAAMg9D,qBAAqB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,QAW5G,YAPA,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBAjqB0B,EAkqB1BE,gCAAgC,WAO5C,GAAyC,IAArC3pB,EAA0Bh3C,OAQ1B,YAPA,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA7qB0B,EA8qB1BE,gCAAgC,WAWhD,GAAI7nD,EAAOE,MAAQ+lD,GACf,GAAyC,IAArC/nB,EAA0Bh3C,QACc,IAArCugE,EAAsBjgE,IAAIN,UAExB++D,EAAcj6D,MAAMg9D,sBAGjB/C,EAAcj6D,MAAMg9D,sBAC2F,IAA5G/C,EAAcj6D,MAAMg9D,qBAAqB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,UAGxG++D,EAAcj6D,MAAM68D,iBAQxB,YAPA,EAAKtzC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBAxsB0B,EAysB1BE,gCAAgC,WAO5C,GAAyC,IAArC3pB,EAA0Bh3C,QAAqD,IAArCugE,EAAsBjgE,IAAIN,OAQpE,YAPA,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBAptB0B,EAqtB1BE,gCAAgC,MAOpD,EAAKtyC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETC,WAAYA,EAAa,EACzBkB,kBAvuBgB,EAwuBhBE,gCAAgC,MAGxC,MAEJ,KA1tBmC,EA2tB/B,GAAI5B,EAAcp6D,SAAWd,GAGzB,YADA,EAAKk+D,gBAGL,EAAK1zC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETC,WAAYA,EAAa,EACzBkB,kBAvvBY,EAwvBZE,gCAAgC,MAI5C,MACJ,KAzuBoC,EA2uBhC,GAAI5B,GAAiBA,EAAcp6D,SAAWd,GAQ1C,OAPI,EAAKy9D,kCACL,EAAKA,iCAAiCrrC,IAAI,iBAI9C,EAAK8rC,qBACL,EAAKX,yCAAyC,EAAGrC,EAAcn6D,IAGnE,MACJ,QACI,OAGJkU,EAAOE,MAAQ+lD,EACXA,EAAcp6D,SAAWd,GAEzB,EAAKm+D,0BAEL,EAAKZ,yCAAyC7B,EAAa,EAAGR,EAAcn6D,IAIhF,EAAKo9D,4BA7pBM,EAoqBnBC,gBAAkB,WACd,IAAMlD,EAAgB,EAAKhoE,MAAMgoE,cAC3BQ,EAAa,EAAKxoE,MAAMuoE,cAAcC,WAEzB,IAAfA,IAGJ,EAAKlxC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETC,WAAYA,EAAa,MAGjC,EAAK6B,yCAAyC7B,EAAa,EAAGR,EAAcn6D,MAjrB7D,EAyrBnBs9D,gCAAkC,SAAAhrE,GAE9B,MAII,EAAKH,MAAMuoE,cAHXgB,EADJ,EACIA,uBACAt1B,EAFJ,EAEIA,WACAq1B,EAHJ,EAGIA,mBAGAC,IAA2BppE,EAC3B,EAAKm3B,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETgB,uBAAwB,KACxBt1B,WAp0B0B,IAo0Bd9zC,EAA0C,GAAK8zC,EAC3Dq1B,mBAp0B+B,IAo0BXnpE,EAA+C,GAAKmpE,MAIhF,EAAKhyC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETgB,uBAAwBppE,OA9sBrB,EAutBnBw4C,mBAAqB,SAACt6C,EAAMka,GAExB,IACIoI,EACA,EAAKxiB,MADLwiB,oBAIAqnD,EACA,EAAKhoE,MADLgoE,cAIA9nB,EACA,EAAKlgD,MAAMuoE,cADXroB,yBAIA9wC,EACA,EAAKjR,MADLiR,2BAGE+vC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,WAC5B,IAAMC,EAAW,CACb3yC,KAAM4L,EAAMA,EAAMtP,OAAS,GAC3Bs2C,QAASJ,EAAO12B,QAGpB,OAAQpqB,GAEJ,KAp3BkB,EAq3Bd,EAAKi5B,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETt0B,WAAY,CAACqL,OAGrB,MAEJ,KA53BiC,EA+3B7B,GAA6C,QAAzC3+B,EAAoBktB,iBACpB,EAAKvW,UAAS,SAAAyB,GAAS,MAAK,CACxBwvC,cAAc,2BACPxvC,EAAUwvC,eADJ,IAETroB,yBAA0B,CAACZ,aAKlC,CACD,GAAI0oB,GACA,GAAKA,EAAcj6D,MAAMq9D,qBAUrB,GAAIlrB,EAAyBj3C,QACzB6D,GAAoDk7D,EAAcj6D,MAAMq9D,oBAAoBhqD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAAQ,CAC5JmG,EACI,0BACA,QACA,UAEJ,YAhBJ,GAAI8wC,EAAyBj3C,QAAU6D,GAAmD,CACtFsC,EACI,0BACA,QACA,UAEJ,YAcR,GAAI8wC,EAAyBj3C,QAAU6D,GAAmD,CACtFsC,EACI,0BACA,QACA,UAEJ,MAIR,EAAKkoB,UAAS,SAAAyB,GAAS,MAAK,CACxBwvC,cAAc,2BACPxvC,EAAUwvC,eADJ,IAETroB,yBAAyB,GAAD,oBAAMnnB,EAAUwvC,cAAcroB,0BAA9B,CAAwDZ,UAI5F,MAEJ,KAj7ByB,EAk7BrB,EAAKhoB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETtoB,0BAA2B,CAACX,WAQhDH,EAAOM,cAAclnC,EAAMA,EAAMtP,OAAS,KA7zB3B,EAm0BnB02C,gBAAkB,SAAC/0C,EAAO+B,GACtB,IACIyC,EACA,EAAKjR,MADLiR,2BAGAwwC,EAAeh1C,EAAMyE,QAGzBD,EAFAwwC,EAAeA,EAAaC,OAAO,GAAGrc,cAAgBoc,EAAav0C,MAAM,GAIrE,QACA,WA90BW,EAq1BnBggE,8BAAgC,SAAAzyD,GAC5B,IAAMhM,EAAOgM,EAAMyD,OAAOzP,KACpBuK,EAAQyB,EAAMyD,OAAOlF,MAE3B,GAAa,8BAATvK,EAAsC,CACtC,EAAK0qB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAET,CAAC37D,GAAOuK,MAIhB,IACIyJ,EACA,EAAKziB,MADLyiB,oBAGEmB,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAEjD/tB,EAAQyV,EAAoBK,mBAAmB9X,WAAU,SAAAkY,GAAiB,OAAIA,EAAkBpE,MAAMgO,OAAS9T,KACnH,IAAe,IAAXhM,EACA,OAIA4W,EAAOE,KACP,EAAK9jB,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SAAUrI,GACLzkB,QAAQ,iBAAkByU,EAAoBK,mBAAmB9V,GAAO8R,MAAM6D,eACnFoY,OAAO,SAAD,OAAWnX,EAAOE,MACxBjiB,MAAO,CACHwoE,WAAY,EAAKxoE,MAAMuoE,cAAcC,WACrCC,0BAA2BtxD,EAC3B+wD,mBAAmB,KAM3B,EAAK/pE,MAAM66B,QAAQhuB,KAAK,CACpBiuB,SAAUrI,GACLzkB,QAAQ,iBAAkByU,EAAoBK,mBAAmB9V,GAAO8R,MAAM6D,eACnF9gB,MAAO,CACHwoE,WAAY,EAAKxoE,MAAMuoE,cAAcC,WACrCC,0BAA2BtxD,EAC3B+wD,mBAAmB,SAI5B,CAEH,GAAa,4BAATt7D,GAAsCuK,EAAM/L,OAAOnC,QAAU,IAC7D,OAGJ,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAET,CAAC37D,GAAOuK,QA94BL,EAu5BnBm0D,yBAA2B,SAAC/c,EAAS+F,EAAOC,EAAQj8C,GAIT,IAAnCA,EAAOomB,UAAUtzB,OAAOnC,OACxB,EAAKquB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETiB,sBAAuB,CAACjgE,IAAK,QAIrC,EAAK+tB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETiB,sBAAuBlxD,EAAOsmB,cAC9B6qC,2BAA4BnxD,EAAOomB,eAv6BhC,EAg7BnBssC,cAAgB,WAEZ,IAAMjpD,EAAS+rC,KAAYjxC,MAAM,EAAK1e,MAAM4vD,SAAS70B,QAErD,EAKI,EAAK/6B,MAJLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBAEAgR,EAJJ,EAIIA,yBAGJ,EAMI,EAAK5xB,MALL+nE,EADJ,EACIA,oBACAC,EAFJ,EAEIA,cAEAI,EAJJ,EAIIA,aACAC,EALJ,EAKIA,mBAGJ,EA8BI,EAAKroE,MAAMuoE,cA7BXE,EADJ,EACIA,0BAEAD,EAHJ,EAGIA,WAEAE,EALJ,EAKIA,YACAC,EANJ,EAMIA,iBACAC,EAPJ,EAOIA,wBACAC,EARJ,EAQIA,gBAEAC,EAVJ,EAUIA,wBACAC,EAXJ,EAWIA,mBACAC,EAZJ,EAYIA,qBACAC,EAbJ,EAaIA,eACAC,EAdJ,EAcIA,wBACAC,EAfJ,EAeIA,qCACAC,EAhBJ,EAgBIA,wBACAC,EAjBJ,EAiBIA,qBAEAp1B,EAnBJ,EAmBIA,WACAq1B,EApBJ,EAoBIA,mBACArpB,EArBJ,EAqBIA,0BACAupB,EAtBJ,EAsBIA,sBACAC,EAvBJ,EAuBIA,2BAEAQ,EAzBJ,EAyBIA,2BACAC,EA1BJ,EA0BIA,mCAGAC,EA7BJ,EA6BIA,eAWJ,GAPI/B,IAAiBC,GACjB,EAAK/wC,SAAS,CACV+wC,oBAAoB,IAKxBtmD,EAAOE,MAAQ+lD,EAAe,EAE1B/zB,EAAWhrC,OAAS,GAAKqgE,EAAmBl+D,OAAOnC,OAAS,IACxD++D,EAAcj6D,MAAMV,eAAe,UAEnC26D,EAAcj6D,MAAMw1C,MAAMz4C,SAAQ,SAACggE,EAAW3/D,GAC1C2/D,EAAUr4D,SAAU,EACpBu1D,EAAcj6D,MAAMw1C,MAAMp4C,GAAS2/D,KAM3C7qB,EAA0Bh3C,OAAS,GAC/B++D,EAAcj6D,MAAMV,eAAe,yBAEnC26D,EAAcj6D,MAAMg9D,qBAAqBjgE,SAAQ,SAACygE,EAAkBpgE,GAChEogE,EAAiB94D,SAAU,EAE3Bu1D,EAAcj6D,MAAMg9D,qBAAqB5/D,GAASogE,KAM9D,IAAMC,EAAa,EAAKv6D,WACnBxS,IAAIqO,IAGH2+D,EAAoB,EAAK16D,gBAC1BtS,IAAIqO,IACJyE,MAAMy2D,EAAcl6D,UACpByD,MAAMzE,IACNyE,MAAMy2D,EAAcn6D,IAGzB,EAAK69D,oBA/nCsB,EA+nCuBD,GAC7CnhE,MAAK,SAAAqhE,GAEF,EAAKr0C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETsB,mBAAoB,QAK5B,EAAK6B,oBAzoC6B,EAyoC+BD,GAC5DnhE,MAAK,SAAAqhE,GAEF,EAAKr0C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETsB,mBAAoB,QAK5B,EAAK6B,oBAnpCsB,EAmpCuCD,GAC7DnhE,MAAK,SAAAqhE,GAEF,EAAKr0C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eAxpCV,EAypCUD,mBAAoB,QAI5B,IAAI+B,EAAc,2BACXhvD,KAAKC,MAAMD,KAAKE,UAAUkrD,KADf,IAEd7lD,OAAQ,KACRlF,MAAO,KACPgO,KACI4oB,GAA2Bm0B,IACS,cAA9BS,EACAA,EAEAT,EAAc/8C,KACxB0F,YACIy3C,GAEuC,IAAnCO,EAAiBv9D,OAAOnC,OAEpB,KAIJ0/D,EAERttB,OACI+sB,GAEoB,MAAhBM,EAEI,KAIJA,EAERr9C,YACI+8C,GAE8C,IAA1CQ,EAAwBx9D,OAAOnC,OAE3B,KAIJ2/D,EAERj3C,YACkC,IAA9BC,EAEIo2C,EAAcr2C,WAEdC,EAERhkB,OACIw6D,EAGIt7D,GAKAk7D,EAAcp6D,SAAWd,G5GhmC7B,E4GomCQk7D,EAAcp6D,OAE1Bi+D,OACIzD,EAEI,KAEAjuD,KAER8X,aACI+1C,EAAc/1C,aAEV+1C,EAAc/1C,aAEd,KAERlkB,MAAO,CACH+9D,WACI1D,EAG+C,IAAvCiB,EAAqBj+D,OAAOnC,OAExB,KAEyB,SAAzBogE,EAG6C,IAArCN,EAAmB39D,OAAOnC,OAEtB,KAEAkR,GAA+B2uD,GAA2B3uD,GAA+B4uD,GAIxD,IAArCA,EAAmB39D,OAAOnC,OAEtB,KAEAkR,GAA+B4uD,GAI1B,SAAzBM,EAEIlvD,GAA+B2uD,GAA2B3uD,GAA+B4uD,GAEzF5uD,GAA+B4uD,GAE3C0B,aACIrC,GAG+C,IAAvCiB,EAAqBj+D,OAAOnC,OAExB,KASiB,SAAzBogE,EAEIlvD,GAA+B2uD,GAE/B,EAEZtyB,aACI4xB,GAEyC,IAArCW,EAAmB39D,OAAOnC,OAEtB,KAIJkR,GAA+B4uD,GAEvCC,qBACIZ,GAE2C,IAAvCY,EAAqB59D,OAAOnC,OAExB,KAIJ+/D,EAERC,eACIb,GAEqC,IAAjCa,EAAe79D,OAAOnC,OAElB,KAIJggE,EAERyB,mBAC8C,IAA1CxB,EAAwB99D,OAAOnC,OAE3B,KAEAkR,GAA+B+uD,GAEvCC,qCAC2D,IAAvDA,EAAqC/9D,OAAOnC,OAExC,KAEAkgE,EAERwB,mBAC8C,IAA1CvB,EAAwBh+D,OAAOnC,OAE3B,KAEAmgE,EAERgC,oBACIpD,EAAcj6D,MAAMq9D,oBAApB,uBAEQpD,EAAcj6D,MAAMq9D,qBAF5B,aAEoD,EAAKW,qCAErD,EAAKA,mCAEbnB,iBACyC,IAArCpB,EAAsBjgE,IAAIN,OAEtB,KAEAugE,EAERwC,sBACyC,IAArCxC,EAAsBjgE,IAAIN,OAEtB,KAEAwgE,EAERsB,qBACwD,IAApD,EAAKkB,oCAAoChjE,OAGjC++D,EAAcj6D,MAAMg9D,qBAEhB/C,EAAcj6D,MAAMg9D,qBAEpB,KAIJ/C,EAAcj6D,MAAMg9D,qBAApB,uBAEQ/C,EAAcj6D,MAAMg9D,sBAF5B,aAEqD,EAAKkB,sCAEtD,EAAKA,oCAGrB1oB,MACIykB,EAAcj6D,MAAMw1C,MAApB,uBAEQykB,EAAcj6D,MAAMw1C,OAF5B,aAEsC,EAAK2oB,uBAEvC,EAAKA,qBAEbv1B,WACIyxB,GAIIJ,EAAcp6D,SAAWd,GAFzBqN,KAMI6tD,EAAcj6D,MAAM4oC,WAEhCnjB,YACI40C,EAEKS,GAEG,KAIJA,EAERj7D,OACIw6D,EAEIt7D,GAEAk7D,EAAcp6D,SAAWd,G5GlyCxC,E4GsyCmBk7D,EAAcj6D,MAAMH,OAGhCu8D,eACI/B,GAEqC,IAAjC+B,EAAe/+D,OAAOnC,OAElB,KAIJkhE,KAMhBqB,EACKj6D,MAAMy2D,EAAcn6D,IACpBqgB,OAAO09C,GACPthE,MAAK,WAGF,GAAK89D,EA6JD,EAAK8D,qBAAuB,GAC5B,EAAKD,oCAAsC,GAC3C,EAAKF,mCAAqC,GAE1C,EAAKz0C,SAAS,CACV8wC,cAAc,EACdC,oBAAoB,EACpB2B,4BAA4B,EAE5BzB,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eA3mD7B,EA4mD6BD,mBAAoB,EACpB51B,WAAY,GACZq1B,mBAAoB,GACpBC,uBAAwB,KACxBrpB,yBAA0B,GAC1BD,0BAA2B,OAInC,EAAKoqB,yCACD7B,EACAR,EAAcn6D,SAlLlB,GAAIm6D,EAAcp6D,SAAWd,GACzBi7D,EAAoB5lD,OAAS,KAC7B4lD,EAAoB9qD,MAAQ,KAE5BoY,GACmB,CACXlM,OAAQvI,EAAoBC,YAAYhT,GACxCub,a5Gl6C1B,E4Gm6C0BC,yBAA0Bvc,GAC1Bwc,mBAAoB0+C,EAAcn6D,GAClC0b,gB7Fv2CJ,0B6Fu2C8Epd,QAAQ,YAAa67D,EAAcr3C,aAC7GnH,OAAQoH,GAAyCzkB,QAAQ,aAAc67D,EAAcn6D,IACrFsJ,MAAO,CACH0Z,OAAQjU,KAAKC,MAAMD,KAAKE,UAAUirD,IAClCj3C,MAAOlU,KAAKC,MAAMD,KAAKE,UAAU8uD,OAM7Cv2C,GACe2yC,EAAcn6D,GAAI,KAAMwnB,IAClC/qB,MAAK,SAAA2mB,GAEF,IAAIC,EAA8B,GAClCD,EAAMnmB,SAAQ,SAAAqmB,GACVD,EAA4BlmB,KAAKmmB,EAAKC,eAI1CiE,GACiB2yC,EAAcn6D,GAAI,KAAMwnB,IACpC/qB,MAAK,SAAAiB,GACFA,EAAQT,SAAQ,SAAAW,IACmF,IAA3FylB,EAA4B/nB,WAAU,SAAAioB,GAAU,OAAIA,IAAe3lB,EAAO2lB,eAC1EF,EAA4BlmB,KAAKS,EAAO2lB,eAIhD,IAAIC,EAAgB,GACpBH,EAA4BpmB,SAAQ,SAAAsmB,GAChC,IAAME,EAAe,CACjBxG,MAAM,GAAD,OAAKk9C,EAAcr3C,YAAnB,oBACLthB,QAAQ,kHACR8Z,OAAQiI,EACR5H,OAAQoH,GAAyCzkB,QAAQ,aAAc67D,EAAcn6D,KAEzFwjB,EAAcrmB,KAAKsmB,MAIvBpnB,QAAQqgB,IAAI8G,EAActZ,KAAI,SAAAuZ,GAC1B,OAAO,IAAIpnB,SAAQ,SAACC,EAASC,GACzBirB,GACsB/D,GACjBhnB,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAG1BN,MAAK,WAEL,EAAKgtB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eAngDhD,EAogDgDD,mBAAoB,IACpBhoD,UAAWmmD,EAAcn6D,UAIlC+E,OAAM,SAAAhI,GAEL,EAAK0sB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eA9gDhD,EA+gDgDD,mBAAoB,qBAQ/C,CAED,IAAMsC,EAAiB,CACnBr+D,SAAU8S,EAAoBC,YAAYhT,GAC1CgU,UAAWmmD,EAAcn6D,GACzBlF,KAAMwR,KACN8vD,8BAIJ,EAAKh5D,WACAxS,IAAIqO,IACJ9B,KAAKmhE,GACL7hE,KAHL,wBAGU,uBAAAN,EAAA,uEACI,IAAI2c,IAAMuB,QACZ,OACA5D,GAAUO,eACV,CACIiC,gBAAiB,KACjBY,YAAa,CACTmK,UAAW,EACXC,UAAW,CACPjQ,UAAWmmD,EAAcn6D,OATvC,OAgBFwnB,GACmB,CACXlM,OAAQvI,EAAoBC,YAAYhT,GACxCub,a5GlhDlC,E4GmhDkCC,yBAA0Bvc,GAC1Bwc,mBAAoB0+C,EAAcn6D,GAClC0b,gBAAiB8L,GAA0DlpB,QAAQ,YAAay/D,EAAej7C,aAC/GnH,OAAQoH,GAAyCzkB,QAAQ,aAAcy/D,EAAe/9D,IACtFsJ,MAAOy0D,I5G/+ChD,I4Go/CqChrD,EAAoBC,YAAY1gB,MAChCk1B,GACuC,CAC/BlM,OAAQvI,EAAoBC,YAAYhT,GACxCqlB,MAAO,qCACP/b,MAAO+yD,IAEVt3D,OAAM,SAAAhI,OAKf,EAAK0sB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eAhlDpC,EAilDoCD,mBAAoB,IACpBhoD,UAAWmmD,EAAcn6D,OA9C/B,gDAkFrB+E,OAAM,SAAAhI,GAEH,OAAOA,kBAOtC,CAED,IAAM+rC,EAAax8B,KAGbqxD,EAAa,EAAKv6D,WACnBxS,IAAIqO,IAEH+U,EAAY2pD,EAAWxgE,OAAO0d,IAG9B+iD,EAAoB,EAAK16D,gBAC1BtS,IAAIqO,IACJyE,MAAMqP,EAAoBC,YAAYhT,IACtC0D,MAAMzE,IACNyE,MAAMsQ,GAGX,EAAK6pD,oBArpDsB,EAqpDuBD,GAC7CnhE,MAAK,SAAAqhE,GAEF,EAAKr0C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETsB,mBAAoB,QAK5B,EAAK6B,oBA/pD6B,EA+pD+BD,GAC5DnhE,MAAK,SAAAqhE,GAEF,EAAKr0C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETsB,mBAAoB,QAK5B,EAAK6B,oBAzqDsB,EAyqDuCD,GAC7DnhE,MAAK,SAAAqhE,GAEF,EAAKr0C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eA9qDV,EA+qDUD,mBAAoB,QAI5B,IAAMuC,EAAa,CACfv+D,GAAIgU,EACJoJ,KAAoC,cAA9Bw9C,EAA4C9nD,EAAoB1D,MAAMgO,KAAOw9C,EACnF92C,YACkC,IAA9BC,EAEIjR,EAAoB1D,MAAMmW,SAASmlC,kBAEnC3mC,EAER9jB,SAEIiU,EAAOG,OAASH,EAAOI,OAInBJ,EAAOI,OAMPvB,EAAoBC,YAAYhT,GAExCkmC,oBAEIhyB,EAAOG,OAASH,EAAOI,OAGnBJ,EAAOG,M5GjoD7B,I4GooDsBtB,EAAoBC,YAAY1gB,KAG5BygB,EAAoBC,YAAYhT,GAIhC,KAEZ8iB,YAAay3C,GAAmD,IAAnCO,EAAiBv9D,OAAOnC,OAAe,KAA2B0/D,EAC/FttB,OAAQ+sB,GAAgC,MAAhBM,EAAsB,KAAsBA,EACpEr9C,YAAa+8C,GAA0D,IAA1CQ,EAAwBx9D,OAAOnC,OAAe,KAAkC2/D,EAC7Gh7D,OACIw6D,EAEIt7D,G5GnpDtB,I4GupDsB8T,EAAoBC,YAAY1gB,K5G7mDtC,EADE,E4GsnDJ4N,MAAO,CACH+9D,WACI1D,EAG+C,IAAvCiB,EAAqBj+D,OAAOnC,OAExB,KAEyB,SAAzBogE,EAG6C,IAArCN,EAAmB39D,OAAOnC,OAEtB,KAEAkR,GAA+B2uD,GAA2B3uD,GAA+B4uD,GAIxD,IAArCA,EAAmB39D,OAAOnC,OAEtB,KAEAkR,GAA+B4uD,GAI1B,SAAzBM,EAEIlvD,GAA+B2uD,GAA2B3uD,GAA+B4uD,GAEzF5uD,GAA+B4uD,GAE3C0B,aACIrC,GAG+C,IAAvCiB,EAAqBj+D,OAAOnC,OAExB,KASiB,SAAzBogE,EAEIlvD,GAA+B2uD,GAE/B,EAEZtyB,aACI4xB,GAEyC,IAArCW,EAAmB39D,OAAOnC,OAEtB,KAIJkR,GAA+B4uD,GAEvCI,qCACIf,GAE2D,IAAvDe,EAAqC/9D,OAAOnC,OAExC,KAIJkgE,EAERH,qBACIZ,GAE2C,IAAvCY,EAAqB59D,OAAOnC,OAExB,KAIJ+/D,EAERC,eACIb,GAEqC,IAAjCa,EAAe79D,OAAOnC,OAElB,KAIJggE,EAERyB,mBAC8C,IAA1CxB,EAAwB99D,OAAOnC,OAE3B,KAEAkR,GAA+B+uD,GAEvCyB,mBAC8C,IAA1CvB,EAAwBh+D,OAAOnC,OAE3B,KAEAmgE,EAERgC,oBAAqB,EAAKW,mCAC1BnB,iBACyC,IAArCpB,EAAsBjgE,IAAIN,OAEtB,KAEAugE,EAERwC,sBACyC,IAArCxC,EAAsBjgE,IAAIN,OAEtB,KAEAwgE,EAERsB,qBAAsB,EAAKkB,oCAC3B1oB,MAAO,EAAK2oB,qBACZv1B,WAAYA,EACZnjB,YACI40C,EAEKS,GAEG,KAIJA,EAERj7D,OACIw6D,EAEIt7D,G5G9vDf,E4GmwDOq9D,eACI/B,GAEqC,IAAjC+B,EAAe/+D,OAAOnC,OAElB,KAIJkhE,IAKhBqB,EACKj6D,MAAMsQ,GACNnP,IAAI05D,GACJ9hE,MAAK,WAEF,GAAI89D,EAIA,EAAK8D,qBAAuB,GAC5B,EAAKD,oCAAsC,GAC3C,EAAKF,mCAAqC,GAE1C,EAAKz0C,SAAS,CACV4wC,mBAAmB,EACnBC,wCAAyCtmD,EACzCumD,cAAc,EACdC,oBAAoB,EACpBJ,qBAAqB,EACrB+B,4BAA4B,EAE5BzB,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eA76D7B,EA86D6BD,mBAAoB,EACpB51B,WAAY,GACZq1B,mBAAoB,GACpBC,uBAAwB,KACxBrpB,yBAA0B,GAC1BD,0BAA2B,OAInC,EAAKoqB,yCACD7B,EACA3mD,OAIH,CAEDwT,GACmB,CACXlM,OAAQvI,EAAoBC,YAAYhT,GACxCub,a5Gx5DtB,E4Gy5DsBC,yBAA0Bvc,GAC1Bwc,mBAAoBzH,EACpB0H,gBAAiB8L,GAA0DlpB,QAAQ,YAAaigE,EAAWz7C,aAC3GnH,OAAQoH,GAAyCzkB,QAAQ,aAAcigE,EAAWv+D,IAClFsJ,MAAOi1D,IAGf,IAAMv+D,EAAK,EAAKoD,WACXxS,IAAIqO,IACJ9B,OACA0d,IAGCyjD,EAAiB,CACnBt+D,KACAC,SAAU8S,EAAoBC,YAAYhT,GAC1CgU,UAAWA,EACXlZ,KAAMwR,MAGV,EAAKlJ,WACAxS,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAIy5D,GACJ7hE,MAAK,WACF,EAAKgtB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETuB,eA19DhC,EA29DgCD,mBAAoB,IACpBhoD,UAAWA,aAMlCjP,OAAM,SAAAhI,GAEH,OAAOA,gBAx3D5B,EAm4DnB8gE,oBAn4DmB,yCAm4DG,WAAOrtE,EAAMotE,GAAb,gCAAAzhE,EAAA,sDAGdo+D,EACA,EAAKpoE,MADLooE,aAHc,EAYd,EAAKpoE,MAAMuoE,cALXt0B,EAPc,EAOdA,WACAq1B,EARc,EAQdA,mBACAC,EATc,EASdA,uBACArpB,EAVc,EAUdA,yBACAD,EAXc,EAWdA,0BAGJ,EAAK3oB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETmB,kBA9gEwB,EA+gExBK,6BAA8B3B,EAC9B0B,eAAgBzrE,EAChBwrE,mBAAoB,MAIxBwC,EAAa,KAxBC,KA0BVhuE,EA1BU,OAn/Da,IAm/Db,OAl/D4B,IAk/D5B,QAj/D6B,IAi/D7B,2BA6BLkrE,EA7BK,yCA8BC,MA9BD,UAhgEyB,IAiiE/BA,EAjCM,wBAkCAv9B,EAAiB,CACnBh/B,IAAKs8D,EACLr9B,S5Gx0DO,E4Gy0DPC,cAAe,GACf/6B,UAAW,IAEf,EAAK+6D,qBAAL,uBAAgC,EAAKA,sBAArC,CAA2DlgC,IAxCrD,kCA2CVqgC,EAAap4B,EA3CH,oCA8CVo4B,EAAansB,EA9CH,oCAiDVmsB,EAAapsB,EAjDH,wFAuDX/1C,QACFqgB,IACG8hD,EAAWt0D,KAAI,SAAApL,GAAI,OAAI,EAAKw+B,qBAAqB9sC,EAAMotE,EAAmB9+D,OAE7ErC,MAAK,WACF,OAAO,KAEVsI,OAAM,SAAAhI,GACH,OAAO,MA/DG,4CAn4DH,0DAy8DnBugC,qBAz8DmB,yCAy8DI,WAAO9sC,EAAMiuE,EAAiB9/D,GAA9B,sBAAAxC,EAAA,sDAGfk2C,EACA,EAAKlgD,MAAMuoE,cADXroB,yBAGAqsB,EAAS,KAEPp7D,EAAYgJ,KACZmxB,EAAkBnxB,GAA+B3N,EAAU2E,GAT9C,KAWX9S,EAXW,OAzjEY,IAyjEZ,OAxjE2B,IAwjE3B,OAvjE4B,IAujE5B,+BAaXkuE,EAASD,EACJ/6D,MAAMzE,IACNyE,MAFI,UAEKJ,EAFL,YAEkB3E,EAASG,KAAK4+B,YAf9B,mCAkBXghC,EAASD,EACJ/6D,MAAMzE,IACNyE,MAAM+5B,GApBA,oCAuBXihC,EAASD,EACJ/6D,MAAMzE,IACNyE,MAAM+5B,GAzBA,wFA+BZ,IAAIphC,SAAQ,SAACC,EAASC,GACzB,IAAMwH,EAAa26D,EAAO16D,IAAIrF,EAASG,MACvCiF,EAAWE,GAAG,iBAAiB,SAAAC,GAE3B,IAAIzT,EAAYyT,EAASC,iBAAmBD,EAASE,WAAc,IA5lE5C,IA8lEnB5T,GA5lEmC,IA4lECA,GACpC,EAAKi5B,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETsB,mBAAoBvrE,SAKjC,SAAAsM,GAEC,OAAOR,EAAOQ,MACf,WAECgH,EAAWG,SAAStT,IAAIyT,iBAAiB5H,MAAK,SAAAkhC,GAE1C,IAAIC,EAAc,EAElB,OAAQptC,GACJ,KAjnEe,EAmnEX,IAAM2tC,EAAiB,CACnBh/B,IAAKw+B,EACLS,SAAiC,cAAvBz/B,EAASG,KAAKxM,K5Gt6DzB,EACA,E4Gs6DC+rC,cAAe1/B,EAASG,KAAK4+B,UAC7Bp6B,UAAWA,GAGf,OADA,EAAK+6D,qBAAL,uBAAgC,EAAKA,sBAArC,CAA2DlgC,IACpD7hC,IACX,KA1nE8B,EA2nE1BshC,EAAc,IAAOyU,EAAyBj3C,OAC9C,EAAKquB,UAAS,SAAAyB,GAAS,MAAK,CACxBwvC,cAAc,2BACPxvC,EAAUwvC,eADJ,IAETsB,mBAAoB9wC,EAAUwvC,cAAcsB,mBAAqBp+B,EAAY5hC,QAAQ,SAG7F,IAAMuiC,EAA8B,CAChCT,SAAUL,EAAgBv/B,MAAMe,IAAqC,GACrE8+B,aAAcp/B,EAASG,KAAKk/B,aAC5BC,YAAaN,EACbr6B,UAAWA,GAIf,OADA,EAAK46D,mCAAL,uBAA8C,EAAKA,oCAAnD,CAAuF3/B,IAChFjiC,IACX,KA1oE+B,EA2oE3B,IAAMgiC,EAAgC,CAClCR,SAAUL,EAAgBv/B,MAAMe,IAAqC,GACrE8+B,aAAcp/B,EAASG,KAAKk/B,aAC5BC,YAAaN,EACbr6B,UAAWA,GAIf,OADA,EAAK86D,oCAAL,uBAA+C,EAAKA,qCAApD,CAAyF9/B,IAClFhiC,IACX,QACI,OAAOC,EAAO,gCA9Ff,4CAz8DJ,4DAojEnBoiE,qBAAuB,SAACnuE,EAAM8M,GAE1B,OAAQ9M,GACJ,KAxrEqC,EAyrEjC,IAAI+sE,EAAsB,EAAKprE,MAAMuoE,cAAcroB,yBACnDkrB,EAAoB74D,OAAOpH,EAAO,GAClC,EAAKmsB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETroB,yBAA0BkrB,MAGlC,MACJ,KAjsE6B,EAksEzB,EAAK9zC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETtoB,0BAA2B,OAGnC,MACJ,KA3sEsB,EA4sElB,EAAK3oB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETt0B,WAAY,SA7kEb,EA2lEnBw4B,wBAA0B,SAAApwD,GACtB,EAAKib,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAEToB,0BAA2BttD,OA/lEpB,EAumEnBqwD,+BAAiC,WAC7B,EAAKp1C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETqB,gCAAgC,OA3mEzB,EAqnEnB+C,kCAAoC,SAAAxhE,GAChC,IACI68D,EACA,EAAKhoE,MADLgoE,cAGA4E,EAAuBhwD,KAAKC,MAAMD,KAAKE,UAAUkrD,IACrD4E,EAAqB7+D,MAAMq9D,oBAAoBjgE,GAAOsH,SAAU,EAEhE,EAAK6kB,SAAS,CACV0wC,cAAe4E,KA9nEJ,EAqoEnBC,yBAA2B,SAACj0D,EAAOk0D,GAY/B,EAAKx1C,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETwE,mBAAmB,OAppEZ,EA4pEnBC,kBAAoB,SAAArkE,GAEZA,GAAiB,iBAATA,EACR,EAAK2uB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETM,gBAAiBhQ,QAM7B,EAAKvhC,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAETM,gBACKlgE,EAIGA,EAAKX,UAFL,UA9qED,EAwrEnBilE,sBAAwB,SAAAr0D,GAEpB,IAAMhM,EAAOgM,EAAMyD,OAAOzP,KAE1B,EAAK0qB,SAAS,CACVixC,cAAc,2BACP,EAAKvoE,MAAMuoE,eADL,IAET,CAAC37D,GAAOgM,EAAMyD,OAAOq8B,aA/rEd,EAusEnBuyB,wBAA0B,WAEtB,MAII,EAAK9sE,MAHLwiB,EADJ,EACIA,oBAEAvR,EAHJ,EAGIA,2BAGJ,EAgBI,EAAKpP,MAAMuoE,cAfXC,EADJ,EACIA,WAEAE,EAHJ,EAGIA,YACAC,EAJJ,EAIIA,iBACAC,EALJ,EAKIA,wBACAC,EANJ,EAMIA,gBAEAC,EARJ,EAQIA,wBACAC,EATJ,EASIA,mBACAC,EAVJ,EAUIA,qBACAC,EAXJ,EAWIA,eACAC,EAZJ,EAYIA,wBACAG,EAbJ,EAaIA,qBAEAc,EAfJ,EAeIA,eAGJ,GA30EsC,IA20ElC3B,EAA+C,CAE/C,GAAoB,MAAhBE,GACsC,IAAnCC,EAAiBv9D,OAAOnC,QACkB,IAA1C2/D,EAAwBx9D,OAAOnC,QACX,OAApB4/D,GACqC,IAArCE,EAAmB39D,OAAOnC,QACa,IAAvC+/D,EAAqB59D,OAAOnC,QACK,IAAjCggE,EAAe79D,OAAOnC,QACoB,IAA1CigE,EAAwB99D,OAAOnC,QACQ,IAAvCogE,EAAqBj+D,OAAOnC,QACc,QAAzC0X,EAAoBktB,kBAA+D,IAAjCs8B,EAAe/+D,OAAOnC,OAO5E,YALAmG,EACI,4BACA,QACA,UAMR,GAAIhD,MAAMy8D,IAELA,GAAoBA,EAAkB1uD,GAAsC,GAO7E,YALA/K,EACI,6BACA,QACA,UAMR,GAAIi6D,EAAqBj+D,OAAOnC,OAAS,GACR,SAAzBogE,GAC6C,IAA1CP,EAAwB19D,OAAOnC,OAOlC,YALAmG,EACI,2CACA,QACA,UAOZ,GAA8B,SAAzBi6D,GACMP,EAAwB19D,OAAOnC,OAAS,IACvCkR,GAA+B2uD,IAEnCC,EAAmB39D,OAAOnC,OAAS,IAC/BkR,GAA+B4uD,IAEnCG,EAAwB99D,OAAOnC,OAAS,IACpCkR,GAA+B+uD,GAQvC,YALA95D,EACI,yCACA,QACA,UAMZ,EAAKkoB,SAAS,CACV8wC,cAAc,EACdC,oBAAoB,KAxyET,EA+yEnB6E,uBAAyB,WAErB,IACIlF,EACA,EAAKhoE,MADLgoE,cAGJ,EAAK1wC,SAAS,CACVgxC,mBAAmB,IAIvB,EAAK6E,yBA16E0B,GA26E1B7iE,MAAK,WAEF,EAAK6iE,yBA36EkC,GA46ElC7iE,MAAK,WAEF,EAAK6iE,yBA/6EyB,GAg7EzB7iE,MAAK,WACF,EAAK2G,WACAxS,IAAIqO,IACJyE,MAAMy2D,EAAcn6D,IACpB+kB,SACAtoB,MAAK,WAEF,EAAK4hE,qBAAuB,GAC5B,EAAKD,oCAAsC,GAC3C,EAAKF,mCAAqC,GAC1C,EAAKqB,kCAAoC,EAEzC,EAAK91C,SAAL,eACOuwC,KAIH,EAAK0C,kCACL,EAAKA,iCAAiCrrC,IAAI,iBAG9C,EAAKmrC,yCAAyC,EAAG,MAEjD/yD,OAAOy2C,SAASsf,sBAx1EjC,EAk2EnBF,yBAl2EmB,yCAk2EQ,WAAO9uE,GAAP,oBAAA2L,EAAA,sDAEnB4W,EACA,EAAKziB,MADLyiB,oBAIAonD,EACA,EAAKhoE,MADLgoE,cAGAr2D,EAAa,EAAKZ,gBACjBtS,IAAIqO,IACJyE,MAAMqP,EAAoBC,YAAYhT,IACtC0D,MAAMzE,IACNyE,MAAMy2D,EAAcn6D,IAbF,KAefxP,EAfe,OAl9EQ,IAk9ER,OAh9EwB,IAg9ExB,QAj9EuB,IAi9EvB,2BAiBV2pE,EAAcj6D,MAAMw1C,MAjBV,wDAoBf5xC,EAAaA,EACRJ,MAAMzE,IArBI,kBAsBR5C,QACFqgB,IACGy9C,EAAcj6D,MAAMw1C,MAAMxrC,KAAI,SAAA+yD,GAAS,OACnC,EAAKwC,2BAA2BjvE,EAAMsT,EAAYm5D,OAGzDxgE,MAAK,WACF,OAAO,KAEVsI,OAAM,SAAAhI,GACH,OAAQA,MAhCD,WAmCVo9D,EAAcj6D,MAAMg9D,qBAnCV,0DAsCfp5D,EAAaA,EACRJ,MAAMzE,IAvCI,kBAwCR5C,QACFqgB,IACGy9C,EAAcj6D,MAAMg9D,qBAAqBhzD,KAAI,SAAA+yD,GAAS,OAClD,EAAKwC,2BAA2BjvE,EAAMsT,EAAYm5D,OAGzDxgE,MAAK,WACF,OAAO,KAEVsI,OAAM,SAAAhI,GACH,OAAQA,MAlDD,WAqDVo9D,EAAcj6D,MAAMq9D,oBArDV,0DAwDfz5D,EAAaA,EACRJ,MAAMzE,IAzDI,kBA0DR5C,QACFqgB,IACGy9C,EAAcj6D,MAAMq9D,oBAAoBrzD,KAAI,SAAA+yD,GAAS,OACjD,EAAKwC,2BAA2BjvE,EAAMsT,EAAYm5D,OAGzDxgE,MAAK,WACF,OAAO,KAEVsI,OAAM,SAAAhI,GACH,OAAQA,MApED,8EAl2ER,wDAg7EnB0iE,2BAh7EmB,yCAg7EU,WAAOjvE,EAAMsT,EAAYhF,GAAzB,UAAA3C,EAAA,2DACjB3L,EADiB,OAhiFM,IAgiFN,OA9hFsB,IA8hFtB,OA/hFqB,IA+hFrB,yBAIM,KAAnBsO,EAAKwE,UAJQ,0EAOV,IAAIjH,SAAQ,SAACC,EAASC,GACzBuH,EAAaA,EACRJ,MADQ,UACC5E,EAAKwE,UADN,YACmBxE,EAAKu/B,gBAChC16B,SACAlH,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAfT,uCA+BV,IAAIV,SAAQ,SAACC,EAASC,GACzBuH,EAAaA,EACRJ,MADQ,UACC5E,EAAKwE,WADN,OACkBrE,IADlB,OACwDH,EAAKg/B,WACrEn6B,SACAlH,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UAvCT,4EAh7EV,0DAGf,EAAKqG,WAAa/T,EAASgU,WAC3B,EAAKH,gBAAkB7T,EAAS8T,UAGhC,EAAKu5D,iCAAmC,KAGxC,EAAK2B,qBAAuB,GAC5B,EAAKH,mCAAqC,GAC1C,EAAKE,oCAAsC,GAE3C,EAAKjsE,MAAL,eACO6nE,IAfQ,E,qDAmBnB,WAGQ3pE,KAAK8B,MADLkoE,mBAKAhqE,KAAKonC,a,gCAIb,SAAmBxM,EAAWC,EAAWhnB,GACrC,MAGI7T,KAAKC,MAFLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBAGJ,EAMI1iB,KAAK8B,MALL8nE,EADJ,EACIA,2BACAI,EAFJ,EAEIA,kBAEAE,EAJJ,EAIIA,aACAC,EALJ,EAKIA,mBAGEkF,EAAgBrvE,KAAKC,MAAM4vD,SAAS/tD,WAMpBgiB,IAAlBurD,GAAiD,OAAlBA,IAC1BzF,GACD5pE,KAAKo5B,SAAS,CACVwwC,4BAA4B,EAC5BS,cAAc,2BACPrqE,KAAK8B,MAAMuoE,eADL,IAETC,YACkC,IAA9B+E,EAAc/E,WAEV+E,EAAc/E,WAEdtqE,KAAK8B,MAAMuoE,cAAcC,WACjCC,0BAA4B8E,EAAc9E,0BAMpC8E,EAAc9E,0BALd9nD,EAAoB1D,MAChB0D,EAAoB1D,MAAMgO,KAC+B,OAAzDlO,GAAa6D,EAAoBK,oBAC7B,YACAlE,GAAa6D,EAAoBK,oBAAoBhE,MAAMgO,KAEzEi9C,mBAAoBqF,EAAcrF,mBAA2BqF,EAAcrF,uBAMvFA,GAEAhqE,KAAKonC,WAGL8iC,IAAiBC,GACjBnqE,KAAK8sE,kB,kCAIb,WACQ9sE,KAAKqsE,kCACLrsE,KAAKqsE,iCAAiCrrC,IAAI,mB,oBAw4ElD,WAEI,IAAMnd,EAAS+rC,KAAYjxC,MAAM3e,KAAKC,MAAM4vD,SAAS70B,QAErD,EAKIh7B,KAAKC,MAJLy4C,EADJ,EACIA,4BACAj2B,EAFJ,EAEIA,oBACAC,EAHJ,EAGIA,oBACA1N,EAJJ,EAIIA,SAGJ,EAQIhV,KAAK8B,MAPLgoE,EADJ,EACIA,cACAC,EAFJ,EAEIA,oBAEAG,EAJJ,EAIIA,aACAC,EALJ,EAKIA,mBAEAC,EAPJ,EAOIA,kBAGJ,GAAI9V,GAA0B5b,IACvBzI,GAAqBxtB,IACrBgf,GAAiB/e,GAEpB,OAAO,KAMX,IAAKif,GAA0Bjf,IACvBif,GAA0Bjf,I5G/hFb,I4G+hFqCA,EAAoBC,YAAY1gB,OACjF4hB,EAAOE,MAAQrB,EAAoBC,c5GhiFvB,I4GgiFuCD,EAAoBC,YAAY1gB,M5G9hF1E,I4G+hFFygB,EAAoBC,YAAY1gB,MAAgCygB,EAAoBC,YAAYG,YAG5G,OACI,cAAC,IAAD,CAAU4V,GAAItZ,GAAOsC,WAK7B,GAAImC,EAAOE,KAAM,CAEb,IAAKgmD,EACD,OACI,cAAC,IAAD,CAAUxyD,MAAM,OAAOH,cAAc,SAAUjW,MAAO,CAAC+U,QAAS,IAAhE,SACI,cAAC,aAAD,CAAY3U,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SAMvF,IACK+4B,GAEGA,G5GvjFO,I4GwjFJpnD,EAAoBC,YAAY1gB,MAChCygB,EAAoBC,YAAYhT,KAAOm6D,EAAcl6D,SAG5D,OACI,cAAC,GAAD,IAKR,IAAKqM,GAA6ByG,EAAoBC,YAAamnD,GAC/D,OACI,cAAC,IAAD,CAAU1oE,UAAW,GAAImW,MAAM,OAA/B,SACI,cAACrW,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,kDAMZ,GAAI+0D,G5G1kFU,I4G2kFPpnD,EAAoBC,YAAY1gB,OAC/BygB,EAAoBC,YAAYG,YACjCJ,EAAoBC,YAAYoK,OAAS+8C,EAAc/8C,KAE1D,OAAO,cAAC,IAAD,CAAU3rB,UAAW,GAAIgW,cAAc,SAAvC,SACH,cAAClW,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,iDACsC8J,GAAa6D,EAAoBK,oBAAoBhE,MAAMkQ,YADjG,SAOZ,OACI,eAAC9Y,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,UACI,cAAC,GAAD,CACI4H,eAAgB46B,EAA4BiN,iBAC5C/iC,cAAeH,EAAoB1D,MAAQ0D,EAAoB1D,MAAM6D,cAAgB,KACrF1T,gBAAiBuT,EAAoB1D,MACrC8E,OAAQA,EACRnB,oBAAqBA,EACrBC,YAAaD,EAAoBC,YACjCmnD,cAAeA,EACfC,oBAAqBA,EACrBG,aAAcA,EACdC,mBAAoBA,EACpBC,kBAAmBA,EACnBp1D,SAAUA,EACVs6D,mBAAoBtvE,KAAK8B,MAAMuoE,cAC/BkF,4BAA6BvvE,KAAKitE,gCAClCuC,eAAgBxvE,KAAKy6C,mBACrBg1B,aAAczvE,KAAKyhD,gBACnBknB,iBAAkB3oE,KAAKsuE,qBACvBoB,eAAgB1vE,KAAKmtE,8BACrBwC,qBAAsB3vE,KAAKotE,yBAC3BmB,wBAAyBvuE,KAAKuuE,wBAC9BqB,2BAA4B5vE,KAAKwuE,+BACjCqB,gBAAiB7vE,KAAK2sE,oBACtBmD,YAAa9vE,KAAKgtE,gBAClB+C,8BAA+B/vE,KAAKyuE,kCACpCuB,cAAehwE,KAAK8uE,kBACpBmB,kBAAmBjwE,KAAK+uE,sBACxBmB,oBAAqBlwE,KAAK+sE,wBAC1BoD,mBAAoBnwE,KAAKgvE,yBAG7B,cAAC,GAAD,CACIpsD,cAAeH,EAAoB1D,MAAQ0D,EAAoB1D,MAAM6D,cAAgB,KACrFD,YAAaD,EAAoBC,YACjCniB,KAAMR,KAAK8B,MAAMuoE,cAAcwB,4BAC/BD,eAAgB5rE,KAAK8B,MAAMuoE,cAAcuB,eACzCD,mBAAoB3rE,KAAK8B,MAAMuoE,cAAcsB,mBAC7C9nD,OAAQA,EACRimD,cAAeA,EACfnmD,UAAW3jB,KAAK8B,MAAMuoE,cAAc1mD,mB,GApmFtB/hB,aA8mF5BwuE,G,4MAEFP,gBAAkB,WACd,EAAK5vE,MAAM4vE,mB,EAGfC,YAAc,WACV,EAAK7vE,MAAM6vE,e,EAGfP,4BAA8B,SAAAttE,GAC1B,EAAKhC,MAAMsvE,4BAA4BttE,I,EAG3CutE,eAAiB,SAAArvE,GAAI,OAAI,SAAAka,GACrB,EAAKpa,MAAMuvE,eAAervE,EAAMka,K,EAGpCo1D,aAAe,SAAC/iE,EAAO2N,GACnB,EAAKpa,MAAMwvE,aAAa/iE,EAAO2N,I,EAGnCq1D,eAAiB,SAAAh1D,GACb,EAAKza,MAAMyvE,eAAeh1D,I,EAG9Bi1D,qBAAuB,SAACtf,EAAS+F,EAAOC,EAAQj8C,GAC5C,EAAKna,MAAM0vE,qBAAqBtf,EAAS+F,EAAOC,EAAQj8C,I,EAG5DuuD,iBAAmB,SAAAxoE,GAAI,OAAI,SAAA8M,GACvB,EAAKhN,MAAM0oE,iBAAiBxoE,EAAM8M,K,EAGtCshE,wBAA0B,SAACpwD,GACvB,EAAKle,MAAMsuE,wBAAwBpwD,I,EAGvCyxD,2BAA6B,WACzB,EAAK3vE,MAAM2vE,8B,EAGfG,8BAAgC,SAAA9iE,GAC5B,EAAKhN,MAAM8vE,8BAA8B9iE,I,EAG7C+iE,cAAgB,SAAAvlE,GACZ,EAAKxK,MAAM+vE,cAAcvlE,I,EAG7BwlE,kBAAoB,SAAAv1D,GAChB,EAAKza,MAAMgwE,kBAAkBv1D,I,EAGjCw1D,oBAAsB,WAClB,EAAKjwE,MAAMiwE,uB,EAGfC,mBAAqB,WACjB,EAAKlwE,MAAMkwE,sB,EAMfE,+BAAiC,WAE7B,IACIztD,EACA,EAAK3iB,MADL2iB,cAGA/N,EAAM,GAEV,OAAQ,EAAK5U,MAAMqvE,mBAAmB9D,mBAClC,KAhzF4B,EAizFxB,OAAO,KACX,KAhzF6D,EAizFzD32D,EAAM,8CACN,MACJ,KAjzFoC,EAkzFhCA,EAAM,6BACN,MACJ,KAnzFoC,EAozFhCA,EAAM,yCACN,MACJ,KArzF2C,EAszFvCA,EAAM,0DACN,MACJ,KAvzFkD,EA0zF1CA,EADkB,QAAlB+N,EACM,gCAIA,wFAEV,MACJ,QACI,OAAO,KAGf,OACI,cAAC1hB,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAQS,MAAM,QAAjD,SAA0DsT,K,4CAIlE,WAAU,IAAD,OACL,EAiBI7U,KAAKC,MAhBLyiB,EADJ,EACIA,oBAEA5E,EAHJ,EAGIA,eACA8E,EAJJ,EAIIA,cACA1T,EALJ,EAKIA,gBACAyT,EANJ,EAMIA,YACAkB,EAPJ,EAOIA,OACAimD,EARJ,EAQIA,cAEAI,EAVJ,EAUIA,aACAC,EAXJ,EAWIA,mBACAC,EAZJ,EAYIA,kBAEAp1D,EAdJ,EAcIA,SAEAs6D,EAhBJ,EAgBIA,mBAGJ,OACI,eAACn5D,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,UAEI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAAEC,UAAW,GAAI8U,QAAS,IAAhD,SACI,cAACK,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAArE,SACI,cAAC,IAAD,CAAU9jB,cAAc,SAASF,cAAc,SAA/C,SACI,eAACo5D,GAAA,EAAD,CAAShG,WAAYgF,EAAmBhF,WAAYiG,kBAAgB,EAACpvE,MAAO,CAAEoW,MAAOvC,EAAW,OAAS,OAAQkB,QAAS,GAA1H,UACI,cAACs6D,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,mCADO,GAGX,cAACD,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,2BADO,GAGX,cAACD,GAAA,EAAD,UAE0B,QAAlB5tD,EAEI,cAAC6tD,GAAA,EAAD,wBAEA,cAACA,GAAA,EAAD,0BAND,GASX,cAACD,GAAA,EAAD,UAE0B,QAAlB5tD,EAEI,cAAC6tD,GAAA,EAAD,yBAEA,cAACA,GAAA,EAAD,oCAND,GAUP5sD,EAAOE,MAAQ+lD,GAGPA,EAAcp6D,SAAWd,GAErB,KAOR,cAAC4hE,GAAA,EAAD,UACI,cAACC,GAAA,EAAD,oCADO,YAUnC,cAACp6D,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAAC+U,QAAS,IAAhC,SA34F8B,IA64FtBo5D,EAAmBhF,WAKf,eAAC/zD,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA7F,UAMI,eAAC,IAAD,CAAUR,QAAM,EAAhB,UACI,cAAC,IAAD,UACI,cAACM,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,2C5G90Fd,I4Gk1Fc4N,EAAY1gB,KAER,cAAC,IAAD,CAAUb,UAAW,GAArB,SACI,cAAC,GAAD,MAGJ,KAK6C,cAAjDkuE,EAAmB/E,2BAEb1mD,EAAOE,MAAQ+lD,IAAkBn0B,GAA2Bm0B,GAD5D,KAGC5qD,GAASwD,EAAoBC,aAEiB,OAA3CD,EAAoBK,oBAAiF,IAAlDL,EAAoBK,mBAAmBhY,OACtF,KACA,cAAC,IAAD,CAAU3J,UAAW,GAArB,SACE,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAA/B,UACI,cAACpB,GAAA,EAAD,2BACA,cAAC7E,GAAA,EAAD,CAAQppC,KAAK,4BAA4BuK,MAAOq2D,EAAmB/E,0BAA2B5oE,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,IAAkBpgC,SAAU5X,KAAK0vE,eAArJ,SAEQhtD,EAAoBK,mBAAmBlJ,KACnC,SAAAsJ,GAAiB,OACb,cAAC80B,GAAA,EAAD,CAA6Ch/B,MAAOkK,EAAkBpE,MAAMgO,KAA5E,SAAmF5J,EAAkBpE,MAAMkQ,aAA5F9L,EAAkBpE,MAAMgO,gBAVjE,KAuBd,cAAC,IAAD,CAAU3rB,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CACI/6B,WAAS,EACTs9C,UAAQ,EACRrxC,MAv9F6B,IAw9FzB4iE,EAAmB9D,mBACmB,MAAnC8D,EAAmB9E,YAL9B,UAQI,cAAC7tB,GAAA,EAAD,4BACA,eAAC7E,GAAA,EAAD,CAAQppC,KAAK,cAAcuK,MAAOq2D,EAAmB9E,YAAa7oE,OAAO,QAAQo2C,MAAO,cAACC,GAAA,EAAD,IAAkBpgC,SAAU5X,KAAK0vE,eAAzH,UACI,cAACz3B,GAAA,EAAD,CAAmBh/B,MAAM,IAAzB,eAAgB,GAIX6E,EAIGA,EAAes/B,QAAQvjC,KAAI,SAACsjC,EAAQlwC,GAAT,OACvB,cAACgrC,GAAA,EAAD,CAAsBh/B,MAAOkkC,EAA7B,SAAsCA,GAAvBlwC,MAHnB,aAmBE,QAAlB2V,EAEI,cAAC,IAAD,CAAUxhB,UAAW,GAArB,SACI,cAACiV,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACoW,MAAO,QAA9B,SACI,cAAChB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAACzV,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,gCAEW0a,GAA2B/M,EAAgBgmB,SAASilC,wBAF/D,gCASZ,cAAC,IAAD,CAAU/4D,UAAW,GAArB,SACI,cAACiV,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACoW,MAAO,QAA9B,SACI,cAAChB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SAESkN,EAAOE,MAAS+lD,EAyBT7tD,GAAqB6tD,GAEjB,cAAC,KAAD,CACI/P,QAAM,EACNt5D,WAAS,EACTK,QAAQ,SACRk5D,aAAa,WACb/4D,MAAM,oCACNg5D,OAAO,aACPC,QAASj+C,GAAsC,GAC/ChD,MAAOq2D,EAAmB3E,gBAC1BvQ,oBAAqB,CAAChpD,SAAU,SAChC1E,MA9iGH,IA+iGQ4iE,EAAmB9D,mBAC0B,OAAvC8D,EAAmB3E,iBA9iG1D,IA+iGoC2E,EAAmB9D,oBACft9D,MAAMohE,EAAmB3E,kBACtB2E,EAAmB3E,gBAAkB1uD,GAAsC,IAG1FrE,SAAU,SAAAnN,GAAI,OAAI,EAAKulE,cAAcvlE,MAGzC,eAAC,IAAD,CAAU7J,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOxT,MAAM,UAA/C,S5Gh+FlD,I4Gk+F0DohB,EAAY1gB,KAER,KAEA6nE,EAAc/1C,aAAd,yCAEsC9X,GAAe6tD,EAAc/1C,aAAauB,aAFhF,mEAIIw0C,EAAcj6D,MAAd,wCAEqCoM,GAAe6tD,EAAcj6D,MAAMylB,aAFxE,mEAII,O5G9+FtE,I4Gk/FsD3S,EAAY1gB,KAER,K5Gz8FZ,I4G48FgB6nE,EAAcp6D,OAEV,cAACxO,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOxT,MAAM,UAA/C,6EAOA,cAAC,KAAD,CACIw4D,QAAM,EACNt5D,WAAS,EACTK,QAAQ,SACRk5D,aAAa,WACb/4D,M5Gx9F9C,I4Gy9FkD6oE,EAAcp6D,OAEV,sCAEA,qCAERuqD,OAAO,aACPC,QAASj+C,GAAsC,GAC/ChD,MAAOq2D,EAAmB3E,gBAC1BvQ,oBAAqB,CAAChpD,SAAU,SAChC1E,MA1mGvB,IA2mG4B4iE,EAAmB9D,mBAC0B,OAAvC8D,EAAmB3E,iBA1mG9E,IA2mGwD2E,EAAmB9D,oBACft9D,MAAMohE,EAAmB3E,kBACtB2E,EAAmB3E,gBAAkB1uD,GAAsC,IAG1FrE,SAAU,SAAAnN,GAAI,OAAI,EAAKulE,cAAcvlE,SAvGrE,cAAC,KAAD,CACIsvD,QAAM,EACNt5D,WAAS,EACTK,QAAQ,SACRk5D,aAAa,WACb/4D,MAAM,oCACNg5D,OAAO,aACPC,QAASj+C,GAAsC,GAC/ChD,MAAOq2D,EAAmB3E,gBAC1BvQ,oBAAqB,CAAChpD,SAAU,SAChC1E,MArhGK,IAshGA4iE,EAAmB9D,mBAC0B,OAAvC8D,EAAmB3E,iBArhGlD,IAuhGyB2E,EAAmB9D,oBACZt9D,MAAMohE,EAAmB3E,kBACtB2E,EAAmB3E,gBAAkB1uD,GAAsC,IAG1FrE,SAAU,SAAAnN,GAAI,OAAI,EAAKulE,cAAcvlE,YAqGrE,cAAC,IAAD,CAAUrJ,UAAW,GAArB,SACI,cAACgc,GAAA,EAAD,CACInc,MAAM,eACNyN,KAAK,mBACLuK,MAAOq2D,EAAmB7E,iBAC1BhqE,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACRi9C,UAAQ,EACRrxC,MA5oG6B,IA6oGzB4iE,EAAmB9D,mBACsC,IAAtD8D,EAAmB7E,iBAAiBv9D,OAAOnC,OAElD6M,SAAU5X,KAAK0vE,mBASvB,cAAC,IAAD,CAAUtuE,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACt9C,WAAS,EAA/B,UACI,cAAC2c,GAAA,EAAD,CACInc,MAAM,qEACNyN,KAAK,0BACLuK,MAAOq2D,EAAmB5E,wBAC1B/oE,OAAO,SACPb,QAAQ,WACR4L,MAjqGyB,IAkqGrB4iE,EAAmB9D,mBAC6C,IAA7D8D,EAAmB5E,wBAAwBx9D,OAAOnC,OAEzDusD,WAAS,EACTC,QAAS,EACTY,KAAM,EACNvgD,SAAU5X,KAAK0vE,iBAEnB,cAACzxB,GAAA,EAAD,+EAWR,cAAC,IAAD,CAAU78C,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACt9C,WAAS,EAA/B,UACI,cAACk8C,GAAA,EAAD,6CACA,cAACv/B,GAAA,EAAD,CACI1O,KAAK,qBACLuK,MAAOq2D,EAAmBzE,mBAC1BpqE,WAAS,EACTK,QAAQ,WACR8W,SAAU5X,KAAK0vE,eACfhjE,MA9rGyB,IA+rGpB4iE,EAAmB9D,mBAC2C,IAAxD8D,EAAmBzE,mBAAmB39D,OAAOnC,QA7rGxD,IA+rGKukE,EAAmB9D,oBACZvvD,GAA+BqzD,EAAmBzE,oBAG9DpvC,WAAY,CACRic,eACI,cAAC/b,GAAA,EAAD,CAAgBvqB,SAAS,QAAzB,qBAGZ,cAAC6sC,GAAA,EAAD,6FASR,cAAC,IAAD,CAAU78C,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAat0B,UAAU,WAAW62C,UAAQ,EAACt9C,WAAS,EAChDiM,MAttG6B,IAutGzB4iE,EAAmB9D,mBAC0C,IAA1D8D,EAAmBnE,qBAAqBj+D,OAAOnC,OAH1D,UAKI,cAAC4xC,GAAA,EAAD,8CAEA,eAACyV,GAAA,EAAD,CAAY3W,KAAG,EAAC/sC,KAAK,uBAAuBuK,MAAOq2D,EAAmBnE,qBAAsBvzD,SAAU5X,KAAK0vE,eAA3G,UACI,cAACh0B,GAAA,EAAD,CAAkBziC,QAAO,GAAKyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,CAAO9wD,MAAM,YAAaN,MAAM,MAAM46C,eAAe,UACxG,cAACH,GAAA,EAAD,CAAkBziC,QAAO,GAAMyR,WAAYixB,QAAS,cAAC0W,GAAA,EAAD,CAAO9wD,MAAM,cAAeN,MAAM,KAAK46C,eAAe,kBAWtE,SAA5CyzB,EAAmBnE,qBAEf,KAEA,eAAC,IAAD,CAAUvqE,QAAM,EAACQ,UAAW,GAA5B,UACI,cAAC,IAAD,UACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAA/B,UACI,cAACpB,GAAA,EAAD,gDACA,cAACv/B,GAAA,EAAD,CACI1O,KAAK,0BACLuK,MAAOq2D,EAAmB1E,wBAC1BnqE,WAAS,EACTK,QAAQ,WACRi9C,UAAQ,EACRnmC,SAAU5X,KAAK0vE,eACfhjE,MAxvGa,IAyvGR4iE,EAAmB9D,mBAC+B,SAA5C8D,EAAmBnE,sBAC0C,IAA7DmE,EAAmB1E,wBAAwB19D,OAAOnC,QAxvGzE,IA0vGiBukE,EAAmB9D,oBACZvvD,GAA+BqzD,EAAmB1E,yBAG9DnvC,WAAY,CACRic,eAAgB,cAAC/b,GAAA,EAAD,CACZvqB,SAAS,QADG,qBAIxB,cAAC6sC,GAAA,EAAD,6FAIR,cAAC,IAAD,CAAU78C,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAACk8C,GAAA,EAAD,iDACA,cAACv/B,GAAA,EAAD,CAAWk6C,WAAS,EAAC5oD,KAAK,uCAAuCuK,MAAOq2D,EAAmBrE,qCAAsCxqE,WAAS,EAACK,QAAQ,WAAW8W,SAAU5X,KAAK0vE,iBAC7K,cAACzxB,GAAA,EAAD,4FAWpB,cAAC,IAAD,CAAU78C,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACt9C,WAAS,EAA/B,UACI,cAACk8C,GAAA,EAAD,6FACA,cAACv/B,GAAA,EAAD,CAAW1O,KAAK,uBAAuBuK,MAAOq2D,EAAmBxE,qBAAsBrqE,WAAS,EAACK,QAAQ,WAAW8W,SAAU5X,KAAK0vE,eAAgBpY,WAAS,EAACC,QAAS,EAClK7qD,MA7xGyB,IA8xGrB4iE,EAAmB9D,mBAC0C,IAA1D8D,EAAmBxE,qBAAqB59D,OAAOnC,cAWlE,cAAC,IAAD,CAAU3J,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACt9C,WAAS,EAC3BiM,MA5yG6B,IA6yGzB4iE,EAAmB9D,mBACoC,IAApD8D,EAAmBvE,eAAe79D,OAAOnC,OAHpD,UAMI,cAAC4xC,GAAA,EAAD,CAAWx7C,MAAO,CAACqW,aAAc,IAAjC,uDACA,cAAC46C,GAAA,EAAD,CAAY1jD,KAAK,iBAAiBuK,MAAOq2D,EAAmBvE,eAAgBnzD,SAAU5X,KAAK0vE,eAA3F,SAEQ9gE,GAA0BiL,KAAI,SAAA62D,GAAK,OAC/B,cAACh1B,GAAA,EAAD,CAA8BziC,MAAOy3D,EAAO/0B,QAAS,cAAC0W,GAAA,EAAD,IAAUpxD,MAAOyvE,GAA/CA,aAarB,QAAlB9tD,IAEKA,G5G1uGnB,I4G2uGqBD,EAAY1gB,MACZ0gB,EAAYG,WAGf,cAAC,IAAD,CAAU1hB,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAauiB,UAAQ,EAACt9C,WAAS,EAA/B,UACI,cAACk8C,GAAA,EAAD,6GACA,cAACv/B,GAAA,EAAD,CAAW1O,KAAK,iBAAiBuK,MAAOq2D,EAAmBrD,eAAgB5uD,YAAY,iGAAiG5c,WAAS,EAACK,QAAQ,WAAW8W,SAAU5X,KAAK0vE,eAAgBpY,WAAS,EAACC,QAAS,EACnQ7qD,MACsB,QAAlBkW,GA30GZ,IA40Ge0sD,EAAmBrD,gBACiC,IAApDqD,EAAmBrD,eAAe/+D,OAAOnC,SAGpD,cAACkzC,GAAA,EAAD,+FAIR,KAQR,cAAC,IAAD,CAAU78C,UAAW,GAArB,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAACk8C,GAAA,EAAD,yCACA,cAACv/B,GAAA,EAAD,CAAW1O,KAAK,0BAA0BuK,MAAOq2D,EAAmBtE,wBAAyBvqE,WAAS,EAACK,QAAQ,WAAW8W,SAAU5X,KAAK0vE,eACrIhjE,MAh2GA,IAi2GI4iE,EAAmB9D,mBAChB8D,EAAmBtE,wBAAwB99D,OAAOnC,OAAS,IAC1DkR,GAA+BqzD,EAAmBtE,yBAE1DvvC,WAAY,CACRic,eACI,cAAC/b,GAAA,EAAD,CAAgBvqB,SAAS,QAAzB,qBAEZ,cAAC6sC,GAAA,EAAD,gGAMZ,cAAC3mC,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SAn2G5B,IAu2GAkuE,EAAmBhF,WAGf,cAAC/zD,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA7F,SACI,eAAC,IAAD,CAAUR,QAAM,EAAC2W,MAAM,OAAvB,UACI,eAAC,IAAD,CAAUL,cAAc,SAAxB,UACI,cAAChW,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAAO5T,MAAO,CAACgX,YAAa,IAA3E,wCACA,cAAC,GAAD,CAAahH,QAAQ,gFAAgF6tC,UAAU,aAI9Gn7B,EAAOE,MAAS+lD,GAIZA,EAAcj6D,MAAMV,eAAe,SAIhC,eAAC,IAAD,CAAUvO,QAAM,EAAC2W,MAAM,OAAOnW,UAAW,GAAIoW,aAAc,GAA3D,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACqW,aAAc,IAArF,sCAGIsyD,EAAcj6D,MAAMw1C,MAAMxrC,KAAI,SAAC+yD,EAAW3/D,GAAZ,OAC1B2/D,EAAUz9D,eAAe,WAErB,K5GzrGzC,I4G2rGyCy9D,EAAU7+B,SAEN,cAAC,KAAD,CAAyB4iC,aAAW,EAAC7hE,IAAK89D,EAAU99D,IAAKyI,MAAM,OAAOa,OAAgC,KAAxBw0D,EAAU35D,UAAmB,IAAM,OAAQqK,SAAS,EAAOC,UAAU,GAAjItQ,GAElB,cAACiM,GAAA,EAAD,CAAmB9C,OAAK,EAAC+C,IAAKyzD,EAAU99D,KAA5B7B,MAI5B,cAACqK,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SAvBpC,KA0BR,cAACF,EAAA,EAAD,CAAYJ,QAAQ,YAAYS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAAtF,SAESyiB,EAAOE,MAAS+lD,IAIbA,EAAcp6D,SAAWd,IAAkCk7D,EAAcj6D,MAAMV,eAAe,UAI1F,0HANJ,wEAWU,QAAlByT,EAEI,KAEA,cAAC1hB,EAAA,EAAD,CAAYJ,QAAQ,YAAYS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,GAAtF,mDAGR,eAAC,IAAD,CAAUR,QAAM,EAACQ,UAAW,GAA5B,UACI,eAAC,IAAD,WACI,cAACE,EAAA,EAAD,CACIR,QACIwuE,EAAmBjE,wBA77GjC,IA87GiBiE,EAAmBjE,uBAElB,YAEA,WAERrkE,UAAWyQ,YAAIxS,GAAakB,mBAC5B5E,MAAM,UACNG,QAAS,kBAAM,EAAK6tE,4BAt8G9B,IA27GM,SAcQzxD,GAAkBA,EAAetB,iBAE7B8yD,EAAmBjE,wBA38GrC,IA48GqBiE,EAAmBjE,uBAElB,oCAEA,6BAEJiE,EAAmBjE,wBAl9GrC,IAm9GqBiE,EAAmBjE,uBAElB,yBAEA,oBAIhB,eAAC,IAAD,CAAU1lE,WAAY,GAAIuR,cAAc,SAAxC,UACI,cAAC5V,EAAA,EAAD,CACIR,QACIwuE,EAAmBjE,wBA79GhC,IA89GgBiE,EAAmBjE,uBAElB,YAEA,WAERrkE,UAAWyQ,YAAIxS,GAAakB,mBAC5B5E,MAAM,UACNG,QACI,kBAAM,EAAK6tE,4BAv+GxB,IAy+GSpuE,MAAO,CAACgX,YAAa,IAdzB,SAgBQm3D,EAAmBjE,wBA3+GhC,IA4+GgBiE,EAAmBjE,uBAElB,4BAEA,uBAGZ,cAAC,GAAD,CAAal6D,QAAQ,6FAA6F6tC,UAAU,gBAIpI,eAAC,IAAD,CAAUp+C,QAAM,EAACQ,UAAW,GAA5B,UAESkuE,EAAmBjE,uBA1/G9B,IA8/GciE,EAAmBjE,uBAEf,eAAC,IAAD,CAAUzqE,QAAM,EAACQ,UAAW,GAA5B,UACI,cAAC,KAAD,CAAO4F,UAAWyQ,YAAIC,GAAOk5D,gBAAiBh5D,SAAU5X,KAAKwvE,eArgH/F,GAqgH0I33D,QAAS7X,KAAKyvE,aAClH33D,QACIgG,GAAkBA,EAAetB,iBAE7B,CAAC,YAAa,WAEd,CAAC,WAETvE,UAAQ,EACRF,YAAanJ,GACboJ,YAAa,EACbE,WAAS,EAXb,SAYI,cAAChX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAEQ+I,GAAkBA,EAAetB,iBAE7B,mDAEA,4CAIhB,eAACtb,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAAlF,UAAuF,sCAAvF,gCAAiIwN,GAAjI,YAGJ,cAAC,IAAD,CAAUhO,QAAM,EAAhB,SACI,cAACwc,GAAA,EAAD,CAAW1O,KAAK,qBAAqBuK,MAAOq2D,EAAmBlE,mBAAoB/tD,YAAY,4BAA4Bvc,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK0vE,mBA/BpL,KA5/Gd,IAiiHUJ,EAAmBjE,wBAChBiE,EAAmBv5B,WAAWhrC,OAAS,EAEtC,eAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAA5B,UAEuD,cAA/CkuE,EAAmBv5B,WAAW,GAAGtnC,KAAKxM,KAElC,cAACiX,GAAA,EAAD,CAAO9C,OAAK,EAAC+C,IAAKm2D,EAAmBv5B,WAAW,GAAGsL,UAEnD,cAAC,KAAD,CAAavyC,IAAKwgE,EAAmBv5B,WAAW,GAAGsL,QAASsvB,aAAW,EAACp5D,MAAM,OAAOa,OAAO,OAAOkF,SAAS,EAAOC,UAAU,IAErI,cAAC,IAAD,CAAUnc,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC0nC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,SAASC,MAAI,EAChEC,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,iBAAX,+BAFR,SAII,cAAC0H,EAAA,EAAD,CAAY3V,QAAS1B,KAAK2oE,iBArjHhE,GAqjHsC,SACI,cAAC,KAAD,CAAY5iE,SAAS,UAAUxE,MAAM,mBAOrD,KAxjHT,IA6jHK+tE,EAAmBjE,wBAChBiE,EAAmBlE,mBAAmBl+D,OAAOnC,OAAS,EAErD,cAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAAIgX,OAAQ,IAAxC,SACI,cAAC,KAAD,CAAatJ,IAAKwgE,EAAmBlE,mBAAoBuF,aAAW,EAACp5D,MAAM,OAAOa,OAAO,OAAOkF,SAAS,EAAOC,UAAU,MAG9H,gBA/iH7B,IAujHS+xD,EAAmBhF,WAIf,cAAC/zD,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA7F,SAE0B,QAAlBwhB,EAGI,eAAC,IAAD,CAAUhiB,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,2CAIK8O,EAAOE,MAAS+lD,EAKT7tD,GAAqB6tD,MAEhBA,EAAcj6D,MAAMg9D,sBAGjB/C,EAAcj6D,MAAMg9D,sBAEoD,IADrE/C,EAAcj6D,MAAMg9D,qBAClB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,QAIjE,KAEA,eAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SAEQ+0D,EAAcj6D,MAAMg9D,sBACjB/C,EAAcj6D,MAAMg9D,qBAClB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAAS,EAElE,yBAEA,0CAGZ,cAAC,GAAD,CAAmB69D,UAAWkB,EAAcj6D,MAAMg9D,uBAElD,cAACv1D,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SA9BxC,KAoCR,eAAC,IAAD,CAAUR,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQy6B,WAAS,EAACxmB,MAAM,OAA5C,mCACA,cAAC,KAAD,CAAO/N,UAAWyQ,YAAIC,GAAOk5D,gBAAiBh5D,SAAU5X,KAAKwvE,eAroHpF,GAqoHsI33D,QAAS7X,KAAKyvE,aAAc33D,QAAS,CAAC,OAAQ,OAAQ,QAAS,OAAQ,SAAUG,UAAQ,EAACF,YAAanJ,GAA2CoJ,YAAa,EAAGE,WAAS,EAA1R,SACI,cAAChX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mDAGJ,eAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAAlF,UACI,sCADJ,kCAEYwN,GAFZ,gFASA,cAAC,GAAD,CAAiBg6D,UAAW0G,EAAmBvtB,0BAA2B4mB,iBAAkB3oE,KAAK2oE,iBAlpHxH,QAspHmB,cAAC,IAAD,CAAU/nE,QAAM,EAAC4W,aAAc,GAA/B,SACI,eAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,OAAnD,sFAGI,+BACI,yCACA,0CACA,gDACA,oDACA,sCACA,yDACA,uEAOhB,eAAC,IAAD,CAAUtG,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,uCAIK8O,EAAOE,MAAS+lD,EAKT7tD,GAAqB6tD,MAEhBA,EAAcj6D,MAAMg9D,sBAGjB/C,EAAcj6D,MAAMg9D,sBAEoD,IADrE/C,EAAcj6D,MAAMg9D,qBAClB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,QAIjE,KAEA,eAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SAEQ+0D,EAAcj6D,MAAMg9D,sBACjB/C,EAAcj6D,MAAMg9D,qBAClB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAAS,EAElE,0BAEA,4BAGZ,cAAC,GAAD,CAAmB69D,UAAWkB,EAAcj6D,MAAMg9D,uBAElD,cAACv1D,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SA9BxC,KAoCR,cAACF,EAAA,EAAD,CAAYJ,QAAQ,YAAYS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,GAAtF,SAESyiB,EAAOE,MAAS+lD,EAIbA,EAAcp6D,SAAWd,MAGpBk7D,EAAcj6D,MAAMg9D,sBAGjB/C,EAAcj6D,MAAMg9D,sBAC2F,IAA5G/C,EAAcj6D,MAAMg9D,qBAAqB3pD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,QAIxG,8IAEA,8IAfJ,gJAoBZ,eAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQy6B,WAAS,EAACxmB,MAAM,OAA5C,+BACA,cAAC,KAAD,CACI/N,UAAWyQ,YAAIC,GAAOk5D,gBACtBh5D,SAAU5X,KAAKwvE,eA/uH1C,GAgvH2B33D,QAAS7X,KAAKyvE,aACd33D,QAAS,CAAC,OAAQ,OAAQ,QAAS,OAAQ,SAC3CG,UAAQ,EACRF,YAAanJ,GACboJ,YAAa,EACbE,WAAS,EARb,SAUI,cAAChX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mDAGJ,eAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAAlF,UACI,sCADJ,+BAEYwN,GAFZ,gFASA,cAAC,GAAD,CACIg6D,UAAW0G,EAAmBvtB,0BAC9B4mB,iBAAkB3oE,KAAK2oE,iBArwHlD,QA0wHmB,eAAC,IAAD,CAAU/nE,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAAQy6B,WAAS,EAACxmB,MAAM,OAA5C,4BACA,cAAC,KAAD,CACI+wB,MAAM,OACNzoB,YACKwG,EAAOE,MAAS+lD,IAIbA,EAAcp6D,SAAWd,IAAkCk7D,EAAcj6D,MAAMV,eAAe,qBAI1F,oDANJ,qEASRyI,SAAU5X,KAAK2vE,qBACf3X,QAASA,GACT/+C,MAAOq2D,EAAmBhE,gCAnwH/C,IA2wHCgE,EAAmBhF,WAIf,cAAC/zD,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA7F,SAE0B,QAAlBwhB,EAGI,eAAC,IAAD,CAAUhiB,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,kDAIK8O,EAAOE,MAAS+lD,EAIb7tD,GAAqB6tD,MAGhBA,EAAcj6D,MAAMq9D,qBAGjBpD,EAAcj6D,MAAMq9D,qBAEoD,IADrEpD,EAAcj6D,MAAMq9D,oBAClBhqD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,QAIjE,KAEA,eAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UAEQsyD,EAAcj6D,MAAMq9D,qBACjBpD,EAAcj6D,MAAMq9D,oBAClBhqD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAAS,EAElE,eAAC,IAAD,CAAUnK,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,qCACA,cAAC,GAAD,CAAmB6zD,UAAWkB,EAAcj6D,MAAMq9D,oBAAqBhE,cAAY,EAACP,iBAAkB3oE,KAAK+vE,mCAG/G,cAAC7uE,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,qCAGR,cAACuC,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SA9BpC,KAkCR,eAAC,IAAD,CAAUR,QAAM,EAACQ,UAAW,GAA5B,UACI,cAAC,KAAD,CACI4F,UAAWyQ,YAAIC,GAAOk5D,gBACtBh5D,SAAU5X,KAAKwvE,eA11H1C,GA21H2B33D,QAAS7X,KAAKyvE,aACd33D,QAAS,CAAC,OAAQ,OAAQ,QAAS,OAAQ,QAAS,OAAQ,SAC5DG,UAAQ,EACRF,YAAanJ,GACboJ,YAAa,EACbE,WAAS,EARb,SASI,cAAChX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mDAGJ,eAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAAlF,UACI,sCADJ,kC5GznHrC,G4GynHqC,6FASA,cAAC,GAAD,CAAiBwnE,UAAW0G,EAAmBttB,yBAA0B2mB,iBAAkB3oE,KAAK2oE,iBA72HvH,QAi3HmB,cAACrxD,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,SAGlD,eAAC,IAAD,CAAU5W,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,iDAIK8O,EAAOE,MAAS+lD,EAIb7tD,GAAqB6tD,MAGhBA,EAAcj6D,MAAMq9D,qBAGjBpD,EAAcj6D,MAAMq9D,qBAEoD,IADrEpD,EAAcj6D,MAAMq9D,oBAClBhqD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,QAIjE,KAEA,eAAC,IAAD,CAAUnK,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UAEQsyD,EAAcj6D,MAAMq9D,qBACjBpD,EAAcj6D,MAAMq9D,oBAClBhqD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAAS,EAElE,eAAC,IAAD,CAAUnK,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,uCACA,cAAC,GAAD,CAAmB6zD,UAAWkB,EAAcj6D,MAAMq9D,oBAAqBhE,cAAY,EAACP,iBAAkB3oE,KAAK+vE,mCAG/G,cAAC7uE,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,+CAGR,cAACuC,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SA9BpC,KAmCR,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,GAAlF,SAESyiB,EAAOE,MAAS+lD,GAKRA,EAAcj6D,MAAMq9D,oBAArB,0IAKWt+D,GAAoDk7D,EAAcj6D,MAAMq9D,oBAAoBhqD,QAAO,SAAA5U,GAAQ,OAAKA,EAASa,eAAe,cAAYpE,OAL/J,8FALR,kGAE+F6D,GAF/F,aAiBR,eAAC,IAAD,CAAUhO,QAAM,EAACQ,UAAW,GAA5B,UACI,cAAC,KAAD,CACI4F,UAAWyQ,YAAIC,GAAOk5D,gBACtBh5D,SAAU5X,KAAKwvE,eAp7H1C,GAq7H2B33D,QAAS7X,KAAKyvE,aACd33D,QAAS,CAAC,OAAQ,OAAQ,QAAS,OAAQ,QAAS,OAAQ,SAC5DG,UAAQ,EACRF,YAAanJ,GACboJ,YAAa,EACbE,WAAS,EARb,SASI,cAAChX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mDAGJ,eAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAAlF,UACI,sCADJ,kC5GntHrC,G4GmtHqC,6FASA,cAAC,GAAD,CAAiBwnE,UAAW0G,EAAmBttB,yBAA0B2mB,iBAAkB3oE,KAAK2oE,iBAv8HvH,QA28HmB,cAACrxD,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,WAK9D,cAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA7F,SACI,eAAC,IAAD,CAAUR,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,iDAOA,cAACymB,GAAA,EAAD,CAAat0B,UAAU,WAAW/F,MAAO,CAACC,UAAW,IAArD,SACI,cAACs6C,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CAAUr6C,MAAM,UAAUmN,KAAK,6BAA6BuK,MAAOq2D,EAAmBvD,2BAA4BvxB,QAAS80B,EAAmBvD,2BAA4Bn0D,SAAU5X,KAAKiwE,oBAE7LhvE,MACI,cAACC,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,8GAKZ,cAACuC,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,MAO9C,cAACgkB,GAAA,EAAD,CAAat0B,UAAU,WAAvB,SACI,cAACw0C,GAAA,EAAD,CACIC,QACI,cAACC,GAAA,EAAD,CAAUr6C,MAAM,UAAUmN,KAAK,qCAAqCuK,MAAOq2D,EAAmBtD,mCAAoCxxB,QAAS80B,EAAmBtD,mCAAoCp0D,SAAU5X,KAAKiwE,oBAErNhvE,MACI,cAACC,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,yIAMZ,cAACuC,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,MAO9C,eAACgkB,GAAA,EAAD,CAAat0B,UAAU,WAAvB,UACI,cAAChG,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,8IAGA,cAAC2mC,GAAA,EAAD,CAAkBv6C,MAAO,CAACC,UAAW,IACjCu6C,QACI,cAACC,GAAA,EAAD,CAAUr6C,MAAM,UAAUmN,KAAK,6BAA6BuK,MAAOq2D,EAAmBxD,2BAA4BtxB,QAAS80B,EAAmBxD,2BAA4Bl0D,SAAU5X,KAAKiwE,oBAE7LhvE,MACI,eAACC,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,qCACI,qCAEI,cAAC,IAAD,CACI2jB,GAAIhG,GACJvU,OAAO,SACPnX,UAAWyQ,YAAIxS,GAAaG,gBAC5BjE,MAAO,CACHI,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,IARhB,8CAqBpB,cAACS,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,aAU1F,cAACnB,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,eAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,GAAIoW,aAAc,IAAKtB,QAAS,IAA7H,UAGQ2N,EAAOE,MAAQ+lD,EAGPA,EAAcp6D,SAAWd,GArhIb,IAuhIR0gE,EAAmBhF,YAGVgF,EAAmBxD,2BAIhB,cAAC5qE,EAAA,EAAD,CAAYK,MAAM,QAAQT,QAAQ,QAAQiU,MAAM,QAAQ5T,MAAO,CAACqW,aAAc,IAA9E,wEAGR,KAliIG,IAoiIP83D,EAAmBhF,WAEf,cAACppE,EAAA,EAAD,CAAYK,MAAM,QAAQT,QAAQ,QAAQiU,MAAM,QAAQ5T,MAAO,CAACqW,aAAc,IAA9E,wEAEA,KAviII,IA2iIZ83D,EAAmBhF,YAGVgF,EAAmBxD,2BAIhB,cAAC5qE,EAAA,EAAD,CAAYK,MAAM,QAAQT,QAAQ,QAAQiU,MAAM,QAAQ5T,MAAO,CAACqW,aAAc,IAA9E,wEAGR,KAIhB,eAAC,IAAD,CAAUD,MAAM,OAAOH,cAAc,QAArC,UACI,cAAC9V,EAAA,EAAD,CAAQR,QAAQ,OAAOY,QAAS1B,KAAK8vE,YAAaruE,SA9jIhC,IA8jI0C6tE,EAAmBhF,WAA+C9oE,KAAK,QAAQwF,UAAWyQ,YAAIxS,GAAakB,mBAAvK,kBACA,cAAC7E,EAAA,EAAD,CAAQf,IAAKP,KAAKuuE,wBAAyBztE,QAAQ,WAAWS,MAAM,UAAUG,QAAS1B,KAAK6vE,gBAAiBruE,KAAK,QAAQwF,UAAWyQ,YAAIxS,GAAakB,mBAClJ1E,SA5jIgB,IA6jIZ6tE,EAAmBhF,aACfgF,EAAmBxD,2BAE3B3qE,MAAO,CAACwE,WAAY,IALxB,SAOQwkE,EAEI,cAAC,aAAD,CAAY3oE,KAAM,IAElBqiB,EAAOE,MAAQ+lD,GAGPA,EAAcp6D,SAAWd,GA1kI1B,IA4kIK0gE,EAAmBhF,WAEf,SAEA,OA/kIR,IAylIAgF,EAAmBhF,WAEf,SAEA,kBAIxB,cAACuG,GAAA,EAAD,CAASC,KAAMxB,EAAmB5D,+BAAgCvtD,OAAQmxD,EAAmB7D,0BAA2BzsB,UAAU,SAAlI,SACI,cAAC+xB,GAAA,EAAD,CAAS5vE,MAAO,CAACC,UAAW,IAAKuO,GAAG,yBAApC,SACI,eAAC,IAAD,CAAUuH,cAAc,SAAxB,UAEQlX,KAAKqwE,iCAET,cAACh5D,EAAA,EAAD,CACIlW,MAAO,CAACoW,MAAO,GAAIa,OAAQ,IAAM1W,QAAS1B,KAAK4vE,2BADnD,SAEI,cAAC,KAAD,CAAW7pE,SAAS,4BAU1C8d,EAAOE,OAAS+lD,GACdjmD,EAAOE,MAAQ+lD,GAAiBA,EAAcp6D,SAAWd,GAEzD,qBACIzN,MAAO,CAACiQ,SAAU,QAASmG,MAAO,OAAQa,OAAQ,OAAQkhC,OAAQ,EAAGkM,MAAO,EAAGrtC,YAAanD,EAAW,GAAK,IAAKwC,aAAcxC,EAAW,GAAK,KADnJ,SAEI,eAAC,IAAD,CAAUpU,QAAM,EAAhB,UACI,gCACI,cAACk+C,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,OAAOC,MAAI,EAC9DC,QACI,cAACC,GAAA,EAAD,CAASxvC,GAAE,eAAX,wBAFR,SAII,cAACqhE,GAAA,EAAD,CAAKzvE,MAAM,UAAUC,KAAMwT,EAAW,SAAW,QAAStT,QAAS1B,KAAKkwE,oBAAqBzuE,SAAUyoE,GAAgBC,EAAoBhpE,MAAO,CAACiQ,SAAU,WAAWuH,OAAQ,GAAhL,SACI,cAAC,KAAD,QAIJuxD,GAAgBC,EAEZ,cAACvxD,EAAA,EAAD,CAAkBq4D,UAAW,IAAKzvE,KAAMwT,EAAW,GAAK,GAAI7T,MAAO,CAACiQ,SAAU,WAAYsH,KAAM,EAAGw4D,MAAO,KAE1G,QAKRrtD,EAAOE,MAAQ+lD,GAAiBA,EAAcp6D,SAAWd,GAErD,sBAAKzN,MAAO,CAACC,UAAW4T,EAAW,GAAK,IAAxC,UACI,cAAC8pC,GAAA,EAAD,CAAgBC,QAAS,CAAC,QAAS,SAAUC,UAAU,OAAOC,MAAI,EACjEC,QACO,cAACC,GAAA,EAAD,CAASxvC,GAAE,eAAX,+BAFR,SAII,cAACqhE,GAAA,EAAD,CAAKxvE,KAAMwT,EAAW,SAAW,QAAStT,QAAS1B,KAAKmwE,mBAAoB1uE,SAAU2oE,EAAmBjpE,MAAO,CAAEiQ,SAAU,WAAYuH,OAAQ,GAAhJ,SACI,cAAC,KAAD,CAAYpX,MAAM,cAItB6oE,EAEI,cAACxxD,EAAA,EAAD,CAAkBrX,MAAM,YAAY0vE,UAAW,IAAKzvE,KAAMwT,EAAW,GAAK,GAAI7T,MAAO,CAACiQ,SAAU,WAAYsH,IAAK1D,EAAW,GAAK,GAAIk8D,MAAO,KAE5I,QAIZ,UAKhB,Y,GAn9CItvE,aA09CtBo2D,GAAU,CACZW,QAAS,CACL,CAAC,CAAC,OAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAC/B,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,aAAc,cACf,CAAC,CAAC,KAAQ,WAAY,CAAC,KAAQ,UAAW,CAAC,OAAU,MAAO,CAAC,OAAU,MAAO,CAAC,MAAS,KACxF,CAAC,CAAC,OAAU,OAAQ,CAAC,OAAU,UAC/B,CAAC,CAAC,MAAS,IAAK,CAAC,WAAc,KAC/B,CAAC,OAAQ,SACT,CAAC,WAOH54D,G,4MA4HFoxE,qBAAuB,WAEnB,MAMI,EAAKlxE,MALL2iB,EADJ,EACIA,cACAgpD,EAFJ,EAEIA,eACA/nD,EAHJ,EAGIA,OACAimD,EAJJ,EAIIA,cACAnnD,EALJ,EAKIA,YAGJ,OAAQipD,GACJ,KA70I2B,EA80IvB,OACI,cAAC1qE,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,mCAER,KAh1I0C,EAi1ItC,OACI,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,kDAER,KAn1I2C,EAo1IvC,OACI,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAiBwT,MAAM,OAAzD,mDAGR,KAv1IsB,EAw1IlB,OACI,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,wBAER,KA11IoB,EA21IhB,OAAI8O,EAAOE,MAAQ+lD,EACXA,EAAcp6D,SAAWd,GAClB,cAAC1N,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,uD5G/wIL,I4GgxIK4N,EAAY1gB,KACZ,cAACf,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SAEC,uEAKD,eAAC,IAAD,CAAUnU,QAAM,EAAhB,UACH,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SAEQ,kJAMR,uBACA,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,uFACA,uBACA,cAACmiC,GAAA,EAAD,CAAKjxC,OAAQ,EAAGsxC,QAAS1gC,GAAiBX,QAAQ,MAAlD,SACI,cAAC,GAAD,CAAYpH,IAAKsQ,GAAOiE,qBAAqBT,GAAgBzE,OAAO,SAAS5c,MAAM,OAAOk0C,YAAY,OAAOC,iBAAiB,EAAMxuC,UAAU,IAC1IsuC,eACI,cAACt0C,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SAAgE5V,gDAAmCigB,GAAOiE,qBAAqBT,YAO5I,cAAC1hB,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,S5G9yID,I4GizIE4N,EAAY1gB,KAER,0EAGA,gJAOpB,QACI,S,4CAxMZ,WAEI,MAgBIjC,KAAKC,MAfL2iB,EADJ,EACIA,cAEApiB,EAHJ,EAGIA,KACAorE,EAJJ,EAIIA,eACAD,EALJ,EAKIA,mBAKA9nD,GAVJ,EAOIqmD,aAPJ,EAQIC,mBARJ,EAUItmD,QACAimD,EAXJ,EAWIA,cACAnmD,EAZJ,EAYIA,UACAhB,EAbJ,EAaIA,YAEG5M,EAfP,qKAkBA,OACI,eAACzV,EAAA,EAAD,yBAAQ0V,SAAS,KAAKvV,WAAS,EAACD,KAAMA,GAAUuV,GAAhD,cACI,cAACrV,EAAA,EAAD,CAAayxD,mBAAmB,EAAhC,SACI,cAACjxD,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,OAA/C,SA3tIY,IA6tIJ62D,EAEI,mBAEA,6BAIhB,cAACjrE,EAAA,EAAD,UACI,eAAC,IAAD,CAAUC,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,SAvuIQ,IAyuIA62D,EAEI,uDAEA,OAGZ,eAAC,IAAD,CAAUhrE,QAAM,EAAC4W,aAAc,GAA/B,UAEQxX,KAAKmxE,uBAlvIL,IAqvIAvF,EAEI,KAEA,cAAC/qE,EAAA,EAAD,CAAaM,MAAO,CAACC,UAAW,IAAKL,SAAO,EAACD,QAAQ,UAAUE,IAAK2qE,EAAoB1qE,MAAK,UAAKk/B,SAASwrC,GAAd,eAzvIjG,IA+vIZC,EAEI,KAEA,cAACvqE,EAAA,EAAD,UACI,eAAC,IAAD,CAAUkW,MAAM,OAAOH,cAAc,SAASI,aAAc,GAAIW,YAAa,GAAIxS,WAAY,GAA7F,UACI,cAAC,IAAD,CACI+yB,GACI9V,EAEI8P,GAAuBzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,aAAc0V,GAEtF+O,GAAyCzkB,QAAQ,aAAc0V,GAEvE3c,UAAWyQ,YAAIxS,GAAaG,gBAC5BjE,MAAO,CAAEoW,MAAO,OAAQY,YAAa,IATzC,SAUI,cAAC7W,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUC,KAAK,SAASf,WAAS,EAACuG,UAAWyQ,YAAIxS,GAAakB,mBAA/F,SAEQ0d,EAAOE,MAAQ+lD,EAGPA,EAAcp6D,SAAWd,GAErB,uBAEA,qBAGR,2BAIhB,cAAC,IAAD,CACI8pB,G5GntIT,I4GotIa/V,EAAY1gB,KAEK,UAAb2gB,EAEO8P,GAAwBzkB,QAAQ,iBAAkB2U,GAElD8P,GAJM,a5GrtI/B,I4G2tIkB/P,EAAY1gB,KAEK,UAAb2gB,EAEO8P,GAAazkB,QAAQ,iBAAkB2U,GAEvC8P,GAJM,aAMb,GAEZ1rB,UAAWyQ,YAAIxS,GAAaG,gBAC5BjE,MAAO,CAACoW,MAAO,OAAQ5R,WAAY,IArBvC,SAsBI,cAACrE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUC,KAAK,SAASf,WAAS,EAACuG,UAAWyQ,YAAIxS,GAAakB,mBAA/F,uD,GAnHNvE,aA+MfC,gBAz4IS,SAAAC,GACpB,MAAO,CACH42C,4BAA6B52C,EAAM42C,4BACnCj2B,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3B1N,SAAUlT,EAAMoY,gBAAgBlF,SAEhC0e,yBAA0B5xB,EAAM2nE,8BAA8B/1C,6BAI3C,SAAA1xB,GACvB,MAAO,CACHoqE,mCAAoC,SAAC38D,GAAD,OAAazN,EAAS0nE,GAA0Cj6D,KACpGyB,2BAA4B,SAACC,EAAS5P,EAAO6P,GAAjB,OAA8BpP,EAASyY,GAAmDtJ,EAAS5P,EAAO6P,QA23I/HvP,CAA6CqqE,IAEtDx0D,GAASxS,IAAWC,OAAO,CAE7ByrE,eAAgB,CACZ16D,QAAS,GACTjQ,OAAO,aAAD,OAAe4Q,IAErB,SAAU,CACND,gBAAiBC,GACjBtR,OAAQ,cCn8Id6rE,G,kDAEF,WAAYnxE,GAAQ,IAAD,8BACf,cAAMA,IAuDVmnC,SAAW,WACP,MAUI,EAAKnnC,MATL0iB,EADJ,EACIA,YACA4lD,EAFJ,EAEIA,kBAEA3uB,EAJJ,EAIIA,0CACAC,EALJ,EAKIA,yCACAC,EANJ,EAMIA,8CAEAG,EARJ,EAQIA,2CACA7K,EATJ,EASIA,uCAGJ,EAKI,EAAKttC,MAJLuvE,EADJ,EACIA,eACAC,EAFJ,EAEIA,qBACAC,EAHJ,EAGIA,4BACAC,EAJJ,EAIIA,sBAGCjJ,IAIA5lD,GAWL,EAAK8uD,4BAGDJ,G7GoBiB,I6GnBbA,EAAepvE,MACfg4C,EAA2Co3B,EAAe1hE,IAK9DiqC,IAEKC,GACGC,G7GUS,I6GTVu3B,EAAepvE,MAElBmtC,MA1BCkiC,GAAyBC,GAAgCC,GAC1D,EAAKp4C,SAAS,CACVk4C,sBAAsB,EACtBC,6BAA6B,EAC7BC,uBAAuB,MArFpB,EAmHnBC,0BAA4B,WAExB,MAKI,EAAK3vE,MAJLuvE,EADJ,EACIA,eACAG,EAFJ,EAEIA,sBACAF,EAHJ,EAGIA,qBACAC,EAJJ,EAIIA,4BAGJ,IAAKF,IAAmBG,IAA0BF,IAAyBC,EAA6B,CACpG,EAAKn4C,SAAS,CACVo4C,uBAAuB,EACvBF,sBAAsB,EACtBC,6BAA6B,IAMjC,IAAMG,EAAmB,EAAKzxE,MAAM+K,MAAM6Y,OAAOoH,OAGjDkM,GACsBu6C,GACjBtlE,MAAK,SAAAoD,GACF,EAAK4pB,SAAS,CACVi4C,eAAgB7hE,EAChBgiE,uBAAuB,EACvBF,sBAAsB,OAG7B58D,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACVo4C,uBAAuB,EACvBF,sBAAsB,OAMlCn6C,GACoCu6C,E9F0rCK,G8FzrCpCtlE,MAAK,SAAA2hB,GACF,EAAKqL,SAAS,CACVu4C,sBAAuB5jD,EAAY,GACnCyjD,uBAAuB,EACvBD,6BAA6B,OAGpC78D,OAAM,SAAAhI,GAGHyqB,GACoCu6C,E9F6qCJ,G8F5qC3BtlE,MAAK,SAAA2hB,GACF,EAAKqL,SAAS,CACVu4C,sBAAuB5jD,EAAY,GACnCyjD,uBAAuB,EACvBD,6BAA6B,OAGpC78D,OAAM,SAAAhI,GAEH,EAAK0sB,SAAS,CACVo4C,uBAAuB,EACvBD,6BAA6B,YApLtC,EAmenBK,iBAAmB,SAAA7jD,GACf,IAAI8jD,EAAgB,CAChBh9D,IAAK,GACLtT,MAAO,IAGX,OAAIwsB,EAAYre,Q7GtXG,I6GuXXqe,EAAY9rB,MACZ4vE,EAAch9D,IAAM,iCACpBg9D,EAActwE,MAAQ,YAEtBswE,EAAch9D,IAAM,mCACpBg9D,EAActwE,MAAQ,WAO1B,cAACL,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,YAAYS,MAAOswE,EAActwE,MAApE,SAA4EswE,EAAch9D,OAJnF,MA/eX,EAAK9B,WAAa/T,EAASgU,WAE3B,EAAKlR,MAAQ,CACTuvE,eAAgB,KAChBC,sBAAsB,EAEtBK,sBAAuB,KACvBJ,6BAA6B,EAE7BC,uBAAuB,GAZZ,E,qDAgBnB,WACI,MAOIxxE,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEAZ,EAJJ,EAIIA,2BACAG,EALJ,EAKIA,sCACAK,EANJ,EAMIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAAsBA,GAAuC1nB,EAAM2vB,MAExJ7C,IAEIC,GAAyBG,GACzBl4B,KAAKonC,a,gCAIb,SAAmBxM,EAAWC,EAAWhnB,GACrC,MAKI7T,KAAKC,MAJL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,qBAKJJ,EAPA,EAIIA,oBAKAC,GAAyBG,GACzBl4B,KAAKonC,a,oBA0Ib,WACI,MAQIpnC,KAAK8B,MAPLuvE,EADJ,EACIA,eACAC,EAFJ,EAEIA,qBAEAK,EAJJ,EAIIA,sBACAJ,EALJ,EAKIA,4BAEAC,EAPJ,EAOIA,sBAGJ,EAWIxxE,KAAKC,MAVLiP,EADJ,EACIA,gBACA6oB,EAFJ,EAEIA,sBACAG,EAHJ,EAGIA,oBAEA2iB,EALJ,EAKIA,mCAEAviB,EAPJ,EAOIA,WACA+B,EARJ,EAQIA,eACA1X,EATJ,EASIA,YACA4lD,EAVJ,EAUIA,kBAGJ,OAAKxwC,EAQAG,GAIDmC,GACIkuC,GACA+I,GACAC,IACDC,EAiBHl5C,IAAeG,IAAiB9V,EAI/B0uD,EAsBD,cAACl7D,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,EAAGU,gBAAiBC,GAAiBuB,OAAQ,OAAQ0rC,UAAW,QAAShtC,WAAY,GAAIC,cAAe,IAAKC,YAAa,GAAIC,aAAc,IAA9K,SACI,cAACZ,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,eAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,UACI,cAACC,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAAC+U,QAAS,IAAtC,SACI,eAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,UACI,cAACC,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAA9E,SACI,cAAC,IAAD,CAAUjhB,MAAM,OAAOH,cAAc,SAASF,cAAc,SAA5D,UAESm6D,EAAe79D,gBAEZ69D,EAAe79D,iBACwF,IAApG69D,EAAe79D,eAAevI,WAAU,SAAA6mE,GAAW,OAAKA,EAAY3iE,eAAe,cAGtF,cAAC,GAAD,CAAc+1B,UAAWmsC,EAAensC,UAAWC,SAAUksC,EAAelsC,SAAU5tB,MAAO,IAAKa,OAAQ,IAAKgtB,YAAY,OAE3H,cAAC,IAAD,CAAU7tB,MAAO,IAAKa,OAAQ,IAA9B,SACI,cAACc,GAAA,EAAD,CAAOK,eAAa,EAACC,WAAS,EAACL,IAAMk4D,EAAe79D,eAAe69D,EAAe79D,eAAevI,WAAU,SAAA6mE,GAAW,OAAKA,EAAY3iE,eAAe,eAAaL,IAAK3N,MAAO,CAACoW,MAAO,OAAQ+jC,UAAW,IAAK7hC,UAAW,mBAK9O,cAAClD,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAA9E,SACI,eAAC,IAAD,CAAU53B,QAAM,EAACsW,cAAc,SAASE,cAAc,SAASgB,OAAO,OAAOhX,UAAW,GAAIoW,aAAc,GAA1G,UACI,cAACtW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAnC,mBACQuwE,EAAezkD,MADvB,YACgCykD,EAAensC,UAD/C,YAC4DmsC,EAAelsC,YAGvEnlC,KAAK4xE,iBAAiBD,GAE1B,eAAC,IAAD,CAAU/wE,QAAM,EAACQ,UAAW,GAAIgW,cAAc,SAA9C,UACI,cAAClW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAnC,0BAAsDuwE,EAAerkD,SAEjEqkD,EAAeliE,eAAe,aAAekiE,EAAe7xB,SAAStyC,OAAOnC,OAAS,EAEjF,mBAAGkuB,KAAMo4C,EAAe7xB,SAAUrhC,OAAO,SAASgrD,IAAI,sBAAtD,SACI,qBAAKrwC,IAAI,gBAAgB3f,IAAK4f,EAAQ,KAA+BC,QAAS73B,MAAO,CAACoW,MAAO,GAAIa,OAAQ,QAG7G,kBAQ5B,cAAC+iB,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAAC+U,QAAS,GAAI9U,UAAW,IAArD,SAESiwE,EAAej+D,gBASZ,eAAC,IAAD,CAAUxS,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,8BACA,eAAC,IAAD,CAAUX,QAAM,EAACQ,UAAW,GAAIuE,WAAY,GAAIwS,YAAa,GAA7D,UACI,eAACjX,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,mCACI,4BAAIs8D,EAAej+D,gBAAgBwpC,iBAEvC,cAACtlC,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC7wE,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,yCACI,4BAAIs8D,EAAej+D,gBAAgB0pC,oBAEvC,cAACxlC,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC7wE,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,+BACI,oBACI5T,MAAO,CAACC,UAAW,GADvB,SAGQiwE,EAAej+D,gBAAgBiqC,UAAUxjC,KAAI,SAACyjC,EAAUrwC,GAAX,OACzC,6BACKqwC,GADIrwC,WAOzB,cAACqK,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC7wE,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,qCACI,4BAAIs8D,EAAej+D,gBAAgB+pC,YAEvC,cAAC7lC,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC7wE,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,uCACI,uBACA,uBACCs8D,EAAej+D,gBAAgBk3B,iBAAiByS,SAASzX,cAC1D,uBAEiE,KAA7D+rC,EAAej+D,gBAAgBk3B,iBAAiB0S,SAE5C,KAEA,gCACKq0B,EAAej+D,gBAAgBk3B,iBAAiB0S,SAAS1X,cAC1D,0BAIqD,KAA7D+rC,EAAej+D,gBAAgBk3B,iBAAiB2S,SAE5C,KAEA,gCACKo0B,EAAej+D,gBAAgBk3B,iBAAiB2S,SAAS3X,cAC1D,0BAGX+rC,EAAej+D,gBAAgBk3B,iBAAiB4S,SAAS5X,cAzB9D,KAyB+E+rC,EAAej+D,gBAAgBk3B,iBAAiBz+B,SAASy5B,cACpI,0BAEJ,cAAChuB,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC7wE,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,qCACI,uBACA,uBACCs8D,EAAej+D,gBAAgBm3B,eAAewS,SAASzX,cACxD,uBAE+D,KAA3D+rC,EAAej+D,gBAAgBm3B,eAAeyS,SAE1C,KAEA,gCACKq0B,EAAej+D,gBAAgBm3B,eAAeyS,SAAS1X,cACxD,0BAImD,KAA3D+rC,EAAej+D,gBAAgBm3B,eAAe0S,SAE1C,KAEA,gCACKo0B,EAAej+D,gBAAgBm3B,eAAe0S,SAAS3X,cACxD,0BAGX+rC,EAAej+D,gBAAgBm3B,eAAe2S,SAAS5X,cAzB5D,KAyB6E+rC,EAAej+D,gBAAgBm3B,eAAe1+B,SAASy5B,cAChI,0BAEJ,cAAChuB,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC7wE,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,qCACI,mBAAGkkB,KAAMo4C,EAAej+D,gBAAgBuqC,eAAgBwrB,IAAI,sBAAsBhrD,OAAO,SAAzF,SACI,4BAAIkzD,EAAej+D,gBAAgBuqC,sBAG3C,cAACrmC,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,iBAC/B,eAAC,IAAD,CAAUnxE,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,gCAEA,cAAC,IAAD,CAAU3T,UAAW,GAAIoW,aAAc,GAAIJ,cAAc,SAASF,cAAc,SAAhF,UAESm6D,EAAej+D,gBAAgBuI,OAE5B01D,EAAej+D,gBAAgBuI,QACmE,IAA/F01D,EAAej+D,gBAAgBuI,MAAM1Q,WAAU,SAAA0Q,GAAK,OAAKA,EAAMxM,eAAe,cAGjF,cAACjO,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,YAAYS,MAAM,gBAArD,8CAEA,cAAC,KAAD,CACIuN,IACIuiE,EAAej+D,gBAAgBuI,MAAM01D,EAAej+D,gBAAgBuI,MAAM1Q,WAAU,SAAA0Q,GAAK,OAAKA,EAAMxM,eAAe,eAAaL,IAEpI6O,aAAW,EACXpG,MAAM,OACNa,OAAsJ,KAA9Ii5D,EAAej+D,gBAAgBuI,MAAM01D,EAAej+D,gBAAgBuI,MAAM1Q,WAAU,SAAA0Q,GAAK,OAAKA,EAAMxM,eAAe,eAAa8D,UAAmB,IAAM,OACjKqK,SAAS,EACTC,UAAU,MAG1B,cAACjG,EAAA,EAAD,CAAStQ,UAAWyQ,YAAIC,GAAOq6D,0BA3H3C,eAAC,IAAD,CAAUnxE,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,8BACA,cAAC,IAAD,CAAUX,QAAM,EAACQ,UAAW,GAAIuE,WAAY,GAAIwS,YAAa,GAAIf,cAAc,SAASF,cAAc,SAAtG,SACI,cAAChW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAnC,4D7GhNlB,I6GgVE6hB,EAAY1gB,M7GlVX,I6GmVEovE,EAAepvE,KAEd,cAACk5B,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAAC+U,QAAS,GAAI9U,UAAW,IAArD,SACI,eAAC,IAAD,CAAUR,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,0CACA,cAAC,IAAD,CAAUX,QAAM,EAACQ,UAAW,GAAIuE,WAAY,GAAIwS,YAAa,GAAIf,cAAc,SAASF,cAAc,SAAtG,SAES2jC,EAIG,eAAC35C,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAnC,2DAAyF,4B7GlU5F,I6GkUgG+5C,EAAmC54C,KAAsD,2BAA6B,2CAAnN,OAAqQga,GAA2B4+B,EAAmCQ,YAAnU,OAFA,cAACn6C,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAnC,8EAQpB,YA5NhB6wE,EAEI,cAACx7D,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,SACI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACzV,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAKK,MAAO,CAACC,UAAW,IAA3D,mBACQuwE,EAAsB/kD,MAD9B,YACuC+kD,EAAsBzsC,UAD7D,YAC0EysC,EAAsBxsC,SADhG,gCACgIwsC,EAAsB7iD,QAAQG,YAD9J,oCASZ,cAAC,GAAD,IAnBD,cAAC,GAAD,IAfH,cAAC,IAAD,CAAU1X,MAAM,OAAOnW,UAAW,GAAIgW,cAAc,SAApD,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAfb,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUzV,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CAAY7V,MAAOsV,W,GAxNLjV,aA6fnBC,gBA9hBS,SAAAC,GACpB,MAAO,CACHoN,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDI,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B1X,YAAa7gB,EAAM2P,KAAKjC,KACxB+4D,kBAAmBzmE,EAAM2P,KAAKwqB,WAG9B2d,0CAA2C93C,EAAMmtC,yCAAyChkB,OAC1F4vB,mCAAoC/4C,EAAMmtC,yCAAyC4L,mCACnFhB,yCAA0C/3C,EAAMmtC,yCAAyC4K,yCACzFC,8CAA+Ch4C,EAAMmtC,yCAAyC6K,kDAK3E,SAAA93C,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAGjC+gB,2CAA4C,SAAC9qB,GAAD,OAASntB,EAAS2+C,GAAmDxxB,KACjHigB,uCAAwC,kBAAMptC,EAAS2+C,UAkgBhD9+C,CAA6CuvE,IAEtD15D,GAASxS,IAAWC,OAAO,CAC7B4sE,cAAe,CACX3wE,UAAW,GACXoW,aAAc,M,2FCjiBhBw6D,G,4JAEF,WACI,MAOIhyE,KAAKC,MANLiP,EADJ,EACIA,gBACA6oB,EAFJ,EAEIA,sBACArE,EAHJ,EAGIA,yBACAjkB,EAJJ,EAIIA,QAEA85D,EANJ,EAMIA,+BAGJ,OAAKxxC,EAKD,eAACyD,GAAA,EAAD,CACI/6B,WAAS,EADb,UAGI,cAACw9C,GAAA,EAAD,CACIj3C,UAAWyQ,YAAIxS,GAAaqB,YAC5BnF,MAAO,CACHqW,aAAc,GAHtB,sCAQA,eAACsgC,GAAA,EAAD,CACI7+B,OACkC,IAA9Bya,EAEKjkB,EAQGA,EAAQgkB,WANRvkB,EAEIA,EAAgBgmB,SAASmlC,kBAEzB5qD,EAAQsP,MAAMmW,SAASmlC,kBAI/B3mC,EAERhlB,KAAK,2BACL/M,OAAO,QACPiW,SAAU2xD,EACVxxB,MACI,cAACC,GAAA,EAAD,CACIomB,WAAY,EACZ1vD,KAAK,6BAtBjB,UA0BI,cAACupC,GAAA,EAAD,CACIh/B,M9G4GiB,E8G7GrB,qDAKQ/J,E9GwGa,I8GtGTA,EAAgBgmB,SAASmlC,kBAErB,aAEA,G9GkGK,I8GhGT5qD,EAAQsP,MAAMmW,SAASmlC,kBAEnB,aAEA,GAjBhB,yFAqBA,cAACpiB,GAAA,EAAD,CACIh/B,M9GsFqB,E8GvFzB,yDAKQ/J,E9GkFiB,I8GhFbA,EAAgBgmB,SAASmlC,kBAErB,aAEA,G9G4ES,I8G1Eb5qD,EAAQsP,MAAMmW,SAASmlC,kBAEnB,aAEA,GAjBhB,sKAqBA,cAACpiB,GAAA,EAAD,CACIh/B,M9GgEkB,E8GjEtB,sDAKQ/J,E9G4Dc,I8G1DVA,EAAgBgmB,SAASmlC,kBAErB,aAEA,G9GsDM,I8GpDV5qD,EAAQsP,MAAMmW,SAASmlC,kBAEnB,aAEA,GAjBhB,uFAnFD,S,GAbkBz4D,aA2HtBC,gBA3IS,SAAAC,GACpB,MAAO,CACHoN,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBAEnDrE,yBAA0B5xB,EAAM2nE,8BAA8B/1C,yBAC9DjkB,QAAS3N,EAAM2nE,8BAA8Bh6D,YAI1B,SAAAzN,GACvB,MAAO,CACHunE,+BAAgC,SAAC7uD,GAAD,OAAW1Y,EAAS0nE,GAA8DhvD,QA+H3G7Y,CAA6CmwE,ICzI/CC,GAA8B,8BAC9BC,GAA2B,WACpC,MAAO,CACHjwE,KAAMgwE,KAIDE,GAAmC,mCAQnCC,GAA4C,4CAQ5CC,GAA2C,2CAQ3CC,GAA6C,6CCf7CC,GAA6B,EAC7BC,GAAsC,EACtCC,GAAoC,EACpCC,GAAoC,EAwB3CC,G,4MAqOFC,wBAA0B,WACtB,IAII/9D,EAAM,GAEV,OAJI,EAAK5U,MADL4yE,cAMA,KAzQ6B,EA2Q7B,KAAKN,GACD,OAAO,KACX,KAAKC,GACD39D,EAAM,iCACN,MACJ,KAAK49D,GACD59D,EAAM,6BACN,MACJ,KAAK69D,GACD79D,EAAM,6BACN,MACJ,QACI,OAAO,KAGf,OACI,cAAC3T,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,YACRS,MAAM,QAHV,SAKKsT,K,4CAlQb,WAEI,MAkBI7U,KAAKC,MAjBLkC,EADJ,EACIA,aAEAwgB,EAHJ,EAGIA,YAEAlT,EALJ,EAKIA,QAEA+8D,EAPJ,EAOIA,mBACAl3C,EARJ,EAQIA,YACAw9C,EATJ,EASIA,WAGAZ,GAZJ,EAUIW,aAVJ,EAYIX,0BACAjgB,EAbJ,EAaIA,mBACA6c,EAdJ,EAcIA,kBACAiE,EAfJ,EAeIA,aAEGh9D,EAjBP,0MAoBA,OACI,eAACzV,EAAA,EAAD,yBACIC,IAAK4B,EACL8T,YAAU,EACVX,QAAS48D,EACT3kB,oBACIpmD,IAEA4O,GAPR,cASI,cAACrV,EAAA,EAAD,UACI,cAACsyE,GAAA,EAAD,CACI53C,UAAW,EADf,SAGI,eAAC63C,GAAA,EAAD,WACI,cAAC57D,EAAA,EAAD,CACI9V,MAAM,UACNG,QAASwwE,EACTr2C,aAAW,QAHf,SAKI,cAAC,KAAD,MAEJ,cAAC,IAAD,CACIl2B,WAAY,GADhB,SAGI,cAACzE,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UAFV,oCAUhB,cAACZ,EAAA,EAAD,UACI,cAACwV,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACHC,UAAW,IAHnB,SAMI,eAACiV,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAJ1B,UAQI,cAAC9d,GAAA,EAAD,CACI3b,UAAQ,EACRR,MAAM,eACNgY,MAAQxJ,EAAeA,EAAQgjB,YAAb,GAClBhyB,WAAS,EACTkB,OAAO,SACPb,QAAQ,aAIZ,cAACsc,GAAA,EAAD,CACI3b,UAAQ,EACRR,MAAM,kCACNgY,MAAQxJ,EAAeA,EAAQI,MAAM+9D,WAAnB,GAClBntE,WAAS,EACTkB,OAAO,SACPb,QAAQ,aAIZ,cAACsc,GAAA,EAAD,CACI3b,UAAQ,EACRR,MAAM,qCACNgY,MAAQxJ,EAAeA,EAAQI,MAAM08D,aAAnB,GAClB9rE,WAAS,EACTkB,OAAO,SACPb,QAAQ,aAIZ,cAACsc,GAAA,EAAD,CACI3b,UAAQ,EACRR,MAAM,uBACNgY,MAAQxJ,EAAeA,EAAQI,MAAMyoC,aAAnB,GAClB73C,WAAS,EACTkB,OAAO,SACPb,QAAQ,aAIZ,cAACsc,GAAA,EAAD,CACI3b,UAAQ,EACRR,MAAM,sBACNgY,MAAQxJ,EAAgBA,EAAQI,MAAM48D,mBAAqBh9D,EAAQI,MAAM48D,mBAAqB,OAA5E,GAClBhsE,WAAS,EACTkB,OAAO,SACPb,QAAQ,aAIZ,cAACsc,GAAA,EAAD,CACInc,MAAM,8BACNyN,KAAK,qBACLuK,MAAOuzD,EACP/rE,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACR8W,SAAUq6C,IAGd,cAAC,IAAD,CACI7wD,UAAW,GACXmW,MAAM,OAFV,SAII,cAAC,KAAD,CACIwiD,QAAM,EACNj5D,QAAQ,SACRk5D,aAAa,WACb/4D,MAAM,sBACNg5D,OAAO,aACPC,QAASj+C,GAAsC,GAC/ChD,MAAOqc,EACP8kC,oBAAqB,CAAChpD,SAAU,SAChCwG,SAAUk3D,MAKlB,cAAC1xD,GAAA,EAAD,CACInc,MAAM,mBACNgY,MAAO65D,EACPpkE,KAAK,aACLjO,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACR8W,SAAUq6C,OhH1CpB,IgH+CMtvC,EAAY1gB,KAER,KAEA,cAACsU,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACHC,UAAW,IANnB,SASI,cAAC,GAAD,MAIZ,eAACmV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACHC,UAAW,GACXoW,aAAc,IAPtB,UAUI,cAAC,IAAD,CACIJ,cAAc,SACdI,aAAc,GAFlB,SAKQxX,KAAK4yE,4BAGb,cAAC,IAAD,CACIr7D,MAAM,OACNH,cAAc,SAFlB,SAII,cAAC9V,EAAA,EAAD,CACIE,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UACNG,QAASqxE,EALb,+C,GA9MHnxE,aA0QlBC,gBAhSS,SAAAC,GACpB,MAAO,CACH6gB,YAAa7gB,EAAM2P,KAAKjC,KAExBhP,KAAMsB,EAAMoxE,yBAAyB1yE,KACrCiP,QAAS3N,EAAMoxE,yBAAyBzjE,QACxC+8D,mBAAoB1qE,EAAMoxE,yBAAyB1G,mBACnDl3C,YAAaxzB,EAAMoxE,yBAAyB59C,YAC5Cw9C,WAAYhxE,EAAMoxE,yBAAyBJ,WAC3CD,aAAc/wE,EAAMoxE,yBAAyBL,iBAI1B,SAAA7wE,GACvB,MAAO,CACHkwE,yBAA0B,kBAAMlwE,EAASmxE,OACzClhB,mBAAoB,SAACv3C,GAAD,OAAW1Y,EDrBL,SAAC0Y,GAC/B,MAAO,CACHzY,KAAMmwE,GACN13D,SCkBwCy4D,CAA4Cz4D,KACpFo0D,kBAAmB,SAACrkE,GAAD,OAAUzI,EDdJ,SAAAyI,GAC7B,MAAO,CACHxI,KAAMowE,GACN5nE,QCWsC0oE,CAA2C1oE,KACjFsoE,aAAc,kBAAM/wE,GDNjB,SAACA,EAAUwP,GACd,MAKIA,IAAW0hE,yBAJXzjE,EADJ,EACIA,QACA+8D,EAFJ,EAEIA,mBACAl3C,EAHJ,EAGIA,YACAw9C,EAJJ,EAIIA,WAIEp/C,EAA2BliB,IAAWi4D,8BAA8B/1C,yBAEpE/Q,EAAcnR,IAAWC,KAAKjC,KAGpC,GAAoB,OAAhB8lB,EACAtzB,EAAS,CACLC,KAAMqwE,GACN5iE,OAAQ8iE,SAET,CACH,GAAItkE,MAAMonB,IAELA,GAAgBA,EAAcrZ,GAAsC,GAMrE,YAJAja,EAAS,CACLC,KAAMqwE,GACN5iE,OAAQgjE,KAKhB,GAAIlG,EAAmBt/D,OAAOnC,OAAS,IAC/BkR,GAA+BuwD,GAMnC,YAJAxqE,EAAS,CACLC,KAAMqwE,GACN5iE,OAAQ+iE,KAKhBzwE,EAAS,CACLC,KAAMqwE,GACN5iE,OAAQ6iE,KAGZ,IAAMa,EAAkB,CACpB1jE,O/G+I6B,E+G9I7B88D,mBACyC,IAArCA,EAAmBt/D,OAAOnC,OAEtB,KAEAkR,GAA+BuwD,GAEvCl3C,YAAaA,EACbw9C,WAAyC,IAA7BA,EAAW5lE,OAAOnC,OAAe,KAAO+nE,GAGpDO,GAAiC,E/GsEtB,I+GhEX5jE,EAAQwU,OAAOhiB,MACZwN,EAAQN,eAAe,wB/GgEhB,I+G/DPwT,EAAY1gB,OAEfoxE,GAAiC,GAGrC,IAAI7gD,EAAwB9T,KAAKC,MAAMD,KAAKE,UAAUnP,IACtD+iB,EAAsBvO,OAAS,KAC/BuO,EAAsBzT,MAAQ,KAC9ByT,EAAsBnlB,QAAU,KAEhC,IAAIqgE,EAAiBhvD,KAAKC,MAAMD,KAAKE,UAAUnP,IAC/Ci+D,EAAezpD,OAAS,KACxBypD,EAAe3uD,MAAQ,KACvB2uD,EAAergE,QAAU,KAEzBqgE,EAAeh+D,O/GgDD,I+G7CViT,EAAY1gB,K/G0FsB,EADwB,E+GlF9DyrE,EAAe79D,MAAMH,O/GyFI,E+GxFzBg+D,EAAe35C,aAAeq/C,EAE9B1F,EAAej6C,YACmB,IAA9BC,EAAkClB,EAAsBiB,WAAaC,EAGzE10B,EACKgU,WACAzS,IAAIqO,IACJyE,MAAM5D,EAAQE,IACdqgB,OAAO09C,GACPthE,MAAK,WACFpK,EAAS,CACLC,KAAMgwE,KAIV96C,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,a/GxBM,E+GyBNC,yBAA0Bvc,GAC1Bwc,mBAAoB3b,EAAQE,GAC5B0b,gBhGkC4B,gCgGlC8Cpd,QAAQ,YAAay/D,EAAej7C,aAC9GnH,OAAQoH,GAAyCzkB,QAAQ,aAAcy/D,EAAe/9D,IACtFsJ,MAAO,CACH0Z,OAAQH,EACRI,MAAO86C,KAIf2F,GACAl8C,GACsB,CACdvK,MAAOnd,EAAQgjB,YACfthB,QAAS,6FACT8Z,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MAElF+E,OAAM,SAAAhI,kBCgJpB7K,CAA6CK,IAAMhC,YAC9D,SAACD,EAAOM,GAAR,OAAgB,cAAC,GAAD,2BAAwBN,GAAxB,IAA+BkC,aAAc5B,SC9TpD+yE,GAAmC,mCAiBnCC,GAAuC,uCACvCC,GAAgD,gDAuChDC,GAA0C,0CA2B1CC,GAAoC,oCAQpCC,GAA6C,6CAQ7CC,GAAqC,qCAoB9CC,GAAkB,KAETC,GAAuC,uC,iB5B1HxC3f,K,sEAAAA,E,yEAAAA,Q,KAaL,I6BPK4f,GC2CN/K,G,4JACF,WACI,MASIhpE,KAAKC,MARLy4C,EADJ,EACIA,4BACAj2B,EAFJ,EAEIA,oBACAmmD,EAHJ,EAGIA,UACAoL,EAJJ,EAIIA,gCACAC,EALJ,EAKIA,4BACAhL,EANJ,EAMIA,gBACAiL,EAPJ,EAOIA,yBACAC,EARJ,EAQIA,yBAGJ,IAAKvL,GAAkC,IAArBA,EAAU79D,OACxB,OAAO,KAGX,IAAK2tC,EAA4BiN,iBAC7B,OAAO,KAGX,IAAIC,EAAoBlN,EAA4BiN,iBAAiBC,kBAQjEwuB,GAPJxuB,EAAoBA,EACf/3C,MAAM,eACNi4C,KAAKrjC,EAAoB1D,MACpB0D,EAAoB1D,MAAMkQ,YAC1B,gBAGoCphB,MAAM,SAEpD,OAAO,eAACqpC,GAAA,EAAD,CACH91C,UAAU,OADP,UAGH,cAACqjC,GAAA,EAAD,UAEQmkC,EAAU/uD,KAAI,SAACvL,EAAUrB,GAAX,YACW6W,IAArBxV,EAASiG,SAAyBjG,EAASiG,QACrC,KACA,eAACmwB,GAAA,EAAD,CAEEC,QAAM,EACNjjC,QAAS,kBAAMunE,EAAgB36D,EAAD,OAAW0lE,QAAX,IAAWA,OAH3C,UAKE,qBACIl7C,IAAI,iBACJ3f,IAAK4f,EAAQ,KAA+BC,QAC5CzhB,MAAO,GACPa,OAAQ,KAEZ,eAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAIKzG,EAASm/B,WAEd,cAACvsC,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,OAHV,SAKKzG,EAASo/B,oBAzBbzgC,QAiCzB,eAAC3M,EAAA,EAAD,CACIE,KAAMyzE,EAA4BI,sBAClC/+D,QAAS,kBAAM6+D,KAFnB,UAII,cAACzzE,EAAA,EAAD,kCAGA,cAACC,EAAA,EAAD,UACI,cAACu2C,GAAA,EAAD,CACI91C,UAAU,OACV4kD,WAAW,WAFf,SAII,eAAC9kD,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,UAFV,UAIKq/D,EAAsB,GACvB,cAAC,GAAD,CACItlE,IAAKsQ,GAAOkC,oBACZnD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQnkC,MAAMqkC,KAC7D0E,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,WACVsuC,eACI4+B,EAAsB,KAG7BA,EAAsB,UAInC,cAAC/yE,EAAA,EAAD,UACI,eAAC61C,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdlgC,YAAY,MACZX,aAAa,MAJjB,UAMI,cAAClW,EAAA,EAAD,CACI0F,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMyyE,KAFnB,oBAMA,cAACj9B,GAAA,EAAD,CACI3/B,MAAM,SAEV,cAACjW,EAAA,EAAD,CACIC,MAAM,UACNT,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMwyE,KAJnB,mC,GAzHQtyE,aAwIjBC,gBAxJS,SAACC,GACrB,MAAO,CACH42C,4BAA6B52C,EAAM42C,4BACnCj2B,oBAAqB3gB,EAAM2gB,oBAC3BwxD,4BAA6BnyE,EAAMmyE,gCAIhB,SAACjyE,GACxB,MAAO,CACHinE,gBAAiB,SAAC36D,EAAyBgmE,GAA1B,OAA6DtyE,E9B9BnC,SAACsM,EAAyBgmE,GACzE,OAAO,SAACtyE,EAAoBwP,GACxB,GAAK8iE,EAQL,OAAOtyE,EAJ6B,CAChCC,KAAMkyD,GAAwBogB,sBAC9BC,iBAAkBlmE,IALlB8K,OAAO5Y,KAAK8N,EAASs/B,YAAa,W8B2BiDq7B,CAAgB36D,EAAUgmE,KACjHJ,yBAA0B,kBAAMlyE,G9BhB7B,SAACA,EAAoBwP,GACxB,IACIgjE,EACAhjE,IAAWyiE,4BADXO,iBAEJ,QAAyB1wD,IAArB0wD,EAIJ,OADAp7D,OAAO5Y,KAAKg0E,EAAiB5mC,YAAa,UACnC5rC,EAAS,CACZC,KAAMkyD,GAAwBsgB,6B8BQlCN,yBAA0B,kBAAMnyE,G9BF7B,SAACA,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAMkyD,GAAwBsgB,gC8B4I3B5yE,CAA6CmnE,K,SDnLhD+K,K,wEAAAA,E,wEAAAA,E,yFAAAA,Q,KAmBL,IElBKW,GFkBCC,GAAoD,SAACliD,EAAsBmiD,GACpF,OAAO,SAAC5yE,EAAoBwP,GAMxB,OAAOxP,EALmC,CACtCC,KAAM8xE,GAA8Bc,oBACpCpiD,YAAW,OAAEA,QAAF,IAAEA,IAAe,KAC5BmiD,kBAAiB,OAAEA,QAAF,IAAEA,IAAqB,SGlB9CtzC,GAA6C,CAC/C7O,YAAa,KACbmiD,kBAAmB,KACnBE,mBAAmB,EACnBC,qBAAqB,GAGZC,GAAwB,SAAClzE,GAClC,OAAOA,EAAMizE,qBAsCFE,GA/BwB,WAAkE,IAAjEnzE,EAAgE,uDAAxDw/B,GAAchW,EAA0C,uCACpG,OAAQA,EAAOrpB,MACX,KAAK8xE,GAA8Bc,oBAC/B,IAAMK,EAAuD5pD,EAC7D,OAAO,2BACAxpB,GADP,IAEIgzE,mBAAoBhzE,EAAMgzE,kBAC1BriD,YAAayiD,EAA0BziD,YACvCmiD,kBAAmBM,EAA0BN,oBAErD,KAAKb,GAA8BoB,oBAC/B,OAAO,2BACArzE,GADP,IAEIizE,qBAAqB,EACrBK,8BAA0BtxD,IAElC,KAAKiwD,GAA8BsB,4BAC/B,IAAMC,EAAyEhqD,EAC/E,OAAO,2BACAxpB,GADP,IAEIgzE,mBAAmB,EACnBC,qBAAqB,EACrBK,8BAAwEtxD,IAA9CwxD,EAAoC5oE,MACxD,CAACqe,OAAQuqD,EAAoC5oE,OAC7C5K,EAAMszE,2BAEpB,QACI,OAAOtzE,IC5BbyzE,G,4JACF,WACI,MAIIv1E,KAAKC,MAHLu1E,EADJ,EACIA,kCACAC,EAFJ,EAEIA,oBACAjpB,EAHJ,EAGIA,iBAGJ,OAAO,eAAClsD,EAAA,EAAD,CACHE,KAAMg1E,EAAkCV,kBACxCx/D,QAAS,kBAAMmgE,KAFZ,UAIH,cAAC90E,EAAA,EAAD,UACI,eAACu2C,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAAlC,UACI,cAACn3C,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oFACA,cAACmiC,GAAA,EAAD,CAAK9+B,OAAO,SACZ,cAAClX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oEAGR,eAAC1T,EAAA,EAAD,WAEQ2zE,GAAsBQ,GAChB,KACA,cAACl0E,EAAA,EAAD,CACEI,QAAS,kBAAM+zE,KACfzuE,UAAWyQ,YAAIxS,GAAakB,mBAF9B,oBAKV,cAAC7E,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,SAAUuzE,GAAsBQ,GAAoC9zE,QAAS,kBAAM8qD,KAA/K,SAEQwoB,GAAsBQ,GAAtB,2BAC0BA,EAAkCZ,kBAD5D,QAEM,kB,GAhCQhzE,aAwCvBC,gBArDS,SAACC,GACrB,MAAO,CACH0zE,kCAAmC1zE,EAAM0zE,sCAItB,SAACxzE,GACxB,MAAO,CACHyzE,oBAAqB,kBAAMzzE,EAAS2yE,OACpCnoB,iBAAkB,kBAAMxqD,EJe5B,yCAAO,WAAOA,EAAoBwP,GAA3B,0BAAA1F,EAAA,2DAKC0F,IAAWgkE,kCAHX/iD,EAFD,EAECA,YACAmiD,EAHD,EAGCA,mBAHD,EAICG,oBAJD,oDAWEtiD,GAAgBmiD,EAXlB,oDAgBCjyD,EACAnR,IAAWkR,oBADXC,YAhBD,wDAuBH3gB,EAAS,CACLC,KAAM8xE,GAA8BoB,sBAGlC1iC,EAAoD,CACtDxwC,KAAM8xE,GAA8BsB,6BA5BrC,UAgCOzhD,EAAwC,CAC1C64B,SAAUmoB,EACVloB,OAAQ/pC,EAAYqK,MACpB2/B,SAAS,GAAD,OAAMhqC,EAAqBuiB,UAA3B,YAAyCviB,EAAqBwiB,UACtE1S,YAAaA,GApClB,WAuCO,IAAIs4B,IAAkB8B,UAAU,CAClCl5B,UAAWqzB,GAAiB0uB,kBAC5B9hD,UAAWA,IAzChB,eA4CC5xB,EAASywC,GA5CV,kBA6CQzwC,EAASipD,GAAqBD,GAAsBK,QAAS,iBA7CrE,0CA+CC5Y,EAAe/lC,MAAQ,KAAMge,WAC7B1oB,EAASywC,GAhDV,kBAiDQzwC,EAASipD,GAAqBD,GAAsB7hC,MAAOspB,EAAe/lC,SAjDlF,2DAAP,6DI6BW7K,CAA6C0zE,ICoBtDI,GAAkC,IAClCC,GAAsC,IAwDtCC,G,kDAEF,WAAY51E,GAAQ,IAAD,8BACf,cAAMA,IA2PVmnC,SAAW,WACP,MAKI,EAAKnnC,MAJLuP,EADJ,EACIA,KACAysB,EAFJ,EAEIA,WAEAmwC,EAJJ,EAIIA,mCAGJ,EAGI,EAAKtqE,MAFLg0E,EADJ,EACIA,WACAC,EAFJ,EAEIA,gBAGJ,GAAK95C,EAIL,GAAKzsB,GACIsmE,GAkBT,IAAIC,EAAJ,CAIA,EAAK38C,SAAS,CACV08C,YAAY,EACZC,iBAAiB,IAIrB,IAAMpyD,EAAY,EAAK1jB,MAAM+K,MAAM6Y,OAAOF,UAC1CwT,GAC4BxT,GACvBvX,MAAK,SAAAqD,GvHrRW,IuHuRTD,EAAKvN,MACLk1B,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avHpUM,EuHqUNC,yBAA0Bvc,GAC1Bwc,mBAAoB3b,EAAQE,GAC5B0b,gBxG/PoC,0BwG+P8Cpd,QAAQ,YAAawB,EAAQgjB,aAC/GnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MAK3Fy8D,EAAmC38D,GAEnC,EAAK2pB,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAET9jC,QAASA,EACTumE,eAAe,IAEnBC,SvH1SM,IuH2SFzmE,EAAKvN,MAEDuN,EAAKud,OAAStd,EAAQsd,KAzYb,EACV,EAgZPmpD,2BvH5QwB,IuH6QpBzmE,EAAQC,OAtZS,EvH0IC,IuHgRbD,EAAQC,QvH/QmC,IuH+QeD,EAAQC,OAzZrD,EvH2IgC,IuHkRzCD,EAAQC,QvHjRS,IuHiRyED,EAAQC,OA5ZzF,EAFD,IAsazBynB,GACe1nB,EAAQE,GAAI,KAAMwnB,IAC5B/qB,MAAK,SAAA2mB,GAEF,EAAKqG,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETxgB,MAAOA,EACPojD,aAAa,MAKrBh/C,GACiB1nB,EAAQE,GAAI,KAAMwnB,IAC9B/qB,MAAK,SAAAiB,GAGF,GvH1VH,IuH0VOmC,EAAKvN,KAAiC,CACtC,IAAIm0E,EAAyB/oE,EAAQpC,WAAU,SAAAsC,GAAM,OAAIA,EAAO2lB,aAAe1jB,EAAKG,IAAwB,KAAlBpC,EAAOC,WAEjE,IAA5B4oE,GACA,EAAKh9C,SAAS,CACVi9C,eAAgBhpE,EAAQ+oE,KAKpC,EAAKh9C,SAAS,CACV08C,YAAY,EACZC,iBAAiB,EACjBO,sBAAsB,EACtB/iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETlmC,QAASA,EACTkpE,eAAe,MAQvBp/C,GACsB1nB,EAAQG,UACzBxD,MAAK,SAAAoqE,GACF,EAAKp9C,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETijC,cAAeA,EACfC,qBAAqB,SAIhC/hE,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV08C,YAAY,EACZC,iBAAiB,EACjBO,sBAAsB,EACtB/iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETyiC,eAAe,EACfS,qBAAqB,EACrBN,aAAa,EACbI,eAAe,YAKlC7hE,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV08C,YAAY,EACZC,iBAAiB,EACjBO,sBAAsB,EACtB/iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETyiC,eAAe,EACfS,qBAAqB,EACrBN,aAAa,EACbI,eAAe,YAKlC7hE,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV08C,YAAY,EACZC,iBAAiB,EACjBO,sBAAsB,EACtB/iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETyiC,eAAe,EACfS,qBAAqB,EACrBN,aAAa,EACbI,eAAe,YAKlC7hE,OAAM,SAAAhI,GAGH,EAAK0sB,SAAS,CACV08C,YAAY,EACZC,iBAAiB,EACjBO,sBAAsB,EACtB/iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETyiC,eAAe,EACfS,qBAAqB,EACrBN,aAAa,EACbI,eAAe,eAhMvB,EAAKn9C,SAAS,CACV08C,YAAY,EACZC,iBAAiB,EACjBO,sBAAsB,EACtB/iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETyiC,eAAe,EACfS,qBAAqB,EACrBN,aAAa,EACbI,eAAe,OAxRhB,EAwdnBG,6BAA+B,WAC3B,MAII,EAAKz2E,MAHLuP,EADJ,EACIA,KAEAmnE,EAHJ,EAGIA,wBAGJ,EAGI,EAAK70E,MAFLm0E,EADJ,EACIA,SACAW,EAFJ,EAEIA,eAGJ,EASI,EAAK90E,MAAMyxC,cARX9jC,EADJ,EACIA,QACAumE,EAFJ,EAEIA,cAEA3oE,EAJJ,EAIIA,QACAkpE,EALJ,EAKIA,cAEAxjD,EAPJ,EAOIA,MACAojD,EARJ,EAQIA,YAIApjD,GAASojD,GAAe1mE,GAAWumE,GvH5aL,IuH8a1BvmE,EAAQC,SACH,EAAKmnE,gBACN,EAAKA,cAAgB,EAAK7jE,SACrBzS,IAAIqO,IACJid,aAAa,aACbC,QAAQrc,EAAQE,IAGrB,EAAKknE,cACAjjE,GAAG,eAAe,SAAAC,GACf,IAAIof,EAAOpf,EAASsY,MAEd4G,EAAQ,EAAKjxB,MAAMyxC,cAAcxgB,OAEpB,IADHA,EAAM9nB,WAAU,SAAA6rE,GAAY,OAAIA,EAAannE,KAAOsjB,EAAKtjB,OAErEwnB,GACsBlE,EAAKC,YACtB9mB,MAAK,SAAAioB,GACFpB,EAAKoB,SAAWA,EAChB,EAAK+E,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETxgB,MAAM,GAAD,oBAAMA,GAAN,CAAaE,cAQ9C,EAAK4jD,cACAjjE,GAAG,iBAAiB,SAAAC,GACjB,IAAIof,EAAOpf,EAASsY,MAEd4G,EAAQ,EAAKjxB,MAAMyxC,cAAcxgB,MACnCgkD,EAAYhkD,EAAM9nB,WAAU,SAAA6rE,GAAY,OAAIA,EAAannE,KAAOsjB,EAAKtjB,MAEzE,IAAmB,IAAfonE,EAAkB,CAClB,IAAIC,EAAejkD,EAEnBE,EAAKoB,SAAW2iD,EAAaD,GAAW1iD,SACxC2iD,EAAaD,GAAa9jD,EAE1B,EAAKmG,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETxgB,MAAOikD,UAO3B,EAAKH,cACAjjE,GAAG,iBAAiB,SAAAC,GACjB,IAAIojE,EAAgBpjE,EAAS2W,IAEvBuI,EAAQ,EAAKjxB,MAAMyxC,cAAcxgB,MACnCgkD,EAAYhkD,EAAM9nB,WAAU,SAAA6rE,GAAY,OAAIA,EAAannE,KAAOsnE,KAEpE,IAAmB,IAAfF,EAAkB,CAClB,IAAIC,EAAejkD,EACnBikD,EAAa3iE,OAAO0iE,EAAW,GAE/B,EAAK39C,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETxgB,MAAOikD,YAUnC3pE,GAAWkpE,GAAiBP,GAAiBvmE,GvH5fb,IuH8f5BA,EAAQC,QvHxfa,IuHyflBD,EAAQC,QvH9fe,IuH+fvBD,EAAQC,SAEN,EAAKmkE,kBACN,EAAKA,gBAAkB,EAAK7gE,SACvBzS,IAAIqO,IACJid,aAAa,aACbC,QAAQrc,EAAQE,IAGrB,EAAKkkE,gBACAjgE,GAAG,eAAe,SAAAC,GACf,IAAItG,EAASsG,EAASsY,MAElB9e,EAAO,aAAO,EAAKvL,MAAMyxC,cAAclmC,UAEtB,IADHA,EAAQpC,WAAU,SAAAisE,GAAc,OAAIA,EAAevnE,KAAOpC,EAAOoC,OAE/EwnB,GACsB5pB,EAAO2lB,YACxB9mB,MAAK,SAAAioB,GACF9mB,EAAO8mB,SAAWA,EAClB,EAAK+E,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETlmC,QAAQ,GAAD,oBAAMA,GAAN,CAAeE,cAQlD,EAAKsmE,gBACAjgE,GAAG,iBAAiB,SAAAC,GACjB,IAAItG,EAASsG,EAASsY,MAElB9e,EAAO,aAAO,EAAKvL,MAAMyxC,cAAclmC,SACvC8pE,EAAc9pE,EAAQpC,WAAU,SAAAisE,GAAc,OAAIA,EAAevnE,KAAOpC,EAAOoC,MAEnF,IAAqB,IAAjBwnE,EAAoB,CACpB,IAAIC,EAAiB/pE,EAErBE,EAAO8mB,SAAW+iD,EAAeD,GAAa9iD,SAC9C+iD,EAAeD,GAAe5pE,EAE9B,IAAM8pE,EAAgB34D,KAAKC,MAAMD,KAAKE,UAAU,EAAK9c,MAAMu0E,iBAE3D,EAAKj9C,SAAS,CACVi9C,eAEsB,OAAlBgB,EAEIA,EAAc1nE,KAAOpC,EAAOoC,GAEN,KAAlBpC,EAAOC,OAEH,KAEAkR,KAAKC,MAAMD,KAAKE,UAAUrR,IAE9B8pE,EAGJ9pE,EAAO2lB,aAAe1jB,EAAKG,GAEL,KAAlBpC,EAAOC,OAEH,KAEAkR,KAAKC,MAAMD,KAAKE,UAAUrR,IAE9B,KAEZgmC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETlmC,QAAS+pE,UAO7B,EAAKvD,gBACAjgE,GAAG,iBAAiB,SAAAC,GACjB,IAAIyjE,EAAkBzjE,EAAS2W,IAE3Bnd,EAAO,aAAO,EAAKvL,MAAMyxC,cAAclmC,SACvC8pE,EAAc9pE,EAAQpC,WAAU,SAAAisE,GAAc,OAAIA,EAAevnE,KAAO2nE,KAE5E,IAAqB,IAAjBH,EAAoB,CACpB,IAAIC,EAAiB/pE,EACrB+pE,EAAe/iE,OAAO8iE,EAAa,GAEnC,IAAME,EAAgB,EAAKv1E,MAAMu0E,eAC5BgB,GAAiBA,EAAc1nE,KAAO2nE,EASvC,EAAKl+C,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETlmC,QAAS+pE,MAXjB,EAAKh+C,SAAS,CACVi9C,eAAgB,KAChB9iC,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAETlmC,QAAS+pE,YAluBjB,IAovBxBnB,GACIxmE,GACAknE,EAAwBlnE,GAxvBb,IA6vBfwmE,IAEKW,GAEDz/C,GACkB1nB,EAAQE,IACrBvD,MAAK,SAAAmrE,GxG4jDS,IAAAtjD,KwGzjDcsjD,ExG0jDtC,IAAIvrE,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WAEhBwkE,EAAe,aAAOvjD,GAE1BjoB,QAAQqgB,IACJmrD,EAAgB39D,KAAI,SAAAqa,GAChB,OAAO,IAAIloB,SAAQ,SAACC,EAASC,GACzB,IAAIolB,EAAU,GAEdzE,EACKtsB,IAAIqO,IACJid,aAAa,aACbC,QAAQoI,EAAQvkB,IAChBqc,KAAK,SAAS,SAAAC,GACX,IAAKA,IACGA,EAAUC,UACVD,KAAeA,EAAUE,OAAqC,IAA5BF,EAAUG,eAGhD,OADA8H,EAAQ5C,QAAUA,EACXrlB,EAAQurE,GAGnBvrD,EAAUrf,SAAQ,SAAAiH,GACd,IAAM0d,EAAQ1d,EAASsY,MACnBoF,EAAMpiB,eAAe,aAAgC,IAAlBoiB,EAAM3B,SAGzC0B,EAAQxkB,KAAK+G,EAASsY,UAI9BngB,QAAQqgB,IACJiF,EAAQzX,KAAI,SAAA0X,GACR,OAAO,IAAIvlB,SAAQ,SAACC,EAASC,GACzBqgB,GAAiBgF,EAAMkmD,WAClBrrE,MAAK,SAAAoD,GAEF,OADA+hB,EAAM1B,OAASrgB,EACRvD,EAAQqlB,MAElB5c,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WAEH,OADA8nB,EAAQ5C,QAAUA,EACXrlB,EAAQurE,MAChB9iE,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,SAGrBgI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,aAIhCN,MAAK,WACH,OAAOH,EAAQurE,MAChB9iE,OAAM,SAAAhI,GACL,OAAOR,EAAOQ,UwGrnDGN,MAAK,SAAAsrE,GAEF,EAAKt+C,SAAS,CACVnF,SAAS,aAAKyjD,GACdd,gBAAgB,IAIf,EAAKe,mBACN,EAAKA,iBAAmB,EAAK3kE,SACxBzS,IAAIqO,IACJid,aAAa,aACbC,QAAQrc,EAAQE,IAGrB,EAAKgoE,iBACA/jE,GAAG,eAAe,SAAAC,GACf,IAAIqgB,EAAUrgB,EAASsY,OACvB+H,EAAQ5C,QAAU,GAGd4C,EAAQC,cAAgB3kB,EAAKG,MACN,EAAK7N,MAAM81E,eAE9B,EAAKx+C,SAAS,CACVy+C,eAAgB3jD,EAChB4jD,mBAAoB5jD,EAAQA,WAKxC,IAAID,EAAQ,aAAO,EAAKnyB,MAAMmyB,WAGR,IAFHA,EAAShpB,WAAU,SAAA8sE,GAAe,OAAIA,EAAgBpoE,KAAOukB,EAAQvkB,OAGpFwnB,GACsBjD,EAAQC,aACzB/nB,MAAK,SAAAoD,GACF0kB,EAAQrE,OAASrgB,EACjB,EAAK4pB,SAAS,CACVnF,SAAS,GAAD,oBAAMA,GAAN,CAAgBC,YAOhD,EAAKyjD,iBACA/jE,GAAG,iBAAiB,SAAAC,GACjB,IAAIqgB,EAAUrgB,EAASsY,MAEnB8H,EAAQ,aAAO,EAAKnyB,MAAMmyB,UAC1B+jD,EAAe/jD,EAAShpB,WAAU,SAAA8sE,GAAe,OAAIA,EAAgBpoE,KAAOukB,EAAQvkB,MAExF,IAAsB,IAAlBqoE,EAAqB,CACrB,IAAIR,EAAe,aAAOvjD,GAC1BC,EAAQrE,OAAS2nD,EAAgBQ,GAAcnoD,OAC/CqE,EAAQ5C,QAAUkmD,EAAgBQ,GAAc1mD,QAEhDkmD,EAAgBQ,GAAgB9jD,EAGhC,IAAM2jD,EAAiB,EAAK/1E,MAAM+1E,eAE9BA,GAAkBA,EAAeloE,KAAOukB,EAAQvkB,GAChD,EAAKypB,SAAS,CACVnF,SAAUujD,EACVK,eAAgB3jD,IAGpB,EAAKkF,SAAS,CACVnF,SAAS,aAAKujD,UAQjC,EAAKS,0BACN,EAAKA,wBAA0B,EAAKjlE,SAC/BzS,IAAIqO,IACJid,aAAa,aACbC,QAAQrc,EAAQE,IAErB,EAAKsoE,wBACArkE,GAAG,eAAe,SAAAC,GACf,IAAI0d,EAAQ1d,EAASsY,MAEjB8H,EAAQ,aAAO,EAAKnyB,MAAMmyB,UAExBikD,EAA4BjkD,EAAShpB,WAAU,SAAAipB,GAAO,OAAIA,EAAQvkB,KAAO4hB,EAAM4mD,aAGrF,IAAmC,IAA/BD,EAAkC,CAClC,IAAIhkD,EAAUD,EAASikD,GAIvB,IAAoB,IAHDhkD,EAAQ5C,QAAQrmB,WAAU,SAAAmtE,GAAa,OAAIA,EAAczoE,KAAO4hB,EAAM5hB,MAGlE,CACnB,GAAI4hB,EAAMpiB,eAAe,aAAgC,IAAlBoiB,EAAM3B,QACzC,OAEJuH,GACsB5F,EAAMkmD,WACvBrrE,MAAK,SAAAoD,GACF+hB,EAAM1B,OAASrgB,EACf0kB,EAAQ5C,QAAR,uBAAsB4C,EAAQ5C,SAA9B,CAAuCC,IAEvC0C,EAASikD,GAA6BhkD,EAEtC,EAAKkF,SAAS,CACVnF,SAAS,aAAKA,aAO1C,EAAKgkD,wBACArkE,GAAG,iBAAiB,SAAAC,GACjB,IAAI0d,EAAQ1d,EAASsY,MAEjB8H,EAAQ,aAAO,EAAKnyB,MAAMmyB,UAExBikD,EAA4BjkD,EAAShpB,WAAU,SAAAipB,GAAO,OAAIA,EAAQvkB,KAAO4hB,EAAM4mD,aAGrF,IAAmC,IAA/BD,EAAkC,CAClC,IAAIhkD,EAAUD,EAASikD,GACjBG,EAAankD,EAAQ5C,QAAQrmB,WAAU,SAAAmtE,GAAa,OAAIA,EAAczoE,KAAO4hB,EAAM5hB,OAGrE,IAAhB0oE,IAEI9mD,EAAMpiB,eAAe,aAAgC,IAAlBoiB,EAAM3B,SAEzCsE,EAAQ5C,QAAQjd,OAAOgkE,EAAY,GAEnCpkD,EAASikD,GAA6BhkD,EAEtC,EAAKkF,SAAS,CACVnF,SAAS,aAAKA,MAKlBkD,GACsB5F,EAAMkmD,WACvBrrE,MAAK,SAAAoD,GACF+hB,EAAM1B,OAASqE,EAAQ5C,QAAQ+mD,GAAYxoD,OAC3CqE,EAAQ5C,QAAQ+mD,GAAc9mD,EAE9B0C,EAASikD,GAA6BhkD,EAEtC,EAAKkF,SAAS,CACVnF,SAAS,aAAKA,iBASrDvf,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACVw9C,gBAAgB,UAI/BliE,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACVw9C,gBAAgB,SAr3BrB,EAi4BnB0B,gBAAkB,SAAAC,GACd,MAGI,EAAKt4E,MAFLiP,EADJ,EACIA,gBACAM,EAFJ,EAEIA,KAGJ,EAGI,EAAK1N,MAAMyxC,cAFX9jC,EADJ,EACIA,QACAsjB,EAFJ,EAEIA,MAGAylD,EAAiBC,GAAgB1lD,EAAOvjB,GACxCgpE,IACAA,EAAenkD,SAAW,MAG9B,IAAIqkD,EAAa,GAIjB,GAAIF,EAKyB,MAHzBE,EAAah6D,KAAKC,MAAMD,KAAKE,UAAU45D,KAGxBjkD,MACXmkD,EAAWnkD,MAAQgkD,EAInBG,EAAWnkD,MAAQ,GAIvBmkD,EAAWjuE,KAAOwR,KAElB,EAAKjJ,SACAzS,IAAIqO,IACJyE,MAAMqlE,EAAW/oE,IACjBqgB,OAAO0oD,GACPtsE,MAAK,WAEF+qB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avH77BM,EuH87BNC,yBAA0Bvc,GAC1Bwc,mBAAoBstD,EAAW/oE,GAC/B0b,gBxGx3BqC,mCwG03BhCpd,QAAQ,YAAawB,EAAQgjB,aAElCnH,OAAQoH,GAEHzkB,QAAQ,aAAcwB,EAAQE,IAEnCsJ,MAAO,CACH0Z,OAAQ6lD,EACR5lD,MAAO8lD,YAM1B,CACD,IAAM/oE,EAAK,EAAKqD,SACXzS,IAAIqO,IACJ9B,OACA0d,IAELkuD,EAAW/oE,GAAKA,EAChB+oE,EAAW3rD,KAAO7d,EAAkBA,EAAgB6d,KAAO,KAC3D2rD,EAAWxlD,WAAa1jB,EAAKG,GAC7B+oE,EAAW/0D,UAAYlU,EAAQE,GAC/B+oE,EAAWnkD,MAAQgkD,EACnBG,EAAWjuE,KAAOwR,KAElB,EAAKjJ,SACAzS,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAIkkE,GACJtsE,MAAK,WAEF+qB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avHt+BM,EuHu+BNC,yBAA0Bvc,GAC1Bwc,mBAAoBzb,EACpB0b,gBxGl6BqC,mCwGo6BhCpd,QAAQ,YAAawB,EAAQgjB,aAElCnH,OAAQoH,GAEHzkB,QAAQ,aAAcwB,EAAQE,IAEnCsJ,MAAOy/D,IAIfvhD,GACsB,CACdvK,MAAO,2BACPzb,QAAS,qEACT8Z,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAEHzkB,QAAQ,aAAcwB,EAAQE,MAEtCvD,MAAK,eAGLsI,OAAM,SAAAhI,YAl/BR,EA6/BnBisE,6BAA+B,WAE3B,IACIlpE,EACA,EAAK3N,MAAMyxC,cADX9jC,QAGyB,OAAzB,EAAKmpE,kBACL,EAAKA,gBAAkB,EAAK5lE,SACvBzS,IAAIqO,IACJyE,MAAM5D,EAAQE,IAEnB,EAAKipE,gBACAhlE,GAAG,SAAS,SAAAC,GACT,IAAMpE,EAAUoE,EAASsY,MACzB1c,EAAQsP,MAAQ,EAAKjd,MAAMyxC,cAAc9jC,QAAQsP,MACjDtP,EAAQwU,OAAS,EAAKniB,MAAMyxC,cAAc9jC,QAAQwU,OAElD,EAAKmV,SAAS,CACVma,cAAc,2BACP,EAAKzxC,MAAMyxC,eADL,IAET9jC,QAASA,IAEbymE,2BvHh9BoB,IuHi9BhBzmE,EAAQC,OA1lCK,EvH0IC,IuHo9BVD,EAAQC,QvHn9BgC,IuHo9BrCD,EAAQC,OA9lCD,EvH2IgC,IuHu9BtCD,EAAQC,QvHt9BM,IuHu9BXD,EAAQC,OAlmCL,EAFD,SAsElB,EA2iCnBmpE,6BAA+B,WACvB,EAAKD,iBACL,EAAKA,gBAAgB53C,IAAI,UA7iCd,EAsjCnB83C,oBAAsB,SAAAlrC,GAClBx0B,OAAO5Y,KAAKotC,EAAa,WAvjCV,EA+jCnBmrC,gCAAkC,SAAAvlD,GAC9B,IACIhkB,EACA,EAAKvP,MADLuP,KAGAC,EACA,EAAK3N,MAAMyxC,cADX9jC,QAGJ0nB,GAC+B3nB,EAAMkP,KAAKC,MAAMD,KAAKE,UAAUnP,IAAW+jB,GACrEpnB,MAAK,eAGLsI,OAAM,SAAAhI,QA5kCI,EAslCnBssE,yCAA2C,SAAAxlD,GACvC,IACIhkB,EACA,EAAKvP,MADLuP,KAGAC,EACA,EAAK3N,MAAMyxC,cADX9jC,QvH/gCyB,IuHkhCzBA,EAAQI,MAAMH,QvH3gCoB,IuH4gC/BD,EAAQI,MAAMH,QAKrBynB,GACwC3nB,EAAMkP,KAAKC,MAAMD,KAAKE,UAAUnP,IAAW+jB,GAC9EpnB,MAAK,eAGLsI,OAAM,SAAAhI,QAzmCI,EAmnCnBusE,sCAAwC,SAAAzlD,GACpC,IACIhkB,EACA,EAAKvP,MADLuP,KAGAC,EACA,EAAK3N,MAAMyxC,cADX9jC,QAGJ0nB,GACqC3nB,EAAMkP,KAAKC,MAAMD,KAAKE,UAAUnP,IAAW+jB,GAC3EpnB,MAAK,eAGLsI,OAAM,SAAAhI,QAhoCI,EA2oCnBwsE,yBAA2B,SAACx+D,EAAOzB,GAC/B,EAAKmgB,SAAS,CACV68C,SAAUh9D,KA7oCC,EAopCnBkgE,wBAA0B,WACtB,EAAK//C,SAAS,CACVggD,mBAAmB,KAtpCR,EA6pCnBC,yBAA2B,WACvB,EAAKjgD,SAAS,CACVggD,mBAAmB,EACnBE,YAAa,GACbC,oBAAoB,KAjqCT,EA0qCnB7iD,kBAAoB,SAAAhc,GAChB,IAAMhM,EAAOgM,EAAMyD,OAAOzP,KACpBuK,EAAQyB,EAAMyD,OAAOlF,MAE3B,EAAKmgB,SAAS,CACV,CAAC1qB,GAAOuK,KA/qCG,EAwrCnB61D,kBAAoB,SAAArkE,GACZA,GAAiB,iBAATA,EACR,EAAK2uB,SAAS,CACVogD,uBAAwB7e,MAKhC,EAAKvhC,SAAS,CACVogD,uBACK/uE,EAIGA,EAAKX,UAFL,QApsCG,EA6sCnB2vE,yBAA2B,WACvB,MAKI,EAAKx5E,MAJLiP,EADJ,EACIA,gBACAM,EAFJ,EAEIA,KAEA0B,EAJJ,EAIIA,2BAIAooE,EACA,EAAKx3E,MADLw3E,YAIA7pE,EACA,EAAK3N,MAAMyxC,cADX9jC,QAOJ,GAJA,EAAK2pB,SAAS,CACVmgD,oBAAoB,IAGU,IAA9BD,EAAYpsE,OAAOnC,OAAvB,CAIA,IAAM4E,EAAK,EAAKqD,SACXzS,IAAIqO,IACJ9B,OACA0d,IAEC0J,EAAU,CACZvkB,KACA+pE,cAAexqE,EAAkBA,EAAgB6d,KAAO,KACxDpJ,UAAWlU,EAAQE,GACnBwkB,YAAa3kB,EAAKG,GAClBD,OvH7oCyB,EuH8oCzBiqE,cAAe19D,KACfiY,QAASolD,GAGb,EAAKtmE,SACAzS,IAAIqO,IACJyE,MAAM1D,GACN6E,IAAI0f,GACJ9nB,MAAK,WAEF+qB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avH5wCU,EuH6wCVC,yBAA0Bvc,GAC1Bwc,mBAAoBzb,EACpB0b,gBxGtsCsC,gCwGssC0Cpd,QAAQ,YAAawB,EAAQgjB,aAC7GnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,IAC/EsJ,MAAOib,IAIfiD,GACsB,CACdvK,MAAO,kCACPzb,QAAS,sEACT8Z,OAAQxb,EAAQG,SAChB0b,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,MAElFvD,MAAK,WACF,EAAKitE,8BAER3kE,OAAM,SAAAhI,GACH,EAAK2sE,8BAGbnoE,EACI,iBACA,UACA,aAGPwD,OAAM,SAAAhI,GACH,EAAK2sE,2BAELnoE,EACI,yCACA,QACA,eAhyCG,EAwyCnB0oE,iCAAmC,WAC/B,IACI/B,EACA,EAAK/1E,MADL+1E,eAGJ,EAAKz+C,SAAS,CACV0+C,mBAAqBD,EAAe3jD,QAAe2jD,EAAe3jD,QAApB,MA9yCnC,EAqzCnB2lD,iCAAmC,WAC/B,MAGI,EAAK/3E,MAFL+1E,EADJ,EACIA,eACAC,EAFJ,EAEIA,mBAIAroE,EACA,EAAK3N,MAAMyxC,cADX9jC,QAIAyB,EACA,EAAKjR,MADLiR,2BAGJ,GAAyC,IAArC4mE,EAAmB5qE,OAAOnC,OAA9B,CAIA,IAAI+uE,EAAap7D,KAAKC,MAAMD,KAAKE,UAAUi5D,IAC3CiC,EAAWpqE,OvHruCkB,EuHsuC7BoqE,EAAW5lD,QAAU4jD,EACrBgC,EAAWH,cAAgB19D,KAC3B69D,EAAWxoD,QAAU,KACrBwoD,EAAWjqD,OAAS,KAEpB,EAAK7c,SACAzS,IAAIqO,IACJyE,MAAMymE,EAAWnqE,IACjBqgB,OAAO8pD,GACP1tE,MAAK,WAEF+qB,GACmB,CACXlM,OAAQ4sD,EAAe1jD,YACvBjJ,avHt2CU,EuHu2CVC,yBAA0Bvc,GAC1Bwc,mBAAoBysD,EAAeloE,GACnC0b,gBxG/xC2C,qCwG+xC0Cpd,QAAQ,YAAawB,EAAQgjB,aAClHnH,OAAQoH,GAAyCzkB,QAAQ,aAAcwB,EAAQE,IAC/EsJ,MAAO,CACH0Z,OAAQjU,KAAKC,MAAMD,KAAKE,UAAUi5D,IAClCjlD,MAAOknD,KAInB5oE,EACI,mBACA,UACA,eAr2CG,EAg3CnB6oE,2BAA6B,SAAC7lD,EAAS8lD,GACnC,EAAK5gD,SAAS,CACV6gD,kBAAmB/lD,EACnBgmD,UAAWF,EAAcA,EAAY/oC,KAAO,GAC5C+oC,iBAp3CW,EA23CnBG,yBAA2B,WACvB,IxGy+B0BC,EwGz+B1B,EAII,EAAKt4E,MAHLm4E,EADJ,EACIA,kBACAC,EAFJ,EAEIA,UACAF,EAHJ,EAGIA,YAIAvqE,EACA,EAAK3N,MAAMyxC,cADX9jC,QAGJ,EAGI,EAAKxP,MAFLuP,EADJ,EACIA,KACA0B,EAFJ,EAEIA,2BAGJ,GAAK8oE,EAmDE,CACH,IAAIK,EAAsB37D,KAAKC,MAAMD,KAAKE,UAAUo7D,IACpDK,EAAoBxqD,OAAS,KAE7B,IAAIyqD,EAAqB57D,KAAKC,MAAMD,KAAKE,UAAUy7D,IACnDC,EAAmBrpC,KAAOipC,EAC1BI,EAAmB5qE,OvHt1CY,EuHu1C/B4qE,EAAmBC,YAAct+D,MxGg6BXm+D,EwG75BEE,ExG85BzB,IAAItuE,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAM+mE,EAAoBzqE,IAC1BqgB,OAAOoqD,GACPhuE,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UwGv6BbN,MAAK,WAEF+qB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avH79CM,EuH89CNC,yBAA0Bvc,GAC1Bwc,mBAAoBkvD,EAAmB3qE,GACvC0b,gBxG/3CyC,sDwGi4CpCpd,QAAQ,gBAAiBwB,EAAQgjB,aAEtCnH,OAAQoH,GAEHzkB,QAAQ,aAAcwB,EAAQE,IAEnCsJ,MAAO,CACH0Z,OAAQ0nD,EACRznD,MAAO0nD,KAKnB,EAAKP,2BAA2B,KAAM,MAEtC7oE,EACI,iBACA,UACA,aAGPwD,OAAM,SAAAhI,GAEHwE,EACI,0CACA,QACA,iBAlGE,CACd,IAAMspE,EAAe,CACjBvpC,KAAMipC,EACNK,YAAat+D,KACb0H,UAAWlU,EAAQE,GACnBwoE,UAAW8B,EAAkBtqE,GAC7B8nE,UAAWjoE,EAAKG,GAChBD,OvHryC2B,IeinEX,SAAA8qE,GAC5B,OAAO,IAAIxuE,SAAQ,SAACC,EAASC,GACzB,IAAM2gB,EAAK7tB,EAASgU,WAEd+d,EAAUlE,EACXtsB,IAAIqO,IACJ9B,OACA0d,IAELqC,EACKtsB,IAAIqO,IACJyE,MAAM0d,GACNvc,IAHL,2BAIWgmE,GAJX,IAKQ7qE,GAAIohB,KAEP3kB,MAAK,WACF,OAAOH,EAAQ8kB,MAElBrc,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UwG71BlByqB,CACsBqjD,GACjBpuE,MAAK,SAAA2kB,GAEFoG,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avH36CM,EuH46CNC,yBAA0Bvc,GAC1Bwc,mBAAoB2F,EACpB1F,gBxG/0CkC,+CwGi1C7Bpd,QAAQ,gBAAiBwB,EAAQgjB,aAEtCnH,OAAQoH,GAEHzkB,QAAQ,aAAcwB,EAAQE,IAEnCsJ,MAAM,2BACCuhE,GADF,IAED7qE,GAAIohB,MAKhB,EAAKgpD,2BAA2B,KAAM,MAEtC7oE,EACI,eACA,UACA,aAGPwD,OAAM,SAAAhI,GAEHwE,EACI,uCACA,QACA,eA37CD,EAw/CnBupE,yBAA2B,SAAAlpD,GAEvB,IxGi1B0BmpD,EwGj1B1B,EAGI,EAAKz6E,MAFLuP,EADJ,EACIA,KACA0B,EAFJ,EAEIA,2BAIAzB,EACA,EAAK3N,MAAMyxC,cADX9jC,SxG20BsBirE,EwGv0BFnpD,EAAM5hB,GxGw0B3B,IAAI3D,SAAQ,SAACC,EAASC,GACdlN,EAASgU,WAEfzS,IAAIqO,IACJyE,MAAMqnE,GACNrnE,MAAM,WACNmB,KAAI,GACJpI,MAAK,WACF,OAAOH,OAEVyI,OAAM,SAAAhI,GACH,OAAOR,EAAOQ,UwGl1BjBN,MAAK,WAEF+qB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,avHzhDU,EuH0hDVC,yBAA0Bvc,GAC1Bwc,mBAAoBmG,EAAM5hB,GAC1B0b,gBxG57C8C,uDwG87CzCpd,QAAQ,gBAAiBwB,EAAQgjB,aAEtCnH,OAAQoH,GAEHzkB,QAAQ,aAAcwB,EAAQE,IAEnCsJ,MAAO,CACH0Z,OAAO,2BACApB,GADD,IAEF1B,OAAQ,OAEZ+C,MAAM,2BACCrB,GADF,IAED1B,OAAQ,KACRD,SAAS,OAKzB1e,EACI,iBACA,UACA,aAGPwD,OAAM,SAAAhI,GAEHwE,EACI,0CACA,QACA,cA7iDG,EAujDnBypE,gCAAkC,SAAA3hE,GAC9B,EAAKogB,SAAS,CACV88C,2BAA4Bl9D,KAzjDjB,EAkkDnBoc,qBAlkDmB,wBAkkDI,qCAAAtpB,EAAA,yDAEf2D,EACA,EAAK3N,MAAMyxC,cADX9jC,QAIA+pE,EACA,EAAK13E,MADL03E,uBANe,EAYf,EAAKv5E,MAFLuP,EAVe,EAUfA,KACA0B,EAXe,EAWfA,2BvHnjDc,IuHsjDd1B,EAAKvN,KAdU,0EAmBTk1B,GACoB,CAClB1nB,QAASiP,KAAKC,MAAMD,KAAKE,UAAUnP,IACnC4lB,mBAAoBmkD,IAtBb,OAyBftoE,EACI,2BACA,UACA,UA5BW,kDAgCfA,EACI,yCACA,QACA,UAnCW,0DAlkDJ,EA6mDnB0pE,qBAAuB,WACnB,EAAKxhD,SAAS,CACVyhD,sBAAuB,EAAK/4E,MAAM+4E,qBAClCC,eAAgB,MAhnDL,EAunDnBC,wBAvnDmB,wBAunDO,qCAAAjvE,EAAA,2DAKlB,EAAKhK,MAHLyxC,EAFkB,EAElBA,cACAunC,EAHkB,EAGlBA,eACAE,EAJkB,EAIlBA,mBAIA9pE,EACA,EAAKjR,MADLiR,2BAGiC,IAAjC4pE,EAAe5tE,OAAOnC,SAAgBiwE,EAXpB,wDAetB,EAAK5hD,SAAS,CACV4hD,oBAAoB,IAhBF,mBAqBZ,IAAIvyD,IAAMuB,QACZ,OACA5D,GAAUuB,6BACV,CACIiB,gBAAiB,KACjBY,YAAa,CACT7F,UAAW4vB,EAAc9jC,QAAQE,GACjCsrE,SAAUH,KA5BJ,OAiClB,EAAK1hD,SAAS,CACV4hD,oBAAoB,IAGxB9pE,EACI,4BACA,UACA,UAxCc,kDA2ClBA,EACI,4CACA,QACA,UA9Cc,0DApnDtB,EAAK8B,SAAWhU,EAASgU,WAGzB,EAAK4lE,gBAAkB,KAEvB,EAAKjB,iBAAmB,KAExB,EAAKM,wBAA0B,KAE/B,EAAKpE,gBAAkB,KAEvB,EAAKgD,cAAgB,KAErB,EAAK/0E,MAAQ,CAETg0E,YAAY,EACZC,iBAAiB,EAEjBM,eAAgB,KAChBC,sBAAsB,EAEtBL,SAzFe,EA0FfC,2BA/F6B,EAiG7BjiD,SAAU,GACV2iD,gBAAgB,EAGhBwC,mBAAmB,EACnBE,YAAa,GACbC,oBAAoB,EAIpB1B,eAAgB,KAChBC,mBAAoB,GAKpBmC,kBAAmB,KACnBC,UAAW,GACXF,YAAa,KAKbR,uBAAwB,KAGxBqB,sBAAsB,EACtBC,eAAgB,GAChBE,oBAAoB,EAGpBznC,cAAe,CAEX9jC,QAAS,KACTumE,eAAe,EAEf3oE,QAAS,GACTkpE,eAAe,EAEfxjD,MAAO,GACPojD,aAAa,EAGbK,cAAe,KACfC,qBAAqB,IAvEd,E,qDA4EnB,WACI,MAiBIz2E,KAAKC,MAhBL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEA1oB,EAJJ,EAIIA,KACAysB,EALJ,EAKIA,WACAi/C,EANJ,EAMIA,gBAEAthC,EARJ,EAQIA,0CACAC,EATJ,EASIA,yCACAC,EAVJ,EAUIA,8CAEAxiB,EAZJ,EAYIA,2BACAG,EAbJ,EAaIA,sCACAK,EAdJ,EAcIA,iBACAmiB,EAfJ,EAeIA,2CACA7K,EAhBJ,EAgBIA,uCAGJ,EAGIpvC,KAAK8B,MAFLg0E,EADJ,EACIA,WACAC,EAFJ,EAEIA,gBAGE/qE,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAEnDnE,EAAM6Y,OAAOjB,cAEb,MAEJ6U,EACIzsB,EAAM6Y,OAAO1U,eAAe,iBAExBujB,GAEAA,GAA0C1nB,EAAM2vB,MAGxD7C,IAEIC,GAAyBG,KACpBgjD,GAAmBj/C,IACf85C,GAAoBD,GAErB91E,KAAKonC,WAGL53B,IACKoqC,GvHvGI,IuHuGyCpqC,EAAKvN,MACnDg4C,EAA2CzqC,EAAKG,MAMxDiqC,IAEKC,GACGC,GvHjHK,IuHkHNtqC,EAAKvN,MAERmtC,Q,gCAMhB,SAAmBxU,EAAWC,EAAWhnB,GACrC,MAgBI7T,KAAKC,MAfL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEA1oB,EAJJ,EAIIA,KACAysB,EALJ,EAKIA,WACAi/C,EANJ,EAMIA,gBAEAthC,EARJ,EAQIA,0CACAC,EATJ,EASIA,yCACAC,EAVJ,EAUIA,8CAEAG,EAZJ,EAYIA,2CACA7K,EAbJ,EAaIA,uCAEAtX,EAfJ,EAeIA,iBAGJ,EAGI93B,KAAK8B,MAFLg0E,EADJ,EACIA,WACAC,EAFJ,EAEIA,gBAGJ,EAGI/1E,KAAK8B,MAAMyxC,cAFX9jC,EADJ,EACIA,QACAumE,EAFJ,EAEIA,cAGJl+C,IAEIC,GAAyBG,KACpBgjD,GAAmBj/C,IACf85C,GAAoBD,GAErB91E,KAAKonC,WAGL53B,IACKoqC,GvHjKI,IuHiKyCpqC,EAAKvN,MACnDg4C,EAA2CzqC,EAAKG,MAMxDiqC,IAEKC,GACGC,GvH3KK,IuH4KNtqC,EAAKvN,MAERmtC,KAKJ4mC,GAAiBvmE,GACjBzP,KAAK24E,+BAGT34E,KAAK02E,kC,kCAIb,WACI,IACIyE,EACAn7E,KAAKC,MADLk7E,4CAIJn7E,KAAK64E,+BAGD74E,KAAK62E,gBACL72E,KAAK62E,cAAc71C,IAAI,eACvBhhC,KAAK62E,cAAc71C,IAAI,iBACvBhhC,KAAK62E,cAAc71C,IAAI,kBAIvBhhC,KAAK6zE,kBACL7zE,KAAK6zE,gBAAgB7yC,IAAI,eACzBhhC,KAAK6zE,gBAAgB7yC,IAAI,iBACzBhhC,KAAK6zE,gBAAgB7yC,IAAI,kBAIzBhhC,KAAK23E,mBACL33E,KAAK23E,iBAAiB32C,IAAI,eAC1BhhC,KAAK23E,iBAAiB32C,IAAI,kBAI1BhhC,KAAKi4E,0BACLj4E,KAAKi4E,wBAAwBj3C,IAAI,eACjChhC,KAAKi4E,wBAAwBj3C,IAAI,kBAIrCm6C,M,oBAo7CJ,WAAU,IAAD,OACL,EAuBIn7E,KAAKC,MAtBLyiB,EADJ,EACIA,oBAEA1N,EAHJ,EAGIA,SAEA4N,EALJ,EAKIA,cACA1T,EANJ,EAMIA,gBACA6oB,EAPJ,EAOIA,sBACAG,EARJ,EAQIA,oBAEAI,EAVJ,EAUIA,WACA+B,EAXJ,EAWIA,eACA7qB,EAZJ,EAYIA,KACAysB,EAbJ,EAaIA,WACAnO,EAdJ,EAcIA,eAEA+sB,EAhBJ,EAgBIA,mCAEAugC,EAlBJ,EAkBIA,gCACAC,EAnBJ,EAmBIA,8BAEA3nD,EArBJ,EAqBIA,yBACA04C,EAtBJ,EAsBIA,mCAGJ,EA0BIpsE,KAAK8B,MAzBLu0E,EADJ,EACIA,eACAC,EAFJ,EAEIA,qBAEAL,EAJJ,EAIIA,SACAC,EALJ,EAKIA,2BAEAjiD,EAPJ,EAOIA,SACA2iD,EARJ,EAQIA,eAEAwC,EAVJ,EAUIA,kBACAE,EAXJ,EAWIA,YACAC,EAZJ,EAYIA,mBAEA1B,EAdJ,EAcIA,eACAC,EAfJ,EAeIA,mBAEAmC,EAjBJ,EAiBIA,kBACAC,EAlBJ,EAkBIA,UACAF,EAnBJ,EAmBIA,YAEAR,EArBJ,EAqBIA,uBAEAqB,EAvBJ,EAuBIA,qBACAC,EAxBJ,EAwBIA,eACAE,EAzBJ,EAyBIA,mBAGJ,EAYIh7E,KAAK8B,MAAMyxC,cAXX9jC,EADJ,EACIA,QACAumE,EAFJ,EAEIA,cAEA3oE,EAJJ,EAIIA,QACAkpE,EALJ,EAKIA,cAEAxjD,EAPJ,EAOIA,MACAojD,EARJ,EAQIA,YAEAK,EAVJ,EAUIA,cACAC,EAXJ,EAWIA,oBAGJ,OAAK1+C,EAQAG,EAIDmC,IAAmB4B,GAAcwF,GAAiB/e,GAE9C,cAAC,IAAD,CAAUthB,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OASpByhB,IAAeG,KAAiBjpB,GAAQqyB,GAAuBnf,GACxD,cAAC,GAAD,IAIP,gCACI,cAAC,GAAD,CACIA,oBAAqB1iB,KAAKC,MAAMyiB,oBAChCE,cAAeA,EACf1T,gBAAiBA,EACjB8F,SAAUA,EACVxF,KAAMA,EACNysB,WAAYA,EACZnO,eAAgBA,EAChB+sB,mCAAoCA,EACpCo7B,SAAUA,EACVC,2BAA4BA,EAC5BjiD,SAAUA,EACV2iD,eAAgBA,EAChBiB,eAAgBA,EAChBC,mBAAoBA,EACpBmC,kBAAmBA,EACnBC,UAAWA,EACXF,YAAaA,EACbR,uBAAwBA,EACxBqB,qBAAsBA,EACtBC,eAAgBA,EAChBE,mBAAoBA,EACpBvrE,QAASA,EACTumE,cAAeA,EACfjjD,MAAOA,EACPojD,YAAaA,EACb9oE,QAASA,EACTkpE,cAAeA,EACfF,eAAgBA,EAChBC,qBAAsBA,EACtBE,cAAeA,EACfC,oBAAqBA,EACrB/iD,yBAA0BA,EAC1B4nD,OAAQt7E,KAAKs4E,gBACbrP,gBAAiBjpE,KAAK84E,oBAEtByC,4BAA6Bv7E,KAAK+4E,gCAClCyC,qCAAsCx7E,KAAKg5E,yCAC3CyC,kCAAmCz7E,KAAKi5E,sCAExCyC,aAAc17E,KAAKk5E,yBACnByC,oBAAqB37E,KAAKm5E,wBAC1Br9C,cAAe97B,KAAK02B,kBACpBs5C,cAAehwE,KAAK8uE,kBACpB8M,6BAA8B57E,KAAK45E,iCACnCiC,6BAA8B77E,KAAK65E,iCACnCiC,uBAAwB97E,KAAK+5E,2BAC7BgC,qBAAsB/7E,KAAKm6E,yBAC3B6B,qBAAsBh8E,KAAKy6E,yBAC3BwB,4BAA6Bj8E,KAAK26E,gCAClCS,gCAAiCA,EACjCC,8BAA+BA,EAC/BjP,mCAAoCA,EACpCh3C,qBAAsBp1B,KAAKo1B,qBAC3BwlD,qBAAsB56E,KAAK46E,qBAC3BG,wBAAyB/6E,KAAK+6E,wBAC9BpG,8BAA+B,kBAAM,EAAK10E,MAAM00E,8BAA8BllE,EAAQgjB,YAAa+jD,EAAcxpD,UAGrH,cAAC,GAAD,CACIxsB,KAAM44E,EACN3pE,QAASA,EACT6pE,YAAaA,EACbC,mBAAoBA,EACpBjkE,QAAStV,KAAKq5E,yBACd6C,qBAAsBl8E,KAAK02B,kBAC3BylD,qBAAsBn8E,KAAKy5E,2BAG/B,cAAC,GAAD,IAEA,cAAC,GAAD,IAEA,cAAC,GAAD,OAlGG,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUr4E,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CAAY7V,MAAOsV,W,GAnvDNjV,aAi2D3Bw6E,G,4MAQFV,aAAe,SAAChhE,EAAOzB,GACnB,EAAKhZ,MAAMy7E,aAAahhE,EAAOzB,I,EAQnC6iB,cAAgB,SAAAphB,GACZ,EAAKza,MAAM67B,cAAcphB,I,EAQ7Bs1D,cAAgB,SAAAvlE,GACZ,EAAKxK,MAAM+vE,cAAcvlE,I,EAQ7B6wE,OAAS,SAAAroD,GACL,EAAKhzB,MAAMq7E,OAAOroD,I,EAMtBg2C,gBAAkB,SAAAr7B,GACd,EAAK3tC,MAAMgpE,gBAAgBr7B,I,EAQ/B2tC,4BAA8B,SAAA/nD,GAC1B,EAAKvzB,MAAMs7E,4BAA4B/nD,I,EAQ3CgoD,qCAAuC,SAAAhoD,GACnC,EAAKvzB,MAAMu7E,qCAAqChoD,I,EAOpDioD,kCAAoC,SAAAjoD,GAChC,EAAKvzB,MAAMw7E,kCAAkCjoD,I,EAMjDmoD,oBAAsB,WAClB,EAAK17E,MAAM07E,uB,EAMfC,6BAA+B,WAC3B,EAAK37E,MAAM27E,gC,EAMfC,6BAA+B,WAC3B,EAAK57E,MAAM47E,gC,EASfC,uBAAyB,SAAC5nD,EAAS8lD,GAC/B,EAAK/5E,MAAM67E,uBAAuB5nD,EAAS8lD,I,EAM/C+B,qBAAuB,WACnB,EAAK97E,MAAM87E,wB,EAQfC,qBAAuB,SAAAzqD,GACnB,EAAKtxB,MAAM+7E,qBAAqBzqD,I,EAQpC0qD,4BAA8B,SAAAjjE,GAC1B,EAAK/Y,MAAMg8E,4BAA4BjjE,I,EAM3Coc,qBAAuB,WACnB,EAAKn1B,MAAMm1B,wB,EAMfwlD,qBAAuB,WACnB,EAAK36E,MAAM26E,wB,EAMfG,wBAA0B,WACtB,EAAK96E,MAAM86E,2B,EAMfpG,8BAAgC,WAC5B,EAAK10E,MAAM00E,iC,EAMfhlB,kBAAoB,WAChB,MAoDI,EAAK1vD,MAnDLyiB,EADJ,EACIA,oBAEAoL,EAHJ,EAGIA,eAEAlL,EALJ,EAKIA,cACA1T,EANJ,EAMIA,gBAEA8F,EARJ,EAQIA,SAEAxF,EAVJ,EAUIA,KAEAqrC,EAZJ,EAYIA,mCAEAo7B,EAdJ,EAcIA,SACAC,EAfJ,EAeIA,2BAEAjiD,EAjBJ,EAiBIA,SACA2iD,EAlBJ,EAkBIA,eAEAnnE,EApBJ,EAoBIA,QAEApC,EAtBJ,EAsBIA,QACAkpE,EAvBJ,EAuBIA,cAGAJ,GA1BJ,EAyBIpjD,MAzBJ,EA0BIojD,aAEAE,EA5BJ,EA4BIA,eACAC,EA7BJ,EA6BIA,qBAEAE,EA/BJ,EA+BIA,cACAC,EAhCJ,EAgCIA,oBAEAoB,EAlCJ,EAkCIA,eACAC,EAnCJ,EAmCIA,mBAEAmC,EArCJ,EAqCIA,kBACAC,EAtCJ,EAsCIA,UACAF,EAvCJ,EAuCIA,YAEAR,EAzCJ,EAyCIA,uBAEAqB,EA3CJ,EA2CIA,qBACAC,EA5CJ,EA4CIA,eACAE,EA7CJ,EA6CIA,mBAEAtnD,EA/CJ,EA+CIA,yBAEA0nD,EAjDJ,EAiDIA,gCACAC,EAlDJ,EAkDIA,8BACAjP,EAnDJ,EAmDIA,mCAKJ,IAAKmK,IACGJ,IACAG,IACAG,EAEJ,OACI,cAACpgE,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,cAAC,IAAD,CAAUY,MAAM,OAAOnW,UAAW,GAAIgW,cAAc,SAApD,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAYhC,IAAKpH,IACGpC,IACAmpE,GvH5iE0B,IuHgjE1B/mE,EAAQgkB,avH9jEK,IuH+jETjkB,EAAKvN,MvH9jEE,IuH8jEiCuN,EAAKvN,OAC1B,OAAnB6rB,IAA+F,IAApEA,EAAe7iB,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAAStd,EAAQsd,QAG5F,OACI,cAAC1W,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,GAAIC,GAAI,GAAzB,SACI,cAAC,GAAD,QAShB,GAAIsF,GAAiCxM,KvH9kElB,IuHglEVD,EAAKvN,MAAiCuN,EAAKG,KAAOF,EAAQG,UvHjlE9C,IuHklETJ,EAAKvN,MvHhlEC,IuHilENuN,EAAKvN,OAAiCuN,EAAKsT,YAActT,EAAKud,OAAStd,EAAQsd,MAGvF,OACI,cAAC1W,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACwE,WAAY,GAAIwS,YAAa,IAApD,SACI,cAAC5B,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAA9D,SACI,cAAC,IAAD,CAAU95B,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAClW,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,2DASpB,GvHrlEkC,IuHqlE9BtF,EAAQgkB,YvHjmEM,IuHkmEVjkB,EAAKvN,OACLuN,EAAKsT,YACNtT,EAAKud,OAAStd,EAAQsd,KAEzB,OACI,cAAC1W,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACwE,WAAY,GAAIwS,YAAa,IAApD,SACI,cAAC5B,EAAA,EAAD,CAAKC,GAAI,GAAIE,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAA9D,SACI,cAAC,IAAD,CAAU95B,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAClW,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,8DAOpB,IAAIsnE,EAAiBpoD,EAErB,GAAIooD,EAAgB,CAEhBA,EAAe3iE,MAAK,SAAC4iE,EAAUC,GAC3B,OAAQD,EAAS3C,cAAgB4C,EAAS5C,iBAG9C,IAAI6C,EAAsBH,EAAepxE,WAAU,SAAAipB,GAAO,OAAIA,EAAQC,cAAgB3kB,EAAKG,MAC3F,IAA6B,IAAzB6sE,EAA4B,CAC5B,IAAM3E,EAAiB5jD,EAASuoD,GAChCH,EAAehoE,OAAOmoE,EAAqB,GAC3CH,EAAevvE,KAAK+qE,GAGxBwE,EAAeI,UAUnB,OANAJ,EAAezvE,SAAQ,SAAAsnB,GACnBA,EAAQ5C,QAAQ5X,MAAK,SAACgjE,EAAQC,GAC1B,OAAOA,EAAOpC,YAAcmC,EAAOnC,kBAKvC,eAACpkE,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC6V,YAAa,EAAGC,aAAc,EAAGH,WAAY,EAAGC,cAAe,KAAxF,UACI,eAACV,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAAC2V,WAAY,GAAIC,cAAe,GAAIH,gBAAiBC,IAA3E,UAGSoF,GAAiCxM,GAI9B,cAAC8G,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAArJ,SACI,cAAC,IAAD,CAAUhhB,aAAc,GAAIJ,cAAc,SAASjW,MAAO,CAACyV,gBAAiBC,GAAmBX,QAAS,IAAxG,SACI,cAAChV,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAAS/N,UAAWyQ,YAAIxS,GAAaoB,YAAvE,SAAoF,8EAJ5F,KAWHgwE,EAIG,cAAC9/D,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAArJ,SACI,cAAC2C,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAACQ,OAAQ,IAAK05B,QAAM,EAAhD,SACI,eAAChlB,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAAC+U,QAAS,GAAhC,UACI,cAACK,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAnE,SACI,eAAC,IAAD,CAAUphB,cAAc,SAASF,cAAc,SAASkB,OAAO,OAAOb,MAAM,OAAOpW,MAAO,CAAC+U,QAAS,IAApG,UACI,cAAC,KAAD,CAAiB3U,MAAM,UAAUJ,MAAO,CAACgX,YAAa,MACtD,cAACjX,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SvHxkEf,IuH0kEuBu1E,EAAe3mE,OAAf,0BAEoB6oC,OAAO89B,EAAe7oE,OAAO7B,QAAQ,IAAI6sC,iBAF7D,8CAImCD,OAAO89B,EAAe7oE,OAAO7B,QAAQ,IAAI6sC,iBAJ5E,YAShB,cAACjiC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAzF,SACI,cAAC,IAAD,CAAUjhB,MAAM,OAAOH,cAAc,SAASjW,MAAO,CAAC+U,QAAS,IAA/D,SAES+F,GAAiCxM,GAI9B,cAAC,IAAD,CACIipB,GAAI,CACAqC,SAAUnY,EAEN8P,GAAczkB,QAAQ,iBAAkB2U,GAExC8P,GAEJsI,OAAO,YAAD,OAAcvrB,EAAQE,KAEhC3I,UAAWyQ,YAAIxS,GAAaG,gBAVhC,SAYI,cAAC9D,EAAA,EAAD,CAAQ0F,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,WAAWS,MAAM,UAAjF,kCAdJ,cAACL,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,YAA/C,+EAxB5B,KAiDR,cAACgV,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAIr3B,MAAO,CAAC6V,YAAa,GAAIC,aAAc,GAAIH,WAAY,GAAIC,cAAe,IAAlO,SACI,eAAC,IAAD,CAAUnW,QAAM,EAAC2W,MAAM,OAAOH,cAAc,SAA5C,UACI,cAAClW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAKK,MAAO,CAACqW,aAAc,IAA9D,SAEQ,EAAKolE,wBAED,mBAEAntE,EAAQgjB,cAGpB,cAACvxB,EAAA,EAAD,CAAY8F,UAAWyQ,YAAIC,GAAOmlE,WAAY9nE,MAAM,SAASjU,QAAQ,QAAQK,MAAO,CAAC6kD,WAAY,YAAjG,SAEQ,EAAK42B,wBAAL,aAEUntE,EAAQ0tC,OAFlB,WAII1tC,EAAQ0d,cvHhuEtB,IuHouEM3d,EAAKvN,MvHruEV,IuHsuESuN,EAAKvN,MAAiCuN,EAAKG,KAAOF,EAAQG,SAE1D,cAAC,IAAD,CAAU2H,MAAM,OAAOH,cAAc,SAASF,cAAc,SAAS9V,UAAW,GAAhF,SAES6a,GAA6BzM,EAAMC,GAMhC,cAAC,IAAD,CACIipB,GACI9V,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,aAAcwB,EAAQE,IAEnC+iB,GACKzkB,QAAQ,aAAcwB,EAAQE,IAE3C3I,UAAWyQ,YAAIxS,GAAaQ,4CAXhC,SAaI,eAACnE,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,WAAWU,KAAK,SAASwF,UAAWyQ,YAAIxS,GAAakB,mBAArF,UACI,cAAC,KAAD,CAAYhF,MAAO,CAACgX,YAAa,EAAGZ,MAAO,GAAIa,OAAQ,UAD3D,kBAjBJ,eAAC9W,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,WAAWU,KAAK,SAASwF,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,UAAQ,EAAjH,UACI,cAAC,KAAD,CAAYN,MAAO,CAACgX,YAAa,EAAIZ,MAAO,GAAIa,OAAQ,UAD5D,kBA6CZ,KAIJ5I,EAAKG,KAAOF,EAAQG,SAEhB,KAEA,eAAC,IAAD,CAAUhP,QAAM,EAACwW,cAAc,SAA/B,UACI,cAAC,IAAD,CACIshB,GACI,EAAKkkD,yBAEDntE,EAAQN,eAAe,wBACpBM,EAAQomC,oBAGXjzB,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAEvC8P,GACKzkB,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAE3CA,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,UAAWuoE,EAAc7mE,IAEtC+iB,GACKzkB,QAAQ,UAAWuoE,EAAc7mE,IAElD3I,UAAWyQ,YAAIxS,GAAaG,eAAgBsS,GAAOpR,YA1BvD,SA4BI,cAACpF,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAQK,MAAO,CAACC,UAAW,IAA9D,SAEQ,EAAKw7E,yBAEDntE,EAAQN,eAAe,wBACpBM,EAAQomC,oBAGX,8CAAUpmC,EAAQsP,MAAMkQ,gBAExB,8CAAUunD,EAActxC,UAAxB,YAAqCsxC,EAAcrxC,iBAK/D11B,EAAQN,eAAe,wBACpBM,EAAQomC,oBAEP,KAEA2gC,EAAcrnE,eAAe,aAC1BqnE,EAAch3B,SAAStyC,OAAOnC,OAAS,EAEtC,mBAAGkuB,KAAMu9C,EAAch3B,SAAUrhC,OAAO,SAASgrD,IAAI,sBAArD,SACI,qBAAKrwC,IAAI,gBAAgB3f,IAAK4f,EAAQ,KAA+BC,QAAS73B,MAAO,CAACoW,MAAO,GAAKa,OAAQ,QAG9G,aAQhC,cAAC7B,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAIr3B,MAAO,CAAC6V,YAAa,GAAIC,aAAc,GAAImB,OAAQpD,EAAW2gE,GAAkCC,IAAvN,SAEQ,EAAKgH,wBAED,cAAC1jE,GAAA,EAAD,CAAOC,IAAK8C,GtHlrEd,EsHkrE2DxM,EAAQsP,OAC7D5d,MAAO,CACHm6C,UACItmC,EAEI2gE,GAEAC,GAER3vE,OAAO,aAAD,OAAe4Q,IACrBU,MAAO,OACPkC,UAAW,gBAInBhK,EAAQI,MAAMw1C,MAAMxrC,KAAI,SAAC+yD,EAAW3/D,GAAZ,OACpB2/D,EAAUz9D,eAAe,WAErB,KvHzvET,IuH4vEay9D,EAAU7+B,SAEN,cAAC,KAAD,CAEIj/B,IAAK89D,EAAU99D,IACf6hE,aAAW,EACXmM,KAAK,EACLvlE,MAAM,OACNa,OAAgC,KAAxBw0D,EAAU35D,UAAmB,OAAS,OAC9CqK,SAAS,EACTC,UAAU,GAPLtQ,GAUT,cAACiM,GAAA,EAAD,CAAmBC,IAAKyzD,EAAU99D,IAAK3N,MAAO,CAACm6C,UAAWtmC,EAAW2gE,GAAkCC,GAAqC3vE,OAAO,aAAD,OAAe4Q,IAAmBU,MAAO,OAAQkC,UAAW,eAAlMxM,QAOxC,cAACsJ,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAIr3B,MAAO,CAAC6V,YAAa,GAAIC,aAAc,IAAnJ,SACI,eAACZ,EAAA,EAAD,CAAKC,WAAS,EAAd,UAGI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAA3F,SACI,cAAC,IAAD,CAAUjhB,MAAM,OAAOa,OAAQ,EAAGjX,MAAO,CACjCyV,gBACK1H,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,QAQpB,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAA1F,SACI,cAAC,IAAD,CAAU53B,QAAM,EAACQ,UAAW,GAA5B,SAEQ6a,GAAqBxM,IAClBwM,GAA+BxM,IAC/BwM,GAAgCxM,IAChCwM,GAAgCxM,IAChCwM,GAAkDxM,IAClDwM,GAA2CxM,IAC3CwM,GAA2CxM,GAE1C,eAAC,IAAD,CAAUyH,cAAc,SAAxB,UACI,eAAC,IAAD,CAAUtW,QAAM,EAACuX,YAAa,GAA9B,UACI,cAACjX,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,YAAYwT,MAAM,OAAjD,SAAyD,OAAMwjC,OAAO9oC,EAAQI,MAAMyoC,aAAa3sC,QAAQ,IAAI6sC,mBAC7G,cAACt3C,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,6BAEJ,cAAC,GAAD,CAAa5D,QAAQ,yCAAyC6tC,UAAU,WAG5E,eAAC,IAAD,CAAU9nC,cAAc,SAAxB,UACI,eAAC,IAAD,CAAUtW,QAAM,EAACuX,YAAa,GAA9B,UACI,cAACjX,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAA/C,uBAA2DwjC,OAAOt8B,GAA6B5O,GAAS1B,QAAQ,IAAI6sC,oBACpH,cAACt3C,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,kCAA+EwjC,OAAO9oC,EAAQI,MAAMyoC,aAAa3sC,QAAQ,IAAI6sC,iBAA7H,cAEJ,cAAC,GAAD,CAAarnC,QAAQ,wCAAwC6tC,UAAU,eAQtFvvC,EAAQI,MAAMV,eAAe,sBAI1B,cAACoH,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAA1F,SACI,eAAC,IAAD,CAAUp3B,UAAW,GAAI8V,cAAc,SAAvC,UACI,eAAC,IAAD,CAAUtW,QAAM,EAACuX,YAAa,GAA9B,UACI,cAACjX,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAAUwT,MAAM,OAA/C,SAAuD,OAAMwjC,OAAO9oC,EAAQI,MAAM28D,mBAAmB7gE,QAAQ,IAAI6sC,mBACjH,cAACt3C,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,qCAEJ,cAAC,GAAD,CAAa5D,QAAQ,4CAA4C6tC,UAAU,aARnF,KAcR,cAACzoC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAA1F,SAEQ,EAAKukD,wBAMT3mC,GAAe1zB,EAAoBC,YAAalT,GAC1C,KACA,eAAC8G,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAIr3B,MAAO,CAACC,UAAW,IAAlH,UACE,cAAC,IAAD,CAAUR,QAAM,EAACwW,cAAc,OAA/B,SACI,cAAC,IAAD,CAAUA,cAAc,SAASF,cAAc,SAA/C,SACI,cAAC5V,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,SAAU,EAAKm7E,yBvH79E9H,IuH69E0JptE,EAAKvN,OAA2B44C,EAAqCn5C,QAAS,kBAAM,EAAKizE,iCAAhO,4BAmDJ,EAAKiI,wBvH9gFvB,IuHghFsBptE,EAAKvN,KAED,cAAC,IAAD,CAAUrB,QAAM,EAACQ,UAAW,GAA5B,SACI,cAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,6EAGJ,eAAC,IAAD,CAAUX,QAAM,EAACQ,UAAW,GAA5B,UACI,eAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,2BAA8EkO,EAAQsP,MAAMkQ,YAA5F,eACA,cAAC,IAAD,CACIyJ,GACI9V,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAErG8P,GAA4CzkB,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAEtFzhB,MAAO,CAACC,UAAW,GARvB,SASI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAApB,iCAIZ,EAAKk8E,uCAOpB/gE,GAAiCxM,GvH9iFrC,IuHmjFWD,EAAKvN,MAWGo0E,EARA,cAAC9/D,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAIr3B,MAAO,CAACC,UAAW,IAAlH,SACI,cAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAjC,SACI,2CAAcmb,GAA+BxM,EAAQskB,aAAauB,aAAlE,WAaJ,eAAC/e,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,GAAI2C,OAAQ,EAAG1C,MAAO,GAAIr3B,MAAO,CAACC,UAAW,IAAlH,UvHrkFvB,IuHwkF+BoO,EAAKvN,MACD44C,EAWA,cAAC,IAAD,CACIniB,GAAI,CACAqC,SAAUnY,EAEN8P,GAAczkB,QAAQ,iBAAkB2U,GAExC8P,GAEJsI,OAAO,YAAD,OAAcvrB,EAAQE,KAEhC3I,UAAWyQ,YAAIxS,GAAaG,gBAVhC,SAYI,cAAC9D,EAAA,EAAD,CAAQH,MAAO,CAACqW,aAAc,IAAKxQ,UAAWyQ,YAAIxS,GAAakB,mBAAoB1F,WAAS,EAACK,QAAQ,WAAWS,MAAM,UAAUC,KAAK,SAArI,0BArBJ,cAACF,EAAA,EAAD,CAAQH,MAAO,CAACqW,aAAc,IAAKxQ,UAAWyQ,YAAIxS,GAAakB,mBAAoB1F,WAAS,EAACK,QAAQ,WAAWS,MAAM,UAAUC,KAAK,SACjIC,SvH5kFvC,IuH6kF2C+N,EAAKvN,OACD44C,EAHZ,wBA0BJ,EAAKmiC,oCAGT,cAAC97E,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQK,MAAO,CAACC,UAAW,IAA5D,SACI,2CAAc6a,GAA+BxM,EAAQskB,aAAauB,aAAlE,YAzDxB,aAmEpB,eAACjf,EAAA,EAAD,CAAKC,WAAS,EAACtP,UAAWyQ,YAAIC,GAAOulE,0BAArC,UACI,cAAC1mE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,MAGJ,cAACf,EAAA,EAAD,CAAKpV,MAAO,CAAC+U,QAAS,IAAKM,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,GAAIzkB,GAAI,CAAC8hB,KAAM,GAAI2C,OAAQ,GAAIxkB,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAlI,SACI,cAAC,IAAD,CAAU9jB,cAAc,SAAxB,SACI,eAAC8lE,GAAA,EAAD,CAAMjkE,MAAOg9D,EAAUr+D,SAAU,EAAK8jE,aAAcyB,eAAe,UAAUt2E,UAAU,UAAU/F,QAAQ,aAAas8E,cAAc,KAApI,UvHxnFF,IuH4nFW5tE,EAAKvN,OACEuN,EAAKsT,aAAgBtT,EAAKsT,YAActT,EAAKud,OAAStd,EAAQsd,OAGlE9Q,GAAqBxM,GAarB,KAXA,cAAC4tE,GAAA,EAAD,CAAKpkE,MA9tFR,EA8tF6CjS,UAAWyQ,YAAIxS,GAAaY,WAAYpF,WAAS,EAACQ,MAAM,iBACjGE,MAAO,CACAI,MACK2N,EAIGA,EAAgBgmB,SAAStwB,eAFzBiS,MAkCxB,cAACwmE,GAAA,EAAD,CAAKpkE,MApwFV,EAowFqCjS,UAAWyQ,YAAIxS,GAAaY,WAAYpF,WAAS,EAACQ,MAAM,aACxF,cAACo8E,GAAA,EAAD,CAAKpkE,MApwFT,EAowFqCjS,UAAWyQ,YAAIxS,GAAaY,WAAYpF,WAAS,EAACQ,MAAM,cACzF,cAACo8E,GAAA,EAAD,CAAKpkE,MApwFV,EAowFqCjS,UAAWyQ,YAAIxS,GAAaY,WAAYpF,WAAS,EAACQ,MAAM,sBACxF,cAACo8E,GAAA,EAAD,CAAKpkE,MApwFb,EAowFqCjS,UAAWyQ,YAAIxS,GAAaY,WAAYpF,WAAS,EAACQ,MAAM,6BAKjG,cAACsV,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,SAKR,eAACjB,EAAA,EAAD,CAAKC,WAAS,EAACtP,UAAWyQ,YAAIC,GAAO4lE,mBAArC,UAnxFqB,IAsxFbrH,EAEI,KAEA,cAAC1/D,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SACI,eAAC,IAAD,CAAUt6B,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAApB,6BAEA,eAACuV,EAAA,EAAD,WACI,cAACE,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAvG,SACI,eAAC83C,GAAA,EAAD,CAASiN,WAAS,EAACC,YAAY,WAAWlT,WAAY4L,EAA4B/0E,MAAO,CAACC,UAAW,IAArG,UAEI,eAACovE,GAAA,EAAD,CAA6CiN,WAAYxhE,GAA+BxM,GAAxF,UACI,cAACiuE,GAAA,EAAD,CAAYh8E,QAAS,kBAAM,EAAKu6E,4BAvyF3C,IAuyFW,SACI,cAACxL,GAAA,EAAD,8BAEJ,cAACkN,GAAA,EAAD,UAEQ1hE,GAA+BxM,GAE3B,eAAC,IAAD,CAAU7O,QAAM,EAAC2W,MAAM,OAAOnW,UAAW,GAAI4F,UAAWyQ,YAAIC,GAAOkmE,yBAAnE,UACI,cAAC18E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,qLAUA,cAACjkB,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,MAG9C,cAAC,GAAD,IAEA,cAACF,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,GAAIoW,aAAc,MAGzCqjE,EAIG,eAAC,IAAD,CAAUj6E,QAAM,EAAhB,UACI,cAACwc,GAAA,EAAD,CACInc,MAAM,WACNoc,YAAY,sBACZ3O,KAAK,iBACLuK,MAAO6hE,EACPr6E,WAAS,EACTkB,OAAO,SACPb,QAAQ,WACRi9C,UAAQ,EACRuZ,WAAS,EACTa,KAAM,EACNZ,QAAS,EACT3/C,SAAU,EAAKkkB,gBAGnB,eAAC,IAAD,CAAUvkB,MAAM,OAAOH,cAAc,QAAQhW,UAAW,GAAxD,UACI,cAAC,IAAD,CAAU+W,YAAa,EAAvB,SACI,cAAC7W,EAAA,EAAD,CAAQb,WAAS,EAACc,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,SAA2C,IAAjCq5E,EAAe5tE,OAAOnC,OAAcrJ,QAAS,kBAAM,EAAKq5E,2BAAxK,SAEQC,EAEI,aAEA,WAIhB,cAAC,IAAD,CAAUr1E,WAAY,EAAtB,SACI,cAACrE,EAAA,EAAD,CAAQb,WAAS,EAACc,MAAM,YAAYT,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAM,EAAKk5E,wBAA3H,4BA/BZ,KAsCJC,EAEI,KAEAjlC,GAA6BnmC,GAEzB,cAACnO,EAAA,EAAD,CAAQb,WAAS,EAACc,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,SAAU+N,EAAKsT,WAAYphB,QAAS,kBAAM,EAAK65E,4BAA4B,CAAC/nD,UAAU,EAAME,8BAAlM,2BAEA,eAAC,IAAD,WACI,cAAC,IAAD,CAAUvc,MAAI,EAACgB,YAAa,GAA5B,SACI,cAAC7W,EAAA,EAAD,CAAQb,WAAS,EAACc,MAAM,UAAUT,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,SAAU+N,EAAKsT,WAAYphB,QAAS,kBAAM,EAAK65E,4BAA4B,CAAC/nD,UAAU,EAAME,8BAAlM,6BAEJ,cAAC,IAAD,CAAUvc,MAAI,EAACxR,WAAY,GAA3B,SACI,cAACrE,EAAA,EAAD,CAAQb,WAAS,EAACc,MAAM,YAAYT,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB1E,SAAU+N,EAAKsT,WAAYphB,QAAS,kBAAM,EAAKk5E,wBAAtJ,sCAMfprE,EAAKsT,WAIF,cAAC5hB,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAAQwT,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAA1E,2CAFA,QAMZ,cAAC,IAAD,CAAUR,QAAM,EAAC2W,MAAM,OAAOnW,UAAW,GAAzC,SACI,cAACF,EAAA,EAAD,CACIK,MACIgP,GAA0Bd,GAEtB,YAEA,UAERsF,MAAM,OACNjU,QAAQ,QATZ,SAYQyP,GAA0Bd,GAEtB,gCAEAY,GAAeZ,GAEX,gCAEA,yCAz5F3C,GAm6FO,eAAC+gE,GAAA,EAAD,CAEI/uE,SACI6O,GAAyBb,IACtBc,GAA0Bd,GAEjCguE,UACI9sE,GAAoBlB,IACjBmB,GAAgBnB,IAChBW,GAA2BX,IAC3BgB,GAAqChB,IACrCiB,GAAqCjB,GAXhD,UAcI,cAACiuE,GAAA,EAAD,CAAYh8E,QAAS,kBAAM,EAAKu6E,4BAh7F1C,IAg7FU,SAMI,cAACxL,GAAA,EAAD,CAAW/jE,MAAOuP,GAAgCxM,GAAlD,+CAEJ,cAACkuE,GAAA,EAAD,WAESxtE,GAA0BV,KACpBe,GAA4Cf,IAC/CgB,GAAqChB,IACrCiB,GAAqCjB,GAiJrC,eAAC,IAAD,CAAU7O,QAAM,EAAC2W,MAAM,OAAOnW,UAAW,GAAzC,UACI,cAACF,EAAA,EAAD,CACIK,MACI0a,GAAsBxM,GAElB,YAEA,UAERsF,MAAM,OACNjU,QAAQ,QATZ,SAYQmb,GAAsBxM,GAElB,gCvHv8FtB,IuHy8FsBA,EAAQI,MAAMH,OAEVD,EAAQN,eAAe,wBACpBM,EAAQomC,qBACP3mC,GAAmBO,EAAQsd,OAAS7d,EAAgB6d,KAEpD,mDAEA,yHAEJ,8CAIZtd,EAAQN,eAAe,wBACpBM,EAAQomC,qBACP3mC,GAAmBO,EAAQsd,OAAS7d,EAAgB6d,MvHz9FtE,IuH09FiBtd,EAAQI,MAAMH,OAEb,cAAC,IAAD,CAAUtO,UAAW,GAArB,SACI,cAACE,EAAA,EAAD,CAAQC,MAAM,UAAUT,QAAQ,WAAWU,KAAK,SAC5CwF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,WACL05E,IACAC,EAA8B5rE,GAC9B28D,EAAmC38D,IAL3C,6BAWJ,QA/LZ,cAAC,IAAD,CACI7O,QAAM,EADV,SAIS4P,GAA4Cf,GAIzC,eAAC,IAAD,CAAU7O,QAAM,EAAC2W,MAAM,OAAOnW,UAAW,GAAIoW,aAAc,GAAIxQ,UAAWyQ,YAAIC,GAAOkmE,yBAArF,UACI,cAAC18E,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQK,MAAO,CAACqW,aAAc,IAA/D,4GAEA,cAAC,KAAD,CACIuiD,QAAM,EACNt5D,WAAS,EACTK,QAAQ,SACRk5D,aAAa,WACb/4D,MAAM,oCACNg5D,OAAO,aACPC,QAASj+C,GAAsC,GAC/ChD,MAAOugE,EACPpf,oBAAqB,CAAChpD,SAAU,SAChCwG,SAAU,EAAKo4D,gBAGnB,cAAC1uE,EAAA,EAAD,CAAQR,QAAQ,YAAYS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBACpE1E,UACK+3E,GACEtrE,MAAMsrE,IACNA,EAAyBv9D,GAAsC,GAEtE9a,MAAO,CAACC,UAAW,IAAKM,QAAS,EAAK0zB,qBAN1C,mCAQA,eAAC,IAAD,CAAUx0B,QAAM,EAACQ,UAAW,IAA5B,UACI,cAACE,EAAA,EAAD,CAAQb,WAAS,EAACc,MAAM,YAAYyF,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,YAAYW,SAAU+N,EAAKsT,WAAYphB,QAAS,kBAAM,EAAK85E,sCAAqC,IAA5L,yBAEA,cAACt6E,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,QAAQK,MAAO,CAACC,UAAW,IAA9D,SACI,4BACI,oGA/BhB,WAr8FlC,QAiyGF,cAACmV,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAvG,SAEStoB,GAAcT,GAIX,eAAC,IAAD,CAAU7O,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWS,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBACnEzE,QAAS,kBAAMy1B,GAAmD3nB,EAAMkP,KAAKC,MAAMD,KAAKE,UAAUnP,MAClGhO,SvH3sGlC,IuH4sGsC+N,EAAKvN,MvH5sG3C,IuH8sG0CuN,EAAKvN,MACFuN,EAAKud,OAAStd,EAAQsd,KANrC,SAWQlc,GAA2BpB,GAEvB,aAEA,sBAIPD,EAAKsT,WAIF,cAAC5hB,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOxT,MAAM,QAAQJ,MAAO,CAACC,UAAW,IAA1E,4CAFA,KAIR,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAA5D,SAEQyP,GAA2BpB,GAEvB,mCAEA,wHAlChB,eAjyGzB,IAg1GHwmE,EAEI,KAEA,EAAK2G,wBAED,cAACrmE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SvH3vGN,IuH6vGc1rB,EAAKvN,KAED,cAAC,IAAD,CAAUrB,QAAM,EAACQ,UAAW,GAAIgW,cAAc,SAA9C,SACI,eAAClW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAnC,2BAAuD2O,EAAQsP,MAAMkQ,YAArE,iBAIJ,eAAC,IAAD,CAAUruB,QAAM,EAACQ,UAAW,GAA5B,UACI,eAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,KAAjC,2BAAqD2O,EAAQsP,MAAMkQ,YAAnE,eAEA,cAAC,IAAD,CACIyJ,GACI9V,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAErG8P,GAA4CzkB,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAEtFzhB,MAAO,CAACC,UAAW,IARvB,SASI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAApB,oCAMpB,eAACyV,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,UAISzrB,EAAQI,MAAMg9D,qBAIX,eAAC,IAAD,CAAUjsE,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAApB,wBACA,cAAC,GAAD,CAAmB8nE,UAAWn5D,EAAQI,MAAMg9D,qBAAsBmH,iCAAiC,IACnG,cAAC18D,EAAA,EAAD,CAASnW,MAAO,CAACC,UAAW,SALhC,KAWHqO,EAAQI,MAAM68D,iBAIX,cAAC,IAAD,CAAU9rE,QAAM,EAACi9E,wBAAyB,CAACC,OAAQ7hE,GAA8BxM,EAAQI,MAAM68D,iBAAiBrhE,MAAOjK,UAAW,KAFlI,QAl4GjB,IAy6GH60E,EAEI,KAEA,EAAK2G,wBAED,cAACrmE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SvHt1GN,IuHw1Gc1rB,EAAKvN,KAED,cAAC,IAAD,CAAUrB,QAAM,EAACQ,UAAW,GAAIgW,cAAc,SAA9C,SACI,eAAClW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAnC,2BAAuD2O,EAAQsP,MAAMkQ,YAArE,iBAIJ,eAAC,IAAD,CAAUruB,QAAM,EAACQ,UAAW,GAA5B,UACI,eAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,KAAjC,2BAAqD2O,EAAQsP,MAAMkQ,YAAnE,eAEA,cAAC,IAAD,CACIyJ,GACI9V,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAErG8P,GAA4CzkB,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAEtFzhB,MAAO,CAACC,UAAW,IARvB,SASI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAApB,mCAMpB,cAACyV,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SACI,eAAC7kB,EAAA,EAAD,WACI,eAACE,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAIr3B,MAAO,CAACC,UAAW,IAA9H,UvHr3GX,IuHu3GmBoO,EAAKvN,KAED,KAEA,cAACf,EAAA,EAAD,CAAY6T,MAAM,SAAS5T,MAAO,CAAC+U,QAAS,GAAIU,gBAAiBC,GAAwCW,aAAc,IAAK1W,QAAQ,QAAQS,MAAM,UAAlJ,+CAIHq1E,EAgBOyF,EAAetxE,OAAS,EAGhB,cAAC,IAAD,CAAU/D,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAAC+U,QAAS,GAAIU,gBAAiBC,IAAuCjW,QAAM,EAAhI,SAEQy7E,EAAexiE,KAAI,SAAAqa,GAAO,OAGlBA,EAAQC,cAAgB3kB,EAAKG,GAEzB,eAAC,IAAD,CAA2B/O,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAAIxQ,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,GAAcU,MAAO,QAApJ,UACI,cAACrW,EAAA,EAAD,CAAYC,MAAO,CAACC,UAAW,GAAIoW,aAAc,IAAK1W,QAAQ,QAAQkG,UAAWyQ,YAAIC,GAAOmlE,WAAY9nE,MAAM,OAA9G,iCACA,cAAC0iC,GAAA,EAAD,CAAW/oC,KAAK,qBAAqBkJ,SAAU,EAAKkkB,cAAe7iB,MAAO6+D,EAAoBr3E,WAAS,EAAC03D,KAAM,EAAGb,WAAS,EAACtwD,UAAWyQ,YAAIC,GAAOqmE,cACjJ,eAAC,IAAD,CAAU38E,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,UACI,cAAC9V,EAAA,EAAD,CAAQE,KAAK,QAAQD,MAAM,UAAUT,QAAQ,OAAOY,QAAS,EAAKk6E,6BAAlE,oBACA,cAACt6E,EAAA,EAAD,CAAQH,MAAO,CAACwE,WAAY,IAAKnE,KAAK,QAAQD,MAAM,UAAUT,QAAQ,WAAWW,SAAWo2E,GAAkBA,EAAe3jD,UAAY4jD,GAA4D,IAArCA,EAAmB5qE,OAAOnC,OAAcrJ,QAAS,EAAKm6E,6BAAtN,uBAKA3nD,EAAQ5C,QAAQzX,KAAI,SAAA0X,GAAK,OACrB,eAAC,IAAD,CAAyBnZ,OAAO,OAAOb,MAAM,OAAO5R,WAAY,GAAIvE,UAAW,GAA/E,UACI,cAACkW,EAAA,EAAD,CAASnW,MAAO,CAACyV,gBAAiBc,GAAOmlE,UAAWzkE,OAAQ,OAAQb,MAAO,KAC3E,eAAC,IAAD,CAAU3W,QAAM,EAAC+E,WAAY,GAAIwS,YAAa,GAAIZ,MAAM,OAAxD,UAEI,cAACrW,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIC,GAAOmlE,WAAY9nE,MAAM,OAApE,SvHn1G7D,IuHq1GqEwc,EAAM7hB,OAAN,kBAEeuM,GAA+BsV,EAAMgpD,cAFpD,kBAIet+D,GAA+BsV,EAAMgpD,gBAK5D,cAAC,IAAD,CACI7hD,GvHl7GlF,IuHm7GsFnH,EAAM1B,OAAO5tB,KAET2gB,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYsjB,EAAM1B,OAAO9C,MAEpG2F,GAA4CzkB,QAAQ,WAAYsjB,EAAM1B,OAAO9C,MAEjFnK,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,UAAWsjB,EAAM1B,OAAOlgB,IAErC+iB,GACKzkB,QAAQ,UAAWsjB,EAAM1B,OAAOlgB,IAjBrD,SAoBI,cAACzO,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SvHr8GlF,IuHu8G0Fwc,EAAM1B,OAAO5tB,KvHv8GvG,IuHy8G8FuN,EAAKvN,MACFuN,EAAKsT,WADR,2BAGwByO,EAAM1B,OAAO7C,OAEjC,iBAPR,aASUuE,EAAM1B,OAAOqV,UATvB,YASoC3T,EAAM1B,OAAOsV,cAM7D,cAACjkC,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAA5D,SAAkEmwB,EAAM0f,YApDjE1f,EAAM5hB,SAXlBukB,EAAQvkB,IAsEvB,eAAC,IAAD,CAA2B3I,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,IAAejW,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA1I,UAEI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIC,GAAOmlE,WAAY9nE,MAAM,OAApE,SvHv5GnD,IuHy5G2Dmf,EAAQxkB,OAAR,kBAEeuM,GAA+BiY,EAAQylD,gBAFtD,kBAIe19D,GAA+BiY,EAAQylD,kBvHr+G5H,IuH2+GkEnqE,EAAKvN,MACFuN,EAAKsT,WAEJ,cAAC,IAAD,CACI4V,GACI9V,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,UAAWimB,EAAQrE,OAAOlgB,IAEvC+iB,GACKzkB,QAAQ,UAAWimB,EAAQrE,OAAOlgB,IATnD,SAYI,eAACzO,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,gBAAmEmf,EAAQrE,OAAOqV,UAAlF,IAA8FhR,EAAQrE,OAAOsV,cAGjH,KAIR,cAACjkC,EAAA,EAAD,CAAYC,MAAO,CAACC,UAAW,IAAKN,QAAQ,QAAQiU,MAAM,OAA1D,SAAkEmf,EAAQA,UvHlgHvI,IuHsgHkE1kB,EAAKvN,MACCuN,EAAKG,KAAO6mE,EAAc7mE,IvHtgHnG,IuHwgHsEH,EAAKvN,MACFwN,EAAQN,eAAe,wBACvBK,EAAKud,OAAStd,EAAQsd,KAGzB,cAAC,IAAD,CAAU3rB,UAAW,GAArB,SACI,cAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWU,KAAK,QAAQwF,UAAWyQ,YAAIxS,GAAakB,mBAChE1E,SAC0B,OAAtBw4E,GACGA,EAAkBtqE,KAAOukB,EAAQvkB,IACjB,OAAhBqqE,EAEPt4E,QAAS,kBAAM,EAAKo6E,uBAAuB5nD,EAAS,OANxD,qBAUJ,KAKkB,OAAtB+lD,GACGA,EAAkBtqE,KAAOukB,EAAQvkB,IACjB,OAAhBqqE,EAEC,cAAC,GAAD,CAAuBE,UAAWA,EAAWF,YAAaA,EAAa8B,uBAAwB,EAAKA,uBAAwBC,qBAAsB,EAAKA,qBAAsBjgD,cAAe,EAAKA,gBAEjM,KAKJ5H,EAAQ5C,QAAQzX,KAAI,SAAA0X,GAAK,OACrB,eAAC,IAAD,CAAyBnZ,OAAO,OAAOb,MAAM,OAAO5R,WAAY,GAAIvE,UAAW,GAA/E,UACI,cAACkW,EAAA,EAAD,CAASnW,MAAO,CAACyV,gBAAiBc,GAAOmlE,UAAWzkE,OAAQ,OAAQb,MAAO,KAC3E,eAAC,IAAD,CAAU3W,QAAM,EAAC+E,WAAY,GAAIwS,YAAa,GAAIZ,MAAM,OAAxD,UAEI,cAACrW,EAAA,EAAD,CAAYJ,QAAQ,QAAQkG,UAAWyQ,YAAIC,GAAOmlE,WAAY9nE,MAAM,OAApE,SvH19G7D,IuH49GqEwc,EAAM7hB,OAAN,kBAEeuM,GAA+BsV,EAAMgpD,cAFpD,kBAIet+D,GAA+BsV,EAAMgpD,gBAK5D,cAAC,IAAD,CACI7hD,GvHzjHlF,IuH0jHsFnH,EAAM1B,OAAO5tB,KAET2gB,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYsjB,EAAM1B,OAAO9C,MAEpG2F,GAA4CzkB,QAAQ,WAAYsjB,EAAM1B,OAAO9C,MAEjFnK,EAEI8P,GACKzkB,QAAQ,iBAAkB2U,GAC1B3U,QAAQ,UAAWsjB,EAAM1B,OAAOlgB,IAErC+iB,GACKzkB,QAAQ,UAAWsjB,EAAM1B,OAAOlgB,IAjBrD,SAoBI,cAACzO,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,SvH5kHlF,IuH8kH0Fwc,EAAM1B,OAAO5tB,KvH9kHvG,IuHglH8FuN,EAAKvN,MACFuN,EAAKsT,WADR,2BAGwByO,EAAM1B,OAAO7C,OAEjC,iBAPR,aASUuE,EAAM1B,OAAOqV,UATvB,YASoC3T,EAAM1B,OAAOsV,cAM7D,cAACjkC,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO5T,MAAO,CAACC,UAAW,IAA5D,SACKmwB,EAAM0f,OvH/lHxF,IuHwmHqFzhC,EAAKvN,OvHvmH3F,IuHwmH0FuN,EAAKvN,MAAiCuN,EAAKsT,aAEhDtT,EAAKG,KAAO6mE,EAAc7mE,IAC1BH,EAAKG,KAAO4hB,EAAMkmD,UAQjB,KANA,eAAC,IAAD,CAAUr2E,UAAW,GAArB,UACI,eAACE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB3E,KAAK,QAAQD,MAAM,YAAYG,QAAS,kBAAM,EAAKs6E,qBAAqBzqD,IAAQpwB,MAAO,CAACgX,YAAa,IAAhL,mBAA2L,cAAC,KAAD,CAAYpS,SAAS,QAAQ5E,MAAO,CAACwE,WAAY,QAE5O,eAACrE,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB3E,KAAK,QAAQD,MAAM,UAAUG,QAAS,kBAAM,EAAKo6E,uBAAuB5nD,EAAS3C,IAA5J,iBAAwK,cAAC,KAAD,CAAUxrB,SAAS,QAAQ5E,MAAO,CAACwE,WAAY,WAQzM,OAAtBs0E,GACGA,EAAkBtqE,KAAOukB,EAAQvkB,IACjB,OAAhBqqE,GACAA,EAAYrqE,KAAO4hB,EAAM5hB,GAExB,cAAC,GAAD,CAAuBuqE,UAAWA,EAAWF,YAAaA,EAAa8B,uBAAwB,EAAKA,uBAAwBC,qBAAsB,EAAKA,qBAAsBjgD,cAAe,EAAKA,gBAEjM,UAtFDvK,EAAM5hB,SA5ElBukB,EAAQvkB,SvH/9G9E,IuH8oH+BH,EAAKvN,KAED,cAAC,IAAD,CAAUmV,cAAc,SAASF,cAAc,SAAStW,QAAM,EAACO,MAAO,CAAC+U,QAAS,GAAIU,gBAAiBC,IAArG,SACI,cAAC3V,EAAA,EAAD,CAAYJ,QAAQ,QAApB,+BAGJ,eAAC,IAAD,CAAUsW,cAAc,SAASF,cAAc,SAAStW,QAAM,EAACO,MAAO,CAAC+U,QAAS,GAAIU,gBAAiBC,IAArG,UACI,cAAC3V,EAAA,EAAD,CAAYJ,QAAQ,QAApB,6BACA,eAAC,IAAD,CAAUM,UAAW,GAAIR,QAAM,EAACwW,cAAc,SAA9C,UACI,8BACI,cAAC9V,EAAA,EAAD,CAAQE,KAAK,QAAQE,QAAS,EAAKi6E,oBAAqB76E,QAAQ,WAAWS,MAAM,UAAUd,WAAW,EAClGgB,SACIwa,GAAoBxM,IvH1pH3E,IuH2pH0DD,EAAKvN,OACJ44C,EAJZ,8BAUA,EAAKmiC,0CAhS7B,cAAC,IAAD,CAAU57E,UAAW,GAAIgW,cAAc,SAASG,MAAM,OAAtD,SACI,cAAC,KAAD,CACIhW,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,UAmS5B,cAACN,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAIr3B,MAAO,CAACC,UAAW,IAA9H,SvH1qHX,IuH6qHmBoO,EAAKvN,KAG0E,IAAvEgyB,EAAS/Q,QAAO,SAAAgR,GAAO,OAAIA,EAAQC,cAAgB3kB,EAAKG,MAAI5E,OAExD,eAAC,IAAD,CAAUnK,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAO5T,MAAO,CAACqW,aAAc,IAAnE,+GAIIo/D,GAAkB3iD,EAASlpB,OAAS,EAEhC,8BACI,cAACzJ,EAAA,EAAD,CAAQE,KAAK,QAAQE,QAAS,EAAKi6E,oBAAqB76E,QAAQ,WAAWS,MAAM,UAASd,WAAW,EACjGgB,SACIwa,GAAoBxM,IvH5rH3E,IuH6rH0DD,EAAKvN,OACJ44C,EAJZ,8BASJ,KAKJ+7B,GAAkB3iD,EAASlpB,OAAS,EAEhC,EAAKiyE,oCAEL,QAIZ,cAAC97E,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,wGAGR,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,oFA3yHxB,IAqzHJkhE,EAEI,KAEA,EAAK2G,wBAED,cAACrmE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SvHjuHN,IuHmuHc1rB,EAAKvN,KAED,cAAC,IAAD,CAAUrB,QAAM,EAACQ,UAAW,GAAIgW,cAAc,SAA9C,SACI,eAAClW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAnC,2BAAuD2O,EAAQsP,MAAMkQ,YAArE,iBAGJ,eAAC,IAAD,CAAUruB,QAAM,EAACQ,UAAW,GAA5B,UACI,eAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,KAAjC,2BAAqD2O,EAAQsP,MAAMkQ,YAAnE,eACA,cAAC,IAAD,CACIyJ,GACI9V,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAErG8P,GAA4CzkB,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAEtFzhB,MAAO,CAACC,UAAW,IARvB,SASI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAApB,mCAMpB,eAACyV,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA1E,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,kCAGIkO,EAAQI,MAAMq9D,sBAAyH,IAAlGz9D,EAAQI,MAAMq9D,oBAAoBjiE,WAAU,SAAAqD,GAAQ,OAAKA,EAASa,eAAe,cAElH,cAAC,GAAD,CAAmBy5D,UAAWn5D,EAAQI,MAAMq9D,oBAAqB8G,iCAAiC,IAElG,cAAC9yE,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBJ,MAAO,CAACC,UAAW,IAArE,kDA11HpB,IAi2HA60E,EAEI,KAEA,EAAK2G,wBAED,cAACrmE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SvH/wHN,IuHixHc1rB,EAAKvN,KAED,cAAC,IAAD,CAAUrB,QAAM,EAACQ,UAAW,GAAIgW,cAAc,SAA9C,SACI,eAAClW,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAnC,2BAAuD2O,EAAQsP,MAAMkQ,YAArE,iBAGJ,eAAC,IAAD,CAAUruB,QAAM,EAACQ,UAAW,GAA5B,UACI,eAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,KAAjC,2BAAqD2O,EAAQsP,MAAMkQ,YAAnE,eAEA,cAAC,IAAD,CACIyJ,GACI9V,EAEI8P,GAA0BzkB,QAAQ,iBAAkB2U,GAAe3U,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAErG8P,GAA4CzkB,QAAQ,WAAYwB,EAAQsP,MAAM6D,eAEtFzhB,MAAO,CAACC,UAAW,IARvB,SASI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAApB,mCAMpB,eAACyV,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,IAA1E,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,UAA/B,+BAIKkO,EAAQI,MAAMV,eAAe,kBAI1B,cAAC,IAAD,CAAUnI,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,IAAuCjW,QAAM,EAACQ,UAAW,GAAI8V,cAAc,SAAjJ,SACI,eAAChW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,gEACI,4BACKtF,EAAQI,MAAMk7D,sBAL3B,KAYR,cAAC,IAAD,CAAU/jE,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,IAAuCjW,QAAM,EAACQ,UAAW,GAAI8V,cAAc,SAAjJ,SACI,eAAChW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,6CAA6E,4BAElC,IAA/BtF,EAAQI,MAAM08D,aAEV,OAFJ,cAIQh0B,OAAO9oC,EAAQI,MAAM08D,aAAa5gE,QAAQ,IAAI6sC,yBA6BjE/oC,EAAQI,MAAMV,eAAe,wBAI1B,cAAC,IAAD,CAAUnI,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,IAAuCjW,QAAM,EAACQ,UAAW,GAAI8V,cAAc,SAAjJ,SACI,eAAChW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mCAAgEtF,EAAQI,MAAMi7D,0BAHlF,KASHr7D,EAAQI,MAAMV,eAAe,wCAI1B,cAAC,IAAD,CAAUnI,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,IAAuCjW,QAAM,EAACQ,UAAW,GAAI8V,cAAc,SAAjJ,SACI,eAAChW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sDAAkF,uBAAK,uBAAvF,IAA8FtF,EAAQI,MAAMo7D,0CAHhH,KASJx7D,EAAQI,MAAMV,eAAe,oBAIjBD,GACqC,QAAlCA,EAAgB0T,gBvH33H7C,IuH83H2BpT,EAAKvN,MACCuN,EAAKud,OAAS7d,EAAgB6d,MvHh4H9D,IuHi4H6Bvd,EAAKvN,MACFuN,EAAKG,KAAOF,EAAQG,YAK9BV,GvHt4HvB,IuHu4HyBM,EAAKvN,MACLuN,EAAKsT,YAIZ,cAAC,IAAD,CAAU9b,UAAWyQ,YAAIC,GAAOqmE,YAAa58E,MAAO,CAACyV,gBAAiBC,IAAuCjW,QAAM,EAACQ,UAAW,GAAI8V,cAAc,SAAjJ,SACI,eAAChW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,wDACI,uBAAK,uBACJtF,EAAQI,MAAMo8D,oBAIvB,WAO5B,cAAC51D,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SACI,cAAC,GAAD,Y,EAYpB8hD,kCAAoC,WAChC,MAKI,EAAK/8E,MAJL2iB,EADJ,EACIA,cACApT,EAFJ,EAEIA,KACAqrC,EAHJ,EAGIA,mCACAprC,EAJJ,EAIIA,QAGJ,OvHl7HqB,IuHk7HjBD,EAAKvN,KACE,KAIPga,GAAoBxM,KAChBorC,EAEA,eAAC,IAAD,CAAUj6C,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAM,gBAA/C,oGACA,cAAC,IAAD,CACIm3B,GACiB,UAAb9V,EAEO8P,GAA0BzkB,QAAQ,iBAAkB2U,GAEpD8P,GAJM,gBAMjBvxB,MAAO,CACHC,UAAW,GATnB,SAYI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,QAApB,SAA4B,oDAIpC,M,EAiBZ87E,sBAAwB,WACpB,MAII,EAAK38E,MAHLwP,EADJ,EACIA,QACAD,EAFJ,EAEIA,KACAse,EAHJ,EAGIA,eAIJ,GvHn+HkB,IuHm+Hdte,EAAKvN,KA0BL,OvH9/He,IuH8/HXuN,EAAKvN,MAAiCuN,EAAKG,KAAOF,EAAQG,aAKzDke,GvHr/H4B,IuH0/H7Bre,EAAQgkB,aAM+D,IAApE3F,EAAe7iB,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAAStd,EAAQsd,SAxChE,GAAIvd,EAAKsT,WACL,OAAO,EAIX,GAAItT,EAAKud,OAAStd,EAAQsd,KACtB,OAAO,EAIX,OAAQtd,EAAQgkB,YACZ,KvHl+HyB,EuHm+HrB,OAAO,EACX,KvHr+H6B,EuHu+H7B,KvHx+H0B,EuH0+H1B,QACI,OAAO,I,EA6BvBspD,oBAAsB,WAClB,IACIttE,EACA,EAAKxP,MADLwP,QAGAuuE,EAAM,CAAC/sC,KAAM,GAAI1vC,MAAO,IAE5B,GAAI0a,GAA+BxM,IAC5BwM,GAAgCxM,IAChCwM,GAA0BxM,IAC1BwM,GAAsBxM,GAEzB,OACI,cAAC,IAAD,CAAUrO,UAAW,GAAIoW,aAAc,GAAvC,SACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,QAAQwT,MAAM,OAAhD,SAEQkH,GAA+BxM,GAE3B,0BAEAwM,GAAgCxM,GAE5B,2BAEA,oBAO5B,GAAIA,EAAQskB,aACR,OAAQtkB,EAAQskB,aAAarkB,QACzB,KvHz/H6B,EuH0/HzB,OACI,eAAC,IAAD,CAAU9O,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,UAAUwT,MAAM,OAAlD,sCACA,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,cAAcwT,MAAM,OAAnD,SAA2DkH,GAAexM,EAAQskB,aAAauB,eAC/F,cAACp0B,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,+BAGZ,KvHhgI4B,EuHigIxBipE,EAAI/sC,KAAO,sBACX+sC,EAAIz8E,MAAQ,eAMpB,OAAQkO,EAAQI,MAAMH,QAClB,KvHphIqB,EuHqhIjB,OACI,eAAC,IAAD,CAAU9O,QAAM,EAACQ,UAAW,GAAIoW,aAAc,GAA9C,UACI,cAACtW,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,UAAUwT,MAAM,OAAlD,qCAEA,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,cAAcwT,MAAM,OAAnD,SAA2DkH,GAAexM,EAAQI,MAAMylB,eACxF,cAACp0B,EAAA,EAAD,CAAYJ,QAAQ,QAAQS,MAAM,gBAAgBwT,MAAM,OAAxD,+BAIZ,KvHzhI0C,EuH0hItCipE,EAAI/sC,KAAO,sCACX+sC,EAAIz8E,MAAQ,gBACZ,MACJ,KvHhiIqB,EuHiiIjBy8E,EAAI/sC,KAAO,0CACX+sC,EAAIz8E,MAAQ,QACZ,MACJ,KvH/hI8B,EuHgiI1By8E,EAAI/sC,KAAO,8CACX+sC,EAAIz8E,MAAQ,gBAOxB,OACI,cAAC,IAAD,CAAUH,UAAW,GAAIoW,aAAc,GAAvC,SACI,cAACtW,EAAA,EAAD,CAAY6T,MAAM,OAAOjU,QAAQ,QAAQS,MAAOy8E,EAAIz8E,MAApD,SAA4Dy8E,EAAI/sC,U,EAQ5EgtC,mBAAqB,WACjB,MAKI,EAAKh+E,MAJLwP,EADJ,EACIA,QACAD,EAFJ,EAEIA,KACAse,EAHJ,EAGIA,eACA+sB,EAJJ,EAIIA,mCAKJ,OAAIprC,EAAQG,WAAa5Q,EAASyS,OAAOkR,YAAYwM,KvHrnInC,IuHsnIX3f,EAAKvN,QAKP6rB,IvH7mI4B,IuHknI7Bre,EAAQgkB,aAC+D,IAApE3F,EAAe7iB,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAAStd,EAAQsd,UvHnoI3C,IuHyoIjBvd,EAAKvN,OACA44C,IvHzoIU,IuH+oIfrrC,EAAKvN,OvH5lIoB,IuHimIzBwN,EAAQI,MAAMH,aAAlB,Q,EAYJwuE,YAAc,SAAAj8E,GACV,IAEI8wB,EACA,EAAK9yB,MADL8yB,MAGAorD,EAAW,EACXC,EAAU,EAad,OAXArrD,EAAMnmB,SAAQ,SAAAqmB,GACV,IAAMsB,EAAQtB,EAAKsB,MACL,KAAVA,IACIA,EACA4pD,GAAY,EAEZC,GAAW,MAKnBn8E,EACOk8E,EAEAC,G,4CAxOf,WACI,OACI,cAACjoE,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,SAEQlW,KAAK2vD,0B,GA7oEI/tD,aA63EvB62E,GAAkB,SAAC1lD,EAAOvjB,GAC5B,GAAqB,IAAjBujB,EAAMhoB,OACN,OAAO,KAGX,IAAIszE,EAAoBtrD,EAAM9nB,WAAU,SAAAgoB,GAAI,OAAIA,EAAKC,aAAe1jB,EAAKG,MAEzE,OAA2B,IAAvB0uE,EACOtrD,EAAMsrD,GAGV,MAMLC,G,4MAEFhpE,QAAU,WACN,EAAKrV,MAAMqV,W,EAGf4mE,qBAAuB,SAAAxhE,GACnB,EAAKza,MAAMi8E,qBAAqBxhE,I,EAGpCyhE,qBAAuB,WACnB,EAAKl8E,MAAMk8E,wB,4CAGf,WACI,MAKIn8E,KAAKC,MAJLO,EADJ,EACIA,KACAiP,EAFJ,EAEIA,QACA6pE,EAHJ,EAGIA,YACAC,EAJJ,EAIIA,mBAGJ,OAAK9pE,EAKD,eAACnP,EAAA,EAAD,CAAQG,WAAS,EAACD,KAAMA,EAAM8U,QAAStV,KAAKsV,QAA5C,UACI,cAAC5U,EAAA,EAAD,6BACA,eAACC,EAAA,EAAD,WACI,cAAC49E,GAAA,EAAD,CAAmBxpE,MAAM,OAAzB,6CACA,cAAC0iC,GAAA,EAAD,CAAW/qC,MAAqC,IAA9B4sE,EAAYpsE,OAAOnC,QAAgBwuE,EAAoB7qE,KAAK,cAAcuK,MAAOqgE,EAAa1hE,SAAU5X,KAAKk8E,qBAAsB/jB,KAAM,EAAG13D,WAAS,EAAC62D,WAAS,EAACtwD,UAAWyQ,YAAIC,GAAOqmE,iBAE5M,eAAC18E,EAAA,EAAD,CAAeF,MAAO,CAAC2V,WAAY,GAAIC,cAAe,GAAIE,aAAc,IAAxE,UACI,cAAC3V,EAAA,EAAD,CAAQE,KAAK,QAAQD,MAAM,UAAUT,QAAQ,OAAOY,QAAS1B,KAAKsV,QAAlE,oBACA,cAAChU,EAAA,EAAD,CAAQG,SAAU63E,EAAYpsE,OAAOnC,OAAS,GAAKwuE,EAAoBp4E,MAAO,CAACwE,WAAY,IAAKnE,KAAK,QAAQD,MAAM,UAAUT,QAAQ,WAAWY,QAAS1B,KAAKm8E,qBAA9J,gCAZD,S,GAvBSv6E,aA6CtB48E,G,4MAEF1C,uBAAyB,SAAC5nD,EAAS8lD,GAC/B,EAAK/5E,MAAM67E,uBAAuB5nD,EAAS8lD,I,EAG/C+B,qBAAuB,WACnB,EAAK97E,MAAM87E,wB,EAGfjgD,cAAgB,SAAAphB,GACZ,EAAKza,MAAM67B,cAAcphB,I,4CAG7B,WAAU,IAAD,OAEDw/D,EACAl6E,KAAKC,MADLi6E,UAGJ,OACI,eAAC,IAAD,CAAUt5E,QAAM,EAACQ,UAAW,GAAImW,MAAM,OAAtC,UACI,cAACkgC,GAAA,EAAD,CAAW/oC,KAAK,YAAYuK,MAAOihE,EAAWtiE,SAAU5X,KAAK87B,cAAeq8B,KAAM,EAAG13D,WAAS,EAAC62D,WAAS,EAACtwD,UAAWyQ,YAAIC,GAAOqmE,cAC/H,eAAC,IAAD,CAAU38E,UAAW,GAAImW,MAAM,OAAOH,cAAc,QAApD,UACI,cAAC9V,EAAA,EAAD,CAAQE,KAAK,QAAQD,MAAM,UAAUT,QAAQ,OAAOkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAM,EAAKo6E,uBAAuB,KAAM,OAArJ,oBACA,cAACx6E,EAAA,EAAD,CAAQG,SAAsC,IAA5By4E,EAAUhtE,OAAOnC,OAAc5J,MAAO,CAACwE,WAAY,IAAKnE,KAAK,QAAQD,MAAM,UAAUT,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS1B,KAAK+7E,qBAAxL,8B,GAxBgBn6E,aA+BrBC,gBAj3IS,SAACC,GACrB,MAAO,CACH4gB,oBAAqB5gB,EAAM4gB,oBAE3B1N,SAAUlT,EAAMoY,gBAAgBlF,SAEhC4N,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDI,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B7qB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WACvBi/C,gBAAiBp5E,EAAM2P,KAAKypE,gBAC5BptD,eAAgBhsB,EAAM2P,KAAKqc,eAG3B8rB,0CAA2C93C,EAAMmtC,yCAAyChkB,OAC1F4vB,mCAAoC/4C,EAAMmtC,yCAAyC4L,mCACnFhB,yCAA0C/3C,EAAMmtC,yCAAyC4K,yCACzFC,8CAA+Ch4C,EAAMmtC,yCAAyC6K,8CAG9FpmB,yBAA0B5xB,EAAM2nE,8BAA8B/1C,6BAI3C,SAAC1xB,GACxB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAGjC+gB,2CAA4C,SAAC9qB,GAAD,OAASntB,EAAS2+C,GAAmDxxB,KACjHigB,uCAAwC,kBAAMptC,EAAS2+C,OAGvDg2B,wBAAyB,SAAClnE,GAAD,OAAazN,ENhIpB,SAAAyN,GACtB,OAAO,SAACzN,EAAUwP,GACd,IAAMitE,EAAcjtE,IAAWktE,mBAAmBjvE,QAG9CgvE,GAAeA,EAAY9uE,KAAOF,EAAQE,IAI9C3N,EAAS,CACLC,KAAMqxE,GACN7jE,aMqH2CkvE,CAA+BlvE,KAC9E0rE,4CAA6C,kBAAMn5E,GNoGhD,SAACA,EAAUwP,GACVqiE,KACAA,GAAgB7yC,IAAI,eACpB6yC,GAAgB7yC,IAAI,iBACpB6yC,GAAgB7yC,IAAI,iBACpB6yC,GAAkB,UMvGtBuH,gCAAiC,kBAAMp5E,EAAS48E,OAChDvD,8BAA+B,SAAC5rE,GAAD,OAAazN,ERrH1B,SAACyN,GACvB,MAAO,CACHxN,KAAMkwE,GACN1iE,QAASA,GQkH4CmvE,CAAqCnvE,KAE1F28D,mCAAoC,SAAC38D,GAAD,OAAazN,EAAS0nE,GAA0Cj6D,KAEpGyB,2BAA4B,SAACC,EAAS5P,EAAO6P,GAAjB,OAA8BpP,EAASyY,GAAmDtJ,EAAS5P,EAAO6P,KAEtIujE,8BAA+B,SAACliD,EAAamiD,GAAd,OAAoC5yE,EAAS2yE,GAA8BliD,EAAamiD,QA+zIhH/yE,CAA6Cg0E,IAGtDn+D,GAASxS,IAAWC,OAAO,CAC7B03E,UAAW,CACPt7E,MzH97IgB,WyHi8IpBs9E,QAAS,CACL54E,OAAO,aAAD,OAAe4Q,IACrB3Q,UAAW,OACX0Q,gBAAiBC,GACjBW,aAAc,GACd,SAAU,CACNZ,gBAAiBC,KAIzBknE,WAAY,CACR93E,OAAO,aAAD,OAAe4Q,IACrBX,QAAS,IAGb0nE,wBAAyB,CACrB33E,OAAO,aAAD,OAAe4Q,IACrBX,QAAS,GACTU,gBAAiBC,IAGrBomE,yBAA0B,CACtB7rE,SAAU,SACVsH,IAAK,EACL9B,gBAAiBC,GACjB8B,OAAQ,GAGZ2kE,kBAAmB,CACfx5B,UAAW,IACX5tC,QAAS,GACTU,gBAAiBC,IAGrBvQ,WAAY,CACR/E,MAAOsV,MCv+ITioE,I,yDAEF,WAAY7+E,GAAQ,IAAD,8BACf,cAAMA,IAED6B,MAAQ,CACTgc,eAAgB,KAChB4yC,sBAAsB,GALX,E,qDASnB,WAAqB,IAAD,OAChBv5B,KAEK/qB,MAAK,SAAA0R,GACF,EAAKsb,SAAS,CACVtb,eAAgBA,EAChB4yC,sBAAsB,S,oBAKtC,WACI,MAGI1wD,KAAK8B,MAFLgc,EADJ,EACIA,eACA4yC,EAFJ,EAEIA,qBAGJ,OACI,cAACv6C,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAOSw6C,EAuBG,cAACr6C,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,UAMI,cAACN,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,SAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH2V,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,IATtB,SAYI,cAAC/V,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,SAII,4BAAI,iBAAiBuwB,sBAKjC,cAACjvB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH6V,YAAa,GACbC,aAAc,IAPtB,SAWS6G,EAAem6C,cAIZ,cAAC,IAAD,CACIr3D,QAAM,EACNi9E,wBAAyB,CAACC,OAAQ7hE,GAA8B6B,EAAem6C,cAAc5sD,MAC7FjK,UAAW,KALf,cAzExB,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,IAAD,CACIY,MAAM,OACNnW,UAAW,GACXgW,cAAc,SAHlB,SAKI,cAAC,KAAD,CACI7V,MAAOsV,iB,GArDfjV,cAiIjBC,gBArIS,SAAAC,GACpB,MAAO,KAoIID,CAAyBi9E,ICjIlCC,G,kDAEF,WAAY9+E,GAAQ,IAAD,8BACf,cAAMA,IAED6B,MAAQ,CACTgc,eAAgB,KAChB4yC,sBAAsB,GALX,E,qDASnB,WAAqB,IAAD,OAChBv5B,KAEK/qB,MAAK,SAAA0R,GACF,EAAKsb,SAAS,CACVtb,eAAgBA,EAChB4yC,sBAAsB,S,oBAKtC,WACI,MAGI1wD,KAAK8B,MAFLgc,EADJ,EACIA,eACA4yC,EAFJ,EAEIA,qBAGJ,OACI,cAACv6C,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAOSw6C,EAuBG,cAACr6C,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,UAMI,cAACN,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,SAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH2V,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,IATtB,SAYI,cAAC/V,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,SAII,4BAAI,eAAeuwB,sBAK/B,cAACjvB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH6V,YAAa,GACbC,aAAc,IAPtB,SAWS6G,EAAeo6C,WAIZ,cAAC,IAAD,CACIt3D,QAAM,EACNi9E,wBAAyB,CAACC,OAAQ7hE,GAA8B6B,EAAeo6C,WAAW7sD,MAC1FjK,UAAW,KALf,cAzExB,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,IAAD,CACIY,MAAM,OACNnW,UAAW,GACXgW,cAAc,SAHlB,SAKI,cAAC,KAAD,CACI7V,MAAOsV,iB,GArDlBjV,aAiIdC,gBArIS,SAAAC,GACpB,MAAO,KAoIID,CAAyBk9E,ICjIlCC,G,kDAEF,WAAY/+E,GAAQ,IAAD,8BACf,cAAMA,IAED6B,MAAQ,CACTgc,eAAgB,KAChB4yC,sBAAsB,GALX,E,qDASnB,WAAqB,IAAD,OAChBv5B,KAEK/qB,MAAK,SAAA0R,GACF,EAAKsb,SAAS,CACVtb,eAAgBA,EAChB4yC,sBAAsB,S,oBAKtC,WACI,MAGI1wD,KAAK8B,MAFLgc,EADJ,EACIA,eACA4yC,EAFJ,EAEIA,qBAGJ,OACI,cAACv6C,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAOSw6C,EAuBG,cAACr6C,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,UAMI,cAACN,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,SAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH2V,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,IATtB,SAYI,cAAC/V,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,SAII,4BAAI,eAAeuwB,sBAK/B,cAACjvB,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH6V,YAAa,GACbC,aAAc,IAPtB,SAWS6G,EAAes6C,YAIZ,cAAC,IAAD,CACIx3D,QAAM,EACNi9E,wBAAyB,CAACC,OAAQ7hE,GAA8B6B,EAAes6C,YAAY/sD,MAC3FjK,UAAW,KALf,cArExB,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,IAAD,CACIY,MAAM,OACNnW,UAAW,GACXgW,cAAc,SAHlB,SAKI,cAAC,KAAD,CACI7V,MAAOsV,iB,GArDjBjV,aA6HfC,gBAjIS,SAAAC,GACpB,MAAO,KAgIID,CAAyBm9E,IC7HlCC,G,kDAEF,WAAYh/E,GAAQ,IAAD,8BACf,cAAMA,IAED6B,MAAQ,CACTgc,eAAgB,KAChB4yC,sBAAsB,GALX,E,qDASnB,WAAqB,IAAD,OAChBv5B,KAEK/qB,MAAK,SAAA0R,GACF,EAAKsb,SAAS,CACVtb,eAAgBA,EAChB4yC,sBAAsB,S,oBAKtC,WACI,MAGI1wD,KAAK8B,MAFLgc,EADJ,EACIA,eACA4yC,EAFJ,EAEIA,qBAGJ,OACI,cAACv6C,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAOSw6C,EAUG,cAACr6C,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,eAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,UACI,cAACN,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACyV,gBAAiBC,IAAxC,SACI,cAACN,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAAC2V,WAAY,GAAIC,cAAe,GAAIC,YAAa,GAAIC,aAAc,IAAjI,SACI,cAAC/V,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,SACI,4BAAI,oCAAoCuwB,sBAKpD,cAACjvB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH6V,YAAa,GACbC,aAAc,IAPtB,SAWS6G,EAAeu6C,8BAIZ,cAAC,IAAD,CACIz3D,QAAM,EACNi9E,wBAAyB,CAACC,OAAQ7hE,GAA8B6B,EAAeu6C,8BAA8BhtD,MAC7GjK,UAAW,KALf,cAlCxB,cAACiV,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,IAAD,CAAUY,MAAM,OAAOnW,UAAW,GAAIgW,cAAc,SAApD,SACI,cAAC,KAAD,CAAY7V,MAAOsV,iB,GAzCPjV,aA0FjCC,gBA9FS,SAAAC,GACpB,MAAO,KA6FID,CAAyBo9E,IC7ElCC,GAAW,CACb,mBACA,8BACA,uCACA,eA6BEvV,GAAY,CACd38C,MAAO,GACPE,QAAS,IACTxe,KAAM,GACNue,MAAO,GACPE,YAAa,GAEbgyD,aAAa,EACbC,SAAS,EACT1yE,OAAO,EAEP2yE,YAAY,GAGVC,G,kDAEF,WAAYr/E,GAAQ,IAAD,8BACf,cAAMA,IAwEVs/E,cAAgB,SAAA7kE,GACZA,EAAM6e,iBAEN,MAOI,EAAKt5B,MANL6d,EADJ,EACIA,eACA5O,EAFJ,EAEIA,gBAEAM,EAJJ,EAIIA,KAEA0B,EANJ,EAMIA,2BAGJ,EAMI,EAAKpP,MALLkrB,EADJ,EACIA,MACAE,EAFJ,EAEIA,QACAxe,EAHJ,EAGIA,KACAue,EAJJ,EAIIA,MACAE,EALJ,EAKIA,YAGJ,GAA4B,IAAxBH,EAAM9f,OAAOnC,QACE,MAAZmiB,GACuB,IAAvBxe,EAAKxB,OAAOnC,QACkB,IAA9BoiB,EAAYjgB,OAAOnC,OAH1B,CAWA,EAAKquB,SAAS,CACVgmD,SAAS,IAGb,IAAI5xD,EAAUte,EAAkBA,EAAgB6d,KAAO,oBAEvD+lC,GACe,CACPlC,UAAW9yC,EAAe8yC,UAC1Bj9B,U7ClLa,E6CmLbpnB,KAAM,CACFmgD,OAAQ1/B,EAAM7hB,cACdshD,SAAUj/B,EACVN,UACAC,cACAqyD,WAAY9wE,EACZ+wE,YAAaxyD,KAGpB7gB,MAAK,WACF,EAAKgtB,SAAL,eACOuwC,KAGPz4D,EACI,yCACA,UACA,UAGJimB,GACyB,CACjBlM,OAAQzb,EAAOA,EAAKG,GAAK,KACzBod,KAAO7d,EAA8CA,EAAgB6d,KAA5C,0BACzBC,MAAOA,EAAM7hB,cACbuD,OACAue,QACAC,UACAC,gBAEH/gB,MAAK,SAAAihB,GAEE7d,GACA2nB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,a5HhGF,E4HiGEC,yBAA0Bvc,GAC1Bwc,mBAAoBiC,EACpBhC,gBAAiB8L,GAA0DlpB,QAAQ,UAAWiB,EAAgB+f,kBAI7Hva,OAAM,SAAAhI,UAIdgI,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV1sB,OAAO,EACP0yE,SAAS,YAlEjB,EAAKhmD,SAAS,CACV+lD,aAAa,KAnGN,EA8KnBrjD,cAAgB,SAAAphB,GACZ,EAAK0e,SAAS,CACV,CAAC1e,EAAMyD,OAAOzP,MAAOgM,EAAMyD,OAAOlF,SA7KtC,EAAKnX,MAAL,eACO6nE,IAJQ,E,qDAQnB,WACI,MAUI3pE,KAAKC,MATL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBACA1oB,EAHJ,EAGIA,KACAysB,EAJJ,EAIIA,WAEA3E,EANJ,EAMIA,2BACAG,EAPJ,EAOIA,sCAEAK,EATJ,EASIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAAoBA,GAAqC1nB,EAAM2vB,MAEpJ7C,IAEIC,GAAyBG,GACrB+D,GACIzsB,IACKxP,KAAK8B,MAAMu9E,YACZr/E,KAAKo5B,SAAS,CACVpM,MAAOxd,EAAKwd,MACZte,KAAMc,EAAK01B,UAAY,IAAM11B,EAAK21B,SAClCk6C,YAAY,O,gCAQpC,SAAmBzkD,EAAWC,EAAWhnB,GACrC,MAOI7T,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBACA1oB,EAHJ,EAGIA,KACAysB,EAJJ,EAIIA,YAKJnE,EATA,EAMIA,oBAKAC,GAAyBG,GACrB+D,GACIzsB,IACKxP,KAAK8B,MAAMu9E,YACZr/E,KAAKo5B,SAAS,CACVpM,MAAOxd,EAAKwd,MACZte,KAAMc,EAAK01B,UAAY,IAAM11B,EAAK21B,SAClCk6C,YAAY,O,oBAsHpC,WACI,MAQIr/E,KAAKC,MAPLi4B,EADJ,EACIA,oBACAhpB,EAFJ,EAEIA,gBACA6oB,EAHJ,EAGIA,sBAEAsC,EALJ,EAKIA,eACA4B,EANJ,EAMIA,WACAy0B,EAPJ,EAOIA,qBAGJ,EAQI1wD,KAAK8B,MAPLkrB,EADJ,EACIA,MACAE,EAFJ,EAEIA,QACAxe,EAHJ,EAGIA,KACAue,EAJJ,EAIIA,MACAE,EALJ,EAKIA,YACAgyD,EANJ,EAMIA,YACAC,EAPJ,EAOIA,QAGJ,OAAKrnD,EAaAG,GAIDmC,GAAmB4B,GAAey0B,EAqBlC,eAACv6C,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,UACI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAAC+U,QAAS,IAAhC,SACI,cAACK,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAtE,SACI,uBAAMI,SAAUt7B,KAAKu/E,cAArB,UACI,eAAC,IAAD,CAAU3+E,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAApB,SACI,6CAGJ,cAAC,IAAD,CAAUyW,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAACrxC,MAAOyyE,GAAuC,IAAxBnyD,EAAM9f,OAAOnC,OAAnE,UACI,cAAC4xC,GAAA,EAAD,kCACA,cAACv/B,GAAA,EAAD,CAAWnE,MAAO+T,EAAOte,KAAK,QAAQ5N,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,cAAepvB,MAAOyyE,GAAuC,IAAxBnyD,EAAM9f,OAAOnC,cAIjJ,cAAC,IAAD,CAAUwM,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAACrxC,MAAOyyE,GAA2B,MAAZjyD,EAAtD,UACI,cAACyvB,GAAA,EAAD,sBAGA,eAAC7E,GAAA,EAAD,CAAQppC,KAAK,UAAUuK,MAAOiU,EAASpsB,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,cAAeic,MAAO,cAACC,GAAA,EAAD,IAAkBtrC,MAAOyyE,GAA2B,MAAZjyD,EAAtJ,UACI,cAAC+qB,GAAA,EAAD,CAAUh/B,MAAO,IAAjB,eAA4B,GAIxBimE,GAASrlE,KAAI,SAACqT,EAASjgB,GAAV,OACT,cAACgrC,GAAA,EAAD,CACIh/B,MAAOiU,EADX,SAIKA,GAFIjgB,cAU7B,cAAC,IAAD,CAAUsK,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAACk8C,GAAA,EAAD,mBAGA,cAACv/B,GAAA,EAAD,CAAWnE,MAAOvK,EAAMA,KAAK,OAAO5N,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,cAAepvB,MAAOyyE,GAAsC,IAAvBzwE,EAAKxB,OAAOnC,cAI9I,cAAC,IAAD,CAAUwM,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAACk8C,GAAA,EAAD,2BAGA,cAACv/B,GAAA,EAAD,CAAWnE,MAAOgU,EAAOve,KAAK,QAAQ5N,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,wBAKnG,cAAC,IAAD,CAAUvkB,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAACrxC,MAAOyyE,GAA6C,IAA9BhyD,EAAYjgB,OAAOnC,OAAzE,UACI,cAAC4xC,GAAA,EAAD,0BAGA,cAACv/B,GAAA,EAAD,CAAWnE,MAAOkU,EAAaze,KAAK,cAAc5N,QAAQ,WAAWa,OAAO,QAAQ21D,WAAS,EAACa,KAAM,EAAGZ,QAAS,EAAG3/C,SAAU5X,KAAK87B,cAAepvB,MAAOyyE,GAA6C,IAA9BhyD,EAAYjgB,OAAOnC,SAC1L,cAACkzC,GAAA,EAAD,4HAOJmhC,EAEI,cAAC,IAAD,CAAUh+E,UAAW,GAAImW,MAAM,OAAOH,cAAc,SAApD,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAOhB,KAGR,cAACR,EAAA,EAAD,UAEI,cAACE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGxV,MAAO,CAACoW,MAAO,OAAQnW,UAAW,IAArE,SACI,cAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,SACI,cAACa,EAAA,EAAD,CAAQW,KAAK,SAASnB,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB5E,MAAM,UAAUd,WAAS,EAAnH,iCAUxB,cAAC4V,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,GAAD,WA3HR,cAAC,IAAD,CACIY,MAAM,OACNnW,UAAW,GACXgW,cAAc,SAHlB,SAKI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAdb,cAAC,GAAD,IAZH,cAAC,IAAD,CACIzV,UAAW,GACXgW,cAAc,SAFlB,SAII,cAAC,KAAD,CACI7V,MAAOsV,W,GAlNPjV,aAiWTC,gBAzYS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD1oB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WACvB5B,eAAgBv4B,EAAM2P,KAAK4oB,eAE3Bvc,eAAgBhc,EAAM+b,qBAAqBC,eAC3C4yC,qBAAsB5uD,EAAM+b,qBAAqB6yC,yBAI9B,SAAA1uD,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjChoB,2BAA4B,SAACC,EAAS5P,EAAO6P,GAAjB,OAA8BpP,EAASyY,GAAmDtJ,EAAS5P,EAAO6P,QAmX/HvP,CAA6Cy9E,IChZtDJ,GAAW,CACb,mBACA,8BACA,uCACA,eA6BEvV,GAAY,CACd38C,MAAO,GACPE,QAAS,IACTxe,KAAM,GACNue,MAAO,GACPE,YAAa,GAEbgyD,aAAa,EACbC,SAAS,EACT1yE,OAAO,EAEP2yE,YAAY,GAGVK,G,kDAEF,WAAYz/E,GAAQ,IAAD,8BACf,cAAMA,IAwEVs/E,cAAgB,SAAA7kE,GACZA,EAAM6e,iBAEN,MAOI,EAAKt5B,MANL6d,EADJ,EACIA,eACA5O,EAFJ,EAEIA,gBAEAM,EAJJ,EAIIA,KAEA0B,EANJ,EAMIA,2BAGJ,EAMI,EAAKpP,MALLkrB,EADJ,EACIA,MACAE,EAFJ,EAEIA,QACAxe,EAHJ,EAGIA,KACAue,EAJJ,EAIIA,MACAE,EALJ,EAKIA,YAGJ,GAA4B,IAAxBH,EAAM9f,OAAOnC,QACE,MAAZmiB,GACuB,IAAvBxe,EAAKxB,OAAOnC,QACkB,IAA9BoiB,EAAYjgB,OAAOnC,OAH1B,CAWA,EAAKquB,SAAS,CACVgmD,SAAS,IAGb,IAAI5xD,EAAUte,EAAkBA,EAAgB6d,KAAO,oBAEvD+lC,GACe,CACPlC,UAAW9yC,EAAe8yC,UAC1Bj9B,U9ClLa,E8CmLbpnB,KAAM,CACFmgD,OAAQ1/B,EAAM7hB,cACdshD,SAAUj/B,EACVN,UACAC,cACAqyD,WAAY9wE,EACZ+wE,YAAaxyD,KAGpB7gB,MAAK,WACF,EAAKgtB,SAAL,eACOuwC,KAGPz4D,EACI,yCACA,UACA,UAGJimB,GACyB,CACjBlM,OAAQzb,EAAOA,EAAKG,GAAK,KACzBod,KAAO7d,EAA8CA,EAAgB6d,KAA5C,0BACzBC,MAAOA,EAAM7hB,cACbuD,OACAue,QACAC,UACAC,gBAEH/gB,MAAK,SAAAihB,GAEE7d,GACA2nB,GACmB,CACXlM,OAAQzb,EAAKG,GACbub,a7HhGF,E6HiGEC,yBAA0Bvc,GAC1Bwc,mBAAoBiC,EACpBhC,gBAAiB8L,GAA0DlpB,QAAQ,UAAWiB,EAAgB+f,kBAI7Hva,OAAM,SAAAhI,UAIdgI,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV1sB,OAAO,EACP0yE,SAAS,YAlEjB,EAAKhmD,SAAS,CACV+lD,aAAa,KAnGN,EA8KnBrjD,cAAgB,SAAAphB,GACZ,EAAK0e,SAAS,CACV,CAAC1e,EAAMyD,OAAOzP,MAAOgM,EAAMyD,OAAOlF,SA7KtC,EAAKnX,MAAL,eACO6nE,IAJQ,E,qDAQnB,WACI,MAUI3pE,KAAKC,MATL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBACA1oB,EAHJ,EAGIA,KACAysB,EAJJ,EAIIA,WAEA3E,EANJ,EAMIA,2BACAG,EAPJ,EAOIA,sCAEAK,EATJ,EASIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAAoBA,GAAqC1nB,EAAM2vB,MAEpJ7C,IAEIC,GAAyBG,GACrB+D,GACIzsB,IACKxP,KAAK8B,MAAMu9E,YACZr/E,KAAKo5B,SAAS,CACVpM,MAAOxd,EAAKwd,MACZte,KAAMc,EAAK01B,UAAY,IAAM11B,EAAK21B,SAClCk6C,YAAY,O,gCAQpC,SAAmBzkD,EAAWC,EAAWhnB,GACrC,MAOI7T,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBACA1oB,EAHJ,EAGIA,KACAysB,EAJJ,EAIIA,YAKJnE,EATA,EAMIA,oBAKAC,GAAyBG,GACrB+D,GACIzsB,IACKxP,KAAK8B,MAAMu9E,YACZr/E,KAAKo5B,SAAS,CACVpM,MAAOxd,EAAKwd,MACZte,KAAMc,EAAK01B,UAAY,IAAM11B,EAAK21B,SAClCk6C,YAAY,O,oBAsHpC,WACI,MAQIr/E,KAAKC,MAPLi4B,EADJ,EACIA,oBACAhpB,EAFJ,EAEIA,gBACA6oB,EAHJ,EAGIA,sBAEAsC,EALJ,EAKIA,eACA4B,EANJ,EAMIA,WACAy0B,EAPJ,EAOIA,qBAGJ,EAQI1wD,KAAK8B,MAPLkrB,EADJ,EACIA,MACAE,EAFJ,EAEIA,QACAxe,EAHJ,EAGIA,KACAue,EAJJ,EAIIA,MACAE,EALJ,EAKIA,YACAgyD,EANJ,EAMIA,YACAC,EAPJ,EAOIA,QAGJ,OAAKrnD,EAaAG,GAIDmC,GAAmB4B,GAAey0B,EAqBlC,eAACv6C,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,UACI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAAC+U,QAAS,IAAhC,SACI,cAACK,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,GAAI2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAtE,SACI,uBAAMI,SAAUt7B,KAAKu/E,cAArB,UACI,eAAC,IAAD,CAAU3+E,QAAM,EAACQ,UAAW,GAA5B,UACI,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAApB,SACI,6CAGJ,cAAC,IAAD,CAAUyW,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAACrxC,MAAOyyE,GAAuC,IAAxBnyD,EAAM9f,OAAOnC,OAAnE,UACI,cAAC4xC,GAAA,EAAD,kCACA,cAACv/B,GAAA,EAAD,CAAWnE,MAAO+T,EAAOte,KAAK,QAAQ5N,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,cAAepvB,MAAOyyE,GAAuC,IAAxBnyD,EAAM9f,OAAOnC,cAIjJ,cAAC,IAAD,CAAUwM,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAACrxC,MAAOyyE,GAA2B,MAAZjyD,EAAtD,UACI,cAACyvB,GAAA,EAAD,sBAGA,eAAC7E,GAAA,EAAD,CAAQppC,KAAK,UAAUuK,MAAOiU,EAASpsB,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,cAAeic,MAAO,cAACC,GAAA,EAAD,IAAkBtrC,MAAOyyE,GAA2B,MAAZjyD,EAAtJ,UACI,cAAC+qB,GAAA,EAAD,CAAUh/B,MAAO,IAAjB,eAA4B,GAIxBimE,GAASrlE,KAAI,SAACqT,EAASjgB,GAAV,OACT,cAACgrC,GAAA,EAAD,CACIh/B,MAAOiU,EADX,SAIKA,GAFIjgB,cAU7B,cAAC,IAAD,CAAUsK,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAACk8C,GAAA,EAAD,mBAGA,cAACv/B,GAAA,EAAD,CAAWnE,MAAOvK,EAAMA,KAAK,OAAO5N,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,cAAepvB,MAAOyyE,GAAsC,IAAvBzwE,EAAKxB,OAAOnC,cAI9I,cAAC,IAAD,CAAUwM,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,UACI,cAACk8C,GAAA,EAAD,2BAGA,cAACv/B,GAAA,EAAD,CAAWnE,MAAOgU,EAAOve,KAAK,QAAQ5N,QAAQ,WAAWa,OAAO,QAAQiW,SAAU5X,KAAK87B,wBAKnG,cAAC,IAAD,CAAUvkB,MAAM,OAAOnW,UAAW,GAAlC,SACI,eAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAACs9C,UAAQ,EAACrxC,MAAOyyE,GAA6C,IAA9BhyD,EAAYjgB,OAAOnC,OAAzE,UACI,cAAC4xC,GAAA,EAAD,0BAGA,cAACv/B,GAAA,EAAD,CAAWnE,MAAOkU,EAAaze,KAAK,cAAc5N,QAAQ,WAAWa,OAAO,QAAQ21D,WAAS,EAACa,KAAM,EAAGZ,QAAS,EAAG3/C,SAAU5X,KAAK87B,cAAepvB,MAAOyyE,GAA6C,IAA9BhyD,EAAYjgB,OAAOnC,SAC1L,cAACkzC,GAAA,EAAD,4HAOJmhC,EAEI,cAAC,IAAD,CAAUh+E,UAAW,GAAImW,MAAM,OAAOH,cAAc,SAApD,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAOhB,KAGR,cAACR,EAAA,EAAD,UAEI,cAACE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGxV,MAAO,CAACoW,MAAO,OAAQnW,UAAW,IAArE,SACI,cAACo6B,GAAA,EAAD,CAAa/6B,WAAS,EAAtB,SACI,cAACa,EAAA,EAAD,CAAQW,KAAK,SAASnB,QAAQ,YAAYkG,UAAWyQ,YAAIxS,GAAakB,mBAAoB5E,MAAM,UAAUd,WAAS,EAAnH,iCAUxB,cAAC4V,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,GAAD,WA3HR,cAAC,IAAD,CACIY,MAAM,OACNnW,UAAW,GACXgW,cAAc,SAHlB,SAKI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAdb,cAAC,GAAD,IAZH,cAAC,IAAD,CACIzV,UAAW,GACXgW,cAAc,SAFlB,SAII,cAAC,KAAD,CACI7V,MAAOsV,W,GAlNNjV,aAiWVC,gBAzYS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjD1oB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WACvB5B,eAAgBv4B,EAAM2P,KAAK4oB,eAE3Bvc,eAAgBhc,EAAM+b,qBAAqBC,eAC3C4yC,qBAAsB5uD,EAAM+b,qBAAqB6yC,yBAI9B,SAAA1uD,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjChoB,2BAA4B,SAACC,EAAS5P,EAAO6P,GAAjB,OAA8BpP,EAASyY,GAAmDtJ,EAAS5P,EAAO6P,QAmX/HvP,CAA6C69E,ICzXtDC,G,kDAEF,WAAY1/E,GAAQ,IAAD,8BACf,cAAMA,IA4CV2/E,+BAAiC,WAC7B,IACIpwE,EACA,EAAKvP,MADLuP,KAGJ,EAGI,EAAK1N,MAFL+9E,EADJ,EACIA,SACAC,EAFJ,EAEIA,cAGCtwE,G9HgEa,I8H5DdA,EAAKvN,OAIDuN,EAAKvN,OAAS49E,EACVC,GACA,EAAK1mD,SAAS,CACVymD,SAAUrwE,EAAKvN,KACf69E,eAAe,IAInBA,GACA,EAAK1mD,SAAS,CACV0mD,eAAe,MAzEhB,EAsFnBC,iBAAmB,SAACrlE,EAAOC,GACvB,EAAKye,SAAS,CACVymD,SAAUllE,EACVqlE,eAAe,KAzFJ,EAmGnBC,kBAAoB,SAAAC,GAAK,OAAI,SAACxlE,EAAOw7C,GACjC,EAAK98B,SAAS,CACV4mD,gBAAe9pB,GAAagqB,MArGjB,EAmNnBC,qBAAuB,WACnB,IACIH,EACA,EAAKl+E,MADLk+E,cAGJ,OACI,cAAC3pE,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACqW,aAAc,IAArC,SACI,eAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAArE,UAEI,eAACs8B,GAAA,EAAD,CAAgBE,SAA4B,4CAAlBsoB,EAA6DpoE,SAAU,EAAKqoE,kBAAkB,2CAAxH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,2CAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,sIAMA,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,oDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,+OACA,qBAAK+jB,IAAI,gCAAgC3f,IAAK4f,EAAQ,KAA+CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAKxI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,sDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sVACA,qBAAK+jB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAAiDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIzI,eAAC,IAAD,CACIx/E,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,qDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,4IACA,qBAAK+jB,IAAI,iCAAiC3f,IAAK4f,EAAQ,KAAgDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAI1I,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,iDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,kOAOhB,eAACyiD,GAAA,EAAD,CAAgBE,SAA4B,qCAAlBsoB,EAAsDpoE,SAAU,EAAKqoE,kBAAkB,oCAAjH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,oCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oYACA,qBAAK+jB,IAAI,mCAAmC3f,IAAK4f,EAAQ,KAAkDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAG1I,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,2DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,4NACA,qBAAK4xB,IAAI,0CAA0C3f,IAAK4f,EAAQ,KAAyDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACxJ,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,ggBACA,qBAAK4xB,IAAI,0CAA0C3f,IAAK4f,EAAQ,KAAyDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAI5J,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,yDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,0YACA,qBAAK4xB,IAAI,0CAA0C3f,IAAK4f,EAAQ,KAAyDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAOxK,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,4CAAlBsoB,EAA6DpoE,SAAU,EAAKqoE,kBAAkB,2CAAxH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,2CAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,yVACA,qBAAKzC,IAAI,0CAA0C3f,IAAK4f,EAAQ,KAAyDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAMpK,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,2CAAlBsoB,EAA4DpoE,SAAU,EAAKqoE,kBAAkB,0CAAvH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,yCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,ueACA,qBAAKzC,IAAI,yCAAyC3f,IAAK4f,EAAQ,KAAuDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACrJ,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,6IAMZ,eAACi8B,GAAA,EAAD,CAAgBE,SAA4B,mCAAlBsoB,EAAoDpoE,SAAU,EAAKqoE,kBAAkB,kCAA/G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,kCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,qLAGA,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,wDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,2IACA,qBAAK+jB,IAAI,oCAAoC3f,IAAK4f,EAAQ,KAAmDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIhJ,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,wEAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,+WACA,qBAAKzC,IAAI,uCAAuC3f,IAAK4f,EAAQ,KAAsDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAClJ,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,uRACA,qBAAKzC,IAAI,yCAAyC3f,IAAK4f,EAAQ,KAAwDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAI1J,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,wDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,kMACA,qBAAK+jB,IAAI,iCAAiC3f,IAAK4f,EAAQ,KAAgDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAEtI,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,+EAGA,qBAAK+jB,IAAI,iCAAiC3f,IAAK4f,EAAQ,KAAgDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAI1I,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,oEAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,gVACA,qBAAK+jB,IAAI,gDAAgD3f,IAAK4f,EAAQ,KAA+DC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIxK,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,4EAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,ybAQA,qBAAK+jB,IAAI,wDAAwD3f,IAAK4f,EAAQ,KAAuEC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAOpM,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,yCAAlBsoB,EAA0DpoE,SAAU,EAAKqoE,kBAAkB,wCAArH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,wCAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sYACA,qBAAK+jB,IAAI,uCAAuC3f,IAAK4f,EAAQ,KAAsDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAM9J,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,oCAAlBsoB,EAAqDpoE,SAAU,EAAKqoE,kBAAkB,mCAAhH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,qCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,kRACA,qBAAK+jB,IAAI,kCAAkC3f,IAAK4f,EAAQ,KAAiDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAMpJ,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,oCAAlBsoB,EAAqDpoE,SAAU,EAAKqoE,kBAAkB,mCAAhH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,qCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,6GACA,qBAAK+jB,IAAI,kCAAkC3f,IAAK4f,EAAQ,KAAiDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAOpJ,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,+BAAlBsoB,EAAgDpoE,SAAU,EAAKqoE,kBAAkB,8BAA3G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,8BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oNACA,qBAAK+jB,IAAI,6BAA6B3f,IAAK4f,EAAQ,KAA4CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAMzI,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,8BAAlBsoB,EAA+CpoE,SAAU,EAAKqoE,kBAAkB,6BAA1G,UACG,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,8BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,4gBACA,qBAAK+jB,IAAI,4BAA4B3f,IAAK4f,EAAQ,KAA2CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAG5H,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,yDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,oQAGA,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,iDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,uRACA,qBAAK+jB,IAAI,gCAAgC3f,IAAK4f,EAAQ,KAA+CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACpI,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,+IAIJ,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,qDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,8gBACA,qBAAK+jB,IAAI,oCAAoC3f,IAAK4f,EAAQ,KAAmDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIhJ,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,kDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,sJAWpB,eAACi8B,GAAA,EAAD,CAAgBE,SAA4B,+BAAlBsoB,EAAgDpoE,SAAU,EAAKqoE,kBAAkB,8BAA3G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,+BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,kGACA,qBAAK+jB,IAAI,6BAA6B3f,IAAK4f,EAAQ,KAA4CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAO1I,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,8BAAlBsoB,EAA+CpoE,SAAU,EAAKqoE,kBAAkB,6BAA1G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,8BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,qRACA,qBAAK+jB,IAAI,4BAA4B3f,IAAK4f,EAAQ,KAA2CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAG5H,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAtC,SACI,+DAEJ,cAAC7T,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,0KAIA,qBAAK+jB,IAAI,mCAAmC3f,IAAK4f,EAAQ,KAAkDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAO1J,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,iCAAlBsoB,EAAkDpoE,SAAU,EAAKqoE,kBAAkB,gCAA7G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,iCAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sFAGA,qBAAK+jB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAA8CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,6BAlmB3I,EA8mBnBC,mBAAqB,WAEjB,IACIL,EACA,EAAKl+E,MADLk+E,cAGJ,OACI,cAAC3pE,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACqW,aAAc,IAArC,SACI,eAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAArE,UAEI,eAACs8B,GAAA,EAAD,CAAgBE,SAA4B,yCAAlBsoB,EAA0DpoE,SAAU,EAAKqoE,kBAAkB,wCAArH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,2CAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,6IAGA,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,oDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mPACA,qBAAK+jB,IAAI,6BAA6B3f,IAAK4f,EAAQ,KAA4CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIlI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,sDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sXACA,qBAAK+jB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAA8CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAItI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,qDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,8IACA,qBAAK+jB,IAAI,8BAA8B3f,IAAK4f,EAAQ,KAA6CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAOhJ,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,yBAAlBsoB,EAA0CpoE,SAAU,EAAKqoE,kBAAkB,wBAArG,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,2BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,yGAGA,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,sDAEJ,eAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,kMACI,uBAAK,uBACL,+BACI,+BACI,cAAC,KAAD,CAAY/F,MAAO,CAACgX,YAAa,KADrC,gEAIA,uBACA,+BACI,cAAC,KAAD,CAAgBhX,MAAO,CAACgX,YAAa,KADzC,8EAKA,uBACA,+BACI,cAAC,KAAD,CAAahX,MAAO,CAACgX,YAAa,KADtC,qGAOR,qBAAK2gB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAA8CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIrI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACG,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,4DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,gbACA,qBAAK4xB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAAuDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAI/I,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,8DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,iSACA,qBAAK4xB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAA8CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAClI,cAACl/E,EAAA,EAAD,UAAY,6IAGhB,eAAC,IAAD,CAAUN,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,iEAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAO7N,UAAU,SAAnD,wLACA,qBAAK4xB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAAgDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACpI,cAACl/E,EAAA,EAAD,UAAY,qJAO3B,eAACs2D,GAAA,EAAD,CAAgBE,SAA4B,mCAAlBsoB,EAAoDpoE,SAAU,EAAKqoE,kBAAkB,kCAA/G,UACG,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,qCAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,0IACA,qBAAK+jB,IAAI,iCAAiC3f,IAAK4f,EAAQ,KAAgDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAM/I,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,4BAAlBsoB,EAA6CpoE,SAAU,EAAKqoE,kBAAkB,2BAAxG,UACC,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,8BAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,2NACA,qBAAK+jB,IAAI,0BAA0B3f,IAAK4f,EAAQ,KAAyCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAMpI,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,+BAAlBsoB,EAAgDpoE,SAAU,EAAKqoE,kBAAkB,8BAA3G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,iCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UAEI,eAAC,IAAD,CAAUA,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,4UACA,qBAAKzC,IAAI,wBAAwB3f,IAAK4f,EAAQ,KAAuCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAEpH,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,4DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,ycACA,qBAAK+jB,IAAI,qCAAqC3f,IAAK4f,EAAQ,KAAoDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIlJ,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,wEAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,qJACA,qBAAK+jB,IAAI,4CAA4C3f,IAAK4f,EAAQ,KAA2DC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIhK,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,0DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oTACA,qBAAK+jB,IAAI,mCAAmC3f,IAAK4f,EAAQ,KAAkDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAO1J,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,2BAAlBsoB,EAA4CpoE,SAAU,EAAKqoE,kBAAkB,0BAAvG,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,6BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UAEI,eAAC,IAAD,CAAUA,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SAEI,+DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,qRACA,qBAAK+jB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAA8CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAItI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,8DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mQACA,qBAAK+jB,IAAI,gCAAgC3f,IAAK4f,EAAQ,KAA+CC,QAAUhyB,UAAWyQ,YAAIC,GAAO0oE,0BAQtJ,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,0BAAlBsoB,EAA2CpoE,SAAU,EAAKqoE,kBAAkB,yBAAtG,UACK,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,4BAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,iKACA,qBAAK+jB,IAAI,2BAA2B3f,IAAK4f,EAAQ,KAA0CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAC1H,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sJACA,qBAAK+jB,IAAI,2BAA2B3f,IAAK4f,EAAQ,KAA0CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAMtI,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,8BAAlBsoB,EAA+CpoE,SAAU,EAAKqoE,kBAAkB,6BAA1G,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,gCAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sFAGA,qBAAK+jB,IAAI,wBAAwB3f,IAAK4f,EAAQ,KAAuCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,6BAh4B7H,EA44BnBE,iBAAmB,WAEf,IACIN,EACA,EAAKl+E,MADLk+E,cAGJ,OACI,cAAC3pE,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHqW,aAAc,IAHtB,SAMI,eAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAArE,UAEI,eAACs8B,GAAA,EAAD,CAAgBE,SAA4B,uCAAlBsoB,EAAwDpoE,SAAU,EAAKqoE,kBAAkB,sCAAnH,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,2CAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UAEI,eAAC,IAAD,CAAUA,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,sIAKA,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,oDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,6SACA,qBAAK+jB,IAAI,2BAA2B3f,IAAK4f,EAAQ,KAA0CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAI9H,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,sDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,wUACA,qBAAK+jB,IAAI,6BAA6B3f,IAAK4f,EAAQ,KAA4CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIlI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,qDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,8IACA,qBAAK+jB,IAAI,4BAA4B3f,IAAK4f,EAAQ,KAA2CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAOvI,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,0BAAlBsoB,EAA2CpoE,SAAU,EAAKqoE,kBAAkB,yBAAtG,UACD,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,8BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UAEI,eAAC,IAAD,CAAUA,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,4DAEJ,eAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,gJAEI,uBAAK,uBAFT,wHAKA,qBAAKzC,IAAI,kCAAkC3f,IAAK4f,EAAQ,KAAiDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACxI,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,uVACA,qBAAKzC,IAAI,kCAAkC3f,IAAK4f,EAAQ,KAAiDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACxI,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,mWAGJ,uBAGA,eAAC,IAAD,CAAU36B,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,yDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sHACA,qBAAK+jB,IAAI,2BAA2B3f,IAAK4f,EAAQ,KAA0CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAE1H,uBAEJ,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,wDAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,iGAGA,qBAAK+jB,IAAI,yBAAyB3f,IAAK4f,EAAQ,KAAwCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAGtH,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,8DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,2FACA,qBAAK+jB,IAAI,+CAA+C3f,IAAK4f,EAAQ,KAA8DC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAClK,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,0LACA,qBAAK+jB,IAAI,+CAA+C3f,IAAK4f,EAAQ,KAA8DC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,6BAQrL,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,iCAAlBsoB,EAAkDpoE,SAAU,EAAKqoE,kBAAkB,gCAA7G,UACG,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,qCAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,uLACA,qBAAK+jB,IAAI,+BAA+B3f,IAAK4f,EAAQ,KAA8CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAM5I,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,0BAAlBsoB,EAA2CpoE,SAAU,EAAKqoE,kBAAkB,yBAAtG,UACE,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,8BAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,+MACA,qBAAK+jB,IAAI,wBAAwB3f,IAAK4f,EAAQ,KAAuCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAM9H,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,6BAAlBsoB,EAA8CpoE,SAAU,EAAKqoE,kBAAkB,4BAAzG,UACE,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,iCAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UAEI,eAAC,IAAD,CAAUA,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,8TACA,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,4DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,0TACA,qBAAK+jB,IAAI,8BAA8B3f,IAAK4f,EAAQ,KAA6CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eAChI,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,+JACA,qBAAK+jB,IAAI,8BAA8B3f,IAAK4f,EAAQ,KAA6CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIpI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,YAAYiU,MAAM,OAAOwmB,WAAS,EAAtD,SACI,wEAEJ,eAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oPACI,uBAAK,uBADT,qRAIA,qBAAK+jB,IAAI,0CAA0C3f,IAAK4f,EAAQ,KAAyDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACxJ,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,iZACA,qBAAK+jB,IAAI,0CAA0C3f,IAAK4f,EAAQ,KAAyDC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAQxK,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,yBAAlBsoB,EAA0CpoE,SAAU,EAAKqoE,kBAAkB,wBAArG,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,6BAKR,cAAC+iD,GAAA,EAAD,UACI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UAEI,eAAC,IAAD,CAAUA,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,+DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,qRACA,qBAAK+jB,IAAI,6BAA6B3f,IAAK4f,EAAQ,KAA4CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,kBAIlI,eAAC,IAAD,CAAUx/E,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAOwmB,WAAS,EAAlD,SACI,8DAEJ,cAACr6B,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,oQACA,qBAAK+jB,IAAI,8BAA8B3f,IAAK4f,EAAQ,KAA6CC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,0BAQhJ,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,wBAAlBsoB,EAAyCpoE,SAAU,EAAKqoE,kBAAkB,uBAApG,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,4BAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,iKACA,qBAAK+jB,IAAI,yBAAyB3f,IAAK4f,EAAQ,KAAwCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,eACtH,cAACl/E,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,sJACA,qBAAK+jB,IAAI,yBAAyB3f,IAAK4f,EAAQ,KAAwCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,uBAOlI,eAAC5oB,GAAA,EAAD,CAAgBE,SAA4B,4BAAlBsoB,EAA6CpoE,SAAU,EAAKqoE,kBAAkB,2BAAxG,UACI,cAACtoB,GAAA,EAAD,CAAuBC,WAAY,cAAC,KAAD,IAAnC,SACI,cAAC,IAAD,CAAUh3D,QAAM,EAAhB,SACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,gCAKR,cAAC+iD,GAAA,EAAD,UAEI,eAAC,IAAD,CAAUl3D,QAAM,EAAhB,UACI,cAACM,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,gGACA,qBAAK+jB,IAAI,sBAAsB3f,IAAK4f,EAAQ,KAAqCC,QAAShyB,UAAWyQ,YAAIC,GAAO0oE,6BAppCxI,EAAKt+E,MAAQ,CACT+9E,S9HiHiB,E8HhHjBC,eAAe,EACfE,eAAe,GANJ,E,qDAUnB,WACI,MAKIhgF,KAAKC,MAJLq3B,EADJ,EACIA,2BACAG,EAFJ,EAEIA,sCAEAK,EAJJ,EAIIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAAcA,GAA+B1nB,EAAM2vB,MAExI7C,IAEA93B,KAAK4/E,mC,gCAGT,SAAmBhlD,EAAWC,EAAWhnB,GACrC,MAII7T,KAAKC,MAHL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,qBAIJJ,EANA,EAGIA,oBAKAC,GAAyBG,GACzBl4B,KAAK4/E,mC,oBAmEb,WAEI,IACIC,EACA7/E,KAAK8B,MADL+9E,SAGJ,EASI7/E,KAAKC,MARLiP,EADJ,EACIA,gBACAgpB,EAFJ,EAEIA,oBACAH,EAHJ,EAGIA,sBAEAO,EALJ,EAKIA,WACA+B,EANJ,EAMIA,eACA7qB,EAPJ,EAOIA,KACAysB,EARJ,EAQIA,WAGJ,OAAKlE,EAQAG,EAIDmC,IAAmB4B,EAEf,cAAC,IAAD,CAAU76B,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OASpByhB,IAAeG,IACXjpB,EAMJ,eAAC2G,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC6V,YAAa,EAAGC,aAAc,EAAGF,cAAe,IAAzE,UACI,cAACV,EAAA,EAAD,CAAKC,WAAS,EAACnV,MAAO,CAACC,UAAW,GAAIoW,aAAc,IAApD,SACI,eAACjB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAArE,UACI,cAAC,IAAD,CAAU3jB,MAAM,OAAOH,cAAc,SAASI,aAAc,GAA5D,SACI,cAAC,KAAD,CACIrW,MAAO,CACH4E,SAAU,MACVxE,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,QAMpB,cAAC3V,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAASxT,MAAM,UAA9C,kC9HtDE,I8H0DEiO,EAAKvN,KAED,KAEA,cAAC,IAAD,CAAUsV,MAAM,OAAOH,cAAc,SAAShW,UAAW,GAAzD,SACI,cAAC+5B,GAAA,EAAD,CAAOC,UAAW,EAAGj6B,MAAO,CAACoW,MAAO,QAApC,SACI,eAAC2lE,GAAA,EAAD,CAAMC,eAAe,UAAUt2E,UAAU,UAAU/F,QAAQ,YAAYmY,MAAO4mE,EAAUjoE,SAAU5X,KAAK+/E,iBAAvG,UACI,cAAC1C,GAAA,EAAD,CAAKpkE,M9HnEpB,E8HmEmDhY,MAAM,WAAW+F,UAAWyQ,YAAIxS,GAAakB,qBACjF,cAACk3E,GAAA,EAAD,CAAKpkE,M9HnEtB,E8HmEmDhY,MAAM,SAAS+F,UAAWyQ,YAAIxS,GAAakB,iC9HlE/F,I8H2ENqJ,EAAKvN,KAEDjC,KAAKmgF,uB9H/EA,I8HiFLN,EAEI7/E,KAAKqgF,qBAELrgF,KAAKsgF,sBAjDd,cAAC,GAAD,IAtBA,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUl/E,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CAAY7V,MAAOsV,W,GA/HhBjV,aAmqCRC,gBAzrCS,SAAAC,GACpB,MAAO,CACH8gB,cAAe9gB,EAAMy1B,sBAAsB3U,cAC3C1T,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDI,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3B7qB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,eAIJ,SAAAj6B,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,UAuqC1Br3B,CAA6C89E,IAEtDjoE,GAASxS,IAAWC,OAAO,CAC7Bi7E,YAAa,CACT3mE,UAAW,c,SVltCPi7D,K,0CAAAA,E,6DAAAA,E,+DAAAA,E,+EAAAA,E,iEAAAA,E,kFAAAA,Q,KA+BL,IWpCK6L,GCyBNj/C,GAAkC,CACpCk/C,aAAa,EACb1K,YAAY,EAEZ2K,sBAAsB,EACtBC,uBAAuB,GAWdC,GAAyB,SAAC7+E,GACnC,OAAOA,EAAMg0E,aAAeh0E,EAAM0+E,aAAe1+E,EAAMid,OAASjd,EAAM8+E,SAAW9+E,EAAM++E,aAA0B/8D,IAAhBhiB,EAAM4K,OAW9F47C,GAAyB,SAACxmD,GACnC,OAAOA,EAAM2+E,sBAOJj4B,GAA0B,SAAC1mD,GACpC,OAAOA,EAAM4+E,uBA4EFI,GArEa,WAAuD,IAAtDh/E,EAAqD,uDAA7Cw/B,GAAchW,EAA+B,uCAC9E,OAAQA,EAAOrpB,MACX,KAAKyyE,GAAmBqM,YACpB,OAAO,2BACAz/C,IADP,IAEIk/C,aAAa,EACb1K,YAAY,IAEpB,KAAKpB,GAAmBsM,oBACpB,IAAMC,EAAuD31D,EAC7D,OAAO,2BACAxpB,GADP,IAEI0+E,aAAa,EACb1K,YAAY,EACZ/2D,WAA2C+E,IAApCm9D,EAA0BliE,MAC3BL,KAAKC,MAAMD,KAAKE,UAAUqiE,EAA0BliE,QACpDjd,EAAMid,MACZ6hE,aAA+C98D,IAAtCm9D,EAA0BL,QAA1B,aACCK,EAA0BL,SAC9B9+E,EAAM8+E,QACZC,YAA6C/8D,IAArCm9D,EAA0BJ,OAA1B,aACEI,EAA0BJ,QAC9B/+E,EAAM++E,OACZ35B,6BAA8EpjC,IAArDm9D,EAA0Bz5B,uBAA1B,aACfy5B,EAA0Bz5B,wBAC9B1lD,EAAMolD,wBACZx6C,WAA2CoX,IAApCm9D,EAA0Bv0E,MAC3B,CAACqe,OAAQk2D,EAA0Bv0E,OACnC5K,EAAM4K,QAEpB,KAAKgoE,GAAmB3rB,qBACpB,OAAO,2BACAjnD,GADP,IAEI2+E,sBAAsB,EACtBx3B,+BAA2BnlC,IAEnC,KAAK4wD,GAAmBxrB,6BACpB,IAAMC,EAAyE79B,EAC/E,OAAO,2BACAxpB,GADP,IAEI2+E,sBAAsB,EACtBv5B,6BAA8FpjC,IAArEqlC,EAAmCC,8BAAnC,aACfD,EAAmCC,+BACvCtnD,EAAMolD,wBACZ+B,+BAAwEnlC,IAA7CqlC,EAAmCz8C,MACxD,CAACqe,OAAQo+B,EAAmCz8C,OAAS5K,EAAMmnD,4BAEzE,KAAKyrB,GAAmBrrB,sBACpB,OAAO,2BACAvnD,GADP,IAEI4+E,uBAAuB,EACvBn3B,gCAA4BzlC,IAEpC,KAAK4wD,GAAmBlrB,8BACpB,IAAMC,EAA2En+B,EACjF,OAAO,2BACAxpB,GADP,IAEI4+E,uBAAuB,EACvBx5B,6BAA+FpjC,IAAtE2lC,EAAoCL,8BAApC,aACfK,EAAoCL,+BACxCtnD,EAAMolD,wBACZqC,gCAA0EzlC,IAA9C2lC,EAAoC/8C,MAC1D,CAACqe,OAAQ0+B,EAAoC/8C,OAAS5K,EAAMynD,6BAE1E,QACI,OAAOznD,ICjFbo/E,G,uKAEF,WACIlhF,KAAKC,MAAMmnC,SAASpnC,KAAKC,MAAM+K,MAAM6Y,OAAOM,uB,oBAGhD,WAAU,IAAD,wBACL,EAOInkB,KAAKC,MANLia,EADJ,EACIA,gBACAuI,EAFJ,EAEIA,oBACAC,EAHJ,EAGIA,oBACAy+D,EAJJ,EAIIA,uBACAx3B,EALJ,EAKIA,kBACAC,EANJ,EAMIA,oBAGEjnC,EAAcD,EAAoBC,YAExC,IAAKA,EACD,OAAO,KAGX,IDtCsB7gB,ECsChB+gB,EAA6BpE,GAAQkE,GAG3C,KDzCsB7gB,ECyCJq/E,GDxCRrL,YAAch0E,EAAM0+E,YCyC1B,OAAO,cAACtpC,GAAA,EAAD,CAAKG,QAAQ,OAAOM,eAAe,SAASv2C,UAAU,OAAtD,SACH,cAAC,aAAD,CACIG,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SAM3E,GDtC2B,SAACjvC,GAChC,OAAOA,EAAMg0E,aAAeh0E,EAAM0+E,kBAA+B18D,IAAhBhiB,EAAM4K,MCqC/C00E,CAAoBD,KAA4BR,GAAuBQ,GACvE,OAAO,cAACjqC,GAAA,EAAD,CAAKG,QAAQ,OAAOM,eAAe,SAASL,WAAW,SAASl2C,UAAU,OAA1E,SACH,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAAKS,MAAM,QAAQwT,MAAM,SAA7C,iDAIR,IAAI80C,OAA6C/lC,EAC5CjB,IACDgnC,EAAcnnC,EAAoBK,mBAAmB+mC,MACjD,SAAA3mC,GAAiB,aAAIA,EAAkBpE,MAAMgO,QAAxB,UAAiCo0D,EAAuBpiE,aAAxD,aAAiC,EAA8BgO,UAG5F,IAC4D,EADxDg9B,GAAqC,GDtDH,SAACjoD,GAC3C,OAAO6+E,GAAuB7+E,SAA4CgiB,IAAlChiB,EAAMolD,yBCsDtCm6B,CAA+BF,KAC/Bp3B,GACuH,KAD3F,UAAAo3B,EAAuBj6B,+BAAvB,eACtBj8C,WAAU,SAAA28C,GAAqB,aAAIA,EAAsB7oC,MAAMgO,QAA5B,UAAqCo0D,EAAuBpiE,aAA5D,aAAqC,EAA8BgO,WAIhH,OAAO,eAACmqB,GAAA,EAAD,CAAKW,SAAU39B,EAAgBlF,SAAW,OAAS,OAAnD,UAEH,cAACqB,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SACI,cAACgc,GAAA,EAAD,UACI,cAAC/b,GAAA,EAAD,UACI,cAAC+b,GAAA,EAAD,CAAKhhC,QAAQ,OAAb,SACI,eAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,UAEI,cAACC,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAxG,SACI,cAAC0e,GAAA,EAAD,CAAKG,QAAQ,OAAMM,eAAe,SAASL,WAAW,SAAtD,SACI,cAACp+B,GAAA,EAAD,CAAO4f,IAAG,oBAAKqoD,EAAuBpiE,aAA5B,aAAK,EAA8BkQ,YAAnC,SAAuD9V,IAAG,UAAE+rC,GAAY,UAACi8B,EAAuBpiE,aAAxB,QAAiC,aAA/C,aAAwD+E,EAAW3iB,MAAO,CAACoW,MAAO,OAAQa,OAAQ,OAAQlC,QAAS,GAAIuD,UAAW,oBAK9M,cAAClD,EAAA,EAAD,CAAKC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GAAI/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAAI9hB,GAAI,CAAC6hB,KAAM,GAAIC,MAAO,GAAI7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAAxG,SACI,eAAC0e,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAASjgC,OAAO,OAAOu/B,eAAe,SAASL,WAAW,SAA5F,UACI,cAACp2C,EAAA,EAAD,CAAY6T,MAAM,SAASjU,QAAQ,KAAnC,mBAAyCqgF,EAAuBpiE,aAAhE,aAAyC,EAA8BkQ,cAInEpM,EACM,KACCgnC,EAoBD,eAAC3S,GAAA,EAAD,CAAK91C,UAAU,OAAf,UACE,eAAC81C,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,MAAlC,UACI,cAAC6R,GAAA,EAAD,CAAankD,SAAS,QAAQxE,MAAM,YACpC,cAAC21C,GAAA,EAAD,CAAK3/B,MAAM,QACX,cAACrW,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAASxT,MAAM,gBAAjD,UAEQ,UAAAsd,GAAa6D,EAAoBK,2BAAjC,eAAsDhE,MAAMgO,QAAS88B,EAAY9qC,MAAMgO,KACjF,cACA,uBAMlB,cAACmqB,GAAA,EAAD,CAAK91C,UAAU,MAAf,SACI,eAACF,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,SAASxT,MAAM,gBAAjD,wBAES8I,GAAqBw/C,EAAY2T,oBApChD,cAACtmB,GAAA,EAAD,CAAK91C,UAAU,OAAf,SAEO2oD,EAQK,cAACzoD,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMkoD,KAAuBnoD,SAAU+mD,GAAwB24B,GAAnJ,SAEM34B,GAAwB24B,GAClB,iBACA,mBAXZ,cAAC7/E,EAAA,EAAD,CAAQR,QAAQ,WAAWkG,UAAWyQ,YAAIxS,GAAakB,mBAAoBzE,QAAS,kBAAMioD,KAAqBloD,SAAU6mD,GAAuB64B,GAAhJ,SAEM74B,GAAuB64B,GACjB,sBACA,mCA4ClE,cAAC9qE,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SACI,cAACgc,GAAA,EAAD,CAAK91C,UAAU,OAAf,SACI,cAAC+5B,GAAA,EAAD,UACI,eAAC+b,GAAA,EAAD,CAAKhhC,QAAQ,OAAb,UACI,cAAChV,EAAA,EAAD,CAAYJ,QAAQ,KAApB,mBAEA,cAACo2C,GAAA,EAAD,CAAK91C,UAAU,OAAO4kD,WAAW,WAAjC,SACI,cAAC9kD,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mBAA0CosE,EAAuBpiE,aAAjE,aAA0C,EAA8BoO,gBAG5E,cAAC+pB,GAAA,EAAD,CAAK91C,UAAU,OAAf,SACI,eAACF,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,mDACI,cAAC,GAAD,CACIjG,IAAG,oBAAEqyE,EAAuBpiE,aAAzB,aAAE,EAA8Bm0C,eAAhC,QAA2C,GAC9C/0C,OAAO,SACP5c,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjBxuC,UAAU,IACVsuC,eAAc,oBACV2rC,EAAuBpiE,aADb,aACV,EAA8Bm0C,eADpB,QAC+B,4BAW7E,cAAC78C,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAnD,SACI,cAACgc,GAAA,EAAD,CAAK91C,UAAU,OAAf,SACI,cAAC+5B,GAAA,EAAD,UACI,eAAC+b,GAAA,EAAD,CAAKhhC,QAAQ,OAAb,UACI,cAAChV,EAAA,EAAD,CAAYJ,QAAQ,KAApB,wBAEA,cAACo2C,GAAA,EAAD,CAAK91C,UAAU,OAAO6E,OAAM,oBAAe4Q,KAAO2gC,KAAK,MAAUD,QAASlyC,GAA1E,SACI,eAACgR,EAAA,EAAD,WACI,cAACE,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SACI,eAACugC,GAAA,EAAD,CAAKhhC,QAAQ,OAAb,UACI,cAAChV,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,mBAAuCosE,EAAuBP,eAA9D,aAAuC,EAAgC71E,SACnE,cAACmsC,GAAA,EAAD,CAAK9+B,OAAO,QAChB,cAAClX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,0BAIR,cAACwB,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAhC,SACI,eAACugC,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,MAAlC,UACI,cAACnB,GAAA,EAAD,UACI,cAAC5/B,EAAA,EAAD,CAASkmE,YAAY,eAGzB,eAACtmC,GAAA,EAAD,CAAKhhC,QAAQ,OAAb,UACI,cAAChV,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,OAA/B,mBAAuCosE,EAAuBN,cAA9D,aAAuC,EAA+B91E,SAEtE,cAACmsC,GAAA,EAAD,CAAK9+B,OAAO,QAEZ,cAAClX,EAAA,EAAD,CAAYJ,QAAQ,QAAQiU,MAAM,OAAlC,8DAaxC,cAACsB,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAAC,GAAD,e,GA5MO/U,aAmNZC,gBApOS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBuI,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3By+D,uBAAwBr/E,EAAMq/E,2BAIX,SAACn/E,GACxB,MAAO,CACHolC,SAAU,SAACjjB,GAAD,OAAiCniB,GbXN4gB,EaWwBuB,EbVjE,yCAAO,WAAOniB,EAAoBwP,GAA3B,oCAAA1F,EAAA,yDAECo7C,EACA11C,IAAW2vE,uBADXj6B,wBAGJllD,EAAS,CACLC,KAAMyyE,GAAmBqM,cAGvBp+D,EAAcnR,IAAWkR,oBAAoBC,YAE7C8vB,EAA4C,CAC9CxwC,KAAMyyE,GAAmBsM,qBAGxBr+D,EAfF,uBAgBC8vB,EAAe/lC,MAAQ,wBAhBxB,kBAiBQ1K,EAASywC,IAjBjB,eAoBmB3uB,IAAlBlB,EApBD,wBAqBC6vB,EAAe/lC,MAAQ,mBArBxB,kBAsBQ1K,EAASywC,IAtBjB,oCA0B6B,IAAIjD,IAAkB8xC,SAAS1+D,GA1B5D,eA0BO2+D,EA1BP,OA2BOxiE,EAAyBwiE,EAAch1E,KA3B9C,WA6B+B,IAAIijC,IAAkBgyC,kBAAkBziE,EAAMgO,MA7B7E,eA6BO00D,EA7BP,OA8BOb,EAAoCa,EAAgBl1E,KA9B3D,WAgC8B,IAAI+kC,IAAkBW,YAAY,CAC3DO,MAAO,MACPzzB,MAAOA,EAAMgO,KACb8lB,QAASpD,GAA4BuD,QAnC1C,WAgCO0uC,EAhCP,OAqCOb,EAA4Ba,EAAen1E,MAE3CyX,EAAsBvF,GAAQkE,OACrBqB,GAAUA,EAAMlB,YAxChC,oBA2CUokC,EA3CV,mCA4CsD,IAAIJ,IAA0BQ,oBAAoB,CAC3F93C,KAAMmT,EAAYhT,GAClBkjC,QAAS,SA9CtB,QA4Ce0U,EA5Cf,OAgDS9U,EAAe+U,uBAAyBD,EAA+Bh7C,KAhDhF,eAoDCkmC,EAAe1zB,MAAQA,EACvB0zB,EAAemuC,QAAUA,EACzBnuC,EAAeouC,OAASA,EAtDzB,kBAuDQ7+E,EAASywC,IAvDjB,0CAyDCA,EAAe/lC,MAAQ,KAAMge,WAzD9B,kBA0DQ1oB,EAASywC,IA1DjB,2DAAP,0DADwC,IAAC7vB,GaYrC+mC,kBAAmB,kBAAM3nD,EbqD7B,yCAAO,WAAOA,EAAoBwP,GAA3B,0BAAA1F,EAAA,yDACG6W,EAAcnR,IAAWkR,oBAAoBC,YADhD,oDAMG5D,EAAQvN,IAAW2vE,uBAAuBpiE,MAEhD/c,EAAS,CACLC,KAAMyyE,GAAmB3rB,uBAGvBtW,EAAqD,CACvDxwC,KAAMyyE,GAAmBxrB,8BAGxBnqC,EAhBF,uBAiBC0zB,EAAe/lC,MAAQ,mBAjBxB,kBAkBQ1K,EAASywC,IAlBjB,kCAsBwB,IAAIqU,IAA0BuD,oBAAoB1nC,EAAYhT,GAAIoP,EAAMgO,MAtBhG,eAsBOlS,EAtBP,OAuBO+sC,EAA+C/sC,EAAStO,KACxD+9C,EAAqE94C,IAAWy1C,wBAAwBC,wBAE1GzU,EAAe2W,mCADmBtlC,IAAlCwmC,EACA,uBACOA,GADP,CAEI1C,IAG2C,CAACA,GA/BrD,kBAiCQ5lD,EAASywC,IAjCjB,yCAmCCA,EAAe/lC,MAAQ,KAAMge,WAnC9B,kBAoCQ1oB,EAASywC,IApCjB,0DAAP,0DapDImX,oBAAqB,kBAAM5nD,Eb8F/B,yCAAO,WAAOA,EAAoBwP,GAA3B,4BAAA1F,EAAA,yDACG6W,EAAcnR,IAAWkR,oBAAoBC,YADhD,oDAMG5D,EAAQvN,IAAW2vE,uBAAuBpiE,MAEhD/c,EAAS,CACLC,KAAMyyE,GAAmBrrB,wBAGvB5W,EAAsD,CACxDxwC,KAAMyyE,GAAmBlrB,+BAGxBzqC,EAhBF,uBAiBC0zB,EAAe/lC,MAAQ,mBAjBxB,kBAkBQ1K,EAASywC,IAlBjB,mBAsBO6X,EAAqE94C,IAAW2vE,uBAAuBj6B,wBAtB9G,0CAwBYllD,EAASywC,IAxBrB,YA4B6B,KAFtB+X,EAAqBF,EAA8Br/C,WACrD,SAAA28C,GAAqB,OAAIA,EAAsB7oC,MAAMgO,OAAShO,EAAMgO,MAAQ66B,EAAsBp4C,KAAKG,KAAOgT,EAAYhT,OA3B/H,0CA6BY3N,EAASywC,IA7BrB,eA+BK2W,EA/BL,aA+BkEkB,GAC3DG,EAA+BrB,EAA8BoB,GAAoBxgC,QAhCxF,WAiCO,IAAI88B,IAA0B8C,oBAAoBa,EAAc96C,IAjCvE,eAkCCy5C,EAA8B/0C,OAAOm2C,EAAoB,GAEzD/X,EAAe2W,8BAAgCA,EApChD,kBAqCQpnD,EAASywC,IArCjB,yCAuCCA,EAAe/lC,MAAQ,KAAMge,WAvC9B,kBAwCQ1oB,EAASywC,IAxCjB,0DAAP,6DayHW5wC,CAA6Cq/E,IC5PtDS,G,kDAEF,WAAY1hF,GAAQ,IAAD,8BACf,cAAMA,IAED6B,MAAQ,CACTgc,eAAgB,KAChB4yC,sBAAsB,GALX,E,qDASnB,WAAqB,IAAD,OAChBv5B,KAEK/qB,MAAK,SAAA0R,GACF,EAAKsb,SAAS,CACVtb,eAAgBA,EAChB4yC,sBAAsB,S,oBAKtC,WACI,MAGI1wD,KAAK8B,MAFLgc,EADJ,EACIA,eACA4yC,EAFJ,EAEIA,qBAGJ,OACI,cAACv6C,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHjB,SAOSw6C,EAuBG,cAACr6C,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,eAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,UAMI,cAACN,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACHyV,gBAAiBC,IAHzB,SAMI,cAACN,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH2V,WAAY,GACZC,cAAe,GACfC,YAAa,GACbC,aAAc,IATtB,SAYI,cAAC/V,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,SAII,4BAAI,wBAAwBuwB,sBAKxC,cAACjvB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GACtB/5B,MAAO,CACH6V,YAAa,GACbC,aAAc,IAPtB,SAWS6G,EAAe+W,qBAIZ,cAAC,IAAD,CACIj0B,QAAM,EACNi9E,wBAAyB,CAACC,OAAQ7hE,GAA8B6B,EAAe+W,qBAAqBxpB,MACpGjK,UAAW,KALf,cAzExB,cAACiV,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,IAAD,CACIY,MAAM,OACNnW,UAAW,GACXgW,cAAc,SAHlB,SAKI,cAAC,KAAD,CACI7V,MAAOsV,iB,GArDRjV,aAiIxBC,gBArIS,SAAAC,GACpB,MAAO,KAoIID,CAAyB8/E,ICvFlCC,G,kDAEF,WAAY3hF,GAAQ,IAAD,8BACf,cAAMA,IAqGVmnC,SAAW,WAEP,IAAMy6C,EAAmB,EAAK5hF,MAAM+K,MAAM6Y,OAAOoH,OAG7C62D,EACA,EAAK7hF,MADL6hF,iDAGJ,EAII,EAAKhgF,MAHLigF,EADJ,EACIA,eACAC,EAFJ,EAEIA,qBACAC,EAHJ,EAGIA,sBAGCF,GAAmBC,GAAyBC,IAC7C,EAAK7oD,SAAS,CACV4oD,sBAAsB,EACtBC,uBAAuB,IAG3B9qD,GACsB0qD,GACjBz1E,MAAK,SAAAoD,GAEF2nB,GACwB0qD,GACnBz1E,MAAK,SAAA0hB,GAEFte,EAAKse,eAAiBA,EAEtB,EAAKsL,SAAS,CACV2oD,eAAgBrjE,KAAKC,MAAMD,KAAKE,UAAUpP,IAC1CwyE,sBAAsB,EACtBC,uBAAuB,IAI3BH,OAEHptE,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV2oD,eAAgB,KAChBC,sBAAsB,EACtBC,uBAAuB,UAItCvtE,OAAM,SAAAhI,GACH,EAAK0sB,SAAS,CACV2oD,eAAgB,KAChBC,sBAAsB,EACtBC,uBAAuB,SAtJvC,EAAKngF,MAAQ,CACTigF,eAAgB,KAChBC,sBAAsB,EACtBC,uBAAuB,GANZ,E,qDAUnB,WACI,MAOIjiF,KAAKC,MANL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEAZ,EAJJ,EAIIA,2BACAG,EALJ,EAKIA,sCACAK,EANJ,EAMIA,iBAGE9sB,EAAQhL,KAAKC,MAAM+K,MAEzBssB,EAA2BtsB,EAAM6Y,OAAO1U,eAAe,iBAAmBnE,EAAM6Y,OAAOjB,cAAgB,MACvG6U,EAAsCzsB,EAAM6Y,OAAO1U,eAAe,iBAAmBujB,GAA2BA,GAA4C1nB,EAAM2vB,MAElK7C,IAEIC,GAAyBG,GACzBl4B,KAAKonC,a,gCAIb,SAAmBxM,EAAWC,EAAWhnB,GACrC,MAUI7T,KAAKC,MATL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAEAlU,EAJJ,EAIIA,MAEA8T,EANJ,EAMIA,iBACA43B,EAPJ,EAOIA,6CAEAqY,EATJ,EASIA,wBAIAga,EACA/hF,KAAK8B,MADLigF,eAGJjqD,IAEIC,GAAyBG,IACzBl4B,KAAKonC,WAEDpjB,GAAS+9D,IACTryB,EAA6CqyB,GAI7Cha,EAAwBga,O,kCAKpC,WACI,MAYI/hF,KAAKC,MAXLyvD,EADJ,EACIA,6CAOAqY,EARJ,EAQIA,wBACAma,EATJ,EASIA,kDAEAC,EAXJ,EAWIA,gDAKJzyB,EAA6C,MAG7CyyB,IAWApa,EAAwB,MACxBma,M,oBA+DJ,WACI,MASIliF,KAAKC,MARLiP,EADJ,EACIA,gBACAgpB,EAFJ,EAEIA,oBACAH,EAHJ,EAGIA,sBAEAO,EALJ,EAKIA,WACA+B,EANJ,EAMIA,eACArW,EAPJ,EAOIA,MACAo+D,EARJ,EAQIA,YAGJ,EAGIpiF,KAAK8B,MAFLigF,EADJ,EACIA,eACAC,EAFJ,EAEIA,qBAGJ,OAAKjqD,EAQAG,GAIDmC,GACI+nD,GACAJ,EAiBJ1pD,IAAeG,KACXzU,GACAA,GnIhGU,ImIgGDA,EAAM/hB,OACf8/E,IASH/9D,EAAMlB,YACJi/D,EAAe5yE,eAAe,oBACmD,IAAjF4yE,EAAej0D,eAAe7iB,WAAU,SAAA8T,GAAK,OAAIA,EAAMgO,OAAS/I,EAAM+I,QARrE,cAAC,GAAD,IAgBJ,cAAC5W,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,GAAlC,SAEI,cAACG,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GAAIvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAAI/5B,MAAO,CAACC,UAAW,GAAIoW,aAAc,IAA9G,SAESuqE,EAIG,cAAC,GAAD,IAFA,WA3ChB,cAAC,IAAD,CAAU3gF,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,OAbb,cAAC,GAAD,IAPH,cAAC,IAAD,CAAUzV,UAAW,GAAIgW,cAAc,SAAvC,SACI,cAAC,KAAD,CAAY7V,MAAOsV,W,GArLLjV,aAyPnBC,gBAjSS,SAAAC,GACpB,MAAO,CACH4gB,oBAAqB5gB,EAAM4gB,oBAE3BxT,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7C6oB,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnDG,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDI,WAAYx2B,EAAM2P,KAAK6mB,WACvB+B,eAAgBv4B,EAAM2P,KAAK4oB,eAC3BrW,MAAOliB,EAAM2P,KAAKjC,KAClB4yE,YAAatgF,EAAM2P,KAAKwqB,WAExBwzB,2BAA4B3tD,EAAM6oC,SAASoR,WAC3CsmC,mBAAoBvgF,EAAMwgF,cAAc9yE,SAIrB,SAAAxN,GACvB,MAAO,CACHs1B,2BAA4B,SAAC1U,GAAD,OAAmB5gB,EAASk3B,GAAwDtW,KAChH6U,sCAAuC,SAACC,EAAcC,GAAf,OAA+B31B,EAASk3B,GAAmExB,EAAcC,KAChKG,iBAAkB,kBAAM91B,EAASk3B,OAEjCw2B,6CAA8C,SAAClgD,GAAD,OAAUxN,EAAS66C,GAA6CrtC,KAC9GsyE,iDAAkD,kBAAM9/E,GhG2OrD,SAACA,EAAUwP,GACd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9Bo7B,EAAep5B,IAAWm5B,SAASC,aAEpCjoB,GAAgBioB,GAOjBjoB,EAAYhT,KAAOi7B,EAAaj7B,KAI/Bi8B,KACDA,GAAuB5sC,EAClBgU,WACAzS,IAAIqO,IACJyE,MAAMu3B,EAAaj7B,KAGnBiE,GAAG,SAAS,SAAAC,GACT,IAAI0uE,EAAc1uE,EAASsY,MAEvBo2D,IACAA,EAAYz0D,eAAiB8c,EAAa9c,eAE1C9rB,EAAS,CACLC,KAAM4pC,GACN02C,yBgGxQpBJ,gDAAiD,kBAAMngF,EAAS66C,OAOhEkrB,wBAAyB,SAACv4D,GAAD,OAAUxN,EAASinC,GAAoCz5B,KAChF0yE,kDAAmD,kBAAMlgF,EAASinC,OAElE/3B,2BAA4B,SAACC,EAAS5P,EAAO6P,GAAjB,OAA8BpP,EAASyY,GAAmDtJ,EAAS5P,EAAO6P,QA6P/HvP,CAA6C+/E,IC1QtDY,G,4JACF,WAAU,IAAD,EACL,EAIIxiF,KAAKC,MAHLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBACAxI,EAHJ,EAGIA,gBAGJ,OAAO,eAAC/D,EAAA,EAAD,CAAWC,OAAK,EAACjV,MAAO,CAAC+U,QAAS,EAAG9E,SAAU,QAASgH,OAAQ,kBAAmBmjC,UAAW,OAAQ7iC,IAAK,GAA3G,UACH,cAACrC,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAACugC,GAAA,EAAD,CAAKG,QAAQ,OAAOM,eAAe,WAAWL,WAAW,SAAS4B,SAAS,OAAOrB,SAAS,OAA3F,UACI,cAAC,GAAD,CAAY/oC,IAAKsQ,GAAOmE,wBAAwBvjB,KAAKC,MAAM+K,MAAM6Y,QAAStiB,MAAM,QAAQk0C,YAAarF,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAAM2E,iBAAiB,EAAOxuC,UAAU,WACrMsuC,eACQ,cAACt0C,EAAA,EAAD,CAAYJ,QAAQ,QAApB,0BAGR,cAACo2C,GAAA,EAAD,CAAK3/B,MAAM,SAEX,cAAC,GAAD,CAAYzI,IAAKsQ,GAAOoE,yBAAyBxjB,KAAKC,MAAM+K,MAAM6Y,QAAStiB,MAAM,QAAQk0C,YAAarF,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAAM2E,iBAAiB,EAAOxuC,UAAU,WAC9KsuC,eACQ,cAACt0C,EAAA,EAAD,CAAYJ,QAAQ,QAApB,4BAGhC,cAACo2C,GAAA,EAAD,CAAK3/B,MAAM,SAEX,cAAC,GAAD,CACIzI,IACI2yB,GAAiB/e,GACX,GACCif,GAA0Bjf,GAE3BtD,GAAOqE,wBAAwBzjB,KAAKC,MAAM+K,MAAM6Y,OAAQpB,EAAqBC,GAD7EtD,GAAOgE,qBAAqBpjB,KAAKC,MAAM+K,MAAM6Y,QAGvDtiB,MAAM,QACNk0C,YAAarF,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACrE2E,iBAAiB,EAEjBxuC,UAAU,IACVsuC,eACI,cAACl0C,EAAA,EAAD,CAAQC,MAAM,UAAUyF,UAAWyQ,YAAIxS,GAAakB,mBAAoBrF,QAAQ,YAAYU,KAAK,SAAjG,SAEQigC,GAAiB/e,GACX,GACCif,GAA0Bjf,GAE3B,YADA,qBAUlC,cAACrM,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,cAACW,EAAA,EAAD,QAIR,cAACjB,EAAA,EAAD,CAAKC,WAAS,EAAd,SACI,cAACC,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,SACI,eAACugC,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAASjgC,OAAO,OAAO0rC,UAAU,QAC/DvM,QACIlB,GACIjG,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACxD,KAJZ,UAQI,eAACmG,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAASf,WAAW,SAASK,eAAe,SAAS8qC,SAAU,EAAG5qC,SAAS,OAA7G,UAEQ5H,GAAqBxtB,GACf,KACA,cAACvJ,GAAA,EAAD,CACE4f,IAAI,OACJ3f,IACK+2B,GAAuBztB,GAElByiC,GAAaziC,EAAoB1D,OADjCga,EAAQ,KAAsBC,QAGxC73B,MAAO,CACHoW,MAAO,OACPa,OAAQ8B,EAAgBlF,SArGnC,IACN,OAyGC,cAACkiC,GAAA,EAAD,CAAK9+B,OAAO,SAEZ,cAAClX,EAAA,EAAD,CAAYK,MAAM,UAAUT,QAAQ,KAAKiU,MAAM,SAA/C,SAEQk7B,GAAqBxtB,GACf,GACCytB,GAAuBztB,GAAxB,UAEAA,EAAoB1D,aAFpB,aAEA,EAA2BkQ,YAD3B,gBAMVihB,GAAuBztB,GACjB,KACA,cAACy0B,GAAA,EAAD,CAAK31C,MAAOsV,KAAOq6B,SAAS,KAAQ9vC,UAAU,OAA9C,SACE,cAACF,EAAA,EAAD,CAAYJ,QAAQ,KAAKiU,MAAM,SAA/B,sDAKhB,eAACmiC,GAAA,EAAD,CAAKG,QAAQ,OAAOgB,cAAc,SAASV,eAAe,WAAW8qC,SAAU,EAA/E,UACI,cAACvpE,GAAA,EAAD,CAAO4f,IAAI,eAAe3f,IAAK4f,EAAQ,KAAwCC,QAAS73B,MAAO,CAACsY,UAAW,UAC3G,cAACy9B,GAAA,EAAD,CAAK9+B,OAAO,OACRm/B,QACIlB,GACIjG,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KACxD,wB,GApHpBnvC,aAgILC,gBAxIS,SAACC,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3BxI,gBAAiBpY,EAAMoY,mBAoIhBrY,CAAyB2gF,K,SLrK5BjC,K,6CAAAA,E,uCAAAA,E,iEAAAA,E,iDAAAA,E,uDAAAA,E,uCAAAA,E,mEAAAA,E,6EAAAA,E,8FAAAA,Q,KAwBL,IMxBKmC,GNmFCC,GAAgD,WACzD,OAAO,SAAC3gF,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAMs+E,GAAaqC,8BOrEzBthD,GAA4B,CAC9BuhD,YAAa,GACbC,eAAgB,GAChB3oD,cAAc,EAEd4oD,kBAAkB,EAClBC,qBAAqB,EAErBC,yBAAyB,EACzBC,yBAA0B,GAC1BC,+BAA+B,EAC/BC,8BAA8B,GAWrBC,GAAmC,SAACvhF,GAC7C,OAAOA,EAAMqhF,+BAgEFG,GA7DO,WAA8D,IAA7DxhF,EAA4D,uDAAvCw/B,GAAchW,EAAyB,uCAC/E,OAAQA,EAAOrpB,MACX,KAAKs+E,GAAagD,eACd,OAAO,eACAjiD,IAEX,KAAKi/C,GAAaiD,YACd,IAAMC,EAAwCn4D,EAC9C,OAAO,2BACAxpB,GADP,IAEI,CAAC2hF,EAAkB/0E,MAAO+0E,EAAkBxqE,QAEpD,KAAKsnE,GAAamD,yBACd,OAAO,2BACA5hF,GADP,IAEIq4B,cAAer4B,EAAMq4B,eAE7B,KAAKomD,GAAaoD,iBACd,OAAO,2BACA7hF,GADP,IAEIihF,kBAAkB,IAE1B,KAAKxC,GAAaqD,oBACd,OAAO,2BACA9hF,GADP,IAEIkhF,qBAAqB,IAE7B,KAAKzC,GAAasD,YACd,OAAO,2BACA/hF,GADP,IAEIihF,kBAAkB,EAClBC,qBAAqB,IAE7B,KAAKzC,GAAaqC,0BACd,OAAO,2BACA9gF,GADP,IAEImhF,yBAA0BnhF,EAAMmhF,wBAChCC,yBAA0B,GAC1BY,8BAA0BhgE,IAElC,KAAKy8D,GAAawD,+BACd,OAAO,2BACAjiF,GADP,IAEIqhF,+BAA+B,EAC/BW,8BAA0BhgE,IAElC,KAAKy8D,GAAayD,uCACd,IAAMvxC,EACDnnB,EACL,OAAO,2BACAxpB,GADP,IAEIshF,kCAAuDt/D,IAAzB2uB,EAAe/lC,MAC7Co3E,8BAAmDhgE,IAAzB2uB,EAAe/lC,MACnC,CAACqe,OAAQ0nB,EAAe/lC,OAAS5K,EAAMgiF,yBAC7CX,+BAA+B,IAEvC,QACI,OAAOrhF,ICzCbmiF,GAAkB,SAACniF,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,oBAC3BxI,gBAAiBpY,EAAMoY,gBACvBgqE,iBAAkBpiF,EAAMoiF,mBAI1BC,GAAqB,SAACniF,GACxB,MAAO,CACH85B,cAAe,SAACphB,GAAD,OAAgD1Y,ER9CtB,SAAC0Y,GAC9C,OAAO,SAAC1Y,EAAoBwP,GAMxB,OAAOxP,EAL2B,CAC9BC,KAAMs+E,GAAaiD,YACnB90E,KAAMgM,EAAMyD,OAAOzP,KACnBuK,MAAOyB,EAAMyD,OAAOlF,SQyCgD6iB,CAAcphB,KACtF0pE,yBAA0B,kBAAMpiF,GRnC7B,SAACA,EAAoBwP,GACxB,OAAOxP,EAAS,CACZC,KAAMs+E,GAAamD,+BQkCvBW,cAAe,SAAC3pE,GAAD,OAAsB1Y,ER7BI,SAAC0Y,GAC9C,gDAAO,WAAO1Y,EAAoBwP,GAA3B,0BAAA1F,EAAA,2DAIC0F,IAAW0yE,iBAFXrB,EAFD,EAECA,YACAC,EAHD,EAGCA,eAGJpoE,EAAM6e,iBAENv3B,EAAS,CACLC,KAAMs+E,GAAasD,cAGjB72D,EAAgB61D,EAAY31E,OAAO/B,cACnCN,EAAmBi4E,EAErBwB,GAAuB,EAEN,IAAjBt3D,EAAMjiB,SACN/I,EAAS,CACLC,KAAMs+E,GAAaoD,mBAEvBW,GAAc,GAGM,IAApBz5E,EAASE,SACT/I,EAAS,CACLC,KAAMs+E,GAAaqD,sBAEvBU,GAAc,GAGbA,EA/BF,4EAmCItiF,EAAS2gC,GAAO3V,EAAOniB,KAnC3B,4CAAP,wDQ4BkDw5E,CAAc3pE,KAC5DioE,0BAA2B,kBAAM3gF,EAAS2gF,OAC1C4B,yBAA0B,kBAAMviF,ERkBpC,yCAAO,WAAOA,EAAoBwP,GAA3B,gBAAA1F,EAAA,6DACH9J,EAAS,CACLC,KAAMs+E,GAAawD,iCAGjBtxC,EAA+D,CACjExwC,KAAMs+E,GAAayD,wCANpB,mBAUO,IAAIv7D,IAAMuB,QACZ,OACA5D,GAAUI,0BACV,CACIoC,gBAAiB,KACjBY,YAAa,CACTwD,MAAOxb,IAAW0yE,iBAAiBhB,4BAhBhD,cAoBClhF,EAAS2gF,MApBV,kBAqBQ3gF,EAASywC,IArBjB,uCAuBCA,EAAe/lC,MAAQ,KAAMge,WAvB9B,kBAwBQ1oB,EAASywC,IAxBjB,yDAAP,4DQdE+xC,G,4JAIF,WAAU,IAAD,IDnDiC1iF,ECoDtC,EASI9B,KAAKC,MARLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBACAxI,EAHJ,EAGIA,gBACAgqE,EAJJ,EAIIA,iBACApoD,EALJ,EAKIA,cACAsoD,EANJ,EAMIA,yBACAC,EAPJ,EAOIA,cACA1B,EARJ,EAQIA,0BAGJ,OAAO,eAACzrC,GAAA,EAAD,WAEH,cAAC7gC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,GACvBxkB,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAH1B,SAKI,cAACgc,GAAA,EAAD,CACIG,QAAQ,OACR9/B,MAAM,OACNogC,eAAe,SACfuB,SAAUh/B,EAAgBlF,SAAW,OAAS,MAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OALlD,SAQI,eAACmmB,GAAA,EAAD,CACIC,UAAW,EACXC,QAAM,EACNr0B,UAAWyQ,YAAIxS,GAAae,yBAC5B7E,MAAO,CACHoW,MAAO,IACPrB,QAASgE,EAAgBlF,SAAW,GAAK,IANjD,UAUI,eAACkiC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACd7gC,aAAa,OAHjB,UAKI,cAACtW,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SACNwmB,WAAS,EACTh6B,MAAM,UAJV,qCAQA,cAACL,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,sFDxGcjT,ECmHiBoiF,EDlHpDpiF,EAAMshF,mCAAmEt/D,IAAnChiB,EAAMgiF,yBCoHjB,cAAC5sC,GAAA,EAAD,CACE1/B,aAAa,OACbjW,MAAM,QACNg2C,QAASlyC,GACT6Q,QAAQ,OAJV,SAME,cAAChV,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,8FAPF,MAmBL8sB,GAAuBnf,GAElB,cAACw0B,GAAA,EAAD,CACE1/B,aAAa,OACbtB,QAAQ,OACR3U,MAAM,QACNg2C,QAAQ,aAJV,SAME,cAACr2C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,mBAIK2N,EAAoBhW,aAJzB,aAIK,EAA2Bqe,WAXlC,KAiBV,sBACIuQ,SAAU+oD,EADd,SAGI,eAACntC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAKI,cAAC7c,GAAA,EAAD,UACI,cAACpe,GAAA,EAAD,CACInc,MAAM,gBACNyN,KAAK,cACLuK,MAAOirE,EAAiBrB,YACxBlhF,OAAO,SACPb,QAAQ,WACR4L,MAAOw3E,EAAiBnB,iBACxBnrE,SAAUkkB,MAKlB,cAACN,GAAA,EAAD,UACI,cAACpe,GAAA,EAAD,CACInc,MAAM,WACNyN,KAAK,iBACLzM,KAAMiiF,EAAiB/pD,aAAe,OAAS,WAC/Cx4B,OAAO,SACPb,QAAQ,WACR4L,MAAOw3E,EAAiBlB,oBACxBprE,SAAUkkB,EACVL,WAAY,CACRC,aACI,cAACC,GAAA,EAAD,CACIvqB,SAAS,MADb,SAGI,cAACiG,EAAA,EAAD,CACIukB,KAAK,MACLC,aAAW,6BACXn6B,QAAS0iF,EAHb,SAMQF,EAAiB/pD,aAEb,cAAC,KAAD,IAEA,cAAC,KAAD,aAShC,cAAC+c,GAAA,EAAD,CACI91C,UAAU,OACVoW,aAAa,OAFjB,SAII,eAACtW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,sDAKI,cAAC,GAAD,CACIjG,IAAKsQ,GAAOgC,mBACZjD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,WACVsuC,eACI,iBAbZ,cAiBI,cAAC,GAAD,CACI1mC,IAAKsQ,GAAOgC,mBACZjD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,WACVsuC,eACI,mBAzBZ,SAiCC/T,GAAiB/e,GAEZ,cAACw0B,GAAA,EAAD,CACEG,QAAQ,OACR7/B,aAAa,OACbmgC,eAAe,SAHjB,SAKE,cAAC,KAAD,CACIp2C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SAPrE,KAYV,cAACvV,GAAA,EAAD,UACI,cAACl6B,EAAA,EAAD,CACIW,KAAK,SACLnB,QAAQ,YACRS,MAAM,UACNC,KAAK,QACLwF,UAAWyQ,YAAIxS,GAAakB,mBALhC,uBAYJ,cAAC+wC,GAAA,EAAD,CACIG,QAAQ,OACRj2C,UAAU,OACVu2C,eAAe,SAHnB,SAKI,eAACz2C,EAAA,EAAD,CACIJ,QAAQ,QADZ,mDAII,cAAC,GAAD,CACIgO,IAAKsQ,GAAOiE,qBAAP,UAA4BZ,EAAoBktB,wBAAhD,QAAoE,IACzEpuC,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,WACVsuC,eACI,iBAOhB,cAAC0B,GAAA,EAAD,CACIG,QAAQ,OACRj2C,UAAU,OACVu2C,eAAe,SACfj2C,QAASihF,EAJb,SAMI,cAACzhF,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAaG,gBAHhC,mDAgB5B,cAACiR,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,GAAD,QAKR,cAAC8tE,GAAD,W,GA1RY7iF,aA+RTC,eAAQoiF,GAAiBE,GAAzBtiF,CAA6C2iF,IAEtDxoD,G,4JACF,WACI,ID9UkCl6B,EC8UlC,EAMI9B,KAAKC,MALLwiB,EADJ,EACIA,oBACAyhE,EAFJ,EAEIA,iBACApoD,EAHJ,EAGIA,cACA6mD,EAJJ,EAIIA,0BACA4B,EALJ,EAKIA,yBAGJ,OAAO,eAACjkF,EAAA,EAAD,CACHG,WAAS,EACTuV,SAAS,KACTC,WAAYjW,KAAKC,MAAMia,gBAAgBlF,SACvCxU,KAAM0jF,EAAiBjB,wBACvB3tE,QAASqtE,EALN,UAOH,cAACjiF,EAAA,EAAD,UACI,eAACw2C,GAAA,EAAD,CACIG,QAAQ,OACRC,WAAW,SAFf,UAII,cAACJ,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,aACf8qC,SAAU,EAHd,SAKI,cAACvhF,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,mCAOJ,cAACmiC,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,WACf8qC,SAAU,EAHd,SAKI,cAACprE,EAAA,EAAD,CACI3V,QAASihF,EADb,SAGI,cAAC,KAAD,aAMhB,cAAChiF,EAAA,EAAD,CACIQ,MAAO,CACH+U,QAAS,GAFjB,SAKI,eAACghC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdV,eAAe,SACfv2C,UAAU,OACV83C,SAAS,OALb,UAOI,eAAChC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,UAII,cAACn3C,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,wGAOA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,eAAClX,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,2EAKyB,uGAI7B,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAGX,eAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SAFlB,WDnasBv2C,ECyaaoiF,ODxaTpgE,IAAnChiB,EAAMgiF,yBCyaiB,KACA,cAAC5sC,GAAA,EAAD,CACE3/B,MAAM,OACNggC,QAAQ,aACRrhC,QAAQ,OACRsB,aAAa,OACbjW,MAAM,QALR,SAOE,cAACL,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,uDAWPsuE,GAAiCa,GAE5B,cAAChtC,GAAA,EAAD,CACEG,QAAQ,OACRM,eAAe,SACfngC,aAAa,OAHf,SAKE,cAAC,KAAD,CACIjW,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SAPrE,KAaV,cAAC3zB,GAAA,EAAD,CACI1O,KAAK,2BACLuK,MAAOirE,EAAiBhB,yBACxBjiF,MAAM,gBACNH,QAAQ,WACRL,WAAS,EACTmX,SAAUkkB,OAIlB,cAACob,GAAA,EAAD,CACI9+B,OAAO,cAKnB,cAAC/W,EAAA,EAAD,UACI,cAAC61C,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,WACfzhC,QAAQ,MAHZ,SAKI,cAAC5U,EAAA,EAAD,CACIC,MAAM,UACNT,QAAQ,YACRU,KAAK,SACLE,QAAS6iF,EACTv9E,UAAWyQ,YAAIxS,GAAakB,mBAC5B1E,SAAsE,IAA5DyiF,EAAiBhB,yBAAyBh2E,OAAOnC,OAN/D,6B,GArJcnJ,aAqK5B6iF,GAA+B5iF,YAAQoiF,GAAiBE,GAAzBtiF,CAA6Cm6B,ICrhB7D5d,G,4JACjB,WACI,OAAO,cAACjI,EAAA,EAAD,CACHC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHV,SAMH,cAACG,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,eAACugC,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACd9gC,MAAM,OACNa,OAAO,OACPk/B,WAAW,SACXl2C,UAAU,QANd,UAQI,cAAC81C,GAAA,EAAD,CACI31C,MAAO8D,GADX,SAGI,cAACnE,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,yBAOJ,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,SAFV,4BAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAClX,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,gBACNwT,MAAM,SAHV,kF,GA/CkBnT,aCyCpC8iF,G,4JACF,WAAU,IAAD,EACL,EAQI1kF,KAAKC,MAPLia,EADJ,EACIA,gBACAuI,EAFJ,EAEIA,oBACAC,EAHJ,EAGIA,oBACA2gB,EAJJ,EAIIA,UACAshD,EALJ,EAKIA,OACAC,EANJ,EAMIA,aACAC,EAPJ,EAOIA,UAGJ,OAAO,eAAC1uE,EAAA,EAAD,CACHC,OAAK,EACLjV,MAAO,CACH+U,QAAS,GAHV,UAMH,eAACG,EAAA,EAAD,CACIC,WAAS,EACTnV,MAAO,CACH2V,WAAY,GACZC,cAAe,GACfH,gBAAiBvR,IALzB,UASI,cAACkR,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,EAAGC,MAAO,GACrB/hB,GAAI,CAAC8hB,KAAM,EAAGC,MAAO,GACrB9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GACrB7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAJzB,SAMI,eAAC0e,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdjgC,OAAO,OACPk/B,WAAW,SACX3xC,WAAW,OALf,UAQQg8B,GAA0Bjf,GACpB,KACA,cAAC,GAAD,CACEnhB,MAAM,QACNk0C,YACIr2B,GAAOgD,aAAaihB,IAAcjkB,GAAOiD,oBAAoBghB,GACvDh+B,GACA+qC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAElE2E,iBAAiB,EACjB5mC,IAAK61E,EACLz9E,UAAU,WACVsuC,eACI,cAACt0C,EAAA,EAAD,CACIJ,QAAQ,QADZ,oBAUZ2gC,GAAiB/e,GACX,KACCif,GAA0Bjf,GAE3B,cAAC,GAAD,CACEnhB,MAAM,QACNk0C,YACIr2B,GAAOgD,aAAaihB,IAAcjkB,GAAOiD,oBAAoBghB,GACvDh+B,GACA+qC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAElE2E,iBAAiB,EACjB5mC,IAAK81E,EACL19E,UAAU,WACVsuC,eACI,cAACt0C,EAAA,EAAD,CACIJ,QAAQ,QADZ,yBAZN,UAwBlB,cAACyV,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GACtB/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GACtB9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GACrB7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAJzB,SAMI,cAAC0e,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACdV,eAAe,SACfL,WAAW,SAJf,SAMI,cAAC,GAAD,CACI/1C,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjB5mC,IAAK61E,EACLz9E,UAAU,WACVsuC,eACI,eAAC0B,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,SACd9gC,MAAM,QACNa,OAAO,OACPu/B,eAAe,SACfL,WAAW,SANf,UAQI,qBACIxe,IAAI,OACJ3f,IACIiG,GAAOgD,aAAaihB,IAAcjkB,GAAOiD,oBAAoBghB,GACvDtK,EAAQ,KAAsBC,QAC9BiX,GAAqBxtB,GACrB,KACCytB,GAAuBztB,GAEpB0tB,GAA8B1tB,GAC1ByiC,GAAaziC,EAAoB1D,OACjC,KAHJga,EAAQ,KAAsBC,QAK5C73B,MAAO,CACHoW,MAAO,OACPa,OAAQ,GACRqB,UAAW,aAGnB,cAACy9B,GAAA,EAAD,CACI9+B,OAAO,QAEX,cAAC8+B,GAAA,EAAD,CACI34B,WAAW,iBACXhd,MACI6d,GAAOgD,aAAaihB,IAAcjkB,GAAOiD,oBAAoBghB,GACvDh+B,GACA,eALd,SAQI,cAACnE,EAAA,EAAD,CACIJ,QAAQ,QACR2kD,QAAM,EAFV,SAKQrmC,GAAOgD,aAAaihB,IAAcjkB,GAAOiD,oBAAoBghB,GACvD,cACA4M,GAAqBxtB,GACrB,GACCytB,GAAuBztB,GAAxB,UAEIA,EAAoB1D,aAFxB,aAEI,EAA2BkQ,YAD3B,2BAYrC/U,EAAgBlF,SAEX,cAACuB,EAAA,EAAD,CACEC,GAAI,CAAC+hB,KAAM,GAAIC,MAAO,GACtB/hB,GAAI,CAAC8hB,KAAM,GAAIC,MAAO,GAFxB,SAIE,cAAC0e,GAAA,EAAD,CACIqC,QAAQ,OADZ,SAGI,cAACjiC,EAAA,EAAD,QARN,KAcV,cAACf,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,EAAGC,MAAO,GACrB/hB,GAAI,CAAC8hB,KAAM,EAAGC,MAAO,GACrB9hB,GAAI,CAAC6hB,KAAM,EAAGC,MAAO,GACrB7hB,GAAI,CAAC4hB,KAAM,EAAGC,MAAO,GAJzB,SAOQiJ,GAAiB/e,IAEVif,GAA0Bjf,IAC3BtD,GAAO6C,cAAcohB,GAFrB,KAII,cAAC6T,GAAA,EAAD,CACEG,QAAQ,OACRgB,cAAc,MACdjgC,OAAO,OACPu/B,eAAe,WACfL,WAAW,SACXn/B,YAAY,OANd,SAQE,cAAC,GAAD,CACI5W,MAAM,OACNk0C,YAAY,OACZC,iBAAiB,EACjB5mC,IAAK+1E,EAEL39E,UAAU,IACVsuC,eACI,cAACl0C,EAAA,EAAD,CACIC,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,YACRU,KAAK,SAJT,8BAiBhC,cAAC6U,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAACW,EAAA,EAAD,e,GA/OC1V,aAsPNC,gBA9PS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBuI,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,uBA0PpB7gB,CAAyB6iF,IC1OlCpjD,GAAgC,CAClCwjD,yCAAyC,EACzCC,oBAAoB,EACpBC,mBAAmB,GAoBjBC,G,kDAKF,WAAYhlF,GAAsE,IAAD,8BAC7E,cAAMA,IALFilF,kBAIyE,IAHzE7hD,eAGyE,IAFzE7gB,iBAEyE,IAsNjF2iE,+BAAiC,WAC7B,EAAKC,uBAEL,EAAKnlF,MAAMolF,uBAEX,EAAKplF,MAAMqlF,iBACP,EAAKjiD,UAAW,EAAK7gB,YAAYrT,eAAe,iBAC1C,EAAKqT,YAAYI,cAAgB,MAG3C,EAAK2iE,sBAhOwE,EAmOjFH,qBAAuB,WACnB,EAAK/hD,UAAY,EAAKpjC,MAAM+K,MAAM2vB,KAClC,EAAKnY,YAAc,EAAKviB,MAAM+K,MAAM6Y,QArOyC,EAwOjF0hE,mBAAqB,WACjB,IACI9iE,EACA,EAAKxiB,MADLwiB,oBAGA0tB,GAA8B1tB,KAAyB,EAAKyiE,eAC5D,EAAKA,aAAelmF,EAASyS,OAAO+zE,oBAAmB,SAAAvtD,GAC/CA,EACA,EAAKh4B,MAAM0iC,SAEX,EAAK1iC,MAAMk9B,eAlPsD,EAwPjFsoD,mBAAqB,WACb,EAAKP,eACL,EAAKA,eACL,EAAKA,aAAe,OAzPxB,EAAKA,aAAe,KACpB,EAAK7hD,UAAY,EAAKpjC,MAAM+K,MAAM2vB,KAClC,EAAKnY,YAAc,EAAKviB,MAAM+K,MAAM6Y,OACpC,EAAK/hB,MAAL,eACOw/B,IANsE,E,qDAUjF,WACIthC,KAAKmlF,mC,gCAGT,SAAmBvqD,EAAmFC,EAAsChnB,GAAiB,IAAD,OAIxJ,GAHA7T,KAAKmlF,kCAGD7wB,GAA0Bt0D,KAAKC,MAAMy4C,+BAKrCzI,GAAqBjwC,KAAKC,MAAMwiB,qBAApC,CAKA,IAAK0tB,GAA8BnwC,KAAKC,MAAMwiB,uBAAyBziB,KAAK8B,MAAMkjF,kBAK9E,OAJAhlF,KAAKo5B,SAAS,CACV4rD,mBAAmB,SAEvBhlF,KAAKC,MAAM66B,QAAQhuB,KAAKsS,GAAOsC,UAkBnC,IAbItC,GAAOuC,iBAAiB3hB,KAAKqjC,YACzB7B,GAAqBxhC,KAAKC,MAAMyiB,sBAChC+e,GAAiBzhC,KAAKC,MAAMyiB,sBAC5Bif,GAA0B3hC,KAAKC,MAAMyiB,sBACrC1iB,KAAK8B,MAAMijF,qBAEf/kF,KAAKo5B,SAAS,CACV2rD,oBAAoB,IAExB/kF,KAAKC,MAAM66B,QAAQhuB,KAAKsS,GAAOgE,qBAAqBpjB,KAAKwiB,gBAIxDpD,GAAO6C,cAAcjiB,KAAKqjC,YAAcjkB,GAAO+C,cAAcniB,KAAKqjC,aAChE1B,GAA0B3hC,KAAKC,MAAMyiB,uBACpC1iB,KAAK8B,MAAMgjF,wCACjB,CACE,IAAMY,EAAyBtmE,GAAOqE,wBAAwBzjB,KAAKwiB,YAAaxiB,KAAKC,MAAMwiB,oBAAqBziB,KAAKC,MAAMyiB,qBAC3H1iB,KAAKo5B,SAAS,CACV0rD,yCAAyC,IAE7C9kF,KAAKC,MAAM66B,QAAQhuB,KAAK44E,GAI5B,GAAI/jD,GAA0B3hC,KAAKC,MAAMyiB,qBAAsB,CAC3D,IAAMC,EAAmC3iB,KAAKC,MAAMyiB,oBAAoBC,YACxE,GAAIA,EAAa,CACb,IAAME,EAA6BpE,GAAQkE,GACvCgjE,GAAiC,EAErC,GAAIvmE,GAAOyC,6BAA6B7hB,KAAKqjC,aACpCxgB,GAAiBA,IAAiBA,EAAaC,cAChD6iE,GAAwB,QAEzB,GAAIvmE,GAAO0C,kBAAkB9hB,KAAKqjC,WAAY,CACjD,GAAKxgB,EAGqC7iB,KAAKC,MAAMyiB,oBAAoBK,mBAAmB,GACzEhE,MAAM6D,gBAAkB5iB,KAAKwiB,YAAYI,gBACpD+iE,GAAwB,QAJ5BA,GAAwB,OAOrBvmE,GAAO2C,uBAAuB/hB,KAAKqjC,WACrCnkB,GAASyD,GAI+E,IAFlF3iB,KAAKC,MAAMyiB,oBAAoBK,mBACrCG,QAAO,SAAAC,GAAiB,OACrBA,EAAkBpE,MAAM6D,gBAAkB,EAAKJ,YAAYI,iBAAe7X,SAE9E46E,GAAwB,GALxBA,GAAwB,EAOrBvmE,GAAO4C,yBAAyBhiB,KAAKqjC,aACvClkB,GAAWwD,GAI6E,IAFlF3iB,KAAKC,MAAMyiB,oBAAoBK,mBACrCG,QAAO,SAAAC,GAAiB,OACrBA,EAAkBpE,MAAM6D,gBAAkB,EAAKJ,YAAYI,iBAAe7X,SAE9E46E,GAAwB,GALxBA,GAAwB,GAShC,GAAIA,IAA0B3lF,KAAK8B,MAAMkjF,kBAKrC,OAJAhlF,KAAKo5B,SAAS,CACV4rD,mBAAmB,SAEvBhlF,KAAKC,MAAM66B,QAAQhuB,KAAKsS,GAAOsC,WAMtCtC,GAAO6C,cAAcjiB,KAAKqjC,YAAejkB,GAAO+C,cAAcniB,KAAKqjC,aAAcrjC,KAAK8B,MAAMgjF,yCAC7F9kF,KAAKo5B,SAAS,CACV0rD,yCAAyC,IAI7C1lE,GAAO6C,cAAcjiB,KAAKqjC,YAAcrjC,KAAK8B,MAAMijF,oBACnD/kF,KAAKo5B,SAAS,CACV2rD,oBAAoB,IAIxB3lE,GAAOgD,aAAapiB,KAAKqjC,YAAcrjC,KAAK8B,MAAMkjF,mBAClDhlF,KAAKo5B,SAAS,CACV4rD,mBAAmB,O,kCAK/B,WACIhlF,KAAKylF,uB,oBAGT,WACI,MAMIzlF,KAAKC,MALLy4C,EADJ,EACIA,4BACAj2B,EAFJ,EAEIA,oBACAC,EAHJ,EAGIA,oBACAkjE,EAJJ,EAIIA,WACAhvE,EALJ,EAKIA,gBAKJ,OAFA5W,KAAKolF,uBAED9wB,GAA0B5b,IACvBzI,GAAqBxtB,IACpB0tB,GAA8B1tB,IAAwB+e,GAAqB9e,KACzEtD,GAAO6C,cAAcjiB,KAAKqjC,aAAejkB,GAAO+C,cAAcniB,KAAKqjC,YAClE5B,GAAiB/e,GAGpB,cAACw0B,GAAA,EAAD,UACI,cAAC,YAAD,CACI31C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/Dx5B,MAAM,OACNa,OAAQ,MAMpB+3B,GAA8B1tB,GAE1B,eAACtM,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,EACTkC,YAA4B0L,IAApBlN,EAAgC,OAAS,OACjDktC,eAA+BhgC,IAApBlN,EAAgC,QAAU,OACrDA,gBAAe,OAAEA,QAAF,IAAEA,IAAmB,QAN5C,UAUSgvE,EAEK,cAACvvE,EAAA,EAAD,CACEC,WAAS,EADX,SAGE,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,GAAD,CACI0sB,UAAWrjC,KAAKqjC,UAChBshD,OAAQvlE,GAAOmD,mBAAmBviB,KAAKwiB,YAAaC,EAAqBC,GACzEkiE,aAAcxlE,GAAOqE,wBAAwBzjB,KAAKwiB,YAAaC,EAAqBC,GACpFmiE,UAAWzlE,GAAOgE,qBAAqBpjB,KAAKwiB,mBAdtD,KAoBV,cAACnM,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAAC4gC,GAAA,EAAD,CACI3/B,MAAM,OACNa,OAAO,OAFX,SAKQpY,KAAKC,MAAMiH,iBAQ5B,S,GAxNUtF,aAqQVC,gBAtRS,SAACC,GACrB,MAAO,CACH42C,4BAA6B52C,EAAM42C,4BACnCj2B,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,wBAIR,SAAC1gB,GACxB,MAAO,CACHqjF,qBAAsB,kBAAMrjF,EtDrDhC,yCAAO,WAAOA,EAAoBwP,GAA3B,4BAAA1F,EAAA,2DAKC0F,IAAWknC,4BAHXiN,EAFD,EAECA,iBACAyO,EAHD,EAGCA,uBACAC,EAJD,EAICA,wBAGCD,GAA2BC,GAA4B1O,EAPzD,wBAQC3jD,EAAS,CACLC,KAAM4xD,GAA6BW,0BAGjCE,EAAwD,CAC1DzyD,KAAM4xD,GAA6BY,gCACnC9O,iBAAkB,MAdvB,mBAkB4B,IAAIiO,IAA6BiyB,sBAlB7D,cAkBWhrE,EAlBX,OAmBW8qC,EAAqC9qC,EAAStO,KACpDmoD,EAAe/O,iBAAmBA,EAClC3jD,EAAS8xD,GAAWnO,EAAiBvI,UArB1C,kBAsBYp7C,EAAS0yD,IAtBrB,yCAwBKA,EAAehoD,MAAQ,CACnBqe,OAAQ,KAAML,YAzBvB,kBA2BY1oB,EAAS0yD,IA3BrB,0DAAP,0DsDsDI4wB,iBAAkB,SAAC3qD,EAAc/X,GAAf,OAAgD5gB,E/GzCtB,SAAC24B,EAAc/X,GAC/D,gDAAO,WAAO5gB,EAAoBwP,GAA3B,sCAAA1F,EAAA,2DAOC0F,IAAWiR,oBALX4gB,EAFD,EAECA,UACAsM,EAHD,EAGCA,iBACA5wB,EAJD,EAICA,MACA8wB,EALD,EAKCA,aACAD,EAND,EAMCA,YAGEW,EAAuC,CACzCtuC,KAAMygC,GAAqB4N,YAC3B3V,OACA/X,iBAGAkjE,GAAyB,QAGXhiE,IAAduf,QAAgDvf,IAArB6rB,GAKvBA,IAAqB/sB,KAJzBkjE,GAAyB,MAYvB/mE,IAAU8wB,IAAiBD,IACtB7wB,GAAU8wB,GAAiBD,IAAgBk2C,GAhCnD,oBAkCC9jF,EAASuuC,GAEHw1C,EAAqD,CACvD9jF,KAAMygC,GAAqB8N,oBAG/BxuC,EAAS+jF,GAEHC,EAAkE,CACpE/jF,KAAMygC,GAAqB+N,2BAC3B1xB,MAAO,KACPixB,eAAe,GAIdptB,EAjDN,wBAkDKojE,EAA8Bh2C,eAAgB,EAlDnD,kBAmDYhuC,EAASgkF,IAnDrB,oCAuD4B,IAAIx2C,IAAkB8xC,SAAS1+D,GAvD3D,eAuDW/H,EAvDX,OAwDWorE,EAAyCprE,EAAStO,KACxDy5E,EAA8BjnE,MAAQknE,EACtCD,EAA8Bh2C,cAAmC,OAAnBi2C,EA1DnD,kBA2DYjkF,EAASgkF,IA3DrB,0CA6DKA,EAA8Bt5E,MAAQ,CAClCqe,OAAQ,KAAML,YA9DvB,kBAgEY1oB,EAASgkF,IAhErB,2DAAP,wD+GwC+EV,CAAiB3qD,EAAM/X,KAClG+f,OAAQ,kBAAM3gC,EAAS2gC,OACvBxF,QAAS,kBAAMn7B,EAASm7B,UAyQjBt7B,CAA6CojF,K,SLhVhDvC,K,kDAAAA,E,kEAAAA,E,8CAAAA,E,sEAAAA,E,uFAAAA,Q,KA2BL,IMxBKwD,GCeN5kD,GAAmC,CACrC6kD,eAAe,EACfC,cAAc,EACdC,WAAY,KACZr5D,MAAO,KAEPniB,SAAU,GACVy7E,kBAAmB,GAEnBC,mBAAmB,EACnBC,eAAe,GAeNC,GAAsB,SAAC3kF,GAChC,OAAOA,EAAMykF,oBAAsBzkF,EAAM0kF,eAOhCE,GAA4B,SAAC5kF,GACtC,OAAQA,EAAMykF,oBAAsBzkF,EAAM0kF,oBAAkD1iE,IAAjChiB,EAAM6kF,wBA+CtDC,GA5Cc,WAAwD,IAAvD9kF,EAAsD,uDAA9Cw/B,GAAchW,EAAgC,uCAChF,OAAQA,EAAOrpB,MACX,KAAKygF,GAAoBmE,cACrB,OAAO,2BACA/kF,GADP,IAEIqkF,eAAe,EACfC,cAAc,IAEtB,KAAK1D,GAAoBoE,sBACrB,IAAMC,EAA2Dz7D,EACjE,OAAO,2BACAxpB,GADP,IAEIqkF,eAAe,EACfC,cAAc,EACdC,WAAYU,EAA4BV,WACxCr5D,MAAO+5D,EAA4B/5D,MACnCg6D,wBAA0DljE,IAAtCijE,EAA4Br6E,MAAsB,CAACqe,OAAQg8D,EAA4Br6E,OAAS5K,EAAMklF,qBAElI,KAAKtE,GAAoBc,YACrB,IAAMC,EAAuCn4D,EAC7C,OAAO,2BACAxpB,GADP,IAEI,CAAC2hF,EAAkB/0E,MAAO+0E,EAAkBxqE,QAEpD,KAAKypE,GAAoBuE,wBACrB,OAAO,2BACAnlF,GADP,IAEIykF,mBAAmB,EACnBC,eAAe,EACfG,4BAAwB7iE,IAEhC,KAAK4+D,GAAoBwE,gCACrB,IAAMC,EAA+E77D,EACrF,OAAO,2BACAxpB,GADP,IAEIykF,mBAAmB,EACnBC,mBAA+D1iE,IAAhDqjE,EAAsCz6E,MACrDi6E,uBAAwBQ,EAAsCz6E,MAAQ,CAACqe,OAAQo8D,EAAsCz6E,OAAS5K,EAAM6kF,yBAE5I,QACI,OAAO7kF,IClDbslF,G,uKAEF,WACI,IAAMvjE,EAAS+rC,KAAYjxC,MAAM3e,KAAKC,MAAM4vD,SAAS70B,QACrD,GAAInX,EAAOwjE,QAAS,CAChB,IAAMhB,EAAmDxiE,EAAOwjE,QAC5DhB,EACArmF,KAAKC,MAAMqnF,WAAWjB,GAEtBrmF,KAAKC,MAAMqnF,WAAW,WAG1BtnF,KAAKC,MAAMqnF,WAAW,Q,oBAI9B,WAAU,IAAD,ED9BmBxlF,EC+BxB,EAMI9B,KAAKC,MALLwiB,EADJ,EACIA,oBACAvI,EAFJ,EAEIA,gBACAqtE,EAHJ,EAGIA,wBACAzrD,EAJJ,EAIIA,cACA0rD,EALJ,EAKIA,qBAIJ,ODxCwB1lF,ECwCJylF,GDvCXpB,gBAAkBrkF,EAAMskF,aCwCtB,cAAClvC,GAAA,EAAD,CAAKG,QAAQ,OAAOM,eAAe,SAASv2C,UAAU,OAAtD,SACH,cAAC,aAAD,CACIG,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SDnC9C,SAACjvC,GAClC,OAAQA,EAAMqkF,eAAiBrkF,EAAMskF,cAAgC,OAAhBtkF,EAAMkrB,YAA+ClJ,IAA7BhiB,EAAMklF,mBCwC3ES,CAAsBF,GACf,cAAC,IAAD,CACH7uD,GAAItZ,GAAOsC,WDnCkB,SAAC5f,GAC1C,OAAQA,EAAMykF,mBAAqBzkF,EAAM0kF,oBAAkD1iE,IAAjChiB,EAAM6kF,uBCuCxDe,CAA8BH,GACvB,cAACrwC,GAAA,EAAD,CAAKG,QAAQ,OAAOM,eAAe,SAASL,WAAW,SAASl2C,UAAU,OAA1E,SACH,cAACF,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,UACNwT,MAAM,SAHV,+CAUD,cAACmiC,GAAA,EAAD,CACHgC,SAAUh/B,EAAgBlF,SAAW,OAAS,MAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OAF3C,SAIH,cAACqB,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,CAAE6hB,KAAM,EAAG2C,OAAQ,GACvBvkB,GAAI,CAAE4hB,KAAM,EAAG2C,OAAQ,GAJ3B,SAMI,eAACgc,GAAA,EAAD,WACI,cAACh2C,EAAA,EAAD,CACIJ,QAAQ,KACRiU,MAAM,OAFV,4BAMA,cAACmiC,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAACgF,GAAA,EAAD,CACI2gC,UAAQ,EACRt9C,WAAS,EACTK,QAAQ,WACRG,MAAM,WACNyN,KAAK,WACLzM,KAAK,WACL2V,SAAUkkB,IAEd,cAACob,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAACgF,GAAA,EAAD,CACI2gC,UAAQ,EACRt9C,WAAS,EACTK,QAAQ,WACRG,MAAM,mBACNyN,KAAK,oBACLzM,KAAK,WACL2V,SAAUkkB,IAEd,cAACob,GAAA,EAAD,CACI9+B,OAAO,SAGNsuE,GAA0Ba,GAErB,cAACrwC,GAAA,EAAD,CACE3/B,MAAM,OACNggC,QAAQ,aACRrhC,QAAQ,OACRsB,aAAa,OACbjW,MAAM,QALR,SAOE,cAACL,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,mBAIKwyE,EAAwBZ,8BAJ7B,aAIK,EAAgD57D,WAZvD,KAiBL07D,GAAoBc,GAEf,cAACrwC,GAAA,EAAD,CACEG,QAAQ,OACRM,eAAe,SACfngC,aAAa,OAHf,SAKE,cAAC,aAAD,CACIjW,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SAPrE,KAWV,cAACmG,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC8+B,GAAA,EAAD,CACIG,QAAQ,OACRM,eAAe,WAFnB,SAII,cAACr2C,EAAA,EAAD,CACIR,QAAQ,YACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B5E,MAAM,UACNC,KAAK,QACLE,QAAS,kBAAM8lF,KALnB,mC,GA3IA5lF,aA4JbC,gBA5KS,SAACC,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BvI,gBAAiBpY,EAAMoY,gBACvBqtE,wBAAyBzlF,EAAMylF,4BAIZ,SAACvlF,GACxB,MAAO,CACHslF,WAAY,SAAC9sE,GAAD,OAAyBxY,ERZC,SAACwY,GAC3C,gDAAO,WAAOxY,EAAoBwP,GAA3B,gBAAA1F,EAAA,yDACH9J,EAAS,CACLC,KAAMygF,GAAoBmE,gBAGxBp0C,EAA8C,CAChDxwC,KAAMygF,GAAoBoE,sBAC1BT,WAAY,KACZr5D,MAAO,MAGE,OAATxS,EAXD,uBAYCi4B,EAAe/lC,MAAQ,mBAZxB,kBAaQ1K,EAASywC,IAbjB,uBAiBCA,EAAe4zC,WAAa7rE,EAjB7B,SAkB8Bxb,EAASyS,OAAOk2E,wBAAwBntE,GAlBtE,cAkBCi4B,EAAezlB,MAlBhB,yBAmBQhrB,EAASywC,IAnBjB,yCAqBCA,EAAe/lC,MAAQ,KAAMge,WArB9B,kBAsBQ1oB,EAASywC,IAtBjB,0DAAP,wDQWkD60C,CAAW9sE,KACzDshB,cAAe,SAACphB,GAAD,OAAgD1Y,ER6DtB,SAAC0Y,GAC9C,OAAO,SAAC1Y,EAAoBwP,GAMxB,OAAOxP,EAL2B,CAC9BC,KAAMygF,GAAoBc,YAC1B90E,KAAMgM,EAAMyD,OAAOzP,KACnBuK,MAAOyB,EAAMyD,OAAOlF,SQlEgD6iB,CAAcphB,KACtF8sE,qBAAsB,kBAAMxlF,ERehC,yCAAO,WAAOA,EAAoBwP,GAA3B,wBAAA1F,EAAA,2DAKC0F,IAAW+1E,wBAHX18E,EAFD,EAECA,SACAy7E,EAHD,EAGCA,kBACAD,EAJD,EAICA,WAGE5zC,EAAwD,CAC1DxwC,KAAMygF,GAAoBwE,iCAGC,IAA3Br8E,EAASqC,OAAOnC,QAAoD,IAApCu7E,EAAkBp5E,OAAOnC,OAX1D,uBAYC0nC,EAAe/lC,MAAQ,sCAZxB,kBAaQ1K,EAASywC,IAbjB,UAgBC5nC,IAAay7E,EAhBd,uBAiBC7zC,EAAe/lC,MAAQ,0BAjBxB,kBAkBQ1K,EAASywC,IAlBjB,YAqBC5nC,EAASqC,OAAOnC,OAAS,GArB1B,wBAsBC0nC,EAAe/lC,MAAQ,4CAtBxB,kBAuBQ1K,EAASywC,IAvBjB,WpI4BuB,IoIFtB7nC,GAAsBC,GA1BvB,wBA2BC4nC,EAAe/lC,MAAQ,qCA3BxB,kBA4BQ1K,EAASywC,IA5BjB,eA+BHzwC,EAAS,CACLC,KAAMygF,GAAoBuE,0BAhC3B,oBAoCOjoF,EAASyS,OAAO+1E,qBAAqBnB,EAAsBx7E,GApClE,iCAqCQ7I,EAASywC,IArCjB,0CAuCCA,EAAe/lC,MAAQ,mBAvCxB,kBAwCQ1K,EAASywC,IAxCjB,2DAAP,6DQiJW5wC,CAA6CulF,IC1LtDQ,G,4JACF,WACI,IAAMvjE,EAAerkB,KAAKC,MAAM+K,MAAM6Y,OAAOQ,aACvCwjE,EAAgBx4B,GAAUpkD,WAAU,SAAAqjD,GAAQ,OAAIA,EAAS5/C,OAAS2V,KACxE,OAAuB,IAAnBwjE,EACiBx4B,GAAUw4B,GACXlgD,KAGb,cAAC,IAAD,CAAUjP,GAAItZ,GAAOsC,e,GATP9f,aAadC,gBAzBS,SAACC,GACrB,MAAO,CACHoY,gBAAiBpY,EAAMoY,gBACvBuI,oBAAqB3gB,EAAM2gB,oBAC3BC,oBAAqB5gB,EAAM4gB,wBAIR,SAAC1gB,GACxB,MAAO,KAgBIH,CAA6C+lF,IC7BtDj9E,GAA8B,CAAC,WAAY,WAAY,eAAgB,WAAY,WAAY,WAAY,WAAY,WAAY,YAAa,WAClJ,WAAY,YAAa,aAAc,WAAY,WAAY,WAAY,WAAY,WACvF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAOvFC,GAAwB,SAACC,GAClC,IAAIC,EAAW,EAmCf,OA/BIA,EADAD,EAASE,OAFK,EAhBY,EAEL,EAuBrBF,EAASE,OATK,IASkBF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAUH,EAASG,MAAM,mCAKnGH,EAASE,OAdK,IAeZF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAYH,EAASG,MAAM,QAChEH,EAASG,MAAM,mCAAuCH,EAASG,MAAM,UAAYH,EAASG,MAAM,mCAKvGH,EAASE,OArBK,GAqBiBF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAUH,EAASG,MAAM,kCAKlGH,EAASE,OAAS,IAAMF,EAASG,MAAM,UAAYH,EAASG,MAAM,QAAUH,EAASG,MAAM,mCAIW,IAAtGL,GAAkBM,WAAU,SAAAC,GAAW,OAAIA,EAAYC,gBAAkBN,EAASM,mBAClFL,EA/C0B,GAkDvBA,I,SJzCCo7E,K,qDAAAA,E,qEAAAA,E,mDAAAA,E,+CAAAA,E,gEAAAA,Q,KA0BL,IKlBK4B,GCcNxmD,GAA4B,CAC9BymD,mBAAmB,EACnBC,oBAAoB,EAEpBj2B,UAAW,EACXnlC,MAAO,KACPsY,UAAW,GACXC,SAAU,GACVnY,MAAO,GACPi7D,eAAgB,GAChBp9E,SAAU,GACVy7E,kBAAmB,GACnB4B,4BAA4B,EAE5BC,iBAAiB,GAWRC,GAA6B,SAACtmF,GACvC,OAAOA,EAAMimF,oBAAsBjmF,EAAMkmF,yBAA4ClkE,IAAtBhiB,EAAMisB,kBAA+DjK,IAAlChiB,EAAMumF,yBAG/FC,GAAsB,SAACxmF,GAChC,OAAOsmF,GAA2BtmF,IAAUA,EAAMumF,yBAA2BvmF,EAAMumF,wBAAwBt9D,OAAOpd,SAAS,QAGlH46E,GAAoB,SAACzmF,GAC9B,OAAOA,EAAMqmF,iBAGJK,GAA0B,SAAC1mF,GACpC,OAAQA,EAAMqmF,sBAAkDrkE,IAA/BhiB,EAAM2mF,sBA+D5BC,GA5DO,WAAiD,IAAhD5mF,EAA+C,uDAAvCw/B,GAAchW,EAAyB,uCAClE,OAAQA,EAAOrpB,MACX,KAAKo/B,GAAqBc,QAE1B,KAAKd,GAAqBW,uBACtB,OAAOV,GACX,KAAK4kD,GAAayC,mBACd,OAAO,2BACA7mF,GADP,IAEIisB,iBAAajK,EACbikE,mBAAmB,EACnBC,oBAAoB,EACpBK,6BAAyBvkE,IAEjC,KAAKoiE,GAAa0C,2BACd,IAAMC,EAAqEv9D,EAC3E,OAAO,2BACAxpB,GADP,IAEIisB,YAAa86D,EAAiC96D,YAC9Cg6D,mBAAmB,EACnBC,oBAAoB,EACpBK,6BAAoEvkE,IAA3C+kE,EAAiCn8E,MACpD,CAACqe,OAAQ89D,EAAiCn8E,OAAS5K,EAAMumF,wBAC/Dt2B,SAAU82B,EAAiC96D,YACrC86D,EAAiC96D,YAAY9rB,KAAOH,EAAMiwD,SAChEnlC,MAAOi8D,EAAiC96D,YAClC86D,EAAiC96D,YAAYnB,MAAQ9qB,EAAM8qB,MACjEsY,UAAW2jD,EAAiC96D,YACtC86D,EAAiC96D,YAAYmX,UAAYpjC,EAAMojC,UACrEC,SAAU0jD,EAAiC96D,YACrC86D,EAAiC96D,YAAYoX,SAAWrjC,EAAMqjC,SACpEnY,MAAO67D,EAAiC96D,YAClC86D,EAAiC96D,YAAYf,MAAQlrB,EAAMkrB,QAEzE,KAAKk5D,GAAa4C,kBACd,IAAMC,EAAmDz9D,EACzD,OAAO,2BACAxpB,GADP,IAEI,CAACinF,EAAwBr6E,MAAOq6E,EAAwB9vE,QAEhE,KAAKitE,GAAa8C,gBACd,OAAO,2BACAlnF,GADP,IAEIqmF,iBAAiB,EACjBc,4BAA4B,EAC5BR,0BAAsB3kE,IAE9B,KAAKoiE,GAAagD,wBACd,IAAMC,EAA+D79D,EACrE,OAAO,2BACAxpB,GADP,IAEIqmF,iBAAiB,EACjBM,qBAAsBU,EAA8Bz8E,MAC9C,CAACqe,OAAQo+D,EAA8Bz8E,OAAS5K,EAAM2mF,uBAEpE,QACI,OAAO3mF,ICKNsnF,GAAgB,SAAC55E,GAC1B,YAA+BsU,IAAxBtU,EAAKmiB,gBChEV03D,G,4MAGMC,mB,yDAER,WACI,IACIC,EACAvpF,KAAKC,MADLspF,gBAGJvpF,KAAKspF,cAAgBtpF,KAAKC,MAAM+K,MAAM6Y,OAAOlU,GACzC3P,KAAKspF,eACLC,EAAgBvpF,KAAKspF,iB,oBAI7B,WAAU,IAAD,IFtCwBxnF,EEsCxB,OACL,EAOI9B,KAAKC,MANLwiB,EADJ,EACIA,oBACAC,EAFJ,EAEIA,oBACAxI,EAHJ,EAGIA,gBACAsvE,EAJJ,EAIIA,iBACAC,EALJ,EAKIA,wBACAC,EANJ,EAMIA,cAIJ,GAAI1pF,KAAKspF,cAAe,CAEpB,KFnDyBxnF,EEmDA0nF,GFlDnBzB,mBAAqBjmF,EAAMkmF,mBEmD7B,OACI,cAAC9wC,GAAA,EAAD,UACI,cAAC,YAAD,CACI31C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/Dx5B,MAAM,OACNa,OAAQ,MAUrB,IAAD,EAFF,GAAIgwE,GAA2BoB,IACvBA,EAAiBz7D,aAAeq7D,GAAcI,EAAiBz7D,aAEnE,OAAO,eAACmpB,GAAA,EAAD,CACH91C,UAAU,OACVi2C,QAAQ,OACRgB,cAAc,SACdf,WAAW,SAJR,UAMH,cAACp2C,EAAA,EAAD,CACIJ,QAAQ,KACRS,MAAM,QAFV,SAMQ+mF,GAAoBkB,GACd,sCAEAA,EAAiBz7D,aAAeq7D,GAAcI,EAAiBz7D,aAC/D,+CADA,oBAGGy7D,EAAiBnB,+BAHpB,aAGG,EAA0Ct9D,UAG3D,cAACmsB,GAAA,EAAD,CACI9+B,OAAO,SAEX,cAAC9W,EAAA,EAAD,CACI0F,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,YACRS,MAAM,UACNG,QAAS,WAEuC,IAAD,EAA3C,GAAI4mF,GAAoBkB,GAKpB,OAJA,EAAKvpF,MAAM66B,QAAQ7sB,QACfmR,GAAOiE,qBAAP,UAA4BZ,EAAoBktB,wBAAhD,QAAoE,UAExEv2B,OAAOy2C,SAASsf,SAKhBqa,EAAiBz7D,aAAeq7D,GAAcI,EAAiBz7D,aAC/D,EAAK9tB,MAAM66B,QAAQhuB,KAAKsS,GAAOgE,qBAAqB,EAAKnjB,MAAM+K,MAAM6Y,SAKzEzK,OAAOy2C,SAASsf,UArBxB,SA0BQmZ,GAAoBkB,GACd,4BAEAA,EAAiBz7D,aAAeq7D,GAAcI,EAAiBz7D,aAC/D,UAEA,aAO1B,OAAO,eAACmpB,GAAA,EAAD,WAEH,cAAC7gC,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,CAAC+hB,KAAM,GAAI2C,OAAQ,GACvBzkB,GAAI,CAAC8hB,KAAM,GAAI2C,OAAQ,GACvBxkB,GAAI,CAAC6hB,KAAM,EAAG2C,OAAQ,GACtBvkB,GAAI,CAAC4hB,KAAM,EAAG2C,OAAQ,GAJ1B,SAMI,cAACgc,GAAA,EAAD,CACIG,QAAQ,OACR9/B,MAAM,OACNogC,eAAe,SACfuB,SAAUh/B,EAAgBlF,SAAW,OAAS,MAC9C6iC,SAAU39B,EAAgBlF,SAAW,OAAS,OALlD,SAOI,eAACmmB,GAAA,EAAD,CACIC,UAAW,EACXC,QAAM,EACNr0B,UAAWyQ,YAAIxS,GAAae,yBAC5B7E,MAAO,CACHoW,MAAO,IACPrB,QAASgE,EAAgBlF,SAAW,GAAK,IANjD,UASI,cAAC9T,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,KACRS,MAAM,UAHV,wCAKmBkhB,EAAoB1D,aALvC,aAKmB,EAA2BkQ,eAG9C,cAACioB,GAAA,EAAD,CACI9+B,OAAO,SAKPmwE,GAAkBiB,IAAqB/nD,GAAiB/e,GAClD,cAACw0B,GAAA,EAAD,CACEG,QAAQ,OACRkC,QAAQ,OACR5B,eAAe,SAHjB,SAKE,cAAC,KAAD,CACIp2C,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,SAGrE,KAKLy3C,GAAwBgB,GAYnB,KAXA,cAACtyC,GAAA,EAAD,CACEqC,QAAQ,OADV,SAGE,cAACr4C,EAAA,EAAD,CACI6T,MAAM,SACNjU,QAAQ,QACRS,MAAM,QAHV,mBAKKioF,EAAiBf,4BALtB,aAKK,EAAuC19D,WAOxD,eAACyQ,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EACTgB,cAAiCqiB,IAAvB9jB,KAAKspF,cAHnB,UAKI,cAACnrB,GAAA,EAAD,UACI,cAACj9D,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,0CAOJ,eAACu2C,GAAA,EAAD,CACIppC,KAAK,WACLuK,MAAOuwE,EAAiBz3B,SAExBn6C,SAAU6xE,EACV9nF,OAAO,QACPR,MAAO,CACHC,UAAW,IAPnB,UAUI,cAAC62C,GAAA,EAAD,CAEIh/B,OAAQ,EAFZ,0BACQ,MAKR,cAACg/B,GAAA,EAAD,CAEIh/B,MnJ7GX,EmJ2GO,mBnJ3GP,GmJiHO,cAACg/B,GAAA,EAAD,CAEIh/B,MnJlHb,EmJgHS,wBnJhHT,SmJyHC,cAACi+B,GAAA,EAAD,CACI9+B,OAAO,SAIX,eAACojB,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,UAII,cAAC09D,GAAA,EAAD,UACI,cAACj9D,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,UAFV,qBAOJ,eAACu2C,GAAA,EAAD,CACIppC,KAAK,QACLuK,MAAOuwE,EAAiB58D,MAExBhV,SAAU6xE,EACV9nF,OAAO,QACPR,MAAO,CACHC,UAAW,IAPnB,UAUI,cAAC62C,GAAA,EAAD,CAEIh/B,MAAM,KAFV,0BACQ,MAMJgG,GAAWpF,KAAI,SAAC+S,EAAO3f,GAAR,OACX,cAACgrC,GAAA,EAAD,CAEIh/B,MAAO2T,EAFX,SAIKA,GAHI3f,YAUzB,cAACiqC,GAAA,EAAD,CACI9+B,OAAO,SAIX,eAAC8+B,GAAA,EAAD,CACI1/B,aAAa,OADjB,UAII,cAACgkB,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,SAII,cAAC2c,GAAA,EAAD,CACI2gC,UAAQ,EACR98C,MAAM,aACNyN,KAAK,YACLuK,MAAOuwE,EAAiBtkD,UACxBzkC,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SAAU6xE,MAKlB,cAACjuD,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,SAII,cAAC2c,GAAA,EAAD,CACI2gC,UAAQ,EACR98C,MAAM,YACNyN,KAAK,WACLuK,MAAOuwE,EAAiBrkD,SACxB1kC,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SAAU6xE,SAMtB,eAACvyC,GAAA,EAAD,CACI1/B,aAAa,OADjB,UAII,cAACgkB,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,SAII,cAAC2c,GAAA,EAAD,CACI2gC,UAAQ,EACR98C,MAAM,QACNyN,KAAK,QACLuK,MAAOuwE,EAAiBx8D,MACxBvsB,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPF,cAAiCqiB,IAAvB9jB,KAAKspF,cACf1xE,SAAU6xE,MAKlB,cAACjuD,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,SAII,cAAC2c,GAAA,EAAD,CACI2gC,UAAQ,EACR98C,MAAM,iBACNyN,KAAK,iBACLuK,MAAOuwE,EAAiBvB,eACxBxnF,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPiW,SAAU6xE,SAMtB,eAACvyC,GAAA,EAAD,WAEI,cAAC1b,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,SAII,cAAC2c,GAAA,EAAD,CACI2gC,UAAQ,EACR98C,MAAM,WACNyN,KAAK,WACLuK,MAAOuwE,EAAiB3+E,SACxBpK,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPM,KAAK,WACL2V,SAAU6xE,MAKlB,cAACjuD,GAAA,EAAD,CACIuiB,UAAQ,EACRt9C,WAAS,EAFb,SAII,cAAC2c,GAAA,EAAD,CACI2gC,UAAQ,EACR98C,MAAM,mBACNyN,KAAK,oBACLuK,MAAOuwE,EAAiBlD,kBACxB7lF,WAAS,EACTK,QAAQ,WACRa,OAAO,QACPM,KAAK,WACL2V,SAAU6xE,SAMtB,cAACvyC,GAAA,EAAD,CACI91C,UAAU,OADd,SAGI,cAACo6B,GAAA,EAAD,UACI,eAAC0b,GAAA,EAAD,CACIG,QAAQ,OACRgB,cAAc,MACdf,WAAW,SAHf,UAKI,cAACsE,GAAA,EAAD,CACIltC,KAAK,6BACLnN,MAAM,UACNi5C,QAASgvC,EAAiBtB,2BAC1BtwE,SAAU6xE,IAEd,eAACvoF,EAAA,EAAD,CACIJ,QAAQ,QADZ,uBAII,cAAC,GAAD,CACIgO,IAAKsQ,GAAOoC,6BACZrD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,IACVsuC,eACI,0BAZZ,cAsBZ,cAAC0B,GAAA,EAAD,CACI91C,UAAU,OADd,SAGI,eAACF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,gDAKI,cAAC,GAAD,CACIjG,IAAKsQ,GAAOgC,mBACZjD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,IACVsuC,eACI,iBAbZ,cAiBI,cAAC,GAAD,CACI1mC,IAAKsQ,GAAOiC,sBACZlD,OAAO,SACP5c,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,IACVsuC,eACI,mBAzBZ,SAiCJ,cAAC0B,GAAA,EAAD,CACI91C,UAAU,OACVi2C,QAAQ,OACRM,eAAe,SAHnB,SAKI,cAACr2C,EAAA,EAAD,CACI0F,UAAWyQ,YAAIxS,GAAakB,mBAC5B5E,MAAM,UACNT,QAAQ,YACRW,UACmC,IAA/B+nF,EAAiBz3B,UACa,OAA3By3B,EAAiB58D,OAC4B,IAA7C48D,EAAiBtkD,UAAUh4B,OAAOnC,QACU,IAA5Cy+E,EAAiBrkD,SAASj4B,OAAOnC,QACQ,IAAzCy+E,EAAiBx8D,MAAM9f,OAAOnC,QACoB,IAAlDy+E,EAAiBvB,eAAe/6E,OAAOnC,QACK,IAA5Cy+E,EAAiB3+E,SAASqC,OAAOnC,QACoB,IAArDy+E,EAAiBlD,kBAAkBp5E,OAAOnC,OAEjDrJ,QAAS,kBAAMgoF,KAdnB,8BAqBJ,cAACxyC,GAAA,EAAD,CACI91C,UAAU,OADd,SAGI,eAACF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SAFV,qDAKI,cAAC,GAAD,CACIjG,IAAKsQ,GAAOgE,qBAAqBpjB,KAAKC,MAAM+K,MAAM6Y,QAClDtiB,MAAO6uC,GAAmB3tB,GAAqBouB,QAAQC,QAAQC,KAC/D0E,YAAY,OACZC,iBAAe,EACfxuC,UAAU,WACVsuC,eACI,0BAWhC,cAACn/B,EAAA,EAAD,CACIC,WAAS,EADb,SAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,cAAC,GAAD,e,GAhhBI/U,aAuhBTC,gBAxiBS,SAACC,GACrB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAC3BvI,gBAAiBpY,EAAMoY,gBACvBwI,oBAAqB5gB,EAAM4gB,oBAC3B8mE,iBAAkB1nF,EAAM0nF,qBAIL,SAACxnF,GACxB,MAAO,CACHunF,gBAAiB,SAACjmE,GAAD,OAA2BthB,ER7BD,SAACshB,GAChD,gDAAO,WAAOthB,EAAoBwP,GAA3B,oBAAA1F,EAAA,6DAEG2mC,EAAmD,CACrDxwC,KAAMikF,GAAa0C,4BAHpB,SAOC5mF,EAAS,CACLC,KAAMikF,GAAayC,qBARxB,UAWwB,IAAIlmD,IAAiBzb,oBAAoB1D,GAXjE,cAWOzI,EAXP,OAYOkT,EAA2BlT,EAAStO,KAC1CkmC,EAAe1kB,YAAcrP,KAAKC,MAAMD,KAAKE,UAAUmP,IAbxD,kBAcQ/rB,EAASywC,IAdjB,yCAgBCA,EAAe/lC,MAAQ,KAAMge,WAhB9B,kBAiBQ1oB,EAASywC,IAjBjB,0DAAP,wDQ4ByD82C,CAAgBjmE,KACrEmmE,wBAAyB,SAAC/uE,GAAD,OAAgD1Y,ERPtB,SAAC0Y,GACxD,OAAO,SAAC1Y,EAAoBwP,GACxB,IAAMm4E,EAAyBjvE,EAAMyD,OAAOlc,KACtC2nF,EAAyBlvE,EAAMyD,OAAOzP,KACtCm7E,EAA0BnvE,EAAMyD,OAAOlF,MACvC6wE,EAA6BpvE,EAAMyD,OAAOq8B,QAQhD,OAAOx4C,EANiC,CACpCC,KAAMikF,GAAa4C,kBACnBp6E,KAAMk7E,EACN3wE,MAA0B,aAAnB0wE,EAAgCG,EAAoBD,KQHmBJ,CAAwB/uE,KAC1GgvE,cAAe,kBAAM1nF,ERUzB,yCAAO,WAAOA,EAAoBwP,GAA3B,0CAAA1F,EAAA,2DAYC0F,IAAWg4E,iBAVXz7D,EAFD,EAECA,YACAgkC,EAHD,EAGCA,SACAnlC,EAJD,EAICA,MACAsY,EALD,EAKCA,UACAC,EAND,EAMCA,SACAnY,EAPD,EAOCA,MACAi7D,EARD,EAQCA,eACAp9E,EATD,EASCA,SACAy7E,EAVD,EAUCA,kBACA4B,EAXD,EAWCA,2BAIAnpE,EACAvN,IAAWiR,oBADX1D,MAGE0zB,EAAgD,CAClDxwC,KAAMikF,GAAagD,yBAIlBv4B,GAAoB3jC,IAAW2jC,GAAoBs3B,GAvBrD,uBAwBCx1C,EAAe/lC,MAAQ,sCAxBxB,kBAyBQ1K,EAASywC,IAzBjB,UA6BCzlB,EAAM9f,OAAO68E,sBAAwB9B,EAAe/6E,OAAO68E,oBA7B5D,uBA8BCt3C,EAAe/lC,MAAQ,uBA9BxB,kBA+BQ1K,EAASywC,IA/BjB,UAmCC5nC,IAAay7E,EAnCd,wBAoCC7zC,EAAe/lC,MAAQ,0BApCxB,kBAqCQ1K,EAASywC,IArCjB,WI5EuB,IJqHtB7nC,GAAsBC,GAzCvB,wBA0CC4nC,EAAe/lC,MAAQ,2DA1CxB,kBA2CQ1K,EAASywC,IA3CjB,yBA+CCzwC,EAAS,CACLC,KAAMikF,GAAa8C,kBAhDxB,WAmDO,IAAIvmD,IAAiBunD,OAAO,CAC9BC,0BAAsCnmE,IAAhBiK,EACtBzK,mBAA+BQ,IAAhBiK,EAA4BA,EAAYpe,QAAKmU,EAC5D0I,YAAa,CACTI,QACAsY,YACAC,WACAnY,QACA/qB,KAAM8vD,GAEVlnD,WACA2iB,QAASO,EAAcA,EAAYC,UAAf,iBAA2BjP,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAOgO,YAAlC,QAA0C,GAC9Dm7D,2BAA4BA,IA/DjC,eAkEClmF,EAASywC,GAlEV,kBAmEQzwC,EAAS2gC,GAAO3V,EAAOniB,KAnE/B,0CAqEC4nC,EAAe/lC,MAAQ,KAAMge,WArE9B,kBAsEQ1oB,EAASywC,IAtEjB,2DAAP,6DQihBW5wC,CAA6CwnF,IChY7Ca,GAtLG,kBACd,cAAC,IAAD,UACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOvvD,KAAMvb,GAAOQ,YAAauqE,OAAK,EAE/BC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAE1DtwC,UAAW,cAAC,GAAD,eAAejH,UAE9D,cAAC,IAAD,CAAO06B,KAAMvb,GAAOO,eAAgBwqE,OAAK,EAEzBC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAEvDtwC,UAAW,cAAC,GAAD,eAAejH,UAE1E,cAAC,IAAD,CAAO06B,KAAMvb,GAAOE,cAAe6qE,OAAK,EAEjCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAO1+E,UAAW,cAAC,GAAD,eAAWjH,UACxF,cAAC,IAAD,CAAO06B,KAAMvb,GAAOG,WAAY4qE,OAAK,EAE9BC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAO1+E,UAAW,cAAC,GAAD,eAAWjH,UAExF,cAAC,IAAD,CAAO06B,KAAMvb,GAAOI,eAAgB2qE,OAAK,EAElCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAE1DtwC,UAAW,cAAC,GAAD,eAAYjH,UAC3D,cAAC,IAAD,CAAO06B,KAAMvb,GAAOK,YAAa0qE,OAAK,EAE/BC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAE1DtwC,UAAW,cAAC,GAAD,eAAYjH,UAC3D,cAAC,IAAD,CAAO06B,KAAMvb,GAAOM,iBAAkByqE,OAAK,EAEpCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAE1DtwC,UAAW,cAAC,GAAD,eAAYjH,UAE3D,cAAC,IAAD,CAAO06B,KAAMvb,GAAOS,uBAAwBsqE,OAAK,EAE1CC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UACnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOU,oBAAqBqqE,OAAK,EAEvCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UAEnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOW,qBAAsBoqE,OAAK,EAExCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAqBjH,UAEpE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOY,uBAAwBmqE,OAAK,EAE1CC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAuBjH,UAEtE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOmB,kBAAmB4pE,OAAK,EAErCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UACnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOoB,eAAgB2pE,OAAK,EAElCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UAEnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOiB,oBAAqB8pE,OAAK,EAEvCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAqBjH,UACpE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOkB,iBAAkB6pE,OAAK,EAEpCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAqBjH,UAEpE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOuB,kBAAmBwpE,OAAK,EAErCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAE1DtwC,UAAW,cAAC,GAAD,eAAkBjH,UACjE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOwB,eAAgBupE,OAAK,EAElCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAAMhvE,gBAAiBC,KAAO2gC,KAAK,KAE1DtwC,UAAW,cAAC,GAAD,eAAkBjH,UAEjE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOa,wBAAyBkqE,OAAK,EAE3CC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAiBjH,UAChE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOc,qBAAsBiqE,OAAK,EAExCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAiBjH,UAEhE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOyB,2BAA4BspE,OAAK,EAE9CC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UACnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAO0B,wBAAyBqpE,OAAK,EAE3CC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UAEnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOe,wBAAyBgqE,OAAK,EAE3CC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAyBjH,UACxE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOgB,qBAAsB+pE,OAAK,EAExCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAyBjH,UAExE,cAAC,IAAD,CAAO06B,KAAMvb,GAAO+B,UAAWgpE,OAAK,EAE7BC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAcjH,UAE7D,cAAC,IAAD,CAAO06B,KAAMvb,GAAO2B,kBAAmBopE,OAAK,EAErCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAejH,UAC9D,cAAC,IAAD,CAAO06B,KAAMvb,GAAO4B,eAAgBmpE,OAAK,EAElCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAejH,UAE9D,cAAC,IAAD,CAAO06B,KAAMvb,GAAO6B,mBAAoBkpE,OAAK,EAE7BC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACpB1+E,UAAW,cAAC,GAAD,eAAgBjH,UAC3E,cAAC,IAAD,CAAO06B,KAAMvb,GAAO8B,gBAAiBipE,OAAK,EAEnCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAgBjH,UAE/D,cAAC,IAAD,CAAO06B,KAAMvb,GAAOiC,sBAAuB8oE,OAAK,EAEzCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAuBjH,UAEtE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOgC,mBAAoB+oE,OAAK,EAEtCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAoBjH,UAEnE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOkC,oBAAqB6oE,OAAK,EAEvCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAqBjH,UAEpE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOmC,sCAAuC4oE,OAAK,EAEzDC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAuCjH,UAEtF,cAAC,IAAD,CAAO06B,KAAMvb,GAAOoC,6BAA8B2oE,OAAK,EAEhDC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAA8BjH,UAE7E,cAAC,IAAD,CAAO06B,KAAMvb,GAAOqC,mBAAoB0oE,OAAK,EAEtCC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EAEvB1+E,UAAW,cAAC,GAAD,eAAmBjH,UAElE,cAAC,IAAD,CAAO06B,KAAMvb,GAAOsC,SAAUyoE,OAAK,EAE5BC,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAkBjH,UAGjE,cAAC,IAAD,CAEImqF,OAAQ,SAAAnqF,GAAK,OAAI,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB2lF,YAAY,EACvB1+E,UAAW,cAAC,GAAD,eAAkBjH,gBCtLpEoqF,I,mKAEF,WACI,MAUIrqF,KAAKC,MATL8e,EADJ,EACIA,MAEAve,EAHJ,EAGIA,KACA2Q,EAJJ,EAIIA,QACA5P,EALJ,EAKIA,MACA6P,EANJ,EAMIA,SAEAJ,EARJ,EAQIA,sBACAs5E,EATJ,EASIA,8BAGJ,OACI,cAACp9B,GAAA,EAAD,CACI1sD,KAAMA,EACN2sD,aAAc,CACVC,SAAuB,KAAbh8C,EAAkB,SAAWA,EACvCi8C,WAAY,UAEhBC,iBAAkB,KAClBh4C,QAAStE,EACTuvD,SAAU+pB,EACV/8B,oBACiB,WAAbn8C,EAEIjK,GAEa,QAAbiK,EAEI9J,GAEA,KAEZkmD,mBAAoB,CAChBC,MAAO,IACPC,KAAM,KAtBd,SAyBI,cAAC8S,GAAA,EAAD,CACIr/D,MAAO,CACHyV,gBACc,YAAVrV,EAEKwd,EAIGA,EAAMmW,SAASvwB,aAFfkS,GAIM,UAAVtV,EAEIsV,GAEA,IAEhB1F,QACI,iCAEkB,UAAV5P,EAEI,KAEA,cAAC,KAAD,CACIJ,MAAO,CACHgX,YAAa,KAI5BhH,KAGTma,OAAQ,CACJ,cAACjU,EAAA,EAAD,CAEI9V,MAAM,UACNG,QAASsP,EAHb,SAKI,cAAC,KAAD,KAJI,kB,GA5EDpP,cAyFhBC,gBA3GS,SAAAC,GACpB,MAAO,CACHid,MAAOjd,EAAMy1B,sBAAsBroB,gBAEnC1O,KAAMsB,EAAMwY,uBAAuB9Z,KACnC2Q,QAASrP,EAAMwY,uBAAuBnJ,QACtC5P,MAAOO,EAAMwY,uBAAuB/Y,MACpC6P,SAAUtP,EAAMwY,uBAAuBlJ,aAIpB,SAAApP,GACvB,MAAO,CACHgP,sBAAuB,kBAAMhP,EAASyY,OACtC6vE,8BAA+B,kBAAMtoF,EnJVlC,CACHC,KAAMoP,SmJsGCxP,CAA6CwoF,ICtH/CE,GAA0B,0BAC1BC,GAAyB,yBA4BzBC,GAA0B,0BN9BjCC,GACK,kJADLA,GAEK,oJAFLA,GAGK,2EAHLA,GAIM,mDAJNA,GAKQ,uBAGDC,GAAevxE,OAAOwxE,WAAWF,IACjCG,GAAezxE,OAAOwxE,WAAWF,IACjCI,GAAe1xE,OAAOwxE,WAAWF,IACjCK,GAAgB3xE,OAAOwxE,WAAWF,IAClCrxC,GAAkBjgC,OAAOwxE,WAAWF,K,SAErC5C,K,wDAAAA,Q,KASL,IOrBKkD,GPuDNC,GAAW,SAACjpF,EAA2B0M,EAAqBuK,GAC9D,GAAIjX,EACA,OAAOA,EAAS,CACZC,KAAM6lF,GAAiBoD,kBACvBx8E,OACAuK,WQ7DCkyE,GAAwB,wBACxBC,GAAiC,iCA4B1CC,GAAiB,KAERC,GAAwB,wB,oBD9BzBN,K,+CAAAA,E,4CAAAA,Q,KAUL,IEJD1pD,GAA0C,CAC5CiqD,SAAS,EACTC,WAAW,GAgCAC,GArBqB,WAAsF,IAArF3pF,EAAoF,uDAA5Ew/B,GAAchW,EAA8D,uCACrH,OAAQA,EAAOrpB,MACX,KAAKo/B,GAAqBc,QACtB,OAAOb,GACX,KAAK0pD,GAA2BU,SAC5B,OAAO,2BACA5pF,GADP,IAEI0pF,WAAW,EACXD,SAAS,IAEjB,KAAKP,GAA2BW,OAC5B,OAAO,2BACA7pF,GADP,IAEI0pF,WAAW,EACXD,SAAS,IAEjB,QACI,OAAOzpF,IC8Eb8pF,G,kDAEF,WAAY3rF,GAAQ,IAAD,8BACf,cAAMA,IAkEV4rF,mBAAqB,WACjB,MAoBI,EAAK5rF,MAnBL6rF,EADJ,EACIA,mCAEAC,EAHJ,EAGIA,+BAEAC,EALJ,EAKIA,sDAEAC,EAPJ,EAOIA,mDAEA/J,EATJ,EASIA,kDAEAgK,EAXJ,EAWIA,oDAEAnrD,EAbJ,EAaIA,8BACAG,EAdJ,EAcIA,+BACAE,EAfJ,EAeIA,qCAEA+gD,EAjBJ,EAiBIA,gDAEAgK,EAnBJ,EAmBIA,oCAGJL,IAEAC,IAGAC,IAGAC,IAGA/J,IAGAgK,IAGAnrD,IAEAG,IAEAE,IAIA+gD,IAGAgK,KAtHe,EA4HnBC,8BAAgC,WAC5B,MAKI,EAAKnsF,MAJLywD,EADJ,EACIA,qBACA27B,EAFJ,EAEIA,0BAEA76D,EAJJ,EAIIA,mBAGCk/B,GAAyB27B,GAE1B76D,KAtIW,EA8InB86D,iBAAmB,WACf,MAKI,EAAKrsF,MAJL49D,EADJ,EACIA,aACA0uB,EAFJ,EAEIA,cAEAD,EAJJ,EAIIA,iBAGCzuB,GAAiB0uB,GAElBD,KAxJW,EA+JnBE,gBAAkB,WACd,MAeI,EAAKvsF,MAdLq4B,EADJ,EACIA,WAEA9oB,EAHJ,EAGIA,KACAysB,EAJJ,EAIIA,WACAy0B,EALJ,EAKIA,qBACAmN,EANJ,EAMIA,aAEA4uB,EARJ,EAQIA,oBACAC,EATJ,EASIA,8BACAC,EAVJ,EAUIA,uCACAC,EAXJ,EAWIA,oCACAC,EAZJ,EAYIA,qCACAC,EAbJ,EAaIA,gCACAC,EAdJ,EAcIA,qCAGJF,IAEIr9E,GAAQysB,GAAc3D,IAAeG,KAErCm0D,IAEAE,IAEIjvB,GAEAkvB,KAIJr8B,GAEAi8B,IAGC,EAAKzH,eAEN,EAAKA,aAAe,EAAKzqD,aACpB+qD,oBAAmB,SAAAvtD,GAEhBw0D,IAEIx0D,GACAy0D,EAA8Bz0D,EAAa9I,KAG3C,EAAKm9D,qBAILI,EAA8B,MAG9B,EAAKb,2BAtNN,EA4NnBmB,SAAW,WACP,MAMI,EAAK/sF,MALLwiB,EADJ,EACIA,oBAEAsV,EAHJ,EAGIA,sBACA7oB,EAJJ,EAIIA,gBACAgpB,EALJ,EAKIA,oBAGJ,OAAIzV,EAAoB1D,MACbqxB,GAAmB3tB,GAGzBsV,GAA0BG,GAAwBhpB,EAIhDyhC,YACHC,YAAe,CACXC,QAAS,CACLC,QAAS,CACLC,KAAM7hC,EAAgBgmB,SAASvwB,cAGnCqsC,UAAW,CACPD,KAAM7hC,EAAgBgmB,SAAStwB,gBAGnCqsC,KAAM,CACFD,UAAWn6B,KAGnBs6B,WAAY,CACRC,WAAY,uBAnBbrB,IAvOX,EAAKtV,aAAez7B,EAASyS,OAC7B,EAAKyzE,aAAe,KAJL,E,qDAOnB,WACI,MAKIllF,KAAKC,MAJL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,qBAMJ+0D,EARA,EAIIA,0BAMAl1D,GAAyBG,IACzBl4B,KAAKosF,gCACLpsF,KAAKwsF,qB,gCAIb,SAAmB5xD,EAAWC,EAAWhnB,GACrC,MAGI7T,KAAKC,MAFL83B,EADJ,EACIA,sBACAG,EAFJ,EAEIA,oBAGAH,GAAyBG,IACzBl4B,KAAKosF,gCACLpsF,KAAKwsF,qB,kCAIb,WACI,MAIIxsF,KAAKC,MAHLitF,EADJ,EACIA,0BACAC,EAFJ,EAEIA,oCACAC,EAHJ,EAGIA,sCAQJptF,KAAKklF,eACLllF,KAAKklF,aAAe,KAEpBgI,IAEAC,IAEAC,IAMAptF,KAAK6rF,uB,oBAsMT,WACI,OACI,gCACI,cAAC,KAAD,CACIjiE,QD5XS,KC6XTyjE,OAAQrtF,KAAKC,MAAMotF,SAGvB,cAAC,IAAD,CACIvnD,MAAO9lC,KAAKgtF,WADhB,SAGI,eAAC,IAAD,CACI/wE,MAAOqxE,IADX,UAGI,cAAC,GAAD,IAGA,cAAC,GAAD,gB,GAtRN1rF,aA+RHC,gBArXS,SAAAC,GACpB,MAAO,CACH2gB,oBAAqB3gB,EAAM2gB,oBAM3BsV,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAIjD1oB,KAAM1N,EAAM2P,KAAKjC,KACjBysB,WAAYn6B,EAAM2P,KAAKwqB,WACvB3D,WAAYx2B,EAAM2P,KAAK6mB,WAGvB5I,OAAQ5tB,EAAMg9B,aAAapP,OAG3B5R,eAAgBhc,EAAM+b,qBAAqBC,eAC3C4yC,qBAAsB5uD,EAAM+b,qBAAqB6yC,qBAIjDkN,aAAc97D,EAAM28D,mBAAmBb,aACvCC,aAAc/7D,EAAM28D,mBAAmBZ,aACvC0uB,cAAezqF,EAAM28D,mBAAmB8tB,kBAMrB,SAAAvqF,GACvB,MAAO,CACH2gC,OAAQ,kBAAM3gC,EAAS2gC,OACvB0qD,OAAQ,SAAC3yE,GAAD,OAAW1Y,EH9CvB,yCAAO,WAAOA,EAAoBwP,GAA3B,UAAA1F,EAAA,6DACH9J,EAAS,CACLC,KAAM+oF,GAA2BW,SAIrC3pF,EAASq7B,MANN,SAOUr7B,EAASm7B,MAPnB,mFAAP,0DGmDI0vD,qCAAsC,kBAAM7qF,GxIsFzC,SAACA,EAAUwP,GACd,IAAK2mB,GAAsB,CACvB,IACIjpB,EACAsC,IAAW+lB,sBADXroB,gBAGJ,GAAIA,EAAiB,CACjB,GAAIipB,GACA,OAEJA,GAAuBn5B,EAClBgU,WACAzS,IAAIqO,IACJyE,MAAMnE,EAAgB6d,MACtBnZ,GAAG,iBAAiB,SAAAC,GACjB,IAAM2W,EAAM3W,EAAS2W,IACfvR,EAAQpF,EAASsY,MACvBnqB,EAAS,CACLC,KAAMm2B,GACN5N,MACAvR,kBAKRkf,KACAA,GAAqB6I,IAAI,iBACzB7I,GAAuB,WwIhHnCg1D,oCAAqC,kBAAMnrF,GxIwHxC,SAACA,EAAUwP,GACV2mB,KACAA,GAAqB6I,IAAI,iBACzB7I,GAAuB,UwIxH3Bs0D,oBAAqB,kBAAMzqF,ErInExB,CACHC,KAAMw6B,MqImENiwD,8BAA+B,SAACv9D,GAAD,OAASntB,ErITH,SAAAmtB,GACzC,OAAO,SAACntB,EAAUwP,GAEd,GAAK2d,EAAL,CAQA,MAGI3d,IAAW+lB,sBAFX3U,EADJ,EACIA,cACA1T,EAFJ,EAEIA,gBAGJ,EAKIsC,IAAWC,KAJX87E,EADJ,EACIA,UACA/9E,EAFJ,EAEIA,KACAysB,EAHJ,EAGIA,WAHJ,EAIIuxD,oCASAh+E,GAAQysB,IAKPsxD,GACDvrF,EAAS,CACLC,KAAM26B,KAIdzF,GACsBhI,GACjB/iB,MAAK,SAAAoD,GACFxN,EAAS,CACLC,KAAM+6B,GACNxtB,SrB0DM,IqBtDNA,EAAKvN,KAED2gB,EAEI1T,IAEKM,EAAK4e,cAAiB5e,EAAKsT,YAActT,EAAKud,OAAS7d,EAAgB6d,MAMxE/qB,EAAS,CACLC,KAAM46B,GACNvE,WDlGO,ICqGXwE,GAA2B96B,IAV3BA,EAAS,CACLC,KAAM46B,GACNvE,WAAYG,MAiBpBjpB,EAAK4e,cAAgB5e,EAAKsT,WAC1B9gB,EAAS,CACLC,KAAM46B,GACNvE,WAAYG,MAGhBz2B,EAAS,CACLC,KAAM46B,GACNvE,WDtHW,ICyHfwE,GAA2B96B,KAMnCA,EAAS,CACLC,KAAMg7B,KAGV9F,GACwB3nB,EAAKG,IACxBvD,MAAK,SAAA0hB,GAOF,GANA9rB,EAAS,CACLC,KAAMi7B,GACNpe,OAAQgP,KAIPA,GAAmBA,GAA4C,IAA1BA,EAAe/iB,OAOrD,OANA/I,EAAS,CACLC,KAAM46B,GACNvE,WD/IO,SCkJXwE,GAA2B96B,GAI/B,IAAIyrF,EAAa,KAGb7qE,EAEI1T,GACA4e,EAAelhB,SAAQ,SAAAmS,GACfA,EAAMgO,OAAS7d,EAAgB6d,OAC/B0gE,EAAa1uE,MASzB+O,EAAelhB,SAAQ,SAAAmS,GACfA,EAAMqP,eACNq/D,EAAa1uE,MAMrB7P,GACIu+E,ErBjEM,IqBkEFA,EAAWx/D,kBACXjsB,EAAS,CACLC,KAAM46B,GACNvE,WAAYG,MAGhBz2B,EAAS,CACLC,KAAM46B,GACNvE,WrB3EK,IqB4EDm1D,EAAWx/D,kBDzLL,EpB+Gd,IqB8EYw/D,EAAWx/D,kBD5LzB,EpB+GQ,IqBiFUw/D,EAAWx/D,kBD/LvB,EAHD,ICyMH6O,GAA2B96B,KAanCA,EAAS,CACLC,KAAM46B,GACNvE,WDxNO,IC2NXwE,GAA2B96B,OAGlC0S,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMg7B,GACNne,OAAQ,KACRpS,UAGJowB,GAA2B96B,UAI1C0S,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM+6B,GACNxtB,KAAM,OAGVxN,EAAS,CACLC,KAAM46B,GACNvE,WDjPuB,ICoP3BwE,GAA2B96B,YA7M/BA,EAAS,CACLC,KAAM+6B,GACNxtB,KAAM,QqIGmC0sB,CAA0C/M,KAC3Fy9D,oCAAqC,kBAAM5qF,GrIwPxC,SAACA,EAAUwP,GACd,IAAK8rB,GAAc,CACf,IACI9tB,EACAgC,IAAWC,KADXjC,MAGJ8tB,GAAet+B,EACVgU,WACAzS,IAAIqO,IACJyE,MAAM7D,EAAKG,KAGXiE,GAAG,SAAS,SAAAC,GACT,IAAM0uE,EAAc1uE,EAASsY,MAMzBo2D,GACAvgF,EAAS,CACLC,KAAMu7B,GACN+kD,wBqI7QpBuJ,mCAAoC,kBAAM9pF,GrIsRvC,SAACA,EAAUwP,GACV8rB,KACAA,GAAa0D,IAAI,SACjB1D,GAAe,UqIxRnBwvD,gCAAiC,kBAAM9qF,GrI+RpC,SAACA,EAAUwP,GAEd,IAAMhC,EAAOgC,IAAWC,KAAKjC,KAExB+tB,MACDA,GAAyBv+B,EACpBgU,WACAzS,IAAIqO,IACJid,aAAa,SACbC,QAAQtc,EAAKwd,QAGbpZ,GAAG,eAAe,SAAAC,GACf,IAAIka,EAAcla,EAASsY,MACrB2B,EAAiBtc,IAAWC,KAAKqc,eAEnCI,EAAgB,CAChBH,YAAaA,EACbhB,KAAMgB,EAAYC,UAClBC,kBAAmBF,EAAYre,SAIpB,IADDoe,EAAe7iB,WAAU,SAAA8T,GAAK,OAAIA,EAAMgP,YAAYpe,KAAOue,EAAcH,YAAYpe,OAE/FwnB,GACiCjJ,EAAcnB,MAC1C3gB,MAAK,SAAA+hB,GACFD,EAAcE,aAAeD,EAAaC,aAC1CF,EAAcG,aAAeF,EAE7BnsB,EAAS,CACLC,KAAMw7B,GACN3e,OAAO,GAAD,oBAAMgP,GAAN,CAAsBI,YAMpDqP,GACK3pB,GAAG,iBAAiB,SAAAC,GACjB,IAAIka,EAAcla,EAASsY,MACvB2B,EAAiBtc,IAAWC,KAAKqc,eAEjCI,EAAgB,CAChBH,YAAaA,EACbhB,KAAMgB,EAAYC,UAClBC,kBAAmBF,EAAYre,QAG7BzC,EAAQ6gB,EAAe7iB,WAAU,SAAA8T,GAAK,OAAIA,EAAMgP,YAAYpe,KAAOue,EAAcH,YAAYpe,OACpF,IAAX1C,GACAkqB,GACiCrJ,EAAef,MAC3C3gB,MAAK,SAAA+hB,GACFD,EAAcE,aAAeD,EAAaC,aAC1CF,EAAcG,aAAeF,EAE7BL,EAAe7gB,GAAS6gB,EAExB9rB,EAAS,CACLC,KAAMw7B,GACN3e,OAAO,aAAKgP,gBqI3VxCi+D,+BAAgC,kBAAM/pF,GrIqWnC,SAACA,EAAUwP,GACV+rB,KACAA,GAAuByD,IAAI,eAC3BzD,GAAuByD,IAAI,iBAC3BzD,GAAyB,UqIrW7B/L,mBAAoB,kBAAMxvB,GJlFvB,SAACA,EAAUwP,GAEd,MAGIA,IAAWqM,qBAFX6yC,EADJ,EACIA,qBACA27B,EAFJ,EAEIA,2BAGC37B,GAAwB27B,IAI7BrqF,EAAS,CACLC,KAAMsoF,KAGVpzD,KAEK/qB,MAAK,SAAA0R,GACF9b,EAAS,CACLC,KAAMuoF,GACN1sE,2BI+DZ6uE,uCAAwC,kBAAM3qF,GJvD3C,SAACA,EAAUwP,GACUxS,EACnBgU,WACAzS,IAAIqO,IAGJgF,GAAG,iBAAiB,SAAAC,GACjB7R,EAAS,CACLC,KAAMwoF,GACNjgE,IAAK3W,EAAS2W,IACdvR,MAAOpF,EAASsY,eI8C5BihE,sCAAuC,kBAAMprF,GJvC1C,SAACA,EAAUwP,GACUxS,EACnBgU,WACAzS,IAAIqO,IAESoyB,IAAI,qBIsCtBisD,uBAAwB,kBAAMjrF,GVpE3B,SAACA,EAAoBwP,GACxBm5E,GAAaxpC,iBAAiB,UAC1B,kBAAM8pC,GAASjpF,EAAU,WAAY2oF,GAAa+C,YACtD7C,GAAa1pC,iBAAiB,UAC1B,kBAAM8pC,GAASjpF,EAAU,WAAY6oF,GAAa6C,YACtD5C,GAAa3pC,iBAAiB,UAC1B,kBAAM8pC,GAASjpF,EAAU,WAAY8oF,GAAa4C,YACtD3C,GAAc5pC,iBAAiB,UAC3B,kBAAM8pC,GAASjpF,EAAU,YAAa+oF,GAAc2C,YACxDr0C,GAAgB8H,iBAAiB,UAC7B,kBAAM8pC,GAASjpF,EAAU,kBAAmBq3C,GAAgBq0C,gBU2DhER,0BAA2B,kBAAMlrF,GVtD9B,SAACA,EAAoBwP,GACxBm5E,GAAagD,oBAAoB,UAC7B,kBAAM1C,GAAS,KAAM,KAAM,SAE/BJ,GAAa8C,oBAAoB,UAC7B,kBAAM1C,GAAS,KAAM,KAAM,SAE/BH,GAAa6C,oBAAoB,UAC7B,kBAAM1C,GAAS,KAAM,KAAM,SAE/BF,GAAc4C,oBAAoB,UAC9B,kBAAM1C,GAAS,KAAM,KAAM,SAE/B5xC,GAAgBs0C,oBAAoB,UAChC,kBAAM1C,GAAS,KAAM,KAAM,aU2C/BgB,mDAAoD,kBAAMjqF,G7D+jBvD,SAACA,EAAUwP,GACV+qD,KACAA,GAAqBv7B,IAAI,eACzBu7B,GAAqBv7B,IAAI,iBACzBu7B,GAAuB,U6DjkB3ByvB,sDAAuD,kBAAMhqF,EAASojE,OAEtE8c,kDAAmD,kBAAMlgF,EAASinC,OAElEijD,oDAAqD,kBAAMlqF,EAASwlE,OAEpEzmC,8BAA+B,kBAAM/+B,EAAS4rF,OAC9C1sD,+BAAgC,kBAAMl/B,EAAS4rF,OAC/CxsD,qCAAsC,kBAAMp/B,EAAS4rF,OAErDzL,gDAAiD,kBAAMngF,EAAS66C,OAEhEyvC,iBAAkB,kBAAMtqF,GF1GrB,SAACA,EAAUwP,GACd,MAGIA,IAAWitD,mBAFX8tB,EADJ,EACIA,cACA1uB,EAFJ,EAEIA,aAGC0uB,GAAkB1uB,IACnB77D,EAAS,CACLC,KAAMkpF,KAGVh0D,GACuB,GzIuhBO,GyIthBzB/qB,MAAK,SAAA0S,GACF9c,EAAS,CACLC,KAAMmpF,GACNtsE,OAAO,aAAKA,QAGnBpK,OAAM,SAAAhI,YEwFfqgF,qCAAsC,kBAAM/qF,GF7EzC,SAACA,EAAUwP,GACT65E,MACDA,GAAiBrsF,EACZgU,WACAzS,IAAIqO,KAGJgF,GAAG,eAAe,SAAAC,GACf,IAAMkL,EAAQlL,EAASsY,MAEnBrN,EAAM,aAAOtN,IAAWitD,mBAAmBb,eAE3B,IADD9+C,EAAO7T,WAAU,SAAA4iF,GAAa,OAAIA,EAAc9gE,OAAShO,EAAMgO,SAE9E/qB,EAAS,CACLC,KAAMqpF,GACNxsE,OAAO,GAAD,oBAAMA,GAAN,CAAcC,SAKpCssE,GACKz3E,GAAG,iBAAiB,SAAAC,GACjB,IAAMkL,EAAQlL,EAASsY,MAEnBrN,EAAM,aAAOtN,IAAWitD,mBAAmBb,cACzCkwB,EAAahvE,EAAO7T,WAAU,SAAA4iF,GAAa,OAAIA,EAAc9gE,OAAShO,EAAMgO,SAC9D,IAAhB+gE,IAEAhvE,EAAOgvE,GAAc/uE,EAErB/c,EAAS,CACLC,KAAMqpF,GACNxsE,OAAO,aAAKA,cE8ChCqtE,oCAAqC,kBAAMnqF,GFrCxC,SAACA,EAAUwP,GACV65E,KACAA,GAAerqD,IAAI,eACnBqqD,GAAerqD,IAAI,iBACnBqqD,GAAiB,aEoUdxpF,CAA6C+pF,IAE/C77C,GAAeY,YAAoBC,YAAe,CAC3DC,QAAS,CACLC,QAAS,CACLC,KAAMl6B,IAGVm6B,UAAW,CACPD,KAAMl6B,IAGVo6B,KAAM,CACFD,UAAWn6B,KAGnBs6B,WAAY,CACRC,WAAY,uBC3ZA+R,QACW,cAA7B/pC,OAAOy2C,SAASk+B,UAEe,UAA7B30E,OAAOy2C,SAASk+B,UAEhB30E,OAAOy2C,SAASk+B,SAAS/iF,MACvB,2D,ICbMgjF,G,UCENrkB,GAAY,CACd4jB,WAAW,EACXlzD,gBAAgB,EAChB/B,WzI0B6B,EyIxB7Bk1D,oCAAoC,EAEpCh+E,KAAM,KACNysB,YAAY,EACZi/C,iBAAiB,EAEjBptD,eAAgB,KAChBmgE,uBAAuB,EACvBC,sBAAsB,GAuGXC,GApGK,WAAgC,IAA/BrsF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAE/C,OAAQA,EAAOrpB,MACX,KAAKi6B,GAML,KAAKA,GACD,OAAO,2BACAytC,IADP,IAEItvC,eAAgBv4B,EAAMu4B,eACtB/B,WAAYx2B,EAAMw2B,aAE1B,KAAK4D,GACD,OAAO,2BACAp6B,GADP,IAEI0rF,mCAAoCliE,EAAO8iE,gBAEnD,KAAKlyD,GACD,OAAO,2BACAp6B,GADP,IAEIw2B,WzIViB,IyIYzB,KAAK4D,GACD,OAAO,2BACAp6B,GADP,IAEIusF,WAAW,IAEnB,KAAKnyD,GACD,OAAO,2BACAp6B,GADP,IAEIusF,WAAW,EACXh0D,gBAAgB,EAChB/B,WzItBiB,EyIuBjBk1D,oCAAoC,EAEpCh+E,KAAM,KACNysB,YAAY,EACZi/C,iBAAiB,EAEjBptD,eAAgB,KAChBmgE,uBAAuB,EACvBC,sBAAsB,IAE9B,KAAKhyD,GACD,OAAO,2BACAp6B,GADP,IAEIgsB,eAAgB,GAChBmgE,uBAAuB,EACvBC,sBAAsB,IAE9B,KAAKhyD,GACD,OAAO,2BACAp6B,GADP,IAEIgsB,eAAe,aAAKxC,EAAOxM,QAC3BmvE,uBAAuB,EACvBC,sBAAsB,IAE9B,KAAKhyD,GACD,OAAO,2BACAp6B,GADP,IAEIyrF,WAAW,EACXlzD,gBAAgB,EAChB/B,WAAYhN,EAAOgN,WACnBk1D,oCAAoC,EAEpCh+E,KAAO8b,EAAOgN,aAAeG,IzIvDZ,IyIuD4BnN,EAAOgN,WAAoC,KAAOx2B,EAAM0N,KACrGysB,WAAa3Q,EAAOgN,aAAeG,IzIxDlB,IyIwDkCnN,EAAOgN,YAA2Cx2B,EAAMm6B,WAC3Gi/C,iBAAkB5vD,EAAOgN,aAAeG,IzIzDvB,IyIyDuCnN,EAAOgN,aAA4Cx2B,EAAMo5E,gBAEjHptD,eAAiBxC,EAAOgN,aAAeG,IzI3DtB,IyI2DsCnN,EAAOgN,WAAoC,KAAOx2B,EAAMgsB,eAC/GmgE,uBAAwB3iE,EAAOgN,aAAeG,IzI5D7B,IyI4D6CnN,EAAOgN,aAA4Cx2B,EAAMmsF,sBACvHC,sBAAuB5iE,EAAOgN,aAAeG,IzI7D5B,IyI6D4CnN,EAAOgN,aAA4Cx2B,EAAMosF,uBAG9H,KAAKhyD,GACD,OAAO,2BACAp6B,GADP,IAEI0N,KAAMkP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO9b,OACvCysB,YAAY,EACZi/C,iBAAiB,IAGzB,KAAKh/C,GACD,OAAO,2BACAp6B,GADP,IAEI0N,KAAMkP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOi3D,gBAE/C,KAAKrmD,GACD,OAAO,2BACAp6B,GADP,IAEIgsB,eAAe,aAAKxC,EAAOxM,UAEnC,QACI,OAAOhd,ICjHb6nE,GAAY,CACdv2D,gBAAiB,CACbwpC,YAAa,GACbE,eAAgB,GAChBK,OAAQ,OACRQ,eAAgB,GAEhBrT,iBAAkB,CACdyS,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVrxC,SAAU,IAGd0+B,eAAgB,CACZwS,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVrxC,SAAU,IAGdwxC,UAAW,IAGfwB,iBAAkB,KAClBO,kBAAmB,KAEnBlB,+BAAgC,GAChCE,sCAAsC,EACtCC,qCAAsC,KAEtCG,sCAAsC,EACtCC,6BAA8B,GAC9BC,oCAAoC,EACpCC,mCAAoC,KAEpCb,8BAA8B,GAiNnBwwC,GA9MsB,WAAgC,IAA/BxsF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAChE,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK3rB,GACD,OAAO,2BACAl8C,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEX,CAACkY,EAAO80B,WAAY90B,EAAO+0B,eAGvC,KAAKrC,GACD,OAAO,2BACAl8C,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXk3B,iBAAiB,2BACVxoC,EAAMsR,gBAAgBk3B,kBADb,IAEZ,CAAChf,EAAO80B,WAAY90B,EAAO+0B,iBAI3C,KAAKrC,GACD,OAAO,2BACAl8C,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXm3B,eAAe,2BACRzoC,EAAMsR,gBAAgBm3B,gBADf,IAEV,CAACjf,EAAO80B,WAAY90B,EAAO+0B,iBAI3C,KAAKrC,GACD,OAAO,2BACAl8C,GADP,IAEI,CAACwpB,EAAO80B,WAAY90B,EAAO+0B,WAC3BjtC,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXk3B,iBACyB,mCAArBhf,EAAO80B,UAEHt+C,EAAMsR,gBAAgBk3B,iBAEtB,CACIyS,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVrxC,SAAU,IAEtB0+B,eACyB,iCAArBjf,EAAO80B,UAEHt+C,EAAMsR,gBAAgBm3B,eAEtB,CACIwS,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVrxC,SAAU,MAG1BuyC,qCACyB,mCAArB9yB,EAAO80B,WAAiDt+C,EAAMs8C,qCAClEC,qCACyB,mCAArB/yB,EAAO80B,UAAiDt+C,EAAMu8C,qCAAuC,KACzGK,mCACyB,iCAArBpzB,EAAO80B,WAA+Ct+C,EAAM48C,mCAChEC,mCACyB,iCAArBrzB,EAAO80B,UAA+Ct+C,EAAM68C,mCAAqC,OAE7G,KAAKX,GACD,OAAOl8C,EACX,KAAKk8C,GACD,OAAO,2BACAl8C,GADP,IAEIu8C,qCAAsC/yB,EAAOjf,UAErD,KAAK2xC,GACD,OAAOl8C,EACX,KAAKk8C,GACD,OAAO,2BACAl8C,GADP,IAEI68C,mCAAoCrzB,EAAOjf,UAEnD,KAAK2xC,GACD,OAAO,2BACAl8C,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXk3B,iBAAiB,2BACVxoC,EAAMsR,gBAAgBk3B,kBADb,IAEZyS,SAAUzxB,EAAOg1B,gBAAgB,GACjCtD,SAAU1xB,EAAOg1B,gBAAgB,GACjCrD,SAAU3xB,EAAOg1B,gBAAgB,GACjCpD,SAAU5xB,EAAOg1B,gBAAgB,GACjCz0C,SAAU/J,EAAMo8C,+BAA+B5Y,kBAGvD8Y,sCAAsC,EACtCF,+BAAgC,GAChCG,qCAAsC,OAE9C,KAAKL,GACD,OAAO,2BACAl8C,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXm3B,eAAe,2BACRzoC,EAAMsR,gBAAgBm3B,gBADf,IAEVwS,SAAUzxB,EAAOg1B,gBAAgB,GACjCtD,SAAU1xB,EAAOg1B,gBAAgB,GACjCrD,SAAU3xB,EAAOg1B,gBAAgB,GACjCpD,SAAU5xB,EAAOg1B,gBAAgB,GACjCz0C,SAAU/J,EAAM28C,6BAA6BnZ,kBAGrDoZ,oCAAoC,EACpCD,6BAA8B,GAC9BE,mCAAoC,OAE5C,KAAKX,GACD,OAAO,2BACAl8C,GADP,IAEIs8C,sCAAuCt8C,EAAMs8C,qCAC7CF,+BAAgC,GAChCG,qCAAsC,OAE9C,KAAKL,GACD,OAAO,2BACAl8C,GADP,IAEI48C,oCAAqC58C,EAAM48C,mCAC3CD,6BAA8B,GAC9BE,mCAAoC,OAE5C,KAAKX,GACD,OAAO,2BACAl8C,GADP,IAEI08C,qCAAsClzB,EAAOkvB,QAC7CiE,6BAA8B,GAC9BE,mCAAoC,KACpCD,oCAAoC,EACpCtrC,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXm3B,eAAgB,CACZwS,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVrxC,SAAU,QAI1B,KAAKgxC,GAED,OAAKvxB,EAAOm1B,iCASL3+C,EARI,2BACAA,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXiqC,UAAU,GAAD,oBAAMv7C,EAAMsR,gBAAgBiqC,WAA5B,CAAuC/xB,EAAOgyB,eAKvE,KAAKT,GACD,IAAKvxB,EAAOm1B,iCAAkC,CAC1C,IAAI8tC,EAAkB7vE,KAAKC,MAAMD,KAAKE,UAAU9c,EAAMsR,gBAAgBiqC,YAEtE,OADAkxC,EAAgBl6E,OAAOiX,EAAOre,MAAO,GAC9B,2BACAnL,GADP,IAEIsR,gBAAgB,2BACTtR,EAAMsR,iBADE,IAEXiqC,UAAWkxC,MAIvB,OAAOzsF,EACX,KAAKqY,GACD,OAAO,2BACArY,GADP,IAEI+8C,iBAAkBvzB,EAAO9Y,OAEjC,KAAKyL,GACD,OAAO,2BACAnc,GADP,IAEIs9C,kBAAmB9zB,EAAO3P,QAElC,KAAKqiC,GACD,OAAO,2BACA2rB,IADP,IAEI7rB,6BAA8Bh8C,EAAMg8C,+BAE5C,KAAKE,GACD,OAAO,2BACA2rB,IADP,IAEI7rB,8BAA+Bh8C,EAAMg8C,+BAE7C,QACI,OAAOh8C,ICtPb6nE,GAAY,CAMd9+B,cAAc,EAGdD,aAAc,KAEdmR,WAAY,KAGZE,gBAAgB,EAChBC,gBAAiB,IAoJNsyC,GAhJS,WAAgC,IAA/B1sF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACnD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK9sB,GACD,OAAO,2BACA/6C,GADP,IAEI8oC,aAActf,EAAO9b,KACrBusC,WAAYzwB,EAAO9b,KACnBq7B,aAAcvf,EAAOuf,eAE7B,KAAKgS,GACD,OAAO,2BACA/6C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN,CAACzwB,EAAOvH,KAAKq2B,UAAW9uB,EAAOvH,KAAK9K,UAGhD,KAAK4jC,GACD,OAAO,2BACA/6C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN3oC,gBAAgB,2BACTtR,EAAMi6C,WAAW3oC,iBADT,IAEX,CAACkY,EAAOvH,KAAKq2B,UAAW9uB,EAAOvH,KAAK9K,YAIpD,KAAK4jC,GACD,OAAO,2BACA/6C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN3oC,gBAAgB,2BACTtR,EAAMi6C,WAAW3oC,iBADT,IAEXk3B,iBAAiB,2BACVxoC,EAAMi6C,WAAW3oC,gBAAgBk3B,kBADxB,IAEZ,CAAChf,EAAOvH,KAAKq2B,UAAW9uB,EAAOvH,KAAK9K,cAKxD,KAAK4jC,GACD,OAAO,2BACA/6C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN3oC,gBAAgB,2BACTtR,EAAMi6C,WAAW3oC,iBADT,IAEXm3B,eAAe,2BACRzoC,EAAMi6C,WAAW3oC,gBAAgBm3B,gBAD1B,IAEV,CAACjf,EAAOvH,KAAKq2B,UAAW9uB,EAAOvH,KAAK9K,cAKxD,KAAK4jC,GACD,OAAO,2BACA/6C,GADP,IAEIm6C,gBAAiBn6C,EAAMm6C,eACvBC,gBAAiBp6C,EAAMm6C,eAAiB,GAAKn6C,EAAMo6C,kBAE3D,KAAKW,GACD,OAAO,2BACA/6C,GADP,IAEI,CAACwpB,EAAOvH,KAAKq2B,UAAW9uB,EAAOvH,KAAK9K,QAE5C,KAAK4jC,GAED,OAAIvxB,EAAOm1B,iCACA,2BACA3+C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN3oC,gBAAgB,2BACTtR,EAAMi6C,WAAW3oC,iBADT,IAEXiqC,UAAU,GAAD,oBAAMv7C,EAAMi6C,WAAW3oC,gBAAgBiqC,WAAvC,CAAkDv7C,EAAMo6C,sBAGzED,gBAAgB,EAChBC,gBAAiB,KAGlB,2BACAp6C,GADP,IAEIm6C,gBAAgB,EAChBC,gBAAiB,KAEzB,KAAKW,GAED,GAAIvxB,EAAOm1B,iCAAkC,CACzC,IAAI8tC,EAAkB7vE,KAAKC,MAAMD,KAAKE,UAAU9c,EAAMi6C,WAAW3oC,gBAAgBiqC,YAEjF,OADAkxC,EAAgBl6E,OAAOiX,EAAOre,MAAO,GAC9B,2BACAnL,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN3oC,gBAAgB,2BACTtR,EAAMi6C,WAAW3oC,iBADT,IAEXiqC,UAAWkxC,QAK3B,OAAOzsF,EACX,KAAK+6C,GACD,OAAO,2BACA/6C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAENnvB,MAAO9qB,EAAM8oC,aAAahe,MAC1BsY,UAAWpjC,EAAM8oC,aAAa1F,UAC9BC,SAAUrjC,EAAM8oC,aAAazF,SAC7BnY,MAAOlrB,EAAM8oC,aAAa5d,MAC1BwyB,SAAW19C,EAAM8oC,aAAa4U,SAAgB19C,EAAM8oC,aAAa4U,SAAxB,OAGrD,KAAK3C,GACD,OAAO,2BACA/6C,GADP,IAEIi6C,WAAW,2BACJj6C,EAAMi6C,YADH,IAEN3oC,gBAAiBsL,KAAKC,MAAMD,KAAKE,UAAU9c,EAAM8oC,aAAax3B,sBAG1E,KAAK8oB,GAML,KAAK2gB,GACD,OAAO,2BACA/6C,GADP,IAEI8oC,aAAclsB,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOi3D,cAC/CxmC,WAAYr9B,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOi3D,gBAErD,QACI,OAAOzgF,IC1Jb6nE,GAAY,CACd1vD,qBAAqB,EACrB9Z,KAAM,KAENgS,UAAW,KACXiD,UAAW,KAEXC,QAAS,EAETH,aAAc,KACdC,oBAAoB,EACpBvC,aAAc,EAEdqC,eAAgB,MAuGLw5E,GApGU,WAAgC,IAA/B3sF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAEpD,OAAOA,EAAOrpB,MACV,KAAKi6B,GACD,OAAOytC,GACX,KAAKxvD,GACD,OAAO,2BACArY,GADP,IAEImY,sBAAqBqR,EAAOnc,eAAe,sBAAwBmc,EAAO7W,oBAA4B3S,EAAMmY,oBAC5G9Z,KAAMmrB,EAAOnc,eAAe,QAAUmc,EAAOnrB,KAAO2B,EAAM3B,KAC1DyS,YAAa0Y,EAAOnc,eAAe,qBAAuBmc,EAAO7W,iBAAmB3S,EAAM8Q,aAAe,EACzGqC,enKlBgB,ImKmBZqW,EAAOnrB,MAEFmrB,EAAOnc,eAAe,SAAYmc,EAAOnc,eAAe,UAAYmc,EAAO9b,KAAK4D,gBAAgB/D,KAE7F,GAEAqP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO9b,KAAK4D,gBAAgB/D,OnKxBvC,ImK0BnBic,EAAOnrB,MAEFmrB,EAAOnc,eAAe,SAAYmc,EAAOnc,eAAe,UAAYmc,EAAO9b,KAAKgE,eAE7E,GAEAkL,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO9b,KAAKgE,iBAE1C,GACZ4B,UAAW,KACXC,QAAS,EACTH,aAAc,KACdC,oBAAoB,IAE5B,KAAKgF,GAKL,KAAK6jC,GACD,OAAO,2BACA2rB,IADP,IAEIxpE,KAAM2B,EAAM3B,OAEpB,KAAKga,GACD,OAAO,2BACArY,GADP,IAEIqQ,UAAWmZ,EAAOlR,SAE1B,KAAKD,GACD,OAAO,2BACArY,GADP,IAEIoT,aAAc,KACdC,oBAAoB,IAE5B,KAAKgF,GACD,OAAO,2BACArY,GADP,IAEIoT,aAAckE,OAAOC,IAAIC,gBAAgBgS,EAAO9Y,MAChD2C,oBAAoB,EACpBvC,aAAc,IAEtB,KAAKuH,GACD,OAAO,2BACArY,GADP,IAEIuT,QAASiW,EAAO1Q,OAExB,KAAKT,GACD,OAAO,2BACArY,GADP,IAEIoT,aAAc,KACdC,oBAAoB,EACpBvC,aAAc,IAEtB,KAAKuH,GACD,OAAO,2BACArY,GADP,IAEIoT,aAAckE,OAAOC,IAAIC,gBAAgBgS,EAAO9Y,MAChD2C,oBAAoB,EACpBvC,YAAa9Q,EAAMmT,eAAelK,OAAS,EAAIugB,EAAOxQ,gBAE9D,KAAKX,GACD,OAAO,2BACArY,GADP,IAEIoT,aAAc,KACdC,oBAAoB,EACpBC,UAAW,KACXC,QAAS,EACTzC,aAAc,IAEtB,KAAKuH,GACD,OAAO,2BACArY,GADP,IAEIsT,UAAWkW,EAAO9Y,OAE1B,QACI,OAAO1Q,ICjHb6nE,GAAY,CACd3rD,qBAAqB,EACrB7d,KAAM,KAENsc,kBAAmB,KACnBE,YAAa,KACbD,eAAgB,KAChBd,eAAgB,GAwEL8yE,GArEU,WAAgC,IAA/B5sF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACpD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK1rD,GACD,OAAO,2BACAnc,GADP,IAEIkc,sBAAqBsN,EAAOnc,eAAe,sBAAwBmc,EAAO7W,oBAA4B3S,EAAMkc,oBAC5G7d,KAAMmrB,EAAOnc,eAAe,QAAUmc,EAAOnrB,KAAO2B,EAAM3B,KAC1Dyb,cAAe0P,EAAOnc,eAAe,qBAAuBmc,EAAO7W,iBAAmB3S,EAAM8Z,eAAiB,EAC7Gc,epKPiB,IoKQb4O,EAAOnrB,MAEFmrB,EAAOnc,eAAe,SAAYmc,EAAOnc,eAAe,UAAYmc,EAAO9b,KAAK4D,gBAAgBuI,MAE7F,GAEA+C,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO9b,KAAK4D,gBAAgBuI,QAE1D,GACRgB,YAAa2O,EAAOnc,eAAe,qBAAuBmc,EAAO7W,iBAAmB3S,EAAM6a,YAAc,KACxGF,kBAAmB6O,EAAOnc,eAAe,qBAAuBmc,EAAO7W,iBAAmB3S,EAAM2a,kBAAoB,OAE5H,KAAKwB,GAKL,KAAK+/B,GACD,OAAO,2BACA2rB,IADP,IAEIxpE,KAAM2B,EAAM3B,OAEpB,KAAK8d,GACD,OAAO,2BACAnc,GADP,IAEI2a,kBAAmB6O,EAAOpN,UAC1BvB,YAAa,KACbf,eAAgB,IAExB,KAAKqC,GACD,OAAO,2BACAnc,GADP,IAEI6a,YAAa2O,EAAOxc,MAE5B,KAAKmP,GACD,OAAO,2BACAnc,GADP,IAEI6a,YAAa2O,EAAO9Y,KACpBoJ,eAAgB,IAExB,KAAKqC,GACD,OAAO,2BACAnc,GADP,IAEI6a,YAAa,KACbf,eAAgB,IAExB,KAAKqC,GACD,OAAO,2BACAnc,GADP,IAEI6a,YAAa7a,EAAM4a,eAAe4O,EAAOxQ,eAAehM,IACxD8M,cAAe9Z,EAAM4a,eAAe3R,OAAS,EAAIugB,EAAOxQ,cACxD2B,kBAAmB,OAE3B,QACI,OAAO3a,ICzEb6nE,GAAY,CACdxpE,KAAM,KACN8/C,kBAAmB,CACf5R,eAAgB,GAChB0H,WAAY,GACZgM,0BAA2B,GAC3BC,yBAA0B,IAE9BzT,kBAAmB,CACfF,eAAgB,GAChB0H,WAAY,GACZgM,0BAA2B,GAC3BC,yBAA0B,IAG9B9B,uBAAwB,GACxBC,6BAA6B,GA+LlBwuC,GA5LY,WAAgC,IAA/B7sF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACtD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKnoB,GACD,OAAO,2BACA1/C,GADP,IAEIm+C,kBAAkB,2BACXn+C,EAAMm+C,mBADI,IAEb5R,eACI/iB,EAAOnrB,OAASqhD,GAEZl2B,EAAOw2B,yBAEPhgD,EAAMm+C,kBAAkB5R,eAChC0H,WACIzqB,EAAOnrB,OAASqhD,GAEZl2B,EAAOw2B,yBAEPhgD,EAAMm+C,kBAAkBlK,WAChCgM,0BACIz2B,EAAOnrB,OAASqhD,GAEZl2B,EAAOw2B,yBAEPhgD,EAAMm+C,kBAAkB8B,0BAChCC,yBACI12B,EAAOnrB,OAASqhD,GAEZl2B,EAAOw2B,yBAEPhgD,EAAMm+C,kBAAkB+B,6BAG5C,KAAKR,GACD,OAAO,2BACA1/C,GADP,IAEIm+C,kBAAkB,2BACXn+C,EAAMm+C,mBADI,IAEb5R,erK/CuB,IqKgDnB/iB,EAAOnrB,KAEH,GAEA2B,EAAMm+C,kBAAkB5R,eAChC0H,WrKnDmB,IqKoDfzqB,EAAOnrB,KAEH,GAEA2B,EAAMm+C,kBAAkBlK,WAChCgM,0BrKxDmC,IqKyD/Bz2B,EAAOnrB,KAEH,GAEA2B,EAAMm+C,kBAAkB8B,0BAChCC,yBACI12B,EAAOnrB,OAASP,EAEZ,GAEAkC,EAAMm+C,kBAAkB+B,2BAEpCzT,kBAAkB,2BACXzsC,EAAMm+C,mBADI,IAEb5R,erK1EuB,IqK2EnB/iB,EAAOnrB,MACJmrB,EAAOnc,eAAe,mCACrBmc,EAAO42B,8BAEP,GAEApgD,EAAMysC,kBAAkBF,eAChC0H,WrKhFmB,IqKiFfzqB,EAAOnrB,MACJmrB,EAAOnc,eAAe,mCACrBmc,EAAO42B,8BAEP,GAEApgD,EAAMysC,kBAAkBwH,WAChCgM,0BrKvFmC,IqKwF/Bz2B,EAAOnrB,MACJmrB,EAAOnc,eAAe,mCACrBmc,EAAO42B,8BAEP,GAEApgD,EAAMysC,kBAAkBwT,0BAChCC,yBACI12B,EAAOnrB,OAASP,GACb0rB,EAAOnc,eAAe,mCACrBmc,EAAO42B,8BAEP,GAEApgD,EAAMysC,kBAAkByT,2BAEpC7hD,KAAM,KACN+/C,uBAAwB,GACxBC,6BAA6B,IAErC,KAAKqB,GACD,OAAO,2BACA1/C,GADP,IAEIm+C,kBAAkB,2BACXn+C,EAAMm+C,mBADI,IAEb5R,erKpHuB,IqKqHnB/iB,EAAOnrB,KAAP,uBAEQ2B,EAAMm+C,kBAAkB5R,gBAFhC,CAEgD/iB,EAAO81B,WAEnDt/C,EAAMm+C,kBAAkB5R,eAChC0H,WrKxHmB,IqKyHfzqB,EAAOnrB,KAEH,CAACmrB,EAAO81B,UAERt/C,EAAMm+C,kBAAkBlK,WAChCgM,0BrK7HmC,IqK8H/Bz2B,EAAOnrB,KAEH,CAACmrB,EAAO81B,UAERt/C,EAAMm+C,kBAAkB8B,0BAChCC,yBACI12B,EAAOnrB,OAASP,EAAhB,uBAEQkC,EAAMm+C,kBAAkB+B,0BAFhC,CAE0D12B,EAAO81B,WAE7Dt/C,EAAMm+C,kBAAkB+B,6BAG5C,KAAKR,GACD,OAAO,2BACA1/C,GADP,IAEIo+C,uBAAwB50B,EAAO5e,MAC/ByzC,6BAA6B,IAErC,KAAKqB,GACD,OAAO,2BACA1/C,GADP,IAEIq+C,6BAA6B,IAErC,KAAKqB,GACD,OAAO,2BACA1/C,GADP,IAEIo+C,uBAAwB,KAEhC,KAAKsB,GACD,OAAO,2BACA1/C,GADP,IAEIysC,kBAAkB,2BACXzsC,EAAMysC,mBADI,IAEbF,eAAe,GAAD,oBAAMvsC,EAAMysC,kBAAkBF,gBAA9B,CAA8C/iB,EAAOuiB,gBAG/E,KAAK2T,GACD,OAAO,2BACA1/C,GADP,IAEIysC,kBAAkB,2BACXzsC,EAAMysC,mBADI,IAEbwH,WAAW,GAAD,oBAAMj0C,EAAMysC,kBAAkBwH,YAA9B,CAA0CzqB,EAAOuiB,gBAGvE,KAAK2T,GACD,OAAO,2BACA1/C,GADP,IAEIysC,kBAAkB,2BACXzsC,EAAMysC,mBADI,IAEbwT,0BAA0B,GAAD,oBAAMjgD,EAAMysC,kBAAkBwT,2BAA9B,CAAyDz2B,EAAOuiB,gBAGrG,KAAK2T,GACD,OAAO,2BACA1/C,GADP,IAEIysC,kBAAkB,2BACXzsC,EAAMysC,mBADI,IAEbyT,yBAAyB,GAAD,oBAAMlgD,EAAMysC,kBAAkByT,0BAA9B,CAAwD12B,EAAOuiB,gBAGnG,QACI,OAAO/rC,IC7Mb6nE,GAAY,CACdxpE,KtKOuB,EsKNvBC,SAAU,GAsBCwuF,GAnBgB,WAAgC,IAA/B9sF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC1D,OAAOA,EAAOrpB,MACV,KAAKi6B,GACD,OAAOytC,GACX,KAAKklB,EACD,MAAO,CACH1uF,KAAMmrB,EAAOnrB,KACbC,SAAUkrB,EAAOlrB,UAEzB,KAAKT,EACD,MAAO,CACHQ,KtKRW,EsKSXC,SAAU,GAElB,QACI,OAAO0B,ICpBb6nE,GAAY,CACdzzC,gBAAiB,GACjBL,YAAa,GACbC,oBAAqB,GACrBW,2BnJUgC,GmJyBrBq4D,GAhCe,WAAgC,IAA/BhtF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACzD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKzyC,GACD,OAAO,2BACAp1B,GADP,IAEI20B,2BnJCuB,ImJC/B,KAAKS,GACD,OAAO,2BACAp1B,GADP,IAEIo0B,gBAAiB,GACjBL,YAAa,GACbC,oBAAqB,GACrBW,2BAA4BnL,EAAOnc,eAAe,gBAAkBmc,EAAOuL,anJRvD,ImJU5B,KAAKK,GACD,OAAO,2BACAp1B,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,QAE9B,KAAKie,GACD,OAAO,2BACAp1B,GADP,IAEI20B,2BAA4BnL,EAAO8L,YAE3C,QACI,OAAOt1B,ICxCb6nE,GAAY,CACd7rD,eAAgB,KAChB4yC,sBAAsB,EACtB27B,2BAA2B,GAgChB0C,GA7Be,WAAgC,IAA/BjtF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACzD,OAAQA,EAAOrpB,MACX,KAAK+sF,GACD,OAAO,2BACAltF,GADP,IAEIgc,eAAgB,KAChB4yC,sBAAsB,EACtB27B,2BAA2B,IAEnC,KAAK2C,GACD,OAAO,2BACAltF,GADP,IAEIgc,eAAgBY,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOxN,iBACjD4yC,sBAAsB,EACtB27B,2BAA2B,IAEnC,KAAK2C,GACD,OAAO,2BACAltF,GADP,IAEIgc,eAAe,2BACRhc,EAAMgc,gBADC,IAEV,CAACwN,EAAOd,KAAMc,EAAOrS,UAGjC,QACI,OAAOnX,I,SCLbmtF,G,4JACF,WACI,MASIjvF,KAAKC,MARLivF,EADJ,EACIA,gBACAC,EAFJ,EAEIA,gBACAC,EAHJ,EAGIA,iBACA5wD,EAJJ,EAIIA,YAEAD,EANJ,EAMIA,qBACA8wD,EAPJ,EAOIA,eACA1wD,EARJ,EAQIA,yBAGJ,OACI,eAAC,IAAD,CACI/9B,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIq6B,WAAS,EACTz6B,QAAQ,KACRS,MAAM,UAHV,SAMQi9B,EAEI,aAEA,iBAIRA,EAEI,KAEA,cAACt9B,EAAA,EAAD,CACIq6B,WAAS,EACTz6B,QAAQ,QACRS,MAAM,gBACNwT,MAAM,OAJV,2JAWR,eAAC,IAAD,CACInU,QAAM,EACNQ,UAAW,GAFf,UAII,cAACF,EAAA,EAAD,CACIJ,QAAQ,YADZ,+BAKA,cAACsc,GAAA,EAAD,CACI1O,KAAK,kBACLzN,MAAM,OACN88C,UAAQ,EACRj9C,QAAQ,WACRa,OAAO,SACPsX,MAAOi2E,EACPxiF,MAAO0iF,GAAsD,IAAlCF,EAAgBhiF,OAAOnC,OAClD6M,SAAU+mB,IAEd,cAACvhB,GAAA,EAAD,CACI1O,KAAK,kBACLzN,MAAM,cACNoc,YAAY,aACZvc,QAAQ,WACRa,OAAO,SACP21D,WAAS,EACTa,KAAM,EACNZ,QAAS,EACTt+C,MAAOk2E,EACPv3E,SAAU+mB,IAEd,eAACtoB,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,cAAC,IAAD,UAESguF,EAIG,cAACluF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACNxT,MAAM,QAHV,sCAFA,SAYhB,cAACgV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,eAAC,IAAD,CACIgW,cAAc,QADlB,UAGI,cAAC,IAAD,CACIe,YAAa,EADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRY,QAAS,kBAAM68B,GAAqB,EAAO,OAC3Cv3B,UAAWyQ,YAAIxS,GAAakB,mBAHhC,sBAQJ,cAAC,IAAD,CACIR,WAAY,EADhB,SAGI,cAACrE,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNG,QAAS2tF,EACTroF,UAAWyQ,YAAIxS,GAAakB,mBAJhC,wC,GAnIVvE,aAqJXC,gBAvKS,SAAAC,GACpB,MAAO,CACHotF,gBAAiBptF,EAAMg9B,aAAaowD,gBACpCC,gBAAiBrtF,EAAMg9B,aAAaqwD,gBACpCG,kBAAmBxtF,EAAMg9B,aAAawwD,kBACtCF,iBAAkBttF,EAAMg9B,aAAaswD,iBACrC5wD,YAAa18B,EAAMg9B,aAAaN,gBAIb,SAAAx8B,GACvB,MAAO,CACHu8B,qBAAsB,SAAC/9B,EAAMg+B,GAAP,OAAuBx8B,EAAS4rF,GAAmCptF,EAAMg+B,KAC/F6wD,eAAgB,kBAAMrtF,G/I0CnB,SAACA,EAAUwP,GACd,IAAI+9E,EAAqB/9E,IAAWstB,aAAaN,YAC3C0wD,EAAkB19E,IAAWstB,aAAaowD,gBAC1CC,EAAkB39E,IAAWstB,aAAaqwD,gBAEhD,GAAsC,IAAlCD,EAAgBhiF,OAAOnC,OAA3B,CAOA,IAAM4X,EAAcnR,IAAWC,KAAKjC,KAGpC,GAAK+/E,EAoDA,CAMD,GALAA,EAAmB1/D,OAAS,CACxBlgB,GAAI4/E,EAAmB1/D,OAAOlgB,KAI7BgT,GAEGA,IAAgBA,EAAYG,WAGhC,OAGJ,IAAI0sE,EAAoB9wE,KAAKC,MAAMD,KAAKE,UAAU2wE,IAClDC,EAAkB9gF,KAAOwgF,EACzBM,EAAkBriE,YAAcgiE,EAEhCK,EAAkBC,WAAaxzE,KAE/Bkb,GACeq4D,GACVpjF,MAAK,WACFpK,EAAS,CACLC,KAAMq8B,GACN99B,MAAM,EACNg+B,YAAa,OAGjBrH,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,avB9BM,EuB+BNC,yBAA0Bvc,GAC1Bwc,mBAAoBokE,EAAkB7/E,GACtCsJ,MAAO,CACH0Z,OAAQ48D,EACR38D,MAAO48D,GAEXnkE,gBRqD4B,8BQnDvBpd,QAAQ,cAAeuhF,EAAkB9gF,QAGtD1M,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,kBA5GD,CACrB,IAAMue,EAAQ,CACVjhB,KAAMwgF,EACN/hE,YAAagiE,EACbO,YAAazzE,KACb4T,OAAQ,CACJlgB,GAAIgT,EAAYhT,KAIxBwnB,GACiBxH,GACZvjB,MAAK,SAAAkjB,GACFttB,EAAS,CACLC,KAAMq8B,GACN99B,MAAM,EACNg+B,YAAa,OAGjBrH,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,avBgCM,EuB/BNC,yBAA0Bvc,GAC1Bwc,mBAAoBkE,EACpBrW,MAAM,2BACC0W,GADF,IAEDhgB,GAAI2f,IAERjE,gBR0G6B,2BQxGxBpd,QAAQ,UAAW0hB,EAAMjhB,QAGtC1M,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GAEH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,oBAxDtBpP,EAAS,CACLC,KAAMw8B,S+IhDdE,yBAA0B,SAACjkB,GAAD,OAAW1Y,EAAS4rF,GAAuClzE,QAyJ9E7Y,CAA6CotF,ICnJtDU,G,4MAQFpvD,mBAAqB,SAAAvL,GAAK,OAAI,SAACq7B,EAAS+F,EAAOC,EAAQj8C,GACnD,EAAKna,MAAMsgC,mBAAmBvL,EAAO5a,K,4CAGzC,WACI,MAUIpa,KAAKC,MATL2vF,EADJ,EACIA,iBACAC,EAFJ,EAEIA,sBACAC,EAHJ,EAGIA,oBACAC,EAJJ,EAIIA,kBACA3wD,EALJ,EAKIA,aAEAD,EAPJ,EAOIA,sBACA6wD,EARJ,EAQIA,gBACArxD,EATJ,EASIA,yBAGJ,OACI,eAACtoB,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIq6B,WAAS,EACTz6B,QAAQ,KACRS,MAAM,UAHV,SAMQ69B,EAEI,cAEA,kBAIRA,EAEI,KAEA,cAACl+B,EAAA,EAAD,CACIq6B,WAAS,EACTz6B,QAAQ,QACRS,MAAM,gBACNwT,MAAM,OAJV,0NAaR,eAAC,IAAD,CACInU,QAAM,EACNQ,UAAW,GAFf,UAII,cAACF,EAAA,EAAD,CACIJ,QAAQ,QADZ,gCAMA,cAACsc,GAAA,EAAD,CACI1O,KAAK,mBACLzN,MAAM,OACN88C,UAAQ,EACRj9C,QAAQ,WACRa,OAAO,SACPsX,MAAO22E,EACPljF,MAAOqjF,GAAwD,IAAnCH,EAAiB1iF,OAAOnC,OACpD6M,SAAU+mB,IAGd,cAACvhB,GAAA,EAAD,CACI1O,KAAK,wBACLzN,MAAM,oBACN88C,UAAQ,EACRj9C,QAAQ,WACRa,OAAO,SACPsX,MAAO42E,EACPnjF,MAAOqjF,GAA6D,IAAxCF,EAAsB3iF,OAAOnC,OACzD6M,SAAU+mB,IAGd,eAAC,IAAD,CACI/9B,QAAM,EACNQ,UAAW,GAFf,UAII,cAACF,EAAA,EAAD,CACIq6B,WAAS,EACTz6B,QAAQ,QAFZ,4BAMA,cAAC,KAAD,CACIuc,YAAY,iEACZyoB,MAAM,OACN7sB,MAAO62E,EACPl4E,SAAU5X,KAAKugC,mBAAmBqtD,IAClC51B,QAASA,gBAM7B,cAACzhD,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GAJR,SAMI,eAACN,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,cAAC,IAAD,UAES2uF,EAIG,cAAC7uF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACNxT,MAAM,QAHV,iDAFA,SAYhB,cAACgV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,eAAC,IAAD,CACIgW,cAAc,QADlB,UAGI,cAAC,IAAD,CACIe,YAAa,EADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRY,QAAS,kBAAMy9B,GAAsB,EAAO,OAC5Cn4B,UAAWyQ,YAAIxS,GAAakB,mBAHhC,sBAQJ,cAAC,IAAD,CACIR,WAAY,EADhB,SAGI,cAACrE,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNG,QAASsuF,EACThpF,UAAWyQ,YAAIxS,GAAakB,mBAJhC,uC,GAtLTvE,aAwMZC,gBA3NS,SAAAC,GACpB,MAAO,CACH8tF,iBAAkB9tF,EAAMg9B,aAAa8wD,iBACrCC,sBAAuB/tF,EAAMg9B,aAAa+wD,sBAC1CC,oBAAqBhuF,EAAMg9B,aAAagxD,oBACxCC,kBAAmBjuF,EAAMg9B,aAAaixD,kBACtC3wD,aAAct9B,EAAMg9B,aAAaM,iBAId,SAAAp9B,GACvB,MAAO,CACHm9B,sBAAuB,SAAC3+B,EAAM4+B,GAAP,OAAwBp9B,EAAS4rF,GAAoCptF,EAAM4+B,KAClG4wD,gBAAiB,kBAAMhuF,GhJoXpB,SAACA,EAAUwP,GACd,IAAIy+E,EAAsBz+E,IAAWstB,aAAaM,aAC5C1O,EAAgBlf,IAAWstB,aAAapO,cACxCk/D,EAAmBp+E,IAAWstB,aAAa8wD,iBAC3CC,EAAwBr+E,IAAWstB,aAAa+wD,sBAChDC,EAAsBt+E,IAAWstB,aAAagxD,oBAEpD,GAAuC,IAAnCF,EAAiB1iF,OAAOnC,QACmB,IAAxC8kF,EAAsB3iF,OAAOnC,OADpC,CAQA,IAAM4X,EAAcnR,IAAWC,KAAKjC,KAGpC,GAAKygF,EAuDA,CAMD,GALAA,EAAoBpgE,OAAS,CACzBlgB,GAAIsgF,EAAoBpgE,OAAOlgB,KAI9BgT,GAEGA,IAAgBA,EAAYG,WAGhC,OAGJ,IAAIotE,EAAqBxxE,KAAKC,MAAMD,KAAKE,UAAUqxE,IACnDC,EAAmBxhF,KAAOkhF,EAC1BM,EAAmB/iE,YAAc0iE,EACjCK,EAAmB/+E,QAAU2+E,EAE7BI,EAAmBT,WAAaxzE,KAEhCkb,GACgB+4D,GACX9jF,MAAK,WACFpK,EAAS,CACLC,KAAMi9B,GACN1+B,MAAM,EACN4+B,aAAc,OAGlBjI,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,avBhXM,EuBiXNC,yBAA0Bvc,GAC1Bwc,mBAAoB8kE,EAAmBvgF,GACvCsJ,MAAO,CACH0Z,OAAQs9D,EACRr9D,MAAOs9D,GAEX7kE,gBR5R6B,uDQ8RxBpd,QAAQ,eAAgBiiF,EAAmBxhF,MAC3CT,QAAQ,cAAeyiB,EAAchiB,QAGlD1M,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,2CACT5P,MAAO,QACP6P,SAAU,kBAjHA,CACtB,IAAMwf,EAAS,CACXtB,QAASoB,EAAc/gB,GACvBjB,KAAMkhF,EACNz+E,QAAS2+E,EACT3iE,YAAa0iE,EACbH,YAAazzE,KACb4T,OAAQ,CACJlgB,GAAIgT,EAAYhT,KAIxBwnB,GACkBvG,GACbxkB,MAAK,SAAAgkB,GACFpuB,EAAS,CACLC,KAAMi9B,GACN1+B,MAAM,EACN4+B,aAAc,OAGlBjI,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,avBhTM,EuBiTNC,yBAA0Bvc,GAC1Bwc,mBAAoBgF,EACpBnX,MAAM,2BACC2X,GADF,IAEDjhB,GAAIygB,IAER/E,gBRrO8B,gDQuOzBpd,QAAQ,WAAY2iB,EAAOliB,MAC3BT,QAAQ,UAAWyiB,EAAchiB,QAG9C1M,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GAEH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,2CACT5P,MAAO,QACP6P,SAAU,oBA3DtBpP,EAAS,CACLC,KAAMo9B,SgJ7XdV,yBAA0B,SAACjkB,GAAD,OAAW1Y,EAAS4rF,GAAuClzE,KACrF6lB,mBAAoB,SAACvL,EAAO5a,GAAR,OAAmBpY,EAAS4rF,GAAiC54D,EAAO5a,QA4MjFvY,CAA6C8tF,IAEtD33B,GAAU,CACZW,QAAS,CACL,CAAC,CAAC,OAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAC/B,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,aAAc,cACf,CAAC,CAAC,KAAQ,WAAY,CAAC,KAAQ,UAAW,CAAC,OAAU,MAAO,CAAC,OAAU,MAAO,CAAC,MAAS,KACxF,CAAC,CAAC,OAAU,OAAQ,CAAC,OAAU,UAC/B,CAAC,CAAC,MAAS,IAAK,CAAC,WAAc,KAC/B,CAAC,OAAQ,SACT,CAAC,W,qBC9KHw3B,G,4MAQFC,gBAAkB,SAAArwD,GAAK,OAAI,SAACrlB,EAAOslB,GAC/B,EAAK//B,MAAMmwF,gBAAgBrwD,EAAOC,K,EAStCqwD,uBAAyB,SAAAtwD,GAAK,OAAI,SAAArlB,GAC9B,EAAKza,MAAMowF,uBAAuBtwD,EAAOrlB,K,EAQ7C41E,cAAgB,WACZ,MAYI,EAAKrwF,MAXLiP,EADJ,EACIA,gBACAyT,EAFJ,EAEIA,YACA4tE,EAHJ,EAGIA,mBACAC,EAJJ,EAIIA,aACAC,EALJ,EAKIA,kBACAC,EANJ,EAMIA,iBACAC,EAPJ,EAOIA,wBAEAxxD,EATJ,EASIA,sBACA5O,EAVJ,EAUIA,aACAqgE,EAXJ,EAWIA,yBAGJ,IAAKL,EACD,OACI,cAACzoD,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC,IAAD,CACImQ,cAAc,SACdhW,UAAW,GACXoW,aAAc,GAHlB,SAKI,cAAC,KAAD,CACIjW,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAWhC,IAAIg6E,EAAgB,GAEpB,OAAQJ,GACJ,KAAKK,IACDD,EAAgBL,EAAattE,QAAO,SAAA0N,GAAM,OAAIA,EAAOf,OAAOlgB,KAAOgT,EAAYhT,OACjE+J,MAAK,SAACq3E,EAASC,GACzB,OAAQA,EAAQtB,YAAcqB,EAAQrB,eAE1C,MACJ,KAAKuB,GACDT,EAAa92E,MAAK,SAACq3E,EAASC,GACxB,OAAQA,EAAQtB,YAAcqB,EAAQrB,eAE1CmB,EAAgBL,EAChB,MACJ,KAAKU,GACDV,EAAa92E,MAAK,SAACq3E,EAASC,GACxB,OAAQD,EAAQrB,YAAcsB,EAAQtB,eAE1CmB,EAAgBL,EAMxB,OAA6B,IAAzBK,EAAc9lF,OAEV,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SACN5T,MAAO,CACHC,UAAW,GACXoW,aAAc,IALtB,qCAgBZq5E,EACK1jF,MAAMujF,EAAmBC,EAAyBD,EAAmBC,EAA0BA,GAC/F92E,KAAI,SAAA+W,GAAM,OACH,eAACkX,GAAA,EAAD,CAEItL,OAAK,EAFT,UAII,cAACz1B,GAAA,EAAD,UACI,cAAC7F,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,SAIKmb,GAA+B2U,EAAO8+D,iBAG/C,cAAC3oF,GAAA,EAAD,CACI5F,MAAO,CACH6U,SAAU,KAFlB,SAKI,eAAC,IAAD,CACIpV,QAAM,EACNwW,cAAc,OAFlB,UAII,cAAC+5E,GAAA,EAAD,CACIzvF,QAAS,kBAAMkvF,EAAyBhgE,IAD5C,SAGI,cAAC1vB,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRS,MAAM,UACNkkD,QAAM,EAJV,SAMK70B,EAAOliB,SxKxC1B,IwK4CciU,EAAY1gB,MACT0gB,EAAYG,cAEV8N,EAAOzhB,eAAe,YAEnByhB,EAAOzhB,eAAe,aACA,IAAnByhB,EAAOhB,SAId,eAAC,IAAD,CACIxuB,UAAW,GADf,UAGI,eAACE,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B3E,KAAK,QACLD,MAAM,YACNG,QAAS,kBAAM6uB,EAAaK,EAAOjhB,KACnCxO,MAAO,CACHgX,YAAa,IAPrB,mBAWI,cAAC,KAAD,CACIpS,SAAS,QACT5E,MAAO,CACHwE,WAAY,QAIxB,eAACrE,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B3E,KAAK,QACLD,MAAM,UACNG,QAAS,kBAAMy9B,GAAsB,EAAMzgB,KAAKC,MAAMD,KAAKE,UAAUgS,MALzE,iBAQI,cAAC,KAAD,CACI7qB,SAAS,QACT5E,MAAO,CACHwE,WAAY,WAM5B,UAIhB,cAACoB,GAAA,EAAD,CACI5F,MAAO,CACH6U,SAAU,KAFlB,SAKI,cAAC9U,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACR2kD,QAAM,EAHV,SAKK70B,EAAOzD,gBAGhB,cAACpmB,GAAA,EAAD,CACI5F,MAAO,CACH6U,SAAU,KAFlB,SAKI,cAAC9U,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACR2kD,QAAM,EAHV,SxKlHN,IwKwHc70B,EAAOf,OAAO5tB,KAAd,UAGO2uB,EAAOf,OAAOqV,UAHrB,YAGkCtU,EAAOf,OAAOsV,UAE5CvU,EAAOf,OAAO/M,WAGV,0BAHJ,UAMO8N,EAAOf,OAAOxB,aAAaY,YANlC,gBAlHX2B,EAAOjhB,Q,4CAkIpC,WACI,MAiBI3P,KAAKC,MAhBLiP,EADJ,EACIA,gBAEAyT,EAHJ,EAGIA,YAEA+N,EALJ,EAKIA,cACA8/D,EANJ,EAMIA,aAEAE,EARJ,EAQIA,iBACAC,EATJ,EASIA,wBAEAS,EAXJ,EAWIA,gBACAX,EAZJ,EAYIA,kBAEAtxD,EAdJ,EAcIA,sBACAR,EAfJ,EAeIA,yBACA0yD,EAhBJ,EAgBIA,mBAGAR,EAAa,aAAOL,GASxB,OAPIC,IAAsBK,KACtBD,EAAgBL,EAAattE,QAAO,SAAA0N,GAAM,OAAIA,EAAOf,OAAOlgB,KAAOgT,EAAYhT,OACjE+J,MAAK,SAACq3E,EAASC,GACzB,OAAQA,EAAQtB,YAAcqB,EAAQrB,eAK1C,eAAC,IAAD,CACI9uF,QAAM,EADV,UAGI,eAAC,IAAD,CACIsW,cAAc,SADlB,UAGI,cAACG,EAAA,EAAD,CACI9V,MAAM,UACNs6B,aAAW,OACXn6B,QAAS2vF,EAHb,SAKI,cAAC,KAAD,MAEJ,cAAC,IAAD,CACI1rF,WAAY,EADhB,SAGI,cAACzE,EAAA,EAAD,CACIK,MAAM,UACNT,QAAQ,KAFZ,0BAIe4vB,EAAchiB,aAKrC,cAAC,IAAD,CACItN,UAAW,GACXoW,aAAc,GAFlB,SAII,cAACtW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAKS2b,EAAcvhB,eAAe,cAA9B,uBAIoB8M,GAA+ByU,EAAc++D,aAJjE,sBAEmBxzE,GAA+ByU,EAAcg/D,kBAO5E,cAACxuF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,4BAAG,iDAGP,cAAC7T,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACH6kD,WAAY,WACZ5kD,UAAW,GALnB,SAQKsvB,EAAcvD,cAGnB,cAAC7V,EAAA,EAAD,CACInW,MAAO,CACHiX,OAAQ,EACRhX,UAAW,GACXoW,aAAc,GACdZ,gB1K/XK,a0KmYb,cAAC,IAAD,CACIY,aAAc,GADlB,SAGI,eAAClW,EAAA,EAAD,CACIR,QAAQ,WACRS,MAAM,UACNyF,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAMy9B,GAAsB,EAAM,OAJ/C,UAMI,cAAC,KAAD,CACIp5B,SAAS,QACT5E,MAAO,CACHgX,YAAa,MATzB,qBAiBJ,cAAChC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,EACTsB,aAAc,IAJtB,SAOI,eAACnB,EAAA,EAAD,WxK5QM,IwK8QEsM,EAAY1gB,MACT0gB,EAAYG,WAEX,cAACvM,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACHqW,aAAc,GAJtB,kBASA,cAAC2jB,GAAA,EAAD,UACI,cAACK,GAAA,EAAD,CACI/6B,WAAS,EADb,SAGI,eAACq3C,GAAA,EAAD,CACI7+B,MAAOm4E,EACPx5E,SAAU+mB,EACVh9B,OAAO,QACPo2C,MACI,cAACC,GAAA,EAAD,CACIomB,WAAY,EACZ1vD,KAAK,oBAPjB,UAWI,cAACupC,GAAA,EAAD,CACIh/B,MAAOke,GADX,0BAKA,cAAC8gB,GAAA,EAAD,CACIh/B,MzJ8iBpB,uByJ/iBgB,yCAWpB,KAER,cAAC1C,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACHqW,aAAc,GAJtB,qBASA,cAAC2jB,GAAA,EAAD,UACI,cAACK,GAAA,EAAD,CACI/6B,WAAS,EADb,SAGI,eAACq3C,GAAA,EAAD,CACI7+B,MAAOw3E,EACP74E,SAAU+mB,EACVh9B,OAAO,QACPo2C,MACI,cAACC,GAAA,EAAD,CACIomB,WAAY,EACZ1vD,KAAK,sBAPjB,UAWI,cAACupC,GAAA,EAAD,CACIh/B,MAAOg4E,GADX,oBAKA,cAACh5C,GAAA,EAAD,CACIh/B,MAAO63E,GADX,kBAKA,cAAC74C,GAAA,EAAD,CACIh/B,MAAOi4E,GADX,qCAc5B,cAAC/1D,GAAA,EAAD,CACIh6B,MAAO,CACH8mC,UAAW,QAFnB,SAKI,eAACC,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,UACI,eAACL,GAAA,EAAD,WACI,cAACvhC,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,yCAIZ,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,2CAIZ,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,gDAIZ,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,gDAMpB,cAAC+hC,GAAA,EAAD,UAEQpoC,KAAKswF,kBAGb,cAACjoD,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CACInnC,MAAO,CACHyV,gBAAiBC,IAErB0xB,mBAAoB,CAAC,EAAG,GAAI,IAC5BC,MAAOqoD,EAAc9lF,OACrB68B,YAAa+oD,EACbhpD,KAAM+oD,EACNjoD,oBAAqB,CACjB,aAAc,iBAElBC,oBAAqB,CACjB,aAAc,aAElBC,YAAa,CACTC,QAAQ,GAEZC,aAAc7oC,KAAKowF,gBAAgB,WACnCtnD,oBAAqB9oC,KAAKqwF,uBAAuB,6B,GAxlBvDzuF,aAmmBfC,gBAhoBS,SAAAC,GACpB,MAAO,CACHoN,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAE7CyT,YAAa7gB,EAAM2P,KAAKjC,KAExBkhB,cAAe5uB,EAAMg9B,aAAapO,cAClC8/D,aAAc1uF,EAAMg9B,aAAa0xD,aACjCD,mBAAoBzuF,EAAMg9B,aAAayxD,mBACvCG,iBAAkB5uF,EAAMg9B,aAAa4xD,iBACrCC,wBAAyB7uF,EAAMg9B,aAAa6xD,wBAE5CS,gBAAiBtvF,EAAMg9B,aAAasyD,gBACpCX,kBAAmB3uF,EAAMg9B,aAAa2xD,sBAInB,SAAAzuF,GACvB,MAAO,CACHm9B,sBAAuB,SAAC3+B,EAAM4+B,GAAP,OAAwBp9B,EAAS4rF,GAAoCptF,EAAM4+B,KAClG7O,aAAc,SAACH,GAAD,OAAcpuB,EjJ4dR,SAAAouB,GACxB,OAAO,SAACpuB,EAAUwP,GAEd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9BkhB,EAAgBlf,IAAWstB,aAAapO,cAG9C,GAAK/N,KAEGA,GAAgBA,EAAYG,YAFpC,CAQA,IAAI6N,EAAO,aAAOnf,IAAWstB,aAAa0xD,cACtCc,EAAuB5yE,KAAKC,MAAMD,KAAKE,UAAU+R,EAAQA,EAAQ1lB,WAAU,SAAA2lB,GAAM,OAAIA,EAAOjhB,KAAOygB,QACvGkhE,EAAqBzhE,OAAS,CAC1BlgB,GAAI2hF,EAAqBzhE,OAAOlgB,IAGpCwnB,GACkB/G,GACbhkB,MAAK,WACF,IAAMmlF,EAAmB,2BAClBD,GADkB,IAErB1hE,SAAS,IAIb5E,GAAc,CACVC,OAAQtI,EAAYhT,GACpBub,avBhbc,EuBibdC,yBAA0Bvc,GAC1Bwc,mBAAoBkmE,EAAqB3hF,GACzC0b,gBRvVsC,wDQyVjCpd,QAAQ,eAAgBqjF,EAAqB5iF,MAC7CT,QAAQ,cAAeyiB,EAAchiB,MAC1CuK,MAAO,CACH0Z,OAAQ2+D,EACR1+D,MAAO2+D,KAIfvvF,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,kBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,2CACT5P,MAAO,QACP6P,SAAU,gBiJrhBew8E,CAA2Bx9D,KAChEihE,mBAAoB,kBAAMrvF,EjJiUvB,CACHC,KAAMg9B,MiJjUN2xD,yBAA0B,SAAChgE,GAAD,OAAY5uB,EjJ2hBN,SAAA4uB,GACpC,OAAO,SAAC5uB,EAAUwP,GACdxP,EAAS,CACLC,KAAMq9B,GACNjO,eAAgBT,IAGpBuG,GACuBvG,GAClBxkB,MAAK,SAAAklB,GACFtvB,EAAS,CACLC,KAAMs9B,GACNjO,eAGP5c,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMs9B,GACNjO,QAAS,GACT5kB,UAGJ1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,eiJrjByBw8E,CAAuCh9D,KACtF+N,yBAA0B,SAACjkB,GAAD,OAAW1Y,EAAS4rF,GAAuClzE,KACrF01E,gBAAiB,SAACrwD,EAAOC,GAAR,OAAoBh+B,EAAS4rF,GAAyB7tD,EAAOC,KAC9EqwD,uBAAwB,SAACtwD,EAAOrlB,GAAR,OAAkB1Y,EAAS4rF,GAAgC7tD,EAAOrlB,QAumBnF7Y,CAA6CsuF,ICzoBtDqB,G,4MAQFjxD,mBAAqB,SAAAvL,GAAK,OAAI,SAACq7B,EAAS+F,EAAOC,EAAQj8C,GACnD,EAAKna,MAAMsgC,mBAAmBvL,EAAO5a,K,4CAGzC,WACI,MAQIpa,KAAKC,MAPLwxF,EADJ,EACIA,mBACAC,EAFJ,EAEIA,mBACAC,EAHJ,EAGIA,uBAEAhzD,EALJ,EAKIA,yBACAizD,EANJ,EAMIA,kBACAlyD,EAPJ,EAOIA,kBAGJ,OACI,cAACvE,GAAA,EAAD,CACIh6B,MAAO,CACHC,UAAW,IAEf4F,UAAWyQ,YAAIC,GAAOm6E,oBAJ1B,SAMI,eAAC,IAAD,CACIjxF,QAAM,EADV,UAGI,cAACwc,GAAA,EAAD,CACI1O,KAAK,qBACLzN,MAAM,UACN88C,UAAQ,EACRj9C,QAAQ,WACRa,OAAO,SACPsX,MAAOw4E,EACP/kF,MAAOilF,GAA+D,IAArCF,EAAmBvkF,OAAOnC,OAC3D6M,SAAU+mB,IAGd,eAAC,IAAD,CACI/9B,QAAM,EACNQ,UAAW,GAFf,UAII,cAACF,EAAA,EAAD,CACIq6B,WAAS,EACTz6B,QAAQ,QAFZ,uBAMA,cAAC,KAAD,CACIuc,YAAY,wDACZpE,MAAOy4E,EACP5rD,MAAM,OACNluB,SAAU5X,KAAKugC,mBAAmBqtD,IAClC51B,QAASA,QAIjB,eAAC3hD,EAAA,EAAD,CACIC,WAAS,EADb,UAGI,cAACC,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,cAAC,IAAD,UAESuwF,EAIG,cAACzwF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACNxT,MAAM,QAHV,iDAFA,SAYhB,cAACgV,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EACJxV,MAAO,CACHC,UAAW,IANnB,SASI,eAAC,IAAD,CACIgW,cAAc,QADlB,UAGI,cAAC,IAAD,CACIe,YAAa,EADjB,SAGI,cAAC7W,EAAA,EAAD,CACIR,QAAQ,WACRY,QAAS,kBAAMg+B,GAAkB,EAAO,OACxC14B,UAAWyQ,YAAIxS,GAAakB,mBAHhC,sBAQJ,cAAC,IAAD,CACIR,WAAY,EADhB,SAGI,cAACrE,EAAA,EAAD,CACIR,QAAQ,YACRS,MAAM,UACNG,QAASkwF,EACT5qF,UAAWyQ,YAAIxS,GAAakB,mBAJhC,uC,GArHVvE,aAuIXC,gBAxJS,SAAAC,GACpB,MAAO,CACH2vF,mBAAoB3vF,EAAMg9B,aAAa2yD,mBACvCC,mBAAoB5vF,EAAMg9B,aAAa4yD,mBACvCC,uBAAwB7vF,EAAMg9B,aAAa6yD,2BAIxB,SAAA3vF,GACvB,MAAO,CACH09B,kBAAmB,SAACl/B,EAAMm/B,GAAP,OAA6B39B,EAAS4rF,GAAgCptF,EAAMm/B,KAC/FiyD,kBAAmB,kBAAM5vF,GlJkrBtB,SAACA,EAAUwP,GACd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9BkhB,EAAgBlf,IAAWstB,aAAapO,cACxCohE,EAAsBtgF,IAAWstB,aAAagzD,oBAC9CL,EAAqBjgF,IAAWstB,aAAa2yD,mBAC7CC,EAAqBlgF,IAAWstB,aAAa4yD,mBAE/CK,EAA2BvgF,IAAWstB,aAAaa,kBAEvD,GAAyC,IAArC8xD,EAAmBvkF,OAAOnC,QAAkD,IAAlC2mF,EAAmBrmF,IAAIN,OAQrE,GAAKgnF,EA+CA,CAMD,GALAA,EAAyBliE,OAAS,CAC9BlgB,GAAIoiF,EAAyBliE,OAAOlgB,KAInCgT,EAAYG,YAAcH,EAAYhT,KAAOoiF,EAAyBliE,OAAOlgB,GAC9E,OAGJ,IAAIqiF,EAA0BtzE,KAAKC,MAAMD,KAAKE,UAAUmzE,IACxDC,EAAwB9kE,QAAUukE,EAClCO,EAAwB7gF,QAAUugF,EAClCM,EAAwBvC,WAAaxzE,KAErCkb,GACqB66D,GAChB5lF,MAAK,WACFpK,EAAS,CACLC,KAAMw9B,GACNj/B,MAAM,EACNm/B,kBAAmB,OAGvBxI,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,avB9pBM,EuB+pBNC,yBAA0Bvc,GAC1Bwc,mBAAoB4mE,EAAwBriF,GAC5CsJ,MAAO,CACH0Z,OAAQo/D,EACRn/D,MAAOo/D,GAEX3mE,gBRxkBmC,gEQ0kB1Bpd,QAAQ,eAAgB6jF,EAAoBpjF,MAC5CT,QAAQ,cAAeyiB,EAAchiB,QAGtD1M,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,kBAnGK,CAC3B,IAAMmgB,EAAQ,CACVnB,SAAU0hE,EAAoBniF,GAC9Bud,QAASukE,EACTtgF,QAASugF,EACTO,UAAWh2E,KACX4T,OAAQ,CACJlgB,GAAIgT,EAAYhT,KAIxBwnB,GACuB5F,GAClBnlB,MAAK,SAAA2kB,GACF/uB,EAAS,CACLC,KAAMw9B,GACNj/B,MAAM,EACNm/B,kBAAmB,OAGvBxI,GACmB,CACXlM,OAAQtI,EAAYhT,GACpBub,avB3mBM,EuB4mBNC,yBAA0Bvc,GAC1Bwc,mBAAoB2F,EACpB9X,MAAM,2BACCsY,GADF,IAED5hB,GAAIohB,IAER1F,gBR/hBiC,mDQiiBxBpd,QAAQ,WAAY6jF,EAAoBpjF,MACxCT,QAAQ,UAAWyiB,EAAchiB,WAGrDgG,OAAM,SAAAhI,GAEH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,mBAjDtBpP,EAAS,CACLC,KAAM29B,SkJ5rBdW,mBAAoB,SAACvL,EAAO5a,GAAR,OAAmBpY,EAAS4rF,GAAiC54D,EAAO5a,KACxFukB,yBAA0B,SAACjkB,GAAD,OAAW1Y,EAAS4rF,GAAuClzE,QA2I9E7Y,CAA6C2vF,IAEtDx5B,GAAU,CACZW,QAAS,CACL,CAAC,CAAC,OAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAC/B,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,aAAc,cACf,CAAC,CAAC,KAAQ,WAAY,CAAC,KAAQ,UAAW,CAAC,OAAU,MAAO,CAAC,OAAU,MAAO,CAAC,MAAS,KACxF,CAAC,CAAC,OAAU,OAAQ,CAAC,OAAU,UAC/B,CAAC,CAAC,MAAS,IAAK,CAAC,WAAc,KAC/B,CAAC,OAAQ,SACT,CAAC,WAIHjhD,GAASxS,IAAWC,OAAO,CAC7B0sF,mBAAoB,CAChB37E,QAAS,GACT9U,UAAW,GACXoW,aAAc,MClKhB06E,GAAoB,GAwBpBC,G,4MAOFC,cAAgB,WACZ,MASI,EAAKnyF,MARL0iB,EADJ,EACIA,YAEA0vE,EAHJ,EAGIA,mBACAC,EAJJ,EAIIA,kBACA3yD,EALJ,EAKIA,kBAEAD,EAPJ,EAOIA,kBACAxO,EARJ,EAQIA,kBAGJ,GAAkC,IAA9BmhE,EAAmBtnF,OAQvB,OAJAsnF,EAAmB34E,MAAK,SAACgjE,EAAQC,GAC7B,OAAQA,EAAOsV,UAAYvV,EAAOuV,aAG/BI,EAAmBx4E,KAAI,SAAA0X,GAAK,OAC/B,cAAC4J,GAAA,EAAD,CAEIn0B,UAAWyQ,YAAIC,GAAOm6E,oBAF1B,SAKQtgE,EAAMpiB,eAAe,aACA,IAAlBoiB,EAAM3B,QAEL,cAAC,IAAD,UACI,cAAC1uB,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,iEAIR,eAAC,IAAD,CACInU,QAAM,EACN2W,MAAM,OAFV,UAII,eAAC,IAAD,CACIL,cAAc,SACdM,aAAc,GACdD,MAAM,OAHV,UAMI,cAAC,IAAD,CACIH,cAAc,OADlB,S1K2EN,I0KvEcma,EAAM1B,OAAO5tB,KAETsvB,EAAM1B,OAAO/M,WAGT,cAAC,IAAD,CACIvL,MAAO26E,GACP95E,OAAQ85E,GAFZ,SAII,cAACh5E,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IAAK4f,EAAQ,KAA4BC,QACzC73B,MAAO,CACHoW,MAAO,OACP+jC,UAAW42C,GACXz4E,UAAW,eAMvB,cAAC,IAAD,CACIlC,MAAO26E,GACP95E,OAAQ85E,GAFZ,SAII,cAACh5E,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IACI8C,GzK2N9B,EyK3N2EsV,EAAM1B,OAAOxB,cAE9DltB,MAAO,CACHoW,MAAO,OACP+jC,UAAW42C,GACXz4E,UAAW,gBAMtB8X,EAAM1B,OAAOrc,gBACV+d,EAAM1B,OAAOrc,iBAAoH,IAAlG+d,EAAM1B,OAAOrc,eAAevI,WAAU,SAAA6mE,GAAW,OAAKA,EAAY3iE,eAAe,cAGhH,cAAC,GAAD,CACI+1B,UAAW3T,EAAM1B,OAAOqV,UACxBC,SAAU5T,EAAM1B,OAAOsV,SACvB5tB,MAAO26E,GACP95E,OAAQ85E,GACR9sD,YAAY,OAIhB,cAAC,IAAD,CACI7tB,MAAO26E,GACP95E,OAAQ85E,GAFZ,SAII,cAACh5E,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IACIoY,EAAM1B,OAAOrc,eAAe+d,EAAM1B,OAAOrc,eAAevI,WAAU,SAAA6mE,GAAW,OAAKA,EAAY3iE,eAAe,eAAaL,IAE9H3N,MAAO,CACHoW,MAAO,OACP+jC,UAAW42C,GACXz4E,UAAW,iBAS3C,eAAC,IAAD,CACI7Y,QAAM,EACN+E,WAAY,GACZyR,cAAc,OAHlB,UAKI,cAAClW,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,4B1Kdd,I0KgBsBwc,EAAM1B,OAAO5tB,KAAb,UAGOsvB,EAAM1B,OAAOqV,UAHpB,YAGiC3T,EAAM1B,OAAOsV,UAE1C5T,EAAM1B,OAAO/M,WAGT,0BAHJ,UAMOyO,EAAM1B,OAAOxB,aAAaY,YANjC,cAWhB,cAAC/tB,EAAA,EAAD,CACIJ,QAAQ,YACRiU,MAAM,OAFV,SAKSwc,EAAMpiB,eAAe,cAAtB,uBAIoB8M,GAA+BsV,EAAMk+D,aAJzD,sBAEmBxzE,GAA+BsV,EAAM0gE,iB1KvC1E,I0KgDWtvE,EAAY1gB,MACN0gB,EAAYG,YACdH,EAAYhT,KAAO4hB,EAAM1B,OAAOlgB,GAEjC,eAAC,IAAD,CACIyH,cAAc,OACdF,cAAc,SACdvR,WAAY,GAHhB,UAKI,eAACrE,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B3E,KAAK,QACLD,MAAM,YACNG,QAAS,kBAAMwvB,EAAkBK,EAAM5hB,KACvCxO,MAAO,CACHgX,YAAa,IAPrB,mBAWI,cAAC,KAAD,CACIpS,SAAS,QACT5E,MAAO,CACHwE,WAAY,QAIxB,eAACrE,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B3E,KAAK,QACLD,MAAM,UACNG,QAAS,kBAAMg+B,GAAkB,EAAMhhB,KAAKC,MAAMD,KAAKE,UAAU2S,MALrE,iBAQI,cAAC,KAAD,CACIxrB,SAAS,QACT5E,MAAO,CACHwE,WAAY,WAM5B,QAKP4rB,EAAMpgB,QAIH,cAAC,IAAD,CACIvQ,QAAM,EACNQ,UAAW,GACXy8E,wBAAyB,CAACC,OAAQ7hE,GAA8BsV,EAAMpgB,QAAQ9F,QALlF,KAUJinF,GACG3yD,GACAA,EAAkBhwB,KAAO4hB,EAAM5hB,GAE9B,cAAC,GAAD,IAEA,SAxNf4hB,EAAM5hB,Q,4CAgOvB,WAEI,MAUI3P,KAAKC,MATLiP,EADJ,EACIA,gBAEA4iF,EAHJ,EAGIA,oBACAS,EAJJ,EAIIA,yBACAD,EALJ,EAKIA,kBACA3yD,EANJ,EAMIA,kBAEA6yD,EARJ,EAQIA,oBACA9yD,EATJ,EASIA,kBAGJ,OAAK6yD,EAmBD,eAAC,IAAD,CACI3xF,QAAM,EADV,UAGI,eAAC,IAAD,CACIsW,cAAc,SACdM,aAAc,GAFlB,UAII,cAACH,EAAA,EAAD,CACI9V,MAAM,UACNs6B,aAAW,OACXn6B,QAAS8wF,EAHb,SAKI,cAAC,KAAD,MAEJ,cAAC,IAAD,CACI7sF,WAAY,EADhB,SAGI,cAACzE,EAAA,EAAD,CACIK,MAAM,UACNT,QAAQ,KAFZ,2BAIgBgxF,EAAoBpjF,aAK5C,cAACysB,GAAA,EAAD,CACIn0B,UAAWyQ,YAAIC,GAAOm6E,oBAD1B,SAGI,eAAC,IAAD,CACIjxF,QAAM,EADV,UAGI,eAAC,IAAD,CACIsW,cAAc,SACdM,aAAc,GAFlB,U1K5LE,I0KiMMs6E,EAAoBjiE,OAAO5tB,KAEvB6vF,EAAoBjiE,OAAO/M,WAGvB,cAAC,IAAD,CACIvL,MAAO26E,GACP95E,OAAQ85E,GAFZ,SAII,cAACh5E,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IAAK4f,EAAQ,KAA4BC,QACzC73B,MAAO,CACHoW,MAAO,OACP+jC,UAAW42C,GACXz4E,UAAW,eAMvB,cAAC,IAAD,CACIlC,MAAO26E,GACP95E,OAAQ85E,GAFZ,SAII,cAACh5E,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IACI8C,GzK7CtB,EyK6CmE61E,EAAoBjiE,OAAOxB,cAE5EltB,MAAO,CACHoW,MAAO,OACP+jC,UAAW42C,GACXz4E,UAAW,gBAMtBq4E,EAAoBjiE,OAAOrc,gBACxBs+E,EAAoBjiE,OAAOrc,iBAAkI,IAAhHs+E,EAAoBjiE,OAAOrc,eAAevI,WAAU,SAAA6mE,GAAW,OAAKA,EAAY3iE,eAAe,cAG5I,cAAC,GAAD,CACI+1B,UAAW4sD,EAAoBjiE,OAAOqV,UACtCC,SAAU2sD,EAAoBjiE,OAAOsV,SACrC5tB,MAAO26E,GACP95E,OAAQ85E,GACR9sD,YAAY,OAIhB,cAAC,IAAD,CACI7tB,MAAO26E,GACP95E,OAAQ85E,GAFZ,SAII,cAACh5E,GAAA,EAAD,CACIK,eAAa,EACbC,WAAS,EACTL,IACI24E,EAAoBjiE,OAAOrc,eAAes+E,EAAoBjiE,OAAOrc,eAAevI,WAAU,SAAA6mE,GAAW,OAAKA,EAAY3iE,eAAe,eAAaL,IAE1J3N,MAAO,CACHoW,MAAO,OACP+jC,UAAW42C,GACXz4E,UAAW,eAMvC,eAAC,IAAD,CACI7Y,QAAM,EACN+E,WAAY,GACZ6R,aAAc,GAHlB,UAKI,cAACtW,EAAA,EAAD,CACIJ,QAAQ,QADZ,SAGI,4B1KlRV,I0KoRkBgxF,EAAoBjiE,OAAO5tB,KAA3B,UAGO6vF,EAAoBjiE,OAAOqV,UAHlC,YAG+C4sD,EAAoBjiE,OAAOsV,UAEtE2sD,EAAoBjiE,OAAO/M,WAGvB,0BAHJ,UAMOgvE,EAAoBjiE,OAAOxB,aAAaY,YAN/C,cAWhB,cAAC/tB,EAAA,EAAD,CACIJ,QAAQ,YACRiU,MAAM,OAFV,SAKS+8E,EAAoB3iF,eAAe,cAApC,uBAIoB8M,GAA+B61E,EAAoBrC,aAJvE,sBAEmBxzE,GAA+B61E,EAAoBpC,sBAOtF,cAACxuF,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OAFV,SAII,4BAAG,iDAEP,cAAC7T,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACH6kD,WAAY,WACZ5kD,UAAW,EACXoW,aAAc,IANtB,SASKs6E,EAAoB3kE,cAGpB2kE,EAAoB3gF,QAIjB,cAAC,IAAD,CACIvQ,QAAM,EACNi9E,wBAAyB,CAACC,OAAQ7hE,GAA8B61E,EAAoB3gF,QAAQ9F,MAC5FjK,UAAW,KALf,KASJkxF,EAEI,KAEA,cAAC,IAAD,CACIlxF,UAAW,GACXoW,aAAc,EAFlB,SAII,cAAClW,EAAA,EAAD,CACI0F,UAAWyQ,YAAIxS,GAAakB,mBAC5BrF,QAAQ,WACRS,MAAM,UACNG,QAAS,kBAAMg+B,GAAkB,EAAM,OAJ3C,0BAaf4yD,EAIG3yD,EAEI,KAEA,cAAC,GAAD,IANJ,KAQR,cAAC,IAAD,CACI/+B,QAAM,EACNQ,UAAW,GAFf,SAKQpB,KAAKoyF,qBAxOb,cAAC,IAAD,CACIh7E,cAAc,SADlB,SAGI,cAAC,KAAD,CACI7V,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,W,GApRDjV,aA6fhBC,gBAnhBS,SAAAC,GACpB,MAAO,CACHoN,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAE7CyT,YAAa7gB,EAAM2P,KAAKjC,KAExB8iF,kBAAmBxwF,EAAMg9B,aAAawzD,kBACtC3yD,kBAAmB79B,EAAMg9B,aAAaa,kBACtCmyD,oBAAqBhwF,EAAMg9B,aAAagzD,oBACxCO,mBAAoBvwF,EAAMg9B,aAAauzD,mBACvCE,yBAA0BzwF,EAAMg9B,aAAayzD,6BAI1B,SAAAvwF,GACvB,MAAO,CACH09B,kBAAmB,SAACl/B,EAAMm/B,GAAP,OAA6B39B,EAAS4rF,GAAgCptF,EAAMm/B,KAC/FzO,kBAAmB,SAACC,GAAD,OAAmBnvB,EnJ+lBb,SAAAmvB,GAC7B,OAAO,SAACnvB,EAAUwP,GAEd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAC9BkhB,EAAgBlf,IAAWstB,aAAapO,cACxCohE,EAAsBtgF,IAAWstB,aAAagzD,oBAEpD,GAAKnvE,EAAL,CAIA,IAAI8vE,EAAa,aAAOjhF,IAAWstB,aAAauzD,oBAC5CK,EAA4Bh0E,KAAKC,MAAMD,KAAKE,UAAU6zE,EAAcA,EAAcxnF,WAAU,SAAAsmB,GAAK,OAAIA,EAAM5hB,KAAOwhB,QACtHuhE,EAA0B7iE,OAAS,CAC/BlgB,GAAI+iF,EAA0B7iE,OAAOlgB,KAIpCgT,EAAYG,YAAcH,EAAYhT,KAAO+iF,EAA0B7iE,OAAOlgB,KAInFwnB,GACuBhG,GAClB/kB,MAAK,WACF,IAAMumF,EAAwB,2BACvBD,GADuB,IAE1B9iE,SAAS,IAIb5E,GAAc,CACVC,OAAQtI,EAAYhT,GACpBub,avBliBc,EuBmiBdC,yBAA0Bvc,GAC1Bwc,mBAAoBsnE,EAA0B/iF,GAC9C0b,gBRvc4C,iEQycvCpd,QAAQ,eAAgB6jF,EAAoBpjF,MAC5CT,QAAQ,cAAeyiB,EAAchiB,MAC1CuK,MAAO,CACH0Z,OAAQ+/D,EACR9/D,MAAO+/D,KAIf3wF,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,gBmJzpByBw8E,CAAgCz8D,KAC/EqhE,oBAAqB,kBAAMxwF,EnJglBxB,CACHC,KAAMu9B,SmJhFC39B,CAA6CswF,IAEtDz6E,GAASxS,IAAWC,OAAO,CAC7B0sF,mBAAoB,CAChB37E,QAAS,GACT9U,UAAW,GACXoW,aAAc,MCjgBTs5E,I,OAAuB,GACvBG,GAAe,EACfC,GAAiB,EAwDxB0B,G,4MAQFxC,gBAAkB,SAAArwD,GAAK,OAAI,SAACrlB,EAAOslB,GAC/B,EAAK//B,MAAMmwF,gBAAgBrwD,EAAOC,K,EAStCqwD,uBAAyB,SAAAtwD,GAAK,OAAI,SAAArlB,GAC9B,EAAKza,MAAMowF,uBAAuBtwD,EAAOrlB,K,EA0B7Cm4E,sBAAwB,WACpB,MAiBI,EAAK5yF,MAhBLyvB,EADJ,EACIA,OACAojE,EAFJ,EAEIA,aAEApiE,EAJJ,EAIIA,cACA8/D,EALJ,EAKIA,aACAD,EANJ,EAMIA,mBAEAuB,EARJ,EAQIA,oBACAO,EATJ,EASIA,mBACAE,EAVJ,EAUIA,yBAEAQ,EAZJ,EAYIA,+BACAC,EAbJ,EAaIA,gCACA9xD,EAdJ,EAcIA,+BACA+xD,EAfJ,EAeIA,sCACA7xD,EAhBJ,EAgBIA,qCAIA1R,GAAUojE,GACVC,IAKAriE,GAAiB8/D,GAAgBD,GACjCyC,IAICtiE,GAAkB6/D,GACnBrvD,IAKA4wD,GAAuBO,GAAsBE,GAC7CU,IAICnB,GAAwBS,GACzBnxD,K,EASR8xD,cAAgB,WACZ,MAgBI,EAAKjzF,MAfLiP,EADJ,EACIA,gBAEAyT,EAHJ,EAGIA,YACAwwE,EAJJ,EAIIA,WAEAzjE,EANJ,EAMIA,OAEA0jE,EARJ,EAQIA,iBACAC,EATJ,EASIA,eAEAC,EAXJ,EAWIA,gBACAC,EAZJ,EAYIA,uBAEAh1D,EAdJ,EAcIA,qBACAI,EAfJ,EAeIA,yBAGJ,IAAKhc,EACD,OAAO,KAGX,OAAQwwE,GACJ,KA1LoB,EA4LhB,IAAIK,EAAY,aAAO9jE,GASvB,OAPI0jE,IAAqBtC,KACrB0C,EAAe9jE,EAAOxM,QAAO,SAAAyM,GAAK,OAAIA,EAAME,OAAOlgB,KAAOgT,EAAYhT,OACzD+J,MAAK,SAAC+5E,EAAQC,GACvB,OAAQA,EAAOhE,YAAc+D,EAAO/D,eAKxC,eAAC,IAAD,CACI9uF,QAAM,EADV,UAGI,eAACM,EAAA,EAAD,CACIJ,QAAQ,QACRS,MAAM,gBACNwT,MAAM,OAHV,0JAQI,uBACA,oGAIJ,cAAC,IAAD,CACI3T,UAAW,GACXoW,aAAc,GAFlB,SAII,eAAClW,EAAA,EAAD,CACIC,MAAM,UACNT,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5BzE,QAAS,kBAAM68B,GAAqB,EAAM,OAJ9C,UAMI,cAAC,KAAD,CACIx4B,SAAS,QACT5E,MAAO,CACHgX,YAAa,MATzB,oBAiBJ,cAAChC,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,EACTsB,aAAc,IAJtB,SAOI,eAACnB,EAAA,EAAD,W3K5GF,I2K8GUsM,EAAY1gB,MACT0gB,EAAYG,WAEX,cAACvM,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACHqW,aAAc,GAJtB,kBASA,cAAC2jB,GAAA,EAAD,UACI,cAACK,GAAA,EAAD,CACI/6B,WAAS,EADb,SAGI,eAACq3C,GAAA,EAAD,CACI7+B,MAAOo6E,EACPz7E,SAAU+mB,EACVh9B,OAAO,QACPo2C,MACI,cAACC,GAAA,EAAD,CACIomB,WAAY,EACZ1vD,KAAK,mBAPjB,UAWI,cAACupC,GAAA,EAAD,CACIh/B,MAAOke,GADX,yBAKA,cAAC8gB,GAAA,EAAD,CACIh/B,MAAOke,GADX,wCAWpB,KAER,cAAC5gB,EAAA,EAAD,CACIC,GAAI,GACJC,GAAI,GACJC,GAAI,EACJC,GAAI,EAJR,SAMI,eAAC,IAAD,CACI/V,QAAM,EADV,UAGI,cAACM,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN5T,MAAO,CACHqW,aAAc,GAJtB,qBASA,cAAC2jB,GAAA,EAAD,UACI,cAACK,GAAA,EAAD,CACI/6B,WAAS,EADb,SAGI,eAACq3C,GAAA,EAAD,CACI7+B,MAAOm6E,EACPx7E,SAAU+mB,EACVh9B,OAAO,QACPo2C,MACI,cAACC,GAAA,EAAD,CACIomB,WAAY,EACZ1vD,KAAK,qBAPjB,UAWI,cAACupC,GAAA,EAAD,CACIh/B,MAAOg4E,GADX,oBAKA,cAACh5C,GAAA,EAAD,CACIh/B,MAAO63E,GADX,kBAKA,cAAC74C,GAAA,EAAD,CACIh/B,MAAOi4E,GADX,qCAc5B,cAAC/1D,GAAA,EAAD,CACIh6B,MAAO,CACH8mC,UAAW,QAFnB,SAKI,eAACC,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,UACI,eAACL,GAAA,EAAD,WACI,cAACvhC,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,yCAIZ,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,0CAIZ,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,gDAIZ,cAACE,GAAD,CACIU,QAAS,EACTL,UACKsI,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,GAIR3P,UACI,cAAChG,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRkG,UAAWyQ,YAAIxS,GAAaoB,YAHhC,SAKI,gDAMpB,cAAC+hC,GAAA,EAAD,UAEQ,EAAKurD,iBAGb,cAACtrD,GAAA,EAAD,UACI,cAACP,GAAA,EAAD,UACI,cAACQ,GAAA,EAAD,CACInnC,MAAO,CACHyV,gBAAiBC,IAErB0xB,mBAAoB,CAAC,EAAG,GAAI,IAC5BC,MAAOgrD,EAAazoF,OACpB68B,YAAa2rD,EACb5rD,KAAM2rD,EACN7qD,oBAAqB,CACjB,aAAc,iBAElBC,oBAAqB,CACjB,aAAc,aAElBC,YAAa,CACTC,QAAQ,GAEZC,aAAc,EAAKunD,gBAAgB,UACnCtnD,oBAAqB,EAAKunD,uBAAuB,wBAUjF,KA3dqB,EA4djB,OACI,cAAC,GAAD,IAGR,KA/dmB,EAgef,OACI,cAAC,GAAD,IAGR,KAnesB,EAoelB,OACI,cAAC,GAAD,IAGR,KAveoB,EAwehB,OACI,cAAC,GAAD,IAGR,QACI,OAAO,O,EASnBsD,aAAe,WACX,MAaI,EAAK1zF,MAZLiP,EADJ,EACIA,gBACAyT,EAFJ,EAEIA,YAEA+M,EAJJ,EAIIA,OACAojE,EALJ,EAKIA,aACAM,EANJ,EAMIA,iBACAE,EAPJ,EAOIA,gBACAC,EARJ,EAQIA,uBAEAK,EAVJ,EAUIA,wBACA3jE,EAXJ,EAWIA,YACAsO,EAZJ,EAYIA,qBAGJ,IAAKu0D,EACD,OACI,cAAChrD,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC,IAAD,CACImQ,cAAc,SACdhW,UAAW,GACXoW,aAAc,GAHlB,SAKI,cAAC,KAAD,CACIjW,MACK2N,EAIGA,EAAgBgmB,SAASvwB,aAFzBkS,WAWhC,IAAI28E,EAAe,GAEnB,OAAQJ,GACJ,KAAKtC,IACD0C,EAAe9jE,EAAOxM,QAAO,SAAAyM,GAAK,OAAIA,EAAME,OAAOlgB,KAAOgT,EAAYhT,OACzD+J,MAAK,SAAC+5E,EAAQC,GACvB,OAAQA,EAAOhE,YAAc+D,EAAO/D,eAExC,MACJ,KAAKuB,GACDvhE,EAAOhW,MAAK,SAAC+5E,EAAQC,GACjB,OAAQA,EAAOhE,YAAc+D,EAAO/D,eAExC8D,EAAe9jE,EACf,MACJ,KAAKwhE,GACDxhE,EAAOhW,MAAK,SAAC+5E,EAAQC,GACjB,OAAQD,EAAO/D,YAAcgE,EAAOhE,eAExC8D,EAAe9jE,EAMvB,OAA4B,IAAxB8jE,EAAazoF,OAET,cAAC+8B,GAAA,EAAD,UACI,cAAC/gC,GAAA,EAAD,CACIE,QAAS,EADb,SAGI,cAAC/F,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,SACN5T,MAAO,CACHC,UAAW,GACXoW,aAAc,IALtB,oCAgBZg8E,EACKrmF,MAAMmmF,EAAkBC,EAAwBD,EAAkBC,EAAyBA,GAC3F15E,KAAI,SAAA8V,GAAK,OACF,cAAC,GAAD,CACIhN,YAAaA,EAEbgN,MAAOA,EACPkkE,aAAcD,EACd3jE,YAAaA,EACb6jE,gBAAiBv1D,GAJZ5O,EAAMhgB,Q,uDAlgBnC,YAMI8f,EAHIzvB,KAAKC,MADLwvB,YAIO0H,IAOXn3B,KAAK6yF,0B,gCAGT,SAAmBj4D,EAAWC,EAAWhnB,GACrC7T,KAAK6yF,0B,oBAigBT,WAKI,OAFI7yF,KAAKC,MADL83B,sBAQA,cAAC5hB,EAAA,EAAD,CACIC,OAAK,EACLjV,MAAO,CACH+U,QAAS,IAHjB,SAOQlW,KAAKkzF,kBAXN,S,GA9iBEtxF,aAskBfmyF,IANSlyF,aAtnBS,SAAAC,GACpB,MAAO,CACHi2B,sBAAuBj2B,EAAMy1B,sBAAsBQ,sBACnD7oB,gBAAiBpN,EAAMy1B,sBAAsBroB,gBAC7CgpB,oBAAqBp2B,EAAMy1B,sBAAsBW,oBAEjDvV,YAAa7gB,EAAM2P,KAAKjC,KAExB2jF,WAAYrxF,EAAMg9B,aAAaq0D,WAE/BC,iBAAkBtxF,EAAMg9B,aAAas0D,iBACrCC,eAAgBvxF,EAAMg9B,aAAau0D,eAEnC3jE,OAAQ5tB,EAAMg9B,aAAapP,OAC3BojE,aAAchxF,EAAMg9B,aAAag0D,aAEjCpiE,cAAe5uB,EAAMg9B,aAAapO,cAClC8/D,aAAc1uF,EAAMg9B,aAAa0xD,aACjCD,mBAAoBzuF,EAAMg9B,aAAayxD,mBACvC+C,gBAAiBxxF,EAAMg9B,aAAaw0D,gBACpCC,uBAAwBzxF,EAAMg9B,aAAay0D,uBAE3CzB,oBAAqBhwF,EAAMg9B,aAAagzD,oBACxCO,mBAAoBvwF,EAAMg9B,aAAauzD,mBACvCE,yBAA0BzwF,EAAMg9B,aAAayzD,yBAE7CD,kBAAmBxwF,EAAMg9B,aAAawzD,kBACtCb,mBAAoB3vF,EAAMg9B,aAAa2yD,mBACvCC,mBAAoB5vF,EAAMg9B,aAAa4yD,mBACvCC,uBAAwB7vF,EAAMg9B,aAAa6yD,2BAIxB,SAAA3vF,GACvB,MAAO,CACHytB,WAAY,SAACtvB,GAAD,OAAU6B,EpJ5EJ,SAAC7B,GACvB,OAAO,SAAC6B,EAAUwP,GAEd,IAAMke,EAASle,IAAWstB,aAAapP,OAClBle,IAAWstB,aAAag0D,cAEN,IAAlBpjE,EAAO3kB,SACxB/I,EAAS,CACLC,KAAMi8B,KAGV/G,GACgBh3B,GACXiM,MAAK,SAAAsjB,GACF1tB,EAAS,CACLC,KAAMk8B,GACNzO,cAGPhb,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMk8B,GACNzO,OAAQ,GACRhjB,UAGJ1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,yCACT5P,MAAO,QACP6P,SAAU,gBoJ8CKw8E,CAAyBztF,KACxD4yF,+BAAgC,kBAAM/wF,GpJ0xBnC,SAACA,EAAUwP,GACTmvB,MACDA,GAAiB3hC,EACZgU,WACAzS,IAAIqO,KAIJgF,GAAG,eAAe,SAAAC,GACf,IAAI8b,EAAQ9b,EAASsY,MAEfxJ,EAAcnR,IAAWC,KAAKjC,KAC9B6jF,EAAiB7hF,IAAWstB,aAAau0D,eAE3C3jE,EAAM,aAAOle,IAAWstB,aAAapP,SAIb,IAHHA,EAAOzkB,WAAU,SAAA+oF,GAAa,OAAIA,EAAcrkF,KAAOggB,EAAMhgB,QAK9E0jF,IAAmBl8D,KACdxH,EAAMxgB,eAAe,YAElBwgB,EAAMxgB,eAAe,aACA,IAAlBwgB,EAAMC,WAGTD,EAAME,OAAOlgB,KAAOgT,EAAYhT,IAChCggB,EAAME,OAASlN,EACf+M,EAAO5iB,KAAK6iB,GAEZ3tB,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,MAGvByH,GACsBxH,EAAME,OAAOlgB,IAC9BvD,MAAK,SAAAoD,GACFmgB,EAAME,OAASrgB,EACfkgB,EAAO5iB,KAAK6iB,GAEZ3tB,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,QAG1Bhb,OAAM,SAAAhI,QAQfijB,EAAMxgB,eAAe,aAAgC,IAAlBwgB,EAAMC,UACrCD,EAAME,OAAOlgB,KAAOgT,EAAYhT,IAChCggB,EAAME,OAASlN,EACf+M,EAAO5iB,KAAK6iB,GAEZ3tB,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,MAGvByH,GACsBxH,EAAME,OAAOlgB,IAC9BvD,MAAK,SAAAoD,GACFmgB,EAAME,OAASrgB,EACfkgB,EAAO5iB,KAAK6iB,GAEZ3tB,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,QAG1Bhb,OAAM,SAAAhI,YAUnCi0B,GACK/sB,GAAG,iBAAiB,SAAAC,GACjB,IAAI8b,EAAQ9b,EAASsY,MAEjBuD,EAAM,aAAOle,IAAWstB,aAAapP,QACrCwkE,EAAqBxkE,EAAOzkB,WAAU,SAAA+oF,GAAa,OAAIA,EAAcrkF,KAAOggB,EAAMhgB,OAE1D,IAAxBukF,IACKvkE,EAAMxgB,eAAe,YAElBwgB,EAAMxgB,eAAe,aACA,IAAlBwgB,EAAMC,SAGbD,EAAME,OAASH,EAAOwkE,GAAoBrkE,OAC1CH,EAAOwkE,GAAsBvkE,GAE7BD,EAAOrb,OAAO6/E,EAAoB,GAGtClyF,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,MAGvByH,GACsBxH,EAAME,OAAOlgB,IAC9BvD,MAAK,SAAAoD,GACFmgB,EAAME,OAASrgB,EACfkgB,EAAO5iB,KAAK6iB,GAEZ3tB,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,QAG1Bhb,OAAM,SAAAhI,UAOvBi0B,GACK/sB,GAAG,iBAAiB,SAAAC,GAEjB,IAAI6b,EAAM,aAAOle,IAAWstB,aAAapP,QAErCwkE,EAAqBxkE,EAAOzkB,WAAU,SAAA+oF,GAAa,OAAIA,EAAcrkF,KAAOkE,EAAS2W,OACzFkF,EAAOrb,OAAO6/E,EAAoB,GAElClyF,EAAS,CACLC,KAAM6+B,GACNmzD,cAAc,aAAKvkE,aoJp6BnCqR,8BAA+B,kBAAM/+B,EAAS4rF,OAC9CoF,gCAAiC,kBAAMhxF,GpJu7BpC,SAACA,EAAUwP,GACd,IAAMkf,EAAgBlf,IAAWstB,aAAapO,cAEzCkQ,MACDA,GAAuB5hC,EAClBgU,WACAzS,IAAIqO,IACJid,aAAa,WACbC,QAAQ4E,EAAc/gB,KAItBiE,GAAG,eAAe,SAAAC,GACf,IAAI+c,EAAS/c,EAASsY,MAEhBxJ,EAAcnR,IAAWC,KAAKjC,KAC9B4hF,EAAkB5/E,IAAWstB,aAAasyD,gBAE5CzgE,EAAO,aAAOnf,IAAWstB,aAAa0xD,eAIb,IAHH7/D,EAAQ1lB,WAAU,SAAAkpF,GAAc,OAAIA,EAAexkF,KAAOihB,EAAOjhB,QAKnFyhF,IAAoBj6D,KACfvG,EAAOzhB,eAAe,YAEnByhB,EAAOzhB,eAAe,aACA,IAAnByhB,EAAOhB,WAGVgB,EAAOf,OAAOlgB,KAAOgT,EAAYhT,IACjCihB,EAAOf,OAASlN,EAChBgO,EAAQ7jB,KAAK8jB,GAEb5uB,EAAS,CACLC,KAAMg/B,GACNmzD,eAAe,aAAKzjE,MAGxBwG,GACsBvG,EAAOf,OAAOlgB,IAC/BvD,MAAK,SAAAoD,GACFohB,EAAOf,OAASrgB,EAChBmhB,EAAQ7jB,KAAK8jB,GAEb5uB,EAAS,CACLC,KAAMg/B,GACNmzD,eAAe,aAAKzjE,QAG3Bjc,OAAM,SAAAhI,QAQfkkB,EAAOzhB,eAAe,aAAiC,IAAnByhB,EAAOhB,UACvCgB,EAAOf,OAAOlgB,KAAOgT,EAAYhT,IACjCihB,EAAOf,OAASlN,EAChBgO,EAAQ7jB,KAAK8jB,GAEb5uB,EAAS,CACLC,KAAMg/B,GACNmzD,eAAe,aAAKzjE,MAGxBwG,GACsBvG,EAAOf,OAAOlgB,IAC/BvD,MAAK,SAAAoD,GACFohB,EAAOf,OAASrgB,EAChBmhB,EAAQ7jB,KAAK8jB,GAEb5uB,EAAS,CACLC,KAAMg/B,GACNgzD,cAAc,aAAKtjE,QAG1Bjc,OAAM,SAAAhI,YAUnCk0B,GACKhtB,GAAG,iBAAiB,SAAAC,GACjB,IAAI+c,EAAS/c,EAASsY,MAElBwE,EAAO,aAAOnf,IAAWstB,aAAa0xD,cACtC6D,EAAsB1jE,EAAQ1lB,WAAU,SAAAkpF,GAAc,OAAIA,EAAexkF,KAAOihB,EAAOjhB,OAE9D,IAAzB0kF,IACKzjE,EAAOzhB,eAAe,YAEnByhB,EAAOzhB,eAAe,aACA,IAAnByhB,EAAOhB,SAGdgB,EAAOf,OAASc,EAAQ0jE,GAAqBxkE,OAC7Cc,EAAQ0jE,GAAuBzjE,GAE/BD,EAAQtc,OAAOggF,EAAqB,GAGxCryF,EAAS,CACLC,KAAMg/B,GACNmzD,eAAe,aAAKzjE,MAGxBwG,GACsBvG,EAAOf,OAAOlgB,IAC/BvD,MAAK,SAAAoD,GACFohB,EAAOf,OAASrgB,EAChBmhB,EAAQ7jB,KAAK8jB,GAEb5uB,EAAS,CACLC,KAAMg/B,GACNmzD,eAAe,aAAKzjE,QAG3Bjc,OAAM,SAAAhI,UAOvBk0B,GACKhtB,GAAG,iBAAiB,SAAAC,GAEjB,IAAI8c,EAAO,aAAOnf,IAAWstB,aAAa0xD,cAEtC6D,EAAsB1jE,EAAQ1lB,WAAU,SAAAkpF,GAAc,OAAIA,EAAexkF,KAAOkE,EAAS2W,OAC7FmG,EAAQtc,OAAOggF,EAAqB,GAEpCryF,EAAS,CACLC,KAAMg/B,GACNmzD,eAAe,aAAKzjE,aoJrkCpCuQ,+BAAgC,kBAAMl/B,EAAS4rF,OAC/CqF,sCAAuC,kBAAMjxF,GpJwlC1C,SAACA,EAAUwP,GACd,IAAMhC,EAAOgC,IAAWC,KAAKjC,KACvBsiF,EAAsBtgF,IAAWstB,aAAagzD,oBAE/CjxD,MACDA,GAA6B7hC,EACxBgU,WACAzS,IAAIqO,IACJid,aAAa,YACbC,QAAQgmE,EAAoBniF,KAI5BiE,GAAG,eAAe,SAAAC,GACf,IAAI0d,EAAQ1d,EAASsY,MAEjBmF,EAAO,aAAO9f,IAAWstB,aAAauzD,qBAId,IAHH/gE,EAAQrmB,WAAU,SAAAmtE,GAAa,OAAIA,EAAczoE,KAAO4hB,EAAM5hB,QAI/E4hB,EAAM1B,OAAOlgB,KAAOH,EAAKG,IACzB4hB,EAAM1B,OAASrgB,EACf8hB,EAAQxkB,KAAKykB,GAEbvvB,EAAS,CACLC,KAAMk/B,GACNmzD,eAAe,aAAKhjE,MAGxB6F,GACsB5F,EAAM1B,OAAOlgB,IAC9BvD,MAAK,SAAAoD,GACF+hB,EAAM1B,OAASrgB,EACf8hB,EAAQxkB,KAAKykB,GAEbvvB,EAAS,CACLC,KAAMk/B,GACNmzD,eAAe,aAAKhjE,QAG3B5c,OAAM,SAAAhI,WAQ3Bm0B,GACKjtB,GAAG,iBAAiB,SAAAC,GACjB,IAAI0d,EAAQ1d,EAASsY,MAEjBmF,EAAO,aAAO9f,IAAWstB,aAAauzD,oBACtCkC,EAAqBjjE,EAAQrmB,WAAU,SAAAmtE,GAAa,OAAIA,EAAczoE,KAAO4hB,EAAM5hB,MAEvF4hB,EAAM1B,OAASyB,EAAQijE,GAAoB1kE,OAC3CyB,EAAQijE,GAAsBhjE,EAE9BvvB,EAAS,CACLC,KAAMk/B,GACNmzD,eAAe,aAAKhjE,QAKhCuP,GACKjtB,GAAG,iBAAiB,SAAAC,GAEjB,IAAIyd,EAAO,aAAO9f,IAAWstB,aAAauzD,oBAEtCkC,EAAqBjjE,EAAQrmB,WAAU,SAAAmtE,GAAa,OAAIA,EAAczoE,KAAOkE,EAAS2W,OAC1F8G,EAAQjd,OAAOkgF,EAAoB,GAEnCvyF,EAAS,CACLC,KAAMk/B,GACNmzD,eAAe,aAAKhjE,aoJnqCpC8P,qCAAsC,kBAAMp/B,EAAS4rF,OAErDrvD,qBAAsB,SAAC/9B,EAAMg+B,GAAP,OAAuBx8B,EAAS4rF,GAAmCptF,EAAMg+B,KAC/Fo1D,wBAAyB,SAACjkE,GAAD,OAAW3tB,EpJwPL,SAAA2tB,GACnC,OAAO,SAAC3tB,EAAUwP,GAEd,IAAM4/E,EAAkB5/E,IAAWstB,aAAasyD,gBAEhDpvF,EAAS,CACLC,KAAM88B,GACNrO,cAAef,IAGnBwH,GACiBi6D,EAAiBzhE,GAC7BvjB,MAAK,SAAAukB,GACF3uB,EAAS,CACLC,KAAM+8B,GACNrO,eAGPjc,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAM+8B,GACNrO,QAAS,GACTjkB,UAGJ1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,eoJrRuBw8E,CAAsCj+D,KACnFM,YAAa,SAACX,GAAD,OAAattB,EpJmGP,SAAAstB,GACvB,OAAO,SAACttB,EAAUwP,GAEd,IAAMmR,EAAcnR,IAAWC,KAAKjC,KAGpC,GAAKmT,KAEGA,GAAgBA,EAAYG,YAFpC,CAQA,IAAI4M,EAAM,aAAOle,IAAWstB,aAAapP,QACrC8kE,EAAsB91E,KAAKC,MAAMD,KAAKE,UAAU8Q,EAAOA,EAAOzkB,WAAU,SAAA0kB,GAAK,OAAIA,EAAMhgB,KAAO2f,QAClGklE,EAAoB3kE,OAAS,CACzBlgB,GAAI6kF,EAAoB3kE,OAAOlgB,IAGnCwnB,GACiB7H,GACZljB,MAAK,WACF,IAAMqoF,EAAkB,2BACjBD,GADiB,IAEpB5kE,SAAS,IAIb5E,GAAc,CACVC,OAAQtI,EAAYhT,GACpBub,avB5Fc,EuB6FdC,yBAA0Bvc,GAC1Bwc,mBAAoBopE,EAAoB7kF,GACxC0b,gBRNqC,+BQQhCpd,QAAQ,cAAeumF,EAAoB9lF,MAChDuK,MAAO,CACH0Z,OAAQ6hE,EACR5hE,MAAO6hE,KAIfzyF,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,iBACT5P,MAAO,UACP6P,SAAU,cAGjBsD,OAAM,SAAAhI,GACH1K,EAAS,CACLC,KAAMwY,GACNtJ,QAAS,0CACT5P,MAAO,QACP6P,SAAU,gBoJ1Jaw8E,CAA0Bt+D,KAE7DqP,yBAA0B,SAACjkB,GAAD,OAAW1Y,EAAS4rF,GAAuClzE,KAErF01E,gBAAiB,SAACrwD,EAAOC,GAAR,OAAoBh+B,EAAS4rF,GAAyB7tD,EAAOC,KAC9EqwD,uBAAwB,SAACtwD,EAAOrlB,GAAR,OAAkB1Y,EAAS4rF,GAAgC7tD,EAAOrlB,QAokBnF7Y,CAA6C+wF,I,4MAQxDiB,aAAe,SAAAlkE,GACX,EAAK1vB,MAAM4zF,aAAalkE,I,4CAG5B,WAAU,IAAD,OAEL,EAMI3vB,KAAKC,MALL0iB,EADJ,EACIA,YACAgN,EAFJ,EAEIA,MAEAM,EAJJ,EAIIA,YACA6jE,EALJ,EAKIA,gBAGJ,OACI,eAAChsD,GAAA,EAAD,CACItL,OAAK,EADT,UAGI,cAACz1B,GAAA,EAAD,UACI,cAAC7F,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QAFZ,SAIKmb,GAA+B0T,EAAM+/D,iBAG9C,cAAC3oF,GAAA,EAAD,CACI5F,MAAO,CACH6U,SAAU,KAFlB,SAKI,eAAC,IAAD,CACIpV,QAAM,EACNwW,cAAc,OAFlB,UAII,cAAC+5E,GAAA,EAAD,CACIzvF,QAAS,kBAAM,EAAKmyF,aAAalkE,IADrC,SAGI,cAACzuB,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACRS,MAAM,UACNkkD,QAAM,EAJV,SAMK91B,EAAMjhB,S3K9iBb,I2KkjBEiU,EAAY1gB,MACT0gB,EAAYG,cAEV6M,EAAMxgB,eAAe,YAElBwgB,EAAMxgB,eAAe,aACA,IAAlBwgB,EAAMC,SAIb,eAAC,IAAD,CACIxuB,UAAW,GADf,UAGI,eAACE,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B3E,KAAK,QACLD,MAAM,YACNG,QAAS,kBAAMuuB,EAAYN,EAAMhgB,KACjCxO,MAAO,CACHgX,YAAa,IAPrB,mBAWI,cAAC,KAAD,CACIpS,SAAS,QACT5E,MAAO,CACHwE,WAAY,QAIxB,eAACrE,EAAA,EAAD,CACIR,QAAQ,WACRkG,UAAWyQ,YAAIxS,GAAakB,mBAC5B3E,KAAK,QACLD,MAAM,UACNG,QAAS,kBAAMoyF,GAAgB,EAAMp1E,KAAKC,MAAMD,KAAKE,UAAU+Q,MALnE,iBAQI,cAAC,KAAD,CACI5pB,SAAS,QACT5E,MAAO,CACHwE,WAAY,WAM5B,UAIhB,cAACoB,GAAA,EAAD,CACI5F,MAAO,CACH6U,SAAU,KAFlB,SAKI,cAAC9U,EAAA,EAAD,CACIJ,QAAQ,QACRiU,MAAM,OACN0wC,QAAM,EAHV,SAKK91B,EAAMxC,gBAGf,cAACpmB,GAAA,EAAD,CACI5F,MAAO,CACH6U,SAAU,KAFlB,SAKI,cAAC9U,EAAA,EAAD,CACI6T,MAAM,OACNjU,QAAQ,QACR2kD,QAAM,EAHV,S3KxnBM,I2K8nBE91B,EAAME,OAAO5tB,KAAb,UAGO0tB,EAAME,OAAOqV,UAHpB,YAGiCvV,EAAME,OAAOsV,UAE1CxV,EAAME,OAAO/M,WAGT,0BAHJ,UAMO6M,EAAME,OAAOxB,aAAaY,YANjC,qB,GAnITrtB,cCnqBjB+nE,GAAY,CACdwpB,WD4B4B,EC1B5BC,iBAAkBnC,GAClBoC,eAAgBl8D,GAEhBi6D,gBAAiBj6D,GACjBs5D,kBAAmBQ,GAEnBvhE,OAAQ,GACRojE,cAAc,EAEdQ,gBAAiB,EACjBC,uBAAwB,EAExB7iE,cAAe,KACf8/D,aAAc,GACdD,oBAAoB,EAEpBuB,oBAAqB,KACrBO,mBAAoB,GACpBE,0BAA0B,EAE1B7B,iBAAkB,EAClBC,wBAAyB,EAEzBzB,gBAAiB,GACjBC,gBAAiB,GACjBG,kBAAmB,KACnBF,kBAAkB,EAClB5wD,YAAa,KAEboxD,iBAAkB,GAClBC,sBAAuB,GACvBC,oBAAqB,CAACzkF,IAAK,IAC3B0kF,mBAAmB,EACnB3wD,aAAc,KAEdkzD,mBAAmB,EACnB3yD,kBAAmB,KACnB8xD,mBAAoB,GACpBC,mBAAoB,CAACrmF,IAAK,IAC1BsmF,wBAAwB,GA4Ob+C,GAzOO,WAAgC,IAA/B5yF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACjD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKikB,GACD,OAAO,2BACAjkB,IADP,IAEIj6C,OAAQ5tB,EAAM4tB,OACdojE,aAAchxF,EAAMgxF,aACpBM,iBAAkBtxF,EAAMsxF,iBACxBC,eAAgBvxF,EAAMuxF,eAEtBC,gBAAiBxxF,EAAMwxF,gBACvBC,uBAAwBzxF,EAAMyxF,yBAEtC,KAAK3F,GACD,OAAO,2BACA9rF,GADP,IAEI4tB,OAAQ,GACRojE,cAAc,IAEtB,KAAKlF,GACD,OAAO,2BACA9rF,GADP,IAEI4tB,OAAO,aAAKpE,EAAOoE,QACnBojE,cAAc,IAEtB,KAAKlF,GACD,OAAO,2BACA9rF,GADP,IAEI4tB,OAAQ,GACRojE,cAAc,IAEtB,KAAKlF,GACD,OAAO,2BACA9rF,GADP,IAEIqxF,WAAY7nE,EAAO9qB,KDnDF,EADD,EC0DhBg+B,YAAalT,EAAOkT,YAEhB9f,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOkT,cAEjC,KAEJ0wD,gBACI5jE,EAAOkT,YAEHlT,EAAOkT,YAAY9vB,KAEnB,GAERygF,gBACI7jE,EAAOkT,YAEHlT,EAAOkT,YAAYrR,YAEnB,GAERiiE,kBAAkB,EAClBE,kBAAmB,OAE3B,KAAK1B,GACD,OAAO,2BACA9rF,GADP,IAEIstF,kBAAkB,IAE1B,KAAKxB,GACD,OAAO,2BACA9rF,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,QAE9B,KAAK20E,GACD,OAAO,2BACA9rF,GADP,IAEIqxF,WD5Fe,EC6FfziE,cAAehS,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOoF,gBAChD6/D,oBAAoB,IAE5B,KAAK3C,GACD,OAAO,2BACA9rF,GADP,IAEI0uF,aAAa,aAAKllE,EAAOqF,SACzB4/D,oBAAoB,IAE5B,KAAK3C,GACD,OAAO,2BACAjkB,IADP,IAEIj6C,OAAQ5tB,EAAM4tB,OACdojE,aAAchxF,EAAMgxF,aACpBM,iBAAkBtxF,EAAMsxF,iBACxBC,eAAgBvxF,EAAMuxF,eAEtBC,gBAAiBxxF,EAAMwxF,gBACvBC,uBAAwBzxF,EAAMyxF,yBAEtC,KAAK3F,GACD,OAAO,2BACA9rF,GADP,IAEIqxF,WAAY7nE,EAAO9qB,KDnHD,EADH,EC0Hf4+B,aAAc9T,EAAO8T,aAEjB1gB,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO8T,eAEjC,KAEJwwD,iBAAkBtkE,EAAO8T,aAErB9T,EAAO8T,aAAa1wB,KAEpB,GAEJmhF,sBAAuBvkE,EAAO8T,aAE1B9T,EAAO8T,aAAajS,YAEpB,GAEJ2iE,oBAAqBxkE,EAAO8T,aAExB9T,EAAO8T,aAAajuB,QAEpB,CAAC9F,IAAK,IAEV0kF,mBAAmB,IAE3B,KAAKnC,GACD,OAAO,2BACA9rF,GADP,IAEIiuF,mBAAmB,IAE3B,KAAKnC,GACD,OAAO,2BACA9rF,GADP,IAEIqxF,WD1JgB,EC2JhBrB,oBAAqBpzE,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO+F,iBACtDkhE,0BAA0B,IAElC,KAAK3E,GACD,OAAO,2BACA9rF,GADP,IAEIuwF,mBAAmB,aAAK/mE,EAAOgG,SAC/BihE,0BAA0B,IAElC,KAAK3E,GACD,OAAO,2BACA9rF,GADP,IAEIqxF,WDzKe,EC0KfrB,oBAAqB,KACrBO,mBAAoB,GACpBE,0BAA0B,EAE1BD,mBAAmB,EACnBZ,mBAAoB,CAACrmF,IAAK,MAElC,KAAKuiF,GACD,OAAO,2BACA9rF,GADP,IAEIwwF,kBAAmBhnE,EAAO9qB,KAC1Bm/B,kBAAmBjhB,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOqU,oBACpD8xD,mBAAoBnmE,EAAO9qB,KAEvB8qB,EAAOqU,kBAEHrU,EAAOqU,kBAAkBzS,QAF7B,cAIWprB,EAAMgwF,oBAAoBpjF,MAErC,GAEJgjF,mBAAoBpmE,EAAO9qB,MAEvB8qB,EAAOqU,kBAEHrU,EAAOqU,kBAAkBxuB,QAI7B,CAAC9F,IAAK,IAEVsmF,wBAAwB,IAEhC,KAAK/D,GACD,OAAO,2BACA9rF,GADP,IAEI6vF,wBAAwB,IAEhC,KAAK/D,GACD,OAAO,2BACA9rF,GADP,IAEIguF,oBAAqBxkE,EAAO0J,QAAU44D,GAAqCtiE,EAAOmV,MAAQ3+B,EAAMguF,oBAChG4B,mBAAoBpmE,EAAO0J,QAAU44D,GAA2CtiE,EAAOmV,MAAQ3+B,EAAM4vF,qBAE7G,KAAK9D,GACD,OAAO,2BACA9rF,GADP,IAEI4tB,OAAO,aAAKpE,EAAO2oE,iBAE3B,KAAKrG,GACD,OAAO,2BACA9rF,GADP,IAEI0uF,aAAa,aAAKllE,EAAO8oE,kBAEjC,KAAKxG,GACD,OAAO,2BACA9rF,GADP,IAEIuwF,mBAAmB,aAAK/mE,EAAOgpE,kBAEvC,KAAK1G,GACD,OAAO,2BACA9rF,GADP,IAEIwxF,gBAAkC,WAAjBhoE,EAAOyU,MAAqBzU,EAAO0U,QAAUl+B,EAAMwxF,gBACpE5C,iBAAmC,YAAjBplE,EAAOyU,MAAsBzU,EAAO0U,QAAUl+B,EAAM4uF,mBAE9E,KAAK9C,GACD,OAAO,2BACA9rF,GADP,IAEIyxF,uBAAyC,WAAjBjoE,EAAOyU,MAAqBzU,EAAOrS,MAAQnX,EAAMyxF,uBACzE5C,wBAA0C,YAAjBrlE,EAAOyU,MAAsBzU,EAAOrS,MAAQnX,EAAM6uF,0BAEnF,QACI,OAAO7uF,IC3Rb6nE,GAAY,CACdrnB,sBAAuB,KAEvBnvB,cAAe,GACf0vB,sBAAsB,EACtBC,qBAAqB,GAmCV6xC,GAhCc,WAAgC,IAA/B7yF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACxD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKtlB,GACD,OAAO,2BACAviD,GADP,IAEIwgD,sBAAuBh3B,EAAOg3B,wBAEtC,KAAK+B,GACD,OAAO,2BACAviD,GADP,IAEI+gD,sBAAsB,EACtBC,qBAAqB,IAE7B,KAAKuB,GACD,OAAO,2BACAviD,GADP,IAEI+gD,sBAAsB,EACtBC,qBAAqB,EACrB3vB,cAAc,aAAK7H,EAAO6H,iBAElC,KAAKkxB,GACD,OAAO,2BACAviD,GADP,IAEIqxB,cAAc,aAAK7H,EAAO6H,iBAElC,QACI,OAAOrxB,IClCb6nE,GAAY,CACd5rC,cAAe62D,GAA+BlH,SAAWkH,GAAgClH,QACzFzvD,aAAa,GA8BF42D,GA3BiB,WAAgC,IAA/B/yF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC3D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK5kC,GACD,OAAO,2BACAjjC,GADP,IAEIi8B,cAAezS,EAAOnc,eAAe,iBAAmBmc,EAAOyS,cAAgBj8B,EAAMi8B,cACrFE,YAAa3S,EAAO2S,cAE5B,KAAK6pD,GAAiBoD,kBAClB,OAAO,2BACAppF,GADP,IAEIi8B,cACoB,aAAhBzS,EAAO5c,MAAuC,cAAhB4c,EAAO5c,KAEjC4c,EAAOrS,MAEPnX,EAAMi8B,cAEdE,aAAa,IAErB,QACI,OAAOn8B,ICfb6nE,GAA6B,CAC/B30D,SAAU21E,GAAa+C,QACvBoH,SAAUjK,GAAa6C,QACvB7vD,SAAUitD,GAAa4C,QACvB5vD,UAAWitD,GAAc2C,QACzBr0C,gBAAiBA,GAAgBq0C,SActBqH,GAXW,WAAkD,IAAjDjzF,EAAgD,uDAAxC6nE,GAAWr+C,EAA6B,uCACvE,OAAIA,EAAOrpB,OAAS6lF,GAAiBoD,kBAC1B,2BACAppF,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,QAGnBnX,GC7BT6nE,GAAY,CACdpT,qBAAsB,KAEtBC,iBAAiB,EACjBC,oBAAqB,GACrBC,kBAAmB,GACnBC,kBAAmB,KACnBC,uBAAuB,EACvBC,qBAAsB,GACtBC,mBAAoB,IA0FTk+B,GAvFmB,WAAgC,IAA/BlzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC7D,OAAQA,EAAOrpB,MACX,KAAKu2D,GACD,OAAO,2BACA12D,GADP,IAEIy0D,qBAAsB73C,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOxN,mBAE/D,KAAKkxE,GACD,OAAO,2BACAltF,GADP,IAEIy0D,qBAAqB,2BACdz0D,EAAMy0D,sBADO,IAEhB,CAACjrC,EAAOd,KAAMc,EAAOrS,QAEzB09C,kBACK70D,EAAM60D,kBAIHrrC,EAAOd,MAAQ5b,GAEX9M,EAAM60D,kBAELrrC,EAAOrS,MAAM9J,eAAeP,KAIxB9M,EAAM60D,mBAIuE,IAA1ErrC,EAAOrS,MAAMhO,WAAU,SAAAwtD,GAAG,OAAIA,EAAI9oD,KAAO7N,EAAM60D,kBAAkBhnD,MAE7D7N,EAAM60D,kBAENrrC,EAAOrS,MAAMqS,EAAOrS,MAAMhO,WAAU,SAAAwtD,GAAG,OAAIA,EAAI9oD,KAAO7N,EAAM60D,kBAAkBhnD,OAVtF,KARR,OAoBhB,KAAK6oD,GACD,IAAMD,EAA6BjtC,EAAOitC,2BAE1C,OAAIA,EACO,2BACAz2D,GADP,IAEIy0D,qBAAqB,2BACdz0D,EAAMy0D,sBADO,IAEhB,CAACjrC,EAAO5c,MAAO4c,EAAOrS,UAIvB,2BACAnX,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,QAGlC,KAAKu/C,GACD,OAAO,2BACA12D,GADP,IAEIy0D,qBAAqB,2BACdz0D,EAAMy0D,sBADO,IAEhB,CAACjrC,EAAO80B,WAAY90B,EAAOrS,UAGvC,KAAKu/C,GACD,OAAO,2BACA12D,GADP,IAEI60D,kBAAmBrrC,EAAOqrC,kBAC1BC,sBAAuBtrC,EAAOsrC,wBAEtC,KAAK4B,GACD,OAAO,2BACA12D,GADP,IAEI00D,iBAAkB10D,EAAM00D,gBACxBC,oBAAqB,GACrBC,kBAAmB,KAE3B,KAAK8B,GACD,OAAO,2BACA12D,GADP,IAEI80D,uBAAwB90D,EAAM80D,sBAC9BC,qBAAuB/0D,EAAM80D,sBAA2D,GAAnC90D,EAAM60D,kBAAkBkB,SAC7Ef,mBAAqBh1D,EAAM80D,sBAAyD,GAAjC90D,EAAM60D,kBAAkBoB,SAEnF,QACI,OAAOj2D,IC7Fb6nE,GAAY,CACdtQ,sBAAuB,KAEvBnG,QAAS,GACT/lC,YAAa,GACbxoB,aAAc,GACdC,eAAgB,GAEhB4xD,iBAAiB,EACjBC,oBAAqB,GACrBC,kBAAmB,GACnBC,kBAAmB,KACnBC,uBAAuB,EACvBC,qBAAsB,GACtBC,mBAAoB,IA2GTm+B,GAxGmB,WAAgC,IAA/BnzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC7D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKjP,GAED,IAAIE,EAAgBl8C,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOvM,MAAMmW,WAO3D,OAJK0lC,EAAczrD,eAAe,4BAC9ByrD,EAAcT,uBAAyBl+C,GAAsC,IAG1E,2BACAna,GADP,IAEIu3D,sBAAuBuB,EACvB1H,QAAU5nC,EAAOvM,MAAM5P,eAAe,WAAamc,EAAOvM,MAAMm0C,QAAU,GAC1E/lC,YAAa7B,EAAOvM,MAAM5P,eAAe,eAAiBmc,EAAOvM,MAAMoO,YAAc,GACrFxoB,aAAc2mB,EAAOvM,MAAMmW,SAASvwB,aACpCC,eAAgB0mB,EAAOvM,MAAMmW,SAAStwB,iBAE9C,KAAK81D,GACD,IAAMH,EAA8BjvC,EAAOivC,4BAE3C,OAAIA,EACO,2BACAz4D,GADP,IAEIu3D,sBAAsB,2BACfv3D,EAAMu3D,uBADQ,IAEjB,CAAC/tC,EAAO5c,MAAO4c,EAAOrS,UAKvB,2BACAnX,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,QAGlC,KAAKi8E,GACD,MAAmB,aAAf5pE,EAAOd,IACA,2BACA1oB,GADP,IAEIu3D,sBAAuB36C,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOrS,QACxDtU,aAAc2mB,EAAOrS,MAAMtU,aAC3BC,eAAgB0mB,EAAOrS,MAAMrU,eAC7B+xD,kBACKrrC,EAAOrS,MAAM9J,eAAeP,KAIxB9M,EAAM60D,mBAIyG,IAA5GrrC,EAAOrS,MAAP,WAAyChO,WAAU,SAAAsC,GAAM,OAAIA,EAAOoC,KAAO7N,EAAM60D,kBAAkBhnD,MAE/F2b,EAAOrS,MAAP,WAAyCqS,EAAOrS,MAAP,WAAyChO,WAAU,SAAAsC,GAAM,OAAIA,EAAOoC,KAAO7N,EAAM60D,kBAAkBhnD,OAE5I7N,EAAM60D,kBAVd,OAcL,2BACA70D,GADP,IAEI,CAACwpB,EAAOd,KAAMc,EAAOrS,QAGjC,KAAKyhD,GACD,OAAO,2BACA54D,GADP,IAEI60D,kBAAmBrrC,EAAOqrC,kBAC1BC,sBAAuBtrC,EAAOsrC,wBAEtC,KAAK8D,GACD,OAAO,2BACA54D,GADP,IAEI00D,iBAAkB10D,EAAM00D,gBACxBC,oBAAqB,GACrBC,kBAAmB,KAE3B,KAAKgE,GACD,OAAO,2BACA54D,GADP,IAEI80D,uBAAwB90D,EAAM80D,sBAC9BC,qBAAuB/0D,EAAM80D,sBAA2D,GAAnC90D,EAAM60D,kBAAkBkB,SAC7Ef,mBAAqBh1D,EAAM80D,sBAAyD,GAAjC90D,EAAM60D,kBAAkBoB,SAEnF,KAAK2C,GACD,OAAO,2BACA54D,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,QAE9B,KAAKyhD,GACD,OAAO,2BACA54D,GADP,IAEI6C,aAA+B,iBAAjB2mB,EAAO0J,MAA2B1J,EAAO/pB,MAAQO,EAAM6C,aACrEC,eAAiC,mBAAjB0mB,EAAO0J,MAA6B1J,EAAO/pB,MAAQO,EAAM8C,iBAEjF,QACI,OAAO9C,ICxHb6nE,GAAY,CACd1+C,OAAQ,KAERojB,eAAgB,KAChByR,sBAAsB,EACtBC,2BAA2B,GAsChBo1C,GAnCe,WAAgC,IAA/BrzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACzD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GAEX,KAAK7oB,GACD,OAAO,2BACAh/C,GADP,IAEImpB,OAAQK,EAAOL,SAEvB,KAAK61B,GACD,OAAO,2BACAh/C,GADP,IAEIusC,eAAgB,GAChByR,sBAAsB,EACtBC,2BAA2B,IAEnC,KAAKe,GACD,OAAO,2BACAh/C,GADP,IAEIusC,eAAgB/iB,EAAO+iB,eACvByR,sBAAsB,EACtBC,2BAA2B,IAEnC,KAAKe,GACD,OAAO,2BACAh/C,GADP,IAEIusC,eAAgB/iB,EAAO+iB,iBAG/B,QACI,OAAOvsC,ICtCb6nE,GAAY,CACdj4C,aAAc,GACdgrC,oBAAoB,EACpBgB,yBAAyB,EAEzBb,iBAAkB,EAClBC,wBAAyB,EAEzBzB,yBAA0BU,GAC1BT,eAAgB,EAChBE,YAAa,OACbD,cAAeS,GAEf2B,sBAAuB,GACvBZ,0BAA0B,EAE1Be,eAAe,EAEfC,yCAAyC,EAEzCrC,oBAAqB,IAqEV05B,GAlEa,WAAgC,IAA/BtzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACvD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK3K,GACD,OAAO,2BACAl9D,GADP,IAEI4vB,aAAc,GACdgrC,oBAAoB,EACpBgB,yBAAyB,IAEjC,KAAKsB,GACD,OAAO,2BACAl9D,GADP,IAEI4vB,aAAa,aAAKpG,EAAOoG,cACzBgqC,oBAAoB,aAAKpwC,EAAOoG,cAChCgrC,oBAAoB,EACpBgB,yBAAyB,IAEjC,KAAKsB,GACD,OAAO,2BACAl9D,GADP,IAEIi7D,0BAA2Bj7D,EAAMi7D,yBACjCY,sBAAuB77D,EAAMi7D,yBAA2B,GAAKj7D,EAAM67D,sBACnEd,iBAAkB,EAClBnB,oBAAqBpwC,EAAOowC,sBAEpC,KAAKsD,GACD,OAAO,2BACAl9D,GADP,IAEI,CAACwpB,EAAO5c,MAAO4c,EAAOrS,MACtByiD,oBAAqBpwC,EAAOowC,oBAC5BmB,iBAAkB,IAE1B,KAAKmC,GACD,OAAO,2BACAl9D,GADP,IAEI+6D,iBAAkBvxC,EAAO0U,UAEjC,KAAKg/B,GACD,OAAO,2BACAl9D,GADP,IAEIg7D,wBAAyB38B,SAAS7U,EAAO6sC,KAAM,IAC/C0E,iBAAkB,IAE1B,KAAKmC,GACD,OAAO,2BACAl9D,GADP,IAEI4vB,aAAcpG,EAAOoG,aACrBgqC,oBAAqBpwC,EAAOowC,sBAEpC,KAAKsD,GACD,OAAO,2BACAl9D,GADP,IAEIg8D,cAAexyC,EAAOrS,QAE9B,KAAK+lD,GACD,OAAO,2BACAl9D,GADP,IAEIi8D,wCAAyCzyC,EAAOrS,QAExD,QACI,OAAOnX,ICjFb6nE,GAAY,CACd7X,sBAAsB,EAEtBllC,MAAOhe,GAAqB,GAC5Bs2B,UAAW,GACXC,SAAU,GACVnY,MAAO,GACP+kC,SAAU,GAEVC,iBAAiB,EACjBL,WnGYgC,EmGXhCC,oBAAqB,MA0CVyjC,GAvCiB,WAAgC,IAA/BvzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC3D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKpX,GACD,OAAO,2BACAoX,IADP,IAEI7X,sBAAuBhwD,EAAMgwD,uBAErC,KAAKS,GACD,OAAO,2BACAzwD,GADP,IAEI,CAACwpB,EAAO5Q,MAAMyD,OAAOzP,MAAO4c,EAAO5Q,MAAMyD,OAAOlF,QAExD,KAAKs5C,GACD,OAAO,2BACAzwD,GADP,IAEIkwD,iBAAiB,IAEzB,KAAKO,GACD,OAAO,2BACAzwD,GADP,IAEI6vD,WAAYrmC,EAAOf,OAEnBqC,MAAOtB,EAAOf,SAAWinC,GAA0B5iD,GAAqB,GAAK9M,EAAM8qB,MACnFsY,UAAW5Z,EAAOf,SAAWinC,GAA0B,GAAK1vD,EAAMojC,UAClEC,SAAU7Z,EAAOf,SAAWinC,GAA0B,GAAK1vD,EAAMqjC,SACjEnY,MAAO1B,EAAOf,SAAWinC,GAA0B,GAAK1vD,EAAMkrB,MAC9D+kC,SAAUzmC,EAAOf,SAAWinC,GAA0B,GAAK1vD,EAAMiwD,SAEjEC,gBAAiB1mC,EAAOf,SAAWinC,IAAkC1vD,EAAMkwD,gBAE3EJ,oBAAqBtmC,EAAOqnC,YAEpC,QACI,OAAO7wD,IC9Cb6nE,GAAY,CACdhK,2BAA2B,EAE3BC,iBAAkB,GAClBC,qBAAsB,GACtB7yC,MAAO,GACPkmC,QAAS,GACTvuD,aAAc,GACdC,eAAgB,GAEhBwK,UAAW,KACX0wD,kBAAkB,EAClBxwD,aAAc,KACd0wD,qBAAqB,EAErBP,WtFWuB,EsFVvBC,eAAgB,EAEhBK,eAAgB,GAChBE,4BAA4B,EAE5BC,kBAAkB,EAClBQ,UtFL2B,GsFmFhB40B,GA3EsB,WAAgC,IAA/BxzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAChE,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKhJ,GACD,OAAO,2BACAgJ,IADP,IAEIhK,2BAA4B79D,EAAM69D,4BAE1C,KAAKgB,GACD,OAAO,2BACA7+D,GADP,IAEI,CAACwpB,EAAO5Q,MAAMyD,OAAOzP,MAAO4c,EAAO5Q,MAAMyD,OAAOlF,QAExD,KAAK0nD,GACD,OAAO,2BACA7+D,GADP,IAEIo+D,kBAAkB,IAE1B,KAAKS,GACD,OAAO,2BACA7+D,GADP,IAEI4+D,UAAWp1C,EAAOf,OAElBq1C,iBtF1B6B,IsF0BXt0C,EAAOf,OAA2C,GAAKzoB,EAAM89D,iBAC/EC,qBtF3B6B,IsF2BPv0C,EAAOf,OAA2C,GAAKzoB,EAAM+9D,qBACnF7yC,MtF5B6B,IsF4BtB1B,EAAOf,OAA2C,GAAKzoB,EAAMkrB,MACpEroB,atF7B6B,IsF6Bf2mB,EAAOf,OAA2C,GAAKzoB,EAAM6C,aAC3EC,etF9B6B,IsF8Bb0mB,EAAOf,OAA2C,GAAKzoB,EAAM8C,eAE7EwK,UtFhC6B,IsFgClBkc,EAAOf,OAA2C,KAAOzoB,EAAMsN,UAC1EE,atFjC6B,IsFiCfgc,EAAOf,OAA2C,KAAOzoB,EAAMwN,aAE7EmwD,WtFnC6B,IsFmCjBn0C,EAAOf,OtFhCR,EsFgCiEe,EAAOnc,eAAe,QAAUmc,EAAOnrB,KAAO2B,EAAM29D,WAChIC,etFpC6B,IsFoCbp0C,EAAOf,OAA2C,EAAIe,EAAOnc,eAAe,YAAcmc,EAAOlrB,SAAW0B,EAAM49D,eAElIQ,iBtFtC6B,IsFsCX50C,EAAOf,QAAmDzoB,EAAMo+D,mBAE1F,KAAKS,GACD,OAAO,2BACA7+D,GADP,IAEIsN,UtFvCiB,IsFuCNkc,EAAOnrB,KAA6B,KAAO2B,EAAMsN,UAC5D0wD,iBtFxCiB,IsFwCCx0C,EAAOnrB,MAAoC2B,EAAMg+D,iBACnExwD,atFxCqB,IsFwCPgc,EAAOnrB,KAAiC,KAAO2B,EAAMwN,aACnE0wD,oBtFzCqB,IsFyCA10C,EAAOnrB,MAAwC2B,EAAMk+D,sBAElF,KAAKW,GACD,OAAO,2BACA7+D,GADP,IAEIsN,UtF/CiB,IsF+CNkc,EAAOnrB,KAA6BmrB,EAAO9Y,KAAO1Q,EAAMsN,UACnE0wD,iBtFhDiB,IsFgDCx0C,EAAOnrB,MAAqC2B,EAAMg+D,iBACpExwD,atFhDqB,IsFgDPgc,EAAOnrB,KAAiCmrB,EAAO9Y,KAAO1Q,EAAMwN,aAC1E0wD,oBtFjDqB,IsFiDA10C,EAAOnrB,MAAyC2B,EAAMk+D,sBAEnF,KAAKW,GACD,OAAO,2BACA7+D,GADP,IAEIi+D,eAAe,2CAAD,OAA6CnxD,GAA7C,OACdqxD,4BAA4B,IAEpC,KAAKU,GACD,OAAO,2BACA7+D,GADP,IAEIi+D,eAAgB,KAExB,KAAKY,GACD,OAAO,2BACA7+D,GADP,IAEIm+D,4BAA4B,IAEpC,QACI,OAAOn+D,ICzGb6nE,GAAY,CACd/mD,cAAe,KACfmK,KAAM,KAEN7d,gBAAiB,KACjB6oB,uBAAuB,EACvBC,yBAAyB,EAEzBN,aAAc,KACdC,YAAa,KACbO,qBAAqB,GAgDVq9D,GA7CsB,WAAgC,IAA/BzzF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAChE,OAAQA,EAAOrpB,MACX,KAAKizF,GACD,OAAO,2BACApzF,GADP,IAEI8gB,cAAe0I,EAAO1I,cACtB1T,gBAAiB,KACjB6oB,uBAAuB,EACvBC,yBAAyB,IAEjC,KAAKk9D,GACD,OAAO,2BACApzF,GADP,IAEI41B,aAAcpM,EAAOoM,aACrBC,YAAarM,EAAOqM,cAE5B,KAAKu9D,GACD,OAAO,2BACApzF,GADP,IAEIoN,gBAAiB,KACjB6oB,uBAAuB,EACvBC,yBAAyB,EACzBE,qBAAqB,IAE7B,KAAKg9D,GACD,OAAO,2BACApzF,GADP,IAEIoN,gBAAiBwP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO6C,eAClD4J,uBAAuB,EACvBC,yBAAyB,EACzBE,oBAAqB5M,EAAO4M,sBAEpC,KAAKg9D,GACD,OAAO,2BACApzF,GADP,IAEIoN,gBAAgB,2BACTpN,EAAMoN,iBADE,IAEX,CAACoc,EAAOd,KAAMc,EAAOrS,UAGjC,QACI,OAAOnX,ICpDb6nE,GAAY,CACd1+C,OAAQ,KAGR20B,cvLkM2D,EuLhM3DH,iBAAiB,EACjBC,iBAAiB,EACjBC,iBAAiB,EAEjB9E,mCAAoC,KACpChB,0CAA0C,EAC1CC,+CAA+C,GAgDpC07C,GA7CoC,WAAgC,IAA/B1zF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC9E,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKhpB,GACD,OAAO,2BACAgpB,IADP,IAEI1+C,OAAQK,EAAO6D,MAEvB,KAAKwxB,GACD,OAAO,2BACA7+C,GADP,IAEI+4C,mCAAoC,KACpChB,0CAA0C,EAC1CC,+CAA+C,IAEvD,KAAK6G,GACD,OAAO,2BACA7+C,GADP,IAEI+4C,mCAAoCn8B,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOf,SACrEsvB,0CAA0C,EAC1CC,+CAA+C,IAEvD,KAAK6G,GACD,OAAO,2BACA7+C,GADP,IAEI,CAACwpB,EAAO5Q,MAAMyD,OAAOzP,MAAO4c,EAAO5Q,MAAMyD,OAAOq8B,UAExD,KAAKmG,GACD,OAAO,2BACA7+C,GADP,IAEI89C,cAAet0B,EAAO5Q,MAAMyD,OAAOlF,MACnCwmC,iBAAiB,EACjBC,iBAAiB,IAEzB,KAAKiB,GACD,OAAO,2BACA7+C,GADP,IAEI+4C,mCAAoCn8B,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOu1B,cAE7E,QACI,OAAO/+C,ICzDb6nE,GAAY,CACdl7C,cAAe,GACfg0C,sBAAsB,EACtBC,qBAAqB,EACrB/6B,KAAM,EACNC,YAAa,EAEbwzB,WAAY,GACZyH,cAAc,EACdK,qBAAsB,IAsDXuyB,GAnDc,WAAgC,IAA/B3zF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACxD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKrG,GACD,OAAO,2BACAxhE,GADP,IAEI2gE,sBAAsB,EACtBC,qBAAqB,EACrBj0C,cAAe,KAEvB,KAAK60C,GACD,OAAO,2BACAxhE,GADP,IAEI2gE,sBAAsB,EACtBC,qBAAqB,EACrBj0C,cAAenD,EAAOnc,eAAe,iBAAtB,aAA6Cmc,EAAOmD,eAAiB,KAE5F,KAAK60C,GACD,OAAO,2BACAxhE,GADP,IAEI6lC,KAAMrc,EAAO0U,UAErB,KAAKsjC,GACD,OAAO,2BACAxhE,GADP,IAEI8lC,YAAatc,EAAOrS,QAE5B,KAAKqqD,GACD,OAAO,2BACAxhE,GADP,IAEIs5D,WAAY9vC,EAAO8vC,WACnB8H,qBAAqB,aAAK53C,EAAO43C,wBAEzC,KAAKI,GACD,OAAO,2BACAxhE,GADP,IAEI+gE,aAAcv3C,EAAOmiC,MACrB2N,WAAa9vC,EAAOmiC,MAAa3rD,EAAMs5D,WAAX,GAC5B8H,qBAAqB,aAAK53C,EAAO43C,wBAEzC,KAAKI,GACD,OAAO,2BACAxhE,GADP,IAEI2sB,cAAc,aAAKnD,EAAOmD,iBAElC,QACI,OAAO3sB,IC3Db6nE,GAAY,CACdpF,aAAc,GACdJ,qBAAqB,EACrBC,oBAAoB,EAEpBhJ,WAAY,GACZyH,cAAc,EACd6B,oBAAqB,GAErB/8B,KAAM,EACNC,YAAa,GAsDF8tD,GAnDmB,WAAgC,IAA/B5zF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC7D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKvE,GACD,OAAO,2BACAtjE,GADP,IAEIyiE,aAAc,GACdJ,qBAAqB,EACrBC,oBAAoB,IAE5B,KAAKgB,GACD,OAAO,2BACAtjE,GADP,IAEIyiE,aAAa,aAAKj5C,EAAOi5C,cACzBJ,qBAAqB,EACrBC,oBAAoB,IAE5B,KAAKgB,GACD,OAAO,2BACAtjE,GADP,IAEI6lC,KAAMrc,EAAO0U,UAErB,KAAKolC,GACD,OAAO,2BACAtjE,GADP,IAEI8lC,YAAatc,EAAOrS,QAE5B,KAAKmsD,GACD,OAAO,2BACAtjE,GADP,IAEIs5D,WAAY9vC,EAAO8vC,WACnBsJ,oBAAqBp5C,EAAOo5C,sBAEpC,KAAKU,GACD,OAAO,2BACAtjE,GADP,IAEI+gE,aAAcv3C,EAAOmiC,MACrB2N,WAAa9vC,EAAOmiC,MAAa3rD,EAAMs5D,WAAX,GAC5BsJ,oBAAqBp5C,EAAOo5C,sBAEpC,KAAKU,GACD,OAAO,2BACAtjE,GADP,IAEIyiE,aAAa,aAAKj5C,EAAOi5C,gBAEjC,QACI,OAAOziE,IC5Db6nE,GAAY,CACdl6D,QAAS,KAETpC,QAAS,GACTkpE,eAAe,EACfof,gBAAgB,EAEhBv6B,WAAY,GACZyH,cAAc,EACd+yB,eAAgB,GAEhBjuD,KAAM,EACNC,YAAa,IA4DFiuD,GAzDa,WAAgC,IAA/B/zF,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACvD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKgV,GACD,OAAO,2BACAhV,IADP,IAEIl6D,QAASiP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO7b,YAElD,KAAKkvE,GACD,OAAO,2BACA78E,GADP,IAEIuL,QAAS,GACTkpE,eAAe,EACfof,gBAAgB,IAExB,KAAKhX,GACD,OAAO,2BACA78E,GADP,IAEIuL,QAAQ,aAAKie,EAAOje,SACpBkpE,eAAe,EACfof,gBAAgB,IAExB,KAAKhX,GACD,OAAO,2BACA78E,GADP,IAEI6lC,KAAMrc,EAAO0U,UAErB,KAAK2+C,GACD,OAAO,2BACA78E,GADP,IAEI8lC,YAAatc,EAAOrS,MACpB0uB,KAAM,IAEd,KAAKg3C,GACD,OAAO,2BACA78E,GADP,IAEIs5D,WAAY9vC,EAAO8vC,WACnBw6B,eAAe,aAAKtqE,EAAOsqE,kBAEnC,KAAKjX,GACD,OAAO,2BACA78E,GADP,IAEI+gE,aAAcv3C,EAAOmiC,MACrB2N,WAAa9vC,EAAOmiC,MAAa3rD,EAAMs5D,WAAX,GAC5Bw6B,eAAe,aAAKtqE,EAAOsqE,kBAEnC,KAAKjX,GACD,OAAO,2BACA78E,GADP,IAEIuL,QAAQ,aAAKie,EAAOje,WAE5B,QACI,OAAOvL,ICrEb6nE,GAAY,CACdnpE,MAAM,EACN2Q,QAAS,GACT5P,MAAO,GACP6P,SAAU,IA2BC0kF,GAxBiB,WAAgC,IAA/Bh0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC3D,OAAQA,EAAOrpB,MACX,KAAKwY,GACD,OAAO,2BACA3Y,GADP,IAEItB,MAAM,IAEd,KAAKia,GACD,OAAO,2BACA3Y,GADP,IAEItB,MAAM,EACN2Q,QAASma,EAAOna,QAChB5P,MAAO+pB,EAAO/pB,MACd6P,SAAUka,EAAOla,WAEzB,KAAKqJ,GACD,OAAO,eACAkvD,IAEX,QACI,OAAO7nE,IC1Bb6nE,GAAY,CACdhjC,UAAW,KAEX5a,WAAY,GACZub,kBAAkB,EAClBD,mBAAmB,EAEnBM,KAAM,EACNC,YAAa,IA8CFmuD,GA3CgB,WAAgC,IAA/Bj0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC1D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK1gC,GACD,OAAO,2BACA0gC,IADP,IAEIhjC,UAAWjoB,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO9b,SAEpD,KAAKy5B,GACD,OAAO,2BACAnnC,GADP,IAEIiqB,WAAY,GACZub,kBAAkB,EAClBD,mBAAmB,IAE3B,KAAK4B,GACD,OAAO,2BACAnnC,GADP,IAEIiqB,WAAW,aAAKT,EAAOS,YACvBub,kBAAkB,EAClBD,mBAAmB,IAE3B,KAAK4B,GACD,OAAO,2BACAnnC,GADP,IAEIiqB,WAAW,aAAKT,EAAOS,cAE/B,KAAKkd,GACD,OAAO,2BACAnnC,GADP,IAEI6lC,KAAMrc,EAAO0U,UAErB,KAAKiJ,GACD,OAAO,2BACAnnC,GADP,IAEI8lC,YAAatc,EAAOrS,QAE5B,QACI,OAAOnX,IClDb6nE,GAAY,CACdjkC,YAAY,EACZC,WAAY,GACZC,UAAW,IA0BAowD,GAvB+B,WAAgC,IAA/Bl0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACzE,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKssB,GACD,OAAO,2BACAn0F,GADP,IAEI4jC,YAAY,EACZC,WAAYjnB,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOqa,aAC7CC,UAAWlnB,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOsa,cAEpD,KAAKqwD,GACD,OAAO,2BACAn0F,GADP,IAEI4jC,YAAY,EACZC,WAAY,GACZC,UAAW,KAEnB,QACI,OAAO9jC,ICxBb6nE,GAAY,CACdpD,WAAY,KAEZ94C,YAAa,GACbg5C,mBAAmB,EACnBD,oBAAoB,EAEpBpL,WAAY,GACZyH,cAAc,EAEdl7B,KAAM,EACNC,YAAa,GAEbs/B,4BAA4B,EAC5B1F,mBAAoB,GACpB2F,uBxFwB2C,GwF6ChC+uB,GAlEiB,WAAgC,IAA/Bp0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC3D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKnC,GACD,OAAO,2BACAmC,IADP,IAEIpD,WAAY7nD,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOvM,UAErD,KAAKyoD,GACD,OAAO,2BACA1lE,GADP,IAEI2rB,YAAa,GACbg5C,mBAAmB,EACnBD,oBAAoB,IAE5B,KAAKgB,GACD,OAAO,2BACA1lE,GADP,IAEI2rB,YAAY,aAAKnC,EAAOmC,aACxBg5C,mBAAmB,EACnBD,oBAAoB,IAE5B,KAAKgB,GACD,OAAO,2BACA1lE,GADP,IAEI8lC,YAAatc,EAAO0U,UAE5B,KAAKwnC,GACD,OAAO,2BACA1lE,GADP,IAEI8lC,YAAatc,EAAOrS,QAE5B,KAAKuuD,GACD,OAAO,2BACA1lE,GADP,IAEIs5D,WAAYt5D,EAAM+gE,aAAe,GAAK/gE,EAAMs5D,WAC5CyH,cAAe/gE,EAAM+gE,eAE7B,KAAK2E,GACD,OAAO,2BACA1lE,GADP,IAEI,CAACwpB,EAAO5Q,MAAMyD,OAAOzP,MAAO4c,EAAO5Q,MAAMyD,OAAOlF,QAExD,KAAKuuD,GACD,OAAO,2BACA1lE,GADP,IAEIolE,4BAA6BplE,EAAMolE,2BACnC1F,mBAAoB,GACpB2F,uBxF5B+B,IwF8BvC,KAAKK,GACD,OAAO,2BACA1lE,GADP,IAEI2rB,YAAY,aAAKnC,EAAOmC,eAEhC,KAAK+5C,GACD,OAAO,2BACA1lE,GADP,IAEIqlE,uBAAwB77C,EAAO5b,SAEvC,QACI,OAAO5N,IC/Eb6nE,GAAY,CACdnpE,MAAM,EACNiP,QAAS,KACT+8D,mBAAoB,GACpBl3C,YAAa,KACbw9C,WAAY,GACZD,a/EgBqC,G+EuC1BsjB,GApDmB,WAAgC,IAA/Br0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC7D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKiV,GACD,OAAO,2BACAjV,IADP,IAEInpE,MAAOsB,EAAMtB,OAErB,KAAKo+E,GACD,OAAO,2BACA98E,GADP,IAEI2N,QAASiP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO7b,UAC1C+8D,mBACIlhD,EAAO7b,QAAQI,MAAMV,eAAe,sBAEhCopC,OAAOjtB,EAAO7b,QAAQI,MAAM28D,mBAAmB7gE,QAAQ,IAAI6sC,iBAE3D,GAERljB,YAAarZ,GAAsC,GACnD62D,WAAY,KAEpB,KAAK8L,GACD,OAAO,2BACA98E,GADP,IAEI,CAACwpB,EAAO5Q,MAAMyD,OAAOzP,MAAO4c,EAAO5Q,MAAMyD,OAAOlF,QAExD,KAAK2lE,GACD,OAAO,2BACA98E,GADP,IAEIwzB,YACIhK,EAAO7gB,MAAwB,iBAAhB6gB,EAAO7gB,KAElBkwD,IAEgB,OAAhBrvC,EAAO7gB,KAEH,KAEA6gB,EAAO7gB,KAAKX,YAEhC,KAAK80E,GACD,OAAO,2BACA98E,GADP,IAEI+wE,aAAcvnD,EAAO5b,SAE7B,QACI,OAAO5N,IC3Db6nE,GAAY,CACdj2C,0BAA2B,EAC3BjkB,QAAS,MAsBE2mF,GAnBwB,WAAgC,IAA/Bt0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAClE,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKD,GACD,OAAO,2BACAC,IADP,IAEIl6D,QAASiP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAO7b,YAElD,KAAKi6D,GACD,OAAO,2BACA5nE,GADP,IAEI,CAACwpB,EAAO5Q,MAAMyD,OAAOzP,MAAO4c,EAAO5Q,MAAMyD,OAAOlF,QAExD,QACI,OAAOnX,ICpBb6nE,GAAY,CACd/L,aAAc,GACd2uB,eAAe,EACf1uB,cAAc,GA+BHw4B,GA5BmB,WAAgC,IAA/Bv0F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCAC7D,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK2sB,GACD,OAAO,2BACAx0F,GADP,IAEI87D,aAAc,GACd2uB,eAAe,EACf1uB,cAAc,IAEtB,KAAKy4B,GACD,OAAO,2BACAx0F,GADP,IAEI87D,aAActyC,EAAOxM,OACrBytE,eAAe,EACf1uB,cAAc,IAEtB,KAAKy4B,GACD,OAAO,2BACAx0F,GADP,IAEI87D,aAActyC,EAAOxM,SAE7B,QACI,OAAOhd,IC7BNy0F,GAAgC,gCAChCC,GAAyC,yCCFhD7sB,GAAY,CACd90C,qBAAsB,GACtB4hE,6BAA6B,EAC7BC,4BAA4B,GA0BjBC,GAvB2B,WAAgC,IAA/B70F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACrE,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAKitB,GACD,OAAO,2BACA90F,GADP,IAEI+yB,qBAAsB,GACtB4hE,6BAA6B,EAC7BC,4BAA4B,IAEpC,KAAKE,GACD,OAAO,2BACA90F,GADP,IAEI+yB,qBAAsBnW,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOuJ,uBACvD4hE,6BAA6B,EAC7BC,4BAA4B,IAEpC,QACI,OAAO50F,ICLN+0F,GAAqC,qCAQrCC,GAA8B,8BAC9BC,GAAuC,uCAkYvCC,GAAuC,uCC1Z9CrtB,GAAY,CACdstB,iBAAkB,KAElBrtB,4BAA4B,EAE5BC,oBAAqB,KACrBC,cAAe,KACfC,qBAAqB,EAErBC,mBAAmB,EACnBC,wCAAyC,KAEzCC,cAAc,EACdC,oBAAoB,EACpBC,mBAAmB,EAEnB8sB,eAAgB,CAEZ5sB,WzFyEsC,EyFtEtCE,YAAa,IAEbC,iBAAkB,GAClBC,wBAAyB,GACzBysB,iBAAkB,KAElBvsB,wBAAyB,GACzBC,mBAAoB,GACpBG,wBAAyB,GACzBE,wBAAyB,GAEzBC,qBAAsB,GAGtBp1B,WAAY,GAEZq1B,mBAAoB,GAEpBC,uBAAwB,KAGxBrpB,yBAA0B,GAE1BD,0BAA2B,GAE3BupB,sBAAuB,CAACjgE,IAAK,IAG7BmgE,kBzF0BgC,EyFvBhCC,0BAA2B,KAC3BC,gCAAgC,EAEhCC,mBAAoB,EACpBC,ezF4BmB,EyF1BnBC,6BAA6B,EAE7BurB,qBAAsB,GACtBvoB,mBAAmB,EAEnB/C,4BAA4B,EAE5BnoD,UAAW,OAoJJ0zE,GAhJc,WAAgC,IAA/Bv1F,EAA8B,uDAAtB6nE,GAAWr+C,EAAW,uCACxD,OAAQA,EAAOrpB,MACX,KAAKi6B,GACD,OAAOytC,GACX,KAAK2tB,GACD,OAAO,2BACAx1F,GADP,IAEIm1F,iBAAkB3rE,EAAOisE,UAEjC,KAAKD,GACD,OAAO,2BACAx1F,GADP,IAEIkoE,mBAAmB,IAE3B,KAAKstB,GACD,GAAIhsE,EAAOnc,eAAe,SACtB,OAAO,2BACArN,GADP,IAEIioE,qBAAqB,EACrBE,wCAAyC,OAK7C,IAAK3+C,EAAOnc,eAAe,QACvB,OAAOw6D,GAGX,OAAQr+C,EAAOnrB,MACX,KDxEoB,ECyEhB,IAAMsP,EAAUiP,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOw+C,gBAEjD,OAAO,2BACAhoE,GADP,IAEI+nE,oBAAqBp6D,EACrBq6D,cAAer6D,EACfs6D,qBAAqB,EACrBE,wCAAyC,KAEzCitB,eAAe,2BACRp1F,EAAMo1F,gBADC,IAGV1sB,YACI/6D,EAAQN,eAAe,UAEnBM,EAAQ0tC,OAER,GAGRstB,iBACIh7D,EAAQN,eAAe,eAEnBM,EAAQgjB,YAER,GAERi4C,wBACIj7D,EAAQN,eAAe,eAEnBM,EAAQ0d,YAER,GAERgqE,iBACI1nF,EAAQI,MAAMV,eAAe,eAEzBM,EAAQI,MAAMylB,YAEd,KAERs1C,wBACIn7D,EAAQI,MAAMV,eAAe,gBAEzBopC,OAAO9oC,EAAQI,MAAM08D,aAAa5gE,QAAQ,IAAI6sC,iBAE9C,GAERqyB,mBACIp7D,EAAQI,MAAMV,eAAe,gBAEzBopC,OAAO9oC,EAAQI,MAAMyoC,aAAa3sC,QAAQ,IAAI6sC,iBAE9C,GAERwyB,wBACIv7D,EAAQI,MAAMV,eAAe,sBAEzBopC,OAAO9oC,EAAQI,MAAM28D,mBAAmB7gE,QAAQ,IAAI6sC,iBAEpD,GAER0yB,wBACIz7D,EAAQI,MAAMV,eAAe,sBAEzBM,EAAQI,MAAM48D,mBAEd,GAGRtB,qBACI17D,EAAQI,MAAMV,eAAe,gBAGrBM,EAAQI,MAAM08D,aAAe,EAEzB,OAEA,QAGR,GAGRjB,sBACK77D,EAAQI,MAAM68D,iBAIXj9D,EAAQI,MAAM68D,iBAFd,CAACrhE,IAAK,QAM1B,KDrK0B,ECsKtB,OAAO,2BACAvJ,GADP,IAEIioE,qBAAqB,EACrBE,wCAAyC,OAEjD,QACI,OAAON,GAIvB,KAAK2tB,GACD,OAAO,2BACAx1F,GADP,IAEIgoE,cAAeprD,KAAKC,MAAMD,KAAKE,UAAU0M,EAAOksE,mBAExD,QACI,OAAO11F,ICjNbw/B,GAAuC,CACzC+yC,uBAAuB,GAuBZojB,GApBkB,WAAoF,IAAnF31F,EAAkF,uDAAlDw/B,GAAchW,EAAoC,uCAChH,OAAQA,EAAOrpB,MACX,KAAKkyD,GAAwBogB,sBACzB,IAAMmjB,EAAmDpsE,EACzD,OAAO,2BACAxpB,GADP,IAEI0yE,iBAAkBkjB,EAA4BljB,iBAC9CH,uBAAuB,IAE/B,KAAKlgB,GAAwBsgB,uBACzB,OAAO,2BACA3yE,GADP,IAEI0yE,sBAAkB1wD,EAClBuwD,uBAAuB,IAE/B,QACI,OAAOvyE,K,S1CvBPksF,K,qDAAAA,Q,KAaL,IAYK2J,I,SAAAA,K,kDAAAA,E,kDAAAA,E,oDAAAA,E,gDAAAA,E,oCAAAA,E,mEAAAA,Q,KAeL,I2C/BKC,I,SAAAA,K,kDAAAA,E,4CAAAA,E,8CAAAA,E,4EAAAA,E,oDAAAA,E,gDAAAA,E,qDAAAA,Q,KA4CL,IClDKC,I,SAAAA,K,4EAAAA,E,wDAAAA,E,sDAAAA,E,sEAAAA,E,+DAAAA,Q,KAoCL,ICjBKC,GAyBAC,I,SAzBAD,K,mDAAAA,E,yDAAAA,E,oEAAAA,Q,cAyBAC,K,yCAAAA,E,2CAAAA,E,kDAAAA,Q,KAgCZ,IAGMC,GAAoD,CACtDC,sBAAuB,CACnBr7C,YAAa,GACbe,eAAgB,GAChBb,eAAgB,GAChBK,OAAQ,OACRE,UAAW,CAAC,IACZ/S,iBAAkB,CACdyS,SAAU,OACVC,SAAU,GACVC,SAAU,GACVpxC,SAAU,GACVqxC,SAAU,IAEd3S,eAAgB,CACZwS,SAAU,OACVC,SAAU,GACVC,SAAU,GACVpxC,SAAU,GACVqxC,SAAU,IAEd7tC,KAAM,CACF,CACI4D,WAAY,EACZnE,IAAK,MAIjBopF,sBAAuBJ,GAAcK,cACrCC,oBAAqBN,GAAcK,cACnC35C,sCAAsC,GAIpC65C,GAAoD,CACtD3yD,YAAY,EACZvlC,KAAM43F,GAAqBO,SAE3B7/E,MAAO,EACP8/E,OAAQ,EAERC,aAAa,EACbC,eAAe,GAIbn3D,GAA6B,CAC/Bo3D,2BAA2B,EAC3BC,qBAnDsD,GAoDtDC,qBAAsBZ,GACtBa,qBAAsBR,IAuLXS,GAhKQ,WAAkD,IAAjDh3F,EAAgD,uDAAxCw/B,GAAchW,EAA0B,uCACpE,OAAQA,EAAOrpB,MACX,KAAK+rF,GAAc+K,cACf,IAAMC,EAA2C1tE,EACjD,OAAO,2BACAxpB,GADP,IAEIm3F,WAAYD,EAAoBC,WAChCP,2BAA0E,IAA/CM,EAAoBE,wBAAyCp3F,EAAM42F,4BAEtG,KAAKd,GAAsBuB,aACvB,IAAMC,EAAyC9tE,EAC/C,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACdR,IADa,IAEhB3yD,YAAa5jC,EAAM+2F,qBAAqBnzD,WACxC2zD,SAAUD,EAAmB/gF,UAGzC,KAAKu/E,GAAsB0B,UACvB,IAAMC,EAAmCjuE,EACzC,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACd/2F,EAAM+2F,sBADO,IAEhBz+E,OAAQm/E,EAAgBn/E,WAGpC,KAAKw9E,GAAsB4B,WACvB,IAAMC,EAAqCnuE,EAC3C,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACd/2F,EAAM+2F,sBADO,IAEhB14F,KAAMs5F,EAAiBt5F,SAGnC,KAAKy3F,GAAsB8B,0BACvB,IAAMC,EAAmEruE,EACzE,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACd/2F,EAAM+2F,sBADO,IAEhBQ,SAAUM,EAAgCC,kBAGtD,KAAKhC,GAAsBiC,cACvB,IAAMC,EAA2CxuE,EACjD,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACd/2F,EAAM+2F,sBADO,IAEhB,CAACiB,EAAoBprF,MAAOorF,EAAoB7gF,UAG5D,KAAK2+E,GAAsBmC,YACvB,IAAMC,EAAuC1uE,EAC7C,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACd/2F,EAAM+2F,sBADO,IAEhBL,YAAawB,EAAkBC,WAG3C,KAAKrC,GAAsBsC,cACvB,IAAMC,EAA2C7uE,EACjD,OAAO,2BACAxpB,GADP,IAEI+2F,qBAAqB,2BACd/2F,EAAM+2F,sBADO,IAEhBJ,cAAe0B,EAAoBC,aAY/C,KAAKvC,GAAsBwC,gBACvB,IAAMC,EAA6EhvE,EACnF,OAAO,2BACAxpB,GADP,IAEI82F,qBAAqB,2BACd92F,EAAM82F,sBADO,IAEhB,CAAC0B,EAAqC5rF,MAAO4rF,EAAqCrhF,UAG9F,KAAK4+E,GAAsB0C,eACvB,IAAMC,EAA6ClvE,EACnD,OAAO,2BACAxpB,GADP,IAEI82F,qBAAqB,2BACd92F,EAAM82F,sBADO,IAEhBV,sBAAqD,qBAA9BsC,EAAqBr6F,KACtC23F,GAAc2C,iBAAmB34F,EAAM82F,qBAAqBV,sBAClEE,oBAAmD,mBAA9BoC,EAAqBr6F,KACpC23F,GAAc2C,iBAAmB34F,EAAM82F,qBAAqBR,wBAG9E,KAAKP,GAAsB6C,uBACvB,IAAMC,EAA6DrvE,EACnE,OAAO,2BACAxpB,GADP,IAEI82F,qBAAqB,2BACd92F,EAAM82F,sBADO,IAEhBgC,kCAAyE,qBAAtCD,EAA6Bx6F,KAC1Dw6F,EAA6BE,eAAiB/4F,EAAM82F,qBAAqBgC,kCAC/EE,gCAAuE,mBAAtCH,EAA6Bx6F,KACxDw6F,EAA6BE,eAAiB/4F,EAAM82F,qBAAqBkC,gCAC/EC,yCAAgF,qBAAtCJ,EAA6Bx6F,WAAsE2jB,IAAvC62E,EAA6BjuF,MAC7H,CAACqe,OAAQ4vE,EAA6BjuF,OAAS5K,EAAM82F,qBAAqBmC,yCAChFC,uCAA8E,mBAAtCL,EAA6Bx6F,WAAoE2jB,IAAvC62E,EAA6BjuF,MACzH,CAACqe,OAAQ4vE,EAA6BjuF,OAAS5K,EAAM82F,qBAAqBoC,2CAG5F,KAAKnD,GAAsBoD,mBACvB,IAAMC,EAA4D5vE,EAClE,OAAO,2BACAxpB,GADP,IAEI82F,qBAAqB,2BACd92F,EAAM82F,sBADO,IAEhBV,sBAAyD,qBAAlCgD,EAAyB/6F,KAC1C+6F,EAAyBC,aAAer5F,EAAM82F,qBAAqBV,sBACzEE,oBAAuD,mBAAlC8C,EAAyB/6F,KACxC+6F,EAAyBC,aAAer5F,EAAM82F,qBAAqBR,oBAEzEwC,kCAAqE,qBAAlCM,EAAyB/6F,MACzD+6F,EAAyBC,eAAiBrD,GAAcK,mBACrDr0E,EAAYhiB,EAAM82F,qBAAqBgC,kCAC7CE,gCAAmE,mBAAlCI,EAAyB/6F,MACvD+6F,EAAyBC,eAAiBrD,GAAcK,mBACrDr0E,EAAYhiB,EAAM82F,qBAAqBkC,gCAC7CC,yCAA4E,qBAAlCG,EAAyB/6F,MAChE+6F,EAAyBC,eAAiBrD,GAAcK,mBACrDr0E,EAAYhiB,EAAM82F,qBAAqBmC,yCAC7CC,uCAA0E,mBAAlCE,EAAyB/6F,MAC9D+6F,EAAyBC,eAAiBrD,GAAcK,mBACrDr0E,EAAYhiB,EAAM82F,qBAAqBoC,uCAC7C/C,sBAAsB,2BACfn2F,EAAM82F,qBAAqBX,uBADb,IAEjB3tD,iBAAoD,qBAAlC4wD,EAAyB/6F,MACxC+6F,EAAyBC,eAAiBrD,GAAcK,cACrDH,GAA4BC,sBAAsB3tD,iBAClDxoC,EAAM82F,qBAAqBX,sBAAsB3tD,iBACvDC,eAAkD,mBAAlC2wD,EAAyB/6F,MACtC+6F,EAAyBC,eAAiBrD,GAAcK,cACrDH,GAA4BC,sBAAsB1tD,eAClDzoC,EAAM82F,qBAAqBX,sBAAsB1tD,qBAIvE,QACI,OAAOzoC,IChLJs5F,GA3DKC,aAA0B,CAC1CnhF,gBAAiB66E,GACjBuG,0BAA2B7P,GAC3BhpE,oBAAqB4tB,GACrB3tB,oBAAqBof,GACrB4W,4BAA6B6b,GAE7B2vB,iBAAkBZ,GAClBkG,iBAAkBd,GAClBjkC,wBAAyBK,GACzB5S,sBAAuBqC,GACvB0S,wBAAyBs0C,GACzBpa,uBAAwBL,GACxByG,wBAAyBX,GACzBt6B,oBAAqBP,GAErBiB,2BAA4B1B,GAC5B2oB,4BAA6BwjB,GAC7BjiB,kCAAmCP,GAEnCzf,wBAAyBT,GAEzBymC,kBAAmB1C,GAGnBrnF,KAAM08E,GACNnyC,sBAAuBsyC,GACvB3jD,SAAU6jD,GACVx0E,UAAWy0E,GACX1wE,UAAW2wE,GACXlgD,YAAamgD,GACb5sF,gBAAiB6sF,GACjBj5D,eAAgBm5D,GAChBjxE,qBAAsBkxE,GACtBjwD,aAAc41D,GACdryC,oBAAqBsyC,GACrB32D,iBAAkB62D,GAClBv8B,mBAAoB08B,GACpB16B,mBAAoB26B,GACpB5mD,eAAgB8mD,GAChBzjE,aAAc0jE,GACd9iC,uBAAwB+iC,GACxB50B,4BAA6B60B,GAC7B/9D,sBAAuBg+D,GACvBtmD,yCAA0CumD,GAC1CnyB,oBAAqBoyB,GACrBtwB,mBAAoBuwB,GACpBhX,mBAAoBmX,GACpBv7E,uBAAwBw7E,GACxBpvD,sBAAuBqvD,GACvB1vD,+BAAgC2vD,GAChCzuB,uBAAwB2uB,GACxBhjB,yBAA0BijB,GAC1B1sB,8BAA+B2sB,GAC/B33B,mBAAoB43B,GACpBoF,2BAA4B9E,GAC5B+E,oBAAqBrE,K,UC/HnBsE,GAAyBC,aAAYR,GAAaS,aAAgBC,OAExEC,IAAS3R,OACL,cAAC,IAAD,CACIuR,MAAOA,GADX,SAGI,cAAC,GAAD,MAEJrtF,SAAS0tF,eAAe,ShD+GtB,kBAAmB91D,WACrBA,UAAU+1D,cAAcC,MAAM9vF,MAAK,SAAA+vF,GACjCA,EAAaC,kB","file":"static/js/main.8c12ecdf.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.5e7ff337.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC0FBMVEUAAAAA//8Af/8AqqoAf78AmcwAqtQAkdoAn98AjcYAmcwAotAAlNQAnNcAkdoAmcwAj88AltIAm9QAk9YAltAAm9IAlNQAmNYAk9cAl88AmtEAldMAlNUAl88AmtAAltIAmNMAlNQAl9UAltEAmdIAldMAl9QAlNUAltAAldIAl9MAlNQAltUAmNIAldMAl9QAmNIAldMAl9MAmdQAltEAmNEAldIAldMAltQAmNEAltIAl9IAldMAltMAmNQAltEAl9IAldIAltMAmNMAltQAl9EAldIAl9IAmNMAltMAl9QAltIAl9IAmNMAltMAl9QAltEAl9IAldIAltMAl9MAltQAl9EAldIAltIAl9MAltMAl9QAltIAl9IAmNIAltMAl9MAltQAl9IAmNIAltIAl9MAltMAl9QAmNIAltIAl9MAltMAl9MAldEAltIAl9IAltMAl9MAltMAltIAl9IAltIAl9MAltMAl9MAl9IAltIAl9IAltMAl9MAl9MAltIAl9IAltEAl9MAltMAltIAl9IAltIAl9MAltMAldMAl9IAltIAl9IAltMAldMAl9MAltIAl9IAltEAl9MAl9MAltMAl9IAltIAldMAl9MAltIAl9IAltEAldMAl9MAl9IAltEAldMAl9MAltMAl9IAltIAl9EAl9MAldMAl9MAltIAl9IAl9EAl9MAltMAl9IAldEAl9MAltMAl9MAldEAl9EAldMAl9MAltIAldIAl9EAldMAl9MAltMAl9IAl9EAldEAl9MAltMAl9MAl9IAldEAl9EAldMAl9MAltMAldIAl9EAldEAl9MAltMAldMAl9EAldEAl9EAltMAldMAl9IAldEAl9EAldMAl9MAl9MAldIAl9EAldEAl9MAl9MAldMAl9EAldEAl9EAltMAldMAl9MAldEAl9EAldEAldMAl9MAldMAl9EAldEAl9NBjL3XAAAA73RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExYXGBkaGxwdHyAhIiMkJScoKSorLC4vMDE0NTY5Ojs8PT4/QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaSlpqeoqaqsra6vsLGys7S1tre4ubu8vb/AwcLExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/jWJrzEAAAsKSURBVHja7d0LjBT1HQfw2bvjOBAqbxGrB/g4sBWwjagUqgaFiqIWtBSi1VRpY6lWq7VGom2MTa2v1ket0mpaRasmPDSkVorB2gYjRkGCPR4FxFh5Csj7dbuFiorH3u4A11vmP5+Pmujuf2Z25/fd3/xnHXaiCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACSJ3NIvIpjamq6t25VmUnLXs9uWvPe/HeWCsBuFQMu7n9MKj98y6ZPenV72gPQ8epRR6S4Aa8aP255mgPQ7qbLq1J+DN72+D1rUhuAEXd0MAuL1tzybDoD0OaBoar/P1OuXZvCANQ801Xp91g8ckHqAnDyhLYK/6l1w2alLAAnT2mp7HvZNHRWqgJQ86LPf70eMGhhigLQZrrjf32Lzl5Xis2Wl+TNjjtVwetr121yagIw4gb13lePf9em5BDQ7nXf/+Szuu/adHSAn31dsfNpWTY9FR2g45wqxc5ra++VTb7NsqZ/m1erfwOqrkpDB6iYe4RSN2D5STvD7wAD1L9Bnful4BAwXJ0bNiwFARigzA07M/wAHHOMMjesukvwAahR5UJOFIB0qwk+AN0VueAxIPgAtFbkQtoFH4BWilxIi+ADUKnIhTQLPgAZRT6kdk+ZfZ5uAiAACAACgAAgAAgAAoAAIAAIAAKAACAACAACgAAgAAgAAoAAIAAIAIlWkdyXvuH1eQvWrK9o2eXYL5/izxulLQAfTXj67c9+UKmq/4gLZCBFh4DVt33phjf3+kGtrdNG97p/q2qmJQBP9n1wU/3HVvz81JeUMxUBWD8i/y123vv2jTsUNPwALDtnakNPPXbRBhUNPQDLzitwf6UZF2xW0rADsPFbSwo9PfvSrJoGHYAfzS38/PR71TTkAEyaWGzEr95W1HADsGls0SF11ytquAF4eFnxMbOmqmqoAdg6Ls6oe1Q11AA8vzrOqDcWK2ugAXgm5kxRWcMMwNbX4o17WVnDDMDMbfHGza5T1yAD8E7McVveVdcgAzA/7kCzwDADsCLuwLXqGmQA1scduEldgwxA7PscV6hrkAGIfbORw9Q1yAAcHXdgR3UNMgCx76h1vLoGGYA+cRtAZ3UNMgC9Y95S6zRlDTMAZYPjjRuirGEGIBoVa1SL85Q10AD0PynOqOHuTRlqAKKbY4wpv05Vgw3AkAHFx3z3WFUNNgDRb4q29y5jFTXgAHS/r8iAinGHK2rAAYguvrHw83d/TU2DDkA0dnShZ2+9QkkDD0B01y0N3mC54v4fq2jwAYh+8uf2+Z84esp3FDQFAYgGz7g4z6OV18w4VT1TEYCo0++nD6l3eVDr0W/c3ko5919Cr57q89TyCS++teWTc//Th5zbQi3TFIAo6jxmzI5Fiz7aVNmq8wmuAEphAHZp1qOHAqZyDoAAIAAIAAKAACAACAACgACwn/xR+qJySxYsWbp89YbtOzPNqtp0+mK3biceLgApsX7GP1+ft3Gfh7v2OaP/cQJQko/j5kxZeaYsz5Erl8vuUlbVwILZLWW77Xs5WS6bq8tmq/L8/MiKFya8lf8mNO++OznqNvjC0wSgqf3xtj03hcnssauAu0q/yyc3ijjumbx/MOSOh/b8yGDZx4tl6i3X7JLf1svFy4++srPQS1nyyCPVIy89KukByDT1BieedTBL91xedMjNP83z4MbqoncSmdFz734x4b55sT4/37imb6PunmmXOAsoJMavRef9ibAPi99JZu/fIHul//di1T/aOWXwBbOdBgbR05p/+m+rLv9mbfzl/jHwuvUCENJs6MV+L+zXgtk/9fu7ACTfnj1RN3bU6v1d9D/Dfy0AiT8ufDxkw7CHD2D1dbePqROAEKwa8uqBLfj0FXUCkOwOsLuAK8+fe6BbmPIDAUi2XBStu2jBgS//3C8FINEdIBttH1F7MNu4+68CkOxDwPUzD66F/HC5ACRY9omnD3INH14nAAnuAAtvPuitvPQXAUhuAMZuOfjN3LpDABIbgMa40dDipwQgsQFoFPfuFIBUe3+yAKTb7wQg3d6qFYA0zwGi6FkBSLfJApDuDrB0jgCkOgDRVAFIt5cEIN0dYPZGAUi1na8JQKo7QJSsAFQIQIPadmpZGW3bsGzz/i02QwACCEyfc/v2bvPJmd2bf5u6Jv6ytbmMACS7Axx2+eiue/1ndfWwbc/d9X7cpdcvStJPB5gE7uv8N37Rtd5DzS+b+f3Yy//LJDDJKh988sg8D7e48w+VMdcw3xwgwarGD2zgmeHlV2ZjrWKBDpBc5Y8NbPC5i26Kt47FApBctw0p8OSNvWKtY4UAJFa/awq2hztjrWR5VgASehpY+UDhgacPiLOWulUCkFCXFrv1/JhYqxGAhCq7ttiIczrFWc9aAUjmIaB/ddHdNTjOejYKQDKNLD7kbAEItwNkzolxmhBnRdsEIJF6tC8+pkO1AATbAb4SKyUxxvgeIJl6xxlUE2NMTgASqXucQV0FIFhd4gzqLADBOjLOoPYCEKrmbeKMaiMAoeoQa1RrZwGhahtrVEsdIFSt4h0oBCBUsaYAsS6iFIBDTpxvAg9vtB0mAIl0mACkW4tGW5OzgGR+D9Boa9IBEqlcB0i3jA4QrlyT7goBSKQy79ohQAcwCRQAHUAABEAATId8D6AD6AACoAOgA6SjJOYAKQ+AOQA6gA6gA/geQAdAB3AI0AFw4MMhAB0AHQCTQHtfB0hu/83pAA4BOkCKA5ATAB0AHcAcwCTQISCVATAJ1AEEwCTQHMAkUAcIPgBZZwE6QPCfWwFwFiAAjb33cwKQ7tPArAD4HkAAUhyAxiubs4CUB0AHSPnpgw5QSlkdwCFABxAAp4EC4CxAAErzudUBSqnOIUAHMAl0GthIrUMHSE8AHAISIMa9/b5wgMvFvHVsnD1WKQD/LxcWHVE1PN+jHc4onq2B8V5Cz+JDTknQHs009QYnnnVQiy9cVVZeXlaW2f3XZ689l8tmd/2drasrP6FN/q5cu273crsW2/XPXg9nc3sWLOsR79ax0ebarUU+U+1qDvz9TbukietRkawOEB1//AEG/cTGegUtvxrUlMn/DUw5ARAABAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAEgllzwAcgqciE7gg/AJkUuZHPwAVijyIfU7mnyALynyIUsDT4A8xW5kHnBB+AdRS6kNvgALF2myg1bsiz4AETTlflQ2jlNH4BJynwo7Zwmv19AVDm3o0I34INedeF3gO3jFbohT9SloANEnWc3V+q8NvdenYI5QLT8caXO79Gmr38pOkDUfmY7xc5j5Snrm36j5SV4o1tWnK/aeYyZU4KNluR6gGenqPa+Jjxfiq1mSvJe207rruD1zB+0PkpLB4jWjlyn4p/34aiS1L9Ul4QtGObCkM/ZMHxxlKYARLOG6gF7f/6Hvh2lKwDRrEGL1P2z43+p6l/Cq4IXnv28yn9s4qDFJdt2ppRvfPidHVQ/WnlTKT8J5aV867Xjy3tVpLz8mx+6ck4pt58p8fvvdNVlnVNc/g+eeGx1aV9BpuT7oKLfsDOrU1n9JdMnvVZX6heROSR2xVE9a6rbtWiWSUnlczs2r1k6r9bVkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwgP4L8YdkJdYJMf4AAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/admin_logo.ba46fba4.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_my_dashboard.bd396a1f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_navigation_bar.9371ce16.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_notifications.5cb03a6b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_user_management.f70fb039.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_01.188cd7b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_02.43a3a338.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_03.d21bb154.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_access_requests.28fe688a.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_members.441a6d6f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_viewing_an_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_2_offer.ef822bde.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_01.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_02.6811f18b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_temporarily_closing_an_offer.2af2fa2e.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_reopening_a_temporarily_closed_offer.a6df5162.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_admins.56a845b1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_offers.c2b77876.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_groups.6d981bb7.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_resources.46aab3b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_settings.db022052.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_public_offer.9199adf5.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_restricted_offer.47d1cb14.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_audit_log.7ba81ce1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_password.6b0f1016.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_change_password.d432f2e0.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_logging_out.d5b27005.png\";","export default __webpack_public_path__ + \"static/media/investor_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/investor_help_navigation_bar.484f4980.png\";","export default __webpack_public_path__ + \"static/media/investor_help_notifications.591a0a3c.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers.e803e5a3.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers_campaign.c87eedb6.png\";","export default __webpack_public_path__ + \"static/media/investor_help_pitch_phase_02.ed931b04.png\";","export default __webpack_public_path__ + \"static/media/investor_contacting_fundraiser.a655d6ac.png\";","export default __webpack_public_path__ + \"static/media/investor_help_exploring_groups.2626dbb8.png\";","export default __webpack_public_path__ + \"static/media/investor_help_resources.d795f034.png\";","export default __webpack_public_path__ + \"static/media/investor_help_profile.161003e4.png\";","export default __webpack_public_path__ + \"static/media/investor_help_editing_your_profile.7557feb5.png\";","export default __webpack_public_path__ + \"static/media/investor_help_setting_up_business_profile.4f382457.png\";","export default __webpack_public_path__ + \"static/media/investor_help_self_certification.316c14bd.png\";","export default __webpack_public_path__ + \"static/media/investor_help_reset_password.3367ff8a.png\";","export default __webpack_public_path__ + \"static/media/investor_help_change_password.ee808f9b.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_01.3369ce18.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_02.360ef7c1.png\";","export default __webpack_public_path__ + \"static/media/investor_help_log_out.b96d7eaf.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_navigation_bar.c03a1c44.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_notifications.ee71f277.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_01.7ef3c24c.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_02.e6fe49c4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_manage_offer.3aaa83e4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_offer.6dc9997a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_01.6baa1cf8.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_02.e5dcb344.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_exploring_groups.2ddf42d1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_resources.394adc7a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_01.f76d41fd.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_02.5ba1a9b1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_01.740f5dec.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_02.4487dfd3.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_reset_password.6e395e52.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_change_password.a3ecf01b.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_01.866d8280.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_02.39aafbdc.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_log_out.7f3b30bd.png\";","export default __webpack_public_path__ + \"static/media/front_page_cover_image.2b9aa708.png\";","/** \r\n * This file contains Firebase connection setup.\r\n * \r\n * This file will only be imported in the App.jsx file to initialize Firebase.\r\n */\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport 'firebase/storage';\r\n\r\nconst config = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n};\r\nconst firebaseApp = firebase.initializeApp(config);\r\nexport default firebaseApp;","export const UPLOADING = 'UPLOADING';\r\nexport const uploading = (mode, progress) => {\r\n    return {\r\n        type: UPLOADING,\r\n        mode,\r\n        progress\r\n    }\r\n};\r\n\r\nexport const DISMISS_UPLOADING_STATUS = 'DISMISS_UPLOADING_STATUS';\r\nexport const dismissUploadingStatus = () => {\r\n    return {\r\n        type: DISMISS_UPLOADING_STATUS\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {ProgressBar} from 'react-bootstrap';\r\nimport {connect} from 'react-redux';\r\nimport * as uploadingStatusActions from '../../redux-store/actions/uploadingStatusActions';\r\n\r\n// Upload states\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_LOGO_FIRST_TIME_MODE = 1; // upload logo first time together with business profile information\r\nexport const UPLOAD_LOGO_MODE = 2; // upload logo separately later times\r\nexport const UPLOAD_PROFILE_PICTURE_MODE = 3;\r\nexport const UPLOAD_VIDEO_FIRST_TIME_MODE = 4;\r\nexport const UPLOAD_VIDEO_MODE = 5;\r\nexport const UPLOAD_LEGAL_DOCUMENTS_MODE = 6;\r\nexport const UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION = 7;\r\nexport const UPLOAD_PITCH_COVER_MODE = 8;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 9;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 10;\r\nexport const UPLOAD_DONE_MODE = 11;\r\nexport const UPLOAD_ERROR = 12;\r\n//--------------------------------------------------------------------\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        mode: state.uploadingStatus.mode,\r\n        progress: state.uploadingStatus.progress\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        dismiss: () => dispatch(uploadingStatusActions.dismissUploadingStatus())\r\n    }\r\n};\r\n\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardRef,\r\n\r\n            mode,\r\n            progress,\r\n\r\n            dismiss\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardRef}\r\n                open={mode !== UPLOAD_NONE}\r\n                fullWidth\r\n            >\r\n                <DialogTitle>\r\n                    {\r\n                        mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE\r\n                            ?\r\n                            \"Uploading logo\"\r\n                            :\r\n                            (\r\n                                mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                                    ?\r\n                                    \"Uploading profile picture\"\r\n                                    :\r\n                                    (\r\n                                        mode === UPLOAD_VIDEO_MODE || mode === UPLOAD_VIDEO_FIRST_TIME_MODE\r\n                                            ?\r\n                                            \"Uploading video\"\r\n                                            :\r\n                                            (\r\n                                                mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                                                    ?\r\n                                                    \"Uploading documents\"\r\n                                                    :\r\n                                                    (\r\n                                                        mode === UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION\r\n                                                            ?\r\n                                                            \"Uploading business profile\"\r\n                                                            :\r\n                                                            (\r\n                                                                mode === UPLOAD_ERROR\r\n                                                                    ?\r\n                                                                    \"Error uploading\"\r\n                                                                    :\r\n                                                                    (\r\n                                                                        mode === UPLOAD_DONE_MODE\r\n                                                                            ?\r\n                                                                            \"Upload done\"\r\n                                                                            :\r\n                                                                            \"\"\r\n                                                                    )\r\n                                                            )\r\n                                                    )\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <ProgressBar\r\n                            variant=\"success\"\r\n                            striped\r\n                            now={progress}\r\n                            label={`${progress}%`}\r\n                        />\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            style={{\r\n                                marginTop: 10\r\n                            }}\r\n                        >\r\n                            {\r\n                                mode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please wait while we're uploading your files...\"\r\n                                    :\r\n                                    \"Your files have successfully uploaded.\"\r\n                            }\r\n                        </Typography>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        size=\"small\"\r\n                        disabled={mode !== UPLOAD_DONE_MODE && mode !== UPLOAD_ERROR}\r\n                        onClick={dismiss}\r\n                        style={{\r\n                            margin: 8\r\n                        }}\r\n                    >\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <UploadingDialog {...props} forwardedRef={ref}/>)\r\n);","/** This file contains all of the colors that will be used */\r\n\r\nexport const black = \"#000000\";\r\nexport const white = \"#FFFFFF\";\r\n\r\nexport const red = \"#FF0000\";\r\nexport const red_700 = \"#D32F2F\";\r\n\r\nexport const dark_green = \"#4C8484\";\r\nexport const dark_green_50 = \"#5DA2A2\";\r\n\r\n// obtain using this website: https://hihayk.github.io/scale/#4/6/58/94/-51/-17/100/14/4C8484/76/132/132\r\nexport const dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100 = \"#F3F7F9\";\r\n\r\nexport const gray_50 = \"#FAFAFA\";\r\nexport const gray_100 = \"#F5F5F5\";\r\nexport const gray_200 = \"#EEEEEE\";\r\nexport const gray_300 = \"#E0E0E0\";\r\nexport const gray_400 = \"#BDBDBD\";\r\nexport const gray_500 = \"#9E9E9E\";\r\nexport const gray_600 = \"#757575\";\r\nexport const gray_700 = \"#616161\";\r\nexport const gray_800 = \"#424242\";\r\n\r\nexport const pink_500 = \"#E91E63\";\r\n\r\nexport const blue_900 = \"#0D47A1\";\r\n\r\nexport const blue_gray_50 = \"#ECEFF1\";\r\nexport const blue_gray_100 = \"#CFD8DC\";\r\nexport const blue_gray_600 = \"#546E7A\";\r\nexport const blue_gray_700 = \"#455A64\";\r\n\r\n//---- Background color for letter avatar --------------------\r\nexport const background_a = \"#58B99D\";\r\nexport const background_b = \"#4A9D86\";\r\nexport const background_c = \"#EAC545\";\r\nexport const background_d = \"#E79F3C\";\r\nexport const background_e = \"#65C87A\";\r\nexport const background_f = \"#55AB68\";\r\nexport const background_g = \"#C45C24\";\r\nexport const background_h = \"#5197D5\";\r\nexport const background_i = \"#437FB4\";\r\nexport const background_j = \"#C8473F\";\r\nexport const background_k = \"#D65745\";\r\nexport const background_l = \"#B14334\";\r\nexport const background_m = \"#925EB1\";\r\nexport const background_n = \"#844A87\";\r\nexport const background_o = \"#BEC3C6\";\r\nexport const background_p = \"#38495C\";\r\nexport const background_q = \"#303E4E\";\r\nexport const background_r = \"#98A4A6\";\r\nexport const background_s = \"#818C8D\";\r\nexport const background_t = \"#DE8DBD\";\r\nexport const background_u = \"#CA76AA\";\r\nexport const background_v = \"#E99B89\";\r\nexport const background_w = \"#9DA282\";\r\nexport const background_x = \"#AF935E\";\r\nexport const background_y = \"#E5B547\";\r\nexport const background_z = \"#9D473B\";\r\n//------------------------------------------------------------\r\n\r\n//---------------------------------------------------------------------\r\n/**\r\n * Theme colors - MUST BE DEFINED LAST so that other colors can be referenced\r\n */\r\nexport const primaryColor = dark_green;\r\nexport const secondaryColor = pink_500;\r\nexport const errorColor = \"#E15241\";\r\n\r\nexport const kick_starter_background_color = \"#FBFBFA\";\r\nexport const kick_starter_background_color_1 = \"#F7F7F6\";\r\nexport const kick_starter_gray_box_border = \"#DCDEDD\";\r\nexport const kick_starter_signup_background = \"#FCFCFB\";\r\nexport const kick_starter_gray_background = \"#F0F0F0\";\r\n\r\nexport const crowdcube_risk_warning_background = \"#2C383B\";\r\nexport const crowdcube_risk_warning_link_before_cover = \"#D98E34\";\r\nexport const crowdcube_risk_warning_link_after_cover = \"#CA6B2D\";\r\n//---------------------------------------------------------------------\r\n","import React from 'react';\r\nimport { StyleSheet } from 'aphrodite';\r\nimport {\r\n    TableCell,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport * as appColors from '../values/colors';\r\n\r\nconst sharedStyles = StyleSheet.create({\r\n    nav_link_hover: {\r\n        ':hover': {\r\n            color: appColors.blue_gray_700,\r\n            textDecoration: 'none',\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    nav_link_white_text_hover_without_changing_text_color: {\r\n        color: appColors.white,\r\n        ':hover': {\r\n            textDecoration: 'none'\r\n        }\r\n    },\r\n\r\n    nav_link_hover_without_changing_text_color: {\r\n        ':hover': {\r\n            textDecoration: 'none'\r\n        }\r\n    },\r\n\r\n    page_title: {\r\n        marginLeft: 20,\r\n        color: appColors.white\r\n    },\r\n\r\n    hamburger_button: {\r\n        color: appColors.white,\r\n        marginLeft: 10\r\n    },\r\n\r\n    tab_title: {\r\n        textTransform: \"none\",\r\n        fontSize: \"0.9em\"\r\n    },\r\n\r\n    kick_starter_border_box: {\r\n        border: `1px solid ${appColors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none'\r\n    },\r\n\r\n    no_text_transform: {\r\n        textTransform: \"none\"\r\n    },\r\n\r\n    error_text: {\r\n        color: appColors.errorColor\r\n    },\r\n\r\n    white_text: {\r\n        color: appColors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: appColors.black\r\n    }\r\n});\r\nexport default sharedStyles;\r\n\r\n/**\r\n * Styled table cell\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport function StyledTableCell(props) {\r\n    const useStyles = makeStyles({\r\n        root: {\r\n            background: props => props.cellColor,\r\n            color: props.textColor\r\n        }\r\n    });\r\n    const classes = useStyles(props);\r\n    return (\r\n        <TableCell\r\n            className={classes.root}\r\n            colSpan={props.colSpan}\r\n        >\r\n            {props.component}\r\n        </TableCell>\r\n    );\r\n}\r\n\r\n/**\r\n * Slide transition - direction up\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionUp = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"up\" />);\r\n\r\n/**\r\n * Slide transition - direction down\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionDown = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"down\" />);","/**\r\n * This file contains all Firebase paths and constant values.\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE NODES ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Groups node\r\nexport const GROUP_PROPERTIES_CHILD = \"AngelNetworkProperties\";\r\n\r\n// Admins node\r\nexport const ADMINISTRATORS_CHILD = \"Administrators\";\r\n\r\n// System's attributes node\r\nexport const CLUB_ATTRIBUTES_CHILD = \"ClubAttributes\";\r\n\r\n// Users node\r\nexport const USERS_CHILD = \"Users\";\r\n\r\n// Projects node\r\nexport const PROJECTS_CHILD = \"Projects\";\r\n\r\n// Activities log node\r\nexport const ACTIVITIES_LOG_CHILD = \"ActivitiesLog\";\r\n\r\n// Investor Self-certification agreements node\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD = \"InvestorSelfCertificationAgreements\";\r\n\r\n// Access requests to a group node\r\nexport const REQUESTS_TO_JOIN_CHILD = \"RequestsToJoin\";\r\n\r\n// Contact us enquiries node\r\nexport const CONTACT_US_ENQUIRIES_CHILD = \"ContactUsEnquiries\";\r\n\r\n// Marketing preferences node\r\nexport const MARKETING_PREFERENCES_CHILD = \"MarketingPreferences\";\r\n\r\n// Invited users node\r\nexport const INVITED_USERS_CHILD = \"InvitedUsers\";\r\n\r\n// Business profile node\r\nexport const BUSINESS_PROFILE_CHILD = \"BusinessProfile\";\r\n\r\n// Accepted create pitch T&Cs node\r\nexport const ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD = \"AcceptedCreatePitchTermsAndConditions\";\r\n\r\n// Project comments node\r\nexport const COMMENTS_CHILD = \"Comments\";\r\n\r\n// Project comment replies node\r\nexport const COMMENT_REPLIES_CHILD = \"CommentReplies\";\r\n\r\n// Pledges node\r\nexport const PLEDGES_CHILD = \"Pledges\";\r\n\r\n// Project votes node\r\nexport const VOTES_CHILD = \"Votes\";\r\n\r\n// Pledge FAQs node\r\nexport const PLEDGE_FAQS_CHILD = \"PledgeFAQs\";\r\n\r\n// Notifications node\r\nexport const NOTIFICATIONS_CHILD = \"Notifications\";\r\n\r\n// Forums node\r\nexport const FORUMS_CHILD = \"Forums\";\r\n\r\n// Forum threads node\r\nexport const FORUM_THREADS_CHILD = \"ForumThreads\";\r\n\r\n// Forum thread replies node\r\nexport const FORUM_THREAD_REPLIES_CHILD = \"ForumThreadReplies\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE STORAGE DIRECTORIES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Plain logos directory\r\nexport const PLAIN_LOGOS_CHILD = \"PlainLogos\";\r\n\r\n// Logos with text directory\r\nexport const LOGOS_WITH_TEXT_CHILD = \"LogosWithText\";\r\n\r\n// Legal documents directory\r\nexport const LEGAL_DOCUMENTS_CHILD = \"LegalDocuments\";\r\n\r\n// Logos directory\r\nexport const LOGOS_CHILD = \"Logos\";\r\n\r\n// Videos directory\r\nexport const INTRO_VIDEOS_CHILD = \"Videos\";\r\n\r\n// Profile pictures directory\r\nexport const PROFILE_PICTURES_CHILD = \"ProfilePictures\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE ATTRIBUTES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\nexport const PROJECT_SUPPORTING_DOCUMENTS_CHILD = \"supportingDocuments\";\r\n\r\nexport const PROJECT_PRESENTATION_DOCUMENT_CHILD = \"presentationDocument\";\r\n\r\nexport const PROFILE_PICTURE_CHILD = \"profilePicture\";\r\n\r\nexport const PROJECT_COVER_CHILD = \"cover\";\r\n\r\nexport const LOGO_CHILD = \"logo\";\r\n\r\nexport const INTRO_VIDEO_CHILD = \"video\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * ACTIVITY LOG TYPES --------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const ACTIVITY_TYPE_CLICK = 1; // profile, pitch/offer\r\nexport const ACTIVITY_TYPE_VIEW = 2; // profile, pitch/offer, group\r\nexport const ACTIVITY_TYPE_DOWNLOAD = 3; // download documents\r\nexport const ACTIVITY_TYPE_POST = 4; // comments, forums, threads, replies, pledges, likes, changes password\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVITED USER STATUS -------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a user in a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const INVITED_USER_NOT_REGISTERED = 0;\r\nexport const INVITED_USER_DECLINED_TO_REGISTER = 1;\r\nexport const INVITED_USER_STATUS_ACTIVE = 2;\r\nexport const INVITED_USER_STATUS_LEFT = 3;\r\nexport const INVITED_USER_STATUS_KICKED_OUT = 4;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * GROUP STATUS --------------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const GROUP_STATUS_ACTIVE = 1;\r\nexport const GROUP_STATUS_SUSPENDED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TYPE -----------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const TYPE_INVESTOR = 1;\r\nexport const TYPE_ISSUER = 2;\r\nexport const TYPE_ADMIN = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT VISIBILITY --------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the visibility of a project (offer).\r\n *\r\n * @type {number}\r\n */\r\nexport const PROJECT_VISIBILITY_PRIVATE = 1;\r\nexport const PROJECT_VISIBILITY_RESTRICTED = 2;\r\nexport const PROJECT_VISIBILITY_PUBLIC = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVESTOR AGREEMENT TYPE ---------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the investors' self-certification type.\r\n *\r\n * @type {number}\r\n */\r\nexport const HIGH_NET_WORTH_INVESTOR_AGREEMENT = 1;\r\nexport const SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT STATUS ------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\n\r\n// --- Project overall status ---\r\nexport const PROJECT_STATUS_DRAFT = -2; // project has not been published yet\r\nexport const PROJECT_STATUS_REJECTED = -1; // this status means the project failed even before it is publicly showed\r\nexport const PROJECT_STATUS_BEING_CHECKED = 0; // the project (offer) must be checked by admin first\r\nexport const PROJECT_STATUS_PITCH_PHASE = 1;\r\nexport const PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED = 2;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED = 3;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_PHASE = 4;\r\nexport const PROJECT_STATUS_SUCCESSFUL = 5;\r\nexport const PROJECT_STATUS_FAILED = 6;\r\n\r\n// --- Pitch status only ---\r\nexport const PITCH_STATUS_ON_GOING = 1;\r\nexport const PITCH_STATUS_ACCEPTED = 2;\r\nexport const PITCH_STATUS_REJECTED = 3;\r\n// when the admin accepts a pitch, its status will change to this state (pitch accepted and waiting for primary offer to be created)\r\n// when the issuer creates a primary offer, the pitch's status will change to PITCH_STATUS_ACCEPTED\r\nexport const PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER = 4;\r\n// this status means the pitch has expired but admin has not accepted or rejected it\r\nexport const PITCH_STATUS_WAITING_FOR_ADMIN = 5;\r\n\r\n// --- Pledge status only ---\r\nexport const PRIMARY_OFFER_STATUS_ON_GOING = 1;\r\nexport const PRIMARY_OFFER_STATUS_EXPIRED = 2;\r\nexport const PRIMARY_OFFER_STATUS_REJECTED = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT STATUS ----------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_STATUS_POSTED = 1;\r\nexport const COMMENT_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT REPLY STATUS ----------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_REPLY_STATUS_POSTED = 1;\r\nexport const COMMENT_REPLY_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * CONTROL IF A PLEDGE IS NEWLY CREATED OR EDITED ----------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const MAKE_A_NEW_PLEDGE = 1;\r\nexport const EDIT_A_PLEDGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TITLES ---------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const USER_TITLES = [\"Please select\", \"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Dr.\", \"Prof.\"];\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FINANCIAL ROUNDS ----------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const FINANCIAL_ROUNDS = [\"Pre-seed\", \"Seed\", \"Series A\", \"Series B\", \"Series C\"];\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * MULTIMEDIA TYPE (VIDEO OR IMAGE) ------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const FILE_TYPE_VIDEO = 1;\r\nexport const FILE_TYPE_IMAGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FILE CONFIGURATION ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {number|string}\r\n */\r\nexport const MAX_FILE_SIZE_IN_MB = 15;\r\nexport const MAX_FILE_SIZE_IN_BYTES = 15000000;\r\n\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_MB = 30;\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES = 30000000;\r\n\r\nexport const MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER = 2;\r\nexport const MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS = 10;\r\n\r\nexport const STORAGE_FILE_NAME_ID_SPLIT = \"-invest-west-\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */","import * as DB_CONST from '../firebase/databaseConsts';\r\n\r\nimport {QuillDeltaToHtmlConverter} from 'quill-delta-to-html';\r\n\r\n/**\r\n * This function will return the current date in milliseconds.\r\n */\r\nexport const getCurrentDate = () => {\r\n    const date = new Date();\r\n    return date.getTime();\r\n};\r\n\r\n\r\n/**\r\n * This function is used to calculate the date that is n days further than today\r\n *\r\n * @param days\r\n * @returns {number}\r\n */\r\nexport const getDateWithDaysFurtherThanToday = days => {\r\n    let neededDate = new Date();\r\n    const currentDate = new Date();\r\n    neededDate.setDate(currentDate.getDate() + days);\r\n    return neededDate.getTime();\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (DD/MM/YYYY)\r\n *\r\n * This function will take 1 parameter: milliseconds\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    return date.toLocaleDateString();\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (DD/MM/YYYY, HH:mm:ss)\r\n *\r\n * This function will take 1 parameter: milliseconds\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateTimeInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    return `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (dayOfWeek, month date year hour)\r\n *\r\n * @param milliseconds\r\n */\r\nexport const fullDateTimeInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    const dayList = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    const monthList = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n    let dayOfWeek = dayList[date.getDay()];\r\n    let month = monthList[date.getMonth()];\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let second = date.getSeconds();\r\n\r\n    hour = (hour >= 12) ? hour - 12 : hour;\r\n    let prepand = (hour >= 12) ? \" PM \" : \" AM \";\r\n\r\n    if (hour === 0 && prepand === ' PM ') {\r\n        if (minute === 0 && second === 0) {\r\n            hour = 12;\r\n            prepand = ' Noon';\r\n        } else {\r\n            hour = 12;\r\n            prepand = ' PM';\r\n        }\r\n    }\r\n    if (hour === 0 && prepand === ' AM ') {\r\n        if (minute === 0 && second === 0) {\r\n            hour = 12;\r\n            prepand = ' Midnight';\r\n        } else {\r\n            hour = 12;\r\n            prepand = ' AM';\r\n        }\r\n    }\r\n    return `${dayOfWeek}, ${month} ${date.getDate()} ${date.getFullYear()} ${hour}:${minute} ${prepand}`;\r\n};\r\n\r\nexport const PASSWORD_VERY_WEAK = 1;\r\nexport const PASSWORD_WEAK = 2;\r\nexport const PASSWORD_GOOD = 3;\r\nexport const PASSWORD_STRONG = 4;\r\nexport const PASSWORD_VERY_STRONG = 5;\r\nconst passwordBlacklist = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\r\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\r\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\r\n\r\n/**\r\n * This function is used to check the strength of the password.\r\n *\r\n * @param {*} password\r\n */\r\nexport const checkPasswordStrength = password => {\r\n    let strength = 0;\r\n    const minLength = 8;\r\n    // If the password length is less than or equal to minLength\r\n    if (password.length < minLength) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    } else {\r\n        strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\r\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\r\n        // strength = PASSWORD_WEAK;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\r\n    if (password.length > minLength &&\r\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\r\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\r\n        // strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\r\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_STRONG;\r\n    }\r\n\r\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\r\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_VERY_STRONG;\r\n    }\r\n\r\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    }\r\n\r\n    return strength;\r\n};\r\n\r\n\r\n/**\r\n * Convert a Delta object (obtained using ReactQuill to create rich text) to HTML\r\n *\r\n * @param {*} ops\r\n */\r\nexport const convertQuillDeltaToHTML = ops => {\r\n    if (!ops) {\r\n        return null;\r\n    }\r\n    let cfg = {};\r\n    /**\r\n     * Delta object obtained using ReactQuill has the following format:\r\n     * {\r\n     *      \"ops\": [\r\n     *          {},\r\n     *          {}\r\n     *      ]\r\n     * }\r\n     *\r\n     * This object is stored in the database.\r\n     * However, we only need the \"ops\" array to convert to HTML.\r\n     * So, after converting the JSON string to JSON, we need to retrieve the \"ops\" array so that the HTML tree can be created.\r\n     */\r\n    let converter = new QuillDeltaToHtmlConverter(ops, cfg);\r\n    return converter.convert();\r\n};\r\n\r\n\r\n/**\r\n * This function is used to calculate the difference in date between a specified date (in milliseconds) and the current date\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateDiff = (milliseconds) => {\r\n    const currentDate = new Date();\r\n    if (milliseconds - currentDate.getTime() < 0) {\r\n        return 0;\r\n    }\r\n    const dateDiff = Math.abs(milliseconds - currentDate.getTime()); // difference\r\n    return (dateDiff / (24 * 60 * 60 * 1000)).toFixed(0); //Convert values days and return value\r\n};\r\n\r\n/**\r\n * This function will find addresses based on postcode\r\n *\r\n * @param {*} postcode\r\n */\r\nexport const findAddress = async (postcode) => {\r\n    const GET_ADDRESS_API_KEY = \"Wbj4a1np5EejXhsnpv3RXQ19730\";\r\n    const addressQuery = `https://api.getAddress.io/find/${postcode}?api-key=${GET_ADDRESS_API_KEY}&sort=True&format=True`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        fetch(addressQuery)\r\n            .then(results => {\r\n                return results.json();\r\n            })\r\n            .then(data => {\r\n                let results = {\r\n                    apiAddresses: [], // addresses to store information to database\r\n                    formattedAddresses: [], // displayed addresses\r\n                    error: false\r\n                };\r\n                // no addresses can be found\r\n                if (!data.addresses) {\r\n                    results.error = true;\r\n                    return resolve(results);\r\n                }\r\n                data.addresses\r\n                    .forEach(address => {\r\n                        results.apiAddresses.push(address);\r\n                        // each address consists of 5 elements (address 1, address 2, address 3, town/city, postcode)\r\n                        let formattedAddress = \"\";\r\n                        address.forEach((element, index) => {\r\n                            if (element !== \"\") {\r\n                                formattedAddress += (element + \", \");\r\n                            }\r\n                        });\r\n                        formattedAddress = formattedAddress.trim();\r\n                        if (formattedAddress[formattedAddress.length - 1] === \",\") {\r\n                            formattedAddress = formattedAddress.slice(0, formattedAddress.length - 1);\r\n                        }\r\n                        results.formattedAddresses.push(formattedAddress);\r\n                    });\r\n                return resolve(results);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to calculate the equity gain based on the amount of money pledged\r\n * @param moneyPledge\r\n * @param fundTarget\r\n * @param equityOffered\r\n */\r\nexport const calculateEquityGain = (moneyPledge, fundTarget, equityOffered) => {\r\n    return ((moneyPledge * equityOffered) / fundTarget).toFixed(2);\r\n};\r\n\r\n/**\r\n * This function is used to calculate the amount of money pledged for this project\r\n *\r\n * @param pledges\r\n * @returns {number}\r\n */\r\nexport const calculatePledgesAmount = pledges => {\r\n\r\n    let pledgesAmount = 0;\r\n\r\n    if (!pledges || pledges.length === 0) {\r\n        return pledgesAmount;\r\n    }\r\n\r\n    pledges.forEach(pledge => {\r\n        if (pledge.amount !== '') {\r\n            pledgesAmount += pledge.amount;\r\n        }\r\n    });\r\n\r\n    return pledgesAmount;\r\n};\r\n\r\n/**\r\n * This function is used to convert a string to a number\r\n * Note: in this case, comma is considered the thousands-separator\r\n *\r\n * @param inputString\r\n * @returns {null|number}\r\n */\r\nexport const getNumberFromInputString = inputString => {\r\n\r\n    // user enters decimal numbers\r\n    if (inputString.includes('.')) {\r\n        return null;\r\n    }\r\n\r\n    let commaSplits = inputString.split(',');\r\n\r\n    if (commaSplits.length > 1) {\r\n        let invalidSeparator = false;\r\n        // check if the input string has valid comma separators\r\n        commaSplits.forEach((part, index) => {\r\n            if (index === 0) {\r\n                if (part.length > 3 || part.length < 1) {\r\n                    invalidSeparator = true;\r\n                }\r\n            } else {\r\n                if (part.length !== 3) {\r\n                    invalidSeparator = true;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (invalidSeparator) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    let commaFreeString = inputString.replace(/,/g, '');\r\n    // check if the string is a number\r\n    if (isNaN(commaFreeString) === true) {\r\n        return null;\r\n    }\r\n\r\n    let number = parseFloat(commaFreeString);\r\n    if (number < 0) {\r\n        return null;\r\n    }\r\n\r\n    return number;\r\n};\r\n\r\n/**\r\n * Construct file name to be uploaded to firebase storage\r\n *\r\n * @param document\r\n * @param newStorageID\r\n * @returns {string}\r\n */\r\nexport const constructStorageFileName = (document, newStorageID) => {\r\n\r\n    let constructedName = '';\r\n\r\n    let originalName = document.file.name;\r\n    let nameSplits = originalName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT);\r\n    // file downloaded from invest west server\r\n    if (nameSplits.length > 1) {\r\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + nameSplits[1];\r\n    }\r\n    // file from user's computer\r\n    else {\r\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + originalName;\r\n    }\r\n\r\n    return constructedName;\r\n};\r\n\r\n/**\r\n * Check if a LinkedIn URL is valid\r\n *\r\n * @param url\r\n * @returns {boolean|boolean | *}\r\n */\r\nexport const isValidLinkedInURL = url => {\r\n    if (!url) {\r\n        return true;\r\n    }\r\n    return url.startsWith(\"https://www.linkedin.com/in/\");\r\n};\r\n\r\nexport const GET_PLAIN_LOGO = 1;\r\nexport const GET_LOGO_WITH_TEXT = 2;\r\nexport const getLogoFromGroup = (getLogoType, groupProperties) => {\r\n    if (!groupProperties) {\r\n        return null;\r\n    }\r\n\r\n    switch (getLogoType) {\r\n        case GET_PLAIN_LOGO:\r\n            if (!groupProperties.hasOwnProperty('plainLogo')\r\n                || (groupProperties.hasOwnProperty('plainLogo') && groupProperties.plainLogo === null)\r\n            ) {\r\n                return null;\r\n            }\r\n            return groupProperties.plainLogo[groupProperties.plainLogo.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\r\n        case GET_LOGO_WITH_TEXT:\r\n            if (!groupProperties.hasOwnProperty('logoWithText')\r\n                || (groupProperties.hasOwnProperty('logoWithText') && groupProperties.logoWithText === null)\r\n            ) {\r\n                return null;\r\n            }\r\n            return groupProperties.logoWithText[groupProperties.logoWithText.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Get the user's home group\r\n *\r\n * @param groupsUserIsIn\r\n * @returns {*}\r\n */\r\nexport const getUserHomeGroup = groupsUserIsIn => {\r\n    const index = groupsUserIsIn.findIndex(group => group.invitedUser.requestedToJoin === false);\r\n    if (index !== -1) {\r\n        return groupsUserIsIn[index];\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Check if a project can be edited\r\n *\r\n * @param user\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const shouldAProjectBeEdited = (user, project) => {\r\n    if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n        return false;\r\n    }\r\n\r\n    if (user.type === DB_CONST.TYPE_ADMIN) {\r\n        return !(project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL\r\n            || project.status === DB_CONST.PROJECT_STATUS_FAILED\r\n            || project.status === DB_CONST.PROJECT_STATUS_REJECTED\r\n        );\r\n    }\r\n\r\n    // user is an issuer, but not the owner of the project\r\n    if (user.id !== project.issuerID) {\r\n        return false;\r\n    }\r\n\r\n    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n        || project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n    ) {\r\n        return true;\r\n    }\r\n\r\n    if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n        return project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\n/**\r\n * Check if a hex color code is valid\r\n *\r\n * @param hexColorCode\r\n * @returns {boolean}\r\n */\r\nexport const isValidHexColorCode = (hexColorCode) => {\r\n    let RegExp = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\r\n    return RegExp.test(hexColorCode);\r\n};\r\n\r\n/**\r\n * Check if a website URL is valid\r\n *\r\n * @param url\r\n * @returns {boolean}\r\n */\r\nexport const isValidWebURL = (url) => {\r\n    let RegExp = /^(http|https):\\/\\/(([a-zA-Z0-9$\\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\\/(([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\\/([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\\?([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?(\\#([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?)?$/;\r\n    return RegExp.test(url);\r\n};\r\n\r\n/**\r\n * Check is an email address is valid\r\n *\r\n * @param email\r\n * @returns {boolean}\r\n */\r\nexport const isValidEmailAddress = (email) => {\r\n    let RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return RegExp.test(email.trim().toLowerCase());\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = project => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = project => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = project => {\r\n    return project.hasOwnProperty('temporarilyClosed') && project.temporarilyClosed === true;\r\n};","export const CLOSE_FEEDBACK_SNACKBAR = 'CLOSE_FEEDBACK_SNACKBAR';\r\nexport const closeFeedbackSnackbar = () => {\r\n    return {\r\n        type: CLOSE_FEEDBACK_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const SET_FEEDBACK_SNACKBAR_CONTENT= 'SET_FEEDBACK_SNACKBAR_CONTENT';\r\nexport const setFeedbackSnackbarContent = (message, color, position) => {\r\n    return {\r\n        type: SET_FEEDBACK_SNACKBAR_CONTENT,\r\n        message,\r\n        color,\r\n        position\r\n    }\r\n};\r\n\r\nexport const RESET_STATES_WHEN_SNACKBAR_CLOSED = 'RESET_STATES_WHEN_SNACKBAR_CLOSED';\r\nexport const resetStatesWhenSnackbarClosed = () => {\r\n    return {\r\n        type: RESET_STATES_WHEN_SNACKBAR_CLOSED\r\n    }\r\n};","import {\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_ERROR,\r\n    UPLOAD_DONE_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as myUtils from '../../utils/utils';\r\nimport {UPLOADING} from  './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const TOGGLE_EDIT_IMAGE_DIALOG = 'TOGGLE_EDIT_IMAGE_DIALOG';\r\nexport const toggleEditImageDialog = mode => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n            mode, // upload logo (first time or not) or profile picture\r\n            user: getState().auth.user\r\n        });\r\n    }\r\n};\r\n\r\nexport const SET_IMAGE_EDITOR_REFERENCE = 'SET_IMAGE_EDITOR_REFERENCE';\r\nexport const setImageEditorReference = editor => {\r\n    return {\r\n        type: SET_IMAGE_EDITOR_REFERENCE,\r\n        editor\r\n    }\r\n};\r\n\r\nexport const LOADING_IMAGE_FILE = 'LOADING_IMAGE_FILE';\r\nexport const IMAGE_FILES_LOADED = 'IMAGE_FILES_LOADED';\r\nexport const handleImageFilesChanged = files => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_IMAGE_FILE\r\n        });\r\n\r\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\r\n\r\n        dispatch({\r\n            type: IMAGE_FILES_LOADED,\r\n            blob\r\n        });\r\n    }\r\n};\r\n\r\nexport const handleImageFileError = (error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n            message: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n            color: \"error\",\r\n            position: \"bottom\"\r\n        };\r\n    }\r\n};\r\n\r\nexport const LOADING_PREVIOUS_IMAGE = 'LOADING_PREVIOUS_IMAGE';\r\nexport const FINISHED_LOADING_PREVIOUS_IMAGE = 'FINISHED_LOADING_PREVIOUS_IMAGE';\r\nexport const handlePreviousImageItemClick = index => {\r\n    return (dispatch, getState) => {\r\n\r\n        dispatch({\r\n            type: LOADING_PREVIOUS_IMAGE\r\n        });\r\n\r\n        // send request through a CORS proxy can avoid cors problem\r\n        // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\r\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n\r\n        fetch(proxyUrl + getState().editImage.previousPhotos[index].url)\r\n            .then(response => {\r\n                return response.blob();\r\n            })\r\n            .then(blob => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_PREVIOUS_IMAGE,\r\n                    selectedIndex: index,\r\n                    blob,\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const IMAGE_ZOOM_CHANGED = 'IMAGE_ZOOM_CHANGED';\r\nexport const handleZoomSliderChanged = (event, newValue) => {\r\n    return {\r\n        type: IMAGE_ZOOM_CHANGED,\r\n        zoom: newValue\r\n    }\r\n};\r\n\r\nexport const CANCEL_EDITING_CURRENT_IMAGE = 'CANCEL_EDITING_CURRENT_IMAGE';\r\nexport const cancelEditingCurrentImage = () => {\r\n    return {\r\n        type: CANCEL_EDITING_CURRENT_IMAGE\r\n    }\r\n};\r\n\r\nexport const EDITED_IMAGE_OBTAINED = 'EDITED_IMAGE_OBTAINED';\r\nexport const viewEditedImagePreview = () => {\r\n    return (dispatch, getState) => {\r\n        const imgEditor = getState().editImage.imgEditor;\r\n\r\n        getEditedImage(imgEditor)\r\n            .then(blob => {\r\n                dispatch({\r\n                    type: EDITED_IMAGE_OBTAINED,\r\n                    blob\r\n                });\r\n            });\r\n    }\r\n};\r\n/**\r\n * Util function to get edited image\r\n *\r\n * @param imgEditor\r\n * @returns {Promise<unknown>}\r\n */\r\nconst getEditedImage = async (imgEditor) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (imgEditor && !isNaN(imgEditor.getCroppingRect().x)) {\r\n            // This returns a HTMLCanvasElement, it can be made into a data URL or a blob,\r\n            // drawn on another canvas, or added to the DOM.\r\n            imgEditor.getImage().toBlob(blob => {\r\n                return resolve(blob);\r\n            }, 'image/jpg');\r\n        }\r\n        else {\r\n            return reject();\r\n        }\r\n    });\r\n};\r\n\r\nexport const CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE = 'CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE';\r\nexport const handleSaveEditedImage = () => {\r\n    return (dispatch, getState) => {\r\n        if (getState().editImage.mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n            getEditedImage(getState().editImage.imgEditor)\r\n                .then(blob => {\r\n                    dispatch({\r\n                        type: CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE,\r\n                        blob\r\n                    });\r\n                });\r\n            return;\r\n        }\r\n\r\n        getEditedImage(getState().editImage.imgEditor)\r\n            .then(blob => {\r\n                // dismiss edit image dialog\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                    waitForUploading: true\r\n                });\r\n                // start uploading image\r\n                uploadImage(dispatch, getState().auth.user, getState().editImage, blob);\r\n            });\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload an image (logo or profile picture)\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const uploadImage = async (dispatch, user, editImageState, blob) => {\r\n    const {\r\n        mode,\r\n        imgPreIndex\r\n    } = editImageState;\r\n\r\n    let firebaseStorage = firebase.storage();\r\n    let firebaseDB = firebase.database();\r\n\r\n    if (mode !== UPLOAD_PROFILE_PICTURE_MODE && mode !== UPLOAD_LOGO_FIRST_TIME_MODE && mode !== UPLOAD_LOGO_MODE) {\r\n        return;\r\n    }\r\n\r\n    dispatch({\r\n        type: UPLOADING,\r\n        mode,\r\n        progress: 0\r\n    });\r\n\r\n    let storageID = 0;\r\n    let storageLocation = '';\r\n\r\n    // upload logo\r\n    if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n\r\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n        if (imgPreIndex !== -1) {\r\n            // don't need to check for BusinessProfile and logo nodes here because imgPreIndex only be set if the user already has images uploaded\r\n            const imgName = user.BusinessProfile.logo[imgPreIndex].storageID;\r\n            // delete old image\r\n            await firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.LOGOS_CHILD}/${imgName}`)\r\n                .delete();\r\n        } else {\r\n            // do nothing here\r\n        }\r\n        storageID = myUtils.getCurrentDate();\r\n        storageLocation = `${DB_CONST.LOGOS_CHILD}/${storageID}`;\r\n    }\r\n    // upload profile picture\r\n    else if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\r\n\r\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n        if (imgPreIndex !== -1) {\r\n            // don't need to check for profilePicture node here because imgPreIndex only be set if the user already has images uploaded\r\n            const imgName = user.profilePicture[imgPreIndex].storageID;\r\n            // delete old image\r\n            await firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.PROFILE_PICTURES_CHILD}/${imgName}`)\r\n                .delete();\r\n        } else {\r\n            // do nothing here\r\n        }\r\n        storageID = myUtils.getCurrentDate();\r\n        storageLocation = `${DB_CONST.PROFILE_PICTURES_CHILD}/${storageID}`;\r\n    }\r\n    // mode invalid\r\n    else {\r\n        return;\r\n    }\r\n\r\n    const storageRef = firebaseStorage\r\n        .ref(DB_CONST.USERS_CHILD)\r\n        .child(user.id)\r\n        .child(storageLocation);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // upload logo to firebase storage\r\n        const uploadTask = storageRef.put(blob);\r\n        uploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode,\r\n                progress: progress.toFixed(0)\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100\r\n            });\r\n\r\n            return reject(error);\r\n            // logo successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded logo\r\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\r\n\r\n                const imgUploadedObj = {\r\n                    storageID: storageID,\r\n                    url: imgDownloadURL\r\n                };\r\n\r\n                let prevNodeImgs = [];\r\n                let firebaseRef = firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .child(user.id);\r\n\r\n                // upload logo\r\n                if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n                    // user has not uploaded any images\r\n                    if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\r\n                        prevNodeImgs = [];\r\n                        prevNodeImgs.push(imgUploadedObj);\r\n                    }\r\n                    // user has uploaded images\r\n                    else {\r\n                        prevNodeImgs = user.BusinessProfile.logo;\r\n\r\n                        // edit previous image --> don't to save new, just need to edit the node instead\r\n                        if (imgPreIndex !== -1) {\r\n                            prevNodeImgs.splice(imgPreIndex, 1);\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                        // upload new image\r\n                        else {\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                    }\r\n\r\n                    firebaseRef = firebaseRef\r\n                        .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n                        .child(DB_CONST.LOGO_CHILD);\r\n                }\r\n                // upload profile picture\r\n                else {\r\n                    // user has not uploaded any images\r\n                    if (!user.profilePicture) {\r\n                        prevNodeImgs = [];\r\n                        prevNodeImgs.push(imgUploadedObj);\r\n                    } else {\r\n                        prevNodeImgs = user.profilePicture;\r\n\r\n                        // edit previous image --> don't to save new, just need to edit the node instead\r\n                        if (imgPreIndex !== -1) {\r\n                            prevNodeImgs.splice(imgPreIndex, 1);\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                        // upload new image\r\n                        else {\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                    }\r\n\r\n                    firebaseRef = firebaseRef\r\n                        .child(DB_CONST.PROFILE_PICTURE_CHILD);\r\n                }\r\n\r\n                // update firebase realtime database\r\n                firebaseRef\r\n                    .set(prevNodeImgs)\r\n                    .then(() => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_DONE_MODE,\r\n                            progress: 100\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                            waitForUploading: false\r\n                        });\r\n\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_ERROR,\r\n                            progress: 100\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                            waitForUploading: false\r\n                        });\r\n\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    Divider,\r\n    IconButton,\r\n    Typography,\r\n    CircularProgress,\r\n    Slider\r\n} from '@material-ui/core';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Image\r\n} from 'react-bootstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport FlexView from 'react-flexview';\r\nimport Files from 'react-files';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport AvatarEditor from 'react-avatar-editor';\r\n\r\nimport {\r\n    UPLOAD_PROFILE_PICTURE_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.auth.user,\r\n\r\n        open: state.editImage.editImageDialogOpen,\r\n        mode: state.editImage.mode,\r\n        previousPhotos: state.editImage.previousPhotos,\r\n        imgPreEdited: state.editImage.imgPreEdited,\r\n        imgPreEditedLoaded: state.editImage.imgPreEditedLoaded,\r\n        imgPreIndex: state.editImage.imgPreIndex,\r\n        imgEdited: state.editImage.imgEdited,\r\n        imgZoom: state.editImage.imgZoom,\r\n\r\n        isMobile: state.MediaQueryState.isMobile\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onClose: () => dispatch(editImageActions.toggleEditImageDialog(null)),\r\n        setEditorReference: (editor) => dispatch(editImageActions.setImageEditorReference(editor)),\r\n        handleImageFilesChanged: (files) => dispatch(editImageActions.handleImageFilesChanged(files)),\r\n        handleImageFileError: (error, file) => dispatch(editImageActions.handleImageFileError(error, file)),\r\n        handleSliderChanged: (event, newValue) => dispatch(editImageActions.handleZoomSliderChanged(event, newValue)),\r\n        onPreviousImageItemClick: (index) => dispatch(editImageActions.handlePreviousImageItemClick(index)),\r\n        cancelEditingCurrentImage: () => dispatch(editImageActions.cancelEditingCurrentImage()),\r\n        viewEditedImagePreview: () => dispatch(editImageActions.viewEditedImagePreview()),\r\n        saveEditedImage: () => dispatch(editImageActions.handleSaveEditedImage()),\r\n\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\r\n    }\r\n};\r\n\r\nclass EditImageDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            open,\r\n            mode,\r\n            previousPhotos,\r\n            imgPreEdited,\r\n            imgPreEditedLoaded,\r\n            imgPreIndex,\r\n            imgEdited,\r\n            imgZoom,\r\n\r\n            onClose,\r\n            setEditorReference,\r\n            handleImageFilesChanged,\r\n            handleImageFileError,\r\n            handleSliderChanged,\r\n            onPreviousImageItemClick,\r\n            cancelEditingCurrentImage,\r\n            viewEditedImagePreview,\r\n            saveEditedImage,\r\n\r\n            closeFeedbackSnackbar,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={open}\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                fullScreen={isMobile}\r\n                onClose={onClose}\r\n                {...other}\r\n            >\r\n                <DialogContent\r\n                    style={{\r\n                        padding: 0\r\n                    }}\r\n                >\r\n                    <Container\r\n                        fluid\r\n                        style={{\r\n                            padding: 0\r\n                        }}\r\n                    >\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                style={{\r\n                                    backgroundColor: colors.kick_starter_background_color_1,\r\n                                    paddingTop: 6,\r\n                                    paddingBottom: 6,\r\n                                    paddingLeft: 15,\r\n                                    paddingRight: 15\r\n                                }}\r\n                            >\r\n                                <FlexView\r\n                                    vAlignContent=\"center\"\r\n                                >\r\n                                    <FlexView\r\n                                        grow={8}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            {\r\n                                                mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                                                    ?\r\n                                                    \"Upload profile picture\"\r\n                                                    :\r\n                                                    \"Upload logo\"\r\n                                            }\r\n                                        </Typography>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView\r\n                                        grow={1}\r\n                                        hAlignContent=\"right\"\r\n                                    >\r\n                                        <IconButton\r\n                                            onClick={onClose}\r\n                                        >\r\n                                            <CloseIcon\r\n                                                fontSize=\"small\"\r\n                                            />\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Divider/>\r\n                            </Col>\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                style={{\r\n                                    padding: 18\r\n                                }}\r\n                            >\r\n                                <FlexView\r\n                                    column\r\n                                    width=\"100%\"\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body2\"\r\n                                        color=\"textSecondary\"\r\n                                        align=\"center\"\r\n                                        style={{\r\n                                            marginBottom: 25\r\n                                        }}\r\n                                    >\r\n                                        Upload a new photo or choose from your previous photos\r\n                                    </Typography>\r\n\r\n                                    <Files\r\n                                        className={css(styles.img_drop_zone)}\r\n                                        onChange={handleImageFilesChanged}\r\n                                        onError={handleImageFileError}\r\n                                        accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                        minFileSize={0}\r\n                                        multiple\r\n                                        clickable\r\n                                        onClick={closeFeedbackSnackbar}\r\n                                    >\r\n                                        <FlexView\r\n                                            vAlignContent=\"center\"\r\n                                            hAlignContent=\"center\"\r\n                                        >\r\n                                            <AddIcon\r\n                                                fontSize=\"small\"\r\n                                                style={{\r\n                                                    marginRight: 8\r\n                                                }}\r\n                                            />\r\n                                            Upload photo\r\n                                        </FlexView>\r\n                                    </Files>\r\n\r\n                                    <FlexView\r\n                                        marginTop={22}\r\n                                        hAlignContent=\"center\"\r\n                                        style={{\r\n                                            position: 'relative',\r\n                                            width: \"100%\",\r\n                                            height: 325\r\n                                        }}\r\n                                    >\r\n                                        <AvatarEditor\r\n                                            ref={setEditorReference}\r\n                                            image={imgPreEdited}\r\n                                            width={270}\r\n                                            height={270}\r\n                                            border={25}\r\n                                            borderRadius={150}\r\n                                            disableBoundaryChecks={false}\r\n                                            disableHiDPIScaling={false}\r\n                                            scale={imgZoom}\r\n                                            style={{\r\n                                                position: 'absolute',\r\n                                                top: 0\r\n                                            }}\r\n                                        />\r\n                                        {\r\n                                            imgPreEditedLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    hAlignContent=\"center\"\r\n                                                    vAlignContent=\"center\"\r\n                                                    style={{\r\n                                                        position: 'absolute',\r\n                                                        width: \"100%\",\r\n                                                        height: \"100%\",\r\n                                                        top: 0,\r\n                                                        zIndex: 1\r\n                                                    }}\r\n                                                >\r\n                                                    <CircularProgress\r\n                                                        color=\"primary\"\r\n                                                    />\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        this.renderSelectedPreviousPhotoStatus()\r\n                                    }\r\n\r\n                                    <FlexView\r\n                                        width={310}\r\n                                        marginTop={15}\r\n                                        vAlignContent=\"center\"\r\n                                    >\r\n                                        <ImageIcon fontSize=\"small\"/>\r\n                                        <Slider\r\n                                            min={1}\r\n                                            max={2.5}\r\n                                            step={0.001}\r\n                                            value={imgZoom}\r\n                                            onChange={handleSliderChanged}\r\n                                            style={{\r\n                                                marginLeft: 11,\r\n                                                marginRight: 11\r\n                                            }}\r\n                                        />\r\n                                        <ImageIcon fontSize=\"large\"/>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView\r\n                                        marginTop={15}\r\n                                        hAlignContent=\"right\"\r\n                                    >\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"outlined\"\r\n                                            color=\"primary\"\r\n                                            onClick={() => cancelEditingCurrentImage()}\r\n                                        >\r\n                                            Cancel\r\n                                        </Button>\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            disabled={!imgPreEdited}\r\n                                            onClick={() => viewEditedImagePreview()}\r\n                                            style={{\r\n                                                marginLeft: 16,\r\n                                                marginRight: 16\r\n                                            }}\r\n                                        >\r\n                                            Preview\r\n                                        </Button>\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            disabled={!imgPreEdited}\r\n                                            onClick={() => saveEditedImage()}\r\n                                        >\r\n                                            Save\r\n                                        </Button>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        !imgEdited\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            (\r\n                                                <FlexView\r\n                                                    marginTop={20}\r\n                                                    width={270}\r\n                                                    height={270}\r\n                                                >\r\n                                                    <Image\r\n                                                        src={window.URL.createObjectURL(imgEdited)}\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        style={{\r\n                                                            width: \"100%\",\r\n                                                            height: \"auto\",\r\n                                                            objectFit: \"scale-down\"\r\n                                                        }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            )\r\n                                    }\r\n\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Divider/>\r\n                            </Col>\r\n\r\n                            {\r\n                                // previous photos set to null --> don't want to display previous photos\r\n                                !previousPhotos\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        style={{\r\n                                            padding: 15\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            color=\"textSecondary\"\r\n                                        >\r\n                                            Your photos\r\n                                        </Typography>\r\n\r\n                                        <Row\r\n                                            noGutters\r\n                                            style={{\r\n                                                padding: 12\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                previousPhotos\r\n                                                    .sort((photo1, photo2) => photo2.storageID - photo1.storageID)\r\n                                                    .map((previousPhoto, index) => (\r\n                                                        <Col\r\n                                                            key={index}\r\n                                                            xs={6}\r\n                                                            sm={4}\r\n                                                            md={3}\r\n                                                            lg={3}\r\n                                                            onClick={() => onPreviousImageItemClick(index)}\r\n                                                        >\r\n                                                            <FlexView\r\n                                                                hAlignContent=\"center\"\r\n                                                                vAlignContent=\"center\"\r\n                                                                style={{\r\n                                                                    width: \"100%\",\r\n                                                                    padding: 5\r\n                                                                }}\r\n                                                            >\r\n                                                                <Image\r\n                                                                    key={index}\r\n                                                                    src={previousPhoto.url}\r\n                                                                    className={css(styles.previous_img_item_selected)}\r\n                                                                    style={{\r\n                                                                        height: 128,\r\n                                                                        width: 128,\r\n                                                                        objectFit: \"contain\"\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Render selected previous photo's status\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderSelectedPreviousPhotoStatus = () => {\r\n        const {\r\n            user,\r\n            imgPreIndex,\r\n            mode\r\n        } = this.props;\r\n\r\n        let msg = '';\r\n\r\n        if (imgPreIndex === -1) {\r\n            return null;\r\n        }\r\n\r\n        // upload profile picture\r\n        if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\r\n            // user has no previous profile pictures\r\n            if (!user.profilePicture) {\r\n                return null;\r\n            }\r\n            // user has previous profile pictures\r\n            else {\r\n                // the selected photo is not the current profile picture\r\n                if (imgPreIndex !== user.profilePicture.findIndex(profilePic => !profilePic.hasOwnProperty('removed'))) {\r\n                    msg = 'This photo is a previous profile picture.';\r\n                } else {\r\n                    msg = 'This photo is the current profile picture.';\r\n                }\r\n            }\r\n        }\r\n        // upload logo\r\n        else {\r\n            // user has no previous logos\r\n            if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\r\n                return null;\r\n            }\r\n            // user has previous logos\r\n            else {\r\n                // the selected photo is not the current logo\r\n                if (imgPreIndex !== user.BusinessProfile.logo.findIndex(logo => !logo.hasOwnProperty('removed'))) {\r\n                    msg = 'This photo is a previous logo.';\r\n                } else {\r\n                    msg = 'This photo is the current logo.';\r\n                }\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Typography\r\n                align=\"center\"\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n                style={{\r\n                    marginTop: 12\r\n                }}\r\n            >\r\n                {msg}\r\n            </Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => (<EditImageDialog {...props} forwardedRef={ref}/>))\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    img_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    previous_img_item_selected: {\r\n        ':hover': {\r\n            border: `4px solid ${colors.primaryColor}`,\r\n            cursor: 'pointer',\r\n            opacity: 0.90\r\n        }\r\n    }\r\n});","import {\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_DONE_MODE,\r\n    UPLOAD_ERROR\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {UPLOADING} from  './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const TOGGLE_EDIT_VIDEO_DIALOG = 'TOGGLE_EDIT_VIDEO_DIALOG';\r\nexport const toggleEditVideoDialog = mode => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n            mode, // upload video (first time or not)\r\n            user: getState().auth.user\r\n        });\r\n    }\r\n};\r\n\r\nexport const VIDEO_TYPE_CHOSEN = 'VIDEO_TYPE_CHOSEN';\r\nexport const chooseVideoType = videoType => {\r\n    return {\r\n        type: VIDEO_TYPE_CHOSEN,\r\n        videoType\r\n    }\r\n};\r\n\r\nexport const VIDEO_URL_CHANGED = 'VIDEO_URL_CHANGED';\r\nexport const handleVideoURLChanged = event => {\r\n    return {\r\n        type: VIDEO_URL_CHANGED,\r\n        url: event.target.value\r\n    }\r\n};\r\n\r\nexport const VIDEO_FILE_CHANGED = 'VIDEO_FILE_CHANGED';\r\nexport const handleVideoFilesChanged = files => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\r\n            return;\r\n        }\r\n        const blob = new Blob([files[files.length - 1]], {type: 'video/mp4'});\r\n        dispatch({\r\n            type: VIDEO_FILE_CHANGED,\r\n            blob\r\n        });\r\n    }\r\n};\r\n\r\nexport const VIDEO_FILE_ERROR = 'VIDEO_FILE_ERROR';\r\nexport const handleVideoFileError = (error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n            message: `Video is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n            color: \"error\",\r\n            position: \"bottom\"\r\n        };\r\n    }\r\n};\r\n\r\nexport const CREATE_BUSINESS_PROFILE_SAVE_VIDEO = 'CREATE_BUSINESS_PROFILE_SAVE_VIDEO';\r\nexport const handleSaveVideo = () => {\r\n    return (dispatch, getState) => {\r\n        if (getState().editVideo.mode === UPLOAD_VIDEO_FIRST_TIME_MODE) {\r\n            dispatch({\r\n                type: CREATE_BUSINESS_PROFILE_SAVE_VIDEO,\r\n                video: getState().editVideo.videoChosen\r\n            });\r\n            return;\r\n        }\r\n        // dismiss edit image dialog\r\n        dispatch({\r\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n            waitForUploading: true\r\n        });\r\n        // start uploading image\r\n        uploadVideo(dispatch, getState().auth.user, getState().editVideo, getState().editVideo.videoChosen);\r\n    }\r\n};\r\n\r\nexport const PREVIOUS_VIDEO_SELECTED = 'PREVIOUS_VIDEO_SELECTED';\r\nexport const handlePreviousVideoItemClick = index => {\r\n    return {\r\n        type: PREVIOUS_VIDEO_SELECTED,\r\n        selectedIndex: index\r\n    }\r\n};\r\n\r\nexport const CANCEL_EDITING_CURRENT_VIDEO = 'CANCEL_EDITING_CURRENT_VIDEO';\r\nexport const cancelEditingCurrentVideo = () => {\r\n    return {\r\n        type: CANCEL_EDITING_CURRENT_VIDEO\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload intro video to firebase storage\r\n *\r\n * @param dispatch\r\n * @param user\r\n * @param editVideoState\r\n * @param video\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const uploadVideo = async (dispatch, user, editVideoState, video) => {\r\n\r\n    const {\r\n        mode,\r\n        videoPreIndex\r\n    } = editVideoState;\r\n\r\n    dispatch({\r\n        type: UPLOADING,\r\n        mode,\r\n        progress: 0\r\n    });\r\n\r\n    let downloadedPreviousVideo = null;\r\n\r\n    // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n    // video entry with storageID = \"\" is the one not stored in Firebase storage\r\n    if (videoPreIndex !== -1) {\r\n        // select previously uploaded video as the current video\r\n        if (user.BusinessProfile.video[videoPreIndex].storageID !== \"\") {\r\n            // send request through a CORS proxy can avoid cors problem\r\n            // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\r\n            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n\r\n            await fetch(proxyUrl + user.BusinessProfile.video[videoPreIndex].url)\r\n                .then(response => {\r\n                    return response.blob();\r\n                })\r\n                .then(blob => {\r\n                    downloadedPreviousVideo = blob;\r\n                });\r\n\r\n            // don't need to check for BusinessProfile and video nodes here because videoPreIndex only be set if the user already has videos uploaded\r\n            const videoName = user.BusinessProfile.video[videoPreIndex].storageID;\r\n            // delete old video, don't need to wait for this to complete as the file will be deleted anyway\r\n            firebase.storage()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.INTRO_VIDEOS_CHILD}/${videoName}`)\r\n                .delete();\r\n        }\r\n        // select previous video URL as the current video\r\n        else {\r\n            const videoUploadedObj = {\r\n                storageID: \"\",\r\n                dateUploaded: utils.getCurrentDate(),\r\n                url: video\r\n            };\r\n\r\n            return new Promise((resolve, reject) => {\r\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        }\r\n    } else {\r\n        // do nothing here\r\n    }\r\n\r\n    // upload a new video URL\r\n    if (typeof (video) === \"string\") {\r\n        const videoUploadedObj = {\r\n            storageID: \"\",\r\n            dateUploaded: utils.getCurrentDate(),\r\n            url: video\r\n        };\r\n\r\n        return new Promise((resolve, reject) => {\r\n            putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                .then(() => {\r\n                    return resolve();\r\n                })\r\n                .catch(error => {\r\n                    return reject(error);\r\n                });\r\n        });\r\n    }\r\n\r\n    const storageID = utils.getCurrentDate();\r\n    const storageLocation = `${DB_CONST.INTRO_VIDEOS_CHILD}/${storageID}`;\r\n\r\n    const storageRef = firebase.storage()\r\n        .ref(DB_CONST.USERS_CHILD)\r\n        .child(user.id)\r\n        .child(storageLocation);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // upload logo to firebase storage\r\n        const videoUploadTask = storageRef.put(downloadedPreviousVideo ? downloadedPreviousVideo : video);\r\n        videoUploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode,\r\n                progress: progress.toFixed(0)\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100\r\n            });\r\n\r\n            return reject(error);\r\n            // video successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded video\r\n            videoUploadTask.snapshot.ref.getDownloadURL().then(videoDownloadURL => {\r\n\r\n                const videoUploadedObj = {\r\n                    storageID: storageID,\r\n                    dateUploaded: storageID,\r\n                    url: videoDownloadURL\r\n                };\r\n\r\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * Handle to put the uploaded video to Firebase realtime\r\n *\r\n * @param dispatch\r\n * @param user\r\n * @param videoUploadedObj\r\n * @param videoPreIndex\r\n * @returns {Promise<unknown>}\r\n */\r\nconst putUploadedVideoToFirebaseRealtime = async (dispatch, user, videoUploadedObj, videoPreIndex) => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n        let prevNodeVideos = [];\r\n        let firebaseRef = firebase.database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(user.id)\r\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n            .child(DB_CONST.INTRO_VIDEO_CHILD);\r\n\r\n        // user has not uploaded any videos\r\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\r\n            prevNodeVideos = [];\r\n            prevNodeVideos.push(videoUploadedObj);\r\n        }\r\n        // user has uploaded videos\r\n        else {\r\n            prevNodeVideos = user.BusinessProfile.video;\r\n\r\n            // edit previous video --> don't need to save new, just need to edit the node instead\r\n            if (videoPreIndex !== -1) {\r\n                prevNodeVideos.splice(videoPreIndex, 1);\r\n                prevNodeVideos.forEach(imgItem => {\r\n                    imgItem.removed = true;\r\n                });\r\n                prevNodeVideos.push(videoUploadedObj);\r\n            }\r\n            // upload new video\r\n            else {\r\n                prevNodeVideos.forEach(imgItem => {\r\n                    imgItem.removed = true;\r\n                });\r\n                prevNodeVideos.push(videoUploadedObj);\r\n            }\r\n        }\r\n\r\n        firebaseRef\r\n            .set(prevNodeVideos)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_DONE_MODE,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n                    waitForUploading: false\r\n                });\r\n\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_ERROR,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n                    waitForUploading: false\r\n                });\r\n\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    Divider,\r\n    IconButton,\r\n    Typography,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport Files from 'react-files';\r\nimport { css, StyleSheet } from 'aphrodite';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nexport const VIDEO_UPLOAD_FILE_SELECTED = 1;\r\nexport const VIDEO_UPLOAD_URL_SELECTED = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.auth.user,\r\n\r\n        allowVideoUpload:\r\n            state.manageClubAttributes.clubAttributes && state.manageClubAttributes.clubAttributes.hasOwnProperty('allowVideoUpload')\r\n                ?\r\n                state.manageClubAttributes.clubAttributes.allowVideoUpload\r\n                :\r\n                false,\r\n\r\n        open: state.editVideo.editVideoDialogOpen,\r\n        mode: state.editVideo.mode,\r\n\r\n        videoTypeSelected: state.editVideo.videoTypeSelected,\r\n        videoChosen: state.editVideo.videoChosen,\r\n        previousVideos: state.editVideo.previousVideos,\r\n        videoPreIndex: state.editVideo.videoPreIndex,\r\n\r\n        isMobile: state.MediaQueryState.isMobile\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onClose: () => dispatch(editVideoActions.toggleEditVideoDialog(null)),\r\n        chooseVideoType: (videoType) => dispatch(editVideoActions.chooseVideoType(videoType)),\r\n        handleVideoURLChanged: (event) => dispatch(editVideoActions.handleVideoURLChanged(event)),\r\n        handleVideoFileChanged: (files) => dispatch(editVideoActions.handleVideoFilesChanged(files)),\r\n        handleVideoFileError: (error, file) => dispatch(editVideoActions.handleVideoFileError(error, file)),\r\n        cancelEditingCurrentVideo: () => dispatch(editVideoActions.cancelEditingCurrentVideo()),\r\n        handlePreviousVideoItemClick: (index) => dispatch(editVideoActions.handlePreviousVideoItemClick(index)),\r\n        handleSaveVideo: () => dispatch(editVideoActions.handleSaveVideo()),\r\n\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\r\n    }\r\n};\r\n\r\nclass EditVideoDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            isMobile,\r\n            open,\r\n            user,\r\n\r\n            allowVideoUpload,\r\n            videoTypeSelected,\r\n\r\n            previousVideos,\r\n            videoChosen,\r\n            videoPreIndex,\r\n\r\n            onClose,\r\n            chooseVideoType,\r\n            handleVideoURLChanged,\r\n            handleVideoFileChanged,\r\n            handleVideoFileError,\r\n            cancelEditingCurrentVideo,\r\n            handlePreviousVideoItemClick,\r\n            handleSaveVideo,\r\n\r\n            closeFeedbackSnackbar,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={open}\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                fullScreen={isMobile}\r\n                onClose={onClose}\r\n                {...other}\r\n            >\r\n                <DialogContent\r\n                    style={{\r\n                        padding: 0\r\n                    }}\r\n                >\r\n                    <Container\r\n                        fluid\r\n                        style={{\r\n                            padding: 0\r\n                        }}\r\n                    >\r\n                        <Row noGutters>\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                style={{\r\n                                    backgroundColor: colors.kick_starter_background_color_1,\r\n                                    paddingTop: 6,\r\n                                    paddingBottom: 6,\r\n                                    paddingLeft: 15,\r\n                                    paddingRight: 15\r\n                                }}\r\n                            >\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FlexView\r\n                                        grow={8}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Upload introduction video\r\n                                        </Typography>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView\r\n                                        grow={1}\r\n                                        hAlignContent=\"right\"\r\n                                    >\r\n                                        <IconButton\r\n                                            onClick={onClose}\r\n                                        >\r\n                                            <CloseIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Divider />\r\n                            </Col>\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                style={{\r\n                                    padding: 18\r\n                                }}\r\n                            >\r\n                                <FlexView\r\n                                    column\r\n                                    width=\"100%\"\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body2\"\r\n                                        color=\"textSecondary\"\r\n                                        align=\"center\"\r\n                                        style={{\r\n                                            marginBottom: 25\r\n                                        }}\r\n                                    >\r\n                                        Upload a new video or choose from your previous videos\r\n                                    </Typography>\r\n\r\n                                    {\r\n                                        allowVideoUpload\r\n                                            ?\r\n                                            <FlexView>\r\n                                                <Button\r\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                    color=\"primary\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    onClick={\r\n                                                        () => chooseVideoType(\r\n                                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                VIDEO_UPLOAD_FILE_SELECTED\r\n                                                        )\r\n                                                    }\r\n                                                >\r\n                                                    {\r\n                                                        videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                            ?\r\n                                                            \"Cancel upload a video\"\r\n                                                            :\r\n                                                            \"Upload a video\"\r\n                                                    }\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                    color=\"primary\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    onClick={\r\n                                                        () => chooseVideoType(\r\n                                                            videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                VIDEO_UPLOAD_URL_SELECTED\r\n                                                        )\r\n                                                    }\r\n                                                    style={{\r\n                                                        marginLeft: 20\r\n                                                    }}\r\n                                                >\r\n                                                    {\r\n                                                        videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                            ?\r\n                                                            \"Cancel upload a video URL\"\r\n                                                            :\r\n                                                            \"Upload a video URL\"\r\n                                                    }\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <Button\r\n                                                variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                color=\"primary\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                onClick={() => chooseVideoType(VIDEO_UPLOAD_URL_SELECTED)}\r\n                                            >\r\n                                                {\r\n                                                    videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                        ?\r\n                                                        \"Cancel upload a video URL\"\r\n                                                        :\r\n                                                        \"Upload a video URL\"\r\n                                                }\r\n                                            </Button>\r\n                                    }\r\n\r\n                                    {/** Upload video field (upload file or URL) */}\r\n                                    {\r\n                                        !videoTypeSelected\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                ?\r\n                                                <FlexView\r\n                                                    column\r\n                                                    marginTop={20}\r\n                                                >\r\n                                                    <Files\r\n                                                        className={css(styles.video_drop_zone)}\r\n                                                        onChange={handleVideoFileChanged}\r\n                                                        onError={handleVideoFileError}\r\n                                                        accepts={['video/mp4']}\r\n                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                        minFileSize={0}\r\n                                                        multiple\r\n                                                        clickable\r\n                                                        onClick={closeFeedbackSnackbar}\r\n                                                    >\r\n                                                        <FlexView\r\n                                                            vAlignContent=\"center\"\r\n                                                            hAlignContent=\"center\"\r\n                                                        >\r\n                                                            <AddIcon\r\n                                                                fontSize=\"small\"\r\n                                                                style={{\r\n                                                                    marginRight: 8\r\n                                                                }}\r\n                                                            />\r\n                                                            Upload video\r\n                                                        </FlexView>\r\n                                                    </Files>\r\n                                                </FlexView>\r\n                                                :\r\n                                                <TextField\r\n                                                    name=\"videoChosen\"\r\n                                                    placeholder=\"Enter your video URL\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={\r\n                                                        !videoChosen\r\n                                                            ?\r\n                                                            ''\r\n                                                            :\r\n                                                            typeof(videoChosen) === \"string\"\r\n                                                                ?\r\n                                                                videoChosen\r\n                                                                :\r\n                                                                ''\r\n                                                    }\r\n                                                    fullWidth\r\n                                                    onChange={handleVideoURLChanged}\r\n                                                    style={{\r\n                                                        marginTop: 20\r\n                                                    }}\r\n                                                />\r\n                                    }\r\n\r\n                                    {/** Preview video */}\r\n                                    {\r\n                                        !videoChosen\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView\r\n                                                marginTop={20}\r\n                                                hAlignContent=\"center\"\r\n                                                style={{\r\n                                                    width: \"100%\"\r\n                                                }}\r\n                                            >\r\n                                                <ReactPlayer\r\n                                                    url={\r\n                                                        typeof(videoChosen) === \"string\"\r\n                                                            ?\r\n                                                            videoChosen\r\n                                                            :\r\n                                                            window.URL.createObjectURL(videoChosen)\r\n                                                    }\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                    width=\"100%\"\r\n                                                    height={280}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Previous/current video status */}\r\n                                    {\r\n                                        this.renderSelectedPreviousVideoStatus()\r\n                                    }\r\n\r\n                                    {/** Cancel/Save */}\r\n                                    {\r\n                                        !videoChosen\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView\r\n                                                marginTop={20}\r\n                                                hAlignContent=\"right\"\r\n                                            >\r\n                                                <Button\r\n                                                    size=\"medium\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => cancelEditingCurrentVideo()}\r\n                                                    style={{\r\n                                                        marginRight: 8\r\n                                                    }}\r\n                                                >\r\n                                                    Cancel\r\n                                                </Button>\r\n                                                <Button\r\n                                                    size=\"medium\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"contained\"\r\n                                                    color=\"primary\"\r\n                                                    disabled={!videoChosen}\r\n                                                    onClick={handleSaveVideo}\r\n                                                    style={{\r\n                                                        marginLeft: 8\r\n                                                    }}\r\n                                                >\r\n                                                    Save\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            {/** Divider */}\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Divider\r\n                                    style={{\r\n                                        marginTop: 8\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n\r\n                            {/** Previous videos */}\r\n                            {\r\n                                // previous videos set to null --> don't want to display previous videos\r\n                                !previousVideos\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        style={{\r\n                                            padding: 15\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            color=\"textSecondary\"\r\n                                        >\r\n                                            Your videos\r\n                                        </Typography>\r\n\r\n                                        <Row\r\n                                            noGutters\r\n                                            style={{\r\n                                                padding: 12\r\n                                            }}\r\n                                        >\r\n                                            {\r\n                                                previousVideos\r\n                                                    .sort((video1, video2) => video2.dateUploaded - video1.dateUploaded)\r\n                                                    .map((previousVideo, index) => (\r\n                                                        <Col\r\n                                                            key={index}\r\n                                                            xs={6}\r\n                                                            sm={4}\r\n                                                            md={4}\r\n                                                            lg={4}\r\n                                                            onClick={() => handlePreviousVideoItemClick(index)}\r\n                                                        >\r\n                                                            <FlexView\r\n                                                                hAlignContent=\"center\"\r\n                                                                vAlignContent=\"center\"\r\n                                                                style={{\r\n                                                                    width: \"100%\",\r\n                                                                    padding: 10\r\n                                                                }}\r\n                                                            >\r\n                                                                <ReactPlayer\r\n                                                                    url={previousVideo.url}\r\n                                                                    playing={false}\r\n                                                                    controls={false}\r\n                                                                    playsinline={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                    className={css(styles.previous_video_item_selected)}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        )\r\n    }\r\n\r\n    renderSelectedPreviousVideoStatus = () => {\r\n        const {\r\n            user,\r\n            videoPreIndex,\r\n        } = this.props;\r\n\r\n        let msg = '';\r\n\r\n        if (videoPreIndex === -1) {\r\n            return null;\r\n        }\r\n\r\n        // user has no previous videos\r\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\r\n            return null;\r\n        }\r\n        // user has previous videos\r\n        else {\r\n            // the selected photo is not the current video\r\n            if (videoPreIndex !== user.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))) {\r\n                msg = 'This video is a previous introduction video.';\r\n            }\r\n            else {\r\n                msg = 'This video is the current introduction video.';\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Typography\r\n                align=\"center\"\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n                style={{\r\n                    marginTop: 12\r\n                }}\r\n            >\r\n                {msg}\r\n            </Typography>\r\n        );\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <EditVideoDialog {...props} forwardedRef={ref} />)\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    video_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    previous_video_item_selected: {\r\n        ':hover': {\r\n            border: `4px solid ${colors.primaryColor}`,\r\n            cursor: 'pointer',\r\n            opacity: 0.90\r\n        }\r\n    }\r\n});","import React, { Component } from \"react\";\r\nimport {\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport FlexView from \"react-flexview\";\r\nimport { StyleSheet, css } from \"aphrodite\";\r\nimport * as colors from \"../../values/colors\";\r\n\r\nexport default class PageNotFound extends Component {\r\n    render() {\r\n        return (\r\n            <FlexView\r\n                column\r\n                hAlignContent=\"center\"\r\n                marginTop={50}\r\n                marginLeft=\"10%\"\r\n                marginRight=\"10%\"\r\n            >\r\n                <Typography\r\n                    className={css(styles.error_text)}\r\n                >\r\n                    404 Error\r\n                </Typography>\r\n                <Typography\r\n                    className={css(styles.page_not_found_text)}\r\n                >\r\n                    Page not found\r\n                </Typography>\r\n                <Typography\r\n                    className={css(styles.explain_text)}\r\n                >\r\n                    We are sorry, the page you requested could not be found.\r\n                </Typography>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    error_text: {\r\n        fontSize: 65,\r\n        color: colors.primaryColor,\r\n        textAlign: 'center'\r\n    },\r\n\r\n    page_not_found_text: {\r\n        fontSize: 50,\r\n        fontWeight: 'bold',\r\n        marginTop: 30,\r\n        marginBottom: 20,\r\n        textAlign: 'center'\r\n    },\r\n\r\n    explain_text: {\r\n        fontSize: 40,\r\n        color: colors.gray_600,\r\n        textAlign: 'center'\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport PageNotFound from './PageNotFound';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class PageNotFoundWhole extends Component {\r\n    render() {\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                <Row\r\n                    noGutters\r\n                    style={{\r\n                        backgroundColor: colors.white\r\n                    }}\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        md={12}\r\n                        lg={12}\r\n                    >\r\n                        <FlexView\r\n                            height={1}\r\n                            style={{\r\n                                backgroundColor: colors.gray_300\r\n                            }}\r\n                        />\r\n                    </Col>\r\n                    <Col\r\n                        xs={12}\r\n                        md={12}\r\n                        lg={12}\r\n                    >\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}","/**\r\n * Admin interface\r\n */\r\nimport User from \"./user\";\r\n\r\nexport default interface Admin {\r\n    id: string;\r\n    anid: string;\r\n    email: string;\r\n    superAdmin: boolean;\r\n    superGroupAdmin: boolean;\r\n    type: number;\r\n    isInvestWest: boolean;\r\n    dateAdded?: number; // superAdmin doesn't have this field\r\n}\r\n\r\n/**\r\n * Check if a user is an admin\r\n *\r\n * @param user\r\n */\r\nexport const isAdmin = (user: User | Admin): Admin | null => {\r\n    if (\"anid\" in user) {\r\n        return JSON.parse(JSON.stringify(user));\r\n    }\r\n    return null;\r\n}","import GroupProperties from \"./group_properties\";\r\n\r\nexport default interface GroupOfMembership {\r\n    group: GroupProperties;\r\n    joinedDate: number;\r\n    isHomeGroup: boolean;\r\n    userInGroupStatus: number;\r\n}\r\n\r\nexport const getHomeGroup = (groups: GroupOfMembership[]): GroupOfMembership | null => {\r\n    const index = groups.findIndex(group => group.isHomeGroup);\r\n    if (index !== -1) {\r\n        return groups[index];\r\n    }\r\n    return null;\r\n}","/**\r\n * User interface\r\n *\r\n * \"none\" means this user profile doesn't actually exist\r\n */\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../firebase/databaseConsts\";\r\nimport Admin from \"./admin\";\r\nimport Address from \"./address\";\r\n\r\nexport const UserTitles = [\"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Dr.\", \"Prof.\"];\r\n\r\nexport default interface User {\r\n    id: string | \"none\";\r\n    email: string;\r\n    linkedin?: string;\r\n    firstName: string | \"none\";\r\n    lastName: string | \"none\";\r\n    title: string | \"none\";\r\n    profilePicture?: ProfileImage[];\r\n    BusinessProfile?: BusinessProfile;\r\n    type: number;\r\n}\r\n\r\nexport interface BusinessProfile {\r\n    companyName: string;\r\n    companyWebsite: string;\r\n    registrationNo: string;\r\n    sector: string;\r\n    directors: string[];\r\n    registeredOffice: Address;\r\n    tradingAddress: Address;\r\n    logo: ProfileImage[];\r\n    video?: ProfileVideo[];\r\n}\r\n\r\nexport interface ProfileImage {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport interface ProfileVideo {\r\n    storageID: number;\r\n    dateUploaded: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport const isIssuer = (user: User | Admin) => {\r\n    return user.type === TYPE_ISSUER;\r\n}\r\n\r\nexport const isInvestor = (user: User | Admin) => {\r\n    return user.type === TYPE_INVESTOR;\r\n}\r\n\r\nexport const hasBusinessProfile = (user: User) => {\r\n    return user.BusinessProfile !== undefined;\r\n}\r\n\r\nexport const isTradingAddressSameAsRegisteredOffice = (user: User) => {\r\n    return user.BusinessProfile?.registeredOffice.postcode === user.BusinessProfile?.tradingAddress.postcode\r\n        && user.BusinessProfile?.registeredOffice.address1 === user.BusinessProfile?.tradingAddress.address1\r\n        && user.BusinessProfile?.registeredOffice.townCity === user.BusinessProfile?.tradingAddress.townCity\r\n}\r\n\r\nexport const getProfilePicture = (user: User): string | null => {\r\n    if (!user.profilePicture) {\r\n        return null;\r\n    }\r\n\r\n    const index: number = user.profilePicture.findIndex((profilePicture: ProfileImage) =>\r\n        profilePicture.removed === undefined);\r\n\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return user.profilePicture[index].url;\r\n}","import Admin, {isAdmin} from \"../models/admin\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../models/group_of_membership\";\r\nimport {AuthenticationState} from \"../redux-store/reducers/authenticationReducer\";\r\nimport {ManageGroupUrlState} from \"../redux-store/reducers/manageGroupUrlReducer\";\r\nimport User, {isInvestor} from \"../models/user\";\r\n\r\nexport interface CreateProjectRouteParams {\r\n    edit?: string;\r\n    admin?: string;\r\n    issuer?: string;\r\n}\r\n\r\nexport default class Routes {\r\n    static baseGroup: string = \"/groups/:groupUserName\";\r\n\r\n    static nonGroupFront: string = \"/\";\r\n    static groupFront: string = `${Routes.baseGroup}`;\r\n\r\n    static nonGroupSignIn: string = \"/signin\";\r\n    static groupSignIn: string = `${Routes.baseGroup}/signin`;\r\n    static superAdminSignIn: string = \"/signin/super-admin\";\r\n\r\n    static nonGroupSignUp:string = 'groups/invest-west/signup';\r\n    static groupSignUp: string = `${Routes.baseGroup}/signup/:id?`;\r\n\r\n    static nonGroupAdminDashboard: string = \"/admin\";\r\n    static groupAdminDashboard: string = `${Routes.baseGroup}/admin`;\r\n\r\n    static groupIssuerDashboard: string = `${Routes.baseGroup}/dashboard/issuer`;\r\n\r\n    static groupInvestorDashboard: string = `${Routes.baseGroup}/dashboard/investor`;\r\n\r\n    static nonGroupViewUserProfile: string = \"/view-profile/:userID\";\r\n    static groupViewUserProfile: string = `${Routes.baseGroup}/view-profile/:userID`;\r\n\r\n    static nonGroupEditUserProfile: string = \"/edit-profile/:userID\";\r\n    static groupEditUserProfile: string = `${Routes.baseGroup}/edit-profile/:userID`;\r\n\r\n    static nonGroupCreateOffer: string = \"/create-offer\";\r\n    static groupCreateOffer: string = `${Routes.baseGroup}/create-offer`;\r\n\r\n    static nonGroupViewOffer: string = \"/projects/:projectID\";\r\n    static groupViewOffer: string = `${Routes.baseGroup}/projects/:projectID`;\r\n\r\n    static nonGroupViewPledge: string = \"/pledge\";\r\n    static groupViewPledge: string = `${Routes.baseGroup}/pledge`;\r\n\r\n    static nonGroupViewGroup: string = \"/view-group-details/:viewedGroupUserName\";\r\n    static groupViewGroup: string = `${Routes.baseGroup}/view-group-details/:viewedGroupUserName`;\r\n\r\n    static nonGroupViewResourceDetail: string = \"/resources/:resourceName\";\r\n    static groupViewResourceDetail: string = `${Routes.baseGroup}/resources/:resourceName`;\r\n\r\n    static nonGroupContactUs: string = \"/contact-us\";\r\n    static groupContactUs: string = `${Routes.baseGroup}/contact-us`;\r\n\r\n    static nonGroupContactUs2: string = \"/contact-us-2\";\r\n    static groupContactUs2: string = `${Routes.baseGroup}/contact-us-2`;\r\n\r\n    static groupHelp: string = `${Routes.baseGroup}/help`;\r\n\r\n    static nonGroupTermsOfUse: string = \"/terms-of-use\";\r\n    static nonGroupPrivacyPolicy: string = \"/privacy-policy\";\r\n    static nonGroupRiskWarning: string = \"/risk-warning-footer\";\r\n    static nonGroupCreatePitchTermsAndConditions: string = \"/create-project-terms-and-conditions\";\r\n    static nonGroupMarketingPreferences: string = \"/marketing-preferences\";\r\n\r\n    static nonGroupAuthAction: string = \"/auth/action\";\r\n\r\n    static error404: string = \"/error/404\";\r\n\r\n    /**\r\n     * Check if a route is a protected one\r\n     *\r\n     * @param route\r\n     */\r\n    public static isProtectedRoute = (route: string) => {\r\n        return route !== Routes.nonGroupFront\r\n            && route !== Routes.groupFront\r\n            && route !== Routes.nonGroupSignIn\r\n            && route !== Routes.groupSignIn\r\n            && route !== Routes.nonGroupSignUp\r\n            && route !== Routes.groupSignUp\r\n            && route !== Routes.nonGroupContactUs\r\n            && route !== Routes.groupContactUs\r\n            && route !== Routes.nonGroupContactUs2\r\n            && route !== Routes.groupContactUs2\r\n            && route !== Routes.nonGroupPrivacyPolicy\r\n            && route !== Routes.nonGroupTermsOfUse\r\n            && route !== Routes.nonGroupRiskWarning\r\n            && route !== Routes.nonGroupCreatePitchTermsAndConditions\r\n            && route !== Routes.nonGroupMarketingPreferences\r\n            && route !== Routes.nonGroupAuthAction\r\n            && route !== Routes.error404;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is reserved just for super admin\r\n     *\r\n     * @param route\r\n     */\r\n    public static isRouteReservedForSuperAdmin = (route: string) => {\r\n        return route === Routes.nonGroupAdminDashboard\r\n            || route === Routes.nonGroupViewUserProfile\r\n            || route === Routes.nonGroupEditUserProfile\r\n            || route === Routes.nonGroupCreateOffer\r\n            || route === Routes.nonGroupViewOffer\r\n            || route === Routes.nonGroupViewPledge\r\n            || route === Routes.nonGroupViewGroup;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is dedicated for a group admin\r\n     *\r\n     * @param route\r\n     */\r\n    public static isGroupAdminRoute = (route: string) => {\r\n        return route === Routes.groupAdminDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is dedicated for an issuer\r\n     *\r\n     * @param route\r\n     */\r\n    public static isIssuerDashboardRoute = (route: string) => {\r\n        return route === Routes.groupIssuerDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check  if a route is dedicated for an investor\r\n     *\r\n     * @param route\r\n     */\r\n    public static isInvestorDashboardRoute = (route: string) => {\r\n        return route === Routes.groupInvestorDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a sign in route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSignInRoute = (route: string) => {\r\n        return route === Routes.nonGroupSignIn || route === Routes.groupSignIn || route === Routes.superAdminSignIn;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a super admin sign in route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSuperAdminSignInRoute = (route: string) => {\r\n        return route === Routes.superAdminSignIn;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a sign up route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSignUpRoute = (route: string) => {\r\n        return route === Routes.nonGroupSignUp || route === Routes.groupSignUp;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is an error route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isErrorRoute = (route: string) => {\r\n        return route === Routes.error404;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a system public route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSystemPublicRoute = (route: string) => {\r\n        return route === Routes.nonGroupPrivacyPolicy\r\n            || route === Routes.nonGroupRiskWarning\r\n            || route === Routes.nonGroupTermsOfUse\r\n            || route === Routes.nonGroupCreatePitchTermsAndConditions\r\n            || route === Routes.nonGroupMarketingPreferences;\r\n    }\r\n\r\n    /**\r\n     * Construct public route\r\n     *\r\n     * @param route\r\n     */\r\n    public static constructPublicRoute = (route: \"privacyPolicy\" | \"riskWarning\" | \"termsOfUse\" | \"createPitchTermsAndConditions\" | \"marketingPreferences\") => {\r\n        switch (route) {\r\n            case \"privacyPolicy\":\r\n                return Routes.nonGroupPrivacyPolicy;\r\n            case \"riskWarning\":\r\n                return Routes.nonGroupRiskWarning;\r\n            case \"termsOfUse\":\r\n                return Routes.nonGroupTermsOfUse;\r\n            case \"createPitchTermsAndConditions\":\r\n                return Routes.nonGroupCreatePitchTermsAndConditions;\r\n            case \"marketingPreferences\":\r\n                return Routes.nonGroupMarketingPreferences;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct home route (navigate to Front page)\r\n     *\r\n     * @param routeParams\r\n     * @param ManageGroupUrlState\r\n     * @param AuthenticationState\r\n     */\r\n    public static constructHomeRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\r\n                                        AuthenticationState: AuthenticationState) => {\r\n        let route: string = \"\";\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            if (!routeParams.groupUserName) {\r\n                return Routes.nonGroupFront;\r\n            } else {\r\n                return Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\r\n            }\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\r\n        // an admin MUST use the correct sign in page to sign in\r\n        if (currentAdmin) {\r\n            // current admin is a super admin\r\n            if (currentAdmin.superAdmin) {\r\n                route = Routes.nonGroupFront;\r\n            }\r\n            // current admin is not a super admin\r\n            else {\r\n                if (AuthenticationState.groupsOfMembership.length === 1) {\r\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\r\n                    route = Routes.groupFront.replace(\":groupUserName\", adminGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\r\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\r\n        else {\r\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\r\n            if (routeParams.groupUserName) {\r\n                if (AuthenticationState.groupsOfMembership\r\n                    .filter(groupOfMembership =>\r\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\r\n                ) {\r\n                    route = Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\r\n                } else if (homeGroup) {\r\n                    route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                }\r\n            } else if (homeGroup) {\r\n                route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n            }\r\n        }\r\n\r\n        if (!route) {\r\n            return Routes.nonGroupFront;\r\n        }\r\n\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n    public static constructSignInRoute = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupSignIn.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupSignIn;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct sign up route + with a default value of IW group\r\n     *\r\n     * @param groupUserName\r\n     * @param invitedUserID\r\n     */\r\n    public static constructSignUpRoute = (groupUserName: string, invitedUserID?: string) => {\r\n        if (groupUserName) {\r\n            return Routes.groupSignUp\r\n                .replace(\":groupUserName\", groupUserName)\r\n                .replace(invitedUserID ? \":id?\" : \"/:id?\", invitedUserID ?? \"\");\r\n        } else {\r\n            return Routes.nonGroupSignUp;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n    public static constructContactUsRoute = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupContactUs.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupContactUs;\r\n        }\r\n    }\r\n\r\n     /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n      public static constructContactUsRoute2 = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupContactUs2.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupContactUs2;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct dashboard route (navigate to Dashboard page)\r\n     *\r\n     * @param routeParams\r\n     * @param ManageGroupUrlState\r\n     * @param AuthenticationState\r\n     */\r\n    public static constructDashboardRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\r\n                                             AuthenticationState: AuthenticationState) => {\r\n        let route: string = \"\";\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return Routes.constructSignInRoute(routeParams);\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\r\n        // an admin MUST use the correct sign in page to sign in\r\n        if (currentAdmin) {\r\n            // current admin is a super admin\r\n            // --> redirect to super admin dashboard\r\n            if (currentAdmin.superAdmin) {\r\n                route = Routes.nonGroupAdminDashboard;\r\n            }\r\n                // current admin is not a super admin\r\n            // --> redirect to group admin dashboard\r\n            else {\r\n                if (AuthenticationState.groupsOfMembership.length === 1) {\r\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\r\n                    route = Routes.groupAdminDashboard.replace(\":groupUserName\", adminGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\r\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\r\n        else {\r\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\r\n            if (routeParams.groupUserName) {\r\n                if (AuthenticationState.groupsOfMembership\r\n                    .filter(groupOfMembership =>\r\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\r\n                ) {\r\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", routeParams.groupUserName);\r\n                    } else {\r\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", routeParams.groupUserName);\r\n                    }\r\n                } else if (homeGroup) {\r\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                    } else {\r\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                    }\r\n                }\r\n            } else if (homeGroup) {\r\n                if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                    route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                } else {\r\n                    route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (route === \"\") {\r\n            return Routes.constructSignInRoute(routeParams);\r\n        }\r\n        route += \"?tab=Home\";\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view project (offer) route\r\n     *\r\n     * @param groupUserName\r\n     * @param projectID\r\n     */\r\n    public static constructProjectDetailRoute = (groupUserName: string | null, projectID: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewOffer.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupViewOffer;\r\n        }\r\n        route = route.replace(\":projectID\", projectID);\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct create project (offer) route\r\n     *\r\n     * @param groupUserName\r\n     * @param params\r\n     */\r\n    public static constructCreateProjectRoute = (groupUserName: string | null, params?: CreateProjectRouteParams) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupCreateOffer.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupCreateOffer;\r\n        }\r\n\r\n        if (params !== undefined) {\r\n            // edit an offer\r\n            if (params.edit) {\r\n                route += `?edit=${params.edit}`;\r\n            }\r\n            // group admin creates an offer on behalf of an issuer\r\n            else if (params.admin && params.issuer) {\r\n                route += `?admin=${params.admin}&issuer=${params.issuer}`;\r\n            }\r\n        }\r\n\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view group route\r\n     *\r\n     * @param groupUserName\r\n     * @param viewedGroupUserName\r\n     */\r\n    public static constructGroupDetailRoute = (groupUserName: string | null, viewedGroupUserName: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewGroup.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupViewGroup;\r\n        }\r\n        route = route.replace(\":viewedGroupUserName\", viewedGroupUserName);\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view resource detail route\r\n     *\r\n     * @param groupUserName\r\n     * @param resourceName\r\n     */\r\n    public static constructViewResourceDetailRoute = (groupUserName: string | null, resourceName: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewResourceDetail\r\n                .replace(\":groupUserName\", groupUserName)\r\n                .replace(\":resourceName\", resourceName);\r\n        } else {\r\n            route = Routes.nonGroupViewResourceDetail.replace(\":resourceName\", resourceName);\r\n        }\r\n        return route;\r\n    }\r\n}\r\n\r\n\r\n//------------------- OLD ROUTES ---------------------------------------------------------------------------------------\r\nexport const ORIGINAL_WEB_URL = \"https://investwest.online\";\r\n\r\n// angel network path INCLUDING Invest West angel network\r\nexport const GROUP_PATH = \"/groups/:groupUserName\";\r\n\r\n// front with angel network logo\r\nexport const FRONT = GROUP_PATH;\r\n// front with Invest West page --> Only for Invest West super admins\r\nexport const FRONT_INVEST_WEST_SUPER = \"/\";\r\n\r\n// sign in with angel network logo --> only allow admins and users belong to this angel network to login\r\nexport const SIGN_IN = `${GROUP_PATH}/signin`;\r\n// sign in with Invest West logo --> only allow Invest West super admins to login\r\nexport const SIGN_IN_INVEST_WEST_SUPER = \"/signin\";\r\n\r\n// admin dashboard of an angel network --> only allow admins of the angel network to interact\r\nexport const ADMIN = `${GROUP_PATH}/admin`;\r\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const ADMIN_INVEST_WEST_SUPER = \"/admin\";\r\n\r\n// issuer dashboard of an angel network --> only allow issuers of the angel network to interact\r\nexport const DASHBOARD_ISSUER = `${GROUP_PATH}/dashboard/issuer`;\r\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const DASHBOARD_ISSUER_INVEST_WEST_SUPER = \"/dashboard/issuer\";\r\n\r\n// investor dashboard of an angel network --> only allow investors of the angel network to interact\r\nexport const DASHBOARD_INVESTOR = `${GROUP_PATH}/dashboard/investor`;\r\n// investor dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const DASHBOARD_INVESTOR_INVEST_WEST_SUPER = \"/dashboard/investor\";\r\n\r\n// sign up page for an angel network --> only users who have been invited by this angel network can see\r\nexport const SIGN_UP = `${GROUP_PATH}/signup/:id`;\r\n// sign up page for Invest West --> only Invest West super admins can interact\r\nexport const SIGN_UP_INVEST_WEST_SUPER = \"/signup/:id\";\r\n\r\n// view a user's profile while logged in under an angel network\r\nexport const USER_PROFILE = `${GROUP_PATH}/view-profile/:userID`;\r\n// view a user's profile while logged in under Invest West super admins\r\nexport const USER_PROFILE_INVEST_WEST_SUPER = \"/view-profile/:userID\";\r\n\r\n// edit a user's profile for group admins\r\nexport const EDIT_USER_PROFILE = `${GROUP_PATH}/edit-profile/:userID`;\r\n// edit a user's profile for super admins\r\nexport const EDIT_USER_PROFILE_INVEST_WEST_SUPER = \"/edit-profile/:userID\";\r\n\r\n// pledge under an angel network\r\nexport const PLEDGE = `${GROUP_PATH}/pledge`;\r\n// pledge under Invest West Invest West super admins\r\nexport const PLEDGE_INVEST_WEST_SUPER = \"/pledge\";\r\n\r\n// create an offer under an angel network\r\nexport const CREATE_OFFER = `${GROUP_PATH}/create-offer`;\r\nexport const EDIT_OFFER = `${CREATE_OFFER}?edit=:projectID`;\r\nexport const GROUP_ADMIN_CREATE_OFFER_ON_BEHALF_OF_ISSUER = `${CREATE_OFFER}?admin=:adminID&issuer=:issuerID`;\r\n// create an offer under Invest West super admins\r\nexport const CREATE_OFFER_INVEST_WEST_SUPER = \"/create-offer\";\r\nexport const EDIT_OFFER_INVEST_WEST_SUPER = `${CREATE_OFFER_INVEST_WEST_SUPER}?edit=:projectID`;\r\n\r\n// view offer's details under an angel network\r\nexport const PROJECT_DETAILS = `${GROUP_PATH}/projects/:projectID`;\r\n// view offer's details under Invest West super admins\r\nexport const PROJECT_DETAILS_INVEST_WEST_SUPER = \"/projects/:projectID\";\r\n\r\nexport const VIEW_GROUP_DETAILS = `${GROUP_PATH}/view-group-details/:groupID`;\r\nexport const VIEW_GROUP_DETAILS_INVEST_WEST_SUPER = \"/view-group-details/:groupID\";\r\n\r\nexport const CONTACT_US = `${GROUP_PATH}/contact-us`;\r\nexport const CONTACT_US_INVEST_WEST_SUPER = \"/contact-us\";\r\n\r\nexport const CONTACT_US_2 = `${GROUP_PATH}/contact-us-2`;\r\nexport const CONTACT_US_INVEST_WEST_SUPER_2 = \"/contact-us-2\";\r\n\r\nexport const HELP = `${GROUP_PATH}/help`;\r\nexport const HELP_INVEST_WEST_SUPER = \"/help\";\r\n\r\nexport const TERMS_OF_USE = \"/terms-of-use\";\r\nexport const PRIVACY_POLICY = \"/privacy-policy\";\r\nexport const RISK_WARNING = \"/risk-warning-footer\";\r\nexport const CREATE_PITCH_TERMS_AND_CONDITIONS = \"/create-project-terms-and-conditions\";\r\nexport const ABOUT_US = \"/about-us\";\r\nexport const MARKETING_PREFERENCES = \"/marketing-preferences\";\r\n\r\nexport const ERROR_404 = \"/error/404\";","import axios, {AxiosError, AxiosRequestConfig, AxiosResponse, Method} from \"axios\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport HttpResponseError from \"./ResponseError\";\r\n\r\n/**\r\n * Api routes\r\n */\r\nexport class ApiRoutes {\r\n    static systemAttributesBaseRoute = \"/system-attributes\";\r\n    static retrieveSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/retrieve\";\r\n    static updateSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/update\";\r\n\r\n    static authBaseRoute = \"/auth\";\r\n    static requestResetPasswordRoute = ApiRoutes.authBaseRoute + \"/request-reset-password\";\r\n    static verifyAuthRoute = ApiRoutes.authBaseRoute + \"/verify\";\r\n\r\n    static emailBaseRoute = \"/email\";\r\n    static sendEmailRoute = ApiRoutes.emailBaseRoute + \"/send\";\r\n\r\n    static usersBaseRoute = \"/users\";\r\n    static createUser = ApiRoutes.usersBaseRoute + \"/create\";\r\n    static retrieveUser = ApiRoutes.usersBaseRoute + \"/:uid/retrieve\";\r\n    static retrieveInvitedUser = ApiRoutes.usersBaseRoute + \"/:invitedUserID/retrieve-invited\";\r\n    static updateUser = ApiRoutes.usersBaseRoute + \"/update\";\r\n    static listGroupsOfMembership = ApiRoutes.usersBaseRoute + \"/:uid/groups-of-membership\";\r\n    static exportUsersCsvRoute = ApiRoutes.usersBaseRoute + \"/export\";\r\n\r\n    static groupsBaseRoute = \"/groups\";\r\n    static listGroups = ApiRoutes.groupsBaseRoute + \"/list\";\r\n    static retrieveGroup = ApiRoutes.groupsBaseRoute + \"/:groupUserName\";\r\n    static addMembersToGroup = ApiRoutes.groupsBaseRoute + \"/:group/add-members\";\r\n    static listGroupMembers = ApiRoutes.groupsBaseRoute + \"/:group/list-members\";\r\n\r\n    static projectsBaseRoute = \"/projects\";\r\n    static listProjectsRoute = ApiRoutes.projectsBaseRoute + \"/list\";\r\n    static sendProjectBackToIssuerRoute = ApiRoutes.projectsBaseRoute + \"/send-back-to-issuer\";\r\n    static exportProjectsToCsvRoute = ApiRoutes.projectsBaseRoute + \"/export\";\r\n\r\n    static groupAdminsBaseRoute = \"/group-admins\";\r\n    static addGroupAdminRoute = ApiRoutes.groupAdminsBaseRoute + \"/add\";\r\n\r\n    static accessRequestsBaseRoute = \"/access-requests\";\r\n    static listAccessRequestsRoute = ApiRoutes.accessRequestsBaseRoute + \"/list\";\r\n    static createAccessRequestRoute = ApiRoutes.accessRequestsBaseRoute + \"/create\";\r\n    static removeAccessRequestRoute = ApiRoutes.createAccessRequestRoute + \"/remove\";\r\n\r\n    static investorSelfCertificationBaseRoute = \"/investor-self-certifications\";\r\n    static retrieveInvestorSelfCertificationRoute = ApiRoutes.investorSelfCertificationBaseRoute + \"/retrieve\";\r\n\r\n    static fileBaseRoute = \"/file\";\r\n    static uploadSingleFileRoute = ApiRoutes.fileBaseRoute + \"/upload-single\";\r\n\r\n    static testRoute = \"/test\";\r\n}\r\n\r\nexport interface RequestOptionalParams {\r\n    requestBody: any | null;\r\n    queryParameters: any | null;\r\n}\r\n\r\n/**\r\n * Api class\r\n */\r\nexport default class Api {\r\n    baseUrl: string | undefined = process.env.REACT_APP_BACK_END_BASE_URL;\r\n\r\n    /**\r\n     * Build request URL\r\n     *\r\n     * @param endPoint\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private buildUrl(endPoint: string, queryParameters: any): string {\r\n        let fullUrl = this.baseUrl + endPoint + Api.buildQueryParameters(queryParameters);\r\n        return encodeURI(fullUrl);\r\n    }\r\n\r\n    /**\r\n     * Build query parameters\r\n     *\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private static buildQueryParameters(queryParameters: any): string {\r\n        if (queryParameters === null) {\r\n            return \"\";\r\n        }\r\n\r\n        let result: string = \"?\";\r\n\r\n        for (let key in queryParameters) {\r\n            if (queryParameters.hasOwnProperty(key)) {\r\n                let value = queryParameters[key];\r\n                if (value !== undefined && value !== null) {\r\n                    if (!result.endsWith(\"?\")) {\r\n                        result += \"&\";\r\n                    }\r\n                    result += `${key}=${value.toString()}`;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.endsWith(\"?\")) {\r\n            result = \"\";\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Build form data\r\n     *\r\n     * @param data\r\n     * @private\r\n     */\r\n    private static buildFormData(data: any): FormData | null {\r\n        if (data === null) {\r\n            return null;\r\n        }\r\n\r\n        const formData = new FormData();\r\n\r\n        for (let key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                let value = data[key];\r\n                if (value !== undefined && value !== null) {\r\n                    formData.append(key, value);\r\n                }\r\n            }\r\n        }\r\n\r\n        return formData;\r\n    }\r\n\r\n    /**\r\n     * Send request\r\n     *\r\n     * @param requestType\r\n     * @param endPoint\r\n     * @param optionalParams\r\n     * @param formDataRequest\r\n     */\r\n    public async request(requestType: Method,\r\n                         endPoint: string,\r\n                         optionalParams?: RequestOptionalParams | null,\r\n                         formDataRequest?: boolean\r\n    ): Promise<AxiosResponse> {\r\n        if (endPoint === null || endPoint.length === 0) {\r\n            throw new Error(\"Empty url\");\r\n        }\r\n\r\n        const url: string = this.buildUrl(\r\n            endPoint,\r\n            optionalParams !== undefined && optionalParams !== null && optionalParams.queryParameters !== null\r\n                ? optionalParams.queryParameters\r\n                : null\r\n        );\r\n\r\n        let currentUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n        try {\r\n            let idToken: string | null = null;\r\n\r\n            if (currentUser) {\r\n                idToken = await currentUser.getIdToken();\r\n            }\r\n\r\n            let bodyData: any;\r\n\r\n            if (formDataRequest !== undefined && formDataRequest) {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? Api.buildFormData(optionalParams.requestBody)\r\n                    : null;\r\n            }\r\n            else {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? optionalParams.requestBody\r\n                    : null;\r\n            }\r\n\r\n            const config: AxiosRequestConfig = {\r\n                method: requestType,\r\n                url: url,\r\n                data: bodyData,\r\n                timeout: 20000 // timeout in 20 seconds\r\n            };\r\n\r\n            if (idToken) {\r\n                config.headers = {\r\n                    \"Authorization\": idToken\r\n                }\r\n\r\n                if (formDataRequest !== undefined && formDataRequest) {\r\n                    config.headers = {\r\n                        ...config.headers,\r\n                        // @ts-ignore\r\n                        \"Content-Type\": `multipart/form-data; boundary=${bodyData._boundary}`\r\n                    }\r\n                }\r\n            }\r\n\r\n            let response: AxiosResponse = await axios.request(config);\r\n\r\n            return this.parseResponse(response);\r\n        } catch (exception) {\r\n            const error = Api.parseError(exception);\r\n            console.log(`Failed to request. Status code: ${error.statusCode}. Cause: ${error.message}`);\r\n            throw new Error(error.statusCode + \" \" + error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse response\r\n     *\r\n     * @param response\r\n     * @private\r\n     */\r\n    private parseResponse(response: AxiosResponse) {\r\n        if (response === null) {\r\n            throw new Error(\"Null response.\");\r\n        }\r\n\r\n        if (this.isRequestSuccessful(response)) {\r\n            return response;\r\n        }\r\n\r\n        throw new Error(\"Response error.\");\r\n    }\r\n\r\n    /**\r\n     * Parse error\r\n     *\r\n     * @param error\r\n     * @private\r\n     */\r\n    private static parseError(error: AxiosError) {\r\n        let httpError: HttpResponseError = {\r\n            statusCode: -1,\r\n            message: \"\"\r\n        };\r\n\r\n        // client received an error response (5xx, 4xx) form the server\r\n        if (error.response) {\r\n            if (error.response.data) {\r\n                httpError = {\r\n                    statusCode: error.response.data.code,\r\n                    message: error.response.data.detail ?? error.response.data.message\r\n                }\r\n            }\r\n        }\r\n        // client never received a response, or request never left\r\n        else if (error.request) {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Server is not responding.\"\r\n            }\r\n        }\r\n        // anything else\r\n        else {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Unexpected error.\"\r\n            }\r\n        }\r\n\r\n        return httpError;\r\n    }\r\n\r\n    /**\r\n     * Check if a request is successful by checking the response code\r\n     *\r\n     * @param response\r\n     */\r\n    public isRequestSuccessful(response: AxiosResponse): boolean {\r\n        return response != null && response.status >= 200 && response.status < 300;\r\n    }\r\n}","import User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport {\r\n    AuthenticationAction,\r\n    AuthenticationEvents,\r\n    CompleteAuthenticationAction,\r\n    UpdateUserChangesAction\r\n} from \"../actions/authenticationActions\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport InvestorSelfCertification from \"../../models/investor_self_certification\";\r\n\r\nexport enum AuthenticationStatus {\r\n    NotInitialized,\r\n    Authenticating,\r\n    Authenticated,\r\n    Unauthenticated\r\n}\r\n\r\nexport interface AuthenticationState {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    selfCertification?: InvestorSelfCertification; // only available for investor\r\n    error?: Error\r\n}\r\n\r\nconst initialState: AuthenticationState = {\r\n    status: AuthenticationStatus.NotInitialized,\r\n    currentUser: null,\r\n    groupsOfMembership: []\r\n}\r\n\r\nexport const authIsNotInitialized = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.NotInitialized;\r\n}\r\n\r\nexport const isAuthenticating = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticating;\r\n}\r\n\r\nexport const successfullyAuthenticated = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticated && state.currentUser && state.error === undefined;\r\n}\r\n\r\nexport const hasAuthenticationError = (state: AuthenticationState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst authenticationReducer = (state = initialState, action: AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.StartAuthenticating:\r\n            return {\r\n                ...initialState,\r\n                status: AuthenticationStatus.Authenticating\r\n            }\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            const completeAuthenticationAction: CompleteAuthenticationAction = (action as CompleteAuthenticationAction);\r\n            return {\r\n                ...state,\r\n                status: completeAuthenticationAction.status,\r\n                currentUser: completeAuthenticationAction.currentUser\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.currentUser)) : state.currentUser,\r\n                selfCertification: completeAuthenticationAction.selfCertification\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.selfCertification))\r\n                    : state.selfCertification,\r\n                groupsOfMembership: JSON.parse(JSON.stringify(completeAuthenticationAction.groupsOfMembership)),\r\n                error: completeAuthenticationAction.error\r\n            }\r\n        case AuthenticationEvents.SignOut:\r\n            return {\r\n                ...state,\r\n                status: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? AuthenticationStatus.Unauthenticated\r\n                    : state.status,\r\n                currentUser: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? null\r\n                    : state.currentUser,\r\n                groupsOfMembership: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? []\r\n                    : state.groupsOfMembership,\r\n                error: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? undefined\r\n                    : state.error\r\n            }\r\n        case AuthenticationEvents.UpdateUserChanges:\r\n            const updateUserChangesAction: UpdateUserChangesAction = action as UpdateUserChangesAction;\r\n            return {\r\n                ...state,\r\n                currentUser: updateUserChangesAction.updatedUser\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authenticationReducer;","/**\r\n * This file contains all of the utility functions relating to Firebase database.\r\n */\r\n\r\nimport firebase from \"./firebaseApp\";\r\n\r\nimport * as ROUTES from \"../router/routes\";\r\nimport * as DB_CONST from \"./databaseConsts\";\r\nimport * as utils from \"../utils/utils\";\r\nimport Api, {ApiRoutes} from \"../api/Api\";\r\n\r\n/**\r\n * This function is used to track activities of a user\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectLocation\r\n * @param interactedObjectID\r\n * @param activitySummary\r\n * @param action\r\n * @param value\r\n */\r\nexport const trackActivity = (\r\n    {\r\n        userID, // user id (note that this id is the official user id for group admins and super admins)\r\n        activityType,\r\n        interactedObjectLocation = null, // main node in database (when changing password, this is null)\r\n        interactedObjectID = null, // object's id (when changing password, this is null)\r\n        activitySummary, // brief summary of the activity\r\n        action = null,\r\n        value = null // optional --> track changes of a node if it does.\r\n        // Format:\r\n        //  + value: {before: node_before_changed, after: node_after_changed} --> if there are changes\r\n        //  + value: node_object --> if the node has just been created\r\n    }\r\n) => {\r\n    const id = firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .push()\r\n        .key;\r\n\r\n    firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .child(id)\r\n        .set({\r\n            id,\r\n            userID,\r\n            activityType,\r\n            interactedObjectLocation,\r\n            interactedObjectID,\r\n            activitySummary,\r\n            action,\r\n            value,\r\n            time: utils.getCurrentDate()\r\n        })\r\n        .then(() => {\r\n            // do nothing\r\n        })\r\n        .catch(error => {\r\n            // handle error\r\n        });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_ACTIVITIES_BY_USER = 'FETCH_ACTIVITIES_BY_USER';\r\nexport const FETCH_ACTIVITIES_BY_TYPE = 'FETCH_ACTIVITIES_BY_TYPE';\r\nexport const FETCH_ACTIVITIES_BY_INTERACTED_OBJECT = 'FETCH_ACTIVITIES_BY_INTERACTED_OBJECT';\r\n\r\n/**\r\n * Fetch activities\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectID\r\n * @param shouldLoadUserProfile\r\n * @param fetchBy\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchActivitiesBy = async (\r\n    {\r\n        userID = null,\r\n        activityType = null,\r\n        interactedObjectID = null,\r\n        // this should only be set to True when loading activities for a group\r\n        // as a group has multiple group admins and each of them can perform different activities\r\n        shouldLoadUserProfile = false,\r\n        fetchBy = null // fetch mode\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (!fetchBy) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activitiesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n\r\n        switch (fetchBy) {\r\n            case FETCH_ACTIVITIES_BY_USER: {\r\n                if (!userID) {\r\n                    return reject(\"Invalid call. userID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('userID')\r\n                    .equalTo(userID);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_TYPE: {\r\n                if (!activityType) {\r\n                    return reject(\"Invalid call. activityType is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('activityType')\r\n                    .equalTo(activityType);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_INTERACTED_OBJECT: {\r\n                if (!interactedObjectID) {\r\n                    return reject(\"Invalid call. interactedObjectID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('interactedObjectID')\r\n                    .equalTo(interactedObjectID);\r\n\r\n                break;\r\n            }\r\n            default:\r\n                return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activities = [];\r\n\r\n        activitiesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(activities);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    activities.push(snapshot.val());\r\n                });\r\n\r\n                if (shouldLoadUserProfile) {\r\n                    Promise.all(\r\n                        activities.map(activity => {\r\n                            return new Promise((resolve, reject) => {\r\n                                getUserBasedOnID(activity.userID)\r\n                                    .then(user => {\r\n                                        activity.userProfile = user;\r\n                                        return resolve(activities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        // handle error\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        return resolve(activities);\r\n                    }).catch(error => {\r\n                        // handle error\r\n                        return reject(error);\r\n                    });\r\n                } else {\r\n                    return resolve(activities);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_GROUP_INVITATION = \"Invited %group% to Invest West platform.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION = \"Invited %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION = \"Resent invitation email to %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH = \"Published %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH = \"Rejected %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE = \"Moved %project% to pledge phase.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH = \"Closed %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE = \"Published %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE = \"Rejected %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE = \"Created pledge for %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT = \"Edited %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT = \"Created %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM = \"Clicked to view %group%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_GROUP_DETAILS = \"Viewed %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_NEW_PLEDGE = \"Made new pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PLEDGE = \"Edited pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CANCELLED_PLEDGE = \"Cancelled pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_PROJECT_ITEM = \"Clicked to view %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS = \"Viewed %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT = \"Made a vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT = \"Edited vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT = \"Commented in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT = \"Edited comment in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMPLETED_SELF_CERTIFICATION = \"Completed self certification.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE = \"Uploaded business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE = \"Updated business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS = \"Updated personal details.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE = \"Updated business profile of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS = \"Updated personal details of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM = \"Created \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD = \"Created \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD = \"Replied to \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD = \"Changed password.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY = \"Made an enquiry to %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY = \"Closed %project% temporarily.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN = \"Opened %project% again.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN = \"Added %groupAdminEmail% as a group admin.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM = \"Deleted \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM = \"Edited \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD = \"Edited \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD = \"Deleted \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY = \"Edited reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY = \"Deleted reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT = \"Replied to a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT = \"Deleted a reply of a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT = \"Edited a reply of a comment in %projectName% offer.\";\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Send a notification\r\n *\r\n * @param title\r\n * @param message\r\n * @param userID\r\n * @param action\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const sendNotification = async ({title = \"\", message = \"\", userID = \"\", action = \"\"}) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const id = db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .push()\r\n            .key;\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(id)\r\n            .set({\r\n                id,\r\n                title,\r\n                message,\r\n                userID,\r\n                action,\r\n                date: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(\"Failed to send notification.\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Log enquiries from users\r\n *\r\n * @param enquiry\r\n */\r\nexport const logContactUsEnquiry = (\r\n    {\r\n        userID = null, // anonymous user --> userID = null, otherwise, not null\r\n        anid = null, // null = Invest West, not null = group\r\n        email,\r\n        name,\r\n        phone = null,\r\n        subject,\r\n        description\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        const dbRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CONTACT_US_ENQUIRIES_CHILD);\r\n\r\n        const enquiryID = dbRef.push().key;\r\n\r\n        dbRef\r\n            .child(enquiryID)\r\n            .set({\r\n                userID,\r\n                groupContacted: anid,\r\n                email,\r\n                name,\r\n                phone,\r\n                subject,\r\n                description,\r\n                id: enquiryID,\r\n                time: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve(enquiryID);\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all admins of a group based on groupID (anid)\r\n *\r\n * @param groupID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupAdminsBasedOnGroupID = async (groupID) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let groupAdmins = [];\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('anid')\r\n            .equalTo(groupID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupAdmins);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    groupAdmins.push(snapshot.val());\r\n                });\r\n\r\n                return resolve(groupAdmins);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to check if an email has already been used.\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const doesUserExist = async (email) => {\r\n    return new Promise((resolve, reject) => {\r\n        const firebaseDB = firebase.database();\r\n        // check admin first\r\n        firebaseDB\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n                if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                    let admin = null;\r\n                    snapshots.forEach(snapshot => {\r\n                        admin = snapshot.val();\r\n                    });\r\n\r\n                    // admin exists\r\n                    return resolve({\r\n                        userExists: true,\r\n                        userIsAnAdmin: true,\r\n                        admin: admin\r\n                    });\r\n                }\r\n\r\n                firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .orderByChild('email')\r\n                    .equalTo(email.toLowerCase())\r\n                    .once('value', snapshots => {\r\n                        if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                            let user = null;\r\n                            snapshots.forEach(snapshot => {\r\n                                user = snapshot.val();\r\n                            });\r\n\r\n                            // normal user exists\r\n                            return resolve({\r\n                                userExists: true,\r\n                                userIsAnAdmin: false,\r\n                                user: user\r\n                            });\r\n                        } else {\r\n                            // user does not exist\r\n                            return resolve({\r\n                                userExists: false\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all the groups that the user is in\r\n *\r\n * @param userID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupsUserIsIn = async (userID) => {\r\n\r\n    let groupsUserIsIn = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // search through the InvitedUsers node\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('officialUserID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupsUserIsIn);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    // search for invited user with the officialID matched\r\n                    if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                        groupsUserIsIn.push({\r\n                            invitedUser: invitedUser,\r\n                            anid: invitedUser.invitedBy,\r\n                            userInGroupStatus: invitedUser.status\r\n                        });\r\n                    }\r\n                });\r\n\r\n                Promise.all(groupsUserIsIn.map(groupUserIsIn => {\r\n                    return new Promise((resolve, reject) => {\r\n                        firebase\r\n                            .database()\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(groupUserIsIn.anid)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n                                return resolve(groupUserIsIn);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(groupsUserIsIn);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on anid\r\n *\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnANID = async (anid) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    return reject(\"Angel network not found\");\r\n                }\r\n\r\n                return resolve(snapshot.val());\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on groupUserName\r\n *\r\n * @param groupUserName\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnGroupUserName = async (groupUserName) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .orderByChild('groupUserName')\r\n            .equalTo(groupUserName)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No group found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    return resolve(snapshot.val());\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const SEARCH_ANGEL_NETWORKS_NONE = 0;\r\nexport const SEARCH_ANGEL_NETWORKS_BY_NAME = 1;\r\n/**\r\n * Load angel networks\r\n *\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworks = async ({name = null, email = null}, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (mode !== SEARCH_ANGEL_NETWORKS_NONE\r\n            && mode !== SEARCH_ANGEL_NETWORKS_BY_NAME\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        let angelNetworks = [];\r\n\r\n        let angelNetworksRef;\r\n\r\n        if (mode === SEARCH_ANGEL_NETWORKS_NONE) {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n        } else {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild('displayNameLower',)\r\n                .startAt(name.toLowerCase());\r\n        }\r\n\r\n        angelNetworksRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworks);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const angelNetwork = snapshot.val();\r\n                    if (mode === SEARCH_ANGEL_NETWORKS_BY_NAME) {\r\n                        if (angelNetwork.displayNameLower.includes(name.toLowerCase())) {\r\n                            angelNetworks.push(snapshot.val());\r\n                        }\r\n                    } else {\r\n                        angelNetworks.push(snapshot.val());\r\n                    }\r\n                });\r\n\r\n                return resolve(angelNetworks);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the angel networks that invited the user with the specified email\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworksInvitedAUser = async (email) => {\r\n\r\n    const db = firebase.database();\r\n    let angelNetworksInvitedUser = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n\r\n                // user has not been invited by any angel networks\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworksInvitedUser);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    angelNetworksInvitedUser.push({\r\n                        Invitor: invitedUser.invitedBy,\r\n                        Invitee: invitedUser\r\n                    });\r\n                });\r\n\r\n                Promise.all(angelNetworksInvitedUser.map(angelNetworkInvitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(angelNetworkInvitedUser.Invitor)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                angelNetworkInvitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(angelNetworksInvitedUser);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(angelNetworksInvitedUser);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to remove a join request\r\n *\r\n * @param requestID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const removeAJoinRequest = async (requestID) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(requestID)\r\n            .remove()\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user object from firebase realtime db.\r\n *\r\n * Parameter:\r\n *  - type: 0 - retrieve a normal user (issuer, investor), 1 - retrieve an admin\r\n *  - firebaseUser\r\n *\r\n * @param {*} type\r\n * @param {*} userID\r\n */\r\nexport const getUser = async (type, userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        // if type === 0, a normal user (issuer, investor) will be returned \r\n        if (type === 0) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n        // if type === 1, an admin will be returned\r\n        else if (type === 1) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user's profile based on the uid provided.\r\n *\r\n * @param {*} uid\r\n */\r\nexport const getUserBasedOnID = async (uid) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!uid) {\r\n            return reject(\"Null id provided\");\r\n        }\r\n\r\n        // get normal user\r\n        getUser(0, uid)\r\n            .then(user => {\r\n                return resolve(user);\r\n            })\r\n            .catch(error => {\r\n                // get admin\r\n                getUser(1, uid)\r\n                    .then(admin => {\r\n                        // admin is a group admin\r\n                        if (!admin.superAdmin) {\r\n                            loadAngelNetworkBasedOnANID(admin.anid)\r\n                                .then(groupDetails => {\r\n                                    admin.groupDetails = groupDetails;\r\n                                    return resolve(admin);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(\"Group not found\");\r\n                                });\r\n                        }\r\n                        // admin is a super admin\r\n                        else {\r\n                            return resolve(admin);\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Profile not found\");\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a forums\r\n *\r\n * Parameters:\r\n *      + forumObj with the following structure\r\n *\r\n * {\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor: userID\r\n * }\r\n * @param {*} forumObj\r\n */\r\nexport const createForum = async (forumObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const forumID = db.ref(DB_CONST.FORUMS_CHILD).push().key;\r\n        forumObj.id = forumID;\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumObj.id)\r\n            .set(forumObj)\r\n            .then(() => {\r\n                return resolve(forumID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_FORUMS = \"LOAD_LIVE_FORUMS\";\r\nexport const LOAD_DELETED_FORUMS = \"LOAD_DELETED_FORUMS\";\r\n/**\r\n * This function is used to load all forums.\r\n *\r\n * A forums object has the following structure:\r\n *\r\n * {\r\n *      id,\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor,\r\n * \r\n *      ...\r\n * }\r\n */\r\nexport const loadForums = async (mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        let forums = [];\r\n\r\n        if (mode !== LOAD_LIVE_FORUMS && mode !== LOAD_DELETED_FORUMS) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        const db = firebase.database();\r\n\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .once('value', snapshots => {\r\n\r\n                // no forums\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(forums);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let forum = snapshot.val();\r\n                    if (mode === LOAD_LIVE_FORUMS) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (forum.hasOwnProperty('deleted') && forum.deleted === false)) {\r\n                            forums.push(forum);\r\n                        }\r\n                    } else {\r\n                        if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                            forums.push(forum);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(forums.map(forum => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                return resolve(forums);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(forums);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a forum\r\n *\r\n * @param editedForum\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editForum = async (editedForum) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(editedForum.id)\r\n            .update(editedForum)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a forum by adding a property called 'deleted' with the value = true\r\n *\r\n * @param forumID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteForum = async (forumID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a thread within a forums\r\n *\r\n * @param {*} threadObj\r\n */\r\nexport const createThread = async (threadObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const threadID = db.ref(DB_CONST.FORUM_THREADS_CHILD).push().key;\r\n        threadObj.id = threadID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadObj.id)\r\n            .set(threadObj)\r\n            .then(() => {\r\n                return resolve(threadID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a thread\r\n *\r\n * @param editedThread\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThread = async (editedThread) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(editedThread.id)\r\n            .update(editedThread)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread by adding a property called 'deleted' with the value = true\r\n *\r\n * @param threadID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThread = async (threadID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_THREADS = \"LOAD_LIVE_THREADS\";\r\nexport const LOAD_DELETED_THREADS = \"LOAD_DELETED_THREADS\";\r\n/**\r\n * This function is used to load the details of the author for each thread.\r\n * The reason for creating this function is that the author of each thread is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param mode\r\n * @param {*} forumSelected\r\n */\r\nexport const loadThreads = async (mode, forumSelected) => {\r\n    const db = firebase.database();\r\n    let threads = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .orderByChild(\"forumID\")\r\n            .equalTo(forumSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(threads);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    if (mode === LOAD_LIVE_THREADS) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (thread.hasOwnProperty('deleted') && thread.deleted === false)) {\r\n                            threads.push(thread);\r\n                        }\r\n                    } else {\r\n                        if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                            threads.push(thread);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(threads.map(thread => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                return resolve(threads);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(threads);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a reply to a thread.\r\n *\r\n * @param {*} replyObj\r\n */\r\nexport const createThreadReply = async (replyObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const replyID = db.ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD).push().key;\r\n        replyObj.id = replyID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(replyObj.id)\r\n            .set(replyObj)\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit an existing thread reply\r\n *\r\n * @param editedThreadReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThreadReply = async (editedThreadReply) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(editedThreadReply.id)\r\n            .update(editedThreadReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread reply\r\n *\r\n * @param threadReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThreadReply = async (threadReplyID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(threadReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the details of the author for each thread reply.\r\n * The reason for creating this function is that the author of each thread reply is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param {*} threadSelected\r\n */\r\nexport const loadThreadReplies = async (threadSelected) => {\r\n    const db = firebase.database();\r\n    let replies = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .orderByChild(\"threadID\")\r\n            .equalTo(threadSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(replies);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let replyObj = snapshot.val();\r\n                    replies.push(replyObj);\r\n                });\r\n\r\n                Promise.all(replies.map(reply => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(reply.author.id)\r\n                            .then(user => {\r\n                                reply.author = user;\r\n                                return resolve(replies);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(replies);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will load club attributes\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadClubAttributes = async () => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .once('value', snapshot => {\r\n                const clubAttributes = snapshot.val();\r\n                return resolve(clubAttributes);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to load invited users of an angel network or ALL for super admin\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadInvitedUsers = async (anid) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        let invitedUsers = [];\r\n\r\n        let dbRef;\r\n\r\n        // load invited users of an angel network\r\n        if (anid) {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('invitedBy')\r\n                .equalTo(anid);\r\n        }\r\n        // load ALL invited users\r\n        else {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n        }\r\n\r\n        dbRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(invitedUsers);\r\n                }\r\n                snapshots.forEach(snapshot => {\r\n                    let user = snapshot.val();\r\n                    invitedUsers.push(user);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n                            .then(angelNetwork => {\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n\r\n                                if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                                    getUserBasedOnID(invitedUser.officialUserID)\r\n                                        .then(officialUser => {\r\n                                            invitedUser.officialUser = officialUser;\r\n                                            return resolve(invitedUsers);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(invitedUsers);\r\n                                }\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject({error: \"No users\"});\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load requests to join (users request to join angel networks)\r\n *\r\n * @param userID\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadRequestsToJoin = async ({userID = null, anid = null}) => {\r\n    return new Promise((resolve, reject) => {\r\n        let requestsRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD);\r\n\r\n        if (userID && anid) {\r\n            return reject(\"userID and anid cannot be defined at the same time\");\r\n        }\r\n\r\n        if (userID) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('userID')\r\n                .equalTo(userID);\r\n        }\r\n\r\n        if (anid) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(anid);\r\n        }\r\n\r\n        if (!requestsRef) {\r\n            return reject(\"Error happened\");\r\n        }\r\n\r\n        let requests = [];\r\n\r\n        requestsRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(requests);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    requests.push(snapshot.val());\r\n                });\r\n\r\n                Promise.all(requests.map(request => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(request.userID)\r\n                            .then(userProfile => {\r\n\r\n                                request.userProfile = userProfile;\r\n\r\n                                loadAngelNetworkBasedOnANID(request.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n\r\n                                        request.group = angelNetwork;\r\n\r\n                                        return resolve(requests);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(requests);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load an invited user based on the official user IF\r\n *\r\n * @param idOrEmail\r\n * @param mode\r\n * @returns {Promise<*>}\r\n */\r\nexport const GET_INVITED_USER_BASED_ON_INVITED_ID = 1;\r\nexport const GET_INVITED_USER_BASED_ON_OFFICIAL_ID = 2;\r\nexport const GET_INVITED_USER_BASED_ON_EMAIL = 3;\r\nexport const getInvitedUserBasedOnIDOrEmail = async (idOrEmail, mode) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let invitedUsers = [];\r\n\r\n        if (mode !== GET_INVITED_USER_BASED_ON_INVITED_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_EMAIL\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild(\r\n                mode === GET_INVITED_USER_BASED_ON_INVITED_ID\r\n                    ?\r\n                    'id'\r\n                    :\r\n                    mode === GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n                        ?\r\n                        'officialUserID'\r\n                        :\r\n                        'email'\r\n            )\r\n            .equalTo(idOrEmail)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No invited users found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    invitedUsers.push(invitedUser);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(invitedUser.invitedBy)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(invitedUsers);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_PROJECTS_ORDER_BY_NONE = 0;\r\nexport const FETCH_PROJECTS_ORDER_BY_VISIBILITY = 1;\r\nexport const FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK = 2;\r\nexport const FETCH_PROJECTS_ORDER_BY_ISSUER = 3;\r\nexport const FETCH_PROJECTS_ORDER_BY_STATUS = 4;\r\n\r\nexport const FETCH_PROJECTS_IN_ANY_PHASE = 111;\r\nexport const FETCH_LIVE_PROJECTS = 222;\r\nexport const FETCH_SUCCESSFUL_PROJECTS = 333;\r\nexport const FETCH_FAILED_PROJECTS = 444;\r\n\r\n/**\r\n * This function is used to fetch projects with filter parameters and limit parameter\r\n *\r\n * @param visibility\r\n * @param angelNetwork\r\n * @param issuer\r\n * @param projectsWithStatus\r\n * @param orderBy\r\n * @param limit\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchProjectsBy = async (\r\n    {\r\n        visibility = null, // fetch projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n        angelNetwork = null, // fetch projects by angel network\r\n        issuer = null, // fetch projects by issuer\r\n        sector = null, // fetch projects by sector\r\n        projectsWithStatus = FETCH_LIVE_PROJECTS, // fetch projects by status\r\n        fetchOrderBy = null // mode to use orderByChild\r\n    },\r\n    limit = 100000 // number of instances to be loaded\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        let projects = [];\r\n\r\n        const db = firebase.database();\r\n        let projectsRef = db.ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n        switch (fetchOrderBy) {\r\n            case FETCH_PROJECTS_ORDER_BY_NONE:\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_VISIBILITY:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('visibility')\r\n                    .equalTo(visibility);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('anid')\r\n                    .equalTo(angelNetwork);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ISSUER:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('issuerID')\r\n                    .equalTo(issuer);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_STATUS:\r\n                if (projectsWithStatus === FETCH_LIVE_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .startAt(DB_CONST.PROJECT_STATUS_PITCH_PHASE)\r\n                        .endAt(DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE);\r\n                } else if (projectsWithStatus === FETCH_SUCCESSFUL_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .equalTo(DB_CONST.PROJECT_STATUS_SUCCESSFUL);\r\n                }\r\n                break;\r\n            default:\r\n                return reject(\"Incorrect mode to fetch projects\");\r\n        }\r\n\r\n        projectsRef\r\n            .limitToLast(limit)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(projects);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let project = snapshot.val();\r\n\r\n                    if (projectsWithStatus) {\r\n                        switch (projectsWithStatus) {\r\n                            case FETCH_PROJECTS_IN_ANY_PHASE:\r\n                                projects.push(project);\r\n                                break;\r\n                            case FETCH_LIVE_PROJECTS:\r\n                                if (utils.isProjectLive(project) && !utils.isProjectTemporarilyClosed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_SUCCESSFUL_PROJECTS:\r\n                                if (utils.isProjectSuccessful(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_FAILED_PROJECTS:\r\n                                if (utils.isProjectFailed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            default:\r\n                                if (project.status === projectsWithStatus) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                        }\r\n                    } else {\r\n                        projects.push(project);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    projects.map(project => {\r\n                        return new Promise((resolve, reject) => {\r\n                            loadAngelNetworkBasedOnANID(project.anid)\r\n                                .then(group => {\r\n                                    project.group = group;\r\n                                    getUserBasedOnID(project.issuerID)\r\n                                        .then(user => {\r\n                                            project.issuer = user;\r\n                                            // only load pledges when a project is in pledge phase\r\n                                            // or it has gone through pledge phase and closed\r\n                                            if (utils.isProjectInLivePledgePhase(project)\r\n                                                || utils.isProjectSuccessful(project)\r\n                                                || utils.isProjectFailed(project)\r\n                                            ) {\r\n                                                // load pledges\r\n                                                loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                    .then(pledges => {\r\n                                                        project.pledges = pledges;\r\n                                                        return resolve(projects);\r\n                                                    })\r\n                                                    .catch(error => {\r\n                                                        // error in loading pledges\r\n                                                        return reject(error);\r\n                                                    });\r\n                                            } else {\r\n                                                return resolve(projects);\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            return reject(error);\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                )\r\n                    .then(() => {\r\n                        return resolve(projects);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load a particular project from its id\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadAParticularProject = async (projectID) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists() || !snapshot.val()) {\r\n                    return reject(\"No project found.\");\r\n                }\r\n\r\n                let project = snapshot.val();\r\n\r\n                loadAngelNetworkBasedOnANID(project.anid)\r\n                    .then(group => {\r\n                        project.group = group;\r\n\r\n                        getUserBasedOnID(project.issuerID)\r\n                            .then(issuer => {\r\n                                project.issuer = issuer;\r\n\r\n                                // projects in pitch phase cannot have any pledges\r\n                                if (project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                                    // load pledges\r\n                                    loadPledges(projectID, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                        .then(pledges => {\r\n                                            project.pledges = pledges;\r\n                                            return resolve(project);\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // error in loading pledges\r\n                                            return reject(error);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(project);\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(\"Couldn't load project issuer\");\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Couldn't load group\");\r\n                    });\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Close a live project temporarily or open a temporarily closed project again\r\n *\r\n * @param admin\r\n * @param project\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleProjectLivelinessTemporarily = async (admin, project) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let shouldSendNotificationForIssuer = false;\r\n        if (project.issuer.type === DB_CONST.TYPE_ISSUER) {\r\n            shouldSendNotificationForIssuer = true;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n\r\n        project.temporarilyClosed = !project.hasOwnProperty('temporarilyClosed')\r\n            ?\r\n            true\r\n            :\r\n            !project.temporarilyClosed;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    project.temporarilyClosed === true\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN;\r\n\r\n                // track admin activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeUpdating,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send notification to the issuer\r\n                if (shouldSendNotificationForIssuer) {\r\n                    sendNotification({\r\n                        title:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                `${project.projectName} has been closed temporarily`\r\n                                :\r\n                                `${project.projectName} has been opened again`\r\n                        ,\r\n                        message:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                \"This investment opportunity has been closed temporarily by your group admin. We will notify you when it is opened again.\"\r\n                                :\r\n                                \"This investment opportunity has been opened again. The investors can now interact with it.\"\r\n                        ,\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                        .then(() => {\r\n                            // do nothing\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                }\r\n\r\n                // Send notifications to investors who voted or pledged\r\n                // load votes\r\n                loadVotes(project.id, null, LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        let listOfInvestorsToBeNotified = [];\r\n                        votes.forEach(vote => {\r\n                            listOfInvestorsToBeNotified.push(vote.investorID);\r\n                        });\r\n\r\n                        // load pledges\r\n                        loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n                                pledges.forEach(pledge => {\r\n                                    if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                        listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                    }\r\n                                });\r\n\r\n                                let notifications = [];\r\n                                listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                    const notification = {\r\n                                        title:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                `${project.projectName} has been closed temporarily`\r\n                                                :\r\n                                                `${project.projectName} has been opened again`\r\n                                        ,\r\n                                        message:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                \"This investment opportunity has been closed temporarily by the group admin. We will notify you when it is opened again.\"\r\n                                                :\r\n                                                \"This investment opportunity has been opened again. You can now interact with it as usual.\"\r\n                                        ,\r\n                                        userID: investorID,\r\n                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                                    };\r\n                                    notifications.push(notification);\r\n                                });\r\n\r\n                                // push all the notifications to firebase\r\n                                Promise.all(notifications.map(notification => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        sendNotification(notification)\r\n                                            .then(() => {\r\n                                                return resolve();\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })).then(() => {\r\n                                    // do nothing\r\n                                }).catch(error => {\r\n                                    // handle error\r\n                                });\r\n                            });\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoLiveDecision = async (admin, project, decisionObj) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n        projectBeforeDecision.issuer = null;\r\n        projectBeforeDecision.pledges = null;\r\n        projectBeforeDecision.group = null;\r\n\r\n        // project goes live\r\n        if (decisionObj.decision) {\r\n            project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n            project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        }\r\n        // project cannot go live\r\n        else {\r\n            project.status = DB_CONST.PROJECT_STATUS_REJECTED;\r\n            project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            let activitySummary =\r\n                decisionObj.decision\r\n                    ?\r\n                    ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH\r\n                    :\r\n                    ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH;\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        emailType: 2,\r\n                        emailInfo: {\r\n                            projectID: project.id\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n\r\n            // track admin activity\r\n            trackActivity({\r\n                userID: admin.id,\r\n                activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                interactedObjectID: project.id,\r\n                activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                value: {\r\n                    before: projectBeforeDecision,\r\n                    after: project\r\n                }\r\n            });\r\n\r\n            // send a notification to notify the issuer\r\n            await\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your offer has been published.`\r\n                            :\r\n                            `Unfortunately your offer has been rejected. Contact your group's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                });\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go to the Pledge phase\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decision\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoToPledgePhaseDecision = async (admin, project, decision) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project can go to the Pledge phase --> the issuer can create their Pledge\r\n    if (decision) {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER;\r\n    }\r\n    // project cannot go to Pledge phase --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has moved to the pledge phase. You can now create your pledge page. Your pledge page will be checked by the group admin before publication.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your group's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project's Pledge can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectPledgeGoLiveDecision = async (admin, project, decisionObj) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project's Pledge can go live --> the investors can start pledging it\r\n    if (decisionObj.decision) {\r\n        project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n        project.status = DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n    }\r\n    // project's pledge cannot go to live --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.PrimaryOffer.status = DB_CONST.PRIMARY_OFFER_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decisionObj.decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has been published. Investors can now pledge.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your group's admin for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all comments of a project\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadComments = async (projectID) => {\r\n    const db = firebase.database();\r\n\r\n    let comments = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(comments);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let comment = snapshot.val();\r\n                    comments.push(comment);\r\n                });\r\n\r\n                Promise.all(\r\n                    comments.map(comment => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(comment.commentedBy)\r\n                                .then(user => {\r\n                                    comment.author = user;\r\n                                    return resolve(comments);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(comments);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load pledges of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_PLEDGES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_PLEDGES_ORDER_BY_INVESTOR = 2;\r\nexport const loadPledges = async (projectID = null, investorID = null, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        let pledgesRef = db.ref(DB_CONST.PLEDGES_CHILD);\r\n        if (projectID && mode === LOAD_PLEDGES_ORDER_BY_PROJECT) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"projectID\")\r\n                .equalTo(projectID);\r\n        } else if (investorID && mode === LOAD_PLEDGES_ORDER_BY_INVESTOR) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"investorID\")\r\n                .equalTo(investorID);\r\n        } else {\r\n            return reject(\"Invalid mode\");\r\n        }\r\n\r\n        let pledges = [];\r\n\r\n        pledgesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(pledges);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let pledge = snapshot.val();\r\n                    if (pledge.amount !== \"\") {\r\n                        pledges.push(pledge);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    pledges.map(pledge => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n                                    return resolve(pledges);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(pledges);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load votes of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_VOTES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_VOTES_ORDER_BY_INVESTOR = 2;\r\nexport const loadVotes = async (projectID = null, investorID = null, mode) => {\r\n    const db = firebase.database();\r\n    let votesRef = db.ref(DB_CONST.VOTES_CHILD);\r\n    if (projectID && mode === LOAD_VOTES_ORDER_BY_PROJECT) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID);\r\n    } else if (investorID && mode === LOAD_VOTES_ORDER_BY_INVESTOR) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"investorID\")\r\n            .equalTo(investorID);\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n    let votes = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        votesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(votes);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let vote = snapshot.val();\r\n                    if (vote.voted !== \"\") {\r\n                        votes.push(vote);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    votes.map(vote => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(vote.investorID)\r\n                                .then(investor => {\r\n                                    vote.investor = investor;\r\n                                    return resolve(votes);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(votes);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    let notifications = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .orderByChild(\"userID\")\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(notifications);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let notification = snapshot.val();\r\n                    notifications.push(notification);\r\n                });\r\n\r\n                return resolve(notifications);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const deleteAllNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // load all notifications of the specified user\r\n        loadNotifications(userID)\r\n            .then(notifications => {\r\n                // delete them all\r\n                Promise.all(notifications.map(notification => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                            .child(notification.id)\r\n                            .remove()\r\n                            .then(() => {\r\n                                return resolve();\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                })).then(() => {\r\n                    return resolve();\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Post a comment reply\r\n *\r\n * @param commentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const postCommentReply = commentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        const replyID = db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(replyID)\r\n            .set({\r\n                ...commentReply,\r\n                id: replyID\r\n            })\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load replies of comments\r\n *\r\n * @param comments\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadCommentsReplies = comments => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        let updatedComments = [...comments];\r\n\r\n        Promise.all(\r\n            updatedComments.map(comment => {\r\n                return new Promise((resolve, reject) => {\r\n                    let replies = [];\r\n\r\n                    db\r\n                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                        .orderByChild('commentID')\r\n                        .equalTo(comment.id)\r\n                        .once('value', snapshots => {\r\n                            if (!snapshots\r\n                                || !snapshots.exists()\r\n                                || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                            ) {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }\r\n\r\n                            snapshots.forEach(snapshot => {\r\n                                const reply = snapshot.val();\r\n                                if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                    // do nothing\r\n                                } else {\r\n                                    replies.push(snapshot.val());\r\n                                }\r\n                            });\r\n\r\n                            Promise.all(\r\n                                replies.map(reply => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        getUserBasedOnID(reply.repliedBy)\r\n                                            .then(user => {\r\n                                                reply.author = user;\r\n                                                return resolve(replies);\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })\r\n                            ).then(() => {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }).catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            })\r\n        ).then(() => {\r\n            return resolve(updatedComments);\r\n        }).catch(error => {\r\n            return reject(error);\r\n        });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Delete a reply of a comment\r\n *\r\n * @param commentReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteCommentReply = commentReplyID => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(commentReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a comment reply\r\n *\r\n * @param updatedCommentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateCommentReply = updatedCommentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(updatedCommentReply.id)\r\n            .update(updatedCommentReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load marketing preferences\r\n *\r\n * @param userID: null --> load all, not null --> load for a particular user\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadMarketingPreferences = (userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const marketingPreferencesRef =\r\n            userID\r\n                ?\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                    .orderByChild(\"userID\")\r\n                    .equalTo(userID)\r\n                :\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD);\r\n\r\n        let marketingPreferences = [];\r\n\r\n        marketingPreferencesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(marketingPreferences);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let marketingPreference = snapshot.val();\r\n                    marketingPreferences.push(marketingPreference);\r\n                });\r\n\r\n                Promise.all(\r\n                    marketingPreferences.map(marketingPreference => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(marketingPreference.userID)\r\n                                .then(user => {\r\n                                    marketingPreference.user = user;\r\n                                    return resolve(marketingPreferences);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(marketingPreferences);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Turn on/off marketing preferences\r\n *\r\n * @param userID\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleMarketingPreferences = async (\r\n    {\r\n        userID,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!userID || !value) {\r\n            return reject(\"Missing arguments\");\r\n        }\r\n\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: value,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    marketingPreferences[0].accepted = value;\r\n                    marketingPreferences[0].date = utils.getCurrentDate();\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .set(marketingPreferences[0])\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a sub settings inside marketing preferences\r\n *\r\n * @param userID\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateMarketingPreferencesSetting = async (\r\n    {\r\n        userID,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: true,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID,\r\n                        settings: {\r\n                            field: value\r\n                        }\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .child('settings')\r\n                        .child(field)\r\n                        .set(value)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update group properties setting\r\n *\r\n * @param anid\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateGroupPropertiesSetting = async (\r\n    {\r\n        anid,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(value)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Bring an expired pitch back to live by setting a new expiry date\r\n *\r\n * @param project\r\n * @param newPitchExpiryDate\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const bringPitchBackToLive = async ({project, newPitchExpiryDate}) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n        project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        project.Pitch.expiredDate = newPitchExpiryDate;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */","import {\r\n    PASSWORD_CHANGE_FAIL,\r\n    PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED,\r\n    PASSWORD_CHANGE_NOT_STRONG_ENOUGH, PASSWORD_CHANGE_RE_AUTH_FAILED,\r\n    PASSWORD_CHANGE_SUCCESS\r\n} from '../../shared-components/change-password/ChangePasswordPage';\r\nimport * as utils from '../../utils/utils';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const CHANGE_PASSWORD_TEXT_CHANGED = 'CHANGE_PASSWORD_TEXT_CHANGED';\r\nexport const handleTextChanged = event => {\r\n    return {\r\n        type: CHANGE_PASSWORD_TEXT_CHANGED,\r\n        name: event.target.name,\r\n        value: event.target.value\r\n    }\r\n};\r\n\r\nexport const RESET_CHANGE_PASSWORD = 'RESET_CHANGE_PASSWORD';\r\nexport const reset = () => {\r\n    return {\r\n        type: RESET_CHANGE_PASSWORD\r\n    }\r\n};\r\n\r\nexport const RE_AUTHENTICATING_USER = 'RE_AUTHENTICATING_USER';\r\nexport const ERROR_CHANGING_PASSWORD = 'ERROR_CHANGING_PASSWORD';\r\nexport const requestChangePassword = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        dispatch({\r\n            type: RE_AUTHENTICATING_USER\r\n        });\r\n\r\n        const passwords = {\r\n            currentPassword: getState().changePassword.currentPassword,\r\n            newPassword: getState().changePassword.newPassword,\r\n            newPasswordVerified: getState().changePassword.newPasswordVerified\r\n        };\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        changePassword(currentUser.email, passwords)\r\n            .then(responseCode => {\r\n                dispatch({\r\n                    type: RESET_CHANGE_PASSWORD,\r\n                    responseCode\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: firebase.auth().currentUser.uid,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD\r\n                    });\r\n            })\r\n            .catch(errorCode => {\r\n                dispatch({\r\n                    type: ERROR_CHANGING_PASSWORD,\r\n                    errorCode\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nconst changePassword = async (email, passwords) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (passwords.newPassword !== passwords.newPasswordVerified) {\r\n            return reject(PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED);\r\n        }\r\n\r\n        const passwordStrength = utils.checkPasswordStrength(passwords.newPassword);\r\n        if (passwordStrength === utils.PASSWORD_VERY_WEAK) {\r\n            return reject(PASSWORD_CHANGE_NOT_STRONG_ENOUGH);\r\n        }\r\n\r\n        firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, passwords.currentPassword)\r\n            .then(credential => {\r\n                firebase\r\n                    .auth()\r\n                    .currentUser\r\n                    .updatePassword(passwords.newPassword)\r\n                    .then(() => {\r\n                        return resolve(PASSWORD_CHANGE_SUCCESS);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(PASSWORD_CHANGE_FAIL)\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(PASSWORD_CHANGE_RE_AUTH_FAILED);\r\n            });\r\n    });\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Typography,\r\n    IconButton\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as changePasswordActions from '../../redux-store/actions/changePasswordActions';\r\n\r\nexport const PASSWORD_CHANGE_NONE = 0;\r\nexport const PASSWORD_CHANGE_RE_AUTH = 1;\r\nexport const PASSWORD_CHANGE_SUCCESS = 2;\r\nexport const PASSWORD_CHANGE_FAIL = 3;\r\nexport const PASSWORD_CHANGE_RE_AUTH_FAILED = 4;\r\nexport const PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED = 5;\r\nexport const PASSWORD_CHANGE_NOT_STRONG_ENOUGH = 6;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentPassword: state.changePassword.currentPassword,\r\n        newPassword: state.changePassword.newPassword,\r\n        newPasswordVerified: state.changePassword.newPasswordVerified,\r\n        passwordChangeResponseCode: state.changePassword.passwordChangeResponseCode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleTextChanged: (event) => dispatch(changePasswordActions.handleTextChanged(event)),\r\n        reset: () => dispatch(changePasswordActions.reset()),\r\n        requestChangePassword: () => dispatch(changePasswordActions.requestChangePassword())\r\n    }\r\n};\r\n\r\nclass ChangePasswordPage extends Component {\r\n\r\n    render() {\r\n        const {\r\n            currentPassword,\r\n            newPassword,\r\n            newPasswordVerified,\r\n            passwordChangeResponseCode,\r\n\r\n            handleTextChanged,\r\n            reset,\r\n            requestChangePassword\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                        style={{\r\n                            padding: 24\r\n                        }}\r\n                    >\r\n                        <FlexView\r\n                            column\r\n                        >\r\n                            <Typography\r\n                                align=\"left\"\r\n                                variant=\"h6\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Update your password\r\n                            </Typography>\r\n                            <Typography\r\n                                align=\"left\"\r\n                                variant=\"body2\"\r\n                                color=\"textSecondary\"\r\n                                style={{\r\n                                    marginTop: 10,\r\n                                    marginBottom: 18\r\n                                }}\r\n                            >\r\n                                Update your password regularly to protect your account better. Password must contain at\r\n                                least 8 characters.\r\n                            </Typography>\r\n                            <TextField\r\n                                label=\"Current password\"\r\n                                name=\"currentPassword\"\r\n                                value={currentPassword}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                label=\"New password\"\r\n                                name=\"newPassword\"\r\n                                value={newPassword}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                error={\r\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\r\n                                }\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                label=\"Verify password\"\r\n                                name=\"newPasswordVerified\"\r\n                                value={newPasswordVerified}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                error={\r\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\r\n                                }\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <Row\r\n                                noGutters\r\n                            >\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={8}\r\n                                    style={{\r\n                                        marginTop: 20\r\n                                    }}\r\n                                >\r\n                                    <PasswordUpdate\r\n                                        responseCode={passwordChangeResponseCode}\r\n                                        onCloseMessage={reset}\r\n                                    />\r\n                                </Col>\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={4}\r\n                                    style={{\r\n                                        marginTop: 20\r\n                                    }}\r\n                                >\r\n                                    <FlexView\r\n                                        hAlignContent=\"right\"\r\n                                        width=\"100%\"\r\n                                    >\r\n                                        <FlexView\r\n                                            marginRight={20}\r\n                                        >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                color=\"primary\"\r\n                                                onClick={reset}>\r\n                                                Cancel\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                onClick={requestChangePassword}\r\n                                                disabled={\r\n                                                    currentPassword.length === 0 ||\r\n                                                    newPassword.length === 0 ||\r\n                                                    newPasswordVerified.length === 0\r\n                                                }>\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nclass PasswordUpdate extends Component {\r\n\r\n    onCloseMessage = () => {\r\n        this.props.onCloseMessage();\r\n    };\r\n\r\n    renderMessage = () => {\r\n        switch (this.props.responseCode) {\r\n            case PASSWORD_CHANGE_RE_AUTH: {\r\n                return {message: \"Re-authenticating ...\", color: colors.dark_green};\r\n            }\r\n            case PASSWORD_CHANGE_FAIL: {\r\n                return {message: \"Failed to change password\", color: colors.red_700};\r\n            }\r\n            case PASSWORD_CHANGE_SUCCESS: {\r\n                return {\r\n                    message: \"Password changed successfully\",\r\n                    color: colors.dark_green\r\n                };\r\n            }\r\n            case PASSWORD_CHANGE_RE_AUTH_FAILED: {\r\n                return {message: \"Failed to re-authenticate\", color: colors.red_700};\r\n            }\r\n            case PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED: {\r\n                return {\r\n                    message: \"New passwords not match with each other\",\r\n                    color: colors.red_700\r\n                };\r\n            }\r\n            case PASSWORD_CHANGE_NOT_STRONG_ENOUGH: {\r\n                return {\r\n                    message:\r\n                        \"Password must have at least 8 characters\",\r\n                    color: colors.red_700\r\n                };\r\n            }\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            responseCode\r\n        } = this.props;\r\n        return (\r\n            responseCode === PASSWORD_CHANGE_NONE\r\n                ?\r\n                null\r\n                :\r\n                <FlexView\r\n                    grow={1}\r\n                    style={{\r\n                        backgroundColor: this.renderMessage().color\r\n                    }}\r\n                    vAlignContent=\"center\"\r\n                >\r\n\r\n                    <FlexView\r\n                        className={css(styles.changing_password_text_background)}\r\n                    >\r\n                        <Typography\r\n                            align=\"left\"\r\n                            variant=\"subtitle1\"\r\n                            color=\"inherit\"\r\n                        >\r\n                            {this.renderMessage().message}\r\n                        </Typography>\r\n                    </FlexView>\r\n\r\n                    <FlexView\r\n                        grow\r\n                        vAlignContent=\"center\"\r\n                        hAlignContent=\"right\"\r\n                        style={{\r\n                            padding: 4\r\n                        }}\r\n                    >\r\n                        <IconButton\r\n                            onClick={this.onCloseMessage}\r\n                        >\r\n                            <CloseIcon\r\n                                fontSize=\"small\"\r\n                                style={{\r\n                                    color: colors.white\r\n                                }}\r\n                            />\r\n                        </IconButton>\r\n                    </FlexView>\r\n                </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePasswordPage);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    changing_password_text_background: {\r\n        color: colors.white,\r\n        marginLeft: 15,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const SET_GROUP_USER_NAME_FROM_PARAMS = 'SET_GROUP_USER_NAME_FROM_PARAMS';\r\nexport const setGroupUserNameFromParams = groupUserName => {\r\n    return (dispatch, getState) => {\r\n        const prevGroupUserName = getState().manageGroupFromParams.groupUserName;\r\n\r\n        // if the newly set groupUserName is different from the current groupUserName, check again\r\n        if (prevGroupUserName !== groupUserName) {\r\n            dispatch({\r\n                type: SET_GROUP_USER_NAME_FROM_PARAMS,\r\n                groupUserName\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING = 'SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING';\r\nexport const setExpectedAndCurrentPathsForChecking = (expectedPath, currentPath) => {\r\n    return {\r\n        type: SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING,\r\n        expectedPath,\r\n        currentPath\r\n    }\r\n};\r\n\r\nexport const LOADING_ANGEL_NETWORK = 'LOADING_ANGEL_NETWORK';\r\nexport const ANGEL_NETWORK_LOADED = 'ANGEL_NETWORK_LOADED';\r\nexport const loadAngelNetwork = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            angelNetworkBeingLoaded,\r\n\r\n            expectedPath,\r\n            currentPath\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const firebaseUser = firebase.auth().currentUser;\r\n\r\n        // angel network has not been loaded before\r\n        if (!groupProperties && !groupPropertiesLoaded && !angelNetworkBeingLoaded) {\r\n\r\n            dispatch({\r\n                type: LOADING_ANGEL_NETWORK\r\n            });\r\n\r\n            // path expected and current path not matched\r\n            if (expectedPath !== currentPath) {\r\n                dispatch({\r\n                    type: ANGEL_NETWORK_LOADED,\r\n                    angelNetwork: null,\r\n                    shouldLoadOtherData: false\r\n                });\r\n                return;\r\n            }\r\n\r\n            // groupUserName is not specified --> Invest West super\r\n            if (!groupUserName) {\r\n                // the user is logged in\r\n                if (firebaseUser) {\r\n                    realtimeDBUtils\r\n                        .getUserBasedOnID(firebaseUser.uid)\r\n                        .then(user => {\r\n                            if (user.type === DB_CONST.TYPE_ADMIN) {\r\n                                if (user.superAdmin) {\r\n                                    dispatch({\r\n                                        type: ANGEL_NETWORK_LOADED,\r\n                                        angelNetwork: null,\r\n                                        shouldLoadOtherData: true\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    dispatch({\r\n                                        type: ANGEL_NETWORK_LOADED,\r\n                                        angelNetwork: null,\r\n                                        shouldLoadOtherData: false\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                dispatch({\r\n                                    type: ANGEL_NETWORK_LOADED,\r\n                                    angelNetwork: null,\r\n                                    shouldLoadOtherData: false\r\n                                });\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: ANGEL_NETWORK_LOADED,\r\n                                angelNetwork: null,\r\n                                shouldLoadOtherData: false\r\n                            });\r\n                        });\r\n                }\r\n                // the user is not logged in\r\n                else {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: null,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                    return;\r\n                }\r\n                return;\r\n            }\r\n\r\n            // angel network has been loaded before\r\n            if (groupProperties) {\r\n                // if anid = null (Invest West) or anid = angel network's anid\r\n                // do not need to load the angel network again\r\n                if (groupUserName === groupProperties.groupUserName) {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: groupProperties,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                    return;\r\n                }\r\n                // if the loaded angel network's anid is not the same as the anid specified in the URL --> load again\r\n                else {\r\n                    dispatch({\r\n                        type: SET_GROUP_USER_NAME_FROM_PARAMS,\r\n                        groupUserName\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: LOADING_ANGEL_NETWORK\r\n                    });\r\n                }\r\n            }\r\n\r\n            realtimeDBUtils\r\n                .loadAngelNetworkBasedOnGroupUserName(groupUserName)\r\n                .then(angelNetwork => {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: null,\r\n                        shouldLoadOtherData: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet angelNetworkListener = null;\r\n\r\nexport const ANGEL_NETWORK_PROPERTIES_CHANGED = 'ANGEL_NETWORK_PROPERTIES_CHANGED';\r\nexport const startListeningForAngelNetworkChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!angelNetworkListener) {\r\n            const {\r\n                groupProperties\r\n            } = getState().manageGroupFromParams;\r\n\r\n            if (groupProperties) {\r\n                if (angelNetworkListener) {\r\n                    return;\r\n                }\r\n                angelNetworkListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                    .child(groupProperties.anid)\r\n                    .on('child_changed', snapshot => {\r\n                        const key = snapshot.key;\r\n                        const value = snapshot.val();\r\n                        dispatch({\r\n                            type: ANGEL_NETWORK_PROPERTIES_CHANGED,\r\n                            key,\r\n                            value\r\n                        });\r\n                    });\r\n            }\r\n            else {\r\n                if (angelNetworkListener) {\r\n                    angelNetworkListener.off('child_changed');\r\n                    angelNetworkListener = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForAngelNetworkChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (angelNetworkListener) {\r\n            angelNetworkListener.off('child_changed');\r\n            angelNetworkListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview/lib/index';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {Typography} from '@material-ui/core';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {\r\n    Container,\r\n    Col,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName))\r\n    }\r\n};\r\n\r\nclass HeaderWithoutDesc extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            user,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0,\r\n                    backgroundColor: colors.white\r\n                }}\r\n            >\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    <Col\r\n                        xs={{span: 12, order: 2}}\r\n                        md={{span: 4, order: 1}}\r\n                        lg={{span: 4, order: 1}}\r\n                    >\r\n                        {\r\n                            !groupProperties\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    vAlignContent=\"center\"\r\n                                    height=\"100%\"\r\n                                    marginLeft={10}\r\n                                >\r\n                                    {\r\n                                        !user || authStatus !== AUTH_SUCCESS\r\n                                            ?\r\n                                            <NavLink\r\n                                                to={groupUserName ? ROUTES.FRONT.replace(\":groupUserName\", groupUserName) : ROUTES.FRONT_INVEST_WEST_SUPER}\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"body1\"\r\n                                                    className={css(styles.navigation_text)}\r\n                                                >\r\n                                                    <HomeIcon\r\n                                                        style={{\r\n                                                            marginBottom: 6,\r\n                                                            marginRight: 5\r\n                                                        }}\r\n                                                    />\r\n                                                    Home\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                            :\r\n                                            <NavLink\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                to={\r\n                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        `${groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        :\r\n                                                        (\r\n                                                            user.type === DB_CONST.TYPE_ISSUER\r\n                                                                ?\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                                                :\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        )\r\n                                                }>\r\n                                                <Typography\r\n                                                    variant=\"body1\"\r\n                                                    className={css(styles.navigation_text)}\r\n                                                >\r\n                                                    <HomeIcon\r\n                                                        style={{\r\n                                                            marginBottom: 6,\r\n                                                            marginRight: 5\r\n                                                        }}\r\n                                                    />\r\n                                                    My dashboard\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                    }\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                    <Col\r\n                        xs={{span: 12, order: 1}}\r\n                        md={{span: 4, order: 2}}\r\n                        lg={{span: 4, order: 1}}\r\n                    >\r\n                        <FlexView\r\n                            style={{\r\n                                padding: 8\r\n                            }}\r\n                            column\r\n                            height=\"100%\"\r\n                            widht=\"100%\"\r\n                            hAlignContent=\"center\"\r\n                            vAlignContent=\"center\"\r\n                        >\r\n                            {\r\n                                !groupProperties\r\n                                    ?\r\n                                    <a\r\n                                        href={ROUTES.ORIGINAL_WEB_URL}\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <FlexView\r\n                                            hAlignContent=\"center\"\r\n                                            column\r\n                                            className={css(styles.logo_field)}\r\n                                        >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                color=\"primary\"\r\n                                            >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Invest West\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </a>\r\n                                    :\r\n                                    <NavLink\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                        to={\r\n                                            groupUserName\r\n                                                ?\r\n                                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                                :\r\n                                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                                        }\r\n                                    >\r\n                                        <FlexView\r\n                                            hAlignContent=\"center\"\r\n                                            column\r\n                                            className={css(styles.logo_field)}\r\n                                        >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                color=\"primary\"\r\n                                            >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Invest West\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </NavLink>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col\r\n                        xs={{span: 12, order: 3}}\r\n                        md={{span: 12, order: 3}}\r\n                        lg={{span: 12, order: 3}}\r\n                    >\r\n                        <FlexView\r\n                            height={1}\r\n                            style={{\r\n                                backgroundColor: colors.gray_300\r\n                            }}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderWithoutDesc);\r\n\r\nconst styles = StyleSheet.create({\r\n    logo: {\r\n        width: \"auto\",\r\n        height: 38,\r\n        marginBottom: 2\r\n    },\r\n\r\n    logo_field: {\r\n        ':hover': {\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    navigation_text: {\r\n        margin: 15,\r\n        padding: 8,\r\n        color: colors.black,\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_100\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Dialog,\r\n    DialogTitle,\r\n    Typography,\r\n    Paper,\r\n    InputAdornment,\r\n    IconButton,\r\n    FormControl\r\n} from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nimport HeaderWithoutDesc from '../../shared-components/nav-bars/HeaderWithoutDesc';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as authActions from '../../redux-store/actions/authActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nexport const INVALID_AUTH_NONE = 0;\r\nexport const INVALID_AUTH_USER_NOT_EXIST = 1;\r\nexport const INVALID_AUTH_USER_DECLINED_TO_REGISTER = 2;\r\nexport const INVALID_AUTH_USER_LEFT = 3;\r\nexport const INVALID_AUTH_USER_KICKED_OUT = 4;\r\nexport const AUTH_SUCCESS = 5;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        authenticating: state.auth.authenticating,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        resetAuthStatus: () => dispatch(authActions.resetAuthStatus()),\r\n        signin: (email, password) => dispatch(authActions.signin(email, password))\r\n    }\r\n};\r\n\r\nclass Signin extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseAuth = firebase.auth();\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            showPassword: false,\r\n\r\n            error: {\r\n                email: false,\r\n                password: false\r\n            },\r\n\r\n            resetPassword: {\r\n                resetPasswordDialogOpen: false,\r\n                resetEmail: '',\r\n\r\n                resetChecking: false,\r\n                resetError: false,\r\n                resetEmailSent: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            resetAuthStatus,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.SIGN_IN : ROUTES.SIGN_IN_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            resetAuthStatus();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            groupUserName,\r\n\r\n            authenticating,\r\n            user,\r\n\r\n            authStatus,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!authenticating && authStatus === AUTH_SUCCESS) {\r\n                switch (user.type) {\r\n                    case DB_CONST.TYPE_ADMIN:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    case DB_CONST.TYPE_INVESTOR:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    case DB_CONST.TYPE_ISSUER:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    default:\r\n                        return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Capture the changes in input fields and update the corresponding states\r\n     */\r\n    handleTextChanged = event => {\r\n        // get the name of the input field\r\n        const name = event.target.name;\r\n        // get the value of the input field\r\n        const value = event.target.value;\r\n\r\n        if (name === \"resetEmail\") {\r\n            this.setState({\r\n                resetPassword: {\r\n                    ...this.state.resetPassword,\r\n                    [name]: value\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                [name]: value\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if pre-conditions met (password and email are filled?) before signing the user in.\r\n     */\r\n    handleSignin = event => {\r\n        event.preventDefault();\r\n\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const password = this.state.password;\r\n\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetEmailSent: false\r\n            }\r\n        });\r\n\r\n        if (email.length > 0 && password.length > 0) {\r\n            this.setState({\r\n                authStatus: false,\r\n                error: {\r\n                    email: false,\r\n                    password: false\r\n                }\r\n            });\r\n\r\n            this.props.signin(email, password);\r\n\r\n        } else {\r\n            if (email.length === 0 && password.length === 0) {\r\n                this.setState({\r\n                    authStatus: false,\r\n                    error: {\r\n                        email: true,\r\n                        password: true\r\n                    }\r\n                });\r\n            } else {\r\n                if (email.length === 0 && password.length > 0) {\r\n                    this.setState({\r\n                        authStatus: false,\r\n                        error: {\r\n                            email: true,\r\n                            password: false\r\n                        }\r\n                    });\r\n                } else if (password.length === 0 && email.length > 0) {\r\n                    this.setState({\r\n                        authStatus: false,\r\n                        error: {\r\n                            email: false,\r\n                            password: true\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Open Reset Password Dialog\r\n     */\r\n    openResetPasswordDialog = () => {\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetPasswordDialogOpen: true,\r\n                // set resetEmailSent state to false to ensure the message of successfully sent email (if have) will disappear\r\n                resetEmailSent: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Reset all states relating Reset Password Dialog when the dialog is closed.\r\n     */\r\n    handleCloseResetPasswordDialog = () => {\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetPasswordDialogOpen: false,\r\n                resetEmail: '',\r\n                resetChecking: false,\r\n                resetError: false,\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Send an email reset password to the user.\r\n     */\r\n    handleSendResetEmail = () => {\r\n        const email = this.state.resetPassword.resetEmail;\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                // set resetChecking state to true to indicate that the email the user input is being checked\r\n                resetChecking: true\r\n            }\r\n        });\r\n        firebase\r\n            .auth()\r\n            .sendPasswordResetEmail(email)\r\n            .then(() => {\r\n                this.setState({\r\n                    resetPassword: {\r\n                        ...this.state.resetPassword,\r\n                        resetEmailSent: true\r\n                    }\r\n                });\r\n                this.handleCloseResetPasswordDialog();\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    resetPassword: {\r\n                        ...this.state.resetPassword,\r\n                        resetChecking: false,\r\n                        resetError: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Click to show password\r\n     */\r\n    handleClickShowPassword = () => {\r\n        this.setState({\r\n            showPassword: !this.state.showPassword\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Render UI elements when the signing credentials are being checked\r\n     */\r\n    renderAuthStatus = () => {\r\n        const {\r\n            groupProperties,\r\n            authenticating,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        if (this.state.resetPassword.resetEmailSent) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    className={css(styles.reset_email_sent)}\r\n                    marginBottom={20}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        align=\"left\"\r\n                    >\r\n                        An email with password reset instructions has been sent to your email address\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        } else {\r\n            if (authenticating) {\r\n                return (\r\n                    <FlexView\r\n                        hAlignContent=\"center\"\r\n                        marginBottom={20}\r\n                    >\r\n                        <HashLoader\r\n                            color={\r\n                                !groupProperties\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    groupProperties.settings.primaryColor\r\n                            }\r\n                        />\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                let errorMsg = '';\r\n                switch (authStatus) {\r\n                    case INVALID_AUTH_NONE:\r\n                        return null;\r\n                    case AUTH_SUCCESS:\r\n                        return null;\r\n                    case INVALID_AUTH_USER_NOT_EXIST:\r\n                        errorMsg = \"Email or password is invalid, or you are not a member of this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_DECLINED_TO_REGISTER:\r\n                        errorMsg = \"You decided not to join this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_LEFT:\r\n                        errorMsg = \"You have left this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_KICKED_OUT:\r\n                        errorMsg = \"Unfortunately, you are no longer a member of this group.\";\r\n                        break;\r\n                    default:\r\n                        return null;\r\n                }\r\n\r\n                return (\r\n                    <FlexView\r\n                        className={css(styles.auth_error)}\r\n                        marginBottom={20}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            align=\"left\"\r\n                        >\r\n                            {errorMsg}\r\n                        </Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    marginTop={30}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={colors.primaryColor}\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0,\r\n                    position: \"fixed\",\r\n                    top: 0,\r\n                    height: \"100%\",\r\n                    overflow: \"auto\",\r\n                    backgroundColor: colors.gray_200\r\n                }}\r\n            >\r\n                <Row\r\n                    noGutters\r\n                >\r\n\r\n                    <HeaderWithoutDesc/>\r\n\r\n                    <Col\r\n                        xs={{span: 12, offset: 0}}\r\n                        md={{span: 6, offset: 3}}\r\n                        lg={{span: 6, offset: 3}}\r\n                        style={{\r\n                            padding: 20\r\n                        }}\r\n                    >\r\n                        <FlexView\r\n                            column\r\n                            marginTop={80}\r\n                            marginBottom={40}\r\n                            hAlignContent=\"center\"\r\n                            vAlignContent=\"center\"\r\n                        >\r\n                            {/** Sign in card */}\r\n                            <Paper\r\n                                elevation={0}\r\n                                square\r\n                                className={css(sharedStyles.kick_starter_border_box)}\r\n                                style={{padding: 30}}\r\n                            >\r\n                                <form\r\n                                    onSubmit={this.handleSignin}\r\n                                >\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FlexView\r\n                                            column\r\n                                            hAlignContent=\"center\"\r\n                                            marginBottom={35}\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"h4\"\r\n                                                align=\"center\"\r\n                                                paragraph\r\n                                                color=\"primary\"\r\n                                            >\r\n                                                Sign in to your account\r\n                                            </Typography>\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                align=\"center\"\r\n                                            >\r\n                                                Connecting businesses and investors across the South West of England\r\n                                            </Typography>\r\n                                        </FlexView>\r\n\r\n                                        {this.renderAuthStatus()}\r\n\r\n                                        <FormControl>\r\n                                            <TextField\r\n                                                label=\"Email address\"\r\n                                                name=\"email\"\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={this.state.error.email}\r\n                                                onChange={this.handleTextChanged}\r\n                                            />\r\n                                        </FormControl>\r\n\r\n                                        <FormControl>\r\n                                            <TextField\r\n                                                label=\"Password\"\r\n                                                name=\"password\"\r\n                                                type={this.state.showPassword ? \"text\" : \"password\"}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={this.state.error.password}\r\n                                                onChange={this.handleTextChanged}\r\n                                                InputProps={{\r\n                                                    endAdornment: (\r\n                                                        <InputAdornment\r\n                                                            position=\"end\"\r\n                                                        >\r\n                                                            <IconButton\r\n                                                                edge=\"end\"\r\n                                                                aria-label=\"Toggle password visibility\"\r\n                                                                onClick={this.handleClickShowPassword}\r\n                                                            >\r\n                                                                {\r\n                                                                    !this.state.showPassword\r\n                                                                        ?\r\n                                                                        <VisibilityOff/>\r\n                                                                        :\r\n                                                                        <Visibility/>\r\n                                                                }\r\n                                                            </IconButton>\r\n                                                        </InputAdornment>\r\n                                                    ),\r\n                                                }}\r\n                                            />\r\n                                        </FormControl>\r\n\r\n                                        <FlexView\r\n                                            marginTop={35}\r\n                                            marginBottom={45}\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                align=\"left\"\r\n                                            >\r\n                                                By clicking Sign In, you agree to our\r\n                                                <NavLink\r\n                                                    to={ROUTES.TERMS_OF_USE}\r\n                                                    target=\"_blank\"\r\n                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                    style={{\r\n                                                        color:\r\n                                                            !groupProperties\r\n                                                                ?\r\n                                                                colors.primaryColor\r\n                                                                :\r\n                                                                groupProperties.settings.primaryColor\r\n                                                    }}\r\n                                                >\r\n                                                    <b>\r\n                                                        &nbsp;Terms of use&nbsp;\r\n                                                    </b>\r\n                                                </NavLink>\r\n                                                and our\r\n                                                <NavLink\r\n                                                    to={ROUTES.PRIVACY_POLICY}\r\n                                                    target=\"_blank\"\r\n                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                    style={{\r\n                                                        color:\r\n                                                            !groupProperties\r\n                                                                ?\r\n                                                                colors.primaryColor\r\n                                                                :\r\n                                                                groupProperties.settings.primaryColor\r\n                                                    }}\r\n                                                >\r\n                                                    <b>\r\n                                                        &nbsp;Privacy policy.\r\n                                                    </b>\r\n                                                </NavLink>\r\n                                            </Typography>\r\n                                        </FlexView>\r\n\r\n                                        <FormControl>\r\n                                            <Button\r\n                                                type=\"submit\"\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                size=\"large\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                            >\r\n                                                Sign in\r\n                                            </Button>\r\n                                        </FormControl>\r\n\r\n                                        <FlexView\r\n                                            hAlignContent=\"center\"\r\n                                            marginTop={25}\r\n                                            onClick={this.openResetPasswordDialog}\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                color=\"primary\"\r\n                                                className={css(sharedStyles.nav_link_hover)}\r\n                                            >\r\n                                                Forgot your password?\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </form>\r\n                            </Paper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <ResetPasswordDialog\r\n                    groupProperties={groupProperties}\r\n                    open={this.state.resetPassword.resetPasswordDialogOpen}\r\n                    onClose={this.handleCloseResetPasswordDialog}\r\n                    onTextChanged={this.handleTextChanged}\r\n                    resetEmail={this.state.resetPassword.resetEmail}\r\n                    onSendEmailClick={this.handleSendResetEmail}\r\n                    resetChecking={this.state.resetPassword.resetChecking}\r\n                    resetError={this.state.resetPassword.resetError}\r\n                />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);\r\n\r\nclass ResetPasswordDialog extends Component {\r\n\r\n    handleClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    onSendEmailClick = () => {\r\n        this.props.onSendEmailClick();\r\n    };\r\n\r\n    renderReset = () => {\r\n        const {\r\n            groupProperties,\r\n            resetChecking,\r\n            resetError\r\n        } = this.props;\r\n        if (resetChecking) {\r\n            return (\r\n                <FlexView\r\n                    hAlignContent=\"center\"\r\n                    marginBottom={30}\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        } else {\r\n            if (resetError) {\r\n                return (\r\n                    <FlexView\r\n                        style={{\r\n                            backgroundColor: colors.red_700\r\n                        }}\r\n                        vAlignContent=\"center\"\r\n                        marginBottom={30}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            className={css(styles.reset_email_error_text)}\r\n                        >\r\n                            Unable to send request password email\r\n                        </Typography>\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            resetEmail,\r\n            resetError,\r\n            resetChecking,\r\n\r\n            onClose,\r\n            onTextChanged,\r\n            onSendEmailClick,\r\n            ...other\r\n        } = this.props;\r\n        return (\r\n            <Dialog\r\n                fullWidth\r\n                maxWidth=\"sm\"\r\n                onClose={this.handleClose}\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <FlexView\r\n                        hAlignContent=\"center\"\r\n                        marginTop={20}\r\n                    >\r\n                        <Typography\r\n                            variant=\"h4\"\r\n                            align=\"center\"\r\n                            paragraph\r\n                        >\r\n                            Reset Your Password\r\n                        </Typography>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <FlexView\r\n                    column\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <FlexView\r\n                        column\r\n                        marginRight={60}\r\n                        marginLeft={60}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"center\"\r\n                            paragraph\r\n                        >\r\n                            Please provide the email address you used\r\n                            when you signed up for your Invest West account.\r\n                        </Typography>\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"center\"\r\n                            paragraph\r\n                        >\r\n                            We will send you an email with a link to\r\n                            reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b>\r\n                        </Typography>\r\n                    </FlexView>\r\n                    <FlexView\r\n                        column\r\n                        width=\"100%\"\r\n                        marginTop={50}\r\n                        className={css(styles.reset_password_actions_layout)}\r\n                    >\r\n\r\n                        {this.renderReset()}\r\n\r\n                        <Container\r\n                            fluid\r\n                            style={{\r\n                                padding: 0\r\n                            }}\r\n                        >\r\n                            <Row>\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={7}\r\n                                    lg={9}\r\n                                >\r\n                                    <FlexView\r\n                                        height=\"100%\"\r\n                                        vAlignContent=\"center\"\r\n                                    >\r\n                                        <TextField\r\n                                            name=\"resetEmail\"\r\n                                            value={resetEmail}\r\n                                            label=\"Email address\"\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                            onChange={this.onTextChanged}\r\n                                        />\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={5}\r\n                                    lg={3}\r\n                                >\r\n                                    <FlexView\r\n                                        height=\"100%\"\r\n                                        vAlignContent=\"center\"\r\n                                    >\r\n                                        <Button\r\n                                            fullWidth\r\n                                            color=\"primary\"\r\n                                            variant=\"contained\"\r\n                                            size=\"medium\"\r\n                                            onClick={this.onSendEmailClick}\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                        >\r\n                                            Send\r\n                                        </Button>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n                    </FlexView>\r\n                </FlexView>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    hover: {\r\n        ':hover': {\r\n            color: colors.gray_800,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    auth_error: {\r\n        backgroundColor: colors.red_700,\r\n        color: colors.white,\r\n        padding: 15\r\n    },\r\n\r\n    reset_email_sent: {\r\n        backgroundColor: colors.dark_green,\r\n        color: colors.white,\r\n        padding: 15\r\n    },\r\n\r\n    reset_password_actions_layout: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingTop: 42,\r\n        paddingBottom: 42,\r\n        backgroundColor: colors.gray_200\r\n    },\r\n\r\n    reset_email_error_text: {\r\n        color: colors.white,\r\n        marginLeft: 15,\r\n        marginTop: 15,\r\n        marginBottom: 15\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {\r\n    INVALID_AUTH_USER_NOT_EXIST,\r\n    INVALID_AUTH_USER_DECLINED_TO_REGISTER,\r\n    INVALID_AUTH_USER_LEFT,\r\n    INVALID_AUTH_USER_KICKED_OUT,\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nexport const INITIALIZE_AUTH_STATE = 'INITIALIZE_AUTH_STATE';\r\nexport const initializeAuthState = () => {\r\n    return {\r\n        type: INITIALIZE_AUTH_STATE\r\n    }\r\n};\r\n\r\nexport const RESET_AUTH_STATUS = 'RESET_AUTH_STATUS';\r\nexport const resetAuthStatus = () => {\r\n    return {\r\n        type: RESET_AUTH_STATUS\r\n    }\r\n};\r\n\r\nexport const SIGNING_IN = 'SIGNING_IN';\r\nexport const AUTHENTICATING = 'AUTHENTICATING';\r\nexport const FINISHED_AUTHENTICATING = 'FINISHED_AUTHENTICATING';\r\nexport const signin = (email, password) => {\r\n    return (dispatch, getState) => {\r\n        // if the user is already logged in and they still press signin again\r\n        // log them out first before starting the sign in process\r\n        logOutWithIndirectDispatch(dispatch);\r\n\r\n        dispatch({\r\n            type: SIGNING_IN\r\n        });\r\n\r\n        dispatch({\r\n            type: AUTHENTICATING\r\n        });\r\n\r\n        firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, password)\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_AUTHENTICATING,\r\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP = 'TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP';\r\nexport const togglePreventValidatingUserWhenSigningUp = (shouldPrevent) => {\r\n    return {\r\n        type: TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP,\r\n        shouldPrevent\r\n    }\r\n};\r\n\r\nexport const USER_PROFILE_LOADED = 'USER_PROFILE_LOADED';\r\nexport const AUTH_LOADING_GROUPS_USER_IS_IN = 'AUTH_LOADING_GROUPS_USER_IS_IN';\r\nexport const AUTH_GROUPS_USER_IS_IN_LOADED = 'AUTH_GROUPS_USER_IS_IN_LOADED';\r\n/**\r\n * This function is used to load user's profile and check if the user belongs to the angel network specified in the URL\r\n *\r\n * @param uid\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const getUserProfileAndValidateUser = uid => {\r\n    return (dispatch, getState) => {\r\n\r\n        if (!uid) {\r\n            dispatch({\r\n                type: USER_PROFILE_LOADED,\r\n                user: null\r\n            });\r\n            return;\r\n        }\r\n\r\n        const {\r\n            groupUserName,\r\n            groupProperties\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const {\r\n            signingIn,\r\n            user,\r\n            userLoaded,\r\n            preventValidatingUserWhenSigningUp\r\n        } = getState().auth;\r\n\r\n        // if in signup process, do not proceed loading the user's profile as it will cause a lot of conflicts\r\n        // due to the lack of user's data on the database\r\n        if (preventValidatingUserWhenSigningUp) {\r\n            return;\r\n        }\r\n\r\n        if (user && userLoaded) {\r\n            return;\r\n        }\r\n\r\n        // if the page is reloaded (not from the Sign in button), this process will become the signin process\r\n        if (!signingIn) {\r\n            dispatch({\r\n                type: AUTHENTICATING\r\n            });\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .getUserBasedOnID(uid)\r\n            .then(user => {\r\n                dispatch({\r\n                    type: USER_PROFILE_LOADED,\r\n                    user\r\n                });\r\n\r\n                // if the user is an admin, do not need to check for groups they are in\r\n                if (user.type === DB_CONST.TYPE_ADMIN) {\r\n                    // groupUserName is specified in the URL --> angel network login\r\n                    if (groupUserName) {\r\n                        // check if the angel network specified in the URL is valid\r\n                        if (groupProperties) {\r\n                            // check if the admin is from an angel network and if the admin's anid is equal to the anid specified in the URL\r\n                            if (!user.isInvestWest && !user.superAdmin && user.anid === groupProperties.anid) {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: AUTH_SUCCESS\r\n                                });\r\n                            } else {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                            }\r\n                        } else {\r\n                            // do nothing\r\n                        }\r\n                    }\r\n                    // angel network is not specified in the URL --> Invest West login\r\n                    else {\r\n                        // admins are from Invest West\r\n                        if (user.isInvestWest || user.superAdmin) {\r\n                            dispatch({\r\n                                type: FINISHED_AUTHENTICATING,\r\n                                authStatus: AUTH_SUCCESS\r\n                            });\r\n                        } else {\r\n                            dispatch({\r\n                                type: FINISHED_AUTHENTICATING,\r\n                                authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                            });\r\n\r\n                            logOutWithIndirectDispatch(dispatch);\r\n                        }\r\n                    }\r\n                }\r\n                // the user is not an admin (issuer or investor), load the groups they are in to check for login with each angel network\r\n                else {\r\n                    dispatch({\r\n                        type: AUTH_LOADING_GROUPS_USER_IS_IN\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .loadGroupsUserIsIn(user.id)\r\n                        .then(groupsUserIsIn => {\r\n                            dispatch({\r\n                                type: AUTH_GROUPS_USER_IS_IN_LOADED,\r\n                                groups: groupsUserIsIn\r\n                            });\r\n\r\n                            // user is not in any groups --> this is impractical but worth checking just in case\r\n                            if (!groupsUserIsIn || (groupsUserIsIn && groupsUserIsIn.length === 0)) {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                                return;\r\n                            }\r\n\r\n                            let groupFound = null;\r\n\r\n                            // groupUserName is specified in the URL --> angel network login\r\n                            if (groupUserName) {\r\n                                // check if the angel network specified in the URL is valid\r\n                                if (groupProperties) {\r\n                                    groupsUserIsIn.forEach(group => {\r\n                                        if (group.anid === groupProperties.anid) {\r\n                                            groupFound = group;\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    // do nothing\r\n                                }\r\n                            }\r\n                            // angel network is not specified in the URL --> Invest West login\r\n                            else {\r\n                                groupsUserIsIn.forEach(group => {\r\n                                    if (group.isInvestWest) {\r\n                                        groupFound = group;\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            // check if the angel network specified in the URL is valid\r\n                            if (groupProperties) {\r\n                                if (groupFound) {\r\n                                    if (groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\r\n                                        dispatch({\r\n                                            type: FINISHED_AUTHENTICATING,\r\n                                            authStatus: AUTH_SUCCESS\r\n                                        });\r\n                                    } else {\r\n                                        dispatch({\r\n                                            type: FINISHED_AUTHENTICATING,\r\n                                            authStatus:\r\n                                                groupFound.userInGroupStatus === DB_CONST.INVITED_USER_DECLINED_TO_REGISTER\r\n                                                    ?\r\n                                                    INVALID_AUTH_USER_DECLINED_TO_REGISTER\r\n                                                    :\r\n                                                    groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_LEFT\r\n                                                        ?\r\n                                                        INVALID_AUTH_USER_LEFT\r\n                                                        :\r\n                                                        groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_KICKED_OUT\r\n                                                            ?\r\n                                                            INVALID_AUTH_USER_KICKED_OUT\r\n                                                            :\r\n                                                            INVALID_AUTH_USER_NOT_EXIST\r\n                                        });\r\n\r\n                                        logOutWithIndirectDispatch(dispatch);\r\n                                    }\r\n                                } else {\r\n                                    dispatch({\r\n                                        type: FINISHED_AUTHENTICATING,\r\n                                        authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                    });\r\n\r\n                                    logOutWithIndirectDispatch(dispatch);\r\n                                }\r\n                            }\r\n                            // the angel network is set to null --> super page\r\n                            else {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: AUTH_LOADING_GROUPS_USER_IS_IN,\r\n                                groups: null,\r\n                                error\r\n                            });\r\n\r\n                            logOutWithIndirectDispatch(dispatch);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: USER_PROFILE_LOADED,\r\n                    user: null\r\n                });\r\n\r\n                dispatch({\r\n                    type: FINISHED_AUTHENTICATING,\r\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                });\r\n\r\n                logOutWithIndirectDispatch(dispatch);\r\n            });\r\n    }\r\n};\r\n\r\n/**\r\n * Logout function to be used within this file\r\n *\r\n * @param dispatch\r\n */\r\nexport const logOutWithIndirectDispatch = (dispatch) => {\r\n    firebase\r\n        .auth()\r\n        .signOut()\r\n        .then(() => {\r\n            dispatch({\r\n                type: LOG_OUT\r\n            });\r\n        });\r\n};\r\n\r\nexport const LOG_OUT = 'LOG_OUT';\r\n/**\r\n * Logout function --> called outside this file\r\n *\r\n * For some reasons (don't now), this function won't get called when called inside this file\r\n *\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const logout = () => {\r\n    return (dispatch, getState) => {\r\n        // firebase\r\n        //     .auth()\r\n        //     .signOut()\r\n        //     .then(() => {\r\n        //\r\n        //     });\r\n        return dispatch({\r\n            type: LOG_OUT\r\n        });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet userListener = null;\r\nlet groupsUserIsInListener = null;\r\n\r\nexport const CURRENT_USER_PROFILE_HAS_CHANGED = 'CURRENT_USER_PROFILE_HAS_CHANGED';\r\nexport const startListeningForUserProfileChanges = () => {\r\n    return (dispatch, getState) => {\r\n        if (!userListener) {\r\n            const {\r\n                user\r\n            } = getState().auth;\r\n\r\n            userListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id);\r\n\r\n            userListener\r\n                .on('value', snapshot => {\r\n                    const userChanged = snapshot.val();\r\n                    // this on changed function will be invoked as soon as the user profile is downloaded\r\n                    // however, the snapshot.val() returns null as there are no changes\r\n                    // thus, we need to check if snapshot.val() is not null before assigning its value\r\n                    // to the user variable. Otherwise, the user variable will be set to null which causes\r\n                    // PageNotFound to be returned.\r\n                    if (userChanged) {\r\n                        dispatch({\r\n                            type: CURRENT_USER_PROFILE_HAS_CHANGED,\r\n                            userChanged\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForUserProfileChanges = () => {\r\n    return (dispatch, getState) => {\r\n        if (userListener) {\r\n            userListener.off('value');\r\n            userListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const GROUPS_USER_IS_IN_HAVE_CHANGED = 'GROUPS_USER_IS_IN_HAVE_CHANGED';\r\nexport const startListeningForGroupsUserIsIn = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const user = getState().auth.user;\r\n\r\n        if (!groupsUserIsInListener) {\r\n            groupsUserIsInListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('email')\r\n                .equalTo(user.email);\r\n\r\n            groupsUserIsInListener\r\n                .on('child_added', snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    const groupsUserIsIn = getState().auth.groupsUserIsIn;\r\n\r\n                    let groupUserIsIn = {\r\n                        invitedUser: invitedUser,\r\n                        anid: invitedUser.invitedBy,\r\n                        userInGroupStatus: invitedUser.status\r\n                    };\r\n\r\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\r\n                    if (index === -1) {\r\n                        realtimeDBUtils\r\n                            .loadAngelNetworkBasedOnANID(groupUserIsIn.anid)\r\n                            .then(angelNetwork => {\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n\r\n                                dispatch({\r\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\r\n                                    groups: [...groupsUserIsIn, groupUserIsIn]\r\n                                });\r\n                            });\r\n                    }\r\n                });\r\n\r\n            groupsUserIsInListener\r\n                .on('child_changed', snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    let groupsUserIsIn = getState().auth.groupsUserIsIn;\r\n\r\n                    let groupUserIsIn = {\r\n                        invitedUser: invitedUser,\r\n                        anid: invitedUser.invitedBy,\r\n                        userInGroupStatus: invitedUser.status\r\n                    };\r\n\r\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\r\n                    if (index !== -1) {\r\n                        realtimeDBUtils\r\n                            .loadAngelNetworkBasedOnANID(groupsUserIsIn.anid)\r\n                            .then(angelNetwork => {\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n\r\n                                groupsUserIsIn[index] = groupsUserIsIn;\r\n\r\n                                dispatch({\r\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\r\n                                    groups: [...groupsUserIsIn]\r\n                                });\r\n                            });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForGroupsUserIsIn = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupsUserIsInListener) {\r\n            groupsUserIsInListener.off('child_added');\r\n            groupsUserIsInListener.off('child_changed');\r\n            groupsUserIsInListener = null;\r\n        }\r\n    }\r\n};\r\n\r\n","export const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\r\nexport const toggleSidebar = checkSidebarDocked => {\r\n    return (dispatch, getState) => {\r\n\r\n        if (!checkSidebarDocked) {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarOpen: false\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (getState().MediaQueryState.isLaptop || getState().MediaQueryState.isDesktop) {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarDocked: !getState().dashboardSidebar.sidebarDocked,\r\n                sidebarOpen: false\r\n            });\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarDocked: false,\r\n                sidebarOpen: !getState().dashboardSidebar.sidebarOpen\r\n            });\r\n        }\r\n    }\r\n};","import * as utils from '../../utils/utils';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {trackActivity} from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const LOADING_FORUMS = 'LOADING_FORUMS';\r\nexport const FINISHED_LOADING_FORUMS = 'FINISHED_LOADING_FORUMS';\r\nexport const ERROR_LOADING_FORUMS = 'ERROR_LOADING_FORUMS';\r\nexport const loadForums = (mode) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const forums = getState().manageForums.forums;\r\n        const forumsLoaded = getState().manageForums.forumsLoaded;\r\n\r\n        if (!forumsLoaded && forums.length === 0) {\r\n            dispatch({\r\n                type: LOADING_FORUMS\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .loadForums(mode)\r\n                .then(forums => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_FORUMS,\r\n                        forums\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_FORUMS,\r\n                        forums: [],\r\n                        error\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not load forums.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_FORUMS_MAIN = 'GO_BACK_TO_FORUMS_MAIN';\r\nexport const goBackToForumsMain = () => {\r\n    return {\r\n        type: GO_BACK_TO_FORUMS_MAIN\r\n    }\r\n};\r\n\r\nexport const TOGGLE_CREATE_NEW_FORUM = 'TOGGLE_CREATE_NEW_FORUM';\r\nexport const toggleCreateNewForum = (open, forumEdited) => {\r\n    return {\r\n        type: TOGGLE_CREATE_NEW_FORUM,\r\n        open, // true --> Open, false --> Close\r\n        forumEdited // not null --> Editing a forum, null --> Creating a new forum\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_NEW_FORUM = 'ERROR_CREATING_NEW_FORUM';\r\nexport const createNewForum = () => {\r\n    return (dispatch, getState) => {\r\n        let forumBeforeEditing = getState().manageForums.forumEdited;\r\n        const createForumName = getState().manageForums.createForumName;\r\n        const createForumDesc = getState().manageForums.createForumDesc;\r\n\r\n        if (createForumName.trim().length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_NEW_FORUM\r\n            });\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // creating a new forum\r\n        if (!forumBeforeEditing) {\r\n            const forum = {\r\n                name: createForumName,\r\n                description: createForumDesc,\r\n                dateCreated: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createForum(forum)\r\n                .then(forumID => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_FORUM,\r\n                        open: false,\r\n                        forumEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                            interactedObjectID: forumID,\r\n                            value: {\r\n                                ...forum,\r\n                                id: forumID\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM\r\n                                .replace(\"%forum%\", forum.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Forum created.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create forum.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing a forum\r\n        else {\r\n            forumBeforeEditing.author = {\r\n                id: forumBeforeEditing.author.id\r\n            };\r\n\r\n            // only allow super admins to edit a forum\r\n            if (!currentUser\r\n                || (\r\n                    currentUser && !currentUser.superAdmin\r\n                )\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            let forumAfterEditing = JSON.parse(JSON.stringify(forumBeforeEditing));\r\n            forumAfterEditing.name = createForumName;\r\n            forumAfterEditing.description = createForumDesc;\r\n            // update the edited time\r\n            forumAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editForum(forumAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_FORUM,\r\n                        open: false,\r\n                        forumEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                            interactedObjectID: forumAfterEditing.id,\r\n                            value: {\r\n                                before: forumBeforeEditing,\r\n                                after: forumAfterEditing\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM\r\n                                .replace(\"%forumName%\", forumAfterEditing.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Forum updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update forum.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const deleteForum = forumID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // only allow super admins to delete a forum\r\n        if (!currentUser\r\n            || (\r\n                currentUser && !currentUser.superAdmin\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        let forums = [...getState().manageForums.forums];\r\n        let forumBeforeChanging = JSON.parse(JSON.stringify(forums[forums.findIndex(forum => forum.id === forumID)]));\r\n        forumBeforeChanging.author = {\r\n            id: forumBeforeChanging.author.id\r\n        };\r\n\r\n        realtimeDBUtils\r\n            .deleteForum(forumID)\r\n            .then(() => {\r\n                const forumAfterChanging = {\r\n                    ...forumBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                    interactedObjectID: forumBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM\r\n                        .replace(\"%forumName%\", forumBeforeChanging.name),\r\n                    value: {\r\n                        before: forumBeforeChanging,\r\n                        after: forumAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Forum deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete forum.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const FORUMS_INPUT_CHANGED = 'FORUMS_INPUT_CHANGED';\r\nexport const handleForumsInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const targetName = event.target.name;\r\n        const targetValue = event.target.value;\r\n\r\n        dispatch({\r\n            type: FORUMS_INPUT_CHANGED,\r\n            name: targetName,\r\n            value: targetValue\r\n        });\r\n\r\n        switch (targetName) {\r\n            // forumsLoadModeChanged\r\n            case \"forumsLoadMode\": {\r\n                dispatch({\r\n                    type: LOADING_FORUMS\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .loadForums(targetValue)\r\n                    .then(forums => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_FORUMS,\r\n                            forums\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_FORUMS,\r\n                            forums: [],\r\n                            error\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                            message: \"Error happened. Could not load forums.\",\r\n                            color: \"error\",\r\n                            position: \"bottom\"\r\n                        });\r\n                    });\r\n\r\n                return;\r\n            }\r\n            // threadsLoadMode changed\r\n            case \"threadsLoadMode\": {\r\n\r\n                const forumSelected = getState().manageForums.forumSelected;\r\n\r\n                dispatch({\r\n                    type: LOADING_THREADS_IN_A_FORUM,\r\n                    forumSelected: forumSelected\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .loadThreads(targetValue, forumSelected)\r\n                    .then(threads => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                            threads\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                            threads: [],\r\n                            error\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                            message: \"Error happened. Could not load threads.\",\r\n                            color: \"error\",\r\n                            position: \"bottom\"\r\n                        });\r\n                    });\r\n\r\n                return;\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n};\r\n\r\nexport const LOADING_THREADS_IN_A_FORUM = 'LOADING_THREADS_IN_A_FORUM';\r\nexport const FINISHED_LOADING_THREADS_IN_A_FORUM = 'FINISHED_LOADING_THREADS_IN_A_FORUM';\r\nexport const clickOnAParticularForum = forum => {\r\n    return (dispatch, getState) => {\r\n\r\n        const threadsLoadMode = getState().manageForums.threadsLoadMode;\r\n\r\n        dispatch({\r\n            type: LOADING_THREADS_IN_A_FORUM,\r\n            forumSelected: forum\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadThreads(threadsLoadMode, forum)\r\n            .then(threads => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                    threads\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                    threads: [],\r\n                    error\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load threads.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_FORUMS_LIST = 'GO_BACK_TO_FORUMS_LIST';\r\nexport const goBackToForumsList = () => {\r\n    return {\r\n        type: GO_BACK_TO_FORUMS_LIST\r\n    }\r\n};\r\n\r\nexport const TOGGLE_CREATE_NEW_THREAD = 'TOGGLE_CREATE_NEW_THREAD';\r\nexport const toggleCreateNewThread = (open, threadEdited) => {\r\n    return {\r\n        type: TOGGLE_CREATE_NEW_THREAD,\r\n        open, // true --> Open, false --> Close\r\n        threadEdited // not null --> Editing a thread, null --> Creating a new thread\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_NEW_THREAD = 'ERROR_CREATING_NEW_THREAD';\r\nexport const createNewThread = () => {\r\n    return (dispatch, getState) => {\r\n        let threadBeforeEditing = getState().manageForums.threadEdited;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const createThreadName = getState().manageForums.createThreadName;\r\n        const createThreadBriefDesc = getState().manageForums.createThreadBriefDesc;\r\n        const createThreadMessage = getState().manageForums.createThreadMessage;\r\n\r\n        if (createThreadName.trim().length === 0\r\n            || createThreadBriefDesc.trim().length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_NEW_THREAD\r\n            });\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // creating a new thread\r\n        if (!threadBeforeEditing) {\r\n            const thread = {\r\n                forumID: forumSelected.id,\r\n                name: createThreadName,\r\n                message: createThreadMessage,\r\n                description: createThreadBriefDesc,\r\n                dateCreated: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createThread(thread)\r\n                .then(threadID => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_THREAD,\r\n                        open: false,\r\n                        threadEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                            interactedObjectID: threadID,\r\n                            value: {\r\n                                ...thread,\r\n                                id: threadID\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD\r\n                                .replace(\"%thread%\", thread.name)\r\n                                .replace(\"%forum%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Thread created.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create thread.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing a thread\r\n        else {\r\n            threadBeforeEditing.author = {\r\n                id: threadBeforeEditing.author.id\r\n            };\r\n\r\n            // only allow super admins to edit a thread\r\n            if (!currentUser\r\n                || (\r\n                    currentUser && !currentUser.superAdmin\r\n                )\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            let threadAfterEditing = JSON.parse(JSON.stringify(threadBeforeEditing));\r\n            threadAfterEditing.name = createThreadName;\r\n            threadAfterEditing.description = createThreadBriefDesc;\r\n            threadAfterEditing.message = createThreadMessage;\r\n            // update the edited time\r\n            threadAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editThread(threadAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_THREAD,\r\n                        open: false,\r\n                        threadEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                            interactedObjectID: threadAfterEditing.id,\r\n                            value: {\r\n                                before: threadBeforeEditing,\r\n                                after: threadAfterEditing\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD\r\n                                .replace(\"%threadName%\", threadAfterEditing.name)\r\n                                .replace(\"%forumName%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Thread updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update thread.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const deleteThread = threadID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n\r\n        // only allow super admins to delete a thread\r\n        if (!currentUser\r\n            || (\r\n                currentUser && !currentUser.superAdmin\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        let threads = [...getState().manageForums.forumThreads];\r\n        let threadBeforeChanging = JSON.parse(JSON.stringify(threads[threads.findIndex(thread => thread.id === threadID)]));\r\n        threadBeforeChanging.author = {\r\n            id: threadBeforeChanging.author.id\r\n        };\r\n\r\n        realtimeDBUtils\r\n            .deleteThread(threadID)\r\n            .then(() => {\r\n                const threadAfterChanging = {\r\n                    ...threadBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                    interactedObjectID: threadBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD\r\n                        .replace(\"%threadName%\", threadBeforeChanging.name)\r\n                        .replace(\"%forumName%\", forumSelected.name),\r\n                    value: {\r\n                        before: threadBeforeChanging,\r\n                        after: threadAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Thread deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete thread.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const LOADING_REPLIES_IN_A_THREAD = 'LOADING_REPLIES_IN_A_THREAD';\r\nexport const FINISHED_LOADING_REPLIES_IN_A_THREAD = 'FINISHED_LOADING_REPLIES_IN_A_THREAD';\r\nexport const clickOnAParticularThread = thread => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: LOADING_REPLIES_IN_A_THREAD,\r\n            threadSelected: thread\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadThreadReplies(thread)\r\n            .then(replies => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\r\n                    replies\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\r\n                    replies: [],\r\n                    error\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load replies.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_THREADS_LIST = 'GO_BACK_TO_THREADS_LIST';\r\nexport const goBackToThreadsList = () => {\r\n    return {\r\n        type: GO_BACK_TO_THREADS_LIST\r\n    }\r\n};\r\n\r\nexport const TOGGLE_THREAD_REPLY = 'TOGGLE_THREAD_REPLY';\r\nexport const toggleThreadReply = (open, threadReplyEdited) => {\r\n    return {\r\n        type: TOGGLE_THREAD_REPLY,\r\n        open,\r\n        threadReplyEdited\r\n    }\r\n};\r\n\r\nexport const deleteThreadReply = threadReplyID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        let threadReplies = [...getState().manageForums.forumThreadReplies];\r\n        let threadReplyBeforeChanging = JSON.parse(JSON.stringify(threadReplies[threadReplies.findIndex(reply => reply.id === threadReplyID)]));\r\n        threadReplyBeforeChanging.author = {\r\n            id: threadReplyBeforeChanging.author.id\r\n        };\r\n\r\n        // this if statement ensures only super admins or the owner of the reply can delete it\r\n        if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeChanging.author.id) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .deleteThreadReply(threadReplyID)\r\n            .then(() => {\r\n                const threadReplyAfterChanging = {\r\n                    ...threadReplyBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                    interactedObjectID: threadReplyBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY\r\n                        .replace(\"%threadName%\", forumThreadSelected.name)\r\n                        .replace(\"%forumName%\", forumSelected.name),\r\n                    value: {\r\n                        before: threadReplyBeforeChanging,\r\n                        after: threadReplyAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Reply deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete reply.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_THREAD_REPLY = 'ERROR_CREATING_THREAD_REPLY';\r\nexport const submitThreadReply = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n        const threadReplySubject = getState().manageForums.threadReplySubject;\r\n        const threadReplyMessage = getState().manageForums.threadReplyMessage;\r\n\r\n        let threadReplyBeforeEditing = getState().manageForums.threadReplyEdited;\r\n\r\n        if (threadReplySubject.trim().length === 0 || threadReplyMessage.ops.length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_THREAD_REPLY\r\n            });\r\n            return;\r\n        }\r\n\r\n        // creating a new thread reply\r\n        if (!threadReplyBeforeEditing) {\r\n            const reply = {\r\n                threadID: forumThreadSelected.id,\r\n                subject: threadReplySubject,\r\n                message: threadReplyMessage,\r\n                replyDate: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createThreadReply(reply)\r\n                .then(replyID => {\r\n                    dispatch({\r\n                        type: TOGGLE_THREAD_REPLY,\r\n                        open: false,\r\n                        threadReplyEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            value: {\r\n                                ...reply,\r\n                                id: replyID\r\n                            },\r\n                            activitySummary:\r\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD\r\n                                    .replace(\"%thread%\", forumThreadSelected.name)\r\n                                    .replace(\"%forum%\", forumSelected.name)\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create reply.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing an existing thread reply\r\n        else {\r\n            threadReplyBeforeEditing.author = {\r\n                id: threadReplyBeforeEditing.author.id\r\n            }\r\n\r\n            // this if statement ensures only super admins or the owner of the reply can edit it\r\n            if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeEditing.author.id) {\r\n                return;\r\n            }\r\n\r\n            let threadReplyAfterEditing = JSON.parse(JSON.stringify(threadReplyBeforeEditing));\r\n            threadReplyAfterEditing.subject = threadReplySubject;\r\n            threadReplyAfterEditing.message = threadReplyMessage;\r\n            threadReplyAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editThreadReply(threadReplyAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_THREAD_REPLY,\r\n                        open: false,\r\n                        threadReplyEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\r\n                            interactedObjectID: threadReplyAfterEditing.id,\r\n                            value: {\r\n                                before: threadReplyBeforeEditing,\r\n                                after: threadReplyAfterEditing\r\n                            },\r\n                            activitySummary:\r\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY\r\n                                    .replace(\"%threadName%\", forumThreadSelected.name)\r\n                                    .replace(\"%forumName%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Reply updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update reply.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_FORUMS_TABLE_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (table, newPage) => {\r\n    return {\r\n        type: MANAGE_FORUMS_TABLE_PAGE_CHANGED,\r\n        newPage,\r\n        table\r\n    }\r\n};\r\n\r\nexport const MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = (table, event) => {\r\n    return {\r\n        type: MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10),\r\n        table\r\n    }\r\n};\r\n\r\nexport const FORUMS_QUILL_CHANGED = 'FORUMS_QUILL_CHANGED';\r\nexport const THREAD_CONTENT_QUILL = 'THREAD_CONTENT_QUILL';\r\nexport const THREAD_REPLY_CONTENT_QUILL = 'THREAD_REPLY_CONTENT_QUILL';\r\nexport const handleQuillChanged = (field, editor) => {\r\n    // check if the editor is empty (or does not have any text)\r\n    if (editor.getText().trim().length === 0) {\r\n        return {\r\n            type: FORUMS_QUILL_CHANGED,\r\n            quill: {ops: []},\r\n            field\r\n        }\r\n    } else {\r\n        return {\r\n            type: FORUMS_QUILL_CHANGED,\r\n            quill: editor.getContents(),\r\n            field\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\nlet forumsListener = null;\r\nlet forumThreadsListener = null;\r\nlet forumThreadRepliesListener = null;\r\n\r\nexport const FORUMS_CHANGED = 'FORUMS_CHANGED';\r\nexport const startListeningForForumsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!forumsListener) {\r\n            forumsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUMS_CHILD);\r\n\r\n            // a new forum is added\r\n            forumsListener\r\n                .on('child_added', snapshot => {\r\n                    let forum = snapshot.val();\r\n\r\n                    const currentUser = getState().auth.user;\r\n                    const forumsLoadMode = getState().manageForums.forumsLoadMode;\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\r\n\r\n                    // only add if the forum is not in the local forums array\r\n                    if (existingForumIndex === -1) {\r\n                        // only add live forums\r\n                        if (forumsLoadMode === realtimeDBUtils.LOAD_LIVE_FORUMS) {\r\n                            if (!forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            ) {\r\n                                if (forum.author.id === currentUser.id) {\r\n                                    forum.author = currentUser;\r\n                                    forums.push(forum);\r\n\r\n                                    dispatch({\r\n                                        type: FORUMS_CHANGED,\r\n                                        forumsChanged: [...forums]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(forum.author.id)\r\n                                        .then(user => {\r\n                                            forum.author = user;\r\n                                            forums.push(forum);\r\n\r\n                                            dispatch({\r\n                                                type: FORUMS_CHANGED,\r\n                                                forumsChanged: [...forums]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                        // only add deleted forums\r\n                        else {\r\n                            if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                                if (forum.author.id === currentUser.id) {\r\n                                    forum.author = currentUser;\r\n                                    forums.push(forum);\r\n\r\n                                    dispatch({\r\n                                        type: FORUMS_CHANGED,\r\n                                        forumsChanged: [...forums]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(forum.author.id)\r\n                                        .then(user => {\r\n                                            forum.author = user;\r\n                                            forums.push(forum);\r\n\r\n                                            dispatch({\r\n                                                type: FORUMS_CHANGED,\r\n                                                forumsChanged: [...forums]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a forum has changed\r\n            forumsListener\r\n                .on('child_changed', snapshot => {\r\n                    let forum = snapshot.val();\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\r\n\r\n                    if (existingForumIndex !== -1) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (\r\n                                forum.hasOwnProperty('deleted')\r\n                                && forum.deleted === false\r\n                            )\r\n                        ) {\r\n                            forum.author = forums[existingForumIndex].author;\r\n                            forums[existingForumIndex] = forum;\r\n                        } else {\r\n                            forums.splice(existingForumIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: FORUMS_CHANGED,\r\n                            forumsChanged: [...forums]\r\n                        });\r\n                    } else {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                forums.push(forum);\r\n\r\n                                dispatch({\r\n                                    type: FORUMS_CHANGED,\r\n                                    forumsChanged: [...forums]\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n\r\n            // a forums is removed\r\n            forumsListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === snapshot.key);\r\n                    forums.splice(existingForumIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: FORUMS_CHANGED,\r\n                        forumsChanged: [...forums]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForForumsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumsListener) {\r\n            forumsListener.off('child_added');\r\n            forumsListener.off('child_changed');\r\n            forumsListener.off('child_removed');\r\n            forumsListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const THREADS_CHANGED = 'THREADS_CHANGED';\r\nexport const startListeningForThreadsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n\r\n        if (!forumThreadsListener) {\r\n            forumThreadsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n                .orderByChild('forumID')\r\n                .equalTo(forumSelected.id);\r\n\r\n            // a new thread is added\r\n            forumThreadsListener\r\n                .on('child_added', snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    const currentUser = getState().auth.user;\r\n                    const threadsLoadMode = getState().manageForums.threadsLoadMode;\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\r\n\r\n                    // only add if the thread is not in the local threads array\r\n                    if (existingThreadIndex === -1) {\r\n                        // only add live threads\r\n                        if (threadsLoadMode === realtimeDBUtils.LOAD_LIVE_THREADS) {\r\n                            if (!thread.hasOwnProperty('deleted')\r\n                                || (\r\n                                    thread.hasOwnProperty('deleted')\r\n                                    && thread.deleted === false\r\n                                )\r\n                            ) {\r\n                                if (thread.author.id === currentUser.id) {\r\n                                    thread.author = currentUser;\r\n                                    threads.push(thread);\r\n\r\n                                    dispatch({\r\n                                        type: THREADS_CHANGED,\r\n                                        threadsChanged: [...threads]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(thread.author.id)\r\n                                        .then(user => {\r\n                                            thread.author = user;\r\n                                            threads.push(thread);\r\n\r\n                                            dispatch({\r\n                                                type: THREADS_CHANGED,\r\n                                                threadsChanged: [...threads]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                        // only add deleted threads\r\n                        else {\r\n                            if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                                if (thread.author.id === currentUser.id) {\r\n                                    thread.author = currentUser;\r\n                                    threads.push(thread);\r\n\r\n                                    dispatch({\r\n                                        type: THREADS_CHANGED,\r\n                                        threadsChanged: [...threads]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(thread.author.id)\r\n                                        .then(user => {\r\n                                            thread.author = user;\r\n                                            threads.push(thread);\r\n\r\n                                            dispatch({\r\n                                                type: THREADS_CHANGED,\r\n                                                forumsChanged: [...threads]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a thread has changed\r\n            forumThreadsListener\r\n                .on('child_changed', snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\r\n\r\n                    if (existingThreadIndex !== -1) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (\r\n                                thread.hasOwnProperty('deleted')\r\n                                && thread.deleted === false\r\n                            )\r\n                        ) {\r\n                            thread.author = threads[existingThreadIndex].author;\r\n                            threads[existingThreadIndex] = thread;\r\n                        } else {\r\n                            threads.splice(existingThreadIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: THREADS_CHANGED,\r\n                            threadsChanged: [...threads]\r\n                        });\r\n                    } else {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                threads.push(thread);\r\n\r\n                                dispatch({\r\n                                    type: THREADS_CHANGED,\r\n                                    threadsChanged: [...threads]\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n\r\n            // a thread is removed\r\n            forumThreadsListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === snapshot.key);\r\n                    threads.splice(existingThreadIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: THREADS_CHANGED,\r\n                        threadsChanged: [...threads]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForThreadsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumThreadsListener) {\r\n            forumThreadsListener.off('child_added');\r\n            forumThreadsListener.off('child_changed');\r\n            forumThreadsListener.off('child_removed');\r\n            forumThreadsListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const THREAD_REPLIES_CHANGED = 'THREAD_REPLIES_CHANGED';\r\nexport const startListeningForThreadRepliesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n\r\n        if (!forumThreadRepliesListener) {\r\n            forumThreadRepliesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n                .orderByChild('threadID')\r\n                .equalTo(forumThreadSelected.id);\r\n\r\n            // a new reply is added\r\n            forumThreadRepliesListener\r\n                .on('child_added', snapshot => {\r\n                    let reply = snapshot.val();\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                    // only add if the forums is not in the local forums array\r\n                    if (existingReplyIndex === -1) {\r\n                        if (reply.author.id === user.id) {\r\n                            reply.author = user;\r\n                            replies.push(reply);\r\n\r\n                            dispatch({\r\n                                type: THREAD_REPLIES_CHANGED,\r\n                                repliesChanged: [...replies]\r\n                            });\r\n                        } else {\r\n                            realtimeDBUtils\r\n                                .getUserBasedOnID(reply.author.id)\r\n                                .then(user => {\r\n                                    reply.author = user;\r\n                                    replies.push(reply);\r\n\r\n                                    dispatch({\r\n                                        type: THREAD_REPLIES_CHANGED,\r\n                                        repliesChanged: [...replies]\r\n                                    });\r\n                                })\r\n                                .catch(error => {\r\n                                    // handle error\r\n                                });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a reply has changed\r\n            forumThreadRepliesListener\r\n                .on('child_changed', snapshot => {\r\n                    let reply = snapshot.val();\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                    reply.author = replies[existingReplyIndex].author;\r\n                    replies[existingReplyIndex] = reply;\r\n\r\n                    dispatch({\r\n                        type: THREAD_REPLIES_CHANGED,\r\n                        repliesChanged: [...replies]\r\n                    });\r\n                });\r\n\r\n            // a reply is removed\r\n            forumThreadRepliesListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === snapshot.key);\r\n                    replies.splice(existingReplyIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: THREAD_REPLIES_CHANGED,\r\n                        repliesChanged: [...replies]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForThreadRepliesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumThreadRepliesListener) {\r\n            forumThreadRepliesListener.off('child_added');\r\n            forumThreadRepliesListener.off('child_changed');\r\n            forumThreadRepliesListener.off('child_removed');\r\n            forumThreadRepliesListener = null;\r\n        }\r\n    }\r\n};\r\n\r\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AuthenticationStatus, isAuthenticating, successfullyAuthenticated} from \"../reducers/authenticationReducer\";\r\nimport User, {isInvestor} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport {AppState} from \"../reducers\";\r\nimport InvestorSelfCertification from \"../../models/investor_self_certification\";\r\nimport InvestorSelfCertificationRepository from \"../../api/repositories/InvestorSelfCertificationRepository\";\r\nimport Routes from \"../../router/routes\";\r\nimport Firebase from \"firebase\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\n\r\nexport enum AuthenticationEvents {\r\n    StartAuthenticating = \"AuthenticationEvents.StartAuthenticating\",\r\n    CompleteAuthentication = \"AuthenticationEvents.CompleteAuthentication\",\r\n    SignOut = \"AuthenticationEvents.SignOut\",\r\n    UpdateUserChanges = \"AuthenticationEvents.UpdateUserChanges\"\r\n}\r\n\r\nexport interface AuthenticationAction extends Action {\r\n}\r\n\r\nexport interface UpdateUserChangesAction extends Action {\r\n    updatedUser: User | Admin;\r\n}\r\n\r\nexport interface CompleteAuthenticationAction extends AuthenticationAction {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    selfCertification?: InvestorSelfCertification;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    error?: Error;\r\n}\r\n\r\nexport const signIn: ActionCreator<any> = (email?: string, password?: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = getState();\r\n\r\n        if (isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        const authenticationCompleteAction: CompleteAuthenticationAction = {\r\n            type: AuthenticationEvents.CompleteAuthentication,\r\n            status: AuthenticationStatus.Authenticating,\r\n            currentUser: null,\r\n            groupsOfMembership: []\r\n        }\r\n\r\n        try {\r\n            let currentFirebaseUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n            // user is currently signed in with Firebase\r\n            if (currentFirebaseUser) {\r\n                if (successfullyAuthenticated(AuthenticationState)) {\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n            }\r\n            // user is currently not signed in with Firebase\r\n            else {\r\n                if (email === undefined || password === undefined) {\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    authenticationCompleteAction.error = {\r\n                        detail: \"Email and password not provided.\"\r\n                    }\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n\r\n                // set persistence state to SESSION\r\n                await firebase.auth().setPersistence(Firebase.auth.Auth.Persistence.LOCAL);\r\n\r\n                // sign in with Firebase using email and password\r\n                const credential: firebase.default.auth.UserCredential =\r\n                    await firebase.auth().signInWithEmailAndPassword(email, password);\r\n\r\n                currentFirebaseUser = credential.user;\r\n            }\r\n\r\n            if (currentFirebaseUser) {\r\n                const uid: string | undefined = currentFirebaseUser.uid;\r\n\r\n                // get current user profile\r\n                const retrieveUserResponse = await new UserRepository().retrieveUser(uid);\r\n\r\n                const currentUser: User | Admin = retrieveUserResponse.data;\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n                // Check:\r\n                // 1. Super admin must sign in via the dedicated URL.\r\n                // 2. Only super admin can sign in via the dedicated URL.\r\n                let validSuperAdminSignIn: boolean = true;\r\n\r\n                if (Routes.isSuperAdminSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (!(currentAdmin && currentAdmin.superAdmin)) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"You have no privileges to sign in.\"\r\n                        }\r\n                    }\r\n                } else if (Routes.isSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (currentAdmin && currentAdmin.superAdmin) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"Please sign in via your dedicated page.\"\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!validSuperAdminSignIn) {\r\n                    await dispatch(signOut());\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                authenticationCompleteAction.currentUser = currentUser;\r\n\r\n                if (isInvestor(currentUser)) {\r\n                    const selfCertificationResponse = await new InvestorSelfCertificationRepository().getInvestorSelfCertification(currentUser.id);\r\n                    authenticationCompleteAction.selfCertification = selfCertificationResponse.data;\r\n                }\r\n\r\n                // get groups of membership for the current user\r\n                const listGroupsOfMembershipResponse = await new UserRepository().listGroupsOfMembership(uid);\r\n\r\n                authenticationCompleteAction.groupsOfMembership = listGroupsOfMembershipResponse.data;\r\n\r\n                authenticationCompleteAction.status = AuthenticationStatus.Authenticated;\r\n                return dispatch(authenticationCompleteAction);\r\n            } else {\r\n                await dispatch(signOut());\r\n                authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                authenticationCompleteAction.error = {\r\n                    detail: \"Invalid credential.\"\r\n                }\r\n                return dispatch(authenticationCompleteAction);\r\n            }\r\n        } catch (error) {\r\n            await dispatch(signOut());\r\n            authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n            authenticationCompleteAction.error = {\r\n                detail: error.toString()\r\n            }\r\n            return dispatch(authenticationCompleteAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const signOut: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        try {\r\n            await firebase.auth().signOut();\r\n        } catch (error) {\r\n            console.log(`Error signing out: ${error.toString()}`);\r\n        }\r\n        return dispatch({\r\n            type: AuthenticationEvents.SignOut\r\n        });\r\n    }\r\n}\r\n\r\nexport const updateUserChanges: ActionCreator<any> = (updatedUser: User | Admin) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: UpdateUserChangesAction = {\r\n            type: AuthenticationEvents.UpdateUserChanges,\r\n            updatedUser: JSON.parse(JSON.stringify(updatedUser))\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport default class InvestorSelfCertificationRepository {\r\n\r\n    /**\r\n     * Get investor self certification\r\n     *\r\n     * @param userID\r\n     */\r\n    public async getInvestorSelfCertification(userID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.retrieveInvestorSelfCertificationRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: {\r\n                        userID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n}","import User, {ProfileImage, ProfileVideo} from \"../../models/user\";\r\nimport Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface UpdateUserData {\r\n    updatedUser: User;\r\n    newProfilePicture?: ProfileImage;\r\n    newLogo?: ProfileImage;\r\n    newVideo?: ProfileVideo;\r\n    removeProfilePicture?: true;\r\n}\r\n\r\nexport interface SignUpData {\r\n    isPublicRegistration: boolean;\r\n    invitedUserID?: string;\r\n    userProfile: Partial<User>;\r\n    password: string;\r\n    groupID: string;\r\n    acceptMarketingPreferences: boolean;\r\n}\r\n\r\nexport default class UserRepository {\r\n\r\n    /**\r\n     * Sign up\r\n     *\r\n     * @param data\r\n     */\r\n    public async signUp(data: SignUpData) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.createUser,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Retrieve user\r\n     *\r\n     * @param uid\r\n     */\r\n    public async retrieveUser(uid: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.retrieveUser.replace(\":uid\", uid));\r\n    }\r\n\r\n    /**\r\n     * Retrieve invited user\r\n     *\r\n     * @param invitedUserID\r\n     */\r\n    public async retrieveInvitedUser(invitedUserID: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.retrieveInvitedUser.replace(\":invitedUserID\", invitedUserID));\r\n    }\r\n\r\n    /**\r\n     * Update user\r\n     *\r\n     * @param data\r\n     */\r\n    public async updateUser(data: UpdateUserData) {\r\n        return await new Api()\r\n            .request(\r\n                \"put\",\r\n                ApiRoutes.updateUser,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * List groups of membership\r\n     *\r\n     * @param uid\r\n     */\r\n    public async listGroupsOfMembership(uid: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.listGroupsOfMembership.replace(\":uid\", uid));\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport Error from \"../../models/error\";\r\nimport {AppState} from \"../reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\n\r\nexport enum ManageGroupUrlEvents {\r\n    SetGroupUrl = \"ManageGroupUrlEvents.SetGroupUrl\",\r\n    ValidatingGroupUrl = \"ManageGroupUrlEvents.ValidatingGroupUrl\",\r\n    FinishedValidatingGroupUrl = \"ManageGroupUrlEvents.FinishedValidatingGroupUrl\"\r\n}\r\n\r\nexport interface ManageGroupUrlAction extends Action {\r\n    path?: string;\r\n    groupUserName?: string | null;\r\n    group?: GroupProperties | null;\r\n    validGroupUrl?: boolean;\r\n    error?: Error\r\n}\r\n\r\nexport interface SetGroupUrlAction extends ManageGroupUrlAction {\r\n    path: string;\r\n    groupUserName: string | null;\r\n}\r\n\r\nexport interface ValidatingGroupUrlAction extends ManageGroupUrlAction {\r\n}\r\n\r\nexport interface FinishedValidatingGroupUrlAction extends ManageGroupUrlAction {\r\n    group: GroupProperties | null;\r\n    validGroupUrl: boolean;\r\n    error?: Error\r\n}\r\n\r\nexport const validateGroupUrl: ActionCreator<any> = (path: string, groupUserName: string | null) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            routePath,\r\n            groupNameFromUrl,\r\n            group,\r\n            loadingGroup,\r\n            groupLoaded\r\n        } = getState().ManageGroupUrlState;\r\n\r\n        const setGroupUrlAction: SetGroupUrlAction = {\r\n            type: ManageGroupUrlEvents.SetGroupUrl,\r\n            path,\r\n            groupUserName\r\n        }\r\n\r\n        let shouldValidateGroupUrl = false;\r\n\r\n        // routePath or groupNameFromUrl or both of them have not been defined\r\n        if (routePath === undefined || groupNameFromUrl === undefined) {\r\n            shouldValidateGroupUrl = true;\r\n        }\r\n        // routePath and groupNameFromUrl have been defined\r\n        else {\r\n            if (groupNameFromUrl !== groupUserName) {\r\n                shouldValidateGroupUrl = true;\r\n            }\r\n        }\r\n\r\n        // group has not been loaded\r\n        // or group has been loaded but a new group name is set in the url\r\n        // --> continue validating group url\r\n        if ((!group && !loadingGroup && !groupLoaded)\r\n            || (!(!group && !loadingGroup && !groupLoaded) && shouldValidateGroupUrl)\r\n        ) {\r\n            dispatch(setGroupUrlAction);\r\n\r\n            const validatingGroupUrlAction: ValidatingGroupUrlAction = {\r\n                type: ManageGroupUrlEvents.ValidatingGroupUrl\r\n            }\r\n\r\n            dispatch(validatingGroupUrlAction);\r\n\r\n            const finishedLoadingGroupUrlAction: FinishedValidatingGroupUrlAction = {\r\n                type: ManageGroupUrlEvents.FinishedValidatingGroupUrl,\r\n                group: null,\r\n                validGroupUrl: false\r\n            }\r\n\r\n            // group name is not specified in the url\r\n            if (!groupUserName) {\r\n                finishedLoadingGroupUrlAction.validGroupUrl = true;\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            }\r\n\r\n            try {\r\n                const response = await new GroupRepository().getGroup(groupUserName);\r\n                const retrievedGroup: GroupProperties | null = response.data;\r\n                finishedLoadingGroupUrlAction.group = retrievedGroup;\r\n                finishedLoadingGroupUrlAction.validGroupUrl = retrievedGroup !== null;\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            } catch (error) {\r\n                finishedLoadingGroupUrlAction.error = {\r\n                    detail: error.toString()\r\n                }\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            }\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview/lib/index\";\r\nimport {css} from \"aphrodite\";\r\nimport {Divider, List, ListItem, ListItemIcon, ListItemText} from \"@material-ui/core\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport WorkIcon from \"@material-ui/icons/Work\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport ContactSupportIcon from \"@material-ui/icons/ContactSupport\";\r\nimport ArrowLeft from \"@material-ui/icons/SubdirectoryArrowLeft\";\r\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport ProjectIcon from \"@material-ui/icons/CardGiftcard\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as authActions from \"../../redux-store/actions/authActions\";\r\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\r\nimport * as forumsActions from \"../../redux-store/actions/forumsActions\";\r\n\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {signOut} from \"../../redux-store/actions/authenticationActions\";\r\nimport {School} from \"@material-ui/icons\";\r\n\r\nexport const HOME_TAB = \"Home\";\r\nexport const PROFILE_TAB = \"Profile\";\r\nexport const FORUMS_TAB = \"Forums\";\r\nexport const MY_OFFERS_TAB = \"My offers\";\r\n// export const MY_PLEDGES_TAB = \"My pledges\";\r\nexport const SETTINGS_TAB = \"Settings\";\r\nexport const CHANGE_PASSWORD_TAB = \"Change password\";\r\nexport const CONTACT_US_TAB = \"Contact us\";\r\nexport const GUIDELINE_TAB = \"Help\";\r\nexport const RESOURCES_TAB = \"Resources\";\r\nexport const EXPLORE_GROUPS_TAB = \"Explore groups\";\r\nexport const EXPLORE_OFFERS_TAB = \"Explore offers\";\r\nexport const MY_ACTIVITIES_TAB = \"My activities\";\r\nexport const GROUP_ACTIVITIES_TAB = \"Audit Log\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        signOutNew: async () => dispatch(signOut()),\r\n\r\n        logout: () => dispatch(authActions.logout()),\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        goBackToForumsMain: () => dispatch(forumsActions.goBackToForumsMain())\r\n    };\r\n};\r\n\r\nclass SidebarContent extends Component {\r\n\r\n    onLogoutClick = async () => {\r\n        const {\r\n            dashboardProps,\r\n            logout,\r\n\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            signOutNew\r\n        } = this.props;\r\n\r\n        await signOutNew();\r\n        dashboardProps.history.push(Routes.constructHomeRoute(dashboardProps.match.params, ManageGroupUrlState, AuthenticationState));\r\n\r\n        logout(); // logout old\r\n    };\r\n\r\n    onForumsTabClick = () => {\r\n        this.props.toggleSidebar(false);\r\n        this.props.goBackToForumsMain();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n\r\n            user,\r\n            dashboardProps,\r\n\r\n            toggleSidebar\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                width={240}\r\n                height=\"100%\"\r\n            >\r\n                {/** Sidebar header */}\r\n                <FlexView\r\n                    column\r\n                    height={65}\r\n                    vAlignContent=\"center\"\r\n                    hAlignContent=\"center\"\r\n                    style={{\r\n                        padding: 8\r\n                    }}\r\n                >\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                :\r\n                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                        }\r\n                    >\r\n                        <Image\r\n                            style={{\r\n                                width: \"auto\",\r\n                                height: 65,\r\n                                margin: 0,\r\n                                padding: 10,\r\n                                objectFit: \"scale-down\"\r\n                            }}\r\n                            src={\r\n                                !groupProperties\r\n                                    ?\r\n                                    require('../../img/logo.png').default\r\n                                    :\r\n                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                            }\r\n                        />\r\n                    </NavLink>\r\n                </FlexView>\r\n\r\n                <Divider/>\r\n\r\n                {/** Main navigation */}\r\n                <FlexView\r\n                    column\r\n                    marginTop={10}\r\n                >\r\n                    {/** Home tab */}\r\n                    <List>\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${HOME_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem\r\n                                button\r\n                                onClick={() => toggleSidebar(false)}\r\n                            >\r\n                                <ListItemIcon>\r\n                                    <HomeIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText\r\n                                    className={css(sharedStyles.black_text)}\r\n                                >\r\n                                    {HOME_TAB}\r\n                                </ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n\r\n                        {/** Offers table */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                // user.type === DB_CONST.TYPE_INVESTOR\r\n                                //     ?\r\n                                //     <NavLink\r\n                                //         to={{\r\n                                //             pathname: dashboardProps.match.pathname,\r\n                                //             search: `?tab=${MY_PLEDGES_TAB}`\r\n                                //         }}\r\n                                //         className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                //     >\r\n                                //         <ListItem\r\n                                //             button\r\n                                //             onClick={() => toggleSidebar(false)}\r\n                                //         >\r\n                                //             <ListItemIcon>\r\n                                //                 <HowToVoteIcon/>\r\n                                //             </ListItemIcon>\r\n                                //             <ListItemText\r\n                                //                 className={css(sharedStyles.black_text)}\r\n                                //             >\r\n                                //                 {MY_PLEDGES_TAB}\r\n                                //             </ListItemText>\r\n                                //         </ListItem>\r\n                                //     </NavLink>\r\n                                //     :\r\n                                user.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${MY_OFFERS_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem\r\n                                            button\r\n                                            onClick={() => toggleSidebar(false)}\r\n                                        >\r\n                                            <ListItemIcon>\r\n                                                <ProjectIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText\r\n                                                className={css(sharedStyles.black_text)}\r\n                                            >\r\n                                                {MY_OFFERS_TAB}\r\n                                            </ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                                    :\r\n                                    null\r\n                        }\r\n\r\n                        {/** Explore offers tab */}\r\n                        {\r\n                            user.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${EXPLORE_OFFERS_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() => toggleSidebar(false)}\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <ProjectIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            className={css(sharedStyles.black_text)}\r\n                                        >\r\n                                            {EXPLORE_OFFERS_TAB}\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Explore groups tab */}\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${EXPLORE_GROUPS_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem\r\n                                button\r\n                                onClick={() => toggleSidebar(false)}\r\n                            >\r\n                                <ListItemIcon>\r\n                                    <BubbleChartIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText\r\n                                    className={css(sharedStyles.black_text)}\r\n                                >\r\n                                    {EXPLORE_GROUPS_TAB}\r\n                                </ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n\r\n                        {/** Resources */}\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${RESOURCES_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem\r\n                                button\r\n                                onClick={() => toggleSidebar(false)}\r\n                            >\r\n                                <ListItemIcon>\r\n                                    <School/>\r\n                                </ListItemIcon>\r\n                                <ListItemText\r\n                                    className={css(sharedStyles.black_text)}\r\n                                >\r\n                                    {RESOURCES_TAB}\r\n                                </ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n                    </List>\r\n                </FlexView>\r\n\r\n                {/** Footer navigation */}\r\n                <FlexView\r\n                    column\r\n                    height='100%'\r\n                    vAlignContent=\"bottom\"\r\n                >\r\n                    <List>\r\n                        {/** Profile tab (for normal users) || Settings tab (for admins) */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${PROFILE_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem\r\n                                            button\r\n                                            onClick={() => toggleSidebar(false)}\r\n                                        >\r\n                                            <ListItemIcon>\r\n                                                <WorkIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText\r\n                                                className={css(sharedStyles.black_text)}\r\n                                            >\r\n                                                {PROFILE_TAB}\r\n                                            </ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                                    :\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${SETTINGS_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem\r\n                                            button\r\n                                            onClick={() => toggleSidebar(false)}\r\n                                        >\r\n                                            <ListItemIcon>\r\n                                                <SettingsIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText\r\n                                                className={css(sharedStyles.black_text)}\r\n                                            >\r\n                                                {SETTINGS_TAB}\r\n                                            </ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                        }\r\n\r\n                        {/** My/Group activities tab */}\r\n                        {\r\n                            user.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${(user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin) ? GROUP_ACTIVITIES_TAB : MY_ACTIVITIES_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() => toggleSidebar(false)}\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <HistoryIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            className={css(sharedStyles.black_text)}\r\n                                        >\r\n                                            {\r\n                                                GROUP_ACTIVITIES_TAB\r\n                                            }\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Change password tab */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${CHANGE_PASSWORD_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() => toggleSidebar(false)}\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <VerifiedUserIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            className={css(sharedStyles.black_text)}\r\n                                        >\r\n                                            {CHANGE_PASSWORD_TAB}\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Forums tab */}\r\n                        {/*<NavLink*/}\r\n                        {/*    to={{*/}\r\n                        {/*        pathname: dashboardProps.match.pathname,*/}\r\n                        {/*        search: `?tab=${FORUMS_TAB}`*/}\r\n                        {/*    }}*/}\r\n                        {/*    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}*/}\r\n                        {/*>*/}\r\n                        {/*    <ListItem*/}\r\n                        {/*        button*/}\r\n                        {/*        onClick={this.onForumsTabClick}*/}\r\n                        {/*    >*/}\r\n                        {/*        <ListItemIcon>*/}\r\n                        {/*            <ChatIcon/>*/}\r\n                        {/*        </ListItemIcon>*/}\r\n                        {/*        <ListItemText*/}\r\n                        {/*            className={css(sharedStyles.black_text)}*/}\r\n                        {/*        >*/}\r\n                        {/*            {FORUMS_TAB}*/}\r\n                        {/*        </ListItemText>*/}\r\n                        {/*    </ListItem>*/}\r\n                        {/*</NavLink>*/}\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.CONTACT_US.replace(':groupUserName', groupUserName)\r\n                                            :\r\n                                            ROUTES.CONTACT_US_INVEST_WEST_SUPER\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() => toggleSidebar(false)}\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <ContactSupportIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            className={css(sharedStyles.black_text)}\r\n                                        >\r\n                                            {CONTACT_US_TAB}\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Help tab */}\r\n                        {\r\n                            // don't need to show this tab to super admin\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                            && user.superAdmin\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.HELP.replace(':groupUserName', groupUserName)\r\n                                            :\r\n                                            ROUTES.HELP_INVEST_WEST_SUPER\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() => toggleSidebar(false)}\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <InfoIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            className={css(sharedStyles.black_text)}\r\n                                        >\r\n                                            {GUIDELINE_TAB}\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Logout tab */}\r\n                        <ListItem\r\n                            button\r\n                            onClick={this.onLogoutClick}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <ArrowLeft/>\r\n                            </ListItemIcon>\r\n                            <ListItemText>\r\n                                Logout\r\n                            </ListItemText>\r\n                        </ListItem>\r\n                    </List>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarContent);","import React, { Component } from 'react';\r\nimport {\r\n    Avatar,\r\n    Typography\r\n} from '@material-ui/core';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class LetterAvatar extends Component {\r\n    render() {\r\n        const {\r\n            firstName,\r\n            lastName,\r\n            width,\r\n            height,\r\n            textVariant\r\n        } = this.props;\r\n\r\n        return (\r\n            <Avatar\r\n                style={{\r\n                    color: colors.white,\r\n                    backgroundColor: this.getBackgroundColor(),\r\n                    width: width,\r\n                    height: height\r\n                }}\r\n            >\r\n                <Typography variant={textVariant}>\r\n                    {`${firstName[0].toUpperCase()}${lastName[0].toUpperCase()}`}\r\n                </Typography>\r\n            </Avatar>\r\n        );\r\n    }\r\n\r\n    getBackgroundColor = () => {\r\n        const { firstName } = this.props;\r\n\r\n        switch (firstName[0].toLowerCase()) {\r\n            case \"a\":\r\n                return colors.background_a;\r\n            case \"b\":\r\n                return colors.background_b;\r\n            case \"c\":\r\n                return colors.background_c;\r\n            case \"d\":\r\n                return colors.background_d;\r\n            case \"e\":\r\n                return colors.background_e;\r\n            case \"f\":\r\n                return colors.background_f;\r\n            case \"g\":\r\n                return colors.background_g;\r\n            case \"h\":\r\n                return colors.background_h;\r\n            case \"i\":\r\n                return colors.background_i;\r\n            case \"j\":\r\n                return colors.background_j;\r\n            case \"k\":\r\n                return colors.background_k;\r\n            case \"l\":\r\n                return colors.background_l;\r\n            case \"m\":\r\n                return colors.background_m;\r\n            case \"n\":\r\n                return colors.background_n;\r\n            case \"o\":\r\n                return colors.background_o;\r\n            case \"p\":\r\n                return colors.background_p;\r\n            case \"q\":\r\n                return colors.background_q;\r\n            case \"r\":\r\n                return colors.background_r;\r\n            case \"s\":\r\n                return colors.background_s;\r\n            case \"t\":\r\n                return colors.background_t;\r\n            case \"u\":\r\n                return colors.background_u;\r\n            case \"v\":\r\n                return colors.background_v;\r\n            case \"w\":\r\n                return colors.background_w;\r\n            case \"x\":\r\n                return colors.background_x;\r\n            case \"y\":\r\n                return colors.background_y;\r\n            case \"z\":\r\n                return colors.background_z;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}","export const JSON_COMPARE_CHANGES_DIALOG_SET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_SET_DATA';\r\nexport const setData = (jsonBefore, jsonAfter) => {\r\n    return {\r\n        type: JSON_COMPARE_CHANGES_DIALOG_SET_DATA,\r\n        jsonBefore,\r\n        jsonAfter\r\n    }\r\n};\r\n\r\nexport const JSON_COMPARE_CHANGES_DIALOG_RESET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_RESET_DATA';\r\nexport const resetData = () => {\r\n    return {\r\n        type: JSON_COMPARE_CHANGES_DIALOG_RESET_DATA\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ReactJson from 'react-json-view';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        dialogOpen: state.manageJSONCompareChangesDialog.dialogOpen,\r\n        jsonBefore: state.manageJSONCompareChangesDialog.jsonBefore,\r\n        jsonAfter: state.manageJSONCompareChangesDialog.jsonAfter\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resetData: () => dispatch(manageJSONCompareChangesActions.resetData())\r\n    }\r\n};\r\n\r\nclass JSONCompareChangesDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n\r\n            dialogOpen,\r\n            jsonBefore,\r\n            jsonAfter,\r\n\r\n            resetData,\r\n\r\n            other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={dialogOpen}\r\n                fullWidth\r\n                maxWidth=\"lg\"\r\n                onClose={resetData}\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <FlexView\r\n                        vAlignContent=\"center\"\r\n                    >\r\n                        <FlexView\r\n                            grow={4}\r\n                        >\r\n                            <Typography\r\n                                variant=\"h5\"\r\n                                color=\"primary\"\r\n                                align=\"left\"\r\n                            >\r\n                                Data changes\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView\r\n                            grow={1}\r\n                            hAlignContent=\"right\"\r\n                        >\r\n                            <IconButton\r\n                                onClick={resetData}\r\n                            >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent\r\n                    style={{\r\n                        marginBottom: 25\r\n                    }}\r\n                >\r\n                    <FlexView>\r\n                        <Container\r\n                            fluid\r\n                            style={{\r\n                                padding: 0\r\n                            }}\r\n                        >\r\n                            {\r\n                                JSON.stringify(jsonBefore) === JSON.stringify(jsonAfter)\r\n                                    ?\r\n                                    // no data changes\r\n                                    <Row>\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={{span: 10, offset: 1}}\r\n                                            lg={{span: 8, offset: 2}}\r\n                                        >\r\n                                            <FlexView\r\n                                                column\r\n                                                width=\"100%\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h6\"\r\n                                                    align=\"left\"\r\n                                                    paragraph\r\n                                                >\r\n                                                    <b>No data changes after this activity</b>\r\n                                                </Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonBefore}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    // enable clipboard not working\r\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    :\r\n                                    // there are data changes\r\n                                    <Row>\r\n                                        {/** JSON before */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={6}\r\n                                        >\r\n                                            <FlexView\r\n                                                column\r\n                                                width=\"100%\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h6\"\r\n                                                    align=\"left\"\r\n                                                    paragraph\r\n                                                >\r\n                                                    <b>Before</b>\r\n                                                </Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonBefore}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    // enable clipboard not working\r\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n\r\n                                        {/** JSON after */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={6}\r\n                                        >\r\n                                            <FlexView\r\n                                                column\r\n                                                width=\"100%\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h6\"\r\n                                                    align=\"left\"\r\n                                                    paragraph\r\n                                                >\r\n                                                    <b>After</b>\r\n                                                </Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonAfter}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </Container>\r\n                    </FlexView>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JSONCompareChangesDialog);","import * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const ACTIVITIES_TABLE_SET_TABLE_USER = 'ACTIVITIES_TABLE_SET_TABLE_USER';\r\nexport const setTableUser = newUser => {\r\n    return (dispatch, getState) => {\r\n        const prevTableUser = getState().manageActivitiesTable.tableUser;\r\n\r\n        // if user is set to null --> meaning that we're resetting the table\r\n        // if the previous table user is null --> still set the new user\r\n        if (!newUser || !prevTableUser) {\r\n            dispatch({\r\n                type: ACTIVITIES_TABLE_SET_TABLE_USER,\r\n                user: newUser\r\n            });\r\n            return;\r\n        }\r\n\r\n        // previous table user is an actual user of normal users or admins\r\n        if (prevTableUser.hasOwnProperty('id')) {\r\n            // new table user is also an actual user of normal users or admins\r\n            if (newUser.hasOwnProperty('id')) {\r\n                if (prevTableUser.id === newUser.id) {\r\n                    return;\r\n                } else {\r\n                    // set new table user\r\n                }\r\n            }\r\n            // new table user is a groupProperties object\r\n            else {\r\n                // set new table user\r\n            }\r\n        }\r\n        // previous table user is a groupProperties object\r\n        else {\r\n            // new table user is an actual user of normal users or admins\r\n            if (newUser.hasOwnProperty('id')) {\r\n                // set new table user\r\n            }\r\n            // new table user is also a groupProperties object\r\n            else {\r\n                if (prevTableUser.anid === newUser.anid) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: ACTIVITIES_TABLE_SET_TABLE_USER,\r\n            user: newUser\r\n        });\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_LOADING_ACTIVITIES';\r\nexport const ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES';\r\nexport const loadActivities = () => {\r\n    return (dispatch, getState) => {\r\n        const tableUser = getState().manageActivitiesTable.tableUser;\r\n        const currentUser = getState().auth.user;\r\n\r\n        if (!tableUser || !currentUser) {\r\n            dispatch({\r\n                type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                activities: []\r\n            });\r\n            return;\r\n        }\r\n\r\n        // current user is not an admin\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            // and the current user is not the user referenced in the table\r\n            if (tableUser.hasOwnProperty('id') && currentUser.id === tableUser.id) {\r\n                // do nothing as the current user is actually the table user\r\n            } else {\r\n                dispatch({\r\n                    type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                    activities: []\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: ACTIVITIES_TABLE_LOADING_ACTIVITIES\r\n        });\r\n\r\n        // table user is an actual user\r\n        if (tableUser.hasOwnProperty('id')) {\r\n            realtimeDBUtils\r\n                .fetchActivitiesBy({\r\n                    userID: tableUser.id,\r\n                    fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\r\n                })\r\n                .then(activities => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: [...activities]\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: []\r\n                    });\r\n                });\r\n        }\r\n        // table user is a groupProperties object\r\n        else {\r\n            realtimeDBUtils\r\n                .loadGroupAdminsBasedOnGroupID(tableUser.anid)\r\n                .then(groupAdmins => {\r\n\r\n                    let allActivities = [];\r\n\r\n                    Promise.all(\r\n                        groupAdmins.map(groupAdmin => {\r\n                            return new Promise((resolve, reject) => {\r\n                                realtimeDBUtils\r\n                                    .fetchActivitiesBy({\r\n                                        userID: groupAdmin.id,\r\n                                        shouldLoadUserProfile: true,\r\n                                        fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\r\n                                    })\r\n                                    .then(activities => {\r\n                                        allActivities = [...allActivities, ...activities];\r\n                                        return resolve(allActivities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        dispatch({\r\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                            activities: [...allActivities]\r\n                        });\r\n                    }).catch(error => {\r\n                        dispatch({\r\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                            activities: []\r\n                        });\r\n                    });\r\n\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: []\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_PAGE_CHANGED = 'ACTIVITIES_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: ACTIVITIES_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED = 'ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet activitiesListener = null;\r\n\r\nexport const ACTIVITIES_IN_TABLE_CHANGED = 'ACTIVITIES_IN_TABLE_CHANGED';\r\nexport const startListeningForActivitiesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const tableUser = getState().manageActivitiesTable.tableUser;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN && currentUser.id !== tableUser.id) {\r\n            return;\r\n        }\r\n\r\n        if (activitiesListener) {\r\n            return;\r\n        }\r\n\r\n        // table user is an actual user\r\n        if (tableUser.hasOwnProperty('id')) {\r\n            activitiesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n                .orderByChild('userID')\r\n                .equalTo(tableUser.id);\r\n        }\r\n        // table user is a groupProperties object\r\n        else {\r\n            activitiesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n        }\r\n\r\n        activitiesListener\r\n            .on('child_added', snapshot => {\r\n                const activity = snapshot.val();\r\n                let activities = [...getState().manageActivitiesTable.activities];\r\n\r\n                const activityIndex = activities.findIndex(existingActivity => existingActivity.id === activity.id);\r\n                if (activityIndex === -1) {\r\n                    // table user is an actual user\r\n                    if (tableUser.hasOwnProperty('id')) {\r\n                        dispatch({\r\n                            type: ACTIVITIES_IN_TABLE_CHANGED,\r\n                            activities: [...activities, activity]\r\n                        });\r\n                    }\r\n                    // table user is a groupProperties object\r\n                    else {\r\n                        realtimeDBUtils\r\n                            .loadGroupAdminsBasedOnGroupID(tableUser.anid)\r\n                            .then(groupAdmins => {\r\n                                const adminIndex = groupAdmins.findIndex(groupAdmin => groupAdmin.id === activity.userID);\r\n                                if (adminIndex !== -1) {\r\n                                    activity.userProfile = groupAdmins[adminIndex];\r\n                                    dispatch({\r\n                                        type: ACTIVITIES_IN_TABLE_CHANGED,\r\n                                        activities: [...activities, activity]\r\n                                    });\r\n                                }\r\n                            });\r\n                    }\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForActivitiesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (activitiesListener) {\r\n            activitiesListener.off('child_added');\r\n            activitiesListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Table,\r\n    TableHead,\r\n    TableCell,\r\n    TableRow,\r\n    TableBody,\r\n    Typography,\r\n    Paper,\r\n    TablePagination,\r\n    TableFooter,\r\n    Button\r\n} from '@material-ui/core';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport FlexView from 'react-flexview';\r\nimport {HashLoader} from 'react-spinners';\r\nimport {css} from 'aphrodite';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport JSONCompareChangesDialog from './JSONCompareChangesDialog';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        tableUser: state.manageActivitiesTable.tableUser,\r\n        activities: state.manageActivitiesTable.activities,\r\n        activitiesLoaded: state.manageActivitiesTable.activitiesLoaded,\r\n        loadingActivities: state.manageActivitiesTable.loadingActivities,\r\n        page: state.manageActivitiesTable.page,\r\n        rowsPerPage: state.manageActivitiesTable.rowsPerPage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadActivities: () => dispatch(activitiesTableActions.loadActivities()),\r\n        changePage: (event, newPage) => dispatch(activitiesTableActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(activitiesTableActions.changeRowsPerPage(event)),\r\n        startListeningForActivitiesChanged: () => dispatch(activitiesTableActions.startListeningForActivitiesChanged()),\r\n        stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        jsonCompareDialog_setData: (jsonBefore, jsonAfter) => dispatch(manageJSONCompareChangesActions.setData(jsonBefore, jsonAfter))\r\n    }\r\n};\r\n\r\nclass ActivitiesTable extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            tableUser,\r\n\r\n            stopListeningForActivitiesChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if tableUser is set to null\r\n        if (!tableUser || !shouldLoadOtherData) {\r\n            stopListeningForActivitiesChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            tableUser,\r\n            loadingActivities,\r\n            activitiesLoaded,\r\n\r\n            loadActivities\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (tableUser && !loadingActivities && !activitiesLoaded) {\r\n                loadActivities();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            activities,\r\n            activitiesLoaded,\r\n\r\n            startListeningForActivitiesChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (activities && activitiesLoaded) {\r\n                startListeningForActivitiesChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            tableUser,\r\n\r\n            activities,\r\n            page,\r\n            rowsPerPage,\r\n\r\n            changePage,\r\n            changeRowsPerPage\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !tableUser || !currentUser) {\r\n            return null;\r\n        }\r\n\r\n        activities.sort((activity1, activity2) => {\r\n            return activity2.time - activity1.time;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Paper\r\n                    elevation={1}\r\n                    style={{\r\n                        overflowX: \"auto\"\r\n                    }}\r\n                >\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={2}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            align=\"left\"\r\n                                            className={css(sharedStyles.white_text)}\r\n                                        >\r\n                                            Event\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            align=\"left\"\r\n                                            className={css(sharedStyles.white_text)}\r\n                                        >\r\n                                            Time\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderTableRows()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[10, 30, 50]}\r\n                                    count={activities.length}\r\n                                    rowsPerPage={rowsPerPage}\r\n                                    page={page}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={changePage}\r\n                                    onChangeRowsPerPage={changeRowsPerPage}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n\r\n                <JSONCompareChangesDialog/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderTableRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            activities,\r\n            activitiesLoaded,\r\n            page,\r\n            rowsPerPage,\r\n\r\n            jsonCompareDialog_setData\r\n        } = this.props;\r\n\r\n        if (activities.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell\r\n                        colSpan={3}\r\n                    >\r\n                        <FlexView\r\n                            hAlignContent=\"center\"\r\n                            vAlignContent=\"center\"\r\n                            style={{\r\n                                margin: 20\r\n                            }}\r\n                        >\r\n                            {\r\n                                activitiesLoaded\r\n                                    ?\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"center\"\r\n                                    >\r\n                                        No activities.\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            activities.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(activity => (\r\n                    <TableRow\r\n                        key={activity.id}\r\n                    >\r\n                        <TableCell\r\n                            colSpan={2}\r\n                        >\r\n                            {\r\n                                activity.hasOwnProperty('action')\r\n                                    ?\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <NavLink\r\n                                                to={\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${activity.action}`\r\n                                                        :\r\n                                                        activity.action\r\n                                                }\r\n                                                className={css(sharedStyles.nav_link_hover)}\r\n                                                style={{\r\n                                                    color:\r\n                                                        !groupProperties\r\n                                                            ?\r\n                                                            colors.primaryColor\r\n                                                            :\r\n                                                            groupProperties.settings.primaryColor\r\n                                                }}\r\n                                            >\r\n                                                <LinkIcon\r\n                                                    fontSize=\"small\"\r\n                                                    style={{\r\n                                                        marginRight: 6\r\n                                                    }}\r\n                                                />\r\n                                                {activity.activitySummary}\r\n                                            </NavLink>\r\n                                        </Typography>\r\n                                        {\r\n                                            !activity.hasOwnProperty('userProfile')\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography\r\n                                                    variant=\"body2\"\r\n                                                    align=\"left\"\r\n                                                    style={{\r\n                                                        marginTop: 7\r\n                                                    }}\r\n                                                >\r\n                                                    <i>_ done by <b>{activity.userProfile.email}</b> _</i>\r\n                                                </Typography>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                !currentUser.superAdmin\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !activity.hasOwnProperty('value')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView\r\n                                                            marginTop={10}\r\n                                                        >\r\n                                                            <Button\r\n                                                                variant=\"outlined\"\r\n                                                                color=\"primary\"\r\n                                                                size=\"small\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={\r\n                                                                    () => jsonCompareDialog_setData(\r\n                                                                        activity.value.hasOwnProperty('before')\r\n                                                                            ?\r\n                                                                            activity.value.before\r\n                                                                            :\r\n                                                                            activity.value\r\n                                                                        ,\r\n                                                                        activity.value.hasOwnProperty('after')\r\n                                                                            ?\r\n                                                                            activity.value.after\r\n                                                                            :\r\n                                                                            activity.value\r\n                                                                    )\r\n                                                                }\r\n                                                            >\r\n                                                                View changes\r\n                                                            </Button>\r\n                                                        </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                    :\r\n                                    <Typography\r\n                                        variant=\"body2\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {activity.activitySummary}\r\n                                    </Typography>\r\n                            }\r\n                        </TableCell>\r\n                        <TableCell\r\n                            colSpan={1}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                align=\"left\"\r\n                            >\r\n                                {utils.dateTimeInReadableFormat(activity.time)}\r\n                            </Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )\r\n            )\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivitiesTable);","import * as myUtils from '../../utils/utils';\r\nimport * as editImageActions from './editImageActions';\r\nimport * as editVideoActions from './editVideoActions';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport {\r\n    UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\r\n    UPLOAD_DONE_MODE,\r\n    UPLOAD_ERROR\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport {UPLOADING} from './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\n\r\nexport const ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED = 'ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED';\r\nexport const REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED = 'REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED';\r\nexport const TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED = 'TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED';\r\n// fields that are used to derive required information for business profile such as postcode search\r\nexport const BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED = 'BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED';\r\nexport const handleTextChanged = (fieldType, event) => {\r\n    return {\r\n        type: fieldType,\r\n        fieldName: event.target.name,\r\n        fieldValue: event.target.value\r\n    }\r\n};\r\n\r\nexport const SEARCHING_REGISTERED_OFFICE_ADDRESSES = 'SEARCHING_REGISTERED_OFFICE_ADDRESSES';\r\nexport const DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES = 'DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES';\r\nexport const SEARCHING_TRADING_ADDRESSES = 'SEARCHING_TRADING_ADDRESSES';\r\nexport const DONE_SEARCHING_TRADING_ADDRESSES = 'DONE_SEARCHING_TRADING_ADDRESSES';\r\nexport const searchAddresses = mode => {\r\n    return (dispatch, getState) => {\r\n        if (mode === SEARCHING_REGISTERED_OFFICE_ADDRESSES) {\r\n            const postcode = getState().createBusinessProfile.registeredOfficeSearchPostcode;\r\n            if (postcode.trim().length === 0) {\r\n                return;\r\n            }\r\n            myUtils\r\n                .findAddress(postcode)\r\n                .then(results => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES,\r\n                        results\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES,\r\n                        results: null\r\n                    });\r\n                });\r\n\r\n        } else if (mode === SEARCHING_TRADING_ADDRESSES) {\r\n            const postcode = getState().createBusinessProfile.tradingAddressSearchPostcode;\r\n            if (postcode.trim().length === 0) {\r\n                return;\r\n            }\r\n            myUtils.findAddress(postcode)\r\n                .then(results => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_TRADING_ADDRESSES,\r\n                        results\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_TRADING_ADDRESSES,\r\n                        results: null\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS = 'SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS';\r\nexport const SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS = 'SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS';\r\nexport const handleRecommendedAddressSelected = (field, index) => {\r\n    return (dispatch, getState) => {\r\n        if (field === SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS) {\r\n            const selectedAddress = getState().createBusinessProfile.registeredOfficeRecommendedAddresses.apiAddresses[index];\r\n            dispatch({\r\n                type: SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS,\r\n                selectedAddress\r\n            });\r\n        } else if (field === SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS) {\r\n            const selectedAddress = getState().createBusinessProfile.tradingAddressRecommendedAddresses.apiAddresses[index];\r\n            dispatch({\r\n                type: SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS,\r\n                selectedAddress\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY = 'TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY';\r\nexport const TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY = 'TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY';\r\nexport const toggleEnterAddressManually = field => {\r\n    if (field === TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY) {\r\n        return {\r\n            type: TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY\r\n        }\r\n    } else if (field === TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY) {\r\n        return {\r\n            type: TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY\r\n        }\r\n    }\r\n};\r\n\r\nexport const TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE = 'TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE';\r\nexport const toggleTradingAddressSameAsRegisteredOffice = checked => {\r\n    return {\r\n        type: TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE,\r\n        checked\r\n    }\r\n};\r\n\r\nexport const CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION = 'CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION';\r\nexport const clearAllFields = () => {\r\n    return {\r\n        type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n    }\r\n};\r\n\r\nexport const TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR = 'TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR';\r\nexport const toggleExpandBusinessProfileFillingForInvestor = () => {\r\n    return {\r\n        type: TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR\r\n    }\r\n};\r\n\r\nexport const uploadBusinessProfile = () => {\r\n    return (dispatch, getState) => {\r\n        const user = Object.assign({}, getState().auth.user);\r\n        const logoToBeUploaded = getState().createBusinessProfile.logoToBeUploaded;\r\n        const videoToBeUploaded = getState().createBusinessProfile.videoToBeUploaded;\r\n        let businessProfile = Object.assign({}, getState().createBusinessProfile.BusinessProfile);\r\n\r\n        // trading address is the same as registered office\r\n        if (getState().createBusinessProfile.tradingAddressSameAsRegisteredOffice) {\r\n            // set trading address to registered office\r\n            businessProfile.tradingAddress = businessProfile.registeredOffice;\r\n        }\r\n\r\n        editImageActions\r\n            .uploadImage(dispatch, user, getState().editImage, logoToBeUploaded)\r\n            .then(() => {\r\n                if (videoToBeUploaded) {\r\n                    editVideoActions\r\n                        .uploadVideo(dispatch, user, getState().editVideo, videoToBeUploaded)\r\n                        .then(() => {\r\n                            putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                            dispatch({\r\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                message: \"Error happened. We couldn't upload your video.\",\r\n                                color: \"error\",\r\n                                position: \"bottom\"\r\n                            });\r\n                        });\r\n                } else {\r\n                    putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your logo.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nconst putBusinessProfileToFirebaseDB = (dispatch, user, businessProfile) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        dispatch({\r\n            type: UPLOADING,\r\n            mode: UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\r\n            progress: 0\r\n        });\r\n\r\n        businessProfile.registeredOffice.postcode = businessProfile.registeredOffice.postcode.toUpperCase();\r\n        businessProfile.tradingAddress.postcode = businessProfile.tradingAddress.postcode.toUpperCase();\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(user.id)\r\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n            .update(businessProfile)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_DONE_MODE,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Your business profile has successfully been uploaded.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                        interactedObjectID: user.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE,\r\n                        value: {\r\n                            ...user,\r\n                            BusinessProfile: {\r\n                                ...businessProfile\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_ERROR,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your business profile.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                return reject(error);\r\n            });\r\n    });\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nexport const SET_ORIGINAL_USER_AND_EDITED_USER = 'SET_ORIGINAL_USER_AND_EDITED_USER';\r\nexport const setOriginalUserAndEditedUser = user => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const previouslySetUser = getState().editUser.originalUser;\r\n\r\n        let allowEditing = true;\r\n\r\n        // user is set to null\r\n        if (!user) {\r\n            dispatch({\r\n                type: SET_ORIGINAL_USER_AND_EDITED_USER,\r\n                user,\r\n                allowEditing\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (previouslySetUser && previouslySetUser.id === user.id) {\r\n            return;\r\n        }\r\n\r\n        if (user.hasOwnProperty('groupsUserIsIn')\r\n            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n            && !currentUser.superAdmin\r\n        ) {\r\n            let userHomeGroup = utils.getUserHomeGroup(user.groupsUserIsIn);\r\n            // userHomeGroup is null --> failed to find user's home group\r\n            // do not let any group admins to edit this user's profile\r\n            if (!userHomeGroup) {\r\n                allowEditing = false;\r\n            }\r\n            // userHomeGroup is not null\r\n            else {\r\n                // this current group admin does not belong to the userHomeGroup\r\n                if (currentUser.anid !== userHomeGroup.anid) {\r\n                    allowEditing = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: SET_ORIGINAL_USER_AND_EDITED_USER,\r\n            user,\r\n            allowEditing\r\n        });\r\n    }\r\n};\r\n\r\nexport const EDIT_PERSONAL_INFORMATION = 'EDIT_PERSONAL_INFORMATION';\r\nexport const EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION = 'EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION';\r\nexport const EDIT_TRADING_ADDRESS_BUSINESS_PROFILE = 'EDIT_TRADING_ADDRESS_BUSINESS_PROFILE';\r\nexport const EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE = 'EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE';\r\nexport const ADDING_NEW_DIRECTOR = 'ADDING_NEW_DIRECTOR';\r\nexport const editUserLocally = (type, edit) => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type,\r\n            edit: {\r\n                property: edit.property,\r\n                value: edit.value\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_ADD_NEW_DIRECTOR = 'TOGGLE_ADD_NEW_DIRECTOR';\r\nexport const toggleAddNewDirector = () => {\r\n    return {\r\n        type: TOGGLE_ADD_NEW_DIRECTOR\r\n    }\r\n};\r\n\r\nexport const ADD_NEW_DIRECTOR_TEMPORARILY = 'ADD_NEW_DIRECTOR_TEMPORARILY';\r\nexport const addNewDirectorTemporarily = isEditingExistingBusinessProfile => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: ADD_NEW_DIRECTOR_TEMPORARILY,\r\n            isEditingExistingBusinessProfile,\r\n            director: getState().editUser.newDirectorText\r\n        });\r\n    }\r\n};\r\n\r\nexport const DELETE_DIRECTOR_TEMPORARILY = 'DELETE_DIRECTOR_TEMPORARILY';\r\nexport const deleteDirectorTemporarily = (index, isEditingExistingBusinessProfile) => {\r\n    return {\r\n        type: DELETE_DIRECTOR_TEMPORARILY,\r\n        index,\r\n        isEditingExistingBusinessProfile\r\n    }\r\n};\r\n\r\nexport const RESET_PERSONAL_INFORMATION = 'RESET_PERSONAL_INFORMATION';\r\nexport const RESET_BUSINESS_PROFILE = 'RESET_BUSINESS_PROFILE';\r\nexport const cancelEditingUser = type => {\r\n    return {\r\n        type\r\n    }\r\n};\r\n\r\nexport const COMMIT_PERSONAL_INFORMATION_CHANGES = 'COMMIT_PERSONAL_INFORMATION_CHANGES';\r\nexport const COMMIT_BUSINESS_PROFILE_CHANGES = 'COMMIT_BUSINESS_PROFILE_CHANGES';\r\nexport const commitUserProfileChanges = type => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const originalUser = JSON.parse(JSON.stringify(getState().editUser.originalUser));\r\n        const userEdited = JSON.parse(JSON.stringify(getState().editUser.userEdited));\r\n\r\n        const userRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(userEdited.id);\r\n\r\n        if (type === COMMIT_PERSONAL_INFORMATION_CHANGES) {\r\n            userRef\r\n                .update({\r\n                    title: userEdited.title,\r\n                    firstName: userEdited.firstName,\r\n                    lastName: userEdited.lastName,\r\n                    email: userEdited.email,\r\n                    linkedin:\r\n                        userEdited.linkedin && userEdited.linkedin.trim().length > 0\r\n                            ?\r\n                            userEdited.linkedin\r\n                            :\r\n                            null\r\n                })\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"User's personal details have been updated.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Your personal details have been updated.\"\r\n                        ,\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                            interactedObjectID: userEdited.id,\r\n                            activitySummary:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS\r\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\r\n                            ,\r\n                            action:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    null\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                            ,\r\n                            value: {\r\n                                before: originalUser,\r\n                                after: userEdited\r\n                            }\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"Error happened. Couldn't update this user's personal details.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Error happened. We couldn't update your personal details.\"\r\n                        ,\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        } else if (type === COMMIT_BUSINESS_PROFILE_CHANGES) {\r\n\r\n            let businessProfile = JSON.parse(JSON.stringify(userEdited.BusinessProfile));\r\n            businessProfile.registeredOffice.postcode = businessProfile.registeredOffice.postcode.toUpperCase();\r\n            businessProfile.tradingAddress.postcode = businessProfile.tradingAddress.postcode.toUpperCase();\r\n\r\n            userRef\r\n                .update({\r\n                    BusinessProfile: businessProfile\r\n                })\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"User's business profile has been updated.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Your business profile has been updated.\"\r\n                        ,\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                            interactedObjectID: userEdited.id,\r\n                            activitySummary:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE\r\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\r\n                            ,\r\n                            action:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    null\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                            ,\r\n                            value: {\r\n                                before: originalUser,\r\n                                after: userEdited\r\n                            }\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"Error happened. Couldn't update this user's business profile.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Error happened. We couldn't update your business profile.\"\r\n                        ,\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    };\r\n};\r\n\r\nlet originalUserListener = null;\r\n\r\nexport const EDIT_USER_ORIGINAL_USER_CHANGED = 'EDIT_USER_ORIGINAL_USER_CHANGED';\r\nexport const startOriginalUserChangedListener = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const originalUser = getState().editUser.originalUser;\r\n\r\n        if (!currentUser || !originalUser) {\r\n            return;\r\n        }\r\n\r\n        // if the current user is the same as the user being edited\r\n        // then we don't need this listener since the current user changes\r\n        // are taken care by the auth actions.\r\n        if (currentUser.id === originalUser.id) {\r\n            return;\r\n        }\r\n\r\n        if (!originalUserListener) {\r\n            originalUserListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(originalUser.id);\r\n\r\n            originalUserListener\r\n                .on('value', snapshot => {\r\n                    let userChanged = snapshot.val();\r\n\r\n                    if (userChanged) {\r\n                        userChanged.groupsUserIsIn = originalUser.groupsUserIsIn;\r\n\r\n                        dispatch({\r\n                            type: EDIT_USER_ORIGINAL_USER_CHANGED,\r\n                            userChanged\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopOriginalUserChangedListener = () => {\r\n    return (dispatch, getState) => {\r\n        if (originalUserListener) {\r\n            originalUserListener.off('value');\r\n            originalUserListener = null;\r\n        }\r\n    }\r\n}","import firebase from '../../firebase/firebaseApp';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {UPLOADING} from './uploadingStatusActions';\r\nimport {\r\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\r\n    UPLOAD_PITCH_COVER_MODE,\r\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\r\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE,\r\n    UPLOAD_ERROR,\r\n    UPLOAD_DONE_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nexport const FILE_UPLOAD_CHANGED = 'FILE_UPLOAD_CHANGED';\r\nexport const handleFilesChanged = (mode, files, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const fileUploadErrorMessage = getState().uploadFiles.fileUploadErrorMessage;\r\n        const fileUploadErrorSnackbarOpen = getState().uploadFiles.fileUploadErrorSnackbarOpen;\r\n\r\n        if (fileUploadErrorMessage.trim().length > 0 || fileUploadErrorSnackbarOpen) {\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n\r\n                    const legalDocuments = getState().uploadFiles.filesToBeUploaded.legalDocuments;\r\n\r\n                    // user is an issuer\r\n                    if (user.type === DB_CONST.TYPE_ISSUER) {\r\n                        if (user.LegalDocuments) {\r\n                            if (legalDocuments.length >=\r\n                                DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER - user.LegalDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                dispatch({\r\n                                    type: FILE_UPLOAD_ERROR,\r\n                                    error: 'Max file count reached'\r\n                                });\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            if (legalDocuments.length >= DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER) {\r\n                                dispatch({\r\n                                    type: FILE_UPLOAD_ERROR,\r\n                                    error: 'Max file count reached'\r\n                                });\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    // user is an investor\r\n                    else if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        if (legalDocuments.length >= 1) {\r\n                            dispatch({\r\n                                type: FILE_UPLOAD_ERROR,\r\n                                error: 'Max file count reached'\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                    break;\r\n                case UPLOAD_PITCH_COVER_MODE:\r\n                    return;\r\n                case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                    return;\r\n                case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                    return;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            dispatch({\r\n                type: FILE_UPLOAD_CHANGED,\r\n                mode,\r\n                fileRead\r\n            });\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    }\r\n};\r\n\r\nexport const FILE_UPLOAD_ERROR = 'FILE_UPLOAD_ERROR';\r\nexport const handleFileError = (error, file) => {\r\n    return (dispatch, getState) => {\r\n        // handle file upload error\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        dispatch({\r\n            type: FILE_UPLOAD_ERROR,\r\n            error: errorMessage\r\n        });\r\n    }\r\n};\r\n\r\nexport const CLOSE_FILE_UPLOAD_ERROR_SNACKBAR = 'CLOSE_FILE_UPLOAD_ERROR_SNACKBAR';\r\nexport const closeErrorSnackbar = () => {\r\n    return {\r\n        type: CLOSE_FILE_UPLOAD_ERROR_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED = 'RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED';\r\nexport const resetErrorMessageWhenSnackbarExited = () => {\r\n    return {\r\n        type: RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED\r\n    }\r\n};\r\n\r\nexport const DELETE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_UPLOADED_LEGAL_DOCUMENT';\r\nexport const DELETE_UPLOADED_PITCH_COVER = 'DELETE_UPLOADED_PITCH_COVER';\r\nexport const DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETED_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\r\nexport const DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\r\nexport const deleteUploadedFile = (mode, index, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n        switch (mode) {\r\n            case DELETE_UPLOADED_LEGAL_DOCUMENT:\r\n                const legalDocumentsUserID = getState().legalDocuments.userID;\r\n                let updateLegalDocuments = [...getState().legalDocuments.legalDocuments];\r\n                updateLegalDocuments[index].removed = true;\r\n                firebase\r\n                    .database()\r\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                    .child(legalDocumentsUserID)\r\n                    .update(updateLegalDocuments);\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_COVER:\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n};\r\n\r\nexport const DELETE_TO_BE_UPLOADED_FILE = 'DELETE_TO_BE_UPLOADED_FILE';\r\nexport const DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_COVER = 'DELETE_TO_BE_UPLOADED_PITCH_COVER';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\r\nexport const deleteToBeUploadedFile = (mode, index) => {\r\n    return (dispatch, getState) => {\r\n\r\n        let updatedFilesToBeUploaded = null;\r\n\r\n        switch (mode) {\r\n            case DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.legalDocuments));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_COVER:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchCover));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments));\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        updatedFilesToBeUploaded.splice(index, 1);\r\n\r\n        dispatch({\r\n            type: DELETE_TO_BE_UPLOADED_FILE,\r\n            mode,\r\n            updatedFilesToBeUploaded\r\n        });\r\n    };\r\n};\r\n\r\nexport const FINISHED_UPLOADING_A_LEGAL_DOCUMENT = 'FINISHED_UPLOADING_A_LEGAL_DOCUMENT';\r\nexport const FINISHED_UPLOADING_A_PITCH_COVER = 'FINISHED_UPLOADING_A_PITCH_COVER';\r\nexport const FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT';\r\nexport const FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT';\r\nexport const FINISHED_UPLOADING_ALL_FILES = 'FINISHED_UPLOADING_ALL_FILES';\r\nexport const uploadFiles = (mode, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n\r\n        let files = [];\r\n\r\n        switch (mode) {\r\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.legalDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        dispatch({\r\n            type: UPLOADING,\r\n            mode,\r\n            progress: 0\r\n        });\r\n\r\n        Promise.all(\r\n            files.map(file => uploadIndividualFile(dispatch, mode, file, files.length, user, project))\r\n        ).then(() => {\r\n            // call this to clear temporarily files\r\n            dispatch({\r\n                type: FINISHED_UPLOADING_ALL_FILES,\r\n                mode,\r\n                waitingForUploadingReferences: true\r\n            });\r\n            putFilesReferencesToDatabase(dispatch, getState, mode, user, project)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: FINISHED_UPLOADING_ALL_FILES,\r\n                        mode,\r\n                        waitingForUploadingReferences: false\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                });\r\n        }).catch(error => {\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100,\r\n                error: error\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Upload a file to Firebase storage\r\n *\r\n * @param dispatch\r\n * @param mode\r\n * @param file: a single file to be uploaded\r\n * @param totalFiles: length of the files array --> calculate percent done\r\n * @param user: set when uploading legal documents\r\n * @param project: set when uploading pitch cover, pitch deck, or pitch supporting documents\r\n */\r\nconst uploadIndividualFile = async (dispatch, mode, file, totalFiles, user = null, project = null) => {\r\n\r\n    let fileRef = firebase.storage();\r\n\r\n    const storageID = utils.getCurrentDate();\r\n    const storageFileName = utils.constructStorageFileName(file, storageID);\r\n\r\n    switch (mode) {\r\n        case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        case UPLOAD_PITCH_COVER_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                .child(`${storageID}.${document.file.extension}`);\r\n            break;\r\n        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        default:\r\n            return;\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const uploadTask = fileRef.put(file.file);\r\n        uploadTask\r\n            .on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    dispatch({\r\n                        type: UPLOADING,\r\n                        mode,\r\n                        progress: progress.toFixed(0)\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask\r\n                    .snapshot\r\n                    .ref\r\n                    .getDownloadURL()\r\n                    .then(fileDownloadURL => {\r\n\r\n                        let percentDone = 0;\r\n\r\n                        switch (mode) {\r\n                            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                                percentDone = 100 / totalFiles;\r\n                                const legalDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: percentDone\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_LEGAL_DOCUMENT,\r\n                                    fileDBRef: legalDocument\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_COVER_MODE:\r\n                                const formattedCover = {\r\n                                    url: fileDownloadURL,\r\n                                    fileType: file.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                    fileExtension: document.file.extension,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: 100\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_COVER,\r\n                                    fileDBRef: formattedCover\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                                const formattedPresentationDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: 100\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT,\r\n                                    fileDBRef: formattedPresentationDocument\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                                percentDone = 100 / totalFiles;\r\n                                const formattedSupportingDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: percentDone\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT,\r\n                                    fileDBRef: formattedSupportingDocument\r\n                                });\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n\r\n                        return resolve();\r\n                    });\r\n            });\r\n    });\r\n};\r\n\r\nconst putFilesReferencesToDatabase = async (dispatch, getState, mode, user = null, project = null) => {\r\n\r\n    let firebaseRef = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        switch (mode) {\r\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                const legalDocumentsUserID = getState().legalDocuments.userID;\r\n                const existingLegalDocuments = getState().legalDocuments.legalDocuments;\r\n\r\n                const filesDBReferences = getState().uploadFiles.filesDBReferences.legalDocuments;\r\n                let filesReferencesToBeUploaded = [];\r\n\r\n                if (existingLegalDocuments) {\r\n                    filesReferencesToBeUploaded = [...existingLegalDocuments, ...filesDBReferences];\r\n                } else {\r\n                    filesReferencesToBeUploaded = filesDBReferences;\r\n                }\r\n\r\n                firebaseRef\r\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                    .child(legalDocumentsUserID)\r\n                    .set(filesReferencesToBeUploaded)\r\n                    .then(() => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_DONE_MODE,\r\n                            progress: 100\r\n                        });\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_ERROR,\r\n                            progress: 100\r\n                        });\r\n                        return reject(error);\r\n                    });\r\n\r\n                break;\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    });\r\n};\r\n\r\n","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LEGAL_DOCUMENTS_SET_USER = 'LEGAL_DOCUMENTS_SET_USER';\r\nexport const setUserID = userID => {\r\n    return {\r\n        type: LEGAL_DOCUMENTS_SET_USER,\r\n        userID\r\n    }\r\n};\r\n\r\nexport const LOADING_LEGAL_DOCUMENTS = 'LOADING_LEGAL_DOCUMENTS';\r\nexport const FINISHED_LOADING_LEGAL_DOCUMENTS = 'FINISHED_LOADING_LEGAL_DOCUMENTS';\r\nexport const getLegalDocuments = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const userID = getState().legalDocuments.userID;\r\n\r\n        dispatch({\r\n            type: LOADING_LEGAL_DOCUMENTS\r\n        });\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n            .child(userID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_LEGAL_DOCUMENTS,\r\n                        legalDocuments: null,\r\n                        error: 'No legal documents'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: FINISHED_LOADING_LEGAL_DOCUMENTS,\r\n                    legalDocuments: snapshot.val()\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nlet legalDocumentsListener = null;\r\n\r\nexport const LEGAL_DOCUMENTS_CHANGED = 'LEGAL_DOCUMENTS_CHANGED';\r\nexport const startListeningForLegalDocumentsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const userID = getState().legalDocuments.userID;\r\n\r\n        if (!legalDocumentsListener) {\r\n            legalDocumentsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                .child(userID);\r\n\r\n            legalDocumentsListener\r\n                .once('value', snapshot => {\r\n                    // user has not uploaded any documents\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        legalDocumentsListener = null;\r\n                        return;\r\n                    }\r\n\r\n                    legalDocumentsListener\r\n                        .on('child_added', snapshot => {\r\n                            let updatedLegalDocuments = Object.assign([], getState().legalDocuments.legalDocuments);\r\n                            if (updatedLegalDocuments.length === 0) {\r\n                                updatedLegalDocuments = [snapshot.val()];\r\n                            }\r\n                            else {\r\n                                const index = updatedLegalDocuments.findIndex(doc => doc.storageID === snapshot.val().storageID);\r\n                                if (index === -1) {\r\n                                    updatedLegalDocuments.push(snapshot.val());\r\n                                }\r\n                            }\r\n\r\n                            dispatch({\r\n                                type: LEGAL_DOCUMENTS_CHANGED,\r\n                                legalDocuments: updatedLegalDocuments\r\n                            });\r\n                        });\r\n\r\n                    legalDocumentsListener\r\n                        .on('child_changed', snapshot => {\r\n                            let updatedLegalDocuments = [...getState().legalDocuments.legalDocuments];\r\n                            updatedLegalDocuments[snapshot.key] = snapshot.val();\r\n\r\n                            dispatch({\r\n                                type: LEGAL_DOCUMENTS_CHANGED,\r\n                                legalDocuments: updatedLegalDocuments\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForLegalDocumentsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (legalDocumentsListener) {\r\n            legalDocumentsListener.off('child_added');\r\n            legalDocumentsListener.off('child_changed');\r\n            legalDocumentsListener = null;\r\n        }\r\n    }\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER';\r\nexport const setUser = (uid) => {\r\n    return (dispatch, getState) => {\r\n        const prevUserID = getState().manageInvestorSelfCertificationAgreement.userID;\r\n        // new userID is the same as the previous set one\r\n        // do nothing\r\n        if (prevUserID === uid) {\r\n            return;\r\n        }\r\n        dispatch({\r\n            type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER,\r\n            uid\r\n        });\r\n    };\r\n};\r\n\r\nexport const LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const loadInvestorSelfCertificationAgreement = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            userID\r\n        } = getState().manageInvestorSelfCertificationAgreement;\r\n\r\n        dispatch({\r\n            type: LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT\r\n        });\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .orderByChild('userID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots || !snapshots.exists()) {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                        result: null\r\n                    });\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                        result: snapshot.val()\r\n                    });\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED';\r\nexport const handleTickBoxChanged = event => {\r\n    return {\r\n        type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const setInvestorSelfCertificationAgreement = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            userID,\r\n            statementType\r\n        } = getState().manageInvestorSelfCertificationAgreement;\r\n\r\n        const id =  firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const agreementObject = {\r\n            id,\r\n            userID: userID,\r\n            agreedDate: utils.getCurrentDate(),\r\n            type: statementType\r\n        };\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .child(id)\r\n            .set(agreementObject)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: userID,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMPLETED_SELF_CERTIFICATION\r\n                    });\r\n\r\n                // update states\r\n                dispatch({\r\n                    type: UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                    agreement: agreementObject\r\n                });\r\n\r\n                // display snackbar to let the user know\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"You have now self certified.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                    agreement: null\r\n                });\r\n\r\n                // display snackbar to let the user know\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your self-certification statement.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED';\r\nexport const handleStatementTypeChanged = event => {\r\n    return {\r\n        type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED,\r\n        event\r\n    }\r\n};","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface FetchGroupsParams {\r\n    groupIds?: string[];\r\n    name?: string;\r\n}\r\n\r\nexport default class GroupRepository {\r\n\r\n    /**\r\n     * Get group\r\n     *\r\n     * @param groupUserName\r\n     */\r\n    public async getGroup(groupUserName: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.retrieveGroup.replace(\":groupUserName\", groupUserName)\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Fetch groups\r\n     *\r\n     * @param params\r\n     */\r\n    public async fetchGroups(params?: FetchGroupsParams) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listGroups,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: params\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Fetch group members\r\n     *\r\n     * @param groupID\r\n     */\r\n    public async fetchGroupMembers(groupID: string | \"system\") {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listGroupMembers.replace(\":group\", groupID)\r\n            );\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport enum FetchProjectsOrderByOptions {\r\n    Visibility = \"visibility\",\r\n    Group = \"group\",\r\n    Investor = \"investor\",\r\n    Issuer = \"issuer\",\r\n    Sector = \"sector\",\r\n    Phase = \"phase\"\r\n}\r\n\r\nexport enum FetchProjectsPhaseOptions {\r\n    Any = \"Any\",\r\n    Live = \"Live\",\r\n    TemporarilyClosed = \"TemporarilyClosed\",\r\n    Successful = \"Successful\",\r\n    Failed = \"Failed\",\r\n    LivePitch = \"LivePitch\",\r\n    ExpiredPitch = \"ExpiredPitch\"\r\n}\r\n\r\nexport interface FetchProjectsOptions {\r\n    search?: string; // filter projects by either name, group name, or issuer company name\r\n    name?: string; // filter projects by name\r\n    visibility?: number | \"all\"; // filter projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n    group?: string | \"all\"; // filter projects by group id\r\n    groupName?: string; // filter projects by group name\r\n    investor?: string | \"all\"; // filter projects by investor id\r\n    issuer?: string | \"all\"; // filter projects by issuer id\r\n    issuerCompanyName?: string; // filter projects by issuer company name\r\n    sector?: string | \"all\"; // filter projects by sector\r\n    phase?: string | number | \"all\"; // filter projects by status\r\n    orderBy?: FetchProjectsOrderByOptions; // mode to use orderByChild\r\n}\r\n\r\nexport default class OfferRepository {\r\n\r\n    /**\r\n     * Fetch offers\r\n     *\r\n     * @param options\r\n     */\r\n    public async fetchOffers(options: FetchProjectsOptions) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listProjectsRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: options\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Export to csv\r\n     *\r\n     * @param options\r\n     */\r\n    public async exportCsv(options?: FetchProjectsOptions) {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            try {\r\n                const response = await new Api()\r\n                    .request(\r\n                        \"get\",\r\n                        ApiRoutes.exportProjectsToCsvRoute,\r\n                        {\r\n                            requestBody: null,\r\n                            queryParameters: options ?? null\r\n                        }\r\n                    );\r\n\r\n                // create a file from the csv returned by the server\r\n                const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\r\n                const link = document.createElement(\"a\");\r\n                if (link.download !== undefined) {\r\n                    // create a download url\r\n                    const url = URL.createObjectURL(blob);\r\n                    link.setAttribute(\"href\", url);\r\n                    link.setAttribute(\"download\", \"offers_data.csv\");\r\n                    link.style.visibility = \"hidden\";\r\n                    document.body.appendChild(link);\r\n                    link.click();\r\n                    document.body.removeChild(link);\r\n                }\r\n                return resolve();\r\n            } catch (error) {\r\n                return reject(error);\r\n            }\r\n        });\r\n    }\r\n}","import GroupProperties from \"../../models/group_properties\";\r\nimport {\r\n    FinishedValidatingGroupUrlAction,\r\n    ManageGroupUrlAction,\r\n    ManageGroupUrlEvents,\r\n    SetGroupUrlAction\r\n} from \"../actions/manageGroupUrlActions\";\r\nimport Error from \"../../models/error\";\r\nimport {colors} from \"@material-ui/core\";\r\nimport {createMuiTheme, responsiveFontSizes, Theme} from \"@material-ui/core/styles\";\r\nimport {defaultTheme} from \"../../App\";\r\n\r\nexport interface ManageGroupUrlState {\r\n    routePath: string | undefined;\r\n    groupNameFromUrl: string | null | undefined;\r\n\r\n    group: GroupProperties | null;\r\n    groupLoaded: boolean;\r\n    loadingGroup: boolean;\r\n\r\n    validGroupUrl: boolean;\r\n\r\n    groupRouteTheme: Theme;\r\n\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ManageGroupUrlState = {\r\n    routePath: undefined,\r\n    groupNameFromUrl: undefined,\r\n\r\n    group: null,\r\n    groupLoaded: false,\r\n    loadingGroup: false,\r\n\r\n    groupRouteTheme: defaultTheme,\r\n\r\n    validGroupUrl: false\r\n};\r\n\r\nexport const isValidatingGroupUrl = (state: ManageGroupUrlState) => {\r\n    return (!state.group && !state.groupLoaded && state.loadingGroup)\r\n        || (!state.group && !state.groupLoaded && !state.loadingGroup);\r\n}\r\n\r\nexport const routeContainsGroupName = (state: ManageGroupUrlState) => {\r\n    return state.groupNameFromUrl !== null;\r\n}\r\n\r\nexport const successfullyValidatedGroupUrl = (state: ManageGroupUrlState) => {\r\n    return state.validGroupUrl && state.error === undefined;\r\n}\r\n\r\nexport const hasGroupValidationError = (state: ManageGroupUrlState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nexport const getGroupRouteTheme = (state: ManageGroupUrlState): Theme => {\r\n    if (state.groupRouteTheme === undefined) {\r\n        return defaultTheme;\r\n    }\r\n    return state.groupRouteTheme;\r\n}\r\n\r\nconst manageGroupUrlReducer = (state: ManageGroupUrlState = initialState, action: ManageGroupUrlAction) => {\r\n    switch (action.type) {\r\n        case ManageGroupUrlEvents.SetGroupUrl:\r\n            const setGroupUrlAction: SetGroupUrlAction = action as SetGroupUrlAction;\r\n            return {\r\n                ...state,\r\n                routePath: setGroupUrlAction.path,\r\n                groupNameFromUrl: setGroupUrlAction.groupUserName\r\n            }\r\n        case ManageGroupUrlEvents.ValidatingGroupUrl:\r\n            return {\r\n                ...state,\r\n                group: null,\r\n                groupLoaded: false,\r\n                loadingGroup: true,\r\n                validGroupUrl: false\r\n            }\r\n        case ManageGroupUrlEvents.FinishedValidatingGroupUrl:\r\n            const finishedValidatingGroupUrlAction: FinishedValidatingGroupUrlAction = action as FinishedValidatingGroupUrlAction;\r\n            return {\r\n                ...state,\r\n                group: finishedValidatingGroupUrlAction.group === null ? null : JSON.parse(JSON.stringify(action.group)),\r\n                groupLoaded: true,\r\n                loadingGroup: false,\r\n                validGroupUrl: finishedValidatingGroupUrlAction.validGroupUrl,\r\n                error: finishedValidatingGroupUrlAction.error,\r\n                groupRouteTheme:\r\n                    finishedValidatingGroupUrlAction.validGroupUrl && finishedValidatingGroupUrlAction.group\r\n                        ?\r\n                        responsiveFontSizes(\r\n                            createMuiTheme({\r\n                                palette: {\r\n                                    primary: {\r\n                                        main: finishedValidatingGroupUrlAction.group.settings.primaryColor\r\n                                    },\r\n\r\n                                    secondary: {\r\n                                        main: finishedValidatingGroupUrlAction.group.settings.secondaryColor\r\n                                    },\r\n\r\n                                    text: {\r\n                                        secondary: colors.blueGrey[\"700\"],\r\n                                    }\r\n                                },\r\n                                typography: {\r\n                                    fontFamily: \"Muli, sans-serif\"\r\n                                }\r\n                            })\r\n                        )\r\n                        :\r\n                        defaultTheme\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageGroupUrlReducer;","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport OfferRepository, {\r\n    FetchProjectsOptions,\r\n    FetchProjectsOrderByOptions\r\n} from \"../../api/repositories/OfferRepository\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\n\r\nexport enum OffersTableEvents {\r\n    SetTableUser = \"OffersTableEvents.SetTableUser\",\r\n    FetchingOffers = \"OffersTableEvents.FetchingOffers\",\r\n    CompleteFetchingOffers = \"OffersTableEvents.CompleteFetchingOffers\",\r\n    FilterChanged = \"OffersTableEvents.FilterChanged\",\r\n    FilterOffersByName = \"OffersTableEvents.FilterOffersByName\",\r\n    CancelFilteringOffersByName = \"OffersTableEvents.CancelFilteringOffersByName\",\r\n    ChangePage = \"OffersTableEvents.ChangePage\",\r\n    ChangeRowsPerPage = \"OffersTableEvents.ChangeRowsPerPage\",\r\n    ExportingCsv = \"OffersTableEvents.ExportingCsv\",\r\n    CompleteExportingCsv = \"OffersTableEvents.CompleteExportingCsv\"\r\n}\r\n\r\nexport interface OffersTableAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetTableUserAction extends OffersTableAction {\r\n    user: User | Admin | undefined;\r\n    groupsOfMembership: GroupOfMembership[] | undefined;\r\n    groupsSelect: GroupProperties[] | undefined;\r\n    error?: string;\r\n}\r\n\r\nexport interface CompleteFetchingOffersAction extends OffersTableAction {\r\n    offerInstances: ProjectInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterOffersByNameAction extends OffersTableAction {\r\n    offerInstances: ProjectInstance[];\r\n    isFilteringByName: boolean;\r\n}\r\n\r\nexport interface FilterChangedAction extends OffersTableAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface ChangePageAction extends OffersTableAction {\r\n    page: number;\r\n}\r\n\r\nexport interface ChangeRowsPerPageAction extends OffersTableAction {\r\n    rowsPerPage: number;\r\n}\r\n\r\nexport interface CompleteExportingCsvAction extends OffersTableAction {\r\n    error?: string;\r\n}\r\n\r\nexport const setUser: ActionCreator<any> = (user?: User | Admin) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentTableUser = getState().OffersTableLocalState.tableUser;\r\n        let shouldSetTableUser: boolean = false;\r\n        if (currentTableUser === undefined) {\r\n            if (user !== undefined) {\r\n                shouldSetTableUser = true;\r\n            }\r\n        } else {\r\n            if (user !== undefined) {\r\n                if (currentTableUser.id !== user.id) {\r\n                    shouldSetTableUser = true;\r\n                }\r\n            } else {\r\n                shouldSetTableUser = true;\r\n            }\r\n        }\r\n\r\n        if (shouldSetTableUser) {\r\n            const action: SetTableUserAction = {\r\n                type: OffersTableEvents.SetTableUser,\r\n                user: user,\r\n                groupsOfMembership: undefined,\r\n                groupsSelect: undefined\r\n            }\r\n\r\n            try {\r\n                if (user) {\r\n                    const groupsOfMembershipResponse = await new Api().request(\"get\",\r\n                        ApiRoutes.listGroupsOfMembership.replace(\":uid\", user.id));\r\n                    const groupsOfMembership: GroupOfMembership[] = groupsOfMembershipResponse.data;\r\n                    action.groupsOfMembership = groupsOfMembership;\r\n\r\n                    const isTableAdminUser: Admin | null = isAdmin(user);\r\n\r\n                    if (isTableAdminUser && isTableAdminUser.superAdmin) {\r\n                        const allGroupsResponse = await new GroupRepository().fetchGroups();\r\n                        action.groupsSelect = allGroupsResponse.data;\r\n                    } else {\r\n                        action.groupsSelect = groupsOfMembership.map(groupOfMembership => groupOfMembership.group);\r\n                    }\r\n                }\r\n                dispatch(action);\r\n                return dispatch(fetchOffers());\r\n            } catch (error) {\r\n                action.error = error.toString();\r\n                return dispatch(action);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const fetchOffers: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            tableUser,\r\n            tableUserGroupsOfMembership,\r\n            visibilityFilter,\r\n            groupFilter,\r\n            phaseFilter\r\n        } = getState().OffersTableLocalState;\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        if (!currentUser || !tableUser) {\r\n            return;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        const fetchOffersOptions: FetchProjectsOptions = {\r\n            visibility: visibilityFilter,\r\n            group: groupFilter,\r\n            phase: phaseFilter\r\n        };\r\n\r\n        const completeAction: CompleteFetchingOffersAction = {\r\n            type: OffersTableEvents.CompleteFetchingOffers,\r\n            offerInstances: []\r\n        }\r\n\r\n        let shouldFetchOffers: boolean = false;\r\n\r\n        // currentUser = tableUser --> issuer/investor/admin is viewing their own offers table\r\n        if (currentUser.id === tableUser.id) {\r\n            shouldFetchOffers = true;\r\n        }\r\n        // currentUser != tableUser --> admin is viewing issuer/investor/admin offers table\r\n        else if (currentAdmin) {\r\n            // super admin is viewing issuer/investor/admin offers table\r\n            if (currentAdmin.superAdmin) {\r\n                shouldFetchOffers = true;\r\n            }\r\n            // group admin is viewing issuer/investor offers table\r\n            else {\r\n                if (tableUserGroupsOfMembership !== undefined\r\n                    && tableUserGroupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === currentAdmin.anid) !== -1\r\n                    && !isAdmin(tableUser)\r\n                ) {\r\n                    shouldFetchOffers = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (shouldFetchOffers) {\r\n            if (isIssuer(tableUser)) {\r\n                fetchOffersOptions.issuer = tableUser.id;\r\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Issuer;\r\n            } else if (isInvestor(tableUser)) {\r\n                fetchOffersOptions.investor = tableUser.id;\r\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Investor;\r\n            } else if (currentAdmin) {\r\n                if (!currentAdmin.superAdmin) {\r\n                    fetchOffersOptions.group = currentAdmin.anid;\r\n                    fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Group;\r\n                }\r\n            } else {\r\n                completeAction.error = \"Invalid user reference.\";\r\n                return dispatch(completeAction);\r\n            }\r\n        } else {\r\n            completeAction.error = \"You don't have privileges to access this data.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        dispatch({\r\n            type: OffersTableEvents.FetchingOffers\r\n        });\r\n\r\n        try {\r\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\r\n            completeAction.offerInstances = response.data;\r\n            dispatch(completeAction);\r\n            return dispatch(filterOffersByName());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: OffersTableEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n        dispatch(action);\r\n        if (name !== \"nameFilter\") {\r\n            dispatch(fetchOffers());\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterOffersByName: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const nameFilter: string = getState().OffersTableLocalState.nameFilter;\r\n        let offerInstances: ProjectInstance[] = [...getState().OffersTableLocalState.offerInstances];\r\n\r\n        const action: FilterOffersByNameAction = {\r\n            type: OffersTableEvents.FilterOffersByName,\r\n            offerInstances: offerInstances,\r\n            isFilteringByName: false\r\n        }\r\n\r\n        if (nameFilter.trim().length > 0) {\r\n            offerInstances = offerInstances.filter(\r\n                offerInstance => offerInstance.projectDetail.projectName?.toLowerCase().includes(nameFilter.toLowerCase())\r\n            );\r\n            action.offerInstances = offerInstances;\r\n            action.isFilteringByName = true;\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const cancelFilteringOffersByName: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: OffersTableEvents.CancelFilteringOffersByName\r\n        });\r\n    }\r\n}\r\n\r\nexport const changePage: ActionCreator<any> = (event: any, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangePageAction = {\r\n            type: OffersTableEvents.ChangePage,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const changeRowsPerPage: ActionCreator<any> = (event: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeRowsPerPageAction = {\r\n            type: OffersTableEvents.ChangeRowsPerPage,\r\n            rowsPerPage: parseInt(event.target.value, 10)\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const exportCsv: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        const exportingCsv = getState().OffersTableLocalState.exportingCsv;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        if (!currentAdmin) {\r\n            return;\r\n        }\r\n\r\n        if (exportingCsv) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: OffersTableEvents.ExportingCsv\r\n        });\r\n\r\n        const completeAction: CompleteExportingCsvAction = {\r\n            type: OffersTableEvents.CompleteExportingCsv\r\n        };\r\n\r\n        try {\r\n            await new OfferRepository().exportCsv(\r\n                currentAdmin.superAdmin\r\n                    ? undefined\r\n                    : {group: currentAdmin.anid, orderBy: FetchProjectsOrderByOptions.Group}\r\n            );\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport React, {FormEvent} from \"react\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\r\nimport OfferRepository, {\r\n    FetchProjectsOptions,\r\n    FetchProjectsOrderByOptions\r\n} from \"../../api/repositories/OfferRepository\";\r\n\r\nexport enum ExploreOffersEvents {\r\n    FetchingOffers = \"ExploreOffersEvents.FetchingOffers\",\r\n    CompleteFetchingOffers = \"ExploreOffersEvents.CompleteFetchingOffers\",\r\n    FilterChanged = \"ExploreOffersEvents.FilterChanged\",\r\n    ClearSearchFilter = \"ExploreOffersEvents.ClearSearchFilter\",\r\n    PaginationChanged = \"ExploreOffersEvents.PaginationChanged\"\r\n}\r\n\r\nexport interface ExploreOffersAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteFetchingOffersAction extends ExploreOffersAction {\r\n    offerInstances: ProjectInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterChangedAction extends ExploreOffersAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface PaginationChangedAction extends ExploreOffersAction {\r\n    page: number;\r\n}\r\n\r\nexport const onSearchEnter: ActionCreator<any> = (event: FormEvent) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        event.preventDefault();\r\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\r\n    }\r\n}\r\n\r\nexport const fetchOffers: ActionCreator<any> = (orderBy?: FetchProjectsOrderByOptions) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            searchFilter,\r\n            visibilityFilter,\r\n            sectorFilter,\r\n            phaseFilter\r\n        } = getState().ExploreOffersLocalState;\r\n\r\n        const fetchOffersOptions: FetchProjectsOptions = orderBy === undefined ? {\r\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\r\n            visibility: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? visibilityFilter : undefined,\r\n            group: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? undefined : visibilityFilter.toString(),\r\n            sector: sectorFilter,\r\n            phase: phaseFilter\r\n        } : {\r\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\r\n            visibility: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? visibilityFilter : undefined,\r\n            group: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? undefined : visibilityFilter.toString(),\r\n            sector: sectorFilter,\r\n            phase: phaseFilter,\r\n            orderBy: orderBy\r\n        };\r\n\r\n        dispatch({\r\n            type: ExploreOffersEvents.FetchingOffers\r\n        });\r\n\r\n        const completeAction: CompleteFetchingOffersAction = {\r\n            type: ExploreOffersEvents.CompleteFetchingOffers,\r\n            offerInstances: []\r\n        }\r\n\r\n        try {\r\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\r\n            completeAction.offerInstances = response.data;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: ExploreOffersEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n        dispatch(action);\r\n\r\n        switch (name) {\r\n            case \"searchFilter\":\r\n                return;\r\n            case \"visibilityFilter\":\r\n                if (value === \"all\" || value.toString() === PROJECT_VISIBILITY_PUBLIC.toString() || value.toString() === PROJECT_VISIBILITY_RESTRICTED.toString()) {\r\n                    return dispatch(fetchOffers(FetchProjectsOrderByOptions.Visibility));\r\n                }\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Group));\r\n            case \"sectorFilter\":\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Sector));\r\n            case \"phaseFilter\":\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase));\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport const clearSearchFilter: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreOffersEvents.ClearSearchFilter\r\n        });\r\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\r\n    }\r\n}\r\n\r\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: PaginationChangedAction = {\r\n            type: ExploreOffersEvents.PaginationChanged,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n","import {\r\n    ChangePageAction,\r\n    ChangeRowsPerPageAction,\r\n    CompleteExportingCsvAction,\r\n    CompleteFetchingOffersAction,\r\n    FilterChangedAction,\r\n    FilterOffersByNameAction,\r\n    OffersTableAction,\r\n    OffersTableEvents,\r\n    SetTableUserAction\r\n} from \"./OffersTableActions\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport interface OffersTableState {\r\n    offerInstances: ProjectInstance[];\r\n    offerInstancesFilteredByName: ProjectInstance[];\r\n    fetchingOffers: boolean;\r\n    offersFetched: boolean;\r\n\r\n    tableUser?: User | Admin;\r\n    tableUserGroupsOfMembership?: GroupOfMembership[];\r\n\r\n    nameFilter: string;\r\n    visibilityFilter: number | \"all\";\r\n    groupFilter: string | \"all\";\r\n    groupsSelect?: GroupProperties[];\r\n    phaseFilter: string | number | \"all\";\r\n    filteringOffersByName: boolean;\r\n\r\n    currentPage: number;\r\n    rowsPerPage: number;\r\n\r\n    exportingCsv: boolean;\r\n    errorExportingCsv?: Error;\r\n\r\n    error?: Error\r\n}\r\n\r\nconst initialState: OffersTableState = {\r\n    offerInstances: [],\r\n    offerInstancesFilteredByName: [],\r\n    fetchingOffers: false,\r\n    offersFetched: false,\r\n\r\n    nameFilter: \"\",\r\n    visibilityFilter: \"all\",\r\n    groupFilter: \"all\",\r\n    phaseFilter: \"all\",\r\n    filteringOffersByName: false,\r\n\r\n    currentPage: 0,\r\n    rowsPerPage: 5,\r\n\r\n    exportingCsv: false\r\n}\r\n\r\nexport const isFetchingOffers = (state: OffersTableState) => {\r\n    return !state.offersFetched && state.fetchingOffers;\r\n}\r\n\r\nexport const successfullyFetchedOffers = (state: OffersTableState) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const hasOffersForCurrentFilters = (state: OffersTableState) => {\r\n    return successfullyFetchedOffers(state) && state.offerInstancesFilteredByName.length > 0;\r\n}\r\n\r\nexport const isFilteringOffersByName = (state: OffersTableState) => {\r\n    return state.filteringOffersByName;\r\n}\r\n\r\nexport const hasErrorFetchingOffers = (state: OffersTableState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nexport const isExportingCsv = (state: OffersTableState) => {\r\n    return state.exportingCsv;\r\n}\r\n\r\nexport const hasErrorExportingCsv = (state: OffersTableState) => {\r\n    return state.errorExportingCsv !== undefined;\r\n}\r\n\r\nexport const hasGroupsSelect = (state: OffersTableState) => {\r\n    return state.groupsSelect !== undefined && state.groupsSelect.length > 0;\r\n}\r\n\r\nconst offersTableReducer = (state = initialState, action: OffersTableAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case OffersTableEvents.SetTableUser:\r\n            const setTableUserAction: SetTableUserAction = action as SetTableUserAction;\r\n            return {\r\n                ...initialState,\r\n                tableUser: setTableUserAction.user !== undefined\r\n                    ? JSON.parse(JSON.stringify(setTableUserAction.user))\r\n                    : undefined,\r\n                tableUserGroupsOfMembership: setTableUserAction.groupsOfMembership !== undefined\r\n                    ? [...setTableUserAction.groupsOfMembership]\r\n                    : undefined,\r\n                groupsSelect: setTableUserAction.groupsSelect !== undefined\r\n                    ? [...setTableUserAction.groupsSelect]\r\n                    : undefined,\r\n                error: setTableUserAction.error !== undefined ? {detail: setTableUserAction.error} : state.error,\r\n            }\r\n        case OffersTableEvents.FetchingOffers:\r\n            return {\r\n                ...state,\r\n                offerInstances: [],\r\n                offerInstancesFilteredByName: [],\r\n                fetchingOffers: true,\r\n                offersFetched: false,\r\n                error: undefined\r\n            }\r\n        case OffersTableEvents.CompleteFetchingOffers:\r\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\r\n            return {\r\n                ...state,\r\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\r\n                fetchingOffers: false,\r\n                offersFetched: true,\r\n                currentPage: 0,\r\n                error: completeFetchingOffersAction.error !== undefined\r\n                    ? {detail: completeFetchingOffersAction.error} : state.error\r\n            }\r\n        case OffersTableEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.FilterOffersByName:\r\n            const filterOffersByNameAction: FilterOffersByNameAction = action as FilterOffersByNameAction;\r\n            return {\r\n                ...state,\r\n                offerInstancesFilteredByName: [...filterOffersByNameAction.offerInstances],\r\n                filteringOffersByName: filterOffersByNameAction.isFilteringByName,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.CancelFilteringOffersByName:\r\n            return {\r\n                ...state,\r\n                offerInstancesFilteredByName: [...state.offerInstances],\r\n                nameFilter: \"\",\r\n                filteringOffersByName: false,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.ChangePage:\r\n            const changePageAction: ChangePageAction = action as ChangePageAction;\r\n            return {\r\n                ...state,\r\n                currentPage: changePageAction.page\r\n            }\r\n        case OffersTableEvents.ChangeRowsPerPage:\r\n            const changeRowsPerPageAction: ChangeRowsPerPageAction = action as ChangeRowsPerPageAction;\r\n            return {\r\n                ...state,\r\n                rowsPerPage: changeRowsPerPageAction.rowsPerPage,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.ExportingCsv:\r\n            return {\r\n                ...state,\r\n                exportingCsv: true,\r\n                errorExportingCsv: undefined\r\n            }\r\n        case OffersTableEvents.CompleteExportingCsv:\r\n            const completeExportingCsvAction: CompleteExportingCsvAction = action as CompleteExportingCsvAction;\r\n            return {\r\n                ...state,\r\n                exportingCsv: false,\r\n                errorExportingCsv: completeExportingCsvAction.error !== undefined\r\n                    ? {detail: completeExportingCsvAction.error} : state.errorExportingCsv\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default offersTableReducer;","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\n\r\nexport interface CustomLinkProps {\r\n    url: string;\r\n    target?: string;\r\n    color: string | \"none\";\r\n    activeColor: string | \"none\";\r\n    activeUnderline: boolean;\r\n    component: \"a\" | \"nav-link\";\r\n    childComponent: React.ReactNode;\r\n}\r\n\r\nconst CustomLink = (props: CustomLinkProps) => {\r\n    if (props.component === \"a\") {\r\n        return <a\r\n            href={props.url}\r\n            target={props.target}\r\n            className={css(styles(props).link_style)}\r\n        >\r\n            {props.childComponent}\r\n        </a>;\r\n    }\r\n\r\n    return <NavLink\r\n        to={props.url}\r\n        target={props.target}\r\n        className={css(styles(props).link_style)}\r\n    >\r\n        {props.childComponent}\r\n    </NavLink>;\r\n}\r\n\r\nexport default CustomLink;\r\n\r\nconst styles = (props: CustomLinkProps) => StyleSheet.create({\r\n    link_style: {\r\n        color: props.color,\r\n        ':hover': {\r\n            color: props.activeColor,\r\n            textDecoration: props.activeUnderline ? \"underline\" : \"none\"\r\n        }\r\n    }\r\n});","import * as DB_CONST from \"../firebase/databaseConsts\";\r\nimport {\r\n    FILE_TYPE_IMAGE,\r\n    FILE_TYPE_VIDEO,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../firebase/databaseConsts\";\r\nimport CreatePitchAgreement from \"./create_pitch_agreement\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport User, {isIssuer} from \"./user\";\r\nimport Pledge from \"./pledge\";\r\nimport Admin, {isAdmin} from \"./admin\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\n\r\n/**\r\n * Project interface\r\n */\r\nexport default interface Project {\r\n    id: string;\r\n    anid: string;\r\n    issuerID: string;\r\n    visibility: number;\r\n    status: number;\r\n    projectName?: string; // optional for draft projects only\r\n    description?: string; // optional for draft projects only\r\n    sector?: string; // optional for draft projects only\r\n    edited?: number;\r\n    temporarilyClosed?: boolean;\r\n\r\n    /**\r\n     * This field contains the user id of the group admin who\r\n     * - created the project on their own\r\n     *      --> [issuerID] = user id of the group admin as well\r\n     *\r\n     * - created the project on behalf of an issuer\r\n     *      --> [issuerID] = user id of the issuer whom the group admin created the project for\r\n     */\r\n    createdByGroupAdmin?: string;\r\n\r\n    Pitch: ProjectPitch;\r\n    PrimaryOffer?: ProjectPledge;\r\n\r\n    createPitchAgreement?: CreatePitchAgreement | null\r\n}\r\n\r\n/**\r\n * Instance of project at load time that contains extra information from other collections\r\n */\r\nexport interface ProjectInstance {\r\n    projectDetail: Project;\r\n    group: GroupProperties;\r\n    issuer: User | Admin;\r\n    pledges: Pledge[];\r\n    rejectFeedbacks: ProjectRejectFeedback[];\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a project in csv\r\n */\r\nexport interface ProjectCsv {\r\n    visibility: \"public\" | \"restricted\" | \"private\";\r\n    projectName: string | undefined;\r\n    description: string | undefined;\r\n    sector: string | undefined;\r\n    postedDate: number | undefined; // = pitch postedDate\r\n    financialRound: string | undefined; // = pitch financialRound\r\n    howFundIsBeingRaised: string | undefined; // = pitch howFundIsBeingRaised\r\n\r\n    amountRaised: number | undefined; // = pitch amountRaised\r\n    detailsAboutEarlierFundraisingRounds: string | undefined; // = pitch detailsAboutEarlierFundraisingRounds\r\n    investorsCommitted: string | undefined; // = pitch investorsCommitted\r\n    fundRequired: number | undefined; // = pitch fundRequired\r\n    postMoneyValuation: number | undefined;\r\n    coverURL: string | undefined; // = active pitch cover\r\n    mainDocument: string | undefined; // = active pitch presentationDocument\r\n    mainText: string | undefined; // = pitch presentationPlainText\r\n    supportingDocuments: string | undefined; // = active pitch supportingDocuments\r\n\r\n    pitchExpiryDate: string | undefined; // = pitch expiredDate\r\n\r\n    pledgeExpiryDate: string | undefined; // = pledge expiredDate\r\n\r\n    // this field is only available for QIB group\r\n    qibSpecialNews?: string | undefined; // = pitch qibSpecialNews\r\n\r\n    agreedToShareRaisePublicly?: \"yes\" | \"no\" | undefined;\r\n}\r\n\r\n/**\r\n * Project - pitch interface\r\n */\r\nexport interface ProjectPitch {\r\n    postedDate: number;\r\n    status: number;\r\n    amountRaised?: number;\r\n    fundRequired?: number;\r\n    totalRaise?: number;\r\n    expiredDate?: number;\r\n    cover?: PitchCover[];\r\n    postMoneyValuation?: number;\r\n    detailsAboutEarlierFundraisingRounds?: string;\r\n    investorsCommitted?: string;\r\n    financialRound?: string;\r\n    howFundIsBeingRaised?: string;\r\n    presentationDocument?: PitchDocument[];\r\n    supportingDocuments?: PitchDocument[];\r\n    presentationText?: any;\r\n    presentationPlainText?: string; // a text-only version of the presentationText which is a Quill object\r\n\r\n    /**\r\n     * This field is only available for QIB\r\n     */\r\n    qibSpecialNews?: string;\r\n}\r\n\r\n/**\r\n * Project - pledge interface\r\n */\r\nexport interface ProjectPledge {\r\n    expiredDate: number;\r\n    status: number;\r\n    extraNotes?: string;\r\n    postMoneyValuation?: number;\r\n}\r\n\r\n/**\r\n * Project reject feedback\r\n */\r\nexport interface ProjectRejectFeedback {\r\n    projectID: string;\r\n    sentBy: string;\r\n    date: number;\r\n    feedback: string;\r\n}\r\n\r\n/**\r\n * Project - pitch cover interface\r\n */\r\nexport interface PitchCover {\r\n    fileExtension: string;\r\n    fileType: number;\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Project - pitch document interface\r\n */\r\nexport interface PitchDocument {\r\n    fileName: string;\r\n    readableSize: string;\r\n    storageID: number;\r\n    downloadURL: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = (project: Project) => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a draft project to submitted to the group admin for review\r\n *\r\n * @param project\r\n */\r\nexport const isDraftProjectNotSubmitted = (project: Project) => {\r\n    return isDraftProject(project) && project.Pitch.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n}\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = (project: Project) => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = (project: Project) => {\r\n    return project.temporarilyClosed !== undefined && project.temporarilyClosed;\r\n};\r\n\r\n/**\r\n * Check if a project has reject feedbacks\r\n *\r\n * @param projectInstance\r\n */\r\nexport const doesProjectHaveRejectFeedbacks = (projectInstance: ProjectInstance) => {\r\n    return projectInstance.rejectFeedbacks.length > 0;\r\n}\r\n\r\n/**\r\n * Check if a project is created by an admin\r\n *\r\n * @param project\r\n */\r\nexport const isProjectCreatedByGroupAdmin = (project: Project) => {\r\n    return project.createdByGroupAdmin !== undefined && project.createdByGroupAdmin !== null;\r\n}\r\n\r\n/**\r\n * Set a project to draft\r\n *\r\n * @param project\r\n */\r\nexport const setProjectToDraft = (project: Project): Project => {\r\n    project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n    project.status = DB_CONST.PROJECT_STATUS_DRAFT;\r\n    return project;\r\n}\r\n\r\nexport const getPitchCover = (project: Project) => {\r\n    if (project.Pitch.cover === undefined) {\r\n        return null;\r\n    }\r\n    const index = project.Pitch.cover.findIndex(cover => cover.removed === undefined || !cover.removed);\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return project.Pitch.cover[index];\r\n}\r\n\r\nexport const isImagePitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_IMAGE;\r\n}\r\n\r\nexport const isVideoPitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_VIDEO;\r\n}\r\n\r\nexport const isProjectPublic = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PUBLIC;\r\n}\r\n\r\nexport const isProjectRestricted = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_RESTRICTED;\r\n}\r\n\r\nexport const isProjectPrivate = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PRIVATE;\r\n}\r\n\r\n/**\r\n * Should hide project information from a user\r\n *\r\n * --> true: hide\r\n * --> false: not hide\r\n *\r\n * @param user\r\n * @param groupsOfMembership\r\n * @param project\r\n */\r\nexport const shouldHideProjectInformationFromUser = (user: User | Admin, groupsOfMembership: GroupOfMembership[], project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // user is an admin\r\n    if (admin) {\r\n        // user is a super admin\r\n        if (admin.superAdmin) {\r\n            return false;\r\n        }\r\n\r\n        // user is a group admin and is the group that owns the project\r\n        if (admin.anid === project.anid) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n    // user is not an admin\r\n    else {\r\n        // should not hide any information if the user is an issuer that created this offer\r\n        if (isIssuer(user) && user.id === project.issuerID) {\r\n            return false;\r\n        }\r\n\r\n        // user is a member of the group that owns this offer\r\n        if (groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === project.anid) !== -1) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Check if a user is the owner of a project\r\n *\r\n * @param user\r\n * @param project\r\n */\r\nexport const isProjectOwner = (user: User | Admin, project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // super admin does not own a project\r\n    if (admin && admin.superAdmin) {\r\n        return false;\r\n    }\r\n\r\n    if (admin) {\r\n        return admin.anid === project.anid;\r\n    } else {\r\n        return user.id === project.issuerID;\r\n    }\r\n}","import colorString from \"color-string\";\r\n\r\nexport const toRGBWithOpacity = (color: string, opacity?: number) => {\r\n    const rgbColor: colorString.Color | null = colorString.get.rgb(color);\r\n    if (!rgbColor) {\r\n        return color;\r\n    }\r\n    return colorString.to.hex(rgbColor[0], rgbColor[1], rgbColor[2], opacity === undefined ? 1.0 : opacity);\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    colors,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Close, CreateOutlined, ImportExportOutlined, Refresh, Search} from \"@material-ui/icons\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    hasErrorExportingCsv,\r\n    hasErrorFetchingOffers,\r\n    hasGroupsSelect,\r\n    hasOffersForCurrentFilters,\r\n    isExportingCsv,\r\n    isFetchingOffers,\r\n    isFilteringOffersByName,\r\n    OffersTableState,\r\n    successfullyFetchedOffers\r\n} from \"./OffersTableReducer\";\r\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    cancelFilteringOffersByName,\r\n    changePage,\r\n    changeRowsPerPage,\r\n    exportCsv,\r\n    fetchOffers,\r\n    filterChanged,\r\n    filterOffersByName,\r\n    setUser\r\n} from \"./OffersTableActions\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport Routes from \"../../router/routes\";\r\nimport {dateInReadableFormat, isProjectInLivePitchPhase} from \"../../utils/utils\";\r\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {\r\n    PROJECT_STATUS_BEING_CHECKED,\r\n    PROJECT_STATUS_DRAFT,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../../firebase/databaseConsts\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\ninterface OffersTableProps {\r\n    // table user set by passing this prop to the OffersTable component when used\r\n    directTableUser?: User | Admin;\r\n\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    OffersTableLocalState: OffersTableState;\r\n    setUser: (user?: User | Admin) => any;\r\n    fetchOffers: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterOffersByName: () => any;\r\n    cancelFilteringOffersByName: () => any;\r\n    changePage: (event: any, page: number) => any;\r\n    changeRowsPerPage: (event: any) => any;\r\n    exportCsv: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        OffersTableLocalState: state.OffersTableLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        setUser: (user?: User | Admin) => dispatch(setUser(user)),\r\n        fetchOffers: () => dispatch(fetchOffers()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterOffersByName: () => dispatch(filterOffersByName()),\r\n        cancelFilteringOffersByName: () => dispatch(cancelFilteringOffersByName()),\r\n        changePage: (event: any, page: number) => dispatch(changePage(event, page)),\r\n        changeRowsPerPage: (event: any) => dispatch(changeRowsPerPage(event)),\r\n        exportCsv: () => dispatch(exportCsv())\r\n    }\r\n}\r\n\r\nclass OffersTable extends Component<OffersTableProps, any> {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            directTableUser,\r\n            AuthenticationState,\r\n            setUser\r\n        } = this.props;\r\n        setUser(directTableUser ?? AuthenticationState.currentUser ?? undefined);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            OffersTableLocalState,\r\n            fetchOffers,\r\n            filterChanged,\r\n            filterOffersByName,\r\n            cancelFilteringOffersByName,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            exportCsv\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentUser: User | Admin = AuthenticationState.currentUser;\r\n        const tableUser: User | Admin | undefined = OffersTableLocalState.tableUser;\r\n\r\n        if (!currentUser || !tableUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n        const tableAdmin: Admin | null = isAdmin(tableUser);\r\n\r\n        return <TableContainer\r\n            component={Paper}\r\n        >\r\n            <Table\r\n                color=\"black\"\r\n            >\r\n                {/** Table header */}\r\n                <TableHead>\r\n                    {/** Export csv button (only available for admin */}\r\n                    {\r\n                        !(currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\r\n                            ? null\r\n                            : <TableRow>\r\n                                <TableCell\r\n                                    colSpan={5}\r\n                                >\r\n                                    <Box>\r\n                                        <Button\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => exportCsv()}\r\n                                        >\r\n                                            <ImportExportOutlined\r\n                                                fontSize=\"small\"\r\n                                            />\r\n                                            <Box\r\n                                                width=\"10px\"\r\n                                            />\r\n                                            {\r\n                                                isExportingCsv(OffersTableLocalState)\r\n                                                    ? \"Exporting ...\"\r\n                                                    : \"Export csv\"\r\n                                            }\r\n                                        </Button>\r\n\r\n                                        {\r\n                                            !hasErrorExportingCsv(OffersTableLocalState)\r\n                                                ? null\r\n                                                : <Box\r\n                                                    marginTop=\"12px\"\r\n                                                >\r\n                                                    <Typography\r\n                                                        variant=\"body2\"\r\n                                                        color=\"error\"\r\n                                                    >\r\n                                                        {`${OffersTableLocalState.errorExportingCsv?.detail}. Please retry.`}\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                        }\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                    }\r\n\r\n                    {/** Create new offer button (only available for issuers and admins) */}\r\n                    {\r\n                        isInvestor(currentUser) || (currentAdmin && currentAdmin.superAdmin)\r\n                            ? null\r\n                            : <TableRow>\r\n                                <TableCell\r\n                                    colSpan={5}\r\n                                >\r\n                                    <CustomLink\r\n                                        url={\r\n                                            isIssuer(currentUser) || (currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\r\n                                                // issuer creates offer for themselves\r\n                                                // group admin creates offer for their own group\r\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)\r\n                                                : (currentAdmin && isIssuer(tableUser))\r\n                                                // group admin creates offer for an issuer in their group\r\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {\r\n                                                    admin: currentAdmin.id,\r\n                                                    issuer: tableUser.id\r\n                                                })\r\n                                                : \"\"\r\n                                        }\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                            >\r\n                                                <CreateOutlined\r\n                                                    fontSize=\"small\"\r\n                                                />\r\n                                                <Box\r\n                                                    width=\"10px\"\r\n                                                />\r\n                                                Create new offer\r\n                                            </Button>\r\n                                        }\r\n                                    />\r\n                                </TableCell>\r\n                            </TableRow>\r\n                    }\r\n\r\n                    {/** Search offer by name + refresh button */}\r\n                    <TableRow>\r\n                        <TableCell\r\n                            colSpan={5}\r\n                        >\r\n                            <Row>\r\n                                {/** Search by name field */}\r\n                                <Col\r\n                                    xs={11}\r\n                                    sm={11}\r\n                                    md={8}\r\n                                    lg={6}\r\n                                >\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        height=\"100%\"\r\n                                        alignItems=\"center\"\r\n                                        bgcolor={\r\n                                            !isFilteringOffersByName(OffersTableLocalState)\r\n                                                ? colors.grey[\"200\"]\r\n                                                : toRGBWithOpacity(getGroupRouteTheme(ManageGroupUrlState).palette.primary.main, 0.18)\r\n                                        }\r\n                                        borderRadius=\"10px\"\r\n                                    >\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            name=\"nameFilter\"\r\n                                            value={OffersTableLocalState.nameFilter}\r\n                                            placeholder=\"Search offer by name\"\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                            startAdornment={\r\n                                                <InputAdornment\r\n                                                    position=\"start\"\r\n                                                >\r\n                                                    <IconButton\r\n                                                        onClick={() => filterOffersByName()}\r\n                                                        disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                                    >\r\n                                                        <Search fontSize=\"small\"/>\r\n                                                    </IconButton>\r\n                                                </InputAdornment>\r\n                                            }\r\n                                            endAdornment={\r\n                                                !isFilteringOffersByName(OffersTableLocalState)\r\n                                                    ? null\r\n                                                    : <InputAdornment\r\n                                                        position=\"end\"\r\n                                                    >\r\n                                                        <IconButton\r\n                                                            onClick={() => cancelFilteringOffersByName()}\r\n                                                        >\r\n                                                            <Close fontSize=\"small\"/>\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                            }\r\n                                        />\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Refresh button */}\r\n                                <Col\r\n                                    xs={1}\r\n                                    sm={1}\r\n                                    md={4}\r\n                                    lg={6}\r\n                                >\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        height=\"100%\"\r\n                                        justifyContent=\"flex-end\"\r\n                                        alignItems=\"center\"\r\n                                    >\r\n                                        <IconButton\r\n                                            onClick={() => fetchOffers()}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <Refresh/>\r\n                                        </IconButton>\r\n                                    </Box>\r\n                                </Col>\r\n                            </Row>\r\n                        </TableCell>\r\n                    </TableRow>\r\n\r\n                    {/** Filters */}\r\n                    <TableRow>\r\n                        <TableCell\r\n                            colSpan={5}\r\n                        >\r\n                            <Row>\r\n                                {/** Visibility filter */}\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={4}\r\n                                >\r\n                                    <Box\r\n                                        paddingY=\"4px\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                        >\r\n                                            Visibility:\r\n                                        </Typography>\r\n                                        <Box\r\n                                            height=\"8px\"\r\n                                        />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"visibilityFilter\"\r\n                                            value={OffersTableLocalState.visibilityFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem\r\n                                                key=\"all\"\r\n                                                value=\"all\"\r\n                                            >\r\n                                                All\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={PROJECT_VISIBILITY_PUBLIC}\r\n                                                value={PROJECT_VISIBILITY_PUBLIC}\r\n                                            >\r\n                                                Public\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={PROJECT_VISIBILITY_RESTRICTED}\r\n                                                value={PROJECT_VISIBILITY_RESTRICTED}\r\n                                            >\r\n                                                Restricted\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={PROJECT_VISIBILITY_PRIVATE}\r\n                                                value={PROJECT_VISIBILITY_PRIVATE}\r\n                                            >\r\n                                                Private\r\n                                            </MenuItem>\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Group filter */}\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={4}\r\n                                >\r\n                                    <Box\r\n                                        paddingY=\"4px\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                        >\r\n                                            Group:\r\n                                        </Typography>\r\n                                        <Box\r\n                                            height=\"8px\"\r\n                                        />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"groupFilter\"\r\n                                            value={OffersTableLocalState.groupFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem\r\n                                                key=\"all\"\r\n                                                value=\"all\"\r\n                                            >\r\n                                                All\r\n                                            </MenuItem>\r\n                                            {\r\n                                                !hasGroupsSelect(OffersTableLocalState)\r\n                                                || !OffersTableLocalState.groupsSelect\r\n                                                    ? null\r\n                                                    : OffersTableLocalState.groupsSelect.map(group =>\r\n                                                        <MenuItem\r\n                                                            key={group.anid}\r\n                                                            value={group.anid}\r\n                                                        >\r\n                                                            {group.displayName}\r\n                                                        </MenuItem>\r\n                                                    )\r\n                                            }\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Phase (status) filter */}\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={4}\r\n                                >\r\n                                    <Box\r\n                                        paddingY=\"4px\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                        >\r\n                                            Status:\r\n                                        </Typography>\r\n                                        <Box\r\n                                            height=\"8px\"\r\n                                        />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"phaseFilter\"\r\n                                            value={OffersTableLocalState.phaseFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem\r\n                                                key=\"all\"\r\n                                                value=\"all\"\r\n                                            >\r\n                                                All\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={FetchProjectsPhaseOptions.LivePitch}\r\n                                                value={FetchProjectsPhaseOptions.LivePitch}\r\n                                            >\r\n                                                Live\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={PROJECT_STATUS_BEING_CHECKED}\r\n                                                value={PROJECT_STATUS_BEING_CHECKED}\r\n                                            >\r\n                                                Submitted - awaiting review\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={FetchProjectsPhaseOptions.TemporarilyClosed}\r\n                                                value={FetchProjectsPhaseOptions.TemporarilyClosed}\r\n                                            >\r\n                                                Temporarily closed\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={FetchProjectsPhaseOptions.ExpiredPitch}\r\n                                                value={FetchProjectsPhaseOptions.ExpiredPitch}\r\n                                            >\r\n                                                Expired\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                key={PROJECT_STATUS_DRAFT}\r\n                                                value={PROJECT_STATUS_DRAFT}\r\n                                            >\r\n                                                Draft\r\n                                            </MenuItem>\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n                            </Row>\r\n                        </TableCell>\r\n                    </TableRow>\r\n\r\n                    {/** Column headers */}\r\n                    <TableRow>\r\n                        <TableCell\r\n                            colSpan={2}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Project\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell\r\n                            colSpan={1}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Goal\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell\r\n                            colSpan={1}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Posted / expiry dates\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell\r\n                            colSpan={1}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Status\r\n                            </Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n\r\n                {/** Table body */}\r\n                <TableBody>\r\n                    {\r\n                        // Fetching offers\r\n                        isFetchingOffers(OffersTableLocalState)\r\n                            ? <TableRow>\r\n                                <TableCell\r\n                                    colSpan={5}\r\n                                >\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        justifyContent=\"center\"\r\n                                        alignItems=\"center\"\r\n                                        height=\"120px\"\r\n                                    >\r\n                                        <BeatLoader\r\n                                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        />\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                            // Error setting table user / fetching offers\r\n                            : hasErrorFetchingOffers(OffersTableLocalState)\r\n                            ? <TableRow>\r\n                                <TableCell\r\n                                    colSpan={5}\r\n                                >\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        justifyContent=\"center\"\r\n                                        alignItems=\"center\"\r\n                                        height=\"120px\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h6\"\r\n                                            align=\"center\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            Error. Please retry.\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                            // Not successfully fetching offers\r\n                            : !successfullyFetchedOffers(OffersTableLocalState)\r\n                                ? null\r\n                                // No offers available for current filters\r\n                                : !hasOffersForCurrentFilters(OffersTableLocalState)\r\n                                    ? <TableRow>\r\n                                        <TableCell\r\n                                            colSpan={5}\r\n                                        >\r\n                                            <Box\r\n                                                display=\"flex\"\r\n                                                justifyContent=\"center\"\r\n                                                alignItems=\"center\"\r\n                                                height=\"120px\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h6\"\r\n                                                    align=\"center\"\r\n                                                >\r\n                                                    There are no offers available using your current\r\n                                                    filter criteria.\r\n                                                </Typography>\r\n                                            </Box>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                    // Render offers\r\n                                    : OffersTableLocalState.offerInstancesFilteredByName\r\n                                        .slice(OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage, OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage + OffersTableLocalState.rowsPerPage)\r\n                                        .map(\r\n                                            offerInstance => <TableRow\r\n                                                key={offerInstance.projectDetail.id}\r\n                                                hover\r\n                                            >\r\n                                                {/** Offer name */}\r\n                                                <TableCell\r\n                                                    colSpan={2}\r\n                                                >\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"column\"\r\n                                                        justifyContent=\"center\"\r\n                                                    >\r\n                                                        {/** Visibility + Name */}\r\n                                                        <Box\r\n                                                            display=\"flex\"\r\n                                                            flexDirection=\"row\"\r\n                                                        >\r\n                                                            {\r\n                                                                isProjectPublic(offerInstance.projectDetail)\r\n                                                                    ? <PublicIcon fontSize=\"small\"/>\r\n                                                                    : isProjectRestricted(offerInstance.projectDetail)\r\n                                                                    ? <RestrictedIcon fontSize=\"small\"/>\r\n                                                                    : <PrivateIcon fontSize=\"small\"/>\r\n                                                            }\r\n                                                            <Box\r\n                                                                width=\"15px\"\r\n                                                            />\r\n                                                            <CustomLink\r\n                                                                url={\r\n                                                                    isDraftProject(offerInstance.projectDetail)\r\n                                                                        ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\r\n                                                                        : Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)\r\n                                                                }\r\n                                                                target={\r\n                                                                    isDraftProject(offerInstance.projectDetail)\r\n                                                                        ? \"_blank\"\r\n                                                                        : \"\"\r\n                                                                }\r\n                                                                color=\"black\"\r\n                                                                activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                                activeUnderline={false}\r\n                                                                component=\"nav-link\"\r\n                                                                childComponent={\r\n                                                                    <Typography\r\n                                                                        variant=\"body2\"\r\n                                                                        align=\"left\"\r\n                                                                    >\r\n                                                                        {offerInstance.projectDetail.projectName ?? \"\"}\r\n                                                                    </Typography>\r\n                                                                }\r\n                                                            />\r\n                                                        </Box>\r\n\r\n                                                        {/** Created by (not available for issuers who are looking at their own offers table) */}\r\n                                                        {\r\n                                                            isIssuer(currentUser)\r\n                                                            && OffersTableLocalState.tableUser !== undefined\r\n                                                            && currentUser.id === OffersTableLocalState.tableUser.id\r\n                                                                ? null\r\n                                                                : <Box\r\n                                                                    marginTop=\"10px\"\r\n                                                                >\r\n                                                                    <Typography\r\n                                                                        variant=\"body2\"\r\n                                                                        align=\"left\"\r\n                                                                        color=\"textSecondary\"\r\n                                                                    >\r\n                                                                        <i>\r\n                                                                            {\r\n                                                                                offerInstance.projectDetail.createdByGroupAdmin\r\n                                                                                    ? `Created by ${offerInstance.group.displayName} admin`\r\n                                                                                    : `Created by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                                            }\r\n                                                                        </i>\r\n                                                                    </Typography>\r\n                                                                </Box>\r\n                                                        }\r\n\r\n                                                        {/** Edit button (only available for draft project) */}\r\n                                                        {\r\n                                                            isInvestor(currentUser)\r\n                                                                ? null\r\n                                                                : !isDraftProject(offerInstance.projectDetail)\r\n                                                                ? null\r\n                                                                : <Box\r\n                                                                    marginTop=\"18px\"\r\n                                                                >\r\n                                                                    <CustomLink\r\n                                                                        url={\r\n                                                                            Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\r\n                                                                        }\r\n                                                                        target=\"_blank\"\r\n                                                                        color=\"none\"\r\n                                                                        activeColor=\"none\"\r\n                                                                        activeUnderline={false}\r\n                                                                        component=\"nav-link\"\r\n                                                                        childComponent={\r\n                                                                            <Button\r\n                                                                                variant=\"outlined\"\r\n                                                                                size=\"small\"\r\n                                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                            >\r\n                                                                                <CreateOutlined\r\n                                                                                    fontSize=\"small\"\r\n                                                                                />\r\n                                                                                <Box\r\n                                                                                    width=\"8px\"\r\n                                                                                />\r\n                                                                                Edit\r\n                                                                            </Button>\r\n                                                                        }\r\n                                                                    />\r\n                                                                </Box>\r\n                                                        }\r\n                                                    </Box>\r\n                                                </TableCell>\r\n\r\n                                                {/** Goal */}\r\n                                                <TableCell\r\n                                                    colSpan={1}\r\n                                                >\r\n                                                    <Typography\r\n                                                        variant=\"body2\"\r\n                                                        align=\"left\"\r\n                                                    >\r\n                                                        {\r\n                                                            !offerInstance.projectDetail.Pitch.fundRequired\r\n                                                                ? \"\"\r\n                                                                : `£${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(0)).toLocaleString()}`\r\n                                                        }\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n\r\n                                                {/** Posted / expiry dates */}\r\n                                                <TableCell\r\n                                                    colSpan={1}\r\n                                                >\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"column\"\r\n                                                    >\r\n                                                        <Typography\r\n                                                            variant=\"body2\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {`Posted date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.postedDate)}`}\r\n                                                        </Typography>\r\n                                                        <Box\r\n                                                            height=\"12px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body2\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {\r\n                                                                !offerInstance.projectDetail.Pitch.expiredDate\r\n                                                                    ? \"Expiry date: unknown\"\r\n                                                                    : `Expiry date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.expiredDate)}`\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                </TableCell>\r\n\r\n                                                {/** Status */}\r\n                                                <TableCell\r\n                                                    colSpan={1}\r\n                                                >\r\n                                                    <Typography\r\n                                                        variant=\"body2\"\r\n                                                        align=\"left\"\r\n                                                    >\r\n                                                        {\r\n                                                            isDraftProject(offerInstance.projectDetail)\r\n                                                                ? \"Draft\"\r\n                                                                : isProjectWaitingToGoLive(offerInstance.projectDetail)\r\n                                                                ? \"Submitted. Awaiting group admin review\"\r\n                                                                : isProjectInLivePitchPhase(offerInstance.projectDetail)\r\n                                                                    ? isProjectTemporarilyClosed(offerInstance.projectDetail)\r\n                                                                        ? \"Temporarily closed\"\r\n                                                                        : \"Live\"\r\n                                                                    : isProjectPitchExpiredWaitingForAdminToCheck(offerInstance.projectDetail)\r\n                                                                        ? \"Expired. Awaiting group admin review\"\r\n                                                                        : \"Closed\"\r\n                                                        }\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )\r\n                    }\r\n                </TableBody>\r\n\r\n                {/** Table footer */}\r\n                <TableFooter>\r\n                    <TableRow>\r\n                        <TablePagination\r\n                            rowsPerPageOptions={[5, 10, 15]}\r\n                            count={OffersTableLocalState.offerInstancesFilteredByName.length}\r\n                            rowsPerPage={OffersTableLocalState.rowsPerPage}\r\n                            page={OffersTableLocalState.currentPage}\r\n                            backIconButtonProps={{\r\n                                'aria-label': 'Previous Page',\r\n                            }}\r\n                            nextIconButtonProps={{\r\n                                'aria-label': 'Next Page',\r\n                            }}\r\n                            SelectProps={{\r\n                                native: true,\r\n                            }}\r\n                            onChangePage={changePage}\r\n                            onChangeRowsPerPage={changeRowsPerPage}\r\n                        />\r\n                    </TableRow>\r\n                </TableFooter>\r\n            </Table>\r\n        </TableContainer>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OffersTable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Divider, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface FooterProps {\r\n    position?: \"relative\" | \"fixed\",\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Footer extends Component<FooterProps, any> {\r\n    render() {\r\n        const {\r\n            position,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            paddingX=\"15px\"\r\n            paddingY=\"20px\"\r\n            borderTop={1}\r\n            borderColor={appColors.kick_starter_gray_box_border}\r\n            bgcolor={appColors.kick_starter_background_color}\r\n            alignItems=\"center\"\r\n            width=\"100%\"\r\n            marginTop=\"100px\"\r\n            style={{\r\n                position: position !== undefined ? position : (MediaQueryState.isMobile || !MediaQueryState.minHeightScreen ? \"relative\" : \"fixed\"),\r\n                bottom: position === undefined ? 0 : \"none\"\r\n            }}\r\n        >\r\n            <Box\r\n                display=\"flex\"\r\n                flexDirection=\"row\"\r\n                justifyContent=\"center\"\r\n            >\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"termsOfUse\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                        >\r\n                            Terms of Use\r\n                        </Typography>\r\n                    }\r\n                />\r\n\r\n                <Box\r\n                    width={25}\r\n                />\r\n\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"privacyPolicy\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                        >\r\n                            Privacy Policy\r\n                        </Typography>\r\n                    }\r\n                />\r\n            </Box>\r\n\r\n            <Box\r\n                marginY=\"20px\"\r\n                width={MediaQueryState.isMobile ? \"100%\" : \"500px\"}\r\n            >\r\n                <Divider/>\r\n            </Box>\r\n\r\n            <Box\r\n                display=\"flex\"\r\n                flexDirection=\"row\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"center\"\r\n            >\r\n                <Image\r\n                    alt=\"Invest West logo\"\r\n                    src={require(\"../../img/logo.png\").default}\r\n                    style={{\r\n                        width: \"auto\",\r\n                        height: 34,\r\n                        objectFit: \"contain\"\r\n                    }}\r\n                />\r\n                <Box\r\n                    width=\"20px\"\r\n                />\r\n                <Typography\r\n                    align=\"left\"\r\n                    variant=\"body1\"\r\n                >\r\n                    Powered by Invest West.\r\n                    <br/>\r\n                    Copyright © 2021 Invest West Ltd - All Rights Reserved.\r\n                </Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Footer);\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    List,\r\n    ListItem,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {NavLink} from 'react-router-dom';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport LetterAvatar from './LetterAvatar';\r\nimport ActivitiesTable from '../activities-components/ActivitiesTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport Routes from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as createBusinessProfileActions from '../../redux-store/actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as uploadFilesActions from '../../redux-store/actions/uploadFilesActions';\r\nimport * as legalDocumentsActions from '../../redux-store/actions/legalDocumentsActions';\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from '../../redux-store/actions/investorSelfCertificationAgreementsActions';\r\nimport {\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_VIDEO_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport {HashLoader} from 'react-spinners';\r\nimport OffersTable from \"../offers-table/OffersTable\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../footer/Footer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // -- old states -----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        // Create new business profile state ----------------------------------------------------------------------------\r\n        createBusinessProfile: state.createBusinessProfile,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile state ------------------------------------------------------------------------------------\r\n        originalUser: state.editUser.originalUser,\r\n        userEdited: state.editUser.userEdited,\r\n        allowEditing: state.editUser.allowEditing,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Investor self-certification agreement (for investor only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,\r\n        investorSelfCertificationAgreementCheckBox1Checked: state.manageInvestorSelfCertificationAgreement.checkBox1Ticked,\r\n        investorSelfCertificationAgreementCheckBox2Checked: state.manageInvestorSelfCertificationAgreement.checkBox2Ticked,\r\n        investorSelfCertificationAgreementCheckBox3Checked: state.manageInvestorSelfCertificationAgreement.checkBox3Ticked,\r\n        investorSelfCertificationAgreementStatementType: state.manageInvestorSelfCertificationAgreement.statementType,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents (for issuer only) --------------------------------------------------------------------\r\n        legalDocuments_userID: state.legalDocuments.userID,\r\n        userLegalDocuments: state.legalDocuments.legalDocuments,\r\n        userLegalDocumentsLoaded: state.legalDocuments.legalDocumentsLoaded,\r\n        userLegalDocumentsBeingLoaded: state.legalDocuments.legalDocumentsBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents state --------------------------------------------------------------------------------------\r\n        toBeUploadedLegalDocuments: state.uploadFiles.filesToBeUploaded.legalDocuments,\r\n        fileUploadErrorMessage: state.uploadFiles.fileUploadErrorMessage,\r\n        fileUploadErrorSnackbarOpen: state.uploadFiles.fileUploadErrorSnackbarOpen,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // These states can be also be used when creating business profile ***********\r\n        addNewDirector: state.editUser.addNewDirector,\r\n        newDirectorText: state.editUser.newDirectorText\r\n        //***************************************************************************\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        // Create new business profile functions ------------------------------------------------------------------------\r\n        handleCreateBusinessProfileTextChanged: (fieldType, event) => dispatch(createBusinessProfileActions.handleTextChanged(fieldType, event)),\r\n        searchAddress: (mode) => dispatch(createBusinessProfileActions.searchAddresses(mode)),\r\n        toggleEnterAddressManually: (field) => dispatch(createBusinessProfileActions.toggleEnterAddressManually(field)),\r\n        toggleTradingAddressSameAsRegisteredOffice: (checked) => dispatch(createBusinessProfileActions.toggleTradingAddressSameAsRegisteredOffice(checked)),\r\n        resetCreatingBusinessProfile: () => dispatch(createBusinessProfileActions.clearAllFields()),\r\n        handleRecommendedAddressSelected: (field, index) => dispatch(createBusinessProfileActions.handleRecommendedAddressSelected(field, index)),\r\n        toggleExpandBusinessProfileFillingForInvestor: () => dispatch(createBusinessProfileActions.toggleExpandBusinessProfileFillingForInvestor()),\r\n        uploadBusinessProfile: () => dispatch(createBusinessProfileActions.uploadBusinessProfile()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile functions --------------------------------------------------------------------------------\r\n        editUserLocally: (type, edit) => dispatch(editUserActions.editUserLocally(type, edit)),\r\n        toggleAddNewDirector: () => dispatch(editUserActions.toggleAddNewDirector()),\r\n        addNewDirectorTemporarily: (isEditingExistingBusinessProfile) => dispatch(editUserActions.addNewDirectorTemporarily(isEditingExistingBusinessProfile)),\r\n        deleteDirectorTemporarily: (index, isEditingExistingBusinessProfile) => dispatch(editUserActions.deleteDirectorTemporarily(index, isEditingExistingBusinessProfile)),\r\n        cancelEditingUser: (type) => dispatch(editUserActions.cancelEditingUser(type)),\r\n        commitUserProfileChanges: (type) => dispatch(editUserActions.commitUserProfileChanges(type)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement()),\r\n        setInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.setInvestorSelfCertificationAgreement()),\r\n        investorSelfCertificationAgreement_handleCheckBoxChanged: (event) => dispatch(investorSelfCertificationAgreementsActions.handleTickBoxChanged(event)),\r\n        investorSelfCertificationAgreement_handleStatementTypeChanged: (event) => dispatch(investorSelfCertificationAgreementsActions.handleStatementTypeChanged(event)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents functions ----------------------------------------------------------------------------\r\n        legalDocuments_setUserID: (userID) => dispatch(legalDocumentsActions.setUserID(userID)),\r\n        getUserLegalDocuments: () => dispatch(legalDocumentsActions.getLegalDocuments()),\r\n        startListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.startListeningForLegalDocumentsChanged()),\r\n        stopListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.stopListeningForLegalDocumentsChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents functions ----------------------------------------------------------------------------------\r\n        handleFilesChanged: (mode, files, user, project) => dispatch(uploadFilesActions.handleFilesChanged(mode, files, user, project)),\r\n        handleFileError: (error, file) => dispatch(uploadFilesActions.handleFileError(error, file)),\r\n        closeFileUploadSnackbarError: () => dispatch(uploadFilesActions.closeErrorSnackbar()),\r\n        resetErrorMessageWhenFileUploadSnackbarExited: () => dispatch(uploadFilesActions.resetErrorMessageWhenSnackbarExited()),\r\n        deleteToBeUploadedFile: (mode, index) => dispatch(uploadFilesActions.deleteToBeUploadedFile(mode, index)),\r\n        deleteUploadedFile: (mode, index, user, project) => dispatch(uploadFilesActions.deleteUploadedFile(mode, index, user, project)),\r\n        uploadFiles: (mode, user, project) => dispatch(uploadFilesActions.uploadFiles(mode, user, project)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open edit image dialog --------------------------------------------------------------------------------------\r\n        toggleEditImageDialog: (mode) => dispatch(editImageActions.toggleEditImageDialog(mode)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open video image dialog -------------------------------------------------------------------------------------\r\n        toggleEditVideoDialog: (mode) => dispatch(editVideoActions.toggleEditVideoDialog(mode))\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass Profile extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            userLegalDocumentsLoaded,\r\n\r\n            startListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        this.loadData();\r\n\r\n        if (userLegalDocumentsLoaded) {\r\n            startListeningForLegalDocumentsChanged();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForLegalDocumentsChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            originalUser,\r\n\r\n            legalDocuments_userID,\r\n            userLegalDocumentsLoaded,\r\n            userLegalDocumentsBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            legalDocuments_setUserID,\r\n            getUserLegalDocuments,\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        // if user has been set\r\n        if (originalUser) {\r\n            // if user id for reference in legal documents has not been set\r\n            if (!legalDocuments_userID && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                legalDocuments_setUserID(originalUser.id);\r\n            }\r\n\r\n            // if user id for reference in investor self-certification agreement has not been set\r\n            if (!investorSelfCertificationAgreement_userID && originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                investorSelfCertificationAgreement_setUser(originalUser.id);\r\n            }\r\n        }\r\n\r\n        // if user id for reference in legal documents has been set\r\n        if (legalDocuments_userID) {\r\n            // if legal documents for issuer have not been loaded\r\n            if (!userLegalDocumentsLoaded && !userLegalDocumentsBeingLoaded && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                getUserLegalDocuments();\r\n            }\r\n        }\r\n\r\n        // if user id for reference in investor self-certification agreement has been set\r\n        if (investorSelfCertificationAgreement_userID) {\r\n            // if the investor self-certification agreement has not been loaded\r\n            if (!investorSelfCertificationAgreementLoaded && !investorSelfCertificationAgreementBeingLoaded && originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                loadInvestorSelfCertificationAgreement();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when editing user's profile\r\n     */\r\n    handleEditUser = type => event => {\r\n        this.props.editUserLocally(type, {property: event.target.name, value: event.target.value});\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when creating a new business profile\r\n     */\r\n    handleCreateBusinessProfileTextChanged = fieldType => event => {\r\n        this.props.handleCreateBusinessProfileTextChanged(fieldType, event);\r\n    };\r\n\r\n    /**\r\n     * Handle toggling if trading address is the same of registered office\r\n     */\r\n    toggleTradingAddressSameAsRegisteredOffice = event => {\r\n        this.props.toggleTradingAddressSameAsRegisteredOffice(event.target.checked);\r\n    };\r\n\r\n    /**\r\n     * Handle files changed when uploading legal documents\r\n     */\r\n    handleFilesChanged = (mode, user) => files => {\r\n        this.props.handleFilesChanged(mode, files, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle delete a to-be-uploaded file\r\n     *\r\n     * @param mode\r\n     * @returns {Function}\r\n     */\r\n    deleteToBeUploadedFile = mode => index => {\r\n        this.props.deleteToBeUploadedFile(mode, index);\r\n    };\r\n\r\n    /**\r\n     * Handle delete an uploaded file\r\n     *\r\n     * @param mode\r\n     * @param user\r\n     * @returns {Function}\r\n     */\r\n    deleteUploadedFile = (mode, user) => index => {\r\n        this.props.deleteUploadedFile(mode, index, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle upload legal documents\r\n     */\r\n    uploadFiles = (mode, user) => {\r\n        this.props.uploadFiles(mode, user, null);\r\n    };\r\n\r\n    //----------------------------------------------------------------------------------------------------------\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        // these users will be set in the componentDidMount (happens after render) of the main component\r\n        // therefore, without this check it may lead to a crash due to null objects\r\n        if (!currentUser || !originalUser || !userEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                <Row\r\n                    noGutters\r\n                    style={{\r\n                        backgroundColor: colors.kick_starter_background_color_1\r\n                    }}\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                        style={{\r\n                            padding: 20\r\n                        }}\r\n                    >\r\n                        <FlexView\r\n                            hAlignContent=\"right\"\r\n                            vAlignContent=\"center\"\r\n                        >\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", userEdited.id)\r\n                                        :\r\n                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                                }\r\n                                target={currentUser.id === originalUser.id ? \"\" : \"_blank\"}\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button\r\n                                    className={css(sharedStyles.no_text_transform)}\r\n                                    variant=\"outlined\"\r\n                                    color=\"primary\"\r\n                                >\r\n                                    <PublicIcon\r\n                                        style={{\r\n                                            marginRight: 8\r\n                                        }}\r\n                                    />\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            \"View profile\"\r\n                                            :\r\n                                            \"View my profile\"\r\n                                    }\r\n                                </Button>\r\n                            </NavLink>\r\n                            <OverlayTrigger\r\n                                trigger={['hover', 'focus']}\r\n                                placement=\"bottom\"\r\n                                flip\r\n                                overlay={\r\n                                    <Tooltip\r\n                                        id={`tooltip-bottom`}\r\n                                    >\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                \"See how this user looks to other members. Since you are a group admin, you can see more information about this user than the other ordinary members.\"\r\n                                                :\r\n                                                \"See how you look to other members.\"\r\n                                        }\r\n                                    </Tooltip>\r\n                                }>\r\n                                <InfoIcon\r\n                                    fontSize=\"small\"\r\n                                    style={{\r\n                                        marginLeft: 15,\r\n                                        color: colors.gray_600\r\n                                    }}\r\n                                />\r\n                            </OverlayTrigger>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                    >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Personal details */}\r\n                <Row\r\n                    noGutters\r\n                    style={{\r\n                        backgroundColor: colors.white\r\n                    }}\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        md={12}\r\n                        lg={12}\r\n                        style={{\r\n                            padding: 24\r\n                        }}\r\n                    >\r\n                        <FlexView\r\n                            column\r\n                        >\r\n                            <Typography\r\n                                variant=\"h6\"\r\n                                color=\"primary\"\r\n                            >\r\n                                Personal details\r\n                            </Typography>\r\n\r\n                            <Row\r\n                                noGutters\r\n                                style={{\r\n                                    marginTop: 20\r\n                                }}\r\n                            >\r\n                                {/** Profile picture */}\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={4}\r\n                                >\r\n                                    <FlexView\r\n                                        column\r\n                                        hAlignContent=\"center\"\r\n                                        style={{\r\n                                            padding: 10\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !originalUser.profilePicture\r\n                                            || (\r\n                                                originalUser.profilePicture\r\n                                                && originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar\r\n                                                    firstName={originalUser.firstName}\r\n                                                    lastName={originalUser.lastName}\r\n                                                    width={196}\r\n                                                    height={196}\r\n                                                    textVariant=\"h5\"\r\n                                                />\r\n                                                :\r\n                                                <FlexView\r\n                                                    width={256}\r\n                                                    height={256}\r\n                                                >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={\r\n                                                            originalUser.profilePicture[\r\n                                                                originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed'))\r\n                                                                ].url\r\n                                                        }\r\n                                                        style={{\r\n                                                            width: \"100%\",\r\n                                                            maxHeight: 256,\r\n                                                            objectFit: \"contain\"\r\n                                                        }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    marginTop={20}\r\n                                                    marginBottom={20}\r\n                                                >\r\n                                                    <Button\r\n                                                        size=\"small\"\r\n                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                        variant=\"outlined\"\r\n                                                        color=\"primary\"\r\n                                                        onClick={() => this.props.toggleEditImageDialog(UPLOAD_PROFILE_PICTURE_MODE)}\r\n                                                        style={{\r\n                                                            width: 256\r\n                                                        }}\r\n                                                    >\r\n                                                        Update profile picture\r\n                                                    </Button>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                {/** Personal info */}\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={6}\r\n                                    lg={8}\r\n                                >\r\n                                    <Row>\r\n                                        {/** Title */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            md={12}\r\n                                            lg={{span: 6, order: 1}}\r\n                                            style={{\r\n                                                marginBottom: 20\r\n                                            }}\r\n                                        >\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <FormLabel>\r\n                                                    <b>Title</b>\r\n                                                </FormLabel>\r\n                                                <Select\r\n                                                    name=\"title\"\r\n                                                    value={userEdited.title}\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    input={\r\n                                                        <OutlinedInput/>\r\n                                                    }\r\n                                                    margin=\"dense\"\r\n                                                >\r\n                                                    {\r\n                                                        DB_CONST.USER_TITLES.map((title, index) => (\r\n                                                            <MenuItem key={index} value={title}>{title}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Empty column to reserve empty space */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={{span: 6, order: 2}}\r\n                                        >\r\n                                            {/** Empty column to reserve empty space */}\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={12}\r\n                                            lg={{span: 12, order: 3}}\r\n                                        >\r\n                                            <Divider\r\n                                                style={{\r\n                                                    marginTop: 10,\r\n                                                    marginBottom: 20\r\n                                                }}\r\n                                            />\r\n                                        </Col>\r\n\r\n                                        {/** First name */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={{span: 6, order: 4}}\r\n                                            style={{\r\n                                                marginBottom: 20\r\n                                            }}\r\n                                        >\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <FormLabel>\r\n                                                    <b>First name</b>\r\n                                                </FormLabel>\r\n                                                <TextField\r\n                                                    name=\"firstName\"\r\n                                                    placeholder=\"Enter first name\"\r\n                                                    value={userEdited.firstName}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    error={userEdited.firstName.trim().length === 0}\r\n                                                />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Last name */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={{span: 6, order: 5}}\r\n                                            style={{\r\n                                                marginBottom: 20\r\n                                            }}\r\n                                        >\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <FormLabel>\r\n                                                    <b>Last name</b>\r\n                                                </FormLabel>\r\n                                                <TextField\r\n                                                    name=\"lastName\"\r\n                                                    placeholder=\"Enter last name\"\r\n                                                    value={userEdited.lastName}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    error={userEdited.lastName.trim().length === 0}\r\n                                                />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={12}\r\n                                            lg={{span: 12, order: 6}}\r\n                                        >\r\n                                            <Divider\r\n                                                style={{\r\n                                                    marginTop: 10,\r\n                                                    marginBottom: 20\r\n                                                }}\r\n                                            />\r\n                                        </Col>\r\n\r\n                                        {/** Email */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={12}\r\n                                            lg={{span: 12, order: 7}}\r\n                                            style={{\r\n                                                marginBottom: 20\r\n                                            }}\r\n                                        >\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <FormLabel>\r\n                                                    <b>Email</b>\r\n                                                </FormLabel>\r\n                                                <TextField\r\n                                                    name=\"email\"\r\n                                                    placeholder=\"Enter email\"\r\n                                                    value={userEdited.email}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    disabled={true} // --> do not allow the users (including the admins) to change the email field for now.\r\n                                                    error={userEdited.email.trim().length === 0}\r\n                                                />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={12}\r\n                                            lg={{span: 12, order: 7}}\r\n                                        >\r\n                                            <Divider\r\n                                                style={{\r\n                                                    marginTop: 10,\r\n                                                    marginBottom: 20\r\n                                                }}\r\n                                            />\r\n                                        </Col>\r\n\r\n                                        {/** LinkedIn */}\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={12}\r\n                                            lg={{span: 12, order: 8}}\r\n                                            style={{\r\n                                                marginBottom: 20\r\n                                            }}\r\n                                        >\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <FormLabel>\r\n                                                    <b>LinkedIn</b>\r\n                                                </FormLabel>\r\n                                                <TextField\r\n                                                    name=\"linkedin\"\r\n                                                    placeholder=\"Enter your LinkedIn profile\"\r\n                                                    value={userEdited.hasOwnProperty('linkedin') ? userEdited.linkedin : ''}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    error={!utils.isValidLinkedInURL(userEdited.linkedin)}\r\n                                                />\r\n                                            </FormControl>\r\n                                            {\r\n                                                utils.isValidLinkedInURL(userEdited.linkedin)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FormHelperText\r\n                                                        className={css(sharedStyles.error_text)}\r\n                                                    >\r\n                                                        Invalid LinkedIn URL\r\n                                                    </FormHelperText>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n                                    <FlexView\r\n                                        hAlignContent=\"right\"\r\n                                        marginTop={30}\r\n                                    >\r\n                                        <FlexView\r\n                                            marginRight={20}\r\n                                        >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                color=\"primary\"\r\n                                                onClick={() => this.props.cancelEditingUser(editUserActions.RESET_PERSONAL_INFORMATION)}\r\n                                            >\r\n                                                Cancel\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                disabled={\r\n                                                    (\r\n                                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                        && !currentUser.superAdmin\r\n                                                        && !allowEditing\r\n                                                    )\r\n                                                    ||\r\n                                                    userEdited.firstName.trim().length === 0\r\n                                                    || userEdited.lastName.trim().length === 0\r\n                                                    ||\r\n                                                    (\r\n                                                        userEdited.title === originalUser.title\r\n                                                        && userEdited.firstName === originalUser.firstName\r\n                                                        && userEdited.lastName === originalUser.lastName\r\n                                                        && userEdited.email === originalUser.email\r\n                                                        && (\r\n                                                            (originalUser.linkedin && userEdited.linkedin && userEdited.linkedin === originalUser.linkedin)\r\n                                                            ||\r\n                                                            (!userEdited.linkedin && !originalUser.linkedin)\r\n                                                            ||\r\n                                                            (userEdited.linkedin && !originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                            ||\r\n                                                            (userEdited.linkedin && originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                        )\r\n                                                    )\r\n                                                }\r\n                                                onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_PERSONAL_INFORMATION_CHANGES)}\r\n                                            >\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && !currentUser.superAdmin\r\n                                        && !allowEditing\r\n                                            ?\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                color=\"error\"\r\n                                                align=\"right\"\r\n                                                style={{\r\n                                                    marginTop: 25\r\n                                                }}\r\n                                            >\r\n                                                This user is not a home member of your group. So, you cannot edit their\r\n                                                profile.\r\n                                            </Typography>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                        style={{\r\n                            marginTop: 20\r\n                        }}\r\n                    >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Business profile */}\r\n                <Row\r\n                    noGutters\r\n                    style={{\r\n                        backgroundColor: colors.kick_starter_background_color_1\r\n                    }}\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        md={12}\r\n                        lg={12}\r\n                        style={{\r\n                            padding: 24\r\n                        }}\r\n                    >\r\n                        {\r\n                            this.renderBusinessProfile()\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                    >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Investor self-certification agreement */}\r\n                {\r\n                    originalUser.type !== DB_CONST.TYPE_INVESTOR\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                            style={{\r\n                                backgroundColor: colors.white\r\n                            }}\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                style={{\r\n                                    paddingLeft: 24,\r\n                                    paddingRight: 24,\r\n                                    paddingTop: 24,\r\n                                    paddingBottom: 35\r\n                                }}\r\n                            >\r\n                                {\r\n                                    this.renderSelfCertificationAgreement()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** Divider */}\r\n                            <Col\r\n                                xs={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Divider/>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Fundraising summary - only available for super user who is viewing the profile of an issuer or an investor */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                            style={{\r\n                                backgroundColor: colors.kick_starter_background_color_1\r\n                            }}\r\n                        >\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col\r\n                                        xs={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        style={{\r\n                                            padding: 24\r\n                                        }}\r\n                                    >\r\n                                        <FlexView\r\n                                            column\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"h6\"\r\n                                                color=\"primary\"\r\n                                            >\r\n                                                Fundraising summary\r\n                                            </Typography>\r\n\r\n                                            <FlexView\r\n                                                column\r\n                                                marginTop={20}\r\n                                            >\r\n                                                <OffersTable\r\n                                                    directTableUser={originalUser}\r\n                                                />\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col\r\n                                        xs={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        style={{\r\n                                            marginTop: 20\r\n                                        }}\r\n                                    >\r\n                                        <Divider/>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                }\r\n\r\n\r\n                {/*/!** Block/Remove user - only available for admins *!/*/}\r\n                {/*{*/}\r\n                {/*    currentUser.type !== DB_CONST.TYPE_ADMIN*/}\r\n                {/*        ?*/}\r\n                {/*        null*/}\r\n                {/*        :*/}\r\n                {/*        <Row*/}\r\n                {/*            noGutters*/}\r\n                {/*            style={{*/}\r\n                {/*                backgroundColor: colors.white*/}\r\n                {/*            }}*/}\r\n                {/*        >*/}\r\n                {/*            <Col*/}\r\n                {/*                xs={12}*/}\r\n                {/*                md={12}*/}\r\n                {/*                lg={12}*/}\r\n                {/*                style={{*/}\r\n                {/*                    padding: 24*/}\r\n                {/*                }}*/}\r\n                {/*            >*/}\r\n                {/*                <FlexView*/}\r\n                {/*                    column*/}\r\n                {/*                >*/}\r\n                {/*                    <Typography*/}\r\n                {/*                        variant=\"h6\"*/}\r\n                {/*                        color=\"primary\"*/}\r\n                {/*                    >*/}\r\n                {/*                        Advanced*/}\r\n                {/*                    </Typography>*/}\r\n\r\n                {/*                    <Paper*/}\r\n                {/*                        style={{*/}\r\n                {/*                            overflowX: \"auto\",*/}\r\n                {/*                            marginTop: 30,*/}\r\n                {/*                            padding: 20,*/}\r\n                {/*                            backgroundColor: colors.kick_starter_background_color_1*/}\r\n                {/*                        }}*/}\r\n                {/*                    >*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            color=\"error\"*/}\r\n                {/*                            variant=\"h6\"*/}\r\n                {/*                            paragraph*/}\r\n                {/*                        >*/}\r\n                {/*                            Block user*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            variant=\"subtitle1\"*/}\r\n                {/*                            paragraph*/}\r\n                {/*                        >*/}\r\n                {/*                            Block the user will prevent them from*/}\r\n                {/*                            participating in all Invest West activities.*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                        <Button*/}\r\n                {/*                            color=\"secondary\"*/}\r\n                {/*                            variant=\"contained\"*/}\r\n                {/*                            disabled*/}\r\n                {/*                        >*/}\r\n                {/*                            Block user*/}\r\n                {/*                        </Button>*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            variant=\"body2\"*/}\r\n                {/*                            color=\"error\"*/}\r\n                {/*                            style={{*/}\r\n                {/*                                marginTop: 6*/}\r\n                {/*                            }}*/}\r\n                {/*                        >*/}\r\n                {/*                            This function is not available in this version.*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                    </Paper>*/}\r\n                {/*                </FlexView>*/}\r\n                {/*            </Col>*/}\r\n\r\n                {/*            {*/}\r\n                {/*                currentUser.type !== DB_CONST.TYPE_ADMIN*/}\r\n                {/*                    ?*/}\r\n                {/*                    null*/}\r\n                {/*                    :*/}\r\n                {/*                    <Col*/}\r\n                {/*                        xs={12}*/}\r\n                {/*                        md={12}*/}\r\n                {/*                        lg={12}*/}\r\n                {/*                        style={{*/}\r\n                {/*                            marginTop: 20*/}\r\n                {/*                        }}*/}\r\n                {/*                    >*/}\r\n                {/*                        <Divider/>*/}\r\n                {/*                    </Col>*/}\r\n                {/*            }*/}\r\n                {/*        </Row>*/}\r\n                {/*}*/}\r\n\r\n                {/** User's activities - only available for admins */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                            style={{\r\n                                backgroundColor: colors.kick_starter_background_color_1\r\n                            }}\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                md={12}\r\n                                lg={12}\r\n                                style={{\r\n                                    padding: 24\r\n                                }}\r\n                            >\r\n                                <FlexView\r\n                                    column\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"h6\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Activities\r\n                                    </Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView\r\n                                    column\r\n                                    marginTop={20}\r\n                                >\r\n                                    <ActivitiesTable/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                    >\r\n                        <Footer\r\n                            position=\"relative\"\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render self-certification agreement for investor\r\n     */\r\n    renderSelfCertificationAgreement = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            originalUser,\r\n            investorSelfCertificationAgreement,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementCheckBox1Checked,\r\n            investorSelfCertificationAgreementCheckBox2Checked,\r\n            investorSelfCertificationAgreementCheckBox3Checked,\r\n            investorSelfCertificationAgreementStatementType,\r\n\r\n            investorSelfCertificationAgreement_handleCheckBoxChanged,\r\n            investorSelfCertificationAgreement_handleStatementTypeChanged,\r\n            setInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            return null;\r\n        }\r\n\r\n        if (!investorSelfCertificationAgreementLoaded) {\r\n            return (\r\n                <FlexView\r\n                    column\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                    >\r\n                        Self-certification agreement\r\n                    </Typography>\r\n\r\n                    <FlexView\r\n                        hAlignContent=\"center\"\r\n                        marginTop={20}\r\n                        marginBottom={25}\r\n                    >\r\n                        <HashLoader\r\n                            color={\r\n                                !groupProperties\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    groupProperties.settings.primaryColor\r\n                            }\r\n                        />\r\n                    </FlexView>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        // investor has agreed to the terms of self-certification\r\n        if (investorSelfCertificationAgreement) {\r\n            return (\r\n                <FlexView\r\n                    column\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        color=\"primary\"\r\n                        align=\"left\"\r\n                    >\r\n                        Self-certification agreement\r\n                    </Typography>\r\n\r\n                    <Typography\r\n                        variant=\"subtitle1\"\r\n                        align=\"left\"\r\n                        style={{\r\n                            marginTop: 25,\r\n                            marginBottom: 35\r\n                        }}\r\n                    >\r\n                        {currentUser.type === DB_CONST.TYPE_ADMIN ? \"This investor has\" : \"You have\"} agreed to\r\n                        the statement\r\n                        of <b>{investorSelfCertificationAgreement.type === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT ? \"High net worth investor \" : \"Self-certified sophisticated investor \"}</b>\r\n                        on {utils.dateInReadableFormat(investorSelfCertificationAgreement.agreedDate)}.\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n            >\r\n                <Typography\r\n                    variant=\"h6\"\r\n                    color=\"error\"\r\n                    align=\"left\"\r\n                    paragraph\r\n                >\r\n                    Self-certification agreement\r\n                </Typography>\r\n\r\n                <Typography\r\n                    variant=\"body1\"\r\n                    align=\"left\"\r\n                    paragraph\r\n                >\r\n                    {\r\n                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            \"To access the functionality of this site, this user must be a self-certified investor.\"\r\n                            :\r\n                            \"To access the functionality of this site, you must be a self-certified investor. Please select the appropriate statement below and read carefully.\"\r\n                    }\r\n                </Typography>\r\n\r\n                <Select\r\n                    name=\"statementType\"\r\n                    value={investorSelfCertificationAgreementStatementType}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    input={<OutlinedInput/>}\r\n                    onChange={investorSelfCertificationAgreement_handleStatementTypeChanged}\r\n                >\r\n                    <MenuItem\r\n                        value={DB_CONST.SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT}\r\n                    >\r\n                        Self-certified sophisticated investor statement\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT}\r\n                    >\r\n                        High net worth investor statement\r\n                    </MenuItem>\r\n                </Select>\r\n\r\n                <FlexView\r\n                    column\r\n                    marginTop={35}\r\n                    style={{\r\n                        maxHeight: 500,\r\n                        overflowY: \"auto\",\r\n                        border: `1px solid ${colors.gray_300}`,\r\n                        padding: 18\r\n                    }}\r\n                >\r\n                    {/** T&Cs title */}\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        align=\"left\"\r\n                        paragraph\r\n                    >\r\n                        <b>\r\n                            {\r\n                                investorSelfCertificationAgreementStatementType === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT\r\n                                    ?\r\n                                    \"Statement for self-certified high net worth individual\"\r\n                                    :\r\n                                    \"Statement for a self-certified sophisticated investor\"\r\n                            }\r\n                        </b>\r\n                    </Typography>\r\n\r\n                    {/** T&Cs text */}\r\n                    {\r\n                        investorSelfCertificationAgreementStatementType === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT\r\n                            ?\r\n                            <Typography\r\n                                variant=\"body1\"\r\n                                align=\"left\"\r\n                                component=\"span\"\r\n                            >\r\n                                I declare that I am a certified high net worth individual for the purposes of the\r\n                                Financial Services and Markets Act 2000 (Financial Promotion) Order 2005.\r\n                                <br/><br/>\r\n                                I understand that this means:\r\n                                <ol\r\n                                    type=\"a\"\r\n                                >\r\n                                    <li>\r\n                                        I can receive financial promotions that may not have been approved by a person\r\n                                        authorised by the Financial Conduct Authority;\r\n                                    </li>\r\n                                    <li>\r\n                                        the content of such financial promotions may not conform to rules issued by the\r\n                                        Financial Conduct Authority;\r\n                                    </li>\r\n                                    <li>\r\n                                        by signing this statement I may lose significant rights;\r\n                                    </li>\r\n                                    <li>\r\n                                        I may have no right to complain to either of the following:-\r\n                                        <br/>\r\n                                        <ol\r\n                                            type=\"i\"\r\n                                        >\r\n                                            <li>\r\n                                                the Financial Conduct Authority; or\r\n                                            </li>\r\n                                            <li>\r\n                                                the Financial Ombudsman Scheme\r\n                                            </li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>\r\n                                        I may have no right to seek compensation from the Financial Services\r\n                                        Compensation Scheme.\r\n                                    </li>\r\n                                </ol>\r\n\r\n                                I am a certified high net worth individual because <b><u>at least one of the following\r\n                                applies:</u></b>\r\n\r\n                                <ol\r\n                                    type=\"a\"\r\n                                >\r\n                                    <li>\r\n                                        I had, during the financial year immediately preceding today's date, an\r\n                                        annual income to the value of £100,000 or more;\r\n                                    </li>\r\n                                    <li>\r\n                                        I held, throughout the financial year immediately preceding today's date, net\r\n                                        assets to the value of £250,000 or more. Net assets for these purposes do not\r\n                                        include:-\r\n                                        <ol\r\n                                            type=\"i\"\r\n                                        >\r\n                                            <li>\r\n                                                the property which is my primary residence or any loan secured on that\r\n                                                residence;\r\n                                            </li>\r\n                                            <li>\r\n                                                any rights of mine under a qualifying contract of insurance within the\r\n                                                meaning of the\r\n                                                Financial Services and Markets Act 2000 (Regulated Activities) Order\r\n                                                2001; or\r\n                                            </li>\r\n                                            <li>\r\n                                                any benefits (in the form of pensions or otherwise) which are payable on\r\n                                                the\r\n                                                termination of my service or on my death or retirement and to which I am\r\n                                                (or my dependants are), or may be, entitled.\r\n                                            </li>\r\n                                        </ol>\r\n                                    </li>\r\n                                </ol>\r\n                            </Typography>\r\n                            :\r\n                            <Typography\r\n                                variant=\"body1\"\r\n                                align=\"left\"\r\n                                component=\"span\"\r\n                            >\r\n                                I declare that I am a self-certified sophisticated investor for the purposes of the\r\n                                Financial Services and Markets Act (Financial Promotion) Order 2005.\r\n                                <br/><br/>\r\n                                I understand that this means:\r\n                                <ol\r\n                                    type=\"a\"\r\n                                >\r\n                                    <li>\r\n                                        I can receive financial promotions that may not have been approved by a person\r\n                                        authorised by the Financial Conduct Authority;\r\n                                    </li>\r\n                                    <li>\r\n                                        the content of such financial promotions may not conform to rules issued by the\r\n                                        Financial Conduct Authority;\r\n                                    </li>\r\n                                    <li>\r\n                                        by signing this statement I may lose significant rights;\r\n                                    </li>\r\n                                    <li>\r\n                                        I may have no right to complain to either of the following:\r\n                                        <ol\r\n                                            type=\"i\"\r\n                                        >\r\n                                            <li>\r\n                                                the Financial Conduct Authority; or\r\n                                            </li>\r\n                                            <li>\r\n                                                the Financial Ombudsman Scheme;\r\n                                            </li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>\r\n                                        I may have no right to seek compensation from the Financial Services\r\n                                        Compensation Scheme.\r\n                                    </li>\r\n                                </ol>\r\n\r\n                                I am a self-certified sophisticated investor because <b><u>at least one of the following\r\n                                applies:</u></b>\r\n\r\n                                <ol\r\n                                    type=\"a\"\r\n                                >\r\n                                    <li>\r\n                                        I am a member of a network or syndicate of business angels and have been so for\r\n                                        at\r\n                                        least the last six months prior to today's date;\r\n                                    </li>\r\n                                    <li>\r\n                                        I have made more than one investment in an unlisted company in the two years\r\n                                        prior to today's date;\r\n                                    </li>\r\n                                    <li>\r\n                                        I am working, or have worked in the two years prior to today's date, in a\r\n                                        professional capacity in the private equity sector, or in the provision of\r\n                                        finance for small and medium enterprises;\r\n                                    </li>\r\n                                    <li>\r\n                                        I am currently, or have been in the two years prior to today's date, a\r\n                                        director of a company with an annual turnover of at least £1 million.\r\n                                    </li>\r\n                                </ol>\r\n                            </Typography>\r\n                    }\r\n                    {/** Divider */}\r\n                    <Divider\r\n                        style={{\r\n                            marginTop: 30,\r\n                            marginBottom: 18\r\n                        }}\r\n                    />\r\n\r\n                    <FormControl\r\n                        component=\"fieldset\"\r\n                        fullWidth\r\n                    >\r\n                        <FormGroup\r\n                            row={true}\r\n                        >\r\n                            {/** Checkbox 1 */}\r\n                            <FormControlLabel\r\n                                style={{\r\n                                    width: \"100%\"\r\n                                }}\r\n                                control={\r\n                                    <Checkbox\r\n                                        name=\"checkBox1Ticked\"\r\n                                        color=\"primary\"\r\n                                        value={investorSelfCertificationAgreementCheckBox1Checked}\r\n                                        checked={investorSelfCertificationAgreementCheckBox1Checked}\r\n                                        onChange={investorSelfCertificationAgreement_handleCheckBoxChanged}\r\n                                    />\r\n                                }\r\n                                label={\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        <b>\r\n                                            I accept that I can lose my property and other assets from making investment\r\n                                            decisions based on financial promotions.\r\n                                        </b>\r\n                                    </Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n\r\n                            {/** Checkbox 2 */}\r\n                            <FormControlLabel\r\n                                style={{\r\n                                    width: \"100%\"\r\n                                }}\r\n                                control={\r\n                                    <Checkbox\r\n                                        name=\"checkBox2Ticked\"\r\n                                        color=\"primary\"\r\n                                        value={investorSelfCertificationAgreementCheckBox2Checked}\r\n                                        checked={investorSelfCertificationAgreementCheckBox2Checked}\r\n                                        onChange={investorSelfCertificationAgreement_handleCheckBoxChanged}\r\n                                    />\r\n                                }\r\n                                label={\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        I am aware that it is open to me to seek advice from someone who specialises in\r\n                                        advising on investments.\r\n                                    </Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n\r\n                            {/** Checkbox 3 */}\r\n                            <FormControlLabel\r\n                                style={{\r\n                                    width: \"100%\"\r\n                                }}\r\n                                control={\r\n                                    <Checkbox\r\n                                        name=\"checkBox3Ticked\"\r\n                                        color=\"primary\"\r\n                                        value={investorSelfCertificationAgreementCheckBox3Checked}\r\n                                        checked={investorSelfCertificationAgreementCheckBox3Checked}\r\n                                        onChange={investorSelfCertificationAgreement_handleCheckBoxChanged}\r\n                                    />\r\n                                }\r\n                                label={\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        <b>\r\n                                            I have read and agree to the&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.constructPublicRoute(\"termsOfUse\")}\r\n                                                target=\"_blank\"\r\n                                                color=\"none\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"nav-link\"\r\n                                                childComponent=\"Terms of Use\"\r\n                                            />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.constructPublicRoute(\"privacyPolicy\")}\r\n                                                target=\"_blank\"\r\n                                                color=\"none\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"nav-link\"\r\n                                                childComponent=\"Privacy Policy\"\r\n                                            />\r\n                                            .\r\n                                        </b>\r\n                                    </Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n                        </FormGroup>\r\n                    </FormControl>\r\n                </FlexView>\r\n\r\n                <FlexView\r\n                    column\r\n                    grow={1}\r\n                    hAlignContent=\"right\"\r\n                    marginTop={40}\r\n                    marginBottom={20}\r\n                >\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={setInvestorSelfCertificationAgreement}\r\n                        disabled={\r\n                            !investorSelfCertificationAgreementCheckBox1Checked\r\n                            || !investorSelfCertificationAgreementCheckBox2Checked\r\n                            || !investorSelfCertificationAgreementCheckBox3Checked\r\n                            || currentUser.type === DB_CONST.TYPE_ADMIN\r\n                        }\r\n                    >\r\n                        Submit\r\n                    </Button>\r\n                    {\r\n                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            <Typography\r\n                                variant=\"body1\"\r\n                                color=\"error\"\r\n                                align=\"right\"\r\n                                style={{\r\n                                    marginTop: 25\r\n                                }}\r\n                            >\r\n                                You cannot do this on behalf of the investor.\r\n                            </Typography>\r\n                            :\r\n                            null\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render business profile section\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderBusinessProfile = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing,\r\n\r\n            clubAttributes,\r\n\r\n            createBusinessProfile,\r\n            addNewDirector,\r\n            newDirectorText,\r\n\r\n            searchAddress,\r\n            toggleEnterAddressManually,\r\n            resetCreatingBusinessProfile,\r\n            handleRecommendedAddressSelected,\r\n            toggleExpandBusinessProfileFillingForInvestor,\r\n            uploadBusinessProfile\r\n        } = this.props;\r\n\r\n        // user has already uploaded their business profile\r\n        if (originalUser.BusinessProfile) {\r\n            return (\r\n                /** Business profile has been uploaded */\r\n                <FlexView\r\n                    column\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        color=\"primary\"\r\n                    >\r\n                        Business profile\r\n                    </Typography>\r\n                    <Row\r\n                        noGutters\r\n                        style={{\r\n                            marginTop: 20\r\n                        }}\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={4}\r\n                            style={{\r\n                                padding: 10,\r\n                                width: \"100%\"\r\n                            }}\r\n                        >\r\n                            <FlexView\r\n                                column\r\n                                hAlignContent=\"center\"\r\n                            >\r\n                                <FlexView\r\n                                    column\r\n                                    width=\"100%\"\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                            && originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You haven't uploaded your company logo\"\r\n                                                        :\r\n                                                        \"This user hasn't uploaded company logo\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <FlexView\r\n                                                width={256}\r\n                                                height={256}\r\n                                            >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        originalUser.BusinessProfile.logo[originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{\r\n                                                        width: \"100%\",\r\n                                                        maxHeight: 256,\r\n                                                        objectFit: \"contain\"\r\n                                                    }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView\r\n                                                marginTop={20}\r\n                                            >\r\n                                                <Button\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    fullWidth\r\n                                                    onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_MODE)}\r\n                                                    style={{\r\n                                                        width: 256\r\n                                                    }}\r\n                                                >\r\n                                                    Update logo\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                <FlexView\r\n                                    column\r\n                                    marginTop={80}\r\n                                    marginBottom={20}\r\n                                    width=\"100%\"\r\n                                    hAlignContent=\"center\"\r\n                                    style={{\r\n                                        paddingLeft: 25,\r\n                                        paddingRight: 25\r\n                                    }}\r\n                                >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                            && originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You have no introduction video\"\r\n                                                        :\r\n                                                        \"This user has no introduction video\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <ReactPlayer\r\n                                                url={\r\n                                                    originalUser.BusinessProfile.video[\r\n                                                        originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed'))\r\n                                                        ].url\r\n                                                }\r\n                                                width=\"100%\"\r\n                                                height=\"100%\"\r\n                                                controls={true}\r\n                                                playing={false}\r\n                                            />\r\n                                    }\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20}>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_MODE)}\r\n                                                    style={{\r\n                                                        width: 256\r\n                                                    }}\r\n                                                >\r\n                                                    Update introduction video\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={8}\r\n                        >\r\n                            {/** Company name */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Company name</b>\r\n                                    </FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyName\"\r\n                                        placeholder=\"Enter company name\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('companyName') ? userEdited.BusinessProfile.companyName : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                    marginBottom: 20\r\n                                }}\r\n                            />\r\n\r\n                            {/** Registration number */}\r\n                            <FlexView\r\n                                column\r\n                            >\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Registration number</b>\r\n                                    </FormLabel>\r\n                                    <TextField\r\n                                        name=\"registrationNo\"\r\n                                        placeholder=\"Enter company registration number\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('registrationNo') ? userEdited.BusinessProfile.registrationNo : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        disabled={currentUser.type !== DB_CONST.TYPE_ADMIN}\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                    marginBottom: 20\r\n                                }}\r\n                            />\r\n\r\n                            {/** Registered office */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Registered office</b>\r\n                                    </FormLabel>\r\n                                    <FormGroup>\r\n                                        <FlexView column>\r\n                                            <TextField\r\n                                                name=\"address1\"\r\n                                                placeholder=\"Address 1\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address1\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                error={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                    && userEdited.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address2\"\r\n                                                placeholder=\"Address 2\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address2\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address3\"\r\n                                                placeholder=\"Address 3\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address3\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <Row>\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                    <TextField\r\n                                                        name=\"townCity\"\r\n                                                        placeholder=\"Town/City\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.registeredOffice.townCity\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                            && userEdited.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                    <TextField\r\n                                                        name=\"postcode\"\r\n                                                        placeholder=\"Postcode\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.registeredOffice.postcode.toUpperCase()\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                            && userEdited.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FlexView>\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                    marginBottom: 20\r\n                                }}\r\n                            />\r\n\r\n                            {/** Trading address */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Trading address</b>\r\n                                    </FormLabel>\r\n                                    <FormGroup>\r\n                                        <FlexView column>\r\n                                            <TextField\r\n                                                name=\"address1\"\r\n                                                placeholder=\"Address 1\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address1\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                error={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                    && userEdited.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address2\"\r\n                                                placeholder=\"Address 2\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address2\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address3\"\r\n                                                placeholder=\"Address 3\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address3\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <Row>\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                    <TextField\r\n                                                        name=\"townCity\"\r\n                                                        placeholder=\"Town/City\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.tradingAddress.townCity\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                            && userEdited.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                    <TextField\r\n                                                        name=\"postcode\"\r\n                                                        placeholder=\"Postcode\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.tradingAddress.postcode.toUpperCase()\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                            && userEdited.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FlexView>\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                    marginBottom: 20\r\n                                }}\r\n                            />\r\n\r\n                            {\r\n                                !clubAttributes\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        <FlexView>\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <FormLabel>\r\n                                                    <b>Sector</b>\r\n                                                </FormLabel>\r\n                                                <Select\r\n                                                    name=\"sector\"\r\n                                                    value={\r\n                                                        userEdited.BusinessProfile.hasOwnProperty('sector')\r\n                                                            ?\r\n                                                            userEdited.BusinessProfile.sector\r\n                                                            :\r\n                                                            ''\r\n                                                    }\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                                    input={<OutlinedInput/>}\r\n                                                    margin=\"dense\"\r\n                                                >\r\n\r\n                                                    {\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem\r\n                                                                key={index}\r\n                                                                value={sector}\r\n                                                            >\r\n                                                                {sector}\r\n                                                            </MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </FlexView>\r\n                                    )\r\n                            }\r\n\r\n                            <Divider\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                    marginBottom: 20\r\n                                }}\r\n                            />\r\n\r\n                            {/** Directors */}\r\n                            <FlexView column>\r\n                                <FormControl\r\n                                    error={\r\n                                        userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                        && userEdited.BusinessProfile.directors.length === 0\r\n                                    }\r\n                                >\r\n                                    <FormLabel>\r\n                                        <b>Directors</b>\r\n                                    </FormLabel>\r\n\r\n                                    <Row noGutters>\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={6}\r\n                                        >\r\n                                            {\r\n                                                !userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <List>\r\n                                                        {\r\n                                                            userEdited.BusinessProfile.directors.map((director, index) => (\r\n                                                                <ListItem\r\n                                                                    key={index}\r\n                                                                >\r\n                                                                    <ListItemText>\r\n                                                                        {director}\r\n                                                                    </ListItemText>\r\n                                                                    <ListItemSecondaryAction>\r\n                                                                        <IconButton\r\n                                                                            onClick={() => this.props.deleteDirectorTemporarily(index, true)}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                    </ListItemSecondaryAction>\r\n                                                                </ListItem>\r\n                                                            ))\r\n                                                        }\r\n                                                    </List>\r\n                                            }\r\n\r\n                                            {\r\n                                                !userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                                || (userEdited.BusinessProfile.hasOwnProperty('directors') && userEdited.BusinessProfile.directors.length === 0)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Divider\r\n                                                        style={{\r\n                                                            marginTop: 10,\r\n                                                            marginBottom: 16\r\n                                                        }}\r\n                                                    />\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={6}\r\n                                        >\r\n                                        </Col>\r\n\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={6}\r\n                                            lg={6}\r\n                                        >\r\n                                            {\r\n                                                !addNewDirector\r\n                                                    ?\r\n                                                    <Button\r\n                                                        variant=\"outlined\"\r\n                                                        size=\"small\"\r\n                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                        onClick={this.props.toggleAddNewDirector}\r\n                                                    >\r\n                                                        <AddIcon\r\n                                                            fontSize=\"small\"\r\n                                                            style={{\r\n                                                                marginRight: 4\r\n                                                            }}\r\n                                                        />\r\n                                                        Add director\r\n                                                    </Button>\r\n                                                    :\r\n                                                    <FlexView\r\n                                                        column\r\n                                                    >\r\n                                                        <TextField\r\n                                                            placeholder=\"Enter director's name\"\r\n                                                            name=\"newDirectorText\"\r\n                                                            value={newDirectorText}\r\n                                                            fullWidth\r\n                                                            variant=\"outlined\"\r\n                                                            onChange={this.handleEditUser(editUserActions.ADDING_NEW_DIRECTOR)}\r\n                                                            margin=\"dense\"\r\n                                                        />\r\n\r\n                                                        <FlexView\r\n                                                            marginTop={8}\r\n                                                            hAlignContent=\"right\"\r\n                                                        >\r\n                                                            <Button\r\n                                                                variant=\"outlined\"\r\n                                                                size=\"small\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={this.props.toggleAddNewDirector}\r\n                                                                style={{\r\n                                                                    marginRight: 8\r\n                                                                }}\r\n                                                            >\r\n                                                                Cancel\r\n                                                            </Button>\r\n                                                            <Button\r\n                                                                variant=\"contained\"\r\n                                                                size=\"small\"\r\n                                                                color=\"primary\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={() => this.props.addNewDirectorTemporarily(true)}\r\n                                                                disabled={newDirectorText.trim().length === 0}\r\n                                                            >\r\n                                                                Add\r\n                                                            </Button>\r\n                                                        </FlexView>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider\r\n                                style={{\r\n                                    marginTop: 20,\r\n                                    marginBottom: 20\r\n                                }}\r\n                            />\r\n\r\n                            {/** Website */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Company website</b>\r\n                                    </FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyWebsite\"\r\n                                        placeholder=\"Enter company website\"\r\n                                        value={\r\n                                            userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                ?\r\n                                                userEdited.BusinessProfile.companyWebsite\r\n                                                :\r\n                                                ''\r\n                                        }\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={\r\n                                            (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                        }\r\n                                    />\r\n                                </FormControl>\r\n                                {\r\n                                    !userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length === 0\r\n                                    )\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                        && utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                    )\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            color=\"error\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            Invalid website URL\r\n                                        </Typography>\r\n                                }\r\n                            </FlexView>\r\n\r\n                            <FlexView\r\n                                hAlignContent=\"right\"\r\n                                marginTop={30}\r\n                            >\r\n                                <FlexView\r\n                                    marginRight={20}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => this.props.cancelEditingUser(editUserActions.RESET_BUSINESS_PROFILE)}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                </FlexView>\r\n                                <FlexView>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={\r\n                                            (\r\n                                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                && !currentUser.superAdmin\r\n                                                && !allowEditing\r\n                                            )\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.address1.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.townCity.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.postcode.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.address1.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.townCity.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.postcode.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('directors') && userEdited.BusinessProfile.directors.length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite') && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                            || JSON.stringify(originalUser.BusinessProfile) === JSON.stringify(userEdited.BusinessProfile)\r\n                                        }\r\n                                        onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_BUSINESS_PROFILE_CHANGES)}\r\n                                    >\r\n                                        Save\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                            {\r\n                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                && !currentUser.superAdmin\r\n                                && !allowEditing\r\n                                    ?\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"error\"\r\n                                        align=\"right\"\r\n                                        style={{\r\n                                            marginTop: 25\r\n                                        }}\r\n                                    >\r\n                                        This user is not a home member of your group. So, you cannot edit their\r\n                                        profile.\r\n                                    </Typography>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            );\r\n        }\r\n        // user has not uploaded their business profile yet\r\n        else {\r\n            // if the user is not a super user\r\n            if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n                return (\r\n                    // user has not uploaded Business profile yet\r\n                    <FlexView\r\n                        column\r\n                    >\r\n                        <FlexView\r\n                            column\r\n                        >\r\n                            <Typography\r\n                                variant=\"h6\"\r\n                                color=\"primary\"\r\n                                style={{\r\n                                    marginBottom: 4\r\n                                }}\r\n                            >\r\n                                Business profile\r\n                            </Typography>\r\n                            {\r\n                                originalUser.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Row\r\n                                        noGutters\r\n                                    >\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={{span: 6, offset: 3}}\r\n                                            lg={{span: 4, offset: 4}}\r\n                                        >\r\n                                            <Button\r\n                                                fullWidth\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                color={\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ? \"primary\"\r\n                                                        : \"secondary\"\r\n                                                }\r\n                                                variant=\"outlined\"\r\n                                                size=\"medium\"\r\n                                                onClick={toggleExpandBusinessProfileFillingForInvestor}\r\n                                                style={{\r\n                                                    marginTop: 25,\r\n                                                    marginBottom: 20\r\n                                                }}\r\n                                            >\r\n                                                {\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ?\r\n                                                        \"Create company profile (optional)\"\r\n                                                        :\r\n                                                        \"Cancel creating company profile\"\r\n                                                }\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </FlexView>\r\n\r\n                        {\r\n                            originalUser.type === DB_CONST.TYPE_ISSUER\r\n                            || createBusinessProfile.expandBusinessProfileFilling\r\n                                ?\r\n                                // start filling in Business profile\r\n                                <FlexView\r\n                                    column\r\n                                    marginTop={20}\r\n                                >\r\n                                    {/** Company name */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <FormLabel>\r\n                                                <b>Company name</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company name\"\r\n                                                name=\"companyName\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyName}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Registration number */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <FormLabel>\r\n                                                <b>Registration number</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company registration number\"\r\n                                                name=\"registrationNo\"\r\n                                                value={createBusinessProfile.BusinessProfile.registrationNo}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Registered office */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <Container\r\n                                                fluid\r\n                                                style={{\r\n                                                    padding: 0\r\n                                                }}\r\n                                            >\r\n                                                <Row\r\n                                                    noGutters\r\n                                                >\r\n                                                    <Col\r\n                                                        xs={12}\r\n                                                        sm={12}\r\n                                                        md={6}\r\n                                                        lg={4}\r\n                                                    >\r\n                                                        <FormLabel>\r\n                                                            <b>Registered office</b>\r\n                                                        </FormLabel>\r\n                                                        <FormHelperText>\r\n                                                            Enter a UK postcode to search for address or click on \"Enter\r\n                                                            address manually\" to enter your address manually.\r\n                                                        </FormHelperText>\r\n                                                        <FormGroup>\r\n                                                            {/** Search postcode field */}\r\n                                                            <FlexView>\r\n                                                                <TextField\r\n                                                                    placeholder=\"Enter UK postcode\"\r\n                                                                    name=\"registeredOfficeSearchPostcode\"\r\n                                                                    value={createBusinessProfile.registeredOfficeSearchPostcode.toUpperCase()}\r\n                                                                    fullWidth\r\n                                                                    variant=\"outlined\"\r\n                                                                    margin=\"dense\"\r\n                                                                    onChange={\r\n                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED)\r\n                                                                    }\r\n                                                                    InputProps={{\r\n                                                                        startAdornment:\r\n                                                                            <InputAdornment\r\n                                                                                position=\"start\"\r\n                                                                            >\r\n                                                                                <IconButton\r\n                                                                                    disableRipple\r\n                                                                                    style={{\r\n                                                                                        width: 48, height: 48\r\n                                                                                    }}\r\n                                                                                    onClick={() => searchAddress(createBusinessProfileActions.SEARCHING_REGISTERED_OFFICE_ADDRESSES)}\r\n                                                                                >\r\n                                                                                    <SearchIcon/>\r\n                                                                                </IconButton>\r\n                                                                            </InputAdornment>\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {\r\n                                                                !createBusinessProfile.registeredOfficeEnterAddressManually\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    <FlexView\r\n                                                                        column\r\n                                                                    >\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 1:*\"\r\n                                                                            name=\"address1\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address1}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            required\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 2:\"\r\n                                                                            name=\"address2\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address2}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 3:\"\r\n                                                                            name=\"address3\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address3}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <Row\r\n                                                                        >\r\n                                                                            <Col\r\n                                                                                xs={12}\r\n                                                                                sm={12}\r\n                                                                                md={6}\r\n                                                                                lg={6}\r\n                                                                            >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Town/City:*\"\r\n                                                                                    name=\"townCity\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.registeredOffice.townCity}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n                                                                            </Col>\r\n                                                                            <Col\r\n                                                                                xs={12}\r\n                                                                                sm={12}\r\n                                                                                md={6}\r\n                                                                                lg={6}\r\n                                                                            >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Postcode:*\"\r\n                                                                                    name=\"postcode\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.registeredOffice.postcode.toUpperCase()}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n                                                                            </Col>\r\n                                                                        </Row>\r\n                                                                    </FlexView>\r\n                                                            }\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                <Row\r\n                                                    noGutters\r\n                                                >\r\n                                                    <Col\r\n                                                        xs={12}\r\n                                                        sm={12}\r\n                                                        md={6}\r\n                                                        lg={4}\r\n                                                    >\r\n                                                        {\r\n                                                            createBusinessProfile.registeredOfficeRecommendedAddresses\r\n                                                            && createBusinessProfile.registeredOfficeRecommendedAddresses.error\r\n                                                                ?\r\n                                                                <Typography\r\n                                                                    variant=\"body2\"\r\n                                                                    color=\"error\"\r\n                                                                    align=\"left\"\r\n                                                                    style={{\r\n                                                                        marginTop: 4,\r\n                                                                        marginBottom: 4\r\n                                                                    }}\r\n                                                                >\r\n                                                                    Sorry, we can't find your address, please check the\r\n                                                                    details\r\n                                                                    entered and search again, alternatively you can\r\n                                                                    enter your\r\n                                                                    address manually below.\r\n                                                                </Typography>\r\n                                                                :\r\n                                                                null\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            !createBusinessProfile.registeredOfficeRecommendedAddresses\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                // error happened while finding addresses\r\n                                                                createBusinessProfile.registeredOfficeRecommendedAddresses.error\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    <List\r\n                                                                        className={css(styles.address_list)}\r\n                                                                    >\r\n                                                                        {\r\n                                                                            createBusinessProfile.registeredOfficeRecommendedAddresses.formattedAddresses.map((address, index) => (\r\n                                                                                <ListItem\r\n                                                                                    button\r\n                                                                                    key={index}\r\n                                                                                    onClick={() => handleRecommendedAddressSelected(createBusinessProfileActions.SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS, index)}\r\n                                                                                >\r\n                                                                                    <ListItemText\r\n                                                                                        primary={address}\r\n                                                                                    />\r\n                                                                                </ListItem>\r\n                                                                            ))\r\n                                                                        }\r\n                                                                    </List>\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            createBusinessProfile.registeredOfficeEnterAddressManually\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography\r\n                                                                    variant=\"body2\"\r\n                                                                    color=\"primary\"\r\n                                                                    align=\"left\"\r\n                                                                    className={css(styles.enter_address_manually)}\r\n                                                                    onClick={() => toggleEnterAddressManually(createBusinessProfileActions.TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY)}\r\n                                                                >\r\n                                                                    Enter address manually.\r\n                                                                </Typography>\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Container>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Trading address */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <Container\r\n                                                fluid\r\n                                                style={{\r\n                                                    padding: 0\r\n                                                }}\r\n                                            >\r\n                                                <Row\r\n                                                    noGutters\r\n                                                >\r\n                                                    <Col\r\n                                                        xs={12}\r\n                                                        sm={12}\r\n                                                        md={6}\r\n                                                        lg={4}\r\n                                                    >\r\n                                                        <FormLabel>\r\n                                                            <b>Trading address</b>\r\n                                                        </FormLabel>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                <Row\r\n                                                    noGutters\r\n                                                >\r\n                                                    <Col\r\n                                                        xs={12}\r\n                                                        sm={12}\r\n                                                        md={6}\r\n                                                        lg={4}\r\n                                                    >\r\n                                                        <FormGroup>\r\n                                                            <FormControlLabel\r\n                                                                label=\"Same as registered office address\"\r\n                                                                labelPlacement=\"end\"\r\n                                                                control={\r\n                                                                    <Checkbox\r\n                                                                        checked={createBusinessProfile.tradingAddressSameAsRegisteredOffice}\r\n                                                                        color=\"primary\"\r\n                                                                        onChange={this.toggleTradingAddressSameAsRegisteredOffice}\r\n                                                                    />\r\n                                                                }\r\n                                                            />\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                {\r\n                                                    createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Row\r\n                                                            noGutters\r\n                                                        >\r\n                                                            <Col\r\n                                                                xs={12}\r\n                                                                sm={12}\r\n                                                                md={6}\r\n                                                                lg={4}\r\n                                                            >\r\n                                                                <FormGroup>\r\n                                                                    <FormHelperText>\r\n                                                                        Enter a UK postcode to search for address or\r\n                                                                        click on \"Enter address manually\" to enter your\r\n                                                                        address manually.\r\n                                                                    </FormHelperText>\r\n                                                                    <FlexView>\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Enter UK postcode\"\r\n                                                                            name=\"tradingAddressSearchPostcode\"\r\n                                                                            value={createBusinessProfile.tradingAddressSearchPostcode.toUpperCase()}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                            InputProps={{\r\n                                                                                startAdornment:\r\n                                                                                    <InputAdornment\r\n                                                                                        position=\"start\"\r\n                                                                                    >\r\n                                                                                        <IconButton\r\n                                                                                            disableRipple\r\n                                                                                            style={{\r\n                                                                                                width: 48, height: 48\r\n                                                                                            }}\r\n                                                                                            onClick={() => searchAddress(createBusinessProfileActions.SEARCHING_TRADING_ADDRESSES)}\r\n                                                                                        >\r\n                                                                                            <SearchIcon/>\r\n                                                                                        </IconButton>\r\n                                                                                    </InputAdornment>\r\n                                                                            }}\r\n                                                                        />\r\n                                                                    </FlexView>\r\n\r\n                                                                    {\r\n                                                                        !createBusinessProfile.tradingAddressEnterAddressManually\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView\r\n                                                                                column\r\n                                                                            >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 1:*\"\r\n                                                                                    name=\"address1\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address1}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 2:\"\r\n                                                                                    name=\"address2\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address2}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 3:\"\r\n                                                                                    name=\"address3\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address3}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <Row\r\n                                                                                >\r\n                                                                                    <Col\r\n                                                                                        xs={12}\r\n                                                                                        sm={12}\r\n                                                                                        md={6}\r\n                                                                                        lg={6}\r\n                                                                                    >\r\n                                                                                        <TextField\r\n                                                                                            placeholder=\"Town/City:*\"\r\n                                                                                            name=\"townCity\"\r\n                                                                                            value={createBusinessProfile.BusinessProfile.tradingAddress.townCity}\r\n                                                                                            fullWidth\r\n                                                                                            variant=\"outlined\"\r\n                                                                                            required\r\n                                                                                            margin=\"dense\"\r\n                                                                                            onChange={\r\n                                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                            }\r\n                                                                                        />\r\n                                                                                    </Col>\r\n                                                                                    <Col\r\n                                                                                        xs={12}\r\n                                                                                        sm={12}\r\n                                                                                        md={6}\r\n                                                                                        lg={6}\r\n                                                                                    >\r\n                                                                                        <TextField\r\n                                                                                            placeholder=\"Postcode:*\"\r\n                                                                                            name=\"postcode\"\r\n                                                                                            value={createBusinessProfile.BusinessProfile.tradingAddress.postcode.toUpperCase()}\r\n                                                                                            fullWidth\r\n                                                                                            variant=\"outlined\"\r\n                                                                                            required\r\n                                                                                            margin=\"dense\"\r\n                                                                                            onChange={\r\n                                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                            }\r\n                                                                                        />\r\n                                                                                    </Col>\r\n                                                                                </Row>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                }\r\n\r\n                                                {\r\n                                                    createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Row\r\n                                                            noGutters\r\n                                                        >\r\n                                                            <Col\r\n                                                                xs={12}\r\n                                                                sm={12}\r\n                                                                md={6}\r\n                                                                lg={4}\r\n                                                            >\r\n                                                                {\r\n                                                                    createBusinessProfile.tradingAddressRecommendedAddresses\r\n                                                                    && createBusinessProfile.tradingAddressRecommendedAddresses.error\r\n                                                                        ?\r\n                                                                        <Typography\r\n                                                                            variant=\"body2\"\r\n                                                                            color=\"error\"\r\n                                                                            align=\"left\"\r\n                                                                            style={{\r\n                                                                                marginTop: 4,\r\n                                                                                marginBottom: 4\r\n                                                                            }}\r\n                                                                        >\r\n                                                                            Sorry, we can't find your address, please\r\n                                                                            check the\r\n                                                                            details entered and search again,\r\n                                                                            alternatively you\r\n                                                                            can enter your address manually below.\r\n                                                                        </Typography>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n\r\n                                                                {\r\n                                                                    !createBusinessProfile.tradingAddressRecommendedAddresses\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        // error happened while finding addresses\r\n                                                                        createBusinessProfile.tradingAddressRecommendedAddresses.error\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <List\r\n                                                                                className={css(styles.address_list)}\r\n                                                                            >\r\n                                                                                {\r\n                                                                                    createBusinessProfile.tradingAddressRecommendedAddresses.formattedAddresses.map((address, index) => (\r\n                                                                                        <ListItem\r\n                                                                                            button\r\n                                                                                            key={index}\r\n                                                                                            onClick={() => handleRecommendedAddressSelected(createBusinessProfileActions.SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS, index)}\r\n                                                                                        >\r\n                                                                                            <ListItemText\r\n                                                                                                primary={address}\r\n                                                                                            />\r\n                                                                                        </ListItem>\r\n                                                                                    ))\r\n                                                                                }\r\n                                                                            </List>\r\n                                                                }\r\n\r\n                                                                {\r\n                                                                    createBusinessProfile.tradingAddressEnterAddressManually\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        <Typography\r\n                                                                            variant=\"body2\"\r\n                                                                            color=\"primary\"\r\n                                                                            align=\"left\"\r\n                                                                            className={css(styles.enter_address_manually)}\r\n                                                                            onClick={() => toggleEnterAddressManually(createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY)}\r\n                                                                        >\r\n                                                                            Enter address manually.\r\n                                                                        </Typography>\r\n                                                                }\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                }\r\n                                            </Container>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Directors */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <FormLabel>\r\n                                                <b>Company directors</b>\r\n                                            </FormLabel>\r\n\r\n                                            <Row\r\n                                                noGutters\r\n                                            >\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                    <List>\r\n                                                        {\r\n                                                            createBusinessProfile.BusinessProfile.directors.map((director, index) => (\r\n                                                                <ListItem\r\n                                                                    key={index}\r\n                                                                >\r\n                                                                    <ListItemText>\r\n                                                                        {director}\r\n                                                                    </ListItemText>\r\n                                                                    <ListItemSecondaryAction>\r\n                                                                        <IconButton\r\n                                                                            onClick={() => this.props.deleteDirectorTemporarily(index, false)}\r\n                                                                        >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                    </ListItemSecondaryAction>\r\n                                                                </ListItem>\r\n                                                            ))\r\n                                                        }\r\n                                                    </List>\r\n\r\n                                                    {\r\n                                                        createBusinessProfile.BusinessProfile.directors.length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <Divider\r\n                                                                style={{\r\n                                                                    marginTop: 10,\r\n                                                                    marginBottom: 16\r\n                                                                }}\r\n                                                            />\r\n                                                    }\r\n                                                </Col>\r\n\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                </Col>\r\n\r\n                                                <Col\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={6}\r\n                                                    lg={6}\r\n                                                >\r\n                                                    {\r\n                                                        !addNewDirector\r\n                                                            ?\r\n                                                            <Button\r\n                                                                variant=\"outlined\"\r\n                                                                size=\"small\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={this.props.toggleAddNewDirector}\r\n                                                            >\r\n                                                                <AddIcon\r\n                                                                    fontSize=\"small\"\r\n                                                                    style={{\r\n                                                                        marginRight: 4\r\n                                                                    }}\r\n                                                                />\r\n                                                                Add director\r\n                                                            </Button>\r\n                                                            :\r\n                                                            <FlexView\r\n                                                                column\r\n                                                            >\r\n                                                                <TextField\r\n                                                                    placeholder=\"Enter director's name\"\r\n                                                                    name=\"newDirectorText\"\r\n                                                                    value={newDirectorText}\r\n                                                                    fullWidth\r\n                                                                    variant=\"outlined\"\r\n                                                                    onChange={this.handleEditUser(editUserActions.ADDING_NEW_DIRECTOR)}\r\n                                                                    margin=\"dense\"\r\n                                                                />\r\n\r\n                                                                <FlexView\r\n                                                                    marginTop={8}\r\n                                                                    hAlignContent=\"right\"\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"outlined\"\r\n                                                                        size=\"small\"\r\n                                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                                        onClick={this.props.toggleAddNewDirector}\r\n                                                                        style={{\r\n                                                                            marginRight: 8\r\n                                                                        }}\r\n                                                                    >\r\n                                                                        Cancel\r\n                                                                    </Button>\r\n                                                                    <Button\r\n                                                                        variant=\"contained\"\r\n                                                                        size=\"small\"\r\n                                                                        color=\"primary\"\r\n                                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                                        onClick={() => this.props.addNewDirectorTemporarily(false)}\r\n                                                                        disabled={newDirectorText.trim().length === 0}\r\n                                                                    >\r\n                                                                        Add\r\n                                                                    </Button>\r\n                                                                </FlexView>\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Business sector */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <FormLabel>\r\n                                                <b>Business sector</b>\r\n                                            </FormLabel>\r\n                                            <Select\r\n                                                name=\"sector\"\r\n                                                value={createBusinessProfile.BusinessProfile.sector}\r\n                                                input={<OutlinedInput/>}\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            >\r\n                                                <MenuItem\r\n                                                    key={-1}\r\n                                                    value={'None'}\r\n                                                >\r\n                                                    Choose business sector\r\n                                                </MenuItem>\r\n                                                {\r\n                                                    clubAttributes\r\n                                                        ?\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                        :\r\n                                                        null\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Company Website */}\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <FormControl\r\n                                            required\r\n                                        >\r\n                                            <FormLabel>\r\n                                                <b>Company website</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company website\"\r\n                                                name=\"companyWebsite\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyWebsite}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                            {\r\n                                                createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                                                || utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography\r\n                                                        variant=\"body2\"\r\n                                                        color=\"error\"\r\n                                                        align=\"left\"\r\n                                                    >\r\n                                                        Invalid website URL\r\n                                                    </Typography>\r\n                                            }\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{\r\n                                            marginTop: 20,\r\n                                            marginBottom: 20\r\n                                        }}\r\n                                    />\r\n\r\n                                    {/** Upload logo and introduction video */}\r\n                                    <FlexView\r\n                                        marginBottom={20}\r\n                                        width=\"100%\"\r\n                                        hAlignContent=\"center\"\r\n                                    >\r\n                                        <Row\r\n                                            style={{\r\n                                                width: \"100%\"\r\n                                            }}\r\n                                        >\r\n                                            {/** Upload logo */}\r\n                                            <Col\r\n                                                xs={12}\r\n                                                sm={12}\r\n                                                md={6}\r\n                                                lg={6}\r\n                                                style={{\r\n                                                    padding: 15\r\n                                                }}\r\n                                            >\r\n                                                <FlexView\r\n                                                    column\r\n                                                    width=\"100%\"\r\n                                                    hAlignContent=\"center\"\r\n                                                >\r\n                                                    <FlexView\r\n                                                        className={css(styles.upload_files_area_style)}\r\n                                                        onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_FIRST_TIME_MODE)}\r\n                                                    >\r\n                                                        <Typography\r\n                                                            variant=\"body2\"\r\n                                                            align=\"center\"\r\n                                                        >\r\n                                                            Upload company logo (optional)\r\n                                                        </Typography>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.logoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView\r\n                                                                width={270}\r\n                                                                height={270}\r\n                                                                marginTop={28}\r\n                                                            >\r\n                                                                <Image\r\n                                                                    src={window.URL.createObjectURL(createBusinessProfile.logoToBeUploaded)}\r\n                                                                    roundedCircle\r\n                                                                    thumbnail\r\n                                                                    style={{\r\n                                                                        maxHeight: 270,\r\n                                                                        width: \"100%\",\r\n                                                                        objectFit: \"scale-down\"\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n\r\n                                            {/** Upload introduction video */}\r\n                                            <Col\r\n                                                xs={12}\r\n                                                sm={12}\r\n                                                md={6}\r\n                                                lg={6}\r\n                                                style={{\r\n                                                    padding: 15\r\n                                                }}\r\n                                            >\r\n                                                <FlexView\r\n                                                    column\r\n                                                    width=\"100%\"\r\n                                                    hAlignContent=\"center\"\r\n                                                >\r\n                                                    <FlexView\r\n                                                        vAlignContent=\"center\"\r\n                                                    >\r\n                                                        <FlexView\r\n                                                            className={css(styles.upload_files_area_style)}\r\n                                                            onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_FIRST_TIME_MODE)}\r\n                                                        >\r\n                                                            <Typography\r\n                                                                variant=\"body2\"\r\n                                                                align=\"center\"\r\n                                                            >\r\n                                                                Upload introduction video (optional)\r\n                                                            </Typography>\r\n                                                        </FlexView>\r\n\r\n                                                        <OverlayTrigger\r\n                                                            trigger={['hover', 'focus']}\r\n                                                            placement=\"top\"\r\n                                                            flip\r\n                                                            overlay={\r\n                                                                <Tooltip\r\n                                                                    id={`tooltip-top`}\r\n                                                                >\r\n                                                                    Introduction video helps other members understand\r\n                                                                    more about your business.\r\n                                                                </Tooltip>\r\n                                                            }>\r\n                                                            <InfoIcon\r\n                                                                fontSize=\"default\"\r\n                                                                style={{\r\n                                                                    marginLeft: 14,\r\n                                                                    color: colors.gray_600\r\n                                                                }}\r\n                                                            />\r\n                                                        </OverlayTrigger>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.videoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView\r\n                                                                marginTop={28}\r\n                                                            >\r\n                                                                <ReactPlayer\r\n                                                                    url={\r\n                                                                        typeof (createBusinessProfile.videoToBeUploaded) === \"string\"\r\n                                                                            ?\r\n                                                                            createBusinessProfile.videoToBeUploaded\r\n                                                                            :\r\n                                                                            window.URL.createObjectURL(createBusinessProfile.videoToBeUploaded)\r\n                                                                    }\r\n                                                                    controls={true}\r\n                                                                    playing={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView\r\n                                        grow={1}\r\n                                        hAlignContent=\"right\"\r\n                                        marginTop={30}\r\n                                        marginBottom={20}\r\n                                    >\r\n                                        <FlexView\r\n                                            marginRight={20}\r\n                                        >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                color=\"primary\"\r\n                                                onClick={resetCreatingBusinessProfile}\r\n                                            >\r\n                                                Cancel\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                onClick={uploadBusinessProfile}\r\n                                                disabled={this.shouldUploadButtonBeDisabled()}\r\n                                            >\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return (\r\n                    <FlexView\r\n                        column\r\n                    >\r\n                        <Typography\r\n                            variant=\"h6\"\r\n                            color=\"primary\"\r\n                        >\r\n                            Business profile\r\n                        </Typography>\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            color=\"textSecondary\"\r\n                            align=\"center\"\r\n                            style={{\r\n                                marginTop: 15\r\n                            }}\r\n                        >\r\n                            Business profile has not been uploaded.\r\n                        </Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if the user can upload business profile --> only allow upload when all the required information has been provided\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    shouldUploadButtonBeDisabled = () => {\r\n        const {\r\n            originalUser,\r\n            createBusinessProfile,\r\n        } = this.props;\r\n\r\n        // user is an issuer\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registrationNo.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                || (\r\n                    !createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                    && (\r\n                        createBusinessProfile.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                        || createBusinessProfile.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                        || createBusinessProfile.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                    )\r\n                )\r\n                || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                    && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                )\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        // user is an investor\r\n        else if (originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (createBusinessProfile.expandBusinessProfileFilling) {\r\n                if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registrationNo.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                    || (\r\n                        !createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                        && (\r\n                            createBusinessProfile.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                            || createBusinessProfile.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                            || createBusinessProfile.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                        )\r\n                    )\r\n                    || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                    || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                    || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                    || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                        && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                    )\r\n                ) {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n\r\nconst styles = StyleSheet.create({\r\n    upload_files_area_style: {\r\n        padding: 12,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.blue_gray_50,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    address_list: {\r\n        backgroundColor: colors.blue_gray_50,\r\n        borderRadius: 3,\r\n        padding: 4,\r\n        width: \"90%\",\r\n\r\n        position: 'relative',\r\n        overflow: 'auto',\r\n        maxHeight: 300\r\n    },\r\n\r\n    enter_address_manually: {\r\n        marginTop: 6,\r\n        ':hover': {\r\n            color: colors.blue_gray_600,\r\n            cursor: 'pointer',\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const TOGGLE_NOTIFICATIONS = 'TOGGLE_NOTIFICATIONS';\r\nexport const toggleNotifications = event => {\r\n    return (dispatch, getState) => {\r\n        const notificationsAnchorEl = getState().manageNotifications.notificationsAnchorEl;\r\n\r\n        // open notifications\r\n        if (!notificationsAnchorEl) {\r\n            dispatch({\r\n                type: TOGGLE_NOTIFICATIONS,\r\n                notificationsAnchorEl: event.currentTarget\r\n            });\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: TOGGLE_NOTIFICATIONS,\r\n                notificationsAnchorEl: null\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const LOADING_NOTIFICATIONS = 'LOADING_NOTIFICATIONS';\r\nexport const FINISHED_LOADING_NOTIFICATIONS = 'FINISHED_LOADING_NOTIFICATIONS';\r\nexport const loadNotifications = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_NOTIFICATIONS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadNotifications(user.hasOwnProperty('anid') ? user.anid : user.id)\r\n            .then(notifications => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_NOTIFICATIONS,\r\n                    notifications\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_NOTIFICATIONS,\r\n                    notifications: []\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteANotification = notification => {\r\n    return (dispatch, getState) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(notification.id)\r\n            .remove()\r\n            .then(() => {\r\n                dispatch({\r\n                    type: TOGGLE_NOTIFICATIONS,\r\n                    notificationsAnchorEl: null\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteAllNotifications = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .deleteAllNotifications(user.hasOwnProperty('anid') ? user.anid : user.id);\r\n    }\r\n};\r\n\r\n// Listener ------------------------------------------------------------------------------------------------------------\r\n\r\nlet notificationsListener = null;\r\n\r\nexport const NOTIFICATIONS_LIST_CHANGED = 'NOTIFICATIONS_LIST_CHANGED';\r\nexport const startListeningForNotificationsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!notificationsListener) {\r\n\r\n            const user = getState().auth.user;\r\n\r\n            if (!user) {\r\n                return;\r\n            }\r\n\r\n            notificationsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                .orderByChild('userID')\r\n                .equalTo(user.hasOwnProperty('anid') ? user.anid : user.id);\r\n\r\n            notificationsListener\r\n                .on('child_added', snapshot => {\r\n                    let notification = snapshot.val();\r\n\r\n                    let notifications = [...getState().manageNotifications.notifications];\r\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\r\n                    if (notificationIndex === -1) {\r\n                        dispatch({\r\n                            type: NOTIFICATIONS_LIST_CHANGED,\r\n                            notifications: [...notifications, notification]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            notificationsListener\r\n                .on('child_removed', snapshot => {\r\n                    let notification = snapshot.val();\r\n\r\n                    let notifications = [...getState().manageNotifications.notifications];\r\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\r\n\r\n                    if (notificationIndex !== -1) {\r\n                        notifications.splice(notificationIndex, 1);\r\n                        dispatch({\r\n                            type: NOTIFICATIONS_LIST_CHANGED,\r\n                            notifications\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForNotificationsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (notificationsListener) {\r\n            notificationsListener.off('child_added');\r\n            notificationsListener.off('child_removed');\r\n            notificationsListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {\r\n    Fade,\r\n    List,\r\n    ListItem,\r\n    Paper,\r\n    Popper,\r\n    Typography,\r\n    Divider,\r\n    IconButton,\r\n    Button\r\n} from '@material-ui/core';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\r\n        notifications: state.manageNotifications.notifications,\r\n        loadingNotifications: state.manageNotifications.loadingNotifications,\r\n        notificationsLoaded: state.manageNotifications.notificationsLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\r\n        loadNotifications: () => dispatch(notificationsActions.loadNotifications()),\r\n        deleteANotification: (notification) => dispatch(notificationsActions.deleteANotification(notification)),\r\n        deleteAllNotifications: () => dispatch(notificationsActions.deleteAllNotifications()),\r\n\r\n        startListeningForNotificationsChanged: () => dispatch(notificationsActions.startListeningForNotificationsChanged()),\r\n        stopListeningForNotificationsChanged: () => dispatch(notificationsActions.stopListeningForNotificationsChanged())\r\n    }\r\n};\r\n\r\nclass NotificationsBox extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadNotifications\r\n        } = this.props;\r\n\r\n        loadNotifications();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            loadingNotifications,\r\n            notificationsLoaded,\r\n\r\n            startListeningForNotificationsChanged\r\n        } = this.props;\r\n\r\n        // notifications have been loaded\r\n        if (!loadingNotifications && notificationsLoaded) {\r\n            startListeningForNotificationsChanged();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForNotificationsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForNotificationsChanged();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            notificationsAnchorEl,\r\n            notifications,\r\n            notificationsLoaded,\r\n\r\n            toggleNotifications,\r\n            deleteANotification,\r\n            deleteAllNotifications\r\n\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Popper\r\n                open={Boolean(notificationsAnchorEl)}\r\n                anchorEl={notificationsAnchorEl}\r\n                placement=\"bottom-start\"\r\n                disablePortal={false}\r\n                transition\r\n                modifiers={{\r\n                    flip: {\r\n                        enabled: true,\r\n                    },\r\n                    preventOverflow: {\r\n                        enabled: true,\r\n                        boundariesElement: 'scrollParent'\r\n                    }\r\n                }}\r\n                style={{\r\n                    // this zIndex is to ensure the notification box is on top of all other UI elements\r\n                    zIndex: 100\r\n                }}\r\n            >\r\n                {({TransitionProps}) => (\r\n                    <Fade\r\n                        {...TransitionProps}\r\n                        timeout={350}\r\n                    >\r\n                        <Paper\r\n                            elevation={4}\r\n                            square\r\n                        >\r\n                            <Container\r\n                                fluid\r\n                                style={{\r\n                                    padding: 0,\r\n                                    maxWidth: 600\r\n                                }}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        style={{\r\n                                            paddingLeft: 15,\r\n                                            paddingRight: 15,\r\n                                            paddingTop: 6,\r\n                                            paddingBottom: 6,\r\n                                            backgroundColor: colors.kick_starter_background_color_1\r\n                                        }}\r\n                                    >\r\n                                        <Row\r\n                                            noGutters\r\n                                        >\r\n                                            <Col\r\n                                                xs={10}\r\n                                                sm={10}\r\n                                                md={10}\r\n                                                lg={10}\r\n                                            >\r\n                                                <FlexView\r\n                                                    height=\"100%\"\r\n                                                    vAlignContent=\"center\"\r\n                                                >\r\n                                                    <Typography\r\n                                                        variant=\"body1\"\r\n                                                    >\r\n                                                        Notifications\r\n                                                    </Typography>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                            <Col\r\n                                                xs={2}\r\n                                                sm={2}\r\n                                                md={2}\r\n                                                lg={2}\r\n                                            >\r\n                                                <FlexView\r\n                                                    hAlignContent=\"right\"\r\n                                                >\r\n                                                    <IconButton\r\n                                                        style={{\r\n                                                            width: 44,\r\n                                                            height: 44\r\n                                                        }}\r\n                                                        onClick={toggleNotifications}\r\n                                                    >\r\n                                                        <CloseIcon\r\n                                                            fontSize=\"small\"\r\n                                                        />\r\n                                                    </IconButton>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Col>\r\n\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                    >\r\n                                        <Divider/>\r\n                                    </Col>\r\n\r\n                                    {\r\n                                        notifications.length === 0\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col\r\n                                                xs={12}\r\n                                                sm={12}\r\n                                                md={12}\r\n                                                lg={12}\r\n                                                style={{\r\n                                                    paddingTop: 5,\r\n                                                    paddingBottom: 5,\r\n                                                    paddingRight: 18\r\n                                                }}\r\n                                            >\r\n                                                <FlexView\r\n                                                    hAlignContent=\"right\"\r\n                                                >\r\n                                                    <Button\r\n                                                        variant=\"text\"\r\n                                                        className={css(sharedStyles.no_text_transform, styles.clear_all_text)}\r\n                                                        size=\"medium\"\r\n                                                        onClick={deleteAllNotifications}\r\n                                                    >\r\n                                                        <ClearAllIcon\r\n                                                            style={{\r\n                                                                marginRight: 6\r\n                                                            }}\r\n                                                        />\r\n                                                        Clear all\r\n                                                    </Button>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                    }\r\n\r\n                                    {\r\n                                        notifications.length === 0\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col\r\n                                                xs={12}\r\n                                                sm={12}\r\n                                                md={12}\r\n                                                lg={12}\r\n                                            >\r\n                                                <Divider/>\r\n                                            </Col>\r\n                                    }\r\n\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        style={{\r\n                                            minHeight: notifications.length === 0 ? 300 : \"None\",\r\n                                            maxHeight: 500,\r\n                                            overflowY: \"auto\"\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !notificationsLoaded\r\n                                                ?\r\n                                                <FlexView\r\n                                                    column\r\n                                                    height=\"100%\"\r\n                                                    vAlignContent=\"center\"\r\n                                                    hAlignContent=\"center\"\r\n                                                >\r\n                                                    <HashLoader\r\n                                                        color={\r\n                                                            !groupProperties\r\n                                                                ?\r\n                                                                colors.primaryColor\r\n                                                                :\r\n                                                                groupProperties.settings.primaryColor\r\n                                                        }\r\n                                                    />\r\n                                                </FlexView>\r\n                                                :\r\n                                                notifications.length === 0\r\n                                                    ?\r\n                                                    <FlexView\r\n                                                        column\r\n                                                        height=\"100%\"\r\n                                                        vAlignContent=\"center\"\r\n                                                        hAlignContent=\"center\"\r\n                                                    >\r\n                                                        <NotificationsIcon\r\n                                                            className={css(styles.notifications_placeholder_icon)}\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                        >\r\n                                                            Your notifications live here\r\n                                                        </Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <List\r\n                                                        component=\"ul\"\r\n                                                        style={{\r\n                                                            padding: 0\r\n                                                        }}\r\n                                                    >\r\n                                                        {\r\n                                                            notifications\r\n                                                                .sort((notification1, notification2) => {\r\n                                                                    return (notification2.date - notification1.date)\r\n                                                                })\r\n                                                                .map(notification => (\r\n                                                                    <ListItem\r\n                                                                        component=\"li\"\r\n                                                                        key={notification.id}\r\n                                                                        divider\r\n                                                                        className={css(styles.notification_item)}\r\n                                                                    >\r\n                                                                        <Row\r\n                                                                            noGutters\r\n                                                                            style={{\r\n                                                                                width: \"100%\",\r\n                                                                                paddingTop: 13,\r\n                                                                                paddingBottom: 13\r\n                                                                            }}\r\n                                                                        >\r\n                                                                            <Col\r\n                                                                                xs={10}\r\n                                                                                sm={10}\r\n                                                                                md={11}\r\n                                                                                lg={11}\r\n                                                                                style={{\r\n                                                                                    paddingRight: 10\r\n                                                                                }}\r\n                                                                            >\r\n                                                                                <NavLink\r\n                                                                                    to={\r\n                                                                                        groupUserName\r\n                                                                                            ?\r\n                                                                                            `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${notification.action}`\r\n                                                                                            :\r\n                                                                                            notification.action\r\n                                                                                    }\r\n                                                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                                                    onClick={() => deleteANotification(notification)}\r\n                                                                                >\r\n                                                                                    <FlexView\r\n                                                                                        vAlignContent=\"center\"\r\n                                                                                    >\r\n                                                                                        <NotificationsIcon\r\n                                                                                            className={css(styles.notification_item_icon)}\r\n                                                                                        />\r\n                                                                                        <FlexView\r\n                                                                                            column\r\n                                                                                            marginLeft={14}\r\n                                                                                        >\r\n                                                                                            <Typography\r\n                                                                                                variant=\"body1\"\r\n                                                                                                className={css(styles.black_text)}\r\n                                                                                            >\r\n                                                                                                {notification.title}\r\n                                                                                            </Typography>\r\n                                                                                            <Typography\r\n                                                                                                variant=\"body2\"\r\n                                                                                                color=\"textSecondary\"\r\n                                                                                                style={{\r\n                                                                                                    marginTop: 4\r\n                                                                                                }}\r\n                                                                                            >\r\n                                                                                                {notification.message}\r\n                                                                                            </Typography>\r\n                                                                                            <Typography\r\n                                                                                                variant=\"body2\"\r\n                                                                                                color=\"textSecondary\"\r\n                                                                                                style={{marginTop: 10}}\r\n                                                                                            >\r\n                                                                                                <u>Sent: {utils.dateTimeInReadableFormat(notification.date)}</u>\r\n                                                                                            </Typography>\r\n                                                                                        </FlexView>\r\n                                                                                    </FlexView>\r\n                                                                                </NavLink>\r\n                                                                            </Col>\r\n                                                                            <Col\r\n                                                                                xs={2}\r\n                                                                                sm={2}\r\n                                                                                md={1}\r\n                                                                                lg={1}\r\n                                                                                style={{\r\n                                                                                    paddingLeft: 8,\r\n                                                                                    paddingRight: 8\r\n                                                                                }}\r\n                                                                            >\r\n                                                                                <FlexView\r\n                                                                                    width=\"100%\"\r\n                                                                                    height=\"100%\"\r\n                                                                                    vAlignContent=\"center\"\r\n                                                                                    hAlignContent=\"center\"\r\n                                                                                >\r\n                                                                                    <IconButton\r\n                                                                                        onClick={() => deleteANotification(notification)}\r\n                                                                                    >\r\n                                                                                        <DeleteIcon\r\n                                                                                            fontSize=\"small\"\r\n                                                                                        />\r\n                                                                                    </IconButton>\r\n                                                                                </FlexView>\r\n                                                                            </Col>\r\n                                                                        </Row>\r\n                                                                    </ListItem>\r\n                                                                ))\r\n                                                        }\r\n                                                    </List>\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </Paper>\r\n                    </Fade>\r\n                )}\r\n            </Popper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NotificationsBox);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    },\r\n\r\n    notifications_placeholder_icon: {\r\n        width: 70,\r\n        height: \"auto\",\r\n        color: colors.gray_300,\r\n        marginBottom: 10\r\n    },\r\n\r\n    notification_item_icon: {\r\n        width: 36,\r\n        height: \"auto\",\r\n        color: colors.gray_300\r\n    },\r\n\r\n    clear_all_text: {\r\n        color: colors.blue_gray_600\r\n    },\r\n\r\n    notification_item: {\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_200\r\n        }\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\r\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport React from \"react\";\r\n\r\nexport enum ExploreGroupsEvents {\r\n    FetchingGroups = \"ExploreGroupsEvents.FetchingGroups\",\r\n    CompleteFetchingGroups = \"ExploreGroupsEvents.CompleteFetchingGroups\",\r\n    FilterChanged = \"ExploreGroupsEvents.FilterChanged\",\r\n    FilterGroupsByName = \"ExploreGroupsEvents.FilterGroupsByName\",\r\n    CancelFilterGroupsByName = \"ExploreGroupsEvents.CancelFilterGroupsByName\",\r\n    FilterGroupsByGroupFilter = \"ExploreGroupsEvents.FilterGroupsByGroupFilter\",\r\n    PaginationChanged = \"ExploreGroupsEvents.PaginationChanged\",\r\n    SendingAccessRequest = \"ExploreGroupsEvents.SendingAccessRequest\",\r\n    CompleteSendingAccessRequest = \"ExploreGroupsEvents.CompleteSendingAccessRequest\",\r\n    RemovingAccessRequest = \"ExploreGroupsEvents.RemovingAccessRequest\",\r\n    CompleteRemovingAccessRequest = \"ExploreGroupsEvents.CompleteRemovingAccessRequest\"\r\n}\r\n\r\nexport interface ExploreGroupsAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteFetchingGroupsAction extends ExploreGroupsAction {\r\n    groups: GroupProperties[];\r\n    accessRequestInstances?: AccessRequestInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterChangedAction extends ExploreGroupsAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface FilterGroupsByGroupFilterAction extends ExploreGroupsAction {\r\n    groupsFiltered: GroupProperties[];\r\n}\r\n\r\nexport interface PaginationChangedAction extends ExploreGroupsAction {\r\n    page: number;\r\n}\r\n\r\nexport interface SendingAccessRequestAction extends ExploreGroupsAction {\r\n    groupID: string;\r\n}\r\n\r\nexport interface CompleteSendingAccessRequestAction extends ExploreGroupsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport interface RemovingAccessRequestAction extends ExploreGroupsAction {\r\n    groupID: string;\r\n}\r\n\r\nexport interface CompleteRemovingAccessRequestAction extends ExploreGroupsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport const fetchGroups: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            accessRequestsInstances,\r\n            nameFilter\r\n        } = getState().ExploreGroupsLocalState;\r\n\r\n        dispatch({\r\n            type: ExploreGroupsEvents.FetchingGroups\r\n        });\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        const completeAction: CompleteFetchingGroupsAction = {\r\n            type: ExploreGroupsEvents.CompleteFetchingGroups,\r\n            groups: []\r\n        };\r\n\r\n        if (!currentUser) {\r\n            completeAction.error = \"Unauthenticated user.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const groupsResponse = await new GroupRepository().fetchGroups(\r\n                nameFilter.trim().length === 0 ? undefined : {name: nameFilter}\r\n            );\r\n            completeAction.groups = groupsResponse.data;\r\n\r\n            const admin: Admin | null = isAdmin(currentUser);\r\n            if (!admin || (admin && !admin.superAdmin)) {\r\n                // user is an issuer, investor, or group admin\r\n                // and access requests have not been fetched\r\n                if (!accessRequestsInstances) {\r\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\r\n                        user: currentUser.id,\r\n                        orderBy: \"user\"\r\n                    });\r\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\r\n                }\r\n            }\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: any) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: ExploreGroupsEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n\r\n        dispatch(action);\r\n\r\n        if (name === \"groupFilter\") {\r\n            dispatch(filterGroupsByGroupFilter());\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterGroupsByName: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreGroupsEvents.FilterGroupsByName\r\n        });\r\n        return dispatch(fetchGroups());\r\n    }\r\n}\r\n\r\nexport const cancelFilteringGroupsByName: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreGroupsEvents.CancelFilterGroupsByName\r\n        });\r\n        return dispatch(fetchGroups());\r\n    }\r\n}\r\n\r\nconst filterGroupsByGroupFilter: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            groupFilter,\r\n            accessRequestsInstances,\r\n            groups\r\n        } = getState().ExploreGroupsLocalState;\r\n\r\n        const AuthenticationState = getState().AuthenticationState;\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const groupsFiltered: GroupProperties[] = [];\r\n\r\n        groups.map(group => {\r\n            let satisfiedFilter = false;\r\n            switch (groupFilter) {\r\n                case \"all\":\r\n                    const admin: Admin | null = isAdmin(currentUser);\r\n                    if (admin && admin.superAdmin) {\r\n                        satisfiedFilter = true;\r\n                    } else {\r\n                        satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\r\n                            groupOfMembership => groupOfMembership.group.anid === group.anid) === -1\r\n                            && accessRequestsInstances !== undefined\r\n                            && accessRequestsInstances.findIndex(\r\n                                accessRequestInstance => accessRequestInstance.group.anid === group.anid) === -1;\r\n                    }\r\n                    break;\r\n                case \"groupsOfMembership\":\r\n                    satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\r\n                        groupOfMembership => groupOfMembership.group.anid === group.anid) !== -1;\r\n                    break;\r\n                case \"groupsOfPendingRequest\":\r\n                    satisfiedFilter = accessRequestsInstances !== undefined\r\n                        && accessRequestsInstances.findIndex(\r\n                            accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if (satisfiedFilter) {\r\n                groupsFiltered.push(group);\r\n            }\r\n        });\r\n\r\n        const action: FilterGroupsByGroupFilterAction = {\r\n            type: ExploreGroupsEvents.FilterGroupsByGroupFilter,\r\n            groupsFiltered: groupsFiltered\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: PaginationChangedAction = {\r\n            type: ExploreGroupsEvents.PaginationChanged,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const sendAccessRequest: ActionCreator<any> = (groupID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const sendingAction: SendingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.SendingAccessRequest,\r\n            groupID\r\n        };\r\n        dispatch(sendingAction);\r\n\r\n        const completeAction: CompleteSendingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.CompleteSendingAccessRequest\r\n        };\r\n\r\n        try {\r\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, groupID);\r\n            const accessRequestInstance: AccessRequestInstance = response.data;\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (currentAccessRequestInstances !== undefined) {\r\n                completeAction.updatedAccessRequestInstances = [\r\n                    ...currentAccessRequestInstances,\r\n                    accessRequestInstance\r\n                ];\r\n            } else {\r\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\r\n            }\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeAccessRequest: ActionCreator<any> = (groupID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const removingAction: RemovingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.RemovingAccessRequest,\r\n            groupID\r\n        };\r\n        dispatch(removingAction);\r\n\r\n        const completeAction: CompleteRemovingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.CompleteRemovingAccessRequest\r\n        };\r\n\r\n        try {\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (!currentAccessRequestInstances) {\r\n                return dispatch(completeAction);\r\n            }\r\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\r\n                accessRequestInstance => accessRequestInstance.group.anid === groupID && accessRequestInstance.user.id === currentUser.id);\r\n            if (accessRequestIndex === -1) {\r\n                return dispatch(completeAction);\r\n            }\r\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\r\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\r\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\r\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\r\n\r\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import Error from \"../../models/error\";\r\nimport {\r\n    CompleteFetchingOffersAction,\r\n    ExploreOffersAction,\r\n    ExploreOffersEvents,\r\n    FilterChangedAction,\r\n    PaginationChangedAction\r\n} from \"./ExploreOffersActions\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\n\r\nexport const maxOffersPerPage: number = 12;\r\n\r\nexport interface ExploreOffersState {\r\n    offerInstances: ProjectInstance[];\r\n    fetchingOffers: boolean;\r\n    offersFetched: boolean;\r\n\r\n    searchFilter: string;\r\n    visibilityFilter: number | \"all\";\r\n    sectorFilter: string | \"all\";\r\n    phaseFilter: string | number | \"all\";\r\n\r\n    currentPage: number;\r\n\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ExploreOffersState = {\r\n    offerInstances: [],\r\n    fetchingOffers: false,\r\n    offersFetched: false,\r\n\r\n    searchFilter: \"\",\r\n    visibilityFilter: \"all\",\r\n    sectorFilter: \"all\",\r\n    phaseFilter: FetchProjectsPhaseOptions.LivePitch,\r\n\r\n    currentPage: 1\r\n}\r\n\r\nexport const hasNotFetchedOffers = (state: ExploreOffersState) => {\r\n    return !state.fetchingOffers && !state.offersFetched;\r\n}\r\n\r\nexport const isFetchingOffers = (state: ExploreOffersState) => {\r\n    return state.fetchingOffers;\r\n}\r\n\r\nexport const successfullyFetchedOffers = (state: ExploreOffersState) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const hasOffersForCurrentFilters = (state: ExploreOffersState) => {\r\n    return successfullyFetchedOffers(state) && state.offerInstances.length > 0;\r\n}\r\n\r\nexport const isSearchFilterActive = (state: ExploreOffersState) => {\r\n    return state.searchFilter.trim().length > 0;\r\n}\r\n\r\nexport const calculatePaginationPages = (state: ExploreOffersState) => {\r\n    if (state.offerInstances.length <= maxOffersPerPage) {\r\n        return 1;\r\n    }\r\n    if (state.offerInstances.length % maxOffersPerPage === 0) {\r\n        return (state.offerInstances.length / maxOffersPerPage) | 0;\r\n    }\r\n    return ((state.offerInstances.length / maxOffersPerPage) | 0) + 1;\r\n}\r\n\r\nexport const calculatePaginationIndices = (state: ExploreOffersState) => {\r\n    let startIndex, endIndex;\r\n    startIndex = (state.currentPage - 1) * maxOffersPerPage;\r\n    endIndex = startIndex + maxOffersPerPage - 1;\r\n    if (endIndex > state.offerInstances.length - 1) {\r\n        endIndex = state.offerInstances.length - 1;\r\n    }\r\n    return {\r\n        startIndex,\r\n        endIndex\r\n    };\r\n}\r\n\r\nconst exploreOffersReducer = (state: ExploreOffersState = initialState, action: ExploreOffersAction) => {\r\n    switch (action.type) {\r\n        case ExploreOffersEvents.FetchingOffers:\r\n            return {\r\n                ...state,\r\n                offerInstances: [],\r\n                fetchingOffers: true,\r\n                offersFetched: false,\r\n                error: undefined\r\n            }\r\n        case ExploreOffersEvents.CompleteFetchingOffers:\r\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\r\n            return {\r\n                ...state,\r\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\r\n                fetchingOffers: false,\r\n                offersFetched: true,\r\n                currentPage: 1,\r\n                error: completeFetchingOffersAction.error !== undefined\r\n                    ? {detail: completeFetchingOffersAction.error} : state.error\r\n            }\r\n        case ExploreOffersEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value\r\n            }\r\n        case ExploreOffersEvents.ClearSearchFilter:\r\n            return {\r\n                ...state,\r\n                searchFilter: \"\"\r\n            }\r\n        case ExploreOffersEvents.PaginationChanged:\r\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\r\n            return {\r\n                ...state,\r\n                currentPage: paginationChangedAction.page\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default exploreOffersReducer;","/**\r\n * Group properties interface\r\n */\r\nexport default interface GroupProperties {\r\n    anid: string;\r\n    dateAdded: number;\r\n    description: string;\r\n    displayName: string;\r\n    displayNameLower: string;\r\n    groupUserName: string;\r\n    isInvestWest: boolean;\r\n    status: number;\r\n    website?: string;\r\n    logoWithText?: GroupLogo[];\r\n    plainLogo: GroupLogo[];\r\n    settings: GroupSettings;\r\n}\r\n\r\n/**\r\n * This should always be returned when a group is queried by an unauthenticated user\r\n */\r\nexport interface PublicGroupProperties {\r\n    description: string;\r\n    displayName: string;\r\n    groupUserName: string;\r\n}\r\n\r\n/**\r\n * Group settings interface\r\n */\r\nexport interface GroupSettings {\r\n    primaryColor: string;\r\n    secondaryColor: string;\r\n    projectVisibility: number;\r\n    makeInvestorsContactDetailsVisibleToIssuers: boolean;\r\n    PledgeFAQs?: GroupPledgeFAQ[];\r\n}\r\n\r\n/**\r\n * Group logo interface\r\n */\r\nexport interface GroupLogo {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Group pledge faq interface\r\n */\r\nexport interface GroupPledgeFAQ {\r\n    id: string;\r\n    question: string;\r\n    answer: string;\r\n}\r\n\r\nexport const getGroupLogo = (group: GroupProperties | null) => {\r\n    if (!group) {\r\n        return null;\r\n    }\r\n    if (group.plainLogo.length === 0) {\r\n        return null;\r\n    }\r\n    return group.plainLogo[group.plainLogo.findIndex(logo => logo.removed === undefined)].url;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    getPitchCover,\r\n    isImagePitchCover,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectLive,\r\n    isProjectPrivate,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    PitchCover,\r\n    ProjectInstance,\r\n    shouldHideProjectInformationFromUser\r\n} from \"../../models/project\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport {Box, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from \"react-bootstrap\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport User from \"../../models/user\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\n\r\nconst CoverMaxHeight = 180;\r\n\r\ninterface OfferItemProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    offerInstance: ProjectInstance;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass OfferItem extends Component<OfferItemProps, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            offerInstance\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const pitchCover: PitchCover | null = getPitchCover(offerInstance.projectDetail);\r\n\r\n        return <CustomLink\r\n            url={Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)}\r\n            color=\"none\"\r\n            activeColor=\"none\"\r\n            activeUnderline={false}\r\n            component=\"nav-link\"\r\n            childComponent={\r\n                <Box\r\n                    border={`1px solid ${colors.grey[\"300\"]}`}\r\n                >\r\n                    <Container\r\n                        fluid\r\n                        style={{\r\n                            padding: 0\r\n                        }}\r\n                    >\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Box\r\n                                    height={`${CoverMaxHeight}px`}\r\n                                    width=\"100%\"\r\n                                    bgcolor={appColors.dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100}\r\n                                >\r\n                                    {\r\n                                        shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                            ? <Box\r\n                                                display=\"flex\"\r\n                                                width=\"100%\"\r\n                                                height={CoverMaxHeight}\r\n                                                justifyContent=\"center\"\r\n                                            >\r\n                                                <Image\r\n                                                    src={getGroupLogo(offerInstance.group) ?? \"\"}\r\n                                                    width=\"auto\"\r\n                                                    height={CoverMaxHeight}\r\n                                                    style={{\r\n                                                        padding: 20,\r\n                                                        objectFit: \"scale-down\"\r\n                                                    }}\r\n                                                />\r\n                                            </Box>\r\n                                            : !pitchCover\r\n                                            ? null\r\n                                            : isImagePitchCover(pitchCover)\r\n                                                ? <Image\r\n                                                    src={pitchCover.url}\r\n                                                    width=\"100%\"\r\n                                                    height={CoverMaxHeight}\r\n                                                    style={{\r\n                                                        objectFit: \"contain\"\r\n                                                    }}\r\n                                                />\r\n                                                : <ReactPlayer\r\n                                                    url={pitchCover.url}\r\n                                                    light={false}\r\n                                                    width=\"100%\"\r\n                                                    height={CoverMaxHeight}\r\n                                                    playing={false}\r\n                                                    controls={false}\r\n                                                />\r\n                                    }\r\n\r\n                                    {/** Group logo to be displayed at the top-right corner */}\r\n                                    <Image\r\n                                        src={getGroupLogo(offerInstance.group) ?? \"\"}\r\n                                        roundedCircle\r\n                                        height={46}\r\n                                        width={46}\r\n                                        style={{\r\n                                            position: \"absolute\",\r\n                                            right: 0,\r\n                                            top: 0,\r\n                                            zIndex: 1,\r\n                                            padding: \"5px\",\r\n                                            marginTop: \"5px\",\r\n                                            marginRight: \"5px\",\r\n                                            backgroundColor: colors.grey[\"300\"],\r\n                                            objectFit: \"contain\"\r\n                                        }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Divider/>\r\n\r\n                                <Box\r\n                                    padding=\"14px\"\r\n                                >\r\n                                    {/** Project basic information */}\r\n                                    <Box>\r\n                                        {/** Project title */}\r\n                                        <Box\r\n                                            marginY=\"6px\"\r\n                                        >\r\n                                            <Typography\r\n                                                noWrap\r\n                                                variant=\"h6\"\r\n                                                align=\"left\"\r\n                                            >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? \"Members only offer\"\r\n                                                        : offerInstance.projectDetail.projectName\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n\r\n                                        {/** Sector / Description */}\r\n                                        <Box\r\n                                            color={colors.grey[\"700\"]}\r\n                                        >\r\n                                            <Typography\r\n                                                noWrap\r\n                                                variant=\"body2\"\r\n                                                align=\"left\"\r\n                                            >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `in ${offerInstance.projectDetail.sector} sector`\r\n                                                        : offerInstance.projectDetail.description\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n\r\n                                        {/** By issuer */}\r\n                                        <Box\r\n                                            color=\"black\"\r\n                                            marginTop=\"8px\"\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"body2\"\r\n                                                noWrap\r\n                                            >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : isProjectCreatedByGroupAdmin(offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : `by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n                                    {/** Divider */}\r\n                                    <Box\r\n                                        bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        height=\"3px\"\r\n                                        marginTop=\"30px\"\r\n                                        marginBottom=\"15px\"\r\n                                    />\r\n\r\n                                    {/** Project phase information */}\r\n                                    <Box>\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            color=\"primary\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            {\r\n                                                offerInstance.projectDetail.Pitch.fundRequired\r\n                                                    ? `£${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`\r\n                                                    : \"\"\r\n                                            }\r\n                                        </Typography>\r\n\r\n                                        <Box\r\n                                            marginTop=\"20px\"\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"body2\"\r\n                                                align=\"left\"\r\n                                                color=\"textSecondary\"\r\n                                            >\r\n                                                {\r\n                                                    !isProjectLive(offerInstance.projectDetail)\r\n                                                        ? \"Offer expired\"\r\n                                                        : `${utils.dateDiff(offerInstance.projectDetail.Pitch.expiredDate)} days to go`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n                                    {/** Project visibility information */}\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        marginTop=\"15px\"\r\n                                        justifyContent=\"flex-end\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                    >\r\n                                        <OverlayTrigger\r\n                                            trigger={[\"hover\", \"focus\"]}\r\n                                            placement=\"bottom\"\r\n                                            flip\r\n                                            overlay={\r\n                                                <Tooltip\r\n                                                    id=\"tooltip-bottom\"\r\n                                                >\r\n                                                    {\r\n                                                        isProjectPublic(offerInstance.projectDetail)\r\n                                                            ? \"This is a public offer.\"\r\n                                                            : isProjectRestricted(offerInstance.projectDetail)\r\n                                                            ? \"This is a restricted offer.\"\r\n                                                            : isProjectPrivate(offerInstance.projectDetail)\r\n                                                                ? \"This is a private offer.\"\r\n                                                                : null\r\n                                                    }\r\n                                                </Tooltip>\r\n                                            }\r\n                                        >\r\n                                            {\r\n                                                isProjectPublic(offerInstance.projectDetail)\r\n                                                    ? <PublicIcon/>\r\n                                                    : isProjectRestricted(offerInstance.projectDetail)\r\n                                                    ? <RestrictedIcon/>\r\n                                                    : isProjectPrivate(offerInstance.projectDetail)\r\n                                                        ? <PrivateIcon/>\r\n                                                        : <Box/>\r\n                                            }\r\n                                        </OverlayTrigger>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Box>\r\n            }\r\n        />;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OfferItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Box, colors, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\ninterface RiskWarningProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nclass RiskWarning extends Component<RiskWarningProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Invest West\"\r\n            );\r\n\r\n        let splits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        const urlText = splits[1];\r\n\r\n        return <Box\r\n            border={`1px solid ${colors.grey[\"600\"]}`}\r\n            borderRadius=\"24px\"\r\n            padding=\"24px\"\r\n            bgcolor={colors.grey[\"100\"]}\r\n        >\r\n            <Typography\r\n                variant=\"body1\"\r\n                align=\"left\"\r\n            >\r\n                <u>Risk warning</u>\r\n            </Typography>\r\n\r\n            <Box\r\n                marginTop=\"18px\"\r\n                whiteSpace=\"pre-line\"\r\n            >\r\n                <Typography\r\n                    variant=\"body1\"\r\n                    align=\"justify\"\r\n                >\r\n                    {splits[0]}\r\n                    <CustomLink\r\n                        url={Routes.nonGroupRiskWarning}\r\n                        target=\"_blank\"\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                        activeColor=\"none\"\r\n                        activeUnderline={true}\r\n                        component=\"nav-link\"\r\n                        childComponent={\r\n                            urlText\r\n                        }\r\n                    />\r\n                    {splits[2]}\r\n                </Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarning);","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {\r\n    Box,\r\n    Button, colors,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreOffersState,\r\n    hasNotFetchedOffers,\r\n    hasOffersForCurrentFilters,\r\n    isFetchingOffers,\r\n    isSearchFilterActive,\r\n    successfullyFetchedOffers\r\n} from \"./ExploreOffersReducer\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\r\nimport {clearSearchFilter, fetchOffers, filterChanged, onSearchEnter, paginationChanged} from \"./ExploreOffersActions\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport OfferItem from \"./OfferItem\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\nimport RiskWarning from \"../risk-warning/RiskWarning\";\r\nimport {isIssuer} from \"../../models/user\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {FetchProjectsOrderByOptions, FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {Close, Search} from \"@material-ui/icons\";\r\n\r\ninterface ExploreOffersProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    onSearchEnter: (event: FormEvent) => any;\r\n    fetchOffers: (orderBy?: string) => any;\r\n    filterChanged: (event: any) => any;\r\n    clearSearchFilter: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreOffersLocalState: state.ExploreOffersLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onSearchEnter: (event: FormEvent) => dispatch(onSearchEnter(event)),\r\n        fetchOffers: (orderBy?: string) => dispatch(fetchOffers(orderBy)),\r\n        filterChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(filterChanged(event)),\r\n        clearSearchFilter: () => dispatch(clearSearchFilter()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreOffers extends Component<ExploreOffersProps, {}> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedOffers(this.props.ExploreOffersLocalState)) {\r\n            this.props.fetchOffers(FetchProjectsOrderByOptions.Phase);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreOffersLocalState,\r\n            fetchOffers,\r\n            filterChanged,\r\n            clearSearchFilter,\r\n            paginationChanged,\r\n            onSearchEnter\r\n        } = this.props;\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreOffersLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreOffersLocalState);\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row>\r\n                {/** Visibility filter */}\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={6}\r\n                    lg={4}\r\n                >\r\n                    <Box\r\n                        paddingY=\"6px\"\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                        >\r\n                            Visibility:\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"8px\"\r\n                        />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"visibilityFilter\"\r\n                                value={ExploreOffersLocalState.visibilityFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem\r\n                                    key=\"all\"\r\n                                    value=\"all\"\r\n                                >\r\n                                    All offers\r\n                                </MenuItem>\r\n\r\n                                {\r\n                                    !AuthenticationState.currentUser\r\n                                        ? null\r\n                                        : AuthenticationState.groupsOfMembership.length === 0\r\n                                        ? null\r\n                                        : AuthenticationState.groupsOfMembership\r\n                                            .map(groupOfMembership => (\r\n                                                <MenuItem\r\n                                                    key={groupOfMembership.group.anid}\r\n                                                    value={groupOfMembership.group.anid}\r\n                                                >\r\n                                                    Offers from {groupOfMembership.group.displayName}\r\n                                                </MenuItem>\r\n                                            ))\r\n                                }\r\n\r\n                                <MenuItem\r\n                                    key={PROJECT_VISIBILITY_PUBLIC}\r\n                                    value={PROJECT_VISIBILITY_PUBLIC}\r\n                                >\r\n                                    Public offers\r\n                                </MenuItem>\r\n\r\n                                <MenuItem\r\n                                    key={PROJECT_VISIBILITY_RESTRICTED}\r\n                                    value={PROJECT_VISIBILITY_RESTRICTED}\r\n                                >\r\n                                    Restricted offers\r\n                                </MenuItem>\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Sector filter */}\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={6}\r\n                    lg={4}\r\n                >\r\n                    <Box\r\n                        paddingY=\"6px\"\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                        >\r\n                            Sector:\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"8px\"\r\n                        />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"sectorFilter\"\r\n                                value={ExploreOffersLocalState.sectorFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem\r\n                                    key=\"all\"\r\n                                    value=\"all\"\r\n                                >\r\n                                    All sectors\r\n                                </MenuItem>\r\n\r\n                                {\r\n                                    !ManageSystemAttributesState.systemAttributes\r\n                                        ? null\r\n                                        : ManageSystemAttributesState.systemAttributes.Sectors.map((sector, index) => (\r\n                                            <MenuItem\r\n                                                key={index}\r\n                                                value={sector}\r\n                                            >\r\n                                                {sector}\r\n                                            </MenuItem>\r\n                                        ))\r\n                                }\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Phase filter */}\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={6}\r\n                    lg={4}\r\n                >\r\n                    <Box\r\n                        paddingY=\"6px\"\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                        >\r\n                            Status:\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"8px\"\r\n                        />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"phaseFilter\"\r\n                                value={ExploreOffersLocalState.phaseFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem\r\n                                    key={FetchProjectsPhaseOptions.LivePitch}\r\n                                    value={FetchProjectsPhaseOptions.LivePitch}\r\n                                >\r\n                                    Live\r\n                                </MenuItem>\r\n\r\n                                <MenuItem\r\n                                    key={FetchProjectsPhaseOptions.ExpiredPitch}\r\n                                    value={FetchProjectsPhaseOptions.ExpiredPitch}\r\n                                >\r\n                                    Expired\r\n                                </MenuItem>\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Search bar */}\r\n            <Row\r\n                style={{\r\n                    marginTop: 40\r\n                }}\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={8}\r\n                    lg={4}\r\n                >\r\n                    <Box\r\n                        width=\"100%\"\r\n                        height=\"100%\"\r\n                        bgcolor=\"white\"\r\n                        border={2}\r\n                        borderColor={colors.grey[300]}\r\n                        borderRadius=\"20px\"\r\n                        paddingX=\"5px\"\r\n                        paddingY=\"8px\"\r\n                    >\r\n                        <form\r\n                            onSubmit={onSearchEnter}\r\n                        >\r\n                            <InputBase\r\n                                fullWidth\r\n                                name=\"searchFilter\"\r\n                                value={ExploreOffersLocalState.searchFilter}\r\n                                placeholder=\"Search name, group or issuer\"\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                startAdornment={\r\n                                    <InputAdornment\r\n                                        position=\"start\"\r\n                                    >\r\n                                        <IconButton\r\n                                            type=\"submit\"\r\n                                            onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)}\r\n                                            disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                        >\r\n                                            <Search fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </InputAdornment>\r\n                                }\r\n                                endAdornment={\r\n                                    !isSearchFilterActive(ExploreOffersLocalState)\r\n                                        ? null\r\n                                        : <InputAdornment\r\n                                            position=\"end\"\r\n                                        >\r\n                                            <IconButton\r\n                                                onClick={() => clearSearchFilter()}\r\n                                            >\r\n                                                <Close fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                }\r\n                            />\r\n                        </form>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={12}\r\n                            lg={12}\r\n                        >\r\n                            <Box\r\n                                display=\"flex\"\r\n                                marginY=\"50px\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                <BeatLoader\r\n                                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Offers */}\r\n            {\r\n                !successfullyFetchedOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={12}\r\n                            lg={12}\r\n                        >\r\n                            {\r\n                                !hasOffersForCurrentFilters(ExploreOffersLocalState)\r\n                                    ? <Box\r\n                                        marginY=\"80px\"\r\n                                    >\r\n                                        <Typography\r\n                                            align=\"center\"\r\n                                            variant=\"h5\"\r\n                                        >\r\n                                            There are no offers available using your current filter criteria\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    : <Box>\r\n                                        {/** Explore n offers + refresh button */}\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"row\"\r\n                                            alignItems=\"center\"\r\n                                            marginTop=\"50px\"\r\n                                            marginBottom=\"25px\"\r\n                                        >\r\n                                            <Typography\r\n                                                variant=\"h6\"\r\n                                            >\r\n                                                Explore\r\n                                            </Typography>\r\n                                            <Typography\r\n                                                variant=\"h6\"\r\n                                                color=\"primary\"\r\n                                            >\r\n                                                &nbsp;<b>{ExploreOffersLocalState.offerInstances.length} offers</b>\r\n                                            </Typography>\r\n\r\n                                            <Box\r\n                                                marginLeft=\"8px\"\r\n                                            >\r\n                                                <IconButton\r\n                                                    onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)}\r\n                                                >\r\n                                                    <RefreshIcon/>\r\n                                                </IconButton>\r\n                                            </Box>\r\n                                        </Box>\r\n\r\n                                        {/** Create offer button (only available for issuers) */}\r\n                                        {\r\n                                            !AuthenticationState.currentUser\r\n                                                ? null\r\n                                                : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : <Box\r\n                                                    marginBottom=\"40px\"\r\n                                                >\r\n                                                    <CustomLink\r\n                                                        url={Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)}\r\n                                                        target=\"_blank\"\r\n                                                        color=\"none\"\r\n                                                        activeColor=\"none\"\r\n                                                        activeUnderline={false}\r\n                                                        component=\"a\"\r\n                                                        childComponent={\r\n                                                            <Button\r\n                                                                size=\"medium\"\r\n                                                                variant=\"contained\"\r\n                                                                color=\"primary\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                            >\r\n                                                                <Box\r\n                                                                    marginRight=\"8px\"\r\n                                                                >\r\n                                                                    <CreateIcon\r\n                                                                        fontSize=\"small\"\r\n                                                                    />\r\n                                                                </Box>\r\n                                                                Create new offer\r\n                                                            </Button>\r\n                                                        }\r\n                                                    />\r\n                                                </Box>\r\n                                        }\r\n\r\n                                        {/** Offers area */}\r\n                                        <Row>\r\n                                            {\r\n                                                ExploreOffersLocalState.offerInstances\r\n                                                    .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                                    .map(offerInstance => (\r\n                                                        <Col\r\n                                                            key={offerInstance.projectDetail.id}\r\n                                                            xs={12}\r\n                                                            sm={12}\r\n                                                            md={6}\r\n                                                            lg={3}\r\n                                                        >\r\n                                                            <Box\r\n                                                                margin=\"16px\"\r\n                                                            >\r\n                                                                <OfferItem\r\n                                                                    offerInstance={offerInstance}\r\n                                                                />\r\n                                                            </Box>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Box>\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={12}\r\n                            lg={12}\r\n                        >\r\n                            <Box\r\n                                display=\"flex\"\r\n                                justifyContent=\"center\"\r\n                                marginTop=\"55px\"\r\n                            >\r\n                                <Pagination\r\n                                    count={paginationPages}\r\n                                    page={ExploreOffersLocalState.currentPage}\r\n                                    color=\"primary\"\r\n                                    onChange={paginationChanged}\r\n                                />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Risk warning */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Box\r\n                        marginTop=\"100px\"\r\n                    >\r\n                        <RiskWarning/>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreOffers);","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface FetchAccessRequestsOptions {\r\n    user?: string;\r\n    group?: string;\r\n    orderBy: \"user\" | \"group\";\r\n}\r\n\r\nexport default class AccessRequestRepository {\r\n\r\n    /**\r\n     * Fetch access requests\r\n     */\r\n    public async fetchAccessRequests(options?: FetchAccessRequestsOptions) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listAccessRequestsRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: options ?? null\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Create access request\r\n     *\r\n     * @param userID\r\n     * @param groupID\r\n     */\r\n    public async createAccessRequest(userID: string, groupID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.createAccessRequestRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        userID,\r\n                        groupID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Remove access request\r\n     *\r\n     * @param requestID\r\n     */\r\n    public async removeAccessRequest(requestID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"delete\",\r\n                ApiRoutes.removeAccessRequestRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        requestID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport enum ClientEmailTypes {\r\n    EnquiryEmail,\r\n    InvitationEmail,\r\n    PitchPublished,\r\n    NewPitchSubmitted,\r\n    ContactResource,\r\n    ContactPitchOwner\r\n}\r\n\r\nexport interface EmailData {\r\n    emailType: number;\r\n    emailInfo: EmailInfo;\r\n}\r\n\r\nexport interface EmailInfo {\r\n    receiver: string | string[];\r\n    sender?: string;\r\n\r\n    [others: string]: any;\r\n}\r\n\r\nexport interface UserInvitationEmailData extends EmailInfo {\r\n    groupName: string;\r\n    groupLogo: string;\r\n    groupWebsite: string;\r\n    groupContactUs: string;\r\n    userType: string;\r\n    signupURL: string;\r\n}\r\n\r\nexport interface EnquiryEmailData extends EmailInfo {\r\n    isAuthenticatedRequest: boolean;\r\n    subject: string;\r\n    description: string;\r\n    senderName: string;\r\n    senderPhone: string;\r\n}\r\n\r\nexport interface PitchPublishedEmailData extends EmailInfo {\r\n    projectID: string;\r\n}\r\n\r\nexport interface NewPitchSubmittedEmailData extends EmailInfo {\r\n    projectID: string;\r\n}\r\n\r\nexport interface ContactResourceEmailData extends EmailInfo {\r\n    userName: string;\r\n    userCompanyName?: string;\r\n}\r\n\r\nexport interface ContactPitchOwnerEmailData extends EmailInfo {\r\n    userName: string;\r\n    projectName: string;\r\n}\r\n\r\nexport default class EmailRepository {\r\n\r\n    /**\r\n     * Send email\r\n     *\r\n     * @param data\r\n     */\r\n    public async sendEmail(data: EmailData) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n}","import {\r\n    CompleteFetchingGroupsAction,\r\n    CompleteRemovingAccessRequestAction,\r\n    CompleteSendingAccessRequestAction,\r\n    ExploreGroupsAction,\r\n    ExploreGroupsEvents,\r\n    FilterChangedAction,\r\n    FilterGroupsByGroupFilterAction,\r\n    PaginationChangedAction, RemovingAccessRequestAction, SendingAccessRequestAction\r\n} from \"./ExploreGroupsActions\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport Error from \"../../models/error\";\r\nimport {AccessRequestInstance} from \"../../models/access_request\";\r\n\r\nexport const maxGroupsPerPage: number = 12;\r\n\r\nexport interface ExploreGroupsState {\r\n    groups: GroupProperties[];\r\n    accessRequestsInstances?: AccessRequestInstance[]; // only available for issuer or investor\r\n    fetchingGroups: boolean;\r\n    groupsFetched: boolean;\r\n\r\n    filteringGroupsByName: boolean;\r\n    nameFilter: string;\r\n    groupFilter: \"all\" | \"groupsOfMembership\" | \"groupsOfPendingRequest\";\r\n    groupsFiltered: GroupProperties[];\r\n\r\n    currentPage: number;\r\n\r\n    error?: Error;\r\n\r\n    sendingAccessRequestToGroup?: string;\r\n    errorSendingAccessRequest?: Error;\r\n\r\n    removingAccessRequestFromGroup?: string;\r\n    errorRemovingAccessRequest?: Error;\r\n}\r\n\r\nconst initialState: ExploreGroupsState = {\r\n    groups: [],\r\n    fetchingGroups: false,\r\n    groupsFetched: false,\r\n\r\n    filteringGroupsByName: false,\r\n    nameFilter: \"\",\r\n    groupFilter: \"all\",\r\n    groupsFiltered: [],\r\n\r\n    currentPage: 1\r\n}\r\n\r\nexport const hasNotFetchedGroups = (state: ExploreGroupsState) => {\r\n    return !state.groupsFetched && !state.fetchingGroups;\r\n}\r\n\r\nexport const isFetchingGroups = (state: ExploreGroupsState) => {\r\n    return !state.groupsFetched && state.fetchingGroups;\r\n}\r\n\r\nexport const successfullyFetchedGroups = (state: ExploreGroupsState) => {\r\n    return state.groupsFetched && !state.fetchingGroups && state.error === undefined;\r\n}\r\n\r\nexport const isFilteringGroupsByName = (state: ExploreGroupsState) => {\r\n    return state.filteringGroupsByName;\r\n}\r\n\r\nexport const hasGroupsForCurrentFilters = (state: ExploreGroupsState) => {\r\n    return successfullyFetchedGroups(state) && state.groupsFiltered.length > 0;\r\n}\r\n\r\nexport const hasAccessRequestsBeenSatisfied = (state: ExploreGroupsState) => {\r\n    return successfullyFetchedGroups(state) && state.accessRequestsInstances !== undefined;\r\n}\r\n\r\nexport const calculatePaginationPages = (state: ExploreGroupsState) => {\r\n    if (state.groupsFiltered.length <= maxGroupsPerPage) {\r\n        return 1;\r\n    }\r\n    if (state.groupsFiltered.length % maxGroupsPerPage === 0) {\r\n        return (state.groupsFiltered.length / maxGroupsPerPage) | 0;\r\n    }\r\n    return ((state.groupsFiltered.length / maxGroupsPerPage) | 0) + 1;\r\n}\r\n\r\nexport const calculatePaginationIndices = (state: ExploreGroupsState) => {\r\n    let startIndex, endIndex;\r\n    startIndex = (state.currentPage - 1) * maxGroupsPerPage;\r\n    endIndex = startIndex + maxGroupsPerPage - 1;\r\n    if (endIndex > state.groupsFiltered.length - 1) {\r\n        endIndex = state.groupsFiltered.length - 1;\r\n    }\r\n    return {\r\n        startIndex,\r\n        endIndex\r\n    };\r\n}\r\n\r\nexport const isSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return state.sendingAccessRequestToGroup !== undefined && state.sendingAccessRequestToGroup === groupID;\r\n}\r\n\r\nexport const hasErrorSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return !isSendingAccessRequest(state, groupID) && state.errorSendingAccessRequest !== undefined;\r\n}\r\n\r\nexport const isRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return state.removingAccessRequestFromGroup !== undefined && state.removingAccessRequestFromGroup === groupID;\r\n}\r\n\r\nexport const hasErrorRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return !isRemovingAccessRequest(state, groupID) && state.errorRemovingAccessRequest !== undefined;\r\n}\r\n\r\nconst exploreGroupsReducer = (state = initialState, action: ExploreGroupsAction) => {\r\n    switch (action.type) {\r\n        case ExploreGroupsEvents.FetchingGroups:\r\n            return {\r\n                ...state,\r\n                groups: [],\r\n                fetchingGroups: true,\r\n                groupsFetched: false,\r\n                error: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteFetchingGroups:\r\n            const completeFetchingGroupsAction: CompleteFetchingGroupsAction = action as CompleteFetchingGroupsAction;\r\n            return {\r\n                ...state,\r\n                groups: [...completeFetchingGroupsAction.groups],\r\n                accessRequestsInstances: completeFetchingGroupsAction.accessRequestInstances !== undefined\r\n                    ? [...completeFetchingGroupsAction.accessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                fetchingGroups: false,\r\n                groupsFetched: true,\r\n                currentPage: 1,\r\n                error: completeFetchingGroupsAction.error !== undefined\r\n                    ? {detail: completeFetchingGroupsAction.error} : state.error\r\n            }\r\n        case ExploreGroupsEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value\r\n            }\r\n        case ExploreGroupsEvents.FilterGroupsByName:\r\n            return {\r\n                ...state,\r\n                filteringGroupsByName: true\r\n            }\r\n        case ExploreGroupsEvents.CancelFilterGroupsByName:\r\n            return {\r\n                ...state,\r\n                nameFilter: \"\",\r\n                filteringGroupsByName: false\r\n            }\r\n        case ExploreGroupsEvents.FilterGroupsByGroupFilter:\r\n            const filterGroupsByGroupFilterAction: FilterGroupsByGroupFilterAction = action as FilterGroupsByGroupFilterAction;\r\n            return {\r\n                ...state,\r\n                groupsFiltered: [...filterGroupsByGroupFilterAction.groupsFiltered],\r\n                currentPage: 1\r\n            }\r\n        case ExploreGroupsEvents.PaginationChanged:\r\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\r\n            return {\r\n                ...state,\r\n                currentPage: paginationChangedAction.page\r\n            }\r\n        case ExploreGroupsEvents.SendingAccessRequest:\r\n            const sendingAccessRequestAction: SendingAccessRequestAction = action as SendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequestToGroup: sendingAccessRequestAction.groupID,\r\n                errorSendingAccessRequest: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteSendingAccessRequest:\r\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequestToGroup: undefined,\r\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\r\n            }\r\n        case ExploreGroupsEvents.RemovingAccessRequest:\r\n            const removingAccessRequestAction: RemovingAccessRequestAction = action as RemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequestFromGroup: removingAccessRequestAction.groupID,\r\n                errorRemovingAccessRequest: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteRemovingAccessRequest:\r\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequestFromGroup: undefined,\r\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default exploreGroupsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Button, Card, CardActionArea, CardActions, colors, Typography} from \"@material-ui/core\";\r\nimport GroupProperties, {getGroupLogo} from \"../../models/group_properties\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {\r\n    ExploreGroupsState,\r\n    hasAccessRequestsBeenSatisfied,\r\n    isRemovingAccessRequest,\r\n    isSendingAccessRequest\r\n} from \"./ExploreGroupsReducer\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {CheckCircle} from \"@material-ui/icons\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {removeAccessRequest, sendAccessRequest} from \"./ExploreGroupsActions\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\n\r\ninterface GroupItemProps {\r\n    group: GroupProperties;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    sendAccessRequest: (groupID: string) => any;\r\n    removeAccessRequest: (groupID: string) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        sendAccessRequest: (groupID: string) => dispatch(sendAccessRequest(groupID)),\r\n        removeAccessRequest: (groupID: string) => dispatch(removeAccessRequest(groupID))\r\n    }\r\n}\r\n\r\nclass GroupItem extends Component<GroupItemProps, any> {\r\n    render() {\r\n        const {\r\n            group,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            sendAccessRequest,\r\n            removeAccessRequest\r\n        } = this.props;\r\n\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        let groupMember: GroupOfMembership | undefined = AuthenticationState.groupsOfMembership.find(\r\n            groupOfMembership => groupOfMembership.group.anid === group.anid);\r\n\r\n        let hasRequestedToAccessGroup: boolean = false;\r\n        if (hasAccessRequestsBeenSatisfied(ExploreGroupsLocalState)) {\r\n            hasRequestedToAccessGroup = ExploreGroupsLocalState.accessRequestsInstances\r\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\r\n        }\r\n\r\n        return <Box\r\n            marginY=\"18px\"\r\n        >\r\n            <Card>\r\n                <CustomLink\r\n                    url={Routes.constructGroupDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, group.groupUserName)}\r\n                    color=\"black\"\r\n                    activeColor=\"none\"\r\n                    activeUnderline={false}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <CardActionArea\r\n                            onClick={\r\n                                () => {\r\n                                    if (!isAdmin(currentUser)) {\r\n                                        realtimeDBUtils.trackActivity({\r\n                                            userID: currentUser.id,\r\n                                            activityType: DB_CONST.ACTIVITY_TYPE_CLICK,\r\n                                            interactedObjectLocation: DB_CONST.GROUP_PROPERTIES_CHILD,\r\n                                            interactedObjectID: group.anid,\r\n                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM.replace(\"%group%\", group.displayName),\r\n                                            action: Routes.nonGroupViewGroup.replace(\":groupID\", group.anid)\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        >\r\n                            <Box>\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    height=\"220px\"\r\n                                    justifyContent=\"center\"\r\n                                    bgcolor={colors.grey[\"200\"]}\r\n                                >\r\n                                    <Image\r\n                                        alt={`${group.displayName} logo`}\r\n                                        src={getGroupLogo(group) ?? undefined}\r\n                                        height=\"auto\"\r\n                                        width=\"100%\"\r\n                                        style={{\r\n                                            padding: 40,\r\n                                            objectFit: \"scale-down\"\r\n                                        }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    paddingX=\"18px\"\r\n                                    paddingY=\"20px\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"subtitle1\"\r\n                                        align=\"center\"\r\n                                        noWrap\r\n                                    >\r\n                                        <b>{group.displayName}</b>\r\n                                    </Typography>\r\n\r\n                                    {\r\n                                        !groupMember\r\n                                            ? null\r\n                                            : <Box\r\n                                                display=\"flex\"\r\n                                                flexDirection=\"row\"\r\n                                                marginTop=\"15px\"\r\n                                                alignItems=\"center\"\r\n                                                justifyContent=\"center\"\r\n                                            >\r\n                                                <CheckCircle\r\n                                                    fontSize=\"small\"\r\n                                                    color=\"primary\"\r\n                                                />\r\n                                                <Box\r\n                                                    width=\"6px\"\r\n                                                />\r\n                                                <Typography\r\n                                                    variant=\"body1\"\r\n                                                    align=\"center\"\r\n                                                    noWrap\r\n                                                    color=\"textSecondary\"\r\n                                                >\r\n                                                    {\r\n                                                        getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\r\n                                                            ? \"Home member\"\r\n                                                            : \"Platform member\"\r\n                                                    }\r\n                                                </Typography>\r\n                                            </Box>\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n                        </CardActionArea>\r\n                    }\r\n                />\r\n\r\n                {\r\n                    isAdmin(currentUser)\r\n                        ? null\r\n                        : groupMember\r\n                        ? null\r\n                        : <CardActions\r\n                            style={{\r\n                                padding: 0\r\n                            }}\r\n                        >\r\n                            <Box\r\n                                display=\"flex\"\r\n                                width=\"100%\"\r\n                                padding=\"18px\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                {\r\n                                    !hasRequestedToAccessGroup\r\n                                        ? <Button\r\n                                            fullWidth\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => sendAccessRequest(group.anid)}\r\n                                            disabled={isSendingAccessRequest(ExploreGroupsLocalState, group.anid)}\r\n                                        >\r\n                                            {\r\n                                                isSendingAccessRequest(ExploreGroupsLocalState, group.anid)\r\n                                                    ? \"Sending request ...\"\r\n                                                    : \"Join Group\"\r\n                                            }\r\n                                        </Button>\r\n                                        : <Button\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => removeAccessRequest(group.anid)}\r\n                                            disabled={isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)}\r\n                                        >\r\n                                            {\r\n                                                isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)\r\n                                                    ? \"Cancelling ...\"\r\n                                                    : \"Cancel request\"\r\n                                            }\r\n                                        </Button>\r\n                                }\r\n                            </Box>\r\n                        </CardActions>\r\n                }\r\n            </Card>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreGroupsState,\r\n    hasGroupsForCurrentFilters,\r\n    hasNotFetchedGroups,\r\n    isFetchingGroups,\r\n    isFilteringGroupsByName,\r\n    successfullyFetchedGroups\r\n} from \"./ExploreGroupsReducer\";\r\nimport {\r\n    Box,\r\n    Card,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Close, Refresh, Search} from \"@material-ui/icons\";\r\nimport {\r\n    cancelFilteringGroupsByName,\r\n    fetchGroups,\r\n    filterChanged,\r\n    filterGroupsByName,\r\n    paginationChanged\r\n} from \"./ExploreGroupsActions\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport GroupItem from \"./GroupItem\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\n\r\ninterface ExploreGroupsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    fetchGroups: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterGroupsByName: () => any;\r\n    cancelFilteringGroupsByName: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        fetchGroups: () => dispatch(fetchGroups()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterGroupsByName: () => dispatch(filterGroupsByName()),\r\n        cancelFilteringGroupsByName: () => dispatch(cancelFilteringGroupsByName()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreGroups extends Component<ExploreGroupsProps, any> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedGroups(this.props.ExploreGroupsLocalState)) {\r\n            this.props.fetchGroups();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            fetchGroups,\r\n            filterChanged,\r\n            filterGroupsByName,\r\n            cancelFilteringGroupsByName,\r\n            paginationChanged\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreGroupsLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreGroupsLocalState);\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 8, offset: 2}}\r\n                    lg={{span: 4, offset: 4}}\r\n                >\r\n                    <Card\r\n                        elevation={0}\r\n                    >\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            alignItems=\"center\"\r\n                            bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            color=\"white\"\r\n                            paddingY=\"28px\"\r\n                        >\r\n                            <Typography\r\n                                variant=\"h6\"\r\n                                align=\"center\"\r\n                            >\r\n                                Groups on Invest West network\r\n                            </Typography>\r\n\r\n                            <Box\r\n                                height=\"28px\"\r\n                            />\r\n\r\n                            <Box\r\n                                width=\"85%\"\r\n                                height=\"100%\"\r\n                                bgcolor=\"white\"\r\n                                borderRadius=\"50px\"\r\n                            >\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    name=\"nameFilter\"\r\n                                    value={ExploreGroupsLocalState.nameFilter}\r\n                                    placeholder=\"Search group by name\"\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                    startAdornment={\r\n                                        <InputAdornment\r\n                                            position=\"start\"\r\n                                        >\r\n                                            <IconButton\r\n                                                onClick={() => filterGroupsByName()}\r\n                                                disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                            >\r\n                                                <Search fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        !isFilteringGroupsByName(ExploreGroupsLocalState)\r\n                                            ? null\r\n                                            : <InputAdornment\r\n                                                position=\"end\"\r\n                                            >\r\n                                                <IconButton\r\n                                                    onClick={() => cancelFilteringGroupsByName()}\r\n                                                >\r\n                                                    <Close fontSize=\"small\"/>\r\n                                                </IconButton>\r\n                                            </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Filters (only available for issuer and investor) */}\r\n            {\r\n                isAdmin(AuthenticationState.currentUser)\r\n                    ? null\r\n                    : <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={8}\r\n                            sm={8}\r\n                            md={3}\r\n                            lg={2}\r\n                        >\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"row\"\r\n                                marginTop=\"48px\"\r\n                            >\r\n                                <Select\r\n                                    fullWidth\r\n                                    name=\"groupFilter\"\r\n                                    value={ExploreGroupsLocalState.groupFilter}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    input={<OutlinedInput/>}\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"all\"\r\n                                        value=\"all\"\r\n                                    >\r\n                                        All groups\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key=\"groupsOfMembership\"\r\n                                        value=\"groupsOfMembership\"\r\n                                    >\r\n                                        My groups\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key=\"groupsOfPendingRequest\"\r\n                                        value=\"groupsOfPendingRequest\"\r\n                                    >\r\n                                        Pending requests\r\n                                    </MenuItem>\r\n                                </Select>\r\n\r\n                                <Box\r\n                                    width=\"15px\"\r\n                                />\r\n\r\n                                <IconButton\r\n                                    onClick={() => fetchGroups()}\r\n                                >\r\n                                    <Refresh/>\r\n                                </IconButton>\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={12}\r\n                            lg={12}\r\n                        >\r\n                            <Box\r\n                                display=\"flex\"\r\n                                marginY=\"80px\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                <BeatLoader\r\n                                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Groups area */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : !hasGroupsForCurrentFilters(ExploreGroupsLocalState)\r\n                    ? <Box\r\n                        marginY=\"80px\"\r\n                    >\r\n                        <Typography\r\n                            align=\"center\"\r\n                            variant=\"h5\"\r\n                        >\r\n                            There are no groups available using your current filter criteria\r\n                        </Typography>\r\n                    </Box>\r\n                    : <Box\r\n                        marginTop=\"30px\"\r\n                    >\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row>\r\n                                    {\r\n                                        ExploreGroupsLocalState.groupsFiltered\r\n                                            .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                            .map(group =>\r\n                                                <Col\r\n                                                    key={group.anid}\r\n                                                    xs={12}\r\n                                                    sm={12}\r\n                                                    md={4}\r\n                                                    lg={3}\r\n                                                    xl={2}\r\n                                                >\r\n                                                    <GroupItem\r\n                                                        group={group}\r\n                                                    />\r\n                                                </Col>\r\n                                            )\r\n                                    }\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                    </Box>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={12}\r\n                            lg={12}\r\n                        >\r\n                            <Box\r\n                                display=\"flex\"\r\n                                justifyContent=\"center\"\r\n                                marginTop=\"55px\"\r\n                            >\r\n                                <Pagination\r\n                                    count={paginationPages}\r\n                                    page={ExploreGroupsLocalState.currentPage}\r\n                                    color=\"primary\"\r\n                                    onChange={paginationChanged}\r\n                                />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreGroups);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {FeedbackSnackbarTypes} from \"./FeedbackSnackbarReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\n\r\nexport enum FeedbackSnackbarEvents {\r\n    Open = \"FeedbackSnackbarEvents.Open\",\r\n    Close = \"FeedbackSnackbarEvents.Close\"\r\n}\r\n\r\nexport interface FeedbackSnackbarAction extends Action {\r\n\r\n}\r\n\r\nexport interface OpenFeedbackSnackbarAction extends Action {\r\n    snackbarType: FeedbackSnackbarTypes;\r\n    message: string;\r\n}\r\n\r\nexport const openFeedbackSnackbar: ActionCreator<any> = (type: FeedbackSnackbarTypes, message: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: OpenFeedbackSnackbarAction = {\r\n            type: FeedbackSnackbarEvents.Open,\r\n            snackbarType: type,\r\n            message: message\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const closeFeedbackSnackbar: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: FeedbackSnackbarEvents.Close\r\n        });\r\n    }\r\n}","import {FeedbackSnackbarAction, FeedbackSnackbarEvents, OpenFeedbackSnackbarAction} from \"./FeedbackSnackbarActions\";\r\n\r\nexport enum FeedbackSnackbarTypes {\r\n    Success = \"success\",\r\n    Information = \"info\",\r\n    Error = \"error\",\r\n    Warning = \"warning\"\r\n}\r\n\r\nexport interface FeedbackSnackbarState {\r\n    type: FeedbackSnackbarTypes;\r\n    open: boolean;\r\n    message: string;\r\n}\r\n\r\nconst initialState: FeedbackSnackbarState = {\r\n    type: FeedbackSnackbarTypes.Success,\r\n    open: false,\r\n    message: \"\"\r\n};\r\n\r\nconst feedbackSnackbarReducerNew = (state = initialState, action: FeedbackSnackbarAction) => {\r\n    switch (action.type) {\r\n        case FeedbackSnackbarEvents.Open:\r\n            const openFeedbackSnackbarAction: OpenFeedbackSnackbarAction = action as OpenFeedbackSnackbarAction;\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                type: openFeedbackSnackbarAction.snackbarType,\r\n                message: openFeedbackSnackbarAction.message\r\n            }\r\n        case FeedbackSnackbarEvents.Close:\r\n            return {\r\n                ...state,\r\n                open: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default feedbackSnackbarReducerNew;","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport EmailRepository, {ClientEmailTypes, ContactResourceEmailData} from \"../../api/repositories/EmailRepository\";\r\nimport User, {hasBusinessProfile} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport {openFeedbackSnackbar} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ResourcesEvents {\r\n    DetailedPageToggleContactDialog = \"ResourcesEvents.DetailedPageToggleContactDialog\",\r\n    DetailedPageSendingContactEmail = \"ResourcesEvents.DetailedPageSendingContactEmail\",\r\n    DetailedPageCompleteSendingContactEmail = \"ResourcesEvents.DetailedPageCompleteSendingContactEmail\"\r\n}\r\n\r\nexport interface ResourcesAction extends Action {\r\n\r\n}\r\n\r\nexport interface DetailedPageCompleteSendingContactEmailAction extends ResourcesAction {\r\n    error?: string;\r\n}\r\n\r\nexport const toggleContactResourceDialog: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ResourcesEvents.DetailedPageToggleContactDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const sendContactEmail: ActionCreator<any> = (receiver: string | string[]) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            detailedPageSendingContactEmail\r\n        } = getState().ResourcesLocalState;\r\n\r\n        if (detailedPageSendingContactEmail) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            currentUser\r\n        } = getState().AuthenticationState;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const admin: Admin | null = isAdmin(currentUser);\r\n\r\n        dispatch({\r\n            type: ResourcesEvents.DetailedPageSendingContactEmail\r\n        });\r\n\r\n        const completeAction: DetailedPageCompleteSendingContactEmailAction = {\r\n            type: ResourcesEvents.DetailedPageCompleteSendingContactEmail\r\n        };\r\n\r\n        try {\r\n            const emailInfo: ContactResourceEmailData = {\r\n                receiver: receiver,\r\n                sender: currentUser.email,\r\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\r\n                userCompanyName: `${admin ? \"Not specified\" : hasBusinessProfile((currentUser as User))\r\n                    ? (currentUser as User).BusinessProfile?.companyName : \"Not specified.\"}`\r\n            };\r\n\r\n            await new EmailRepository().sendEmail({\r\n                emailType: ClientEmailTypes.ContactResource,\r\n                emailInfo: emailInfo\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport React from \"react\";\r\nimport {SystemAttributes} from \"../../../../models/system_attributes\";\r\nimport SystemAttributesRepository from \"../../../../api/repositories/SystemAttributesRepository\";\r\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ManageSectorsEvents {\r\n    SetSectors = \"ManageSectorsEvents.SetSectors\",\r\n    ToggleAddNewSector = \"ManageSectorsEvents.ToggleAddNewSector\",\r\n    AddNewSectorTextChanged = \"ManageSectorsEvents.AddNewSectorTextChanged\",\r\n    SavingSectorsChanges = \"ManageSectorsEvents.SavingSectorsChanges\",\r\n    CompletedSavingSectorsChanges = \"ManageSectorsEvents.CompletedSavingSectorsChanges\"\r\n}\r\n\r\nexport interface ManageSectorsAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetSectorsAction extends ManageSectorsAction {\r\n    sectors: string[];\r\n}\r\n\r\nexport interface AddNewSectorTextChangedAction extends ManageSectorsAction {\r\n    value: string;\r\n}\r\n\r\nexport interface CompletedSavingSectorsChangesAction extends ManageSectorsAction {\r\n    error?: string;\r\n}\r\n\r\nexport const setSectors: ActionCreator<any> = (sectors: string[]) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetSectorsAction = {\r\n            type: ManageSectorsEvents.SetSectors,\r\n            sectors: [...sectors]\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const toggleAddNewSector: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ManageSectorsEvents.ToggleAddNewSector\r\n        });\r\n    }\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: AddNewSectorTextChangedAction = {\r\n            type: ManageSectorsEvents.AddNewSectorTextChanged,\r\n            value: event.target.value\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const addNewSector: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const newSector: string = getState().ManageSectorsLocalState.newSector;\r\n        sectors.push(newSector);\r\n        dispatch(setSectors(sectors));\r\n        return dispatch(toggleAddNewSector());\r\n    }\r\n}\r\n\r\nexport const deleteSector: ActionCreator<any> = (sector: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const index = sectors.findIndex(eSector => eSector === sector);\r\n        if (index !== -1) {\r\n            sectors.splice(index, 1);\r\n        }\r\n        return dispatch(setSectors(sectors));\r\n    }\r\n}\r\n\r\nexport const cancelSectorsChanges: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const systemAttributes: SystemAttributes | null = getState().ManageSystemAttributesState.systemAttributes;\r\n        if (!systemAttributes) {\r\n            return;\r\n        }\r\n        return dispatch(setSectors([...systemAttributes.Sectors]));\r\n    }\r\n}\r\n\r\nexport const saveSectorsChanges: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const systemAttributes: SystemAttributes | null = JSON.parse(JSON.stringify(getState().ManageSystemAttributesState.systemAttributes));\r\n        if (!systemAttributes) {\r\n            return;\r\n        }\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const completeAction: CompletedSavingSectorsChangesAction = {\r\n            type: ManageSectorsEvents.CompletedSavingSectorsChanges\r\n        };\r\n        try {\r\n            systemAttributes.Sectors = sectors;\r\n            dispatch({\r\n                type: ManageSectorsEvents.SavingSectorsChanges\r\n            });\r\n            await new SystemAttributesRepository().updateSystemAttributes(systemAttributes);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {DetailedPageCompleteSendingContactEmailAction, ResourcesAction, ResourcesEvents} from \"./ResourcesActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface ResourcesState {\r\n    detailedPageContactDialogOpen: boolean;\r\n    detailedPageSendingContactEmail: boolean;\r\n    detailedPageErrorSendingContactEmail?: Error;\r\n}\r\n\r\nconst initialState: ResourcesState = {\r\n    detailedPageContactDialogOpen: false,\r\n    detailedPageSendingContactEmail: false\r\n}\r\n\r\nexport const isDetailedPageSendingContactEmail = (state: ResourcesState) => {\r\n    return state.detailedPageSendingContactEmail;\r\n}\r\n\r\nexport const hasErrorSendingContactEmailInDetailedPage = (state: ResourcesState) => {\r\n    return !state.detailedPageSendingContactEmail && state.detailedPageErrorSendingContactEmail !== undefined;\r\n}\r\n\r\nconst resourcesReducer = (state = initialState, action: ResourcesAction) => {\r\n    switch (action.type) {\r\n        case ResourcesEvents.DetailedPageToggleContactDialog:\r\n            return {\r\n                ...state,\r\n                detailedPageContactDialogOpen: !state.detailedPageContactDialogOpen\r\n            }\r\n        case ResourcesEvents.DetailedPageSendingContactEmail:\r\n            return {\r\n                ...state,\r\n                detailedPageSendingContactEmail: true,\r\n                detailedPageErrorSendingContactEmail: undefined\r\n            }\r\n        case ResourcesEvents.DetailedPageCompleteSendingContactEmail:\r\n            const detailedPageCompleteSendingContactEmailAction: DetailedPageCompleteSendingContactEmailAction = action as DetailedPageCompleteSendingContactEmailAction;\r\n            return {\r\n                ...state,\r\n                detailedPageContactDialogOpen: false,\r\n                detailedPageSendingContactEmail: false,\r\n                detailedPageErrorSendingContactEmail: detailedPageCompleteSendingContactEmailAction.error !== undefined\r\n                    ? {detail: detailedPageCompleteSendingContactEmailAction.error}\r\n                    : state.detailedPageErrorSendingContactEmail\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default resourcesReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\r\nimport {sendContactEmail, toggleContactResourceDialog} from \"../ResourcesActions\";\r\nimport {isDetailedPageSendingContactEmail, ResourcesState} from \"../ResourcesReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface ContactResourceDialogProps {\r\n    // set when using the component inside the page\r\n    resourceName: string;\r\n    // set when using the component inside the page\r\n    resourceEmail: string | string[];\r\n    ResourcesLocalState: ResourcesState;\r\n    toggle: () => any;\r\n    sendContactEmail: (receiver: string | string[]) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggle: () => dispatch(toggleContactResourceDialog()),\r\n        sendContactEmail: (receiver: string | string[]) => dispatch(sendContactEmail(receiver))\r\n    }\r\n}\r\n\r\nclass ContactResourceDialog extends Component<ContactResourceDialogProps, any> {\r\n    render() {\r\n        const {\r\n            resourceName,\r\n            resourceEmail,\r\n            ResourcesLocalState,\r\n            toggle,\r\n            sendContactEmail\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            open={ResourcesLocalState.detailedPageContactDialogOpen}\r\n            onClose={() => toggle()}\r\n        >\r\n            <DialogContent>\r\n                <Box\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                >\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        align=\"left\"\r\n                    >\r\n                        {`We will send an email to ${resourceName} asking them to contact you.`}\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        align=\"left\"\r\n                    >\r\n                        {`Are you happy for Invest West to share your email address with ${resourceName}?`}\r\n                    </Typography>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    isDetailedPageSendingContactEmail(ResourcesLocalState)\r\n                        ? null\r\n                        : <Button\r\n                            onClick={() => toggle()}\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                }\r\n                <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    className={css(sharedStyles.no_text_transform)}\r\n                    disabled={isDetailedPageSendingContactEmail(ResourcesLocalState)}\r\n                    onClick={() => sendContactEmail(resourceEmail)}\r\n                >\r\n                    {\r\n                        isDetailedPageSendingContactEmail(ResourcesLocalState)\r\n                            ? `Sending email to ${resourceName} ...`\r\n                            : \"Yes\"\r\n                    }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactResourceDialog);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Slide, SlideProps, Snackbar} from \"@material-ui/core\";\r\nimport {FeedbackSnackbarState} from \"./FeedbackSnackbarReducer\";\r\nimport {closeFeedbackSnackbar} from \"./FeedbackSnackbarActions\";\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\ninterface FeedbackSnackbarProps {\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    close: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        FeedbackSnackbarLocalState: state.FeedbackSnackbarLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        close: () => dispatch(closeFeedbackSnackbar())\r\n    }\r\n}\r\n\r\nclass FeedbackSnackbarNew extends Component<FeedbackSnackbarProps, any> {\r\n    render() {\r\n        const {\r\n            FeedbackSnackbarLocalState,\r\n            close\r\n        } = this.props;\r\n\r\n        return <Snackbar\r\n            open={FeedbackSnackbarLocalState.open}\r\n            anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"center\",\r\n            }}\r\n            autoHideDuration={2500}\r\n            onClose={close}\r\n            TransitionComponent={SlideTransitionUp}\r\n            transitionDuration={{\r\n                enter: 130,\r\n                exit: 130\r\n            }}\r\n        >\r\n            <Alert\r\n                variant=\"filled\"\r\n                severity={FeedbackSnackbarLocalState.type}\r\n                onClose={close}\r\n            >\r\n                {FeedbackSnackbarLocalState.message}\r\n            </Alert>\r\n        </Snackbar>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbarNew);\r\n\r\n/**\r\n * Slide transition - direction up\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionUp = React.forwardRef((props: SlideProps, ref) => <Slide {...props} ref={ref}\r\n                                                                                     direction=\"up\"/>);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\n\r\ninterface KeltieProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\ninterface KeltieResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst keltieLogo: string = `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`;\r\nconst sullivanFountainImg: string = `${process.env.PUBLIC_URL}/resources/keltie/sullivan-fountain.jpg`;\r\nconst richardLawrenceImg: string = `${process.env.PUBLIC_URL}/resources/keltie/richard-lawrence.jpg`;\r\n\r\nconst keltieDocuments: KeltieResource[] = [\r\n    {\r\n        name: \"An introduction to IP\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/an-introduction-to-ip.pdf`\r\n    },\r\n    {\r\n        name: \"Designs - Info Sheet\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/designs-info-sheet.pdf`\r\n    },\r\n    {\r\n        name: \"Patent searching overview guide\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patent-searching-overview-guide.pdf`\r\n    },\r\n    {\r\n        name: \"How to get the best from your IP\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/how-to-get-the-best-from-your-ip.pptx`\r\n    },\r\n    {\r\n        name: \"The tool box\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/the-tool-box.pptx`\r\n    }\r\n];\r\n\r\nconst keltieVideos: KeltieResource[] = [\r\n    {\r\n        name: \"IP for Startups: Top 5 Things You Need to Know\",\r\n        url: \"https://www.youtube.com/watch?v=r5mOCm2tzjg\"\r\n    },\r\n    {\r\n        name: \"Patents for non patent attorneys - Episode 1\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-1.mp4`\r\n    },\r\n    {\r\n        name: \"Patents for non patent attorneys - Episode 2\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-2.mp4`\r\n    },\r\n    {\r\n        name: \"Artificial Intelligence and Patents: AI Inventors\",\r\n        url: \"https://www.youtube.com/watch?v=QZOC2ZLWjPI\"\r\n    },\r\n    {\r\n        name: \"Patents and the Internet of Things\",\r\n        url: \"https://www.youtube.com/watch?v=BnyvbgUSjv4\"\r\n    },\r\n    {\r\n        name: \"IP Tips: Reducing patent spend (in light of Covid-19)\",\r\n        url: \"https://www.youtube.com/watch?v=7v00c9VpS-E\"\r\n    }\r\n];\r\n\r\nclass Keltie extends Component<KeltieProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        width: \"100%\"\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={5}\r\n                                        lg={4}\r\n                                        xl={3}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"center\"\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                        >\r\n                                            <ReactPlayer\r\n                                                url={keltieVideos[0].url}\r\n                                                height=\"100%\"\r\n                                                width=\"100%\"\r\n                                                playing={false}\r\n                                                controls={true}\r\n                                            />\r\n                                        </Box>\r\n                                    </Col>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={7}\r\n                                        lg={8}\r\n                                        xl={9}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"column\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"center\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Box\r\n                                                marginY=\"30px\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h3\"\r\n                                                    align=\"center\"\r\n                                                >\r\n                                                    Intellectual Property\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Typography\r\n                                                variant=\"h6\"\r\n                                                align=\"center\"\r\n                                            >\r\n                                                A collection of resources to help entrepreneurs better understand\r\n                                                Intellectual Property issues. This content is kindly provided by our\r\n                                                friends at Keltie LLP.\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Box\r\n                                    height=\"30px\"\r\n                                />\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        width: \"100%\"\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        xl={12}\r\n                                    >\r\n                                        <Divider/>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Box\r\n                                    height=\"30px\"\r\n                                />\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        width: \"100%\"\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={12}\r\n                                        xl={12}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"center\"\r\n                                        >\r\n                                            Intellectual property comprises the intangible business assets that are the\r\n                                            result of creativity. In a technology business, much or even most of the\r\n                                            value of the business may lie in the intellectual property that it owns or\r\n                                            controls. While this asset value is significant, the main role of\r\n                                            intellectual property is usually to support the commercial strategy of the\r\n                                            business. It is therefore very important to understand what intellectual\r\n                                            property is needed by a business to support its commercial strategy, so that\r\n                                            the business can make good decisions about identifying and securing the\r\n                                            intellectual property that it needs as efficiently as possible.\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Tips */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Top 5 Things You Need to Know\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"left\"\r\n                                    component=\"span\"\r\n                                >\r\n                                    <ol>\r\n                                        <li>\r\n                                            There are four main forms of IP Protection\r\n                                            <br/>\r\n                                            <ol type=\"a\">\r\n                                                <li><i>Patents</i> for technological innovations,</li>\r\n                                                <li><i>Trademarks</i> for branding,</li>\r\n                                                <li><i>Registered</i> Designs for the look and feel of a product,</li>\r\n                                                <li><i>Copyright</i> for creative works such as instruction manuals or\r\n                                                    software code.\r\n                                                </li>\r\n                                            </ol>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Registered vs. unregistered rights\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    There are differences in strength of registered vs unregistered\r\n                                                    rights, as well as their costs and timescales. Its important to\r\n                                                    choose the right option for your business.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Application vs. granted rights\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    When discussing registered rights, always be clear whether you have\r\n                                                    made an application for rights, or actually have granted rights.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Assessing risk - registrability searching vs Freedom To Operate (FTO)\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    Owning a registered right, be it a trade mark, patent or registered\r\n                                                    design, does not mean that you automatically have the right to use\r\n                                                    it.\r\n                                                </li>\r\n                                                <li>\r\n                                                    Two types of searching are therefore common with IP. The first is\r\n                                                    performed to understand the chances of your application passing the\r\n                                                    registration process (i.e. patentability searching or trade mark\r\n                                                    registrability searching), whilst the second considers whether your\r\n                                                    proposed commercial activities will be impacted by pre-existing\r\n                                                    rights.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            IP rights are jurisdictional\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    IP rights are only enforceable in the country or region they have\r\n                                                    been granted.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                    </ol>\r\n                                </Typography>\r\n                                <br/>\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    The UK IPO (Intellectual Property Office) provide funding for IP audits and support\r\n                                    for start-ups. <b>For more information on accessing IP audit funding in the South West,\r\n                                    follow this link</b>&nbsp;\r\n                                    <a\r\n                                        href=\"https://www.businesswest.co.uk/about/partners-programmes/innovate2succeed\"\r\n                                        target=\"_blank\"\r\n                                    >\r\n                                        Innovate UK EDGE | Business West\r\n                                    </a>.\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        keltieDocuments.map((document: any) => (\r\n                                            <CustomLink\r\n                                                key={document.name}\r\n                                                url={document.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {document.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Training (videos) */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Training\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"30px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        keltieVideos.map((video: any, index: number) =>\r\n                                            <Box\r\n                                                key={index}\r\n                                                marginBottom=\"20px\"\r\n                                            >\r\n                                                <Row\r\n                                                    style={{\r\n                                                        width: \"100%\"\r\n                                                    }}\r\n                                                >\r\n                                                    <Col\r\n                                                        xs={12}\r\n                                                        sm={12}\r\n                                                        md={4}\r\n                                                        lg={3}\r\n                                                    >\r\n                                                        <ReactPlayer\r\n                                                            url={video.url}\r\n                                                            height=\"auto\"\r\n                                                            width=\"100%\"\r\n                                                            playing={false}\r\n                                                            controls={true}\r\n                                                        />\r\n                                                    </Col>\r\n                                                    <Col\r\n                                                        xs={12}\r\n                                                        sm={12}\r\n                                                        md={8}\r\n                                                        lg={9}\r\n                                                    >\r\n                                                        <Typography\r\n                                                            variant=\"subtitle1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            <b>{video.name}</b>\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Box>\r\n                                        )\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    Keltie is an intellectual property firm with a unique personality. A firm that’s\r\n                                    renowned for its excellence, earned by putting talented, energetic and principled\r\n                                    people at its heart.\r\n                                    <br/><br/>\r\n                                    Based in Europe but with global reach, we specialise in IP law and management. Our\r\n                                    clients benefit from an extraordinarily experienced and multi-faceted group of IP\r\n                                    experts. Our team includes patent, trade mark and design attorneys who work on every\r\n                                    technology and in all commercial fields.\r\n                                    <br/><br/>\r\n                                    Sullivan Fountain and Richard Lawrence at the Keltie Cotswolds office serve the\r\n                                    South West region and would be delighted to discuss your IP challenges further.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"row\"\r\n                                    justifyContent=\"center\"\r\n                                >\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={keltieLogo}\r\n                                                alt=\"Keltie logo\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com/staff/sullivan-fountain.html\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={sullivanFountainImg}\r\n                                                alt=\"Sullivan Fountain\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com/staff/richard-lawrence.html\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={richardLawrenceImg}\r\n                                                alt=\"Richard Lawrence\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#52155A\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Keltie LLP\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"sullivan.fountain@keltie.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Keltie);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Card, colors, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {Resource} from \"./Resources\";\r\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface ResourceItemProps {\r\n    resource: Resource;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nclass ResourceItem extends Component<ResourceItemProps, any> {\r\n    render() {\r\n        const {\r\n            resource,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            marginY=\"18px\"\r\n        >\r\n            <Card>\r\n                <CustomLink\r\n                    url={Routes.constructViewResourceDetailRoute(\r\n                        ManageGroupUrlState.groupNameFromUrl ?? null, resource.name)}\r\n                    color=\"black\"\r\n                    activeColor=\"none\"\r\n                    activeUnderline={false}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Box>\r\n                            <Box\r\n                                display=\"flex\"\r\n                                height=\"220px\"\r\n                                justifyContent=\"center\"\r\n                                bgcolor={colors.grey[\"200\"]}\r\n                            >\r\n                                <Image\r\n                                    alt={`${resource.name} logo`}\r\n                                    src={resource.logo}\r\n                                    height=\"auto\"\r\n                                    width=\"100%\"\r\n                                    style={{\r\n                                        padding: 40,\r\n                                        objectFit: \"scale-down\"\r\n                                    }}\r\n                                />\r\n                            </Box>\r\n\r\n                            <Box\r\n                                paddingX=\"18px\"\r\n                                paddingY=\"20px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"subtitle1\"\r\n                                    align=\"center\"\r\n                                    noWrap\r\n                                >\r\n                                    <b>{resource.name}</b>\r\n                                </Typography>\r\n                            </Box>\r\n                        </Box>\r\n                    }\r\n                />\r\n            </Card>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\n\r\ninterface FounderCatalystProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\ninterface FounderCatalystResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst founderCatalystLogo: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`;\r\nconst justynWaterworthImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/justyn-waterworth.jpeg`;\r\nconst samSimpsonImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/sam-simpson.jpeg`;\r\nconst charlesFrankImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/charles-frank.jpeg`;\r\n\r\nconst founderCatalystResources: FounderCatalystResource[] = [\r\n    {\r\n        name: \"Model Articles of Association\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-articles-of-association.pdf`\r\n    },\r\n    {\r\n        name: \"Model Board Minutes\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-board-minutes.pdf`\r\n    },\r\n    {\r\n        name: \"Model Subscription & Shareholders’ Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-subscription-and-shareholder-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model Founder Service Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-founder-service-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model IP Assignment\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-ip-assignment.pdf`\r\n    },\r\n    {\r\n        name: \"Model Disclosure Letter\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-disclosure-letter.pdf`\r\n    },\r\n    {\r\n        name: \"Model Non-disclosure Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-non-disclosure-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model Term Sheet\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-term-sheet.pdf`\r\n    }\r\n];\r\n\r\nclass FounderCatalyst extends Component<FounderCatalystProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        width: \"100%\"\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={5}\r\n                                        lg={4}\r\n                                        xl={3}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"center\"\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Image\r\n                                                src={founderCatalystLogo}\r\n                                                alt=\"Founder Catalyst Logo\"\r\n                                                width=\"100%\"\r\n                                                height=\"auto\"\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        </Box>\r\n                                    </Col>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={7}\r\n                                        lg={8}\r\n                                        xl={9}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"column\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"start\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Box\r\n                                                marginY=\"30px\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h4\"\r\n                                                    align=\"left\"\r\n                                                >\r\n                                                    Founder Catalyst\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                align=\"left\"\r\n                                            >\r\n                                                Legal paperwork for founders raising investment.\r\n                                                <br/><br/>\r\n                                                A collection of resources to help entrepreneurs better understand the\r\n                                                legal requirements when equity fundraising. This content is kindly\r\n                                                provided by our friends at FounderCatalyst.\r\n                                                <br/><br/>\r\n                                                When raising investment for your business, the legal journey can be\r\n                                                slow,\r\n                                                frustrating and expensive. When do you need a lawyer? How do you find a\r\n                                                good one? How can you afford them? This page aims to demystify some of\r\n                                                the process by showing you what documents you and your investors likely\r\n                                                to need as part of your fund-raising process.\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Tips */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    8 reasons why founders use FounderCatalyst’s platform\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <ol>\r\n                                        <li>\r\n                                            Save over £3,500. The traditional lawyer approach costs between £5,000 to\r\n                                            £10,000. FounderCatalyst is £1,495 plus VAT, fixed!\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Simplifying the legal process. The FounderCatalyst platform is designed for\r\n                                            founders, to be as simple and intuitive to use as possible. The platform\r\n                                            works by asking you a series of questions in a logical order, with detailed\r\n                                            explanations alongside.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Up-to-date legal documents. Trusted documents based on the British Venture\r\n                                            Capital Association’s (BVCA) model documents, used by many of the UK’s\r\n                                            leading law firms.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            By using the FounderCatalyst platform, angel investors know you are more\r\n                                            likely to be ‘investment ready’ and due diligence will be easier. A real\r\n                                            differentiator for you in the crowded funding market.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Time is risk. The conventional legal approach can be slow and frustrating.\r\n                                            By using the FounderCatalyst platform, get your legals completed in as\r\n                                            little as 30 minutes. Updates in minutes rather than days. Deal momentum is\r\n                                            key to your funding success.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Unsure and still want to use an advisor? No problem. By using both founder\r\n                                            and advisor roles on the platform, your trusted advisor can help as much or\r\n                                            as little as you want – so you still achieve significant time and cost\r\n                                            savings.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            EIS and SEIS advance assurance a must? Proven expertise on hand to help you\r\n                                            achieve this important tax relief for your investors, at no extra charge.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Invest West has negotiated a further 10% discount for our members. Please\r\n                                            sign up via the button below to receive your discount.\r\n                                            <br/><br/>\r\n                                            <CustomLink\r\n                                                url=\"http://www.foundercatalyst.com/v/INVESTWEST\"\r\n                                                target=\"_blank\"\r\n                                                color=\"none\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={false}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        bgcolor=\"#31C2DE\"\r\n                                                        color=\"white\"\r\n                                                        clone\r\n                                                    >\r\n                                                        <Button\r\n                                                            variant=\"contained\"\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                        >\r\n                                                            10% Discount\r\n                                                        </Button>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        </li>\r\n                                    </ol>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What documents are you and your investors likely to need?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <ol>\r\n                                        <li>\r\n                                            <b>Initial Term Sheet:</b> this summarises all the key points of the deal\r\n                                            you are offering to potential investors.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Founder Service Agreement:</b> one for each founder - it is an agreement\r\n                                            between you and the company, very similar to an employment contract.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>IP Assignment Letter:</b> this ensures that all intellectual property\r\n                                            relevant to the company has been transferred by you and other founders to\r\n                                            the company itself.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Subscription and Shareholders' Agreement (SSA):</b> this document details\r\n                                            the agreement between you and your fellow founders, the company, any\r\n                                            existing shareholders and your new investors.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Articles of Association:</b> this document works alongside the SSA and\r\n                                            contains the company's constitution.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Cap Table:</b> one for before investment and one for after. These\r\n                                            provide details of your current and future shareholders.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Resolutions:</b> for both shareholders and directors. These formally\r\n                                            allow the company to take on the new investment you are seeking.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Disclosure Letter:</b> this enables you to formally disclose any issues\r\n                                            relating to your business to your potential investors.\r\n                                        </li>\r\n                                    </ol>\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        founderCatalystResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    FounderCatalyst was created by a team of successful entrepreneurs, angel investors\r\n                                    and lawyers to simplify and accelerate the early-stage investment legal journey.\r\n                                    <br/><br/>\r\n                                    FounderCatalyst’s aim is to be the trusted legal platform of choice, simplifying and\r\n                                    managing the funding process, raising everyone’s chances of success.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"row\"\r\n                                    justifyContent=\"center\"\r\n                                >\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/justynwaterworth/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={justynWaterworthImg}\r\n                                                alt=\"Justyn Waterworth\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/samsimpson1/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={samSimpsonImg}\r\n                                                alt=\"Sam Simpson\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/charlesfrankspeechlys/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={charlesFrankImg}\r\n                                                alt=\"Charles Frank\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#31C2DE\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Founder Catalyst\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"justyn@foundercatalyst.com\", \"sam@foundercatalyst.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FounderCatalyst);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\ninterface GrantFundingProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\nconst grantFundingLogo: string = `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`;\r\n\r\ninterface GrantFundingResource {\r\n    name: string;\r\n    url: string;\r\n    img: string;\r\n}\r\n\r\nconst grantFundingResources: GrantFundingResource[] = [\r\n    {\r\n        name: \"Our Services Brochure\",\r\n        url: \"https://drive.google.com/open?id=1-GiFZT-maCglNUo-7UWJrezpXL64hLz2\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/our-services-brochure.png`\r\n    },\r\n    {\r\n        name: \"The Grant Report 2020\",\r\n        url: \"https://drive.google.com/open?id=1Wz-1dDroReh4s7UspQTQJ-tSafNnv7eg\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/the-grant-report-2020.png`\r\n    },\r\n    {\r\n        name: \"Blog - Are You Missing Out on R&D Tax Credits?\",\r\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-are-you-missing-out-on-rd-tax-credits.png`\r\n    },\r\n    {\r\n        name: \"Blog - When is the Right Time to Apply for Grant Funding?\",\r\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-when-is-the-right-time-to-apply-for-grant-funding.png`\r\n    },\r\n    {\r\n        name: \"Granted Consultancy Introduction\",\r\n        url: \"https://vimeo.com/317446864\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/granted-consultancy-introduction.png`\r\n    },\r\n    {\r\n        name: \"How to Know If Your Project is Eligible for R&D Grant Funding\",\r\n        url: \"https://vimeo.com/317450389\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/how-to-know-if-your-project-is-eligible-for-rd-grant-funding.png`\r\n    }\r\n];\r\n\r\nclass GrantFunding extends Component<GrantFundingProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h4\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Grant Funding\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What are the Benefits of Grant Funding?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        There are two main types of grants:\r\n                                        <ol>\r\n                                            <li>\r\n                                                Capital/Business Growth grants and\r\n                                            </li>\r\n                                            <li>\r\n                                                R&D grants.\r\n                                            </li>\r\n                                        </ol>\r\n                                        Using Business Growth grants enables bigger, more impactful projects to be\r\n                                        realised by covering capital expenditure e.g. buildings or machinery, with\r\n                                        project success often being predicated on job growth.\r\n                                        <br/><br/>\r\n                                        Research and Development (R&D) grants allow a significant reduction in an\r\n                                        innovative product’s time to market, beating the competition and establishing\r\n                                        first-to-market status. This can have a pronounced impact on your business\r\n                                        through the increase of commercial returns and subsequent business growth.\r\n                                        <br/><br/>\r\n                                        Other benefits of grant funding include:\r\n                                        <br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                No Debt - no costs or need to provide security\r\n                                            </li>\r\n                                            <li>\r\n                                                No Equity giveaway - ensuring you retain control\r\n                                            </li>\r\n                                            <li>\r\n                                                Access to Partners – funding may cover the costs of academic and\r\n                                                commercial experts and attract renowned organisations\r\n                                            </li>\r\n                                            <li>\r\n                                                External Validation – via a competitive process that has been\r\n                                                scrutinised, supporting later access to investors.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    How do you know you are eligible for an R&D grant?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"10px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        The main focus when applying for R&D grant funding should be on the outputs of a\r\n                                        defined project. There are typically four categories for assessing project\r\n                                        eligibility:\r\n                                        <br/>\r\n                                        <ol>\r\n                                            <li>\r\n                                                <b>Innovation</b> - Is your R&D project novel, disruptive and innovative\r\n                                                with wider economic, social and environmental impacts?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Scalable</b> - Does your project have high commercial growth (and\r\n                                                ideally\r\n                                                export) potential?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>IP Assignment Letter:</b> this ensures that all intellectual property\r\n                                                relevant to the company has been transferred by you and other founders\r\n                                                to\r\n                                                the company itself.\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Funding</b> - are you seeking £50k-£5m funding for feasibility,\r\n                                                prototyping and/or testing?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Business</b> - Have you proven the concept, put a team of (UK/EU)\r\n                                                experts in place and investigated IP protection?\r\n                                            </li>\r\n                                        </ol>\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What Does the Application Process Typically Look Like?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        As a guide, it typically takes between 9-12 months from engaging with Granted\r\n                                        Consultancy to first drawdown of grant funds. The process involves taking into\r\n                                        account finding the right funding competition, developing the application,\r\n                                        waiting during the assessment window, progressing through due diligence and then\r\n                                        completing project kick off.\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Why Use a Grant Funding Consultancy?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        There are many different factors that will improve your chance of grant funding\r\n                                        success; a grant funding consultancy will know where to find suitable funding,\r\n                                        how to access it successfully and how to use it to best effect. Granted let you\r\n                                        focus on your business, saving you time while we write the grant application for\r\n                                        you.\r\n                                        <br/><br/>\r\n                                        A good consultancy will have pertinent sector expertise, the ability to upskill\r\n                                        at a rapid pace in new technologies, and experience of working with companies of\r\n                                        all sizes.\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        grantFundingResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <Image\r\n                                                            src={resource.img}\r\n                                                            alt={resource.name}\r\n                                                            style={{\r\n                                                                objectFit: \"cover\"\r\n                                                            }}\r\n                                                        />\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    Granted Consultancy are an in-house team of funding specialists with a demonstrable\r\n                                    10-year track record of securing non-dilutive funding for innovative companies,\r\n                                    raising over £85m in grant funding and £2.5m in R&D Tax Credits for clients.\r\n                                    <br/><br/>\r\n                                    Our full range of non-dilutive funding services (grant writing, project management,\r\n                                    training and R&D tax credit support) allow our clients to focus on their business.\r\n                                    Our experience covers the full lifespan of business maturities, from start-ups to\r\n                                    multinationals.\r\n                                    <br/><br/>\r\n                                    Granted Consultancy’s expertise spans a variety of cutting-edge technologies with a\r\n                                    focus on four key areas:\r\n                                    <ul>\r\n                                        <li>\r\n                                            AI, Digital and Data\r\n                                        </li>\r\n                                        <li>\r\n                                            Clean-tech and Agri-tech\r\n                                        </li>\r\n                                        <li>\r\n                                            Health, Life Sciences and Education\r\n                                        </li>\r\n                                        <li>\r\n                                            Manufacturing, Mobility and Materials\r\n                                        </li>\r\n                                    </ul>\r\n                                    <br/><br/>\r\n                                    The Granted team thrives on learning about new technologies, innovative business\r\n                                    models and the people behind them – then taking that information and translating it\r\n                                    into a language and format that funders can understand.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box>\r\n                                    <CustomLink\r\n                                        url=\"https://grantedltd.co.uk\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={grantFundingLogo}\r\n                                                alt=\"logo\"\r\n                                                width={MediaQueryState.isMobile ? \"100%\" : 400}\r\n                                                height=\"100%\"\r\n                                                style={{\r\n                                                    objectFit: \"contain\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body1\"\r\n                                >\r\n                                    <b>Get in touch! </b>\r\n                                    <br/>\r\n                                    If you have an R&D project that you would like to explore funding for,\r\n                                </Typography>\r\n\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                    marginTop=\"25px\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#8DC341\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Grant Funding\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"info@grantedltd.co.uk\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GrantFunding);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\ninterface MerixStudioProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\nconst MerixSolution: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-1.png`;\r\nconst MerixSolution3: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-4.jpg`;\r\n\r\n\r\n\r\ninterface MerixStudioResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst MerixStudioResources: MerixStudioResource[] = [\r\n    {\r\n        name: \"Minimum Viable Product uncovered\",\r\n        url: \"https://content.merixstudio.com/insights/minimum-viable-product-uncovered-what-it-really-an/?theme=startups\"\r\n    },\r\n    {\r\n        name: \"The right solution for your product launch\",\r\n        url: \"https://learn.merixstudio.com/product-launch-ebook\"\r\n    },\r\n    {\r\n        name: \"Startup DNA\",\r\n        url: \"https://www.merixstudio.com/services/startup-dna/\"\r\n    },\r\n    {\r\n        name: \"How to launch with a bang\",\r\n        url: \"https://content.merixstudio.com/insights/how-to-launch-a-product-with-a-bang/\"\r\n    },\r\n    {\r\n        name: \"State of early-stage startups 2021\",\r\n        url: \"https://content.merixstudio.com/insights/early-stage-startups-2021-report/\"\r\n    },\r\n    {\r\n        name: \"Startup DNA, turn your idea into a prototype\",\r\n        url: \"https://content.merixstudio.com/insights/startup-dna-turn-your-idea-prototype/\"\r\n    },\r\n    {\r\n        name: \"If you're passionate about an idea give it a try\",\r\n        url: \"https://content.merixstudio.com/insights/if-youre-passionate-about-an-idea-give-it-a-try-in/\"\r\n    },\r\n    {\r\n        name: \"Prototype is just one piece of the puzzle\",\r\n        url: \"https://content.merixstudio.com/insights/prototype-just-one-piece-puzzle-interview-truman-d/\"\r\n    },\r\n    {\r\n        name: \"Pimp your pitch deck\",\r\n        url: \"https://content.merixstudio.com/insights/pimp-your-pitch-deck/\"\r\n    },\r\n    {\r\n        name: \"Building prototype in a UK based startup\",\r\n        url: \"https://content.merixstudio.com/insights/building-prototype-uk-based-startup/\"\r\n    },\r\n];\r\n\r\nclass MerixStudio extends Component<MerixStudioProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box padding=\"20px\">\r\n                            {/** Header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\r\n                                <Typography variant=\"h4\" align=\"left\">\r\n                                    Merixstudio\r\n                                </Typography>\r\n                            </Box>\r\n                            <Box>\r\n                                <Typography align=\"left\" variant=\"body1\">\r\n                                    Merixstudio’s key expertise is the delivery of high-quality and performant web applications and cross-platform mobile apps. Based on the needs of our clients, we can support them in end-to-end product development or seamlessly extend their in-house team of engineers.\r\n\r\n                                </Typography>\r\n                                <CustomLink\r\n                                    url=\"https://www.merixstudio.com/contact/\"\r\n                                    target=\"_blank\"\r\n                                    color=\"none\"\r\n                                    activeColor=\"none\"\r\n                                    activeUnderline={false}\r\n                                    component=\"a\"\r\n                                    childComponent={\r\n                                        <Box bgcolor=\"#31C2DE\" color=\"white\" marginY=\"20px\" clone>\r\n                                            <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)}>\r\n                                                Contact Us\r\n                                            </Button>\r\n                                        </Box>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Box marginY=\"30px\">\r\n                                    <Typography variant=\"h6\" align=\"left\">\r\n                                        The right solution for your product launch\r\n                                    </Typography>\r\n                                </Box>\r\n                                    <Typography variant=\"body1\" align=\"center\">\r\n                                        THE ULTIMATE GUIDE TO COMPOSING\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"center\">\r\n                                        THE RIGHT SOLUTION FOR YOUR PRODUCT LAUNCH\r\n                                    </Typography>\r\n                                <Box marginY=\"30px\">\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                    Although similar at first glance, the three concepts differ considerably - especially in terms of the purpose each of them serves. The choice of which one to start with depends on many factors, including your current state of knowledge or the budget you can spend on a given project.\r\n                                    </Typography>\r\n                                </Box>\r\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution} alt=\"Merix image\"/>\r\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution3} alt=\"Merix image\"/>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        MerixStudioResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    <br/><br/>\r\n                                    Merixstudio’s key expertise is the delivery of high-quality and performant web applications\r\n                                    and cross-platform mobile apps. Based on the needs of our clients, we can support them in\r\n                                    end-to-end product development or seamlessly extend their in-house team of engineers.\r\n                                    <br/><br/>\r\n                                    <ul>\r\n                                        <li>\r\n                                            200+ engineers\r\n                                        </li>\r\n                                        <li>\r\n                                            250 clients supported\r\n                                        </li>\r\n                                    </ul>\r\n                                </Typography>\r\n\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body1\"\r\n                                >\r\n                                    <b>Get in touch!</b>\r\n                                    <br/>\r\n                                </Typography>\r\n\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                    marginTop=\"25px\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#8DC341\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Merix Studio\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"g.spychalski@merixstudio.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"j.kubczak@merixstudio.com\"\r\n                        : \"support@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MerixStudio);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport Keltie from \"./pages/keltie/Keltie\";\r\nimport {Box, Card, Typography} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport ResourceItem from \"./ResourceItem\";\r\nimport FounderCatalyst from \"./pages/founder-catalyst/FounderCatalyst\";\r\nimport GrantFunding from \"./pages/grant-funding/GrantFunding\";\r\nimport MerixStudio from \"./pages/merix-studio/merixStudio\";\r\n\r\n\r\ninterface ResourcesProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nexport interface Resource {\r\n    name: string;\r\n    logo: string;\r\n    page: React.ReactNode;\r\n}\r\n\r\nexport const resources: Resource[] = [\r\n    {\r\n        name: \"Intellectual Property\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`,\r\n        page: <Keltie/>\r\n    },\r\n    {\r\n        name: \"Fundraising Legals\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`,\r\n        page: <FounderCatalyst/>\r\n    },\r\n    {\r\n        name: \"Grant Funding\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`,\r\n        page: <GrantFunding/>\r\n    },\r\n    {\r\n        name: \"Product Development\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/merix-studio/merix-logo.png`,\r\n        page: <MerixStudio/>\r\n    }\r\n];\r\n\r\nclass Resources extends Component<ResourcesProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 8, offset: 2}}\r\n                    lg={{span: 4, offset: 4}}\r\n                >\r\n                    <Card\r\n                        elevation={0}\r\n                    >\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            alignItems=\"center\"\r\n                            bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            color=\"white\"\r\n                            paddingY=\"28px\"\r\n                        >\r\n                            <Typography\r\n                                variant=\"h6\"\r\n                                align=\"center\"\r\n                            >\r\n                                Resources on Invest West\r\n                            </Typography>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Loader */}\r\n            {/*{*/}\r\n            {/*    !isFetchingGroups(ExploreGroupsLocalState)*/}\r\n            {/*        ? null*/}\r\n            {/*        : <Row*/}\r\n            {/*            noGutters*/}\r\n            {/*        >*/}\r\n            {/*            <Col*/}\r\n            {/*                xs={12}*/}\r\n            {/*                sm={12}*/}\r\n            {/*                md={12}*/}\r\n            {/*                lg={12}*/}\r\n            {/*            >*/}\r\n            {/*                <Box*/}\r\n            {/*                    display=\"flex\"*/}\r\n            {/*                    marginY=\"80px\"*/}\r\n            {/*                    justifyContent=\"center\"*/}\r\n            {/*                >*/}\r\n            {/*                    <BeatLoader*/}\r\n            {/*                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}*/}\r\n            {/*                    />*/}\r\n            {/*                </Box>*/}\r\n            {/*            </Col>*/}\r\n            {/*        </Row>*/}\r\n            {/*}*/}\r\n\r\n            {/** Resources area */}\r\n            <Box\r\n                marginTop=\"30px\"\r\n            >\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    <Col\r\n                        xs={12}\r\n                        sm={12}\r\n                        md={12}\r\n                        lg={12}\r\n                    >\r\n                        <Row>\r\n                            {\r\n                                resources\r\n                                    .map(resource =>\r\n                                        <Col\r\n                                            key={resource.name}\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={3}\r\n                                        >\r\n                                            <ResourceItem\r\n                                                resource={resource}\r\n                                            />\r\n                                        </Col>\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Box>\r\n\r\n            {/** Pagination */}\r\n            {/*{*/}\r\n            {/*    // !successfullyFetchedGroups(ExploreGroupsLocalState)*/}\r\n            {/*    //     ? null*/}\r\n            {/*    //     : paginationPages === 1*/}\r\n            {/*    //     ? null*/}\r\n            {/*    //     :*/}\r\n            {/*        <Row*/}\r\n            {/*            noGutters*/}\r\n            {/*        >*/}\r\n            {/*            <Col*/}\r\n            {/*                xs={12}*/}\r\n            {/*                sm={12}*/}\r\n            {/*                md={12}*/}\r\n            {/*                lg={12}*/}\r\n            {/*            >*/}\r\n            {/*                <Box*/}\r\n            {/*                    display=\"flex\"*/}\r\n            {/*                    justifyContent=\"center\"*/}\r\n            {/*                    marginTop=\"55px\"*/}\r\n            {/*                >*/}\r\n            {/*                    <Pagination*/}\r\n            {/*                        count={0}*/}\r\n            {/*                        page={0}*/}\r\n            {/*                        color=\"primary\"*/}\r\n            {/*                        //onChange={}*/}\r\n            {/*                    />*/}\r\n            {/*                </Box>*/}\r\n            {/*            </Col>*/}\r\n            {/*        </Row>*/}\r\n            {/*}*/}\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Resources);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport Sidebar from \"react-sidebar\";\r\nimport {Badge, IconButton, Typography} from \"@material-ui/core\";\r\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport Menu from \"@material-ui/icons/Menu\";\r\nimport {HashLoader} from \"react-spinners\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\n\r\nimport UploadingDialog from \"../../shared-components/uploading-dialog/UploadingDialog\";\r\nimport EditImageDialog from \"../../shared-components/edit-image/EditImageDialog\";\r\nimport EditVideoDialog from \"../../shared-components/edit-video/EditVideoDialog\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport ChangePasswordPage from \"../../shared-components/change-password/ChangePasswordPage\";\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    HOME_TAB,\r\n    MY_OFFERS_TAB,\r\n    PROFILE_TAB,\r\n    RESOURCES_TAB\r\n} from \"../../shared-components/nav-bars/SidebarContent\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport ProfileTab from \"../../shared-components/profile/Profile\";\r\nimport NotificationsBox from \"../../shared-components/notifications/NotificationsBox\";\r\n\r\nimport * as colors from \"../../values/colors\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport queryString from \"query-string\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\r\nimport * as editUserActions from \"../../redux-store/actions/editUserActions\";\r\nimport * as notificationsActions from \"../../redux-store/actions/notificationsActions\";\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event))\r\n    }\r\n};\r\n\r\nclass IssuerDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_ISSUER : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            user,\r\n            editUserProfile_userEdited,\r\n\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser\r\n        } = this.props;\r\n\r\n        if (!user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\r\n            return;\r\n        }\r\n\r\n        if (!editUserProfile_userEdited) {\r\n            // initialize a copied instance of the user for editing\r\n            editUserProfile_setOriginalUserAndEditedUser(user);\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(user);\r\n    };\r\n\r\n    /**\r\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\r\n     */\r\n    renderPageContent = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * MY OFFERS TAB\r\n         */\r\n        if (params.tab === MY_OFFERS_TAB) {\r\n            return (\r\n                <div\r\n                    style={{\r\n                        margin: 30\r\n                    }}\r\n                >\r\n                    <OffersTable/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * PROFILE TAB\r\n         */\r\n        if (params.tab === PROFILE_TAB) {\r\n            return (\r\n                <ProfileTab/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroupsTab/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     */\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n\r\n            notifications,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Sidebar\r\n                sidebar={\r\n                    <SidebarContent dashboardProps={this.props}/>\r\n                }\r\n                shadow={false}\r\n                open={sidebarOpen}\r\n                docked={sidebarDocked}\r\n                onSetOpen={() => toggleSidebar(true)}\r\n                transitions\r\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}\r\n                }}>\r\n\r\n                <Container fluid style={{padding: 0}}>\r\n                    {/** Header */}\r\n                    <Row noGutters>\r\n                        <Col xs={12} sm={12} md={12} lg={12}>\r\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                                style={{\r\n                                    backgroundColor:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}>\r\n\r\n                                <Row style={{width: \"100%\"}} noGutters>\r\n                                    <Col xs={10} sm={10} md={11} lg={11}>\r\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                            {\r\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                    <Menu/>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                this.renderPageTitle()\r\n                                            }\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                            <IconButton onClick={toggleNotifications}>\r\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                                </Badge>\r\n                                            </IconButton>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {\r\n                        this.renderPageContent()\r\n                    }\r\n\r\n                    {/** Notifications box */}\r\n                    <NotificationsBox/>\r\n\r\n                    {/** Uploading dialog */}\r\n                    <UploadingDialog/>\r\n\r\n                    {/** Edit image dialog */}\r\n                    <EditImageDialog/>\r\n\r\n                    {/** Edit video dialog */}\r\n                    <EditVideoDialog/>\r\n                </Container>\r\n            </Sidebar>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the title of the page\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = \"\";\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case MY_OFFERS_TAB:\r\n                title = MY_OFFERS_TAB;\r\n                break;\r\n            case PROFILE_TAB:\r\n                title = PROFILE_TAB;\r\n                break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IssuerDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    }\r\n});\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport Sidebar from 'react-sidebar';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {Badge, IconButton, Typography} from '@material-ui/core';\r\nimport Menu from '@material-ui/icons/Menu';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    HOME_TAB,\r\n    PROFILE_TAB,\r\n    RESOURCES_TAB,\r\n} from '../../shared-components/nav-bars/SidebarContent';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport ProfileTab from '../../shared-components/profile/Profile';\r\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\r\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\r\nimport UploadingDialog from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport EditImageDialog from '../../shared-components/edit-image/EditImageDialog';\r\nimport UploadVideoDialog from '../../shared-components/edit-video/EditVideoDialog';\r\n\r\nimport queryString from 'query-string';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event))\r\n    }\r\n};\r\n\r\nclass InvestorDashboard extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_INVESTOR : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            user,\r\n            editUserProfile_userEdited,\r\n\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser\r\n        } = this.props;\r\n\r\n        if (!user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\r\n            return;\r\n        }\r\n\r\n        if (!editUserProfile_userEdited) {\r\n            // initialize a copied instance of the user for editing\r\n            editUserProfile_setOriginalUserAndEditedUser(user);\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(user);\r\n    };\r\n\r\n    /**\r\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\r\n     */\r\n    renderPageContent = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * PROFILE TAB\r\n         */\r\n        if (params.tab === PROFILE_TAB) {\r\n            return (\r\n                <ProfileTab/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroupsTab/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n\r\n            notifications,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Sidebar\r\n                sidebar={\r\n                    <SidebarContent dashboardProps={this.props}/>\r\n                }\r\n                open={sidebarOpen}\r\n                docked={sidebarDocked}\r\n                onSetOpen={() => toggleSidebar(true)}\r\n                transitions\r\n                shadow={false}\r\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}}}>\r\n\r\n                <Container fluid style={{padding: 0}}>\r\n                    {/** Header */}\r\n                    <Row noGutters>\r\n                        <Col xs={12} sm={12} md={12} lg={12}>\r\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                                style={{\r\n                                    backgroundColor:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}>\r\n                                <Row noGutters style={{width: \"100%\"}}>\r\n                                    {/** Page title */}\r\n                                    <Col xs={10} sm={10} md={11} lg={11}>\r\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                            {\r\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                    <Menu/>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                this.renderPageTitle()\r\n                                            }\r\n                                        </FlexView>\r\n                                    </Col>\r\n\r\n                                    {/** Notification icon */}\r\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                            <IconButton onClick={toggleNotifications}>\r\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                                </Badge>\r\n                                            </IconButton>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {\r\n                        this.renderPageContent()\r\n                    }\r\n\r\n                    {/** Notifications box */}\r\n                    <NotificationsBox/>\r\n\r\n                    {/** Uploading dialog */}\r\n                    <UploadingDialog/>\r\n\r\n                    {/** Edit image dialog */}\r\n                    <EditImageDialog/>\r\n\r\n                    {/** Upload video dialog */}\r\n                    <UploadVideoDialog/>\r\n\r\n                </Container>\r\n            </Sidebar>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render page's title\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = '';\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case PROFILE_TAB:\r\n                title = PROFILE_TAB;\r\n                break;\r\n            // case MY_PLEDGES_TAB:\r\n            //     title = MY_PLEDGES_TAB;\r\n            //     break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvestorDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    }\r\n});","import axios from \"axios\";\r\nimport {ApiRoutes} from \"../api/Api.tsx\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\n\r\n/**\r\n * Check is an email address is valid\r\n *\r\n * @param email\r\n * @returns {boolean}\r\n */\r\nexport const isValidEmailAddress = (email) => {\r\n    let RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return RegExp.test(email.trim().toLowerCase());\r\n}\r\n\r\nexport const EMAIL_ENQUIRY = 0;\r\nexport const EMAIL_INVITATION = 1;\r\n\r\nexport const sendEmail = async (\r\n    {\r\n        serverURL,\r\n        emailType,\r\n        data\r\n    }\r\n) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let requestConfig = {};\r\n\r\n        try {\r\n            // make authenticated request when sending invitation email\r\n            if (emailType === EMAIL_INVITATION) {\r\n                // get current user's id token\r\n                const idToken = await firebase.auth().currentUser.getIdToken(true);\r\n\r\n                requestConfig = {\r\n                    headers: {\r\n                        'Authorization': idToken\r\n                    }\r\n                };\r\n            }\r\n\r\n            await axios\r\n                .post(\r\n                    `${serverURL}${ApiRoutes.sendEmailRoute}`,\r\n                    {\r\n                        emailType,\r\n                        emailInfo: data\r\n                    },\r\n                    requestConfig\r\n                );\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as myUtils from '../../utils/utils';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport {\r\n    SEND_INVITATION_ERROR_HAPPENED,\r\n    SEND_INVITATION_INVITED_BEFORE,\r\n    SEND_INVITATION_PROCESSING,\r\n    SEND_INVITATION_SUCCESS,\r\n    SEND_INVITATION_USER_CANNOT_BE_INVITED\r\n} from '../../pages/admin/components/InvitationDialog';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nexport const TOGGLE_INVITATION_DIALOG = 'TOGGLE_INVITATION_DIALOG';\r\nexport const toggleInvitationDialog = () => {\r\n    return {\r\n        type: TOGGLE_INVITATION_DIALOG\r\n    }\r\n};\r\n\r\nexport const INVITATION_DIALOG_INPUT_CHANGED = 'INVITATION_DIALOG_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return {\r\n        type: INVITATION_DIALOG_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const INVITATION_DIALOG_SEND_BUTTON_CLICKED = 'INVITATION_DIALOG_SEND_BUTTON_CLICKED';\r\nexport const INVITATION_DIALOG_SEND_RESULT_CHANGED = 'INVITATION_DIALOG_SEND_RESULT_CHANGED';\r\nexport const sendInvitation = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: INVITATION_DIALOG_SEND_BUTTON_CLICKED\r\n        });\r\n\r\n        const {\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            userType\r\n        } = getState().manageInvitationDialog;\r\n\r\n        if (title === DB_CONST.USER_TITLES[0]\r\n            || firstName.trim().length === 0\r\n            || lastName.trim().length === 0\r\n            || email.trim().length === 0\r\n            || userType.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n            result: SEND_INVITATION_PROCESSING\r\n        });\r\n\r\n        //TODO: If the invitation has been sent to this user, check if this user belongs to this group\r\n        // If yes, display a message saying this user is already an investor/issuer in this group\r\n        // Otherwise, display a message saying this user is an investor/issuer in ABC group.\r\n        // Then, ask if the admin wants to invite this user to his group?\r\n        // Yes --> Send a notification to the user\r\n        // No --> Dismiss\r\n\r\n        const currentGroupAdmin = getState().auth.user;\r\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\r\n\r\n        realtimeDBUtils\r\n            .loadAngelNetworksInvitedAUser(email)\r\n            .then(angelNetworksInvitedUser => {\r\n\r\n                let invitedBefore = false;\r\n                let userIsAnIssuerOfAnotherGroup = false;\r\n\r\n                for (let angelNetworkInvitedUser of angelNetworksInvitedUser) {\r\n                    // user has been invited by this group before\r\n                    if (angelNetworkInvitedUser.Invitor.anid === groupProperties.anid) {\r\n                        invitedBefore = true;\r\n                        dispatch({\r\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                            result: SEND_INVITATION_INVITED_BEFORE,\r\n                            extraInfo: angelNetworkInvitedUser.Invitee\r\n                        });\r\n                        break;\r\n                    }\r\n\r\n                    // user is an issuer of another group\r\n                    if (angelNetworkInvitedUser.Invitee.type === DB_CONST.TYPE_ISSUER && angelNetworkInvitedUser.Invitor.anid !== groupProperties.anid) {\r\n                        userIsAnIssuerOfAnotherGroup = true;\r\n                        dispatch({\r\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                            result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\r\n                            extraInfo: null\r\n                        });\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (invitedBefore) {\r\n                    return;\r\n                }\r\n\r\n                if (userIsAnIssuerOfAnotherGroup) {\r\n                    return;\r\n                }\r\n\r\n                // the user has not been invited before by this group\r\n                if (!invitedBefore) {\r\n                    // check if user is an admin\r\n                    realtimeDBUtils\r\n                        .doesUserExist(email)\r\n                        .then(result => {\r\n                            // user is an admin\r\n                            if (result.userExists && result.hasOwnProperty('userIsAnAdmin') && result.userIsAnAdmin) {\r\n                                dispatch({\r\n                                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                    result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\r\n                                    extraInfo: null\r\n                                });\r\n                                return;\r\n                            }\r\n\r\n                            const invitedID = firebase\r\n                                .database()\r\n                                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                                .push()\r\n                                .key;\r\n\r\n                            const invitedUser = {\r\n                                title: title,\r\n                                firstName: firstName,\r\n                                lastName: lastName,\r\n                                email: email.toLowerCase(),\r\n                                type: parseInt(userType),\r\n                                // registered or not registered\r\n                                status: DB_CONST.INVITED_USER_NOT_REGISTERED,\r\n                                // id of this invited user\r\n                                id: invitedID,\r\n                                // date invited\r\n                                invitedDate: myUtils.getCurrentDate(),\r\n                                invitedBy: groupProperties.anid\r\n                            };\r\n\r\n                            // send invitation email via server\r\n                            emailUtils\r\n                                .sendEmail({\r\n                                    serverURL: clubAttributes.serverURL,\r\n                                    emailType: emailUtils.EMAIL_INVITATION,\r\n                                    data: {\r\n                                        groupName: groupProperties.displayName,\r\n                                        groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\r\n                                        groupWebsite: groupProperties.website,\r\n                                        groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\r\n                                        sender: currentGroupAdmin.email,\r\n                                        receiver: invitedUser.email,\r\n                                        receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\r\n                                        userType:\r\n                                            invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                                ?\r\n                                                \"Issuer\"\r\n                                                :\r\n                                                \"Investor\"\r\n                                        ,\r\n                                        signupURL:\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\r\n                                                :\r\n                                                `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\r\n                                    }\r\n                                })\r\n                                .then(() => {\r\n                                    // add invited user to firebase when the email has been successfully sent\r\n                                    firebase\r\n                                        .database()\r\n                                        .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                                        .child(invitedID)\r\n                                        .set(invitedUser)\r\n                                        .then(() => {\r\n\r\n                                            // track invitation sent activity\r\n                                            realtimeDBUtils\r\n                                                .trackActivity({\r\n                                                    userID: currentGroupAdmin.id,\r\n                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                    interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\r\n                                                    interactedObjectID: invitedUser.id,\r\n                                                    activitySummary:\r\n                                                        realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION\r\n                                                            .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\r\n                                                            .replace(\"%group%\", groupProperties.displayName)\r\n                                                            .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\r\n                                                    ,\r\n                                                    action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    ,\r\n                                                    value: invitedUser\r\n                                                });\r\n\r\n                                            dispatch({\r\n                                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                                result: SEND_INVITATION_SUCCESS,\r\n                                                extraInfo: null\r\n                                            });\r\n\r\n                                            dispatch({\r\n                                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                                message: \"Email has been sent.\",\r\n                                                color: \"primary\",\r\n                                                position: \"bottom\"\r\n                                            });\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    dispatch({\r\n                                        type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                        result: SEND_INVITATION_ERROR_HAPPENED,\r\n                                        extraInfo: null\r\n                                    });\r\n\r\n                                    dispatch({\r\n                                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                        message: \"Error happened.\",\r\n                                        color: \"error\",\r\n                                        position: \"bottom\"\r\n                                    });\r\n                                });\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                result: SEND_INVITATION_ERROR_HAPPENED,\r\n                                extraInfo: null\r\n                            });\r\n\r\n                            dispatch({\r\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                message: \"Error happened.\",\r\n                                color: \"error\",\r\n                                position: \"bottom\"\r\n                            });\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                    result: SEND_INVITATION_ERROR_HAPPENED,\r\n                    extraInfo: null\r\n                });\r\n            });\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormLabel,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as invitationDialogActions from '../../../redux-store/actions/invitationDialogActions';\r\n\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const SEND_INVITATION_NONE = 0;\r\nexport const SEND_INVITATION_PROCESSING = 1;\r\nexport const SEND_INVITATION_INVITED_BEFORE = 2;\r\nexport const SEND_INVITATION_USER_CANNOT_BE_INVITED = 3; // user is an issuer in another group or an admin\r\nexport const SEND_INVITATION_ERROR_HAPPENED = 4;\r\nexport const SEND_INVITATION_SUCCESS = 5;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        invitationDialogOpen: state.manageInvitationDialog.invitationDialogOpen,\r\n        title: state.manageInvitationDialog.title,\r\n        firstName: state.manageInvitationDialog.firstName,\r\n        lastName: state.manageInvitationDialog.lastName,\r\n        email: state.manageInvitationDialog.email,\r\n        userType: state.manageInvitationDialog.userType,\r\n        sendButtonClick: state.manageInvitationDialog.sendButtonClick,\r\n        sendResult: state.manageInvitationDialog.sendResult,\r\n        sendStatusExtraInfo: state.manageInvitationDialog.sendStatusExtraInfo\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleInputChanged: (event) => dispatch(invitationDialogActions.handleInputChanged(event)),\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog()),\r\n        sendInvitation: () => dispatch(invitationDialogActions.sendInvitation())\r\n    }\r\n};\r\n\r\nclass InvitationDialog extends Component {\r\n\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            invitationDialogOpen,\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            userType,\r\n            sendButtonClick,\r\n            sendResult,\r\n            sendStatusExtraInfo,\r\n            toggleInvitationDialog,\r\n            handleInputChanged,\r\n            sendInvitation,\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog ref={forwardedRef} open={invitationDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleInvitationDialog} {...other}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">Send invitation email</Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleInvitationDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{ marginTop: 10}}>\r\n                    <FormControl required error={sendButtonClick && title === DB_CONST.USER_TITLES[0]}>\r\n                        <FormLabel>Title</FormLabel>\r\n                        <Select name=\"title\" value={title} margin=\"dense\" input={<OutlinedInput/>} onChange={handleInputChanged}>\r\n                            {\r\n                                DB_CONST.USER_TITLES.map((title, id) => (\r\n                                    <MenuItem\r\n                                        key={id}\r\n                                        value={title}\r\n                                    >\r\n                                        {title}\r\n                                    </MenuItem>\r\n                                ))\r\n                            }\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                    <TextField\r\n                        label=\"First name\"\r\n                        placeholder=\"Write first name here ...\"\r\n                        name=\"firstName\"\r\n                        value={firstName}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && firstName.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <TextField\r\n                        label=\"Last name\"\r\n                        placeholder=\"Write last name here ...\"\r\n                        name=\"lastName\"\r\n                        value={lastName}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && lastName.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <TextField\r\n                        label=\"Email\"\r\n                        placeholder=\"Write email here ...\"\r\n                        name=\"email\"\r\n                        value={email}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && email.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <FlexView marginTop={20}>\r\n                        <FormControl required error={sendButtonClick && userType.length === 0}>\r\n                            <FormLabel>User type</FormLabel>\r\n                            <RadioGroup row name=\"userType\" value={userType} onChange={handleInputChanged}>\r\n                                <FormControlLabel value={DB_CONST.TYPE_ISSUER.toString()} control={<Radio color='primary'/>} label=\"Issuer\"/>\r\n                                <FormControlLabel value={DB_CONST.TYPE_INVESTOR.toString()} control={<Radio color='primary'/>} label=\"Investor\"/>\r\n                            </RadioGroup>\r\n                        </FormControl>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderRespondCode()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={sendInvitation} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 35}}>Send\r\n                            <SendIcon fontSize=\"small\" style={{marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render send result\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderRespondCode = () => {\r\n        const {\r\n            sendResult,\r\n            sendStatusExtraInfo\r\n        } = this.props;\r\n\r\n        let res = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (sendResult) {\r\n            case SEND_INVITATION_NONE:\r\n                return null;\r\n            case SEND_INVITATION_PROCESSING:\r\n                res.msg = \"Checking...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case SEND_INVITATION_INVITED_BEFORE:\r\n                res.msg =\r\n                    sendStatusExtraInfo.hasOwnProperty('officialUserID')\r\n                        ?\r\n                        `This user is already an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} in your group.`\r\n                        :\r\n                        `You have invited this user as an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} before.`;\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_USER_CANNOT_BE_INVITED:\r\n                res.msg = \"User is an admin or an issuer of another group.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_ERROR_HAPPENED:\r\n                res.msg = \"Error happened. Couldn't invite this user.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_SUCCESS:\r\n                res.msg = \"Invitation has been sent to this user.\";\r\n                res.color = \"primary\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <Typography\r\n                color={res.color}\r\n                variant=\"subtitle1\"\r\n            >\r\n                {res.msg}\r\n            </Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <InvitationDialog {...props} forwardedRef={ref}/>)\r\n);","import * as myUtils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED = 'SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED';\r\nexport const initializeClubAttributesEdited = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED,\r\n            clubAttributes: getState().manageClubAttributes.clubAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_INPUT_CHANGED = 'SUPER_ADMIN_SETTINGS_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const clubAttributesEdited = getState().superAdminSettings.clubAttributesEdited;\r\n        const target = event.target;\r\n\r\n        let isPropertyOfClubAttributes = false;\r\n\r\n        switch (target.type) {\r\n            case 'checkbox':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.checked);\r\n\r\n                    return;\r\n                }\r\n                break;\r\n            case 'radio':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(!isNaN(target.value) ? parseInt(target.value) : target.value);\r\n\r\n                    return;\r\n                }\r\n                break;\r\n            case 'text':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfClubAttributes = true;\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.value);\r\n                }\r\n                break;\r\n            case 'textarea':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfClubAttributes = true;\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.value);\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        dispatch({\r\n            type: SUPER_ADMIN_SETTINGS_INPUT_CHANGED,\r\n            name: target.name,\r\n            value: target.type === 'checkbox' ? target.checked : target.value,\r\n            isPropertyOfClubAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED = 'SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED';\r\nexport const handleQuillEditorChanged = (fieldName, content, delta, source, editor) => {\r\n    return (dispatch, getState) => {\r\n        if (editor.getText().trim().length === 0) {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\r\n                fieldName,\r\n                value: {ops: []}\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\r\n                fieldName,\r\n                value: editor.getContents()\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const saveEditedQuill = fieldName => {\r\n    return (dispatch, getState) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(fieldName)\r\n            .set(getState().superAdminSettings.clubAttributesEdited[fieldName])\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\r\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\r\n\r\n        if (isExpanded) {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                expandedPledgeFAQ: FAQ,\r\n                editExpandedPledgeFAQ: false\r\n            });\r\n        } else {\r\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                    expandedPledgeFAQ: null,\r\n                    editExpandedPledgeFAQ: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\r\nexport const toggleEditExpandedPledgeFAQ = () => {\r\n    return {\r\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\r\nexport const toggleAddNewPledgeFAQ = () => {\r\n    return {\r\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const submitNewPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer\r\n        } = getState().superAdminSettings;\r\n\r\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributes);\r\n\r\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const faq = {\r\n            id: myUtils.getCurrentDate(),\r\n            question: addedPledgeQuestion,\r\n            answer: addedPledgeAnswer\r\n        };\r\n\r\n        if (clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\r\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\r\n        } else {\r\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\r\n        }\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .update(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const saveEditedPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            clubAttributesEdited,\r\n            expandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer\r\n        } = getState().superAdminSettings;\r\n\r\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const editedFAQ = {\r\n            id: expandedPledgeFAQ.id,\r\n            question: editedPledgeQuestion,\r\n            answer: editedPledgeAnswer\r\n        };\r\n\r\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteExistingPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\r\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributesEdited);\r\n\r\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\r\n    }\r\n};\r\n\r\n\r\n","import Api, {ApiRoutes} from \"../Api\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\n\r\nexport default class SystemAttributesRepository {\r\n\r\n    /**\r\n     * Fetch system attributes\r\n     */\r\n    public async getSystemAttributes() {\r\n        return await new Api()\r\n            .request(\"get\", ApiRoutes.retrieveSystemAttributesRoute);\r\n    }\r\n\r\n    /**\r\n     * Update system attributes\r\n     */\r\n    public async updateSystemAttributes(systemAttributes: SystemAttributes) {\r\n        return await new Api()\r\n            .request(\r\n                \"put\",\r\n                ApiRoutes.updateSystemAttributesRoute,\r\n                {\r\n                    requestBody: systemAttributes,\r\n                    queryParameters: null\r\n                }\r\n            );\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\nimport Error from \"../../models/error\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\nimport SystemAttributesRepository from \"../../api/repositories/SystemAttributesRepository\";\r\nimport {setSectors} from \"../../pages/admin/components/manage-sectors/ManageSectorsActions\";\r\n\r\nexport enum ManageSystemAttributesEvents {\r\n    LoadingSystemAttributes = \"ManageSystemAttributesEvents.LoadingSystemAttributes\",\r\n    FinishedLoadingSystemAttributes = \"ManageSystemAttributesEvents.FinishedLoadingSystemAttributes\"\r\n}\r\n\r\nexport interface ManageSystemAttributesAction extends Action {\r\n}\r\n\r\nexport interface FinishedLoadingSystemAttributesAction extends ManageSystemAttributesAction {\r\n    systemAttributes: SystemAttributes | null;\r\n    error?: Error;\r\n}\r\n\r\nexport const loadSystemAttributes: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            systemAttributes,\r\n            systemAttributesLoaded,\r\n            loadingSystemAttributes\r\n        } = getState().ManageSystemAttributesState;\r\n\r\n        if (!systemAttributesLoaded && !loadingSystemAttributes && !systemAttributes) {\r\n            dispatch({\r\n                type: ManageSystemAttributesEvents.LoadingSystemAttributes\r\n            });\r\n\r\n            const finishedAction: FinishedLoadingSystemAttributesAction = {\r\n                type: ManageSystemAttributesEvents.FinishedLoadingSystemAttributes,\r\n                systemAttributes: null\r\n            }\r\n\r\n            try {\r\n                const response = await new SystemAttributesRepository().getSystemAttributes();\r\n                const systemAttributes: SystemAttributes = response.data;\r\n                finishedAction.systemAttributes = systemAttributes;\r\n                dispatch(setSectors(systemAttributes.Sectors))\r\n                return dispatch(finishedAction);\r\n            } catch (error) {\r\n                finishedAction.error = {\r\n                    detail: error.toString()\r\n                };\r\n                return dispatch(finishedAction);\r\n            }\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\n\r\nexport enum DocumentsDownloadEvents {\r\n    OpenRiskWarningDialog = \"DocumentsDownloadEvents.OpenRiskWarningDialog\",\r\n    CloseRiskWarningDialog = \"DocumentsDownloadEvents.CloseRiskWarningDialog\"\r\n}\r\n\r\nexport interface DocumentsDownloadAction extends Action {\r\n\r\n}\r\n\r\nexport interface DocumentClickAction extends DocumentsDownloadAction {\r\n    selectedDocument?: PitchDocument;\r\n}\r\n\r\nexport const onDocumentClick: ActionCreator<any> = (document: PitchDocument, shouldShowRiskWarning: boolean) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        if (!shouldShowRiskWarning) {\r\n            window.open(document.downloadURL, \"_blank\");\r\n            return;\r\n        }\r\n        const action: DocumentClickAction = {\r\n            type: DocumentsDownloadEvents.OpenRiskWarningDialog,\r\n            selectedDocument: document\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const onAcceptRiskWarningClick: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            selectedDocument\r\n        } = getState().DocumentsDownloadLocalState;\r\n        if (selectedDocument === undefined) {\r\n            return;\r\n        }\r\n        window.open(selectedDocument.downloadURL, \"_blank\");\r\n        return dispatch({\r\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const onCancelRiskWarningClick: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\r\n        });\r\n    }\r\n}","import {\r\n    FinishedLoadingSystemAttributesAction,\r\n    ManageSystemAttributesAction,\r\n    ManageSystemAttributesEvents\r\n} from \"../actions/manageSystemAttributesActions\";\r\nimport Error from \"../../models/error\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\n\r\nexport interface ManageSystemAttributesState {\r\n    systemAttributes: SystemAttributes | null;\r\n    systemAttributesLoaded: boolean;\r\n    loadingSystemAttributes: boolean;\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ManageSystemAttributesState = {\r\n    systemAttributes: null,\r\n    systemAttributesLoaded: false,\r\n    loadingSystemAttributes: false\r\n}\r\n\r\nexport const isLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.loadingSystemAttributes;\r\n}\r\n\r\nexport const successfullyLoadedSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.systemAttributes && state.error === undefined;\r\n}\r\n\r\nexport const hasErrorLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst manageSystemAttributesReducer = (state = initialState, action: ManageSystemAttributesAction) => {\r\n    switch (action.type) {\r\n        case ManageSystemAttributesEvents.LoadingSystemAttributes:\r\n            return {\r\n                ...state,\r\n                systemAttributes: null,\r\n                systemAttributesLoaded: false,\r\n                loadingSystemAttributes: true\r\n            }\r\n        case  ManageSystemAttributesEvents.FinishedLoadingSystemAttributes:\r\n            const finishedAction: FinishedLoadingSystemAttributesAction = (action as FinishedLoadingSystemAttributesAction);\r\n            return {\r\n                ...state,\r\n                systemAttributes: finishedAction.systemAttributes,\r\n                systemAttributesLoaded: true,\r\n                loadingSystemAttributes: false,\r\n                error: finishedAction.error\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemAttributesReducer;","import {\r\n    AddNewSectorTextChangedAction,\r\n    CompletedSavingSectorsChangesAction,\r\n    ManageSectorsAction,\r\n    ManageSectorsEvents,\r\n    SetSectorsAction\r\n} from \"./ManageSectorsActions\";\r\nimport Error from \"../../../../models/error\";\r\n\r\nexport interface ManageSectorsState {\r\n    addingNewSector: boolean;\r\n    newSector: string;\r\n    sectors: string[];\r\n    savingSectors: boolean;\r\n    errorSavingSectors?: Error;\r\n}\r\n\r\nconst initialState: ManageSectorsState = {\r\n    addingNewSector: false,\r\n    newSector: \"\",\r\n    sectors: [],\r\n    savingSectors: false\r\n}\r\n\r\nexport const isSavingSectorsChanges = (state: ManageSectorsState) => {\r\n    return state.savingSectors;\r\n}\r\n\r\nexport const manageSectorsReducer = (state = initialState, action: ManageSectorsAction) => {\r\n    switch (action.type) {\r\n        case ManageSectorsEvents.SetSectors:\r\n            const setSectorsAction: SetSectorsAction = action as SetSectorsAction;\r\n            return {\r\n                ...state,\r\n                sectors: setSectorsAction.sectors\r\n            }\r\n        case ManageSectorsEvents.ToggleAddNewSector:\r\n            return {\r\n                ...state,\r\n                addingNewSector: !state.addingNewSector,\r\n                newSector: \"\"\r\n            }\r\n        case ManageSectorsEvents.AddNewSectorTextChanged:\r\n            const addNewSectorTextChangedAction: AddNewSectorTextChangedAction = action as AddNewSectorTextChangedAction;\r\n            return {\r\n                ...state,\r\n                newSector: addNewSectorTextChangedAction.value\r\n            }\r\n        case ManageSectorsEvents.SavingSectorsChanges:\r\n            return {\r\n                ...state,\r\n                savingSectors: true,\r\n                errorSavingSectors: undefined\r\n            }\r\n        case ManageSectorsEvents.CompletedSavingSectorsChanges:\r\n            const completedSavingSectorsChanges: CompletedSavingSectorsChangesAction = action as CompletedSavingSectorsChangesAction;\r\n            return {\r\n                ...state,\r\n                savingSectors: false,\r\n                errorSavingSectors: completedSavingSectorsChanges.error !== undefined\r\n                    ? {detail: completedSavingSectorsChanges.error} : state.errorSavingSectors\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSectorsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, IconButton, TextField, Typography} from \"@material-ui/core\";\r\nimport {\r\n    ManageSystemAttributesState,\r\n    successfullyLoadedSystemAttributes\r\n} from \"../../../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isSavingSectorsChanges, ManageSectorsState} from \"./ManageSectorsReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport {\r\n    addNewSector,\r\n    cancelSectorsChanges, deleteSector,\r\n    onTextChanged,\r\n    saveSectorsChanges,\r\n    toggleAddNewSector\r\n} from \"./ManageSectorsActions\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\ninterface ManageSectorsProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n    toggleAddNewSector: () => any;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    addNewSector: () => any;\r\n    deleteSector: (sector: string) => any;\r\n    saveSectorsChanges: () => any;\r\n    cancelSectorsChanges: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageSectorsLocalState: state.ManageSectorsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleAddNewSector: () => dispatch(toggleAddNewSector()),\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        addNewSector: () => dispatch(addNewSector()),\r\n        deleteSector: (sector: string) => dispatch(deleteSector(sector)),\r\n        saveSectorsChanges: () => dispatch(saveSectorsChanges()),\r\n        cancelSectorsChanges: () => dispatch(cancelSectorsChanges())\r\n    }\r\n}\r\n\r\nclass ManageSectors extends Component<ManageSectorsProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageSectorsLocalState,\r\n            toggleAddNewSector,\r\n            onTextChanged,\r\n            addNewSector,\r\n            deleteSector,\r\n            saveSectorsChanges,\r\n            cancelSectorsChanges\r\n        } = this.props;\r\n\r\n        if (!successfullyLoadedSystemAttributes(ManageSystemAttributesState)) {\r\n            return null;\r\n        }\r\n\r\n        return <Box>\r\n            <Typography variant=\"h6\" color=\"primary\">Edit sectors</Typography>\r\n\r\n            <Box height=\"15px\"/>\r\n\r\n            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => toggleAddNewSector()}>\r\n                {\r\n                    !ManageSectorsLocalState.addingNewSector\r\n                        ? <AddIcon/>\r\n                        : <CloseIcon/>\r\n                }\r\n\r\n                <Box\r\n                    width=\"6px\"\r\n                />\r\n                {\r\n                    !ManageSectorsLocalState.addingNewSector\r\n                        ? \"Add new sector\"\r\n                        : \"Cancel adding new sector\"\r\n                }\r\n            </Button>\r\n\r\n            {\r\n                !ManageSectorsLocalState.addingNewSector\r\n                    ? null\r\n                    : <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginTop=\"10px\">\r\n                        <TextField variant=\"outlined\" margin=\"dense\" onChange={onTextChanged}/>\r\n                        <Box width=\"15px\"/>\r\n                        <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => addNewSector()}>Add</Button>\r\n                      </Box>\r\n            }\r\n\r\n            <Box height=\"30px\"/>\r\n\r\n            {\r\n                ManageSectorsLocalState.sectors.map(sector => (\r\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"10px\">\r\n                        <Typography align=\"left\" variant=\"body1\">{sector}\r\n                        </Typography>\r\n                        <Box width=\"10px\"/>\r\n                        <IconButton onClick={() => deleteSector(sector)} >\r\n                            <DeleteIcon fontSize=\"small\"/>\r\n                        </IconButton>\r\n                    </Box>\r\n                ))\r\n            }\r\n\r\n            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"20px\">\r\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => cancelSectorsChanges()}>Cancel changes</Button>\r\n                <Box width=\"15px\"/>\r\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => saveSectorsChanges()} disabled={isSavingSectorsChanges(ManageSectorsLocalState)}>\r\n                    {\r\n                        isSavingSectorsChanges(ManageSectorsLocalState)\r\n                            ? \"Saving ...\"\r\n                            : \"Save changes\"\r\n                    }\r\n                </Button>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageSectors);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CreateIcon from '@material-ui/icons/CreateOutlined';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n// React Quill - text editor\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nimport * as ROUTES from '../../../router/routes';\r\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\r\nimport {NavLink} from 'react-router-dom';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as colors from '../../../values/colors';\r\nimport {connect} from 'react-redux';\r\nimport * as superAdminSettingsActions from '../../../redux-store/actions/superAdminSettingsActions';\r\nimport ManageSectors from \"./manage-sectors/ManageSectors\";\r\nimport FeedbackSnackbarNew from \"../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesEdited: state.superAdminSettings.clubAttributesEdited,\r\n\r\n        addNewPledgeFAQ: state.superAdminSettings.addNewPledgeFAQ,\r\n        addedPledgeQuestion: state.superAdminSettings.addedPledgeQuestion,\r\n        addedPledgeAnswer: state.superAdminSettings.addedPledgeAnswer,\r\n        expandedPledgeFAQ: state.superAdminSettings.expandedPledgeFAQ,\r\n        editExpandedPledgeFAQ: state.superAdminSettings.editExpandedPledgeFAQ,\r\n        editedPledgeQuestion: state.superAdminSettings.editedPledgeQuestion,\r\n        editedPledgeAnswer: state.superAdminSettings.editedPledgeAnswer\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        initializeClubAttributesEdited: () => dispatch(superAdminSettingsActions.initializeClubAttributesEdited()),\r\n        handleInputChanged: (event) => dispatch(superAdminSettingsActions.handleInputChanged(event)),\r\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(superAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\r\n        toggleAddNewPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleAddNewPledgeFAQ()),\r\n        submitNewPledgeFAQ: () => dispatch(superAdminSettingsActions.submitNewPledgeFAQ()),\r\n        toggleEditExpandedPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\r\n        saveEditedPledgeFAQ: () => dispatch(superAdminSettingsActions.saveEditedPledgeFAQ()),\r\n        deleteExistingPledgeFAQ: () => dispatch(superAdminSettingsActions.deleteExistingPledgeFAQ()),\r\n        handleQuillEditorChanged: (fieldName, content, delta, source, editor) => dispatch(superAdminSettingsActions.handleQuillEditorChanged(fieldName, content, delta, source, editor)),\r\n        saveEditedQuill: (fieldName) => dispatch(superAdminSettingsActions.saveEditedQuill(fieldName))\r\n    }\r\n};\r\n\r\nclass SuperAdminSettings extends Component {\r\n\r\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\r\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\r\n    };\r\n\r\n    handleQuillEditorChanged = fieldName => (content, delta, source, editor) => {\r\n        this.props.handleQuillEditorChanged(fieldName, content, delta, source, editor);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            initializeClubAttributesEdited\r\n        } = this.props;\r\n\r\n        initializeClubAttributesEdited();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesEdited,\r\n\r\n            addNewPledgeFAQ,\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer,\r\n            expandedPledgeFAQ,\r\n            editExpandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer,\r\n\r\n            handleInputChanged,\r\n            toggleAddNewPledgeFAQ,\r\n            submitNewPledgeFAQ,\r\n            toggleEditExpandedPledgeFAQ,\r\n            saveEditedPledgeFAQ,\r\n            deleteExistingPledgeFAQ,\r\n            saveEditedQuill\r\n        } = this.props;\r\n\r\n        if (!clubAttributes || !clubAttributesEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 30\r\n                }}\r\n            >\r\n                <FeedbackSnackbarNew/>\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    {/** Manage system's functions */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Manage system's functions</Typography>\r\n\r\n                        <FlexView marginTop={20}>\r\n                            <FormControl>\r\n                                <FormControlLabel name=\"allowVideoUpload\"\r\n                                    control={\r\n                                        <Checkbox color=\"primary\" value={clubAttributesEdited.allowVideoUpload} checked={clubAttributesEdited.allowVideoUpload} onChange={handleInputChanged}/>\r\n                                    }\r\n                                    label=\"Allow video upload\"\r\n                                    labelPlacement=\"end\"\r\n                                />\r\n                                <FormHelperText>\r\n                                    Allow videos (Introduction video in Profile page and Pitch cover video) to be\r\n                                    uploaded to the database.\r\n                                    When turned off, the users cannot upload videos from their machines, instead they\r\n                                    can only upload a video URL.\r\n                                </FormHelperText>\r\n                            </FormControl>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Support email */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Edit support email</Typography>\r\n\r\n                        <FlexView marginTop={20}>\r\n                            <TextField name=\"supportEmail\" label=\"Support email\" value={clubAttributesEdited.supportEmail} margin=\"normal\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit sectors */}\r\n                    <Col xs={12}sm={12} md={12} lg={12}>\r\n                        <ManageSectors/>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit FAQs in Pledge Page */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Edit FAQs in Pledge Page</Typography>\r\n\r\n                        <Button onClick={toggleAddNewPledgeFAQ} variant=\"outlined\" className={css(sharedStyles.no_text_transform)} style={{ marginTop: 18}}>\r\n                            {\r\n                                !addNewPledgeFAQ\r\n                                    ?\r\n                                    <AddIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                                    :\r\n                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                            }\r\n                            {\r\n                                !addNewPledgeFAQ\r\n                                    ?\r\n                                    \"Add new FAQ\"\r\n                                    :\r\n                                    \"Cancel adding new FAQ\"\r\n                            }\r\n                        </Button>\r\n\r\n                        {\r\n                            !addNewPledgeFAQ\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView column marginTop={15}>\r\n                                    <TextField name=\"addedPledgeQuestion\" label=\"Question\" value={addedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\r\n                                    <TextField name=\"addedPledgeAnswer\" label=\"Answer\" value={addedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} onChange={handleInputChanged} style={{marginTop: 10}}/>\r\n                                    <FlexView hAlignContent=\"right\" marginTop={10}>\r\n                                        <Button onClick={submitNewPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>Add</Button>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                        }\r\n\r\n                        <FlexView column marginTop={20}>\r\n                            {\r\n                                !clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].map(FAQ => (\r\n                                        <ExpansionPanel key={FAQ.id} elevation={0} className={css(styles.frequently_asked_question_box)} expanded={(expandedPledgeFAQ && FAQ.id === expandedPledgeFAQ.id) ? true : false} onChange={this.handleExpandPledgeFAQPanel(FAQ)}>\r\n                                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                                <Typography variant=\"body2\" align=\"left\"><b>{FAQ.question}</b></Typography>\r\n                                            </ExpansionPanelSummary>\r\n\r\n                                            <ExpansionPanelDetails>\r\n                                                <FlexView column width=\"100%\">\r\n                                                    <Typography variant=\"body2\" align=\"left\">{FAQ.answer}</Typography>\r\n\r\n                                                    <FlexView marginTop={28}>\r\n                                                        <Button onClick={toggleEditExpandedPledgeFAQ} variant=\"outlined\" color={expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ ? \"default\" : \"primary\"} className={css(sharedStyles.no_text_transform)}>\r\n                                                            {\r\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                                    ?\r\n                                                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                                                                    :\r\n                                                                    <CreateIcon fontSize=\"small\" style={{ marginRight: 6}}/>\r\n                                                            }\r\n                                                            {\r\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                                    ?\r\n                                                                    \"Cancel editing\"\r\n                                                                    :\r\n                                                                    \"Edit\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <Button onClick={deleteExistingPledgeFAQ} variant=\"outlined\" color=\"secondary\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 12}}>\r\n                                                            <DeleteIcon fontSize=\"small\" style={{ marginRight: 6}}/>\r\n                                                            Delete\r\n                                                        </Button>\r\n                                                    </FlexView>\r\n\r\n                                                    {\r\n                                                        expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                            ?\r\n                                                            <FlexView column width=\"100%\" hAlignContent=\"right\" marginTop={12}>\r\n                                                                <TextField name=\"editedPledgeQuestion\" label=\"Question\" value={editedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required error={editedPledgeQuestion.trim().length === 0} onChange={handleInputChanged}/>\r\n                                                                <TextField name=\"editedPledgeAnswer\" label=\"Answer\" value={editedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} error={editedPledgeAnswer.trim().length === 0} onChange={handleInputChanged} style={{marginTop: 10}}/>\r\n\r\n                                                                <Button onClick={saveEditedPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} style={{marginTop: 10}}>Save</Button>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </ExpansionPanelDetails>\r\n                                        </ExpansionPanel>\r\n                                    ))\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit privacy policy */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit privacy policy</Typography>\r\n\r\n                            <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View privacy policy page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('privacyPolicy')} modules={modules} value={clubAttributesEdited.hasOwnProperty('privacyPolicy') ? clubAttributesEdited.privacyPolicy : {ops: []}} style={{marginTop: 20 }}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('privacyPolicy')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit terms of use */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit terms of use</Typography>\r\n\r\n                            <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{ marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View terms of use page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('termsOfUse')} modules={modules} value={clubAttributesEdited.hasOwnProperty('termsOfUse') ? clubAttributesEdited.termsOfUse : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('termsOfUse')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit risk warnings */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit risk warnings</Typography>\r\n\r\n                            {/** Risk warning footer */}\r\n                            <FlexView column marginTop={30}>\r\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning footer</b></Typography>\r\n                                <br/>\r\n                                <Typography variant=\"body1\" align=\"left\" color=\"textSecondary\">\r\n                                    Risk warning footer is used in the footer of the Explore Offers page and\r\n                                    the Pledge page.\r\n                                    <br/><br/>\r\n                                    As the group's name will be populated dynamically, therefore, anywhere in the text\r\n                                    that needs to use group's name, please replace it with <b><u>%groupName%</u></b>.\r\n                                    <br/><br/>\r\n                                    Also, this risk warning footer will need to have a URL that leads to the\r\n                                    risk warning page where the information will be further explained. Therefore, please\r\n                                    use the following format to express the URL:\r\n                                    <br/><br/>\r\n                                    <b><u>%URL%any text inside%URL%</u></b>. For example:&nbsp;\r\n                                    <b>%URL%Please click here to see full risk warning.%URL%</b>. The URL doesn't need\r\n                                    to be\r\n                                    put here manually, it will be done on the development side as long as the format\r\n                                    is correct.\r\n                                </Typography>\r\n                                <br/>\r\n                                <TextField variant=\"outlined\" name=\"riskWarningFooter\" placeholder=\"Edit risk warning footer\" value={clubAttributesEdited.riskWarningFooter} onChange={handleInputChanged} multiline rowsMax={10} rows={10}/>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{marginTop: 50, marginBottom: 40}}/>\r\n\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning page</b></Typography>\r\n\r\n                                <br/>\r\n\r\n                                <NavLink to={ROUTES.RISK_WARNING} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View risk warning page</Button>\r\n                                </NavLink>\r\n\r\n                                <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('riskWarning')} modules={modules} value={clubAttributesEdited.hasOwnProperty('riskWarning') ? clubAttributesEdited.riskWarning : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                                <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                    <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('riskWarning')} style={{marginLeft: 12}}>Save</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit create pitch terms and conditions */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit create pitch terms and conditions</Typography>\r\n\r\n                            <NavLink to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View create pitch terms and conditions page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('createPitchTermsAndConditions')} modules={modules} value={clubAttributesEdited.hasOwnProperty('createPitchTermsAndConditions') ? clubAttributesEdited.createPitchTermsAndConditions : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('createPitchTermsAndConditions')} style={{marginLeft: 12}}> Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit marketing preferences */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit marketing preferences</Typography>\r\n\r\n                            <NavLink to={ROUTES.MARKETING_PREFERENCES} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View marketing preferences page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('marketingPreferences')} modules={modules} value={clubAttributesEdited.hasOwnProperty('marketingPreferences') ? clubAttributesEdited.marketingPreferences : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('marketingPreferences')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperAdminSettings);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    frequently_asked_question_box: {\r\n        border: `1px solid ${colors.gray_300}`,\r\n        marginTop: 12\r\n    }\r\n});","import firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\n\r\nexport const GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED = 'GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED';\r\nexport const initializeGroupAttributesEdited = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED,\r\n            group: getState().manageGroupFromParams.groupProperties\r\n        });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CHANGED = 'GROUP_ADMIN_SETTINGS_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const groupAttributesEdited = getState().groupAdminSettings.groupAttributesEdited;\r\n        const target = event.target;\r\n\r\n        let isPropertyOfGroupAttributes = false;\r\n\r\n        let updateValue = null;\r\n        let shouldUpdateDatabase = false;\r\n\r\n        switch (target.type) {\r\n            case 'checkbox':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = target.checked;\r\n                }\r\n                break;\r\n            case 'radio':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = !isNaN(target.value) ? parseInt(target.value) : target.value;\r\n                }\r\n                break;\r\n            case 'text':\r\n                if (target.name !== \"primaryColor\"\r\n                    && target.name !== \"secondaryColor\"\r\n                    && groupAttributesEdited.hasOwnProperty(target.name)\r\n                ) {\r\n                    isPropertyOfGroupAttributes = true;\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = target.value;\r\n                }\r\n                break;\r\n            case 'textarea':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfGroupAttributes = true;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (shouldUpdateDatabase) {\r\n            realtimeDBUtils\r\n                .updateGroupPropertiesSetting({\r\n                    anid: groupProperties.anid,\r\n                    field: target.name,\r\n                    value: updateValue\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update this field.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            name: target.name,\r\n            value: target.type === 'checkbox' ? target.checked : target.value,\r\n            isPropertyOfGroupAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const handlePitchExpiryDateChanged = date => {\r\n    return (dispatch, getState) => {\r\n        if (date && date === \"Invalid Date\") {\r\n            dispatch({\r\n                type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n                isPropertyOfGroupAttributes: true,\r\n                name: \"defaultPitchExpiryDate\",\r\n                value: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            isPropertyOfGroupAttributes: true,\r\n            name: \"defaultPitchExpiryDate\",\r\n            value:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n}\r\n\r\nexport const handleSavePitchExpiryDate = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const groupSettings = getState().groupAdminSettings.groupAttributesEdited;\r\n\r\n        realtimeDBUtils\r\n            .updateGroupPropertiesSetting({\r\n                anid: groupProperties.anid,\r\n                field: \"defaultPitchExpiryDate\",\r\n                value: groupSettings.defaultPitchExpiryDate\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not update this field.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const handleCancelEditingPitchExpiryDate = () => {\r\n    return (dispatch, getState) => {\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            isPropertyOfGroupAttributes: true,\r\n            name: \"defaultPitchExpiryDate\",\r\n            value:\r\n                !groupProperties.settings.hasOwnProperty('defaultPitchExpiryDate')\r\n                    ?\r\n                    myUtils.getDateWithDaysFurtherThanToday(1)\r\n                    :\r\n                    groupProperties.settings.defaultPitchExpiryDate\r\n        });\r\n    }\r\n}\r\n\r\nexport const GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\r\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\r\n\r\n        if (isExpanded) {\r\n            dispatch({\r\n                type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                expandedPledgeFAQ: FAQ,\r\n                editExpandedPledgeFAQ: false\r\n            });\r\n        } else {\r\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                    expandedPledgeFAQ: null,\r\n                    editExpandedPledgeFAQ: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\r\nexport const toggleEditExpandedPledgeFAQ = () => {\r\n    return {\r\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\r\nexport const toggleAddNewPledgeFAQ = () => {\r\n    return {\r\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const submitNewPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer\r\n        } = getState().groupAdminSettings;\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\r\n\r\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const faq = {\r\n            id: myUtils.getCurrentDate(),\r\n            question: addedPledgeQuestion,\r\n            answer: addedPledgeAnswer\r\n        };\r\n\r\n        if (groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\r\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\r\n        } else {\r\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\r\n        }\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const saveEditedPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupAttributesEdited,\r\n            expandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer\r\n        } = getState().groupAdminSettings;\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const editedFAQ = {\r\n            id: expandedPledgeFAQ.id,\r\n            question: editedPledgeQuestion,\r\n            answer: editedPledgeAnswer\r\n        };\r\n\r\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteExistingPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\r\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\r\n    }\r\n};\r\n\r\nexport const saveGroupDetails = (field, value) => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(group.anid)\r\n            .child(field)\r\n            .set(value);\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS';\r\nexport const cancelEditingGroupDetails = (field) => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS,\r\n            name: field,\r\n            value: group[field]\r\n        });\r\n    }\r\n};\r\n\r\nexport const saveColor = field => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n        const color = field === \"primaryColor\" ? getState().groupAdminSettings.primaryColor : getState().groupAdminSettings.secondaryColor;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(group.anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(color.toUpperCase());\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR';\r\nexport const cancelEditingColor = field => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n        const color = field === \"primaryColor\" ? group.settings.primaryColor : group.settings.secondaryColor;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR,\r\n            field,\r\n            color\r\n        });\r\n    }\r\n};","import React, {Component} from \"react\";\r\n\r\nimport {\r\n    FormControl,\r\n    FormControlLabel,\r\n    Typography,\r\n    RadioGroup,\r\n    Radio,\r\n    Divider,\r\n    Button,\r\n    TextField,\r\n    ExpansionPanel,\r\n    ExpansionPanelSummary,\r\n    ExpansionPanelDetails,\r\n    Checkbox\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport DeleteIcon from \"@material-ui/icons/DeleteOutlined\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row\r\n} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as groupAdminSettingsActions from \"../../../redux-store/actions/groupAdminSettingsActions\";\r\n\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as colors from \"../../../values/colors\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupDetails: state.manageGroupFromParams.groupProperties,\r\n        groupAttributesEdited: state.groupAdminSettings.groupAttributesEdited,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        groupWebsite: state.groupAdminSettings.website,\r\n        groupDescription: state.groupAdminSettings.description,\r\n        primaryColor: state.groupAdminSettings.primaryColor,\r\n        secondaryColor: state.groupAdminSettings.secondaryColor,\r\n\r\n        addNewPledgeFAQ: state.groupAdminSettings.addNewPledgeFAQ,\r\n        addedPledgeQuestion: state.groupAdminSettings.addedPledgeQuestion,\r\n        addedPledgeAnswer: state.groupAdminSettings.addedPledgeAnswer,\r\n        expandedPledgeFAQ: state.groupAdminSettings.expandedPledgeFAQ,\r\n        editExpandedPledgeFAQ: state.groupAdminSettings.editExpandedPledgeFAQ,\r\n        editedPledgeQuestion: state.groupAdminSettings.editedPledgeQuestion,\r\n        editedPledgeAnswer: state.groupAdminSettings.editedPledgeAnswer\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        initializeGroupAttributesEdited: () => dispatch(groupAdminSettingsActions.initializeGroupAttributesEdited()),\r\n        handleInputChanged: (event) => dispatch(groupAdminSettingsActions.handleInputChanged(event)),\r\n\r\n        saveGroupDetails: (field, value) => dispatch(groupAdminSettingsActions.saveGroupDetails(field, value)),\r\n        cancelEditingGroupDetails: (field) => dispatch(groupAdminSettingsActions.cancelEditingGroupDetails(field)),\r\n\r\n        saveColor: (field) => dispatch(groupAdminSettingsActions.saveColor(field)),\r\n        cancelEditingColor: (field) => dispatch(groupAdminSettingsActions.cancelEditingColor(field)),\r\n        handlePitchExpiryDateChanged: (date) => dispatch(groupAdminSettingsActions.handlePitchExpiryDateChanged(date)),\r\n        handleSavePitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleSavePitchExpiryDate()),\r\n        handleCancelEditingPitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleCancelEditingPitchExpiryDate()),\r\n\r\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(groupAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\r\n        toggleAddNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleAddNewPledgeFAQ()),\r\n        submitNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.submitNewPledgeFAQ()),\r\n        toggleEditExpandedPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\r\n        saveEditedPledgeFAQ: () => dispatch(groupAdminSettingsActions.saveEditedPledgeFAQ()),\r\n        deleteExistingPledgeFAQ: () => dispatch(groupAdminSettingsActions.deleteExistingPledgeFAQ())\r\n    }\r\n};\r\n\r\nclass GroupAdminSettings extends Component {\r\n\r\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\r\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            initializeGroupAttributesEdited\r\n        } = this.props;\r\n\r\n        initializeGroupAttributesEdited();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupDetails,\r\n            groupAttributesEdited,\r\n\r\n            clubAttributes,\r\n\r\n            groupWebsite,\r\n            groupDescription,\r\n            primaryColor,\r\n            secondaryColor,\r\n\r\n            addNewPledgeFAQ,\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer,\r\n            expandedPledgeFAQ,\r\n            editExpandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer,\r\n\r\n            toggleAddNewPledgeFAQ,\r\n            submitNewPledgeFAQ,\r\n            toggleEditExpandedPledgeFAQ,\r\n            saveEditedPledgeFAQ,\r\n            deleteExistingPledgeFAQ,\r\n\r\n            handleInputChanged,\r\n            handlePitchExpiryDateChanged,\r\n            handleSavePitchExpiryDate,\r\n            handleCancelEditingPitchExpiryDate,\r\n            saveGroupDetails,\r\n            cancelEditingGroupDetails,\r\n            saveColor,\r\n            cancelEditingColor\r\n        } = this.props;\r\n\r\n        if (!groupAttributesEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 30}}>\r\n                <Row noGutters>\r\n                    {/** Manage group details */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">\r\n                            Manage group details\r\n                        </Typography>\r\n\r\n                        <FlexView marginTop={16} marginBottom={32}>\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", groupDetails.anid)\r\n                                        :\r\n                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", groupDetails.anid)\r\n                                }\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">\r\n                                    <PublicIcon style={{marginRight: 8}}/>\r\n                                    View group's public page\r\n                                </Button>\r\n                            </NavLink>\r\n                        </FlexView>\r\n\r\n                        {/** Edit group description */}\r\n                        <FlexView column marginTop={20}>\r\n                            <TextField name=\"description\" value={groupDescription} variant=\"outlined\" label=\"Group description\" multiline rowsMax={5} rows={5} onChange={handleInputChanged}/>\r\n\r\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('description')} style={{ marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('description', groupDescription)} disabled={groupDetails.description === groupDescription} style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Edit website */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FormControl fullWidth>\r\n                                <TextField label=\"Website\" placeholder=\"Official website\" name=\"website\" value={groupWebsite} fullWidth margin=\"dense\" variant=\"outlined\" required onChange={handleInputChanged}\r\n                                    error={\r\n                                        groupWebsite.trim().length === 0\r\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\r\n                                    }/>\r\n                                {\r\n                                    groupWebsite.trim().length === 0 || utils.isValidWebURL(groupWebsite)\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\">\r\n                                            Invalid website URL\r\n                                        </Typography>\r\n                                }\r\n                            </FormControl>\r\n\r\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('website')} style={{marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('website', groupWebsite)}\r\n                                    disabled={\r\n                                        groupDetails.website === groupWebsite\r\n                                        || groupWebsite.trim().length === 0\r\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\r\n                                    }\r\n                                    style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Sign up link */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FormControl fullWidth>\r\n                                <TextField label=\"Public registration link\" fullWidth margin=\"dense\" variant=\"outlined\" helperText=\"This link can be shared to unregistered issuers/investors so that they can sign up and become members of your group without sending invitation emails manually.\" value={ process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}/>\r\n                            </FormControl>\r\n                        </FlexView>\r\n\r\n                        {/** Edit primary color */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FlexView vAlignContent=\"center\">\r\n                                <TextField required name=\"primaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Primary color\" value={primaryColor.toUpperCase()} onChange={handleInputChanged}/>\r\n\r\n                                {\r\n                                    utils.isValidHexColorCode(primaryColor)\r\n                                        ?\r\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: primaryColor}}/>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                utils.isValidHexColorCode(primaryColor)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\r\n                                        Invalid color\r\n                                    </Typography>\r\n                            }\r\n\r\n                            <FlexView width=\"100%\" marginTop={10}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"primaryColor\")} style={{ marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"primaryColor\")}\r\n                                    disabled={!utils.isValidHexColorCode(primaryColor) || groupDetails.settings.primaryColor === primaryColor}\r\n                                    style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Edit secondary color */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FlexView vAlignContent=\"center\">\r\n                                <TextField required name=\"secondaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Secondary color\" value={secondaryColor.toUpperCase()} onChange={handleInputChanged}/>\r\n\r\n                                {\r\n                                    utils.isValidHexColorCode(secondaryColor)\r\n                                        ?\r\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: secondaryColor}}/>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                utils.isValidHexColorCode(secondaryColor)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\r\n                                        Invalid color\r\n                                    </Typography>\r\n                            }\r\n\r\n                            <FlexView width=\"100%\" marginTop={10}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"secondaryColor\")} style={{marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"secondaryColor\")}\r\n                                    disabled={!utils.isValidHexColorCode(secondaryColor) || groupDetails.settings.secondaryColor === secondaryColor}\r\n                                    style={{ marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\r\n                                backgroundColor:\r\n                                    !groupDetails\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupDetails.settings.primaryColor\r\n                            }}/>\r\n                    </Col>\r\n\r\n                    {/** Manage group attributes */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">\r\n                                Manage group attributes\r\n                            </Typography>\r\n\r\n                            {\r\n                                /**\r\n                                 * Set pitch expiry date (for QIB only)\r\n                                 */\r\n                            }\r\n                            {\r\n                                groupUserName !== \"qib\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column marginTop={30}>\r\n                                        <KeyboardDatePicker\r\n                                            autoOk\r\n                                            fullWidth\r\n                                            variant=\"dialog\"\r\n                                            inputVariant=\"outlined\"\r\n                                            label=\"Choose expired date for this pitch\"\r\n                                            format=\"dd/MM/yyyy\"\r\n                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                            value={\r\n                                                !groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                    ?\r\n                                                    utils.getDateWithDaysFurtherThanToday(1)\r\n                                                    :\r\n                                                    groupAttributesEdited.defaultPitchExpiryDate\r\n                                            }\r\n                                            InputAdornmentProps={{position: \"start\"}}\r\n                                            error={\r\n                                                groupAttributesEdited.hasOwnProperty('groupAttributesEdited')\r\n                                                    ?\r\n                                                    groupAttributesEdited.defaultPitchExpiryDate === null\r\n                                                    || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\r\n                                                    :\r\n                                                    false\r\n                                            }\r\n                                            onChange={handlePitchExpiryDateChanged}\r\n                                        />\r\n\r\n                                        <FlexView width=\"100%\" marginTop={15}>\r\n                                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={handleCancelEditingPitchExpiryDate} style={{marginRight: 6}}>\r\n                                                Cancel\r\n                                            </Button>\r\n                                            <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={handleSavePitchExpiryDate}\r\n                                                disabled={\r\n                                                    groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                        ?\r\n                                                        groupAttributesEdited.defaultPitchExpiryDate === null\r\n                                                        || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\r\n                                                        || (\r\n                                                            groupDetails.settings.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                            && groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                            && groupDetails.settings.defaultPitchExpiryDate === groupAttributesEdited.defaultPitchExpiryDate\r\n                                                        )\r\n                                                        :\r\n                                                        false}\r\n                                                style={{marginLeft: 6}}>\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n\r\n                                        {/** Divider */}\r\n                                        <Divider style={{marginTop: 40, marginBottom: 20, height: 3}}/>\r\n                                    </FlexView>\r\n                            }\r\n\r\n                            {\r\n                                /**\r\n                                 * Set project's visibility\r\n                                 */\r\n                            }\r\n                            <FlexView marginTop={20}>\r\n                                <FormControl>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Choose default visibility value for all newly created investment opportunities\r\n                                    </Typography>\r\n                                    <RadioGroup name=\"projectVisibility\" value={groupAttributesEdited.projectVisibility.toString()} onChange={handleInputChanged}>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PRIVATE.toString()} control={<Radio/>} label=\"Private\"/>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED.toString()} control={<Radio/>} label=\"Restricted\"/>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PUBLIC.toString()} control={<Radio/>} label=\"Public\"/>\r\n                                    </RadioGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {/** Divider */}\r\n                            <Divider style={{marginTop: 20, marginBottom: 20, height: 3}}/>\r\n\r\n                            {\r\n                                /**\r\n                                 * Hide/Show investors' contact details\r\n                                 */\r\n                            }\r\n                            {/*<FlexView>*/}\r\n                            {/*    <FormControl>*/}\r\n                            {/*        <FormControlLabel*/}\r\n                            {/*            name=\"makeInvestorsContactDetailsVisibleToIssuers\"*/}\r\n                            {/*            control={*/}\r\n                            {/*                <Checkbox*/}\r\n                            {/*                    color=\"primary\"*/}\r\n                            {/*                    value={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\r\n                            {/*                    checked={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\r\n                            {/*                    onChange={handleInputChanged}*/}\r\n                            {/*                />*/}\r\n                            {/*            }*/}\r\n                            {/*            label=\"Allow issuers to see investors' contact details\"*/}\r\n                            {/*            labelPlacement=\"end\"*/}\r\n                            {/*        />*/}\r\n                            {/*        <Typography*/}\r\n                            {/*            variant=\"body1\"*/}\r\n                            {/*            align=\"left\"*/}\r\n                            {/*            style={{*/}\r\n                            {/*                marginTop: 8*/}\r\n                            {/*            }}*/}\r\n                            {/*        >*/}\r\n                            {/*            <b*/}\r\n                            {/*                style={{*/}\r\n                            {/*                    color: colors.errorColor*/}\r\n                            {/*                }}*/}\r\n                            {/*            >*/}\r\n                            {/*                <u>Note:</u>&nbsp;This is a global setting.*/}\r\n                            {/*            </b>*/}\r\n                            {/*            &nbsp;When <u><b>ticked</b></u>, <b>the contact details of all investors in this*/}\r\n                            {/*            group</b> will be*/}\r\n                            {/*            made visible to the issuers.*/}\r\n                            {/*        </Typography>*/}\r\n                            {/*    </FormControl>*/}\r\n                            {/*</FlexView>*/}\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\r\n                                backgroundColor:\r\n                                    !groupDetails\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupDetails.settings.primaryColor\r\n                            }}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminSettings);\r\n\r\nconst styles = StyleSheet.create({\r\n    frequently_asked_question_box: {\r\n        border: `1px solid ${colors.gray_300}`,\r\n        marginTop: 12\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {OverlayTrigger, Tooltip} from 'react-bootstrap';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class InfoOverlay extends Component {\r\n    render() {\r\n        const {\r\n            message,\r\n            placement\r\n        } = this.props;\r\n\r\n        return (\r\n            <OverlayTrigger\r\n                trigger={['hover', 'focus']}\r\n                placement={placement}\r\n                flip\r\n                overlay={\r\n                    <Tooltip\r\n                        id={`tooltip-${placement}`}\r\n                    >\r\n                        {message}\r\n                    </Tooltip>\r\n                }\r\n            >\r\n                <InfoIcon\r\n                    fontSize=\"small\"\r\n                    style={{\r\n                        color: colors.gray_600\r\n                    }}\r\n                />\r\n            </OverlayTrigger>\r\n        );\r\n    }\r\n}","import firebase from \"../../firebase/firebaseApp\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport {getUserBasedOnID} from \"../../firebase/realtimeDBUtils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as emailUtils from \"../../utils/emailUtils\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport {\r\n    FILTER_GROUP_MEMBERS_ALL,\r\n    FILTER_HOME_MEMBERS,\r\n    FILTER_PLATFORM_MEMBERS,\r\n    FILTER_REGISTRATION_STATUS_ALL\r\n} from '../../pages/admin/components/InvitedUsers';\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const LOADING_INVITED_USERS = 'LOADING_INVITED_USERS';\r\nexport const FINISHED_LOADING_INVITED_USERS = 'FINISHED_LOADING_INVITED_USERS';\r\nexport const loadInvitedUsers = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: LOADING_INVITED_USERS\r\n        });\r\n\r\n        const admin = getState().auth.user;\r\n\r\n        realtimeDBUtils\r\n            .loadInvitedUsers(admin.superAdmin ? null : admin.anid)\r\n            .then(invitedUsers => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_INVITED_USERS,\r\n                    invitedUsers,\r\n                    error: null\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_INVITED_USERS,\r\n                    invitedUsers: [],\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_TOGGLE_SEARCH_MODE = 'INVITED_USERS_TOGGLE_SEARCH_MODE';\r\nexport const toggleInvitedUsersSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\r\n\r\n        const {\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup\r\n        } = getState().invitedUsers;\r\n\r\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        let matchedInvitedUsers;\r\n\r\n        // exit search mode\r\n        if (invitedUsersInSearchMode) {\r\n            matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                sourceInvitedUsers: invitedUsers,\r\n                searchText: null,\r\n                filterRegistrationStatus,\r\n                filterUserType,\r\n                filterMembers,\r\n                filterGroup,\r\n                currentGroupProperties\r\n            });\r\n        }\r\n        // enter search mode\r\n        else {\r\n            if (invitedUserSearchText.trim().length > 0) {\r\n                matchedInvitedUsers = prevMatchedInvitedUsers.filter(\r\n                    invitedUser => invitedUser.email.toLowerCase() === invitedUserSearchText.trim().toLowerCase()\r\n                );\r\n            } else {\r\n                matchedInvitedUsers = prevMatchedInvitedUsers;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITED_USERS_TOGGLE_SEARCH_MODE,\r\n            matchedInvitedUsers\r\n        });\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_SEARCH_VARIABLE_CHANGED = 'INVITED_USERS_SEARCH_VARIABLE_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\r\n        let matchedInvitedUsers = [];\r\n\r\n        const {\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup\r\n        } = getState().invitedUsers;\r\n\r\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const name = event.target.name;\r\n        let value = null;\r\n\r\n        switch (name) {\r\n            case 'invitedUserSearchText':\r\n                const newSearchText = event.target.value;\r\n                value = newSearchText;\r\n\r\n                // search mode is off\r\n                if (!invitedUsersInSearchMode) {\r\n                    // return the previous matchedProjects\r\n                    matchedInvitedUsers = prevMatchedInvitedUsers;\r\n                    break;\r\n                }\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: newSearchText,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterRegistrationStatus':\r\n                const newRegistrationStatusFilter = event.target.value;\r\n                value = newRegistrationStatusFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus: newRegistrationStatusFilter,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterUserType':\r\n                const newUserTypeFilter = event.target.value;\r\n                value = newUserTypeFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType: newUserTypeFilter,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterGroup':\r\n                const newGroupFilter = event.target.value;\r\n                value = newGroupFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup: newGroupFilter,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterMembers':\r\n                const newMembersFilter = event.target.value;\r\n                value = newMembersFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers: newMembersFilter,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITED_USERS_SEARCH_VARIABLE_CHANGED,\r\n            name,\r\n            value,\r\n            matchedInvitedUsers\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Get updated invitedUsers when a search criteria is changed\r\n *\r\n * @param sourceInvitedUsers\r\n * @param searchText\r\n * @param filterRegistrationStatus\r\n * @param filterUserType\r\n * @param filterMembers\r\n * @param filterGroup\r\n * @param currentGroupProperties\r\n * @returns {[]}\r\n */\r\nconst getUpdatedInvitedUsers = (\r\n    {\r\n        sourceInvitedUsers,\r\n        searchText,\r\n        filterRegistrationStatus,\r\n        filterUserType,\r\n        filterMembers,\r\n        filterGroup,\r\n        currentGroupProperties\r\n    }\r\n) => {\r\n    let matchedInvitedUsers = [];\r\n\r\n    sourceInvitedUsers.forEach(invitedUser => {\r\n        let satisfiedRegistrationStatusFilter = false;\r\n        let satisfiedUserTypeFilter = false;\r\n        let satisfiedGroupMembersFilter = false;\r\n        let satisfiedGroupFilter = false;\r\n\r\n        // filter by registration status\r\n        switch (filterRegistrationStatus) {\r\n            case FILTER_REGISTRATION_STATUS_ALL:\r\n                satisfiedRegistrationStatusFilter = true;\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                if (invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\r\n                    satisfiedRegistrationStatusFilter = true;\r\n                }\r\n                break;\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                if (invitedUser.status === DB_CONST.INVITED_USER_NOT_REGISTERED) {\r\n                    satisfiedRegistrationStatusFilter = true;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by user type\r\n        switch (filterUserType) {\r\n            case DB_CONST.TYPE_INVESTOR:\r\n                if (invitedUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                    satisfiedUserTypeFilter = true;\r\n                }\r\n                break;\r\n            case DB_CONST.TYPE_ISSUER:\r\n                if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                    satisfiedUserTypeFilter = true;\r\n                }\r\n                break;\r\n            case 0: // all user type\r\n                satisfiedUserTypeFilter = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by group members (all, home or foreign)\r\n        switch (filterMembers) {\r\n            case FILTER_GROUP_MEMBERS_ALL:\r\n                satisfiedGroupMembersFilter = true;\r\n                break;\r\n            case FILTER_HOME_MEMBERS:\r\n                if (currentGroupProperties) {\r\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\r\n                        && invitedUser.requestedToJoin === false\r\n                    ) {\r\n                        satisfiedGroupMembersFilter = true;\r\n                    }\r\n                } else {\r\n                    satisfiedGroupMembersFilter = true;\r\n                }\r\n                break;\r\n            case FILTER_PLATFORM_MEMBERS:\r\n                if (currentGroupProperties) {\r\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\r\n                        && invitedUser.requestedToJoin === true\r\n                    ) {\r\n                        satisfiedGroupMembersFilter = true;\r\n                    }\r\n                } else {\r\n                    satisfiedGroupMembersFilter = true;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by a specific group\r\n        if (filterGroup !== \"null\") {\r\n            if (invitedUser.invitedBy === filterGroup) {\r\n                satisfiedGroupFilter = true;\r\n            }\r\n        }\r\n        // all groups\r\n        else {\r\n            satisfiedGroupFilter = true;\r\n        }\r\n\r\n        if (satisfiedRegistrationStatusFilter\r\n            && satisfiedUserTypeFilter\r\n            && satisfiedGroupMembersFilter\r\n            && satisfiedGroupFilter\r\n        ) {\r\n            matchedInvitedUsers.push(invitedUser);\r\n        }\r\n    });\r\n\r\n    if (searchText !== null) {\r\n        matchedInvitedUsers = matchedInvitedUsers.filter(\r\n            invitedUser => invitedUser.email.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n    }\r\n\r\n    return matchedInvitedUsers;\r\n}\r\n\r\nexport const INVITED_USERS_CHANGE_PAGE = 'INVITED_USERS_CHANGE_PAGE';\r\nexport const handleChangeTablePage = (event, newPage) => {\r\n    return {\r\n        type: INVITED_USERS_CHANGE_PAGE,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_CHANGE_ROWS_PER_PAGE = 'INVITED_USERS_CHANGE_ROWS_PER_PAGE';\r\nexport const handleChangeTableRowsPerPage = event => {\r\n    return {\r\n        type: INVITED_USERS_CHANGE_ROWS_PER_PAGE,\r\n        rows: event.target.value\r\n    }\r\n};\r\n\r\nexport const resendInvite = invitedUser => {\r\n    return (dispatch, getState) => {\r\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\r\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const currentGroupAdmin = getState().auth.user;\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_INVITATION,\r\n                data: {\r\n                    groupName: groupProperties.displayName,\r\n                    groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\r\n                    groupWebsite: groupProperties.website,\r\n                    groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\r\n                    sender: currentGroupAdmin.email,\r\n                    receiver: invitedUser.email,\r\n                    receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\r\n                    userType:\r\n                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                            ?\r\n                            \"Issuer\"\r\n                            :\r\n                            \"Investor\"\r\n                    ,\r\n                    signupURL:\r\n                        groupUserName\r\n                            ?\r\n                            `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\r\n                            :\r\n                            `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\r\n                }\r\n            })\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentGroupAdmin.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\r\n                        interactedObjectID: invitedUser.id,\r\n                        activitySummary:\r\n                            realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION\r\n                                .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\r\n                                .replace(\"%group%\", groupProperties.displayName)\r\n                                .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\r\n                        ,\r\n                        action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                            .replace(\":userID\", invitedUser.id)\r\n                        ,\r\n                        value: {\r\n                            ...invitedUser,\r\n                            Invitor: null\r\n                        }\r\n                    });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Invitation resent.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED = \"INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED\";\r\nexport const addMembersFromOneGroupToAnotherGroup = (fromGroup, toGroup) => {\r\n    return async (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const addingMembersFromOneGroupToAnotherGroup = getState().invitedUsers.addingMembersFromOneGroupToAnotherGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (addingMembersFromOneGroupToAnotherGroup) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\r\n                value: true\r\n            });\r\n\r\n            await new Api()\r\n                .request(\r\n                    \"put\",\r\n                    ApiRoutes.addMembersToGroup.replace(\":group\", toGroup),\r\n                    {\r\n                        queryParameters: null,\r\n                        requestBody: {\r\n                            fromGroup,\r\n                            addUserType: \"all\"\r\n                        }\r\n                    }\r\n                );\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\r\n                value: false\r\n            });\r\n\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: \"Members added.\",\r\n                color: \"primary\",\r\n                position: \"bottom\"\r\n            });\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: error.toString(),\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const INVITED_USERS_REQUESTING_CSV_STATE_CHANGED = \"INVITED_USERS_REQUESTING_CSV_STATE_CHANGED\";\r\nexport const exportToCsv = () => {\r\n    return async (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const requestingCsv = getState().invitedUsers.requestingCsv;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (requestingCsv) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: true\r\n            });\r\n\r\n            let response = await new Api().request(\"get\", ApiRoutes.exportUsersCsvRoute);\r\n\r\n            // create a file from the csv returned by the server\r\n            const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\r\n            const link = document.createElement(\"a\");\r\n            if (link.download !== undefined) {\r\n                // create a download url\r\n                const url = URL.createObjectURL(blob);\r\n                link.setAttribute(\"href\", url);\r\n                link.setAttribute(\"download\", \"data.csv\");\r\n                link.style.visibility = \"hidden\";\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: false\r\n            });\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: error.toString(),\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: false\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\n\r\nlet invitedUsersListener = null;\r\n\r\nexport const INVITED_USERS_CHANGED = \"INVITED_USERS_CHANGED\";\r\n\r\nexport const startListeningForInvitedUsersChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!invitedUsersListener) {\r\n            const admin = getState().auth.user;\r\n\r\n            invitedUsersListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n\r\n            invitedUsersListener\r\n                .on(\"child_added\", async (snapshot) => {\r\n                        let invitedUser = snapshot.val();\r\n\r\n                        let shouldAddInvitedUser = false;\r\n\r\n                        if (admin.superAdmin) {\r\n                            shouldAddInvitedUser = true;\r\n                        } else {\r\n                            if (invitedUser.invitedBy === admin.anid) {\r\n                                shouldAddInvitedUser = true;\r\n                            }\r\n                        }\r\n\r\n                        if (!shouldAddInvitedUser) {\r\n                            return;\r\n                        }\r\n\r\n                        let invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n                        let invitedUserIndex = invitedUsers.findIndex(existingInvitedUser => existingInvitedUser.id === invitedUser.id);\r\n                        if (invitedUserIndex === -1) {\r\n                            const {\r\n                                invitedUserSearchText,\r\n                                invitedUsersInSearchMode,\r\n                                filterRegistrationStatus,\r\n                                filterUserType,\r\n                                filterMembers,\r\n                                filterGroup\r\n                            } = getState().invitedUsers;\r\n\r\n                            const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n                            const group = await realtimeDBUtils.loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n\r\n                            invitedUser.Invitor = {\r\n                                anid: group.anid,\r\n                                displayName: group.displayName,\r\n                                logo: group.logo\r\n                            };\r\n\r\n                            if (invitedUser.hasOwnProperty(\"officialUserID\")) {\r\n                                invitedUser.officialUser = await getUserBasedOnID(invitedUser.officialUserID);\r\n                            }\r\n\r\n                            let matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                                sourceInvitedUsers: [...invitedUsers, invitedUser],\r\n                                searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                                filterRegistrationStatus,\r\n                                filterUserType,\r\n                                filterMembers,\r\n                                filterGroup,\r\n                                currentGroupProperties\r\n                            });\r\n\r\n                            return dispatch({\r\n                                type: INVITED_USERS_CHANGED,\r\n                                invitedUsers: [...getState().invitedUsers.invitedUsers, invitedUser],\r\n                                matchedInvitedUsers\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n\r\n            invitedUsersListener\r\n                .on(\"child_changed\", async (snapshot) => {\r\n                    let invitedUser = snapshot.val();\r\n\r\n                    let shouldChangeInvitedUser = false;\r\n\r\n                    if (admin.superAdmin) {\r\n                        shouldChangeInvitedUser = true;\r\n                    } else {\r\n                        if (invitedUser.invitedBy === admin.anid) {\r\n                            shouldChangeInvitedUser = true;\r\n                        }\r\n                    }\r\n\r\n                    if (!shouldChangeInvitedUser) {\r\n                        return;\r\n                    }\r\n\r\n                    let invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n                    let invitedUserIndex = invitedUsers.findIndex(\r\n                        existingInvitedUser => existingInvitedUser.id === invitedUser.id\r\n                    );\r\n                    if (invitedUserIndex !== -1) {\r\n                        invitedUser.Invitor = invitedUsers[invitedUserIndex].Invitor;\r\n                        invitedUser.officialUser = invitedUsers[invitedUserIndex].officialUser;\r\n                        invitedUsers[invitedUserIndex] = invitedUser;\r\n                        const {\r\n                            invitedUserSearchText,\r\n                            invitedUsersInSearchMode,\r\n                            filterRegistrationStatus,\r\n                            filterUserType,\r\n                            filterMembers,\r\n                            filterGroup\r\n                        } = getState().invitedUsers;\r\n\r\n                        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n                        let matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                            sourceInvitedUsers: [...invitedUsers],\r\n                            searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                            filterRegistrationStatus,\r\n                            filterUserType,\r\n                            filterMembers,\r\n                            filterGroup,\r\n                            currentGroupProperties\r\n                        });\r\n\r\n                        return dispatch({\r\n                            type: INVITED_USERS_CHANGED,\r\n                            invitedUsers: [...invitedUsers],\r\n                            matchedInvitedUsers\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForInvitedUsersChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (invitedUsersListener) {\r\n            invitedUsersListener.off('child_added');\r\n            invitedUsersListener.off('child_changed');\r\n            invitedUsersListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    InputLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {HashLoader} from \"react-spinners\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css} from \"aphrodite\";\r\nimport InfoOverlay from \"../../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as invitedUsersActions from \"../../../redux-store/actions/invitedUsersActions\";\r\nimport * as invitationDialogActions from \"../../../redux-store/actions/invitationDialogActions\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport * as myUtils from \"../../../utils/utils\";\r\nimport * as colors from \"../../../values/colors\";\r\n\r\nexport const FILTER_REGISTRATION_STATUS_ALL = -1;\r\n\r\nexport const FILTER_GROUP_MEMBERS_ALL = 0;\r\nexport const FILTER_HOME_MEMBERS = 1;\r\nexport const FILTER_PLATFORM_MEMBERS = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n\r\n        admin: state.auth.user,\r\n\r\n        invitedUsers: state.invitedUsers.invitedUsers,\r\n        invitedUsersLoaded: state.invitedUsers.invitedUsersLoaded,\r\n        invitedUsersBeingLoaded: state.invitedUsers.invitedUsersBeingLoaded,\r\n\r\n        invitedUsersPage: state.invitedUsers.invitedUsersPage,\r\n        invitedUsersRowsPerPage: state.invitedUsers.invitedUsersRowsPerPage,\r\n\r\n        filterRegistrationStatus: state.invitedUsers.filterRegistrationStatus,\r\n        filterUserType: state.invitedUsers.filterUserType,\r\n        filterMembers: state.invitedUsers.filterMembers,\r\n        filterGroup: state.invitedUsers.filterGroup,\r\n\r\n        invitedUserSearchText: state.invitedUsers.invitedUserSearchText,\r\n        invitedUsersInSearchMode: state.invitedUsers.invitedUsersInSearchMode,\r\n\r\n        requestingCsv: state.invitedUsers.requestingCsv,\r\n        addingMembersFromOneGroupToAnotherGroup: state.invitedUsers.addingMembersFromOneGroupToAnotherGroup,\r\n\r\n        matchedInvitedUsers: state.invitedUsers.matchedInvitedUsers\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadInvitedUsers: () => dispatch(invitedUsersActions.loadInvitedUsers()),\r\n        toggleSearchMode: () => dispatch(invitedUsersActions.toggleInvitedUsersSearchMode()),\r\n        handleInputChanged: (event) => dispatch(invitedUsersActions.handleInputChanged(event)),\r\n        handleChangeTablePage: (event, newPage) => dispatch(invitedUsersActions.handleChangeTablePage(event, newPage)),\r\n        handleChangeTableRowsPerPage: (event) => dispatch(invitedUsersActions.handleChangeTableRowsPerPage(event)),\r\n        startListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.startListeningForInvitedUsersChanged()),\r\n        resendInvite: (invitedUser) => dispatch(invitedUsersActions.resendInvite(invitedUser)),\r\n        exportToCsv: () => dispatch(invitedUsersActions.exportToCsv()),\r\n        addMembersFromOneGroupToAnotherGroup: (fromGroup, toGroup) => dispatch(invitedUsersActions.addMembersFromOneGroupToAnotherGroup(fromGroup, toGroup)),\r\n\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog())\r\n    }\r\n};\r\n\r\nclass InvitedUsers extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n\r\n            startListeningForInvitedUsersChanged\r\n        } = this.props;\r\n\r\n        if (invitedUsers && invitedUsersLoaded) {\r\n            startListeningForInvitedUsersChanged();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            admin,\r\n\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup,\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n\r\n            systemGroups,\r\n            groupsLoaded,\r\n            requestingCsv,\r\n            addingMembersFromOneGroupToAnotherGroup,\r\n\r\n            toggleInvitationDialog,\r\n            toggleSearchMode,\r\n            handleInputChanged,\r\n            exportToCsv,\r\n            addMembersFromOneGroupToAnotherGroup\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column width=\"100%\">\r\n                <Divider style={{marginBottom: 30}}/>\r\n\r\n                {/** Invite new user button - available for group admins only */}\r\n                {\r\n                    admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row style={{marginBottom: 30}}>\r\n                            <Col xs={12} md={5} lg={12}>\r\n                                <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleInvitationDialog}>\r\n                                    <Add style={{ marginRight: 10, width: 20, height: \"auto\"}}/>Invite new group member</Button>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Filters */}\r\n                <Row>\r\n                    {/** Registration status */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">Registration status</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterRegistrationStatus\"/>\r\n                                }\r\n                                style={{marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterRegistrationStatus\"\r\n                                value={filterRegistrationStatus}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={FILTER_REGISTRATION_STATUS_ALL}> All</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_NOT_REGISTERED}>Not registered</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_STATUS_ACTIVE}>Active</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** User type */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">User type</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterUserType\"/>\r\n                                }\r\n                                style={{ marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterUserType\"\r\n                                value={filterUserType}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={0}>All</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_INVESTOR}>Investor</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_ISSUER}>Issuer</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** Group members */}\r\n                    {\r\n                        !admin.superAdmin\r\n                            ?\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FormControl fullWidth>\r\n                                        <InputLabel>\r\n                                            <Typography variant=\"body1\" color=\"primary\" align=\"left\">Members</Typography>\r\n                                        </InputLabel>\r\n                                        <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterMembers\"/>\r\n                                            }\r\n                                            style={{ marginTop: 25, width: \"100%\"}}\r\n                                            name=\"filterMembers\"\r\n                                            value={filterMembers}\r\n                                            onChange={handleInputChanged}\r\n                                        >\r\n                                            <MenuItem value={FILTER_GROUP_MEMBERS_ALL} key={FILTER_GROUP_MEMBERS_ALL}>All</MenuItem>\r\n                                            <MenuItem value={FILTER_HOME_MEMBERS} key={FILTER_HOME_MEMBERS}>Home members</MenuItem>\r\n                                            <MenuItem value={FILTER_PLATFORM_MEMBERS} key={FILTER_PLATFORM_MEMBERS}>Platform members</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n\r\n                                    <FlexView marginLeft={15}>\r\n                                        <InfoOverlay\r\n                                            placement=\"right\"\r\n                                            message={\r\n                                                \"Home members are the users that registered through this group. Platform members are existing users of Invest West who requested access to this group.\"\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n                            :\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FormControl fullWidth>\r\n                                    <InputLabel>\r\n                                        <Typography variant=\"body1\" color=\"primary\" align=\"left\">Group</Typography>\r\n                                    </InputLabel>\r\n                                    <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterGroup\" disabled={!groupsLoaded}/>\r\n                                        }\r\n                                        style={{marginTop: 25, width: \"100%\"}}\r\n                                        name=\"filterGroup\"\r\n                                        value={filterGroup}\r\n                                        onChange={handleInputChanged}>\r\n                                        <MenuItem value=\"null\" key=\"null\">\r\n                                            {\r\n                                                !groupsLoaded\r\n                                                    ?\r\n                                                    \"Loading groups ...\"\r\n                                                    :\r\n                                                    \"All\"\r\n                                            }\r\n                                        </MenuItem>\r\n                                        {\r\n                                            !groupsLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                systemGroups.map(group => (\r\n                                                    <MenuItem value={group.anid} key={group.anid}>{group.displayName}</MenuItem>\r\n                                                ))\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Search email */}\r\n                <Row\r\n                    style={{ marginTop: 30,  marginBottom: 30}}>\r\n                    <Col xs={12} sm={12} md={12} lg={8}>\r\n                        <FlexView>\r\n                            <FlexView basis=\"90%\" vAlignContent=\"center\" hAlignContent=\"center\"\r\n                            >\r\n                                <TextField value={invitedUserSearchText} label=\"Search by email\" name=\"invitedUserSearchText\" fullWidth variant=\"outlined\" margin=\"dense\" onChange={handleInputChanged}/>\r\n                            </FlexView>\r\n                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" basis=\"10%\" marginLeft={10}>\r\n                                <IconButton style={{width: 50,height: 50}}\r\n                                    onClick={toggleSearchMode}>\r\n                                    {\r\n                                        !invitedUsersInSearchMode\r\n                                            ?\r\n                                            <SearchIcon/>\r\n                                            :\r\n                                            <CloseIcon/>\r\n                                    }\r\n                                </IconButton>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Add members (only investors) from QIB to Silicon Gorge and vice versa */}\r\n                {\r\n                    !admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        systemGroups.findIndex(group => group.anid === filterGroup) !== -1\r\n                        && (\r\n                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                            || systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"iap-silicon-gorge\"\r\n                        )\r\n                            ?\r\n                            <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)}\r\n                                    onClick={\r\n                                        systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                            ?\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"iap-silicon-gorge\")].anid\r\n                                            )\r\n                                            :\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"qib\")].anid\r\n                                            )\r\n                                    }\r\n                                    style={{marginRight: 10}}>\r\n                                    {\r\n                                        addingMembersFromOneGroupToAnotherGroup\r\n                                            ?\r\n                                            \"Adding ...\"\r\n                                            :\r\n                                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                                ?\r\n                                                \"Add members from QIB to Silicon Gorge\"\r\n                                                :\r\n                                                \"Add members from Silicon Gorge to QIB\"\r\n                                    }\r\n                                </Button>\r\n                            </FlexView>\r\n                            :\r\n                            null\r\n                }\r\n\r\n                {/** Export button - only available for admins */}\r\n                {\r\n                    admin.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={exportToCsv} style={{marginRight: 10}}\r\n                            >\r\n                                {\r\n                                    requestingCsv\r\n                                        ?\r\n                                        \"Exporting ...\"\r\n                                        :\r\n                                        \"Export to csv\"\r\n                                }\r\n                            </Button>\r\n\r\n                            <InfoOverlay placement=\"right\"\r\n                                message={\r\n                                    admin.superAdmin\r\n                                        ?\r\n                                        \"Export all the users in the system to a .csv file.\"\r\n                                        :\r\n                                        \"Export all the members in your group to a .csv file.\"\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                }\r\n\r\n                {\r\n                    this.renderInvitedUsersTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users table\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUsersTable() {\r\n        const {\r\n            admin,\r\n\r\n            matchedInvitedUsers,\r\n\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n\r\n            handleChangeTablePage,\r\n            handleChangeTableRowsPerPage\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper elevation={0} style={{width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Name</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Email</b></Typography>\r\n                            </TableCell>\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <Typography align=\"left\" variant=\"body2\"><b>Group</b></Typography>\r\n                                    </TableCell>\r\n                            }\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>User type</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Invited/requested to join date</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Registration status</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\" ><b>Registered/joined date</b></Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderInvitedUsersRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} count={matchedInvitedUsers.length} rowsPerPage={invitedUsersRowsPerPage} page={invitedUsersPage}\r\n                                backIconButtonProps={{\r\n                                    'aria-label': 'Previous Page',\r\n                                }}\r\n                                nextIconButtonProps={{\r\n                                    'aria-label': 'Next Page',\r\n                                }}\r\n                                SelectProps={{\r\n                                    native: true,\r\n                                }}\r\n                                onChangePage={handleChangeTablePage}\r\n                                onChangeRowsPerPage={handleChangeTableRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvitedUsersRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            admin,\r\n            invitedUsersLoaded,\r\n            matchedInvitedUsers,\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterGroup,\r\n            filterMembers,\r\n            resendInvite\r\n        } = this.props;\r\n\r\n        let renderedInvitedUsers = [];\r\n\r\n        if (matchedInvitedUsers.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={12}>\r\n                        <FlexView style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                invitedUsersLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            invitedUsersInSearchMode\r\n                                            || filterRegistrationStatus !== FILTER_REGISTRATION_STATUS_ALL\r\n                                            || filterUserType !== 0\r\n                                            || filterGroup !== \"null\"\r\n                                            || filterMembers !== FILTER_GROUP_MEMBERS_ALL\r\n                                                ?\r\n                                                \"There are no users found using your current filter criteria.\"\r\n                                                :\r\n                                                \"No users found.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let matchedUsersInvitedByTheGroup = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate !== \"none\"\r\n        );\r\n        matchedUsersInvitedByTheGroup.sort((user1, user2) => {\r\n            return user2.invitedDate - user1.invitedDate;\r\n        });\r\n\r\n        let matchedUsersRequestedToJoin = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate === \"none\"\r\n        );\r\n        matchedUsersRequestedToJoin.sort((user1, user2) => {\r\n            return user2.requestedToJoinDate - user1.requestedToJoinDate;\r\n        });\r\n\r\n        if (filterMembers === FILTER_HOME_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup];\r\n        } else if (filterMembers === FILTER_PLATFORM_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersRequestedToJoin];\r\n        } else {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup, ...matchedUsersRequestedToJoin];\r\n        }\r\n\r\n        return (\r\n            !renderedInvitedUsers\r\n                ?\r\n                null\r\n                :\r\n                renderedInvitedUsers\r\n                    .slice(invitedUsersPage * invitedUsersRowsPerPage, invitedUsersPage * invitedUsersRowsPerPage + invitedUsersRowsPerPage)\r\n                    .map(invitedUser => (\r\n                        <TableRow hover key={invitedUser.id}>\r\n                            {/** User name */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    {/** User name */}\r\n                                    <NavLink\r\n                                        to={\r\n                                            invitedUser.hasOwnProperty('officialUserID')\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.EDIT_USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                    :\r\n                                                    ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                :\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    :\r\n                                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                        }\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <Typography color=\"primary\" align=\"left\">\r\n                                            {\r\n                                                invitedUser.hasOwnProperty('officialUser')\r\n                                                    ?\r\n                                                    `${invitedUser.officialUser.firstName} ${invitedUser.officialUser.lastName}`\r\n                                                    :\r\n                                                    `${invitedUser.firstName} ${invitedUser.lastName}`\r\n                                            }\r\n                                        </Typography>\r\n                                    </NavLink>\r\n\r\n                                    {/** Resend invite button */}\r\n                                    {\r\n                                        invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            // this check to ensure only the group admin that initally invited this\r\n                                            // user can resend the invitation\r\n                                            admin.superAdmin\r\n                                            || (!admin.superAdmin\r\n                                                && groupProperties\r\n                                                && groupProperties.anid !== invitedUser.invitedBy\r\n                                            )\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={10}>\r\n                                                    <Button variant=\"outlined\" size=\"small\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={() => resendInvite(invitedUser)}>Resend invite</Button>\r\n                                                </FlexView>\r\n                                    }\r\n\r\n                                    {/** Display home/platform members */}\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 15}}>\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Email */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    <Typography align=\"left\" variant=\"body2\" paragraph={admin.superAdmin}>{invitedUser.email}</Typography>\r\n\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            <FlexView column>\r\n                                                <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>Invited ID:</u></b> {invitedUser.id}</Typography>\r\n                                                {\r\n                                                    !invitedUser.hasOwnProperty('officialUserID')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>UID:</u></b> {invitedUser.officialUserID}</Typography>\r\n                                                }\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Group the user belongs to - available only for super admins */}\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <FlexView column>\r\n                                            <Typography align=\"left\" variant=\"body2\" paragraph>\r\n                                                {invitedUser.Invitor.displayName}\r\n                                            </Typography>\r\n\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </TableCell>\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\"  variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            \"Issuer\"\r\n                                            :\r\n                                            \"Investor\"\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Date invited / requested to join / registered via public link */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.invitedDate !== \"none\"\r\n                                        && (\r\n                                            invitedUser.hasOwnProperty('requestedToJoinDate')\r\n                                            && invitedUser.requestedToJoinDate !== \"none\"\r\n                                        )\r\n                                            ?\r\n                                            `Registered via public link on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                            :\r\n                                            invitedUser.invitedDate !== \"none\"\r\n                                                ?\r\n                                                `Invited on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                                :\r\n                                                `Requested to join on ${myUtils.dateInReadableFormat(invitedUser.requestedToJoinDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Registration status */}\r\n                            <TableCell colSpan={1}>{this.renderInvitedUserRegistrationStatus(invitedUser)}</TableCell>\r\n\r\n                            {/** Date registered/joined */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        !invitedUser.hasOwnProperty('joinedDate')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            !invitedUser.requestedToJoin\r\n                                                ?\r\n                                                `Registered on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                                :\r\n                                                `Joined on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function is used to render invited users' registration status\r\n     *\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUserRegistrationStatus = invitedUser => {\r\n\r\n        let msgObj = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (invitedUser.status) {\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                msgObj.msg = 'Not registered';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                msgObj.msg = `Current ${invitedUser.type === DB_CONST.TYPE_INVESTOR ? \"investor\" : \"issuer\"}`;\r\n                msgObj.color = 'primary';\r\n                break;\r\n            case DB_CONST.INVITED_USER_DECLINED_TO_REGISTER:\r\n                msgObj.msg = 'Declined to join';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_LEFT:\r\n                msgObj.msg = 'Left';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_KICKED_OUT:\r\n                msgObj.msg = 'Kicked out';\r\n                msgObj.color = 'error';\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"left\" variant=\"body2\" color={msgObj.color}>{msgObj.msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvitedUsers);","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog, DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    TextField,\r\n    Typography,\r\n    SnackbarContent,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport {Image} from 'react-bootstrap';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport Files from 'react-files';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\r\n\r\nimport sharedStyles, {SlideTransitionDown} from '../../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as colors from '../../../values/colors';\r\nimport * as utils from '../../../utils/utils';\r\n\r\nexport const ADD_STATUS_NONE = 0;\r\nexport const ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK = 1;\r\nexport const ADD_STATUS_USER_NAME_EXISTS = 2;\r\nexport const ADD_STATUS_EMAIL_ALREADY_USED = 3;\r\nexport const ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO = 4;\r\nexport const ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE = 5;\r\nexport const ADD_STATUS_SUCCESSFULLY_ADDED = 6;\r\nexport const ADD_STATUS_ERROR_HAPPENED = 7;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PLAIN_LOGO = 1;\r\nexport const UPLOAD_LOGO_WITH_TEXT = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        addAngelNetworkDialogOpen: state.manageAddAngelNetworkDialog.addAngelNetworkDialogOpen,\r\n\r\n        angelNetworkName: state.manageAddAngelNetworkDialog.angelNetworkName,\r\n        angelNetworkUsername: state.manageAddAngelNetworkDialog.angelNetworkUsername,\r\n        email: state.manageAddAngelNetworkDialog.email,\r\n        website: state.manageAddAngelNetworkDialog.website,\r\n        primaryColor: state.manageAddAngelNetworkDialog.primaryColor,\r\n        secondaryColor: state.manageAddAngelNetworkDialog.secondaryColor,\r\n\r\n        plainLogo: state.manageAddAngelNetworkDialog.plainLogo,\r\n        loadingPlainLogo: state.manageAddAngelNetworkDialog.loadingPlainLogo,\r\n        logoWithText: state.manageAddAngelNetworkDialog.logoWithText,\r\n        loadingLogoWithText: state.manageAddAngelNetworkDialog.loadingLogoWithText,\r\n\r\n        uploadMode: state.manageAddAngelNetworkDialog.uploadMode,\r\n        uploadProgress: state.manageAddAngelNetworkDialog.uploadProgress,\r\n\r\n        imgUploadError: state.manageAddAngelNetworkDialog.imgUploadError,\r\n        imgUploadErrorSnackbarOpen: state.manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen,\r\n\r\n        addButtonClicked: state.manageAddAngelNetworkDialog.addButtonClicked,\r\n        response: state.manageAddAngelNetworkDialog.addResult\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\r\n        handleInputChanged: (event) => dispatch(addAngelNetworkDialogActions.handleAddAngelNetworkInputChanged(event)),\r\n        addNewAngelNetwork: () => dispatch(addAngelNetworkDialogActions.addNewAngelNetwork()),\r\n\r\n        handleImageFilesChanged: (mode, files) => dispatch(addAngelNetworkDialogActions.handleImageFilesChanged(mode, files)),\r\n        handleImageFileError: (mode, error, file) => dispatch(addAngelNetworkDialogActions.handleImageFileError(mode, error, file)),\r\n        closeErrorSnackbar: () => dispatch(addAngelNetworkDialogActions.closeImageFileErrorSnackbar()),\r\n        resetImageFileErrorMessageWhenSnackbarExited: () => dispatch(addAngelNetworkDialogActions.resetImageFileErrorMessageWhenSnackbarExited())\r\n    }\r\n};\r\n\r\nclass AddAngelNetworkDialog extends Component {\r\n\r\n    handleImageFilesChanged = mode => files => {\r\n        this.props.handleImageFilesChanged(mode, files);\r\n    };\r\n\r\n    handleImageFileError = mode => (error, file) => {\r\n        this.props.handleImageFileError(mode, error, file);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            addAngelNetworkDialogOpen,\r\n\r\n            angelNetworkName,\r\n            angelNetworkUsername,\r\n            email,\r\n            website,\r\n            primaryColor,\r\n            secondaryColor,\r\n\r\n            plainLogo,\r\n            loadingPlainLogo,\r\n            logoWithText,\r\n            loadingLogoWithText,\r\n\r\n            imgUploadError,\r\n            imgUploadErrorSnackbarOpen,\r\n\r\n            addButtonClicked,\r\n\r\n            uploadMode,\r\n            uploadProgress,\r\n\r\n            handleImageFilesChanged,\r\n            handleImageFileError,\r\n            toggleAddAngelNetworkDialog,\r\n            handleInputChanged,\r\n            addNewAngelNetwork,\r\n            closeErrorSnackbar,\r\n            resetImageFileErrorMessageWhenSnackbarExited,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog ref={forwardedRef} open={addAngelNetworkDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleAddAngelNetworkDialog} {...other}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">\r\n                                Add new group\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleAddAngelNetworkDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{marginTop: 10}}>\r\n                    <TextField\r\n                        label=\"Group name\"\r\n                        placeholder=\"Write group's full name here ...\"\r\n                        name=\"angelNetworkName\"\r\n                        value={angelNetworkName}\r\n                        fullWidth\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={addButtonClicked && angelNetworkName.length === 0}\r\n                        onChange={handleInputChanged}\r\n                    />\r\n\r\n                    <TextField\r\n                        label=\"Group username\"\r\n                        placeholder=\"Write group's username here. E.g. aba, or qtec\"\r\n                        helperText=\"Note: Username must be unique. For convention, use lowercase letters and use - to connect words. E.g. future-space\"\r\n                        name=\"angelNetworkUsername\"\r\n                        value={angelNetworkUsername}\r\n                        fullWidth\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={addButtonClicked && angelNetworkUsername.trim().length === 0}\r\n                        onChange={handleInputChanged}\r\n                    />\r\n\r\n                    <FormControl fullWidth style={{marginTop: 25, marginBottom: 25}}>\r\n                        <TextField\r\n                            label=\"Registered email\"\r\n                            placeholder=\"Write email here ...\"\r\n                            helperText=\"This email will be used to login to group's admin page. Once added, an email with auto-generated password will be sent to this email address.\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && email.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth>\r\n                        <TextField\r\n                            label=\"Website\"\r\n                            placeholder=\"Group's official website\"\r\n                            name=\"website\"\r\n                            value={website}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && website.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                        {\r\n                            website.trim().length === 0 || utils.isValidWebURL(website)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    color=\"error\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Invalid website URL\r\n                                </Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth style={{marginTop: 25}}>\r\n                        <TextField\r\n                            label=\"Primary color\"\r\n                            placeholder=\"E.g. #FFFFFF\"\r\n                            name=\"primaryColor\"\r\n                            value={primaryColor.toUpperCase()}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && primaryColor.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                        {\r\n                            primaryColor.trim().length === 0 || utils.isValidHexColorCode(primaryColor)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography variant=\"body2\" color=\"error\"  align=\"left\">Invalid color</Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth style={{marginBottom: 25}}>\r\n                        <TextField\r\n                            label=\"Secondary color\"\r\n                            placeholder=\"E.g. #FFFFFF\"\r\n                            name=\"secondaryColor\"\r\n                            value={secondaryColor.toUpperCase()}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && secondaryColor.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n\r\n                        {\r\n                            secondaryColor.trim().length === 0 || utils.isValidHexColorCode(secondaryColor)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography variant=\"body2\" color=\"error\" align=\"left\">Invalid color</Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    {/** Upload plain (main) logo (compulsory) */}\r\n                    <FlexView column>\r\n                        <Files\r\n                            className={css(styles.img_drop_zone)}\r\n                            onChange={this.handleImageFilesChanged(UPLOAD_PLAIN_LOGO)}\r\n                            onError={this.handleImageFileError(UPLOAD_PLAIN_LOGO)}\r\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                            minFileSize={0}\r\n                            multiple\r\n                            clickable\r\n                            style={{marginTop: 25}}\r\n                        >\r\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\r\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload plain logo (with no text)</FlexView>\r\n                            </Files>\r\n\r\n                        {\r\n                            !plainLogo\r\n                                ?\r\n                                null\r\n                                :\r\n                                (\r\n                                    <FlexView marginTop={20} width={270} height={270}>\r\n                                        <Image src={window.URL.createObjectURL(plainLogo)} roundedCircle thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\r\n                                    </FlexView>\r\n                                )\r\n                        }\r\n                    </FlexView>\r\n\r\n                    {/** Upload logo with text (optional) */}\r\n                    <FlexView column marginTop={25}>\r\n                        <Files\r\n                            className={css(styles.img_drop_zone)}\r\n                            onChange={this.handleImageFilesChanged(UPLOAD_LOGO_WITH_TEXT)}\r\n                            onError={this.handleImageFileError(UPLOAD_LOGO_WITH_TEXT)}\r\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                            minFileSize={0}\r\n                            multiple\r\n                            clickable\r\n                        >\r\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\r\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload logo with text (optional)</FlexView>\r\n                            </Files>\r\n\r\n                        {\r\n                            !logoWithText\r\n                                ?\r\n                                null\r\n                                :\r\n                                (\r\n                                    <FlexView marginTop={20} width={540} height={270}>\r\n                                        <Image src={window.URL.createObjectURL(logoWithText)} thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\r\n                                    </FlexView>\r\n                                )\r\n                        }\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={15} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderRespondCode()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={addNewAngelNetwork} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                            disabled={\r\n                                angelNetworkName.trim().length === 0\r\n                                || angelNetworkUsername.trim().length === 0\r\n                                || email.trim().length === 0\r\n                                || website.trim().length === 0\r\n                                || (website.trim().length > 0 && !utils.isValidWebURL(website))\r\n                                || primaryColor.trim().length === 0\r\n                                || secondaryColor.trim().length === 0\r\n                                || (primaryColor.trim().length > 0 && !utils.isValidHexColorCode(primaryColor))\r\n                                || (secondaryColor.trim().length > 0 && !utils.isValidHexColorCode(secondaryColor))\r\n                                || !plainLogo\r\n                            }\r\n                            style={{ marginLeft: 35}}>\r\n                            Add\r\n                            <AddIcon fontSize=\"small\" style={{marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n\r\n                <Snackbar\r\n                    open={imgUploadErrorSnackbarOpen}\r\n                    anchorOrigin={{ vertical: 'top', horizontal: 'center',}}\r\n                    autoHideDuration={3000}\r\n                    onClose={closeErrorSnackbar}\r\n                    onExited={resetImageFileErrorMessageWhenSnackbarExited}\r\n                    TransitionComponent={SlideTransitionDown}\r\n                    transitionDuration={{ enter: 130, exit: 130}}>\r\n                    <SnackbarContent style={{backgroundColor: colors.red_700}}\r\n                        message={imgUploadError}\r\n                        action={[\r\n                            <IconButton key=\"close\" color=\"inherit\" onClick={closeErrorSnackbar}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        ]}\r\n                    />\r\n                </Snackbar>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render add angel network result\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderRespondCode = () => {\r\n        const {\r\n            response,\r\n            uploadMode,\r\n            uploadProgress\r\n        } = this.props;\r\n\r\n        let res = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (response) {\r\n            case ADD_STATUS_NONE:\r\n                return null;\r\n            case ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK:\r\n                res.msg = \"Checking if the angel network has been added before ...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_USER_NAME_EXISTS:\r\n                res.msg = \"This username has already been used.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO:\r\n                res.msg = `Uploading ${uploadMode === UPLOAD_PLAIN_LOGO ? \"plain logo\" : \"logo with text\"}, ${parseInt(uploadProgress)}% completed`;\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE:\r\n                res.msg = \"Creating angel network's profile ...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_EMAIL_ALREADY_USED:\r\n                res.msg = \"This email has already been used.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case ADD_STATUS_SUCCESSFULLY_ADDED:\r\n                res.msg = \"Added successfully. An email has been sent to the angel network for login information.\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_ERROR_HAPPENED:\r\n                res.msg = \"Error happened. Couldn't add the angel network.\";\r\n                res.color = \"error\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <Typography color={res.color} variant=\"subtitle1\" align=\"left\">\r\n                {res.msg}\r\n            </Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddAngelNetworkDialog);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    img_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as myUtils from '../../utils/utils';\r\nimport {\r\n    ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK,\r\n    ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE,\r\n    ADD_STATUS_EMAIL_ALREADY_USED,\r\n    ADD_STATUS_ERROR_HAPPENED,\r\n    ADD_STATUS_SUCCESSFULLY_ADDED,\r\n    ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n    ADD_STATUS_USER_NAME_EXISTS,\r\n    UPLOAD_LOGO_WITH_TEXT,\r\n    UPLOAD_PLAIN_LOGO\r\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const TOGGLE_ADD_ANGEL_NETWORK_DIALOG = 'TOGGLE_ADD_ANGEL_NETWORK_DIALOG';\r\nexport const toggleAddAngelNetworkDialog = () => {\r\n    return {\r\n        type: TOGGLE_ADD_ANGEL_NETWORK_DIALOG\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED = 'ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED';\r\nexport const handleAddAngelNetworkInputChanged = event => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED = 'ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED';\r\nexport const ADD_ANGEL_NETWORK_RESULT_CHANGED = 'ADD_ANGEL_NETWORK_RESULT_CHANGED';\r\nexport const addNewAngelNetwork = () => {\r\n    return async (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED\r\n        });\r\n\r\n        const {\r\n            angelNetworkName,\r\n            angelNetworkUsername,\r\n            email,\r\n            website,\r\n            primaryColor,\r\n            secondaryColor,\r\n            plainLogo,\r\n            logoWithText\r\n        } = getState().manageAddAngelNetworkDialog;\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n            result: ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK\r\n        });\r\n\r\n        // generate group id\r\n        const anid = firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        try {\r\n            // check if the group username has been used or not\r\n            const snapshots = await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild(\"groupUserName\")\r\n                .equalTo(angelNetworkUsername.toLowerCase())\r\n                .once(\"value\");\r\n\r\n            // username has already exists\r\n            if (snapshots.numChildren() > 0) {\r\n                dispatch({\r\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                    result: ADD_STATUS_USER_NAME_EXISTS\r\n                });\r\n                return;\r\n            }\r\n\r\n            const checkExistingUser = await realtimeDBUtils.doesUserExist(email);\r\n\r\n            // email has already been used\r\n            if (checkExistingUser.userExists) {\r\n                dispatch({\r\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                    result: ADD_STATUS_EMAIL_ALREADY_USED\r\n                });\r\n                return;\r\n            }\r\n\r\n            // upload plain logo\r\n            const uploadedPlainLogo = await uploadLogo(dispatch, anid, UPLOAD_PLAIN_LOGO, plainLogo);\r\n\r\n            // upload logo with text\r\n            const uploadedLogoWithText = await uploadLogo(dispatch, anid, UPLOAD_LOGO_WITH_TEXT, logoWithText);\r\n\r\n            // new group properties\r\n            const newGroupProperties = {\r\n                anid,\r\n                isInvestWest: false,\r\n                displayName: angelNetworkName,\r\n                displayNameLower: angelNetworkName.toLowerCase(), // for search function\r\n                groupUserName: angelNetworkUsername.toLowerCase(),\r\n                description: \"\",\r\n                website: website,\r\n                dateAdded: myUtils.getCurrentDate(),\r\n                status: DB_CONST.GROUP_STATUS_ACTIVE,\r\n                plainLogo: [{\r\n                    storageID: uploadedPlainLogo.storageID,\r\n                    url: uploadedPlainLogo.url\r\n                }],\r\n                logoWithText:\r\n                    !uploadedLogoWithText\r\n                        ?\r\n                        null\r\n                        :\r\n                        [{\r\n                            storageID: uploadedLogoWithText.storageID,\r\n                            url: uploadedLogoWithText.url\r\n                        }],\r\n                settings: {\r\n                    projectVisibility: DB_CONST.PROJECT_VISIBILITY_PRIVATE,\r\n                    makeInvestorsContactDetailsVisibleToIssuers: false, // initially set this to false\r\n                    primaryColor: primaryColor.toUpperCase(),\r\n                    secondaryColor: secondaryColor.toUpperCase()\r\n                }\r\n            }\r\n\r\n            // add new group properties to the database\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .child(anid)\r\n                .set(newGroupProperties);\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE\r\n            });\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.addGroupAdminRoute,\r\n                {\r\n                    requestBody: {\r\n                        adder: currentUser,\r\n                        groupProperties: newGroupProperties,\r\n                        newGroupAdminEmail: email\r\n                    }\r\n                }\r\n            );\r\n\r\n            // send a notification to the newly created super group admin\r\n            await realtimeDBUtils\r\n                .sendNotification({\r\n                    title: \"Change your password\",\r\n                    message: \"Welcome to Invest West. It is important to change your password as soon as possible. Please do it by clicking on the Password tab in your dashboard.\",\r\n                    userID: anid,\r\n                    action: `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Change password`\r\n                });\r\n\r\n            // adding a new super group admin succeeds\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_SUCCESSFULLY_ADDED\r\n            });\r\n        } catch (error) {\r\n            // remove the added group properties if error happened\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .child(anid)\r\n                .remove();\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_ERROR_HAPPENED,\r\n                error\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload an image (logo or profile picture)\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nconst uploadLogo = async (dispatch, anid, mode, blob) => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!blob) {\r\n            return resolve(null);\r\n        }\r\n\r\n        let firebaseStorage = firebase.storage();\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n            result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n            progress: 0\r\n        });\r\n\r\n        let storageID = myUtils.getCurrentDate();\r\n        let storageLocation = `${mode === UPLOAD_PLAIN_LOGO ? DB_CONST.PLAIN_LOGOS_CHILD : DB_CONST.LOGOS_WITH_TEXT_CHILD}/${storageID}`;\r\n\r\n        const storageRef = firebaseStorage\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child(storageLocation);\r\n\r\n        // upload logo to firebase storage\r\n        const uploadTask = storageRef.put(blob);\r\n        uploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n                progress,\r\n                mode\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_ERROR_HAPPENED,\r\n                mode\r\n            });\r\n\r\n            return reject(error);\r\n            // logo successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded logo\r\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\r\n\r\n                const imgUploadedObj = {\r\n                    storageID: storageID,\r\n                    url: imgDownloadURL\r\n                };\r\n\r\n                return resolve(imgUploadedObj);\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE = 'ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE';\r\nexport const ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED = 'ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED';\r\nexport const handleImageFilesChanged = (mode, files) => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageAddAngelNetworkDialog.imgUploadError.trim().length > 0 || getState().manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen) {\r\n            return null;\r\n        }\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE,\r\n            mode\r\n        });\r\n\r\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED,\r\n            blob,\r\n            mode\r\n        });\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR = 'ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR';\r\nexport const handleImageFileError = (mode, error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR,\r\n            error,\r\n            file,\r\n            mode\r\n        }\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR = 'ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR';\r\nexport const closeImageFileErrorSnackbar = () => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED = 'ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED';\r\nexport const resetImageFileErrorMessageWhenSnackbarExited = () => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED\r\n    }\r\n};\r\n\r\n","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_ANGEL_NETWORKS = 'LOADING_ANGEL_NETWORKS';\r\nexport const FINISHED_LOADING_ANGEL_NETWORKS = 'FINISHED_LOADING_ANGEL_NETWORKS';\r\nexport const loadAngelNetworks = () => {\r\n    return (dispatch, getState) => {\r\n        const admin = getState().auth.user;\r\n\r\n        if (!admin || (admin && !admin.superAdmin)) {\r\n            dispatch({\r\n                type: FINISHED_LOADING_ANGEL_NETWORKS\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_ANGEL_NETWORKS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\r\n            .then(angelNetworks => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\r\n                    angelNetworks\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: ANGEL_NETWORKS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_INPUT_CHANGED = 'ANGEL_NETWORKS_TABLE_INPUT_CHANGED';\r\nexport const handleAngelNetworksTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n\r\n        const searchText = event.target.value;\r\n        let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n\r\n        dispatch({\r\n            type: ANGEL_NETWORKS_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedAngelNetworks\r\n        });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE = 'TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().manageAngelNetworks.inSearchMode;\r\n        const searchText = getState().manageAngelNetworks.searchText;\r\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\r\n                enter: false,\r\n                matchedAngelNetworks: []\r\n            });\r\n        } else {\r\n            let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n            dispatch({\r\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\r\n                enter: true,\r\n                matchedAngelNetworks\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\n\r\nlet angelNetworksListener = null;\r\n\r\nexport const ANGEL_NETWORKS_IN_TABLE_CHANGED = 'ANGEL_NETWORKS_IN_TABLE_CHANGED';\r\n\r\nexport const startListeningForAngelNetworksChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!angelNetworksListener) {\r\n            angelNetworksListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n\r\n            angelNetworksListener\r\n                .on('child_added', snapshot => {\r\n                    let angelNetwork = snapshot.val();\r\n\r\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\r\n\r\n                    if (angelNetworkIndex === -1) {\r\n                        dispatch({\r\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\r\n                            angelNetworks: [...angelNetworks, angelNetwork]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            angelNetworksListener\r\n                .on('child_changed', snapshot => {\r\n                    let angelNetwork = snapshot.val();\r\n\r\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\r\n\r\n                    if (angelNetworkIndex !== -1) {\r\n                        angelNetworks[angelNetworkIndex] = angelNetwork;\r\n                        dispatch({\r\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\r\n                            angelNetworks\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForAngelNetworksChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (angelNetworksListener) {\r\n            angelNetworksListener.off('child_added');\r\n            angelNetworksListener.off('child_changed');\r\n            angelNetworksListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    Paper,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {HashLoader} from 'react-spinners';\r\n\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../../values/colors';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as myUtils from '../../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\r\nimport * as angelNetworksActions from '../../../redux-store/actions/angelNetworksActions';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        admin: state.auth.user,\r\n\r\n        angelNetworks: state.manageAngelNetworks.angelNetworks,\r\n        loadingAngelNetworks: state.manageAngelNetworks.loadingAngelNetworks,\r\n        angelNetworksLoaded: state.manageAngelNetworks.angelNetworksLoaded,\r\n        page: state.manageAngelNetworks.page,\r\n        rowsPerPage: state.manageAngelNetworks.rowsPerPage,\r\n\r\n        searchText: state.manageAngelNetworks.searchText,\r\n        inSearchMode: state.manageAngelNetworks.inSearchMode,\r\n        matchedAngelNetworks: state.manageAngelNetworks.matchedAngelNetworks\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\r\n        loadAngelNetworks: () => dispatch(angelNetworksActions.loadAngelNetworks()),\r\n        changePage: (event, newPage) => dispatch(angelNetworksActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(angelNetworksActions.changeRowsPerPage(event)),\r\n        handleAngelNetworksTableInputChanged: (event) => dispatch(angelNetworksActions.handleAngelNetworksTableInputChanged(event)),\r\n        toggleSearchMode: () => dispatch(angelNetworksActions.toggleSearchMode()),\r\n        startListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.startListeningForAngelNetworksChanged()),\r\n        stopListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.stopListeningForAngelNetworksChanged())\r\n    }\r\n};\r\n\r\nclass AngelNetworks extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData({inComponentDidMount: true});\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            stopListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if user is set to null\r\n        if (!admin || (admin && !admin.superAdmin) || !shouldLoadOtherData) {\r\n            stopListeningForAngelNetworksChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData({inComponentDidMount: false});\r\n        this.addListener();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        stopListeningForAngelNetworksChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = ({inComponentDidMount = true}) => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            loadingAngelNetworks,\r\n            angelNetworksLoaded,\r\n\r\n            loadAngelNetworks\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (inComponentDidMount) {\r\n                if (admin && admin.superAdmin) {\r\n                    loadAngelNetworks();\r\n                }\r\n            } else {\r\n                // loadAngelNetworks() is called in componentDidUpdate which happens after every state changes\r\n                // therefore, in order to avoid unlimited calls of loadAngelNetworks, another check variable called loadingAngelNetworks\r\n                // is added to ensure the function only gets called once.\r\n                if (admin && admin.superAdmin && !loadingAngelNetworks && !angelNetworksLoaded) {\r\n                    loadAngelNetworks();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            angelNetworks,\r\n            angelNetworksLoaded,\r\n\r\n            startListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (angelNetworks && angelNetworksLoaded) {\r\n                startListeningForAngelNetworksChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            toggleAddAngelNetworkDialog\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                width=\"100%\"\r\n            >\r\n                <Divider style={{marginBottom: 20}}/>\r\n                <Row style={{marginBottom: 10}}>\r\n                    <Col xs={12} md={5} lg={12} style={{marginBottom: 40}}>\r\n                        <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddAngelNetworkDialog}>\r\n                            <AddIcon style={{marginRight: 10, width: 20, height: \"auto\"}}/>\r\n                            Add new group\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n                {\r\n                    this.renderAngelNetworksTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render angel networks table\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderAngelNetworksTable = () => {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n            admin,\r\n            angelNetworks,\r\n            page,\r\n            rowsPerPage,\r\n            searchText,\r\n            inSearchMode,\r\n            loadAngelNetworks,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            handleAngelNetworksTableInputChanged,\r\n            toggleSearchMode\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !admin || (admin && !admin.superAdmin)) {\r\n            return null;\r\n        }\r\n\r\n        // sort angel networks by added date\r\n        angelNetworks.sort((angelNetwork1, angelNetwork2) => {\r\n            return (angelNetwork2.dateAdded - angelNetwork1.dateAdded);\r\n        });\r\n\r\n        return (\r\n            <Paper elevation={1} style={{overflowX: \"auto\"}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <InputBase name=\"searchText\" value={searchText}  onChange={handleAngelNetworksTableInputChanged} fullWidth placeholder=\"Search group by name\" type=\"text\"\r\n                                        startAdornment={\r\n                                            <InputAdornment position=\"start\">\r\n                                                <OverlayTrigger trigger={['hover', 'focus']}  flip placement=\"bottom\"\r\n                                                    overlay={\r\n                                                        <Tooltip id={`tooltip-bottom`}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    \"Exit search mode\"\r\n                                                                    :\r\n                                                                    \"Enter search mode\"\r\n                                                            }\r\n                                                        </Tooltip>\r\n                                                    }>\r\n                                                    <IconButton onClick={toggleSearchMode}>\r\n                                                        {\r\n                                                            inSearchMode\r\n                                                                ?\r\n                                                                <CloseIcon/>\r\n                                                                :\r\n                                                                <SearchIcon/>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                </OverlayTrigger>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip  placement=\"bottom\"\r\n                                            overlay={\r\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\r\n                                            }>\r\n                                            <IconButton onClick={loadAngelNetworks} style={{marginLeft: 10}}>\r\n                                                <RefreshIcon/>\r\n                                            </IconButton>\r\n                                        </OverlayTrigger>\r\n                                    </FlexView>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={2}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)}  align=\"left\">Groups</Typography>\r\n                                }/>\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">ID</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">\r\n                                        Date added\r\n                                    </Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">Status</Typography>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {this.renderAngelNetworkRows()}\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination style={{backgroundColor: colors.blue_gray_50}} rowsPerPageOptions={[5, 10, 25]} count={angelNetworks.length} rowsPerPage={rowsPerPage}  page={page} backIconButtonProps={{'aria-label': 'Previous Page',}} nextIconButtonProps={{'aria-label': 'Next Page',}} SelectProps={{ native: true,}} onChangePage={changePage} onChangeRowsPerPage={changeRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render angel network rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderAngelNetworkRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            angelNetworks,\r\n            angelNetworksLoaded,\r\n            matchedAngelNetworks,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage\r\n        } = this.props;\r\n\r\n        let renderedAngelNetworks = [];\r\n\r\n        if (inSearchMode) {\r\n            renderedAngelNetworks = matchedAngelNetworks;\r\n        } else {\r\n            renderedAngelNetworks = angelNetworks;\r\n        }\r\n\r\n        if (renderedAngelNetworks.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={5}>\r\n                        <FlexView\r\n                         style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                angelNetworksLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"Can't find any groups with this name.\"\r\n                                                :\r\n                                                \"No groups added yet.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            renderedAngelNetworks.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(angelNetwork => (\r\n                <TableRow key={angelNetwork.anid} hover>\r\n                    <TableCell colSpan={2}>\r\n                        <NavLink to={Routes.constructGroupDetailRoute(groupUserName, angelNetwork.groupUserName)} className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\r\n                            <Typography color=\"primary\">{angelNetwork.displayName}</Typography>\r\n                        </NavLink>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography color=\"primary\">{angelNetwork.anid}</Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography color=\"primary\">{myUtils.dateTimeInReadableFormat(angelNetwork.dateAdded)}</Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography\r\n                            color={\r\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\r\n                                    ?\r\n                                    \"primary\"\r\n                                    :\r\n                                    \"error\"\r\n                            }>\r\n                            {\r\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\r\n                                    ?\r\n                                    \"Active\"\r\n                                    :\r\n                                    \"Suspended\"\r\n                            }\r\n                        </Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            ))\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AngelNetworks);","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nexport const MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS';\r\nexport const MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS';\r\nexport const loadJoinRequests = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!groupProperties) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadRequestsToJoin({anid: groupProperties.anid})\r\n            .then(joinRequests => {\r\n                dispatch({\r\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\r\n                    joinRequests\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\r\n                    joinRequests: [],\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().manageJoinRequests.inSearchMode;\r\n        const searchText = getState().manageJoinRequests.searchText;\r\n        const joinRequests = getState().manageJoinRequests.joinRequests;\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: false,\r\n                matchedJoinRequests: []\r\n            });\r\n        } else {\r\n            let matchedJoinRequests = joinRequests.filter(joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n            dispatch({\r\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: true,\r\n                matchedJoinRequests\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED';\r\nexport const handleJoinRequestsTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const joinRequests = getState().manageJoinRequests.joinRequests;\r\n\r\n        const searchText = event.target.value;\r\n        let matchedJoinRequests = joinRequests.filter(\r\n            joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n\r\n        dispatch({\r\n            type: MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedJoinRequests\r\n        });\r\n    }\r\n};\r\n\r\nexport const acceptJoinRequest = (request) => {\r\n    return (dispatch, getState) => {\r\n        // remove the join request\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(request.id)\r\n            .remove()\r\n            .then(() => {\r\n                const pushKey = firebase.database().ref(DB_CONST.INVITED_USERS_CHILD).push().key;\r\n                const currentDate = utils.getCurrentDate();\r\n                // add a node in InvitedUsers\r\n                firebase\r\n                    .database()\r\n                    .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                    .child(pushKey)\r\n                    .set({\r\n                        id: pushKey,\r\n                        email: request.userProfile.email,\r\n                        firstName: request.userProfile.firstName,\r\n                        lastName: request.userProfile.lastName,\r\n                        title: request.userProfile.title,\r\n                        type: request.userProfile.type,\r\n                        status: DB_CONST.INVITED_USER_STATUS_ACTIVE,\r\n                        officialUserID: request.userID,\r\n                        invitedBy: request.groupToJoin,\r\n                        invitedDate: \"none\",\r\n                        requestedToJoin: true,\r\n                        requestedToJoinDate: currentDate,\r\n                        joinedDate: currentDate\r\n                    })\r\n                    .then(() => {\r\n                        realtimeDBUtils\r\n                            .sendNotification({\r\n                                title: `${request.group.displayName} has accepted your join request`,\r\n                                message: `Congratulations. You are now a member of ${request.group.displayName}. You can see and interact with all offers from ${request.group.displayName}.`,\r\n                                userID: request.userID,\r\n                                action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\r\n                            })\r\n                            .then(() => {\r\n                                // do something\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    });\r\n            });\r\n    }\r\n};\r\n\r\nexport const rejectJoinRequest = (request) => {\r\n    return (dispatch, getState) => {\r\n        // remove the join request\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(request.id)\r\n            .remove()\r\n            .then(() => {\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: `${request.group.displayName} has rejected your join request`,\r\n                        message: `We are so sorry that ${request.group.displayName} has rejected your join request. However, there are other groups that you can take part in.`,\r\n                        userID: request.userID,\r\n                        action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\r\n                    })\r\n                    .then(() => {\r\n                        // do something\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet joinRequestsListener = null;\r\n\r\nexport const MANAGE_JOIN_REQUESTS_CHANGED = 'MANAGE_JOIN_REQUESTS_CHANGED';\r\nexport const startListeningForJoinRequestsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!user || !groupProperties) {\r\n            return;\r\n        }\r\n\r\n        if (!joinRequestsListener) {\r\n            joinRequestsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(groupProperties.anid);\r\n\r\n            joinRequestsListener\r\n                .on('child_added', snapshot => {\r\n                    let joinRequest = snapshot.val();\r\n\r\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\r\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\r\n                    if (index === -1) {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(joinRequest.userID)\r\n                            .then(userProfile => {\r\n                                joinRequest.userProfile = userProfile;\r\n\r\n                                realtimeDBUtils\r\n                                    .loadAngelNetworkBasedOnANID(joinRequest.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n                                        joinRequest.group = angelNetwork;\r\n\r\n                                        dispatch({\r\n                                            type: MANAGE_JOIN_REQUESTS_CHANGED,\r\n                                            joinRequests: [...joinRequests, joinRequest]\r\n                                        });\r\n                                    });\r\n                            })\r\n                    }\r\n                });\r\n\r\n            joinRequestsListener\r\n                .on('child_removed', snapshot => {\r\n                    let joinRequest = snapshot.val();\r\n\r\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\r\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\r\n\r\n                    if (index !== -1) {\r\n                        joinRequests.splice(index, 1);\r\n                        dispatch({\r\n                            type: MANAGE_JOIN_REQUESTS_CHANGED,\r\n                            joinRequests\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForJoinRequestsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (joinRequestsListener) {\r\n            joinRequestsListener.off('child_added');\r\n            joinRequestsListener.off('child_removed');\r\n            joinRequestsListener = null;\r\n        }\r\n    }\r\n};\r\n","import React, {Component} from 'react';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\nimport {\r\n    Typography,\r\n    Paper,\r\n    TableHead,\r\n    TableRow,\r\n    TableCell,\r\n    TableBody,\r\n    TableFooter,\r\n    TablePagination,\r\n    Table,\r\n    InputBase,\r\n    InputAdornment,\r\n    IconButton, Button\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport FlexView from 'react-flexview';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {css} from 'aphrodite';\r\nimport {HashLoader} from 'react-spinners';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageJoinRequestsActions from '../../../redux-store/actions/manageJoinRequestsActions';\r\n\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../../values/colors';\r\nimport * as ROUTES from '../../../router/routes';\r\nimport * as myUtils from '../../../utils/utils';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n\r\n        joinRequests: state.manageJoinRequests.joinRequests,\r\n        loadingJoinRequests: state.manageJoinRequests.loadingJoinRequests,\r\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded,\r\n\r\n        searchText: state.manageJoinRequests.searchText,\r\n        inSearchMode: state.manageJoinRequests.inSearchMode,\r\n        matchedJoinRequests: state.manageJoinRequests.matchedJoinRequests,\r\n\r\n        page: state.manageJoinRequests.page,\r\n        rowsPerPage: state.manageJoinRequests.rowsPerPage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadJoinRequests: () => dispatch(manageJoinRequestsActions.loadJoinRequests()),\r\n        toggleSearchMode: () => dispatch(manageJoinRequestsActions.toggleSearchMode()),\r\n        changePage: (event, newPage) => dispatch(manageJoinRequestsActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(manageJoinRequestsActions.changeRowsPerPage(event)),\r\n        handleJoinRequestsTableInputChanged: (event) => dispatch(manageJoinRequestsActions.handleJoinRequestsTableInputChanged(event)),\r\n        acceptJoinRequest: (request) => dispatch(manageJoinRequestsActions.acceptJoinRequest(request)),\r\n        rejectJoinRequest: (request) => dispatch(manageJoinRequestsActions.rejectJoinRequest(request)),\r\n        startListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.startListeningForJoinRequestsChanged()),\r\n        stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged())\r\n    }\r\n};\r\n\r\nclass JoinRequests extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.attachListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n            user,\r\n            stopListeningForJoinRequestsChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if user is set to null\r\n        if (!user || !shouldLoadOtherData) {\r\n            stopListeningForJoinRequestsChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.attachListener();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n\r\n            loadingJoinRequests,\r\n            joinRequestsLoaded,\r\n\r\n            loadJoinRequests\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (user) {\r\n                if (!loadingJoinRequests && !joinRequestsLoaded) {\r\n                    loadJoinRequests();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener\r\n     */\r\n    attachListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            joinRequests,\r\n            joinRequestsLoaded,\r\n\r\n            startListeningForJoinRequestsChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (joinRequests && joinRequestsLoaded) {\r\n                startListeningForJoinRequestsChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            user,\r\n            joinRequests,\r\n            searchText,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage,\r\n            loadJoinRequests,\r\n            toggleSearchMode,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            handleJoinRequestsTableInputChanged\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !user) {\r\n            return null;\r\n        }\r\n\r\n        // sort join requests by request date (recent requests come first)\r\n        joinRequests.sort((joinRequest1, joinRequest2) => {\r\n            return (joinRequest2.requestedDate - joinRequest1.requestedDate);\r\n        });\r\n\r\n        return (\r\n            <Paper elevation={1} style={{ width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <InputBase name=\"searchText\" value={searchText} onChange={handleJoinRequestsTableInputChanged} fullWidth placeholder=\"Search access request by email\" type=\"text\"\r\n                                        startAdornment={\r\n                                            <InputAdornment position=\"start\">\r\n                                                <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\r\n                                                    overlay={\r\n                                                        <Tooltip id={`tooltip-bottom`}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    \"Exit search mode\"\r\n                                                                    :\r\n                                                                    \"Enter search mode\"\r\n                                                            }\r\n                                                        </Tooltip>\r\n                                                    }>\r\n                                                    <IconButton onClick={toggleSearchMode}>\r\n                                                        {\r\n                                                            inSearchMode\r\n                                                                ?\r\n                                                                <CloseIcon/>\r\n                                                                :\r\n                                                                <SearchIcon/>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                </OverlayTrigger>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\r\n                                            overlay={\r\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\r\n                                            }>\r\n                                            <IconButton onClick={loadJoinRequests} style={{marginLeft: 10}}>\r\n                                                <RefreshIcon/>\r\n                                            </IconButton>\r\n                                        </OverlayTrigger>\r\n                                    </FlexView>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={2}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>User's name</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Requested date</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Action</Typography>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderJoinRequestsRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} colSpan={5} count={joinRequests.length} rowsPerPage={rowsPerPage} page={page}\r\n                                backIconButtonProps={{'aria-label': 'Previous Page',}}\r\n                                nextIconButtonProps={{'aria-label': 'Next Page',}}\r\n                                SelectProps={{ native: true,}}\r\n                                onChangePage={changePage}\r\n                                onChangeRowsPerPage={changeRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render join requests table rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderJoinRequestsRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            joinRequests,\r\n            joinRequestsLoaded,\r\n            matchedJoinRequests,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage,\r\n            acceptJoinRequest,\r\n            rejectJoinRequest\r\n        } = this.props;\r\n\r\n        let renderedJoinRequests = [];\r\n\r\n        if (inSearchMode) {\r\n            renderedJoinRequests = matchedJoinRequests;\r\n        } else {\r\n            renderedJoinRequests = joinRequests;\r\n        }\r\n\r\n        if (renderedJoinRequests.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={5}>\r\n                        <FlexView style={{margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                joinRequestsLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"Can't find any access request with this email.\"\r\n                                                :\r\n                                                \"No access requests yet.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            renderedJoinRequests.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(joinRequest => (\r\n                <TableRow key={joinRequest.id} hover>\r\n                    <TableCell colSpan={2}>\r\n                        <FlexView column>\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        `${ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", joinRequest.userID)}`\r\n                                        :\r\n                                        `${ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", joinRequest.userID)}`\r\n                                }\r\n                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                            >\r\n                                <Typography align=\"left\" variant=\"body1\" color=\"primary\">\r\n                                    {`${joinRequest.userProfile.title} ${joinRequest.userProfile.firstName} ${joinRequest.userProfile.lastName}`}\r\n                                </Typography>\r\n                            </NavLink>\r\n                        </FlexView>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography align=\"left\" variant=\"body1\">\r\n                            {joinRequest.userProfile.email}\r\n                        </Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography align=\"left\" variant=\"body1\">\r\n                            {myUtils.dateInReadableFormat(joinRequest.requestedDate)}\r\n                        </Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <FlexView>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"secondary\" onClick={() => rejectJoinRequest(joinRequest)} style={{marginRight: 6}}>Reject</Button>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"primary\" onClick={() => acceptJoinRequest(joinRequest)} style={{marginLeft: 6}}>Accept</Button>\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            ))\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JoinRequests);","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport {trackActivity} from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport {\r\n    ADD_NEW_GROUP_ADMIN_STATUS_CHECKING,\r\n    ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED,\r\n    ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\r\n} from \"../../pages/admin/components/GroupAdminsTable\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const GROUP_ADMINS_TABLE_SET_GROUP = 'GROUP_ADMINS_TABLE_SET_GROUP';\r\nexport const setGroup = newGroup => {\r\n    return (dispatch, getState) => {\r\n        const prevTableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (!newGroup || !prevTableGroup) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_SET_GROUP,\r\n                group: newGroup\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (prevTableGroup.anid === newGroup.anid) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_SET_GROUP,\r\n            group: newGroup\r\n        });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS';\r\nexport const GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS';\r\nexport const loadGroupAdmins = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                groupAdmins: []\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superAdmin) {\r\n            if (currentUser.anid !== tableGroup.anid) {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: []\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadGroupAdminsBasedOnGroupID(tableGroup.anid)\r\n            .then(groupAdmins => {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: [...groupAdmins]\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: []\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE = 'GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED = 'GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG = 'GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG';\r\nexport const toggleAddNewGroupAdminDialog = () => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED = 'GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED';\r\nexport const handleAddNewGroupAdmin = () => {\r\n    return async (dispatch, getState) => {\r\n        const newGroupAdminEmail = getState().manageGroupAdminsTable.newGroupAdminEmail;\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superGroupAdmin) {\r\n            return;\r\n        }\r\n\r\n        if (newGroupAdminEmail.trim().length === 0) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n                status: ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n            status: ADD_NEW_GROUP_ADMIN_STATUS_CHECKING\r\n        });\r\n\r\n        try {\r\n            const checkResult = await realtimeDBUtils.doesUserExist(newGroupAdminEmail.toLowerCase());\r\n\r\n            // this email has already been used\r\n            if (checkResult.userExists) {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n                    status: ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED\r\n                });\r\n            } else {\r\n                const response = await new Api().request(\r\n                    \"post\",\r\n                    ApiRoutes.addGroupAdminRoute,\r\n                    {\r\n                        queryParameters: null,\r\n                        requestBody: {\r\n                            adder: currentUser,\r\n                            groupProperties: groupProperties,\r\n                            newGroupAdminEmail: newGroupAdminEmail\r\n                        }\r\n                    }\r\n                );\r\n\r\n                // obtain the newly created group admin profile from the server\r\n                const newGroupAdmin = response.data;\r\n\r\n                // track super group admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.ADMINISTRATORS_CHILD,\r\n                    interactedObjectID: newGroupAdmin.id,\r\n                    activitySummary:\r\n                        realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN\r\n                            .replace(\"%groupAdminEmail%\", newGroupAdminEmail)\r\n                    ,\r\n                    value: newGroupAdmin\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Group admin added successfully.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\r\n                });\r\n            }\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: \"Error happened. Couldn't add this group admin.\",\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n        }\r\n    }\r\n};\r\n//----------------------------------------------------------------------------------------------------------------------\r\n\r\nlet groupAdminsListener = null;\r\n\r\nexport const GROUP_ADMINS_TABLE_CHANGED = 'GROUP_ADMINS_TABLE_CHANGED';\r\nexport const startListeningForGroupAdminsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupAdminsListener) {\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superAdmin && currentUser.anid !== tableGroup.anid) {\r\n            return;\r\n        }\r\n\r\n        groupAdminsListener = firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD);\r\n\r\n        groupAdminsListener\r\n            .on('child_added', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index === -1) {\r\n\r\n                    if (groupAdmin.anid === tableGroup.anid) {\r\n                        dispatch({\r\n                            type: GROUP_ADMINS_TABLE_CHANGED,\r\n                            groupAdmins: [...groupAdmins, groupAdmin]\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n        groupAdminsListener\r\n            .on('child_changed', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index !== -1) {\r\n                    groupAdmins[index] = groupAdmin;\r\n                    dispatch({\r\n                        type: GROUP_ADMINS_TABLE_CHANGED,\r\n                        groupAdmins: [...groupAdmins]\r\n                    });\r\n                }\r\n            });\r\n\r\n        groupAdminsListener\r\n            .on('child_removed', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index !== -1) {\r\n                    groupAdmins.splice(index, 1);\r\n                    dispatch({\r\n                        type: GROUP_ADMINS_TABLE_CHANGED,\r\n                        groupAdmins: [...groupAdmins]\r\n                    });\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForGroupAdminsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupAdminsListener) {\r\n            groupAdminsListener.off('child_added');\r\n            groupAdminsListener.off('child_changed');\r\n            groupAdminsListener.off('child_removed');\r\n            groupAdminsListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Paper,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableFooter,\r\n    TableRow,\r\n    TableCell,\r\n    Typography,\r\n    Button,\r\n    InputBase,\r\n    TablePagination,\r\n    InputAdornment,\r\n    IconButton,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\nimport {\r\n    HashLoader,\r\n    BeatLoader\r\n} from 'react-spinners';\r\nimport {css} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\n\r\nimport * as utils from '../../../utils/utils';\r\nimport * as colors from '../../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as groupAdminsTableActions from '../../../redux-store/actions/groupAdminsTableActions';\r\n\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_NONE = 0;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL = 1;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_CHECKING = 2;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED = 3;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n        currentUser: state.auth.user,\r\n        tableGroup: state.manageGroupAdminsTable.tableGroup,\r\n        groupAdmins: state.manageGroupAdminsTable.groupAdmins,\r\n        groupAdminsLoaded: state.manageGroupAdminsTable.groupAdminsLoaded,\r\n        loadingGroupAdmins: state.manageGroupAdminsTable.loadingGroupAdmins,\r\n        page: state.manageGroupAdminsTable.page,\r\n        rowsPerPage: state.manageGroupAdminsTable.rowsPerPage,\r\n        searchText: state.manageGroupAdminsTable.searchText,\r\n        inSearchMode: state.manageGroupAdminsTable.inSearchMode,\r\n\r\n        addNewGroupAdminDialogOpen: state.manageGroupAdminsTable.addNewGroupAdminDialogOpen,\r\n        newGroupAdminEmail: state.manageGroupAdminsTable.newGroupAdminEmail,\r\n        addNewGroupAdminStatus: state.manageGroupAdminsTable.addNewGroupAdminStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadGroupAdmins: () => dispatch(groupAdminsTableActions.loadGroupAdmins()),\r\n        changePage: (event, newPage) => dispatch(groupAdminsTableActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(groupAdminsTableActions.changeRowsPerPage(event)),\r\n        handleInputChanged: (event) => dispatch(groupAdminsTableActions.handleInputChanged(event)),\r\n        toggleSearchMode: () => dispatch(groupAdminsTableActions.toggleSearchMode()),\r\n        startListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.startListeningForGroupAdminsChanged()),\r\n        stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\r\n        handleAddNewGroupAdmin: () => dispatch(groupAdminsTableActions.handleAddNewGroupAdmin()),\r\n\r\n        toggleAddNewGroupAdminDialog: () => dispatch(groupAdminsTableActions.toggleAddNewGroupAdminDialog())\r\n    }\r\n};\r\n\r\nclass GroupAdminsTable extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.addListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        const {\r\n            shouldLoadOtherData,\r\n            tableGroup,\r\n            stopListeningForGroupAdminsChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if tableGroup is set to null\r\n        if (!tableGroup || !shouldLoadOtherData) {\r\n            stopListeningForGroupAdminsChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.addListeners();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n            tableGroup,\r\n            loadingGroupAdmins,\r\n            groupAdminsLoaded,\r\n            loadGroupAdmins\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (tableGroup && !loadingGroupAdmins && !groupAdminsLoaded) {\r\n                loadGroupAdmins();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListeners = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupAdmins,\r\n            groupAdminsLoaded,\r\n            startListeningForGroupAdminsChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (groupAdmins && groupAdminsLoaded) {\r\n                startListeningForGroupAdminsChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            tableGroup,\r\n            page,\r\n            rowsPerPage,\r\n            searchText,\r\n            inSearchMode,\r\n            addNewGroupAdminDialogOpen,\r\n            newGroupAdminEmail,\r\n            addNewGroupAdminStatus,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            loadGroupAdmins,\r\n            handleInputChanged,\r\n            toggleSearchMode,\r\n            handleAddNewGroupAdmin,\r\n\r\n            toggleAddNewGroupAdminDialog\r\n        } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Paper elevation={1} style={{overflowX: \"auto\"}}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                    component={\r\n                                        <InputBase name=\"searchText\" value={searchText} onChange={handleInputChanged} fullWidth placeholder=\"Search by email\" type=\"text\"\r\n                                            startAdornment={\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" fli\r\n                                                        overlay={\r\n                                                            <Tooltip id={`tooltip-bottom`}>\r\n                                                                {\r\n                                                                    inSearchMode\r\n                                                                        ?\r\n                                                                        \"Exit search mode\"\r\n                                                                        :\r\n                                                                        \"Enter search mode\"\r\n                                                                }\r\n                                                            </Tooltip>\r\n                                                        }>\r\n                                                        <IconButton onClick={toggleSearchMode}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    <CloseIcon/>\r\n                                                                    :\r\n                                                                    <SearchIcon/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </OverlayTrigger>\r\n                                                </InputAdornment>\r\n                                            }\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50} component={\r\n                                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                            {\r\n                                                currentUser.superGroupAdmin\r\n                                                && tableGroup !== null\r\n                                                && currentUser.anid === tableGroup.anid\r\n                                                    ?\r\n                                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddNewGroupAdminDialog} style={{ marginRight: 8}}>Add new group admin</Button>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                overlay={\r\n                                                    <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>}>\r\n                                                <IconButton onClick={loadGroupAdmins} style={{marginLeft: 10}}>\r\n                                                    <RefreshIcon/>\r\n                                                </IconButton>\r\n                                            </OverlayTrigger>\r\n                                        </FlexView>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                            <TableRow>\r\n                                <StyledTableCell colSpan={2}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>}/>\r\n                                <StyledTableCell colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\"  className={css(sharedStyles.white_text)}>Type</Typography>}/>\r\n                                <StyledTableCell colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Date added</Typography>}/>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderTableRows()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{backgroundColor: colors.blue_gray_50}}\r\n                                    rowsPerPageOptions={[10, 30, 50]}\r\n                                    count={this.getRenderedGroupAdmins().length}\r\n                                    rowsPerPage={rowsPerPage}\r\n                                    page={page}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={changePage}\r\n                                    onChangeRowsPerPage={changeRowsPerPage}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n\r\n                <AddGroupAdminDialog\r\n                    groupProperties={groupProperties}\r\n                    addNewGroupAdminDialogOpen={addNewGroupAdminDialogOpen}\r\n                    newGroupAdminEmail={newGroupAdminEmail}\r\n                    addNewGroupAdminStatus={addNewGroupAdminStatus}\r\n                    toggleAddNewGroupAdminDialog={toggleAddNewGroupAdminDialog}\r\n                    handleInputChanged={handleInputChanged}\r\n                    handleAddNewGroupAdmin={handleAddNewGroupAdmin}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render table rows\r\n     *\r\n     * @returns {*[]|*}\r\n     */\r\n    renderTableRows = () => {\r\n        const {\r\n            groupProperties,\r\n            groupAdminsLoaded,\r\n            page,\r\n            rowsPerPage,\r\n            inSearchMode\r\n        } = this.props;\r\n\r\n        if (this.getRenderedGroupAdmins().length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{margin: 20}}>\r\n                            {\r\n                                groupAdminsLoaded\r\n                                    ?\r\n                                    <Typography variant=\"body1\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"No group admins found.\"\r\n                                                :\r\n                                                \"No group admins.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            this.getRenderedGroupAdmins()\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(groupAdmin => (\r\n                    <TableRow key={groupAdmin.id} hover>\r\n                        <TableCell colSpan={2}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {groupAdmin.email}\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {\r\n                                    groupAdmin.superGroupAdmin\r\n                                        ?\r\n                                        \"Super group admin\"\r\n                                        :\r\n                                        \"Group admin\"\r\n                                }\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {utils.dateTimeInReadableFormat(groupAdmin.dateAdded)}\r\n                            </Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )\r\n            )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Get rendered group admins\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    getRenderedGroupAdmins = () => {\r\n        const {\r\n            searchText,\r\n            inSearchMode,\r\n            groupAdmins\r\n        } = this.props;\r\n\r\n        let searchedGroupAdmins = [...groupAdmins];\r\n\r\n        if (inSearchMode) {\r\n            searchedGroupAdmins = searchedGroupAdmins\r\n                .filter(groupAdmin => groupAdmin.email.includes(searchText.toLowerCase()));\r\n        }\r\n\r\n        return searchedGroupAdmins.sort((groupAdmin1, groupAdmin2) => {\r\n            return groupAdmin2.time - groupAdmin1.time;\r\n        });\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminsTable);\r\n\r\nclass AddGroupAdminDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            addNewGroupAdminDialogOpen,\r\n            newGroupAdminEmail,\r\n            toggleAddNewGroupAdminDialog,\r\n            handleInputChanged,\r\n            handleAddNewGroupAdmin\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog open={addNewGroupAdminDialogOpen} ref={forwardedRef} fullWidth maxWidth=\"md\" onClose={toggleAddNewGroupAdminDialog}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">Add new group admin\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleAddNewGroupAdminDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        label=\"Email\"\r\n                        name=\"newGroupAdminEmail\"\r\n                        placeholder=\"Write email here\"\r\n                        value={newGroupAdminEmail}\r\n                        onChange={handleInputChanged}\r\n                        fullWidth\r\n                        required\r\n                        style={{ marginTop: 10}}/>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={20} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderStatusMessage()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={handleAddNewGroupAdmin} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 20}}>Add<AddIcon fontSize=\"small\" style={{ marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render status message\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderStatusMessage = () => {\r\n        const {\r\n            addNewGroupAdminStatus,\r\n            groupProperties\r\n        } = this.props;\r\n\r\n        let msg = {\r\n            text: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (addNewGroupAdminStatus) {\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_NONE:\r\n                return null;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL:\r\n                msg.tex = \"Please fill in the email.\";\r\n                msg.color = \"error\";\r\n                break;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_CHECKING:\r\n                return (\r\n                    <BeatLoader size={10}\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                );\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED:\r\n                msg.text = \"This email has been used by another account.\";\r\n                msg.color = \"error\";\r\n                break;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS:\r\n                return null;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography color={msg.color} variant=\"body1\" align=\"left\">\r\n                {msg.text}\r\n            </Typography>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport Sidebar from 'react-sidebar';\r\nimport FlexView from 'react-flexview';\r\nimport {Col, Container, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {Accordion, AccordionDetails, AccordionSummary, Badge, Divider, IconButton, Typography} from '@material-ui/core';\r\nimport Menu from '@material-ui/icons/Menu';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport queryString from 'query-string';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    EXPLORE_OFFERS_TAB,\r\n    RESOURCES_TAB,\r\n    GROUP_ACTIVITIES_TAB,\r\n    HOME_TAB,\r\n    MY_ACTIVITIES_TAB,\r\n    SETTINGS_TAB\r\n} from '../../shared-components/nav-bars/SidebarContent';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport InvitationDialog from './components/InvitationDialog';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport SuperAdminSettings from './components/SuperAdminSettings';\r\nimport GroupAdminSettings from './components/GroupAdminSettings';\r\nimport InvitedUsers from './components/InvitedUsers';\r\nimport AngelNetWorks from './components/AngelNetworks';\r\nimport AddAngelNetWorkDialog from './components/AddAngelNetWorkDialog';\r\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\r\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\r\nimport JoinRequests from './components/JoinRequests';\r\nimport ActivitiesTable from '../../shared-components/activities-components/ActivitiesTable';\r\nimport GroupAdminsTable from './components/GroupAdminsTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as groupAdminsTableActions from '../../redux-store/actions/groupAdminsTableActions';\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\r\nimport {successfullyFetchedOffers} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {isProjectWaitingToGoLive} from \"../../models/project\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nexport const MAX_CARD_DETAILS_HEIGHT = 2000;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n        OffersTableLocalState: state.OffersTableLocalState,\r\n\r\n        // --- old states ----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n\r\n        joinRequests: state.manageJoinRequests.joinRequests,\r\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\r\n\r\n        groupAdminsTable_setGroup: (group) => dispatch(groupAdminsTableActions.setGroup(group)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event))\r\n    }\r\n};\r\n\r\nclass AdminDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            currentUser,\r\n            groupProperties,\r\n\r\n            // projectsTable_setUser,\r\n            activitiesTable_setUser,\r\n            groupAdminsTable_setGroup\r\n        } = this.props;\r\n\r\n        if (!currentUser\r\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(currentUser);\r\n\r\n        // set user so that information can be used in the activities table component\r\n        activitiesTable_setUser(\r\n            currentUser.superAdmin\r\n                ?\r\n                currentUser\r\n                :\r\n                groupProperties\r\n        );\r\n\r\n        // set group so that information can be used in the group admins table component\r\n        groupAdminsTable_setGroup(groupProperties);\r\n    };\r\n\r\n    /**\r\n     * Component will mount\r\n     */\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.ADMIN : ROUTES.ADMIN_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n            OffersTableLocalState,\r\n\r\n            currentUser,\r\n\r\n            joinRequests,\r\n            joinRequestsLoaded\r\n        } = this.props;\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let projectsAwaitingDecision = 0;\r\n        // only do this if the table user is also set to the current admin\r\n        if (OffersTableLocalState.tableUser && OffersTableLocalState.tableUser.id === AuthenticationState.currentUser.id) {\r\n            if (successfullyFetchedOffers(OffersTableLocalState)) {\r\n                OffersTableLocalState.offerInstances.forEach(offerInstance => {\r\n                    if (isProjectWaitingToGoLive(offerInstance.projectDetail)) {\r\n                        projectsAwaitingDecision += 1;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return (\r\n                <Row noGutters style={{marginBottom: 30}}>\r\n                    {/* Manage groups */}\r\n                    {\r\n                        !currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage groups</Typography>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage groups that have joined the system.</Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <AngelNetWorks/>\r\n                                        </FlexView>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/* Manage group members (group admins) / system users (super admins) */}\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <Accordion className={css(styles.card_style)}>\r\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                <FlexView column>\r\n                                    <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage system users\"\r\n                                                :\r\n                                                \"Manage group members\"\r\n                                        }\r\n                                    </Typography>\r\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage all the system users (investors and issuers) including those who have been invited but not yet registered.\"\r\n                                                :\r\n                                                \"Manage all the group members (investors and issuers) including those who have been invited but not yet registered and those who joined this group from another group.\"\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                <InvitedUsers/>\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    </Col>\r\n\r\n                    {/* Manage access requests */}\r\n                    {\r\n                        currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <FlexView width=\"100%\">\r\n                                                <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage access requests</Typography>\r\n                                                <FlexView marginLeft={28} marginTop={8}>\r\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\r\n                                                        overlay={\r\n                                                            <Tooltip id={`tooltip-top`}>\r\n                                                                {joinRequests.length} access requests\r\n                                                                are awaiting your review.\r\n                                                            </Tooltip>\r\n                                                        }>\r\n                                                        <Badge badgeContent={!joinRequestsLoaded ? 0 : joinRequests.length} color=\"error\"\r\n                                                            invisible={\r\n                                                                !joinRequestsLoaded\r\n                                                                    ?\r\n                                                                    true\r\n                                                                    :\r\n                                                                    joinRequests.length === 0\r\n                                                            }/>\r\n                                                    </OverlayTrigger>\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                                Manage access requests from other groups' investors who would like\r\n                                                to\r\n                                                join this group.\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                        <JoinRequests/>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/* Manage offers */}\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <Accordion className={css(styles.card_style)}>\r\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                <FlexView column>\r\n                                    <FlexView width=\"100%\">\r\n                                        <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage offers</Typography>\r\n                                        <FlexView marginLeft={28} marginTop={8}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\r\n                                                overlay={\r\n                                                    <Tooltip\r\n                                                        id={`tooltip-top`}\r\n                                                    >\r\n                                                        {\r\n                                                            currentUser.superAdmin\r\n                                                                ?\r\n                                                                `${projectsAwaitingDecision} offers are awaiting group admins' review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\r\n                                                                :\r\n                                                                `${projectsAwaitingDecision} offers are awaiting your review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\r\n                                                        }\r\n                                                    </Tooltip>\r\n                                                }>\r\n                                                <Badge badgeContent={projectsAwaitingDecision} color=\"error\"\r\n                                                    invisible={projectsAwaitingDecision === 0}/>\r\n                                            </OverlayTrigger>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage all the offers created by all the issuers and group admins in the system.\"\r\n                                                :\r\n                                                \"Manage all the offers created by the issuers and group admins of this group.\"\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                <FlexView column width=\"100%\">\r\n                                    <Divider style={{marginBottom: 15}}/>\r\n                                    <OffersTable/>\r\n                                </FlexView>\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    </Col>\r\n\r\n                    {/* Manage group admins */}\r\n                    {\r\n                        currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage group admins</Typography>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage group admins. Only super group admin can add a new group\r\n                                                admin.</Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <GroupAdminsTable/>\r\n                                        </FlexView>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                </Row>\r\n            )\r\n        }\r\n\r\n        /**\r\n         * SETTINGS TAB\r\n         */\r\n        if (params.tab === SETTINGS_TAB) {\r\n            return (\r\n                currentUser.superAdmin\r\n                    ?\r\n                    <SuperAdminSettings/>\r\n                    :\r\n                    <GroupAdminSettings/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * GROUP ACTIVITIES TAB\r\n         */\r\n        if (params.tab === GROUP_ACTIVITIES_TAB || params.tab === MY_ACTIVITIES_TAB) {\r\n            return (\r\n                <div\r\n                    style={{\r\n                        margin: 30\r\n                    }}\r\n                >\r\n                    <ActivitiesTable/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE OFFERS TAB\r\n         */\r\n        if (params.tab === EXPLORE_OFFERS_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroups/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded,\r\n\r\n            notifications,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !currentUserLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !currentUser\r\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return <Sidebar\r\n            sidebar={\r\n                <SidebarContent\r\n                    dashboardProps={this.props}\r\n                />\r\n            }\r\n            shadow={false}\r\n            open={sidebarOpen}\r\n            docked={sidebarDocked}\r\n            onSetOpen={() => toggleSidebar(true)}\r\n            transitions\r\n            styles={{\r\n                sidebar: {backgroundColor: colors.blue_gray_50},\r\n                content: {backgroundColor: colors.gray_100}\r\n            }}\r\n        >\r\n            <Container\r\n                fluid\r\n                style={{ padding: 0}}>\r\n                {/** Header */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                         style={{backgroundColor:\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                            }}>\r\n                            <Row style={{width: \"100%\"}} noGutters>\r\n                                {/** Page title */}\r\n                                <Col xs={10} sm={10} md={11} lg={11}>\r\n                                    <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                        {\r\n                                            <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                <Menu/>\r\n                                            </IconButton>\r\n                                        }\r\n                                        {\r\n                                            this.renderPageTitle()\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n\r\n                                {/** Notification icon */}\r\n                                <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                    <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                        <IconButton onClick={toggleNotifications}>\r\n                                            <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                            </Badge>\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters style={{backgroundColor: colors.white}}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"body1\" align=\"center\" style={{paddingTop: 16,paddingBottom: 16}}>\r\n                            {\r\n                                currentUser.superAdmin\r\n                                    ?\r\n                                    \"System admin\"\r\n                                    :\r\n                                    currentUser.superGroupAdmin\r\n                                        ?\r\n                                        \"Super group admin\"\r\n                                        :\r\n                                        \"Group admin\"\r\n                            }\r\n                            : <b>{currentUser.email}</b>\r\n                        </Typography>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{backgroundColor: colors.kick_starter_gray_box_border}}/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n\r\n            {/** Notifications box */}\r\n            <NotificationsBox/>\r\n\r\n            {/** User invitation dialog */}\r\n            <InvitationDialog/>\r\n\r\n            {/** Add angel network dialog */}\r\n            <AddAngelNetWorkDialog/>\r\n        </Sidebar>;\r\n    }\r\n\r\n    /**\r\n     * Render page's title\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = '';\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case SETTINGS_TAB:\r\n                title = SETTINGS_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case GROUP_ACTIVITIES_TAB:\r\n                title = GROUP_ACTIVITIES_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            case EXPLORE_OFFERS_TAB:\r\n                title = EXPLORE_OFFERS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>\r\n                {title}\r\n            </Typography>\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    },\r\n\r\n    card_style: {\r\n        marginTop: 25,\r\n        marginLeft: 30,\r\n        marginRight: 30\r\n    },\r\n\r\n    card_details_expansion: {\r\n        maxHeight: MAX_CARD_DETAILS_HEIGHT,\r\n        overflowY: \"auto\"\r\n    }\r\n});","import React, { Component } from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class LegalDocuments extends Component {\r\n\r\n    onDeleteDocument = index => {\r\n        this.props.onDeleteDocument(index);\r\n    };\r\n\r\n    render() {\r\n\r\n        /**\r\n         * documents is an array with documents inside\r\n         * \r\n         * the document inside the array will have the following structure:\r\n         * \r\n         * {\r\n         *      file: File (obtained when uploading)\r\n         *      preview: preview obtained using FileReader\r\n         * }\r\n         */\r\n        const {\r\n            documents\r\n        } = this.props;\r\n\r\n        if (!documents || (documents && documents.length === 0)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                marginTop={20}\r\n            >\r\n                <List>\r\n                    {\r\n                        documents.map((document, index) => (\r\n                            <FlexView\r\n                                key={index}\r\n                                vAlignContent=\"center\"\r\n                            >\r\n                                <ListItem\r\n                                    button\r\n                                    style={{\r\n                                        padding: 7\r\n                                    }}\r\n                                >\r\n                                    <img\r\n                                        alt=\"Document\"\r\n                                        className={css(styles.preview_icon)}\r\n                                        src={require(\"../../img/document_icon.png\").default}\r\n                                    />\r\n                                    <FlexView\r\n                                        column\r\n                                        hAlignContent=\"left\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            className={css(styles.black_text)}\r\n                                            align=\"left\"\r\n                                        >\r\n                                            {document.file.name}\r\n                                        </Typography>\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            color=\"textSecondary\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            {document.file.sizeReadable}\r\n                                        </Typography>\r\n                                    </FlexView>\r\n                                </ListItem>\r\n\r\n                                <OverlayTrigger\r\n                                    trigger={['hover', 'focus']}\r\n                                    flip\r\n                                    placement=\"bottom\"\r\n                                    overlay={\r\n                                        <Tooltip\r\n                                            id={`tooltip-bottom`}\r\n                                        >\r\n                                            Remove\r\n                                        </Tooltip>\r\n                                    }>\r\n                                    <IconButton\r\n                                        style={{\r\n                                            width: 44,\r\n                                            height: 44\r\n                                        }}\r\n                                        onClick={() => this.onDeleteDocument(index)}\r\n                                    >\r\n                                        <CloseIcon\r\n                                            fontSize=\"small\"\r\n                                        />\r\n                                    </IconButton>\r\n                                </OverlayTrigger>\r\n                            </FlexView>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    preview_icon: {\r\n        width: 48, \r\n        height: 48\r\n    },\r\n\r\n    file_name: {\r\n        fontSize: 14,\r\n        marginBottom: 2\r\n    },\r\n\r\n    file_size: {\r\n        fontSize: 13,\r\n        color: colors.blue_gray_700\r\n    }\r\n});","import React, { Component } from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport default class DocumentsDownload extends Component {\r\n\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    onDeleteDocument = index => {\r\n        this.props.onDeleteDocument(index);\r\n    };\r\n\r\n    render() {\r\n\r\n        /**\r\n         * documents is an array with documents inside\r\n         * \r\n         * the document inside the array will have the following structure:\r\n         * \r\n         * {\r\n         *      downloadURL: download URL from firebase storage\r\n         *      fileName: ...\r\n         *      readableSize: ...\r\n         * }\r\n         */\r\n        const {\r\n            documents,\r\n            deleteEnable\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                marginTop={20}\r\n            >\r\n                <List>\r\n                    {\r\n                        documents.map((document, index) => (\r\n                            document.hasOwnProperty('removed')\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    key={index}\r\n                                    vAlignContent=\"center\"\r\n                                >\r\n                                    {\r\n                                        <a\r\n                                            href={document.downloadURL}\r\n                                            rel=\"noopener noreferrer\"\r\n                                            target=\"_blank\"\r\n                                            className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            style={{\r\n                                                width: \"100%\"\r\n                                            }}\r\n                                        >\r\n                                            <ListItem\r\n                                                button\r\n                                                style={{\r\n                                                    padding: 7\r\n                                                }}\r\n                                            >\r\n                                                <img\r\n                                                    alt=\"Document\"\r\n                                                    className={css(styles.preview_icon)}\r\n                                                    src={require(\"../../img/document_icon.png\").default}\r\n                                                />\r\n                                                <FlexView\r\n                                                    column\r\n                                                    hAlignContent=\"left\"\r\n                                                >\r\n                                                    <Typography\r\n                                                        variant=\"body2\"\r\n                                                        className={css(styles.black_text)}\r\n                                                        align=\"left\"\r\n                                                    >\r\n                                                        {document.fileName}\r\n                                                    </Typography>\r\n                                                    <Typography\r\n                                                        variant=\"body2\"\r\n                                                        color=\"textSecondary\"\r\n                                                        align=\"left\"\r\n                                                    >\r\n                                                        {document.readableSize}\r\n                                                    </Typography>\r\n                                                </FlexView>\r\n                                            </ListItem>\r\n                                        </a>\r\n                                    }\r\n                                    {\r\n                                        deleteEnable\r\n                                            ?\r\n                                            <OverlayTrigger\r\n                                                trigger={['hover', 'focus']}\r\n                                                flip\r\n                                                placement=\"top\"\r\n                                                overlay={\r\n                                                    <Tooltip\r\n                                                        id={`tooltip-top`}\r\n                                                    >\r\n                                                        Delete this document\r\n                                                    </Tooltip>\r\n                                                }>\r\n                                                <IconButton\r\n                                                    style={{\r\n                                                        width: 44,\r\n                                                        height: 44\r\n                                                    }}\r\n                                                    onClick={() => this.onDeleteDocument(index)}\r\n                                                >\r\n                                                    <CloseIcon\r\n                                                        fontSize=\"small\"\r\n                                                    />\r\n                                                </IconButton>\r\n                                            </OverlayTrigger>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    preview_icon: {\r\n        width: 48, \r\n        height: 48\r\n    },\r\n\r\n    file_name: {\r\n        fontSize: 14,\r\n        marginBottom: 2\r\n    },\r\n\r\n    file_size: {\r\n        fontSize: 13,\r\n        color: colors.blue_gray_700\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","export const SELECT_PROJECT_VISIBILITY_SET_PROJECT = 'SELECT_PROJECT_VISIBILITY_SET_PROJECT';\r\nexport const setProject = project => {\r\n    return {\r\n        type: SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n        project\r\n    }\r\n};\r\n\r\nexport const HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED = 'HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED';\r\nexport const handleProjectVisibilityChanged = (event) => {\r\n    return {\r\n        type: HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED,\r\n        event\r\n    }\r\n};","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from \"@material-ui/core\";\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\nimport {isValidatingGroupUrl, successfullyValidatedGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPitchVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl\r\n                fullWidth\r\n            >\r\n                <FormHelperText\r\n                    className={css(sharedStyles.black_text)}\r\n                    style={{\r\n                        marginBottom: 6\r\n                    }}\r\n                >\r\n                    Select pitch visibility\r\n                </FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                    ?\r\n                                    ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput\r\n                            labelWidth={0}\r\n                            name=\"projectVisibilitySetting\"\r\n                        />\r\n                    }\r\n                >\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PUBLIC}\r\n                    >\r\n                        {`Public (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full pitch will be visible to all Invest West users)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED}\r\n                    >\r\n                        {`Restricted (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this pitch will be visible to all Invest West users. Only members of your group will see the full pitch)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PRIVATE}\r\n                    >\r\n                        {`Private (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Only members of this group will see this pitch)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPitchVisibility);\r\n\r\n","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    Fab,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    Step,\r\n    StepLabel,\r\n    Stepper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Files from \"react-files\";\r\nimport {NavLink, Redirect} from \"react-router-dom\";\r\nimport {Col, Container, Image, Overlay, OverlayTrigger, Popover, ProgressBar, Row, Tooltip} from \"react-bootstrap\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {BeatLoader, HashLoader} from \"react-spinners\";\r\n\r\nimport queryString from \"query-string\";\r\n// React Quill - text editor\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nimport UploadDocuments from \"../../shared-components/upload-documents/DocumentsUpload\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport DocumentsDownload from \"../../shared-components/download-documents/DocumentsDownload\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport \"./CreateProject.scss\";\r\nimport {getGroupRouteTheme, isValidatingGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {isAuthenticating, successfullyAuthenticated} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {isLoadingSystemAttributes} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isIssuer} from \"../../models/user\";\r\nimport {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {isDraftProjectNotSubmitted} from \"../../models/project\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\nconst PITCH_COVER_FILES_CHANGED = 1;\r\nconst PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED = 2;\r\nconst PITCH_PRESENTATION_FILES_CHANGED = 3;\r\n\r\nexport const PITCH_COVER_FILE_TYPE_SELECTED = 1; // users select to upload an image or a video for their pitch cover\r\nexport const PITCH_COVER_VIDEO_URL_TYPE_SELECTED = 2; // users select to upload a video URL for their pitch cover\r\n\r\n// pitch create non-check\r\nexport const PITCH_PUBLISH_CHECK_NONE = 0;\r\n// pitch cannot be created due to missing fields\r\nexport const PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION = 1;\r\n// pitch cannot be created due to 0 or negative value of fund or equity\r\nexport const PITCH_PUBLISH_FALSE_INVALID_DATE = 2;\r\nexport const PITCH_PUBLISH_FALSE_INVALID_FUND = 3;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER = 4;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION = 5;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PITCH_COVER_MODE = 1;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 2;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 3;\r\nexport const UPLOAD_REALTIME_DB = 4;\r\nexport const UPLOAD_DONE_MODE = 5;\r\n\r\nexport const STEP_PITCH_GENERAL_INFORMATION = 0;\r\nexport const STEP_PITCH_COVER = 1;\r\nexport const STEP_PITCH_DECK = 2;\r\nexport const STEP_PITCH_SUPPORTING_DOCUMENTS = 3;\r\nexport const STEP_ACCEPT_TERMS_AND_CONDITIONS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createProject: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        groupIssuerCreateOfferFor: \"undefined\",\r\n\r\n        // pitch sector\r\n        pitchSector: '-',\r\n        // pitch project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiryDate: null,\r\n\r\n        pitchAmountRaisedToDate: '',\r\n        pitchRaiseRequired: '',\r\n        howFundIsBeingRaised: '',\r\n        financialRound: '',\r\n        pitchPostMoneyValuation: '',\r\n        detailsAboutEarlierFundraisingRounds: '',\r\n        pitchInvestorsCommitted: '',\r\n\r\n        hasRaisedMoneyBefore: '',\r\n\r\n        // pitch cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // pitch cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // pitch supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // pitch presentation file (user uploads a file for pitch presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // pitch presentation text (user uses the provided text editor to make pitch presentation)\r\n        pitchPresentationText: {ops: []},\r\n        // plain text obtained from quill editor\r\n        pitchPresentationPlainText: null,\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        // T&Cs and marketing preferences ------------------------------------------------------------------------------\r\n        acceptedTermsAndConditions: false,\r\n        agreedToShareRaisePublicly: false,\r\n        agreedToReceiveLocalInvestmentInfo: false,\r\n        // -------------------------------------------------------------------------------------------------------------\r\n\r\n        projectID: null, // set when project has been successfully published to pass to UploadDialog\r\n\r\n        // customized fields (for specific groups only) ------------------------------------------------------------------\r\n        // this field is only available for QIB\r\n        qibSpecialNews: ''\r\n        // -------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass CreatePitchPageMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n        this.firebaseStorage = firebase.storage();\r\n\r\n        // listen for changes made in save project mode\r\n        this.projectEditedSaveModeRefListener = null;\r\n\r\n        // these variables contain the data that is formatted to be uploaded on Realtime DB\r\n        this.pitchCoverRealtimeDB = [];\r\n        this.pitchSupportingDocumentsRealtimeDB = [];\r\n        this.pitchPresentationDocumentRealtimeDB = [];\r\n\r\n        this.state = {\r\n            ...initState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            requestToLoadData\r\n        } = this.state;\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            recoveredFromPreviousState,\r\n            requestToLoadData,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const previousState = this.props.location.state;\r\n        // when the user clicks Save for the first time\r\n        // or when they click on the Next button in the STEP_PITCH_GENERAL_INFORMATION step\r\n        // the page will reload to take them to the edit page with the project ID.\r\n        // If the user clicks on the Next button in the STEP_PITCH_GENERAL_INFORMATION step, once the page is\r\n        // reloaded, they should be taken to the next step rather than stay in the same step.\r\n        if (previousState !== undefined && previousState !== null) {\r\n            if (!recoveredFromPreviousState) {\r\n                this.setState({\r\n                    recoveredFromPreviousState: true,\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep:\r\n                            previousState.activeStep !== -1\r\n                                ?\r\n                                previousState.activeStep\r\n                                :\r\n                                this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: !previousState.groupIssuerCreateOfferFor\r\n                            ? ManageGroupUrlState.group\r\n                                ? ManageGroupUrlState.group.anid\r\n                                : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                                    ? \"undefined\"\r\n                                    : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid\r\n                            : previousState.groupIssuerCreateOfferFor,\r\n                        requestToLoadData: !previousState.requestToLoadData ? true : previousState.requestToLoadData\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.uploadProject();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.projectEditedSaveModeRefListener) {\r\n            this.projectEditedSaveModeRefListener.off('child_changed');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to the same page with active step saved\r\n     * This will save the activeStep of the page, so when the user refreshes the page,\r\n     * they can still continue with their previous step.\r\n     *\r\n     * @param activeStep\r\n     * @param projectID\r\n     */\r\n    navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = this.state;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState) || isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (AuthenticationState.currentUser && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            requestToLoadData: false\r\n        });\r\n\r\n        // get project id from the URL\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        selectProjectVisibility_setProject(project);\r\n                    }\r\n\r\n                    // project is in draft mode\r\n                    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        if (!this.projectEditedSaveModeRefListener) {\r\n                            this.projectEditedSaveModeRefListener = this.firebaseDB\r\n                                .ref(DB_CONST.PROJECTS_CHILD)\r\n                                .orderByKey()\r\n                                .equalTo(project.id);\r\n\r\n                            this.projectEditedSaveModeRefListener\r\n                                .on('child_changed', snapshot => {\r\n\r\n                                    let project = snapshot.val();\r\n\r\n                                    this.setState({\r\n                                        projectEdited: Object.assign({}, project)\r\n                                    });\r\n                                });\r\n                        }\r\n                    }\r\n\r\n                    this.setState({\r\n                        projectBeforeEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            groupIssuerCreateOfferFor:\r\n                                !isDraftProjectNotSubmitted(project)\r\n                                    ? \"undefined\"\r\n                                    : project.hasOwnProperty('anid')\r\n                                    ? project.anid\r\n                                    : \"undefined\",\r\n                            // pitch sector\r\n                            pitchSector:\r\n                                project.hasOwnProperty('sector')\r\n                                    ?\r\n                                    project.sector\r\n                                    :\r\n                                    '-'\r\n                            ,\r\n                            // pitch project name\r\n                            pitchProjectName:\r\n                                project.hasOwnProperty('projectName')\r\n                                    ?\r\n                                    project.projectName\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchProjectDescription:\r\n                                project.hasOwnProperty('description')\r\n                                    ?\r\n                                    project.description\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchExpiryDate:\r\n                                project.Pitch.hasOwnProperty('expiredDate')\r\n                                    ?\r\n                                    project.Pitch.expiredDate\r\n                                    :\r\n                                    null\r\n                            ,\r\n                            pitchAmountRaisedToDate:\r\n                                project.Pitch.hasOwnProperty('amountRaised')\r\n                                    ?\r\n                                    Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchRaiseRequired:\r\n                                project.Pitch.hasOwnProperty('fundRequired')\r\n                                    ?\r\n                                    Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            howFundIsBeingRaised:\r\n                                project.Pitch.hasOwnProperty('howFundIsBeingRaised')\r\n                                    ?\r\n                                    project.Pitch.howFundIsBeingRaised\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            financialRound:\r\n                                project.Pitch.hasOwnProperty('financialRound')\r\n                                    ?\r\n                                    project.Pitch.financialRound\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchPostMoneyValuation:\r\n                                project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                    ?\r\n                                    Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            detailsAboutEarlierFundraisingRounds:\r\n                                project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                    ?\r\n                                    project.Pitch.detailsAboutEarlierFundraisingRounds\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchInvestorsCommitted:\r\n                                project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                    ?\r\n                                    project.Pitch.investorsCommitted\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            hasRaisedMoneyBefore:\r\n                                project.Pitch.hasOwnProperty('amountRaised')\r\n                                    ?\r\n                                    (\r\n                                        project.Pitch.amountRaised > 0\r\n                                            ?\r\n                                            \"true\"\r\n                                            :\r\n                                            \"false\"\r\n                                    )\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchPresentationText:\r\n                                !project.Pitch.presentationText\r\n                                    ?\r\n                                    {ops: []}\r\n                                    :\r\n                                    project.Pitch.presentationText\r\n                            ,\r\n                            // this field is only available for QIB\r\n                            qibSpecialNews:\r\n                                project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                    ?\r\n                                    project.Pitch.qibSpecialNews\r\n                                    :\r\n                                    ''\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            this.setState({\r\n                projectEditedLoaded: true,\r\n                projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    groupIssuerCreateOfferFor: ManageGroupUrlState.group\r\n                        ? ManageGroupUrlState.group.anid\r\n                        : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                            ? \"undefined\"\r\n                            : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid,\r\n                    pitchExpiryDate:\r\n                        ManageGroupUrlState.group.groupUserName === \"qib\"\r\n                            ?\r\n                            // if the group is QIB,\r\n                            // set the pitch expiry date to the one specified by the QIB' admins\r\n                            // Note: must ensure the defaultPitchExpiryDate field is valid\r\n                            ManageGroupUrlState.group.settings.defaultPitchExpiryDate\r\n                            :\r\n                            this.state.createProject.pitchExpiryDate\r\n                }\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                selectProjectVisibility_setProject(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Next Step button is clicked\r\n     */\r\n    handleNextStepClick = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            hasRaisedMoneyBefore,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiryDate === null\r\n                    || pitchRaiseRequired.trim().length === 0\r\n                    || howFundIsBeingRaised.trim().length === 0\r\n                    || financialRound.trim().length === 0\r\n                    || hasRaisedMoneyBefore.trim().length === 0\r\n                    || (hasRaisedMoneyBefore === \"true\" && pitchAmountRaisedToDate.trim().length === 0)\r\n                    || (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n                    || (isIssuer(AuthenticationState.currentUser) && !(params.edit && projectEdited) && groupIssuerCreateOfferFor === \"undefined\")\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiryDate)\r\n                    ||\r\n                    (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                // if the user enters invalid value for the money, warn them\r\n                if ((hasRaisedMoneyBefore === \"true\" && !utils.getNumberFromInputString(pitchAmountRaisedToDate))\r\n                    || !utils.getNumberFromInputString(pitchRaiseRequired)\r\n                    || (pitchPostMoneyValuation.trim().length > 0 && !utils.getNumberFromInputString(pitchPostMoneyValuation))\r\n                ) {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // for QIB, pitch deck is considered as one-pager\r\n                // there will be no presentation text, so don't need to check\r\n                if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                        ) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                    // for other groups, we need to ensure the user is uploading a pitch deck file or filling\r\n                // in the text editor or both\r\n                else {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && pitchPresentationText.ops.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                            && !projectEdited.Pitch.presentationText) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Back button is clicked (got to previous step)\r\n     */\r\n    handleBackClick = () => {\r\n        const projectEdited = this.state.projectEdited;\r\n        const activeStep = this.state.createProject.activeStep;\r\n\r\n        if (activeStep === 0) {\r\n            return;\r\n        }\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                activeStep: activeStep - 1\r\n            }\r\n        });\r\n        this.navigateToTheSamePageWithActiveStepSaved(activeStep - 1, projectEdited.id);\r\n    };\r\n\r\n    /**\r\n     * Handle between selecting to upload an image or a video or adding a video URL for the pitch cover.\r\n     *\r\n     * @param type\r\n     */\r\n    handleSelectPitchCoverTypeClick = type => {\r\n\r\n        const {\r\n            pitchCoverTypeSelected,\r\n            pitchCover,\r\n            pitchCoverVideoURL\r\n        } = this.state.createProject;\r\n\r\n        if (pitchCoverTypeSelected === type) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: null,\r\n                    pitchCover: type === PITCH_COVER_FILE_TYPE_SELECTED ? [] : pitchCover,\r\n                    pitchCoverVideoURL: type === PITCH_COVER_VIDEO_URL_TYPE_SELECTED ? '' : pitchCoverVideoURL\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: type\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded changed.\r\n     */\r\n    handleFilesChanged = (mode, files) => {\r\n\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                // there can only be 1 file uploaded for the pitch cover\r\n                case PITCH_COVER_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchCover: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                // there can be more than 1 pitch supporting files\r\n                case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                    // for QIB, supporting document will be considered as pitch deck\r\n                    // so, the user can only upload one file\r\n                    if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    // for other groups, the user can upload multiple files for supporting documents\r\n                    else {\r\n                        if (projectEdited) {\r\n                            if (!projectEdited.Pitch.supportingDocuments) {\r\n                                if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            } else {\r\n                                if (pitchSupportingDocuments.length >=\r\n                                    DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                setFeedbackSnackbarContent(\r\n                                    'Max file count reached.',\r\n                                    \"error\",\r\n                                    \"bottom\"\r\n                                );\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [...prevState.createProject.pitchSupportingDocuments, fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    break;\r\n                // there can only be 1 file for pitch presentation\r\n                case PITCH_PRESENTATION_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPresentationDocument: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded have error (exceed size, type not matched, etc.).\r\n     */\r\n    handleFileError = (error, file) => {\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        setFeedbackSnackbarContent(\r\n            errorMessage,\r\n            \"error\",\r\n            \"bottom\"\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function gets called when the texts in the Create Pitch Dialog changed.\r\n     */\r\n    handleCreatePitchInputChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        if (name === \"groupIssuerCreateOfferFor\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n\r\n            const {\r\n                AuthenticationState\r\n            } = this.props;\r\n\r\n            const params = queryString.parse(this.props.location.search);\r\n\r\n            let index = AuthenticationState.groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === value);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n\r\n            // edit mode\r\n            if (params.edit) {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    search: `?edit=${params.edit}`,\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n            // create mode\r\n            else {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            // maximum characters for description is 300\r\n            if (name === \"pitchProjectDescription\" && value.trim().length >= 300) {\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle changes when the Quill editor is changed.\r\n     */\r\n    handlePitchEditorChanged = (content, delta, source, editor) => {\r\n\r\n        // check if the editor is empty (or does not have any text)\r\n        // we must ensure that a pitch body contains text\r\n        if (editor.getText().trim().length === 0) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: {ops: []}\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: editor.getContents(),\r\n                    pitchPresentationPlainText: editor.getText()\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called to create a new pitch.\r\n     */\r\n    uploadProject = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n\r\n            projectVisibilitySetting\r\n        } = this.props;\r\n\r\n        const {\r\n            projectBeforeEdited,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n            detailsAboutEarlierFundraisingRounds,\r\n            pitchInvestorsCommitted,\r\n            hasRaisedMoneyBefore,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n            pitchPresentationPlainText,\r\n\r\n            agreedToShareRaisePublicly,\r\n            agreedToReceiveLocalInvestmentInfo,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.setState({\r\n                progressBeingSaved: true\r\n            });\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit && projectEdited) {\r\n            // new cover has been chosen\r\n            if (pitchCover.length > 0 || pitchCoverVideoURL.trim().length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('cover')) {\r\n                    // mark the existing cover with the 'removed' tag\r\n                    projectEdited.Pitch.cover.forEach((coverItem, index) => {\r\n                        coverItem.removed = true;\r\n                        projectEdited.Pitch.cover[index] = coverItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // new pitch presentation document has been chosen\r\n            if (pitchPresentationDocument.length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('presentationDocument')) {\r\n                    // mark the existing presentation document with the 'removed' tag\r\n                    projectEdited.Pitch.presentationDocument.forEach((presentationItem, index) => {\r\n                        presentationItem.removed = true;\r\n                        // noinspection TypeScriptValidateTypes\r\n                        projectEdited.Pitch.presentationDocument[index] = presentationItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // pitch reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n            // pitch storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(projectEdited.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectEdited.id);\r\n\r\n            // upload pitch cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload pitch supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload pitch presentation or pitch deck\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    let updatedProject = {\r\n                                        ...JSON.parse(JSON.stringify(projectEdited)),\r\n                                        issuer: null,\r\n                                        group: null,\r\n                                        anid:\r\n                                            isDraftProjectNotSubmitted(projectEdited)\r\n                                                ? groupIssuerCreateOfferFor !== \"undefined\"\r\n                                                ? groupIssuerCreateOfferFor\r\n                                                : projectEdited.anid\r\n                                                : projectEdited.anid,\r\n                                        projectName:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectName.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectName\r\n                                                :\r\n                                                pitchProjectName\r\n                                        ,\r\n                                        sector:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchSector === \"-\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchSector\r\n                                                :\r\n                                                pitchSector\r\n                                        ,\r\n                                        description:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectDescription.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectDescription\r\n                                                :\r\n                                                pitchProjectDescription\r\n                                        ,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                projectEdited.visibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                // in save progress mode --> set status to DRAFT\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // not in save progress mode --> publish mode\r\n                                                // check if the edited project is a draft one --> if so, change its status to being checked\r\n                                                // otherwise, keep the previous project status\r\n                                                projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                                    :\r\n                                                    projectEdited.status\r\n                                        ,\r\n                                        edited:\r\n                                            saveProgress\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                utils.getCurrentDate()\r\n                                        ,\r\n                                        PrimaryOffer:\r\n                                            projectEdited.PrimaryOffer\r\n                                                ?\r\n                                                projectEdited.PrimaryOffer\r\n                                                :\r\n                                                null\r\n                                        ,\r\n                                        Pitch: {\r\n                                            totalRaise:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                                :\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            amountRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                                :\r\n                                                                0\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                        :\r\n                                                        0\r\n                                            ,\r\n                                            fundRequired:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    pitchRaiseRequired.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            howFundIsBeingRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    howFundIsBeingRaised.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        howFundIsBeingRaised\r\n                                                    :\r\n                                                    howFundIsBeingRaised\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            postMoneyValuation:\r\n                                                pitchPostMoneyValuation.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments:\r\n                                                projectEdited.Pitch.supportingDocuments\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.supportingDocuments, ...this.pitchSupportingDocumentsRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchSupportingDocumentsRealtimeDB\r\n                                            ,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument:\r\n                                                this.pitchPresentationDocumentRealtimeDB.length === 0\r\n                                                    ?\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            projectEdited.Pitch.presentationDocument\r\n                                                            :\r\n                                                            null\r\n                                                    )\r\n                                                    :\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            [...projectEdited.Pitch.presentationDocument, ...this.pitchPresentationDocumentRealtimeDB]\r\n                                                            :\r\n                                                            this.pitchPresentationDocumentRealtimeDB\r\n                                                    )\r\n                                            ,\r\n                                            cover:\r\n                                                projectEdited.Pitch.cover\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.cover, ...this.pitchCoverRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchCoverRealtimeDB\r\n                                            ,\r\n                                            postedDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    utils.getCurrentDate()\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        utils.getCurrentDate()\r\n                                                        :\r\n                                                        projectEdited.Pitch.postedDate\r\n                                            ,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        DB_CONST.PITCH_STATUS_ON_GOING\r\n                                                        :\r\n                                                        projectEdited.Pitch.status\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    // set the updated pitch in firebase\r\n                                    projectRef\r\n                                        .child(projectEdited.id)\r\n                                        .update(updatedProject)\r\n                                        .then(() => {\r\n                                            // publish button is clicked\r\n                                            // only check and send notifications if the save progress is not triggered (save progress is only available for saving draft)\r\n                                            if (!saveProgress) {\r\n                                                // if the draft offer is published, don't need to check for sending notifications\r\n                                                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                                                    projectBeforeEdited.issuer = null;\r\n                                                    projectBeforeEdited.group = null;\r\n                                                    // track activity for editing a published project\r\n                                                    realtimeDBUtils\r\n                                                        .trackActivity({\r\n                                                            userID: AuthenticationState.currentUser.id,\r\n                                                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                            interactedObjectID: projectEdited.id,\r\n                                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT.replace(\"%project%\", projectEdited.projectName),\r\n                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id),\r\n                                                            value: {\r\n                                                                before: JSON.parse(JSON.stringify(projectBeforeEdited)),\r\n                                                                after: JSON.parse(JSON.stringify(updatedProject))\r\n                                                            }\r\n                                                        });\r\n\r\n                                                    // Send notifications to investors who voted or pledged\r\n                                                    // load votes\r\n                                                    realtimeDBUtils\r\n                                                        .loadVotes(projectEdited.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                                                        .then(votes => {\r\n\r\n                                                            let listOfInvestorsToBeNotified = [];\r\n                                                            votes.forEach(vote => {\r\n                                                                listOfInvestorsToBeNotified.push(vote.investorID);\r\n                                                            });\r\n\r\n                                                            // load pledges\r\n                                                            realtimeDBUtils\r\n                                                                .loadPledges(projectEdited.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                                .then(pledges => {\r\n                                                                    pledges.forEach(pledge => {\r\n                                                                        if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                                                            listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                                                        }\r\n                                                                    });\r\n\r\n                                                                    let notifications = [];\r\n                                                                    listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                                                        const notification = {\r\n                                                                            title: `${projectEdited.projectName} has been edited`,\r\n                                                                            message: `Please have a look at the changes that have been made in this offer. You may find some more useful information.`,\r\n                                                                            userID: investorID,\r\n                                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id)\r\n                                                                        };\r\n                                                                        notifications.push(notification);\r\n                                                                    });\r\n\r\n                                                                    // push all the notifications to firebase\r\n                                                                    Promise.all(notifications.map(notification => {\r\n                                                                        return new Promise((resolve, reject) => {\r\n                                                                            realtimeDBUtils\r\n                                                                                .sendNotification(notification)\r\n                                                                                .then(() => {\r\n                                                                                    return resolve();\r\n                                                                                })\r\n                                                                                .catch(error => {\r\n                                                                                    return reject(error);\r\n                                                                                });\r\n                                                                        });\r\n                                                                    })).then(() => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100,\r\n                                                                                projectID: projectEdited.id\r\n                                                                            }\r\n                                                                        });\r\n\r\n                                                                    }).catch(error => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100\r\n                                                                            }\r\n                                                                        });\r\n                                                                    });\r\n                                                                });\r\n                                                        });\r\n                                                }\r\n                                                // a draft offer is published\r\n                                                else {\r\n                                                    // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                    const acceptedTCsObj = {\r\n                                                        issuerID: AuthenticationState.currentUser.id,\r\n                                                        projectID: projectEdited.id,\r\n                                                        date: utils.getCurrentDate(),\r\n                                                        agreedToShareRaisePublicly\r\n                                                    };\r\n\r\n                                                    // push to Create Pitch T&Cs\r\n                                                    this.firebaseDB\r\n                                                        .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                        .push(acceptedTCsObj)\r\n                                                        .then(async () => {\r\n                                                            await new Api().request(\r\n                                                                \"post\",\r\n                                                                ApiRoutes.sendEmailRoute,\r\n                                                                {\r\n                                                                    queryParameters: null,\r\n                                                                    requestBody: {\r\n                                                                        emailType: 3,\r\n                                                                        emailInfo: {\r\n                                                                            projectID: projectEdited.id\r\n                                                                        }\r\n                                                                    }\r\n                                                                }\r\n                                                            );\r\n\r\n                                                            // track activity for creating a new project from a draft one\r\n                                                            realtimeDBUtils\r\n                                                                .trackActivity({\r\n                                                                    userID: AuthenticationState.currentUser.id,\r\n                                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                                    interactedObjectID: projectEdited.id,\r\n                                                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", updatedProject.projectName),\r\n                                                                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                                                                    value: updatedProject\r\n                                                                });\r\n\r\n                                                            // if the user is an issuer,\r\n                                                            // update the marketing preferences setting\r\n                                                            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER) {\r\n                                                                realtimeDBUtils\r\n                                                                    .updateMarketingPreferencesSetting({\r\n                                                                        userID: AuthenticationState.currentUser.id,\r\n                                                                        field: \"agreedToReceiveLocalInvestmentInfo\",\r\n                                                                        value: agreedToReceiveLocalInvestmentInfo\r\n                                                                    })\r\n                                                                    .catch(error => {\r\n                                                                        // handle error\r\n                                                                    });\r\n                                                            }\r\n\r\n                                                            this.setState({\r\n                                                                createProject: {\r\n                                                                    ...this.state.createProject,\r\n                                                                    uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                    uploadFileProgress: 100,\r\n                                                                    projectID: projectEdited.id\r\n                                                                }\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                            // save button is clicked\r\n                                            else {\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectEdited.id\r\n                                                );\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n        // in create new mode\r\n        else {\r\n            // calculate posted date (current time)\r\n            const postedDate = utils.getCurrentDate();\r\n\r\n            // pitch reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n            // get pitch's publishing id\r\n            const projectID = projectRef.push().key;\r\n\r\n            // pitch storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(AuthenticationState.currentUser.id)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectID);\r\n\r\n            // upload pitch cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload pitch supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload pitch presentation or pitch deck\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    const projectObj = {\r\n                                        id: projectID,\r\n                                        anid: groupIssuerCreateOfferFor === \"undefined\" ? ManageGroupUrlState.group.anid : groupIssuerCreateOfferFor,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                ManageGroupUrlState.group.settings.projectVisibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        issuerID:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then the issuerID is set to the id of the issuer that the\r\n                                                // group admin is creating an offer for\r\n                                                params.issuer\r\n                                                :\r\n                                                // in this case, it can be the issuer creating their own offer\r\n                                                // or a group admin is doing so for an unknown issuer --> this means\r\n                                                // the group admin clicks on the \"Create new investment opportunity\" in their\r\n                                                // main dashboard.\r\n                                                AuthenticationState.currentUser.id\r\n                                        , // this can the id of the issuer or the group admin\r\n                                        createdByGroupAdmin:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then, set the admin id as a proof of creating\r\n                                                params.admin\r\n                                                :\r\n                                                // the group admin is creating an offer for an unknown issuer\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // then, this field is also set to the group admin id\r\n                                                    AuthenticationState.currentUser.id\r\n                                                    :\r\n                                                    // this case means that the issuer is creating their own offer\r\n                                                    // so this field is set to null\r\n                                                    null\r\n                                        ,\r\n                                        projectName: saveProgress ? (pitchProjectName.trim().length === 0 ? null : pitchProjectName) : pitchProjectName,\r\n                                        sector: saveProgress ? (pitchSector === \"-\" ? null : pitchSector) : pitchSector,\r\n                                        description: saveProgress ? (pitchProjectDescription.trim().length === 0 ? null : pitchProjectDescription) : pitchProjectDescription,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // if a group admin creates the offer\r\n                                                // then let it go live\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                                    :\r\n                                                    // if an issuer creates the offer\r\n                                                    // let the group admin check it first\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                        ,\r\n                                        Pitch: {\r\n                                            totalRaise:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                                :\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            amountRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                                :\r\n                                                                0\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                        :\r\n                                                        0\r\n                                            ,\r\n                                            fundRequired:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    pitchRaiseRequired.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        detailsAboutEarlierFundraisingRounds\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            howFundIsBeingRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    howFundIsBeingRaised.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        howFundIsBeingRaised\r\n                                                    :\r\n                                                    howFundIsBeingRaised\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            postMoneyValuation:\r\n                                                pitchPostMoneyValuation.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments: this.pitchSupportingDocumentsRealtimeDB,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument: this.pitchPresentationDocumentRealtimeDB,\r\n                                            cover: this.pitchCoverRealtimeDB,\r\n                                            postedDate: postedDate,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    DB_CONST.PITCH_STATUS_ON_GOING\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    projectRef\r\n                                        .child(projectID)\r\n                                        .set(projectObj)\r\n                                        .then(() => {\r\n                                            // save button is clicked\r\n                                            if (saveProgress) {\r\n                                                // don't need to track activity for draft project\r\n\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    requestToLoadData: true,\r\n                                                    projectIDToBeLoadedAfterSavingFirstTime: projectID,\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    projectEditedLoaded: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectID\r\n                                                );\r\n                                            }\r\n                                            // publish button is clicked\r\n                                            else {\r\n                                                // track activity for creating a new project\r\n                                                realtimeDBUtils\r\n                                                    .trackActivity({\r\n                                                        userID: AuthenticationState.currentUser.id,\r\n                                                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                        interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                        interactedObjectID: projectID,\r\n                                                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", projectObj.projectName),\r\n                                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectObj.id),\r\n                                                        value: projectObj\r\n                                                    });\r\n\r\n                                                const id = this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .push()\r\n                                                    .key;\r\n\r\n                                                // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                const acceptedTCsObj = {\r\n                                                    id,\r\n                                                    issuerID: AuthenticationState.currentUser.id,\r\n                                                    projectID: projectID,\r\n                                                    date: utils.getCurrentDate()\r\n                                                };\r\n\r\n                                                this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .child(id)\r\n                                                    .set(acceptedTCsObj)\r\n                                                    .then(() => {\r\n                                                        this.setState({\r\n                                                            createProject: {\r\n                                                                ...this.state.createProject,\r\n                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                uploadFileProgress: 100,\r\n                                                                projectID: projectID\r\n                                                            }\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Upload multiple files\r\n     */\r\n    uploadMultipleFiles = async (mode, projectStorageRef) => {\r\n\r\n        const {\r\n            saveProgress\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchSupportingDocuments,\r\n            pitchPresentationDocument\r\n        } = this.state.createProject;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                openUploadingProgressDialog: !saveProgress,\r\n                uploadFileMode: mode,\r\n                uploadFileProgress: 0\r\n            }\r\n        });\r\n\r\n        let filesArray = null;\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // no pitch cover selected\r\n                if (!pitchCoverTypeSelected) {\r\n                    return null;\r\n                }\r\n                // pitch cover as a video URL\r\n                if (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED) {\r\n                    const formattedCover = {\r\n                        url: pitchCoverVideoURL,\r\n                        fileType: DB_CONST.FILE_TYPE_VIDEO,\r\n                        fileExtension: \"\",\r\n                        storageID: \"\"\r\n                    };\r\n                    this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                    return;\r\n                }\r\n                filesArray = pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                filesArray = pitchSupportingDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                filesArray = pitchPresentationDocument;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return Promise\r\n            .all(\r\n                filesArray.map(file => this.uploadIndividualFile(mode, projectStorageRef, file))\r\n            )\r\n            .then(() => {\r\n                return true;\r\n            })\r\n            .catch(error => {\r\n                return false;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Upload a single file (document)\r\n     */\r\n    uploadIndividualFile = async (mode, pitchStorageRef, document) => {\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        let docRef = null;\r\n\r\n        const storageID = utils.getCurrentDate();\r\n        const storageFileName = utils.constructStorageFileName(document, storageID);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                    .child(`${storageID}.${document.file.extension}`);\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const uploadTask = docRef.put(document.file);\r\n            uploadTask.on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: progress\r\n                        }\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask.snapshot.ref.getDownloadURL().then(fileDownloadURL => {\r\n\r\n                    let percentDone = 0;\r\n\r\n                    switch (mode) {\r\n                        case UPLOAD_PITCH_COVER_MODE:\r\n                            // capture the downloadable URL of the pitch cover and store in this variable for uploading to Realtime DB\r\n                            const formattedCover = {\r\n                                url: fileDownloadURL,\r\n                                fileType: document.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                fileExtension: document.file.extension,\r\n                                storageID: storageID\r\n                            };\r\n                            this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                            percentDone = 100 / (pitchSupportingDocuments.length);\r\n                            this.setState(prevState => ({\r\n                                createProject: {\r\n                                    ...prevState.createProject,\r\n                                    uploadFileProgress: prevState.createProject.uploadFileProgress + percentDone.toFixed(0)\r\n                                }\r\n                            }));\r\n                            const formattedSupportingDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchSupportingDocumentsRealtimeDB = [...this.pitchSupportingDocumentsRealtimeDB, formattedSupportingDocument];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                            const formattedPresentationDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchPresentationDocumentRealtimeDB = [...this.pitchPresentationDocumentRealtimeDB, formattedPresentationDocument];\r\n                            return resolve();\r\n                        default:\r\n                            return reject(\"Not existing mode\");\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function handles when a document is deleted\r\n     *\r\n     * @param mode\r\n     * @param index\r\n     */\r\n    handleDeleteDocument = (mode, index) => {\r\n\r\n        switch (mode) {\r\n            case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                let supportingDocuments = this.state.createProject.pitchSupportingDocuments;\r\n                supportingDocuments.splice(index, 1);\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchSupportingDocuments: supportingDocuments\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_PRESENTATION_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchPresentationDocument: []\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_COVER_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchCover: []\r\n                    }\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to set the reference of the Publish button so that the error message popover can be displayed properly\r\n     *\r\n     * @param target\r\n     */\r\n    attachNextStepButtonRef = target => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchNextStepButtonTarget: target\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close the popover error message displayed when the user hits the Publish click without filling all the required fields\r\n     */\r\n    handlePopoverErrorMessageClose = () => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishErrorMessageShowed: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is deleted ==> displaying a list of support documents ==> able to delete them\r\n     *\r\n     * @param index\r\n     */\r\n    handleDownloadDocumentDeleteClick = index => {\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let updatedProjectEdited = JSON.parse(JSON.stringify(projectEdited));\r\n        updatedProjectEdited.Pitch.supportingDocuments[index].removed = true;\r\n\r\n        this.setState({\r\n            projectEdited: updatedProjectEdited\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close file upload error snackbar\r\n     */\r\n    handleCloseErrorSnackbar = (event, reason) => {\r\n\r\n        if (reason === 'clickaway') {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    errorSnackbarOpen: false\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                errorSnackbarOpen: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when date changed\r\n     */\r\n    handleDateChanged = date => {\r\n\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchExpiryDate: NaN\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchExpiryDate:\r\n                    !date\r\n                        ?\r\n                        null\r\n                        :\r\n                        date.getTime()\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when accept terms and conditions checkbox changed\r\n     */\r\n    handleCheckboxChanged = event => {\r\n\r\n        const name = event.target.name;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                [name]: event.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the save progress button is clicked\r\n     */\r\n    handleSaveProgressClick = () => {\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n            hasRaisedMoneyBefore,\r\n\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        if (activeStep === STEP_PITCH_GENERAL_INFORMATION) {\r\n            // check if at least one field is filled\r\n            if (pitchSector === \"-\"\r\n                && pitchProjectName.trim().length === 0\r\n                && pitchProjectDescription.trim().length === 0\r\n                && pitchExpiryDate === null\r\n                && pitchRaiseRequired.trim().length === 0\r\n                && howFundIsBeingRaised.trim().length === 0\r\n                && financialRound.trim().length === 0\r\n                && pitchPostMoneyValuation.trim().length === 0\r\n                && hasRaisedMoneyBefore.trim().length === 0\r\n                && (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'You have nothing to save.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if the entered date is in a valid format or the entered date is less than the minimum date\r\n            if (isNaN(pitchExpiryDate)\r\n                ||\r\n                (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please enter a valid date.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if amount raised specified if the user chose Yes for prior investment\r\n            if (hasRaisedMoneyBefore.trim().length > 0) {\r\n                if (hasRaisedMoneyBefore === \"true\"\r\n                    && pitchAmountRaisedToDate.trim().length === 0\r\n                ) {\r\n                    setFeedbackSnackbarContent(\r\n                        'Please specify the fund you have raised.',\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // check if entered funds are valid\r\n            if ((hasRaisedMoneyBefore === \"true\"\r\n                    && pitchAmountRaisedToDate.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                )\r\n                || (pitchRaiseRequired.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchRaiseRequired)\r\n                )\r\n                || (pitchPostMoneyValuation.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                )\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please check your entered funds again.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            saveProgress: true,\r\n            progressBeingSaved: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user clicks on the Delete draft button\r\n     */\r\n    handleDeleteDraftClick = () => {\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            draftBeingDeleted: true\r\n        });\r\n\r\n        // delete pitch cover\r\n        this.deleteMultiplesOnStorage(UPLOAD_PITCH_COVER_MODE)\r\n            .then(() => {\r\n                // delete pitch deck\r\n                this.deleteMultiplesOnStorage(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE)\r\n                    .then(() => {\r\n                        // delete pitch supporting documents\r\n                        this.deleteMultiplesOnStorage(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE)\r\n                            .then(() => {\r\n                                this.firebaseDB\r\n                                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                                    .child(projectEdited.id)\r\n                                    .remove()\r\n                                    .then(() => {\r\n                                        // reset all variables and states to refresh the page\r\n                                        this.pitchCoverRealtimeDB = [];\r\n                                        this.pitchPresentationDocumentRealtimeDB = [];\r\n                                        this.pitchSupportingDocumentsRealtimeDB = [];\r\n                                        this.selectedProjectVisibilitySetting = -1;\r\n\r\n                                        this.setState({\r\n                                            ...initState\r\n                                        });\r\n\r\n                                        // remove listener\r\n                                        if (this.projectEditedSaveModeRefListener) {\r\n                                            this.projectEditedSaveModeRefListener.off('child_changed');\r\n                                        }\r\n\r\n                                        this.navigateToTheSamePageWithActiveStepSaved(0, null);\r\n                                        // reload the page\r\n                                        window.location.reload();\r\n                                    });\r\n                            });\r\n                    });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle delete multiple files on firebase storage\r\n     */\r\n    deleteMultiplesOnStorage = async (mode) => {\r\n        const {\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let storageRef = this.firebaseStorage\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(AuthenticationState.currentUser.id)\r\n            .child(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectEdited.id);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                if (!projectEdited.Pitch.cover) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.cover.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                if (!projectEdited.Pitch.presentationDocument) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.presentationDocument.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                if (!projectEdited.Pitch.supportingDocuments) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.supportingDocuments.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle delete a single file on firebase storage\r\n     */\r\n    deleteASingleFileOnStorage = async (mode, storageRef, file) => {\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // a video URL from other servers instead of from Firebase storage\r\n                if (file.storageID === \"\") {\r\n                    return;\r\n                }\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}.${file.fileExtension}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            isMobile\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            projectEditedLoaded,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            draftBeingDeleted\r\n        } = this.state;\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || isAuthenticating(AuthenticationState)\r\n        ) {\r\n            return null;\r\n        }\r\n\r\n        // when creating a new offer,\r\n        // if no user found or found user is an investor or a super admin\r\n        // --> display Page Not Found\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (successfullyAuthenticated(AuthenticationState) && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n            || (!params.edit && AuthenticationState.currentUser && (AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR\r\n                    || (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN && AuthenticationState.currentUser.superAdmin))\r\n            )\r\n        ) {\r\n            return (\r\n                <Redirect to={Routes.error404}/>\r\n            );\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit) {\r\n            // offer not loaded yet\r\n            if (!projectEditedLoaded) {\r\n                return (\r\n                    <FlexView width=\"100%\" hAlignContent=\"center\"  style={{padding: 30}}>\r\n                        <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // no offer found or found offer does not belong to the current issuer/group admin\r\n            if (\r\n                !projectEdited\r\n                // current user is an issuer that does not own the project\r\n                || (projectEdited\r\n                    && AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER\r\n                    && AuthenticationState.currentUser.id !== projectEdited.issuerID\r\n                )\r\n            ) {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n\r\n            // check editable offer\r\n            if (!utils.shouldAProjectBeEdited(AuthenticationState.currentUser, projectEdited)) {\r\n                return (\r\n                    <FlexView marginTop={50} width=\"100%\">\r\n                        <Typography variant=\"h4\" align=\"center\">This offer can't be edited anymore</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // current user is a group admin that does not own the project\r\n            if (projectEdited\r\n                && AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && !AuthenticationState.currentUser.superAdmin\r\n                && AuthenticationState.currentUser.anid !== projectEdited.anid\r\n            ) {\r\n                return <FlexView marginTop={50} hAlignContent=\"center\">\r\n                    <Typography variant=\"h4\" align=\"center\">\r\n                        {`You can only edit offers from ${getHomeGroup(AuthenticationState.groupsOfMembership).group.displayName}.`}\r\n                    </Typography>\r\n                </FlexView>;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <CreateProject\r\n                    clubAttributes={ManageSystemAttributesState.systemAttributes}\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    groupProperties={ManageGroupUrlState.group}\r\n                    params={params}\r\n                    AuthenticationState={AuthenticationState}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    projectEdited={projectEdited}\r\n                    projectEditedLoaded={projectEditedLoaded}\r\n                    saveProgress={saveProgress}\r\n                    progressBeingSaved={progressBeingSaved}\r\n                    draftBeingDeleted={draftBeingDeleted}\r\n                    isMobile={isMobile}\r\n                    createProjectState={this.state.createProject}\r\n                    onSelectPitchCoverTypeClick={this.handleSelectPitchCoverTypeClick}\r\n                    onFilesChanged={this.handleFilesChanged}\r\n                    onFilesError={this.handleFileError}\r\n                    onDeleteDocument={this.handleDeleteDocument}\r\n                    onInputChanged={this.handleCreatePitchInputChanged}\r\n                    onPitchEditorChanged={this.handlePitchEditorChanged}\r\n                    attachNextStepButtonRef={this.attachNextStepButtonRef}\r\n                    onPopoverErrorMessageClose={this.handlePopoverErrorMessageClose}\r\n                    onNextStepClick={this.handleNextStepClick}\r\n                    onBackClick={this.handleBackClick}\r\n                    onDownloadDocumentDeleteClick={this.handleDownloadDocumentDeleteClick}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCheckboxChanged={this.handleCheckboxChanged}\r\n                    onSaveProgressClick={this.handleSaveProgressClick}\r\n                    onDeleteDraftClick={this.handleDeleteDraftClick}\r\n                />\r\n\r\n                <UploadingDialog\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    open={this.state.createProject.openUploadingProgressDialog}\r\n                    uploadFileMode={this.state.createProject.uploadFileMode}\r\n                    uploadFileProgress={this.state.createProject.uploadFileProgress}\r\n                    params={params}\r\n                    projectEdited={projectEdited}\r\n                    projectID={this.state.createProject.projectID}\r\n                />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * This component contains the main UI elements for the whole page\r\n */\r\nclass CreateProject extends Component {\r\n\r\n    onNextStepClick = () => {\r\n        this.props.onNextStepClick();\r\n    };\r\n\r\n    onBackClick = () => {\r\n        this.props.onBackClick();\r\n    };\r\n\r\n    onSelectPitchCoverTypeClick = type => {\r\n        this.props.onSelectPitchCoverTypeClick(type);\r\n    };\r\n\r\n    onFilesChanged = mode => files => {\r\n        this.props.onFilesChanged(mode, files);\r\n    };\r\n\r\n    onFilesError = (error, files) => {\r\n        this.props.onFilesError(error, files);\r\n    };\r\n\r\n    onInputChanged = event => {\r\n        this.props.onInputChanged(event);\r\n    };\r\n\r\n    onPitchEditorChanged = (content, delta, source, editor) => {\r\n        this.props.onPitchEditorChanged(content, delta, source, editor);\r\n    };\r\n\r\n    onDeleteDocument = mode => index => {\r\n        this.props.onDeleteDocument(mode, index);\r\n    };\r\n\r\n    attachNextStepButtonRef = (target) => {\r\n        this.props.attachNextStepButtonRef(target);\r\n    };\r\n\r\n    onPopoverErrorMessageClose = () => {\r\n        this.props.onPopoverErrorMessageClose();\r\n    };\r\n\r\n    onDownloadDocumentDeleteClick = index => {\r\n        this.props.onDownloadDocumentDeleteClick(index);\r\n    };\r\n\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    };\r\n\r\n    onCheckboxChanged = event => {\r\n        this.props.onCheckboxChanged(event);\r\n    };\r\n\r\n    onSaveProgressClick = () => {\r\n        this.props.onSaveProgressClick();\r\n    };\r\n\r\n    onDeleteDraftClick = () => {\r\n        this.props.onDeleteDraftClick();\r\n    };\r\n\r\n    /**\r\n     * Render pop-over error message (if any) when the user clicks to move to the next step\r\n     */\r\n    renderPitchPublishErrorMessage = () => {\r\n\r\n        const {\r\n            groupUserName\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (this.props.createProjectState.pitchPublishCheck) {\r\n            case PITCH_PUBLISH_CHECK_NONE:\r\n                return null;\r\n            case PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION:\r\n                msg = \"Please fill in all the General information.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_FUND:\r\n                msg = \"Please check your entered funds again.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER:\r\n                msg = \"Please upload an image or a video for your pitch cover.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION:\r\n                // for QIB, pitch deck is a one-pager\r\n                if (groupUserName === \"qib\") {\r\n                    msg = \"Please upload your one-pager.\";\r\n                }\r\n                // for other groups, pitch deck is still pitch deck\r\n                else {\r\n                    msg = \"Please upload a file or use our provided text editor to make your pitch presentation.\";\r\n                }\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"error\">{msg}</Typography>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            clubAttributes,\r\n            groupUserName,\r\n            groupProperties,\r\n            currentUser,\r\n            params,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n            draftBeingDeleted,\r\n\r\n            isMobile,\r\n\r\n            createProjectState\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Stepper */}\r\n                <Row noGutters style={{ marginTop: 40, padding: 20}}>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            <Stepper activeStep={createProjectState.activeStep} alternativeLabel style={{ width: isMobile ? \"auto\" : \"100%\", padding: 0}}>\r\n                                <Step key={0}>\r\n                                    <StepLabel>General information</StepLabel>\r\n                                </Step>\r\n                                <Step key={1}>\r\n                                    <StepLabel>Pitch cover</StepLabel>\r\n                                </Step>\r\n                                <Step key={2}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>One-pager</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Pitch deck</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                <Step key={3}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>Pitch deck</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Supporting documents</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                {\r\n                                    params.edit && projectEdited\r\n                                        ?\r\n                                        (\r\n                                            projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Step key={4}>\r\n                                                    <StepLabel>Terms and conditions</StepLabel>\r\n                                                </Step>\r\n                                        )\r\n                                        :\r\n                                        <Step key={4}>\r\n                                            <StepLabel>Terms and conditions</StepLabel>\r\n                                        </Step>\r\n                                }\r\n                            </Stepper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main content (changed based on activeStep) */}\r\n                <Row noGutters style={{padding: 18}}>\r\n                    {\r\n                        createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION\r\n                            ?\r\n                            /**\r\n                             * General information column\r\n                             */\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                {\r\n                                    /**\r\n                                     * Step 1: General information\r\n                                     */\r\n                                }\r\n                                <FlexView column>\r\n                                    <FlexView>\r\n                                        <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 1: General information</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <SelectPitchVisibility/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {/** Let the issuer select the group they want to create an offer for */}\r\n                                    {\r\n                                        createProjectState.groupIssuerCreateOfferFor === \"undefined\"\r\n                                            ? null\r\n                                            : params.edit && projectEdited && !isDraftProjectNotSubmitted(projectEdited)\r\n                                            ? null\r\n                                            : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : AuthenticationState.groupsOfMembership === null || AuthenticationState.groupsOfMembership.length === 0\r\n                                                    ? null\r\n                                                    : <FlexView marginTop={30}>\r\n                                                        <FormControl fullWidth required>\r\n                                                            <FormLabel>Select group</FormLabel>\r\n                                                            <Select name=\"groupIssuerCreateOfferFor\" value={createProjectState.groupIssuerCreateOfferFor} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                                {\r\n                                                                    AuthenticationState.groupsOfMembership.map(\r\n                                                                        groupOfMembership =>\r\n                                                                            <MenuItem key={groupOfMembership.group.anid} value={groupOfMembership.group.anid}>{groupOfMembership.group.displayName}</MenuItem>\r\n                                                                    )\r\n                                                                }\r\n                                                            </Select>\r\n                                                        </FormControl>\r\n                                                    </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Choosing sector\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={30}>\r\n                                        <FormControl\r\n                                            fullWidth\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchSector === \"-\"\r\n                                            }\r\n                                        >\r\n                                            <FormLabel>Choose sector</FormLabel>\r\n                                            <Select name=\"pitchSector\" value={createProjectState.pitchSector} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                <MenuItem key={-1} value=\"-\">\r\n                                                    -\r\n                                                </MenuItem>\r\n                                                {\r\n                                                    !clubAttributes\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Select expiry date\r\n                                         *\r\n                                         * For QIB: Hide this section as the group admins will set\r\n                                         * the default expiry date for all the projects.\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                            Pitch expiry\r\n                                                            date: {utils.dateInReadableFormat(groupProperties.settings.defaultPitchExpiryDate)} (set\r\n                                                            by QIB admins)\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={8} lg={6}>\r\n                                                        {\r\n                                                            !params.edit || !projectEdited\r\n                                                                ?\r\n                                                                <KeyboardDatePicker\r\n                                                                    autoOk\r\n                                                                    fullWidth\r\n                                                                    variant=\"dialog\"\r\n                                                                    inputVariant=\"outlined\"\r\n                                                                    label=\"Choose expiry date for this pitch\"\r\n                                                                    format=\"dd/MM/yyyy\"\r\n                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                    value={createProjectState.pitchExpiryDate}\r\n                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                    error={\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                            && createProjectState.pitchExpiryDate === null)\r\n                                                                        ||\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                            && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                        )\r\n                                                                    }\r\n                                                                    onChange={date => this.onDateChanged(date)}\r\n                                                                />\r\n                                                                :\r\n                                                                (\r\n                                                                    utils.isDraftProject(projectEdited)\r\n                                                                        ?\r\n                                                                        <KeyboardDatePicker\r\n                                                                            autoOk\r\n                                                                            fullWidth\r\n                                                                            variant=\"dialog\"\r\n                                                                            inputVariant=\"outlined\"\r\n                                                                            label=\"Choose expiry date for this pitch\"\r\n                                                                            format=\"dd/MM/yyyy\"\r\n                                                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                            value={createProjectState.pitchExpiryDate}\r\n                                                                            InputAdornmentProps={{position: \"start\"}}\r\n                                                                            error={\r\n                                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                    && createProjectState.pitchExpiryDate === null)\r\n                                                                                || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                    && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                        || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                )\r\n                                                                            }\r\n                                                                            onChange={date => this.onDateChanged(date)}\r\n                                                                        />\r\n                                                                        :\r\n                                                                        <FlexView column>\r\n                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                {\r\n                                                                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                                                        ?\r\n                                                                                        null\r\n                                                                                        :\r\n                                                                                        projectEdited.PrimaryOffer\r\n                                                                                            ?\r\n                                                                                            `Pledge phase will be active in ${utils.dateDiff(projectEdited.PrimaryOffer.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                            :\r\n                                                                                            projectEdited.Pitch\r\n                                                                                                ?\r\n                                                                                                `Pitch phase will be active in ${utils.dateDiff(projectEdited.Pitch.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                }\r\n                                                                            </Typography>\r\n                                                                            {\r\n                                                                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                                                    ?\r\n                                                                                    null\r\n                                                                                    :\r\n                                                                                    (\r\n                                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                                                                            ?\r\n                                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                                Pitch phase has ended.\r\n                                                                                                Waiting\r\n                                                                                                for the issuer to create\r\n                                                                                                pledge.\r\n                                                                                            </Typography>\r\n                                                                                            :\r\n                                                                                            <KeyboardDatePicker\r\n                                                                                                autoOk\r\n                                                                                                fullWidth\r\n                                                                                                variant=\"dialog\"\r\n                                                                                                inputVariant=\"outlined\"\r\n                                                                                                label={\r\n                                                                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                                                                                        ?\r\n                                                                                                        \"Choose expiry date for pledge phase\"\r\n                                                                                                        :\r\n                                                                                                        \"Choose expiry date for pitch phase\"\r\n                                                                                                }\r\n                                                                                                format=\"dd/MM/yyyy\"\r\n                                                                                                minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                                value={createProjectState.pitchExpiryDate}\r\n                                                                                                InputAdornmentProps={{position: \"start\"}}\r\n                                                                                                error={\r\n                                                                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                                        && createProjectState.pitchExpiryDate === null)\r\n                                                                                                    || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                                        && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                                            || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                                    )\r\n                                                                                                }\r\n                                                                                                onChange={date => this.onDateChanged(date)}\r\n                                                                                            />\r\n                                                                                    )\r\n                                                                            }\r\n                                                                        </FlexView>\r\n                                                                )\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company name (or project name)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={20}>\r\n                                        <TextField\r\n                                            label=\"Company name\"\r\n                                            name=\"pitchProjectName\"\r\n                                            value={createProjectState.pitchProjectName}\r\n                                            fullWidth\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchProjectName.trim().length === 0\r\n                                            }\r\n                                            onChange={this.onInputChanged}\r\n                                        />\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company description (or project description)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={10}>\r\n                                        <FormControl required fullWidth>\r\n                                            <TextField\r\n                                                label=\"Please provide a brief summary of what you do (max 300 characters)\"\r\n                                                name=\"pitchProjectDescription\"\r\n                                                value={createProjectState.pitchProjectDescription}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.pitchProjectDescription.trim().length === 0\r\n                                                }\r\n                                                multiline\r\n                                                rowsMax={5}\r\n                                                rows={5}\r\n                                                onChange={this.onInputChanged}\r\n                                            />\r\n                                            <FormHelperText>\r\n                                                This will be circulated to investors in and outside region.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Amount of money that needs raising\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={50}>\r\n                                        <FormControl required fullWidth>\r\n                                            <FormLabel>How much do you want to raise?</FormLabel>\r\n                                            <TextField\r\n                                                name=\"pitchRaiseRequired\"\r\n                                                value={createProjectState.pitchRaiseRequired}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                onChange={this.onInputChanged}\r\n                                                error={\r\n                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                        && createProjectState.pitchRaiseRequired.trim().length === 0)\r\n                                                    ||\r\n                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                        && !utils.getNumberFromInputString(createProjectState.pitchRaiseRequired)\r\n                                                    )\r\n                                                }\r\n                                                InputProps={{\r\n                                                    startAdornment:\r\n                                                        <InputAdornment position=\"start\">£</InputAdornment>\r\n                                                }}\r\n                                            />\r\n                                            <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.</FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Raised money before?\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={60}>\r\n                                        <FormControl component=\"fieldset\" required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.hasRaisedMoneyBefore.trim().length === 0\r\n                                            }>\r\n                                            <FormLabel> Have you already raised money?\r\n                                            </FormLabel>\r\n                                            <RadioGroup row name=\"hasRaisedMoneyBefore\" value={createProjectState.hasRaisedMoneyBefore} onChange={this.onInputChanged}>\r\n                                                <FormControlLabel value={true.toString()} control={<Radio color=\"primary\"/>} label=\"Yes\" labelPlacement=\"start\"/>\r\n                                                <FormControlLabel value={false.toString()} control={<Radio color=\"secondary\"/>} label=\"No\" labelPlacement=\"start\"/>\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * If raised money before, ask how much has been raised?\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        createProjectState.hasRaisedMoneyBefore !== \"true\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <FlexView>\r\n                                                    <FormControl fullWidth required>\r\n                                                        <FormLabel>How much have you already raised?</FormLabel>\r\n                                                        <TextField\r\n                                                            name=\"pitchAmountRaisedToDate\"\r\n                                                            value={createProjectState.pitchAmountRaisedToDate}\r\n                                                            fullWidth\r\n                                                            variant=\"outlined\"\r\n                                                            required\r\n                                                            onChange={this.onInputChanged}\r\n                                                            error={\r\n                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                    && createProjectState.hasRaisedMoneyBefore === \"true\"\r\n                                                                    && createProjectState.pitchAmountRaisedToDate.trim().length === 0)\r\n                                                                ||\r\n                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                                    && !utils.getNumberFromInputString(createProjectState.pitchAmountRaisedToDate)\r\n                                                                )\r\n                                                            }\r\n                                                            InputProps={{\r\n                                                                startAdornment: <InputAdornment\r\n                                                                    position=\"start\">£</InputAdornment>\r\n                                                            }}\r\n                                                        />\r\n                                                        <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.</FormHelperText>\r\n                                                    </FormControl>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView marginTop={30}>\r\n                                                    <FormControl fullWidth>\r\n                                                        <FormLabel>Earlier fundraising rounds details</FormLabel>\r\n                                                        <TextField multiline name=\"detailsAboutEarlierFundraisingRounds\" value={createProjectState.detailsAboutEarlierFundraisingRounds} fullWidth variant=\"outlined\" onChange={this.onInputChanged}/>\r\n                                                        <FormHelperText>Please provide any further details on your earlier fundraising rounds</FormHelperText>\r\n                                                    </FormControl>\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * How fund is being raised?\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth>\r\n                                            <FormLabel>How are you raising? e.g. Do you have a crowdfunding page (please add a link)?</FormLabel>\r\n                                            <TextField name=\"howFundIsBeingRaised\" value={createProjectState.howFundIsBeingRaised} fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.howFundIsBeingRaised.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Financial round\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.financialRound.trim().length === 0\r\n                                            }\r\n                                        >\r\n                                            <FormLabel style={{marginBottom: 16}}>What financial round are you looking for?</FormLabel>\r\n                                            <RadioGroup name=\"financialRound\" value={createProjectState.financialRound} onChange={this.onInputChanged}>\r\n                                                {\r\n                                                    DB_CONST.FINANCIAL_ROUNDS.map(round =>\r\n                                                        <FormControlLabel key={round} value={round} control={<Radio/>} label={round}/>\r\n                                                    )\r\n                                                }\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Special news - QIB only\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                        || (\r\n                                            !groupUserName\r\n                                            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            && currentUser.superAdmin\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={45}>\r\n                                                <FormControl required fullWidth>\r\n                                                    <FormLabel>What special news should Briony talk about when she mentions your investment raise at the QIB?</FormLabel>\r\n                                                    <TextField name=\"qibSpecialNews\" value={createProjectState.qibSpecialNews} placeholder=\"This would be a good place to mention if you have already made progress in your funding round.\" fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                        error={\r\n                                                            groupUserName === \"qib\"\r\n                                                            && createProjectState.qibSpecialNews === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                            && createProjectState.qibSpecialNews.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                    <FormHelperText>QIB won't be able to mention everyone. So, you can make it REALLY exciting.</FormHelperText>\r\n                                                </FormControl>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Post money valuation\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl fullWidth>\r\n                                            <FormLabel>Enter post money valuation</FormLabel>\r\n                                            <TextField name=\"pitchPostMoneyValuation\" value={createProjectState.pitchPostMoneyValuation} fullWidth variant=\"outlined\" onChange={this.onInputChanged}\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                    && createProjectState.pitchPostMoneyValuation.trim().length > 0\r\n                                                    && !utils.getNumberFromInputString(createProjectState.pitchPostMoneyValuation)\r\n                                                }\r\n                                                InputProps={{\r\n                                                    startAdornment:\r\n                                                        <InputAdornment position=\"start\">£</InputAdornment>\r\n                                                }}/>\r\n                                            <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n\r\n                                <Divider style={{marginTop: 60}}/>\r\n                            </Col>\r\n                            :\r\n                            (\r\n                                createProjectState.activeStep === STEP_PITCH_COVER\r\n                                    ?\r\n                                    // Pitch cover\r\n                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <Typography color=\"primary\" variant=\"h6\" align=\"left\" style={{marginRight: 15}}>Step 2: Upload pitch cover</Typography>\r\n                                                <InfoOverlay message=\"Pitch cover is an image or video that will appear on your pitch summary tile.\" placement=\"right\"/>\r\n                                            </FlexView>\r\n\r\n                                            {\r\n                                                !params.edit || !projectEdited\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView column width=\"100%\" marginTop={25} marginBottom={25}>\r\n                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginBottom: 20}}>Your current pitch cover</Typography>\r\n\r\n                                                            {\r\n                                                                projectEdited.Pitch.cover.map((coverItem, index) => (\r\n                                                                    coverItem.hasOwnProperty('removed')\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                                            ?\r\n                                                                            <ReactPlayer key={index} playsInline url={coverItem.url} width=\"100%\" height={coverItem.storageID === \"\" ? 280 : \"auto\"} playing={false} controls={true}/>\r\n                                                                            :\r\n                                                                            <Image key={index} fluid src={coverItem.url}/>\r\n                                                                ))\r\n                                                            }\r\n\r\n                                                            <Divider style={{marginTop: 45}}/></FlexView>\r\n                                            }\r\n\r\n                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 18}}>\r\n                                                {\r\n                                                    !params.edit || !projectEdited\r\n                                                        ?\r\n                                                        \"You need to upload an image or a video for the cover of your pitch.\"\r\n                                                        :\r\n                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                            ?\r\n                                                            \"You need to upload an image or a video for the cover of your pitch.\"\r\n                                                            :\r\n                                                            \"Upload an image or a video to change your pitch cover. We will use the new cover for your pitch instead of the old one.\"\r\n                                                }\r\n                                            </Typography>\r\n\r\n                                            {\r\n                                                groupUserName !== \"qib\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>Please upload your company logo here.</Typography>\r\n                                            }\r\n\r\n                                            <FlexView column marginTop={32}>\r\n                                                <FlexView>\r\n                                                    <Button\r\n                                                        variant={\r\n                                                            createProjectState.pitchCoverTypeSelected\r\n                                                            && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                \"contained\"\r\n                                                                :\r\n                                                                \"outlined\"\r\n                                                        }\r\n                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                        color=\"primary\"\r\n                                                        onClick={() => this.onSelectPitchCoverTypeClick(PITCH_COVER_FILE_TYPE_SELECTED)}\r\n                                                    >\r\n                                                        {\r\n                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                ?\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image or a video\"\r\n                                                                    :\r\n                                                                    \"Upload an image or a video\"\r\n                                                                :\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image\"\r\n                                                                    :\r\n                                                                    \"Upload an image\"\r\n                                                        }\r\n                                                    </Button>\r\n\r\n                                                    <FlexView marginLeft={20} vAlignContent=\"center\">\r\n                                                        <Button\r\n                                                            variant={\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"contained\"\r\n                                                                    :\r\n                                                                    \"outlined\"\r\n                                                            }\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                            color=\"primary\"\r\n                                                            onClick={\r\n                                                                () => this.onSelectPitchCoverTypeClick(PITCH_COVER_VIDEO_URL_TYPE_SELECTED)\r\n                                                            }\r\n                                                            style={{marginRight: 15}}>\r\n                                                            {\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload a video URL\"\r\n                                                                    :\r\n                                                                    \"Upload a video URL\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <InfoOverlay message=\"If your company has a short explainer or introductory video, we suggest you embed it here.\" placement=\"right\"/>\r\n                                                    </FlexView>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView column marginTop={20}>\r\n                                                    {\r\n                                                        !createProjectState.pitchCoverTypeSelected\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                <FlexView column marginTop={10}>\r\n                                                                    <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_COVER_FILES_CHANGED)} onError={this.onFilesError}\r\n                                                                        accepts={\r\n                                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                ?\r\n                                                                                ['video/mp4', 'image/*']\r\n                                                                                :\r\n                                                                                ['image/*']\r\n                                                                        }\r\n                                                                        multiple\r\n                                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                        minFileSize={0}\r\n                                                                        clickable>\r\n                                                                        <Typography variant=\"body2\" align=\"left\">\r\n                                                                            {\r\n                                                                                clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                    ?\r\n                                                                                    \"Drop an image or a video here or click to upload\"\r\n                                                                                    :\r\n                                                                                    \"Drop an image here or click to upload\"\r\n                                                                            }\r\n                                                                        </Typography>\r\n                                                                    </Files>\r\n                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}><u>Note:</u> Pitch cover must not exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column>\r\n                                                                    <TextField name=\"pitchCoverVideoURL\" value={createProjectState.pitchCoverVideoURL} placeholder=\"Enter your video URL here\" variant=\"outlined\" margin=\"dense\" onChange={this.onInputChanged}/>\r\n                                                                </FlexView>\r\n                                                    }\r\n\r\n                                                    {/** Pitch cover file type preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCover.length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35}>\r\n                                                                {\r\n                                                                    createProjectState.pitchCover[0].file.type !== \"video/mp4\"\r\n                                                                        ?\r\n                                                                        <Image fluid src={createProjectState.pitchCover[0].preview}/>\r\n                                                                        :\r\n                                                                        <ReactPlayer url={createProjectState.pitchCover[0].preview} playsInline width=\"100%\" height=\"auto\" playing={false} controls={true}/>\r\n                                                                }\r\n                                                                <FlexView marginTop={10} hAlignContent=\"center\">\r\n                                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                                        overlay={\r\n                                                                            <Tooltip id={`tooltip-bottom`}>Delete this cover</Tooltip>\r\n                                                                        }>\r\n                                                                        <IconButton onClick={this.onDeleteDocument(PITCH_COVER_FILES_CHANGED)}>\r\n                                                                            <DeleteIcon fontSize=\"default\" color=\"error\"/>\r\n                                                                        </IconButton>\r\n                                                                    </OverlayTrigger>\r\n                                                                </FlexView>\r\n\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n\r\n                                                    {/** Pitch cover video URL preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCoverVideoURL.trim().length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35} height={280}>\r\n                                                                <ReactPlayer url={createProjectState.pitchCoverVideoURL} playsInline width=\"100%\" height=\"100%\" playing={false} controls={true}/>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    :\r\n                                    (\r\n                                        createProjectState.activeStep === STEP_PITCH_DECK\r\n                                            ?\r\n                                            // Pitch deck (other groups)\r\n                                            // One-pager (for QIB only)\r\n                                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                {\r\n                                                    groupUserName === \"qib\"\r\n                                                        ?\r\n                                                        // QIB pitch deck which is also known as one-pager\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Submit your one-pager</Typography>\r\n\r\n                                                            {/** Display the current one-pager if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current one-pager\"\r\n                                                                                            :\r\n                                                                                            \"You haven't submitted your one-pager.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={30}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload your one-pager</Typography>\r\n                                                                <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)} onError={this.onFilesError} accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']} multiple maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES} minFileSize={0} clickable>\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> The one-pager must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments documents={createProjectState.pitchPresentationDocument} onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}/>\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <FlexView column marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\r\n                                                                    We recommend the following headings for your\r\n                                                                    one-page, one-sided summary:\r\n                                                                    <ul>\r\n                                                                        <li>Problem</li>\r\n                                                                        <li>Solution</li>\r\n                                                                        <li>Business model</li>\r\n                                                                        <li>Market opportunity</li>\r\n                                                                        <li>Team</li>\r\n                                                                        <li>Journey so far/timeline</li>\r\n                                                                        <li>Ask/Investment proposition</li>\r\n                                                                    </ul>\r\n                                                                </Typography>\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                        :\r\n                                                        // other groups pitch deck\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Upload pitch deck</Typography>\r\n\r\n                                                            {/** Display the current pitch deck if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current pitch deck\"\r\n                                                                                            :\r\n                                                                                            \"You have no pitch deck.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                {\r\n                                                                    !params.edit || !projectEdited\r\n                                                                        ?\r\n                                                                        \"You need to either upload your pitch deck (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                        :\r\n                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                                        &&\r\n                                                                        (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            \"You need to either upload your pitch deck (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                            :\r\n                                                                            \"Upload a PDF, Word, or Power Point file to change your pitch deck. We will use the new document for your pitch deck instead of the old one.\"\r\n                                                                }\r\n                                                            </Typography>\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload pitch deck</Typography>\r\n                                                                <Files\r\n                                                                    className={css(styles.file_drop_zone)}\r\n                                                                    onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                    onError={this.onFilesError}\r\n                                                                    accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']}\r\n                                                                    multiple\r\n                                                                    maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                    minFileSize={0}\r\n                                                                    clickable\r\n                                                                >\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> Pitch deck must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments\r\n                                                                    documents={createProjectState.pitchPresentationDocument}\r\n                                                                    onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Rich text editor */}\r\n                                                            <FlexView column marginTop={20}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Write overview</Typography>\r\n                                                                <ReactQuill\r\n                                                                    theme=\"snow\"\r\n                                                                    placeholder={\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            \"Write your pitch presentation here. Add images for visual effects.\"\r\n                                                                            :\r\n                                                                            projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('presentationText')\r\n                                                                                ?\r\n                                                                                \"Write your pitch presentation here. Add images for visual effects.\"\r\n                                                                                :\r\n                                                                                \"You haven't had text presentation\" +\r\n                                                                                \" for this offer.\"\r\n                                                                    }\r\n                                                                    onChange={this.onPitchEditorChanged}\r\n                                                                    modules={modules}\r\n                                                                    value={createProjectState.pitchPresentationText}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                }\r\n                                            </Col>\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                    ?\r\n                                                    // Supporting documents (other groups)\r\n                                                    // Pitch deck (for QIB only)\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        {\r\n                                                            groupUserName === \"qib\"\r\n                                                                ?\r\n                                                                // QIB supporting document which is also known as pitch deck\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload pitch deck (optional)</Typography>\r\n\r\n                                                                    {/** Display current pitch deck if there is */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your current pitch deck</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no pitch deck.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/></FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/></FlexView>\r\n                                                                :\r\n                                                                // Other groups supporting documents\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload supporting documents</Typography>\r\n\r\n                                                                    {/** Display current supporting documents if there are */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your supporting documents</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no supporting documents.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** Explanation text */}\r\n                                                                    <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                        {\r\n                                                                            !params.edit || !projectEdited\r\n                                                                                ?\r\n                                                                                `You can upload supporting documents to help strengthen your pitch. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                :\r\n                                                                                (\r\n                                                                                    !projectEdited.Pitch.supportingDocuments\r\n                                                                                        ?\r\n                                                                                        `You can upload supporting documents to help strengthen your pitch. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                        :\r\n                                                                                        `Upload new supporting documents. \r\n                                                                        You can still upload ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length} \r\n                                                                        more documents.`\r\n                                                                                )\r\n                                                                        }\r\n                                                                    </Typography>\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 5: Accept terms and conditions</Typography>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to share raise publicly\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\" style={{marginTop: 30}}>\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToShareRaisePublicly\" value={createProjectState.agreedToShareRaisePublicly} checked={createProjectState.agreedToShareRaisePublicly} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to share news of your raise publicly e.g. via Twitter, please tick this box.</Typography>\r\n                                                                    }/>\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to receive local investment information\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToReceiveLocalInvestmentInfo\" value={createProjectState.agreedToReceiveLocalInvestmentInfo} checked={createProjectState.agreedToReceiveLocalInvestmentInfo} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to receive information about the local investment ecosystem (max 8 times a year), please tick this box.</Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to T&Cs\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <Typography variant=\"body1\" align=\"left\">Please tick the box below to confirm that you agree\r\n                                                                    to comply with the terms and conditions of creating\r\n                                                                    a pitch in our platform.</Typography>\r\n                                                                <FormControlLabel style={{marginTop: 10}}\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"acceptedTermsAndConditions\" value={createProjectState.acceptedTermsAndConditions} checked={createProjectState.acceptedTermsAndConditions} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">I've read and accept the\r\n                                                                            <b>\r\n                                                                                &nbsp;\r\n                                                                                <NavLink\r\n                                                                                    to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS}\r\n                                                                                    target=\"_blank\"\r\n                                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                                    style={{\r\n                                                                                        color:\r\n                                                                                            !groupProperties\r\n                                                                                                ?\r\n                                                                                                colors.primaryColor\r\n                                                                                                :\r\n                                                                                                groupProperties.settings.primaryColor\r\n                                                                                    }}\r\n                                                                                >\r\n                                                                                    terms and conditions.\r\n                                                                                </NavLink>\r\n                                                                            </b>\r\n                                                                        </Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                        </FlexView>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </Row>\r\n\r\n                {/** Navigation buttons */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 20, marginBottom: 120, padding: 18}}>\r\n\r\n                        {\r\n                            params.edit && projectEdited\r\n                                ?\r\n                                (\r\n                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                            ?\r\n                                            (\r\n                                                !createProjectState.acceptedTermsAndConditions\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before you submit.</Typography>\r\n                                            )\r\n                                            :\r\n                                            null\r\n                                        :\r\n                                        createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                            ?\r\n                                            <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                            :\r\n                                            null\r\n                                )\r\n                                :\r\n                                (\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                        ?\r\n                                        (\r\n                                            !createProjectState.acceptedTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                        )\r\n                                        :\r\n                                        null\r\n                                )\r\n                        }\r\n\r\n                        <FlexView width=\"100%\" hAlignContent=\"right\">\r\n                            <Button variant=\"text\" onClick={this.onBackClick} disabled={createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION} size=\"large\" className={css(sharedStyles.no_text_transform)}>Back</Button>\r\n                            <Button ref={this.attachNextStepButtonRef} variant=\"outlined\" color=\"primary\" onClick={this.onNextStepClick} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                                disabled={\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                    && !createProjectState.acceptedTermsAndConditions\r\n                                }\r\n                                style={{marginLeft: 15}}>\r\n                                {\r\n                                    progressBeingSaved\r\n                                        ?\r\n                                        <BeatLoader size={8}/>\r\n                                        :\r\n                                        params.edit && projectEdited\r\n                                            ?\r\n                                            (\r\n                                                projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                        ?\r\n                                                        \"Update\"\r\n                                                        :\r\n                                                        \"Next\"\r\n                                                    :\r\n                                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                        ?\r\n                                                        \"Submit\"\r\n                                                        :\r\n                                                        \"Save and Next\"\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                    ?\r\n                                                    \"Submit\"\r\n                                                    :\r\n                                                    \"Save and Next\"\r\n                                            )\r\n                                }\r\n                            </Button>\r\n                            <Overlay show={createProjectState.pitchPublishErrorMessageShowed} target={createProjectState.pitchNextStepButtonTarget} placement=\"bottom\">\r\n                                <Popover style={{marginTop: 14}} id=\"publish-popover-bottom\">\r\n                                    <FlexView vAlignContent=\"center\">\r\n                                        {\r\n                                            this.renderPitchPublishErrorMessage()\r\n                                        }\r\n                                        <IconButton\r\n                                            style={{width: 42, height: 42}}  onClick={this.onPopoverErrorMessageClose}>\r\n                                            <CloseIcon fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </Popover>\r\n                            </Overlay>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    (!params.edit || !projectEdited)\r\n                    || (params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT)\r\n                        ?\r\n                        <div\r\n                            style={{position: 'fixed', width: 'auto', height: 'auto', bottom: 0, right: 0, marginRight: isMobile ? 72 : 120, marginBottom: isMobile ? 80 : 100}}>\r\n                            <FlexView column>\r\n                                <div>\r\n                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                        overlay={\r\n                                            <Tooltip id={`tooltip-left`}>Save draft</Tooltip>\r\n                                        }>\r\n                                        <Fab color=\"primary\" size={isMobile ? \"medium\" : \"large\"} onClick={this.onSaveProgressClick} disabled={saveProgress && progressBeingSaved} style={{position: 'absolute',zIndex: 1}}>\r\n                                            <SaveIcon/>\r\n                                        </Fab>\r\n                                    </OverlayTrigger>\r\n                                    {\r\n                                        saveProgress && progressBeingSaved\r\n                                            ?\r\n                                            <CircularProgress thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: -6, left: -6}}/>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </div>\r\n\r\n                                {\r\n                                    params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        <div style={{marginTop: isMobile ? 62 : 72}}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                             overlay={\r\n                                                    <Tooltip id={`tooltip-left`}>Delete this draft</Tooltip>\r\n                                                }>\r\n                                                <Fab size={isMobile ? \"medium\" : \"large\"} onClick={this.onDeleteDraftClick} disabled={draftBeingDeleted} style={{ position: 'absolute', zIndex: 1}}>\r\n                                                    <DeleteIcon color=\"error\"/>\r\n                                                </Fab>\r\n                                            </OverlayTrigger>\r\n                                            {\r\n                                                draftBeingDeleted\r\n                                                    ?\r\n                                                    <CircularProgress color=\"secondary\" thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: isMobile ? 56 : 66, left: -6}}/>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </div>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n                        </div>\r\n                        :\r\n                        null\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\n/**\r\n * This component shows the uploading progress\r\n */\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupUserName,\r\n\r\n            open,\r\n            uploadFileMode,\r\n            uploadFileProgress,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            params,\r\n            projectEdited, // pass in if in edit mode\r\n            projectID,\r\n            currentUser,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog maxWidth=\"sm\" fullWidth open={open} {...other}>\r\n                <DialogTitle disableTypography={true}>\r\n                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">\r\n                        {\r\n                            uploadFileMode === UPLOAD_DONE_MODE\r\n                                ?\r\n                                \"Congratulations!\"\r\n                                :\r\n                                \"You are almost done...\"\r\n                        }\r\n                    </Typography>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <Typography variant=\"body1\" align=\"left\">\r\n                            {\r\n                                uploadFileMode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please stay tuned while we are publishing your pitch\"\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Typography>\r\n                        <FlexView column marginBottom={20}>\r\n                            {\r\n                                this.renderUploadFileMode()\r\n                            }\r\n                            {\r\n                                uploadFileMode === UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <ProgressBar style={{marginTop: 25}} striped variant=\"success\" now={uploadFileProgress} label={`${parseInt(uploadFileProgress)}%`}/>\r\n                            }\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                {\r\n                    uploadFileMode !== UPLOAD_DONE_MODE\r\n                        ?\r\n                        null\r\n                        :\r\n                        <DialogActions>\r\n                            <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20} marginRight={20} marginLeft={20}>\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.PROJECT_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":projectID\", projectID)\r\n                                            :\r\n                                            ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectID)\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{ width: \"100%\", marginRight: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}>\r\n                                        {\r\n                                            params.edit && projectEdited\r\n                                                ?\r\n                                                (\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        \"View submitted offer\"\r\n                                                        :\r\n                                                        \"View updated offer\"\r\n                                                )\r\n                                                :\r\n                                                \"View submitted offer\"\r\n                                        }\r\n                                    </Button>\r\n                                </NavLink>\r\n                                <NavLink\r\n                                    to={\r\n                                        currentUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                :\r\n                                                `${ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                            :\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    `${ROUTES.ADMIN.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                    :\r\n                                                    `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                :\r\n                                                \"\"\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{width: \"100%\", marginLeft: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}> Go back to your dashboard</Button>\r\n                                </NavLink>\r\n                            </FlexView>\r\n                        </DialogActions>\r\n                }\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    renderUploadFileMode = () => {\r\n\r\n        const {\r\n            groupUserName,\r\n            uploadFileMode,\r\n            params,\r\n            projectEdited,\r\n            currentUser\r\n        } = this.props;\r\n\r\n        switch (uploadFileMode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading pitch cover</Typography>\r\n                );\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading pitch supporting documents</Typography>\r\n                );\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\"  align=\"left\"\r\n                    >Uploading pitch presentation document</Typography>\r\n                );\r\n            case UPLOAD_REALTIME_DB:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Finalizing</Typography>\r\n                );\r\n            case UPLOAD_DONE_MODE: {\r\n                if (params.edit && projectEdited) {\r\n                    if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your offer has been successfully updated.</Typography>;\r\n                    } else if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                            {\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and publish it.\"\r\n                            }\r\n                        </Typography>;\r\n                    } else {\r\n                        return <FlexView column>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                {\r\n                                    \"Your offer has been uploaded.\\n\" +\r\n                                    \"It will not be published until the group administrator has approved\" +\r\n                                    \" it.\\n\" +\r\n                                    \"You will be notified once approved.\\n\"\r\n                                }\r\n                            </Typography>\r\n                            <br/>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Invite investors to register and view your pitch with the following link:</Typography>\r\n                            <br/>\r\n                            <Box border={1} bgcolor={colors.gray_100} padding=\"6px\">\r\n                                <CustomLink url={Routes.constructSignUpRoute(groupUserName)} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"a\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">{process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}</Typography>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </FlexView>;\r\n                    }\r\n                } else {\r\n                    return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                        {/** Note: This is unnecessary --> Consider removing it. */}\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and make it go live.\"\r\n                                :\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"It will not be published until the group administrator has approved it.\\n\" +\r\n                                \"You will be notified once approved.\"\r\n                        }\r\n                    </Typography>;\r\n                }\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreatePitchPageMain);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    file_drop_zone: {\r\n        padding: 12,\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Image, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Divider, Paper, Typography} from '@material-ui/core';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport LetterAvatar from '../../shared-components/profile/LetterAvatar';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from '../../redux-store/actions/investorSelfCertificationAgreementsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n        // Investor self-certification agreement (for investors only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement())\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass ProfilePageViewOnly extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            userToBeViewed: null,\r\n            userToBeViewedLoaded: false,\r\n\r\n            userToBeViewedInvited: null,\r\n            userToBeViewedInvitedLoaded: false,\r\n\r\n            loadingUserToBeViewed: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.USER_PROFILE : ROUTES.USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            currentUser,\r\n            currentUserLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded,\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        if (!currentUserLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser) {\r\n            if (!userToBeViewedLoaded && !userToBeViewedInvitedLoaded && !loadingUserToBeViewed) {\r\n                this.setState({\r\n                    userToBeViewedLoaded: true,\r\n                    userToBeViewedInvitedLoaded: true,\r\n                    loadingUserToBeViewed: false\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.loadUserToBeViewedProfile();\r\n\r\n        // if user has been set\r\n        if (userToBeViewed) {\r\n            if (userToBeViewed.type === DB_CONST.TYPE_INVESTOR) {\r\n                investorSelfCertificationAgreement_setUser(userToBeViewed.id);\r\n            }\r\n        }\r\n\r\n        // if user id for reference in self-certification agreement has been set\r\n        if (investorSelfCertificationAgreement_userID) {\r\n            // if self-certification agreement has not been loaded\r\n            if (!investorSelfCertificationAgreementLoaded\r\n                && !investorSelfCertificationAgreementBeingLoaded\r\n                && userToBeViewed.type === DB_CONST.TYPE_INVESTOR\r\n            ) {\r\n                loadInvestorSelfCertificationAgreement();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load profile of the user to be viewed\r\n     */\r\n    loadUserToBeViewedProfile = () => {\r\n\r\n        const {\r\n            userToBeViewed,\r\n            loadingUserToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded\r\n        } = this.state;\r\n\r\n        if (!userToBeViewed && !loadingUserToBeViewed && !userToBeViewedLoaded && !userToBeViewedInvitedLoaded) {\r\n            this.setState({\r\n                loadingUserToBeViewed: true,\r\n                userToBeViewedLoaded: false,\r\n                userToBeViewedInvitedLoaded: false\r\n            });\r\n\r\n            // this id can be wither official user id or invited id (pass invited id if the user has not registered)\r\n            // Note: this id can be official id or invited id\r\n            // if the user has registered, this id is an official id. Otherwise, it is the invited id\r\n            const userToBeViewedID = this.props.match.params.userID;\r\n\r\n            // get profile of the user to be viewed\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeViewedID)\r\n                .then(user => {\r\n                    this.setState({\r\n                        userToBeViewed: user,\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                });\r\n\r\n            // get the invited profile of this user\r\n            // first call --> assume this id is an official id\r\n            realtimeDBUtils\r\n                .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_OFFICIAL_ID)\r\n                .then(invitedUser => {\r\n                    this.setState({\r\n                        userToBeViewedInvited: invitedUser[0],\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedInvitedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // no invited user with the official id found\r\n                    // second call --> this id is an invited id\r\n                    realtimeDBUtils\r\n                        .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_INVITED_ID)\r\n                        .then(invitedUser => {\r\n                            this.setState({\r\n                                userToBeViewedInvited: invitedUser[0],\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            // if this error happens --> this id is non-sense\r\n                            this.setState({\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n\r\n            userToBeViewedInvited,\r\n            userToBeViewedInvitedLoaded,\r\n\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !currentUserLoaded\r\n            || !userToBeViewedLoaded\r\n            || !userToBeViewedInvitedLoaded\r\n            || loadingUserToBeViewed\r\n        ) {\r\n            return (\r\n                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !currentUser) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (!userToBeViewed) {\r\n            // user was invited but not yet registered\r\n            if (userToBeViewedInvited) {\r\n                return (\r\n                    <Container fluid style={{padding: 0}}>\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography align=\"center\" variant=\"h5\" style={{marginTop: 35}}>\r\n                                    {`${userToBeViewedInvited.title} ${userToBeViewedInvited.firstName} ${userToBeViewedInvited.lastName} has been invited by ${userToBeViewedInvited.Invitor.displayName} but not yet registered.`}\r\n                                </Typography>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                );\r\n            } else {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0, backgroundColor: colors.gray_100, height: \"100%\", minHeight: \"100vh\", paddingTop: 50, paddingBottom: 100, paddingLeft: 12, paddingRight: 12}}>\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <Paper elevation={1} style={{padding: 15}}>\r\n                            <Row noGutters>\r\n                                <Col xs={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                        {\r\n                                            !userToBeViewed.profilePicture\r\n                                            || (\r\n                                                userToBeViewed.profilePicture\r\n                                                && userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={userToBeViewed.firstName} lastName={userToBeViewed.lastName} width={150} height={150} textVariant=\"h4\"/>\r\n                                                :\r\n                                                <FlexView width={156} height={156}>\r\n                                                    <Image roundedCircle thumbnail src={ userToBeViewed.profilePicture[userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url} style={{width: \"100%\", maxHeight: 156, objectFit: \"contain\"}}/>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col xs={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                    <FlexView column vAlignContent=\"center\" hAlignContent=\"center\" height=\"100%\" marginTop={10} marginBottom={10}>\r\n                                        <Typography align=\"center\" variant=\"h6\">\r\n                                            {`${userToBeViewed.title} ${userToBeViewed.firstName} ${userToBeViewed.lastName}`}\r\n                                        </Typography>\r\n                                        {\r\n                                            this.renderUserStatus(userToBeViewedInvited)\r\n                                        }\r\n                                        <FlexView column marginTop={18} hAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">{`Email: ${userToBeViewed.email}`}</Typography>\r\n                                            {\r\n                                                userToBeViewed.hasOwnProperty('linkedin') && userToBeViewed.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={userToBeViewed.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64, height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Paper>\r\n\r\n                        <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                            {\r\n                                !userToBeViewed.BusinessProfile\r\n                                    ?\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">Business profile has not been uploaded.</Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    :\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15}>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\"> Company name:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.companyName}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Registration number:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.registrationNo}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Directors:&nbsp;&nbsp;\r\n                                                <ul\r\n                                                    style={{marginTop: 8}}>\r\n                                                    {\r\n                                                        userToBeViewed.BusinessProfile.directors.map((director, index) => (\r\n                                                            <li key={index}>\r\n                                                                {director}\r\n                                                            </li>\r\n                                                        ))\r\n                                                    }\r\n                                                </ul>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Business sector:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.sector}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Registered office:&nbsp;&nbsp;\r\n                                                <br/>\r\n                                                <br/>\r\n                                                {userToBeViewed.BusinessProfile.registeredOffice.address1.toUpperCase()}\r\n                                                <br/>\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.registeredOffice.address2 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.registeredOffice.address2.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.registeredOffice.address3 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.registeredOffice.address3.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {userToBeViewed.BusinessProfile.registeredOffice.townCity.toUpperCase()}, {userToBeViewed.BusinessProfile.registeredOffice.postcode.toUpperCase()}\r\n                                                <br/>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Trading address:&nbsp;&nbsp;\r\n                                                <br/>\r\n                                                <br/>\r\n                                                {userToBeViewed.BusinessProfile.tradingAddress.address1.toUpperCase()}\r\n                                                <br/>\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.tradingAddress.address2 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.tradingAddress.address2.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.tradingAddress.address3 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.tradingAddress.address3.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {userToBeViewed.BusinessProfile.tradingAddress.townCity.toUpperCase()}, {userToBeViewed.BusinessProfile.tradingAddress.postcode.toUpperCase()}\r\n                                                <br/>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Company Website:&nbsp;&nbsp;\r\n                                                <a href={userToBeViewed.BusinessProfile.companyWebsite} rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                                    <b>{userToBeViewed.BusinessProfile.companyWebsite}</b>\r\n                                                </a>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <FlexView column>\r\n                                                <Typography variant=\"subtitle1\" align=\"left\">Introduction video\r\n                                                </Typography>\r\n                                                <FlexView marginTop={20} marginBottom={20} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                    {\r\n                                                        !userToBeViewed.BusinessProfile.video\r\n                                                        || (\r\n                                                            userToBeViewed.BusinessProfile.video\r\n                                                            && userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed')) === -1\r\n                                                        )\r\n                                                            ?\r\n                                                            <Typography align=\"center\" variant=\"subtitle1\" color=\"textSecondary\">No introduction video available.</Typography>\r\n                                                            :\r\n                                                            <ReactPlayer\r\n                                                                url={\r\n                                                                    userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].url\r\n                                                                }\r\n                                                                playsinline\r\n                                                                width=\"100%\"\r\n                                                                height={userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].storageID === \"\" ? 360 : \"auto\"}\r\n                                                                playing={false}\r\n                                                                controls={true}/>\r\n                                                    }\r\n                                                </FlexView>\r\n                                                <Divider className={css(styles.divider_style)}/>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                            }\r\n                        </Paper>\r\n\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && userToBeViewed.type === DB_CONST.TYPE_INVESTOR\r\n                                ?\r\n                                <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Self-certification agreement</Typography>\r\n                                        <FlexView column marginTop={25} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            {\r\n                                                !investorSelfCertificationAgreement\r\n                                                    ?\r\n                                                    <Typography align=\"center\" variant=\"body1\">This investor has not completed their self certification.</Typography>\r\n                                                    :\r\n                                                    <Typography align=\"center\" variant=\"body1\"> This investor has agreed to the statement of <b>{investorSelfCertificationAgreement.type === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT ? \"High net worth investor \" : \"Self-certified sophisticated investor \"}</b> on {utils.dateInReadableFormat(investorSelfCertificationAgreement.agreedDate)}.</Typography>\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Paper>\r\n                                :\r\n                                null\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the current status of the to-be-viewed user's profile\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderUserStatus = invitedUser => {\r\n        let statusMessage = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        if (invitedUser.status) {\r\n            if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                statusMessage.msg = \"Official Issuer of Invest West\";\r\n                statusMessage.color = \"primary\";\r\n            } else {\r\n                statusMessage.msg = \"Official Investor of Invest West\";\r\n                statusMessage.color = \"primary\";\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color={statusMessage.color}>{statusMessage.msg}</Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageViewOnly);\r\n\r\nconst styles = StyleSheet.create({\r\n    divider_style: {\r\n        marginTop: 12,\r\n        marginBottom: 12\r\n    }\r\n});","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from '@material-ui/core';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPledgeVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl\r\n                fullWidth\r\n            >\r\n                <FormHelperText\r\n                    className={css(sharedStyles.black_text)}\r\n                    style={{\r\n                        marginBottom: 6\r\n                    }}\r\n                >\r\n                    Select pledge visibility\r\n                </FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                groupProperties\r\n                                    ?\r\n                                    groupProperties.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput\r\n                            labelWidth={0}\r\n                            name=\"projectVisibilitySetting\"\r\n                        />\r\n                    }\r\n                >\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PUBLIC}\r\n                    >\r\n                        {`Public (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full pledge will be visible to all Invest West users)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED}\r\n                    >\r\n                        {`Restricted (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this pledge will be visible to all Invest West users. Only members of your group will see the full pledge)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PRIVATE}\r\n                    >\r\n                        {`Private (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        } \r\n                        Only members of this group will see this pledge)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPledgeVisibility);\r\n\r\n","import {\r\n    CREATE_PLEDGE_STATUS_INVALID_DATE,\r\n    CREATE_PLEDGE_STATUS_INVALID_FUND,\r\n    CREATE_PLEDGE_STATUS_MISSING_FIELDS,\r\n    CREATE_PLEDGE_STATUS_VALID,\r\n} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nexport const TOGGLE_CREATE_PLEDGE_DIALOG = 'TOGGLE_CREATE_PLEDGE_DIALOG';\r\nexport const toggleCreatePledgeDialog = () => {\r\n    return {\r\n        type: TOGGLE_CREATE_PLEDGE_DIALOG\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_SET_PROJECT = 'CREATE_PLEDGE_DIALOG_SET_PROJECT';\r\nexport const setProject = (project) => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_SET_PROJECT,\r\n        project: project\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED';\r\nexport const handleInputChanged = (event) => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED';\r\nexport const handleDateChanged = date => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED,\r\n        date\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED = 'CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED';\r\nexport const createPledge = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            project,\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes\r\n        } = getState().manageCreatePledgeDialog;\r\n\r\n        // when a group admin creates a pledge, they will have the option to set the project visibility again\r\n        const projectVisibilitySetting = getState().manageSelectProjectVisibility.projectVisibilitySetting;\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // check if all the fields in creating primary offer dialog have been filled\r\n        if (expiredDate === null) {\r\n            dispatch({\r\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                status: CREATE_PLEDGE_STATUS_MISSING_FIELDS\r\n            });\r\n        } else {\r\n            if (isNaN(expiredDate)\r\n                ||\r\n                (expiredDate && (expiredDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                dispatch({\r\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                    status: CREATE_PLEDGE_STATUS_INVALID_DATE\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (postMoneyValuation.trim().length > 0\r\n                && !utils.getNumberFromInputString(postMoneyValuation)\r\n            ) {\r\n                dispatch({\r\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                    status: CREATE_PLEDGE_STATUS_INVALID_FUND\r\n                });\r\n                return;\r\n            }\r\n\r\n            dispatch({\r\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                status: CREATE_PLEDGE_STATUS_VALID\r\n            });\r\n\r\n            const primaryOfferObj = {\r\n                status: DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING,\r\n                postMoneyValuation:\r\n                    postMoneyValuation.trim().length === 0\r\n                        ?\r\n                        null\r\n                        :\r\n                        utils.getNumberFromInputString(postMoneyValuation)\r\n                ,\r\n                expiredDate: expiredDate,\r\n                extraNotes: extraNotes.trim().length === 0 ? null : extraNotes\r\n            };\r\n\r\n            let shouldSendNotificationToIssuer = false;\r\n            // if the issuerID returns an issuer and the offer was created by a group admin\r\n            // and the group admin is creating a pledge for this offer\r\n            // then we will notify the issuer that their offer has gone to the pledge phase and is ready to\r\n            // receive pledges from investor BECAUSE the pledge will not be double checked, it will go straight to\r\n            // live when created by a group admin.\r\n            if (project.issuer.type === DB_CONST.TYPE_ISSUER\r\n                && project.hasOwnProperty('createdByGroupAdmin')\r\n                && currentUser.type === DB_CONST.TYPE_ADMIN\r\n            ) {\r\n                shouldSendNotificationToIssuer = true;\r\n            }\r\n\r\n            let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n            projectBeforeUpdating.issuer = null;\r\n            projectBeforeUpdating.group = null;\r\n            projectBeforeUpdating.pledges = null;\r\n\r\n            let updatedProject = JSON.parse(JSON.stringify(project));\r\n            updatedProject.issuer = null;\r\n            updatedProject.group = null;\r\n            updatedProject.pledges = null;\r\n\r\n            updatedProject.status =\r\n                // if an admin is creating the pledge,\r\n                // then let it go live directly\r\n                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                    ?\r\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                    :\r\n                    // if an issuer is creating the pledge,\r\n                    // then let the admin check first\r\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n            updatedProject.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED;\r\n            updatedProject.PrimaryOffer = primaryOfferObj;\r\n            // if projectVisibilitySetting = -1, then go with the previous value of visibility\r\n            updatedProject.visibility =\r\n                projectVisibilitySetting === -1 ? projectBeforeUpdating.visibility : projectVisibilitySetting;\r\n\r\n            // create primary offer node in the project\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(updatedProject)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_PLEDGE_DIALOG\r\n                    });\r\n\r\n                    // track issuer's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE.replace(\"%project%\", updatedProject.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                            value: {\r\n                                before: projectBeforeUpdating,\r\n                                after: updatedProject\r\n                            }\r\n                        });\r\n\r\n                    if (shouldSendNotificationToIssuer) {\r\n                        realtimeDBUtils\r\n                            .sendNotification({\r\n                                title: project.projectName,\r\n                                message: \"Congratulations! Your investment opportunity has been published. Investors can now pledge.\",\r\n                                userID: project.issuerID,\r\n                                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    TextField,\r\n    Toolbar,\r\n    Typography,\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {KeyboardDatePicker} from '@material-ui/pickers';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\n\r\nimport SelectPledgeVisibility from '../select-pledge-visibility/SelectPledgeVisibility';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles, {SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as creatPledgeDialogActions from '../../redux-store/actions/createPledgeDialogActions';\r\n\r\nexport const CREATE_PLEDGE_STATUS_NONE = 0;\r\nexport const CREATE_PLEDGE_STATUS_VALID = 1;\r\nexport const CREATE_PLEDGE_STATUS_MISSING_FIELDS = 2;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_FUND = 3;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_DATE = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentUser: state.auth.user,\r\n\r\n        open: state.manageCreatePledgeDialog.open,\r\n        project: state.manageCreatePledgeDialog.project,\r\n        postMoneyValuation: state.manageCreatePledgeDialog.postMoneyValuation,\r\n        expiredDate: state.manageCreatePledgeDialog.expiredDate,\r\n        extraNotes: state.manageCreatePledgeDialog.extraNotes,\r\n        createStatus: state.manageCreatePledgeDialog.createStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreatePledgeDialog: () => dispatch(creatPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        handleInputChanged: (event) => dispatch(creatPledgeDialogActions.handleInputChanged(event)),\r\n        handleDateChanged: (date) => dispatch(creatPledgeDialogActions.handleDateChanged(date)),\r\n        createPledge: () => dispatch(creatPledgeDialogActions.createPledge())\r\n    }\r\n};\r\n\r\nclass CreatePledgeDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            currentUser,\r\n\r\n            project,\r\n\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes,\r\n            createStatus,\r\n\r\n            toggleCreatePledgeDialog,\r\n            handleInputChanged,\r\n            handleDateChanged,\r\n            createPledge,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                fullScreen\r\n                onClose={toggleCreatePledgeDialog}\r\n                TransitionComponent={\r\n                    SlideTransitionUp\r\n                }\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <AppBar\r\n                        elevation={0}\r\n                    >\r\n                        <Toolbar>\r\n                            <IconButton\r\n                                color=\"inherit\"\r\n                                onClick={toggleCreatePledgeDialog}\r\n                                aria-label=\"Close\"\r\n                            >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                            <FlexView\r\n                                marginLeft={10}\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    color=\"inherit\"\r\n                                >\r\n                                    Create pledge\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Container\r\n                        fluid\r\n                        style={{\r\n                            marginTop: 40\r\n                        }}\r\n                    >\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={{span: 8, offset: 2}}\r\n                                lg={{span: 6, offset: 3}}\r\n                            >\r\n\r\n                                {/** Get the project name from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Project name\"\r\n                                    value={!project ? \"\" : project.projectName}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the Total raise from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Total fund needs raising (£)\"\r\n                                    value={!project ? \"\" : project.Pitch.totalRaise}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raised amount from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund already raised to date (£)\"\r\n                                    value={!project ? \"\" : project.Pitch.amountRaised}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raise required from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund required (£)\"\r\n                                    value={!project ? \"\" : project.Pitch.fundRequired}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the investors committed from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Investors committed\"\r\n                                    value={!project ? \"\" : (project.Pitch.investorsCommitted ? project.Pitch.investorsCommitted : \"None\")}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the post money valuation from the pitch and put here */}\r\n                                <TextField\r\n                                    label=\"Post money valuation (£)\"\r\n                                    name=\"postMoneyValuation\"\r\n                                    value={postMoneyValuation}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n\r\n                                <FlexView\r\n                                    marginTop={15}\r\n                                    width=\"100%\"\r\n                                >\r\n                                    <KeyboardDatePicker\r\n                                        autoOk\r\n                                        variant=\"dialog\"\r\n                                        inputVariant=\"outlined\"\r\n                                        label=\"Choose expired date\"\r\n                                        format=\"dd/MM/yyyy\"\r\n                                        minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                        value={expiredDate}\r\n                                        InputAdornmentProps={{position: \"start\"}}\r\n                                        onChange={handleDateChanged}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Some notes if the Issuer wants to add */}\r\n                                <TextField\r\n                                    label=\"Your extra notes\"\r\n                                    value={extraNotes}\r\n                                    name=\"extraNotes\"\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n                            </Col>\r\n\r\n                            {\r\n                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={{span: 8, offset: 2}}\r\n                                        lg={{span: 6, offset: 3}}\r\n                                        style={{\r\n                                            marginTop: 10\r\n                                        }}\r\n                                    >\r\n                                        <SelectPledgeVisibility/>\r\n                                    </Col>\r\n                            }\r\n\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={{span: 8, offset: 2}}\r\n                                lg={{span: 6, offset: 3}}\r\n                                style={{\r\n                                    marginTop: 40,\r\n                                    marginBottom: 50\r\n                                }}\r\n                            >\r\n                                <FlexView\r\n                                    hAlignContent=\"center\"\r\n                                    marginBottom={30}\r\n                                >\r\n                                    {\r\n                                        this.renderCreatePledgeError()\r\n                                    }\r\n                                </FlexView>\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <Button\r\n                                        size=\"large\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={createPledge}\r\n                                    >\r\n                                        Create pledge\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render error (if has) when the user clicks on the Create button\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderCreatePledgeError = () => {\r\n        const {\r\n            createStatus\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (createStatus) {\r\n            case CREATE_PLEDGE_STATUS_NONE:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_VALID:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_MISSING_FIELDS:\r\n                msg = \"Please fill in all the fields.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_FUND:\r\n                msg = \"Please enter a valid fund.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography\r\n                align=\"center\"\r\n                variant=\"subtitle1\"\r\n                color=\"error\"\r\n            >\r\n                {msg}\r\n            </Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.forwardRef(\r\n    (props, ref) => <CreatePledgeDialog {...props} forwardedRef={ref}/>));","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const MANAGE_PLEDGES_TABLE_SET_PROJECT = 'MANAGE_PLEDGES_TABLE_SET_PROJECT';\r\nexport const setProject = project => {\r\n    return (dispatch, getState) => {\r\n        const prevProject = getState().managePledgesTable.project;\r\n        // if the newly set project is actually the same as the one set before\r\n        // do nothing\r\n        if (prevProject && prevProject.id === project.id) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_SET_PROJECT,\r\n            project\r\n        });\r\n    };\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_LOADING_PLEDGES';\r\nexport const MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES';\r\nexport const loadPledges = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            project\r\n        } = getState().managePledgesTable;\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_LOADING_PLEDGES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n            .then(pledges => {\r\n                Promise.all(pledges.map(pledge => {\r\n                    return new Promise((resolve, reject) => {\r\n                        realtimeDBUtils\r\n                            .loadGroupsUserIsIn(pledge.investorID)\r\n                            .then(groupsInvestorIsIn => {\r\n                                pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n                                return resolve(pledges);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    dispatch({\r\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\r\n                        pledges\r\n                    });\r\n                }).catch(error => {\r\n                    dispatch({\r\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\r\n                        pledges: [],\r\n                        error\r\n                    });\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().managePledgesTable.inSearchMode;\r\n        const searchText = getState().managePledgesTable.searchText;\r\n        const pledges = getState().managePledgesTable.pledges;\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: false,\r\n                matchedPledges: []\r\n            });\r\n        } else {\r\n            let matchedPledges = pledges.filter(\r\n                pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n                    || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n            );\r\n            dispatch({\r\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: true,\r\n                matchedPledges\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: MANAGE_PLEDGES_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_INPUT_CHANGED = 'MANAGE_PLEDGES_TABLE_INPUT_CHANGED';\r\nexport const handlePledgesTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const pledges = getState().managePledgesTable.pledges;\r\n\r\n        const searchText = event.target.value;\r\n        let matchedPledges = pledges.filter(\r\n            pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n                || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedPledges\r\n        });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet pledgesListener = null;\r\n\r\nexport const MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED = 'MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED';\r\nexport const startListeningForPledgesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!pledgesListener) {\r\n            const project = getState().managePledgesTable.project;\r\n\r\n            pledgesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.PLEDGES_CHILD)\r\n                .orderByChild('projectID')\r\n                .equalTo(project.id);\r\n\r\n            pledgesListener\r\n                .on('child_added', snapshot => {\r\n                    let pledge = snapshot.val();\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                    if (pledgeIndex === -1) {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(pledge.investorID)\r\n                            .then(investor => {\r\n                                pledge.investor = investor;\r\n\r\n                                realtimeDBUtils\r\n                                    .loadGroupsUserIsIn(pledge.investorID)\r\n                                    .then(groupsInvestorIsIn => {\r\n                                        pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n\r\n                                        dispatch({\r\n                                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                                            pledges: [...pledges, pledge]\r\n                                        });\r\n                                    });\r\n                            });\r\n                    }\r\n                });\r\n\r\n            pledgesListener\r\n                .on('child_changed', snapshot => {\r\n                    let pledge = snapshot.val();\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                    // pledge is in the local list\r\n                    if (pledgeIndex !== -1) {\r\n                        let updatedPledges = [...pledges];\r\n\r\n                        if (pledge.amount !== '') {\r\n                            pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                            pledge.groupsInvestorIsIn = updatedPledges[pledgeIndex].groupsInvestorIsIn;\r\n                            updatedPledges[pledgeIndex] = pledge;\r\n                        }\r\n                        else {\r\n                            updatedPledges.splice(pledgeIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                            pledges: [...updatedPledges]\r\n                        });\r\n                    }\r\n                    // pledge is not in the local list\r\n                    else {\r\n                        if (pledge.amount !== '') {\r\n                            realtimeDBUtils\r\n                                .getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n\r\n                                    realtimeDBUtils\r\n                                        .loadGroupsUserIsIn(pledge.investorID)\r\n                                        .then(groupsInvestorIsIn => {\r\n                                            pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n\r\n                                            dispatch({\r\n                                                type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                                                pledges: [...pledges, pledge]\r\n                                            });\r\n                                        });\r\n                                });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            pledgesListener\r\n                .on('child_removed', snapshot => {\r\n                    let pledgeRemovedID = snapshot.key;\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                    if (pledgeIndex !== -1) {\r\n                        let updatedPledges = pledges;\r\n                        updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                        dispatch({\r\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                            pledges: updatedPledges\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForPledgesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (pledgesListener) {\r\n            pledgesListener.off('child_added');\r\n            pledgesListener.off('child_changed');\r\n            pledgesListener.off('child_removed');\r\n            pledgesListener = null;\r\n        }\r\n    }\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport EmailRepository, {\r\n    ClientEmailTypes,\r\n    ContactPitchOwnerEmailData\r\n} from \"../../../../api/repositories/EmailRepository\";\r\nimport User from \"../../../../models/user\";\r\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ContactPitchOwnerDialogEvents {\r\n    ToggleContactDialog = \"ContactPitchOwnerDialogEvents.ToggleContactDialog\",\r\n    SendingContactEmail = \"ContactPitchOwnerDialogEvents.SendingContactEmail\",\r\n    CompleteSendingContactEmail = \"ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\"\r\n}\r\n\r\nexport interface ContactPitchOwnerDialogAction extends Action {\r\n\r\n}\r\n\r\nexport interface ToggleContactDialogAction extends ContactPitchOwnerDialogAction {\r\n    projectName: string | null;\r\n    projectOwnerEmail: string | null;\r\n}\r\n\r\nexport interface CompleteSendingContactEmailAction extends ContactPitchOwnerDialogAction {\r\n    error?: string;\r\n}\r\n\r\nexport const toggleContactPitchOwnerDialog: ActionCreator<any> = (projectName?: string, projectOwnerEmail?: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ToggleContactDialogAction = {\r\n            type: ContactPitchOwnerDialogEvents.ToggleContactDialog,\r\n            projectName: projectName ?? null,\r\n            projectOwnerEmail: projectOwnerEmail ?? null\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const sendContactEmail: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            projectName,\r\n            projectOwnerEmail,\r\n            sendingContactEmail\r\n        } = getState().ContactPitchOwnerDialogLocalState;\r\n\r\n        if (sendingContactEmail) {\r\n            return;\r\n        }\r\n\r\n        if (!projectName || !projectOwnerEmail) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            currentUser\r\n        } = getState().AuthenticationState;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: ContactPitchOwnerDialogEvents.SendingContactEmail\r\n        });\r\n\r\n        const completeAction: CompleteSendingContactEmailAction = {\r\n            type: ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\r\n        };\r\n\r\n        try {\r\n            const emailInfo: ContactPitchOwnerEmailData = {\r\n                receiver: projectOwnerEmail,\r\n                sender: currentUser.email,\r\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\r\n                projectName: projectName\r\n            };\r\n\r\n            await new EmailRepository().sendEmail({\r\n                emailType: ClientEmailTypes.ContactPitchOwner,\r\n                emailInfo: emailInfo\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {DocumentsDownloadState} from \"./DocumentsDownloadReducer\";\r\nimport {onAcceptRiskWarningClick, onCancelRiskWarningClick, onDocumentClick} from \"./DocumentsDownloadActions\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface DocumentsDownloadProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    documents: PitchDocument[];\r\n    shouldShowRiskWarningOnDownload?: boolean;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => any;\r\n    onAcceptRiskWarningClick: () => any;\r\n    onCancelRiskWarningClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        DocumentsDownloadLocalState: state.DocumentsDownloadLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => dispatch(onDocumentClick(document, shouldShowRiskWarning)),\r\n        onAcceptRiskWarningClick: () => dispatch(onAcceptRiskWarningClick()),\r\n        onCancelRiskWarningClick: () => dispatch(onCancelRiskWarningClick())\r\n    }\r\n}\r\n\r\nclass DocumentsDownload extends Component<DocumentsDownloadProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            documents,\r\n            shouldShowRiskWarningOnDownload,\r\n            DocumentsDownloadLocalState,\r\n            onDocumentClick,\r\n            onAcceptRiskWarningClick,\r\n            onCancelRiskWarningClick\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Invest West\"\r\n            );\r\n\r\n        let riskWarningTextSplits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        return <Box\r\n            marginTop=\"20px\"\r\n        >\r\n            <List>\r\n                {\r\n                    documents.map((document, index) => (\r\n                        document.removed !== undefined && document.removed\r\n                            ? null\r\n                            : <ListItem\r\n                                key={index}\r\n                                button\r\n                                onClick={() => onDocumentClick(document, shouldShowRiskWarningOnDownload ?? false)}\r\n                            >\r\n                                <img\r\n                                    alt=\"Document image\"\r\n                                    src={require(\"../../img/document_icon.png\").default}\r\n                                    width={48}\r\n                                    height={48}\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"row\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body2\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {document.fileName}\r\n                                    </Typography>\r\n                                    <Typography\r\n                                        variant=\"body2\"\r\n                                        color=\"textSecondary\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {document.readableSize}\r\n                                    </Typography>\r\n                                </Box>\r\n                            </ListItem>\r\n                    ))\r\n                }\r\n            </List>\r\n\r\n            <Dialog\r\n                open={DocumentsDownloadLocalState.openRiskWarningDialog}\r\n                onClose={() => onCancelRiskWarningClick()}\r\n            >\r\n                <DialogTitle>\r\n                    Accept Risk Warning\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Box\r\n                        marginTop=\"18px\"\r\n                        whiteSpace=\"pre-line\"\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"justify\"\r\n                        >\r\n                            {riskWarningTextSplits[0]}\r\n                            <CustomLink\r\n                                url={Routes.nonGroupRiskWarning}\r\n                                target=\"_blank\"\r\n                                color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                                activeColor=\"none\"\r\n                                activeUnderline={true}\r\n                                component=\"nav-link\"\r\n                                childComponent={\r\n                                    riskWarningTextSplits[1]\r\n                                }\r\n                            />\r\n                            {riskWarningTextSplits[2]}\r\n                        </Typography>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDirection=\"row\"\r\n                        marginRight=\"4px\"\r\n                        marginBottom=\"4px\"\r\n                    >\r\n                        <Button\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onCancelRiskWarningClick()}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Box\r\n                            width=\"14px\"\r\n                        />\r\n                        <Button\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onAcceptRiskWarningClick()}\r\n                        >\r\n                            Accept\r\n                        </Button>\r\n                    </Box>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsDownload);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport OfferRepository, {FetchProjectsOrderByOptions} from \"../../api/repositories/OfferRepository\";\r\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\r\n\r\nexport enum GroupDetailsEvents {\r\n    LoadingData = \"GroupDetailsEvents.LoadData\",\r\n    CompleteLoadingData = \"GroupDetailsEvents.CompleteLoadingData\",\r\n    SendingAccessRequest = \"GroupDetailsEvents.SendingAccessRequest\",\r\n    CompleteSendingAccessRequest = \"GroupDetailsEvents.CompleteSendingAccessRequest\",\r\n    RemovingAccessRequest = \"GroupDetailsEvents.RemovingAccessRequest\",\r\n    CompleteRemovingAccessRequest = \"GroupDetailsEvents.CompleteRemovingAccessRequest\"\r\n}\r\n\r\nexport interface GroupDetailsAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteLoadingDataAction extends GroupDetailsAction {\r\n    group?: GroupProperties;\r\n    members?: InvitedUserWithProfile[];\r\n    offers?: ProjectInstance[];\r\n    accessRequestInstances?: AccessRequestInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface CompleteSendingAccessRequestAction extends GroupDetailsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport interface CompleteRemovingAccessRequestAction extends GroupDetailsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport const loadData: ActionCreator<any> = (groupUserName: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            accessRequestsInstances\r\n        } = getState().GroupDetailsLocalState;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.LoadingData\r\n        });\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        const completeAction: CompleteLoadingDataAction = {\r\n            type: GroupDetailsEvents.CompleteLoadingData\r\n        }\r\n\r\n        if (!currentUser) {\r\n            completeAction.error = \"Unauthenticated user.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (groupUserName === undefined) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const groupResponse = await new GroupRepository().getGroup(groupUserName);\r\n            const group: GroupProperties = groupResponse.data;\r\n\r\n            const membersResponse = await new GroupRepository().fetchGroupMembers(group.anid);\r\n            const members: InvitedUserWithProfile[] = membersResponse.data;\r\n\r\n            const offersResponse = await new OfferRepository().fetchOffers({\r\n                phase: \"all\",\r\n                group: group.anid,\r\n                orderBy: FetchProjectsOrderByOptions.Group\r\n            });\r\n            const offers: ProjectInstance[] = offersResponse.data;\r\n\r\n            const admin: Admin | null = isAdmin(currentUser);\r\n            if (!admin || (admin && !admin.superAdmin)) {\r\n                // user is an issuer, investor, or group admin\r\n                // and access requests have not been fetched\r\n                if (!accessRequestsInstances) {\r\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\r\n                        user: currentUser.id,\r\n                        orderBy: \"user\"\r\n                    });\r\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\r\n                }\r\n            }\r\n\r\n            completeAction.group = group;\r\n            completeAction.members = members;\r\n            completeAction.offers = offers;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const sendAccessRequest: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const group = getState().GroupDetailsLocalState.group;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.SendingAccessRequest\r\n        });\r\n\r\n        const completeAction: CompleteSendingAccessRequestAction = {\r\n            type: GroupDetailsEvents.CompleteSendingAccessRequest\r\n        };\r\n\r\n        if (!group) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, group.anid);\r\n            const accessRequestInstance: AccessRequestInstance = response.data;\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (currentAccessRequestInstances !== undefined) {\r\n                completeAction.updatedAccessRequestInstances = [\r\n                    ...currentAccessRequestInstances,\r\n                    accessRequestInstance\r\n                ];\r\n            } else {\r\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\r\n            }\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeAccessRequest: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const group = getState().GroupDetailsLocalState.group;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.RemovingAccessRequest\r\n        });\r\n\r\n        const completeAction: CompleteRemovingAccessRequestAction = {\r\n            type: GroupDetailsEvents.CompleteRemovingAccessRequest\r\n        };\r\n\r\n        if (!group) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().GroupDetailsLocalState.accessRequestsInstances;\r\n            if (!currentAccessRequestInstances) {\r\n                return dispatch(completeAction);\r\n            }\r\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\r\n                accessRequestInstance => accessRequestInstance.group.anid === group.anid && accessRequestInstance.user.id === currentUser.id);\r\n            if (accessRequestIndex === -1) {\r\n                return dispatch(completeAction);\r\n            }\r\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\r\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\r\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\r\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\r\n\r\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteSendingContactEmailAction,\r\n    ContactPitchOwnerDialogAction,\r\n    ContactPitchOwnerDialogEvents,\r\n    ToggleContactDialogAction\r\n} from \"./ContactPitchOwnerDialogActions\";\r\nimport Error from \"../../../../models/error\";\r\n\r\nexport interface ContactPitchOwnerDialogState {\r\n    projectName: string | null;\r\n    projectOwnerEmail: string | null;\r\n    contactDialogOpen: boolean;\r\n    sendingContactEmail: boolean;\r\n    errorSendingContactEmail?: Error;\r\n}\r\n\r\nconst initialState: ContactPitchOwnerDialogState = {\r\n    projectName: null,\r\n    projectOwnerEmail: null,\r\n    contactDialogOpen: false,\r\n    sendingContactEmail: false\r\n}\r\n\r\nexport const isSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\r\n    return state.sendingContactEmail;\r\n}\r\n\r\nexport const hasErrorSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\r\n    return !state.sendingContactEmail && state.errorSendingContactEmail !== undefined;\r\n}\r\n\r\nconst contactPitchOwnerDialogReducer = (state = initialState, action: ContactPitchOwnerDialogAction) => {\r\n    switch (action.type) {\r\n        case ContactPitchOwnerDialogEvents.ToggleContactDialog:\r\n            const toggleContactDialogAction: ToggleContactDialogAction = action as ToggleContactDialogAction;\r\n            return {\r\n                ...state,\r\n                contactDialogOpen: !state.contactDialogOpen,\r\n                projectName: toggleContactDialogAction.projectName,\r\n                projectOwnerEmail: toggleContactDialogAction.projectOwnerEmail\r\n            }\r\n        case ContactPitchOwnerDialogEvents.SendingContactEmail:\r\n            return {\r\n                ...state,\r\n                sendingContactEmail: true,\r\n                errorSendingContactEmail: undefined\r\n            }\r\n        case ContactPitchOwnerDialogEvents.CompleteSendingContactEmail:\r\n            const completeSendingContactEmailFunction: CompleteSendingContactEmailAction = action as CompleteSendingContactEmailAction;\r\n            return {\r\n                ...state,\r\n                contactDialogOpen: false,\r\n                sendingContactEmail: false,\r\n                errorSendingContactEmail: completeSendingContactEmailFunction.error !== undefined\r\n                    ? {detail: completeSendingContactEmailFunction.error}\r\n                    : state.errorSendingContactEmail\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default contactPitchOwnerDialogReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ContactPitchOwnerDialogState, isSendingContactEmail} from \"./ContactPitchOwnerDialogReducer\";\r\nimport {AnyAction} from \"redux\";\r\nimport {sendContactEmail, toggleContactPitchOwnerDialog} from \"./ContactPitchOwnerDialogActions\";\r\n\r\ninterface ContactPitchOwnerDialogProps {\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n    toggleContactDialog: () => any;\r\n    sendContactEmail: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ContactPitchOwnerDialogLocalState: state.ContactPitchOwnerDialogLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactDialog: () => dispatch(toggleContactPitchOwnerDialog()),\r\n        sendContactEmail: () => dispatch(sendContactEmail())\r\n    }\r\n}\r\n\r\nclass ContactPitchOwnerDialog extends Component<ContactPitchOwnerDialogProps, any> {\r\n    render() {\r\n        const {\r\n            ContactPitchOwnerDialogLocalState,\r\n            toggleContactDialog,\r\n            sendContactEmail\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            open={ContactPitchOwnerDialogLocalState.contactDialogOpen}\r\n            onClose={() => toggleContactDialog()}\r\n        >\r\n            <DialogContent>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Typography variant=\"body1\" align=\"left\">{`We will let the pitch owner know that you would like to find out more.`}</Typography>\r\n                    <Box height=\"20px\"/>\r\n                    <Typography variant=\"body1\" align=\"left\">{`Are you happy for us to share your email address?`}</Typography>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    isSendingContactEmail(ContactPitchOwnerDialogLocalState)\r\n                        ? null\r\n                        : <Button\r\n                            onClick={() => toggleContactDialog()}\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                        >Cancel</Button>\r\n                }\r\n                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={isSendingContactEmail(ContactPitchOwnerDialogLocalState)} onClick={() => sendContactEmail()}>\r\n                    {\r\n                        isSendingContactEmail(ContactPitchOwnerDialogLocalState)\r\n                            ? `Sending email to ${ContactPitchOwnerDialogLocalState.projectOwnerEmail} ...`\r\n                            : \"Yes\"\r\n                    }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactPitchOwnerDialog);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle,\r\n    Divider,\r\n    InputBase,\r\n    Paper,\r\n    Step,\r\n    StepButton,\r\n    StepContent,\r\n    StepLabel,\r\n    Stepper,\r\n    Tab,\r\n    Tabs,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PageNotFound from \"../../shared-components/page-not-found/PageNotFound\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport CreatePledgeDialog from \"../../shared-components/create-pledge-dialog/CreatePledgeDialog\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as pledgesTableActions from \"../../redux-store/actions/pledgesTableActions\";\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from \"../../redux-store/actions/investorSelfCertificationAgreementsActions\";\r\nimport * as createPledgeDialogActions from \"../../redux-store/actions/createPledgeDialogActions\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\nimport \"./ProjectDetails.scss\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport {TYPE_INVESTOR} from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectFailed,\r\n    isProjectInLivePitchPhase,\r\n    isProjectInLivePledgePhase,\r\n    isProjectLive,\r\n    isProjectOwner,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectRejectedToGoLive,\r\n    isProjectSuccessful,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingForPledgeToBeChecked,\r\n    isProjectWaitingForPledgeToBeCreated,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport DocumentsDownload from \"../../shared-components/documents-download/DocumentsDownload\";\r\nimport RiskWarning from \"../../shared-components/risk-warning/RiskWarning\";\r\nimport {toggleContactPitchOwnerDialog} from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions\";\r\nimport ContactPitchOwnerDialog from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialog\";\r\nimport FeedbackSnackbarNew from \"../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {hasAuthenticationError, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\n\r\nconst ADMIN_OFFER_STATES_PUBLISH_PITCH = 0;\r\nconst ADMIN_OFFER_STATES_MOVE_TO_PLEDGE = 1;\r\nconst ADMIN_OFFER_STATES_PUBLISH_PLEDGE = 2;\r\n\r\nconst MAIN_BODY_ADMIN_OFFER_STATES = 0;\r\nconst MAIN_BODY_CAMPAIGN = 1;\r\nconst MAIN_BODY_DOCUMENTS = 2;\r\nconst MAIN_BODY_COMMENTS = 3;\r\nconst MAIN_BODY_NOTES = 4;\r\nconst MAIN_BODY_INVESTORS_PLEDGED = 5; // only available for issuer and admin\r\n\r\nconst MAX_COVER_HEIGHT_IN_MOBILE_MODE = 240;\r\nconst MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE = 550;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        userBeingLoaded: state.auth.userBeingLoaded,\r\n        groupsUserIsIn: state.auth.groupsUserIsIn,\r\n\r\n        // Investor self-certification agreement (for investor only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        pledgesTable_setProject: (project) => dispatch(pledgesTableActions.setProject(project)),\r\n        pledgesTable_stopListeningForPledgesChanged: () => dispatch(pledgesTableActions.stopListeningForPledgesChanged()),\r\n\r\n        createPledgeDialog_toggleDialog: () => dispatch(createPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        createPledgeDialog_setProject: (project) => dispatch(createPledgeDialogActions.setProject(project)),\r\n\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position)),\r\n\r\n        toggleContactPitchOwnerDialog: (projectName, projectOwnerEmail) => dispatch(toggleContactPitchOwnerDialog(projectName, projectOwnerEmail))\r\n    }\r\n};\r\n\r\nclass ProjectDetailsMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.database = firebase.database();\r\n\r\n        // project changed listener\r\n        this.projectListener = null;\r\n        // comments changed listener\r\n        this.commentsListener = null;\r\n        // comments replies changed listener\r\n        this.commentsRepliesListener = null;\r\n        // pledges changed listener\r\n        this.pledgesListener = null;\r\n        // votes changed listener\r\n        this.votesListener = null;\r\n\r\n        this.state = {\r\n            // variables to check if all the data has been loaded or being loaded\r\n            dataLoaded: false,\r\n            dataBeingLoaded: false,\r\n\r\n            investorPledge: null,\r\n            investorPledgeLoaded: false,\r\n\r\n            mainBody: MAIN_BODY_CAMPAIGN,\r\n            adminOfferStatesActiveStep: ADMIN_OFFER_STATES_PUBLISH_PITCH,\r\n\r\n            comments: [],\r\n            commentsLoaded: false,\r\n\r\n            // states for an investor to post a NEW comment\r\n            commentDialogOpen: false,\r\n            commentText: \"\",\r\n            commentSubmitClick: false,\r\n            // ---------------------------------\r\n\r\n            // existing comment of the current investor\r\n            currentComment: null,\r\n            currentCommentText: \"\",\r\n            // -------------------------------------------\r\n\r\n            // available for the issuer/group admins who own the project only\r\n            // allow the owners to reply to the investor's comments\r\n            replyingToComment: null,\r\n            replyText: \"\",\r\n            replyEdited: null,\r\n            // -------------------------------------------\r\n\r\n            // this state is used to capture the change in date when an admin wants to bring\r\n            // an expired pitch back to live\r\n            changedPitchExpiryDate: null,\r\n\r\n            // when an admin wants to send the pitch back to the issuer with some feedback rather than publish it\r\n            addingRejectFeedback: false,\r\n            rejectFeedback: \"\",\r\n            sendingProjectBack: false,\r\n\r\n            // pitch's details\r\n            projectDetail: {\r\n                // the pitch object\r\n                project: null,\r\n                projectLoaded: false,\r\n\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n\r\n                votes: [],\r\n                votesLoaded: false,\r\n\r\n                // the issuer object (the issuer who made this pitch)\r\n                projectIssuer: null,\r\n                projectIssuerLoaded: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty(\"groupUserName\")\r\n            ?\r\n            match.params.groupUserName\r\n            :\r\n            null\r\n        );\r\n        setExpectedAndCurrentPathsForChecking(\r\n            match.params.hasOwnProperty(\"groupUserName\")\r\n                ?\r\n                ROUTES.PROJECT_DETAILS\r\n                :\r\n                ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER, match.path\r\n        );\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n                if (user) {\r\n                    if (!investorSelfCertificationAgreement_userID && user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        investorSelfCertificationAgreement_setUser(user.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if user id for reference in self-certification agreement has been set\r\n            if (investorSelfCertificationAgreement_userID) {\r\n                // if self-certification agreement has not been loaded\r\n                if (!investorSelfCertificationAgreementLoaded\r\n                    && !investorSelfCertificationAgreementBeingLoaded\r\n                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                ) {\r\n                    loadInvestorSelfCertificationAgreement();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n                if (user) {\r\n                    if (!investorSelfCertificationAgreement_userID && user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        investorSelfCertificationAgreement_setUser(user.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if user id for reference in self-certification agreement has been set\r\n            if (investorSelfCertificationAgreement_userID) {\r\n                // if self-certification agreement has not been loaded\r\n                if (!investorSelfCertificationAgreementLoaded\r\n                    && !investorSelfCertificationAgreementBeingLoaded\r\n                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                ) {\r\n                    loadInvestorSelfCertificationAgreement();\r\n                }\r\n            }\r\n\r\n            // attach project changed listener\r\n            if (projectLoaded && project) {\r\n                this.attachProjectChangedListener();\r\n            }\r\n\r\n            this.loadDataWhenUIElementsChange();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            pledgesTable_stopListeningForPledgesChanged\r\n        } = this.props;\r\n\r\n        // detach pitch changed listener\r\n        this.detachProjectChangedListener();\r\n\r\n        // detach listener for votes\r\n        if (this.votesListener) {\r\n            this.votesListener.off(\"child_added\");\r\n            this.votesListener.off(\"child_changed\");\r\n            this.votesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for pledges\r\n        if (this.pledgesListener) {\r\n            this.pledgesListener.off(\"child_added\");\r\n            this.pledgesListener.off(\"child_changed\");\r\n            this.pledgesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for comments\r\n        if (this.commentsListener) {\r\n            this.commentsListener.off(\"child_added\");\r\n            this.commentsListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for comments replies\r\n        if (this.commentsRepliesListener) {\r\n            this.commentsRepliesListener.off(\"child_added\");\r\n            this.commentsRepliesListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for pledges changed in pledges table\r\n        pledgesTable_stopListeningForPledgesChanged();\r\n    }\r\n\r\n    /**\r\n     * This function is used to load data for the whole page\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            user,\r\n            userLoaded,\r\n\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        if (!userLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!user) {\r\n            if (!dataLoaded) {\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        // data is being loaded\r\n        if (dataBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            dataLoaded: false,\r\n            dataBeingLoaded: true\r\n        });\r\n\r\n        // load the requested project\r\n        const projectID = this.props.match.params.projectID;\r\n        realtimeDBUtils\r\n            .loadAParticularProject(projectID)\r\n            .then(project => {\r\n                // track activity for investors only\r\n                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_VIEW,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS.replace(\"%project%\", project.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                        });\r\n                }\r\n\r\n                // set project for the Select component that is used to choose the project visibility\r\n                selectProjectVisibility_setProject(project);\r\n\r\n                this.setState({\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        project: project,\r\n                        projectLoaded: true\r\n                    },\r\n                    mainBody:\r\n                        user.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            user.anid === project.anid\r\n                                ?\r\n                                MAIN_BODY_ADMIN_OFFER_STATES\r\n                                :\r\n                                MAIN_BODY_CAMPAIGN\r\n                            :\r\n                            MAIN_BODY_CAMPAIGN\r\n                    ,\r\n                    adminOfferStatesActiveStep:\r\n                        project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                            ?\r\n                            ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                            :\r\n                            (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED)\r\n                                ?\r\n                                ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                :\r\n                                (project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE)\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                    :\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                });\r\n\r\n                // load votes\r\n                realtimeDBUtils\r\n                    .loadVotes(project.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        this.setState({\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                votes: votes,\r\n                                votesLoaded: true\r\n                            }\r\n                        });\r\n\r\n                        // load pledges\r\n                        realtimeDBUtils\r\n                            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n\r\n                                // if the current user is an investor, check if they pledged this project\r\n                                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                                    let currentUserPledgeIndex = pledges.findIndex(pledge => pledge.investorID === user.id && pledge.amount !== '');\r\n                                    // this investor has pledges this project before\r\n                                    if (currentUserPledgeIndex !== -1) {\r\n                                        this.setState({\r\n                                            investorPledge: pledges[currentUserPledgeIndex]\r\n                                        });\r\n                                    }\r\n                                }\r\n\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: pledges,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n\r\n                                // load the profile of the Issuer or the Group Admin created this project\r\n                                // this user can be the issuer who created the offer themselves\r\n                                // or the group admin who created this offer on behalf of an unknown issuer\r\n                                // or the issuer who got the group admin create this offer for\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(project.issuerID)\r\n                                    .then(projectIssuer => {\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectIssuer: projectIssuer,\r\n                                                projectIssuerLoaded: true\r\n                                            }\r\n                                        });\r\n                                    })\r\n                                    .catch(error => {\r\n                                        this.setState({\r\n                                            dataLoaded: true,\r\n                                            dataBeingLoaded: false,\r\n                                            investorPledgeLoaded: true,\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectLoaded: true, // project is null\r\n                                                projectIssuerLoaded: true, // project issuer is null\r\n                                                votesLoaded: true,\r\n                                                pledgesLoaded: true\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        projectLoaded: true, // project is null\r\n                                        projectIssuerLoaded: true, // project issuer is null\r\n                                        votesLoaded: true,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            dataLoaded: true,\r\n                            dataBeingLoaded: false,\r\n                            investorPledgeLoaded: true,\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                projectLoaded: true, // project is null\r\n                                projectIssuerLoaded: true, // project issuer is null\r\n                                votesLoaded: true,\r\n                                pledgesLoaded: true\r\n                            }\r\n                        });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // error happens when loading the requested project\r\n                // we'll stop the loading process for all others\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Load data when UI elements change\r\n     */\r\n    loadDataWhenUIElementsChange = () => {\r\n        const {\r\n            user,\r\n\r\n            pledgesTable_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            mainBody,\r\n            commentsLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        // attach votes changed listener\r\n        if (votes && votesLoaded && project && projectLoaded) {\r\n            // votes can only happen if the project is in Pitch phase\r\n            if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                if (!this.votesListener) {\r\n                    this.votesListener = this.database\r\n                        .ref(DB_CONST.VOTES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // vote added\r\n                    this.votesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n                            if (voteIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(vote.investorID)\r\n                                    .then(investor => {\r\n                                        vote.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                votes: [...votes, vote]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // vote changed\r\n                    this.votesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n\r\n                                vote.investor = updatedVotes[voteIndex].investor;\r\n                                updatedVotes[voteIndex] = vote;\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // vote removed\r\n                    this.votesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let voteRemovedID = snapshot.key;\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === voteRemovedID);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n                                updatedVotes.splice(voteIndex, 1);\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // attach pledges changed listener\r\n        if (pledges && pledgesLoaded && projectLoaded && project) {\r\n            // pledges can only happen if the project is in Primary offer phase\r\n            if (project.status !== DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_FAILED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            ) {\r\n                if (!this.pledgesListener) {\r\n                    this.pledgesListener = this.database\r\n                        .ref(DB_CONST.PLEDGES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // new pledge added\r\n                    this.pledgesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                            if (pledgeIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(pledge.investorID)\r\n                                    .then(investor => {\r\n                                        pledge.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                pledges: [...pledges, pledge]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // pledge changed\r\n                    this.pledgesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n\r\n                                pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                                updatedPledges[pledgeIndex] = pledge;\r\n\r\n                                const currentPledge = JSON.parse(JSON.stringify(this.state.investorPledge));\r\n\r\n                                this.setState({\r\n                                    investorPledge:\r\n                                    // current pledge is not null\r\n                                        currentPledge !== null\r\n                                            ?\r\n                                            currentPledge.id === pledge.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                currentPledge\r\n                                            :\r\n                                            // current pledge is null\r\n                                            pledge.investorID === user.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                null\r\n                                    ,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: updatedPledges\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // pledge removed\r\n                    this.pledgesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let pledgeRemovedID = snapshot.key;\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n                                updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                                const currentPledge = this.state.investorPledge;\r\n                                if (!currentPledge && currentPledge.id === pledgeRemovedID) {\r\n                                    this.setState({\r\n                                        investorPledge: null,\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    this.setState({\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Pledges tab\r\n        if (mainBody === MAIN_BODY_INVESTORS_PLEDGED) {\r\n            if (project) {\r\n                pledgesTable_setProject(project);\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Comments tab\r\n        if (mainBody === MAIN_BODY_COMMENTS) {\r\n            // if comments have not been loaded yet\r\n            if (!commentsLoaded) {\r\n                // load comments\r\n                realtimeDBUtils\r\n                    .loadComments(project.id)\r\n                    .then(returnedComments => {\r\n\r\n                        realtimeDBUtils\r\n                            .loadCommentsReplies(returnedComments)\r\n                            .then(commentsWithReplies => {\r\n                                // comments loaded with replies\r\n                                this.setState({\r\n                                    comments: [...commentsWithReplies],\r\n                                    commentsLoaded: true\r\n                                });\r\n\r\n                                // attach comments listener\r\n                                if (!this.commentsListener) {\r\n                                    this.commentsListener = this.database\r\n                                        .ref(DB_CONST.COMMENTS_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    // new comment added\r\n                                    this.commentsListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n                                            comment.replies = [];\r\n\r\n                                            // assign comment to currentComment object if it belongs to the current investor\r\n                                            if (comment.commentedBy === user.id) {\r\n                                                const currentComment = this.state.currenComment;\r\n                                                if (!currentComment) {\r\n                                                    this.setState({\r\n                                                        currentComment: comment,\r\n                                                        currentCommentText: comment.comment\r\n                                                    });\r\n                                                }\r\n                                            }\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex === -1) {\r\n                                                realtimeDBUtils\r\n                                                    .getUserBasedOnID(comment.commentedBy)\r\n                                                    .then(user => {\r\n                                                        comment.author = user;\r\n                                                        this.setState({\r\n                                                            comments: [...comments, comment]\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        });\r\n\r\n                                    // comment changed\r\n                                    this.commentsListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex !== -1) {\r\n                                                let updatedComments = [...comments];\r\n                                                comment.author = updatedComments[commentIndex].author;\r\n                                                comment.replies = updatedComments[commentIndex].replies;\r\n\r\n                                                updatedComments[commentIndex] = comment;\r\n\r\n                                                // NOTE: Must explicitly call state here to avoid null from previous state\r\n                                                const currentComment = this.state.currentComment;\r\n\r\n                                                if (currentComment && currentComment.id === comment.id) {\r\n                                                    this.setState({\r\n                                                        comments: updatedComments,\r\n                                                        currentComment: comment\r\n                                                    });\r\n                                                } else {\r\n                                                    this.setState({\r\n                                                        comments: [...updatedComments]\r\n                                                    });\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n\r\n                                // attach comments replies listener\r\n                                if (!this.commentsRepliesListener) {\r\n                                    this.commentsRepliesListener = this.database\r\n                                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex === -1) {\r\n                                                    if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                                        return;\r\n                                                    }\r\n                                                    realtimeDBUtils\r\n                                                        .getUserBasedOnID(reply.repliedBy)\r\n                                                        .then(user => {\r\n                                                            reply.author = user;\r\n                                                            comment.replies = [...comment.replies, reply];\r\n\r\n                                                            comments[correspondingCommentIndex] = comment;\r\n\r\n                                                            this.setState({\r\n                                                                comments: [...comments]\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                        });\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex !== -1) {\r\n                                                    // reply has been deleted\r\n                                                    if (reply.hasOwnProperty(\"deleted\") && reply.deleted === true) {\r\n                                                        // remove reply from the local replies list\r\n                                                        comment.replies.splice(replyIndex, 1);\r\n\r\n                                                        comments[correspondingCommentIndex] = comment;\r\n\r\n                                                        this.setState({\r\n                                                            comments: [...comments]\r\n                                                        });\r\n                                                    }\r\n                                                    // reply is live\r\n                                                    else {\r\n                                                        realtimeDBUtils\r\n                                                            .getUserBasedOnID(reply.repliedBy)\r\n                                                            .then(user => {\r\n                                                                reply.author = comment.replies[replyIndex].author;\r\n                                                                comment.replies[replyIndex] = reply;\r\n\r\n                                                                comments[correspondingCommentIndex] = comment;\r\n\r\n                                                                this.setState({\r\n                                                                    comments: [...comments]\r\n                                                                });\r\n                                                            });\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    commentsLoaded: true\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            commentsLoaded: true\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Vot for pitch function\r\n     *\r\n     * @param voteVal\r\n     */\r\n    handleVotePitch = voteVal => {\r\n        const {\r\n            groupProperties,\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            project,\r\n            votes\r\n        } = this.state.projectDetail;\r\n\r\n        let currentVoteObj = getInvestorVote(votes, user);\r\n        if (currentVoteObj) {\r\n            currentVoteObj.investor = null;\r\n        }\r\n\r\n        let newVoteObj = {};\r\n\r\n        // investor has already voted before or voted and cancelled\r\n        // when an investor cancelled their vote, the vote value will be ''\r\n        if (currentVoteObj) {\r\n\r\n            newVoteObj = JSON.parse(JSON.stringify(currentVoteObj));\r\n\r\n            // the investor cancelled their vote\r\n            if (newVoteObj.voted === '') {\r\n                newVoteObj.voted = voteVal;\r\n            }\r\n            // the investor now clicks to cancel their vote\r\n            else {\r\n                newVoteObj.voted = ''; // update vote to void\r\n            }\r\n\r\n            // update the existing vote\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(newVoteObj.id)\r\n                .update(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: newVoteObj.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: currentVoteObj,\r\n                                after: newVoteObj\r\n                            }\r\n                        });\r\n                });\r\n        }\r\n        // investor has not voted before\r\n        else {\r\n            const id = this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .push()\r\n                .key;\r\n\r\n            newVoteObj.id = id;\r\n            newVoteObj.anid = groupProperties ? groupProperties.anid : null;\r\n            newVoteObj.investorID = user.id;\r\n            newVoteObj.projectID = project.id;\r\n            newVoteObj.voted = voteVal;\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(id)\r\n                .set(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity for first time voting\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: newVoteObj\r\n                        });\r\n\r\n                    // send a notification to notify the issuer\r\n                    realtimeDBUtils\r\n                        .sendNotification({\r\n                            title: \"Someone liked your pitch\",\r\n                            message: \"Congratulations. A new investor has showed interest in your pitch.\",\r\n                            userID: project.issuerID,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                        })\r\n                        .then(() => {\r\n                            // do something\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener for any changes that happen on this pitch\r\n     * Attach listener for any changes that happen on this pitch\r\n     */\r\n    attachProjectChangedListener = () => {\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (this.projectListener === null) {\r\n            this.projectListener = this.database\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id);\r\n\r\n            this.projectListener\r\n                .on(\"value\", snapshot => {\r\n                    const project = snapshot.val();\r\n                    project.group = this.state.projectDetail.project.group;\r\n                    project.issuer = this.state.projectDetail.project.issuer;\r\n\r\n                    this.setState({\r\n                        projectDetail: {\r\n                            ...this.state.projectDetail,\r\n                            project: project,\r\n                        },\r\n                        adminOfferStatesActiveStep:\r\n                            project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                ?\r\n                                ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                                :\r\n                                project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                    :\r\n                                    project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED\r\n                                    || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                        ?\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                        :\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                    });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Detach changes listener for this pitch\r\n     */\r\n    detachProjectChangedListener = () => {\r\n        if (this.projectListener) {\r\n            this.projectListener.off(\"value\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked (download it)\r\n     *\r\n     * @param downloadURL\r\n     */\r\n    handleDocumentClick = downloadURL => {\r\n        window.open(downloadURL, \"_blank\");\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go live or not\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoToPledgePhaseDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING\r\n            && project.Pitch.status !== DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoToPledgePhaseDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectPledgeGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectPledgeGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the main body tab changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    handleMainBodyTabChanged = (event, value) => {\r\n        this.setState({\r\n            mainBody: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post a comment button clicked (open a dialog for the Investors to write their comment)\r\n     */\r\n    handlePostACommentClick = () => {\r\n        this.setState({\r\n            commentDialogOpen: true\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the comment dialog is closed\r\n     */\r\n    handleCloseCommentDialog = () => {\r\n        this.setState({\r\n            commentDialogOpen: false,\r\n            commentText: '',\r\n            commentSubmitClick: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    handleTextChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    handleDateChanged = date => {\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                changedPitchExpiryDate: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            changedPitchExpiryDate:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle when the Investor clicks to submit their comment\r\n     */\r\n    handleSubmitCommentClick = () => {\r\n        const {\r\n            groupProperties,\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            commentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        this.setState({\r\n            commentSubmitClick: true\r\n        });\r\n\r\n        if (commentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const id = this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const comment = {\r\n            id,\r\n            commenterANID: groupProperties ? groupProperties.anid : null,\r\n            projectID: project.id,\r\n            commentedBy: user.id,\r\n            status: DB_CONST.COMMENT_STATUS_POSTED,\r\n            commentedDate: utils.getCurrentDate(),\r\n            comment: commentText\r\n        };\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(id)\r\n            .set(comment)\r\n            .then(() => {\r\n                // track investor's activity for posting a new comment\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: comment\r\n                    });\r\n\r\n                // send a notification to notify the issuer\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: \"Someone commented on your pitch\",\r\n                        message: \"An investor has commented on your pitch. Go and see what they said.\",\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                    .then(() => {\r\n                        this.handleCloseCommentDialog();\r\n                    })\r\n                    .catch(error => {\r\n                        this.handleCloseCommentDialog();\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment added.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                this.handleCloseCommentDialog();\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not add comment.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) cancels the update for their comment\r\n     */\r\n    handleCancelUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            currentCommentText: !currentComment.comment ? '' : currentComment.comment\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) submits the update for their comment\r\n     */\r\n    handleSubmitUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment,\r\n            currentCommentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (currentCommentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        let newComment = JSON.parse(JSON.stringify(currentComment));\r\n        newComment.status = DB_CONST.COMMENT_STATUS_EDITED;\r\n        newComment.comment = currentCommentText;\r\n        newComment.commentedDate = utils.getCurrentDate();\r\n        newComment.replies = null;\r\n        newComment.author = null;\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(newComment.id)\r\n            .update(newComment)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentComment.commentedBy,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: currentComment.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: {\r\n                            before: JSON.parse(JSON.stringify(currentComment)),\r\n                            after: newComment\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment updated.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle the input area to allow the project's owners to reply to investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    handleToggleReplyToComment = (comment, replyEdited) => {\r\n        this.setState({\r\n            replyingToComment: comment,\r\n            replyText: replyEdited ? replyEdited.text : '',\r\n            replyEdited\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    handleSubmitCommentReply = () => {\r\n        const {\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (!replyEdited) {\r\n            const commentReply = {\r\n                text: replyText,\r\n                repliedDate: utils.getCurrentDate(),\r\n                projectID: project.id,\r\n                commentID: replyingToComment.id,\r\n                repliedBy: user.id,\r\n                status: DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .postCommentReply(commentReply)\r\n                .then(replyID => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                ...commentReply,\r\n                                id: replyID\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply added.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not add reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        } else {\r\n            let replyBeforeUpdating = JSON.parse(JSON.stringify(replyEdited));\r\n            replyBeforeUpdating.author = null\r\n\r\n            let replyAfterUpdating = JSON.parse(JSON.stringify(replyBeforeUpdating));\r\n            replyAfterUpdating.text = replyText;\r\n            replyAfterUpdating.status = DB_CONST.COMMENT_REPLY_STATUS_EDITED;\r\n            replyAfterUpdating.repliedDate = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .updateCommentReply(replyAfterUpdating)\r\n                .then(() => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyAfterUpdating.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: replyBeforeUpdating,\r\n                                after: replyAfterUpdating\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply updated.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not update reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    handleDeleteCommentReply = reply => {\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .deleteCommentReply(reply.id)\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                        interactedObjectID: reply.id,\r\n                        activitySummary: realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT\r\n                            .replace(\"%projectName%\", project.projectName)\r\n                        ,\r\n                        action: ROUTES\r\n                            .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                            .replace(\":projectID\", project.id)\r\n                        ,\r\n                        value: {\r\n                            before: {\r\n                                ...reply,\r\n                                author: null\r\n                            },\r\n                            after: {\r\n                                ...reply,\r\n                                author: null,\r\n                                deleted: true\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Reply deleted.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not delete reply.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Offer states click to change active step\r\n     *\r\n     * @param step\r\n     */\r\n    handleAdminOfferStatesStepClick = step => {\r\n        this.setState({\r\n            adminOfferStatesActiveStep: step\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Bring pitch back to live again\r\n     *\r\n     * @returns {Promise<void>}\r\n     */\r\n    bringPitchBackToLive = async () => {\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            changedPitchExpiryDate\r\n        } = this.state;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await realtimeDBUtils\r\n                .bringPitchBackToLive({\r\n                    project: JSON.parse(JSON.stringify(project)),\r\n                    newPitchExpiryDate: changedPitchExpiryDate\r\n                });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Pitch is now live again.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            // handle error\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't update pitch.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.setState({\r\n            addingRejectFeedback: !this.state.addingRejectFeedback,\r\n            rejectFeedback: \"\"\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = async () => {\r\n        const {\r\n            projectDetail,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (rejectFeedback.trim().length === 0 || sendingProjectBack) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sendingProjectBack: true\r\n        });\r\n\r\n        try {\r\n            // send project back to the issuer\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendProjectBackToIssuerRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        projectID: projectDetail.project.id,\r\n                        feedback: rejectFeedback\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.setState({\r\n                sendingProjectBack: false\r\n            });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Pitch has been sent back.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't send offer back.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            isMobile,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n            groupsUserIsIn,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n\r\n            projectVisibilitySetting,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            commentDialogOpen,\r\n            commentText,\r\n            commentSubmitClick,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || isAuthenticating(AuthenticationState)) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || hasAuthenticationError(AuthenticationState)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <ProjectDetails\r\n                    AuthenticationState={this.props.AuthenticationState}\r\n                    groupUserName={groupUserName}\r\n                    groupProperties={groupProperties}\r\n                    isMobile={isMobile}\r\n                    user={user}\r\n                    userLoaded={userLoaded}\r\n                    groupsUserIsIn={groupsUserIsIn}\r\n                    investorSelfCertificationAgreement={investorSelfCertificationAgreement}\r\n                    mainBody={mainBody}\r\n                    adminOfferStatesActiveStep={adminOfferStatesActiveStep}\r\n                    comments={comments}\r\n                    commentsLoaded={commentsLoaded}\r\n                    currentComment={currentComment}\r\n                    currentCommentText={currentCommentText}\r\n                    replyingToComment={replyingToComment}\r\n                    replyText={replyText}\r\n                    replyEdited={replyEdited}\r\n                    changedPitchExpiryDate={changedPitchExpiryDate}\r\n                    addingRejectFeedback={addingRejectFeedback}\r\n                    rejectFeedback={rejectFeedback}\r\n                    sendingProjectBack={sendingProjectBack}\r\n                    project={project}\r\n                    projectLoaded={projectLoaded}\r\n                    votes={votes}\r\n                    votesLoaded={votesLoaded}\r\n                    pledges={pledges}\r\n                    pledgesLoaded={pledgesLoaded}\r\n                    investorPledge={investorPledge}\r\n                    investorPledgeLoaded={investorPledgeLoaded}\r\n                    projectIssuer={projectIssuer}\r\n                    projectIssuerLoaded={projectIssuerLoaded}\r\n                    projectVisibilitySetting={projectVisibilitySetting}\r\n                    onVote={this.handleVotePitch}\r\n                    onDocumentClick={this.handleDocumentClick}\r\n                    // only available for admins ----------------------------\r\n                    onMakeProjectGoLiveDecision={this.handleMakeProjectGoLiveDecision}\r\n                    onMakeProjectGoToPledgePhaseDecision={this.handleMakeProjectGoToPledgePhaseDecision}\r\n                    onMakeProjectPledgeGoLiveDecision={this.handleMakeProjectPledgeGoLiveDecision}\r\n                    //-------------------------------------------------------\r\n                    onTabChanged={this.handleMainBodyTabChanged}\r\n                    onPostACommentClick={this.handlePostACommentClick}\r\n                    onTextChanged={this.handleTextChanged}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCancelUpdateCurrentComment={this.handleCancelUpdateCurrentComment}\r\n                    onSubmitUpdateCurrentComment={this.handleSubmitUpdateCurrentComment}\r\n                    onToggleReplyToComment={this.handleToggleReplyToComment}\r\n                    onSubmitCommentReply={this.handleSubmitCommentReply}\r\n                    onDeleteCommentReply={this.handleDeleteCommentReply}\r\n                    onAdminOfferStatesStepClick={this.handleAdminOfferStatesStepClick}\r\n                    createPledgeDialog_toggleDialog={createPledgeDialog_toggleDialog}\r\n                    createPledgeDialog_setProject={createPledgeDialog_setProject}\r\n                    selectProjectVisibility_setProject={selectProjectVisibility_setProject}\r\n                    bringPitchBackToLive={this.bringPitchBackToLive}\r\n                    toggleRejectFeedback={this.toggleRejectFeedback}\r\n                    sendProjectBackToIssuer={this.sendProjectBackToIssuer}\r\n                    toggleContactPitchOwnerDialog={() => this.props.toggleContactPitchOwnerDialog(project.projectName, projectIssuer.email)}\r\n                />\r\n\r\n                <CommentDialog\r\n                    open={commentDialogOpen}\r\n                    project={project}\r\n                    commentText={commentText}\r\n                    commentSubmitClick={commentSubmitClick}\r\n                    onClose={this.handleCloseCommentDialog}\r\n                    onCommentTextChanged={this.handleTextChanged}\r\n                    onSubmitCommentClick={this.handleSubmitCommentClick}\r\n                />\r\n\r\n                <CreatePledgeDialog/>\r\n\r\n                <ContactPitchOwnerDialog/>\r\n\r\n                <FeedbackSnackbarNew/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ProjectDetails extends Component {\r\n\r\n    /**\r\n     * Handle when the navigation tab is changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    onTabChanged = (event, value) => {\r\n        this.props.onTabChanged(event, value);\r\n    };\r\n\r\n    /**\r\n     * Handle when text input changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    }\r\n\r\n    /**\r\n     * Handle when the vote button is clicked.\r\n     *\r\n     * @param vote\r\n     */\r\n    onVote = vote => {\r\n        this.props.onVote(vote);\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked\r\n     */\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go live (Admin only)\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoLiveDecision = decision => {\r\n        this.props.onMakeProjectGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoToPledgePhaseDecision = decision => {\r\n        this.props.onMakeProjectGoToPledgePhaseDecision(decision);\r\n    };\r\n    /**\r\n     * Make a decision whether a project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectPledgeGoLiveDecision = decision => {\r\n        this.props.onMakeProjectPledgeGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post comment button is clicked --> Open comment dialog\r\n     */\r\n    onPostACommentClick = () => {\r\n        this.props.onPostACommentClick();\r\n    };\r\n\r\n    /**\r\n     * Handle to cancel updating current comment\r\n     */\r\n    onCancelUpdateCurrentComment = () => {\r\n        this.props.onCancelUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to submit the updated comment\r\n     */\r\n    onSubmitUpdateCurrentComment = () => {\r\n        this.props.onSubmitUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle input area to allow the project's owners to reply to the investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    onDeleteCommentReply = reply => {\r\n        this.props.onDeleteCommentReply(reply);\r\n    }\r\n\r\n    /**\r\n     * Handle when the offer state is changed\r\n     *\r\n     * @param step\r\n     */\r\n    onAdminOfferStatesStepClick = step => {\r\n        this.props.onAdminOfferStatesStepClick(step);\r\n    };\r\n\r\n    /**\r\n     * Bring pitch back to live\r\n     */\r\n    bringPitchBackToLive = () => {\r\n        this.props.bringPitchBackToLive();\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.props.toggleRejectFeedback();\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = () => {\r\n        this.props.sendProjectBackToIssuer();\r\n    }\r\n\r\n    /**\r\n     * Toggle contact pitch owner dialog\r\n     */\r\n    toggleContactPitchOwnerDialog = () => {\r\n        this.props.toggleContactPitchOwnerDialog();\r\n    }\r\n\r\n    /**\r\n     * Render the page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            groupsUserIsIn,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            project,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack,\r\n\r\n            projectVisibilitySetting,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        // if the data is being loaded\r\n        // display loading\r\n        if (!pledgesLoaded\r\n            || !votesLoaded\r\n            || !investorPledgeLoaded\r\n            || !projectIssuerLoaded\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <FlexView width=\"100%\" marginTop={20} hAlignContent=\"center\">\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // return Page Not Found for security reason\r\n        if (!project\r\n            || !pledges\r\n            || !projectIssuer\r\n            // the project is private\r\n            // the user is an investor/issuer that is not in the group that owns this project\r\n            || (\r\n                project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                && (user.type === DB_CONST.TYPE_INVESTOR || user.type === DB_CONST.TYPE_ISSUER)\r\n                && (groupsUserIsIn !== null && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is temporarily closed\r\n        // only display its content to the super admins,\r\n        // group admins that own this project, and the issuer of this project\r\n        if (utils.isProjectTemporarilyClosed(project)\r\n            && (\r\n                (user.type === DB_CONST.TYPE_ISSUER && user.id !== project.issuerID)\r\n                || (user.type === DB_CONST.TYPE_INVESTOR)\r\n                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin && user.anid !== project.anid)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\">This offer has been closed temporarily.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is private\r\n        // the user is a group admin that does not own this project\r\n        if (project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n            && (user.type === DB_CONST.TYPE_ADMIN)\r\n            && !user.superAdmin\r\n            && user.anid !== project.anid\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\"> You can only edit offers from your group.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        let sortedComments = comments;\r\n        // if the list of comments is not null\r\n        if (sortedComments) {\r\n            // sort by oldest day first\r\n            sortedComments.sort((comment1, comment2) => {\r\n                return (comment1.commentedDate - comment2.commentedDate);\r\n            });\r\n\r\n            let currentCommentIndex = sortedComments.findIndex(comment => comment.commentedBy === user.id);\r\n            if (currentCommentIndex !== -1) {\r\n                const currentComment = comments[currentCommentIndex];\r\n                sortedComments.splice(currentCommentIndex, 1);\r\n                sortedComments.push(currentComment);\r\n            }\r\n\r\n            sortedComments.reverse();\r\n        }\r\n\r\n        // sort replies in each comment\r\n        sortedComments.forEach(comment => {\r\n            comment.replies.sort((reply1, reply2) => {\r\n                return reply2.repliedDate - reply1.repliedDate;\r\n            });\r\n        });\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingTop: 0, paddingBottom: 100}}>\r\n                <Row noGutters style={{paddingTop: 25, paddingBottom: 25, backgroundColor: colors.kick_starter_background_color}}>\r\n                    {/** Banner to announce if a project is temporarily closed */}\r\n                    {\r\n                        !utils.isProjectTemporarilyClosed(project)\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 0}} sm={{span: 12, offset: 0, order: 0}} md={{span: 12, offset: 0, order: 0}} lg={{span: 12, offset: 0, order: 0}}>\r\n                                <FlexView marginBottom={20} hAlignContent=\"center\" style={{backgroundColor: colors.errorColor, padding: 15}} >\r\n                                    <Typography variant=\"body2\" align=\"center\" className={css(sharedStyles.white_text)}><b>This offer has been temporarily closed.</b></Typography>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Pledge (displayed if the user is an investor and has pledged this project before) */}\r\n                    {\r\n                        !investorPledge\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 2}} sm={{span: 12, offset: 0, order: 2}} md={{span: 10, offset: 1, order: 2}} lg={{span: 10, offset: 1, order: 1}}>\r\n                                <Paper elevation={3} style={{margin: 12}} square>\r\n                                    <Row noGutters style={{padding: 6}}>\r\n                                        <Col xs={12} sm={12} md={{span: 5, order: 1}} lg={{span: 3, order: 1}}>\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" height=\"100%\" width=\"100%\" style={{padding: 10}}>\r\n                                                <CheckCircleIcon color=\"primary\" style={{marginRight: 15}}/>\r\n                                                <Typography align=\"left\" variant=\"body1\">\r\n                                                    {\r\n                                                        investorPledge.status === DB_CONST.MAKE_A_NEW_PLEDGE\r\n                                                            ?\r\n                                                            `You pledged £${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                            :\r\n                                                            `You updated your pledge to £${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                    }\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        <Col xs={12} sm={12} md={{span: 5, offset: 2, order: 2}} lg={{span: 3, offset: 6, order: 2}}>\r\n                                            <FlexView width=\"100%\" hAlignContent=\"center\" style={{padding: 10}}>\r\n                                                {\r\n                                                    !utils.isProjectInLivePledgePhase(project)\r\n                                                        ?\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"secondary\">Offer has ended. You can't change your pledge anymore.</Typography>\r\n                                                        :\r\n                                                        <NavLink\r\n                                                            to={{\r\n                                                                pathname: groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                ,\r\n                                                                search: `?project=${project.id}`\r\n                                                            }}\r\n                                                            className={css(sharedStyles.nav_link_hover)}\r\n                                                        >\r\n                                                            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">Manage your pledge</Button>\r\n                                                        </NavLink>\r\n                                                }\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Paper>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Project title and description */}\r\n                    <Col xs={{span: 12, offset: 0, order: 3}} sm={{span: 12, offset: 0, order: 3}} md={{span: 10, offset: 1, order: 3}} lg={{span: 8, offset: 2, order: 2}} style={{paddingLeft: 20, paddingRight: 20, paddingTop: 20, paddingBottom: 40}}>\r\n                        <FlexView column width=\"100%\" hAlignContent=\"center\">\r\n                            <Typography align=\"center\" variant=\"h5\" style={{marginBottom: 12}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        \"This is an offer\"\r\n                                        :\r\n                                        project.projectName\r\n                                }\r\n                            </Typography>\r\n                            <Typography className={css(styles.gray_text)} align=\"center\" variant=\"body1\" style={{whiteSpace: \"pre-line\"}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        `in ${project.sector} sector`\r\n                                        :\r\n                                        project.description\r\n                                }\r\n                            </Typography>\r\n                            {\r\n                                user.type === DB_CONST.TYPE_ADMIN\r\n                                || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)\r\n                                    ?\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" marginTop={20}>\r\n                                        {\r\n                                            !utils.shouldAProjectBeEdited(user, project)\r\n                                                ?\r\n                                                <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)} disabled>\r\n                                                    <CreateIcon style={{marginRight: 8,  width: 20, height: \"auto\"}}\r\n                                                    />Edit offer</Button>\r\n                                                :\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.EDIT_OFFER\r\n                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                            :\r\n                                                            ROUTES.EDIT_OFFER_INVEST_WEST_SUPER\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                    }\r\n                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                >\r\n                                                    <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)}>\r\n                                                        <CreateIcon style={{marginRight: 8, width: 20, height: \"auto\"}}/>Edit offer</Button>\r\n                                                </NavLink>\r\n                                        }\r\n                                        {/*<FlexView*/}\r\n                                        {/*    marginLeft={15}*/}\r\n                                        {/*>*/}\r\n                                        {/*    <InfoOverlay*/}\r\n                                        {/*        message={*/}\r\n                                        {/*            user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                        {/*                ?*/}\r\n                                        {/*                \"Edit offer.\"*/}\r\n                                        {/*                :*/}\r\n                                        {/*                utils.isDraftProject(project)*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    \"This offer is still a draft. Complete it.\"*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    !utils.shouldAProjectBeEdited(user, project)*/}\r\n                                        {/*                        ?*/}\r\n                                        {/*                        \"Pages cannot be edited.\"*/}\r\n                                        {/*                        :*/}\r\n                                        {/*                        `Pages can only be edited before the pitch phase expires. You can edit until ${utils.dateInReadableFormat(project.Pitch.expiredDate)}.`*/}\r\n                                        {/*        }*/}\r\n                                        {/*        placement=\"right\"*/}\r\n                                        {/*    />*/}\r\n                                        {/*</FlexView>*/}\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            {\r\n                                user.id === project.issuerID\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column hAlignContent=\"center\">\r\n                                        <NavLink\r\n                                            to={\r\n                                                this.shouldHideInformation()\r\n                                                || (\r\n                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                    && project.createdByGroupAdmin\r\n                                                )\r\n                                                    ?\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.VIEW_GROUP_DETAILS\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                        :\r\n                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                    :\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.USER_PROFILE\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                                        :\r\n                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                            }\r\n                                            className={css(sharedStyles.nav_link_hover, styles.black_text)}\r\n                                        >\r\n                                            <Typography align=\"center\" variant=\"body2\" style={{marginTop: 23}}>\r\n                                                {\r\n                                                    this.shouldHideInformation()\r\n                                                    || (\r\n                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                        && project.createdByGroupAdmin\r\n                                                    )\r\n                                                        ?\r\n                                                        <u>by {`${project.group.displayName}`}</u>\r\n                                                        :\r\n                                                        <u>by {`${projectIssuer.firstName} ${projectIssuer.lastName}`}</u>\r\n                                                }\r\n                                            </Typography>\r\n                                        </NavLink>\r\n                                        {\r\n                                            project.hasOwnProperty('createdByGroupAdmin')\r\n                                            && project.createdByGroupAdmin\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                projectIssuer.hasOwnProperty('linkedin')\r\n                                                && projectIssuer.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={projectIssuer.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64,  height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                        }\r\n                                    </FlexView>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Project cover (image or video) */}\r\n                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 7, offset: 1, order: 3}} style={{paddingLeft: 20, paddingRight: 20, height: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE}}>\r\n                        {\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Image src={utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, project.group)}\r\n                                    style={{\r\n                                        maxHeight:\r\n                                            isMobile\r\n                                                ?\r\n                                                MAX_COVER_HEIGHT_IN_MOBILE_MODE\r\n                                                :\r\n                                                MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE\r\n                                        ,\r\n                                        border: `1px solid ${colors.gray_300}`,\r\n                                        width: \"100%\",\r\n                                        objectFit: \"scale-down\"\r\n                                    }}\r\n                                />\r\n                                :\r\n                                project.Pitch.cover.map((coverItem, index) => (\r\n                                    coverItem.hasOwnProperty('removed')\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        (\r\n                                            coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                ?\r\n                                                <ReactPlayer\r\n                                                    key={index}\r\n                                                    url={coverItem.url}\r\n                                                    playsInline\r\n                                                    pip={true}\r\n                                                    width=\"100%\"\r\n                                                    height={coverItem.storageID === \"\" ? \"100%\" : \"auto\"}\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                />\r\n                                                :\r\n                                                <Image key={index} src={coverItem.url} style={{maxHeight: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE, border: `1px solid ${colors.gray_300}`, width: \"100%\", objectFit: \"scale-down\"}}/>\r\n                                        )\r\n                                ))\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Project information */}\r\n                    <Col xs={{span: 12, order: 4}} sm={{span: 12, order: 4}} md={{span: 12, order: 4}} lg={{span: 3, order: 4}} style={{paddingLeft: 20, paddingRight: 20}}>\r\n                        <Row noGutters>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 1}} lg={{span: 12, offset: 0, order: 1}}>\r\n                                <FlexView width=\"100%\" height={4} style={{\r\n                                        backgroundColor:\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n\r\n                            {/** Funding goal / Pledged */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 2}} lg={{span: 12, offset: 0, order: 2}}>\r\n                                <FlexView column marginTop={18}>\r\n                                    {\r\n                                        utils.isDraftProject(project)\r\n                                        || utils.isProjectWaitingToGoLive(project)\r\n                                        || utils.isProjectRejectedToGoLive(project)\r\n                                        || utils.isProjectInLivePitchPhase(project)\r\n                                        || utils.isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeCreated(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeChecked(project)\r\n                                            ?\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <FlexView column marginRight={20}>\r\n                                                    <Typography variant=\"h5\" color=\"secondary\" align=\"left\">{'£' + Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Funding goal</Typography>\r\n                                                </FlexView>\r\n                                                <InfoOverlay message=\"Funding amount sought via Invest West.\" placement=\"top\"/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <FlexView column marginRight={20}>\r\n                                                    <Typography variant=\"h5\" color=\"primary\" align=\"left\">{`£${Number(utils.calculatePledgesAmount(pledges).toFixed(2)).toLocaleString()}`}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{`pledged of £${Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`}</Typography>\r\n                                                </FlexView>\r\n                                                <InfoOverlay message=\"Total amount pledged via Invest West.\" placement=\"top\"/>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            {/** Post money valuation */}\r\n                            {\r\n                                !project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 3}} lg={{span: 12, offset: 0, order: 3}}>\r\n                                        <FlexView marginTop={20} vAlignContent=\"center\">\r\n                                            <FlexView column marginRight={20}>\r\n                                                <Typography variant=\"h5\" color=\"inherit\" align=\"left\">{'£' + Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()}</Typography>\r\n                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Post money valuation</Typography>\r\n                                            </FlexView>\r\n                                            <InfoOverlay message=\"This is the company post money valuation.\" placement=\"top\"/>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Project status */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 0, order: 4}} lg={{span: 12, offset: 0, order: 4}}>\r\n                                {\r\n                                    this.renderProjectStatus()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** Contact us */}\r\n                            {\r\n                                isProjectOwner(AuthenticationState.currentUser, project)\r\n                                    ? null\r\n                                    : <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 5}} lg={{span: 12, offset: 0, order: 5}} style={{marginTop: 15}}>\r\n                                        <FlexView column hAlignContent=\"left\">\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={this.shouldHideInformation() || (user.type === TYPE_INVESTOR && !investorSelfCertificationAgreement)} onClick={() => this.toggleContactPitchOwnerDialog()}>Contact us</Button>\r\n                                                {/*<Button*/}\r\n                                                {/*    size=\"medium\"*/}\r\n                                                {/*    variant={getInvestorVote(votes, user) && getInvestorVote(votes, user).voted ? \"contained\" : \"outlined\"}*/}\r\n                                                {/*    color=\"primary\"*/}\r\n                                                {/*    disabled={this.shouldVoteDisabled()}*/}\r\n                                                {/*    onClick={() => this.onVote(true)}*/}\r\n                                                {/*    className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <i*/}\r\n                                                {/*        style={{*/}\r\n                                                {/*            fontSize: 21,*/}\r\n                                                {/*            marginRight: 8*/}\r\n                                                {/*        }}*/}\r\n                                                {/*        className=\"far fa-thumbs-up\"*/}\r\n                                                {/*    />*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        Like*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</Button>*/}\r\n                                                {/*<FlexView*/}\r\n                                                {/*    marginLeft={10}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*        color=\"primary\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        {this.displayVote(true)}*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</FlexView>*/}\r\n                                            </FlexView>\r\n                                            {/*{*/}\r\n                                            {/*    user.type === DB_CONST.TYPE_ISSUER*/}\r\n                                            {/*        ?*/}\r\n                                            {/*        <Typography*/}\r\n                                            {/*            variant=\"body2\"*/}\r\n                                            {/*            align=\"left\"*/}\r\n                                            {/*            color=\"error\"*/}\r\n                                            {/*            style={{*/}\r\n                                            {/*                marginTop: 10*/}\r\n                                            {/*            }}*/}\r\n                                            {/*        >*/}\r\n                                            {/*            Only investors can vote.*/}\r\n                                            {/*        </Typography>*/}\r\n                                            {/*        :*/}\r\n                                            {/*        null*/}\r\n                                            {/*}*/}\r\n                                        </FlexView>\r\n                                        {\r\n                                            this.shouldHideInformation()\r\n                                                ?\r\n                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot see detailed information of this restricted offer.</Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                        <NavLink\r\n                                                            to={\r\n                                                                groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                            }\r\n                                                            style={{marginTop: 4}}>\r\n                                                            <Typography variant=\"body2\">Request access</Typography>\r\n                                                        </NavLink>\r\n                                                    </FlexView>\r\n                                                :\r\n                                                this.renderInvestorSelfCertifyReminder()\r\n                                        }\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Pledge this project (available only for investor and only appears when the project is in the Primary offer phase) */}\r\n                            {\r\n                                !utils.isProjectInLivePledgePhase(project)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        user.type !== DB_CONST.TYPE_INVESTOR\r\n                                            ?\r\n                                            (\r\n                                                <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                    <Typography align=\"left\" variant=\"body2\">\r\n                                                        <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                    </Typography>\r\n                                                </Col>\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                investorPledge\r\n                                                    ?\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                        <Typography align=\"left\" variant=\"body2\"><u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n\r\n                                                        {\r\n                                                            user.type === DB_CONST.TYPE_INVESTOR\r\n                                                            && !investorSelfCertificationAgreement\r\n                                                                ?\r\n                                                                <Button style={{marginBottom: 14}} className={css(sharedStyles.no_text_transform)} fullWidth variant=\"outlined\" color=\"primary\" size=\"medium\"\r\n                                                                    disabled={\r\n                                                                        user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                        && !investorSelfCertificationAgreement\r\n                                                                    }\r\n                                                                >\r\n                                                                    Pledge now\r\n                                                                </Button>\r\n                                                                :\r\n                                                                <NavLink\r\n                                                                    to={{\r\n                                                                        pathname: groupUserName\r\n                                                                            ?\r\n                                                                            ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                            :\r\n                                                                            ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                        ,\r\n                                                                        search: `?project=${project.id}`\r\n                                                                    }}\r\n                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                >\r\n                                                                    <Button style={{marginBottom: 14}} className={css(sharedStyles.no_text_transform)} fullWidth variant=\"outlined\" color=\"primary\" size=\"medium\">Pledge now</Button>\r\n                                                                </NavLink>\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                        }\r\n\r\n                                                        <Typography align=\"left\" variant=\"body2\" style={{marginTop: 15}}>\r\n                                                            <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u></Typography>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Sections bar */}\r\n                <Row noGutters className={css(styles.sticky_body_sections_bar)}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n\r\n                    <Col style={{padding: 10}} xs={{span: 12, offset: 0}} sm={{span: 12, offset: 0}} md={{span: 12, offset: 0}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\">\r\n                            <Tabs value={mainBody} onChange={this.onTabChanged} indicatorColor=\"primary\" textColor=\"primary\" variant=\"scrollable\" scrollButtons=\"on\">\r\n                                {\r\n                                    // user is a super admin\r\n                                    // or a group admin that owns the project\r\n                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))\r\n                                    )\r\n                                    // project is not a draft\r\n                                    && !utils.isDraftProject(project)\r\n                                        ?\r\n                                        <Tab value={MAIN_BODY_ADMIN_OFFER_STATES} className={css(sharedStyles.tab_title)} fullWidth label=\"Control phases\"\r\n                                         style={{\r\n                                                color:\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        colors.secondaryColor\r\n                                                        :\r\n                                                        groupProperties.settings.secondaryColor\r\n                                            }}\r\n                                        />\r\n                                        :\r\n                                        null\r\n                                }\r\n                                {/*{*/}\r\n                                {/*    // user is a super admin*/}\r\n                                {/*    // or a group admin that owns the project*/}\r\n                                {/*    (user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                {/*        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))*/}\r\n                                {/*    )*/}\r\n                                {/*    // user is the issuer that owns the project*/}\r\n                                {/*    || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)*/}\r\n                                {/*        ?*/}\r\n                                {/*        <Tab*/}\r\n                                {/*            value={MAIN_BODY_INVESTORS_PLEDGED}*/}\r\n                                {/*            className={css(sharedStyles.tab_title)}*/}\r\n                                {/*            fullWidth*/}\r\n                                {/*            label=\"Pledges\"*/}\r\n                                {/*            style={{*/}\r\n                                {/*                color:*/}\r\n                                {/*                    !groupProperties*/}\r\n                                {/*                        ?*/}\r\n                                {/*                        colors.secondaryColor*/}\r\n                                {/*                        :*/}\r\n                                {/*                        groupProperties.settings.secondaryColor*/}\r\n                                {/*            }}*/}\r\n                                {/*        />*/}\r\n                                {/*        :*/}\r\n                                {/*        null*/}\r\n                                {/*}*/}\r\n                                <Tab value={MAIN_BODY_CAMPAIGN} className={css(sharedStyles.tab_title)} fullWidth label=\"Campaign\"/>\r\n                                <Tab value={MAIN_BODY_DOCUMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Documents\"/>\r\n                                <Tab value={MAIN_BODY_COMMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Investor comments\"/>\r\n                                <Tab value={MAIN_BODY_NOTES} className={css(sharedStyles.tab_title)} fullWidth label=\"Extra information\"/>\r\n                            </Tabs>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main body */}\r\n                <Row noGutters className={css(styles.main_body_section)}>\r\n                    {/** Offer states (only visible to Admin) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_ADMIN_OFFER_STATES\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                <FlexView column marginTop={30}>\r\n                                    <Typography variant=\"h5\"> Control phases</Typography>\r\n\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 8, order: 0}} lg={{span: 8, order: 0}}>\r\n                                            <Stepper nonLinear orientation=\"vertical\" activeStep={adminOfferStatesActiveStep} style={{marginTop: 15}}>\r\n                                                {/** Publish pitch step */}\r\n                                                <Step key={ADMIN_OFFER_STATES_PUBLISH_PITCH} completed={!utils.isProjectWaitingToGoLive(project)}>\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PITCH)}>\r\n                                                        <StepLabel>Publish pitch</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            utils.isProjectWaitingToGoLive(project)\r\n                                                                ?\r\n                                                                <FlexView column width=\"100%\" marginTop={20} className={css(styles.admin_state_control_box)}>\r\n                                                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                                                        Please check this offer\r\n                                                                        carefully\r\n                                                                        before publishing as this action cannot be\r\n                                                                        reversed. You\r\n                                                                        can control who can see this investment\r\n                                                                        opportunity\r\n                                                                        using the options below.\r\n                                                                    </Typography>\r\n\r\n                                                                    <Divider style={{marginTop: 25, marginBottom: 20}}/>\r\n\r\n                                                                    {/** Select project visibility before publishing pitch */}\r\n                                                                    <SelectPitchVisibility/>\r\n\r\n                                                                    <Divider style={{marginTop: 35, marginBottom: 25}}/>\r\n\r\n                                                                    {\r\n                                                                        !addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column>\r\n                                                                                <TextField\r\n                                                                                    label=\"Feedback\"\r\n                                                                                    placeholder=\"Feedback for issuer\"\r\n                                                                                    name=\"rejectFeedback\"\r\n                                                                                    value={rejectFeedback}\r\n                                                                                    fullWidth\r\n                                                                                    margin=\"normal\"\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    multiline\r\n                                                                                    rows={5}\r\n                                                                                    rowsMax={5}\r\n                                                                                    onChange={this.onTextChanged}\r\n                                                                                />\r\n\r\n                                                                                <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={10}>\r\n                                                                                    <FlexView marginRight={6}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={rejectFeedback.trim().length === 0} onClick={() => this.sendProjectBackToIssuer()}>\r\n                                                                                            {\r\n                                                                                                sendingProjectBack\r\n                                                                                                    ?\r\n                                                                                                    \"Sending...\"\r\n                                                                                                    :\r\n                                                                                                    \"Send\"\r\n                                                                                            }\r\n                                                                                        </Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView marginLeft={6}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => this.toggleRejectFeedback()}>Cancel</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            isProjectCreatedByGroupAdmin(project)\r\n                                                                                ?\r\n                                                                                <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish pitch</Button>\r\n                                                                                :\r\n                                                                                <FlexView>\r\n                                                                                    <FlexView grow marginRight={10}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish pitch</Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView grow marginLeft={10}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.toggleRejectFeedback()}>Send back to issuer</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        !user.superAdmin\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <Typography variant=\"body1\" color=\"error\" align=\"left\" style={{marginTop: 20}}>Only group admin can do this.</Typography>\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                isDraftProject(project)\r\n                                                                                    ?\r\n                                                                                    \"This offer is in draft phase.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has been published.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                </FlexView>\r\n                                                        }\r\n\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/** Move Pitch to Pledge step */}\r\n                                                <Step\r\n                                                    key={ADMIN_OFFER_STATES_MOVE_TO_PLEDGE}\r\n                                                    disabled={\r\n                                                        isProjectWaitingToGoLive(project)\r\n                                                        || isProjectRejectedToGoLive(project)\r\n                                                    }\r\n                                                    completed={\r\n                                                        isProjectSuccessful(project)\r\n                                                        || isProjectFailed(project)\r\n                                                        || isProjectInLivePledgePhase(project)\r\n                                                        || isProjectWaitingForPledgeToBeCreated(project)\r\n                                                        || isProjectWaitingForPledgeToBeChecked(project)\r\n                                                    }\r\n                                                >\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_MOVE_TO_PLEDGE)}>\r\n                                                        {/*<StepLabel*/}\r\n                                                        {/*    error={utils.isProjectRejectedToGoLive(project)}*/}\r\n                                                        {/*>*/}\r\n                                                        {/*    Move pitch to pledge phase*/}\r\n                                                        {/*</StepLabel>*/}\r\n                                                        <StepLabel error={utils.isProjectRejectedToGoLive(project)}>Make decision for expired pitch</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            (isProjectInLivePitchPhase(project)\r\n                                                                || isProjectPitchExpiredWaitingForAdminToCheck(project))\r\n                                                            && !isProjectWaitingForPledgeToBeCreated(project)\r\n                                                            && !isProjectWaitingForPledgeToBeChecked(project)\r\n                                                                ?\r\n                                                                <FlexView\r\n                                                                    column\r\n                                                                >\r\n                                                                    {\r\n                                                                        !isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column width=\"100%\" marginTop={20} marginBottom={20} className={css(styles.admin_state_control_box)}>\r\n                                                                                <Typography align=\"left\" variant=\"body1\" style={{marginBottom: 35}}>This pitch has expired. You can bring it back to live by updating the expiry date or close it.</Typography>\r\n\r\n                                                                                <KeyboardDatePicker\r\n                                                                                    autoOk\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"dialog\"\r\n                                                                                    inputVariant=\"outlined\"\r\n                                                                                    label=\"Update expiry date for this pitch\"\r\n                                                                                    format=\"dd/MM/yyyy\"\r\n                                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                    value={changedPitchExpiryDate}\r\n                                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                                    onChange={this.onDateChanged}\r\n                                                                                />\r\n\r\n                                                                                <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                    disabled={\r\n                                                                                        !changedPitchExpiryDate\r\n                                                                                        || isNaN(changedPitchExpiryDate)\r\n                                                                                        || changedPitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)\r\n                                                                                    }\r\n                                                                                    style={{marginTop: 25}} onClick={this.bringPitchBackToLive}>Make pitch live again</Button>\r\n\r\n                                                                                <FlexView column marginTop={100}>\r\n                                                                                    <Button fullWidth color=\"secondary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" disabled={user.superAdmin} onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}>Close pitch</Button>\r\n\r\n                                                                                    <Typography align=\"center\" variant=\"body2\" style={{marginTop: 12}}>\r\n                                                                                        <b>\r\n                                                                                            <u>\r\n                                                                                                Please do it carefully\r\n                                                                                                as you cannot\r\n                                                                                                reverse\r\n                                                                                                your action.\r\n                                                                                            </u>\r\n                                                                                        </b>\r\n                                                                                    </Typography>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/*<FlexView*/}\r\n                                                                    {/*    column*/}\r\n                                                                    {/*    width=\"100%\"*/}\r\n                                                                    {/*    marginTop={20}*/}\r\n                                                                    {/*    className={css(styles.admin_state_control_box)}*/}\r\n                                                                    {/*>*/}\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*        paragraph*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        This offer is currently in the*/}\r\n                                                                    {/*        pitch*/}\r\n                                                                    {/*        phase. You can now move it to the pledge*/}\r\n                                                                    {/*        phase.*/}\r\n                                                                    {/*        The*/}\r\n                                                                    {/*        issuer will be notified and prompted to*/}\r\n                                                                    {/*        create*/}\r\n                                                                    {/*        their*/}\r\n                                                                    {/*        pledge page.*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        <b>*/}\r\n                                                                    {/*            <u>*/}\r\n                                                                    {/*                Please do it carefully as you cannot*/}\r\n                                                                    {/*                reverse*/}\r\n                                                                    {/*                your action.*/}\r\n                                                                    {/*            </u>*/}\r\n                                                                    {/*        </b>*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Divider*/}\r\n                                                                    {/*        style={{*/}\r\n                                                                    {/*            marginTop: 30,*/}\r\n                                                                    {/*            marginBottom: 30*/}\r\n                                                                    {/*        }}*/}\r\n                                                                    {/*    />*/}\r\n\r\n                                                                    {/*    <FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginRight={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"primary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(true)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Move to pledge phase*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginLeft={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"secondary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Close pitch*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*    </FlexView>*/}\r\n\r\n                                                                    {/*    {*/}\r\n                                                                    {/*        !user.superAdmin*/}\r\n                                                                    {/*            ?*/}\r\n                                                                    {/*            null*/}\r\n                                                                    {/*            :*/}\r\n                                                                    {/*            <Typography*/}\r\n                                                                    {/*                variant=\"body1\"*/}\r\n                                                                    {/*                color=\"error\"*/}\r\n                                                                    {/*                align=\"left\"*/}\r\n                                                                    {/*                style={{*/}\r\n                                                                    {/*                    marginTop: 20*/}\r\n                                                                    {/*                }}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Only group admin can do this.*/}\r\n                                                                    {/*            </Typography>*/}\r\n                                                                    {/*    }*/}\r\n                                                                    {/*</FlexView>*/}\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                                    ?\r\n                                                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                    && project.createdByGroupAdmin\r\n                                                                                    && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                                        ?\r\n                                                                                        \"You can create a pledge page for this offer now.\"\r\n                                                                                        :\r\n                                                                                        \"The issuer has been prompted to create their pledge page. You will then be able to check the pledge before publishing.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has moved to the pledge phase.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                    {\r\n                                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                        && project.createdByGroupAdmin\r\n                                                                        && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                        && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                            ?\r\n                                                                            <FlexView marginTop={20}>\r\n                                                                                <Button color=\"primary\" variant=\"outlined\" size=\"medium\"\r\n                                                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                                                    onClick={() => {\r\n                                                                                        createPledgeDialog_toggleDialog();\r\n                                                                                        createPledgeDialog_setProject(project);\r\n                                                                                        selectProjectVisibility_setProject(project);\r\n                                                                                    }}>\r\n                                                                                    Create pledge\r\n                                                                                </Button>\r\n                                                                            </FlexView>\r\n                                                                            :\r\n                                                                            null\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/*/!** Publish Pledge step *!/*/}\r\n                                                {/*<Step*/}\r\n                                                {/*    key={ADMIN_OFFER_STATES_PUBLISH_PLEDGE}*/}\r\n                                                {/*    disabled={*/}\r\n                                                {/*        isProjectWaitingToGoLive(project)*/}\r\n                                                {/*        || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*        || isProjectInLivePitchPhase(project)*/}\r\n                                                {/*        || isProjectPitchExpiredWaitingForAdminToCheck(project)*/}\r\n                                                {/*        || isProjectFailed(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*    completed={*/}\r\n                                                {/*        isProjectFailed(project)*/}\r\n                                                {/*        || isProjectSuccessful(project)*/}\r\n                                                {/*        || isProjectInLivePledgePhase(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*>*/}\r\n                                                {/*    <StepButton*/}\r\n                                                {/*        onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PLEDGE)}*/}\r\n                                                {/*    >*/}\r\n                                                {/*        <StepLabel*/}\r\n                                                {/*            error={*/}\r\n                                                {/*                isProjectFailed(project)*/}\r\n                                                {/*                || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*            }*/}\r\n                                                {/*        >*/}\r\n                                                {/*            Publish pledge*/}\r\n                                                {/*        </StepLabel>*/}\r\n                                                {/*    </StepButton>*/}\r\n                                                {/*    <StepContent>*/}\r\n                                                {/*        {*/}\r\n                                                {/*            project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED*/}\r\n                                                {/*                ?*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                    className={css(styles.admin_state_control_box)}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                        paragraph*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        The issuer has now created their pledge page.*/}\r\n                                                {/*                        Please*/}\r\n                                                {/*                        check this carefully before publishing as you*/}\r\n                                                {/*                        cannot*/}\r\n                                                {/*                        reverse this action. You can also control who*/}\r\n                                                {/*                        can see*/}\r\n                                                {/*                        this pledge using the options below.*/}\r\n                                                {/*                    </Typography>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 25,*/}\r\n                                                {/*                            marginBottom: 20*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    /!** Select project visibility before publishing pledge *!/*/}\r\n                                                {/*                    <SelectPledgeVisibility/>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 35,*/}\r\n                                                {/*                            marginBottom: 25*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    <FlexView*/}\r\n                                                {/*                        marginTop={20}*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginRight={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"primary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({*/}\r\n                                                {/*                                    decision: true,*/}\r\n                                                {/*                                    projectVisibilitySetting*/}\r\n                                                {/*                                })}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Publish pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginLeft={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"secondary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({decision: false})}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Close pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                    </FlexView>*/}\r\n\r\n                                                {/*                    {*/}\r\n                                                {/*                        !user.superAdmin*/}\r\n                                                {/*                            ?*/}\r\n                                                {/*                            null*/}\r\n                                                {/*                            :*/}\r\n                                                {/*                            <Typography*/}\r\n                                                {/*                                variant=\"body1\"*/}\r\n                                                {/*                                color=\"error\"*/}\r\n                                                {/*                                align=\"left\"*/}\r\n                                                {/*                                style={{*/}\r\n                                                {/*                                    marginTop: 20*/}\r\n                                                {/*                                }}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Only group admin can do this.*/}\r\n                                                {/*                            </Typography>*/}\r\n                                                {/*                    }*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*                :*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        color={*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"secondary\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"primary\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        {*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"This offer has been rejected.\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"This offer has been published.\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                    </Typography>*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*        }*/}\r\n                                                {/*    </StepContent>*/}\r\n                                                {/*</Step>*/}\r\n                                            </Stepper>\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 0}} sm={{span: 12, order: 0}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}}>\r\n                                            {\r\n                                                !isProjectLive(project)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FlexView column marginTop={30}>\r\n                                                        <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                            onClick={() => realtimeDBUtils.toggleProjectLivelinessTemporarily(user, JSON.parse(JSON.stringify(project)))}\r\n                                                            disabled={\r\n                                                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                                                || (\r\n                                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                                    && user.anid !== project.anid\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"Open again\"\r\n                                                                    :\r\n                                                                    \"Close temporarily\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        {\r\n                                                            !user.superAdmin\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography variant=\"body2\" align=\"left\" color=\"error\" style={{marginTop: 12}}>Only group admins can do this.</Typography>\r\n                                                        }\r\n                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 15}}>\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"This offer will be opened again.\"\r\n                                                                    :\r\n                                                                    \"This offer will be closed temporarily and it will no longer be visible to any investors until you open it again.\"\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Main presentation (Campaign) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_CAMPAIGN\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\"> Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n\r\n                                    {\r\n                                        // pitch deck\r\n                                        !project.Pitch.presentationDocument\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography variant=\"h5\">Pitch deck</Typography>\r\n                                                <DocumentsDownload documents={project.Pitch.presentationDocument} shouldShowRiskWarningOnDownload={true}/>\r\n                                                <Divider style={{marginTop: 10}}/>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        // pitch presentation text\r\n                                        !project.Pitch.presentationText\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(project.Pitch.presentationText.ops)}} marginTop={30}/>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/*/!** Investors pledged (only available when the primary offer expired and there are investors pledging the offer) *!/*/}\r\n                    {/*{*/}\r\n                    {/*    mainBody !== MAIN_BODY_INVESTORS_PLEDGED*/}\r\n                    {/*        ?*/}\r\n                    {/*        null*/}\r\n                    {/*        :*/}\r\n                    {/*        <Col*/}\r\n                    {/*            xs={12}*/}\r\n                    {/*            sm={12}*/}\r\n                    {/*            md={12}*/}\r\n                    {/*            lg={{span: 6, offset: 3}}*/}\r\n                    {/*        >*/}\r\n                    {/*            <FlexView*/}\r\n                    {/*                column*/}\r\n                    {/*                marginTop={30}*/}\r\n                    {/*            >*/}\r\n                    {/*                <Typography*/}\r\n                    {/*                    variant=\"h5\"*/}\r\n                    {/*                    align=\"left\"*/}\r\n                    {/*                    paragraph*/}\r\n                    {/*                >*/}\r\n                    {/*                    Pledges from investors*/}\r\n                    {/*                </Typography>*/}\r\n\r\n                    {/*                /!** Pledges table *!/*/}\r\n                    {/*                <PledgesTable/>*/}\r\n                    {/*            </FlexView>*/}\r\n                    {/*        </Col>*/}\r\n                    {/*}*/}\r\n\r\n                    {/** Comments */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_COMMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}}>\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 8, order: 1}} lg={{span: 8, order: 1}} style={{marginTop: 40}}>\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography align=\"center\" style={{padding: 15, backgroundColor: colors.kick_starter_background_color_1, marginBottom: 30}} variant=\"body2\" color=\"inherit\">Only investors can post comments.</Typography>\r\n                                            }\r\n\r\n                                            {\r\n                                                !commentsLoaded\r\n                                                    ?\r\n                                                    // comments not loaded yet --> load them and wait for them to be loaded\r\n                                                    <FlexView marginTop={30} hAlignContent=\"center\" width=\"100%\">\r\n                                                        <HashLoader\r\n                                                            color={\r\n                                                                !groupProperties\r\n                                                                    ?\r\n                                                                    colors.primaryColor\r\n                                                                    :\r\n                                                                    groupProperties.settings.primaryColor\r\n                                                            }\r\n                                                        />\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    (\r\n                                                        sortedComments.length > 0\r\n                                                            ?\r\n                                                            (\r\n                                                                <FlexView className={css(styles.border_box)} style={{padding: 15, backgroundColor: colors.kick_starter_background_color}} column>\r\n                                                                    {\r\n                                                                        sortedComments.map(comment => (\r\n                                                                            (\r\n                                                                                // if the comment is from the current user\r\n                                                                                comment.commentedBy === user.id\r\n                                                                                    ?\r\n                                                                                    <FlexView key={comment.id} column marginTop={12} marginBottom={12} className={css(styles.border_box)} style={{backgroundColor: colors.white, width: \"100%\"}}>\r\n                                                                                        <Typography style={{marginTop: 15, marginBottom: 10}} variant=\"body1\" className={css(styles.gray_text)} align=\"left\">Update your comment</Typography>\r\n                                                                                        <InputBase name=\"currentCommentText\" onChange={this.onTextChanged} value={currentCommentText} fullWidth rows={5} multiline className={css(styles.border_box)}/>\r\n                                                                                        <FlexView marginTop={25} width=\"100%\" hAlignContent=\"right\">\r\n                                                                                            <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onCancelUpdateCurrentComment}>Cancel</Button>\r\n                                                                                            <Button style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" disabled={(currentComment && currentComment.comment === currentCommentText) || currentCommentText.trim().length === 0} onClick={this.onSubmitUpdateCurrentComment}>Update</Button>\r\n                                                                                        </FlexView>\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>{reply.text}</Typography>\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                                    :\r\n                                                                                    <FlexView key={comment.id} className={css(styles.border_box)} style={{backgroundColor: colors.white}} column marginTop={12} marginBottom={12}>\r\n                                                                                        {/** Date */}\r\n                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                            {\r\n                                                                                                comment.status === DB_CONST.COMMENT_STATUS_POSTED\r\n                                                                                                    ?\r\n                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                                    :\r\n                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                            }\r\n                                                                                        </Typography>\r\n\r\n                                                                                        {/** Comment author */}\r\n                                                                                        {\r\n                                                                                            user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                            && user.superAdmin\r\n                                                                                                ?\r\n                                                                                                <NavLink\r\n                                                                                                    to={\r\n                                                                                                        groupUserName\r\n                                                                                                            ?\r\n                                                                                                            ROUTES.USER_PROFILE\r\n                                                                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                            :\r\n                                                                                                            ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                    }\r\n                                                                                                >\r\n                                                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">by {comment.author.firstName} {comment.author.lastName}</Typography>\r\n                                                                                                </NavLink>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Comment text */}\r\n                                                                                        <Typography style={{marginTop: 12}} variant=\"body1\" align=\"left\">{comment.comment}</Typography>\r\n\r\n                                                                                        {/** Reply button */}\r\n                                                                                        {\r\n                                                                                            (user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                && user.id === projectIssuer.id)\r\n                                                                                            || (\r\n                                                                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                && project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                                && user.anid === project.anid\r\n                                                                                            )\r\n                                                                                                ?\r\n                                                                                                <FlexView marginTop={25}>\r\n                                                                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                                        disabled={\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited === null\r\n                                                                                                        }\r\n                                                                                                        onClick={() => this.onToggleReplyToComment(comment, null)}\r\n                                                                                                    >Reply</Button>\r\n                                                                                                </FlexView>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Reply input area */}\r\n                                                                                        {\r\n                                                                                            replyingToComment !== null\r\n                                                                                            && replyingToComment.id === comment.id\r\n                                                                                            && replyEdited === null\r\n                                                                                                ?\r\n                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>\r\n                                                                                                            {reply.text}\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Delete/edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            // allow group admins that created this project,\r\n                                                                                                            // and issuer that created this project and owns this reply\r\n                                                                                                            // to edit/delete this reply\r\n                                                                                                            (\r\n                                                                                                                user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin)\r\n                                                                                                            )\r\n                                                                                                            && user.id === projectIssuer.id\r\n                                                                                                            && user.id === reply.repliedBy\r\n                                                                                                                ?\r\n                                                                                                                <FlexView marginTop={16}>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"secondary\" onClick={() => this.onDeleteCommentReply(reply)} style={{marginRight: 10}}>Delete<DeleteIcon fontSize=\"small\" style={{marginLeft: 6}}/>\r\n                                                                                                                    </Button>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"primary\" onClick={() => this.onToggleReplyToComment(comment, reply)}>Edit<EditIcon fontSize=\"small\" style={{marginLeft: 6}}/></Button>\r\n                                                                                                                </FlexView>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n\r\n                                                                                                        {/** Reply input area to edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited !== null\r\n                                                                                                            && replyEdited.id === reply.id\r\n                                                                                                                ?\r\n                                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                            )\r\n                                                                        ))\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                            )\r\n                                                            :\r\n                                                            user.type !== DB_CONST.TYPE_INVESTOR\r\n                                                                ?\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                    <FlexView marginTop={25} column hAlignContent=\"center\">\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\" fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                    && !investorSelfCertificationAgreement\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n\r\n                                                                        {\r\n                                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                                        }\r\n                                                                    </FlexView>\r\n                                                                </FlexView>\r\n                                                    )\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}} style={{marginTop: 40}}>\r\n\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    (\r\n                                                        comments.filter(comment => comment.commentedBy === user.id).length === 0\r\n                                                            ?\r\n                                                            <FlexView column>\r\n                                                                <Typography variant=\"subtitle1\" align=\"left\" style={{marginBottom: 25}}>This is your space to offer support and feedback to the issuer. Your identity will not be shared.</Typography>\r\n\r\n                                                                {/** Post a comment - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\"fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                    && !investorSelfCertificationAgreement\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n\r\n                                                                {/** Check investor's self certification status - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        this.renderInvestorSelfCertifyReminder()\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            <Typography variant=\"subtitle1\" align=\"left\">You have already commented on this investment opportunity. You can only edit your comment.</Typography>\r\n                                                    )\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" align=\"left\">All the comments from investors are displayed anonymously here.</Typography>\r\n                                            }\r\n\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Documents */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_DOCUMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Supporting documents</Typography>\r\n\r\n                                    {\r\n                                        project.Pitch.supportingDocuments && project.Pitch.supportingDocuments.findIndex(document => !document.hasOwnProperty('removed')) !== -1\r\n                                            ?\r\n                                            <DocumentsDownload documents={project.Pitch.supportingDocuments} shouldShowRiskWarningOnDownload={true}/>\r\n                                            :\r\n                                            <Typography variant=\"body1\" color=\"textSecondary\" style={{marginTop: 35}}>No supporting documents uploaded.</Typography>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Notes */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_NOTES\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Extra information</Typography>\r\n\r\n                                    {/** Financial round */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('financialRound')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Financial round the company is looking for:&nbsp;&nbsp;\r\n                                                    <b>\r\n                                                        {project.Pitch.financialRound}\r\n                                                    </b>\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Prior investment */}\r\n                                    <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={40} vAlignContent=\"center\">\r\n                                        <Typography variant=\"body1\" align=\"left\">Prior investment raised:&nbsp;&nbsp;<b>\r\n                                                {\r\n                                                    project.Pitch.amountRaised === 0\r\n                                                        ?\r\n                                                        \"none\"\r\n                                                        :\r\n                                                        `£${Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()}`\r\n                                                }\r\n                                            </b>\r\n                                        </Typography>\r\n\r\n                                        {/*{*/}\r\n                                        {/*    project.Pitch.amountRaised === 0*/}\r\n                                        {/*        ?*/}\r\n                                        {/*        null*/}\r\n                                        {/*        :*/}\r\n                                        {/*        <Typography*/}\r\n                                        {/*            style={{marginTop: 30}}*/}\r\n                                        {/*            variant=\"body1\"*/}\r\n                                        {/*            align=\"left\"*/}\r\n                                        {/*        >*/}\r\n                                        {/*            Investors publicly committed:*/}\r\n                                        {/*            {*/}\r\n                                        {/*                !project.Pitch.investorsCommitted*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    <b>&nbsp;&nbsp; Not provided.</b>*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    <b>&nbsp;&nbsp; {project.Pitch.investorsCommitted}</b>*/}\r\n                                        {/*            }*/}\r\n                                        {/*        </Typography>*/}\r\n                                        {/*}*/}\r\n                                    </FlexView>\r\n\r\n                                    {/** How fund is being raised */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('howFundIsBeingRaised')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">How the company is rai{project.Pitch.howFundIsBeingRaised}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Details about earlier fundraising rounds */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Details about earlier fundraising rounds:<br/><br/> {project.Pitch.detailsAboutEarlierFundraisingRounds}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** QIB - special news */}\r\n                                    {\r\n                                        project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                        && (\r\n                                            (\r\n                                                (\r\n                                                    groupProperties\r\n                                                    && groupProperties.groupUserName === \"qib\"\r\n                                                )\r\n                                                && (\r\n                                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                                        && user.anid === groupProperties.anid)\r\n                                                    || (user.type === DB_CONST.TYPE_ISSUER\r\n                                                        && user.id === project.issuerID)\r\n                                                )\r\n                                            )\r\n                                            ||\r\n                                            (\r\n                                                !groupProperties\r\n                                                && user.type === DB_CONST.TYPE_ADMIN\r\n                                                && user.superAdmin\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Special news that Briony should talk about:\r\n                                                    <br/><br/>\r\n                                                    {project.Pitch.qibSpecialNews}\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Risk warning footer */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <RiskWarning/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Prevent the investors from interacting with the offer if they have not self-certified\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvestorSelfCertifyReminder = () => {\r\n        const {\r\n            groupUserName,\r\n            user,\r\n            investorSelfCertificationAgreement,\r\n            project\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_INVESTOR) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            utils.isProjectLive(project)\r\n            && !investorSelfCertificationAgreement\r\n                ?\r\n                <FlexView column marginTop={20}>\r\n                    <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot interact with this offer as you have not completed your self certification.</Typography>\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                `${ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName)}?tab=Profile`\r\n                                :\r\n                                `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Profile`\r\n                        }\r\n                        style={{\r\n                            marginTop: 4\r\n                        }}\r\n                    >\r\n                        <Typography variant=\"body2\"><u>Self certify</u></Typography>\r\n                    </NavLink>\r\n                </FlexView>\r\n                :\r\n                null\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Function to decide if information should be hidden or not\r\n     */\r\n    shouldHideInformation = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn\r\n        } = this.props;\r\n\r\n        // user is an admin\r\n        if (user.type === DB_CONST.TYPE_ADMIN) {\r\n            // user is a super admin\r\n            if (user.superAdmin) {\r\n                return false;\r\n            }\r\n\r\n            // user is a group admin and is the group that owns the project\r\n            if (user.anid === project.anid) {\r\n                return false;\r\n            }\r\n\r\n            // other group admins must go through the checks of project's visibility\r\n            switch (project.visibility) {\r\n                case DB_CONST.PROJECT_VISIBILITY_PUBLIC:\r\n                    return false;\r\n                case DB_CONST.PROJECT_VISIBILITY_RESTRICTED:\r\n                    return true;\r\n                case DB_CONST.PROJECT_VISIBILITY_PRIVATE:\r\n                    return true;\r\n                default:\r\n                    return true;\r\n            }\r\n        }\r\n        // user is not an admin\r\n        else {\r\n            // should not hide any information if the user is an issuer that created this offer\r\n            if (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID) {\r\n                return false;\r\n            }\r\n\r\n            // if somehow groupsUserIsIn is null, information must be hidden\r\n            if (!groupsUserIsIn) {\r\n                return true;\r\n            }\r\n\r\n            // if the project is not a restricted one, should not hide any information\r\n            if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_RESTRICTED) {\r\n                return false;\r\n            }\r\n\r\n            // user is not the member of the group that posted this offer --> hide information\r\n            // otherwise, should not hide information\r\n            return groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render the status for this project\r\n     */\r\n    renderProjectStatus = () => {\r\n        const {\r\n            project\r\n        } = this.props;\r\n\r\n        let stt = {text: '', color: ''};\r\n\r\n        if (utils.isProjectWaitingToGoLive(project)\r\n            || utils.isProjectRejectedToGoLive(project)\r\n            || utils.isProjectSuccessful(project)\r\n            || utils.isProjectFailed(project)\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} marginBottom={30}>\r\n                    <Typography variant=\"body1\" color=\"error\" align=\"left\">\r\n                        {\r\n                            utils.isProjectWaitingToGoLive(project)\r\n                                ?\r\n                                \"Offer is being checked.\"\r\n                                :\r\n                                utils.isProjectRejectedToGoLive(project)\r\n                                    ?\r\n                                    \"Offer has been rejected.\"\r\n                                    :\r\n                                    \"Offer closed.\"\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (project.PrimaryOffer) {\r\n            switch (project.PrimaryOffer.status) {\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pledge phase</Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.PrimaryOffer.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_EXPIRED:\r\n                    stt.text = \"Pledge has expired.\";\r\n                    stt.color = \"primary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (project.Pitch.status) {\r\n                case DB_CONST.PITCH_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pitch phase\r\n                            </Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.Pitch.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\"\r\n                            >days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER:\r\n                    stt.text = \"Awaiting pledge page to be created.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_REJECTED:\r\n                    stt.text = \"Offer failed as its pitch was rejected.\";\r\n                    stt.color = \"error\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN:\r\n                    stt.text = \"Pitch expired. Awaiting Group Admin review.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <FlexView marginTop={30} marginBottom={30}>\r\n                <Typography align=\"left\" variant=\"body1\" color={stt.color}>{stt.text}</Typography>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Check whether voting should be disabled or not\r\n     */\r\n    shouldVoteDisabled = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn,\r\n            investorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        // do not let the owner of the pitch vote for themselves\r\n        // also, do not let the admin vote the pitch\r\n        if (project.issuerID === firebase.auth().currentUser.uid\r\n            || user.type === DB_CONST.TYPE_ADMIN\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        if (!groupsUserIsIn) {\r\n            return true;\r\n        }\r\n\r\n        // user is not in the group that posted the offer\r\n        if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n            && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        // do not let investors who haven't uploaded self-certification vote\r\n        if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (!investorSelfCertificationAgreement) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // do not let issuers vote\r\n        if (user.type === DB_CONST.TYPE_ISSUER) {\r\n            return true;\r\n        }\r\n\r\n        // do not allow investors to vote when the Pitch has expired\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING) {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Displaying votes (number or percentage depending on the type of user who is viewing it)\r\n     *\r\n     * If an investor is viewing it, percentage should be displayed.\r\n     *\r\n     * If an issuer or admin is viewing it, number should be displayed.\r\n     */\r\n    displayVote = type => {\r\n        const {\r\n            // user,\r\n            votes\r\n        } = this.props;\r\n\r\n        let yesVotes = 0;\r\n        let noVotes = 0;\r\n\r\n        votes.forEach(vote => {\r\n            const voted = vote.voted;\r\n            if (voted !== '') {\r\n                if (voted) {\r\n                    yesVotes += 1;\r\n                } else {\r\n                    noVotes += 1;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (type) {\r\n            return yesVotes;\r\n        } else {\r\n            return noVotes\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Get investor vote\r\n *\r\n * @param votes\r\n * @param user\r\n * @returns {null|*}\r\n */\r\nconst getInvestorVote = (votes, user) => {\r\n    if (votes.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    let investorVoteIndex = votes.findIndex(vote => vote.investorID === user.id);\r\n    // investor has voted\r\n    if (investorVoteIndex !== -1) {\r\n        return votes[investorVoteIndex];\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * Comment dialog - displayed when the Investor clicks on the Comment button\r\n */\r\nclass CommentDialog extends Component {\r\n\r\n    onClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onCommentTextChanged = event => {\r\n        this.props.onCommentTextChanged(event);\r\n    };\r\n\r\n    onSubmitCommentClick = () => {\r\n        this.props.onSubmitCommentClick();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            open,\r\n            project,\r\n            commentText,\r\n            commentSubmitClick\r\n        } = this.props;\r\n\r\n        if (!project) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Dialog fullWidth open={open} onClose={this.onClose}>\r\n                <DialogTitle>Make a comment</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText align=\"left\">Please enter your comment here.</DialogContentText>\r\n                    <InputBase error={commentText.trim().length === 0 && commentSubmitClick} name=\"commentText\" value={commentText} onChange={this.onCommentTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                </DialogContent>\r\n                <DialogActions style={{paddingTop: 20, paddingBottom: 20, paddingRight: 24}}>\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onClose}>Cancel</Button>\r\n                    <Button disabled={commentText.trim().length > 0 && commentSubmitClick} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" onClick={this.onSubmitCommentClick}>Post comment</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Reply input area\r\n */\r\nclass CommentReplyInputArea extends Component {\r\n\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            replyText\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column marginTop={30} width=\"auto\">\r\n                <InputBase name=\"replyText\" value={replyText} onChange={this.onTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                <FlexView marginTop={18} width=\"100%\" hAlignContent=\"right\">\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" className={css(sharedStyles.no_text_transform)} onClick={() => this.onToggleReplyToComment(null, null)}>Cancel</Button>\r\n                    <Button disabled={replyText.trim().length === 0} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={this.onSubmitCommentReply}>Submit</Button>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectDetailsMain);\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    gray_text: {\r\n        color: colors.gray_700\r\n    },\r\n\r\n    faq_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none',\r\n        backgroundColor: colors.white,\r\n        marginBottom: 12,\r\n        ':hover': {\r\n            backgroundColor: colors.gray_50\r\n        }\r\n    },\r\n\r\n    border_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 14\r\n    },\r\n\r\n    admin_state_control_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 24,\r\n        backgroundColor: colors.gray_100\r\n    },\r\n\r\n    sticky_body_sections_bar: {\r\n        position: \"sticky\",\r\n        top: 0,\r\n        backgroundColor: colors.white,\r\n        zIndex: 1\r\n    },\r\n\r\n    main_body_section: {\r\n        minHeight: 600,\r\n        padding: 15,\r\n        backgroundColor: colors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass PrivacyPolicyPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Privacy policy\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.privacyPolicy\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.privacyPolicy.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PrivacyPolicyPage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass TermsOfUsePage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Terms of use\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.termsOfUse\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.termsOfUse.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(TermsOfUsePage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass RiskWarningPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row noGutters>\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Risk warning\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row noGutters>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.riskWarning\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.riskWarning.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarningPage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass CreatePitchTermsAndConditionsPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Row noGutters style={{backgroundColor: colors.gray_100}}>\r\n                                    <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}} style={{paddingTop: 30, paddingBottom: 30, paddingLeft: 12, paddingRight: 12}}>\r\n                                        <Typography variant=\"h5\" align=\"left\">\r\n                                            <b>{\"Create pitch terms and conditions\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.createPitchTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.createPitchTermsAndConditions.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CreatePitchTermsAndConditionsPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    FormLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\nconst subjects = [\r\n    \"I am an investor\",\r\n    \"I am looking to raise funds\",\r\n    \"I am a potential partner or supplier\",\r\n    \"Other query\"\r\n];\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authenticating: state.auth.authenticating,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    email: '',\r\n    subject: '-',\r\n    name: '',\r\n    phone: '',\r\n    description: '',\r\n\r\n    submitClick: false,\r\n    sending: false,\r\n    error: false,\r\n\r\n    hasSetData: false\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...initState\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.CONTACT_US : ROUTES.CONTACT_US_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Submit button is clicked\r\n     */\r\n    onSubmitClick = event => {\r\n        event.preventDefault();\r\n\r\n        const {\r\n            clubAttributes,\r\n            groupProperties,\r\n\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description\r\n        } = this.state;\r\n\r\n        if (email.trim().length === 0\r\n            || subject === \"-\"\r\n            || name.trim().length === 0\r\n            || description.trim().length === 0\r\n        ) {\r\n            this.setState({\r\n                submitClick: true\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sending: true\r\n        });\r\n\r\n        let groupID = groupProperties ? groupProperties.anid : \"InvestWestSupport\";\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_ENQUIRY,\r\n                data: {\r\n                    sender: email.toLowerCase(),\r\n                    receiver: groupID,\r\n                    subject,\r\n                    description,\r\n                    senderName: name,\r\n                    senderPhone: phone\r\n                }\r\n            })\r\n            .then(() => {\r\n                this.setState({\r\n                    ...initState\r\n                });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Your email has been successfully sent.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n\r\n                realtimeDBUtils\r\n                    .logContactUsEnquiry({\r\n                        userID: user ? user.id : null,\r\n                        anid: !groupProperties ? \"Invest West super admin\" : groupProperties.anid,\r\n                        email: email.toLowerCase(),\r\n                        name,\r\n                        phone,\r\n                        subject,\r\n                        description\r\n                    })\r\n                    .then(enquiryID => {\r\n                        // track activity for authenticated user\r\n                        if (user) {\r\n                            realtimeDBUtils\r\n                                .trackActivity({\r\n                                    userID: user.id,\r\n                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                    interactedObjectLocation: DB_CONST.CONTACT_US_ENQUIRIES_CHILD,\r\n                                    interactedObjectID: enquiryID,\r\n                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY.replace(\"%group%\", groupProperties.displayName)\r\n                                });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    error: true,\r\n                    sending: false\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            authenticating,\r\n            userLoaded,\r\n            clubAttributesLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description,\r\n            submitClick,\r\n            sending\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    marginTop={30}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={colors.primaryColor}\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || !clubAttributesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    marginTop={20}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <Row noGutters style={{padding: 14}}>\r\n                    <Col xs={12} sm={12} md={{span: 11, offset: 1}} lg={{span: 5, offset: 2}}>\r\n                        <form onSubmit={this.onSubmitClick}>\r\n                            <FlexView column marginTop={40}>\r\n                                <Typography variant=\"h4\">\r\n                                    <b>Contact Us</b>\r\n                                </Typography>\r\n\r\n                                <FlexView width=\"100%\" marginTop={40}>\r\n                                    <FormControl fullWidth required error={submitClick && email.trim().length === 0}>\r\n                                        <FormLabel> Your email address</FormLabel>\r\n                                        <TextField value={email} name=\"email\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && email.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth required error={submitClick && subject === \"-\"}>\r\n                                        <FormLabel>\r\n                                            Subject\r\n                                        </FormLabel>\r\n                                        <Select name=\"subject\" value={subject} variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} input={<OutlinedInput/>} error={submitClick && subject === \"-\"} >\r\n                                            <MenuItem value={\"-\"} key={-1}>\r\n                                                -\r\n                                            </MenuItem>\r\n                                            {\r\n                                                subjects.map((subject, index) => (\r\n                                                    <MenuItem\r\n                                                        value={subject}\r\n                                                        key={index}\r\n                                                    >\r\n                                                        {subject}\r\n                                                    </MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Name\r\n                                        </FormLabel>\r\n                                        <TextField value={name} name=\"name\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && name.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Phone number\r\n                                        </FormLabel>\r\n                                        <TextField value={phone} name=\"phone\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n                            </FlexView>\r\n\r\n                            <FlexView width=\"100%\" marginTop={25}>\r\n                                <FormControl fullWidth required error={submitClick && description.trim().length === 0}>\r\n                                    <FormLabel>\r\n                                        Description\r\n                                    </FormLabel>\r\n                                    <TextField value={description} name=\"description\" variant=\"outlined\" margin=\"dense\" multiline rows={5} rowsMax={5} onChange={this.onTextChanged} error={submitClick && description.trim().length === 0}/>\r\n                                    <FormHelperText>\r\n                                        Please enter the details of your request. A member of our support team will respond as soon as possible.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {\r\n                                sending\r\n                                    ?\r\n                                    <FlexView marginTop={30} width=\"100%\" hAlignContent=\"center\">\r\n                                        <HashLoader\r\n                                            color={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            <Row\r\n                            >\r\n                                <Col xs={12} sm={12} md={4} lg={4} style={{width: \"100%\", marginTop: 50}}>\r\n                                    <FormControl fullWidth>\r\n                                        <Button type=\"submit\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} color=\"primary\" fullWidth>\r\n                                            Submit\r\n                                        </Button>\r\n                                    </FormControl>\r\n                                </Col>\r\n                            </Row>\r\n                        </form>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Footer/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactUs);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    FormLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\nconst subjects = [\r\n    \"I am an investor\",\r\n    \"I am looking to raise funds\",\r\n    \"I am a potential partner or supplier\",\r\n    \"Other query\"\r\n];\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authenticating: state.auth.authenticating,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    email: '',\r\n    subject: '-',\r\n    name: '',\r\n    phone: '',\r\n    description: '',\r\n\r\n    submitClick: false,\r\n    sending: false,\r\n    error: false,\r\n\r\n    hasSetData: false\r\n};\r\n\r\nclass ContactUs2 extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...initState\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.CONTACT_US : ROUTES.CONTACT_US_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Submit button is clicked\r\n     */\r\n    onSubmitClick = event => {\r\n        event.preventDefault();\r\n\r\n        const {\r\n            clubAttributes,\r\n            groupProperties,\r\n\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description\r\n        } = this.state;\r\n\r\n        if (email.trim().length === 0\r\n            || subject === \"-\"\r\n            || name.trim().length === 0\r\n            || description.trim().length === 0\r\n        ) {\r\n            this.setState({\r\n                submitClick: true\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sending: true\r\n        });\r\n\r\n        let groupID = groupProperties ? groupProperties.anid : \"InvestWestSupport\";\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_ENQUIRY,\r\n                data: {\r\n                    sender: email.toLowerCase(),\r\n                    receiver: groupID,\r\n                    subject,\r\n                    description,\r\n                    senderName: name,\r\n                    senderPhone: phone\r\n                }\r\n            })\r\n            .then(() => {\r\n                this.setState({\r\n                    ...initState\r\n                });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Your email has been successfully sent.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n\r\n                realtimeDBUtils\r\n                    .logContactUsEnquiry({\r\n                        userID: user ? user.id : null,\r\n                        anid: !groupProperties ? \"Invest West super admin\" : groupProperties.anid,\r\n                        email: email.toLowerCase(),\r\n                        name,\r\n                        phone,\r\n                        subject,\r\n                        description\r\n                    })\r\n                    .then(enquiryID => {\r\n                        // track activity for authenticated user\r\n                        if (user) {\r\n                            realtimeDBUtils\r\n                                .trackActivity({\r\n                                    userID: user.id,\r\n                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                    interactedObjectLocation: DB_CONST.CONTACT_US_ENQUIRIES_CHILD,\r\n                                    interactedObjectID: enquiryID,\r\n                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY.replace(\"%group%\", groupProperties.displayName)\r\n                                });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    error: true,\r\n                    sending: false\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            authenticating,\r\n            userLoaded,\r\n            clubAttributesLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description,\r\n            submitClick,\r\n            sending\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    marginTop={30}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={colors.primaryColor}\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || !clubAttributesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    marginTop={20}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <Row noGutters style={{padding: 14}}>\r\n                    <Col xs={12} sm={12} md={{span: 11, offset: 1}} lg={{span: 5, offset: 2}}>\r\n                        <form onSubmit={this.onSubmitClick}>\r\n                            <FlexView column marginTop={40}>\r\n                                <Typography variant=\"h4\">\r\n                                    <b>Contact Us</b>\r\n                                </Typography>\r\n\r\n                                <FlexView width=\"100%\" marginTop={40}>\r\n                                    <FormControl fullWidth required error={submitClick && email.trim().length === 0}>\r\n                                        <FormLabel> Your email address</FormLabel>\r\n                                        <TextField value={email} name=\"email\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && email.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth required error={submitClick && subject === \"-\"}>\r\n                                        <FormLabel>\r\n                                            Subject\r\n                                        </FormLabel>\r\n                                        <Select name=\"subject\" value={subject} variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} input={<OutlinedInput/>} error={submitClick && subject === \"-\"} >\r\n                                            <MenuItem value={\"-\"} key={-1}>\r\n                                                -\r\n                                            </MenuItem>\r\n                                            {\r\n                                                subjects.map((subject, index) => (\r\n                                                    <MenuItem\r\n                                                        value={subject}\r\n                                                        key={index}\r\n                                                    >\r\n                                                        {subject}\r\n                                                    </MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Name\r\n                                        </FormLabel>\r\n                                        <TextField value={name} name=\"name\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && name.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Phone number\r\n                                        </FormLabel>\r\n                                        <TextField value={phone} name=\"phone\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n                            </FlexView>\r\n\r\n                            <FlexView width=\"100%\" marginTop={25}>\r\n                                <FormControl fullWidth required error={submitClick && description.trim().length === 0}>\r\n                                    <FormLabel>\r\n                                        Description\r\n                                    </FormLabel>\r\n                                    <TextField value={description} name=\"description\" variant=\"outlined\" margin=\"dense\" multiline rows={5} rowsMax={5} onChange={this.onTextChanged} error={submitClick && description.trim().length === 0}/>\r\n                                    <FormHelperText>\r\n                                        Please enter the details of your request. A member of our support team will respond as soon as possible.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {\r\n                                sending\r\n                                    ?\r\n                                    <FlexView marginTop={30} width=\"100%\" hAlignContent=\"center\">\r\n                                        <HashLoader\r\n                                            color={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            <Row\r\n                            >\r\n                                <Col xs={12} sm={12} md={4} lg={4} style={{width: \"100%\", marginTop: 50}}>\r\n                                    <FormControl fullWidth>\r\n                                        <Button type=\"submit\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} color=\"primary\" fullWidth>\r\n                                            Submit\r\n                                        </Button>\r\n                                    </FormControl>\r\n                                </Col>\r\n                            </Row>\r\n                        </form>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Footer/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactUs2);","import React, {Component} from 'react';\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Paper,\r\n    Tab,\r\n    Tabs,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport RestrictedIcon from '@material-ui/icons/VpnLock';\r\nimport PrivateIcon from '@material-ui/icons/LockOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ContactSupportIcon from '@material-ui/icons/ContactSupport';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork())\r\n    }\r\n};\r\n\r\nclass HelpPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            helpType: DB_CONST.TYPE_INVESTOR,\r\n            autoSwitching: true,\r\n            expandedPanel: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.HELP : ROUTES.HELP_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        this.autoSwitchToAppropriateHelpTab();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.autoSwitchToAppropriateHelpTab();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Switch to the appropriate Help tab based on user's type\r\n     */\r\n    autoSwitchToAppropriateHelpTab = () => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            helpType,\r\n            autoSwitching\r\n        } = this.state;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            // when the user just opened this Help page\r\n            // detect if the type of the user to automatically switch the Help tab\r\n            // this should only happen once\r\n            if (user.type !== helpType) {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        helpType: user.type,\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            } else {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle tab changed\r\n     *\r\n     * @param event\r\n     * @param newValue\r\n     */\r\n    handleTabChanged = (event, newValue) => {\r\n        this.setState({\r\n            helpType: newValue,\r\n            expandedPanel: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle panel changed\r\n     *\r\n     * @param panel\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    handleExpandPanel = panel => (event, isExpanded) => {\r\n        this.setState({\r\n            expandedPanel: isExpanded ? panel : false\r\n        });\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            helpType\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !user\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingBottom: 50}}>\r\n                <Row noGutters style={{marginTop: 40, marginBottom: 60}}>\r\n                    <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}}>\r\n                        <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20}>\r\n                            <ContactSupportIcon\r\n                                style={{\r\n                                    fontSize: \"7em\",\r\n                                    color:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}\r\n                            />\r\n                        </FlexView>\r\n                        <Typography variant=\"h4\" align=\"center\" color=\"primary\">\r\n                            How can we help you?\r\n                        </Typography>\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" marginTop={40}>\r\n                                    <Paper elevation={2} style={{width: \"100%\"}}>\r\n                                        <Tabs indicatorColor=\"primary\" textColor=\"primary\" variant=\"fullWidth\" value={helpType} onChange={this.handleTabChanged}>\r\n                                            <Tab value={DB_CONST.TYPE_INVESTOR} label=\"Investor\" className={css(sharedStyles.no_text_transform)}/>\r\n                                            <Tab value={DB_CONST.TYPE_ISSUER} label=\"Issuer\" className={css(sharedStyles.no_text_transform)}/>\r\n                                        </Tabs>\r\n                                    </Paper>\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    user.type === DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        this.renderGroupAdminHelp()\r\n                        :\r\n                        helpType === DB_CONST.TYPE_INVESTOR\r\n                            ?\r\n                            this.renderInvestorHelp()\r\n                            :\r\n                            this.renderIssuerHelp()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render group admin help\r\n     */\r\n    renderGroupAdminHelp = () => {\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n        /** Group admin guide  */\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_navigating_invest_west'} onChange={this.handleExpandPanel('group_admin_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                    Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                    tutorial showing the key functions of the site.\r\n                                </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the “My dashboard” button at the top right of the page. This will take you to your unique dashboard where you can access all the site’s functions.</Typography>\r\n                                    <img alt=\"group_admin_help_my_dashboard\" src={require(\"../../img/group_admin_help_my_dashboard.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons; home, settings, change password, audit log, explore offers, explore groups, forums, help and logout</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/group_admin_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView\r\n                                    column\r\n                                >\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your group. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"group_admin_help_notifications\" src={require(\"../../img/group_admin_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Home page */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.4. Home page</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The home page will display all the group management functions, from this page you can manage group members, manage access requests to your group, manage the group’s offers and manage group admins.</Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Manage group users */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_user_management'} onChange={this.handleExpandPanel('group_admin_help_user_management')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. User management\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The manage group members tab is used to manage exiting members, invite new users and view details of the group’s users. To access this function, click on the ‘manage group members’ tab from the home page. From this section you can view all user's names, emails, user types, the date invited/requested to join, registration status and the date they registered.</Typography>\r\n                                <img alt=\"group_admin_help_user_management\" src={require(\"../../img/group_admin_help_user_management.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Inviting a new user */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Inviting a new user</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage group members tab you can invite a new user. You will need the users title, first name, last name, email and user type. To invite a new user, click on the ‘Invite new user’ button.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_01\" src={require(\"../../img/group_admin_help_inviting_a_new_user_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">After clicking the button, enter the user’s details and select Issuer or Investor. An Issuer is a business owner or entrepreneur who will create their own offer. An Investor is someone who is looking to invest in offers and will view offers. Click the ‘send’ button to send the invite to the user’s email. If the user does not receive the invitation, you can resend the invite (see resending invites in section 2.2). You may need to ask users to check their junk or spam folder.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_02\" src={require(\"../../img/group_admin_help_inviting_a_new_user_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Resending invites */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Resending invites</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage group members tab you can resend invites to users who have previously been invited but have not yet registered.  Once in the invitation and registrations tab select the user who has already been invited and click on the ‘resend’ button. Please remind any user who has not received their invites to check their junk or spam folders in their email account.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_03\" src={require(\"../../img/group_admin_help_inviting_a_new_user_03.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 3. Manage access requests */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_access_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_access_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Manage access requests\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The access request tab is used to accept or reject investors from joining your group. Other users on the platform can request to join your group to gain access to your group’s offers. Click on the ‘access requests’ tab and this will show any pending requests, from there you can accept or reject individual requests.</Typography>\r\n                                <img alt=\"group_admin_help_manage_access_requests\" src={require(\"../../img/group_admin_help_manage_access_requests.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 4. Manage group members */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_group_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Manage group members\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>To manage all members in your group, click ‘manage group members’ from the home page. The user management page allows you to view and modify group members information; be aware you can only edit the information for invited group members and not external group members who joined the group through an access request.  To view a user’s information/activity or edit their details click on their name in the list or alternatively you can search by email address.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_requests\" src={require(\"../../img/group_admin_help_manage_group_members.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>If a user needs to be blocked or removed from the platform, please contact us support@investwest.online for assistance.</Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Manage offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_offers'} onChange={this.handleExpandPanel('group_admin_help_manage_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Manage offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>From the manage offers tab, you can view and edit all your group’s offers. The dropdown will show the offers title, its creator, its fundraising goal, and status.</Typography>\r\n\r\n                                {/** Viewing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Viewing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view an offer, open the manage offers tab and click on the title of the offer or you can also search for an offer by name.</Typography>\r\n                                    <img alt=\"group_admin_help_viewing_an_offer\" src={require(\"../../img/group_admin_help_viewing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Accepting and rejecting an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Accepting and rejecting an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>The Invest West process starts with an issuer creating an offer. The new offer will appear in your manage offers table, the bell icon will also notify you that an offer requires your attention. Newly submitted offers show a status of ‘Submitted. Awaiting group admin review’. From this section you can view each offer by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer\" src={require(\"../../img/group_admin_help_accept_reject_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>To accept or reject the offer scroll down to the bottom of the page and click on the control phases tab. From here you can change the offers default visibility (see what the different levels of visibility mean in section 10.1) as well as accept or reject the offer.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer_2\" src={require(\"../../img/group_admin_help_accept_reject_2_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Editing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a group admin you can edit an offer’s details if necessary. This can be done in the manage offers tab. To edit an offer, you first need to view it by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_01\" src={require(\"../../img/group_admin_help_edit_offer_01.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        Then you can click on the edit button on the \"Edit offer\" button.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_02\" src={require(\"../../img/group_admin_help_edit_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Temporarily closing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.4. Temporarily closing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a group admin you can temporarily close any offer (stop it being visible to any users). This can be done in the manage offers tab. Select the title of the offer (see viewing an offer in section 5.1), scroll down the bottom of the page, then click on control phases tab and press the ‘Close temporally’ button.</Typography>\r\n                                    <img alt=\"group_admin_help_temporarily_closing_an_offer\" src={require(\"../../img/group_admin_help_temporarily_closing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Reopening a temporarily closed offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.5. Reopening a temporarily closed offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        If an offer has been temporally closed (see temporarily closing an offer in\r\n                                        section 5.4), it can be re-opened. This can be done in the manage investment\r\n                                        opportunities tab. Select the title of the offer (see viewing an offer in\r\n                                        section 5.1), from here scroll down the bottom of the page, then click on\r\n                                        control phases tab and press the \"Open again\" button. Please note, an offer can\r\n                                        only be re-opened if it is temporarily closed.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_reopening_a_temporarily_closed_offer\" src={require(\"../../img/group_admin_help_reopening_a_temporarily_closed_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Manage group admins */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_admins'} onChange={this.handleExpandPanel('group_admin_help_manage_group_admins')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Manage group admins\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">This page allows you to add another Group Admin to the Group. Please be advised, only add group admins if essential as each new admin will have full administer rights to the group. To add a group admin, click on the ‘mange group admins’ tab, then click on the ‘Add new group admin’ button and enter their email address and click the ‘Add’ button.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_admins\" src={require(\"../../img/group_admin_help_manage_group_admins.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 7. Explore offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_offers'} onChange={this.handleExpandPanel('group_admin_help_explore_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Exploring offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore offers made by other issuers click on the “Explore offers” button in the navigation bar. This page provides a view how Investors view offers. This page can also be used to give issuers and group admins an idea of how offers are structured.</Typography>\r\n                                <img alt=\"group_admin_help_explore_offers\" src={require(\"../../img/group_admin_help_explore_offers.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Explore groups */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_groups'} onChange={this.handleExpandPanel('group_admin_help_explore_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the “Explore groups” button in the navigation bar. </Typography>\r\n                                <img alt=\"group_admin_help_explore_groups\" src={require(\"../../img/group_admin_help_explore_groups.png\").default} className={css(styles.image_style)}\r\n                                />\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 9. Resources */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_resources'} onChange={this.handleExpandPanel('group_admin_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    9. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore resource on Invest West, click on the “Resources” button in the navigation bar. From this page you can view a range of information and services applicable to you and your users.</Typography>\r\n                                <img alt=\"group_admin_help_resources\" src={require(\"../../img/group_admin_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 10. Settings */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'group_admin_help_settings'} onChange={this.handleExpandPanel('group_admin_help_settings')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    10. Settings\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The settings page allows you to configure the groups settings. This page allows you to add a group description, change the group’s website, alter the colour scheme, manage the default visibility of the group, configure issuer settings and edit the groups FAQ’s. This page can be accessed by clicking on the ‘settings’ button in the navigation bar. To view the groups details from the perspective of an external user not in your group click on the ‘View groups public page’ button.</Typography>\r\n                                <img alt=\"group_admin_help_settings\" src={require(\"../../img/group_admin_help_settings.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Visibility level */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>10.1. Visibility level</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>As the group admin you can set the visibility level for offers created by your Group. With Invest west having multiple groups the level of visibility is used to define which of the group’s investment opportunities are visible to other users.</Typography>\r\n\r\n                                    {/** Public */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.1. Public</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting “Public” allows all Invest West users (including users who are not a member of your group) to see an offer’s full details and also interact with the offer. Here is an example of a public offer, where all information on the offer is visible.</Typography>\r\n                                        <img alt=\"group_admin_help_public_offer\" src={require(\"../../img/group_admin_help_public_offer.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>When an offer is public all investors can also see the offers campaign, pitch deck, documents, comments and extra information.</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {/** Restricted */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.2. Restricted</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting “Restricted” allows all Invest West users (including users who are not a member of your group) to see the offer’s basic information only. Only member of your group will be able to see the offer’s full details. Here is an example of the same offer as above but restricted. Investors who are not members of your group will not be able to see the offers campaign, pitch deck, documents, comments or extra information. If they want to see this, they will be prompted to join your group.</Typography>\r\n                                        <img alt=\"group_admin_help_restricted_offer\" src={require(\"../../img/group_admin_help_restricted_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n\r\n                                    {/** Private */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.3. Private</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            Private allows only members of your group to see the offer's information. No\r\n                                            external user will be able to view the offer.\r\n                                        </Typography>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 11. Audit log */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_audit_log'} onChange={this.handleExpandPanel('group_admin_help_audit_log')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    11. Audit log\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The Audit Log is used to monitor all the activities made by the admins of the group.</Typography>\r\n                                <img alt=\"group_admin_help_audit_log\" src={require(\"../../img/group_admin_help_audit_log.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 12. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_password'} onChange={this.handleExpandPanel('group_admin_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    12. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the “Forgot your password?” button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                <img alt=\"group_admin_help_password\" src={require(\"../../img/group_admin_help_password.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Changing password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\">\r\n                                        <b>12.1. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To change your password, click on the \"Change password\" button in the navigation\r\n                                        bar. You will need to enter your old password then your new password twice.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_change_password\" src={require(\"../../img/group_admin_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 13. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_logging_out'} onChange={this.handleExpandPanel('group_admin_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    13. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"group_admin_help_logging_out\" src={require(\"../../img/group_admin_help_logging_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render investor help\r\n     */\r\n    renderInvestorHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_navigating_invest_west'} onChange={this.handleExpandPanel('investor_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>Welcome to Invest West, we are excited to work with you. Here is a basic tutorial showing the key functionalities of the site. </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">When you have logged in you can view your dashboard by clicking the “My dashboard” button at the top right of the page. This will take you to your unique dashboard where you can access all the site’s functionality.</Typography>\r\n                                    <img alt=\"investor_help_my_dashboard\" src={require(\"../../img/investor_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons home, profile button, my pledges, change password, explore groups, forums button, the contact us button, help and the logout button.</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/investor_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"investor_help_notifications\" src={require(\"../../img/investor_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_offers'} onChange={this.handleExpandPanel('investor_help_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. Offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The home page will display all the offers available to you, and their relevant information.</Typography>\r\n\r\n                                {/** Viewing offers */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Viewing offers</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">To view and interact with an offer, you need to click on that offer. The Icon at the bottom right of each tile shows the visibility of the offer. There are three visibility settings\r\n                                        <br/><br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                <PublicIcon style={{marginRight: 8}}/>\r\n                                                Public offers are viewable to all investors on the system,\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <RestrictedIcon style={{marginRight: 8}}/>\r\n                                                Restricted offers are publicly viewable but with limited information\r\n                                                and\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <PrivateIcon style={{marginRight: 8}}/>\r\n                                                Private offers are only viewable to investors that belong to the\r\n                                                same group as the offer.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                 {/** Viewing the campaign */}\r\n                                 <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Viewing the campaign</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1), the information about the offer can be found down the page. You can see the campaign, attached documents, comments and see any extra information. To see the campaign, scroll down to the bottom of the page and click on “campaign” tab, this will contain the campaign information in the form of text or a document; click on the document to download it.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers_campaign.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Commenting on an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Commenting on an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1) you can comment on that offer. Comments are public and all users can view them. To make a comment navigate to the comments section at the bottom of the offer page and click on the “investor comments” button.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_pitch_phase_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography><b>Note: You cannot interact with an offer until you have completed your self-certification form. See 5.3.</b></Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.4. Contacting the fundraiser</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1) you can contact the fundraiser by clicking the “Contact us” button on the right hand side of the page.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_contacting_fundraiser.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography><b>Note: You cannot interact with an offer until you have completed your self-certification form. See 5.3.</b></Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'investor_help_exploring_groups'} onChange={this.handleExpandPanel('investor_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups and request to join them by clicking on the “Explore groups” button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_exploring_groups\" src={require(\"../../img/investor_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                       {/** 4. Resources */}\r\n                       <ExpansionPanel expanded={expandedPanel === 'investor_help_resources'} onChange={this.handleExpandPanel('investor_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resources on Invest West, click on the “Resources” button in the navigation bar. From this page you can view a range of content for investors, business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"investor_help_resources\" src={require(\"../../img/investor_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Your profile */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_your_profile'} onChange={this.handleExpandPanel('investor_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and complete your self-certification form. To access your profile page, click on the “Profile” button in the navigation bar. You need to complete your self-certification form to interact with any offer.</Typography>\r\n                                    <img alt=\"investor_help_profile\" src={require(\"../../img/investor_help_profile.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add your LinkedIn account by inserting a URL to your LinkedIn profile in, don’t forget to click the save button after you make any changes. You can also update your profile picture by clicking on the “update profile picture” button and attaching a photo. To view how users will see your profile click on the “view my public profile” button in the top right-hand side of the profile page.</Typography>\r\n                                    <img alt=\"investor_help_editing_your_profile\" src={require(\"../../img/investor_help_editing_your_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Setting up a business profile is optional, to do this you need to click on the “I want to upload my business profile” button.</Typography>\r\n                                    <img alt=\"investor_help_setting_up_business_profile\" src={require(\"../../img/investor_help_setting_up_business_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Self-certification */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Self-certification</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">All Invest West users must complete a self-certification form. You can do this in the bottom of the “Profile” page. Select the appropriate statement for your circumstances from the drop-down box and read the full statement carefully. You will be prompted to recertify every 12 months.</Typography>\r\n                                    <img alt=\"investor_help_self_certification\" src={require(\"../../img/investor_help_self_certification.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_password'} onChange={this.handleExpandPanel('investor_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph\r\n                                    >\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the “Forgot your password?” button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"investor_help_reset_password\" src={require(\"../../img/investor_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password click on the “Change password” button in the navigation bar. You will need to enter your old password then your new password twice. If you don’t know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"investor_help_change_password\" src={require(\"../../img/investor_help_change_password.png\").default}  className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                   {/** 7. Support */}\r\n                   <ExpansionPanel expanded={expandedPanel === 'investor_help_support'} onChange={this.handleExpandPanel('investor_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the “contact us” button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_support_01\" src={require(\"../../img/investor_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the “contact us” button at the top right of the page.</Typography>\r\n                                <img alt=\"investor_help_support_02\" src={require(\"../../img/investor_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_logging_out'} onChange={this.handleExpandPanel('investor_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"investor_help_log_out\" src={require(\"../../img/investor_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render issuer help\r\n     */\r\n    renderIssuerHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row\r\n                noGutters\r\n                style={{\r\n                    marginBottom: 50\r\n                }}\r\n            >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_navigating_invest_west'} onChange={this.handleExpandPanel('issuer_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                        tutorial showing the key functions of the site.\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the “My dashboard” button at the top right of the page. This will take you to your unique dashboard where you can access all the site’s functionality. The home page will display all the offers on Invest West.</Typography>\r\n                                    <img alt=\"issuer_help_my_dashboard\" src={require(\"../../img/issuer_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can get around using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three white lines. On the navigation bar there are nine main buttons; home, profile, change password, explore offers, explore groups, forums, contact us, help and the logout.</Typography>\r\n                                    <img alt=\"issuer_help_navigation_bar\" src={require(\"../../img/issuer_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"issuer_help_notifications\" src={require(\"../../img/issuer_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                         {/** 2. My offers */}\r\n                         <ExpansionPanel expanded={expandedPanel === 'issuer_help_my_offers'} onChange={this.handleExpandPanel('issuer_help_my_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. My offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Creating a new offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Creating a new offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        You need to set up a business profile before you can create your first offer (see setting up your business profile in section 5.2). \r\n                                        <br/><br/>\r\n                                        To create a new offer, click on the “start a new offer” button located at the top left of the home page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_01\" src={require(\"../../img/issuer_help_create_new_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you have clicked this button you will be taken to the five-step process for creating your offer, the sections marked with an Asterix are mandatory and must be filled out. You can save your funding round at any point and return to edit it later by clicking the “save” button located at the bottom right of the page.</Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_02\" src={require(\"../../img/issuer_help_create_new_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you submit your offer you will be notified that it has been successfully uploaded. It will not be published until it has been checked and approved by your Group Administrator. You will be notified once your offer is approved (or rejected). If your offer is rejected, you will get an email with feedback from your Group Administrator.</Typography>\r\n                                </FlexView>\r\n\r\n                                <br/>\r\n\r\n                                {/** Managing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Managing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">You can manage your offers from the My offers page, to view and edit an offer click on the offers title.</Typography>\r\n                                    <img alt=\"issuer_help_manage_offer\" src={require(\"../../img/issuer_help_manage_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                                    <br/>\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Editing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To edit your offer, click on the \"Edit offer\" button on the offer’s main page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_edit_offer\" src={require(\"../../img/issuer_help_edit_offer.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    {/** Replying to comments */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            <b>2.3.1. Replying to comments</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">If an investor comments on your offer you will be notified via the bell icon.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_01\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\">From the offer’s main page scroll down and click on the “Investor comments” tab, then click on the “reply” button to reply to the selected comment.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_02\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'issuer_help_exploring_groups'} onChange={this.handleExpandPanel('issuer_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the “Explore offers” button in the navigation bar. From this page you can click on specific groups to see the groups details.</Typography>\r\n                                <img alt=\"issuer_help_exploring_groups\" src={require(\"../../img/issuer_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 4. Resources */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_resources'} onChange={this.handleExpandPanel('issuer_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resource on Invest West, click on the “Resources” button in the navigation bar. From this page you can view a range of content for business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"issuer_help_resources\" src={require(\"../../img/issuer_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 5. Your profile */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_your_profile'} onChange={this.handleExpandPanel('issuer_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and upload formal documents. To access your profile page, click on the “Profile” button in the navigation bar. You need to set up a business profile before you can create your first offer.</Typography>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add in your LinkedIn account by inserting a URL to your LinkedIn profile, don’t forget to click the save button after you make any changes. You can also update your profile picture by clicking on the “update profile picture” button and attaching a photo.</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_01\" src={require(\"../../img/issuer_help_edit_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view how investors will see your profile click on the “view my public profile” button in the top right-hand side of the profile page</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_02\" src={require(\"../../img/issuer_help_edit_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To take part in invest west activities you will need to set up your business profile. To set this up go to the profile page and scroll down to the “business profile” section. You will need to fill out all fields with a *.\r\n                                        <br/><br/>\r\n                                        You can enter your registered office manually or search for your address by entering the postcode. The trading address is automatically set to the same as the registered address, if this is not the case for your business uncheck the box and enter in your trading address.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_01\" src={require(\"../../img/issuer_help_setting_business_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">When adding a director click the “add director” button, type their full name in the box provide and then click the “add” button. You must have multiple directors, but you need a minimum of one. Once all the mandatory fields have been completed the “Save” button will become available and you can click this button to finish setting up your business profile.</Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_02\" src={require(\"../../img/issuer_help_setting_business_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_password'} onChange={this.handleExpandPanel('issuer_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the “Forgot your password?” button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"issuer_help_reset_password\" src={require(\"../../img/issuer_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password, click on the “Change password” button in the navigation bar. You will need to enter your old password then your new password twice. If you don’t know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"issuer_help_change_password\" src={require(\"../../img/issuer_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 7. Support */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_support'} onChange={this.handleExpandPanel('issuer_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the “contact us” button in the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_support_01\" src={require(\"../../img/issuer_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the “contact us” button at the top right of the page.</Typography>\r\n                                <img alt=\"issuer_help_support_02\" src={require(\"../../img/issuer_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    \r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_logging_out'} onChange={this.handleExpandPanel('issuer_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To logout press the “logout” button at the bottom of the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_log_out\" src={require(\"../../img/issuer_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HelpPage);\r\n\r\nconst styles = StyleSheet.create({\r\n    image_style: {\r\n        objectFit: \"contain\"\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport React, {FormEvent} from \"react\";\r\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\n\r\nexport enum SignInEvents {\r\n    ResetAllStates = \"SignInEvents.ResetAllStates\",\r\n    TextChanged = \"SignInEvents.TextChanged\",\r\n    TogglePasswordVisibility = \"SignInEvents.TogglePasswordVisibility\",\r\n    SignInEmailError = \"SignInEvents.SignInEmailError\",\r\n    SignInPasswordError = \"SignInEvents.SignInPasswordError\",\r\n    ClearErrors = \"SignInEvents.ClearErrors\",\r\n    ToggleResetPasswordDialog = \"SignInEvents.ToggleResetPasswordDialog\",\r\n    ProcessingResetPasswordRequest = \"SignInEvents.ProcessingResetPasswordRequest\",\r\n    CompleteProcessingResetPasswordRequest = \"SignInEvents.CompleteProcessingResetPasswordRequest\"\r\n}\r\n\r\nexport interface SignInAction extends Action {\r\n}\r\n\r\nexport interface TextChangedAction extends SignInAction {\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport interface CompleteProcessingResetPasswordRequestAction extends SignInAction {\r\n    error?: string;\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: TextChangedAction = {\r\n            type: SignInEvents.TextChanged,\r\n            name: event.target.name,\r\n            value: event.target.value\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const togglePasswordVisibility: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: SignInEvents.TogglePasswordVisibility\r\n        });\r\n    }\r\n}\r\n\r\nexport const onSignInClick: ActionCreator<any> = (event: FormEvent) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            signInEmail,\r\n            signInPassword\r\n        } = getState().SignInLocalState;\r\n\r\n        event.preventDefault();\r\n\r\n        dispatch({\r\n            type: SignInEvents.ClearErrors\r\n        });\r\n\r\n        const email: string = signInEmail.trim().toLowerCase();\r\n        const password: string = signInPassword;\r\n\r\n        let allowSignIn: boolean = true;\r\n\r\n        if (email.length === 0) {\r\n            dispatch({\r\n                type: SignInEvents.SignInEmailError\r\n            });\r\n            allowSignIn = false;\r\n        }\r\n\r\n        if (password.length === 0) {\r\n            dispatch({\r\n                type: SignInEvents.SignInPasswordError\r\n            });\r\n            allowSignIn = false;\r\n        }\r\n\r\n        if (!allowSignIn) {\r\n            return;\r\n        }\r\n\r\n        return dispatch(signIn(email, password));\r\n    }\r\n}\r\n\r\nexport const toggleResetPasswordDialog: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: SignInEvents.ToggleResetPasswordDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const onSendResetPasswordClick: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: SignInEvents.ProcessingResetPasswordRequest\r\n        });\r\n\r\n        const completeAction: CompleteProcessingResetPasswordRequestAction = {\r\n            type: SignInEvents.CompleteProcessingResetPasswordRequest\r\n        }\r\n\r\n        try {\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.requestResetPasswordRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        email: getState().SignInLocalState.resetPasswordDialogEmail\r\n                    }\r\n                }\r\n            );\r\n            dispatch(toggleResetPasswordDialog());\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteLoadingDataAction,\r\n    CompleteRemovingAccessRequestAction,\r\n    CompleteSendingAccessRequestAction,\r\n    GroupDetailsAction,\r\n    GroupDetailsEvents\r\n} from \"./GroupDetailsActions\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport Error from \"../../models/error\";\r\nimport {AccessRequestInstance} from \"../../models/access_request\";\r\n\r\nexport interface GroupDetailsState {\r\n    group?: GroupProperties;\r\n    members?: InvitedUserWithProfile[];\r\n    offers?: ProjectInstance[];\r\n    accessRequestsInstances?: AccessRequestInstance[];\r\n\r\n    loadingData: boolean;\r\n    dataLoaded: boolean;\r\n\r\n    error?: Error;\r\n\r\n    sendingAccessRequest: boolean;\r\n    errorSendingAccessRequest?: Error;\r\n\r\n    removingAccessRequest: boolean;\r\n    errorRemovingAccessRequest?: Error;\r\n}\r\n\r\nconst initialState: GroupDetailsState = {\r\n    loadingData: false,\r\n    dataLoaded: false,\r\n\r\n    sendingAccessRequest: false,\r\n    removingAccessRequest: false\r\n}\r\n\r\nexport const hasNotLoadedData = (state: GroupDetailsState) => {\r\n    return !state.dataLoaded && !state.loadingData;\r\n}\r\n\r\nexport const isLoadingData = (state: GroupDetailsState) => {\r\n    return !state.dataLoaded && state.loadingData;\r\n}\r\n\r\nexport const successfullyLoadedData = (state: GroupDetailsState) => {\r\n    return state.dataLoaded && !state.loadingData && state.group && state.members && state.offers && state.error === undefined;\r\n}\r\n\r\nexport const hasAccessRequestsBeenSatisfied = (state: GroupDetailsState) => {\r\n    return successfullyLoadedData(state) && state.accessRequestsInstances !== undefined;\r\n}\r\n\r\nexport const hasErrorLoadingData = (state: GroupDetailsState) => {\r\n    return state.dataLoaded && !state.loadingData && state.error !== undefined;\r\n}\r\n\r\nexport const isSendingAccessRequest = (state: GroupDetailsState) => {\r\n    return state.sendingAccessRequest;\r\n}\r\n\r\nexport const hasErrorSendingAccessRequest = (state: GroupDetailsState) => {\r\n    return !isSendingAccessRequest(state) && state.errorSendingAccessRequest !== undefined;\r\n}\r\n\r\nexport const isRemovingAccessRequest = (state: GroupDetailsState) => {\r\n    return state.removingAccessRequest;\r\n}\r\n\r\nexport const hasErrorRemovingAccessRequest = (state: GroupDetailsState) => {\r\n    return !isRemovingAccessRequest(state) && state.errorRemovingAccessRequest !== undefined;\r\n}\r\n\r\nconst groupDetailsReducer = (state = initialState, action: GroupDetailsAction) => {\r\n    switch (action.type) {\r\n        case GroupDetailsEvents.LoadingData:\r\n            return {\r\n                ...initialState,\r\n                loadingData: true,\r\n                dataLoaded: false\r\n            }\r\n        case GroupDetailsEvents.CompleteLoadingData:\r\n            const completeLoadingDataAction: CompleteLoadingDataAction = action as CompleteLoadingDataAction;\r\n            return {\r\n                ...state,\r\n                loadingData: false,\r\n                dataLoaded: true,\r\n                group: completeLoadingDataAction.group !== undefined\r\n                    ? JSON.parse(JSON.stringify(completeLoadingDataAction.group))\r\n                    : state.group,\r\n                members: completeLoadingDataAction.members !== undefined\r\n                    ? [...completeLoadingDataAction.members]\r\n                    : state.members,\r\n                offers: completeLoadingDataAction.offers !== undefined\r\n                    ? [...completeLoadingDataAction.offers]\r\n                    : state.offers,\r\n                accessRequestsInstances: completeLoadingDataAction.accessRequestInstances !== undefined\r\n                    ? [...completeLoadingDataAction.accessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                error: completeLoadingDataAction.error !== undefined\r\n                    ? {detail: completeLoadingDataAction.error}\r\n                    : state.error\r\n            }\r\n        case GroupDetailsEvents.SendingAccessRequest:\r\n            return {\r\n                ...state,\r\n                sendingAccessRequest: true,\r\n                errorSendingAccessRequest: undefined\r\n            }\r\n        case GroupDetailsEvents.CompleteSendingAccessRequest:\r\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequest: false,\r\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\r\n            }\r\n        case GroupDetailsEvents.RemovingAccessRequest:\r\n            return {\r\n                ...state,\r\n                removingAccessRequest: true,\r\n                errorRemovingAccessRequest: undefined\r\n            }\r\n        case GroupDetailsEvents.CompleteRemovingAccessRequest:\r\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequest: false,\r\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default groupDetailsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    GroupDetailsState,\r\n    hasAccessRequestsBeenSatisfied,\r\n    hasErrorLoadingData,\r\n    isLoadingData, isRemovingAccessRequest, isSendingAccessRequest,\r\n    successfullyLoadedData\r\n} from \"./GroupDetailsReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {loadData, removeAccessRequest, sendAccessRequest} from \"./GroupDetailsActions\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport {dateInReadableFormat} from \"../../utils/utils\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {CheckCircle} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface GroupDetailsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    loadData: (viewedGroupUserName: string) => any;\r\n    sendAccessRequest: () => any;\r\n    removeAccessRequest: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        GroupDetailsLocalState: state.GroupDetailsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadData: (viewedGroupUserName: string) => dispatch(loadData(viewedGroupUserName)),\r\n        sendAccessRequest: () => dispatch(sendAccessRequest()),\r\n        removeAccessRequest: () => dispatch(removeAccessRequest())\r\n    }\r\n}\r\n\r\nclass GroupDetails extends Component<GroupDetailsProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n\r\n    componentDidMount() {\r\n        this.props.loadData(this.props.match.params.viewedGroupUserName);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            GroupDetailsLocalState,\r\n            sendAccessRequest,\r\n            removeAccessRequest\r\n        } = this.props;\r\n\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        // loading\r\n        if (isLoadingData(GroupDetailsLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\r\n                <BeatLoader\r\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                />\r\n            </Box>;\r\n        }\r\n\r\n        // error\r\n        if (hasErrorLoadingData(GroupDetailsLocalState) || !successfullyLoadedData(GroupDetailsLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\r\n                <Typography variant=\"h5\" color=\"error\" align=\"center\">Error loading page. Please retry.</Typography>\r\n            </Box>;\r\n        }\r\n\r\n        let groupMember: GroupOfMembership | undefined = undefined;\r\n        if (!currentAdmin) {\r\n            groupMember = AuthenticationState.groupsOfMembership.find(\r\n                groupOfMembership => groupOfMembership.group.anid === GroupDetailsLocalState.group?.anid);\r\n        }\r\n\r\n        let hasRequestedToAccessGroup: boolean = false;\r\n        if (hasAccessRequestsBeenSatisfied(GroupDetailsLocalState)) {\r\n            hasRequestedToAccessGroup = GroupDetailsLocalState.accessRequestsInstances\r\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === GroupDetailsLocalState.group?.anid) !== -1;\r\n        }\r\n\r\n        // successfully loaded\r\n        return <Box paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}>\r\n            {/** Header section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box>\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Row noGutters>\r\n                                    {/** Logo section */}\r\n                                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                        <Box display=\"flex\"justifyContent=\"center\" alignItems=\"center\">\r\n                                            <Image alt={`${GroupDetailsLocalState.group?.displayName} logo`} src={getGroupLogo(GroupDetailsLocalState.group ?? null) ?? undefined} style={{width: \"100%\", height: \"auto\", padding: 20, objectFit: \"scale-down\"}}/>\r\n                                        </Box>\r\n                                    </Col>\r\n\r\n                                    {/** Name section */}\r\n                                    <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                        <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\r\n                                            <Typography align=\"center\" variant=\"h4\">{GroupDetailsLocalState.group?.displayName}</Typography>\r\n\r\n                                            {/** Home/platform member + joined date (available for investor and issuer) */}\r\n                                            {\r\n                                                currentAdmin\r\n                                                    ? null\r\n                                                    : !groupMember\r\n                                                    ? <Box marginTop=\"25px\">\r\n                                                        {\r\n                                                            !hasRequestedToAccessGroup\r\n                                                                ? <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => sendAccessRequest()} disabled={isSendingAccessRequest(GroupDetailsLocalState)}>\r\n                                                                    {\r\n                                                                        isSendingAccessRequest(GroupDetailsLocalState)\r\n                                                                            ? \"Sending request ...\"\r\n                                                                            : \"Join Group\"\r\n                                                                    }\r\n                                                                </Button>\r\n                                                                : <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => removeAccessRequest()} disabled={isRemovingAccessRequest(GroupDetailsLocalState)}>\r\n                                                                    {\r\n                                                                        isRemovingAccessRequest(GroupDetailsLocalState)\r\n                                                                            ? \"Cancelling ...\"\r\n                                                                            : \"Cancel request\"\r\n                                                                    }\r\n                                                                </Button>\r\n                                                        }\r\n                                                    </Box>\r\n                                                    : <Box marginTop=\"25px\">\r\n                                                        <Box display=\"flex\" flexDirection=\"row\">\r\n                                                            <CheckCircle fontSize=\"small\" color=\"primary\"/>\r\n                                                            <Box width=\"6px\"/>\r\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n                                                                {\r\n                                                                    getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\r\n                                                                        ? \"Home member\"\r\n                                                                        : \"Platform member\"\r\n                                                                }\r\n                                                            </Typography>\r\n                                                        </Box>\r\n\r\n\r\n                                                        <Box marginTop=\"5px\">\r\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n                                                                Joined\r\n                                                                on: {dateInReadableFormat(groupMember.joinedDate)}\r\n                                                            </Typography>\r\n                                                        </Box>\r\n                                                    </Box>\r\n                                            }\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** About section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box marginTop=\"25px\">\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Typography variant=\"h6\">About</Typography>\r\n\r\n                                <Box marginTop=\"18px\" whiteSpace=\"pre-line\">\r\n                                    <Typography variant=\"body1\" align=\"left\">{GroupDetailsLocalState.group?.description}</Typography>\r\n                                </Box>\r\n\r\n                                <Box marginTop=\"18px\">\r\n                                    <Typography variant=\"body1\" align=\"left\">For more information, visit us at:&nbsp;\r\n                                        <CustomLink\r\n                                            url={GroupDetailsLocalState.group?.website ?? \"\"}\r\n                                            target=\"_blank\"\r\n                                            color=\"none\"\r\n                                            activeColor=\"none\"\r\n                                            activeUnderline={true}\r\n                                            component=\"a\"\r\n                                            childComponent={\r\n                                                GroupDetailsLocalState.group?.website ?? \"unknown\"\r\n                                            }/>\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Statistics section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box marginTop=\"25px\">\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Typography variant=\"h6\">Statistics</Typography>\r\n\r\n                                <Box marginTop=\"20px\" border={`1px solid ${colors.grey[\"300\"]}`} bgcolor={appColors.kick_starter_background_color}>\r\n                                    <Row>\r\n                                        <Col xs={12} sm={12} md={6} lg={6}>\r\n                                            <Box padding=\"18px\">\r\n                                                <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.members?.length}</Typography>\r\n                                                    <Box height=\"2px\"/>\r\n                                                <Typography variant=\"body1\" align=\"left\">Members</Typography>\r\n                                            </Box>\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6}>\r\n                                            <Box display=\"flex\" flexDirection=\"row\">\r\n                                                <Box>\r\n                                                    <Divider orientation=\"vertical\"/>\r\n                                                </Box>\r\n\r\n                                                <Box padding=\"18px\">\r\n                                                    <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.offers?.length}</Typography>\r\n\r\n                                                    <Box height=\"2px\"/>\r\n\r\n                                                    <Typography variant=\"body1\" align=\"left\">Investment opportunities</Typography>\r\n                                                </Box>\r\n                                            </Box>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Box>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupDetails);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass MarketingPreferencesPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Marketing preferences\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.marketingPreferences\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.marketingPreferences.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MarketingPreferencesPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from \"react-flexview\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport Profile from '../../shared-components/profile/Profile';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        admin: state.auth.user,\r\n        adminLoaded: state.auth.userLoaded,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited,\r\n        projectsTable_user: state.projectsTable.user\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n        editUserProfile_startOriginalUserChangedListener: () => dispatch(editUserActions.startOriginalUserChangedListener()),\r\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n        // projectsTable_stopListeningForProjectsChanged: () => dispatch(projectsTableActions.stopListeningForProjectsChanged()),\r\n        // projectsTable_stopListeningForPledgesChanged: () => dispatch(projectsTableActions.stopListeningForPledgesChanged()),\r\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor: () => dispatch(projectsTableActions.stopListeningForPledgesMadeByTableInvestor()),\r\n\r\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\r\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nclass ProfilePageEditable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            userToBeEdited: null,\r\n            userToBeEditedLoaded: false,\r\n            loadingUserToBeEdited: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.EDIT_USER_PROFILE : ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            loadAngelNetwork,\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser,\r\n            activitiesTable_setUser\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited\r\n        } = this.state;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n\r\n            if (admin && userToBeEdited) {\r\n                editUserProfile_setOriginalUserAndEditedUser(userToBeEdited);\r\n\r\n                // projectsTable_setUser(userToBeEdited);\r\n\r\n                activitiesTable_setUser(userToBeEdited);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n\r\n            // projectsTable_setUser,\r\n            // projectsTable_stopListeningForProjectsChanged,\r\n            // projectsTable_stopListeningForPledgesChanged,\r\n            // projectsTable_stopListeningForPledgesMadeByTableInvestor,\r\n\r\n            activitiesTable_setUser,\r\n            activitiesTable_stopListeningForActivitiesChanged,\r\n\r\n            editUserProfile_stopOriginalUserChangedListener\r\n        } = this.props;\r\n\r\n        // when click to go back,\r\n        // reset the user referenced in edit user profile\r\n        editUserProfile_setOriginalUserAndEditedUser(null);\r\n\r\n        // stop listening for user's profile changes if added\r\n        editUserProfile_stopOriginalUserChangedListener();\r\n\r\n        // reset the user references in projects table\r\n        // ---> avoid caches\r\n        // projectsTable_setUser(null);\r\n        // projectsTable_stopListeningForProjectsChanged();\r\n        // projectsTable_stopListeningForPledgesChanged();\r\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor();\r\n\r\n        // reset the user references in activities table\r\n        // ---> avoid caches\r\n        activitiesTable_setUser(null);\r\n        activitiesTable_stopListeningForActivitiesChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        // get user's id from the URL\r\n        const userToBeEditedID = this.props.match.params.userID;\r\n\r\n        const {\r\n            editUserProfile_startOriginalUserChangedListener\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited,\r\n            userToBeEditedLoaded,\r\n            loadingUserToBeEdited\r\n        } = this.state;\r\n\r\n        if (!userToBeEdited && !userToBeEditedLoaded && !loadingUserToBeEdited) {\r\n            this.setState({\r\n                userToBeEditedLoaded: false,\r\n                loadingUserToBeEdited: true\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeEditedID)\r\n                .then(user => {\r\n\r\n                    realtimeDBUtils\r\n                        .loadGroupsUserIsIn(userToBeEditedID)\r\n                        .then(groupsUserIsIn => {\r\n\r\n                            user.groupsUserIsIn = groupsUserIsIn;\r\n\r\n                            this.setState({\r\n                                userToBeEdited: JSON.parse(JSON.stringify(user)),\r\n                                userToBeEditedLoaded: true,\r\n                                loadingUserToBeEdited: false\r\n                            });\r\n\r\n                            // start listening for user's profile changes\r\n                            editUserProfile_startOriginalUserChangedListener();\r\n                        })\r\n                        .catch(error => {\r\n                            this.setState({\r\n                                userToBeEdited: null,\r\n                                userToBeEditedLoaded: true,\r\n                                loadingUserToBeEdited: false\r\n                            });\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        userToBeEdited: null,\r\n                        userToBeEditedLoaded: true,\r\n                        loadingUserToBeEdited: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            admin,\r\n            adminLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited,\r\n            userToBeEditedLoaded\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !adminLoaded\r\n            || !userToBeEditedLoaded\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !admin\r\n            || (admin && admin.type !== DB_CONST.TYPE_ADMIN)\r\n            || !userToBeEdited\r\n        ) {\r\n            return (\r\n                <PageNotFoundWhole/>\r\n            );\r\n        }\r\n\r\n        // the group admins are trying to open this page\r\n        // to edit profile of a user that is NOT a member of their group\r\n        if (!admin.superAdmin\r\n            && userToBeEdited.hasOwnProperty('groupsUserIsIn')\r\n            && userToBeEdited.groupsUserIsIn.findIndex(group => group.anid === admin.anid) === -1\r\n        ) {\r\n            return (\r\n                <PageNotFoundWhole/>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Body */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}} style={{marginTop: 30, marginBottom: 30}}>\r\n                        {\r\n                            !userToBeEdited\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Profile/>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageEditable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport {Box, Button, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\nconst logoHeightMobile: number = 160;\r\nconst logoHeight: number = 220;\r\n\r\ninterface FrontProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Front extends Component<FrontProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{padding: 0, position: \"fixed\", height: \"100% !important\", overflowY: \"auto\", top: 0}}>\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\" paddingX=\"30px\" paddingY=\"20px\">\r\n                        <CustomLink url={Routes.constructContactUsRoute(this.props.match.params)} color=\"black\" activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeUnderline={false} component=\"nav-link\" \r\n                        childComponent={\r\n                                <Typography variant=\"body1\">Contact us</Typography>\r\n                            }/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <CustomLink url={Routes.constructContactUsRoute2(this.props.match.params)} color=\"black\" activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeUnderline={false} component=\"nav-link\" \r\n                                                childComponent={\r\n                                                        <Typography variant=\"body1\">Contact us 2</Typography>\r\n                                                    }/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <CustomLink\r\n                            url={\r\n                                isAuthenticating(AuthenticationState)\r\n                                    ? \"\"\r\n                                    : !successfullyAuthenticated(AuthenticationState)\r\n                                    ? Routes.constructSignInRoute(this.props.match.params)\r\n                                    : Routes.constructDashboardRoute(this.props.match.params, ManageGroupUrlState, AuthenticationState)\r\n                            }\r\n                            color=\"black\"\r\n                            activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            activeUnderline={false}\r\n                            // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                            component=\"a\"\r\n                            childComponent={\r\n                                <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">\r\n                                    {\r\n                                        isAuthenticating(AuthenticationState)\r\n                                            ? \"\"\r\n                                            : !successfullyAuthenticated(AuthenticationState)\r\n                                            ? \"Sign in\"\r\n                                            : \"Dashboard\"\r\n                                    }\r\n                                </Button>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" minHeight=\"100vh\"\r\n                        bgcolor={\r\n                            toRGBWithOpacity(\r\n                                getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                0.12\r\n                            )\r\n                        }\r\n                    >\r\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" flexGrow={3} paddingY=\"50px\">\r\n                            {\r\n                                isValidatingGroupUrl(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Image\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            !routeContainsGroupName(ManageGroupUrlState)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : getGroupLogo(ManageGroupUrlState.group)\r\n                                        }\r\n                                        style={{\r\n                                            width: \"auto\",\r\n                                            height: MediaQueryState.isMobile ? logoHeightMobile : logoHeight\r\n                                        }}\r\n                                    />\r\n                            }\r\n\r\n                            <Box height=\"20px\"/>\r\n\r\n                            <Typography color=\"primary\" variant=\"h2\" align=\"center\">\r\n                                {\r\n                                    isValidatingGroupUrl(ManageGroupUrlState)\r\n                                        ? \"\"\r\n                                        : !routeContainsGroupName(ManageGroupUrlState)\r\n                                        ? \"Invest West\"\r\n                                        : ManageGroupUrlState.group?.displayName\r\n                                }\r\n                            </Typography>\r\n\r\n                            {\r\n                                routeContainsGroupName(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Box color={colors.blueGrey[\"500\"]} marginTop=\"20px\">\r\n                                        <Typography variant=\"h4\" align=\"center\">Connecting businesses and investors</Typography>\r\n                                    </Box>\r\n                            }\r\n                        </Box>\r\n\r\n                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                            <Image alt=\"front_footer\" src={require(\"../../img/front_page_cover_image.png\").default} style={{objectFit: \"fill\"}}/>\r\n                            <Box height=\"90px\"\r\n                                bgcolor={\r\n                                    toRGBWithOpacity(\r\n                                        getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                        0.75\r\n                                    )\r\n                                }\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Front);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport React from \"react\";\r\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/utils\";\r\n\r\nexport enum ResetPasswordEvents {\r\n    VerifyingCode = \"ResetPasswordEvents.VerifyingCode\",\r\n    CompleteVerifyingCode = \"ResetPasswordEvents.CompleteVerifyingCode\",\r\n    TextChanged = \"ResetPasswordEvents.TextChanged\",\r\n    ConfirmingResetPassword = \"ResetPasswordEvents.ConfirmingResetPassword\",\r\n    CompleteConfirmingResetPassword = \"ResetPasswordEvents.CompleteConfirmingResetPassword\"\r\n}\r\n\r\nexport interface ResetPasswordAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteVerifyingCodeAction extends ResetPasswordAction {\r\n    actionCode: string | null;\r\n    email: string | null;\r\n    error?: string;\r\n}\r\n\r\nexport interface TextChangedAction extends ResetPasswordAction {\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport interface CompleteConfirmingResetPasswordAction extends ResetPasswordAction {\r\n    error?: string;\r\n}\r\n\r\nexport const verifyCode: ActionCreator<any> = (code: string | null) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ResetPasswordEvents.VerifyingCode\r\n        });\r\n\r\n        const completeAction: CompleteVerifyingCodeAction = {\r\n            type: ResetPasswordEvents.CompleteVerifyingCode,\r\n            actionCode: null,\r\n            email: null\r\n        };\r\n\r\n        if (code === null) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            completeAction.actionCode = code;\r\n            completeAction.email = await firebase.auth().verifyPasswordResetCode(code);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const confirmPasswordReset: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            password,\r\n            confirmedPassword,\r\n            actionCode\r\n        } = getState().ResetPasswordLocalState;\r\n\r\n        const completeAction: CompleteConfirmingResetPasswordAction = {\r\n            type: ResetPasswordEvents.CompleteConfirmingResetPassword\r\n        };\r\n\r\n        if (password.trim().length === 0 || confirmedPassword.trim().length === 0) {\r\n            completeAction.error = \"Please fill in the required fields.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (password !== confirmedPassword) {\r\n            completeAction.error = \"Passwords do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (password.trim().length < 8) {\r\n            completeAction.error = \"Password must have at least 8 characters.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\r\n            completeAction.error = \"Please select a stronger password.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        dispatch({\r\n            type: ResetPasswordEvents.ConfirmingResetPassword\r\n        });\r\n\r\n        try {\r\n            await firebase.auth().confirmPasswordReset(actionCode as string, password);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: TextChangedAction = {\r\n            type: ResetPasswordEvents.TextChanged,\r\n            name: event.target.name,\r\n            value: event.target.value\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}","import {\r\n    CompleteProcessingResetPasswordRequestAction,\r\n    SignInAction,\r\n    SignInEvents,\r\n    TextChangedAction\r\n} from \"./SignInActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface SignInState {\r\n    signInEmail: string;\r\n    signInPassword: string;\r\n    showPassword: boolean;\r\n\r\n    errorSignInEmail: boolean;\r\n    errorSignInPassword: boolean;\r\n\r\n    showResetPasswordDialog: boolean;\r\n    resetPasswordDialogEmail: string;\r\n    resetPasswordDialogProcessing: boolean;\r\n    resetPasswordDialogEmailSent: boolean;\r\n    resetPasswordDialogError?: Error;\r\n}\r\n\r\nconst initialState: SignInState = {\r\n    signInEmail: \"\",\r\n    signInPassword: \"\",\r\n    showPassword: false,\r\n\r\n    errorSignInEmail: false,\r\n    errorSignInPassword: false,\r\n\r\n    showResetPasswordDialog: false,\r\n    resetPasswordDialogEmail: \"\",\r\n    resetPasswordDialogProcessing: false,\r\n    resetPasswordDialogEmailSent: false\r\n}\r\n\r\nexport const successfullySentResetPassword = (state: SignInState) => {\r\n    return state.resetPasswordDialogEmailSent && state.resetPasswordDialogError === undefined;\r\n}\r\n\r\nexport const errorSendingResetPassword = (state: SignInState) => {\r\n    return state.resetPasswordDialogError !== undefined;\r\n}\r\n\r\nexport const isProcessingResetPasswordRequest = (state: SignInState) => {\r\n    return state.resetPasswordDialogProcessing;\r\n}\r\n\r\nconst signInReducer = (state: SignInState = initialState, action: SignInAction) => {\r\n    switch (action.type) {\r\n        case SignInEvents.ResetAllStates:\r\n            return {\r\n                ...initialState\r\n            }\r\n        case SignInEvents.TextChanged:\r\n            const textChangedAction: TextChangedAction = (action as TextChangedAction);\r\n            return {\r\n                ...state,\r\n                [textChangedAction.name]: textChangedAction.value\r\n            }\r\n        case SignInEvents.TogglePasswordVisibility:\r\n            return {\r\n                ...state,\r\n                showPassword: !state.showPassword\r\n            }\r\n        case SignInEvents.SignInEmailError:\r\n            return {\r\n                ...state,\r\n                errorSignInEmail: true\r\n            }\r\n        case SignInEvents.SignInPasswordError:\r\n            return {\r\n                ...state,\r\n                errorSignInPassword: true\r\n            }\r\n        case SignInEvents.ClearErrors:\r\n            return {\r\n                ...state,\r\n                errorSignInEmail: false,\r\n                errorSignInPassword: false\r\n            }\r\n        case SignInEvents.ToggleResetPasswordDialog:\r\n            return {\r\n                ...state,\r\n                showResetPasswordDialog: !state.showResetPasswordDialog,\r\n                resetPasswordDialogEmail: \"\",\r\n                resetPasswordDialogError: undefined\r\n            }\r\n        case SignInEvents.ProcessingResetPasswordRequest:\r\n            return {\r\n                ...state,\r\n                resetPasswordDialogProcessing: true,\r\n                resetPasswordDialogError: undefined\r\n            }\r\n        case SignInEvents.CompleteProcessingResetPasswordRequest:\r\n            const completeAction: CompleteProcessingResetPasswordRequestAction =\r\n                (action as CompleteProcessingResetPasswordRequestAction);\r\n            return {\r\n                ...state,\r\n                resetPasswordDialogEmailSent: completeAction.error === undefined,\r\n                resetPasswordDialogError: completeAction.error !== undefined\r\n                    ? {detail: completeAction.error} : state.resetPasswordDialogError,\r\n                resetPasswordDialogProcessing: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default signInReducer;","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    InputAdornment,\r\n    Paper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport Routes from \"../../router/routes\";\r\nimport {\r\n    errorSendingResetPassword,\r\n    isProcessingResetPasswordRequest,\r\n    SignInState,\r\n    successfullySentResetPassword\r\n} from \"./SignInReducer\";\r\nimport {\r\n    onSendResetPasswordClick,\r\n    onSignInClick,\r\n    onTextChanged,\r\n    togglePasswordVisibility,\r\n    toggleResetPasswordDialog\r\n} from \"./SignInActions\";\r\nimport {\r\n    AuthenticationState,\r\n    hasAuthenticationError,\r\n    isAuthenticating\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Close} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignInProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n    SignInLocalState: SignInState;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    togglePasswordVisibility: () => any;\r\n    onSignInClick: (event: FormEvent) => any;\r\n    toggleResetPasswordDialog: () => any;\r\n    onSendResetPasswordClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        SignInLocalState: state.SignInLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        togglePasswordVisibility: () => dispatch(togglePasswordVisibility()),\r\n        onSignInClick: (event: FormEvent) => dispatch(onSignInClick(event)),\r\n        toggleResetPasswordDialog: () => dispatch(toggleResetPasswordDialog()),\r\n        onSendResetPasswordClick: () => dispatch(onSendResetPasswordClick())\r\n    }\r\n}\r\n\r\nclass SignInNew extends Component<SignInProps\r\n    & Readonly<RouteComponentProps<RouteParams>>,\r\n    {}> {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            togglePasswordVisibility,\r\n            onSignInClick,\r\n            toggleResetPasswordDialog\r\n        } = this.props;\r\n\r\n        return <Box>\r\n            {/** Sign in card */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={{span: 12, offset: 0}}\r\n                    md={{span: 6, offset: 3}}\r\n                    lg={{span: 6, offset: 3}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        width=\"100%\"\r\n                        justifyContent=\"center\"\r\n                        paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"}\r\n                        paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"}\r\n                    >\r\n                        {/** Sign in card container */}\r\n                        <Paper\r\n                            elevation={0}\r\n                            square\r\n                            className={css(sharedStyles.kick_starter_border_box)}\r\n                            style={{\r\n                                width: 650,\r\n                                padding: MediaQueryState.isMobile ? 20 : 30\r\n                            }}\r\n                        >\r\n                            {/** Sign in card header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                marginBottom=\"35px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h4\"\r\n                                    align=\"center\"\r\n                                    paragraph\r\n                                    color=\"primary\"\r\n                                >\r\n                                    Sign in to your account\r\n                                </Typography>\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    Connecting businesses and investors across the South West of England\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Display message to inform the user that the reset password email\r\n                             has been successfully sent */}\r\n                            {\r\n                                !successfullySentResetPassword(SignInLocalState)\r\n                                    ? null\r\n                                    : <Box\r\n                                        marginBottom=\"35px\"\r\n                                        color=\"white\"\r\n                                        bgcolor={appColors.dark_green}\r\n                                        padding=\"15px\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            An email with password reset instructions has been sent to\r\n                                            your email address.\r\n                                        </Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Display error */}\r\n                            {\r\n                                !hasAuthenticationError(AuthenticationState)\r\n                                    ? null\r\n                                    : <Box\r\n                                        marginBottom=\"35px\"\r\n                                        padding=\"15px\"\r\n                                        color=\"white\"\r\n                                        bgcolor=\"error.main\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            {AuthenticationState.error?.detail}\r\n                                        </Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Sign in form */}\r\n                            <form\r\n                                onSubmit={onSignInClick}\r\n                            >\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {/** Email field */}\r\n                                    <FormControl>\r\n                                        <TextField\r\n                                            label=\"Email address\"\r\n                                            name=\"signInEmail\"\r\n                                            value={SignInLocalState.signInEmail}\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            error={SignInLocalState.errorSignInEmail}\r\n                                            onChange={onTextChanged}\r\n                                        />\r\n                                    </FormControl>\r\n\r\n                                    {/** Password field */}\r\n                                    <FormControl>\r\n                                        <TextField\r\n                                            label=\"Password\"\r\n                                            name=\"signInPassword\"\r\n                                            type={SignInLocalState.showPassword ? \"text\" : \"password\"}\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            error={SignInLocalState.errorSignInPassword}\r\n                                            onChange={onTextChanged}\r\n                                            InputProps={{\r\n                                                endAdornment: (\r\n                                                    <InputAdornment\r\n                                                        position=\"end\"\r\n                                                    >\r\n                                                        <IconButton\r\n                                                            edge=\"end\"\r\n                                                            aria-label=\"Toggle password visibility\"\r\n                                                            onClick={togglePasswordVisibility}\r\n                                                        >\r\n                                                            {\r\n                                                                SignInLocalState.showPassword\r\n                                                                    ?\r\n                                                                    <VisibilityOff/>\r\n                                                                    :\r\n                                                                    <Visibility/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                ),\r\n                                            }}\r\n                                        />\r\n                                    </FormControl>\r\n\r\n                                    <Box\r\n                                        marginTop=\"35px\"\r\n                                        marginBottom=\"45px\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"center\"\r\n                                        >\r\n                                            By clicking Sign In, you agree to our&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.nonGroupTermsOfUse}\r\n                                                target=\"_blank\"\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"nav-link\"\r\n                                                childComponent={\r\n                                                    \"Terms of use\"\r\n                                                }\r\n                                            />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.nonGroupTermsOfUse}\r\n                                                target=\"_blank\"\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"nav-link\"\r\n                                                childComponent={\r\n                                                    \"Privacy policy\"\r\n                                                }\r\n                                            />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {\r\n                                        !isAuthenticating(AuthenticationState)\r\n                                            ? null\r\n                                            : <Box\r\n                                                display=\"flex\"\r\n                                                marginBottom=\"45px\"\r\n                                                justifyContent=\"center\"\r\n                                            >\r\n                                                <HashLoader\r\n                                                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                />\r\n                                            </Box>\r\n                                    }\r\n\r\n                                    <FormControl>\r\n                                        <Button\r\n                                            type=\"submit\"\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            size=\"large\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                        >\r\n                                            Sign in\r\n                                        </Button>\r\n                                    </FormControl>\r\n\r\n                                    {/** Sign up */}\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        marginTop=\"25px\"\r\n                                        justifyContent=\"center\"\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Don't have an Invest West account?&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")}\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"nav-link\"\r\n                                                childComponent={\r\n                                                    \"Sign up\"\r\n                                                }\r\n                                            />\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {/** Forgot password */}\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        marginTop=\"16px\"\r\n                                        justifyContent=\"center\"\r\n                                        onClick={toggleResetPasswordDialog}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            color=\"primary\"\r\n                                            className={css(sharedStyles.nav_link_hover)}\r\n                                        >\r\n                                            Forgot your password?\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            </form>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Reset password dialog */}\r\n            <ResetPasswordDialogComponent/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInNew);\r\n\r\nclass ResetPasswordDialog extends Component<SignInProps, {}> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            toggleResetPasswordDialog,\r\n            onSendResetPasswordClick\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            fullWidth\r\n            maxWidth=\"sm\"\r\n            fullScreen={this.props.MediaQueryState.isMobile}\r\n            open={SignInLocalState.showResetPasswordDialog}\r\n            onClose={toggleResetPasswordDialog}\r\n        >\r\n            <DialogTitle>\r\n                <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        justifyContent=\"flex-start\"\r\n                        flexGrow={2}\r\n                    >\r\n                        <Typography\r\n                            variant=\"h5\"\r\n                            align=\"left\"\r\n                        >\r\n                            Reset Your Password\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box\r\n                        display=\"flex\"\r\n                        justifyContent=\"flex-end\"\r\n                        flexGrow={1}\r\n                    >\r\n                        <IconButton\r\n                            onClick={toggleResetPasswordDialog}\r\n                        >\r\n                            <Close/>\r\n                        </IconButton>\r\n                    </Box>\r\n                </Box>\r\n            </DialogTitle>\r\n\r\n            <DialogContent\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                <Box\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                    justifyContent=\"center\"\r\n                    marginTop=\"15px\"\r\n                    paddingX=\"24px\"\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDirection=\"column\"\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"left\"\r\n                        >\r\n                            Please provide the email address you used\r\n                            when you signed up for your Invest West account.\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"left\"\r\n                        >\r\n                            We will send you an email with a link to\r\n                            reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b>\r\n                        </Typography>\r\n                    </Box>\r\n\r\n                    <Box\r\n                        height=\"42px\"\r\n                    />\r\n\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDirection=\"column\"\r\n                    >\r\n                        {/** Display error */}\r\n                        {\r\n                            !errorSendingResetPassword(SignInLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    width=\"100%\"\r\n                                    bgcolor=\"error.main\"\r\n                                    padding=\"15px\"\r\n                                    marginBottom=\"42px\"\r\n                                    color=\"white\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        Unable to send request password email.\r\n                                    </Typography>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Processing indicator */}\r\n                        {\r\n                            !isProcessingResetPasswordRequest(SignInLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    marginBottom=\"42px\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                    />\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Email input */}\r\n                        <TextField\r\n                            name=\"resetPasswordDialogEmail\"\r\n                            value={SignInLocalState.resetPasswordDialogEmail}\r\n                            label=\"Email address\"\r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            onChange={onTextChanged}\r\n                        />\r\n                    </Box>\r\n\r\n                    <Box\r\n                        height=\"25px\"\r\n                    />\r\n                </Box>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Box\r\n                    display=\"flex\"\r\n                    justifyContent=\"flex-end\"\r\n                    padding=\"8px\"\r\n                >\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        size=\"medium\"\r\n                        onClick={onSendResetPasswordClick}\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        disabled={SignInLocalState.resetPasswordDialogEmail.trim().length === 0}\r\n                    >\r\n                        Send\r\n                    </Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nconst ResetPasswordDialogComponent = connect(mapStateToProps, mapDispatchToProps)(ResetPasswordDialog);\r\n\r\n","import React, {Component} from \"react\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport {Box, Typography} from \"@material-ui/core\";\r\nimport * as appColors from \"../../values/colors\";\r\n\r\nexport default class PageNotFound extends Component<any, any> {\r\n    render() {\r\n        return <Container\r\n            fluid\r\n            style={{\r\n                padding: 0\r\n            }}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDirection=\"column\"\r\n                        width=\"100%\"\r\n                        height=\"100%\"\r\n                        alignItems=\"center\"\r\n                        marginTop=\"120px\"\r\n                    >\r\n                        <Box\r\n                            color={appColors.primaryColor}\r\n                        >\r\n                            <Typography\r\n                                variant=\"h1\"\r\n                                align=\"center\"\r\n                            >\r\n                                404 error\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box\r\n                            height=\"40px\"\r\n                        />\r\n                        <Typography\r\n                            variant=\"h2\"\r\n                            align=\"center\"\r\n                        >\r\n                            Page not found\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <Typography\r\n                            variant=\"h2\"\r\n                            color=\"textSecondary\"\r\n                            align=\"center\"\r\n                        >\r\n                            We're sorry, the page you requested could not be found.\r\n                        </Typography>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName,\r\n    successfullyValidatedGroupUrl\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {Box, Button, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport Routes from \"../../router/routes\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface HeaderProps extends HeaderLocalProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\ninterface HeaderLocalProps {\r\n    routePath: string;\r\n    homUrl: string;\r\n    dashboardUrl: string;\r\n    signInUrl: string;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass Header extends Component<HeaderProps, {}> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            routePath,\r\n            homUrl,\r\n            dashboardUrl,\r\n            signInUrl\r\n        } = this.props;\r\n\r\n        return <Container\r\n            fluid\r\n            style={{\r\n                padding: 0\r\n            }}\r\n        >\r\n            <Row\r\n                noGutters\r\n                style={{\r\n                    paddingTop: 10,\r\n                    paddingBottom: 10,\r\n                    backgroundColor: appColors.white\r\n                }}\r\n            >\r\n                {/** Home/Dashboard */}\r\n                <Col\r\n                    xs={{span: 6, order: 3}}\r\n                    sm={{span: 6, order: 3}}\r\n                    md={{span: 4, order: 1}}\r\n                    lg={{span: 4, order: 1}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDirection=\"row\"\r\n                        height=\"100%\"\r\n                        alignItems=\"center\"\r\n                        marginLeft=\"30px\"\r\n                    >\r\n                        {\r\n                            successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={homUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Home\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n\r\n                        {\r\n                            isAuthenticating(AuthenticationState)\r\n                                ? null\r\n                                : !successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={dashboardUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Dashboard\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Logo */}\r\n                <Col\r\n                    xs={{span: 12, order: 1}}\r\n                    sm={{span: 12, order: 1}}\r\n                    md={{span: 4, order: 2}}\r\n                    lg={{span: 4, order: 2}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDirection=\"column\"\r\n                        justifyContent=\"center\"\r\n                        alignItems=\"center\"\r\n                    >\r\n                        <CustomLink\r\n                            color=\"none\"\r\n                            activeColor=\"none\"\r\n                            activeUnderline={false}\r\n                            url={homUrl}\r\n                            component=\"nav-link\"\r\n                            childComponent={\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                    width=\"125px\"\r\n                                    height=\"100%\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <img\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                ? null\r\n                                                : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                    ? require(\"../../img/logo.png\").default\r\n                                                    : successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                                        ? getGroupLogo(ManageGroupUrlState.group)\r\n                                                        : null\r\n                                        }\r\n                                        style={{\r\n                                            width: \"auto\",\r\n                                            height: 36,\r\n                                            objectFit: \"contain\"\r\n                                        }}\r\n                                    />\r\n                                    <Box\r\n                                        height=\"3px\"\r\n                                    />\r\n                                    <Box\r\n                                        fontWeight=\"fontWeightBold\"\r\n                                        color={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? appColors.primaryColor\r\n                                                : \"primary.main\"\r\n                                        }\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            noWrap\r\n                                        >\r\n                                            {\r\n                                                Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                    ? \"Invest West\"\r\n                                                    : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                    ? \"\"\r\n                                                    : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                        ? \"Invest West\"\r\n                                                        : ManageGroupUrlState.group?.displayName\r\n                                            }\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n\r\n                {\r\n                    !MediaQueryState.isMobile\r\n                        ? null\r\n                        : <Col\r\n                            xs={{span: 12, order: 2}}\r\n                            sm={{span: 12, order: 2}}\r\n                        >\r\n                            <Box\r\n                                marginY=\"10px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n                        </Col>\r\n                }\r\n\r\n                {/** Sign in/Avatar */}\r\n                <Col\r\n                    xs={{span: 6, order: 4}}\r\n                    sm={{span: 6, order: 4}}\r\n                    md={{span: 4, order: 3}}\r\n                    lg={{span: 4, order: 3}}\r\n                >\r\n                    {\r\n                        isAuthenticating(AuthenticationState)\r\n                            ? null\r\n                            : !successfullyAuthenticated(AuthenticationState)\r\n                            ? Routes.isSignInRoute(routePath)\r\n                                ? null\r\n                                : <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"row\"\r\n                                    height=\"100%\"\r\n                                    justifyContent=\"flex-end\"\r\n                                    alignItems=\"center\"\r\n                                    marginRight=\"30px\"\r\n                                >\r\n                                    <CustomLink\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        url={signInUrl}\r\n                                        // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button\r\n                                                color=\"primary\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                variant=\"contained\"\r\n                                                size=\"medium\"\r\n                                            >\r\n                                                Sign in\r\n                                            </Button>\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                            : null\r\n                    }\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Divider */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../redux-store/reducers\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    successfullyValidatedGroupUrl\r\n} from \"../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport Routes from \"./routes\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {validateGroupUrl} from \"../redux-store/actions/manageGroupUrlActions\";\r\nimport {\r\n    AuthenticationState,\r\n    authIsNotInitialized,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../redux-store/reducers/authenticationReducer\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport Header from \"../shared-components/header/Header\";\r\nimport {signIn, signOut} from \"../redux-store/actions/authenticationActions\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport {RouteParams} from \"./router\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport {\r\n    isLoadingSystemAttributes,\r\n    ManageSystemAttributesState\r\n} from \"../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {loadSystemAttributes} from \"../redux-store/actions/manageSystemAttributesActions\";\r\nimport User, {isInvestor, isIssuer} from \"../models/user\";\r\nimport Admin, {isAdmin} from \"../models/admin\";\r\nimport GroupOfMembership from \"../models/group_of_membership\";\r\nimport {BarLoader} from \"react-spinners\";\r\n\r\ninterface GroupRouteProps extends GroupRouteLocalProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    loadSystemAttributes: () => any;\r\n    validateGroupUrl: (path: string, groupUserName: string | null) => any;\r\n    signIn: () => any;\r\n    signOut: () => any;\r\n}\r\n\r\ninterface GroupRouteLocalProps {\r\n    showHeader: boolean;\r\n    backgroundColor?: string;\r\n    component: React.ReactNode;\r\n}\r\n\r\ninterface GroupRouteState {\r\n    navigatingFromSignInOrSignUpToDashboard: boolean;\r\n    navigatingToSignIn: boolean;\r\n    navigatingToError: boolean;\r\n}\r\n\r\nconst initialState: GroupRouteState = {\r\n    navigatingFromSignInOrSignUpToDashboard: false,\r\n    navigatingToSignIn: false,\r\n    navigatingToError: false\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadSystemAttributes: () => dispatch(loadSystemAttributes()),\r\n        validateGroupUrl: (path: string, groupUserName: string | null) => dispatch(validateGroupUrl(path, groupUserName)),\r\n        signIn: () => dispatch(signIn()),\r\n        signOut: () => dispatch(signOut())\r\n    }\r\n}\r\n\r\nclass GroupRoute extends Component<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>, GroupRouteState> {\r\n    private authListener: firebase.default.Unsubscribe | null;\r\n    private routePath: string;\r\n    private routeParams: any;\r\n\r\n    constructor(props: GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>) {\r\n        super(props);\r\n        this.authListener = null;\r\n        this.routePath = this.props.match.path;\r\n        this.routeParams = this.props.match.params;\r\n        this.state = {\r\n            ...initialState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateRouteAndAuthentication();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>>, prevState: Readonly<GroupRouteState>, snapshot?: any) {\r\n        this.validateRouteAndAuthentication();\r\n\r\n        // system attributes are being loaded\r\n        if (isLoadingSystemAttributes(this.props.ManageSystemAttributesState)) {\r\n            return;\r\n        }\r\n\r\n        // group url is being validated\r\n        if (isValidatingGroupUrl(this.props.ManageGroupUrlState)) {\r\n            return;\r\n        }\r\n\r\n        // invalid group url --> redirect to 404 page\r\n        if (!successfullyValidatedGroupUrl(this.props.ManageGroupUrlState) && !this.state.navigatingToError) {\r\n            this.setState({\r\n                navigatingToError: true\r\n            });\r\n            this.props.history.push(Routes.error404);\r\n            return;\r\n        }\r\n\r\n        // redirect an unauthenticated user to the sign in route if they try to access protected routes\r\n        if (Routes.isProtectedRoute(this.routePath)\r\n            && !authIsNotInitialized(this.props.AuthenticationState)\r\n            && !isAuthenticating(this.props.AuthenticationState)\r\n            && !successfullyAuthenticated(this.props.AuthenticationState)\r\n            && !this.state.navigatingToSignIn\r\n        ) {\r\n            this.setState({\r\n                navigatingToSignIn: true\r\n            });\r\n            this.props.history.push(Routes.constructSignInRoute(this.routeParams));\r\n        }\r\n\r\n        // redirect the user to their dashboard if they are on the sign in/up route and are successfully authenticated\r\n        if ((Routes.isSignInRoute(this.routePath) || Routes.isSignUpRoute(this.routePath))\r\n            && successfullyAuthenticated(this.props.AuthenticationState)\r\n            && !this.state.navigatingFromSignInOrSignUpToDashboard\r\n        ) {\r\n            const dashboardRoute: string = Routes.constructDashboardRoute(this.routeParams, this.props.ManageGroupUrlState, this.props.AuthenticationState);\r\n            this.setState({\r\n                navigatingFromSignInOrSignUpToDashboard: true\r\n            });\r\n            this.props.history.push(dashboardRoute);\r\n        }\r\n\r\n        // redirect the user to 404 page if they are trying to access routes that are not meant for them\r\n        if (successfullyAuthenticated(this.props.AuthenticationState)) {\r\n            const currentUser: User | Admin | null = this.props.AuthenticationState.currentUser;\r\n            if (currentUser) {\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n                let shouldRedirectToError: boolean = false;\r\n\r\n                if (Routes.isRouteReservedForSuperAdmin(this.routePath)) {\r\n                    if (!currentAdmin || (currentAdmin && !currentAdmin.superAdmin)) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                } else if (Routes.isGroupAdminRoute(this.routePath)) {\r\n                    if (!currentAdmin) {\r\n                        shouldRedirectToError = true;\r\n                    } else {\r\n                        const adminGroup: GroupOfMembership = this.props.AuthenticationState.groupsOfMembership[0];\r\n                        if (adminGroup.group.groupUserName !== this.routeParams.groupUserName) {\r\n                            shouldRedirectToError = true;\r\n                        }\r\n                    }\r\n                } else if (Routes.isIssuerDashboardRoute(this.routePath)) {\r\n                    if (!isIssuer(currentUser)) {\r\n                        shouldRedirectToError = true;\r\n                    } else if (this.props.AuthenticationState.groupsOfMembership\r\n                        .filter(groupOfMembership =>\r\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\r\n                    ) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                } else if (Routes.isInvestorDashboardRoute(this.routePath)) {\r\n                    if (!isInvestor(currentUser)) {\r\n                        shouldRedirectToError = true;\r\n                    } else if (this.props.AuthenticationState.groupsOfMembership\r\n                        .filter(groupOfMembership =>\r\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\r\n                    ) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                }\r\n\r\n                if (shouldRedirectToError && !this.state.navigatingToError) {\r\n                    this.setState({\r\n                        navigatingToError: true\r\n                    });\r\n                    this.props.history.push(Routes.error404);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath) && this.state.navigatingFromSignInOrSignUpToDashboard) {\r\n            this.setState({\r\n                navigatingFromSignInOrSignUpToDashboard: false\r\n            });\r\n        }\r\n\r\n        if (Routes.isSignInRoute(this.routePath) && this.state.navigatingToSignIn) {\r\n            this.setState({\r\n                navigatingToSignIn: false\r\n            });\r\n        }\r\n\r\n        if (Routes.isErrorRoute(this.routePath) && this.state.navigatingToError) {\r\n            this.setState({\r\n                navigatingToError: false\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.detachAuthListener();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            showHeader,\r\n            backgroundColor\r\n        } = this.props;\r\n\r\n        this.updateRouteAndParams();\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || (successfullyValidatedGroupUrl(ManageGroupUrlState) && authIsNotInitialized(AuthenticationState))\r\n            || ((!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath))\r\n                && isAuthenticating(AuthenticationState))\r\n        ) {\r\n            return (\r\n                <Box>\r\n                    <BarLoader\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                        width=\"100%\"\r\n                        height={4}\r\n                    />\r\n                </Box>\r\n            );\r\n        }\r\n\r\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState)) {\r\n            return (\r\n                <Container\r\n                    fluid\r\n                    style={{\r\n                        padding: 0,\r\n                        height: backgroundColor !== undefined ? \"100%\" : \"none\",\r\n                        minHeight: backgroundColor !== undefined ? \"100vh\" : \"none\",\r\n                        backgroundColor: backgroundColor ?? \"none\"\r\n                    }}\r\n                >\r\n                    {\r\n                        !showHeader\r\n                            ? null\r\n                            : <Row\r\n                                noGutters\r\n                            >\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={12}\r\n                                    lg={12}\r\n                                >\r\n                                    <Header\r\n                                        routePath={this.routePath}\r\n                                        homUrl={Routes.constructHomeRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\r\n                                        dashboardUrl={Routes.constructDashboardRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\r\n                                        signInUrl={Routes.constructSignInRoute(this.routeParams)}\r\n                                    />\r\n                                </Col>\r\n                            </Row>\r\n                    }\r\n\r\n                    <Row\r\n                        noGutters\r\n                    >\r\n                        <Box\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                        >\r\n                            {\r\n                                this.props.component\r\n                            }\r\n                        </Box>\r\n                    </Row>\r\n                </Container>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    validateRouteAndAuthentication = () => {\r\n        this.updateRouteAndParams();\r\n\r\n        this.props.loadSystemAttributes();\r\n\r\n        this.props.validateGroupUrl(\r\n            this.routePath, this.routeParams.hasOwnProperty(\"groupUserName\")\r\n                ? this.routeParams.groupUserName : null\r\n        );\r\n\r\n        this.attachAuthListener();\r\n    }\r\n\r\n    updateRouteAndParams = () => {\r\n        this.routePath = this.props.match.path;\r\n        this.routeParams = this.props.match.params;\r\n    }\r\n\r\n    attachAuthListener = () => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState) && !this.authListener) {\r\n            this.authListener = firebase.auth().onAuthStateChanged(firebaseUser => {\r\n                if (firebaseUser) {\r\n                    this.props.signIn();\r\n                } else {\r\n                    this.props.signOut();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    detachAuthListener = () => {\r\n        if (this.authListener) {\r\n            this.authListener();\r\n            this.authListener = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupRoute);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport InvitedUser from \"../../models/invited_user\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\nimport React from \"react\";\r\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/passwordUtils\";\r\nimport {isValidEmailAddress} from \"../../utils/emailUtils\";\r\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport enum SignUpEvents {\r\n    LoadingInvitedUser = \"SignUpEvents.LoadingInvitedUser\",\r\n    CompleteLoadingInvitedUser = \"SignUpEvents.CompleteLoadingInvitedUser\",\r\n    InputFieldChanged = \"SignUpEvents.InputFieldChanged\",\r\n    CreatingAccount = \"SignUpEvents.CreatingAccount\",\r\n    CompleteCreatingAccount = \"SignUpEvents.CompleteCreatingAccount\"\r\n}\r\n\r\nexport interface SignUpAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteLoadingInvitedUserAction extends SignUpAction {\r\n    invitedUser?: InvitedUser;\r\n    error?: string;\r\n}\r\n\r\nexport interface InputFieldChangedAction extends SignUpAction {\r\n    name: string;\r\n    value: string | boolean;\r\n}\r\n\r\nexport interface CompleteCreatingAccountAction extends SignUpAction {\r\n    error?: string;\r\n}\r\n\r\nexport const loadInvitedUser: ActionCreator<any> = (invitedUserID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n\r\n        const completeAction: CompleteLoadingInvitedUserAction = {\r\n            type: SignUpEvents.CompleteLoadingInvitedUser\r\n        };\r\n\r\n        try {\r\n            dispatch({\r\n                type: SignUpEvents.LoadingInvitedUser\r\n            });\r\n\r\n            const response = await new UserRepository().retrieveInvitedUser(invitedUserID);\r\n            const invitedUser: InvitedUser = response.data;\r\n            completeAction.invitedUser = JSON.parse(JSON.stringify(invitedUser));\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const handleInputFieldChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const inputFieldType: string = event.target.type;\r\n        const inputFieldName: string = event.target.name;\r\n        const inputFieldValue: string = event.target.value;\r\n        const inputFieldChecked: boolean = event.target.checked;\r\n\r\n        const action: InputFieldChangedAction = {\r\n            type: SignUpEvents.InputFieldChanged,\r\n            name: inputFieldName,\r\n            value: inputFieldType === \"checkbox\" ? inputFieldChecked : inputFieldValue\r\n        };\r\n\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const createAccount: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            invitedUser,\r\n            userType,\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            confirmedEmail,\r\n            password,\r\n            confirmedPassword,\r\n            acceptMarketingPreferences\r\n        } = getState().SignUpLocalState;\r\n\r\n        const {\r\n            group\r\n        } = getState().ManageGroupUrlState;\r\n\r\n        const completeAction: CompleteCreatingAccountAction = {\r\n            type: SignUpEvents.CompleteCreatingAccount\r\n        };\r\n\r\n        // invalid email address\r\n        if (!isValidEmailAddress(email) || !isValidEmailAddress(confirmedEmail)) {\r\n            completeAction.error = \"Please enter a valid email address.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // emails not match\r\n        if (email.trim().toLocaleLowerCase() !== confirmedEmail.trim().toLocaleLowerCase()) {\r\n            completeAction.error = \"Emails do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // passwords not match\r\n        if (password !== confirmedPassword) {\r\n            completeAction.error = \"Passwords do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // password not strong enough\r\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\r\n            completeAction.error = \"Password is too weak. Please select a stronger password.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: SignUpEvents.CreatingAccount\r\n            });\r\n\r\n            await new UserRepository().signUp({\r\n                isPublicRegistration: invitedUser === undefined,\r\n                invitedUserID: invitedUser !== undefined ? invitedUser.id : undefined,\r\n                userProfile: {\r\n                    title,\r\n                    firstName,\r\n                    lastName,\r\n                    email,\r\n                    type: userType\r\n                },\r\n                password,\r\n                groupID: invitedUser ? invitedUser.invitedBy : group?.anid ?? \"\",\r\n                acceptMarketingPreferences: acceptMarketingPreferences\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(signIn(email, password));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteConfirmingResetPasswordAction,\r\n    CompleteVerifyingCodeAction,\r\n    ResetPasswordAction,\r\n    ResetPasswordEvents,\r\n    TextChangedAction\r\n} from \"./ResetPasswordActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface ResetPasswordState {\r\n    verifyingCode: boolean;\r\n    codeVerified: boolean;\r\n    actionCode: string | null;\r\n    email: string | null;\r\n    errorVerifyingCode?: Error;\r\n\r\n    password: string;\r\n    confirmedPassword: string;\r\n\r\n    resettingPassword: boolean;\r\n    passwordReset: boolean;\r\n    errorResettingPassword?: Error;\r\n}\r\n\r\nconst initialState: ResetPasswordState = {\r\n    verifyingCode: false,\r\n    codeVerified: false,\r\n    actionCode: null,\r\n    email: null,\r\n\r\n    password: \"\",\r\n    confirmedPassword: \"\",\r\n\r\n    resettingPassword: false,\r\n    passwordReset: false\r\n}\r\n\r\nexport const isVerifyingCode = (state: ResetPasswordState) => {\r\n    return state.verifyingCode && !state.codeVerified;\r\n}\r\n\r\nexport const successfullyVerifyingCode = (state: ResetPasswordState) => {\r\n    return !state.verifyingCode && state.codeVerified && state.email !== null && state.errorVerifyingCode === undefined;\r\n}\r\n\r\nexport const hasErrorVerifyingCode = (state: ResetPasswordState) => {\r\n    return !state.verifyingCode && state.codeVerified && state.email === null && state.errorVerifyingCode !== undefined;\r\n}\r\n\r\nexport const isResettingPassword = (state: ResetPasswordState) => {\r\n    return state.resettingPassword && !state.passwordReset;\r\n}\r\n\r\nexport const successfullyResettingPassword = (state: ResetPasswordState) => {\r\n    return !state.resettingPassword && state.passwordReset && state.errorResettingPassword === undefined;\r\n}\r\n\r\nexport const hasErrorResettingPassword = (state: ResetPasswordState) => {\r\n    return !state.resettingPassword && !state.passwordReset && state.errorResettingPassword !== undefined;\r\n}\r\n\r\nconst resetPasswordReducer = (state = initialState, action: ResetPasswordAction) => {\r\n    switch (action.type) {\r\n        case ResetPasswordEvents.VerifyingCode:\r\n            return {\r\n                ...state,\r\n                verifyingCode: true,\r\n                codeVerified: false\r\n            }\r\n        case ResetPasswordEvents.CompleteVerifyingCode:\r\n            const completeVerifyingCodeAction: CompleteVerifyingCodeAction = action as CompleteVerifyingCodeAction;\r\n            return {\r\n                ...state,\r\n                verifyingCode: false,\r\n                codeVerified: true,\r\n                actionCode: completeVerifyingCodeAction.actionCode,\r\n                email: completeVerifyingCodeAction.email,\r\n                errorVerifyingCode: completeVerifyingCodeAction.error !== undefined ? {detail: completeVerifyingCodeAction.error} : state.errorVerifyingCode\r\n            }\r\n        case ResetPasswordEvents.TextChanged:\r\n            const textChangedAction: TextChangedAction = action as TextChangedAction;\r\n            return {\r\n                ...state,\r\n                [textChangedAction.name]: textChangedAction.value\r\n            }\r\n        case ResetPasswordEvents.ConfirmingResetPassword:\r\n            return {\r\n                ...state,\r\n                resettingPassword: true,\r\n                passwordReset: false,\r\n                errorResettingPassword: undefined\r\n            }\r\n        case ResetPasswordEvents.CompleteConfirmingResetPassword:\r\n            const completeConfirmingResetPasswordAction: CompleteConfirmingResetPasswordAction = action as CompleteConfirmingResetPasswordAction;\r\n            return {\r\n                ...state,\r\n                resettingPassword: false,\r\n                passwordReset: completeConfirmingResetPasswordAction.error === undefined,\r\n                errorResettingPassword: completeConfirmingResetPasswordAction.error ? {detail: completeConfirmingResetPasswordAction.error} : state.errorResettingPassword\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default resetPasswordReducer;","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppState } from \"../../redux-store/reducers\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AnyAction } from \"redux\";\r\nimport { Box, Button, TextField, Typography } from \"@material-ui/core\";\r\nimport { Redirect, RouteComponentProps } from \"react-router-dom\";\r\nimport { RouteParams } from \"../../router/router\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { css } from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport queryString from \"query-string\";\r\nimport { confirmPasswordReset, onTextChanged, verifyCode } from \"./ResetPasswordActions\";\r\nimport {\r\n    hasErrorResettingPassword,\r\n    hasErrorVerifyingCode,\r\n    isResettingPassword,\r\n    isVerifyingCode,\r\n    ResetPasswordState,\r\n    successfullyResettingPassword\r\n} from \"./ResetPasswordReducer\";\r\nimport { HashLoader } from \"react-spinners\";\r\nimport { getGroupRouteTheme, ManageGroupUrlState } from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport { MediaQueryState } from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface ResetPasswordProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    verifyCode: (code: string | null) => any;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    confirmPasswordReset: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResetPasswordLocalState: state.ResetPasswordLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        verifyCode: (code: string | null) => dispatch(verifyCode(code)),\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        confirmPasswordReset: () => dispatch(confirmPasswordReset())\r\n    }\r\n}\r\n\r\nclass ResetPassword extends Component<ResetPasswordProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n\r\n    componentDidMount() {\r\n        const params = queryString.parse(this.props.location.search);\r\n        if (params.oobCode) {\r\n            const actionCode: string | string[] | null | undefined = params.oobCode;\r\n            if (actionCode) {\r\n                this.props.verifyCode(actionCode as string);\r\n            } else {\r\n                this.props.verifyCode(null);\r\n            }\r\n        } else {\r\n            this.props.verifyCode(null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            MediaQueryState,\r\n            ResetPasswordLocalState,\r\n            onTextChanged,\r\n            confirmPasswordReset\r\n        } = this.props;\r\n\r\n        // verifying code\r\n        if (isVerifyingCode(ResetPasswordLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\r\n                <HashLoader\r\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                />\r\n            </Box>;\r\n        }\r\n\r\n        // failed to verify code\r\n        if (hasErrorVerifyingCode(ResetPasswordLocalState)) {\r\n            return <Redirect\r\n                to={Routes.error404}\r\n            />;\r\n        }\r\n\r\n        // password has been successfully updated\r\n        if (successfullyResettingPassword(ResetPasswordLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\r\n                <Typography\r\n                    variant=\"h5\"\r\n                    color=\"primary\"\r\n                    align=\"center\"\r\n                >\r\n                    Your password has been updated.\r\n                </Typography>\r\n            </Box>;\r\n        }\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"18px\" : \"0px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"30px\" : \"60px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{ span: 6, offset: 3 }}\r\n                    lg={{ span: 4, offset: 4 }}\r\n                >\r\n                    <Box>\r\n                        <Typography\r\n                            variant=\"h4\"\r\n                            align=\"left\"\r\n                        >\r\n                            Reset Password\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"40px\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            label=\"Password\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            onChange={onTextChanged}\r\n                        />\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            label=\"Confirm Password\"\r\n                            name=\"confirmedPassword\"\r\n                            type=\"password\"\r\n                            onChange={onTextChanged}\r\n                        />\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        {\r\n                            !hasErrorResettingPassword(ResetPasswordLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    width=\"100%\"\r\n                                    bgcolor=\"error.main\"\r\n                                    padding=\"15px\"\r\n                                    marginBottom=\"20px\"\r\n                                    color=\"white\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {ResetPasswordLocalState.errorResettingPassword?.detail}\r\n                                    </Typography>\r\n                                </Box>\r\n                        }\r\n                        {\r\n                            !isResettingPassword(ResetPasswordLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    marginBottom=\"20px\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                    />\r\n                                </Box>\r\n                        }\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <Box\r\n                            display=\"flex\"\r\n                            justifyContent=\"flex-end\"\r\n                        >\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                onClick={() => confirmPasswordReset()}\r\n                            >\r\n                                Submit\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPassword);\r\n","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {resources} from \"../Resources\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nclass ResourceDetail extends Component<any, any> {\r\n    render() {\r\n        const resourceName = this.props.match.params.resourceName;\r\n        const resourceIndex = resources.findIndex(resource => resource.name === resourceName);\r\n        if (resourceIndex !== -1) {\r\n            const resource = resources[resourceIndex];\r\n            return resource.page;\r\n        }\r\n\r\n        return <Redirect to={Routes.error404}/>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceDetail);","export const PASSWORD_VERY_WEAK = 1;\r\nexport const PASSWORD_WEAK = 2;\r\nexport const PASSWORD_GOOD = 3;\r\nexport const PASSWORD_STRONG = 4;\r\nexport const PASSWORD_VERY_STRONG = 5;\r\nconst passwordBlacklist: string[] = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\r\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\r\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\r\n\r\n/**\r\n * This function is used to check the strength of the password.\r\n *\r\n * @param {*} password\r\n */\r\nexport const checkPasswordStrength = (password: string) => {\r\n    let strength = 0;\r\n    const minLength = 8;\r\n    // If the password length is less than or equal to minLength\r\n    if (password.length < minLength) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    } else {\r\n        strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\r\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\r\n        // strength = PASSWORD_WEAK;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\r\n    if (password.length > minLength &&\r\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\r\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\r\n        // strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\r\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_STRONG;\r\n    }\r\n\r\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\r\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_VERY_STRONG;\r\n    }\r\n\r\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    }\r\n\r\n    return strength;\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\n\r\nconst screenSizeQueries = {\r\n    mobile: `(min-width: 320px) and (max-width: 480px) and (orientation: portrait), (min-height: 320px) and (max-height: 480px) and (orientation: landscape)`,\r\n    tablet: `(min-width: 768px) and (max-width: 1024px) and (orientation: portrait), (min-height: 768px) and (max-height: 1024px) and (orientation: landscape)`,\r\n    laptop: `(min-width: 1200px) and (max-width: 1600px) and (orientation: landscape)`,\r\n    desktop: `(min-width: 1600px) and (orientation: landscape)`,\r\n    minHeight: `(min-height: 1200px)`\r\n}\r\n\r\nexport const mobileScreen = window.matchMedia(screenSizeQueries.mobile);\r\nexport const tabletScreen = window.matchMedia(screenSizeQueries.tablet);\r\nexport const laptopScreen = window.matchMedia(screenSizeQueries.laptop);\r\nexport const desktopScreen = window.matchMedia(screenSizeQueries.desktop);\r\nexport const minHeightScreen = window.matchMedia(screenSizeQueries.minHeight);\r\n\r\nexport enum MediaQueryEvents {\r\n    MediaQueryChanged = \"MediaQueryEvents.MediaQueryChanged\"\r\n}\r\n\r\nexport interface MediaQueryAction extends Action {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport const addMediaQueryListeners: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        mobileScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isMobile', mobileScreen.matches));\r\n        tabletScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isTablet', tabletScreen.matches));\r\n        laptopScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isLaptop', laptopScreen.matches));\r\n        desktopScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isDesktop', desktopScreen.matches));\r\n        minHeightScreen.addEventListener('change',\r\n            () => listener(dispatch, 'minHeightScreen', minHeightScreen.matches));\r\n    }\r\n};\r\n\r\nexport const removeMediaQueryListeners: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        mobileScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        tabletScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        laptopScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        desktopScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        minHeightScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n    }\r\n};\r\n\r\nconst listener = (dispatch: Dispatch | null, name: string | null, value: boolean | null) => {\r\n    if (dispatch) {\r\n        return dispatch({\r\n            type: MediaQueryEvents.MediaQueryChanged,\r\n            name,\r\n            value\r\n        });\r\n    }\r\n};","import {\r\n    CompleteCreatingAccountAction,\r\n    CompleteLoadingInvitedUserAction,\r\n    InputFieldChangedAction,\r\n    SignUpAction,\r\n    SignUpEvents\r\n} from \"./SignUpActions\";\r\nimport Error from \"../../models/error\";\r\nimport InvitedUser from \"../../models/invited_user\";\r\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport interface SignUpState {\r\n    invitedUser?: InvitedUser;\r\n    invitedUserLoaded: boolean;\r\n    loadingInvitedUser: boolean;\r\n    errorLoadingInvitedUser?: Error;\r\n\r\n    userType: number;\r\n    title: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    confirmedEmail: string;\r\n    password: string;\r\n    confirmedPassword: string;\r\n    acceptMarketingPreferences: boolean;\r\n\r\n    creatingAccount: boolean;\r\n    errorCreatingAccount?: Error;\r\n}\r\n\r\nconst initialState: SignUpState = {\r\n    invitedUserLoaded: false,\r\n    loadingInvitedUser: false,\r\n\r\n    userType: -1,\r\n    title: \"-1\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    confirmedEmail: \"\",\r\n    password: \"\",\r\n    confirmedPassword: \"\",\r\n    acceptMarketingPreferences: false,\r\n\r\n    creatingAccount: false\r\n}\r\n\r\nexport const isLoadingInvitedUser = (state: SignUpState) => {\r\n    return !state.invitedUserLoaded && state.loadingInvitedUser;\r\n}\r\n\r\nexport const hasSuccessfullyLoadedInvitedUser = (state: SignUpState) => {\r\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser !== undefined && state.errorLoadingInvitedUser === undefined;\r\n}\r\n\r\nexport const hasErrorLoadingInvitedUser = (state: SignUpState) => {\r\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser === undefined && state.errorLoadingInvitedUser !== undefined;\r\n}\r\n\r\nexport const notFoundInvitedUser = (state: SignUpState) => {\r\n    return hasErrorLoadingInvitedUser(state) && state.errorLoadingInvitedUser && state.errorLoadingInvitedUser.detail.includes(\"404\");\r\n}\r\n\r\nexport const isCreatingAccount = (state: SignUpState) => {\r\n    return state.creatingAccount;\r\n}\r\n\r\nexport const hasErrorCreatingAccount = (state: SignUpState) => {\r\n    return !state.creatingAccount && state.errorCreatingAccount !== undefined;\r\n}\r\n\r\nconst signUpReducer = (state = initialState, action: SignUpAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            return initialState;\r\n        case SignUpEvents.LoadingInvitedUser:\r\n            return {\r\n                ...state,\r\n                invitedUser: undefined,\r\n                invitedUserLoaded: false,\r\n                loadingInvitedUser: true,\r\n                errorLoadingInvitedUser: undefined\r\n            }\r\n        case SignUpEvents.CompleteLoadingInvitedUser:\r\n            const completeLoadingInvitedUserAction: CompleteLoadingInvitedUserAction = action as CompleteLoadingInvitedUserAction;\r\n            return {\r\n                ...state,\r\n                invitedUser: completeLoadingInvitedUserAction.invitedUser,\r\n                invitedUserLoaded: true,\r\n                loadingInvitedUser: false,\r\n                errorLoadingInvitedUser: completeLoadingInvitedUserAction.error !== undefined\r\n                    ? {detail: completeLoadingInvitedUserAction.error} : state.errorLoadingInvitedUser,\r\n                userType: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.type : state.userType,\r\n                title: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.title : state.title,\r\n                firstName: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.firstName : state.firstName,\r\n                lastName: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.lastName : state.lastName,\r\n                email: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.email : state.email\r\n            }\r\n        case SignUpEvents.InputFieldChanged:\r\n            const inputFieldChangedAction: InputFieldChangedAction = action as InputFieldChangedAction;\r\n            return {\r\n                ...state,\r\n                [inputFieldChangedAction.name]: inputFieldChangedAction.value\r\n            }\r\n        case SignUpEvents.CreatingAccount:\r\n            return {\r\n                ...state,\r\n                creatingAccount: true,\r\n                successfullyCreatedAccount: false,\r\n                errorCreatingAccount: undefined\r\n            }\r\n        case SignUpEvents.CompleteCreatingAccount:\r\n            const completeCreatingAccountAction: CompleteCreatingAccountAction = action as CompleteCreatingAccountAction;\r\n            return {\r\n                ...state,\r\n                creatingAccount: false,\r\n                errorCreatingAccount: completeCreatingAccountAction.error\r\n                    ? {detail: completeCreatingAccountAction.error} : state.errorCreatingAccount\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default signUpReducer;","/**\r\n * Invited user interface\r\n */\r\nimport User from \"./user\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport Project from \"./project\";\r\nimport InvestorSelfCertification from \"./investor_self_certification\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\nimport Pledge from \"./pledge\";\r\n\r\nexport default interface InvitedUser {\r\n    id: string;\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    title: string;\r\n    type: number;\r\n    status: number;\r\n\r\n    /**\r\n     * id of the group that the user is in\r\n     */\r\n    invitedBy: string;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds):\r\n     *      - indicates the date an unregistered user was invited by [invitedBy] group.\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = \"none\"\r\n     *\r\n     *      - indicates the date an unregistered user used PUBLIC URL to registered to [invitedBy] group\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = date in milliseconds\r\n     *\r\n     * --> \"none\": the user who requested to join the [invitedBy] group from their home group\r\n     */\r\n    invitedDate: number | \"none\";\r\n\r\n    /**\r\n     * this field only exists when the user is a registered user and [officialUserID] must map to a valid User profile\r\n     */\r\n    officialUserID?: string;\r\n\r\n    /**\r\n     * the date the user joined a group either\r\n     *\r\n     * - by invitation (an unregistered user was invited by a group admin)\r\n     *\r\n     * - or by registering via the PUBLIC URL (an unregistered registered to group a group via its public url)\r\n     *\r\n     * - or by requesting to access (the user must send a request access which has to be accepted by the group admins)\r\n     */\r\n    joinedDate?: number;\r\n\r\n    /**\r\n     * can be true or false\r\n     *\r\n     * --> true: the user to requested to join a group from their home group\r\n     *\r\n     * --> false: the other cases specified above\r\n     */\r\n    requestedToJoin?: boolean;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds): the user to requested to join a group from their home group or registered to a group\r\n     * via its PUBLIC URL\r\n     *\r\n     * --> \"none\": the user was invited to a group\r\n     */\r\n    requestedToJoinDate?: number | \"none\";\r\n}\r\n\r\n/**\r\n * Invited user with official profile\r\n */\r\nexport interface InvitedUserWithProfile extends InvitedUser {\r\n    profile?: User;\r\n    homeGroup: GroupProperties;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    offersCreated?: Project[]; // for issuers\r\n    pledges?: Pledge[]; // for investors\r\n    certification?: InvestorSelfCertification | null; // self-certification of investors (undefined: user is an issuer, null: an investor has not certified)\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a user in csv\r\n */\r\nexport interface InvitedUserCsv {\r\n    name: string; // user's official profile --> title + first name + last name\r\n    email: string;\r\n    userType: \"investor\" | \"issuer\";\r\n    memberType: \"home\" | \"platform\";\r\n    homeGroup?: string; // specified only when exporting to csv for super admins\r\n    statusInGroup: \"unregistered\" | \"active\"; // this list will be expanded more in the future\r\n    joinedDate: string | undefined;\r\n    offersCreated: string | \"none\" | \"not applicable\"; // none if the issuer has not created any offers, not applicable if the user is not an issuer\r\n    pledges: number | \"not applicable\"; // number of pledges for investor, not applicable if the user is not an issuer\r\n    certifiedDate: string | \"not certified\" | \"not applicable\";\r\n}\r\n\r\n/**\r\n * Check if an invited user a home member in a group\r\n *\r\n * @param user\r\n */\r\nexport const isHomeMember = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    // if either of these 2 fields is undefined, it means the invited user has been invited\r\n    // by a group and not yet registered\r\n    if (user.requestedToJoin === undefined || user.requestedToJoinDate === undefined) {\r\n        return true;\r\n    }\r\n\r\n    // user was invited\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate === \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // user registered via the public url\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate !== \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // in other cases, the user is not a home member of the group\r\n    return false;\r\n}\r\n\r\n/**\r\n * Check if an invited user has registered or not\r\n *\r\n * @param user\r\n */\r\nexport const hasRegistered = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    return user.officialUserID !== undefined;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {UserTitles} from \"../../models/user\";\r\nimport {AuthenticationState, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {createAccount, handleInputFieldChanged, loadInvitedUser} from \"./SignUpActions\";\r\nimport {\r\n    hasErrorCreatingAccount,\r\n    hasErrorLoadingInvitedUser,\r\n    isCreatingAccount,\r\n    isLoadingInvitedUser,\r\n    notFoundInvitedUser,\r\n    SignUpState\r\n} from \"./SignUpReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {BarLoader} from \"react-spinners\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../../firebase/databaseConsts\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {hasRegistered} from \"../../models/invited_user\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignUpProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    AuthenticationState: AuthenticationState;\r\n    SignUpLocalState: SignUpState;\r\n    loadInvitedUser: (invitedUserID: string) => any;\r\n    handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    createAccount: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        SignUpLocalState: state.SignUpLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadInvitedUser: (invitedUserID: string) => dispatch(loadInvitedUser(invitedUserID)),\r\n        handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(handleInputFieldChanged(event)),\r\n        createAccount: () => dispatch(createAccount())\r\n    }\r\n}\r\n\r\nclass SignUpNew extends Component<SignUpProps & Readonly<RouteComponentProps<RouteParams>>, {}> {\r\n    // invited user id (optional parameter from the url)\r\n    // if invitedUserId = undefined --> public registration\r\n    private invitedUserId: string | undefined;\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadInvitedUser\r\n        } = this.props;\r\n\r\n        this.invitedUserId = this.props.match.params.id;\r\n        if (this.invitedUserId) {\r\n            loadInvitedUser(this.invitedUserId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignUpLocalState,\r\n            handleInputFieldChanged,\r\n            createAccount\r\n        } = this.props;\r\n\r\n        // invited user ID is specified in the url\r\n        if (this.invitedUserId) {\r\n            // loading invited user\r\n            if (isLoadingInvitedUser(SignUpLocalState)) {\r\n                return (\r\n                    <Box>\r\n                        <BarLoader\r\n                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            width=\"100%\"\r\n                            height={4}\r\n                        />\r\n                    </Box>\r\n                );\r\n            }\r\n\r\n            // error loading invited user (network error or not found)\r\n            // OR user has already signed up\r\n            if (hasErrorLoadingInvitedUser(SignUpLocalState)\r\n                || (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser))\r\n            ) {\r\n                return <Box\r\n                    marginTop=\"30px\"\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                    alignItems=\"center\"\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        color=\"error\"\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"This registration URL is not valid.\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"You have already registered. Please sign in.\"\r\n                                // other error\r\n                                : `${SignUpLocalState.errorLoadingInvitedUser?.detail}`\r\n                        }\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Button\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={() => {\r\n                            // invalid invitedUserID\r\n                            if (notFoundInvitedUser(SignUpLocalState)) {\r\n                                this.props.history.replace(\r\n                                    Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")\r\n                                );\r\n                                window.location.reload();\r\n                                return;\r\n                            }\r\n\r\n                            // user has already signed up\r\n                            if (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)) {\r\n                                this.props.history.push(Routes.constructSignInRoute(this.props.match.params));\r\n                                return;\r\n                            }\r\n\r\n                            // other error\r\n                            window.location.reload();\r\n                        }}\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"Go to public registration\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"Sign in\"\r\n                                // other error\r\n                                : \"Retry\"\r\n                        }\r\n                    </Button>\r\n                </Box>;\r\n            }\r\n        }\r\n\r\n        return <Box>\r\n            {/** Sign up card */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={{span: 12, offset: 0}}\r\n                    sm={{span: 12, offset: 0}}\r\n                    md={{span: 8, offset: 2}}\r\n                    lg={{span: 4, offset: 4}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        width=\"100%\"\r\n                        justifyContent=\"center\"\r\n                        paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"}\r\n                        paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"}\r\n                    >\r\n                        <Paper\r\n                            elevation={0}\r\n                            square\r\n                            className={css(sharedStyles.kick_starter_border_box)}\r\n                            style={{\r\n                                width: 650,\r\n                                padding: MediaQueryState.isMobile ? 20 : 30\r\n                            }}\r\n                        >\r\n                            <Typography\r\n                                align=\"center\"\r\n                                variant=\"h5\"\r\n                                color=\"primary\"\r\n                            >\r\n                                {`Welcome to ${ManageGroupUrlState.group?.displayName}`}\r\n                            </Typography>\r\n\r\n                            <Box\r\n                                height=\"20px\"\r\n                            />\r\n\r\n                            {/** Hash loader */}\r\n                            {\r\n                                isCreatingAccount(SignUpLocalState) || isAuthenticating(AuthenticationState)\r\n                                    ? <Box\r\n                                        display=\"flex\"\r\n                                        marginY=\"20px\"\r\n                                        justifyContent=\"center\"\r\n                                    >\r\n                                        <HashLoader\r\n                                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        />\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** Error message */}\r\n                            {\r\n                                !hasErrorCreatingAccount(SignUpLocalState)\r\n                                    ? <Box\r\n                                        marginY=\"20px\"\r\n                                    >\r\n                                        <Typography\r\n                                            align=\"center\"\r\n                                            variant=\"body1\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            {SignUpLocalState.errorCreatingAccount?.detail}\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                                disabled={this.invitedUserId !== undefined}\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        What would you like to do?\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"userType\"\r\n                                    value={SignUpLocalState.userType}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value={-1}\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_INVESTOR}\r\n                                        value={TYPE_INVESTOR}\r\n                                    >\r\n                                        Invest\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_ISSUER}\r\n                                        value={TYPE_ISSUER}\r\n                                    >\r\n                                        Raise funds\r\n                                    </MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"30px\"\r\n                            />\r\n\r\n                            {/** Title */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Title\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"title\"\r\n                                    value={SignUpLocalState.title}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value=\"-1\"\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    {\r\n                                        UserTitles.map((title, index) => (\r\n                                            <MenuItem\r\n                                                key={index}\r\n                                                value={title}\r\n                                            >\r\n                                                {title}\r\n                                            </MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"25px\"\r\n                            />\r\n\r\n                            {/** Names */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** First name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"First name\"\r\n                                        name=\"firstName\"\r\n                                        value={SignUpLocalState.firstName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Last name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Last name\"\r\n                                        name=\"lastName\"\r\n                                        value={SignUpLocalState.lastName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Emails */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** Email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Email\"\r\n                                        name=\"email\"\r\n                                        value={SignUpLocalState.email}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        disabled={this.invitedUserId !== undefined}\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Re-enter email\"\r\n                                        name=\"confirmedEmail\"\r\n                                        value={SignUpLocalState.confirmedEmail}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Passwords */}\r\n                            <Box>\r\n                                {/** Password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Password\"\r\n                                        name=\"password\"\r\n                                        value={SignUpLocalState.password}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Confirm password\"\r\n                                        name=\"confirmedPassword\"\r\n                                        value={SignUpLocalState.confirmedPassword}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Marketing preferences checkbox */}\r\n                            <Box\r\n                                marginTop=\"18px\"\r\n                            >\r\n                                <FormControl>\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        flexDirection=\"row\"\r\n                                        alignItems=\"center\"\r\n                                    >\r\n                                        <Checkbox\r\n                                            name=\"acceptMarketingPreferences\"\r\n                                            color=\"primary\"\r\n                                            checked={SignUpLocalState.acceptMarketingPreferences}\r\n                                            onChange={handleInputFieldChanged}\r\n                                        />\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Accept&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.nonGroupMarketingPreferences}\r\n                                                target=\"_blank\"\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    \"marketing preferences\"\r\n                                                }\r\n                                            />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** T&Cs */}\r\n                            <Box\r\n                                marginTop=\"25px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    By signing up, you agree to our&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupTermsOfUse}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Terms of use\"\r\n                                        }\r\n                                    />\r\n                                    &nbsp;and&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupPrivacyPolicy}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Privacy policy\"\r\n                                        }\r\n                                    />\r\n                                    .\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Create Account button */}\r\n                            <Box\r\n                                marginTop=\"40px\"\r\n                                display=\"flex\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                <Button\r\n                                    className={css(sharedStyles.no_text_transform)}\r\n                                    color=\"primary\"\r\n                                    variant=\"contained\"\r\n                                    disabled={\r\n                                        SignUpLocalState.userType === -1\r\n                                        || SignUpLocalState.title === \"-1\"\r\n                                        || SignUpLocalState.firstName.trim().length === 0\r\n                                        || SignUpLocalState.lastName.trim().length === 0\r\n                                        || SignUpLocalState.email.trim().length === 0\r\n                                        || SignUpLocalState.confirmedEmail.trim().length === 0\r\n                                        || SignUpLocalState.password.trim().length === 0\r\n                                        || SignUpLocalState.confirmedPassword.trim().length === 0\r\n                                    }\r\n                                    onClick={() => createAccount()}\r\n                                >\r\n                                    Create account\r\n                                </Button>\r\n                            </Box>\r\n\r\n                            {/** Sign in if have an account */}\r\n                            <Box\r\n                                marginTop=\"20px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    Already have an Invest West account?&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.constructSignInRoute(this.props.match.params)}\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"nav-link\"\r\n                                        childComponent={\r\n                                            \"Sign in\"\r\n                                        }\r\n                                    />\r\n                                </Typography>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpNew);","import React from \"react\";\r\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\r\nimport IssuerDashboard from \"../pages/dashboard-issuer/IssuerDashboard\";\r\nimport InvestorDashboard from \"../pages/dashboard-investor/InvestorDashboard\";\r\nimport AdminDashboard from \"../pages/admin/AdminDashboard\";\r\nimport CreatePitchPage from \"../pages/create-project/CreateProject\";\r\nimport UserProfile from \"../pages/profile/ProfilePageViewOnly\";\r\nimport ProjectDetails from \"../pages/project-details/ProjectDetails\";\r\nimport PrivacyPolicyPage from \"../pages/system-public-pages/PrivacyPolicyPage\";\r\nimport TermsOfUsePage from \"../pages/system-public-pages/TermsOfUsePage\";\r\nimport RiskWarningPage from \"../pages/system-public-pages/RiskWarningPage\";\r\nimport CreatePitchTermsAndConditionsPage from \"../pages/system-public-pages/CreatePitchTermsAndConditionsPage\";\r\nimport ContactUs from \"../pages/system-public-pages/ContactUs\";\r\nimport ContactUs2 from \"../pages/system-public-pages/ContactUs2\";\r\nimport HelpPage from \"../pages/system-public-pages/HelpPage\";\r\nimport GroupDetails from \"../pages/group-details/GroupDetails\";\r\nimport MarketingPreferencesPage from \"../pages/system-public-pages/MarketingPreferencesPage\";\r\nimport ProfilePageEditable from \"../pages/profile/ProfilePageEditable\";\r\n\r\nimport Front from \"../pages/front/Front\";\r\nimport SignIn from \"../pages/signin/SignInNew\";\r\nimport PageNotFound from \"../shared-components/page-not-found/PageNotFoundNew\";\r\n\r\nimport Routes from \"./routes\";\r\nimport GroupRoute from \"./GroupRoute\";\r\nimport ResetPassword from \"../pages/reset-password/ResetPassword\";\r\nimport ResourceDetail from \"../pages/resources/pages/ResourceDetail\";\r\nimport SignUpNew from \"../pages/signup/SignUpNew\";\r\nimport {colors} from \"@material-ui/core\";\r\n\r\n/**\r\n * Parameters in the url\r\n */\r\nexport interface RouteParams {\r\n    groupUserName: string;\r\n\r\n    [params: string]: string;\r\n}\r\n\r\nconst AppRouter = () => (\r\n    <BrowserRouter>\r\n        <Switch>\r\n            <Route path={Routes.groupSignUp} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignUpNew {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupSignUp} exact\r\n                            // @ts-ignore\r\n                            render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                                // @ts-ignore\r\n                                                            component={<SignUpNew {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupFront} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\r\n            <Route path={Routes.groupFront} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n            <Route path={Routes.groupSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n            <Route path={Routes.superAdminSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupAdminDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<AdminDashboard {...props}/>}/>}/>\r\n            <Route path={Routes.groupAdminDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<AdminDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupIssuerDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<IssuerDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupInvestorDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<InvestorDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProjectDetails {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProjectDetails {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupCreateOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchPage {...props}/>}/>}/>\r\n            <Route path={Routes.groupCreateOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewGroup} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<GroupDetails {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewGroup} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<GroupDetails {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<UserProfile {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<UserProfile {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewResourceDetail} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ResourceDetail {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewResourceDetail} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ResourceDetail {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupEditUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\r\n            <Route path={Routes.groupEditUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupHelp} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<HelpPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupContactUs} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs {...props}/>}/>}/>\r\n            <Route path={Routes.groupContactUs} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupContactUs2} exact\r\n                            // @ts-ignore\r\n                            render={props => <GroupRoute {...props} showHeader={true}\r\n                                                            component={<ContactUs2 {...props}/>}/>}/>\r\n            <Route path={Routes.groupContactUs2} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs2 {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupPrivacyPolicy} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<PrivacyPolicyPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupTermsOfUse} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<TermsOfUsePage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupRiskWarning} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<RiskWarningPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupCreatePitchTermsAndConditions} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchTermsAndConditionsPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupMarketingPreferences} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<MarketingPreferencesPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupAuthAction} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                       // @ts-ignore\r\n                                                component={<ResetPassword {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.error404} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<PageNotFound {...props}/>}/>}/>\r\n\r\n            {/** Handle undefined paths */}\r\n            <Route\r\n                // @ts-ignore\r\n                render={props => <GroupRoute {...props} showHeader={true}\r\n                                             component={<PageNotFound {...props}/>}/>}/>\r\n\r\n        </Switch>\r\n    </BrowserRouter>\r\n);\r\n\r\nexport default AppRouter;\r\n","import React, {Component} from 'react';\r\nimport {\r\n    IconButton,\r\n    Snackbar,\r\n    SnackbarContent\r\n} from '@material-ui/core';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport {SlideTransitionDown, SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        group: state.manageGroupFromParams.groupProperties,\r\n\r\n        open: state.manageFeedbackSnackbar.open,\r\n        message: state.manageFeedbackSnackbar.message,\r\n        color: state.manageFeedbackSnackbar.color,\r\n        position: state.manageFeedbackSnackbar.position\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar()),\r\n        resetStatesWhenSnackbarClosed: () => dispatch(feedbackSnackbarActions.resetStatesWhenSnackbarClosed())\r\n    }\r\n};\r\n\r\nclass FeedbackSnackbar extends Component {\r\n\r\n    render() {\r\n        const {\r\n            group,\r\n\r\n            open,\r\n            message,\r\n            color,\r\n            position,\r\n\r\n            closeFeedbackSnackbar,\r\n            resetStatesWhenSnackbarClosed\r\n        } = this.props;\r\n\r\n        return (\r\n            <Snackbar\r\n                open={open}\r\n                anchorOrigin={{\r\n                    vertical: position === \"\" ? \"bottom\" : position, // default vertical anchor is bottom\r\n                    horizontal: 'center',\r\n                }}\r\n                autoHideDuration={2500}\r\n                onClose={closeFeedbackSnackbar}\r\n                onExited={resetStatesWhenSnackbarClosed}\r\n                TransitionComponent={\r\n                    position === \"bottom\"\r\n                        ?\r\n                        SlideTransitionUp\r\n                        :\r\n                        position === \"top\"\r\n                            ?\r\n                            SlideTransitionDown\r\n                            :\r\n                            null\r\n                }\r\n                transitionDuration={{\r\n                    enter: 130,\r\n                    exit: 130\r\n                }}\r\n            >\r\n                <SnackbarContent\r\n                    style={{\r\n                        backgroundColor:\r\n                            color === \"primary\"\r\n                                ?\r\n                                !group\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    group.settings.primaryColor\r\n                                :\r\n                                color === \"error\"\r\n                                    ?\r\n                                    colors.errorColor\r\n                                    :\r\n                                    \"\"\r\n                    }}\r\n                    message={\r\n                        <span>\r\n                            {\r\n                                color === \"error\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <CheckCircleIcon\r\n                                        style={{\r\n                                            marginRight: 8\r\n                                        }}\r\n                                    />\r\n                            }\r\n                            {message}\r\n                        </span>\r\n                    }\r\n                    action={[\r\n                        <IconButton\r\n                            key=\"close\"\r\n                            color=\"inherit\"\r\n                            onClick={closeFeedbackSnackbar}\r\n                        >\r\n                            <CloseIcon/>\r\n                        </IconButton>\r\n                    ]}\r\n                />\r\n            </Snackbar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbar);","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_CLUB_ATTRIBUTES = 'LOADING_CLUB_ATTRIBUTES';\r\nexport const CLUB_ATTRIBUTES_LOADED = 'CLUB_ATTRIBUTES_LOADED';\r\nexport const loadClubAttributes = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const {\r\n            clubAttributesLoaded,\r\n            clubAttributesBeingLoaded\r\n        } = getState().manageClubAttributes;\r\n\r\n        if (!clubAttributesLoaded && clubAttributesBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_CLUB_ATTRIBUTES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                dispatch({\r\n                    type: CLUB_ATTRIBUTES_LOADED,\r\n                    clubAttributes\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const CLUB_ATTRIBUTES_CHANGED = 'CLUB_ATTRIBUTES_CHANGED';\r\nexport const startListeningForClubAttributesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        let clubAttributesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\r\n\r\n        clubAttributesRef\r\n            .on('child_changed', snapshot => {\r\n                dispatch({\r\n                    type: CLUB_ATTRIBUTES_CHANGED,\r\n                    key: snapshot.key,\r\n                    value: snapshot.val()\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForClubAttributesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        let clubAttributesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\r\n\r\n        clubAttributesRef.off('child_changed');\r\n    }\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\nimport {signOut} from \"./authenticationActions\";\r\nimport {logout} from \"./authActions\";\r\n\r\nexport enum ManageSystemIdleTimeEvents {\r\n    OnActive = \"ManageSystemIdleTimeEvents.OnActive\",\r\n    OnIdle = \"ManageSystemIdleTimeEvents.OnIdle\"\r\n}\r\n\r\nexport interface ManageSystemIdleTimeAction extends Action {\r\n\r\n}\r\n\r\n// Called when the user is no longer idle\r\nexport const onActive: ActionCreator<any> = (event: Event) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ManageSystemIdleTimeEvents.OnActive\r\n        });\r\n    }\r\n}\r\n\r\n// Called when the user is now idle\r\nexport const onIdle: ActionCreator<any> = (event: Event) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ManageSystemIdleTimeEvents.OnIdle\r\n        });\r\n        // TODO: Remove this line when all the components have been migrated to the new authentication flow\r\n        // @ts-ignore\r\n        dispatch(logout());\r\n        return await dispatch(signOut());\r\n    }\r\n}","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_SYSTEM_GROUPS = 'LOADING_SYSTEM_GROUPS';\r\nexport const FINISHED_LOADING_SYSTEM_GROUPS = 'FINISHED_LOADING_SYSTEM_GROUPS';\r\nexport const loadGroups = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            loadingGroups,\r\n            groupsLoaded\r\n        } = getState().manageSystemGroups;\r\n\r\n        if (!loadingGroups && !groupsLoaded) {\r\n            dispatch({\r\n                type: LOADING_SYSTEM_GROUPS\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\r\n                .then(groups => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_SYSTEM_GROUPS,\r\n                        groups: [...groups]\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nlet groupsListener = null;\r\n\r\nexport const SYSTEM_GROUPS_CHANGED = 'SYSTEM_GROUPS_CHANGED';\r\nexport const startListeningForSystemGroupsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!groupsListener) {\r\n            groupsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n\r\n            groupsListener\r\n                .on('child_added', snapshot => {\r\n                    const group = snapshot.val();\r\n\r\n                    let groups = [...getState().manageSystemGroups.systemGroups];\r\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\r\n                    if (groupIndex === -1) {\r\n                        dispatch({\r\n                            type: SYSTEM_GROUPS_CHANGED,\r\n                            groups: [...groups, group]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            groupsListener\r\n                .on('child_changed', snapshot => {\r\n                    const group = snapshot.val();\r\n\r\n                    let groups = [...getState().manageSystemGroups.systemGroups];\r\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\r\n                    if (groupIndex !== -1) {\r\n\r\n                        groups[groupIndex] = group;\r\n\r\n                        dispatch({\r\n                            type: SYSTEM_GROUPS_CHANGED,\r\n                            groups: [...groups]\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForSystemGroupsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupsListener) {\r\n            groupsListener.off('child_added');\r\n            groupsListener.off('child_changed');\r\n            groupsListener = null;\r\n        }\r\n    }\r\n}","import {ManageSystemIdleTimeAction, ManageSystemIdleTimeEvents} from \"../actions/manageSystemIdleTimeActions\";\r\nimport {AuthenticationAction, AuthenticationEvents} from \"../actions/authenticationActions\";\r\n\r\n// active timeout: 1 hour\r\nexport const activeTimeOut = 1000 * 60 * 60;\r\n\r\nexport interface ManageSystemIdleTimeState {\r\n    nowIdle: boolean;\r\n    nowActive: boolean;\r\n}\r\n\r\nconst initialState: ManageSystemIdleTimeState = {\r\n    nowIdle: false,\r\n    nowActive: true\r\n}\r\n\r\nexport const isUserNowIdle = (state: ManageSystemIdleTimeState) => {\r\n    return state.nowIdle && !state.nowActive;\r\n}\r\n\r\nexport const isUserNowActive = (state: ManageSystemIdleTimeState) => {\r\n    return state.nowActive && !state.nowIdle;\r\n}\r\n\r\nconst manageSystemIdleTimeReducer = (state = initialState, action: ManageSystemIdleTimeAction | AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case ManageSystemIdleTimeEvents.OnActive:\r\n            return {\r\n                ...state,\r\n                nowActive: true,\r\n                nowIdle: false\r\n            }\r\n        case ManageSystemIdleTimeEvents.OnIdle:\r\n            return {\r\n                ...state,\r\n                nowActive: false,\r\n                nowIdle: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemIdleTimeReducer;","import React, {Component} from 'react';\r\nimport {createMuiTheme, MuiThemeProvider, responsiveFontSizes} from '@material-ui/core/styles';\r\nimport {MuiPickersUtilsProvider} from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport AppRouter from \"./router/router.tsx\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from './redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {AUTH_SUCCESS} from './pages/signin/Signin';\r\n\r\nimport FeedbackSnackbar from './shared-components/feedback-snackbar/FeedbackSnackbar';\r\n\r\nimport firebase from './firebase/firebaseApp';\r\nimport * as colors from './values/colors';\r\nimport * as authActions from './redux-store/actions/authActions';\r\nimport * as clubAttributesActions from './redux-store/actions/clubAttributesActions';\r\nimport * as mediaQueryActions from './redux-store/actions/mediaQueryActions';\r\nimport * as invitedUsersActions from './redux-store/actions/invitedUsersActions';\r\nimport * as manageJoinRequestsActions from './redux-store/actions/manageJoinRequestsActions';\r\nimport * as activitiesTableActions from './redux-store/actions/activitiesTableActions';\r\nimport * as groupAdminsTableActions from './redux-store/actions/groupAdminsTableActions';\r\nimport * as forumsActions from './redux-store/actions/forumsActions';\r\nimport * as editUserActions from './redux-store/actions/editUserActions';\r\nimport * as manageSystemGroupsActions from './redux-store/actions/manageSystemGroupsActions';\r\nimport {signIn} from \"./redux-store/actions/authenticationActions\";\r\nimport {getGroupRouteTheme} from \"./redux-store/reducers/manageGroupUrlReducer\";\r\nimport IdleTimer from \"react-idle-timer\";\r\nimport {activeTimeOut} from \"./redux-store/reducers/manageSystemIdleTimeReducer\";\r\nimport {onIdle} from \"./redux-store/actions/manageSystemIdleTimeActions\";\r\n\r\n// map redux states to props of this component\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        /**\r\n         * Old state --------------------------------------------------------------------------------------------------\r\n         */\r\n        // angel network loaded from anid from URL params\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // user --------------------------------------------------------------------------------------------------------\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authStatus: state.auth.authStatus,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        forums: state.manageForums.forums,\r\n\r\n        // club attributes ---------------------------------------------------------------------------------------------\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // system groups -----------------------------------------------------------------------------------------------\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n        loadingGroups: state.manageSystemGroups.loadingGroups\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\n// map redux dispatch (actions) to props of this component\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        signIn: () => dispatch(signIn()),\r\n        onIdle: (event) => dispatch(onIdle(event)),\r\n\r\n        /**\r\n         * Old dispatch ------------------------------------------------------------------------------------------------\r\n         */\r\n        startListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.startListeningForAngelNetworkChanged()),\r\n        stopListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.stopListeningForAngelNetworkChanged()),\r\n\r\n        // auth functions  ---------------------------------------------------------------------------------------------\r\n        initializeAuthState: () => dispatch(authActions.initializeAuthState()),\r\n        getUserProfileAndValidateUser: (uid) => dispatch(authActions.getUserProfileAndValidateUser(uid)),\r\n        startListeningForUserProfileChanges: () => dispatch(authActions.startListeningForUserProfileChanges()),\r\n        stopListeningForUserProfileChanges: () => dispatch(authActions.stopListeningForUserProfileChanges()),\r\n        startListeningForGroupsUserIsIn: () => dispatch(authActions.startListeningForGroupsUserIsIn()),\r\n        stopListeningForGroupsUserIsIn: () => dispatch(authActions.stopListeningForGroupsUserIsIn()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // club attributes functions  ----------------------------------------------------------------------------------\r\n        loadClubAttributes: () => dispatch(clubAttributesActions.loadClubAttributes()),\r\n        startListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.startListeningForClubAttributesChanged()),\r\n        stopListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.stopListeningForClubAttributesChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // media query functions  --------------------------------------------------------------------------------------\r\n        addMediaQueryListeners: () => dispatch(mediaQueryActions.addMediaQueryListeners()),\r\n        removeMediaQueryListeners: () => dispatch(mediaQueryActions.removeMediaQueryListeners()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        adminDashboard_stopListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.stopListeningForInvitedUsersChanged()),\r\n\r\n        joinRequestsTable_stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged()),\r\n\r\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        groupAdminsTable_stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\r\n\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\r\n\r\n        loadSystemGroups: () => dispatch(manageSystemGroupsActions.loadGroups()),\r\n        startListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.startListeningForSystemGroupsChanged()),\r\n        stopListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.stopListeningForSystemGroupsChanged())\r\n    }\r\n};\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseAuth = firebase.auth();\r\n        this.authListener = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            addMediaQueryListeners\r\n        } = this.props;\r\n\r\n        // add media query listeners\r\n        addMediaQueryListeners();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadClubAttributesIfNotLoaded();\r\n            this.attachListeners();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadClubAttributesIfNotLoaded();\r\n            this.attachListeners();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            removeMediaQueryListeners,\r\n            stopListeningForAngelNetworkChanged,\r\n            stopListeningForClubAttributesChanged\r\n        } = this.props;\r\n\r\n        /**\r\n         * These listeners are global for whole system.\r\n         * Therefore, they should only be cancelled when the page is destroyed.\r\n         */\r\n        // cancel listening for auth state changed\r\n        this.authListener();\r\n        this.authListener = null;\r\n        // remove media query listeners\r\n        removeMediaQueryListeners();\r\n        // stop listening for angel network's changes\r\n        stopListeningForAngelNetworkChanged();\r\n        // stop listening for club attributes' changes\r\n        stopListeningForClubAttributesChanged();\r\n        /**\r\n         * ////---------------------------------------------------------------------------------------------------------\r\n         */\r\n\r\n        // cancel all other listeners when the page is destroyed\r\n        this.cancelAllListeners();\r\n    }\r\n\r\n    /**\r\n     * Cancel all listeners used in the components within the system\r\n     */\r\n    cancelAllListeners = () => {\r\n        const {\r\n            stopListeningForUserProfileChanges,\r\n\r\n            stopListeningForGroupsUserIsIn,\r\n\r\n            joinRequestsTable_stopListeningForJoinRequestsChanged,\r\n\r\n            adminDashboard_stopListeningForInvitedUsersChanged,\r\n\r\n            activitiesTable_stopListeningForActivitiesChanged,\r\n\r\n            groupAdminsTable_stopListeningForGroupAdminsChanged,\r\n\r\n            stopListeningForForumsChanged,\r\n            stopListeningForThreadsChanged,\r\n            stopListeningForThreadRepliesChanged,\r\n\r\n            editUserProfile_stopOriginalUserChangedListener,\r\n\r\n            stopListeningForSystemGroupsChanged\r\n        } = this.props;\r\n        // stop listening for user's profile changes\r\n        stopListeningForUserProfileChanges();\r\n        // stop listening for groups user is in changes\r\n        stopListeningForGroupsUserIsIn();\r\n\r\n        // stop listening for join requests changes in the JoinRequests table component\r\n        joinRequestsTable_stopListeningForJoinRequestsChanged();\r\n\r\n        // stop listening for invited users changes in the InvitedUsers component\r\n        adminDashboard_stopListeningForInvitedUsersChanged();\r\n\r\n        // stop listening for activities changes in the ActivitiesTable component\r\n        activitiesTable_stopListeningForActivitiesChanged();\r\n\r\n        // stop listening for group admins changes in the GroupAdminsTable component\r\n        groupAdminsTable_stopListeningForGroupAdminsChanged();\r\n\r\n        // stop listening for forums changes\r\n        stopListeningForForumsChanged();\r\n        // stop listening for threads changes\r\n        stopListeningForThreadsChanged();\r\n        // stop listening for thread replies changes\r\n        stopListeningForThreadRepliesChanged();\r\n\r\n        // stop listening for edited user's changes\r\n        // this should get called if the current user and the user being edited are different\r\n        editUserProfile_stopOriginalUserChangedListener();\r\n\r\n        // stop listening for system groups changes\r\n        stopListeningForSystemGroupsChanged();\r\n    };\r\n\r\n    /**\r\n     * Load club attributes\r\n     */\r\n    loadClubAttributesIfNotLoaded = () => {\r\n        const {\r\n            clubAttributesLoaded,\r\n            clubAttributesBeingLoaded,\r\n\r\n            loadClubAttributes\r\n        } = this.props;\r\n\r\n        if (!clubAttributesLoaded && !clubAttributesBeingLoaded) {\r\n            // load club attributes\r\n            loadClubAttributes();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load all the groups in the system\r\n     * --> This should be done as soon as the user is logged in\r\n     */\r\n    loadSystemGroups = () => {\r\n        const {\r\n            groupsLoaded,\r\n            loadingGroups,\r\n\r\n            loadSystemGroups\r\n        } = this.props;\r\n\r\n        if (!groupsLoaded && !loadingGroups) {\r\n            // load system groups\r\n            loadSystemGroups();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attach listeners\r\n     */\r\n    attachListeners = () => {\r\n        const {\r\n            authStatus,\r\n\r\n            user,\r\n            userLoaded,\r\n            clubAttributesLoaded,\r\n            groupsLoaded,\r\n\r\n            initializeAuthState,\r\n            getUserProfileAndValidateUser,\r\n            startListeningForClubAttributesChanged,\r\n            startListeningForUserProfileChanges,\r\n            startListeningForAngelNetworkChanged,\r\n            startListeningForGroupsUserIsIn,\r\n            startListeningForSystemGroupsChanged\r\n        } = this.props;\r\n\r\n        startListeningForAngelNetworkChanged();\r\n\r\n        if (user && userLoaded && authStatus === AUTH_SUCCESS) {\r\n            // start listening for user's profile changes\r\n            startListeningForUserProfileChanges();\r\n            // start listening for groups user is in changes\r\n            startListeningForGroupsUserIsIn();\r\n\r\n            if (groupsLoaded) {\r\n                // start listening for system groups changed\r\n                startListeningForSystemGroupsChanged();\r\n            }\r\n        }\r\n\r\n        if (clubAttributesLoaded) {\r\n            // start listening for club attributes' changes\r\n            startListeningForClubAttributesChanged();\r\n        }\r\n\r\n        if (!this.authListener) {\r\n            // listen for auth state changed\r\n            this.authListener = this.firebaseAuth\r\n                .onAuthStateChanged(firebaseUser => {\r\n                    // call this function to always set userLoaded to false when user is signed out\r\n                    initializeAuthState();\r\n                    // if user is authenticated\r\n                    if (firebaseUser) {\r\n                        getUserProfileAndValidateUser(firebaseUser.uid);\r\n\r\n                        // load system groups\r\n                        this.loadSystemGroups();\r\n                    }\r\n                    // user is not authenticated\r\n                    else {\r\n                        getUserProfileAndValidateUser(null);\r\n                        // the listeners used in components within the system must be cancelled\r\n                        // when the logged in user logs out\r\n                        this.cancelAllListeners();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    getTheme = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (ManageGroupUrlState.group) {\r\n            return getGroupRouteTheme(ManageGroupUrlState);\r\n        }\r\n\r\n        if (!groupPropertiesLoaded || !shouldLoadOtherData || !groupProperties) {\r\n            return defaultTheme;\r\n        }\r\n\r\n        return responsiveFontSizes(\r\n            createMuiTheme({\r\n                palette: {\r\n                    primary: {\r\n                        main: groupProperties.settings.primaryColor\r\n                    },\r\n\r\n                    secondary: {\r\n                        main: groupProperties.settings.secondaryColor\r\n                    },\r\n\r\n                    text: {\r\n                        secondary: colors.blue_gray_700,\r\n                    }\r\n                },\r\n                typography: {\r\n                    fontFamily: \"Muli, sans-serif\"\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <IdleTimer\r\n                    timeout={activeTimeOut}\r\n                    onIdle={this.props.onIdle}\r\n                />\r\n\r\n                <MuiThemeProvider\r\n                    theme={this.getTheme()}\r\n                >\r\n                    <MuiPickersUtilsProvider\r\n                        utils={DateFnsUtils}\r\n                    >\r\n                        <AppRouter/>\r\n\r\n                        {/** Feedback snackbar */}\r\n                        <FeedbackSnackbar/>\r\n                    </MuiPickersUtilsProvider>\r\n                </MuiThemeProvider>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// export the App component using redux connect to hook up states and actions\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nexport const defaultTheme = responsiveFontSizes(createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: colors.primaryColor\r\n        },\r\n\r\n        secondary: {\r\n            main: colors.secondaryColor\r\n        },\r\n\r\n        text: {\r\n            secondary: colors.blue_gray_700,\r\n        }\r\n    },\r\n    typography: {\r\n        fontFamily: \"Muli, sans-serif\"\r\n    }\r\n}));","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport User from \"../../models/user\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport React from \"react\";\r\n\r\nexport enum ProfileEvents {\r\n    SetCopiedUser = \"PersonalDetailsEvents.SetCopiedUser\"\r\n}\r\n\r\nexport interface ProfileAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetCopiedUserAction extends ProfileAction {\r\n    copiedUser?: User;\r\n    firstTimeSetCopiedUser?: true; // true or undefined\r\n}\r\n\r\nexport const setCopiedUser: ActionCreator<any> = (user: User | null, firstTimeSetCopiedUser?: true) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetCopiedUserAction = {\r\n            type: ProfileEvents.SetCopiedUser,\r\n            copiedUser: user ? JSON.parse(JSON.stringify(user)) : undefined,\r\n            firstTimeSetCopiedUser\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n// These are the input field categories corresponding to different groups of input fields in the Profile page\r\nexport enum InputCategories {\r\n    // includes text fields in the Personal details section\r\n    PersonalDetails = \"InputCategories.PersonalDetails\",\r\n    // includes text fields in the Business profile section\r\n    BusinessProfile = \"InputCategories.BusinessProfile\",\r\n    // includes text fields in the Registered office section (subsection of Business profile)\r\n    RegisteredOffice = \"InputCategories.RegisteredOffice\",\r\n    // includes text fields in the Trading address section (subsection of Business profile)\r\n    TradingAddress = \"InputCategories.TradingAddress\",\r\n    // includes text fields in the Director section (subsection of Business profile)\r\n    Director = \"InputCategories.Director\",\r\n    // includes all checkboxes in Business profile section\r\n    BusinessProfileCheckBox = \"InputCategories.BusinessProfileCheckBox\"\r\n}\r\n\r\nexport const handleInputFieldChanged: ActionCreator<any> = (inputCategory: InputCategories, event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        let currentCopiedUser: User | undefined = JSON.parse(JSON.stringify(getState().ProfileLocalState.copiedUser));\r\n        if (!currentCopiedUser) {\r\n            return;\r\n        }\r\n\r\n        // let newBusinessProfile: BusinessProfile = getState().ProfileLocalState.BusinessProfileState.newBusinessProfile;\r\n        //\r\n        // const inputFieldName: string = event.target.name;\r\n        // const inputFieldValue: string = event.target.value;\r\n        // const inputFieldChecked: boolean = event.target.checked;\r\n        //\r\n        // switch (inputCategory) {\r\n        //     case InputCategories.PersonalDetails:\r\n        //         currentCopiedUser = {\r\n        //             ...currentCopiedUser,\r\n        //             [inputFieldName]: inputFieldValue\r\n        //         }\r\n        //         return dispatch(setCopiedUser(currentCopiedUser));\r\n        //     case InputCategories.BusinessProfile:\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     [inputFieldName]: inputFieldValue\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 [inputFieldName]: inputFieldValue\r\n        //             }\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     case InputCategories.RegisteredOffice: {\r\n        //         if (inputFieldValue === \"none\") {\r\n        //             return;\r\n        //         }\r\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\r\n        //         if (!foundAddresses) {\r\n        //             return;\r\n        //         }\r\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\r\n        //         if (index === -1) {\r\n        //             return;\r\n        //         }\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     registeredOffice: foundAddresses[index]\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 registeredOffice: foundAddresses[index]\r\n        //             };\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     }\r\n        //     case InputCategories.TradingAddress: {\r\n        //         if (inputFieldValue === \"none\") {\r\n        //             return;\r\n        //         }\r\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\r\n        //         if (!foundAddresses) {\r\n        //             return;\r\n        //         }\r\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\r\n        //         if (index === -1) {\r\n        //             return;\r\n        //         }\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     tradingAddress: foundAddresses[index]\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 tradingAddress: foundAddresses[index]\r\n        //             };\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     }\r\n        //     case InputCategories.BusinessProfileCheckBox:\r\n        //         const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = {\r\n        //             type: BusinessProfileEvents.CheckBoxChanged,\r\n        //             name: inputFieldName,\r\n        //             value: inputFieldChecked\r\n        //         };\r\n        //         return dispatch(businessProfileCheckBoxChangedAction);\r\n        //     default:\r\n        //         return;\r\n        // }\r\n    }\r\n}","import * as authActions from '../actions/authActions';\r\nimport {\r\n    INVALID_AUTH_NONE,\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\n// auth initial state\r\nconst initState = {\r\n    signingIn: false,\r\n    authenticating: false,\r\n    authStatus: INVALID_AUTH_NONE,\r\n\r\n    preventValidatingUserWhenSigningUp: false,\r\n\r\n    user: null,\r\n    userLoaded: false,\r\n    userBeingLoaded: false,\r\n\r\n    groupsUserIsIn: null,\r\n    loadingGroupsUserIsIn: false,\r\n    groupsUserIsInLoaded: false\r\n};\r\n\r\nconst authReducer = (state = initState, action) => {\r\n\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return {\r\n                ...initState,\r\n                authenticating: state.authenticating,\r\n                authStatus: state.authStatus\r\n            };\r\n        case authActions.INITIALIZE_AUTH_STATE:\r\n            return {\r\n                ...initState,\r\n                authenticating: state.authenticating,\r\n                authStatus: state.authStatus\r\n            };\r\n        case authActions.TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP:\r\n            return {\r\n                ...state,\r\n                preventValidatingUserWhenSigningUp: action.shouldPrevent\r\n            };\r\n        case authActions.RESET_AUTH_STATUS:\r\n            return {\r\n                ...state,\r\n                authStatus: INVALID_AUTH_NONE\r\n            };\r\n        case authActions.SIGNING_IN:\r\n            return {\r\n                ...state,\r\n                singingIn: true\r\n            };\r\n        case authActions.AUTHENTICATING:\r\n            return {\r\n                ...state,\r\n                singingIn: false,\r\n                authenticating: true,\r\n                authStatus: INVALID_AUTH_NONE,\r\n                preventValidatingUserWhenSigningUp: false,\r\n\r\n                user: null,\r\n                userLoaded: false,\r\n                userBeingLoaded: true,\r\n\r\n                groupsUserIsIn: null,\r\n                loadingGroupsUserIsIn: false,\r\n                groupsUserIsInLoaded: false\r\n            };\r\n        case authActions.AUTH_LOADING_GROUPS_USER_IS_IN:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [],\r\n                loadingGroupsUserIsIn: true,\r\n                groupsUserIsInLoaded: false\r\n            };\r\n        case authActions.AUTH_GROUPS_USER_IS_IN_LOADED:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [...action.groups],\r\n                loadingGroupsUserIsIn: false,\r\n                groupsUserIsInLoaded: true\r\n            };\r\n        case authActions.FINISHED_AUTHENTICATING:\r\n            return {\r\n                ...state,\r\n                signingIn: false,\r\n                authenticating: false,\r\n                authStatus: action.authStatus,\r\n                preventValidatingUserWhenSigningUp: false,\r\n\r\n                user: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.user,\r\n                userLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? true : state.userLoaded,\r\n                userBeingLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.userBeingLoaded,\r\n\r\n                groupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.groupsUserIsIn,\r\n                loadingGroupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.loadingGroupsUserIsIn,\r\n                groupsUserIsInLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.groupsUserIsInLoaded\r\n            };\r\n        // set state when finished loading user's profile\r\n        case authActions.USER_PROFILE_LOADED:\r\n            return {\r\n                ...state,\r\n                user: JSON.parse(JSON.stringify(action.user)),\r\n                userLoaded: true,\r\n                userBeingLoaded: false\r\n            };\r\n        // when user's profile has changed\r\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\r\n            return {\r\n                ...state,\r\n                user: JSON.parse(JSON.stringify(action.userChanged))\r\n            };\r\n        case authActions.GROUPS_USER_IS_IN_HAVE_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [...action.groups]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n\r\n\r\n","import * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../actions/editUserActions';\r\nimport * as editImageActions from '../actions/editImageActions';\r\nimport * as editVideoActions from '../actions/editVideoActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    BusinessProfile: {\r\n        companyName: '',\r\n        registrationNo: '',\r\n        sector: 'None',\r\n        companyWebsite: '',\r\n\r\n        registeredOffice: {\r\n            address1: '',\r\n            address2: '',\r\n            address3: '',\r\n            townCity: '',\r\n            postcode: ''\r\n        },\r\n\r\n        tradingAddress: {\r\n            address1: '',\r\n            address2: '',\r\n            address3: '',\r\n            townCity: '',\r\n            postcode: ''\r\n        },\r\n\r\n        directors: []\r\n    },\r\n\r\n    logoToBeUploaded: null,\r\n    videoToBeUploaded: null,\r\n\r\n    registeredOfficeSearchPostcode: '', // field for user to fill in with postcode\r\n    registeredOfficeEnterAddressManually: false,\r\n    registeredOfficeRecommendedAddresses: null, // searched addresses from entered postcode\r\n\r\n    tradingAddressSameAsRegisteredOffice: true,\r\n    tradingAddressSearchPostcode: '', // field for user to fill in with postcode\r\n    tradingAddressEnterAddressManually: false,\r\n    tradingAddressRecommendedAddresses: null, // searched addresses from entered postcode\r\n\r\n    expandBusinessProfileFilling: false // this field is only available for investor\r\n};\r\n\r\nconst createBusinessProfileReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    [action.fieldName]: action.fieldValue\r\n                }\r\n            };\r\n        case createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice: {\r\n                        ...state.BusinessProfile.registeredOffice,\r\n                        [action.fieldName]: action.fieldValue\r\n                    }\r\n                }\r\n            };\r\n        case createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        ...state.BusinessProfile.tradingAddress,\r\n                        [action.fieldName]: action.fieldValue\r\n                    }\r\n                }\r\n            };\r\n        case createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.fieldValue,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice:\r\n                        action.fieldName !== \"registeredOfficeSearchPostcode\"\r\n                            ?\r\n                            state.BusinessProfile.registeredOffice\r\n                            :\r\n                            {\r\n                                address1: '',\r\n                                address2: '',\r\n                                address3: '',\r\n                                townCity: '',\r\n                                postcode: ''\r\n                            },\r\n                    tradingAddress:\r\n                        action.fieldName !== \"tradingAddressSearchPostcode\"\r\n                            ?\r\n                            state.BusinessProfile.tradingAddress\r\n                            :\r\n                            {\r\n                                address1: '',\r\n                                address2: '',\r\n                                address3: '',\r\n                                townCity: '',\r\n                                postcode: ''\r\n                            }\r\n                },\r\n                registeredOfficeEnterAddressManually:\r\n                    action.fieldName !== \"registeredOfficeSearchPostcode\" ? state.registeredOfficeEnterAddressManually : false,\r\n                registeredOfficeRecommendedAddresses:\r\n                    action.fieldName !== \"registeredOfficeSearchPostcode\" ? state.registeredOfficeRecommendedAddresses : null,\r\n                tradingAddressEnterAddressManually:\r\n                    action.fieldName !== \"tradingAddressSearchPostcode\" ? state.tradingAddressEnterAddressManually : false,\r\n                tradingAddressRecommendedAddresses:\r\n                    action.fieldName !== \"tradingAddressSearchPostcode\" ? state.tradingAddressRecommendedAddresses : null,\r\n            };\r\n        case createBusinessProfileActions.SEARCHING_REGISTERED_OFFICE_ADDRESSES:\r\n            return state;\r\n        case createBusinessProfileActions.DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES:\r\n            return {\r\n                ...state,\r\n                registeredOfficeRecommendedAddresses: action.results\r\n            };\r\n        case createBusinessProfileActions.SEARCHING_TRADING_ADDRESSES:\r\n            return state;\r\n        case createBusinessProfileActions.DONE_SEARCHING_TRADING_ADDRESSES:\r\n            return {\r\n                ...state,\r\n                tradingAddressRecommendedAddresses: action.results\r\n            };\r\n        case createBusinessProfileActions.SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice: {\r\n                        ...state.BusinessProfile.registeredOffice,\r\n                        address1: action.selectedAddress[0],\r\n                        address2: action.selectedAddress[1],\r\n                        address3: action.selectedAddress[2],\r\n                        townCity: action.selectedAddress[3],\r\n                        postcode: state.registeredOfficeSearchPostcode.toUpperCase(),\r\n                    }\r\n                },\r\n                registeredOfficeEnterAddressManually: true,\r\n                registeredOfficeSearchPostcode: '',\r\n                registeredOfficeRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        ...state.BusinessProfile.tradingAddress,\r\n                        address1: action.selectedAddress[0],\r\n                        address2: action.selectedAddress[1],\r\n                        address3: action.selectedAddress[2],\r\n                        townCity: action.selectedAddress[3],\r\n                        postcode: state.tradingAddressSearchPostcode.toUpperCase(),\r\n                    }\r\n                },\r\n                tradingAddressEnterAddressManually: true,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY:\r\n            return {\r\n                ...state,\r\n                registeredOfficeEnterAddressManually: !state.registeredOfficeEnterAddressManually,\r\n                registeredOfficeSearchPostcode: '',\r\n                registeredOfficeRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY:\r\n            return {\r\n                ...state,\r\n                tradingAddressEnterAddressManually: !state.tradingAddressEnterAddressManually,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE:\r\n            return {\r\n                ...state,\r\n                tradingAddressSameAsRegisteredOffice: action.checked,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null,\r\n                tradingAddressEnterAddressManually: false,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        address1: '',\r\n                        address2: '',\r\n                        address3: '',\r\n                        townCity: '',\r\n                        postcode: ''\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.ADD_NEW_DIRECTOR_TEMPORARILY:\r\n            // update this state only when creating a new business profile\r\n            if (!action.isEditingExistingBusinessProfile) {\r\n                return {\r\n                    ...state,\r\n                    BusinessProfile: {\r\n                        ...state.BusinessProfile,\r\n                        directors: [...state.BusinessProfile.directors, action.director]\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editUserActions.DELETE_DIRECTOR_TEMPORARILY:\r\n            if (!action.isEditingExistingBusinessProfile) {\r\n                let editedDirectors = JSON.parse(JSON.stringify(state.BusinessProfile.directors));\r\n                editedDirectors.splice(action.index, 1);\r\n                return {\r\n                    ...state,\r\n                    BusinessProfile: {\r\n                        ...state.BusinessProfile,\r\n                        directors: editedDirectors\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\r\n            return {\r\n                ...state,\r\n                logoToBeUploaded: action.blob\r\n            };\r\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\r\n            return {\r\n                ...state,\r\n                videoToBeUploaded: action.video\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                expandBusinessProfileFilling: state.expandBusinessProfileFilling\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR:\r\n            return {\r\n                ...initState,\r\n                expandBusinessProfileFilling: !state.expandBusinessProfileFilling\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default createBusinessProfileReducer;","import * as editUserActions from '../actions/editUserActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    // this variable is to ensure the user's profile won't be able to be edited\r\n    // by the group admins if they don't belong to that group\r\n    // if the originalUser has the \"groupsUserIsIn\" property\r\n    // and the group admins do not belong to the user's home group,\r\n    // then they won't be able to edit this user's profile.\r\n    allowEditing: true,\r\n\r\n    // original user object\r\n    originalUser: null,\r\n    // user edited object\r\n    userEdited: null,\r\n\r\n    // when a new director is being added\r\n    addNewDirector: false,\r\n    newDirectorText: ''\r\n};\r\n\r\n// Reducer\r\nconst editUserReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editUserActions.SET_ORIGINAL_USER_AND_EDITED_USER:\r\n            return {\r\n                ...state,\r\n                originalUser: action.user,\r\n                userEdited: action.user,\r\n                allowEditing: action.allowEditing\r\n            };\r\n        case editUserActions.EDIT_PERSONAL_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    [action.edit.property]: action.edit.value\r\n                }\r\n            };\r\n        case editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        [action.edit.property]: action.edit.value\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        registeredOffice: {\r\n                            ...state.userEdited.BusinessProfile.registeredOffice,\r\n                            [action.edit.property]: action.edit.value\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        tradingAddress: {\r\n                            ...state.userEdited.BusinessProfile.tradingAddress,\r\n                            [action.edit.property]: action.edit.value\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.TOGGLE_ADD_NEW_DIRECTOR:\r\n            return {\r\n                ...state,\r\n                addNewDirector: !state.addNewDirector,\r\n                newDirectorText: state.addNewDirector ? '' : state.newDirectorText\r\n            };\r\n        case editUserActions.ADDING_NEW_DIRECTOR:\r\n            return {\r\n                ...state,\r\n                [action.edit.property]: action.edit.value\r\n            };\r\n        case editUserActions.ADD_NEW_DIRECTOR_TEMPORARILY:\r\n            // update this state only when editing an existing business profile\r\n            if (action.isEditingExistingBusinessProfile) {\r\n                return {\r\n                    ...state,\r\n                    userEdited: {\r\n                        ...state.userEdited,\r\n                        BusinessProfile: {\r\n                            ...state.userEdited.BusinessProfile,\r\n                            directors: [...state.userEdited.BusinessProfile.directors, state.newDirectorText]\r\n                        }\r\n                    },\r\n                    addNewDirector: false,\r\n                    newDirectorText: ''\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                addNewDirector: false,\r\n                newDirectorText: ''\r\n            };\r\n        case editUserActions.DELETE_DIRECTOR_TEMPORARILY:\r\n            // update this state only when editing an existing business profile\r\n            if (action.isEditingExistingBusinessProfile) {\r\n                let editedDirectors = JSON.parse(JSON.stringify(state.userEdited.BusinessProfile.directors));\r\n                editedDirectors.splice(action.index, 1);\r\n                return {\r\n                    ...state,\r\n                    userEdited: {\r\n                        ...state.userEdited,\r\n                        BusinessProfile: {\r\n                            ...state.userEdited.BusinessProfile,\r\n                            directors: editedDirectors\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editUserActions.RESET_PERSONAL_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    title: state.originalUser.title,\r\n                    firstName: state.originalUser.firstName,\r\n                    lastName: state.originalUser.lastName,\r\n                    email: state.originalUser.email,\r\n                    linkedin: !state.originalUser.linkedin ? '' : state.originalUser.linkedin\r\n                }\r\n            };\r\n        case editUserActions.RESET_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: JSON.parse(JSON.stringify(state.originalUser.BusinessProfile))\r\n                }\r\n            };\r\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\r\n            return {\r\n                ...state,\r\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\r\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\r\n            };\r\n        case editUserActions.EDIT_USER_ORIGINAL_USER_CHANGED:\r\n            return {\r\n                ...state,\r\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\r\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editUserReducer;","import * as editImageActions from '../actions/editImageActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport {\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_LOGO_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nconst initState = {\r\n    editImageDialogOpen: false,\r\n    mode: null,\r\n\r\n    imgEditor: null,\r\n    imgEdited: null, // blob file obtained after editing\r\n\r\n    imgZoom: 1,\r\n\r\n    imgPreEdited: null, // file chosen from computer or url from previous logos\r\n    imgPreEditedLoaded: true,\r\n    imgPreIndex: -1, // index of previous image in the original list (not sorted) on firebase (when choose)\r\n\r\n    previousPhotos: null\r\n};\r\n\r\nconst editImageReducer = (state = initState, action) => {\r\n\r\n    switch(action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editImageActions.TOGGLE_EDIT_IMAGE_DIALOG:\r\n            return {\r\n                ...state,\r\n                editImageDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editImageDialogOpen,\r\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\r\n                imgPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.imgPreIndex : -1,\r\n                previousPhotos:\r\n                    action.mode === UPLOAD_LOGO_MODE\r\n                        ?\r\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.logo)\r\n                            ?\r\n                            []\r\n                            :\r\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.logo))\r\n                        :\r\n                        action.mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                            ?\r\n                            !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.profilePicture)\r\n                                ?\r\n                                []\r\n                                :\r\n                                JSON.parse(JSON.stringify(action.user.profilePicture))\r\n                            :\r\n                            [],\r\n                imgEdited: null,\r\n                imgZoom: 1,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: true\r\n            };\r\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case editImageActions.SET_IMAGE_EDITOR_REFERENCE:\r\n            return {\r\n                ...state,\r\n                imgEditor: action.editor\r\n            };\r\n        case editImageActions.LOADING_IMAGE_FILE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: false\r\n            };\r\n        case editImageActions.IMAGE_FILES_LOADED:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: window.URL.createObjectURL(action.blob),\r\n                imgPreEditedLoaded: true,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.IMAGE_ZOOM_CHANGED:\r\n            return {\r\n                ...state,\r\n                imgZoom: action.zoom\r\n            };\r\n        case editImageActions.LOADING_PREVIOUS_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: false,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.FINISHED_LOADING_PREVIOUS_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: window.URL.createObjectURL(action.blob),\r\n                imgPreEditedLoaded: true,\r\n                imgPreIndex: state.previousPhotos.length - 1 - action.selectedIndex, // get the original index\r\n            };\r\n        case editImageActions.CANCEL_EDITING_CURRENT_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: true,\r\n                imgEdited: null,\r\n                imgZoom: 1,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.EDITED_IMAGE_OBTAINED:\r\n            return {\r\n                ...state,\r\n                imgEdited: action.blob\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editImageReducer;","import * as editVideoActions from '../actions/editVideoActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport {\r\n    UPLOAD_VIDEO_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nconst initState = {\r\n    editVideoDialogOpen: false,\r\n    mode: null,\r\n\r\n    videoTypeSelected: null,\r\n    videoChosen: null,\r\n    previousVideos: null,\r\n    videoPreIndex: -1\r\n};\r\n\r\nconst editVideoReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editVideoActions.TOGGLE_EDIT_VIDEO_DIALOG:\r\n            return {\r\n                ...state,\r\n                editVideoDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editVideoDialogOpen,\r\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\r\n                videoPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoPreIndex : -1,\r\n                previousVideos:\r\n                    action.mode === UPLOAD_VIDEO_MODE\r\n                        ?\r\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.video)\r\n                            ?\r\n                            []\r\n                            :\r\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.video))\r\n                        :\r\n                        [],\r\n                videoChosen: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoChosen : null,\r\n                videoTypeSelected: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoTypeSelected : null\r\n            };\r\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case editVideoActions.VIDEO_TYPE_CHOSEN:\r\n            return {\r\n                ...state,\r\n                videoTypeSelected: action.videoType,\r\n                videoChosen: null,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.VIDEO_URL_CHANGED:\r\n            return {\r\n                ...state,\r\n                videoChosen: action.url\r\n            };\r\n        case editVideoActions.VIDEO_FILE_CHANGED:\r\n            return {\r\n                ...state,\r\n                videoChosen: action.blob,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.CANCEL_EDITING_CURRENT_VIDEO:\r\n            return {\r\n                ...state,\r\n                videoChosen: null,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.PREVIOUS_VIDEO_SELECTED:\r\n            return {\r\n                ...state,\r\n                videoChosen: state.previousVideos[action.selectedIndex].url,\r\n                videoPreIndex: state.previousVideos.length - 1 - action.selectedIndex,\r\n                videoTypeSelected: null\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editVideoReducer;","import * as uploadFilesActions from '../actions/uploadFilesActions';\r\nimport {\r\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\r\n    UPLOAD_PITCH_COVER_MODE,\r\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\r\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    mode: null, // file upload mode (e.g. Legal documents, Pitch cover, Pitch deck, and Pitch supporting documents)\r\n    filesToBeUploaded: {\r\n        legalDocuments: [],\r\n        pitchCover: [],\r\n        pitchPresentationDocument: [],\r\n        pitchSupportingDocuments: []\r\n    }, // arrays of files that will be uploaded to Firebase storage\r\n    filesDBReferences: {\r\n        legalDocuments: [],\r\n        pitchCover: [],\r\n        pitchPresentationDocument: [],\r\n        pitchSupportingDocuments: []\r\n    }, // references of the uploaded files in the Firebase realtime DB\r\n\r\n    fileUploadErrorMessage: '',\r\n    fileUploadErrorSnackbarOpen: false\r\n};\r\n\r\nconst uploadFilesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case uploadFilesActions.DELETE_TO_BE_UPLOADED_FILE:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_COVER\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_ALL_FILES:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                },\r\n                filesDBReferences: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchSupportingDocuments\r\n                },\r\n                mode: null,\r\n                fileUploadErrorMessage: '',\r\n                fileUploadErrorSnackbarOpen: false\r\n            };\r\n        case uploadFilesActions.FILE_UPLOAD_CHANGED:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                            ?\r\n                            [...state.filesToBeUploaded.legalDocuments, action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                            ?\r\n                            [action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                            ?\r\n                            [action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                            ?\r\n                            [...state.filesToBeUploaded.pitchSupportingDocuments, action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                }\r\n            };\r\n        case uploadFilesActions.FILE_UPLOAD_ERROR:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorMessage: action.error,\r\n                fileUploadErrorSnackbarOpen: true\r\n            };\r\n        case uploadFilesActions.CLOSE_FILE_UPLOAD_ERROR_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorSnackbarOpen: false\r\n            };\r\n        case uploadFilesActions.RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorMessage: ''\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_LEGAL_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    legalDocuments: [...state.filesDBReferences.legalDocuments, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_COVER:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchCover: [...state.filesDBReferences.pitchCover, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchPresentationDocument: [...state.filesDBReferences.pitchPresentationDocument, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchSupportingDocuments: [...state.filesDBReferences.pitchSupportingDocuments, action.fileDBRef]\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default uploadFilesReducer;","import * as uploadingStatusActions from '../actions/uploadingStatusActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    UPLOAD_NONE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport {DISMISS_UPLOADING_STATUS} from \"../actions/uploadingStatusActions\";\r\n\r\nconst initState = {\r\n    mode: UPLOAD_NONE,\r\n    progress: 0\r\n};\r\n\r\nconst uploadingStatusReducer = (state = initState, action) => {\r\n    switch(action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case uploadingStatusActions.UPLOADING:\r\n            return {\r\n                mode: action.mode,\r\n                progress: action.progress\r\n            };\r\n        case DISMISS_UPLOADING_STATUS:\r\n            return {\r\n                mode: UPLOAD_NONE,\r\n                progress: 0\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default uploadingStatusReducer;","import * as changePasswordActions from '../actions/changePasswordActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    PASSWORD_CHANGE_NONE,\r\n    PASSWORD_CHANGE_RE_AUTH\r\n} from '../../shared-components/change-password/ChangePasswordPage';\r\n\r\nconst initState = {\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    newPasswordVerified: '',\r\n    passwordChangeResponseCode: PASSWORD_CHANGE_NONE\r\n};\r\n\r\nconst changePasswordReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case changePasswordActions.RE_AUTHENTICATING_USER:\r\n            return {\r\n                ...state,\r\n                passwordChangeResponseCode: PASSWORD_CHANGE_RE_AUTH\r\n            };\r\n        case changePasswordActions.RESET_CHANGE_PASSWORD:\r\n            return {\r\n                ...state,\r\n                currentPassword: '',\r\n                newPassword: '',\r\n                newPasswordVerified: '',\r\n                passwordChangeResponseCode: action.hasOwnProperty('responseCode') ? action.responseCode : PASSWORD_CHANGE_NONE\r\n            };\r\n        case changePasswordActions.CHANGE_PASSWORD_TEXT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case changePasswordActions.ERROR_CHANGING_PASSWORD:\r\n            return {\r\n                ...state,\r\n                passwordChangeResponseCode: action.errorCode\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default changePasswordReducer;","import * as clubAttributesActions from '../actions/clubAttributesActions';\r\n\r\nconst initState = {\r\n    clubAttributes: null,\r\n    clubAttributesLoaded: false,\r\n    clubAttributesBeingLoaded: false\r\n};\r\n\r\nconst clubAttributesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case clubAttributesActions.LOADING_CLUB_ATTRIBUTES:\r\n            return {\r\n                ...state,\r\n                clubAttributes: null,\r\n                clubAttributesLoaded: false,\r\n                clubAttributesBeingLoaded: true\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_LOADED:\r\n            return {\r\n                ...state,\r\n                clubAttributes: JSON.parse(JSON.stringify(action.clubAttributes)),\r\n                clubAttributesLoaded: true,\r\n                clubAttributesBeingLoaded: false\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributes: {\r\n                    ...state.clubAttributes,\r\n                    [action.key]: action.value\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default clubAttributesReducer;","import React, {Component} from 'react';\r\nimport {Button, TextField, Typography} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        createForumName: state.manageForums.createForumName,\r\n        createForumDesc: state.manageForums.createForumDesc,\r\n        createForumAuthor: state.manageForums.createForumAuthor,\r\n        createForumError: state.manageForums.createForumError,\r\n        forumEdited: state.manageForums.forumEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        createNewForum: () => dispatch(forumsActions.createNewForum()),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\r\n    }\r\n};\r\n\r\nclass CreateForum extends Component {\r\n    render() {\r\n        const {\r\n            createForumName,\r\n            createForumDesc,\r\n            createForumError,\r\n            forumEdited,\r\n\r\n            toggleCreateNewForum,\r\n            createNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n            >\r\n                <Typography\r\n                    paragraph\r\n                    variant=\"h6\"\r\n                    color=\"primary\"\r\n                >\r\n                    {\r\n                        forumEdited\r\n                            ?\r\n                            \"Edit forum\"\r\n                            :\r\n                            \"Create forum\"\r\n                    }\r\n                </Typography>\r\n                {\r\n                    forumEdited\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Typography\r\n                            paragraph\r\n                            variant=\"body1\"\r\n                            color=\"textSecondary\"\r\n                            align=\"left\"\r\n                        >\r\n                            Forums are made up of individual discussion\r\n                            threads that can be organised around a particular subject. Create forums to organise\r\n                            discussions.\r\n                        </Typography>\r\n                }\r\n                <FlexView\r\n                    column\r\n                    marginTop={10}\r\n                >\r\n                    <Typography\r\n                        variant=\"subtitle1\"\r\n                    >\r\n                        Forum information\r\n                    </Typography>\r\n                    <TextField\r\n                        name=\"createForumName\"\r\n                        label=\"Name\"\r\n                        required\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        value={createForumName}\r\n                        error={createForumError && createForumName.trim().length === 0}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n                    <TextField\r\n                        name=\"createForumDesc\"\r\n                        label=\"Description\"\r\n                        placeholder=\"(optional)\"\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        multiline\r\n                        rows={4}\r\n                        rowsMax={4}\r\n                        value={createForumDesc}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n                    <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={8}\r\n                            style={{\r\n                                marginTop: 30\r\n                            }}\r\n                        >\r\n                            <FlexView>\r\n                                {\r\n                                    !createForumError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"left\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            Please enter forum name.\r\n                                        </Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={4}\r\n                            style={{\r\n                                marginTop: 30\r\n                            }}\r\n                        >\r\n                            <FlexView\r\n                                hAlignContent=\"right\"\r\n                            >\r\n                                <FlexView\r\n                                    marginRight={5}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleCreateNewForum(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                </FlexView>\r\n                                <FlexView\r\n                                    marginLeft={5}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={createNewForum}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >\r\n                                        Submit\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateForum);","import React, {Component} from 'react';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Button, TextField, Typography} from '@material-ui/core';\r\nimport ReactQuill from 'react-quill';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        createThreadName: state.manageForums.createThreadName,\r\n        createThreadBriefDesc: state.manageForums.createThreadBriefDesc,\r\n        createThreadMessage: state.manageForums.createThreadMessage,\r\n        createThreadError: state.manageForums.createThreadError,\r\n        threadEdited: state.manageForums.threadEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        createNewThread: () => dispatch(forumsActions.createNewThread()),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor))\r\n    }\r\n};\r\n\r\nclass CreateThread extends Component {\r\n\r\n    /**\r\n     * Handle react quill changed\r\n     *\r\n     * @param field\r\n     * @returns {Function}\r\n     */\r\n    handleQuillChanged = field => (content, delta, source, editor) => {\r\n        this.props.handleQuillChanged(field, editor);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            createThreadName,\r\n            createThreadBriefDesc,\r\n            createThreadMessage,\r\n            createThreadError,\r\n            threadEdited,\r\n\r\n            toggleCreateNewThread,\r\n            createNewThread,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        return (\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <FlexView\r\n                        column\r\n                    >\r\n                        <Typography\r\n                            paragraph\r\n                            variant=\"h6\"\r\n                            color=\"primary\"\r\n                        >\r\n                            {\r\n                                threadEdited\r\n                                    ?\r\n                                    \"Edit thread\"\r\n                                    :\r\n                                    \"Create thread\"\r\n                            }\r\n                        </Typography>\r\n                        {\r\n                            threadEdited\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography\r\n                                    paragraph\r\n                                    variant=\"body1\"\r\n                                    color=\"textSecondary\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    A thread is a series of posts\r\n                                    related to the same subject. Threads provide an organisational structure within a\r\n                                    forum for\r\n                                    users to share posts on similar topics. Creating a thread posts the first\r\n                                    message.\r\n                                </Typography>\r\n                        }\r\n                        <FlexView\r\n                            column\r\n                            marginTop={10}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body1\"\r\n                            >\r\n                                Thread information\r\n                            </Typography>\r\n\r\n                            <TextField\r\n                                name=\"createThreadName\"\r\n                                label=\"Name\"\r\n                                required\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                value={createThreadName}\r\n                                error={createThreadError && createThreadName.trim().length === 0}\r\n                                onChange={handleForumsInputChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                name=\"createThreadBriefDesc\"\r\n                                label=\"Brief description\"\r\n                                required\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                value={createThreadBriefDesc}\r\n                                error={createThreadError && createThreadBriefDesc.trim().length === 0}\r\n                                onChange={handleForumsInputChanged}\r\n                            />\r\n\r\n                            <FlexView\r\n                                column\r\n                                marginTop={40}\r\n                            >\r\n                                <Typography\r\n                                    paragraph\r\n                                    variant=\"body1\"\r\n                                >\r\n                                    Thread message\r\n                                </Typography>\r\n                                <ReactQuill\r\n                                    placeholder=\"Write your thread message here. Add images for visual effects.\"\r\n                                    theme=\"snow\"\r\n                                    value={createThreadMessage}\r\n                                    onChange={this.handleQuillChanged(forumsActions.THREAD_CONTENT_QUILL)}\r\n                                    modules={modules}\r\n                                />\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </Col>\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={8}\r\n                            style={{\r\n                                marginTop: 30\r\n                            }}\r\n                        >\r\n                            <FlexView>\r\n                                {\r\n                                    !createThreadError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"left\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            Please fill in the required fields.\r\n                                        </Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={4}\r\n                            style={{\r\n                                marginTop: 30\r\n                            }}\r\n                        >\r\n                            <FlexView\r\n                                hAlignContent=\"right\"\r\n                            >\r\n                                <FlexView\r\n                                    marginRight={5}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleCreateNewThread(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                </FlexView>\r\n                                <FlexView\r\n                                    marginLeft={5}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={createNewThread}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >\r\n                                        Submit\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateThread);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from 'react-flexview';\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {SORT_BY_CURRENT_USER, SORT_BY_LAST, SORT_BY_OLDEST} from './Forums';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        threadsTablePage: state.manageForums.threadsTablePage,\r\n        threadsTableRowsPerPage: state.manageForums.threadsTableRowsPerPage,\r\n\r\n        threadsLoadMode: state.manageForums.threadsLoadMode,\r\n        threadsSortedMode: state.manageForums.threadsSortedMode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        deleteThread: (threadID) => dispatch(forumsActions.deleteThread(threadID)),\r\n        goBackToForumsList: () => dispatch(forumsActions.goBackToForumsList()),\r\n        clickOnAParticularThread: (thread) => dispatch(forumsActions.clickOnAParticularThread(thread)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass IndividualForum extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    /**\r\n     * Render threads table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderThreads = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            forumThreadsLoaded,\r\n            forumThreads,\r\n            threadsSortedMode,\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            toggleCreateNewThread,\r\n            deleteThread,\r\n            clickOnAParticularThread\r\n        } = this.props;\r\n\r\n        if (!forumThreadsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell\r\n                        colSpan={4}\r\n                    >\r\n                        <FlexView\r\n                            hAlignContent=\"center\"\r\n                            marginTop={20}\r\n                            marginBottom={20}\r\n                        >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedThreads = [];\r\n\r\n        switch (threadsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n                sortedThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread1.dateCreated - thread2.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedThreads.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell\r\n                        colSpan={4}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"center\"\r\n                            style={{\r\n                                marginTop: 20,\r\n                                marginBottom: 20\r\n                            }}\r\n                        >\r\n                            No threads created.\r\n                        </Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedThreads\r\n                .slice(threadsTablePage * threadsTableRowsPerPage, threadsTablePage * threadsTableRowsPerPage + threadsTableRowsPerPage)\r\n                .map(thread => (\r\n                        <TableRow\r\n                            key={thread.id}\r\n                            hover\r\n                        >\r\n                            <TableCell>\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body2\"\r\n                                >\r\n                                    {utils.dateTimeInReadableFormat(thread.dateCreated)}\r\n                                </Typography>\r\n                            </TableCell>\r\n                            <TableCell\r\n                                style={{\r\n                                    maxWidth: 400\r\n                                }}\r\n                            >\r\n                                <FlexView\r\n                                    column\r\n                                    hAlignContent=\"left\"\r\n                                >\r\n                                    <ButtonBase\r\n                                        onClick={() => clickOnAParticularThread(thread)}\r\n                                    >\r\n                                        <Typography\r\n                                            align=\"left\"\r\n                                            variant=\"body2\"\r\n                                            color=\"primary\"\r\n                                            noWrap\r\n                                        >\r\n                                            {thread.name}\r\n                                        </Typography>\r\n                                    </ButtonBase>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                        && (\r\n                                            !thread.hasOwnProperty('deleted')\r\n                                            || (\r\n                                                thread.hasOwnProperty('deleted')\r\n                                                && thread.deleted === false\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView\r\n                                                marginTop={12}\r\n                                            >\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"secondary\"\r\n                                                    onClick={() => deleteThread(thread.id)}\r\n                                                    style={{\r\n                                                        marginRight: 10\r\n                                                    }}\r\n                                                >\r\n                                                    Delete\r\n                                                    <DeleteIcon\r\n                                                        fontSize=\"small\"\r\n                                                        style={{\r\n                                                            marginLeft: 6\r\n                                                        }}\r\n                                                    />\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => toggleCreateNewThread(true, JSON.parse(JSON.stringify(thread)))}\r\n                                                >\r\n                                                    Edit\r\n                                                    <EditIcon\r\n                                                        fontSize=\"small\"\r\n                                                        style={{\r\n                                                            marginLeft: 6\r\n                                                        }}\r\n                                                    />\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n                            <TableCell\r\n                                style={{\r\n                                    maxWidth: 400\r\n                                }}\r\n                            >\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body2\"\r\n                                    noWrap\r\n                                >\r\n                                    {thread.description}\r\n                                </Typography>\r\n                            </TableCell>\r\n                            <TableCell\r\n                                style={{\r\n                                    maxWidth: 200\r\n                                }}\r\n                            >\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body2\"\r\n                                    noWrap\r\n                                >\r\n                                    {\r\n                                        thread.author.type !== DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            // normal users\r\n                                            `${thread.author.firstName} ${thread.author.lastName}`\r\n                                            :\r\n                                            thread.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                \"Invest West Super Admin\"\r\n                                                :\r\n                                                // group admins\r\n                                                `${thread.author.groupDetails.displayName} Admin`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            threadsLoadMode,\r\n            threadsSortedMode,\r\n\r\n            toggleCreateNewThread,\r\n            handleForumsInputChanged,\r\n            goBackToForumsList\r\n        } = this.props;\r\n\r\n        let sortedThreads = [...forumThreads];\r\n\r\n        if (threadsSortedMode === SORT_BY_CURRENT_USER) {\r\n            sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n            sortedThreads.sort((thread1, thread2) => {\r\n                return (thread2.dateCreated - thread1.dateCreated);\r\n            });\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n            >\r\n                <FlexView\r\n                    vAlignContent=\"center\"\r\n                >\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        aria-label=\"Back\"\r\n                        onClick={goBackToForumsList}\r\n                    >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView\r\n                        marginLeft={8}\r\n                    >\r\n                        <Typography\r\n                            color=\"primary\"\r\n                            variant=\"h6\"\r\n                        >\r\n                            {`Forum: ${forumSelected.name}`}\r\n                        </Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <FlexView\r\n                    marginTop={12}\r\n                    marginBottom={24}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        align=\"left\"\r\n                    >\r\n                        {\r\n                            !forumSelected.hasOwnProperty('lastEdited')\r\n                                ?\r\n                                `Created on: ${utils.dateTimeInReadableFormat(forumSelected.dateCreated)}`\r\n                                :\r\n                                `Last edited: ${utils.dateTimeInReadableFormat(forumSelected.lastEdited)}`\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n\r\n                <Typography\r\n                    variant=\"body1\"\r\n                    align=\"left\"\r\n                >\r\n                    <b><u>Description:</u></b>\r\n                </Typography>\r\n\r\n                <Typography\r\n                    variant=\"body1\"\r\n                    align=\"left\"\r\n                    style={{\r\n                        whiteSpace: \"pre-line\",\r\n                        marginTop: 6\r\n                    }}\r\n                >\r\n                    {forumSelected.description}\r\n                </Typography>\r\n\r\n                <Divider\r\n                    style={{\r\n                        height: 2,\r\n                        marginTop: 35,\r\n                        marginBottom: 35,\r\n                        backgroundColor: colors.blue_gray_100\r\n                    }}\r\n                />\r\n\r\n                <FlexView\r\n                    marginBottom={35}\r\n                >\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        onClick={() => toggleCreateNewThread(true, null)}\r\n                    >\r\n                        <AddIcon\r\n                            fontSize=\"small\"\r\n                            style={{\r\n                                marginRight: 10\r\n                            }}\r\n                        />\r\n                        Create thread\r\n                    </Button>\r\n                </FlexView>\r\n\r\n                {/** Filters */}\r\n                <Container\r\n                    fluid\r\n                    style={{\r\n                        padding: 0,\r\n                        marginBottom: 40\r\n                    }}\r\n                >\r\n                    <Row>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                                ?\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={4}\r\n                                    lg={2}\r\n                                >\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            align=\"left\"\r\n                                            style={{\r\n                                                marginBottom: 4\r\n                                            }}\r\n                                        >\r\n                                            Mode\r\n                                        </Typography>\r\n                                        <Paper>\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <Select\r\n                                                    value={threadsLoadMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput\r\n                                                            labelWidth={0}\r\n                                                            name=\"threadsLoadMode\"\r\n                                                        />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem\r\n                                                        value={realtimeDBUtils.LOAD_LIVE_THREADS}\r\n                                                    >\r\n                                                        Live threads\r\n                                                    </MenuItem>\r\n                                                    <MenuItem\r\n                                                        value={realtimeDBUtils.LOAD_DELETED_THREADS}\r\n                                                    >\r\n                                                        Deleted threads\r\n                                                    </MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                                :\r\n                                null\r\n                        }\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={4}\r\n                            lg={2}\r\n                        >\r\n                            <FlexView\r\n                                column\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    align=\"left\"\r\n                                    style={{\r\n                                        marginBottom: 4\r\n                                    }}\r\n                                >\r\n                                    Sort by\r\n                                </Typography>\r\n                                <Paper>\r\n                                    <FormControl\r\n                                        fullWidth\r\n                                    >\r\n                                        <Select\r\n                                            value={threadsSortedMode}\r\n                                            onChange={handleForumsInputChanged}\r\n                                            margin=\"dense\"\r\n                                            input={\r\n                                                <OutlinedInput\r\n                                                    labelWidth={0}\r\n                                                    name=\"threadsSortedMode\"\r\n                                                />\r\n                                            }\r\n                                        >\r\n                                            <MenuItem\r\n                                                value={SORT_BY_LAST}\r\n                                            >\r\n                                                Newest\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                value={SORT_BY_CURRENT_USER}\r\n                                            >\r\n                                                Mine\r\n                                            </MenuItem>\r\n                                            <MenuItem\r\n                                                value={SORT_BY_OLDEST}\r\n                                            >\r\n                                                Oldest\r\n                                            </MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Paper>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n\r\n                {/** Threads table */}\r\n                <Paper\r\n                    style={{\r\n                        overflowX: \"auto\"\r\n                    }}\r\n                >\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography\r\n                                            align=\"left\"\r\n                                            variant=\"body2\"\r\n                                            className={css(sharedStyles.white_text)}\r\n                                        >\r\n                                            <b>Date</b>\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography\r\n                                            align=\"left\"\r\n                                            variant=\"body2\"\r\n                                            className={css(sharedStyles.white_text)}\r\n                                        >\r\n                                            <b>Thread</b>\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography\r\n                                            align=\"left\"\r\n                                            variant=\"body2\"\r\n                                            className={css(sharedStyles.white_text)}\r\n                                        >\r\n                                            <b>Description</b>\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography\r\n                                            align=\"left\"\r\n                                            variant=\"body2\"\r\n                                            className={css(sharedStyles.white_text)}\r\n                                        >\r\n                                            <b>Author</b>\r\n                                        </Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderThreads()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[5, 20, 50]}\r\n                                    count={sortedThreads.length}\r\n                                    rowsPerPage={threadsTableRowsPerPage}\r\n                                    page={threadsTablePage}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={this.tableChangePage('threads')}\r\n                                    onChangeRowsPerPage={this.tableChangeRowsPerPage('threads')}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualForum);","import React, {Component} from 'react';\r\n\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport {Button, Paper, TextField, Typography} from '@material-ui/core';\r\nimport ReactQuill from 'react-quill';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        submitThreadReply: () => dispatch(forumsActions.submitThreadReply()),\r\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\r\n    }\r\n};\r\n\r\nclass CreateReply extends Component {\r\n\r\n    /**\r\n     * Handle react quill changed\r\n     *\r\n     * @param field\r\n     * @returns {Function}\r\n     */\r\n    handleQuillChanged = field => (content, delta, source, editor) => {\r\n        this.props.handleQuillChanged(field, editor);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            threadReplySubject,\r\n            threadReplyMessage,\r\n            createThreadReplyError,\r\n\r\n            handleForumsInputChanged,\r\n            submitThreadReply,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper\r\n                style={{\r\n                    marginTop: 20\r\n                }}\r\n                className={css(styles.thread_reply_style)}\r\n            >\r\n                <FlexView\r\n                    column\r\n                >\r\n                    <TextField\r\n                        name=\"threadReplySubject\"\r\n                        label=\"Subject\"\r\n                        required\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        value={threadReplySubject}\r\n                        error={createThreadReplyError && threadReplySubject.trim().length === 0}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n\r\n                    <FlexView\r\n                        column\r\n                        marginTop={30}\r\n                    >\r\n                        <Typography\r\n                            paragraph\r\n                            variant=\"body1\"\r\n                        >\r\n                            Message *\r\n                        </Typography>\r\n                        <ReactQuill\r\n                            placeholder=\"Write your reply here. Add images for visual effects.\"\r\n                            value={threadReplyMessage}\r\n                            theme=\"snow\"\r\n                            onChange={this.handleQuillChanged(forumsActions.THREAD_REPLY_CONTENT_QUILL)}\r\n                            modules={modules}\r\n                        />\r\n                    </FlexView>\r\n\r\n                    <Row\r\n                        noGutters\r\n                    >\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={8}\r\n                            style={{\r\n                                marginTop: 30\r\n                            }}\r\n                        >\r\n                            <FlexView>\r\n                                {\r\n                                    !createThreadReplyError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                            align=\"left\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            Please fill in the required fields.\r\n                                        </Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col\r\n                            xs={12}\r\n                            sm={12}\r\n                            md={6}\r\n                            lg={4}\r\n                            style={{\r\n                                marginTop: 30\r\n                            }}\r\n                        >\r\n                            <FlexView\r\n                                hAlignContent=\"right\"\r\n                            >\r\n                                <FlexView\r\n                                    marginRight={5}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleThreadReply(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >\r\n                                        Cancel\r\n                                    </Button>\r\n                                </FlexView>\r\n                                <FlexView\r\n                                    marginLeft={5}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={submitThreadReply}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >\r\n                                        Submit\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            </Paper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateReply);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});\r\n","import React, {Component} from 'react';\r\n\r\nimport {Button, IconButton, Paper, Typography} from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {Image} from 'react-bootstrap';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport LetterAvatar from '../profile/LetterAvatar';\r\nimport CreateReply from './CreateReply';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst AVATAR_MAX_HEIGHT = 75;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplyEdited: state.manageForums.threadReplyEdited,\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        deleteThreadReply: (threadReplyID) => dispatch(forumsActions.deleteThreadReply(threadReplyID)),\r\n        goBackToThreadsList: () => dispatch(forumsActions.goBackToThreadsList())\r\n    }\r\n};\r\n\r\nclass IndividualThread extends Component {\r\n\r\n    /**\r\n     * Render replies within this thread\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderReplies = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            forumThreadReplies,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            toggleThreadReply,\r\n            deleteThreadReply\r\n        } = this.props;\r\n\r\n        if (forumThreadReplies.length === 0) {\r\n            return;\r\n        }\r\n\r\n        forumThreadReplies.sort((reply1, reply2) => {\r\n            return (reply2.replyDate - reply1.replyDate);\r\n        });\r\n\r\n        return forumThreadReplies.map(reply => (\r\n            <Paper\r\n                key={reply.id}\r\n                className={css(styles.thread_reply_style)}\r\n            >\r\n                {\r\n                    reply.hasOwnProperty('deleted')\r\n                    && reply.deleted === true\r\n                        ?\r\n                        <FlexView>\r\n                            <Typography\r\n                                variant=\"body1\"\r\n                                align=\"left\"\r\n                            >\r\n                                <i>This reply has been removed.</i>\r\n                            </Typography>\r\n                        </FlexView>\r\n                        :\r\n                        <FlexView\r\n                            column\r\n                            width=\"100%\"\r\n                        >\r\n                            <FlexView\r\n                                vAlignContent=\"center\"\r\n                                marginBottom={10}\r\n                                width=\"100%\"\r\n                            >\r\n                                {/** Author's avatar */}\r\n                                <FlexView\r\n                                    hAlignContent=\"left\"\r\n                                >\r\n                                    {\r\n                                        reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            reply.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                <FlexView\r\n                                                    width={AVATAR_MAX_HEIGHT}\r\n                                                    height={AVATAR_MAX_HEIGHT}\r\n                                                >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={require('../../img/admin_logo.png').default}\r\n                                                        style={{\r\n                                                            width: \"100%\",\r\n                                                            maxHeight: AVATAR_MAX_HEIGHT,\r\n                                                            objectFit: \"contain\"\r\n                                                        }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                                :\r\n                                                // group admins\r\n                                                <FlexView\r\n                                                    width={AVATAR_MAX_HEIGHT}\r\n                                                    height={AVATAR_MAX_HEIGHT}\r\n                                                >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={\r\n                                                            utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, reply.author.groupDetails)\r\n                                                        }\r\n                                                        style={{\r\n                                                            width: \"100%\",\r\n                                                            maxHeight: AVATAR_MAX_HEIGHT,\r\n                                                            objectFit: \"contain\"\r\n                                                        }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            :\r\n                                            (\r\n                                                !reply.author.profilePicture\r\n                                                || (reply.author.profilePicture && reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                                    ?\r\n                                                    // normal users with no profile picture\r\n                                                    <LetterAvatar\r\n                                                        firstName={reply.author.firstName}\r\n                                                        lastName={reply.author.lastName}\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                        textVariant=\"h5\"\r\n                                                    />\r\n                                                    :\r\n                                                    // normal users with profile picture\r\n                                                    <FlexView\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                    >\r\n                                                        <Image\r\n                                                            roundedCircle\r\n                                                            thumbnail\r\n                                                            src={\r\n                                                                reply.author.profilePicture[reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                            }\r\n                                                            style={{\r\n                                                                width: \"100%\",\r\n                                                                maxHeight: AVATAR_MAX_HEIGHT,\r\n                                                                objectFit: \"contain\"\r\n                                                            }}\r\n                                                        />\r\n                                                    </FlexView>\r\n                                            )\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                {/** Author name and dates */}\r\n                                <FlexView\r\n                                    column\r\n                                    marginLeft={15}\r\n                                    hAlignContent=\"left\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        <b>\r\n                                            {\r\n                                                reply.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // normal users\r\n                                                    `${reply.author.firstName} ${reply.author.lastName}`\r\n                                                    :\r\n                                                    reply.author.superAdmin\r\n                                                        ?\r\n                                                        // super admins\r\n                                                        \"Invest West Super Admin\"\r\n                                                        :\r\n                                                        // group admins\r\n                                                        `${reply.author.groupDetails.displayName} Admin`\r\n                                            }\r\n                                        </b>\r\n                                    </Typography>\r\n\r\n                                    <Typography\r\n                                        variant=\"subtitle2\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {\r\n                                            !reply.hasOwnProperty('lastEdited')\r\n                                                ?\r\n                                                `Replied on: ${utils.dateTimeInReadableFormat(reply.replyDate)}`\r\n                                                :\r\n                                                `Last edited: ${utils.dateTimeInReadableFormat(reply.lastEdited)}`\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n\r\n                                {/** Delete/Edit reply */}\r\n                                {\r\n                                    (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                    ) || currentUser.id === reply.author.id\r\n                                        ?\r\n                                        <FlexView\r\n                                            hAlignContent=\"left\"\r\n                                            vAlignContent=\"center\"\r\n                                            marginLeft={60}\r\n                                        >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"secondary\"\r\n                                                onClick={() => deleteThreadReply(reply.id)}\r\n                                                style={{\r\n                                                    marginRight: 10\r\n                                                }}\r\n                                            >\r\n                                                Delete\r\n                                                <DeleteIcon\r\n                                                    fontSize=\"small\"\r\n                                                    style={{\r\n                                                        marginLeft: 6\r\n                                                    }}\r\n                                                />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"primary\"\r\n                                                onClick={() => toggleThreadReply(true, JSON.parse(JSON.stringify(reply)))}\r\n                                            >\r\n                                                Edit\r\n                                                <EditIcon\r\n                                                    fontSize=\"small\"\r\n                                                    style={{\r\n                                                        marginLeft: 6\r\n                                                    }}\r\n                                                />\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                !reply.message\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView\r\n                                        column\r\n                                        marginTop={15}\r\n                                        dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(reply.message.ops)}}\r\n                                    />\r\n                            }\r\n\r\n                            {\r\n                                threadInReplyMode\r\n                                && threadReplyEdited\r\n                                && threadReplyEdited.id === reply.id\r\n                                    ?\r\n                                    <CreateReply/>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </FlexView>\r\n                }\r\n            </Paper>\r\n        ));\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupProperties,\r\n\r\n            forumThreadSelected,\r\n            forumThreadRepliesLoaded,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            goBackToThreadsList,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        if (!forumThreadRepliesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n            >\r\n                <FlexView\r\n                    vAlignContent=\"center\"\r\n                    marginBottom={24}\r\n                >\r\n                    <IconButton\r\n                        color=\"primary\"\r\n                        aria-label=\"Back\"\r\n                        onClick={goBackToThreadsList}\r\n                    >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView\r\n                        marginLeft={8}\r\n                    >\r\n                        <Typography\r\n                            color=\"primary\"\r\n                            variant=\"h6\"\r\n                        >\r\n                            {`Thread: ${forumThreadSelected.name}`}\r\n                        </Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <Paper\r\n                    className={css(styles.thread_reply_style)}\r\n                >\r\n                    <FlexView\r\n                        column\r\n                    >\r\n                        <FlexView\r\n                            vAlignContent=\"center\"\r\n                            marginBottom={10}\r\n                        >\r\n                            {\r\n                                forumThreadSelected.author.type === DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    forumThreadSelected.author.superAdmin\r\n                                        ?\r\n                                        // super admins\r\n                                        <FlexView\r\n                                            width={AVATAR_MAX_HEIGHT}\r\n                                            height={AVATAR_MAX_HEIGHT}\r\n                                        >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={require('../../img/admin_logo.png').default}\r\n                                                style={{\r\n                                                    width: \"100%\",\r\n                                                    maxHeight: AVATAR_MAX_HEIGHT,\r\n                                                    objectFit: \"contain\"\r\n                                                }}\r\n                                            />\r\n                                        </FlexView>\r\n                                        :\r\n                                        // group admins\r\n                                        <FlexView\r\n                                            width={AVATAR_MAX_HEIGHT}\r\n                                            height={AVATAR_MAX_HEIGHT}\r\n                                        >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={\r\n                                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, forumThreadSelected.author.groupDetails)\r\n                                                }\r\n                                                style={{\r\n                                                    width: \"100%\",\r\n                                                    maxHeight: AVATAR_MAX_HEIGHT,\r\n                                                    objectFit: \"contain\"\r\n                                                }}\r\n                                            />\r\n                                        </FlexView>\r\n                                    :\r\n                                    (\r\n                                        !forumThreadSelected.author.profilePicture\r\n                                        || (forumThreadSelected.author.profilePicture && forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                            ?\r\n                                            // normal users with no profile picture\r\n                                            <LetterAvatar\r\n                                                firstName={forumThreadSelected.author.firstName}\r\n                                                lastName={forumThreadSelected.author.lastName}\r\n                                                width={AVATAR_MAX_HEIGHT}\r\n                                                height={AVATAR_MAX_HEIGHT}\r\n                                                textVariant=\"h5\"\r\n                                            />\r\n                                            :\r\n                                            // normal users with profile picture\r\n                                            <FlexView\r\n                                                width={AVATAR_MAX_HEIGHT}\r\n                                                height={AVATAR_MAX_HEIGHT}\r\n                                            >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        forumThreadSelected.author.profilePicture[forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{\r\n                                                        width: \"100%\",\r\n                                                        maxHeight: AVATAR_MAX_HEIGHT,\r\n                                                        objectFit: \"contain\"\r\n                                                    }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    )\r\n                            }\r\n                            <FlexView\r\n                                column\r\n                                marginLeft={15}\r\n                                marginBottom={10}\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                >\r\n                                    <b>\r\n                                        {\r\n                                            forumThreadSelected.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                // normal users\r\n                                                `${forumThreadSelected.author.firstName} ${forumThreadSelected.author.lastName}`\r\n                                                :\r\n                                                forumThreadSelected.author.superAdmin\r\n                                                    ?\r\n                                                    // super admins\r\n                                                    \"Invest West Super Admin\"\r\n                                                    :\r\n                                                    // group admins\r\n                                                    `${forumThreadSelected.author.groupDetails.displayName} Admin`\r\n                                        }\r\n                                    </b>\r\n                                </Typography>\r\n\r\n                                <Typography\r\n                                    variant=\"subtitle2\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    {\r\n                                        !forumThreadSelected.hasOwnProperty('lastEdited')\r\n                                            ?\r\n                                            `Created on: ${utils.dateTimeInReadableFormat(forumThreadSelected.dateCreated)}`\r\n                                            :\r\n                                            `Last edited: ${utils.dateTimeInReadableFormat(forumThreadSelected.lastEdited)}`\r\n                                    }\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"left\"\r\n                        >\r\n                            <b><u>Description:</u></b>\r\n                        </Typography>\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"left\"\r\n                            style={{\r\n                                whiteSpace: \"pre-line\",\r\n                                marginTop: 6,\r\n                                marginBottom: 15\r\n                            }}\r\n                        >\r\n                            {forumThreadSelected.description}\r\n                        </Typography>\r\n                        {\r\n                            !forumThreadSelected.message\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    column\r\n                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(forumThreadSelected.message.ops)}}\r\n                                    marginTop={25}\r\n                                />\r\n                        }\r\n                        {\r\n                            threadInReplyMode\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    marginTop={25}\r\n                                    marginBottom={8}\r\n                                >\r\n                                    <Button\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleThreadReply(true, null)}\r\n                                    >\r\n                                        Reply\r\n                                    </Button>\r\n                                </FlexView>\r\n                        }\r\n                    </FlexView>\r\n                </Paper>\r\n                {\r\n                    !threadInReplyMode\r\n                        ?\r\n                        null\r\n                        :\r\n                        threadReplyEdited\r\n                            ?\r\n                            null\r\n                            :\r\n                            <CreateReply/>\r\n                }\r\n                <FlexView\r\n                    column\r\n                    marginTop={20}\r\n                >\r\n                    {\r\n                        this.renderReplies()\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualThread);\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css} from 'aphrodite';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    FormControl,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\nimport CreateForum from './CreateForum';\r\nimport CreateThread from './CreateThread';\r\nimport IndividualForum from './IndividualForum';\r\nimport IndividualThread from './IndividualThread';\r\nimport './Forums.scss';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const MODE_FORUMS_MAIN = 0;\r\nexport const MODE_CREATE_FORUM = 1;\r\nexport const MODE_VIEW_FORUM = 2;\r\nexport const MODE_CREATE_THREAD = 3;\r\nexport const MODE_VIEW_THREAD = 4;\r\n\r\nexport const SORT_BY_CURRENT_USER = 0;\r\nexport const SORT_BY_LAST = 1;\r\nexport const SORT_BY_OLDEST = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        modeForums: state.manageForums.modeForums,\r\n\r\n        forumsSortedMode: state.manageForums.forumsSortedMode,\r\n        forumsLoadMode: state.manageForums.forumsLoadMode,\r\n\r\n        forums: state.manageForums.forums,\r\n        forumsLoaded: state.manageForums.forumsLoaded,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        forumsTablePage: state.manageForums.forumsTablePage,\r\n        forumsTableRowsPerPage: state.manageForums.forumsTableRowsPerPage,\r\n\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadForums: (mode) => dispatch(forumsActions.loadForums(mode)),\r\n        startListeningForForumsChanged: () => dispatch(forumsActions.startListeningForForumsChanged()),\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        startListeningForThreadsChanged: () => dispatch(forumsActions.startListeningForThreadsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        startListeningForThreadRepliesChanged: () => dispatch(forumsActions.startListeningForThreadRepliesChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        clickOnAParticularForum: (forum) => dispatch(forumsActions.clickOnAParticularForum(forum)),\r\n        deleteForum: (forumID) => dispatch(forumsActions.deleteForum(forumID)),\r\n\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass Forums extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadForums\r\n        } = this.props;\r\n\r\n        // load forums when this component is displayed\r\n        loadForums(realtimeDBUtils.LOAD_LIVE_FORUMS);\r\n\r\n        // call add and remove listeners here because when switching to another tab, all the listeners will be removed,\r\n        // but when switching back to the Forums tab, the componentDidUpdate won't be called. As a result, the listeners\r\n        // will not be added according to the state of the forum components.\r\n        // Therefore, we call add and remove listeners explicitly in this componentDidMount to ensure\r\n        // the listeners will be added accordingly to the Forums state.\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    /**\r\n     * Add and remove listeners accordingly to the Forums state\r\n     */\r\n    addAndRemoveListeners = () => {\r\n        const {\r\n            forums,\r\n            forumsLoaded,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n            forumThreadsLoaded,\r\n\r\n            forumThreadSelected,\r\n            forumThreadReplies,\r\n            forumThreadRepliesLoaded,\r\n\r\n            startListeningForForumsChanged,\r\n            startListeningForThreadsChanged,\r\n            stopListeningForThreadsChanged,\r\n            startListeningForThreadRepliesChanged,\r\n            stopListeningForThreadRepliesChanged\r\n        } = this.props;\r\n\r\n        // forums have been loaded\r\n        if (forums && forumsLoaded) {\r\n            startListeningForForumsChanged();\r\n        }\r\n\r\n        // if the user is viewing threads of a particular forum\r\n        // and all the threads have been loaded\r\n        if (forumSelected && forumThreads && forumThreadsLoaded) {\r\n            startListeningForThreadsChanged();\r\n        }\r\n\r\n        // remove threads listener when the user is not viewing the threads\r\n        if (!forumSelected && !forumThreadsLoaded) {\r\n            stopListeningForThreadsChanged();\r\n        }\r\n\r\n        // if the user is viewing the replies within a particular thread\r\n        // and all replies have been loaded\r\n        if (forumThreadSelected && forumThreadReplies && forumThreadRepliesLoaded) {\r\n            startListeningForThreadRepliesChanged();\r\n        }\r\n\r\n        // remove replies listener when the user is not viewing the replies\r\n        if (!forumThreadSelected && !forumThreadRepliesLoaded) {\r\n            stopListeningForThreadRepliesChanged();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render content of the Forums tab\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderContent = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n            modeForums,\r\n\r\n            forums,\r\n\r\n            forumsSortedMode,\r\n            forumsLoadMode,\r\n\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            toggleCreateNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        switch (modeForums) {\r\n            case MODE_FORUMS_MAIN: {\r\n\r\n                let sortedForums = [...forums];\r\n\r\n                if (forumsSortedMode === SORT_BY_CURRENT_USER) {\r\n                    sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                    sortedForums.sort((forum1, forum2) => {\r\n                        return (forum2.dateCreated - forum1.dateCreated)\r\n                    });\r\n                }\r\n\r\n                return (\r\n                    <FlexView\r\n                        column\r\n                    >\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            color=\"textSecondary\"\r\n                            align=\"left\"\r\n                        >\r\n                            Forums are made up of individual discussion threads that can be organised around a\r\n                            particular subject.\r\n                            Create forums to organise discussions.\r\n                            <br/>\r\n                            <u>\r\n                                Note that all forums are visible across the Invest West network.\r\n                            </u>\r\n                        </Typography>\r\n                        <FlexView\r\n                            marginTop={35}\r\n                            marginBottom={35}\r\n                        >\r\n                            <Button\r\n                                color=\"primary\"\r\n                                variant=\"outlined\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                onClick={() => toggleCreateNewForum(true, null)}\r\n                            >\r\n                                <AddIcon\r\n                                    fontSize=\"small\"\r\n                                    style={{\r\n                                        marginRight: 10\r\n                                    }}\r\n                                />\r\n                                Create forum\r\n                            </Button>\r\n                        </FlexView>\r\n\r\n                        {/** Filters */}\r\n                        <Container\r\n                            fluid\r\n                            style={{\r\n                                padding: 0,\r\n                                marginBottom: 40\r\n                            }}\r\n                        >\r\n                            <Row>\r\n                                {\r\n                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                    && currentUser.superAdmin\r\n                                        ?\r\n                                        <Col\r\n                                            xs={12}\r\n                                            sm={12}\r\n                                            md={4}\r\n                                            lg={2}\r\n                                        >\r\n                                            <FlexView\r\n                                                column\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"body2\"\r\n                                                    align=\"left\"\r\n                                                    style={{\r\n                                                        marginBottom: 4\r\n                                                    }}\r\n                                                >\r\n                                                    Mode\r\n                                                </Typography>\r\n                                                <Paper>\r\n                                                    <FormControl\r\n                                                        fullWidth\r\n                                                    >\r\n                                                        <Select\r\n                                                            value={forumsLoadMode}\r\n                                                            onChange={handleForumsInputChanged}\r\n                                                            margin=\"dense\"\r\n                                                            input={\r\n                                                                <OutlinedInput\r\n                                                                    labelWidth={0}\r\n                                                                    name=\"forumsLoadMode\"\r\n                                                                />\r\n                                                            }\r\n                                                        >\r\n                                                            <MenuItem\r\n                                                                value={realtimeDBUtils.LOAD_LIVE_FORUMS}\r\n                                                            >\r\n                                                                Live forums\r\n                                                            </MenuItem>\r\n                                                            <MenuItem\r\n                                                                value={realtimeDBUtils.LOAD_DELETED_FORUMS}\r\n                                                            >\r\n                                                                Deleted forums\r\n                                                            </MenuItem>\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Paper>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        :\r\n                                        null\r\n                                }\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={4}\r\n                                    lg={2}\r\n                                >\r\n                                    <FlexView\r\n                                        column\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            align=\"left\"\r\n                                            style={{\r\n                                                marginBottom: 4\r\n                                            }}\r\n                                        >\r\n                                            Sort by\r\n                                        </Typography>\r\n                                        <Paper>\r\n                                            <FormControl\r\n                                                fullWidth\r\n                                            >\r\n                                                <Select\r\n                                                    value={forumsSortedMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput\r\n                                                            labelWidth={0}\r\n                                                            name=\"forumsSortedMode\"\r\n                                                        />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem\r\n                                                        value={SORT_BY_LAST}\r\n                                                    >\r\n                                                        Newest\r\n                                                    </MenuItem>\r\n                                                    <MenuItem\r\n                                                        value={SORT_BY_CURRENT_USER}\r\n                                                    >\r\n                                                        Mine\r\n                                                    </MenuItem>\r\n                                                    <MenuItem\r\n                                                        value={SORT_BY_OLDEST}\r\n                                                    >\r\n                                                        Oldest\r\n                                                    </MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n\r\n                        {/** Forums table */}\r\n                        <Paper\r\n                            style={{\r\n                                overflowX: \"auto\"\r\n                            }}\r\n                        >\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography\r\n                                                    align=\"left\"\r\n                                                    variant=\"body2\"\r\n                                                    className={css(sharedStyles.white_text)}\r\n                                                >\r\n                                                    <b>Date</b>\r\n                                                </Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography\r\n                                                    align=\"left\"\r\n                                                    variant=\"body2\"\r\n                                                    className={css(sharedStyles.white_text)}\r\n                                                >\r\n                                                    <b>Forum</b>\r\n                                                </Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography\r\n                                                    align=\"left\"\r\n                                                    variant=\"body2\"\r\n                                                    className={css(sharedStyles.white_text)}\r\n                                                >\r\n                                                    <b>Description</b>\r\n                                                </Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography\r\n                                                    align=\"left\"\r\n                                                    variant=\"body2\"\r\n                                                    className={css(sharedStyles.white_text)}\r\n                                                >\r\n                                                    <b>Author</b>\r\n                                                </Typography>\r\n                                            }\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {\r\n                                        this.renderForums()\r\n                                    }\r\n                                </TableBody>\r\n                                <TableFooter>\r\n                                    <TableRow>\r\n                                        <TablePagination\r\n                                            style={{\r\n                                                backgroundColor: colors.blue_gray_50\r\n                                            }}\r\n                                            rowsPerPageOptions={[5, 20, 50]}\r\n                                            count={sortedForums.length}\r\n                                            rowsPerPage={forumsTableRowsPerPage}\r\n                                            page={forumsTablePage}\r\n                                            backIconButtonProps={{\r\n                                                'aria-label': 'Previous Page',\r\n                                            }}\r\n                                            nextIconButtonProps={{\r\n                                                'aria-label': 'Next Page',\r\n                                            }}\r\n                                            SelectProps={{\r\n                                                native: true,\r\n                                            }}\r\n                                            onChangePage={this.tableChangePage('forums')}\r\n                                            onChangeRowsPerPage={this.tableChangeRowsPerPage('forums')}\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableFooter>\r\n                            </Table>\r\n                        </Paper>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            case MODE_CREATE_FORUM:\r\n                return (\r\n                    <CreateForum/>\r\n                );\r\n\r\n            case MODE_VIEW_FORUM:\r\n                return (\r\n                    <IndividualForum/>\r\n                );\r\n\r\n            case MODE_CREATE_THREAD:\r\n                return (\r\n                    <CreateThread/>\r\n                );\r\n\r\n            case MODE_VIEW_THREAD:\r\n                return (\r\n                    <IndividualThread/>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render forums table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderForums = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n\r\n            forums,\r\n            forumsLoaded,\r\n            forumsSortedMode,\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            clickOnAParticularForum,\r\n            deleteForum,\r\n            toggleCreateNewForum\r\n        } = this.props;\r\n\r\n        if (!forumsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell\r\n                        colSpan={4}\r\n                    >\r\n                        <FlexView\r\n                            hAlignContent=\"center\"\r\n                            marginTop={20}\r\n                            marginBottom={20}\r\n                        >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedForums = [];\r\n\r\n        switch (forumsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                sortedForums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum1.dateCreated - forum2.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedForums.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell\r\n                        colSpan={4}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            align=\"center\"\r\n                            style={{\r\n                                marginTop: 20,\r\n                                marginBottom: 20\r\n                            }}\r\n                        >\r\n                            No forums created.\r\n                        </Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedForums\r\n                .slice(forumsTablePage * forumsTableRowsPerPage, forumsTablePage * forumsTableRowsPerPage + forumsTableRowsPerPage)\r\n                .map(forum => (\r\n                        <ForumRow\r\n                            currentUser={currentUser}\r\n                            key={forum.id}\r\n                            forum={forum}\r\n                            onForumClick={clickOnAParticularForum}\r\n                            deleteForum={deleteForum}\r\n                            toggleEditForum={toggleCreateNewForum}\r\n                        />\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 30\r\n                }}\r\n            >\r\n                {\r\n                    this.renderContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Forums);\r\n\r\n\r\n/**\r\n * Forum row component ------------------------------------------------------------------------------------------------------------------\r\n */\r\nclass ForumRow extends Component {\r\n\r\n    onForumClick = forum => {\r\n        this.props.onForumClick(forum);\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            currentUser,\r\n            forum,\r\n\r\n            deleteForum,\r\n            toggleEditForum\r\n        } = this.props;\r\n\r\n        return (\r\n            <TableRow\r\n                hover\r\n            >\r\n                <TableCell>\r\n                    <Typography\r\n                        align=\"left\"\r\n                        variant=\"body2\"\r\n                    >\r\n                        {utils.dateTimeInReadableFormat(forum.dateCreated)}\r\n                    </Typography>\r\n                </TableCell>\r\n                <TableCell\r\n                    style={{\r\n                        maxWidth: 400\r\n                    }}\r\n                >\r\n                    <FlexView\r\n                        column\r\n                        hAlignContent=\"left\"\r\n                    >\r\n                        <ButtonBase\r\n                            onClick={() => this.onForumClick(forum)}\r\n                        >\r\n                            <Typography\r\n                                align=\"left\"\r\n                                variant=\"body2\"\r\n                                color=\"primary\"\r\n                                noWrap\r\n                            >\r\n                                {forum.name}\r\n                            </Typography>\r\n                        </ButtonBase>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                            && (\r\n                                !forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            )\r\n                                ?\r\n                                <FlexView\r\n                                    marginTop={12}\r\n                                >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"secondary\"\r\n                                        onClick={() => deleteForum(forum.id)}\r\n                                        style={{\r\n                                            marginRight: 10\r\n                                        }}\r\n                                    >\r\n                                        Delete\r\n                                        <DeleteIcon\r\n                                            fontSize=\"small\"\r\n                                            style={{\r\n                                                marginLeft: 6\r\n                                            }}\r\n                                        />\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleEditForum(true, JSON.parse(JSON.stringify(forum)))}\r\n                                    >\r\n                                        Edit\r\n                                        <EditIcon\r\n                                            fontSize=\"small\"\r\n                                            style={{\r\n                                                marginLeft: 6\r\n                                            }}\r\n                                        />\r\n                                    </Button>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                </TableCell>\r\n                <TableCell\r\n                    style={{\r\n                        maxWidth: 400\r\n                    }}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        align=\"left\"\r\n                        noWrap\r\n                    >\r\n                        {forum.description}\r\n                    </Typography>\r\n                </TableCell>\r\n                <TableCell\r\n                    style={{\r\n                        maxWidth: 200\r\n                    }}\r\n                >\r\n                    <Typography\r\n                        align=\"left\"\r\n                        variant=\"body2\"\r\n                        noWrap\r\n                    >\r\n                        {\r\n                            forum.author.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // normal users\r\n                                `${forum.author.firstName} ${forum.author.lastName}`\r\n                                :\r\n                                forum.author.superAdmin\r\n                                    ?\r\n                                    // super admins\r\n                                    \"Invest West Super Admin\"\r\n                                    :\r\n                                    // group admins\r\n                                    `${forum.author.groupDetails.displayName} Admin`\r\n                        }\r\n                    </Typography>\r\n                </TableCell>\r\n            </TableRow>\r\n        )\r\n    }\r\n}\r\n","import {\r\n    MODE_CREATE_FORUM,\r\n    MODE_CREATE_THREAD,\r\n    MODE_FORUMS_MAIN,\r\n    MODE_VIEW_FORUM,\r\n    MODE_VIEW_THREAD,\r\n    SORT_BY_LAST\r\n} from '../../shared-components/forums/Forums';\r\nimport * as forumsActions from '../actions/forumsActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\n\r\nconst initState = {\r\n    modeForums: MODE_FORUMS_MAIN,\r\n\r\n    forumsSortedMode: SORT_BY_LAST,\r\n    forumsLoadMode: realtimeDBUtils.LOAD_LIVE_FORUMS,\r\n\r\n    threadsLoadMode: realtimeDBUtils.LOAD_LIVE_THREADS,\r\n    threadsSortedMode: SORT_BY_LAST,\r\n\r\n    forums: [],\r\n    forumsLoaded: false,\r\n\r\n    forumsTablePage: 0,\r\n    forumsTableRowsPerPage: 5,\r\n\r\n    forumSelected: null,\r\n    forumThreads: [],\r\n    forumThreadsLoaded: false,\r\n\r\n    forumThreadSelected: null,\r\n    forumThreadReplies: [],\r\n    forumThreadRepliesLoaded: false,\r\n\r\n    threadsTablePage: 0,\r\n    threadsTableRowsPerPage: 5,\r\n\r\n    createForumName: '',\r\n    createForumDesc: '',\r\n    createForumAuthor: null,\r\n    createForumError: false,\r\n    forumEdited: null,\r\n\r\n    createThreadName: '',\r\n    createThreadBriefDesc: '',\r\n    createThreadMessage: {ops: []},\r\n    createThreadError: false,\r\n    threadEdited: null,\r\n\r\n    threadInReplyMode: false,\r\n    threadReplyEdited: null,\r\n    threadReplySubject: '',\r\n    threadReplyMessage: {ops: []},\r\n    createThreadReplyError: false\r\n};\r\n\r\nconst forumsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case forumsActions.GO_BACK_TO_FORUMS_MAIN:\r\n            return {\r\n                ...initState,\r\n                forums: state.forums,\r\n                forumsLoaded: state.forumsLoaded,\r\n                forumsSortedMode: state.forumsSortedMode,\r\n                forumsLoadMode: state.forumsLoadMode,\r\n\r\n                forumsTablePage: state.forumsTablePage,\r\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\r\n            };\r\n        case forumsActions.LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [],\r\n                forumsLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [...action.forums],\r\n                forumsLoaded: true\r\n            };\r\n        case forumsActions.ERROR_LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [],\r\n                forumsLoaded: true\r\n            };\r\n        case forumsActions.TOGGLE_CREATE_NEW_FORUM:\r\n            return {\r\n                ...state,\r\n                modeForums: action.open\r\n                    ?\r\n                    MODE_CREATE_FORUM\r\n                    :\r\n                    MODE_FORUMS_MAIN\r\n                ,\r\n                forumEdited: action.forumEdited\r\n                    ?\r\n                    JSON.parse(JSON.stringify(action.forumEdited))\r\n                    :\r\n                    null\r\n                ,\r\n                createForumName:\r\n                    action.forumEdited\r\n                        ?\r\n                        action.forumEdited.name\r\n                        :\r\n                        ''\r\n                ,\r\n                createForumDesc:\r\n                    action.forumEdited\r\n                        ?\r\n                        action.forumEdited.description\r\n                        :\r\n                        ''\r\n                ,\r\n                createForumError: false,\r\n                createForumAuthor: null\r\n            };\r\n        case forumsActions.ERROR_CREATING_NEW_FORUM:\r\n            return {\r\n                ...state,\r\n                createForumError: true\r\n            };\r\n        case forumsActions.FORUMS_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case forumsActions.LOADING_THREADS_IN_A_FORUM:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_FORUM,\r\n                forumSelected: JSON.parse(JSON.stringify(action.forumSelected)),\r\n                forumThreadsLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_THREADS_IN_A_FORUM:\r\n            return {\r\n                ...state,\r\n                forumThreads: [...action.threads],\r\n                forumThreadsLoaded: true\r\n            };\r\n        case forumsActions.GO_BACK_TO_FORUMS_LIST:\r\n            return {\r\n                ...initState,\r\n                forums: state.forums,\r\n                forumsLoaded: state.forumsLoaded,\r\n                forumsSortedMode: state.forumsSortedMode,\r\n                forumsLoadMode: state.forumsLoadMode,\r\n\r\n                forumsTablePage: state.forumsTablePage,\r\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\r\n            };\r\n        case forumsActions.TOGGLE_CREATE_NEW_THREAD:\r\n            return {\r\n                ...state,\r\n                modeForums: action.open\r\n                    ?\r\n                    MODE_CREATE_THREAD\r\n                    :\r\n                    MODE_VIEW_FORUM\r\n                ,\r\n                threadEdited: action.threadEdited\r\n                    ?\r\n                    JSON.parse(JSON.stringify(action.threadEdited))\r\n                    :\r\n                    null\r\n                ,\r\n                createThreadName: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.name\r\n                    :\r\n                    ''\r\n                ,\r\n                createThreadBriefDesc: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.description\r\n                    :\r\n                    ''\r\n                ,\r\n                createThreadMessage: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.message\r\n                    :\r\n                    {ops: []}\r\n                ,\r\n                createThreadError: false\r\n            };\r\n        case forumsActions.ERROR_CREATING_NEW_THREAD:\r\n            return {\r\n                ...state,\r\n                createThreadError: true\r\n            };\r\n        case forumsActions.LOADING_REPLIES_IN_A_THREAD:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_THREAD,\r\n                forumThreadSelected: JSON.parse(JSON.stringify(action.threadSelected)),\r\n                forumThreadRepliesLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_REPLIES_IN_A_THREAD:\r\n            return {\r\n                ...state,\r\n                forumThreadReplies: [...action.replies],\r\n                forumThreadRepliesLoaded: true\r\n            };\r\n        case forumsActions.GO_BACK_TO_THREADS_LIST:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_FORUM,\r\n                forumThreadSelected: null,\r\n                forumThreadReplies: [],\r\n                forumThreadRepliesLoaded: false,\r\n\r\n                threadInReplyMode: false,\r\n                threadReplyMessage: {ops: []}\r\n            };\r\n        case forumsActions.TOGGLE_THREAD_REPLY:\r\n            return {\r\n                ...state,\r\n                threadInReplyMode: action.open,\r\n                threadReplyEdited: JSON.parse(JSON.stringify(action.threadReplyEdited)),\r\n                threadReplySubject: action.open\r\n                    ?\r\n                    action.threadReplyEdited\r\n                        ?\r\n                        action.threadReplyEdited.subject\r\n                        :\r\n                        `RE: ${state.forumThreadSelected.name}`\r\n                    :\r\n                    ''\r\n                ,\r\n                threadReplyMessage: action.open\r\n                    ?\r\n                    action.threadReplyEdited\r\n                        ?\r\n                        action.threadReplyEdited.message\r\n                        :\r\n                        {ops: []}\r\n                    :\r\n                    {ops: []}\r\n                ,\r\n                createThreadReplyError: false\r\n            };\r\n        case forumsActions.ERROR_CREATING_THREAD_REPLY:\r\n            return {\r\n                ...state,\r\n                createThreadReplyError: true\r\n            };\r\n        case forumsActions.FORUMS_QUILL_CHANGED:\r\n            return {\r\n                ...state,\r\n                createThreadMessage: action.field === forumsActions.THREAD_CONTENT_QUILL ? action.quill : state.createThreadMessage,\r\n                threadReplyMessage: action.field === forumsActions.THREAD_REPLY_CONTENT_QUILL ? action.quill : state.threadReplyMessage\r\n            };\r\n        case forumsActions.FORUMS_CHANGED:\r\n            return {\r\n                ...state,\r\n                forums: [...action.forumsChanged]\r\n            };\r\n        case forumsActions.THREADS_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumThreads: [...action.threadsChanged]\r\n            };\r\n        case forumsActions.THREAD_REPLIES_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumThreadReplies: [...action.repliesChanged]\r\n            };\r\n        case forumsActions.MANAGE_FORUMS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumsTablePage: action.table === 'forums' ? action.newPage : state.forumsTablePage,\r\n                threadsTablePage: action.table === 'threads' ? action.newPage : state.threadsTablePage\r\n            };\r\n        case forumsActions.MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumsTableRowsPerPage: action.table === 'forums' ? action.value : state.forumsTableRowsPerPage,\r\n                threadsTableRowsPerPage: action.table === 'threads' ? action.value : state.threadsTableRowsPerPage,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default forumsReducer;","import * as notificationsActions from '../actions/notificationsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    notificationsAnchorEl: null,\r\n\r\n    notifications: [],\r\n    loadingNotifications: false,\r\n    notificationsLoaded: false\r\n};\r\n\r\nconst notificationsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case notificationsActions.TOGGLE_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                notificationsAnchorEl: action.notificationsAnchorEl\r\n            };\r\n        case notificationsActions.LOADING_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                loadingNotifications: true,\r\n                notificationsLoaded: false\r\n            };\r\n        case notificationsActions.FINISHED_LOADING_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                loadingNotifications: false,\r\n                notificationsLoaded: true,\r\n                notifications: [...action.notifications]\r\n            };\r\n        case notificationsActions.NOTIFICATIONS_LIST_CHANGED:\r\n            return {\r\n                ...state,\r\n                notifications: [...action.notifications]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default notificationsReducer;","import * as mediaQueryActions from '../actions/mediaQueryActions';\r\nimport * as dashboardSidebarActions from '../actions/dashboardSidebarActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {MediaQueryEvents} from \"../actions/mediaQueryActions\";\r\n\r\nconst initState = {\r\n    sidebarDocked: mediaQueryActions.laptopScreen.matches || mediaQueryActions.desktopScreen.matches,\r\n    sidebarOpen: false\r\n};\r\n\r\nconst dashboardSidebarReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case dashboardSidebarActions.TOGGLE_SIDEBAR:\r\n            return {\r\n                ...state,\r\n                sidebarDocked: action.hasOwnProperty('sidebarDocked') ? action.sidebarDocked : state.sidebarDocked,\r\n                sidebarOpen: action.sidebarOpen\r\n            };\r\n        case MediaQueryEvents.MediaQueryChanged:\r\n            return {\r\n                ...state,\r\n                sidebarDocked:\r\n                    action.name === 'isLaptop' || action.name === 'isDesktop'\r\n                        ?\r\n                        action.value\r\n                        :\r\n                        state.sidebarDocked\r\n                ,\r\n                sidebarOpen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default dashboardSidebarReducer;","import {\r\n    desktopScreen,\r\n    laptopScreen,\r\n    MediaQueryAction,\r\n    MediaQueryEvents,\r\n    minHeightScreen,\r\n    mobileScreen,\r\n    tabletScreen\r\n} from \"../actions/mediaQueryActions\";\r\n\r\nexport interface MediaQueryState {\r\n    isMobile: boolean;\r\n    isTablet: boolean;\r\n    isLaptop: boolean;\r\n    isDesktop: boolean;\r\n    minHeightScreen: boolean;\r\n}\r\n\r\nconst initState: MediaQueryState = {\r\n    isMobile: mobileScreen.matches,\r\n    isTablet: tabletScreen.matches,\r\n    isLaptop: laptopScreen.matches,\r\n    isDesktop: desktopScreen.matches,\r\n    minHeightScreen: minHeightScreen.matches\r\n};\r\n\r\nconst mediaQueryReducer = (state = initState, action: MediaQueryAction) => {\r\n    if (action.type === MediaQueryEvents.MediaQueryChanged) {\r\n        return {\r\n            ...state,\r\n            [action.name]: action.value\r\n        };\r\n    } else {\r\n        return state;\r\n    }\r\n};\r\n\r\nexport default mediaQueryReducer;","import * as superAdminSettingsActions from '../actions/superAdminSettingsActions';\r\nimport * as clubAttributesActions from '../actions/clubAttributesActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nconst initState = {\r\n    clubAttributesEdited: null,\r\n\r\n    addNewPledgeFAQ: false,\r\n    addedPledgeQuestion: '',\r\n    addedPledgeAnswer: '',\r\n    expandedPledgeFAQ: null,\r\n    editExpandedPledgeFAQ: false,\r\n    editedPledgeQuestion: '',\r\n    editedPledgeAnswer: ''\r\n};\r\n\r\nconst superAdminSettingsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: JSON.parse(JSON.stringify(action.clubAttributes))\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: {\r\n                    ...state.clubAttributesEdited,\r\n                    [action.key]: action.value\r\n                },\r\n                expandedPledgeFAQ:\r\n                    !state.expandedPledgeFAQ\r\n                        ?\r\n                        null\r\n                        :\r\n                        action.key !== DB_CONST.PLEDGE_FAQS_CHILD\r\n                            ?\r\n                            state.expandedPledgeFAQ\r\n                            :\r\n                            !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\r\n                                ?\r\n                                null\r\n                                :\r\n                                !state.expandedPledgeFAQ\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id) === -1\r\n                                        ?\r\n                                        state.expandedPledgeFAQ\r\n                                        :\r\n                                        action.value[action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id)]\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INPUT_CHANGED:\r\n            const isPropertyOfClubAttributes = action.isPropertyOfClubAttributes;\r\n\r\n            if (isPropertyOfClubAttributes) {\r\n                return {\r\n                    ...state,\r\n                    clubAttributesEdited: {\r\n                        ...state.clubAttributesEdited,\r\n                        [action.name]: action.value\r\n                    }\r\n                };\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    [action.name]: action.value\r\n                };\r\n            }\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: {\r\n                    ...state.clubAttributesEdited,\r\n                    [action.fieldName]: action.value\r\n                }\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\r\n            return {\r\n                ...state,\r\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\r\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\r\n                addedPledgeQuestion: '',\r\n                addedPledgeAnswer: ''\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\r\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\r\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default superAdminSettingsReducer;","import * as groupAdminSettingsActions from \"../actions/groupAdminSettingsActions\";\r\nimport * as manageANIDFromParamsActions from \"../actions/manageGroupFromParamsActions\";\r\nimport * as authActions from \"../actions/authActions\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as utils from \"../../utils/utils\"\r\n\r\nconst initState = {\r\n    groupAttributesEdited: null,\r\n\r\n    website: '',\r\n    description: '',\r\n    primaryColor: '',\r\n    secondaryColor: '',\r\n\r\n    addNewPledgeFAQ: false,\r\n    addedPledgeQuestion: '',\r\n    addedPledgeAnswer: '',\r\n    expandedPledgeFAQ: null,\r\n    editExpandedPledgeFAQ: false,\r\n    editedPledgeQuestion: '',\r\n    editedPledgeAnswer: ''\r\n};\r\n\r\nconst groupAdminSettingsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED:\r\n\r\n            let groupSettings = JSON.parse(JSON.stringify(action.group.settings));\r\n            // if the defaultPitchExpiryDate property does not exist,\r\n            // assign it with an initial value\r\n            if (!groupSettings.hasOwnProperty('defaultPitchExpiryDate')) {\r\n                groupSettings.defaultPitchExpiryDate = utils.getDateWithDaysFurtherThanToday(1);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                groupAttributesEdited: groupSettings,\r\n                website:  action.group.hasOwnProperty('website') ? action.group.website : '',\r\n                description: action.group.hasOwnProperty('description') ? action.group.description : '',\r\n                primaryColor: action.group.settings.primaryColor,\r\n                secondaryColor: action.group.settings.secondaryColor\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CHANGED:\r\n            const isPropertyOfGroupAttributes = action.isPropertyOfGroupAttributes;\r\n\r\n            if (isPropertyOfGroupAttributes) {\r\n                return {\r\n                    ...state,\r\n                    groupAttributesEdited: {\r\n                        ...state.groupAttributesEdited,\r\n                        [action.name]: action.value\r\n                    }\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    [action.name]: action.value\r\n                };\r\n            }\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\r\n            if (action.key === 'settings') {\r\n                return {\r\n                    ...state,\r\n                    groupAttributesEdited: JSON.parse(JSON.stringify(action.value)),\r\n                    primaryColor: action.value.primaryColor,\r\n                    secondaryColor: action.value.secondaryColor,\r\n                    expandedPledgeFAQ:\r\n                        !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\r\n                            ?\r\n                            null\r\n                            :\r\n                            !state.expandedPledgeFAQ\r\n                                ?\r\n                                null\r\n                                :\r\n                                action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id) !== -1\r\n                                    ?\r\n                                    action.value[DB_CONST.PLEDGE_FAQS_CHILD][action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id)]\r\n                                    :\r\n                                    state.expandedPledgeFAQ\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    [action.key]: action.value\r\n                }\r\n            }\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\r\n            return {\r\n                ...state,\r\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\r\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\r\n                addedPledgeQuestion: '',\r\n                addedPledgeAnswer: ''\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\r\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\r\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR:\r\n            return {\r\n                ...state,\r\n                primaryColor: action.field === \"primaryColor\" ? action.color : state.primaryColor,\r\n                secondaryColor: action.field === \"secondaryColor\" ? action.color : state.secondaryColor\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default groupAdminSettingsReducer;","import * as legalDocumentsActions from '../actions/legalDocumentsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    userID: null,\r\n\r\n    legalDocuments: null,\r\n    legalDocumentsLoaded: false,\r\n    legalDocumentsBeingLoaded: false\r\n};\r\n\r\nconst legalDocumentsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT: {\r\n            return initState;\r\n        }\r\n        case legalDocumentsActions.LEGAL_DOCUMENTS_SET_USER:\r\n            return {\r\n                ...state,\r\n                userID: action.userID\r\n            };\r\n        case legalDocumentsActions.LOADING_LEGAL_DOCUMENTS:\r\n            return {\r\n                ...state,\r\n                legalDocuments: [],\r\n                legalDocumentsLoaded: false,\r\n                legalDocumentsBeingLoaded: true\r\n            };\r\n        case legalDocumentsActions.FINISHED_LOADING_LEGAL_DOCUMENTS:\r\n            return {\r\n                ...state,\r\n                legalDocuments: action.legalDocuments,\r\n                legalDocumentsLoaded: true,\r\n                legalDocumentsBeingLoaded: false\r\n            };\r\n        case legalDocumentsActions.LEGAL_DOCUMENTS_CHANGED: {\r\n            return {\r\n                ...state,\r\n                legalDocuments: action.legalDocuments\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default legalDocumentsReducer;\r\n\r\n","import * as invitedUsersActions from '../actions/invitedUsersActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {FILTER_GROUP_MEMBERS_ALL, FILTER_REGISTRATION_STATUS_ALL} from '../../pages/admin/components/InvitedUsers';\r\n\r\nconst initState = {\r\n    invitedUsers: [],\r\n    invitedUsersLoaded: false,\r\n    invitedUsersBeingLoaded: false,\r\n\r\n    invitedUsersPage: 0,\r\n    invitedUsersRowsPerPage: 5,\r\n\r\n    filterRegistrationStatus: FILTER_REGISTRATION_STATUS_ALL,\r\n    filterUserType: 0, // all user types\r\n    filterGroup: \"null\", // no group selected --> all\r\n    filterMembers: FILTER_GROUP_MEMBERS_ALL, // display all members (including home and foreign members) for group admins\r\n\r\n    invitedUserSearchText: '',\r\n    invitedUsersInSearchMode: false,\r\n\r\n    requestingCsv: false,\r\n\r\n    addingMembersFromOneGroupToAnotherGroup: false,\r\n\r\n    matchedInvitedUsers: []\r\n};\r\n\r\nconst invitedUsersReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case invitedUsersActions.LOADING_INVITED_USERS:\r\n            return {\r\n                ...state,\r\n                invitedUsers: [],\r\n                invitedUsersLoaded: false,\r\n                invitedUsersBeingLoaded: true\r\n            };\r\n        case invitedUsersActions.FINISHED_LOADING_INVITED_USERS:\r\n            return {\r\n                ...state,\r\n                invitedUsers: [...action.invitedUsers],\r\n                matchedInvitedUsers: [...action.invitedUsers],\r\n                invitedUsersLoaded: true,\r\n                invitedUsersBeingLoaded: false\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                invitedUsersInSearchMode: !state.invitedUsersInSearchMode,\r\n                invitedUserSearchText: state.invitedUsersInSearchMode ? '' : state.invitedUserSearchText,\r\n                invitedUsersPage: 0,\r\n                matchedInvitedUsers: action.matchedInvitedUsers\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_SEARCH_VARIABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value,\r\n                matchedInvitedUsers: action.matchedInvitedUsers,\r\n                invitedUsersPage: 0\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGE_PAGE:\r\n            return {\r\n                ...state,\r\n                invitedUsersPage: action.newPage\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGE_ROWS_PER_PAGE:\r\n            return {\r\n                ...state,\r\n                invitedUsersRowsPerPage: parseInt(action.rows, 10),\r\n                invitedUsersPage: 0\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGED:\r\n            return {\r\n                ...state,\r\n                invitedUsers: action.invitedUsers,\r\n                matchedInvitedUsers: action.matchedInvitedUsers\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_REQUESTING_CSV_STATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                requestingCsv: action.value\r\n            }\r\n        case invitedUsersActions.INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                addingMembersFromOneGroupToAnotherGroup: action.value\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default invitedUsersReducer;","import * as invitationDialogActions from '../actions/invitationDialogActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    SEND_INVITATION_NONE,\r\n    SEND_INVITATION_SUCCESS\r\n} from '../../pages/admin/components/InvitationDialog';\r\n\r\nconst initState = {\r\n    invitationDialogOpen: false,\r\n\r\n    title: DB_CONST.USER_TITLES[0],\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    userType: '',\r\n\r\n    sendButtonClick: false,\r\n    sendResult: SEND_INVITATION_NONE,\r\n    sendStatusExtraInfo: null\r\n};\r\n\r\nconst invitationDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case invitationDialogActions.TOGGLE_INVITATION_DIALOG:\r\n            return {\r\n                ...initState,\r\n                invitationDialogOpen: !state.invitationDialogOpen\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_SEND_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                sendButtonClick: true\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_SEND_RESULT_CHANGED:\r\n            return {\r\n                ...state,\r\n                sendResult: action.result,\r\n\r\n                title: action.result === SEND_INVITATION_SUCCESS ? DB_CONST.USER_TITLES[0] : state.title,\r\n                firstName: action.result === SEND_INVITATION_SUCCESS ? '' : state.firstName,\r\n                lastName: action.result === SEND_INVITATION_SUCCESS ? '' : state.lastName,\r\n                email: action.result === SEND_INVITATION_SUCCESS ? '' : state.email,\r\n                userType: action.result === SEND_INVITATION_SUCCESS ? '' : state.userType,\r\n\r\n                sendButtonClick: action.result === SEND_INVITATION_SUCCESS ? false : state.sendButtonClick,\r\n\r\n                sendStatusExtraInfo: action.extraInfo\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default invitationDialogReducer;","import * as addAngelNetworkDialogActions from '../actions/addAngelNetworkDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    ADD_STATUS_NONE,\r\n    ADD_STATUS_SUCCESSFULLY_ADDED,\r\n    UPLOAD_PLAIN_LOGO,\r\n    UPLOAD_NONE,\r\n    UPLOAD_LOGO_WITH_TEXT\r\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\n\r\nconst initState = {\r\n    addAngelNetworkDialogOpen: false,\r\n\r\n    angelNetworkName: '',\r\n    angelNetworkUsername: '',\r\n    email: '',\r\n    website: '',\r\n    primaryColor: '',\r\n    secondaryColor: '',\r\n\r\n    plainLogo: null,\r\n    loadingPlainLogo: false,\r\n    logoWithText: null,\r\n    loadingLogoWithText: false,\r\n\r\n    uploadMode: UPLOAD_NONE,\r\n    uploadProgress: 0,\r\n\r\n    imgUploadError: '',\r\n    imgUploadErrorSnackbarOpen: false,\r\n\r\n    addButtonClicked: false,\r\n    addResult: ADD_STATUS_NONE,\r\n};\r\n\r\nconst addAngelNetworkDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case addAngelNetworkDialogActions.TOGGLE_ADD_ANGEL_NETWORK_DIALOG:\r\n            return {\r\n                ...initState,\r\n                addAngelNetworkDialogOpen: !state.addAngelNetworkDialogOpen\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                addButtonClicked: true\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESULT_CHANGED:\r\n            return {\r\n                ...state,\r\n                addResult: action.result,\r\n\r\n                angelNetworkName: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkName,\r\n                angelNetworkUsername: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkUsername,\r\n                email: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.email,\r\n                primaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.primaryColor,\r\n                secondaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.secondaryColor,\r\n\r\n                plainLogo: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.plainLogo,\r\n                logoWithText: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.logoWithText,\r\n\r\n                uploadMode: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? UPLOAD_NONE : action.hasOwnProperty('mode') ? action.mode : state.uploadMode,\r\n                uploadProgress: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? 0 : action.hasOwnProperty('progress') ? action.progress : state.uploadProgress,\r\n\r\n                addButtonClicked: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? false : state.addButtonClicked\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE:\r\n            return {\r\n                ...state,\r\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? null : state.plainLogo,\r\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? true : state.loadingPlainLogo,\r\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? null : state.logoWithText,\r\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? true : state.loadingLogoWithText\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED:\r\n            return {\r\n                ...state,\r\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? action.blob : state.plainLogo,\r\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? false : state.loadingPlainLogo,\r\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? action.blob : state.logoWithText,\r\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? false : state.loadingLogoWithText\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR:\r\n            return {\r\n                ...state,\r\n                imgUploadError: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n                imgUploadErrorSnackbarOpen: true\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED:\r\n            return {\r\n                ...state,\r\n                imgUploadError: ''\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                imgUploadErrorSnackbarOpen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default addAngelNetworkDialogReducer;","import * as manageANIDFromParamsActions from '../actions/manageGroupFromParamsActions';\r\n\r\nconst initState = {\r\n    groupUserName: null,\r\n    anid: null,\r\n\r\n    groupProperties: null,\r\n    groupPropertiesLoaded: false,\r\n    angelNetworkBeingLoaded: false,\r\n\r\n    expectedPath: null,\r\n    currentPath: null,\r\n    shouldLoadOtherData: false\r\n};\r\n\r\nconst manageGroupFromParamsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case manageANIDFromParamsActions.SET_GROUP_USER_NAME_FROM_PARAMS:\r\n            return {\r\n                ...state,\r\n                groupUserName: action.groupUserName,\r\n                groupProperties: null,\r\n                groupPropertiesLoaded: false,\r\n                angelNetworkBeingLoaded: false\r\n            };\r\n        case manageANIDFromParamsActions.SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING:\r\n            return {\r\n                ...state,\r\n                expectedPath: action.expectedPath,\r\n                currentPath: action.currentPath\r\n            };\r\n        case manageANIDFromParamsActions.LOADING_ANGEL_NETWORK:\r\n            return {\r\n                ...state,\r\n                groupProperties: null,\r\n                groupPropertiesLoaded: false,\r\n                angelNetworkBeingLoaded: true,\r\n                shouldLoadOtherData: false\r\n            };\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_LOADED:\r\n            return {\r\n                ...state,\r\n                groupProperties: JSON.parse(JSON.stringify(action.angelNetwork)),\r\n                groupPropertiesLoaded: true,\r\n                angelNetworkBeingLoaded: false,\r\n                shouldLoadOtherData: action.shouldLoadOtherData\r\n            };\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupProperties: {\r\n                    ...state.groupProperties,\r\n                    [action.key]: action.value\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageGroupFromParamsReducer;\r\n\r\n","import * as investorSelfCertificationAgreementsActions from '../actions/investorSelfCertificationAgreementsActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as FIRBASE_CONST from '../../firebase/databaseConsts';\r\n\r\nconst initState = {\r\n    userID: null,\r\n\r\n    // type of agreement\r\n    statementType: FIRBASE_CONST.SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT,\r\n    // used to control checkboxes if the user has not done this before\r\n    checkBox1Ticked: false,\r\n    checkBox2Ticked: false,\r\n    checkBox3Ticked: false,\r\n\r\n    investorSelfCertificationAgreement: null,\r\n    investorSelfCertificationAgreementLoaded: false,\r\n    investorSelfCertificationAgreementBeingLoaded: false\r\n};\r\n\r\nconst investorSelfCertificationAgreementsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER:\r\n            return {\r\n                ...initState,\r\n                userID: action.uid\r\n            };\r\n        case investorSelfCertificationAgreementsActions.LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: null,\r\n                investorSelfCertificationAgreementLoaded: false,\r\n                investorSelfCertificationAgreementBeingLoaded: true\r\n            };\r\n        case investorSelfCertificationAgreementsActions.FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: JSON.parse(JSON.stringify(action.result)),\r\n                investorSelfCertificationAgreementLoaded: true,\r\n                investorSelfCertificationAgreementBeingLoaded: false\r\n            };\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.checked\r\n            };\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED:\r\n            return {\r\n                ...state,\r\n                statementType: action.event.target.value,\r\n                checkBox1Ticked: false,\r\n                checkBox2Ticked: false\r\n            };\r\n        case investorSelfCertificationAgreementsActions.UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: JSON.parse(JSON.stringify(action.agreement))\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default investorSelfCertificationAgreementsReducer;","import * as angelNetworksActions from '../actions/angelNetworksActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    angelNetworks: [],\r\n    loadingAngelNetworks: false,\r\n    angelNetworksLoaded: false,\r\n    page: 0,\r\n    rowsPerPage: 5,\r\n\r\n    searchText: '', // string typed to search angel networks by name\r\n    inSearchMode: false, // when the search button is clicked --> show X icon to exit search mode\r\n    matchedAngelNetworks: [] // angel networks that match\r\n};\r\n\r\nconst angelNetworksReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case angelNetworksActions.LOADING_ANGEL_NETWORKS:\r\n            return {\r\n                ...state,\r\n                loadingAngelNetworks: true,\r\n                angelNetworksLoaded: false,\r\n                angelNetworks: []\r\n            };\r\n        case angelNetworksActions.FINISHED_LOADING_ANGEL_NETWORKS:\r\n            return {\r\n                ...state,\r\n                loadingAngelNetworks: false,\r\n                angelNetworksLoaded: true,\r\n                angelNetworks: action.hasOwnProperty('angelNetworks') ? [...action.angelNetworks] : []\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\r\n            };\r\n        case angelNetworksActions.TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_IN_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                angelNetworks: [...action.angelNetworks]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default angelNetworksReducer;","import * as manageJoinRequestsActions from '../actions/manageJoinRequestsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    joinRequests: [],\r\n    loadingJoinRequests: false,\r\n    joinRequestsLoaded: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n    matchedJoinRequests: [],\r\n\r\n    page: 0,\r\n    rowsPerPage: 5\r\n};\r\n\r\nconst manageJoinRequestsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS:\r\n            return {\r\n                ...state,\r\n                joinRequests: [],\r\n                loadingJoinRequests: true,\r\n                joinRequestsLoaded: false\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS:\r\n            return {\r\n                ...state,\r\n                joinRequests: [...action.joinRequests],\r\n                loadingJoinRequests: false,\r\n                joinRequestsLoaded: true\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedJoinRequests: action.matchedJoinRequests\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedJoinRequests: action.matchedJoinRequests\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_CHANGED:\r\n            return {\r\n                ...state,\r\n                joinRequests: [...action.joinRequests]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageJoinRequestsReducer;","import * as pledgesTableActions from '../actions/pledgesTableActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    project: null,\r\n\r\n    pledges: [],\r\n    pledgesLoaded: false,\r\n    loadingPledges: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n    matchedPledges: [],\r\n\r\n    page: 0,\r\n    rowsPerPage: 10\r\n};\r\n\r\nconst pledgesTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_SET_PROJECT:\r\n            return {\r\n                ...initState,\r\n                project: JSON.parse(JSON.stringify(action.project))\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_LOADING_PLEDGES:\r\n            return {\r\n                ...state,\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n                loadingPledges: true\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES:\r\n            return {\r\n                ...state,\r\n                pledges: [...action.pledges],\r\n                pledgesLoaded: true,\r\n                loadingPledges: false\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value,\r\n                page: 0\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedPledges: [...action.matchedPledges]\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedPledges: [...action.matchedPledges]\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED:\r\n            return {\r\n                ...state,\r\n                pledges: [...action.pledges]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default pledgesTableReducer;","import * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\r\n\r\nconst initState = {\r\n    open: false,\r\n    message: '',\r\n    color: '', // primary or error\r\n    position: '' // top or bottom\r\n};\r\n\r\nconst feedbackSnackbarReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case feedbackSnackbarActions.CLOSE_FEEDBACK_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                open: false\r\n            };\r\n        case feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT:\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                message: action.message,\r\n                color: action.color,\r\n                position: action.position\r\n            };\r\n        case feedbackSnackbarActions.RESET_STATES_WHEN_SNACKBAR_CLOSED:\r\n            return {\r\n                ...initState\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default feedbackSnackbarReducer;","import * as activitiesTableActions from '../actions/activitiesTableActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    tableUser: null,\r\n\r\n    activities: [],\r\n    activitiesLoaded: false,\r\n    loadingActivities: false,\r\n\r\n    page: 0,\r\n    rowsPerPage: 10\r\n};\r\n\r\nconst activitiesTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case activitiesTableActions.ACTIVITIES_TABLE_SET_TABLE_USER:\r\n            return {\r\n                ...initState,\r\n                tableUser: JSON.parse(JSON.stringify(action.user))\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_LOADING_ACTIVITIES:\r\n            return {\r\n                ...state,\r\n                activities: [],\r\n                activitiesLoaded: false,\r\n                loadingActivities: true\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES:\r\n            return {\r\n                ...state,\r\n                activities: [...action.activities],\r\n                activitiesLoaded: true,\r\n                loadingActivities: false\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_IN_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                activities: [...action.activities]\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default activitiesTableReducer;","import * as manageJSONCompareChangesDialogActions from '../actions/manageJSONCompareChangesDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    dialogOpen: false,\r\n    jsonBefore: {},\r\n    jsonAfter: {}\r\n};\r\n\r\nconst manageJSONCompareChangesDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_SET_DATA:\r\n            return {\r\n                ...state,\r\n                dialogOpen: true,\r\n                jsonBefore: JSON.parse(JSON.stringify(action.jsonBefore)),\r\n                jsonAfter: JSON.parse(JSON.stringify(action.jsonAfter))\r\n            };\r\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_RESET_DATA:\r\n            return {\r\n                ...state,\r\n                dialogOpen: false,\r\n                jsonBefore: {},\r\n                jsonAfter: {}\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageJSONCompareChangesDialogReducer;","import * as groupAdminsTableActions from '../actions/groupAdminsTableActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {ADD_NEW_GROUP_ADMIN_STATUS_NONE} from '../../pages/admin/components/GroupAdminsTable';\r\n\r\nconst initState = {\r\n    tableGroup: null,\r\n\r\n    groupAdmins: [],\r\n    groupAdminsLoaded: false,\r\n    loadingGroupAdmins: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n\r\n    page: 0,\r\n    rowsPerPage: 10,\r\n\r\n    addNewGroupAdminDialogOpen: false,\r\n    newGroupAdminEmail: '',\r\n    addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\r\n};\r\n\r\nconst groupAdminsTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_SET_GROUP:\r\n            return {\r\n                ...initState,\r\n                tableGroup: JSON.parse(JSON.stringify(action.group))\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [],\r\n                groupAdminsLoaded: false,\r\n                loadingGroupAdmins: true\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [...action.groupAdmins],\r\n                groupAdminsLoaded: true,\r\n                loadingGroupAdmins: false\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.newPage\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                searchText: state.inSearchMode ? '' : state.searchText,\r\n                inSearchMode: !state.inSearchMode\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG:\r\n            return {\r\n                ...state,\r\n                addNewGroupAdminDialogOpen: !state.addNewGroupAdminDialogOpen,\r\n                newGroupAdminEmail: '',\r\n                addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [...action.groupAdmins]\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED:\r\n            return {\r\n                ...state,\r\n                addNewGroupAdminStatus: action.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default groupAdminsTableReducer;","import * as createPledgeDialogActions from '../actions/createPledgeDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as utils from '../../utils/utils';\r\nimport {CREATE_PLEDGE_STATUS_NONE} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\r\n\r\nconst initState = {\r\n    open: false,\r\n    project: null,\r\n    postMoneyValuation: '',\r\n    expiredDate: null,\r\n    extraNotes: '',\r\n    createStatus: CREATE_PLEDGE_STATUS_NONE\r\n};\r\n\r\nconst createPledgeDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createPledgeDialogActions.TOGGLE_CREATE_PLEDGE_DIALOG:\r\n            return {\r\n                ...initState,\r\n                open: !state.open\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_SET_PROJECT:\r\n            return {\r\n                ...state,\r\n                project: JSON.parse(JSON.stringify(action.project)),\r\n                postMoneyValuation:\r\n                    action.project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                        ?\r\n                        Number(action.project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                        :\r\n                        ''\r\n                ,\r\n                expiredDate: utils.getDateWithDaysFurtherThanToday(1),\r\n                extraNotes: ''\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                expiredDate:\r\n                    action.date && action.date === \"Invalid Date\"\r\n                        ?\r\n                        NaN\r\n                        :\r\n                        action.date === null\r\n                            ?\r\n                            null\r\n                            :\r\n                            action.date.getTime()\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED:\r\n            return {\r\n                ...state,\r\n                createStatus: action.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default createPledgeDialogReducer;","import * as selectProjectVisibilityActions from '../actions/selectProjectVisibilityActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    projectVisibilitySetting: -1,\r\n    project: null\r\n};\r\n\r\nconst selectProjectVisibilityReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT:\r\n            return {\r\n                ...initState,\r\n                project: JSON.parse(JSON.stringify(action.project))\r\n            };\r\n        case selectProjectVisibilityActions.HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default selectProjectVisibilityReducer;","import * as manageSystemGroupsActions from '../actions/manageSystemGroupsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    systemGroups: [],\r\n    loadingGroups: false,\r\n    groupsLoaded: false\r\n};\r\n\r\nconst manageSystemGroupsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageSystemGroupsActions.LOADING_SYSTEM_GROUPS:\r\n            return {\r\n                ...state,\r\n                systemGroups: [],\r\n                loadingGroups: true,\r\n                groupsLoaded: false\r\n            };\r\n        case manageSystemGroupsActions.FINISHED_LOADING_SYSTEM_GROUPS:\r\n            return {\r\n                ...state,\r\n                systemGroups: action.groups,\r\n                loadingGroups: false,\r\n                groupsLoaded: true\r\n            };\r\n        case manageSystemGroupsActions.SYSTEM_GROUPS_CHANGED:\r\n            return {\r\n                ...state,\r\n                systemGroups: action.groups\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemGroupsReducer;","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_MARKETING_PREFERENCES = 'LOADING_MARKETING_PREFERENCES';\r\nexport const FINISHED_LOADING_MARKETING_PREFERENCES = 'FINISHED_LOADING_MARKETING_PREFERENCES';\r\nexport const loadMarketingPreferences = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n            // do not allow group admins to load marketing preferences\r\n            if (!currentUser.superAdmin) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_MARKETING_PREFERENCES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadMarketingPreferences(\r\n                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                    ?\r\n                    null\r\n                    :\r\n                    currentUser.id\r\n            )\r\n            .then(marketingPreferences => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_MARKETING_PREFERENCES,\r\n                    marketingPreferences\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load marketing preferences.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}","import * as manageMarketingPreferencesActions from '../actions/manageMarketingPreferencesActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    marketingPreferences: [],\r\n    loadingMarketingPreferences: false,\r\n    marketingPreferencesLoaded: false\r\n};\r\n\r\nconst manageMarketingPreferencesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageMarketingPreferencesActions.LOADING_MARKETING_PREFERENCES:\r\n            return {\r\n                ...state,\r\n                marketingPreferences: [],\r\n                loadingMarketingPreferences: true,\r\n                marketingPreferencesLoaded: false\r\n            };\r\n        case manageMarketingPreferencesActions.FINISHED_LOADING_MARKETING_PREFERENCES:\r\n            return {\r\n                ...state,\r\n                marketingPreferences: JSON.parse(JSON.stringify(action.marketingPreferences)),\r\n                loadingMarketingPreferences: false,\r\n                marketingPreferencesLoaded: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageMarketingPreferencesReducer;","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as selectProjectVisibilityActions from \"../actions/selectProjectVisibilityActions\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport {\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n    PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n    PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n    STEP_ACCEPT_TERMS_AND_CONDITIONS,\r\n    STEP_PITCH_COVER,\r\n    STEP_PITCH_DECK,\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    STEP_PITCH_SUPPORTING_DOCUMENTS,\r\n    PITCH_COVER_FILE_TYPE_SELECTED,\r\n    PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n} from \"../../pages/create-project/CreateProject\";\r\nimport * as ROUTES from \"../../router/routes\";\r\n\r\nexport const CREATE_PROJECT_SET_COMPONENT_PROPS = \"CREATE_PROJECT_SET_COMPONENT_PROPS\";\r\nexport const setComponentContext = (context) => {\r\n    return {\r\n        type: CREATE_PROJECT_SET_COMPONENT_PROPS,\r\n        context\r\n    }\r\n}\r\n\r\nexport const CREATE_PROJECT_LOADING_DATA = \"CREATE_PROJECT_LOADING_DATA\";\r\nexport const CREATE_PROJECT_FINISHED_LOADING_DATA = \"CREATE_PROJECT_FINISHED_LOADING_DATA\";\r\n\r\nexport const CREATE_PROJECT_MODE_EDIT = 1;\r\nexport const CREATE_PROJECT_MODE_CREATE_NEW = 2;\r\n\r\n/**\r\n * Load data\r\n *\r\n * @param params\r\n * @returns {Promise<function(...[*]=)>}\r\n */\r\nexport const loadData = async (params) => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = getState().manageCreateProject;\r\n\r\n        if (!currentUser\r\n            ||\r\n            (currentUser && currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n                dispatch({\r\n                    type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                    error: \"Error happened.\"\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: CREATE_PROJECT_LOADING_DATA\r\n        });\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if ((currentUser.type === DB_CONST.TYPE_ADMIN && currentUser.anid === project.anid)\r\n                        && (groupProperties && groupProperties.anid === project.anid)\r\n                    ) {\r\n                        dispatch({\r\n                            type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                            project\r\n                        });\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        projectEdited: project,\r\n                        mode: CREATE_PROJECT_MODE_EDIT\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        error: error\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            dispatch({\r\n                type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                mode: CREATE_PROJECT_MODE_CREATE_NEW\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && (groupProperties && groupProperties.anid === currentUser.anid)\r\n            ) {\r\n                dispatch({\r\n                    type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                    project: null\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Navigate to the same page with active step saved\r\n * This will save the activeStep of the page, so when the user refreshes the page,\r\n * they can still continue with their previous step.\r\n *\r\n * @param activeStep\r\n * @param projectID\r\n */\r\nexport const navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const componentContext = getState().manageCreateProject.componentContext;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const handleMoveToNextStep = (params) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = getState().manageCreateProject;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiredDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            pitchPostMoneyValuation,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            hasRaisedMoneyBefore\r\n        } = getState().manageCreateProject.createNewPitch;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiredDate === null\r\n                    || pitchRaiseRequired.trim().length === 0\r\n                    || hasRaisedMoneyBefore.trim().length === 0\r\n                    || (hasRaisedMoneyBefore === \"true\" && pitchAmountRaisedToDate.trim().length === 0)) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiredDate)\r\n                    ||\r\n                    (pitchExpiredDate && (pitchExpiredDate < myUtils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                // if the user enters invalid value for the money, warn them\r\n                if ((hasRaisedMoneyBefore === \"true\" && !myUtils.getNumberFromInputString(pitchAmountRaisedToDate))\r\n                    || !myUtils.getNumberFromInputString(pitchRaiseRequired)\r\n                    || (pitchPostMoneyValuation.trim().length > 0 && !myUtils.getNumberFromInputString(pitchPostMoneyValuation))\r\n                ) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (pitchPresentationDocument.length === 0\r\n                        && pitchPresentationText.ops.length === 0\r\n                        && (\r\n                            !projectEdited.Pitch.presentationDocument\r\n                            ||\r\n                            (\r\n                                projectEdited.Pitch.presentationDocument\r\n                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                            )\r\n                        )\r\n                        && !projectEdited.Pitch.presentationText) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                    if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    }\r\n}\r\n\r\nlet draftProjectListener = null;\r\n\r\nexport const CREATE_PROJECT_DRAFT_PROJECT_CHANGED = \"CREATE_PROJECT_DRAFT_PROJECT_CHANGED\";\r\nexport const startListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const projectEdited = getState().manageCreateProject.projectEdited;\r\n\r\n        if (utils.isDraftProject(projectEdited)) {\r\n            if (!draftProjectListener) {\r\n                draftProjectListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                    .orderByKey()\r\n                    .equalTo(projectEdited.id);\r\n\r\n                draftProjectListener\r\n                    .on('child_changed', snapshot => {\r\n\r\n                        let project = snapshot.val();\r\n\r\n                        this.setState({\r\n                            projectEdited: Object.assign({}, project)\r\n                        });\r\n                        dispatch({\r\n                            type: CREATE_PROJECT_DRAFT_PROJECT_CHANGED,\r\n                            projectChanged: project\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (draftProjectListener) {\r\n            draftProjectListener.off('child_changed');\r\n            draftProjectListener = null;\r\n        }\r\n    }\r\n}","import * as createProjectActions from '../actions/createProjectActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    UPLOAD_NONE\r\n} from '../../pages/create-project/CreateProject';\r\n\r\nconst initState = {\r\n    componentContext: null,\r\n\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createNewPitch: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        // pitch sector\r\n        pitchSector: '-',\r\n        // pitch project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiredDate: null,\r\n\r\n        pitchAmountRaisedToDate: '',\r\n        pitchRaiseRequired: '',\r\n        pitchPostMoneyValuation: '',\r\n        pitchInvestorsCommitted: '',\r\n\r\n        hasRaisedMoneyBefore: '',\r\n\r\n        // pitch cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // pitch cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // pitch supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // pitch presentation file (user uploads a file for pitch presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // pitch presentation text (user uses the provided text editor to make pitch presentation)\r\n        pitchPresentationText: {ops: []},\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        snackbarErrorMessage: '',\r\n        errorSnackbarOpen: false,\r\n\r\n        acceptedTermsAndConditions: false,\r\n\r\n        projectID: null // set when project has been successfully published to pass to UploadDialog\r\n    }\r\n};\r\n\r\nconst createProjectReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createProjectActions.CREATE_PROJECT_SET_COMPONENT_PROPS:\r\n            return {\r\n                ...state,\r\n                componentContext: action.context\r\n            }\r\n        case createProjectActions.CREATE_PROJECT_LOADING_DATA:\r\n            return {\r\n                ...state,\r\n                requestToLoadData: false\r\n            };\r\n        case createProjectActions.CREATE_PROJECT_FINISHED_LOADING_DATA: {\r\n            if (action.hasOwnProperty('error')) {\r\n                return {\r\n                    ...state,\r\n                    projectEditedLoaded: true,\r\n                    projectIDToBeLoadedAfterSavingFirstTime: null\r\n                }\r\n            }\r\n            else {\r\n                // error\r\n                if (!action.hasOwnProperty('mode')) {\r\n                    return initState;\r\n                }\r\n\r\n                switch (action.mode) {\r\n                    case createProjectActions.CREATE_PROJECT_MODE_EDIT: {\r\n                        const project = JSON.parse(JSON.stringify(action.projectEdited));\r\n\r\n                        return {\r\n                            ...state,\r\n                            projectBeforeEdited: project,\r\n                            projectEdited: project,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                            createNewPitch: {\r\n                                ...state.createNewPitch,\r\n                                // pitch sector\r\n                                pitchSector:\r\n                                    project.hasOwnProperty('sector')\r\n                                        ?\r\n                                        project.sector\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                // pitch project name\r\n                                pitchProjectName:\r\n                                    project.hasOwnProperty('projectName')\r\n                                        ?\r\n                                        project.projectName\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchProjectDescription:\r\n                                    project.hasOwnProperty('description')\r\n                                        ?\r\n                                        project.description\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchExpiredDate:\r\n                                    project.Pitch.hasOwnProperty('expiredDate')\r\n                                        ?\r\n                                        project.Pitch.expiredDate\r\n                                        :\r\n                                        null\r\n                                ,\r\n                                pitchAmountRaisedToDate:\r\n                                    project.Pitch.hasOwnProperty('amountRaised')\r\n                                        ?\r\n                                        Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchRaiseRequired:\r\n                                    project.Pitch.hasOwnProperty('fundRequired')\r\n                                        ?\r\n                                        Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchPostMoneyValuation:\r\n                                    project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                        ?\r\n                                        Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchInvestorsCommitted:\r\n                                    project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                        ?\r\n                                        project.Pitch.investorsCommitted\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                hasRaisedMoneyBefore:\r\n                                    project.Pitch.hasOwnProperty('amountRaised')\r\n                                        ?\r\n                                        (\r\n                                            project.Pitch.amountRaised > 0\r\n                                                ?\r\n                                                \"true\"\r\n                                                :\r\n                                                \"false\"\r\n                                        )\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                pitchPresentationText:\r\n                                    !project.Pitch.presentationText\r\n                                        ?\r\n                                        {ops: []}\r\n                                        :\r\n                                        project.Pitch.presentationText\r\n                            }\r\n                        };\r\n                    }\r\n                    case createProjectActions.CREATE_PROJECT_MODE_CREATE_NEW:\r\n                        return {\r\n                            ...state,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null\r\n                        };\r\n                    default:\r\n                        return initState;\r\n                }\r\n            }\r\n        }\r\n        case createProjectActions.CREATE_PROJECT_DRAFT_PROJECT_CHANGED:\r\n            return {\r\n                ...state,\r\n                projectEdited: JSON.parse(JSON.stringify(action.projectChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default createProjectReducer;","import {DocumentClickAction, DocumentsDownloadAction, DocumentsDownloadEvents} from \"./DocumentsDownloadActions\";\r\nimport {PitchDocument} from \"../../models/project\";\r\n\r\nexport interface DocumentsDownloadState {\r\n    selectedDocument?: PitchDocument;\r\n    openRiskWarningDialog: boolean;\r\n}\r\n\r\nconst initialState: DocumentsDownloadState = {\r\n    openRiskWarningDialog: false\r\n}\r\n\r\nconst documentsDownloadReducer = (state: DocumentsDownloadState = initialState, action: DocumentsDownloadAction) => {\r\n    switch (action.type) {\r\n        case DocumentsDownloadEvents.OpenRiskWarningDialog:\r\n            const openRiskWarningDialogAction: DocumentClickAction = action as DocumentClickAction;\r\n            return {\r\n                ...state,\r\n                selectedDocument: openRiskWarningDialogAction.selectedDocument,\r\n                openRiskWarningDialog: true\r\n            }\r\n        case DocumentsDownloadEvents.CloseRiskWarningDialog:\r\n            return {\r\n                ...state,\r\n                selectedDocument: undefined,\r\n                openRiskWarningDialog: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default documentsDownloadReducer;","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\r\nimport {ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {openFeedbackSnackbar} from \"../../../feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport React from \"react\";\r\nimport {EditImageDialogModes, isDeletingProfilePicture, isSavingProfilePicture} from \"../../ProfileReducer\";\r\nimport UserRepository from \"../../../../api/repositories/UserRepository\";\r\nimport User from \"../../../../models/user\";\r\nimport {updateUserChanges} from \"../../../../redux-store/actions/authenticationActions\";\r\nimport FileRepository from \"../../../../api/repositories/FileRepository\";\r\nimport {getCurrentDate} from \"../../../../utils/utils\";\r\nimport {PROFILE_PICTURES_CHILD, USERS_CHILD} from \"../../../../firebase/databaseConsts\";\r\n\r\nexport enum EditImageDialogEvents {\r\n    ToggleDialog = \"EditImageDialogEvents.ToggleDialog\",\r\n    SetEditor = \"EditImageDialogEvents.SetEditor\",\r\n    ChangeMode = \"EditImageDialogEvents.ChangeMode\",\r\n    SuccessfullySelectedImage = \"EditImageDialogEvents.SuccessfullySelectedImage\",\r\n    SliderChanged = \"EditImageDialogEvents.SliderChanged\",\r\n    SavingImage = \"EditImageDialogEvents.SavingImage\",\r\n    DeletingImage = \"EditImageDialogEvents.DeletingImage\"\r\n}\r\n\r\nexport interface EditImageDialogAction extends ProfileAction {\r\n\r\n}\r\n\r\nexport interface ToggleDialogAction extends EditImageDialogAction {\r\n    // when set (must be a URL), the dialog will be opened in \"Display photo\" mode\r\n    image?: string;\r\n}\r\n\r\nexport interface SetEditorAction extends EditImageDialogAction {\r\n    editor: any;\r\n}\r\n\r\nexport interface ChangeModeAction extends EditImageDialogAction {\r\n    mode: EditImageDialogModes;\r\n}\r\n\r\nexport interface SuccessfullySelectedImageAction extends EditImageDialogAction {\r\n    selectedImage: File;\r\n}\r\n\r\nexport interface SliderChangedAction extends EditImageDialogAction {\r\n    name: string;\r\n    value: number;\r\n}\r\n\r\nexport interface SavingImageAction extends EditImageDialogAction {\r\n    saving: boolean;\r\n}\r\n\r\nexport interface DeletingImageAction extends EditImageDialogAction {\r\n    deleting: boolean;\r\n}\r\n\r\nexport const toggleDialog: ActionCreator<any> = (image?: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ToggleDialogAction = {\r\n            type: EditImageDialogEvents.ToggleDialog,\r\n            image\r\n        };\r\n        dispatch(action);\r\n        if (image) {\r\n            dispatch(changeMode(EditImageDialogModes.DisplayPhoto));\r\n        }\r\n    }\r\n}\r\n\r\nexport const setEditor: ActionCreator<any> = (editor: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetEditorAction = {\r\n            type: EditImageDialogEvents.SetEditor,\r\n            editor\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const changeMode: ActionCreator<any> = (mode: EditImageDialogModes) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeModeAction = {\r\n            type: EditImageDialogEvents.ChangeMode,\r\n            mode\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n/**\r\n * Handle when an image is successfully selected\r\n *\r\n * @param files\r\n */\r\nexport const handleImageChanged: ActionCreator<any> = (files: File[]) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        // error happened\r\n        if (files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const imageFile: File = files[0];\r\n        const action: SuccessfullySelectedImageAction = {\r\n            type: EditImageDialogEvents.SuccessfullySelectedImage,\r\n            selectedImage: imageFile\r\n        };\r\n        dispatch(action);\r\n        return dispatch(changeMode(EditImageDialogModes.EditPhoto));\r\n    }\r\n}\r\n\r\n/**\r\n * Handle when an image is unsuccessfully selected due to oversize, etc.\r\n *\r\n * Note: when this event occur, handleImageChanged is also called with files = [].\r\n *\r\n * @param error\r\n * @param file\r\n */\r\nexport const handleImageError: ActionCreator<any> = (error: MediaError, file: File) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, error.message))\r\n    }\r\n}\r\n\r\nexport const handleSliderChanged: ActionCreator<any> = (sliderName: string, value: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SliderChangedAction = {\r\n            type: EditImageDialogEvents.SliderChanged,\r\n            name: sliderName,\r\n            value\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n/**\r\n * Save edited image as a new profile picture\r\n */\r\nexport const saveImage: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            EditImageDialogState\r\n        } = getState().ProfileLocalState;\r\n\r\n        const editor: any = EditImageDialogState.editor;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        if (isSavingProfilePicture(EditImageDialogState)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Note: this can only be done if cors is set.\r\n            // To set cors on Firebase, follow this: https://stackoverflow.com/questions/37760695/firebase-storage-and-access-control-allow-origin/37765371\r\n            const canvas: HTMLCanvasElement = editor.getImage();\r\n            // @ts-ignore\r\n            const editedImageAsBlob: Blob = await new Promise(resolve => canvas.toBlob(resolve));\r\n\r\n            const savingImageAction: SavingImageAction = {\r\n                type: EditImageDialogEvents.SavingImage,\r\n                saving: true\r\n            };\r\n            dispatch(savingImageAction);\r\n\r\n            const storageID: number = getCurrentDate();\r\n            const imageUrl = await new FileRepository().uploadSingleFile({\r\n                file: editedImageAsBlob,\r\n                fileName: storageID,\r\n                storageLocation: `${USERS_CHILD}/${copiedUser.id}/${PROFILE_PICTURES_CHILD}`\r\n            });\r\n\r\n            // update user\r\n            const response = await new UserRepository().updateUser({\r\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\r\n                newProfilePicture: {\r\n                    storageID,\r\n                    url: imageUrl\r\n                }\r\n            });\r\n\r\n            const updatedUser: User = response.data;\r\n\r\n            dispatch(toggleDialog());\r\n            dispatch(updateUserChanges(updatedUser));\r\n            return dispatch(setCopiedUser(updatedUser));\r\n        } catch (error) {\r\n            const errorSavingImageAction: SavingImageAction = {\r\n                type: EditImageDialogEvents.SavingImage,\r\n                saving: false\r\n            };\r\n            dispatch(errorSavingImageAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not save profile photo.\"));\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Delete current profile picture\r\n */\r\nexport const deleteImage: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            EditImageDialogState\r\n        } = getState().ProfileLocalState;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        if (isDeletingProfilePicture(EditImageDialogState)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const deletingImageAction: DeletingImageAction = {\r\n                type: EditImageDialogEvents.DeletingImage,\r\n                deleting: true\r\n            };\r\n            dispatch(deletingImageAction);\r\n\r\n            // update user\r\n            const response = await new UserRepository().updateUser({\r\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\r\n                removeProfilePicture: true\r\n            });\r\n\r\n            const updatedUser: User = response.data;\r\n\r\n            dispatch(changeMode(EditImageDialogModes.AddPhoto));\r\n            dispatch(updateUserChanges(updatedUser));\r\n            return dispatch(setCopiedUser(updatedUser));\r\n        }\r\n        catch (error) {\r\n            const deletingImageAction: DeletingImageAction = {\r\n                type: EditImageDialogEvents.DeletingImage,\r\n                deleting: false\r\n            };\r\n            dispatch(deletingImageAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not delete profile photo.\"));\r\n        }\r\n    }\r\n}","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\r\nimport User, {BusinessProfile, hasBusinessProfile} from \"../../../../models/user\";\r\nimport {ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport Address from \"../../../../models/address\";\r\nimport AddressRepository from \"../../../../api/repositories/AddressRepository\";\r\nimport {AddressStates} from \"../../ProfileReducer\";\r\n\r\nexport enum BusinessProfileEvents {\r\n    NewBusinessProfileChanged = \"BusinessProfileEvents.NewBusinessProfileChanged\",\r\n    CheckBoxChanged = \"BusinessProfileEvents.CheckBoxChanged\",\r\n    FindingAddress = \"BusinessProfileEvents.FindingAddress\",\r\n    FinishedFindingAddress = \"BusinessProfileEvents.FinishedFindingAddress\",\r\n    ChangeAddressState = \"BusinessProfileEvents.ChangeAddressState\"\r\n}\r\n\r\nexport interface BusinessProfileAction extends ProfileAction {\r\n\r\n}\r\n\r\nexport interface ToggleEnterAddressManuallyAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\"\r\n}\r\n\r\nexport interface FindingAddressAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n}\r\n\r\nexport interface FinishedFindingAddressAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n    foundAddresses: Address[] | undefined;\r\n    error?: string;\r\n}\r\n\r\nexport interface ChangeAddressFindingStateAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n    addressState: AddressStates;\r\n}\r\n\r\nexport interface BusinessProfileCheckBoxChangedAction extends BusinessProfileAction {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport const findAddress: ActionCreator<any> = (mode: \"registeredOffice\" | \"tradingAddress\") => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            BusinessProfileState\r\n        } = getState().ProfileLocalState;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        let postcode: string;\r\n\r\n        // if (hasBusinessProfile(copiedUser)) {\r\n        //     if (mode === \"registeredOffice\") {\r\n        //         postcode = copiedUser.BusinessProfile?.registeredOffice.postcode ?? \"\";\r\n        //     } else {\r\n        //         postcode = copiedUser.BusinessProfile?.tradingAddress.postcode ?? \"\";\r\n        //     }\r\n        // } else {\r\n        //     if (mode === \"registeredOffice\") {\r\n        //         postcode = BusinessProfileState.newBusinessProfile.registeredOffice.postcode;\r\n        //     } else {\r\n        //         postcode = BusinessProfileState.newBusinessProfile.tradingAddress.postcode;\r\n        //     }\r\n        // }\r\n\r\n        const finishedFindingAddressAction: FinishedFindingAddressAction = {\r\n            type: BusinessProfileEvents.FinishedFindingAddress,\r\n            mode,\r\n            foundAddresses: undefined\r\n        };\r\n\r\n        try {\r\n            const findingAddressAction: FindingAddressAction = {\r\n                type: BusinessProfileEvents.FindingAddress,\r\n                mode\r\n            };\r\n            dispatch(findingAddressAction);\r\n\r\n            const results: Address[] = await new AddressRepository().findAddress(\"dummy postcode\");\r\n            finishedFindingAddressAction.foundAddresses = [...results];\r\n            dispatch(finishedFindingAddressAction);\r\n            return dispatch(changeAddressFindingState(mode, AddressStates.DisplayFoundAddresses));\r\n        } catch (error) {\r\n            finishedFindingAddressAction.error = error.toString();\r\n            dispatch(finishedFindingAddressAction);\r\n            return dispatch(changeAddressFindingState(mode, AddressStates.EnterPostcode));\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeAddressFindingState: ActionCreator<any> = (mode: \"registeredOffice\" | \"tradingAddress\", addressState: AddressStates) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeAddressFindingStateAction = {\r\n            type: BusinessProfileEvents.ChangeAddressState,\r\n            mode,\r\n            addressState\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import {ProfileAction, ProfileEvents, SetCopiedUserAction} from \"./ProfileActions\";\r\nimport User, {BusinessProfile} from \"../../models/user\";\r\nimport Error from \"../../models/error\";\r\nimport {\r\n    ChangeModeAction,\r\n    DeletingImageAction,\r\n    EditImageDialogEvents,\r\n    SavingImageAction,\r\n    SetEditorAction,\r\n    SliderChangedAction,\r\n    SuccessfullySelectedImageAction,\r\n    ToggleDialogAction\r\n} from \"./components/edit-image-dialog/EditImageDialogActions\";\r\nimport {\r\n    BusinessProfileCheckBoxChangedAction,\r\n    BusinessProfileEvents,\r\n    ChangeAddressFindingStateAction,\r\n    FindingAddressAction,\r\n    FinishedFindingAddressAction\r\n} from \"./components/business-profile/BusinessProfileActions\";\r\nimport Address from \"../../models/address\";\r\n\r\n// State for Personal details section\r\nexport interface PersonalDetailsState {\r\n\r\n}\r\n\r\nexport enum AddressStates {\r\n    EnterPostcode = \"AddressFindingStates.EnterPostcode\",\r\n    FindingAddresses = \"AddressFindingStates.FindingAddresses\",\r\n    DisplayFoundAddresses = \"AddressFindingStates.DisplayFoundAddresses\"\r\n}\r\n\r\n// State for Business profile section\r\nexport interface BusinessProfileState {\r\n    // this state is used to keeping track of the changes in Business profile\r\n    editedBusinessProfile: BusinessProfile;\r\n    // find address by postcode state for Registered office section\r\n    registeredOfficeState: AddressStates;\r\n    // find address by postcode state for Registered office section\r\n    tradingAddressState: AddressStates;\r\n    // list of addresses found by postcode from Registered office section\r\n    foundAddressesForRegisteredOffice?: Address[];\r\n    // list of addresses found by postcode from Trading address section\r\n    foundAddressesForTradingAddress?: Address[];\r\n    // error finding addresses for Registered office\r\n    errorFindingAddressesForRegisteredOffice?: Error;\r\n    // error finding addresses for Trading address\r\n    errorFindingAddressesForTradingAddress?: Error;\r\n    tradingAddressSameAsRegisteredOffice: boolean;\r\n}\r\n\r\nexport enum EditImageDialogModes {\r\n    AddPhoto = \"EditImageDialogModes.AddPhoto\",\r\n    EditPhoto = \"EditImageDialogModes.EditPhoto\",\r\n    DisplayPhoto = \"EditImageDialogModes.DisplayPhoto\"\r\n}\r\n\r\n// State for Edit Image dialog\r\nexport interface EditImageDialogState {\r\n    dialogOpen: boolean;\r\n    mode: EditImageDialogModes;\r\n    // reference to the editor\r\n    editor?: any;\r\n    rawImage?: File | string;\r\n    editedImage?: Blob;\r\n\r\n    scale: number;\r\n    rotate: number;\r\n\r\n    savingImage: boolean;\r\n    deletingImage: boolean;\r\n}\r\n\r\n// State for the whole Profile page\r\nexport interface ProfileState {\r\n    copiedUser?: User;\r\n    hasInitiallySetCopiedUser: boolean;\r\n    PersonalDetailsState: PersonalDetailsState;\r\n    BusinessProfileState: BusinessProfileState;\r\n    EditImageDialogState: EditImageDialogState;\r\n}\r\n\r\n// initial state for Personal details section\r\nconst initialPersonalDetailsState: PersonalDetailsState = {}\r\n\r\n// initial state for Business profile section\r\nconst initialBusinessProfileState: BusinessProfileState = {\r\n    editedBusinessProfile: {\r\n        companyName: \"\",\r\n        companyWebsite: \"\",\r\n        registrationNo: \"\",\r\n        sector: \"none\",\r\n        directors: [\"\"],\r\n        registeredOffice: {\r\n            address1: \"none\",\r\n            address2: \"\",\r\n            address3: \"\",\r\n            postcode: \"\",\r\n            townCity: \"\"\r\n        },\r\n        tradingAddress: {\r\n            address1: \"none\",\r\n            address2: \"\",\r\n            address3: \"\",\r\n            postcode: \"\",\r\n            townCity: \"\"\r\n        },\r\n        logo: [\r\n            {\r\n                storageID: -1,\r\n                url: \"\"\r\n            }\r\n        ]\r\n    },\r\n    registeredOfficeState: AddressStates.EnterPostcode,\r\n    tradingAddressState: AddressStates.EnterPostcode,\r\n    tradingAddressSameAsRegisteredOffice: true\r\n}\r\n\r\n// initial state for Edit Image dialog\r\nconst initialEditImageDialogState: EditImageDialogState = {\r\n    dialogOpen: false,\r\n    mode: EditImageDialogModes.AddPhoto,\r\n\r\n    scale: 1,\r\n    rotate: 0,\r\n\r\n    savingImage: false,\r\n    deletingImage: false\r\n}\r\n\r\n// initial state for the whole Profile page\r\nconst initialState: ProfileState = {\r\n    hasInitiallySetCopiedUser: false,\r\n    PersonalDetailsState: initialPersonalDetailsState,\r\n    BusinessProfileState: initialBusinessProfileState,\r\n    EditImageDialogState: initialEditImageDialogState\r\n}\r\n\r\nexport const hasInitiallySetCopiedUser = (state: ProfileState) => {\r\n    return state.hasInitiallySetCopiedUser;\r\n}\r\n\r\nexport const isSavingProfilePicture = (state: EditImageDialogState) => {\r\n    return state.savingImage;\r\n}\r\n\r\nexport const isDeletingProfilePicture = (state: EditImageDialogState) => {\r\n    return state.deletingImage;\r\n}\r\n\r\nexport const hasErrorFindingAddressForRegisteredOffice = (state: BusinessProfileState) => {\r\n    return state.errorFindingAddressesForRegisteredOffice !== undefined;\r\n}\r\n\r\nexport const hasErrorFindingAddressForTradingAddress = (state: BusinessProfileState) => {\r\n    return state.errorFindingAddressesForTradingAddress !== undefined;\r\n}\r\n\r\nconst profileReducer = (state = initialState, action: ProfileAction) => {\r\n    switch (action.type) {\r\n        case ProfileEvents.SetCopiedUser:\r\n            const setCopiedUserAction: SetCopiedUserAction = action as SetCopiedUserAction;\r\n            return {\r\n                ...state,\r\n                copiedUser: setCopiedUserAction.copiedUser,\r\n                hasInitiallySetCopiedUser: setCopiedUserAction.firstTimeSetCopiedUser === true ? true : state.hasInitiallySetCopiedUser\r\n            }\r\n        case EditImageDialogEvents.ToggleDialog:\r\n            const toggleDialogAction: ToggleDialogAction = action as ToggleDialogAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...initialEditImageDialogState,\r\n                    dialogOpen: !state.EditImageDialogState.dialogOpen,\r\n                    rawImage: toggleDialogAction.image\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SetEditor:\r\n            const setEditorAction: SetEditorAction = action as SetEditorAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    editor: setEditorAction.editor\r\n                }\r\n            }\r\n        case EditImageDialogEvents.ChangeMode:\r\n            const changeModeAction: ChangeModeAction = action as ChangeModeAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    mode: changeModeAction.mode\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SuccessfullySelectedImage:\r\n            const successfullySelectedImageAction: SuccessfullySelectedImageAction = action as SuccessfullySelectedImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    rawImage: successfullySelectedImageAction.selectedImage\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SliderChanged:\r\n            const sliderChangedAction: SliderChangedAction = action as SliderChangedAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    [sliderChangedAction.name]: sliderChangedAction.value\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SavingImage:\r\n            const savingImageAction: SavingImageAction = action as SavingImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    savingImage: savingImageAction.saving\r\n                }\r\n            }\r\n        case EditImageDialogEvents.DeletingImage:\r\n            const deletingImageAction: DeletingImageAction = action as DeletingImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    deletingImage: deletingImageAction.deleting\r\n                }\r\n            }\r\n        // case BusinessProfileEvents.NewBusinessProfileChanged:\r\n        //     const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = action as UpdateNewBusinessProfileAction;\r\n        //     return {\r\n        //         ...state,\r\n        //         BusinessProfileState: {\r\n        //             ...state.BusinessProfileState,\r\n        //             newBusinessProfile: updateNewBusinessProfileAction.updatedNewBusinessProfile\r\n        //         }\r\n        //     }\r\n        case BusinessProfileEvents.CheckBoxChanged:\r\n            const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = action as BusinessProfileCheckBoxChangedAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    [businessProfileCheckBoxChangedAction.name]: businessProfileCheckBoxChangedAction.value\r\n                }\r\n            }\r\n        case BusinessProfileEvents.FindingAddress:\r\n            const findingAddressAction: FindingAddressAction = action as FindingAddressAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    registeredOfficeState: findingAddressAction.mode === \"registeredOffice\"\r\n                        ? AddressStates.FindingAddresses : state.BusinessProfileState.registeredOfficeState,\r\n                    tradingAddressState: findingAddressAction.mode === \"tradingAddress\"\r\n                        ? AddressStates.FindingAddresses : state.BusinessProfileState.tradingAddressState\r\n                }\r\n            }\r\n        case BusinessProfileEvents.FinishedFindingAddress:\r\n            const finishedFindingAddressAction: FinishedFindingAddressAction = action as FinishedFindingAddressAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    foundAddressesForRegisteredOffice: finishedFindingAddressAction.mode === \"registeredOffice\"\r\n                        ? finishedFindingAddressAction.foundAddresses : state.BusinessProfileState.foundAddressesForRegisteredOffice,\r\n                    foundAddressesForTradingAddress: finishedFindingAddressAction.mode === \"tradingAddress\"\r\n                        ? finishedFindingAddressAction.foundAddresses : state.BusinessProfileState.foundAddressesForTradingAddress,\r\n                    errorFindingAddressesForRegisteredOffice: finishedFindingAddressAction.mode === \"registeredOffice\" && finishedFindingAddressAction.error !== undefined\r\n                        ? {detail: finishedFindingAddressAction.error} : state.BusinessProfileState.errorFindingAddressesForRegisteredOffice,\r\n                    errorFindingAddressesForTradingAddress: finishedFindingAddressAction.mode === \"tradingAddress\" && finishedFindingAddressAction.error !== undefined\r\n                        ? {detail: finishedFindingAddressAction.error} : state.BusinessProfileState.errorFindingAddressesForTradingAddress\r\n                }\r\n            }\r\n        case BusinessProfileEvents.ChangeAddressState:\r\n            const changeAddressStateAction: ChangeAddressFindingStateAction = action as ChangeAddressFindingStateAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    registeredOfficeState: changeAddressStateAction.mode === \"registeredOffice\"\r\n                        ? changeAddressStateAction.addressState : state.BusinessProfileState.registeredOfficeState,\r\n                    tradingAddressState: changeAddressStateAction.mode === \"tradingAddress\"\r\n                        ? changeAddressStateAction.addressState : state.BusinessProfileState.tradingAddressState,\r\n                    // if addressState is set to EnterPostcode, reset other states to initial values\r\n                    foundAddressesForRegisteredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.foundAddressesForRegisteredOffice,\r\n                    foundAddressesForTradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.foundAddressesForTradingAddress,\r\n                    errorFindingAddressesForRegisteredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.errorFindingAddressesForRegisteredOffice,\r\n                    errorFindingAddressesForTradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.errorFindingAddressesForTradingAddress,\r\n                    editedBusinessProfile: {\r\n                        ...state.BusinessProfileState.editedBusinessProfile,\r\n                        registeredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                        && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                            ? initialBusinessProfileState.editedBusinessProfile.registeredOffice\r\n                            : state.BusinessProfileState.editedBusinessProfile.registeredOffice,\r\n                        tradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                        && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                            ? initialBusinessProfileState.editedBusinessProfile.tradingAddress\r\n                            : state.BusinessProfileState.editedBusinessProfile.tradingAddress\r\n                    }\r\n                }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import {combineReducers} from \"redux\";\r\nimport authReducer from './authReducer';\r\nimport createBusinessProfileReducer from './createBusinessProfileReducer';\r\nimport editUserReducer from './editUserReducer';\r\nimport editImageReducer from './editImageReducer';\r\nimport editVideoReducer from './editVideoReducer';\r\nimport uploadFilesReducer from './uploadFilesReducer';\r\nimport uploadingStatusReducer from './uploadingStatusReducer';\r\nimport changePasswordReducer from './changePasswordReducer';\r\nimport clubAttributesReducer from './clubAttributesReducer';\r\nimport forumsReducer from './forumsReducer';\r\nimport notificationsReducer from './notificationsReducer';\r\nimport dashboardSidebarReducer from './dashboardSidebarReducer';\r\nimport mediaQueryReducer, {MediaQueryState} from './mediaQueryReducer';\r\nimport superAdminSettingsReducer from './superAdminSettingsReducer';\r\nimport groupAdminSettingsReducer from './groupAdminSettingsReducer';\r\nimport legalDocumentsReducer from './legalDocumentsReducer';\r\nimport invitedUsersReducer from './invitedUsersReducer';\r\nimport invitationDialogReducer from './invitationDialogReducer';\r\nimport addAngelNetworkDialogReducer from './addAngelNetworkDialogReducer';\r\nimport manageGroupFromParamsReducer from './manageGroupFromParamsReducer';\r\nimport investorSelfCertificationAgreementsReducer from './investorSelfCertificationAgreementsReducer';\r\nimport angelNetworksReducer from './angelNetworksReducer';\r\nimport manageJoinRequestsReducer from './manageJoinRequestsReducer';\r\nimport pledgesTableReducer from './pledgesTableReducer';\r\nimport feedbackSnackbarReducer from './feedbackSnackbarReducer';\r\nimport activitiesTableReducer from './activitiesTableReducer';\r\nimport manageJSONCompareChangesDialogReducer from './manageJSONCompareChangesDialogReducer';\r\nimport groupAdminsTableReducer from './groupAdminsTableReducer';\r\nimport createPledgeDialogReducer from './createPledgeDialogReducer';\r\nimport selectProjectVisibilityReducer from './selectProjectVisiblityReducer';\r\nimport manageSystemGroupsReducer from './manageSystemGroupsReducer';\r\nimport manageMarketingPreferencesReducer from './manageMarketingPreferencesReducer';\r\nimport createProjectReducer from './createProjectReducer';\r\nimport manageGroupUrlReducer, {ManageGroupUrlState} from \"./manageGroupUrlReducer\";\r\nimport signInReducer, {SignInState} from \"../../pages/signin/SignInReducer\";\r\nimport authenticationReducer, {AuthenticationState} from \"./authenticationReducer\";\r\nimport manageSystemAttributesReducer, {ManageSystemAttributesState} from \"./manageSystemAttributesReducer\";\r\nimport exploreOffersReducer, {ExploreOffersState} from \"../../shared-components/explore-offers/ExploreOffersReducer\";\r\nimport offersTableReducer, {OffersTableState} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {ExploreGroupsState} from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport newExploreGroupsReducer from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport groupDetailsReducer, {GroupDetailsState} from \"../../pages/group-details/GroupDetailsReducer\";\r\nimport manageSystemIdleTimeReducer, {ManageSystemIdleTimeState} from \"./manageSystemIdleTimeReducer\";\r\nimport resetPasswordReducer, {ResetPasswordState} from \"../../pages/reset-password/ResetPasswordReducer\";\r\nimport resourcesReducer, {ResourcesState} from \"../../pages/resources/ResourcesReducer\";\r\nimport feedbackSnackbarReducerNew, {FeedbackSnackbarState} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport documentsDownloadReducer, {DocumentsDownloadState} from \"../../shared-components/documents-download/DocumentsDownloadReducer\";\r\nimport contactPitchOwnerDialogReducer, {ContactPitchOwnerDialogState} from \"../../pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer\";\r\nimport profileReducer, {ProfileState} from \"../../shared-components/profile/ProfileReducer\";\r\nimport signUpReducer, {SignUpState} from \"../../pages/signup/SignUpReducer\";\r\nimport manageSectorsReducer, {ManageSectorsState} from \"../../pages/admin/components/manage-sectors/ManageSectorsReducer\";\r\n\r\nexport interface AppState {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemIdleTimeState: ManageSystemIdleTimeState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n\r\n    SignInLocalState: SignInState;\r\n    SignUpLocalState: SignUpState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    OffersTableLocalState: OffersTableState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    ResourcesLocalState: ResourcesState;\r\n\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n\r\n    ProfileLocalState: ProfileState;\r\n\r\n    // mitigation plan for the old states of old reducers\r\n    [oldReducers: string]: any;\r\n}\r\n\r\nconst rootReducer = combineReducers<AppState>({\r\n    MediaQueryState: mediaQueryReducer,\r\n    ManageSystemIdleTimeState: manageSystemIdleTimeReducer,\r\n    ManageGroupUrlState: manageGroupUrlReducer,\r\n    AuthenticationState: authenticationReducer,\r\n    ManageSystemAttributesState: manageSystemAttributesReducer,\r\n\r\n    SignInLocalState: signInReducer,\r\n    SignUpLocalState: signUpReducer,\r\n    ExploreOffersLocalState: exploreOffersReducer,\r\n    OffersTableLocalState: offersTableReducer,\r\n    ExploreGroupsLocalState: newExploreGroupsReducer,\r\n    GroupDetailsLocalState: groupDetailsReducer,\r\n    ResetPasswordLocalState: resetPasswordReducer,\r\n    ResourcesLocalState: resourcesReducer,\r\n\r\n    FeedbackSnackbarLocalState: feedbackSnackbarReducerNew,\r\n    DocumentsDownloadLocalState: documentsDownloadReducer,\r\n    ContactPitchOwnerDialogLocalState: contactPitchOwnerDialogReducer,\r\n\r\n    ManageSectorsLocalState: manageSectorsReducer,\r\n\r\n    ProfileLocalState: profileReducer,\r\n\r\n    // Old reducers --------------------------\r\n    auth: authReducer,\r\n    createBusinessProfile: createBusinessProfileReducer,\r\n    editUser: editUserReducer,\r\n    editImage: editImageReducer,\r\n    editVideo: editVideoReducer,\r\n    uploadFiles: uploadFilesReducer,\r\n    uploadingStatus: uploadingStatusReducer,\r\n    changePassword: changePasswordReducer,\r\n    manageClubAttributes: clubAttributesReducer,\r\n    manageForums: forumsReducer,\r\n    manageNotifications: notificationsReducer,\r\n    dashboardSidebar: dashboardSidebarReducer,\r\n    superAdminSettings: superAdminSettingsReducer,\r\n    groupAdminSettings: groupAdminSettingsReducer,\r\n    legalDocuments: legalDocumentsReducer,\r\n    invitedUsers: invitedUsersReducer,\r\n    manageInvitationDialog: invitationDialogReducer,\r\n    manageAddAngelNetworkDialog: addAngelNetworkDialogReducer,\r\n    manageGroupFromParams: manageGroupFromParamsReducer,\r\n    manageInvestorSelfCertificationAgreement: investorSelfCertificationAgreementsReducer,\r\n    manageAngelNetworks: angelNetworksReducer,\r\n    manageJoinRequests: manageJoinRequestsReducer,\r\n    managePledgesTable: pledgesTableReducer,\r\n    manageFeedbackSnackbar: feedbackSnackbarReducer,\r\n    manageActivitiesTable: activitiesTableReducer,\r\n    manageJSONCompareChangesDialog: manageJSONCompareChangesDialogReducer,\r\n    manageGroupAdminsTable: groupAdminsTableReducer,\r\n    manageCreatePledgeDialog: createPledgeDialogReducer,\r\n    manageSelectProjectVisibility: selectProjectVisibilityReducer,\r\n    manageSystemGroups: manageSystemGroupsReducer,\r\n    manageMarketingPreferences: manageMarketingPreferencesReducer,\r\n    manageCreateProject: createProjectReducer,\r\n});\r\n\r\nexport default rootReducer;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport {applyMiddleware, createStore, Store} from \"redux\";\r\nimport rootReducer, {AppState} from \"./redux-store/reducers\";\r\nimport {Provider} from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst store: Store<AppState> = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n    <Provider\r\n        store={store}\r\n    >\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}