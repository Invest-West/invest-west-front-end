{"version":3,"sources":["img/logo.png","img/document_icon.png","img/linkedin_logo.png","img/admin_logo.png","img/group_admin_help_my_dashboard.png","img/group_admin_help_navigation_bar.png","img/group_admin_help_notifications.png","img/group_admin_help_user_management.png","img/group_admin_help_inviting_a_new_user_01.png","img/group_admin_help_inviting_a_new_user_02.png","img/group_admin_help_inviting_a_new_user_03.png","img/group_admin_help_manage_access_requests.png","img/group_admin_help_manage_group_members.png","img/group_admin_help_viewing_an_offer.png","img/group_admin_help_accept_reject_offer.png","img/group_admin_help_accept_reject_2_offer.png","img/group_admin_help_edit_offer_01.png","img/group_admin_help_edit_offer_02.png","img/group_admin_help_temporarily_closing_an_offer.png","img/group_admin_help_reopening_a_temporarily_closed_offer.png","img/group_admin_help_manage_group_admins.png","img/group_admin_help_explore_offers.png","img/group_admin_help_explore_groups.png","img/group_admin_help_resources.png","img/group_admin_help_settings.png","img/group_admin_help_public_offer.png","img/group_admin_help_restricted_offer.png","img/group_admin_help_audit_log.png","img/group_admin_help_password.png","img/group_admin_help_change_password.png","img/group_admin_help_logging_out.png","img/investor_help_my_dashboard.png","img/investor_help_navigation_bar.png","img/investor_help_notifications.png","img/investor_help_viewing_offers.png","img/investor_help_viewing_offers_campaign.png","img/investor_help_pitch_phase_02.png","img/investor_contacting_fundraiser.png","img/investor_help_exploring_groups.png","img/investor_help_resources.png","img/investor_help_profile.png","img/investor_help_editing_your_profile.png","img/investor_help_setting_up_business_profile.png","img/investor_help_self_certification.png","img/investor_help_reset_password.png","img/investor_help_change_password.png","img/investor_help_support_01.png","img/investor_help_support_02.png","img/investor_help_log_out.png","img/issuer_help_my_dashboard.png","img/issuer_help_navigation_bar.png","img/issuer_help_notifications.png","img/issuer_help_create_new_offer_01.png","img/issuer_help_create_new_offer_02.png","img/issuer_help_manage_offer.png","img/issuer_help_edit_offer.png","img/issuer_help_replying_to_comments_in_offer_01.png","img/issuer_help_replying_to_comments_in_offer_02.png","img/issuer_help_exploring_groups.png","img/issuer_help_resources.png","img/issuer_help_edit_profile_01.png","img/issuer_help_edit_profile_02.png","img/issuer_help_setting_business_profile_01.png","img/issuer_help_setting_business_profile_02.png","img/issuer_help_reset_password.png","img/issuer_help_change_password.png","img/issuer_help_support_01.png","img/issuer_help_support_02.png","img/issuer_help_log_out.png","img/front_page_cover_image.png","firebase/firebaseApp.jsx","redux-store/actions/uploadingStatusActions.jsx","shared-components/uploading-dialog/UploadingDialog.jsx","values/colors.jsx","shared-js-css-styles/SharedStyles.jsx","firebase/databaseConsts.jsx","utils/utils.jsx","redux-store/actions/feedbackSnackbarActions.jsx","redux-store/actions/editImageActions.jsx","shared-components/edit-image/EditImageDialog.jsx","redux-store/actions/editVideoActions.jsx","shared-components/edit-video/EditVideoDialog.jsx","shared-components/page-not-found/PageNotFound.jsx","shared-components/page-not-found/PageNotFoundWhole.jsx","models/admin.tsx","models/group_of_membership.tsx","models/user.tsx","router/routes.tsx","api/Api.tsx","redux-store/reducers/authenticationReducer.tsx","firebase/realtimeDBUtils.jsx","redux-store/actions/changePasswordActions.jsx","shared-components/change-password/ChangePasswordPage.jsx","redux-store/actions/manageGroupFromParamsActions.jsx","shared-components/nav-bars/HeaderWithoutDesc.jsx","pages/signin/Signin.jsx","redux-store/actions/authActions.jsx","redux-store/actions/dashboardSidebarActions.jsx","redux-store/actions/forumsActions.jsx","redux-store/actions/authenticationActions.tsx","api/repositories/InvestorSelfCertificationRepository.tsx","api/repositories/UserRepository.tsx","redux-store/actions/manageGroupUrlActions.tsx","shared-components/nav-bars/SidebarContent.jsx","shared-components/profile/LetterAvatar.jsx","redux-store/actions/manageJSONCompareChangesDialogActions.jsx","shared-components/activities-components/JSONCompareChangesDialog.jsx","redux-store/actions/activitiesTableActions.jsx","shared-components/activities-components/ActivitiesTable.jsx","redux-store/actions/createBusinessProfileActions.jsx","redux-store/actions/editUserActions.jsx","redux-store/actions/uploadFilesActions.jsx","redux-store/actions/legalDocumentsActions.jsx","redux-store/actions/investorSelfCertificationAgreementsActions.jsx","api/repositories/GroupRepository.tsx","api/repositories/OfferRepository.tsx","redux-store/reducers/manageGroupUrlReducer.tsx","shared-components/offers-table/OffersTableActions.tsx","shared-components/explore-offers/ExploreOffersActions.tsx","shared-components/offers-table/OffersTableReducer.tsx","shared-js-css-styles/CustomLink.tsx","models/project.tsx","utils/colorUtils.tsx","shared-components/offers-table/OffersTable.tsx","shared-components/footer/Footer.tsx","shared-components/profile/Profile.jsx","redux-store/actions/notificationsActions.jsx","shared-components/notifications/NotificationsBox.jsx","shared-components/explore-groups/ExploreGroupsActions.tsx","shared-components/explore-offers/ExploreOffersReducer.tsx","models/group_properties.tsx","shared-components/explore-offers/OfferItem.tsx","shared-components/risk-warning/RiskWarning.tsx","shared-components/explore-offers/ExploreOffers.tsx","api/repositories/AccessRequestRepository.tsx","api/repositories/EmailRepository.tsx","shared-components/explore-groups/ExploreGroupsReducer.tsx","shared-components/explore-groups/GroupItem.tsx","shared-components/explore-groups/ExploreGroups.tsx","shared-components/feedback-snackbar/FeedbackSnackbarActions.tsx","shared-components/feedback-snackbar/FeedbackSnackbarReducer.tsx","pages/resources/ResourcesActions.tsx","pages/admin/components/manage-sectors/ManageSectorsActions.tsx","pages/resources/ResourcesReducer.tsx","pages/resources/components/ContactResourceDialog.tsx","shared-components/feedback-snackbar/FeedbackSnackbarNew.tsx","pages/resources/pages/keltie/Keltie.tsx","pages/resources/ResourceItem.tsx","pages/resources/pages/founder-catalyst/FounderCatalyst.tsx","pages/resources/pages/grant-funding/GrantFunding.tsx","pages/resources/pages/merix-studio/merixStudio.tsx","pages/resources/Resources.tsx","pages/dashboard-issuer/IssuerDashboard.jsx","pages/dashboard-investor/InvestorDashboard.jsx","utils/emailUtils.jsx","redux-store/actions/invitationDialogActions.jsx","pages/admin/components/InvitationDialog.jsx","redux-store/actions/superAdminSettingsActions.jsx","api/repositories/SystemAttributesRepository.tsx","redux-store/actions/manageSystemAttributesActions.tsx","shared-components/documents-download/DocumentsDownloadActions.tsx","redux-store/reducers/manageSystemAttributesReducer.tsx","pages/admin/components/manage-sectors/ManageSectorsReducer.tsx","pages/admin/components/manage-sectors/ManageSectors.tsx","pages/admin/components/SuperAdminSettings.jsx","redux-store/actions/groupAdminSettingsActions.jsx","pages/admin/components/GroupAdminSettings.jsx","shared-components/info_overlay/InfoOverlay.jsx","redux-store/actions/invitedUsersActions.jsx","pages/admin/components/InvitedUsers.jsx","pages/admin/components/AddAngelNetWorkDialog.jsx","redux-store/actions/addAngelNetworkDialogActions.jsx","redux-store/actions/angelNetworksActions.jsx","pages/admin/components/AngelNetworks.jsx","redux-store/actions/manageJoinRequestsActions.jsx","pages/admin/components/JoinRequests.jsx","redux-store/actions/groupAdminsTableActions.jsx","pages/admin/components/GroupAdminsTable.jsx","pages/admin/AdminDashboard.jsx","shared-components/upload-documents/DocumentsUpload.jsx","shared-components/download-documents/DocumentsDownload.jsx","redux-store/actions/selectProjectVisibilityActions.jsx","shared-components/select-pitch-visibility/SelectPitchVisibility.jsx","pages/create-project/CreateProject.jsx","pages/profile/ProfilePageViewOnly.jsx","shared-components/select-pledge-visibility/SelectPledgeVisibility.jsx","redux-store/actions/createPledgeDialogActions.jsx","shared-components/create-pledge-dialog/CreatePledgeDialog.jsx","redux-store/actions/pledgesTableActions.jsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions.tsx","shared-components/documents-download/DocumentsDownload.tsx","pages/group-details/GroupDetailsActions.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialog.tsx","pages/project-details/ProjectDetails.jsx","pages/system-public-pages/PrivacyPolicyPage.jsx","pages/system-public-pages/TermsOfUsePage.jsx","pages/system-public-pages/RiskWarningPage.jsx","pages/system-public-pages/CreatePitchTermsAndConditionsPage.jsx","pages/system-public-pages/ContactUs.jsx","pages/system-public-pages/HelpPage.jsx","pages/signin/SignInActions.tsx","pages/group-details/GroupDetailsReducer.tsx","pages/group-details/GroupDetails.tsx","pages/system-public-pages/MarketingPreferencesPage.jsx","pages/profile/ProfilePageEditable.jsx","pages/front/Front.tsx","pages/reset-password/ResetPasswordActions.tsx","pages/signin/SignInReducer.tsx","pages/signin/SignInNew.tsx","shared-components/page-not-found/PageNotFoundNew.tsx","shared-components/header/Header.tsx","router/GroupRoute.tsx","pages/signup/SignUpActions.tsx","pages/reset-password/ResetPasswordReducer.tsx","pages/reset-password/ResetPassword.tsx","pages/resources/pages/ResourceDetail.tsx","utils/passwordUtils.tsx","redux-store/actions/mediaQueryActions.tsx","pages/signup/SignUpReducer.tsx","models/invited_user.tsx","pages/signup/SignUpNew.tsx","router/router.tsx","shared-components/feedback-snackbar/FeedbackSnackbar.jsx","redux-store/actions/clubAttributesActions.jsx","redux-store/actions/manageSystemIdleTimeActions.tsx","redux-store/actions/manageSystemGroupsActions.jsx","redux-store/reducers/manageSystemIdleTimeReducer.tsx","App.jsx","serviceWorker.js","shared-components/profile/ProfileActions.tsx","redux-store/reducers/authReducer.jsx","redux-store/reducers/createBusinessProfileReducer.jsx","redux-store/reducers/editUserReducer.jsx","redux-store/reducers/editImageReducer.jsx","redux-store/reducers/editVideoReducer.jsx","redux-store/reducers/uploadFilesReducer.jsx","redux-store/reducers/uploadingStatusReducer.jsx","redux-store/reducers/changePasswordReducer.jsx","redux-store/reducers/clubAttributesReducer.jsx","shared-components/forums/CreateForum.jsx","shared-components/forums/CreateThread.jsx","shared-components/forums/IndividualForum.jsx","shared-components/forums/CreateReply.jsx","shared-components/forums/IndividualThread.jsx","shared-components/forums/Forums.jsx","redux-store/reducers/forumsReducer.jsx","redux-store/reducers/notificationsReducer.jsx","redux-store/reducers/dashboardSidebarReducer.jsx","redux-store/reducers/mediaQueryReducer.tsx","redux-store/reducers/superAdminSettingsReducer.jsx","redux-store/reducers/groupAdminSettingsReducer.jsx","redux-store/reducers/legalDocumentsReducer.jsx","redux-store/reducers/invitedUsersReducer.jsx","redux-store/reducers/invitationDialogReducer.jsx","redux-store/reducers/addAngelNetworkDialogReducer.jsx","redux-store/reducers/manageGroupFromParamsReducer.jsx","redux-store/reducers/investorSelfCertificationAgreementsReducer.jsx","redux-store/reducers/angelNetworksReducer.jsx","redux-store/reducers/manageJoinRequestsReducer.jsx","redux-store/reducers/pledgesTableReducer.jsx","redux-store/reducers/feedbackSnackbarReducer.jsx","redux-store/reducers/activitiesTableReducer.jsx","redux-store/reducers/manageJSONCompareChangesDialogReducer.jsx","redux-store/reducers/groupAdminsTableReducer.jsx","redux-store/reducers/createPledgeDialogReducer.jsx","redux-store/reducers/selectProjectVisiblityReducer.jsx","redux-store/reducers/manageSystemGroupsReducer.jsx","redux-store/actions/manageMarketingPreferencesActions.jsx","redux-store/reducers/manageMarketingPreferencesReducer.jsx","redux-store/actions/createProjectActions.jsx","redux-store/reducers/createProjectReducer.jsx","shared-components/documents-download/DocumentsDownloadReducer.tsx","shared-components/profile/components/edit-image-dialog/EditImageDialogActions.tsx","shared-components/profile/components/business-profile/BusinessProfileActions.tsx","shared-components/profile/ProfileReducer.tsx","redux-store/reducers/index.tsx","index.tsx"],"names":["firebaseApp","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","UPLOADING","DISMISS_UPLOADING_STATUS","UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE","UPLOAD_DONE_MODE","UPLOAD_ERROR","UploadingDialog","this","props","forwardRef","mode","progress","dismiss","Dialog","ref","open","fullWidth","DialogTitle","DialogContent","column","ProgressBar","variant","striped","now","label","Typography","style","marginTop","DialogActions","Button","color","size","disabled","onClick","margin","Component","connect","state","uploadingStatus","dispatch","type","React","forwardedRef","black","white","red_700","dark_green","gray_50","gray_100","gray_200","gray_300","gray_400","gray_600","blue_gray_50","blue_gray_600","blue_gray_700","background_a","background_b","background_c","background_d","background_e","background_f","background_g","background_h","background_i","background_j","background_k","background_l","background_m","background_n","background_o","background_p","background_q","background_r","background_s","background_t","background_u","background_v","background_w","background_x","background_y","background_z","primaryColor","secondaryColor","errorColor","kick_starter_background_color","kick_starter_background_color_1","kick_starter_gray_box_border","sharedStyles","StyleSheet","create","nav_link_hover","appColors","textDecoration","cursor","nav_link_white_text_hover_without_changing_text_color","nav_link_hover_without_changing_text_color","page_title","marginLeft","hamburger_button","tab_title","textTransform","fontSize","kick_starter_border_box","border","boxShadow","no_text_transform","error_text","white_text","black_text","StyledTableCell","classes","makeStyles","root","background","cellColor","textColor","useStyles","TableCell","className","colSpan","component","SlideTransitionUp","Slide","direction","SlideTransitionDown","GROUP_PROPERTIES_CHILD","ADMINISTRATORS_CHILD","CLUB_ATTRIBUTES_CHILD","USERS_CHILD","PROJECTS_CHILD","ACTIVITIES_LOG_CHILD","INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD","REQUESTS_TO_JOIN_CHILD","CONTACT_US_ENQUIRIES_CHILD","MARKETING_PREFERENCES_CHILD","INVITED_USERS_CHILD","BUSINESS_PROFILE_CHILD","ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD","COMMENTS_CHILD","COMMENT_REPLIES_CHILD","PLEDGES_CHILD","VOTES_CHILD","PLEDGE_FAQS_CHILD","NOTIFICATIONS_CHILD","FORUMS_CHILD","FORUM_THREADS_CHILD","FORUM_THREAD_REPLIES_CHILD","LEGAL_DOCUMENTS_CHILD","LOGOS_CHILD","INTRO_VIDEOS_CHILD","PROFILE_PICTURES_CHILD","PROJECT_SUPPORTING_DOCUMENTS_CHILD","PROJECT_PRESENTATION_DOCUMENT_CHILD","PROJECT_COVER_CHILD","PROJECT_STATUS_DRAFT","USER_TITLES","FINANCIAL_ROUNDS","MAX_FILE_SIZE_IN_BYTES","MAX_VIDEO_OR_IMAGE_SIZE_IN_MB","MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES","MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS","STORAGE_FILE_NAME_ID_SPLIT","getCurrentDate","Date","getTime","getDateWithDaysFurtherThanToday","days","neededDate","currentDate","setDate","getDate","dateInReadableFormat","milliseconds","toLocaleDateString","dateTimeInReadableFormat","date","toLocaleTimeString","passwordBlacklist","checkPasswordStrength","password","strength","length","match","findIndex","badPassword","toLowerCase","convertQuillDeltaToHTML","ops","QuillDeltaToHtmlConverter","convert","dateDiff","Math","abs","toFixed","findAddress","postcode","a","addressQuery","Promise","resolve","reject","fetch","then","results","json","data","apiAddresses","formattedAddresses","error","addresses","forEach","address","push","formattedAddress","element","index","trim","slice","calculatePledgesAmount","pledges","pledgesAmount","pledge","amount","getNumberFromInputString","inputString","includes","commaSplits","split","invalidSeparator","part","commaFreeString","replace","isNaN","number","parseFloat","constructStorageFileName","document","newStorageID","originalName","file","name","nameSplits","DB_CONST","isValidLinkedInURL","url","startsWith","getLogoFromGroup","getLogoType","groupProperties","hasOwnProperty","plainLogo","logo","logoWithText","shouldAProjectBeEdited","user","project","status","id","issuerID","Pitch","isValidHexColorCode","hexColorCode","test","isValidWebURL","isProjectLive","isProjectInLivePitchPhase","isProjectInLivePledgePhase","isDraftProject","isProjectWaitingToGoLive","isProjectRejectedToGoLive","isProjectPitchExpiredWaitingForAdminToCheck","isProjectWaitingForPledgeToBeCreated","isProjectWaitingForPledgeToBeChecked","isProjectSuccessful","isProjectFailed","isProjectTemporarilyClosed","temporarilyClosed","CLOSE_FEEDBACK_SNACKBAR","closeFeedbackSnackbar","SET_FEEDBACK_SNACKBAR_CONTENT","setFeedbackSnackbarContent","message","position","RESET_STATES_WHEN_SNACKBAR_CLOSED","TOGGLE_EDIT_IMAGE_DIALOG","toggleEditImageDialog","getState","auth","SET_IMAGE_EDITOR_REFERENCE","LOADING_IMAGE_FILE","IMAGE_FILES_LOADED","LOADING_PREVIOUS_IMAGE","FINISHED_LOADING_PREVIOUS_IMAGE","IMAGE_ZOOM_CHANGED","CANCEL_EDITING_CURRENT_IMAGE","EDITED_IMAGE_OBTAINED","getEditedImage","imgEditor","getCroppingRect","x","getImage","toBlob","blob","CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE","uploadImage","editImageState","imgPreIndex","firebaseStorage","storage","firebaseDB","database","storageID","storageLocation","imgName","BusinessProfile","child","delete","myUtils","profilePicture","storageRef","uploadTask","put","on","snapshot","bytesTransferred","totalBytes","getDownloadURL","imgDownloadURL","imgUploadedObj","prevNodeImgs","firebaseRef","splice","imgItem","removed","set","waitForUploading","catch","EditImageDialog","renderSelectedPreviousPhotoStatus","msg","profilePic","align","isMobile","previousPhotos","imgPreEdited","imgPreEditedLoaded","imgEdited","imgZoom","onClose","setEditorReference","handleImageFilesChanged","handleImageFileError","handleSliderChanged","onPreviousImageItemClick","cancelEditingCurrentImage","viewEditedImagePreview","saveEditedImage","other","maxWidth","fullScreen","padding","Container","fluid","Row","noGutters","Col","xs","sm","md","lg","backgroundColor","colors","paddingTop","paddingBottom","paddingLeft","paddingRight","vAlignContent","grow","hAlignContent","IconButton","Divider","width","marginBottom","css","styles","img_drop_zone","onChange","onError","accepts","maxFileSize","minFileSize","multiple","clickable","marginRight","height","image","borderRadius","disableBoundaryChecks","disableHiDPIScaling","scale","top","zIndex","CircularProgress","Slider","min","max","step","value","Image","src","window","URL","createObjectURL","roundedCircle","thumbnail","objectFit","sort","photo1","photo2","map","previousPhoto","previous_img_item_selected","editImage","editImageDialogOpen","MediaQueryState","editImageActions","editor","files","manageFeedbackSnackbar","Blob","code","feedbackSnackbarActions","event","newValue","zoom","response","selectedIndex","textAlign","opacity","TOGGLE_EDIT_VIDEO_DIALOG","toggleEditVideoDialog","VIDEO_TYPE_CHOSEN","VIDEO_URL_CHANGED","VIDEO_FILE_CHANGED","CREATE_BUSINESS_PROFILE_SAVE_VIDEO","PREVIOUS_VIDEO_SELECTED","CANCEL_EDITING_CURRENT_VIDEO","uploadVideo","editVideoState","video","videoPreIndex","downloadedPreviousVideo","videoName","videoUploadedObj","dateUploaded","utils","putUploadedVideoToFirebaseRealtime","videoUploadTask","videoDownloadURL","prevNodeVideos","EditVideoDialog","renderSelectedPreviousVideoStatus","allowVideoUpload","videoTypeSelected","previousVideos","videoChosen","chooseVideoType","handleVideoURLChanged","handleVideoFileChanged","handleVideoFileError","cancelEditingCurrentVideo","handlePreviousVideoItemClick","handleSaveVideo","video_drop_zone","TextField","placeholder","playing","controls","video1","video2","previousVideo","playsinline","previous_video_item_selected","manageClubAttributes","clubAttributes","editVideo","editVideoDialogOpen","editVideoActions","videoType","target","PageNotFound","page_not_found_text","explain_text","fontWeight","PageNotFoundWhole","isAdmin","JSON","parse","stringify","getHomeGroup","groups","group","isHomeGroup","UserTitles","isIssuer","isInvestor","Routes","baseGroup","nonGroupFront","groupFront","nonGroupSignIn","groupSignIn","superAdminSignIn","nonGroupSignUp","groupSignUp","nonGroupAdminDashboard","groupAdminDashboard","groupIssuerDashboard","groupInvestorDashboard","nonGroupViewUserProfile","groupViewUserProfile","nonGroupEditUserProfile","groupEditUserProfile","nonGroupCreateOffer","groupCreateOffer","nonGroupViewOffer","groupViewOffer","nonGroupViewPledge","groupViewPledge","nonGroupViewGroup","groupViewGroup","nonGroupViewResourceDetail","groupViewResourceDetail","nonGroupContactUs","groupContactUs","groupHelp","nonGroupTermsOfUse","nonGroupPrivacyPolicy","nonGroupRiskWarning","nonGroupCreatePitchTermsAndConditions","nonGroupMarketingPreferences","nonGroupAuthAction","error404","isProtectedRoute","route","isRouteReservedForSuperAdmin","isGroupAdminRoute","isIssuerDashboardRoute","isInvestorDashboardRoute","isSignInRoute","isSuperAdminSignInRoute","isSignUpRoute","isErrorRoute","isSystemPublicRoute","constructPublicRoute","constructHomeRoute","routeParams","ManageGroupUrlState","AuthenticationState","currentUser","groupUserName","currentAdmin","superAdmin","groupsOfMembership","adminGroup","homeGroup","filter","groupOfMembership","constructSignInRoute","constructSignUpRoute","invitedUserID","constructContactUsRoute","constructDashboardRoute","constructProjectDetailRoute","projectID","constructCreateProjectRoute","params","undefined","edit","admin","issuer","constructGroupDetailRoute","viewedGroupUserName","constructViewResourceDetailRoute","resourceName","GROUP_PATH","FRONT","SIGN_IN","ADMIN","ADMIN_INVEST_WEST_SUPER","DASHBOARD_ISSUER","DASHBOARD_ISSUER_INVEST_WEST_SUPER","DASHBOARD_INVESTOR","DASHBOARD_INVESTOR_INVEST_WEST_SUPER","USER_PROFILE","USER_PROFILE_INVEST_WEST_SUPER","EDIT_USER_PROFILE","EDIT_USER_PROFILE_INVEST_WEST_SUPER","PLEDGE","PLEDGE_INVEST_WEST_SUPER","CREATE_OFFER","EDIT_OFFER","CREATE_OFFER_INVEST_WEST_SUPER","EDIT_OFFER_INVEST_WEST_SUPER","PROJECT_DETAILS","PROJECT_DETAILS_INVEST_WEST_SUPER","VIEW_GROUP_DETAILS","VIEW_GROUP_DETAILS_INVEST_WEST_SUPER","CONTACT_US","CONTACT_US_INVEST_WEST_SUPER","HELP","HELP_INVEST_WEST_SUPER","TERMS_OF_USE","PRIVACY_POLICY","CREATE_PITCH_TERMS_AND_CONDITIONS","ApiRoutes","retrieveSystemAttributesRoute","systemAttributesBaseRoute","updateSystemAttributesRoute","requestResetPasswordRoute","authBaseRoute","verifyAuthRoute","sendEmailRoute","emailBaseRoute","createUser","usersBaseRoute","retrieveUser","retrieveInvitedUser","updateUser","listGroupsOfMembership","exportUsersCsvRoute","listGroups","groupsBaseRoute","retrieveGroup","addMembersToGroup","listGroupMembers","listProjectsRoute","projectsBaseRoute","sendProjectBackToIssuerRoute","exportProjectsToCsvRoute","addGroupAdminRoute","groupAdminsBaseRoute","listAccessRequestsRoute","accessRequestsBaseRoute","removeAccessRequestRoute","createAccessRequestRoute","retrieveInvestorSelfCertificationRoute","investorSelfCertificationBaseRoute","uploadSingleFileRoute","fileBaseRoute","testRoute","AuthenticationStatus","Api","baseUrl","endPoint","queryParameters","fullUrl","buildQueryParameters","encodeURI","requestType","optionalParams","formDataRequest","Error","buildUrl","idToken","getIdToken","bodyData","requestBody","buildFormData","config","method","timeout","headers","_boundary","axios","request","parseResponse","parseError","console","log","statusCode","isRequestSuccessful","result","key","endsWith","toString","formData","FormData","append","httpError","detail","trackActivity","userID","activityType","interactedObjectLocation","interactedObjectID","activitySummary","action","time","FETCH_ACTIVITIES_BY_USER","fetchActivitiesBy","shouldLoadUserProfile","fetchBy","activitiesRef","orderByChild","equalTo","activities","once","snapshots","exists","val","numChildren","all","activity","getUserBasedOnID","userProfile","ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT","sendNotification","title","db","loadGroupAdminsBasedOnGroupID","groupID","groupAdmins","doesUserExist","email","userExists","userIsAnAdmin","loadGroupsUserIsIn","groupsUserIsIn","invitedUser","anid","invitedBy","userInGroupStatus","groupUserIsIn","angelNetwork","isInvestWest","groupDetails","loadAngelNetworkBasedOnANID","loadAngelNetworkBasedOnGroupUserName","loadAngelNetworks","angelNetworks","startAt","displayNameLower","loadAngelNetworksInvitedAUser","angelNetworksInvitedUser","Invitor","Invitee","angelNetworkInvitedUser","displayName","getUser","uid","createForum","forumObj","forumID","LOAD_LIVE_FORUMS","LOAD_DELETED_FORUMS","loadForums","forums","forum","deleted","author","editForum","editedForum","update","deleteForum","createThread","threadObj","threadID","editThread","editedThread","deleteThread","LOAD_LIVE_THREADS","loadThreads","forumSelected","threads","thread","createThreadReply","replyObj","replyID","editThreadReply","editedThreadReply","deleteThreadReply","threadReplyID","loadThreadReplies","threadSelected","replies","reply","loadClubAttributes","loadInvitedUsers","invitedUsers","officialUserID","officialUser","loadRequestsToJoin","requestsRef","requests","groupToJoin","getInvitedUserBasedOnIDOrEmail","idOrEmail","loadAParticularProject","loadPledges","LOAD_PLEDGES_ORDER_BY_PROJECT","toggleProjectLivelinessTemporarily","shouldSendNotificationForIssuer","projectBeforeUpdating","projectName","ROUTES","before","after","loadVotes","LOAD_VOTES_ORDER_BY_PROJECT","votes","listOfInvestorsToBeNotified","vote","investorID","notifications","notification","makeProjectGoLiveDecision","decisionObj","projectBeforeDecision","decision","visibility","projectVisibilitySetting","emailType","emailInfo","makeProjectGoToPledgePhaseDecision","makeProjectPledgeGoLiveDecision","PrimaryOffer","loadComments","comments","comment","commentedBy","pledgesRef","investor","votesRef","voted","loadNotifications","deleteAllNotifications","remove","loadMarketingPreferences","marketingPreferencesRef","marketingPreferences","marketingPreference","updateMarketingPreferencesSetting","field","accepted","settings","updateGroupPropertiesSetting","bringPitchBackToLive","newPitchExpiryDate","expiredDate","CHANGE_PASSWORD_TEXT_CHANGED","RESET_CHANGE_PASSWORD","RE_AUTHENTICATING_USER","ERROR_CHANGING_PASSWORD","changePassword","passwords","newPassword","newPasswordVerified","PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED","PASSWORD_CHANGE_NOT_STRONG_ENOUGH","signInWithEmailAndPassword","currentPassword","credential","updatePassword","PASSWORD_CHANGE_SUCCESS","PASSWORD_CHANGE_FAIL","PASSWORD_CHANGE_RE_AUTH_FAILED","ChangePasswordPage","passwordChangeResponseCode","handleTextChanged","reset","requestChangePassword","responseCode","onCloseMessage","PasswordUpdate","renderMessage","changing_password_text_background","changePasswordActions","realtimeDBUtils","errorCode","SET_GROUP_USER_NAME_FROM_PARAMS","setGroupUserNameFromParams","manageGroupFromParams","SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING","setExpectedAndCurrentPathsForChecking","expectedPath","currentPath","LOADING_ANGEL_NETWORK","ANGEL_NETWORK_LOADED","loadAngelNetwork","groupPropertiesLoaded","angelNetworkBeingLoaded","firebaseUser","shouldLoadOtherData","angelNetworkListener","ANGEL_NETWORK_PROPERTIES_CHANGED","HeaderWithoutDesc","authStatus","span","order","AUTH_SUCCESS","to","navigation_text","widht","logo_field","alt","require","default","href","manageGroupFromParamsActions","Signin","setState","resetPassword","handleSignin","preventDefault","resetEmailSent","signin","openResetPasswordDialog","resetPasswordDialogOpen","handleCloseResetPasswordDialog","resetEmail","resetChecking","resetError","handleSendResetEmail","sendPasswordResetEmail","handleClickShowPassword","showPassword","renderAuthStatus","authenticating","reset_email_sent","errorMsg","auth_error","firebaseAuth","resetAuthStatus","path","prevProps","prevState","history","pathname","search","overflow","offset","Paper","elevation","square","onSubmit","paragraph","FormControl","InputProps","endAdornment","InputAdornment","edge","aria-label","onTextChanged","onSendEmailClick","ResetPasswordDialog","userLoaded","authActions","handleClose","renderReset","reset_email_error_text","reset_password_actions_layout","no_margin","hover","INITIALIZE_AUTH_STATE","RESET_AUTH_STATUS","SIGNING_IN","AUTHENTICATING","FINISHED_AUTHENTICATING","logOutWithIndirectDispatch","TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP","USER_PROFILE_LOADED","AUTH_LOADING_GROUPS_USER_IS_IN","AUTH_GROUPS_USER_IS_IN_LOADED","signOut","LOG_OUT","logout","userListener","groupsUserIsInListener","CURRENT_USER_PROFILE_HAS_CHANGED","GROUPS_USER_IS_IN_HAVE_CHANGED","TOGGLE_SIDEBAR","toggleSidebar","checkSidebarDocked","isLaptop","isDesktop","sidebarDocked","dashboardSidebar","sidebarOpen","LOADING_FORUMS","FINISHED_LOADING_FORUMS","ERROR_LOADING_FORUMS","GO_BACK_TO_FORUMS_MAIN","TOGGLE_CREATE_NEW_FORUM","toggleCreateNewForum","forumEdited","ERROR_CREATING_NEW_FORUM","FORUMS_INPUT_CHANGED","handleForumsInputChanged","targetName","targetValue","manageForums","LOADING_THREADS_IN_A_FORUM","FINISHED_LOADING_THREADS_IN_A_FORUM","GO_BACK_TO_FORUMS_LIST","TOGGLE_CREATE_NEW_THREAD","toggleCreateNewThread","threadEdited","ERROR_CREATING_NEW_THREAD","LOADING_REPLIES_IN_A_THREAD","FINISHED_LOADING_REPLIES_IN_A_THREAD","GO_BACK_TO_THREADS_LIST","TOGGLE_THREAD_REPLY","toggleThreadReply","threadReplyEdited","ERROR_CREATING_THREAD_REPLY","MANAGE_FORUMS_TABLE_PAGE_CHANGED","changePage","table","newPage","MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED","changeRowsPerPage","parseInt","FORUMS_QUILL_CHANGED","THREAD_CONTENT_QUILL","THREAD_REPLY_CONTENT_QUILL","handleQuillChanged","getText","quill","getContents","forumsListener","forumThreadsListener","forumThreadRepliesListener","FORUMS_CHANGED","stopListeningForForumsChanged","off","THREADS_CHANGED","stopListeningForThreadsChanged","THREAD_REPLIES_CHANGED","stopListeningForThreadRepliesChanged","AuthenticationEvents","initialState","NotInitialized","authIsNotInitialized","isAuthenticating","Authenticating","successfullyAuthenticated","Authenticated","hasAuthenticationError","authenticationReducer","StartAuthenticating","CompleteAuthentication","completeAuthenticationAction","selfCertification","SignOut","Unauthenticated","UpdateUserChanges","updateUserChangesAction","updatedUser","InvestorSelfCertificationRepository","UserRepository","ManageGroupUrlEvents","signIn","authenticationCompleteAction","currentFirebaseUser","setPersistence","Firebase","Auth","Persistence","LOCAL","retrieveUserResponse","validSuperAdminSignIn","routePath","getInvestorSelfCertification","selfCertificationResponse","listGroupsOfMembershipResponse","HOME_TAB","PROFILE_TAB","MY_OFFERS_TAB","SETTINGS_TAB","CHANGE_PASSWORD_TAB","RESOURCES_TAB","EXPLORE_GROUPS_TAB","EXPLORE_OFFERS_TAB","MY_ACTIVITIES_TAB","GROUP_ACTIVITIES_TAB","SidebarContent","onLogoutClick","dashboardProps","signOutNew","onForumsTabClick","goBackToForumsMain","List","ListItem","button","ListItemIcon","ListItemText","School","dashboardSidebarActions","LetterAvatar","getBackgroundColor","firstName","lastName","textVariant","Avatar","toUpperCase","JSON_COMPARE_CHANGES_DIALOG_SET_DATA","JSON_COMPARE_CHANGES_DIALOG_RESET_DATA","JSONCompareChangesDialog","dialogOpen","jsonBefore","jsonAfter","resetData","theme","collapseStringsAfterLength","enableClipboard","copy","navigator","clipboard","writeText","manageJSONCompareChangesDialog","ACTIVITIES_TABLE_SET_TABLE_USER","setTableUser","newUser","prevTableUser","manageActivitiesTable","tableUser","ACTIVITIES_TABLE_LOADING_ACTIVITIES","ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES","ACTIVITIES_TABLE_PAGE_CHANGED","ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED","activitiesListener","ACTIVITIES_IN_TABLE_CHANGED","stopListeningForActivitiesChanged","ActivitiesTable","loadData","loadingActivities","activitiesLoaded","loadActivities","addListener","startListeningForActivitiesChanged","renderTableRows","page","rowsPerPage","jsonCompareDialog_setData","TableRow","activity1","activity2","overflowX","Table","TableHead","TableBody","TableFooter","TablePagination","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","SelectProps","native","onChangePage","onChangeRowsPerPage","allActivities","groupAdmin","activitiesTableActions","existingActivity","adminIndex","manageJSONCompareChangesActions","ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED","REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED","TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED","BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED","SEARCHING_REGISTERED_OFFICE_ADDRESSES","DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES","SEARCHING_TRADING_ADDRESSES","DONE_SEARCHING_TRADING_ADDRESSES","SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS","SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS","TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE","CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION","TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR","putBusinessProfileToFirebaseDB","businessProfile","registeredOffice","tradingAddress","SET_ORIGINAL_USER_AND_EDITED_USER","setOriginalUserAndEditedUser","previouslySetUser","editUser","originalUser","allowEditing","userHomeGroup","requestedToJoin","EDIT_PERSONAL_INFORMATION","EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION","EDIT_TRADING_ADDRESS_BUSINESS_PROFILE","EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE","ADDING_NEW_DIRECTOR","TOGGLE_ADD_NEW_DIRECTOR","ADD_NEW_DIRECTOR_TEMPORARILY","DELETE_DIRECTOR_TEMPORARILY","RESET_PERSONAL_INFORMATION","RESET_BUSINESS_PROFILE","COMMIT_PERSONAL_INFORMATION_CHANGES","COMMIT_BUSINESS_PROFILE_CHANGES","originalUserListener","EDIT_USER_ORIGINAL_USER_CHANGED","stopOriginalUserChangedListener","FILE_UPLOAD_CHANGED","FILE_UPLOAD_ERROR","CLOSE_FILE_UPLOAD_ERROR_SNACKBAR","RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED","DELETE_UPLOADED_LEGAL_DOCUMENT","DELETE_UPLOADED_PITCH_COVER","DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","DELETE_TO_BE_UPLOADED_FILE","DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_COVER","DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_A_LEGAL_DOCUMENT","FINISHED_UPLOADING_A_PITCH_COVER","FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT","FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_ALL_FILES","uploadIndividualFile","totalFiles","fileRef","storageFileName","extension","fileDownloadURL","percentDone","legalDocument","fileName","readableSize","sizeReadable","downloadURL","fileDBRef","formattedCover","fileType","fileExtension","formattedPresentationDocument","formattedSupportingDocument","putFilesReferencesToDatabase","legalDocumentsUserID","legalDocuments","existingLegalDocuments","filesDBReferences","uploadFiles","filesReferencesToBeUploaded","LEGAL_DOCUMENTS_SET_USER","LOADING_LEGAL_DOCUMENTS","FINISHED_LOADING_LEGAL_DOCUMENTS","legalDocumentsListener","LEGAL_DOCUMENTS_CHANGED","INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER","setUser","manageInvestorSelfCertificationAgreement","LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT","FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT","loadInvestorSelfCertificationAgreement","INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED","UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT","INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED","GroupRepository","FetchProjectsOrderByOptions","FetchProjectsPhaseOptions","groupNameFromUrl","groupLoaded","loadingGroup","groupRouteTheme","defaultTheme","validGroupUrl","isValidatingGroupUrl","routeContainsGroupName","successfullyValidatedGroupUrl","getGroupRouteTheme","manageGroupUrlReducer","SetGroupUrl","setGroupUrlAction","ValidatingGroupUrl","FinishedValidatingGroupUrl","finishedValidatingGroupUrlAction","responsiveFontSizes","createMuiTheme","palette","primary","main","secondary","text","blueGrey","typography","fontFamily","OffersTableEvents","OfferRepository","options","link","createElement","download","setAttribute","body","appendChild","click","removeChild","ExploreOffersEvents","fetchOffers","OffersTableLocalState","tableUserGroupsOfMembership","visibilityFilter","groupFilter","phaseFilter","fetchOffersOptions","phase","completeAction","CompleteFetchingOffers","offerInstances","shouldFetchOffers","orderBy","Issuer","Investor","Group","FetchingOffers","filterOffersByName","nameFilter","FilterOffersByName","isFilteringByName","offerInstance","projectDetail","offerInstancesFilteredByName","fetchingOffers","offersFetched","filteringOffersByName","currentPage","exportingCsv","isFetchingOffers","successfullyFetchedOffers","hasOffersForCurrentFilters","isFilteringOffersByName","hasErrorFetchingOffers","hasErrorExportingCsv","errorExportingCsv","hasGroupsSelect","groupsSelect","offersTableReducer","SetTableUser","setTableUserAction","completeFetchingOffersAction","FilterChanged","filterChangedAction","filterOffersByNameAction","CancelFilteringOffersByName","ChangePage","changePageAction","ChangeRowsPerPage","changeRowsPerPageAction","ExportingCsv","CompleteExportingCsv","completeExportingCsvAction","CustomLink","link_style","childComponent","activeColor","activeUnderline","isDraftProjectNotSubmitted","isProjectCreatedByGroupAdmin","createdByGroupAdmin","isImagePitchCover","pitchCover","isProjectPublic","isProjectRestricted","isProjectPrivate","shouldHideProjectInformationFromUser","isProjectOwner","toRGBWithOpacity","rgbColor","colorString","get","rgb","hex","OffersTable","directTableUser","filterChanged","cancelFilteringOffersByName","exportCsv","tableAdmin","TableContainer","Box","ImportExportOutlined","CreateOutlined","display","alignItems","bgcolor","grey","InputBase","startAdornment","justifyContent","Refresh","paddingY","Select","input","OutlinedInput","MenuItem","LivePitch","TemporarilyClosed","ExpiredPitch","flexDirection","fundRequired","Number","toLocaleString","postedDate","ManageSystemAttributesState","currentTableUser","shouldSetTableUser","groupsOfMembershipResponse","isTableAdminUser","fetchGroups","allGroupsResponse","Footer","paddingX","borderTop","borderColor","minHeightScreen","bottom","marginY","Profile","legalDocuments_userID","userLegalDocumentsLoaded","userLegalDocumentsBeingLoaded","investorSelfCertificationAgreement_userID","investorSelfCertificationAgreementLoaded","investorSelfCertificationAgreementBeingLoaded","legalDocuments_setUserID","getUserLegalDocuments","investorSelfCertificationAgreement_setUser","handleEditUser","editUserLocally","property","handleCreateBusinessProfileTextChanged","fieldType","toggleTradingAddressSameAsRegisteredOffice","checked","handleFilesChanged","deleteToBeUploadedFile","deleteUploadedFile","renderSelfCertificationAgreement","investorSelfCertificationAgreement","investorSelfCertificationAgreementCheckBox1Checked","investorSelfCertificationAgreementCheckBox2Checked","investorSelfCertificationAgreementCheckBox3Checked","investorSelfCertificationAgreementStatementType","investorSelfCertificationAgreement_handleCheckBoxChanged","investorSelfCertificationAgreement_handleStatementTypeChanged","setInvestorSelfCertificationAgreement","agreedDate","maxHeight","overflowY","FormGroup","row","FormControlLabel","control","Checkbox","labelPlacement","renderBusinessProfile","userEdited","createBusinessProfile","addNewDirector","newDirectorText","searchAddress","toggleEnterAddressManually","resetCreatingBusinessProfile","handleRecommendedAddressSelected","toggleExpandBusinessProfileFillingForInvestor","uploadBusinessProfile","logoItem","videoItem","FormLabel","companyName","editUserActions","registrationNo","address1","address2","address3","townCity","sector","Sectors","directors","director","ListItemSecondaryAction","deleteDirectorTemporarily","toggleAddNewDirector","addNewDirectorTemporarily","companyWebsite","cancelEditingUser","commitUserProfileChanges","expandBusinessProfileFilling","required","createBusinessProfileActions","FormHelperText","registeredOfficeSearchPostcode","disableRipple","registeredOfficeEnterAddressManually","registeredOfficeRecommendedAddresses","address_list","enter_address_manually","tradingAddressSameAsRegisteredOffice","tradingAddressSearchPostcode","tradingAddressEnterAddressManually","tradingAddressRecommendedAddresses","upload_files_area_style","logoToBeUploaded","OverlayTrigger","trigger","placement","flip","overlay","Tooltip","videoToBeUploaded","shouldUploadButtonBeDisabled","startListeningForLegalDocumentsChanged","stopListeningForLegalDocumentsChanged","linkedin","checkBox1Ticked","checkBox2Ticked","checkBox3Ticked","statementType","userLegalDocuments","legalDocumentsLoaded","legalDocumentsBeingLoaded","toBeUploadedLegalDocuments","filesToBeUploaded","fileUploadErrorMessage","fileUploadErrorSnackbarOpen","fieldName","fieldValue","selectedAddress","Object","assign","isEditingExistingBusinessProfile","userRef","investorSelfCertificationAgreementsActions","agreementObject","agreement","legalDocumentsActions","updatedLegalDocuments","doc","reader","FileReader","addEventListener","fileRead","preview","LegalDocuments","readAsDataURL","uploadFilesActions","handleFileError","errorMessage","charAt","closeFileUploadSnackbarError","resetErrorMessageWhenFileUploadSnackbarExited","updatedFilesToBeUploaded","pitchPresentationDocument","pitchSupportingDocuments","updateLegalDocuments","waitingForUploadingReferences","TOGGLE_NOTIFICATIONS","toggleNotifications","notificationsAnchorEl","manageNotifications","notificationsClickedOutside","notificationsClickedOutsideActivated","currentTarget","CLOSED_NOTIFICATIONS","LOADING_NOTIFICATIONS","FINISHED_LOADING_NOTIFICATIONS","notificationsListener","NOTIFICATIONS_LIST_CHANGED","NotificationsBox","loadingNotifications","notificationsLoaded","startListeningForNotificationsChanged","stopListeningForNotificationsChanged","closeNotifications","deleteANotification","ClickAwayListener","onClickAway","mouseEvent","Popper","Boolean","anchorEl","disablePortal","transition","modifiers","enabled","preventOverflow","boundariesElement","TransitionProps","Fade","clear_all_text","minHeight","notifications_placeholder_icon","notification1","notification2","divider","notification_item","notification_item_icon","notificationsActions","existingNotification","notificationIndex","ExploreGroupsEvents","ExploreOffersLocalState","searchFilter","sectorFilter","maxOffersPerPage","successfullyFetchedOffers2","isSearchFilterActive","exploreOffersReducer","ClearSearchFilter","PaginationChanged","paginationChangedAction","getGroupLogo","CoverMaxHeight","OfferItem","cover","getPitchCover","light","right","noWrap","description","RiskWarning","systemAttributes","riskWarningFooter","splits","join","urlText","whiteSpace","ExploreOffers","Phase","clearSearchFilter","paginationChanged","onSearchEnter","paginationPages","paginationIndices","startIndex","endIndex","calculatePaginationIndices","Pagination","Visibility","Sector","AccessRequestRepository","requestID","ClientEmailTypes","ExploreGroupsLocalState","accessRequestsInstances","FetchingGroups","CompleteFetchingGroups","groupsResponse","fetchAccessRequests","accessRequestInstancesResponse","accessRequestInstances","filterGroupsByGroupFilter","groupsFiltered","satisfiedFilter","accessRequestInstance","FilterGroupsByGroupFilter","maxGroupsPerPage","fetchingGroups","groupsFetched","filteringGroupsByName","isFetchingGroups","successfullyFetchedGroups","isFilteringGroupsByName","hasGroupsForCurrentFilters","isSendingAccessRequest","sendingAccessRequestToGroup","isRemovingAccessRequest","removingAccessRequestFromGroup","exploreGroupsReducer","completeFetchingGroupsAction","FilterGroupsByName","CancelFilterGroupsByName","filterGroupsByGroupFilterAction","SendingAccessRequest","sendingAccessRequestAction","errorSendingAccessRequest","CompleteSendingAccessRequest","completeSendingAccessRequestAction","updatedAccessRequestInstances","RemovingAccessRequest","removingAccessRequestAction","errorRemovingAccessRequest","CompleteRemovingAccessRequest","completeRemovingAccessRequestAction","GroupItem","sendAccessRequest","removeAccessRequest","groupMember","find","hasRequestedToAccessGroup","Card","CardActionArea","CheckCircle","CardActions","sendingAction","createAccessRequest","currentAccessRequestInstances","removingAction","accessRequestIndex","accessRequest","ExploreGroups","filterGroupsByName","cancelFilteringGroupsByName","xl","FeedbackSnackbarEvents","EmailRepository","FeedbackSnackbarTypes","openFeedbackSnackbar","Open","snackbarType","ResourcesEvents","Success","feedbackSnackbarReducerNew","openFeedbackSnackbarAction","Close","ManageSectorsEvents","toggleContactResourceDialog","DetailedPageToggleContactDialog","detailedPageContactDialogOpen","detailedPageSendingContactEmail","isDetailedPageSendingContactEmail","resourcesReducer","DetailedPageSendingContactEmail","detailedPageErrorSendingContactEmail","DetailedPageCompleteSendingContactEmail","detailedPageCompleteSendingContactEmailAction","ContactResourceDialog","resourceEmail","ResourcesLocalState","toggle","sendContactEmail","receiver","sender","userName","userCompanyName","sendEmail","ContactResource","FeedbackSnackbarNew","FeedbackSnackbarLocalState","close","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","TransitionComponent","transitionDuration","enter","exit","Alert","severity","keltieLogo","sullivanFountainImg","richardLawrenceImg","keltieDocuments","keltieVideos","Keltie","AttachFile","clone","ResourceItem","resource","founderCatalystLogo","justynWaterworthImg","samSimpsonImg","charlesFrankImg","founderCatalystResources","FounderCatalyst","grantFundingLogo","grantFundingResources","img","GrantFunding","MerixSolution","MerixSolution3","MerixStudioResources","MerixStudio","resources","Resources","IssuerDashboard","setDataForComponents","editUserProfile_userEdited","editUserProfile_setOriginalUserAndEditedUser","renderPageContent","queryString","location","tab","renderPageTitle","sidebar","shadow","docked","onSetOpen","transitions","content","Badge","badgeContent","invisible","InvestorDashboard","clubAttributesLoaded","isValidEmailAddress","serverURL","requestConfig","post","TOGGLE_INVITATION_DIALOG","toggleInvitationDialog","INVITATION_DIALOG_INPUT_CHANGED","INVITATION_DIALOG_SEND_BUTTON_CLICKED","INVITATION_DIALOG_SEND_RESULT_CHANGED","SEND_INVITATION_PROCESSING","SEND_INVITATION_INVITED_BEFORE","SEND_INVITATION_USER_CANNOT_BE_INVITED","SEND_INVITATION_ERROR_HAPPENED","SEND_INVITATION_SUCCESS","InvitationDialog","renderRespondCode","sendResult","sendStatusExtraInfo","res","invitationDialogOpen","userType","sendButtonClick","handleInputChanged","sendInvitation","disableTypography","RadioGroup","Radio","manageInvitationDialog","invitationDialogActions","currentGroupAdmin","invitedBefore","userIsAnIssuerOfAnotherGroup","extraInfo","invitedID","invitedDate","emailUtils","groupName","groupLogo","groupWebsite","website","websiteURL","receiverName","signupURL","SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED","SUPER_ADMIN_SETTINGS_INPUT_CHANGED","SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED","SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","SystemAttributesRepository","ManageSystemAttributesEvents","setSectors","sectors","SetSectors","toggleAddNewSector","ToggleAddNewSector","DocumentsDownloadEvents","systemAttributesLoaded","loadingSystemAttributes","isLoadingSystemAttributes","manageSystemAttributesReducer","LoadingSystemAttributes","FinishedLoadingSystemAttributes","finishedAction","addingNewSector","newSector","savingSectors","isSavingSectorsChanges","manageSectorsReducer","setSectorsAction","AddNewSectorTextChanged","addNewSectorTextChangedAction","SavingSectorsChanges","errorSavingSectors","CompletedSavingSectorsChanges","completedSavingSectorsChanges","ManageSectors","ManageSectorsLocalState","addNewSector","deleteSector","saveSectorsChanges","cancelSectorsChanges","eSector","updateSystemAttributes","SuperAdminSettings","handleExpandPledgeFAQPanel","FAQ","isExpanded","handleQuillEditorChanged","delta","source","initializeClubAttributesEdited","clubAttributesEdited","addNewPledgeFAQ","addedPledgeQuestion","addedPledgeAnswer","expandedPledgeFAQ","editExpandedPledgeFAQ","editedPledgeQuestion","editedPledgeAnswer","toggleAddNewPledgeFAQ","submitNewPledgeFAQ","toggleEditExpandedPledgeFAQ","saveEditedPledgeFAQ","deleteExistingPledgeFAQ","saveEditedQuill","supportEmail","multiline","rowsMax","ExpansionPanel","frequently_asked_question_box","expanded","ExpansionPanelSummary","expandIcon","question","ExpansionPanelDetails","answer","modules","privacyPolicy","termsOfUse","rows","riskWarning","createPitchTermsAndConditions","superAdminSettings","isPropertyOfClubAttributes","superAdminSettingsActions","faq","editedFAQ","toolbar","GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED","GROUP_ADMIN_SETTINGS_CHANGED","GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR","GroupAdminSettings","initializeGroupAttributesEdited","groupAttributesEdited","groupDescription","handlePitchExpiryDateChanged","handleSavePitchExpiryDate","handleCancelEditingPitchExpiryDate","saveGroupDetails","cancelEditingGroupDetails","saveColor","cancelEditingColor","helperText","autoOk","inputVariant","format","minDate","defaultPitchExpiryDate","InputAdornmentProps","projectVisibility","groupAdminSettings","isPropertyOfGroupAttributes","updateValue","shouldUpdateDatabase","groupAdminSettingsActions","NaN","groupSettings","InfoOverlay","LOADING_INVITED_USERS","FINISHED_LOADING_INVITED_USERS","INVITED_USERS_TOGGLE_SEARCH_MODE","INVITED_USERS_SEARCH_VARIABLE_CHANGED","getUpdatedInvitedUsers","sourceInvitedUsers","searchText","filterRegistrationStatus","filterUserType","filterMembers","filterGroup","currentGroupProperties","matchedInvitedUsers","satisfiedRegistrationStatusFilter","satisfiedUserTypeFilter","satisfiedGroupMembersFilter","satisfiedGroupFilter","FILTER_REGISTRATION_STATUS_ALL","FILTER_GROUP_MEMBERS_ALL","FILTER_HOME_MEMBERS","FILTER_PLATFORM_MEMBERS","INVITED_USERS_CHANGE_PAGE","INVITED_USERS_CHANGE_ROWS_PER_PAGE","INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED","INVITED_USERS_REQUESTING_CSV_STATE_CHANGED","invitedUsersListener","INVITED_USERS_CHANGED","InvitedUsers","invitedUsersLoaded","startListeningForInvitedUsersChanged","renderInvitedUsersRows","invitedUsersPage","invitedUsersRowsPerPage","invitedUsersInSearchMode","resendInvite","renderedInvitedUsers","matchedUsersInvitedByTheGroup","user1","user2","matchedUsersRequestedToJoin","requestedToJoinDate","renderInvitedUserRegistrationStatus","joinedDate","msgObj","invitedUsersBeingLoaded","invitedUserSearchText","systemGroups","groupsLoaded","requestingCsv","addingMembersFromOneGroupToAnotherGroup","toggleSearchMode","exportToCsv","addMembersFromOneGroupToAnotherGroup","InputLabel","labelWidth","basis","renderInvitedUsersTable","handleChangeTablePage","handleChangeTableRowsPerPage","manageSystemGroups","prevMatchedInvitedUsers","newSearchText","newRegistrationStatusFilter","newUserTypeFilter","newGroupFilter","newMembersFilter","invitedUsersActions","shouldAddInvitedUser","existingInvitedUser","shouldChangeInvitedUser","invitedUserIndex","fromGroup","toGroup","addUserType","AddAngelNetworkDialog","uploadMode","uploadProgress","addAngelNetworkDialogOpen","angelNetworkName","angelNetworkUsername","loadingPlainLogo","imgUploadError","loadingLogoWithText","imgUploadErrorSnackbarOpen","addButtonClicked","toggleAddAngelNetworkDialog","addNewAngelNetwork","closeErrorSnackbar","resetImageFileErrorMessageWhenSnackbarExited","onExited","SnackbarContent","manageAddAngelNetworkDialog","addResult","addAngelNetworkDialogActions","TOGGLE_ADD_ANGEL_NETWORK_DIALOG","ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED","handleAddAngelNetworkInputChanged","ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED","ADD_ANGEL_NETWORK_RESULT_CHANGED","uploadLogo","uploadedPlainLogo","uploadedLogoWithText","newGroupProperties","dateAdded","makeInvestorsContactDetailsVisibleToIssuers","adder","newGroupAdminEmail","ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE","ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED","ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR","ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR","closeImageFileErrorSnackbar","ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED","LOADING_ANGEL_NETWORKS","FINISHED_LOADING_ANGEL_NETWORKS","ANGEL_NETWORKS_TABLE_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_INPUT_CHANGED","TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE","angelNetworksListener","ANGEL_NETWORKS_IN_TABLE_CHANGED","AngelNetworks","inComponentDidMount","loadingAngelNetworks","angelNetworksLoaded","startListeningForAngelNetworksChanged","renderAngelNetworksTable","inSearchMode","handleAngelNetworksTableInputChanged","angelNetwork1","angelNetwork2","renderAngelNetworkRows","matchedAngelNetworks","renderedAngelNetworks","stopListeningForAngelNetworksChanged","manageAngelNetworks","angelNetworksActions","existingAN","angelNetworkIndex","MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE","MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED","joinRequestsListener","MANAGE_JOIN_REQUESTS_CHANGED","stopListeningForJoinRequestsChanged","JoinRequests","loadingJoinRequests","joinRequestsLoaded","loadJoinRequests","attachListener","joinRequests","startListeningForJoinRequestsChanged","renderJoinRequestsRows","matchedJoinRequests","acceptJoinRequest","rejectJoinRequest","renderedJoinRequests","joinRequest","requestedDate","handleJoinRequestsTableInputChanged","joinRequest1","joinRequest2","manageJoinRequests","manageJoinRequestsActions","pushKey","existingJoinRequest","GROUP_ADMINS_TABLE_SET_GROUP","GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_PAGE_CHANGED","GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE","GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG","GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED","groupAdminsListener","GROUP_ADMINS_TABLE_CHANGED","stopListeningForGroupAdminsChanged","ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL","ADD_NEW_GROUP_ADMIN_STATUS_CHECKING","ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED","GroupAdminsTable","tableGroup","loadingGroupAdmins","groupAdminsLoaded","loadGroupAdmins","addListeners","startListeningForGroupAdminsChanged","getRenderedGroupAdmins","superGroupAdmin","searchedGroupAdmins","groupAdmin1","groupAdmin2","addNewGroupAdminDialogOpen","addNewGroupAdminStatus","handleAddNewGroupAdmin","toggleAddNewGroupAdminDialog","fli","manageGroupAdminsTable","groupAdminsTableActions","existingGroupAdmin","newGroupAdmin","AddGroupAdminDialog","renderStatusMessage","tex","AdminDashboard","activitiesTable_setUser","groupAdminsTable_setGroup","projectsAwaitingDecision","Accordion","card_style","AccordionSummary","AccordionDetails","card_details_expansion","currentUserLoaded","onMouseDown","AddAngelNetWorkDialog","newGroup","prevTableGroup","onDeleteDocument","documents","preview_icon","file_name","file_size","DocumentsDownload","onDocumentClick","deleteEnable","rel","SELECT_PROJECT_VISIBILITY_SET_PROJECT","setProject","HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED","handleProjectVisibilityChanged","SelectPitchVisibility","manageSelectProjectVisibility","selectProjectVisibilityActions","initState","recoveredFromPreviousState","projectBeforeEdited","projectEdited","projectEditedLoaded","requestToLoadData","projectIDToBeLoadedAfterSavingFirstTime","saveProgress","progressBeingSaved","draftBeingDeleted","createProject","activeStep","groupIssuerCreateOfferFor","pitchSector","pitchProjectName","pitchProjectDescription","pitchExpiryDate","pitchAmountRaisedToDate","pitchRaiseRequired","howFundIsBeingRaised","financialRound","pitchPostMoneyValuation","detailsAboutEarlierFundraisingRounds","pitchInvestorsCommitted","hasRaisedMoneyBefore","pitchCoverVideoURL","pitchCoverTypeSelected","pitchPresentationText","pitchPresentationPlainText","pitchPublishCheck","pitchNextStepButtonTarget","pitchPublishErrorMessageShowed","uploadFileProgress","uploadFileMode","openUploadingProgressDialog","acceptedTermsAndConditions","agreedToShareRaisePublicly","agreedToReceiveLocalInvestmentInfo","qibSpecialNews","CreatePitchPageMain","navigateToTheSamePageWithActiveStepSaved","selectProjectVisibility_setProject","projectEditedSaveModeRefListener","orderByKey","amountRaised","postMoneyValuation","investorsCommitted","presentationText","handleNextStepClick","coverItem","presentationDocument","uploadProject","handleSaveProgressClick","handleBackClick","handleSelectPitchCoverTypeClick","supportingDocuments","handleCreatePitchInputChanged","handlePitchEditorChanged","presentationItem","projectRef","projectStorageRef","uploadMultipleFiles","successful","updatedProject","edited","totalRaise","pitchSupportingDocumentsRealtimeDB","presentationPlainText","pitchPresentationDocumentRealtimeDB","pitchCoverRealtimeDB","acceptedTCsObj","projectObj","filesArray","pitchStorageRef","docRef","handleDeleteDocument","attachNextStepButtonRef","handlePopoverErrorMessageClose","handleDownloadDocumentDeleteClick","updatedProjectEdited","handleCloseErrorSnackbar","reason","errorSnackbarOpen","handleDateChanged","handleCheckboxChanged","handleDeleteDraftClick","deleteMultiplesOnStorage","selectedProjectVisibilitySetting","reload","deleteASingleFileOnStorage","previousState","createProjectState","onSelectPitchCoverTypeClick","onFilesChanged","onFilesError","onInputChanged","onPitchEditorChanged","onPopoverErrorMessageClose","onNextStepClick","onBackClick","onDownloadDocumentDeleteClick","onDateChanged","onCheckboxChanged","onSaveProgressClick","onDeleteDraftClick","CreateProject","renderPitchPublishErrorMessage","Stepper","alternativeLabel","Step","StepLabel","round","playsInline","file_drop_zone","Overlay","show","Popover","Fab","thickness","left","renderUploadFileMode","ProfilePageViewOnly","userToBeViewed","userToBeViewedLoaded","userToBeViewedInvitedLoaded","loadingUserToBeViewed","loadUserToBeViewedProfile","userToBeViewedID","userToBeViewedInvited","renderUserStatus","statusMessage","pictureItem","divider_style","SelectPledgeVisibility","TOGGLE_CREATE_PLEDGE_DIALOG","toggleCreatePledgeDialog","CREATE_PLEDGE_DIALOG_SET_PROJECT","CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED","CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED","CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED","CREATE_PLEDGE_STATUS_VALID","CREATE_PLEDGE_STATUS_MISSING_FIELDS","CREATE_PLEDGE_STATUS_INVALID_FUND","CREATE_PLEDGE_STATUS_INVALID_DATE","CreatePledgeDialog","renderCreatePledgeError","createStatus","extraNotes","createPledge","AppBar","Toolbar","manageCreatePledgeDialog","creatPledgeDialogActions","primaryOfferObj","shouldSendNotificationToIssuer","MANAGE_PLEDGES_TABLE_SET_PROJECT","MANAGE_PLEDGES_TABLE_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE","MANAGE_PLEDGES_TABLE_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_INPUT_CHANGED","pledgesListener","MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED","ContactPitchOwnerDialogEvents","shouldShowRiskWarningOnDownload","DocumentsDownloadLocalState","onAcceptRiskWarningClick","onCancelRiskWarningClick","riskWarningTextSplits","openRiskWarningDialog","shouldShowRiskWarning","OpenRiskWarningDialog","selectedDocument","CloseRiskWarningDialog","GroupDetailsEvents","toggleContactPitchOwnerDialog","projectOwnerEmail","ToggleContactDialog","contactDialogOpen","sendingContactEmail","isSendingContactEmail","contactPitchOwnerDialogReducer","toggleContactDialogAction","SendingContactEmail","errorSendingContactEmail","CompleteSendingContactEmail","completeSendingContactEmailFunction","ContactPitchOwnerDialog","ContactPitchOwnerDialogLocalState","toggleContactDialog","ContactPitchOwner","MAX_COVER_HEIGHT_IN_MOBILE_MODE","MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE","ProjectDetailsMain","dataLoaded","dataBeingLoaded","projectLoaded","mainBody","adminOfferStatesActiveStep","votesLoaded","currentUserPledgeIndex","investorPledge","investorPledgeLoaded","pledgesLoaded","projectIssuer","projectIssuerLoaded","loadDataWhenUIElementsChange","pledgesTable_setProject","commentsLoaded","votesListener","existingVote","voteIndex","updatedVotes","voteRemovedID","existingPledge","pledgeIndex","updatedPledges","currentPledge","pledgeRemovedID","returnedComments","updatedComments","repliedBy","commentsWithReplies","commentsListener","currenComment","currentComment","currentCommentText","existingComment","commentIndex","commentsRepliesListener","correspondingCommentIndex","commentID","existingReply","replyIndex","handleVotePitch","voteVal","currentVoteObj","getInvestorVote","newVoteObj","attachProjectChangedListener","projectListener","detachProjectChangedListener","handleDocumentClick","handleMakeProjectGoLiveDecision","handleMakeProjectGoToPledgePhaseDecision","handleMakeProjectPledgeGoLiveDecision","handleMainBodyTabChanged","handlePostACommentClick","commentDialogOpen","handleCloseCommentDialog","commentText","commentSubmitClick","changedPitchExpiryDate","handleSubmitCommentClick","commenterANID","commentedDate","handleCancelUpdateCurrentComment","handleSubmitUpdateCurrentComment","newComment","handleToggleReplyToComment","replyEdited","replyingToComment","replyText","handleSubmitCommentReply","updatedCommentReply","replyBeforeUpdating","replyAfterUpdating","repliedDate","commentReply","handleDeleteCommentReply","commentReplyID","handleAdminOfferStatesStepClick","toggleRejectFeedback","addingRejectFeedback","rejectFeedback","sendProjectBackToIssuer","sendingProjectBack","feedback","userBeingLoaded","pledgesTable_stopListeningForPledgesChanged","createPledgeDialog_toggleDialog","createPledgeDialog_setProject","onVote","onMakeProjectGoLiveDecision","onMakeProjectGoToPledgePhaseDecision","onMakeProjectPledgeGoLiveDecision","onTabChanged","onPostACommentClick","onCancelUpdateCurrentComment","onSubmitUpdateCurrentComment","onToggleReplyToComment","onSubmitCommentReply","onDeleteCommentReply","onAdminOfferStatesStepClick","onCommentTextChanged","onSubmitCommentClick","ProjectDetails","sortedComments","comment1","comment2","currentCommentIndex","reverse","reply1","reply2","shouldHideInformation","gray_text","pip","renderProjectStatus","renderInvestorSelfCertifyReminder","sticky_body_sections_bar","Tabs","indicatorColor","scrollButtons","Tab","main_body_section","nonLinear","orientation","completed","StepButton","StepContent","admin_state_control_box","dangerouslySetInnerHTML","__html","border_box","stt","shouldVoteDisabled","displayVote","yesVotes","noVotes","investorVoteIndex","CommentDialog","DialogContentText","CommentReplyInputArea","prevProject","managePledgesTable","pledgesTableActions","createPledgeDialogActions","faq_box","PrivacyPolicyPage","TermsOfUsePage","RiskWarningPage","CreatePitchTermsAndConditionsPage","subjects","subject","phone","submitClick","sending","hasSetData","ContactUs","onSubmitClick","senderName","senderPhone","dbRef","enquiryID","groupContacted","HelpPage","autoSwitchToAppropriateHelpTab","helpType","autoSwitching","handleTabChanged","expandedPanel","handleExpandPanel","panel","renderGroupAdminHelp","image_style","renderInvestorHelp","renderIssuerHelp","SignInEvents","loadingData","sendingAccessRequest","removingAccessRequest","successfullyLoadedData","members","offers","groupDetailsReducer","LoadingData","CompleteLoadingData","completeLoadingDataAction","GroupDetails","GroupDetailsLocalState","hasErrorLoadingData","hasAccessRequestsBeenSatisfied","getGroup","groupResponse","fetchGroupMembers","membersResponse","offersResponse","MarketingPreferencesPage","ProfilePageEditable","userToBeEditedID","editUserProfile_startOriginalUserChangedListener","userToBeEdited","userToBeEditedLoaded","loadingUserToBeEdited","activitiesTable_stopListeningForActivitiesChanged","editUserProfile_stopOriginalUserChangedListener","adminLoaded","projectsTable_user","projectsTable","userChanged","Front","flexGrow","ResetPasswordEvents","toggleResetPasswordDialog","ToggleResetPasswordDialog","signInEmail","signInPassword","errorSignInEmail","errorSignInPassword","showResetPasswordDialog","resetPasswordDialogEmail","resetPasswordDialogProcessing","resetPasswordDialogEmailSent","isProcessingResetPasswordRequest","signInReducer","ResetAllStates","TextChanged","textChangedAction","TogglePasswordVisibility","SignInEmailError","SignInPasswordError","ClearErrors","resetPasswordDialogError","ProcessingResetPasswordRequest","CompleteProcessingResetPasswordRequest","mapStateToProps","SignInLocalState","mapDispatchToProps","togglePasswordVisibility","onSignInClick","allowSignIn","onSendResetPasswordClick","SignInNew","ResetPasswordDialogComponent","Header","homUrl","dashboardUrl","signInUrl","navigatingFromSignInOrSignUpToDashboard","navigatingToSignIn","navigatingToError","GroupRoute","authListener","validateRouteAndAuthentication","updateRouteAndParams","loadSystemAttributes","validateGroupUrl","attachAuthListener","onAuthStateChanged","detachAuthListener","dashboardRoute","shouldRedirectToError","showHeader","getSystemAttributes","shouldValidateGroupUrl","validatingGroupUrlAction","finishedLoadingGroupUrlAction","retrievedGroup","SignUpEvents","verifyingCode","codeVerified","actionCode","confirmedPassword","resettingPassword","passwordReset","isResettingPassword","hasErrorResettingPassword","errorResettingPassword","resetPasswordReducer","VerifyingCode","CompleteVerifyingCode","completeVerifyingCodeAction","errorVerifyingCode","ConfirmingResetPassword","CompleteConfirmingResetPassword","completeConfirmingResetPasswordAction","ResetPassword","oobCode","verifyCode","ResetPasswordLocalState","confirmPasswordReset","hasErrorVerifyingCode","successfullyResettingPassword","verifyPasswordResetCode","ResourceDetail","resourceIndex","MediaQueryEvents","invitedUserLoaded","loadingInvitedUser","confirmedEmail","acceptMarketingPreferences","creatingAccount","hasErrorLoadingInvitedUser","errorLoadingInvitedUser","notFoundInvitedUser","isCreatingAccount","hasErrorCreatingAccount","errorCreatingAccount","signUpReducer","LoadingInvitedUser","CompleteLoadingInvitedUser","completeLoadingInvitedUserAction","InputFieldChanged","inputFieldChangedAction","CreatingAccount","successfullyCreatedAccount","CompleteCreatingAccount","completeCreatingAccountAction","hasRegistered","SignUpNew","invitedUserId","loadInvitedUser","SignUpLocalState","handleInputFieldChanged","createAccount","inputFieldType","inputFieldName","inputFieldValue","inputFieldChecked","toLocaleLowerCase","signUp","isPublicRegistration","AppRouter","exact","render","FeedbackSnackbar","resetStatesWhenSnackbarClosed","LOADING_CLUB_ATTRIBUTES","CLUB_ATTRIBUTES_LOADED","CLUB_ATTRIBUTES_CHANGED","screenSizeQueries","mobileScreen","matchMedia","tabletScreen","laptopScreen","desktopScreen","ManageSystemIdleTimeEvents","listener","MediaQueryChanged","LOADING_SYSTEM_GROUPS","FINISHED_LOADING_SYSTEM_GROUPS","groupsListener","SYSTEM_GROUPS_CHANGED","nowIdle","nowActive","manageSystemIdleTimeReducer","OnActive","OnIdle","App","cancelAllListeners","stopListeningForUserProfileChanges","stopListeningForGroupsUserIsIn","joinRequestsTable_stopListeningForJoinRequestsChanged","adminDashboard_stopListeningForInvitedUsersChanged","groupAdminsTable_stopListeningForGroupAdminsChanged","stopListeningForSystemGroupsChanged","loadClubAttributesIfNotLoaded","clubAttributesBeingLoaded","loadSystemGroups","loadingGroups","attachListeners","initializeAuthState","getUserProfileAndValidateUser","startListeningForClubAttributesChanged","startListeningForUserProfileChanges","startListeningForAngelNetworkChanged","startListeningForGroupsUserIsIn","startListeningForSystemGroupsChanged","getTheme","addMediaQueryListeners","removeMediaQueryListeners","stopListeningForAngelNetworkChanged","stopListeningForClubAttributesChanged","onIdle","DateFnsUtils","signingIn","preventValidatingUserWhenSigningUp","groupFound","matches","removeEventListener","forumsActions","existingGroup","groupIndex","hostname","ProfileEvents","loadingGroupsUserIsIn","groupsUserIsInLoaded","authReducer","shouldPrevent","singingIn","createBusinessProfileReducer","editedDirectors","editUserReducer","editImageReducer","editVideoReducer","uploadFilesReducer","uploadingStatusReducer","uploadingStatusActions","changePasswordReducer","clubAttributesReducer","clubAttributesActions","CreateForum","createForumName","createForumDesc","createForumError","createNewForum","createForumAuthor","forumBeforeEditing","forumAfterEditing","lastEdited","dateCreated","CreateThread","createThreadName","createThreadBriefDesc","createThreadMessage","createThreadError","createNewThread","threadBeforeEditing","threadAfterEditing","IndividualForum","tableChangePage","tableChangeRowsPerPage","renderThreads","forumThreadsLoaded","forumThreads","threadsSortedMode","threadsTablePage","threadsTableRowsPerPage","clickOnAParticularThread","sortedThreads","SORT_BY_CURRENT_USER","thread1","thread2","SORT_BY_LAST","SORT_BY_OLDEST","ButtonBase","threadsLoadMode","goBackToForumsList","threadBeforeChanging","threadAfterChanging","CreateReply","threadReplySubject","threadReplyMessage","createThreadReplyError","submitThreadReply","thread_reply_style","forumThreadSelected","threadReplyBeforeEditing","threadReplyAfterEditing","replyDate","AVATAR_MAX_HEIGHT","IndividualThread","renderReplies","forumThreadReplies","threadInReplyMode","forumThreadRepliesLoaded","goBackToThreadsList","threadReplies","threadReplyBeforeChanging","threadReplyAfterChanging","Forums","addAndRemoveListeners","forumsLoaded","startListeningForForumsChanged","startListeningForThreadsChanged","startListeningForThreadRepliesChanged","renderContent","modeForums","forumsSortedMode","forumsLoadMode","forumsTablePage","forumsTableRowsPerPage","sortedForums","forum1","forum2","renderForums","clickOnAParticularForum","onForumClick","toggleEditForum","ForumRow","existingForum","forumsChanged","existingForumIndex","existingThread","threadsChanged","existingThreadIndex","repliesChanged","existingReplyIndex","forumBeforeChanging","forumAfterChanging","forumsReducer","notificationsReducer","mediaQueryActions","dashboardSidebarReducer","isTablet","mediaQueryReducer","superAdminSettingsReducer","groupAdminSettingsReducer","manageANIDFromParamsActions","legalDocumentsReducer","invitedUsersReducer","invitationDialogReducer","addAngelNetworkDialogReducer","manageGroupFromParamsReducer","investorSelfCertificationAgreementsReducer","angelNetworksReducer","manageJoinRequestsReducer","loadingPledges","matchedPledges","pledgesTableReducer","feedbackSnackbarReducer","activitiesTableReducer","manageJSONCompareChangesDialogReducer","manageJSONCompareChangesDialogActions","groupAdminsTableReducer","createPledgeDialogReducer","selectProjectVisibilityReducer","manageSystemGroupsReducer","manageSystemGroupsActions","LOADING_MARKETING_PREFERENCES","FINISHED_LOADING_MARKETING_PREFERENCES","loadingMarketingPreferences","marketingPreferencesLoaded","manageMarketingPreferencesReducer","manageMarketingPreferencesActions","CREATE_PROJECT_SET_COMPONENT_PROPS","CREATE_PROJECT_LOADING_DATA","CREATE_PROJECT_FINISHED_LOADING_DATA","CREATE_PROJECT_DRAFT_PROJECT_CHANGED","componentContext","createNewPitch","pitchExpiredDate","snackbarErrorMessage","createProjectReducer","createProjectActions","context","projectChanged","documentsDownloadReducer","openRiskWarningDialogAction","InputCategories","EditImageDialogEvents","BusinessProfileEvents","AddressStates","EditImageDialogModes","initialBusinessProfileState","editedBusinessProfile","registeredOfficeState","EnterPostcode","tradingAddressState","initialEditImageDialogState","AddPhoto","rotate","savingImage","deletingImage","hasInitiallySetCopiedUser","PersonalDetailsState","BusinessProfileState","EditImageDialogState","profileReducer","SetCopiedUser","setCopiedUserAction","copiedUser","firstTimeSetCopiedUser","ToggleDialog","toggleDialogAction","rawImage","SetEditor","setEditorAction","ChangeMode","changeModeAction","SuccessfullySelectedImage","successfullySelectedImageAction","selectedImage","SliderChanged","sliderChangedAction","SavingImage","savingImageAction","saving","DeletingImage","deletingImageAction","deleting","CheckBoxChanged","businessProfileCheckBoxChangedAction","FindingAddress","findingAddressAction","FindingAddresses","FinishedFindingAddress","finishedFindingAddressAction","foundAddressesForRegisteredOffice","foundAddresses","foundAddressesForTradingAddress","errorFindingAddressesForRegisteredOffice","errorFindingAddressesForTradingAddress","ChangeAddressState","changeAddressStateAction","addressState","rootReducer","combineReducers","ManageSystemIdleTimeState","newExploreGroupsReducer","ProfileLocalState","manageMarketingPreferences","manageCreateProject","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"kHAAA,OAAe,cAA0B,kC,uDCAzC,OAAe,48N,iCCAf,OAAe,wkK,iCCAf,OAAe,cAA0B,wC,mGCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,oE,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,2E,iCCAzC,OAAe,cAA0B,mF,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,qD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,gE,iCCAzC,OAAe,cAA0B,uE,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,oD,iCCAzC,OAAe,cAA0B,0E,iCCAzC,OAAe,cAA0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","file":"static/js/main.d89063bf.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.5e7ff337.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC0FBMVEUAAAAA//8Af/8AqqoAf78AmcwAqtQAkdoAn98AjcYAmcwAotAAlNQAnNcAkdoAmcwAj88AltIAm9QAk9YAltAAm9IAlNQAmNYAk9cAl88AmtEAldMAlNUAl88AmtAAltIAmNMAlNQAl9UAltEAmdIAldMAl9QAlNUAltAAldIAl9MAlNQAltUAmNIAldMAl9QAmNIAldMAl9MAmdQAltEAmNEAldIAldMAltQAmNEAltIAl9IAldMAltMAmNQAltEAl9IAldIAltMAmNMAltQAl9EAldIAl9IAmNMAltMAl9QAltIAl9IAmNMAltMAl9QAltEAl9IAldIAltMAl9MAltQAl9EAldIAltIAl9MAltMAl9QAltIAl9IAmNIAltMAl9MAltQAl9IAmNIAltIAl9MAltMAl9QAmNIAltIAl9MAltMAl9MAldEAltIAl9IAltMAl9MAltMAltIAl9IAltIAl9MAltMAl9MAl9IAltIAl9IAltMAl9MAl9MAltIAl9IAltEAl9MAltMAltIAl9IAltIAl9MAltMAldMAl9IAltIAl9IAltMAldMAl9MAltIAl9IAltEAl9MAl9MAltMAl9IAltIAldMAl9MAltIAl9IAltEAldMAl9MAl9IAltEAldMAl9MAltMAl9IAltIAl9EAl9MAldMAl9MAltIAl9IAl9EAl9MAltMAl9IAldEAl9MAltMAl9MAldEAl9EAldMAl9MAltIAldIAl9EAldMAl9MAltMAl9IAl9EAldEAl9MAltMAl9MAl9IAldEAl9EAldMAl9MAltMAldIAl9EAldEAl9MAltMAldMAl9EAldEAl9EAltMAldMAl9IAldEAl9EAldMAl9MAl9MAldIAl9EAldEAl9MAl9MAldMAl9EAldEAl9EAltMAldMAl9MAldEAl9EAldEAldMAl9MAldMAl9EAldEAl9NBjL3XAAAA73RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExYXGBkaGxwdHyAhIiMkJScoKSorLC4vMDE0NTY5Ojs8PT4/QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaSlpqeoqaqsra6vsLGys7S1tre4ubu8vb/AwcLExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/jWJrzEAAAsKSURBVHja7d0LjBT1HQfw2bvjOBAqbxGrB/g4sBWwjagUqgaFiqIWtBSi1VRpY6lWq7VGom2MTa2v1ket0mpaRasmPDSkVorB2gYjRkGCPR4FxFh5Csj7dbuFiorH3u4A11vmP5+Pmujuf2Z25/fd3/xnHXaiCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACSJ3NIvIpjamq6t25VmUnLXs9uWvPe/HeWCsBuFQMu7n9MKj98y6ZPenV72gPQ8epRR6S4Aa8aP255mgPQ7qbLq1J+DN72+D1rUhuAEXd0MAuL1tzybDoD0OaBoar/P1OuXZvCANQ801Xp91g8ckHqAnDyhLYK/6l1w2alLAAnT2mp7HvZNHRWqgJQ86LPf70eMGhhigLQZrrjf32Lzl5Xis2Wl+TNjjtVwetr121yagIw4gb13lePf9em5BDQ7nXf/+Szuu/adHSAn31dsfNpWTY9FR2g45wqxc5ra++VTb7NsqZ/m1erfwOqrkpDB6iYe4RSN2D5STvD7wAD1L9Bnful4BAwXJ0bNiwFARigzA07M/wAHHOMMjesukvwAahR5UJOFIB0qwk+AN0VueAxIPgAtFbkQtoFH4BWilxIi+ADUKnIhTQLPgAZRT6kdk+ZfZ5uAiAACAACgAAgAAgAAoAAIAAIAAKAACAACAACgAAgAAgAAoAAIAAIAIlWkdyXvuH1eQvWrK9o2eXYL5/izxulLQAfTXj67c9+UKmq/4gLZCBFh4DVt33phjf3+kGtrdNG97p/q2qmJQBP9n1wU/3HVvz81JeUMxUBWD8i/y123vv2jTsUNPwALDtnakNPPXbRBhUNPQDLzitwf6UZF2xW0rADsPFbSwo9PfvSrJoGHYAfzS38/PR71TTkAEyaWGzEr95W1HADsGls0SF11ytquAF4eFnxMbOmqmqoAdg6Ls6oe1Q11AA8vzrOqDcWK2ugAXgm5kxRWcMMwNbX4o17WVnDDMDMbfHGza5T1yAD8E7McVveVdcgAzA/7kCzwDADsCLuwLXqGmQA1scduEldgwxA7PscV6hrkAGIfbORw9Q1yAAcHXdgR3UNMgCx76h1vLoGGYA+cRtAZ3UNMgC9Y95S6zRlDTMAZYPjjRuirGEGIBoVa1SL85Q10AD0PynOqOHuTRlqAKKbY4wpv05Vgw3AkAHFx3z3WFUNNgDRb4q29y5jFTXgAHS/r8iAinGHK2rAAYguvrHw83d/TU2DDkA0dnShZ2+9QkkDD0B01y0N3mC54v4fq2jwAYh+8uf2+Z84esp3FDQFAYgGz7g4z6OV18w4VT1TEYCo0++nD6l3eVDr0W/c3ko5919Cr57q89TyCS++teWTc//Th5zbQi3TFIAo6jxmzI5Fiz7aVNmq8wmuAEphAHZp1qOHAqZyDoAAIAAIAAKAACAACAACgACwn/xR+qJySxYsWbp89YbtOzPNqtp0+mK3biceLgApsX7GP1+ft3Gfh7v2OaP/cQJQko/j5kxZeaYsz5Erl8vuUlbVwILZLWW77Xs5WS6bq8tmq/L8/MiKFya8lf8mNO++OznqNvjC0wSgqf3xtj03hcnssauAu0q/yyc3ijjumbx/MOSOh/b8yGDZx4tl6i3X7JLf1svFy4++srPQS1nyyCPVIy89KukByDT1BieedTBL91xedMjNP83z4MbqoncSmdFz734x4b55sT4/37imb6PunmmXOAsoJMavRef9ibAPi99JZu/fIHul//di1T/aOWXwBbOdBgbR05p/+m+rLv9mbfzl/jHwuvUCENJs6MV+L+zXgtk/9fu7ACTfnj1RN3bU6v1d9D/Dfy0AiT8ufDxkw7CHD2D1dbePqROAEKwa8uqBLfj0FXUCkOwOsLuAK8+fe6BbmPIDAUi2XBStu2jBgS//3C8FINEdIBttH1F7MNu4+68CkOxDwPUzD66F/HC5ACRY9omnD3INH14nAAnuAAtvPuitvPQXAUhuAMZuOfjN3LpDABIbgMa40dDipwQgsQFoFPfuFIBUe3+yAKTb7wQg3d6qFYA0zwGi6FkBSLfJApDuDrB0jgCkOgDRVAFIt5cEIN0dYPZGAUi1na8JQKo7QJSsAFQIQIPadmpZGW3bsGzz/i02QwACCEyfc/v2bvPJmd2bf5u6Jv6ytbmMACS7Axx2+eiue/1ndfWwbc/d9X7cpdcvStJPB5gE7uv8N37Rtd5DzS+b+f3Yy//LJDDJKh988sg8D7e48w+VMdcw3xwgwarGD2zgmeHlV2ZjrWKBDpBc5Y8NbPC5i26Kt47FApBctw0p8OSNvWKtY4UAJFa/awq2hztjrWR5VgASehpY+UDhgacPiLOWulUCkFCXFrv1/JhYqxGAhCq7ttiIczrFWc9aAUjmIaB/ddHdNTjOejYKQDKNLD7kbAEItwNkzolxmhBnRdsEIJF6tC8+pkO1AATbAb4SKyUxxvgeIJl6xxlUE2NMTgASqXucQV0FIFhd4gzqLADBOjLOoPYCEKrmbeKMaiMAoeoQa1RrZwGhahtrVEsdIFSt4h0oBCBUsaYAsS6iFIBDTpxvAg9vtB0mAIl0mACkW4tGW5OzgGR+D9Boa9IBEqlcB0i3jA4QrlyT7goBSKQy79ohQAcwCRQAHUAABEAATId8D6AD6AACoAOgA6SjJOYAKQ+AOQA6gA6gA/geQAdAB3AI0AFw4MMhAB0AHQCTQHtfB0hu/83pAA4BOkCKA5ATAB0AHcAcwCTQISCVATAJ1AEEwCTQHMAkUAcIPgBZZwE6QPCfWwFwFiAAjb33cwKQ7tPArAD4HkAAUhyAxiubs4CUB0AHSPnpgw5QSlkdwCFABxAAp4EC4CxAAErzudUBSqnOIUAHMAl0GthIrUMHSE8AHAISIMa9/b5wgMvFvHVsnD1WKQD/LxcWHVE1PN+jHc4onq2B8V5Cz+JDTknQHs009QYnnnVQiy9cVVZeXlaW2f3XZ689l8tmd/2drasrP6FN/q5cu273crsW2/XPXg9nc3sWLOsR79ax0ebarUU+U+1qDvz9TbukietRkawOEB1//AEG/cTGegUtvxrUlMn/DUw5ARAABAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAEgllzwAcgqciE7gg/AJkUuZHPwAVijyIfU7mnyALynyIUsDT4A8xW5kHnBB+AdRS6kNvgALF2myg1bsiz4AETTlflQ2jlNH4BJynwo7Zwmv19AVDm3o0I34INedeF3gO3jFbohT9SloANEnWc3V+q8NvdenYI5QLT8caXO79Gmr38pOkDUfmY7xc5j5Snrm36j5SV4o1tWnK/aeYyZU4KNluR6gGenqPa+Jjxfiq1mSvJe207rruD1zB+0PkpLB4jWjlyn4p/34aiS1L9Ul4QtGObCkM/ZMHxxlKYARLOG6gF7f/6Hvh2lKwDRrEGL1P2z43+p6l/Cq4IXnv28yn9s4qDFJdt2ppRvfPidHVQ/WnlTKT8J5aV867Xjy3tVpLz8mx+6ck4pt58p8fvvdNVlnVNc/g+eeGx1aV9BpuT7oKLfsDOrU1n9JdMnvVZX6heROSR2xVE9a6rbtWiWSUnlczs2r1k6r9bVkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwgP4L8YdkJdYJMf4AAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/admin_logo.ba46fba4.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_my_dashboard.bd396a1f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_navigation_bar.9371ce16.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_notifications.5cb03a6b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_user_management.f70fb039.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_01.188cd7b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_02.43a3a338.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_03.d21bb154.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_access_requests.28fe688a.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_members.441a6d6f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_viewing_an_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_2_offer.ef822bde.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_01.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_02.6811f18b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_temporarily_closing_an_offer.2af2fa2e.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_reopening_a_temporarily_closed_offer.a6df5162.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_admins.56a845b1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_offers.c2b77876.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_groups.6d981bb7.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_resources.46aab3b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_settings.db022052.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_public_offer.9199adf5.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_restricted_offer.47d1cb14.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_audit_log.7ba81ce1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_password.6b0f1016.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_change_password.d432f2e0.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_logging_out.d5b27005.png\";","export default __webpack_public_path__ + \"static/media/investor_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/investor_help_navigation_bar.484f4980.png\";","export default __webpack_public_path__ + \"static/media/investor_help_notifications.591a0a3c.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers.e803e5a3.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers_campaign.c87eedb6.png\";","export default __webpack_public_path__ + \"static/media/investor_help_pitch_phase_02.ed931b04.png\";","export default __webpack_public_path__ + \"static/media/investor_contacting_fundraiser.a655d6ac.png\";","export default __webpack_public_path__ + \"static/media/investor_help_exploring_groups.2626dbb8.png\";","export default __webpack_public_path__ + \"static/media/investor_help_resources.d795f034.png\";","export default __webpack_public_path__ + \"static/media/investor_help_profile.161003e4.png\";","export default __webpack_public_path__ + \"static/media/investor_help_editing_your_profile.7557feb5.png\";","export default __webpack_public_path__ + \"static/media/investor_help_setting_up_business_profile.4f382457.png\";","export default __webpack_public_path__ + \"static/media/investor_help_self_certification.316c14bd.png\";","export default __webpack_public_path__ + \"static/media/investor_help_reset_password.3367ff8a.png\";","export default __webpack_public_path__ + \"static/media/investor_help_change_password.ee808f9b.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_01.3369ce18.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_02.360ef7c1.png\";","export default __webpack_public_path__ + \"static/media/investor_help_log_out.b96d7eaf.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_navigation_bar.c03a1c44.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_notifications.ee71f277.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_01.7ef3c24c.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_02.e6fe49c4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_manage_offer.3aaa83e4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_offer.6dc9997a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_01.6baa1cf8.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_02.e5dcb344.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_exploring_groups.2ddf42d1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_resources.394adc7a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_01.f76d41fd.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_02.5ba1a9b1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_01.740f5dec.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_02.4487dfd3.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_reset_password.6e395e52.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_change_password.a3ecf01b.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_01.866d8280.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_02.39aafbdc.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_log_out.7f3b30bd.png\";","export default __webpack_public_path__ + \"static/media/front_page_cover_image.2b9aa708.png\";","/** \r\n * This file contains Firebase connection setup.\r\n * \r\n * This file will only be imported in the App.jsx file to initialize Firebase.\r\n */\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport 'firebase/storage';\r\n\r\nconst config = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n};\r\nconst firebaseApp = firebase.initializeApp(config);\r\nexport default firebaseApp;","export const UPLOADING = 'UPLOADING';\r\nexport const uploading = (mode, progress) => {\r\n    return {\r\n        type: UPLOADING,\r\n        mode,\r\n        progress\r\n    }\r\n};\r\n\r\nexport const DISMISS_UPLOADING_STATUS = 'DISMISS_UPLOADING_STATUS';\r\nexport const dismissUploadingStatus = () => {\r\n    return {\r\n        type: DISMISS_UPLOADING_STATUS\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {ProgressBar} from 'react-bootstrap';\r\nimport {connect} from 'react-redux';\r\nimport * as uploadingStatusActions from '../../redux-store/actions/uploadingStatusActions';\r\n\r\n// Upload states\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_LOGO_FIRST_TIME_MODE = 1; // upload logo first time together with business profile information\r\nexport const UPLOAD_LOGO_MODE = 2; // upload logo separately later times\r\nexport const UPLOAD_PROFILE_PICTURE_MODE = 3;\r\nexport const UPLOAD_VIDEO_FIRST_TIME_MODE = 4;\r\nexport const UPLOAD_VIDEO_MODE = 5;\r\nexport const UPLOAD_LEGAL_DOCUMENTS_MODE = 6;\r\nexport const UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION = 7;\r\nexport const UPLOAD_PITCH_COVER_MODE = 8;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 9;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 10;\r\nexport const UPLOAD_DONE_MODE = 11;\r\nexport const UPLOAD_ERROR = 12;\r\n//--------------------------------------------------------------------\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        mode: state.uploadingStatus.mode,\r\n        progress: state.uploadingStatus.progress\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        dismiss: () => dispatch(uploadingStatusActions.dismissUploadingStatus())\r\n    }\r\n};\r\n\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardRef,\r\n\r\n            mode,\r\n            progress,\r\n\r\n            dismiss\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardRef}\r\n                open={mode !== UPLOAD_NONE}\r\n                fullWidth\r\n            >\r\n                <DialogTitle>\r\n                    {\r\n                        mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE\r\n                            ?\r\n                            \"Uploading logo\"\r\n                            :\r\n                            (\r\n                                mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                                    ?\r\n                                    \"Uploading profile picture\"\r\n                                    :\r\n                                    (\r\n                                        mode === UPLOAD_VIDEO_MODE || mode === UPLOAD_VIDEO_FIRST_TIME_MODE\r\n                                            ?\r\n                                            \"Uploading video\"\r\n                                            :\r\n                                            (\r\n                                                mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                                                    ?\r\n                                                    \"Uploading documents\"\r\n                                                    :\r\n                                                    (\r\n                                                        mode === UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION\r\n                                                            ?\r\n                                                            \"Uploading business profile\"\r\n                                                            :\r\n                                                            (\r\n                                                                mode === UPLOAD_ERROR\r\n                                                                    ?\r\n                                                                    \"Error uploading\"\r\n                                                                    :\r\n                                                                    (\r\n                                                                        mode === UPLOAD_DONE_MODE\r\n                                                                            ?\r\n                                                                            \"Upload done\"\r\n                                                                            :\r\n                                                                            \"\"\r\n                                                                    )\r\n                                                            )\r\n                                                    )\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <ProgressBar variant=\"success\" striped now={progress} label={`${progress}%`} />\r\n                        <Typography variant=\"body2\" style={{ marginTop: 10 }} >\r\n                            {\r\n                                mode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please wait while we're uploading your files...\"\r\n                                    :\r\n                                    \"Your files have successfully uploaded.\"\r\n                            }\r\n                        </Typography>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button variant=\"outlined\" color=\"primary\" size=\"small\" disabled={mode !== UPLOAD_DONE_MODE && mode !== UPLOAD_ERROR} onClick={dismiss} style={{ margin: 8 }}>Close</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <UploadingDialog {...props} forwardedRef={ref}/>)\r\n);","/** This file contains all of the colors that will be used */\r\n\r\nexport const black = \"#000000\";\r\nexport const white = \"#FFFFFF\";\r\n\r\nexport const red = \"#FF0000\";\r\nexport const red_700 = \"#D32F2F\";\r\n\r\nexport const dark_green = \"#4C8484\";\r\nexport const dark_green_50 = \"#5DA2A2\";\r\n\r\n// obtain using this website: https://hihayk.github.io/scale/#4/6/58/94/-51/-17/100/14/4C8484/76/132/132\r\nexport const dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100 = \"#F3F7F9\";\r\n\r\nexport const gray_50 = \"#FAFAFA\";\r\nexport const gray_100 = \"#F5F5F5\";\r\nexport const gray_200 = \"#EEEEEE\";\r\nexport const gray_300 = \"#E0E0E0\";\r\nexport const gray_400 = \"#BDBDBD\";\r\nexport const gray_500 = \"#9E9E9E\";\r\nexport const gray_600 = \"#757575\";\r\nexport const gray_700 = \"#616161\";\r\nexport const gray_800 = \"#424242\";\r\n\r\nexport const pink_500 = \"#E91E63\";\r\n\r\nexport const blue_900 = \"#0D47A1\";\r\n\r\nexport const blue_gray_50 = \"#ECEFF1\";\r\nexport const blue_gray_100 = \"#CFD8DC\";\r\nexport const blue_gray_600 = \"#546E7A\";\r\nexport const blue_gray_700 = \"#455A64\";\r\n\r\n//---- Background color for letter avatar --------------------\r\nexport const background_a = \"#58B99D\";\r\nexport const background_b = \"#4A9D86\";\r\nexport const background_c = \"#EAC545\";\r\nexport const background_d = \"#E79F3C\";\r\nexport const background_e = \"#65C87A\";\r\nexport const background_f = \"#55AB68\";\r\nexport const background_g = \"#C45C24\";\r\nexport const background_h = \"#5197D5\";\r\nexport const background_i = \"#437FB4\";\r\nexport const background_j = \"#C8473F\";\r\nexport const background_k = \"#D65745\";\r\nexport const background_l = \"#B14334\";\r\nexport const background_m = \"#925EB1\";\r\nexport const background_n = \"#844A87\";\r\nexport const background_o = \"#BEC3C6\";\r\nexport const background_p = \"#38495C\";\r\nexport const background_q = \"#303E4E\";\r\nexport const background_r = \"#98A4A6\";\r\nexport const background_s = \"#818C8D\";\r\nexport const background_t = \"#DE8DBD\";\r\nexport const background_u = \"#CA76AA\";\r\nexport const background_v = \"#E99B89\";\r\nexport const background_w = \"#9DA282\";\r\nexport const background_x = \"#AF935E\";\r\nexport const background_y = \"#E5B547\";\r\nexport const background_z = \"#9D473B\";\r\n//------------------------------------------------------------\r\n\r\n//---------------------------------------------------------------------\r\n/**\r\n * Theme colors - MUST BE DEFINED LAST so that other colors can be referenced\r\n */\r\nexport const primaryColor = dark_green;\r\nexport const secondaryColor = pink_500;\r\nexport const errorColor = \"#E15241\";\r\n\r\nexport const kick_starter_background_color = \"#FBFBFA\";\r\nexport const kick_starter_background_color_1 = \"#F7F7F6\";\r\nexport const kick_starter_gray_box_border = \"#DCDEDD\";\r\nexport const kick_starter_signup_background = \"#FCFCFB\";\r\nexport const kick_starter_gray_background = \"#F0F0F0\";\r\n\r\nexport const crowdcube_risk_warning_background = \"#2C383B\";\r\nexport const crowdcube_risk_warning_link_before_cover = \"#D98E34\";\r\nexport const crowdcube_risk_warning_link_after_cover = \"#CA6B2D\";\r\n//---------------------------------------------------------------------\r\n","import React from 'react';\r\nimport { StyleSheet } from 'aphrodite';\r\nimport {\r\n    TableCell,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport * as appColors from '../values/colors';\r\n\r\nconst sharedStyles = StyleSheet.create({\r\n    nav_link_hover: {\r\n        ':hover': {\r\n            color: appColors.blue_gray_700,\r\n            textDecoration: 'none',\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    nav_link_white_text_hover_without_changing_text_color: {\r\n        color: appColors.white,\r\n        ':hover': {\r\n            textDecoration: 'none'\r\n        }\r\n    },\r\n\r\n    nav_link_hover_without_changing_text_color: {\r\n        ':hover': {\r\n            textDecoration: 'none'\r\n        }\r\n    },\r\n\r\n    page_title: {\r\n        marginLeft: 20,\r\n        color: appColors.white\r\n    },\r\n\r\n    hamburger_button: {\r\n        color: appColors.white,\r\n        marginLeft: 10\r\n    },\r\n\r\n    tab_title: {\r\n        textTransform: \"none\",\r\n        fontSize: \"0.9em\"\r\n    },\r\n\r\n    kick_starter_border_box: {\r\n        border: `1px solid ${appColors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none'\r\n    },\r\n\r\n    no_text_transform: {\r\n        textTransform: \"none\"\r\n    },\r\n\r\n    error_text: {\r\n        color: appColors.errorColor\r\n    },\r\n\r\n    white_text: {\r\n        color: appColors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: appColors.black\r\n    }\r\n});\r\nexport default sharedStyles;\r\n\r\n/**\r\n * Styled table cell\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport function StyledTableCell(props) {\r\n    const useStyles = makeStyles({\r\n        root: {\r\n            background: props => props.cellColor,\r\n            color: props.textColor\r\n        }\r\n    });\r\n    const classes = useStyles(props);\r\n    return (\r\n        <TableCell\r\n            className={classes.root}\r\n            colSpan={props.colSpan}\r\n        >\r\n            {props.component}\r\n        </TableCell>\r\n    );\r\n}\r\n\r\n/**\r\n * Slide transition - direction up\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionUp = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"up\" />);\r\n\r\n/**\r\n * Slide transition - direction down\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionDown = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"down\" />);","/**\r\n * This file contains all Firebase paths and constant values.\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE NODES ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Groups node\r\nexport const GROUP_PROPERTIES_CHILD = \"AngelNetworkProperties\";\r\n\r\n// Admins node\r\nexport const ADMINISTRATORS_CHILD = \"Administrators\";\r\n\r\n// System's attributes node\r\nexport const CLUB_ATTRIBUTES_CHILD = \"ClubAttributes\";\r\n\r\n// Users node\r\nexport const USERS_CHILD = \"Users\";\r\n\r\n// Projects node\r\nexport const PROJECTS_CHILD = \"Projects\";\r\n\r\n// Activities log node\r\nexport const ACTIVITIES_LOG_CHILD = \"ActivitiesLog\";\r\n\r\n// Investor Self-certification agreements node\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD = \"InvestorSelfCertificationAgreements\";\r\n\r\n// Access requests to a group node\r\nexport const REQUESTS_TO_JOIN_CHILD = \"RequestsToJoin\";\r\n\r\n// Contact us enquiries node\r\nexport const CONTACT_US_ENQUIRIES_CHILD = \"ContactUsEnquiries\";\r\n\r\n// Marketing preferences node\r\nexport const MARKETING_PREFERENCES_CHILD = \"MarketingPreferences\";\r\n\r\n// Invited users node\r\nexport const INVITED_USERS_CHILD = \"InvitedUsers\";\r\n\r\n// Business profile node\r\nexport const BUSINESS_PROFILE_CHILD = \"BusinessProfile\";\r\n\r\n// Accepted create pitch T&Cs node\r\nexport const ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD = \"AcceptedCreatePitchTermsAndConditions\";\r\n\r\n// Project comments node\r\nexport const COMMENTS_CHILD = \"Comments\";\r\n\r\n// Project comment replies node\r\nexport const COMMENT_REPLIES_CHILD = \"CommentReplies\";\r\n\r\n// Pledges node\r\nexport const PLEDGES_CHILD = \"Pledges\";\r\n\r\n// Project votes node\r\nexport const VOTES_CHILD = \"Votes\";\r\n\r\n// Pledge FAQs node\r\nexport const PLEDGE_FAQS_CHILD = \"PledgeFAQs\";\r\n\r\n// Notifications node\r\nexport const NOTIFICATIONS_CHILD = \"Notifications\";\r\n\r\n// Forums node\r\nexport const FORUMS_CHILD = \"Forums\";\r\n\r\n// Forum threads node\r\nexport const FORUM_THREADS_CHILD = \"ForumThreads\";\r\n\r\n// Forum thread replies node\r\nexport const FORUM_THREAD_REPLIES_CHILD = \"ForumThreadReplies\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE STORAGE DIRECTORIES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Plain logos directory\r\nexport const PLAIN_LOGOS_CHILD = \"PlainLogos\";\r\n\r\n// Logos with text directory\r\nexport const LOGOS_WITH_TEXT_CHILD = \"LogosWithText\";\r\n\r\n// Legal documents directory\r\nexport const LEGAL_DOCUMENTS_CHILD = \"LegalDocuments\";\r\n\r\n// Logos directory\r\nexport const LOGOS_CHILD = \"Logos\";\r\n\r\n// Videos directory\r\nexport const INTRO_VIDEOS_CHILD = \"Videos\";\r\n\r\n// Profile pictures directory\r\nexport const PROFILE_PICTURES_CHILD = \"ProfilePictures\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE ATTRIBUTES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\nexport const PROJECT_SUPPORTING_DOCUMENTS_CHILD = \"supportingDocuments\";\r\n\r\nexport const PROJECT_PRESENTATION_DOCUMENT_CHILD = \"presentationDocument\";\r\n\r\nexport const PROFILE_PICTURE_CHILD = \"profilePicture\";\r\n\r\nexport const PROJECT_COVER_CHILD = \"cover\";\r\n\r\nexport const LOGO_CHILD = \"logo\";\r\n\r\nexport const INTRO_VIDEO_CHILD = \"video\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * ACTIVITY LOG TYPES --------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const ACTIVITY_TYPE_CLICK = 1; // profile, pitch/offer\r\nexport const ACTIVITY_TYPE_VIEW = 2; // profile, pitch/offer, group\r\nexport const ACTIVITY_TYPE_DOWNLOAD = 3; // download documents\r\nexport const ACTIVITY_TYPE_POST = 4; // comments, forums, threads, replies, pledges, likes, changes password\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVITED USER STATUS -------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a user in a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const INVITED_USER_NOT_REGISTERED = 0;\r\nexport const INVITED_USER_DECLINED_TO_REGISTER = 1;\r\nexport const INVITED_USER_STATUS_ACTIVE = 2;\r\nexport const INVITED_USER_STATUS_LEFT = 3;\r\nexport const INVITED_USER_STATUS_KICKED_OUT = 4;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * GROUP STATUS --------------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const GROUP_STATUS_ACTIVE = 1;\r\nexport const GROUP_STATUS_SUSPENDED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TYPE -----------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const TYPE_INVESTOR = 1;\r\nexport const TYPE_ISSUER = 2;\r\nexport const TYPE_ADMIN = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT VISIBILITY --------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the visibility of a project (offer).\r\n *\r\n * @type {number}\r\n */\r\nexport const PROJECT_VISIBILITY_PRIVATE = 1;\r\nexport const PROJECT_VISIBILITY_RESTRICTED = 2;\r\nexport const PROJECT_VISIBILITY_PUBLIC = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVESTOR AGREEMENT TYPE ---------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the investors' self-certification type.\r\n *\r\n * @type {number}\r\n */\r\nexport const HIGH_NET_WORTH_INVESTOR_AGREEMENT = 1;\r\nexport const SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT STATUS ------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\n\r\n// --- Project overall status ---\r\nexport const PROJECT_STATUS_DRAFT = -2; // project has not been published yet\r\nexport const PROJECT_STATUS_REJECTED = -1; // this status means the project failed even before it is publicly showed\r\nexport const PROJECT_STATUS_BEING_CHECKED = 0; // the project (offer) must be checked by admin first\r\nexport const PROJECT_STATUS_PITCH_PHASE = 1;\r\nexport const PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED = 2;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED = 3;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_PHASE = 4;\r\nexport const PROJECT_STATUS_SUCCESSFUL = 5;\r\nexport const PROJECT_STATUS_FAILED = 6;\r\n\r\n// --- Pitch status only ---\r\nexport const PITCH_STATUS_ON_GOING = 1;\r\nexport const PITCH_STATUS_ACCEPTED = 2;\r\nexport const PITCH_STATUS_REJECTED = 3;\r\n// when the admin accepts a pitch, its status will change to this state (pitch accepted and waiting for primary offer to be created)\r\n// when the issuer creates a primary offer, the pitch's status will change to PITCH_STATUS_ACCEPTED\r\nexport const PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER = 4;\r\n// this status means the pitch has expired but admin has not accepted or rejected it\r\nexport const PITCH_STATUS_WAITING_FOR_ADMIN = 5;\r\n\r\n// --- Pledge status only ---\r\nexport const PRIMARY_OFFER_STATUS_ON_GOING = 1;\r\nexport const PRIMARY_OFFER_STATUS_EXPIRED = 2;\r\nexport const PRIMARY_OFFER_STATUS_REJECTED = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT STATUS ----------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_STATUS_POSTED = 1;\r\nexport const COMMENT_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT REPLY STATUS ----------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_REPLY_STATUS_POSTED = 1;\r\nexport const COMMENT_REPLY_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * CONTROL IF A PLEDGE IS NEWLY CREATED OR EDITED ----------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const MAKE_A_NEW_PLEDGE = 1;\r\nexport const EDIT_A_PLEDGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TITLES ---------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const USER_TITLES = [\"Please select\", \"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Dr.\", \"Prof.\"];\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FINANCIAL ROUNDS ----------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const FINANCIAL_ROUNDS = [\"Pre-seed\", \"Seed\", \"Series A\", \"Series B\", \"Series C\"];\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * MULTIMEDIA TYPE (VIDEO OR IMAGE) ------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const FILE_TYPE_VIDEO = 1;\r\nexport const FILE_TYPE_IMAGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FILE CONFIGURATION ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {number|string}\r\n */\r\nexport const MAX_FILE_SIZE_IN_MB = 15;\r\nexport const MAX_FILE_SIZE_IN_BYTES = 15000000;\r\n\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_MB = 30;\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES = 30000000;\r\n\r\nexport const MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER = 2;\r\nexport const MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS = 10;\r\n\r\nexport const STORAGE_FILE_NAME_ID_SPLIT = \"-invest-west-\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */","import * as DB_CONST from '../firebase/databaseConsts';\r\n\r\nimport {QuillDeltaToHtmlConverter} from 'quill-delta-to-html';\r\n\r\n/**\r\n * This function will return the current date in milliseconds.\r\n */\r\nexport const getCurrentDate = () => {\r\n    const date = new Date();\r\n    return date.getTime();\r\n};\r\n\r\n\r\n/**\r\n * This function is used to calculate the date that is n days further than today\r\n *\r\n * @param days\r\n * @returns {number}\r\n */\r\nexport const getDateWithDaysFurtherThanToday = days => {\r\n    let neededDate = new Date();\r\n    const currentDate = new Date();\r\n    neededDate.setDate(currentDate.getDate() + days);\r\n    return neededDate.getTime();\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (DD/MM/YYYY)\r\n *\r\n * This function will take 1 parameter: milliseconds\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    return date.toLocaleDateString();\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (DD/MM/YYYY, HH:mm:ss)\r\n *\r\n * This function will take 1 parameter: milliseconds\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateTimeInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    return `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (dayOfWeek, month date year hour)\r\n *\r\n * @param milliseconds\r\n */\r\nexport const fullDateTimeInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    const dayList = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    const monthList = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n    let dayOfWeek = dayList[date.getDay()];\r\n    let month = monthList[date.getMonth()];\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let second = date.getSeconds();\r\n\r\n    hour = (hour >= 12) ? hour - 12 : hour;\r\n    let prepand = (hour >= 12) ? \" PM \" : \" AM \";\r\n\r\n    if (hour === 0 && prepand === ' PM ') {\r\n        if (minute === 0 && second === 0) {\r\n            hour = 12;\r\n            prepand = ' Noon';\r\n        } else {\r\n            hour = 12;\r\n            prepand = ' PM';\r\n        }\r\n    }\r\n    if (hour === 0 && prepand === ' AM ') {\r\n        if (minute === 0 && second === 0) {\r\n            hour = 12;\r\n            prepand = ' Midnight';\r\n        } else {\r\n            hour = 12;\r\n            prepand = ' AM';\r\n        }\r\n    }\r\n    return `${dayOfWeek}, ${month} ${date.getDate()} ${date.getFullYear()} ${hour}:${minute} ${prepand}`;\r\n};\r\n\r\nexport const PASSWORD_VERY_WEAK = 1;\r\nexport const PASSWORD_WEAK = 2;\r\nexport const PASSWORD_GOOD = 3;\r\nexport const PASSWORD_STRONG = 4;\r\nexport const PASSWORD_VERY_STRONG = 5;\r\nconst passwordBlacklist = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\r\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\r\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\r\n\r\n/**\r\n * This function is used to check the strength of the password.\r\n *\r\n * @param {*} password\r\n */\r\nexport const checkPasswordStrength = password => {\r\n    let strength = 0;\r\n    const minLength = 8;\r\n    // If the password length is less than or equal to minLength\r\n    if (password.length < minLength) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    } else {\r\n        strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\r\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\r\n        // strength = PASSWORD_WEAK;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\r\n    if (password.length > minLength &&\r\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\r\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\r\n        // strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\r\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_STRONG;\r\n    }\r\n\r\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\r\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_VERY_STRONG;\r\n    }\r\n\r\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    }\r\n\r\n    return strength;\r\n};\r\n\r\n\r\n/**\r\n * Convert a Delta object (obtained using ReactQuill to create rich text) to HTML\r\n *\r\n * @param {*} ops\r\n */\r\nexport const convertQuillDeltaToHTML = ops => {\r\n    if (!ops) {\r\n        return null;\r\n    }\r\n    let cfg = {};\r\n    /**\r\n     * Delta object obtained using ReactQuill has the following format:\r\n     * {\r\n     *      \"ops\": [\r\n     *          {},\r\n     *          {}\r\n     *      ]\r\n     * }\r\n     *\r\n     * This object is stored in the database.\r\n     * However, we only need the \"ops\" array to convert to HTML.\r\n     * So, after converting the JSON string to JSON, we need to retrieve the \"ops\" array so that the HTML tree can be created.\r\n     */\r\n    let converter = new QuillDeltaToHtmlConverter(ops, cfg);\r\n    return converter.convert();\r\n};\r\n\r\n\r\n/**\r\n * This function is used to calculate the difference in date between a specified date (in milliseconds) and the current date\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateDiff = (milliseconds) => {\r\n    const currentDate = new Date();\r\n    if (milliseconds - currentDate.getTime() < 0) {\r\n        return 0;\r\n    }\r\n    const dateDiff = Math.abs(milliseconds - currentDate.getTime()); // difference\r\n    return (dateDiff / (24 * 60 * 60 * 1000)).toFixed(0); //Convert values days and return value\r\n};\r\n\r\n/**\r\n * This function will find addresses based on postcode\r\n *\r\n * @param {*} postcode\r\n */\r\nexport const findAddress = async (postcode) => {\r\n    const GET_ADDRESS_API_KEY = \"Wbj4a1np5EejXhsnpv3RXQ19730\";\r\n    const addressQuery = `https://api.getAddress.io/find/${postcode}?api-key=${GET_ADDRESS_API_KEY}&sort=True&format=True`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        fetch(addressQuery)\r\n            .then(results => {\r\n                return results.json();\r\n            })\r\n            .then(data => {\r\n                let results = {\r\n                    apiAddresses: [], // addresses to store information to database\r\n                    formattedAddresses: [], // displayed addresses\r\n                    error: false\r\n                };\r\n                // no addresses can be found\r\n                if (!data.addresses) {\r\n                    results.error = true;\r\n                    return resolve(results);\r\n                }\r\n                data.addresses\r\n                    .forEach(address => {\r\n                        results.apiAddresses.push(address);\r\n                        // each address consists of 5 elements (address 1, address 2, address 3, town/city, postcode)\r\n                        let formattedAddress = \"\";\r\n                        address.forEach((element, index) => {\r\n                            if (element !== \"\") {\r\n                                formattedAddress += (element + \", \");\r\n                            }\r\n                        });\r\n                        formattedAddress = formattedAddress.trim();\r\n                        if (formattedAddress[formattedAddress.length - 1] === \",\") {\r\n                            formattedAddress = formattedAddress.slice(0, formattedAddress.length - 1);\r\n                        }\r\n                        results.formattedAddresses.push(formattedAddress);\r\n                    });\r\n                return resolve(results);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to calculate the equity gain based on the amount of money pledged\r\n * @param moneyPledge\r\n * @param fundTarget\r\n * @param equityOffered\r\n */\r\nexport const calculateEquityGain = (moneyPledge, fundTarget, equityOffered) => {\r\n    return ((moneyPledge * equityOffered) / fundTarget).toFixed(2);\r\n};\r\n\r\n/**\r\n * This function is used to calculate the amount of money pledged for this project\r\n *\r\n * @param pledges\r\n * @returns {number}\r\n */\r\nexport const calculatePledgesAmount = pledges => {\r\n\r\n    let pledgesAmount = 0;\r\n\r\n    if (!pledges || pledges.length === 0) {\r\n        return pledgesAmount;\r\n    }\r\n\r\n    pledges.forEach(pledge => {\r\n        if (pledge.amount !== '') {\r\n            pledgesAmount += pledge.amount;\r\n        }\r\n    });\r\n\r\n    return pledgesAmount;\r\n};\r\n\r\n/**\r\n * This function is used to convert a string to a number\r\n * Note: in this case, comma is considered the thousands-separator\r\n *\r\n * @param inputString\r\n * @returns {null|number}\r\n */\r\nexport const getNumberFromInputString = inputString => {\r\n\r\n    // user enters decimal numbers\r\n    if (inputString.includes('.')) {\r\n        return null;\r\n    }\r\n\r\n    let commaSplits = inputString.split(',');\r\n\r\n    if (commaSplits.length > 1) {\r\n        let invalidSeparator = false;\r\n        // check if the input string has valid comma separators\r\n        commaSplits.forEach((part, index) => {\r\n            if (index === 0) {\r\n                if (part.length > 3 || part.length < 1) {\r\n                    invalidSeparator = true;\r\n                }\r\n            } else {\r\n                if (part.length !== 3) {\r\n                    invalidSeparator = true;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (invalidSeparator) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    let commaFreeString = inputString.replace(/,/g, '');\r\n    // check if the string is a number\r\n    if (isNaN(commaFreeString) === true) {\r\n        return null;\r\n    }\r\n\r\n    let number = parseFloat(commaFreeString);\r\n    if (number < 0) {\r\n        return null;\r\n    }\r\n\r\n    return number;\r\n};\r\n\r\n/**\r\n * Construct file name to be uploaded to firebase storage\r\n *\r\n * @param document\r\n * @param newStorageID\r\n * @returns {string}\r\n */\r\nexport const constructStorageFileName = (document, newStorageID) => {\r\n\r\n    let constructedName = '';\r\n\r\n    let originalName = document.file.name;\r\n    let nameSplits = originalName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT);\r\n    // file downloaded from invest west server\r\n    if (nameSplits.length > 1) {\r\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + nameSplits[1];\r\n    }\r\n    // file from user's computer\r\n    else {\r\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + originalName;\r\n    }\r\n\r\n    return constructedName;\r\n};\r\n\r\n/**\r\n * Check if a LinkedIn URL is valid\r\n *\r\n * @param url\r\n * @returns {boolean|boolean | *}\r\n */\r\nexport const isValidLinkedInURL = url => {\r\n    if (!url) {\r\n        return true;\r\n    }\r\n    return url.startsWith(\"https://www.linkedin.com/in/\");\r\n};\r\n\r\nexport const GET_PLAIN_LOGO = 1;\r\nexport const GET_LOGO_WITH_TEXT = 2;\r\nexport const getLogoFromGroup = (getLogoType, groupProperties) => {\r\n    if (!groupProperties) {\r\n        return null;\r\n    }\r\n\r\n    switch (getLogoType) {\r\n        case GET_PLAIN_LOGO:\r\n            if (!groupProperties.hasOwnProperty('plainLogo')\r\n                || (groupProperties.hasOwnProperty('plainLogo') && groupProperties.plainLogo === null)\r\n            ) {\r\n                return null;\r\n            }\r\n            return groupProperties.plainLogo[groupProperties.plainLogo.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\r\n        case GET_LOGO_WITH_TEXT:\r\n            if (!groupProperties.hasOwnProperty('logoWithText')\r\n                || (groupProperties.hasOwnProperty('logoWithText') && groupProperties.logoWithText === null)\r\n            ) {\r\n                return null;\r\n            }\r\n            return groupProperties.logoWithText[groupProperties.logoWithText.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Get the user's home group\r\n *\r\n * @param groupsUserIsIn\r\n * @returns {*}\r\n */\r\nexport const getUserHomeGroup = groupsUserIsIn => {\r\n    const index = groupsUserIsIn.findIndex(group => group.invitedUser.requestedToJoin === false);\r\n    if (index !== -1) {\r\n        return groupsUserIsIn[index];\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Check if a project can be edited\r\n *\r\n * @param user\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const shouldAProjectBeEdited = (user, project) => {\r\n    if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n        return false;\r\n    }\r\n\r\n    if (user.type === DB_CONST.TYPE_ADMIN) {\r\n        return !(project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL\r\n            || project.status === DB_CONST.PROJECT_STATUS_FAILED\r\n            || project.status === DB_CONST.PROJECT_STATUS_REJECTED\r\n        );\r\n    }\r\n\r\n    // user is an issuer, but not the owner of the project\r\n    if (user.id !== project.issuerID) {\r\n        return false;\r\n    }\r\n\r\n    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n        || project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n    ) {\r\n        return true;\r\n    }\r\n\r\n    if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n        return project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\n/**\r\n * Check if a hex color code is valid\r\n *\r\n * @param hexColorCode\r\n * @returns {boolean}\r\n */\r\nexport const isValidHexColorCode = (hexColorCode) => {\r\n    let RegExp = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\r\n    return RegExp.test(hexColorCode);\r\n};\r\n\r\n/**\r\n * Check if a website URL is valid\r\n *\r\n * @param url\r\n * @returns {boolean}\r\n */\r\nexport const isValidWebURL = (url) => {\r\n    let RegExp = /^(http|https):\\/\\/(([a-zA-Z0-9$\\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\\/(([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\\/([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\\?([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?(\\#([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?)?$/;\r\n    return RegExp.test(url);\r\n};\r\n\r\n/**\r\n * Check is an email address is valid\r\n *\r\n * @param email\r\n * @returns {boolean}\r\n */\r\nexport const isValidEmailAddress = (email) => {\r\n    let RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return RegExp.test(email.trim().toLowerCase());\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = project => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = project => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = project => {\r\n    return project.hasOwnProperty('temporarilyClosed') && project.temporarilyClosed === true;\r\n};","export const CLOSE_FEEDBACK_SNACKBAR = 'CLOSE_FEEDBACK_SNACKBAR';\r\nexport const closeFeedbackSnackbar = () => {\r\n    return {\r\n        type: CLOSE_FEEDBACK_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const SET_FEEDBACK_SNACKBAR_CONTENT= 'SET_FEEDBACK_SNACKBAR_CONTENT';\r\nexport const setFeedbackSnackbarContent = (message, color, position) => {\r\n    return {\r\n        type: SET_FEEDBACK_SNACKBAR_CONTENT,\r\n        message,\r\n        color,\r\n        position\r\n    }\r\n};\r\n\r\nexport const RESET_STATES_WHEN_SNACKBAR_CLOSED = 'RESET_STATES_WHEN_SNACKBAR_CLOSED';\r\nexport const resetStatesWhenSnackbarClosed = () => {\r\n    return {\r\n        type: RESET_STATES_WHEN_SNACKBAR_CLOSED\r\n    }\r\n};","import {\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_ERROR,\r\n    UPLOAD_DONE_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as myUtils from '../../utils/utils';\r\nimport {UPLOADING} from  './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const TOGGLE_EDIT_IMAGE_DIALOG = 'TOGGLE_EDIT_IMAGE_DIALOG';\r\nexport const toggleEditImageDialog = mode => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n            mode, // upload logo (first time or not) or profile picture\r\n            user: getState().auth.user\r\n        });\r\n    }\r\n};\r\n\r\nexport const SET_IMAGE_EDITOR_REFERENCE = 'SET_IMAGE_EDITOR_REFERENCE';\r\nexport const setImageEditorReference = editor => {\r\n    return {\r\n        type: SET_IMAGE_EDITOR_REFERENCE,\r\n        editor\r\n    }\r\n};\r\n\r\nexport const LOADING_IMAGE_FILE = 'LOADING_IMAGE_FILE';\r\nexport const IMAGE_FILES_LOADED = 'IMAGE_FILES_LOADED';\r\nexport const handleImageFilesChanged = files => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_IMAGE_FILE\r\n        });\r\n\r\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\r\n\r\n        dispatch({\r\n            type: IMAGE_FILES_LOADED,\r\n            blob\r\n        });\r\n    }\r\n};\r\n\r\nexport const handleImageFileError = (error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n            message: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n            color: \"error\",\r\n            position: \"bottom\"\r\n        };\r\n    }\r\n};\r\n\r\nexport const LOADING_PREVIOUS_IMAGE = 'LOADING_PREVIOUS_IMAGE';\r\nexport const FINISHED_LOADING_PREVIOUS_IMAGE = 'FINISHED_LOADING_PREVIOUS_IMAGE';\r\nexport const handlePreviousImageItemClick = index => {\r\n    return (dispatch, getState) => {\r\n\r\n        dispatch({\r\n            type: LOADING_PREVIOUS_IMAGE\r\n        });\r\n\r\n        // send request through a CORS proxy can avoid cors problem\r\n        // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\r\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n\r\n        fetch(proxyUrl + getState().editImage.previousPhotos[index].url)\r\n            .then(response => {\r\n                return response.blob();\r\n            })\r\n            .then(blob => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_PREVIOUS_IMAGE,\r\n                    selectedIndex: index,\r\n                    blob,\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const IMAGE_ZOOM_CHANGED = 'IMAGE_ZOOM_CHANGED';\r\nexport const handleZoomSliderChanged = (event, newValue) => {\r\n    return {\r\n        type: IMAGE_ZOOM_CHANGED,\r\n        zoom: newValue\r\n    }\r\n};\r\n\r\nexport const CANCEL_EDITING_CURRENT_IMAGE = 'CANCEL_EDITING_CURRENT_IMAGE';\r\nexport const cancelEditingCurrentImage = () => {\r\n    return {\r\n        type: CANCEL_EDITING_CURRENT_IMAGE\r\n    }\r\n};\r\n\r\nexport const EDITED_IMAGE_OBTAINED = 'EDITED_IMAGE_OBTAINED';\r\nexport const viewEditedImagePreview = () => {\r\n    return (dispatch, getState) => {\r\n        const imgEditor = getState().editImage.imgEditor;\r\n\r\n        getEditedImage(imgEditor)\r\n            .then(blob => {\r\n                dispatch({\r\n                    type: EDITED_IMAGE_OBTAINED,\r\n                    blob\r\n                });\r\n            });\r\n    }\r\n};\r\n/**\r\n * Util function to get edited image\r\n *\r\n * @param imgEditor\r\n * @returns {Promise<unknown>}\r\n */\r\nconst getEditedImage = async (imgEditor) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (imgEditor && !isNaN(imgEditor.getCroppingRect().x)) {\r\n            // This returns a HTMLCanvasElement, it can be made into a data URL or a blob,\r\n            // drawn on another canvas, or added to the DOM.\r\n            imgEditor.getImage().toBlob(blob => {\r\n                return resolve(blob);\r\n            }, 'image/jpg');\r\n        }\r\n        else {\r\n            return reject();\r\n        }\r\n    });\r\n};\r\n\r\nexport const CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE = 'CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE';\r\nexport const handleSaveEditedImage = () => {\r\n    return (dispatch, getState) => {\r\n        if (getState().editImage.mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n            getEditedImage(getState().editImage.imgEditor)\r\n                .then(blob => {\r\n                    dispatch({\r\n                        type: CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE,\r\n                        blob\r\n                    });\r\n                });\r\n            return;\r\n        }\r\n\r\n        getEditedImage(getState().editImage.imgEditor)\r\n            .then(blob => {\r\n                // dismiss edit image dialog\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                    waitForUploading: true\r\n                });\r\n                // start uploading image\r\n                uploadImage(dispatch, getState().auth.user, getState().editImage, blob);\r\n            });\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload an image (logo or profile picture)\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const uploadImage = async (dispatch, user, editImageState, blob) => {\r\n    const {\r\n        mode,\r\n        imgPreIndex\r\n    } = editImageState;\r\n\r\n    let firebaseStorage = firebase.storage();\r\n    let firebaseDB = firebase.database();\r\n\r\n    if (mode !== UPLOAD_PROFILE_PICTURE_MODE && mode !== UPLOAD_LOGO_FIRST_TIME_MODE && mode !== UPLOAD_LOGO_MODE) {\r\n        return;\r\n    }\r\n\r\n    dispatch({\r\n        type: UPLOADING,\r\n        mode,\r\n        progress: 0\r\n    });\r\n\r\n    let storageID = 0;\r\n    let storageLocation = '';\r\n\r\n    // upload logo\r\n    if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n\r\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n        if (imgPreIndex !== -1) {\r\n            // don't need to check for BusinessProfile and logo nodes here because imgPreIndex only be set if the user already has images uploaded\r\n            const imgName = user.BusinessProfile.logo[imgPreIndex].storageID;\r\n            // delete old image\r\n            await firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.LOGOS_CHILD}/${imgName}`)\r\n                .delete();\r\n        } else {\r\n            // do nothing here\r\n        }\r\n        storageID = myUtils.getCurrentDate();\r\n        storageLocation = `${DB_CONST.LOGOS_CHILD}/${storageID}`;\r\n    }\r\n    // upload profile picture\r\n    else if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\r\n\r\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n        if (imgPreIndex !== -1) {\r\n            // don't need to check for profilePicture node here because imgPreIndex only be set if the user already has images uploaded\r\n            const imgName = user.profilePicture[imgPreIndex].storageID;\r\n            // delete old image\r\n            await firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.PROFILE_PICTURES_CHILD}/${imgName}`)\r\n                .delete();\r\n        } else {\r\n            // do nothing here\r\n        }\r\n        storageID = myUtils.getCurrentDate();\r\n        storageLocation = `${DB_CONST.PROFILE_PICTURES_CHILD}/${storageID}`;\r\n    }\r\n    // mode invalid\r\n    else {\r\n        return;\r\n    }\r\n\r\n    const storageRef = firebaseStorage\r\n        .ref(DB_CONST.USERS_CHILD)\r\n        .child(user.id)\r\n        .child(storageLocation);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // upload logo to firebase storage\r\n        const uploadTask = storageRef.put(blob);\r\n        uploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode,\r\n                progress: progress.toFixed(0)\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100\r\n            });\r\n\r\n            return reject(error);\r\n            // logo successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded logo\r\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\r\n\r\n                const imgUploadedObj = {\r\n                    storageID: storageID,\r\n                    url: imgDownloadURL\r\n                };\r\n\r\n                let prevNodeImgs = [];\r\n                let firebaseRef = firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .child(user.id);\r\n\r\n                // upload logo\r\n                if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n                    // user has not uploaded any images\r\n                    if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\r\n                        prevNodeImgs = [];\r\n                        prevNodeImgs.push(imgUploadedObj);\r\n                    }\r\n                    // user has uploaded images\r\n                    else {\r\n                        prevNodeImgs = user.BusinessProfile.logo;\r\n\r\n                        // edit previous image --> don't to save new, just need to edit the node instead\r\n                        if (imgPreIndex !== -1) {\r\n                            prevNodeImgs.splice(imgPreIndex, 1);\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                        // upload new image\r\n                        else {\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                    }\r\n\r\n                    firebaseRef = firebaseRef\r\n                        .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n                        .child(DB_CONST.LOGO_CHILD);\r\n                }\r\n                // upload profile picture\r\n                else {\r\n                    // user has not uploaded any images\r\n                    if (!user.profilePicture) {\r\n                        prevNodeImgs = [];\r\n                        prevNodeImgs.push(imgUploadedObj);\r\n                    } else {\r\n                        prevNodeImgs = user.profilePicture;\r\n\r\n                        // edit previous image --> don't to save new, just need to edit the node instead\r\n                        if (imgPreIndex !== -1) {\r\n                            prevNodeImgs.splice(imgPreIndex, 1);\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                        // upload new image\r\n                        else {\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                    }\r\n\r\n                    firebaseRef = firebaseRef\r\n                        .child(DB_CONST.PROFILE_PICTURE_CHILD);\r\n                }\r\n\r\n                // update firebase realtime database\r\n                firebaseRef\r\n                    .set(prevNodeImgs)\r\n                    .then(() => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_DONE_MODE,\r\n                            progress: 100\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                            waitForUploading: false\r\n                        });\r\n\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_ERROR,\r\n                            progress: 100\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                            waitForUploading: false\r\n                        });\r\n\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    Divider,\r\n    IconButton,\r\n    Typography,\r\n    CircularProgress,\r\n    Slider\r\n} from '@material-ui/core';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Image\r\n} from 'react-bootstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport FlexView from 'react-flexview';\r\nimport Files from 'react-files';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport AvatarEditor from 'react-avatar-editor';\r\n\r\nimport {\r\n    UPLOAD_PROFILE_PICTURE_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.auth.user,\r\n\r\n        open: state.editImage.editImageDialogOpen,\r\n        mode: state.editImage.mode,\r\n        previousPhotos: state.editImage.previousPhotos,\r\n        imgPreEdited: state.editImage.imgPreEdited,\r\n        imgPreEditedLoaded: state.editImage.imgPreEditedLoaded,\r\n        imgPreIndex: state.editImage.imgPreIndex,\r\n        imgEdited: state.editImage.imgEdited,\r\n        imgZoom: state.editImage.imgZoom,\r\n\r\n        isMobile: state.MediaQueryState.isMobile\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onClose: () => dispatch(editImageActions.toggleEditImageDialog(null)),\r\n        setEditorReference: (editor) => dispatch(editImageActions.setImageEditorReference(editor)),\r\n        handleImageFilesChanged: (files) => dispatch(editImageActions.handleImageFilesChanged(files)),\r\n        handleImageFileError: (error, file) => dispatch(editImageActions.handleImageFileError(error, file)),\r\n        handleSliderChanged: (event, newValue) => dispatch(editImageActions.handleZoomSliderChanged(event, newValue)),\r\n        onPreviousImageItemClick: (index) => dispatch(editImageActions.handlePreviousImageItemClick(index)),\r\n        cancelEditingCurrentImage: () => dispatch(editImageActions.cancelEditingCurrentImage()),\r\n        viewEditedImagePreview: () => dispatch(editImageActions.viewEditedImagePreview()),\r\n        saveEditedImage: () => dispatch(editImageActions.handleSaveEditedImage()),\r\n\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\r\n    }\r\n};\r\n\r\nclass EditImageDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            open,\r\n            mode,\r\n            previousPhotos,\r\n            imgPreEdited,\r\n            imgPreEditedLoaded,\r\n            imgPreIndex,\r\n            imgEdited,\r\n            imgZoom,\r\n\r\n            onClose,\r\n            setEditorReference,\r\n            handleImageFilesChanged,\r\n            handleImageFileError,\r\n            handleSliderChanged,\r\n            onPreviousImageItemClick,\r\n            cancelEditingCurrentImage,\r\n            viewEditedImagePreview,\r\n            saveEditedImage,\r\n\r\n            closeFeedbackSnackbar,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={open}\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                fullScreen={isMobile}\r\n                onClose={onClose}\r\n                {...other}\r\n            >\r\n                <DialogContent style={{ padding: 0 }} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters >\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12}\r\n                                style={{\r\n                                    backgroundColor: colors.kick_starter_background_color_1,\r\n                                    paddingTop: 6,\r\n                                    paddingBottom: 6,\r\n                                    paddingLeft: 15,\r\n                                    paddingRight: 15\r\n                                }}\r\n                            >\r\n                                <FlexView vAlignContent=\"center\" >\r\n                                    <FlexView grow={8} >\r\n                                        <Typography variant=\"body1\" >\r\n                                            {\r\n                                                mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                                                    ?\r\n                                                    \"Upload profile picture\"\r\n                                                    :\r\n                                                    \"Upload logo\"\r\n                                            }\r\n                                        </Typography>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" >\r\n                                        <IconButton onClick={onClose} >\r\n                                            <CloseIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider/>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 18 }} >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ marginBottom: 25 }} >Upload a new photo or choose from your previous photos</Typography>\r\n                                    <Files\r\n                                        className={css(styles.img_drop_zone)}\r\n                                        onChange={handleImageFilesChanged}\r\n                                        onError={handleImageFileError}\r\n                                        accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                        minFileSize={0}\r\n                                        multiple\r\n                                        clickable\r\n                                        onClick={closeFeedbackSnackbar}\r\n                                    >\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                            <AddIcon fontSize=\"small\" style={{ marginRight: 8 }} />\r\n                                            Upload photo\r\n                                        </FlexView>\r\n                                    </Files>\r\n\r\n                                    <FlexView marginTop={22} hAlignContent=\"center\" style={{ position: 'relative', width: \"100%\", height: 325 }} >\r\n                                        <AvatarEditor\r\n                                            ref={setEditorReference}\r\n                                            image={imgPreEdited}\r\n                                            width={270}\r\n                                            height={270}\r\n                                            border={25}\r\n                                            borderRadius={150}\r\n                                            disableBoundaryChecks={false}\r\n                                            disableHiDPIScaling={false}\r\n                                            scale={imgZoom}\r\n                                            style={{\r\n                                                position: 'absolute',\r\n                                                top: 0\r\n                                            }}\r\n                                        />\r\n                                        {\r\n                                            imgPreEditedLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    hAlignContent=\"center\"\r\n                                                    vAlignContent=\"center\"\r\n                                                    style={{ position: 'absolute', width: \"100%\", height: \"100%\", top: 0, zIndex: 1 }}\r\n                                                >\r\n                                                    <CircularProgress color=\"primary\" />\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        this.renderSelectedPreviousPhotoStatus()\r\n                                    }\r\n\r\n                                    <FlexView width={310} marginTop={15} vAlignContent=\"center\" >\r\n                                        <ImageIcon fontSize=\"small\"/>\r\n                                        <Slider\r\n                                            min={1}\r\n                                            max={2.5}\r\n                                            step={0.001}\r\n                                            value={imgZoom}\r\n                                            onChange={handleSliderChanged}\r\n                                            style={{ marginLeft: 11, marginRight: 11 }}\r\n                                        />\r\n                                        <ImageIcon fontSize=\"large\"/>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView marginTop={15} hAlignContent=\"right\" >\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"outlined\"\r\n                                            color=\"primary\"\r\n                                            onClick={() => cancelEditingCurrentImage()}\r\n                                        >Cancel</Button>\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            disabled={!imgPreEdited}\r\n                                            onClick={() => viewEditedImagePreview()}\r\n                                            style={{ marginLeft: 16, marginRight: 16 }} >Preview</Button>\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            disabled={!imgPreEdited}\r\n                                            onClick={() => saveEditedImage()}\r\n                                        >Save</Button>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        !imgEdited\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            (\r\n                                                <FlexView marginTop={20} width={270} height={270} >\r\n                                                    <Image\r\n                                                        src={window.URL.createObjectURL(imgEdited)}\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        style={{ width: \"100%\", height: \"auto\", objectFit: \"scale-down\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            )\r\n                                    }\r\n\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider/>\r\n                            </Col>\r\n\r\n                            {\r\n                                // previous photos set to null --> don't want to display previous photos\r\n                                !previousPhotos\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 15 }} >\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\" >Your photos</Typography>\r\n\r\n                                        <Row noGutters style={{ padding: 12 }} >\r\n                                            {\r\n                                                previousPhotos\r\n                                                    .sort((photo1, photo2) => photo2.storageID - photo1.storageID)\r\n                                                    .map((previousPhoto, index) => (\r\n                                                        <Col\r\n                                                            key={index}\r\n                                                            xs={6}\r\n                                                            sm={4}\r\n                                                            md={3}\r\n                                                            lg={3}\r\n                                                            onClick={() => onPreviousImageItemClick(index)}\r\n                                                        >\r\n                                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ width: \"100%\", padding: 5 }} >\r\n                                                                <Image\r\n                                                                    key={index}\r\n                                                                    src={previousPhoto.url}\r\n                                                                    className={css(styles.previous_img_item_selected)}\r\n                                                                    style={{\r\n                                                                        height: 128,\r\n                                                                        width: 128,\r\n                                                                        objectFit: \"contain\"\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Render selected previous photo's status\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderSelectedPreviousPhotoStatus = () => {\r\n        const {\r\n            user,\r\n            imgPreIndex,\r\n            mode\r\n        } = this.props;\r\n\r\n        let msg = '';\r\n\r\n        if (imgPreIndex === -1) {\r\n            return null;\r\n        }\r\n\r\n        // upload profile picture\r\n        if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\r\n            // user has no previous profile pictures\r\n            if (!user.profilePicture) {\r\n                return null;\r\n            }\r\n            // user has previous profile pictures\r\n            else {\r\n                // the selected photo is not the current profile picture\r\n                if (imgPreIndex !== user.profilePicture.findIndex(profilePic => !profilePic.hasOwnProperty('removed'))) {\r\n                    msg = 'This photo is a previous profile picture.';\r\n                } else {\r\n                    msg = 'This photo is the current profile picture.';\r\n                }\r\n            }\r\n        }\r\n        // upload logo\r\n        else {\r\n            // user has no previous logos\r\n            if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\r\n                return null;\r\n            }\r\n            // user has previous logos\r\n            else {\r\n                // the selected photo is not the current logo\r\n                if (imgPreIndex !== user.BusinessProfile.logo.findIndex(logo => !logo.hasOwnProperty('removed'))) {\r\n                    msg = 'This photo is a previous logo.';\r\n                } else {\r\n                    msg = 'This photo is the current logo.';\r\n                }\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 12 }}>{msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => (<EditImageDialog {...props} forwardedRef={ref}/>))\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    img_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    previous_img_item_selected: {\r\n        ':hover': {\r\n            border: `4px solid ${colors.primaryColor}`,\r\n            cursor: 'pointer',\r\n            opacity: 0.90\r\n        }\r\n    }\r\n});","import {\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_DONE_MODE,\r\n    UPLOAD_ERROR\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {UPLOADING} from  './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const TOGGLE_EDIT_VIDEO_DIALOG = 'TOGGLE_EDIT_VIDEO_DIALOG';\r\nexport const toggleEditVideoDialog = mode => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n            mode, // upload video (first time or not)\r\n            user: getState().auth.user\r\n        });\r\n    }\r\n};\r\n\r\nexport const VIDEO_TYPE_CHOSEN = 'VIDEO_TYPE_CHOSEN';\r\nexport const chooseVideoType = videoType => {\r\n    return {\r\n        type: VIDEO_TYPE_CHOSEN,\r\n        videoType\r\n    }\r\n};\r\n\r\nexport const VIDEO_URL_CHANGED = 'VIDEO_URL_CHANGED';\r\nexport const handleVideoURLChanged = event => {\r\n    return {\r\n        type: VIDEO_URL_CHANGED,\r\n        url: event.target.value\r\n    }\r\n};\r\n\r\nexport const VIDEO_FILE_CHANGED = 'VIDEO_FILE_CHANGED';\r\nexport const handleVideoFilesChanged = files => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\r\n            return;\r\n        }\r\n        const blob = new Blob([files[files.length - 1]], {type: 'video/mp4'});\r\n        dispatch({\r\n            type: VIDEO_FILE_CHANGED,\r\n            blob\r\n        });\r\n    }\r\n};\r\n\r\nexport const VIDEO_FILE_ERROR = 'VIDEO_FILE_ERROR';\r\nexport const handleVideoFileError = (error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n            message: `Video is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n            color: \"error\",\r\n            position: \"bottom\"\r\n        };\r\n    }\r\n};\r\n\r\nexport const CREATE_BUSINESS_PROFILE_SAVE_VIDEO = 'CREATE_BUSINESS_PROFILE_SAVE_VIDEO';\r\nexport const handleSaveVideo = () => {\r\n    return (dispatch, getState) => {\r\n        if (getState().editVideo.mode === UPLOAD_VIDEO_FIRST_TIME_MODE) {\r\n            dispatch({\r\n                type: CREATE_BUSINESS_PROFILE_SAVE_VIDEO,\r\n                video: getState().editVideo.videoChosen\r\n            });\r\n            return;\r\n        }\r\n        // dismiss edit image dialog\r\n        dispatch({\r\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n            waitForUploading: true\r\n        });\r\n        // start uploading image\r\n        uploadVideo(dispatch, getState().auth.user, getState().editVideo, getState().editVideo.videoChosen);\r\n    }\r\n};\r\n\r\nexport const PREVIOUS_VIDEO_SELECTED = 'PREVIOUS_VIDEO_SELECTED';\r\nexport const handlePreviousVideoItemClick = index => {\r\n    return {\r\n        type: PREVIOUS_VIDEO_SELECTED,\r\n        selectedIndex: index\r\n    }\r\n};\r\n\r\nexport const CANCEL_EDITING_CURRENT_VIDEO = 'CANCEL_EDITING_CURRENT_VIDEO';\r\nexport const cancelEditingCurrentVideo = () => {\r\n    return {\r\n        type: CANCEL_EDITING_CURRENT_VIDEO\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload intro video to firebase storage\r\n *\r\n * @param dispatch\r\n * @param user\r\n * @param editVideoState\r\n * @param video\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const uploadVideo = async (dispatch, user, editVideoState, video) => {\r\n\r\n    const {\r\n        mode,\r\n        videoPreIndex\r\n    } = editVideoState;\r\n\r\n    dispatch({\r\n        type: UPLOADING,\r\n        mode,\r\n        progress: 0\r\n    });\r\n\r\n    let downloadedPreviousVideo = null;\r\n\r\n    // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n    // video entry with storageID = \"\" is the one not stored in Firebase storage\r\n    if (videoPreIndex !== -1) {\r\n        // select previously uploaded video as the current video\r\n        if (user.BusinessProfile.video[videoPreIndex].storageID !== \"\") {\r\n            // send request through a CORS proxy can avoid cors problem\r\n            // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\r\n            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n\r\n            await fetch(proxyUrl + user.BusinessProfile.video[videoPreIndex].url)\r\n                .then(response => {\r\n                    return response.blob();\r\n                })\r\n                .then(blob => {\r\n                    downloadedPreviousVideo = blob;\r\n                });\r\n\r\n            // don't need to check for BusinessProfile and video nodes here because videoPreIndex only be set if the user already has videos uploaded\r\n            const videoName = user.BusinessProfile.video[videoPreIndex].storageID;\r\n            // delete old video, don't need to wait for this to complete as the file will be deleted anyway\r\n            firebase.storage()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.INTRO_VIDEOS_CHILD}/${videoName}`)\r\n                .delete();\r\n        }\r\n        // select previous video URL as the current video\r\n        else {\r\n            const videoUploadedObj = {\r\n                storageID: \"\",\r\n                dateUploaded: utils.getCurrentDate(),\r\n                url: video\r\n            };\r\n\r\n            return new Promise((resolve, reject) => {\r\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        }\r\n    } else {\r\n        // do nothing here\r\n    }\r\n\r\n    // upload a new video URL\r\n    if (typeof (video) === \"string\") {\r\n        const videoUploadedObj = {\r\n            storageID: \"\",\r\n            dateUploaded: utils.getCurrentDate(),\r\n            url: video\r\n        };\r\n\r\n        return new Promise((resolve, reject) => {\r\n            putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                .then(() => {\r\n                    return resolve();\r\n                })\r\n                .catch(error => {\r\n                    return reject(error);\r\n                });\r\n        });\r\n    }\r\n\r\n    const storageID = utils.getCurrentDate();\r\n    const storageLocation = `${DB_CONST.INTRO_VIDEOS_CHILD}/${storageID}`;\r\n\r\n    const storageRef = firebase.storage()\r\n        .ref(DB_CONST.USERS_CHILD)\r\n        .child(user.id)\r\n        .child(storageLocation);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // upload logo to firebase storage\r\n        const videoUploadTask = storageRef.put(downloadedPreviousVideo ? downloadedPreviousVideo : video);\r\n        videoUploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode,\r\n                progress: progress.toFixed(0)\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100\r\n            });\r\n\r\n            return reject(error);\r\n            // video successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded video\r\n            videoUploadTask.snapshot.ref.getDownloadURL().then(videoDownloadURL => {\r\n\r\n                const videoUploadedObj = {\r\n                    storageID: storageID,\r\n                    dateUploaded: storageID,\r\n                    url: videoDownloadURL\r\n                };\r\n\r\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * Handle to put the uploaded video to Firebase realtime\r\n *\r\n * @param dispatch\r\n * @param user\r\n * @param videoUploadedObj\r\n * @param videoPreIndex\r\n * @returns {Promise<unknown>}\r\n */\r\nconst putUploadedVideoToFirebaseRealtime = async (dispatch, user, videoUploadedObj, videoPreIndex) => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n        let prevNodeVideos = [];\r\n        let firebaseRef = firebase.database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(user.id)\r\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n            .child(DB_CONST.INTRO_VIDEO_CHILD);\r\n\r\n        // user has not uploaded any videos\r\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\r\n            prevNodeVideos = [];\r\n            prevNodeVideos.push(videoUploadedObj);\r\n        }\r\n        // user has uploaded videos\r\n        else {\r\n            prevNodeVideos = user.BusinessProfile.video;\r\n\r\n            // edit previous video --> don't need to save new, just need to edit the node instead\r\n            if (videoPreIndex !== -1) {\r\n                prevNodeVideos.splice(videoPreIndex, 1);\r\n                prevNodeVideos.forEach(imgItem => {\r\n                    imgItem.removed = true;\r\n                });\r\n                prevNodeVideos.push(videoUploadedObj);\r\n            }\r\n            // upload new video\r\n            else {\r\n                prevNodeVideos.forEach(imgItem => {\r\n                    imgItem.removed = true;\r\n                });\r\n                prevNodeVideos.push(videoUploadedObj);\r\n            }\r\n        }\r\n\r\n        firebaseRef\r\n            .set(prevNodeVideos)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_DONE_MODE,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n                    waitForUploading: false\r\n                });\r\n\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_ERROR,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n                    waitForUploading: false\r\n                });\r\n\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    Divider,\r\n    IconButton,\r\n    Typography,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport Files from 'react-files';\r\nimport { css, StyleSheet } from 'aphrodite';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nexport const VIDEO_UPLOAD_FILE_SELECTED = 1;\r\nexport const VIDEO_UPLOAD_URL_SELECTED = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.auth.user,\r\n\r\n        allowVideoUpload:\r\n            state.manageClubAttributes.clubAttributes && state.manageClubAttributes.clubAttributes.hasOwnProperty('allowVideoUpload')\r\n                ?\r\n                state.manageClubAttributes.clubAttributes.allowVideoUpload\r\n                :\r\n                false,\r\n\r\n        open: state.editVideo.editVideoDialogOpen,\r\n        mode: state.editVideo.mode,\r\n\r\n        videoTypeSelected: state.editVideo.videoTypeSelected,\r\n        videoChosen: state.editVideo.videoChosen,\r\n        previousVideos: state.editVideo.previousVideos,\r\n        videoPreIndex: state.editVideo.videoPreIndex,\r\n\r\n        isMobile: state.MediaQueryState.isMobile\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onClose: () => dispatch(editVideoActions.toggleEditVideoDialog(null)),\r\n        chooseVideoType: (videoType) => dispatch(editVideoActions.chooseVideoType(videoType)),\r\n        handleVideoURLChanged: (event) => dispatch(editVideoActions.handleVideoURLChanged(event)),\r\n        handleVideoFileChanged: (files) => dispatch(editVideoActions.handleVideoFilesChanged(files)),\r\n        handleVideoFileError: (error, file) => dispatch(editVideoActions.handleVideoFileError(error, file)),\r\n        cancelEditingCurrentVideo: () => dispatch(editVideoActions.cancelEditingCurrentVideo()),\r\n        handlePreviousVideoItemClick: (index) => dispatch(editVideoActions.handlePreviousVideoItemClick(index)),\r\n        handleSaveVideo: () => dispatch(editVideoActions.handleSaveVideo()),\r\n\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\r\n    }\r\n};\r\n\r\nclass EditVideoDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            isMobile,\r\n            open,\r\n            user,\r\n\r\n            allowVideoUpload,\r\n            videoTypeSelected,\r\n\r\n            previousVideos,\r\n            videoChosen,\r\n            videoPreIndex,\r\n\r\n            onClose,\r\n            chooseVideoType,\r\n            handleVideoURLChanged,\r\n            handleVideoFileChanged,\r\n            handleVideoFileError,\r\n            cancelEditingCurrentVideo,\r\n            handlePreviousVideoItemClick,\r\n            handleSaveVideo,\r\n\r\n            closeFeedbackSnackbar,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={open}\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                fullScreen={isMobile}\r\n                onClose={onClose}\r\n                {...other}\r\n            >\r\n                <DialogContent style={{ padding: 0 }} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12}\r\n                                style={{\r\n                                    backgroundColor: colors.kick_starter_background_color_1,\r\n                                    paddingTop: 6,\r\n                                    paddingBottom: 6,\r\n                                    paddingLeft: 15,\r\n                                    paddingRight: 15\r\n                                }}\r\n                            >\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FlexView grow={8} >\r\n                                        <Typography variant=\"body1\">Upload introduction video</Typography>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" >\r\n                                        <IconButton onClick={onClose} >\r\n                                            <CloseIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider />\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 18 }} >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ marginBottom: 25 }} >Upload a new video or choose from your previous videos</Typography>\r\n\r\n                                    {\r\n                                        allowVideoUpload\r\n                                            ?\r\n                                            <FlexView>\r\n                                                <Button\r\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                    color=\"primary\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    onClick={\r\n                                                        () => chooseVideoType(\r\n                                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                VIDEO_UPLOAD_FILE_SELECTED\r\n                                                        )\r\n                                                    }\r\n                                                >\r\n                                                    {\r\n                                                        videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                            ?\r\n                                                            \"Cancel upload a video\"\r\n                                                            :\r\n                                                            \"Upload a video\"\r\n                                                    }\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                    color=\"primary\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    onClick={\r\n                                                        () => chooseVideoType(\r\n                                                            videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                VIDEO_UPLOAD_URL_SELECTED\r\n                                                        )\r\n                                                    }\r\n                                                    style={{ marginLeft: 20 }}\r\n                                                >\r\n                                                    {\r\n                                                        videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                            ?\r\n                                                            \"Cancel upload a video URL\"\r\n                                                            :\r\n                                                            \"Upload a video URL\"\r\n                                                    }\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <Button\r\n                                                variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                color=\"primary\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                onClick={() => chooseVideoType(VIDEO_UPLOAD_URL_SELECTED)}\r\n                                            >\r\n                                                {\r\n                                                    videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                        ?\r\n                                                        \"Cancel upload a video URL\"\r\n                                                        :\r\n                                                        \"Upload a video URL\"\r\n                                                }\r\n                                            </Button>\r\n                                    }\r\n\r\n                                    {/** Upload video field (upload file or URL) */}\r\n                                    {\r\n                                        !videoTypeSelected\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                ?\r\n                                                <FlexView column marginTop={20} >\r\n                                                    <Files\r\n                                                        className={css(styles.video_drop_zone)}\r\n                                                        onChange={handleVideoFileChanged}\r\n                                                        onError={handleVideoFileError}\r\n                                                        accepts={['video/mp4']}\r\n                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                        minFileSize={0}\r\n                                                        multiple\r\n                                                        clickable\r\n                                                        onClick={closeFeedbackSnackbar}\r\n                                                    >\r\n                                                        <FlexView vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                            <AddIcon fontSize=\"small\" style={{ marginRight: 8 }} />\r\n                                                            Upload video\r\n                                                        </FlexView>\r\n                                                    </Files>\r\n                                                </FlexView>\r\n                                                :\r\n                                                <TextField\r\n                                                    name=\"videoChosen\"\r\n                                                    placeholder=\"Enter your video URL\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={\r\n                                                        !videoChosen\r\n                                                            ?\r\n                                                            ''\r\n                                                            :\r\n                                                            typeof(videoChosen) === \"string\"\r\n                                                                ?\r\n                                                                videoChosen\r\n                                                                :\r\n                                                                ''\r\n                                                    }\r\n                                                    fullWidth\r\n                                                    onChange={handleVideoURLChanged}\r\n                                                    style={{\r\n                                                        marginTop: 20\r\n                                                    }}\r\n                                                />\r\n                                    }\r\n\r\n                                    {/** Preview video */}\r\n                                    {\r\n                                        !videoChosen\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} hAlignContent=\"center\" style={{ width: \"100%\" }} >\r\n                                                <ReactPlayer\r\n                                                    url={\r\n                                                        typeof(videoChosen) === \"string\"\r\n                                                            ?\r\n                                                            videoChosen\r\n                                                            :\r\n                                                            window.URL.createObjectURL(videoChosen)\r\n                                                    }\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                    width=\"100%\"\r\n                                                    height={280}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Previous/current video status */}\r\n                                    {\r\n                                        this.renderSelectedPreviousVideoStatus()\r\n                                    }\r\n\r\n                                    {/** Cancel/Save */}\r\n                                    {\r\n                                        !videoChosen\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} hAlignContent=\"right\" >\r\n                                                <Button\r\n                                                    size=\"medium\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => cancelEditingCurrentVideo()}\r\n                                                    style={{ marginRight: 8 }}\r\n                                                >Cancel\r\n                                                </Button>\r\n                                                <Button\r\n                                                    size=\"medium\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"contained\"\r\n                                                    color=\"primary\"\r\n                                                    disabled={!videoChosen}\r\n                                                    onClick={handleSaveVideo}\r\n                                                    style={{\r\n                                                        marginLeft: 8\r\n                                                    }}\r\n                                                >Save\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider style={{ marginTop: 8 }} />\r\n                            </Col>\r\n\r\n                            {/** Previous videos */}\r\n                            {\r\n                                // previous videos set to null --> don't want to display previous videos\r\n                                !previousVideos\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 15 }} >\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\">Your videos</Typography>\r\n\r\n                                        <Row noGutters style={{ padding: 12 }} >\r\n                                            {\r\n                                                previousVideos\r\n                                                    .sort((video1, video2) => video2.dateUploaded - video1.dateUploaded)\r\n                                                    .map((previousVideo, index) => (\r\n                                                        <Col\r\n                                                            key={index}\r\n                                                            xs={6}\r\n                                                            sm={4}\r\n                                                            md={4}\r\n                                                            lg={4}\r\n                                                            onClick={() => handlePreviousVideoItemClick(index)}\r\n                                                        >\r\n                                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ width: \"100%\", padding: 10 }} >\r\n                                                                <ReactPlayer\r\n                                                                    url={previousVideo.url}\r\n                                                                    playing={false}\r\n                                                                    controls={false}\r\n                                                                    playsinline={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                    className={css(styles.previous_video_item_selected)}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        )\r\n    }\r\n\r\n    renderSelectedPreviousVideoStatus = () => {\r\n        const {\r\n            user,\r\n            videoPreIndex,\r\n        } = this.props;\r\n\r\n        let msg = '';\r\n\r\n        if (videoPreIndex === -1) {\r\n            return null;\r\n        }\r\n\r\n        // user has no previous videos\r\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\r\n            return null;\r\n        }\r\n        // user has previous videos\r\n        else {\r\n            // the selected photo is not the current video\r\n            if (videoPreIndex !== user.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))) {\r\n                msg = 'This video is a previous introduction video.';\r\n            }\r\n            else {\r\n                msg = 'This video is the current introduction video.';\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 12 }}>{msg}</Typography>\r\n        );\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <EditVideoDialog {...props} forwardedRef={ref} />)\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    video_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    previous_video_item_selected: {\r\n        ':hover': {\r\n            border: `4px solid ${colors.primaryColor}`,\r\n            cursor: 'pointer',\r\n            opacity: 0.90\r\n        }\r\n    }\r\n});","import React, { Component } from \"react\";\r\nimport {\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport FlexView from \"react-flexview\";\r\nimport { StyleSheet, css } from \"aphrodite\";\r\nimport * as colors from \"../../values/colors\";\r\n\r\nexport default class PageNotFound extends Component {\r\n    render() {\r\n        return (\r\n            <FlexView column hAlignContent=\"center\" marginTop={50} marginLeft=\"10%\" marginRight=\"10%\" >\r\n                <Typography className={css(styles.error_text)} >404 Error</Typography>\r\n                <Typography className={css(styles.page_not_found_text)} >Page not found</Typography>\r\n                <Typography className={css(styles.explain_text)} >We are sorry, the page you requested could not be found.</Typography>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    error_text: {\r\n        fontSize: 65,\r\n        color: colors.primaryColor,\r\n        textAlign: 'center'\r\n    },\r\n\r\n    page_not_found_text: {\r\n        fontSize: 50,\r\n        fontWeight: 'bold',\r\n        marginTop: 30,\r\n        marginBottom: 20,\r\n        textAlign: 'center'\r\n    },\r\n\r\n    explain_text: {\r\n        fontSize: 40,\r\n        color: colors.gray_600,\r\n        textAlign: 'center'\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport PageNotFound from './PageNotFound';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class PageNotFoundWhole extends Component {\r\n    render() {\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                    <Col xs={12} md={12} lg={12} >\r\n                        <FlexView height={1} style={{ backgroundColor: colors.gray_300 }} />\r\n                    </Col>\r\n                    <Col xs={12} md={12} lg={12} >\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}","/**\r\n * Admin interface\r\n */\r\nimport User from \"./user\";\r\n\r\nexport default interface Admin {\r\n    id: string;\r\n    anid: string;\r\n    email: string;\r\n    superAdmin: boolean;\r\n    superGroupAdmin: boolean;\r\n    type: number;\r\n    isInvestWest: boolean;\r\n    dateAdded?: number; // superAdmin doesn't have this field\r\n}\r\n\r\n/**\r\n * Check if a user is an admin\r\n *\r\n * @param user\r\n */\r\nexport const isAdmin = (user: User | Admin): Admin | null => {\r\n    if (\"anid\" in user) {\r\n        return JSON.parse(JSON.stringify(user));\r\n    }\r\n    return null;\r\n}","import GroupProperties from \"./group_properties\";\r\n\r\nexport default interface GroupOfMembership {\r\n    group: GroupProperties;\r\n    joinedDate: number;\r\n    isHomeGroup: boolean;\r\n    userInGroupStatus: number;\r\n}\r\n\r\nexport const getHomeGroup = (groups: GroupOfMembership[]): GroupOfMembership | null => {\r\n    const index = groups.findIndex(group => group.isHomeGroup);\r\n    if (index !== -1) {\r\n        return groups[index];\r\n    }\r\n    return null;\r\n}","/**\r\n * User interface\r\n *\r\n * \"none\" means this user profile doesn't actually exist\r\n */\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../firebase/databaseConsts\";\r\nimport Admin from \"./admin\";\r\nimport Address from \"./address\";\r\n\r\nexport const UserTitles = [\"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Dr.\", \"Prof.\"];\r\n\r\nexport default interface User {\r\n    id: string | \"none\";\r\n    email: string;\r\n    linkedin?: string;\r\n    firstName: string | \"none\";\r\n    lastName: string | \"none\";\r\n    title: string | \"none\";\r\n    profilePicture?: ProfileImage[];\r\n    BusinessProfile?: BusinessProfile;\r\n    type: number;\r\n}\r\n\r\nexport interface BusinessProfile {\r\n    companyName: string;\r\n    companyWebsite: string;\r\n    registrationNo: string;\r\n    sector: string;\r\n    directors: string[];\r\n    registeredOffice: Address;\r\n    tradingAddress: Address;\r\n    logo: ProfileImage[];\r\n    video?: ProfileVideo[];\r\n}\r\n\r\nexport interface ProfileImage {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport interface ProfileVideo {\r\n    storageID: number;\r\n    dateUploaded: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport const isIssuer = (user: User | Admin) => {\r\n    return user.type === TYPE_ISSUER;\r\n}\r\n\r\nexport const isInvestor = (user: User | Admin) => {\r\n    return user.type === TYPE_INVESTOR;\r\n}\r\n\r\nexport const hasBusinessProfile = (user: User) => {\r\n    return user.BusinessProfile !== undefined;\r\n}\r\n\r\nexport const isTradingAddressSameAsRegisteredOffice = (user: User) => {\r\n    return user.BusinessProfile?.registeredOffice.postcode === user.BusinessProfile?.tradingAddress.postcode\r\n        && user.BusinessProfile?.registeredOffice.address1 === user.BusinessProfile?.tradingAddress.address1\r\n        && user.BusinessProfile?.registeredOffice.townCity === user.BusinessProfile?.tradingAddress.townCity\r\n}\r\n\r\nexport const getProfilePicture = (user: User): string | null => {\r\n    if (!user.profilePicture) {\r\n        return null;\r\n    }\r\n\r\n    const index: number = user.profilePicture.findIndex((profilePicture: ProfileImage) =>\r\n        profilePicture.removed === undefined);\r\n\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return user.profilePicture[index].url;\r\n}","import Admin, {isAdmin} from \"../models/admin\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../models/group_of_membership\";\r\nimport {AuthenticationState} from \"../redux-store/reducers/authenticationReducer\";\r\nimport {ManageGroupUrlState} from \"../redux-store/reducers/manageGroupUrlReducer\";\r\nimport User, {isInvestor} from \"../models/user\";\r\n\r\nexport interface CreateProjectRouteParams {\r\n    edit?: string;\r\n    admin?: string;\r\n    issuer?: string;\r\n}\r\n\r\nexport default class Routes {\r\n    static baseGroup: string = \"/groups/:groupUserName\";\r\n\r\n    static nonGroupFront: string = \"/\";\r\n    static groupFront: string = `${Routes.baseGroup}`;\r\n\r\n    static nonGroupSignIn: string = \"/groups/invest-west/signin\";\r\n    static groupSignIn: string = `${Routes.baseGroup}/signin`;\r\n    static superAdminSignIn: string = \"/signin/super-admin\";\r\n\r\n    static nonGroupSignUp:string = 'groups/invest-west/signup';\r\n    static groupSignUp: string = `${Routes.baseGroup}/signup/:id?`;\r\n\r\n    static nonGroupAdminDashboard: string = \"/admin\";\r\n    static groupAdminDashboard: string = `${Routes.baseGroup}/admin`;\r\n\r\n    static groupIssuerDashboard: string = `${Routes.baseGroup}/dashboard/issuer`;\r\n\r\n    static groupInvestorDashboard: string = `${Routes.baseGroup}/dashboard/investor`;\r\n\r\n    static nonGroupViewUserProfile: string = \"/view-profile/:userID\";\r\n    static groupViewUserProfile: string = `${Routes.baseGroup}/view-profile/:userID`;\r\n\r\n    static nonGroupEditUserProfile: string = \"/edit-profile/:userID\";\r\n    static groupEditUserProfile: string = `${Routes.baseGroup}/edit-profile/:userID`;\r\n\r\n    static nonGroupCreateOffer: string = \"/create-offer\";\r\n    static groupCreateOffer: string = `${Routes.baseGroup}/create-offer`;\r\n\r\n    static nonGroupViewOffer: string = \"/projects/:projectID\";\r\n    static groupViewOffer: string = `${Routes.baseGroup}/projects/:projectID`;\r\n\r\n    static nonGroupViewPledge: string = \"/pledge\";\r\n    static groupViewPledge: string = `${Routes.baseGroup}/pledge`;\r\n\r\n    static nonGroupViewGroup: string = \"/view-group-details/:viewedGroupUserName\";\r\n    static groupViewGroup: string = `${Routes.baseGroup}/view-group-details/:viewedGroupUserName`;\r\n\r\n    static nonGroupViewResourceDetail: string = \"/resources/:resourceName\";\r\n    static groupViewResourceDetail: string = `${Routes.baseGroup}/resources/:resourceName`;\r\n\r\n    static nonGroupContactUs: string = \"/contact-us\";\r\n    static groupContactUs: string = `${Routes.baseGroup}/contact-us`;\r\n\r\n    static groupHelp: string = `${Routes.baseGroup}/help`;\r\n\r\n    static nonGroupTermsOfUse: string = \"/terms-of-use\";\r\n    static nonGroupPrivacyPolicy: string = \"/privacy-policy\";\r\n    static nonGroupRiskWarning: string = \"/risk-warning-footer\";\r\n    static nonGroupCreatePitchTermsAndConditions: string = \"/create-project-terms-and-conditions\";\r\n    static nonGroupMarketingPreferences: string = \"/marketing-preferences\";\r\n\r\n    static nonGroupAuthAction: string = \"/auth/action\";\r\n\r\n    static error404: string = \"/error/404\";\r\n\r\n    /**\r\n     * Check if a route is a protected one\r\n     *\r\n     * @param route\r\n     */\r\n    public static isProtectedRoute = (route: string) => {\r\n        return route !== Routes.nonGroupFront\r\n            && route !== Routes.groupFront\r\n            && route !== Routes.nonGroupSignIn\r\n            && route !== Routes.groupSignIn\r\n            && route !== Routes.nonGroupSignUp\r\n            && route !== Routes.groupSignUp\r\n            && route !== Routes.nonGroupContactUs\r\n            && route !== Routes.groupContactUs\r\n            && route !== Routes.nonGroupPrivacyPolicy\r\n            && route !== Routes.nonGroupTermsOfUse\r\n            && route !== Routes.nonGroupRiskWarning\r\n            && route !== Routes.nonGroupCreatePitchTermsAndConditions\r\n            && route !== Routes.nonGroupMarketingPreferences\r\n            && route !== Routes.nonGroupAuthAction\r\n            && route !== Routes.error404;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is reserved just for super admin\r\n     *\r\n     * @param route\r\n     */\r\n    public static isRouteReservedForSuperAdmin = (route: string) => {\r\n        return route === Routes.nonGroupAdminDashboard\r\n            || route === Routes.nonGroupViewUserProfile\r\n            || route === Routes.nonGroupEditUserProfile\r\n            || route === Routes.nonGroupCreateOffer\r\n            || route === Routes.nonGroupViewOffer\r\n            || route === Routes.nonGroupViewPledge\r\n            || route === Routes.nonGroupViewGroup;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is dedicated for a group admin\r\n     *\r\n     * @param route\r\n     */\r\n    public static isGroupAdminRoute = (route: string) => {\r\n        return route === Routes.groupAdminDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is dedicated for an issuer\r\n     *\r\n     * @param route\r\n     */\r\n    public static isIssuerDashboardRoute = (route: string) => {\r\n        return route === Routes.groupIssuerDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check  if a route is dedicated for an investor\r\n     *\r\n     * @param route\r\n     */\r\n    public static isInvestorDashboardRoute = (route: string) => {\r\n        return route === Routes.groupInvestorDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a sign in route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSignInRoute = (route: string) => {\r\n        return route === Routes.nonGroupSignIn || route === Routes.groupSignIn || route === Routes.superAdminSignIn;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a super admin sign in route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSuperAdminSignInRoute = (route: string) => {\r\n        return route === Routes.superAdminSignIn;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a sign up route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSignUpRoute = (route: string) => {\r\n        return route === Routes.nonGroupSignUp || route === Routes.groupSignUp;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is an error route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isErrorRoute = (route: string) => {\r\n        return route === Routes.error404;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a system public route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSystemPublicRoute = (route: string) => {\r\n        return route === Routes.nonGroupPrivacyPolicy\r\n            || route === Routes.nonGroupRiskWarning\r\n            || route === Routes.nonGroupTermsOfUse\r\n            || route === Routes.nonGroupCreatePitchTermsAndConditions\r\n            || route === Routes.nonGroupMarketingPreferences;\r\n    }\r\n\r\n    /**\r\n     * Construct public route\r\n     *\r\n     * @param route\r\n     */\r\n    public static constructPublicRoute = (route: \"privacyPolicy\" | \"riskWarning\" | \"termsOfUse\" | \"createPitchTermsAndConditions\" | \"marketingPreferences\") => {\r\n        switch (route) {\r\n            case \"privacyPolicy\":\r\n                return Routes.nonGroupPrivacyPolicy;\r\n            case \"riskWarning\":\r\n                return Routes.nonGroupRiskWarning;\r\n            case \"termsOfUse\":\r\n                return Routes.nonGroupTermsOfUse;\r\n            case \"createPitchTermsAndConditions\":\r\n                return Routes.nonGroupCreatePitchTermsAndConditions;\r\n            case \"marketingPreferences\":\r\n                return Routes.nonGroupMarketingPreferences;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct home route (navigate to Front page)\r\n     *\r\n     * @param routeParams\r\n     * @param ManageGroupUrlState\r\n     * @param AuthenticationState\r\n     */\r\n    public static constructHomeRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\r\n                                        AuthenticationState: AuthenticationState) => {\r\n        let route: string = \"\";\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            if (!routeParams.groupUserName) {\r\n                return Routes.nonGroupFront;\r\n            } else {\r\n                return Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\r\n            }\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\r\n        // an admin MUST use the correct sign in page to sign in\r\n        if (currentAdmin) {\r\n            // current admin is a super admin\r\n            if (currentAdmin.superAdmin) {\r\n                route = Routes.nonGroupFront;\r\n            }\r\n            // current admin is not a super admin\r\n            else {\r\n                if (AuthenticationState.groupsOfMembership.length === 1) {\r\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\r\n                    route = Routes.groupFront.replace(\":groupUserName\", adminGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\r\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\r\n        else {\r\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\r\n            if (routeParams.groupUserName) {\r\n                if (AuthenticationState.groupsOfMembership\r\n                    .filter(groupOfMembership =>\r\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\r\n                ) {\r\n                    route = Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\r\n                } else if (homeGroup) {\r\n                    route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                }\r\n            } else if (homeGroup) {\r\n                route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n            }\r\n        }\r\n\r\n        if (!route) {\r\n            return Routes.nonGroupFront;\r\n        }\r\n\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n    public static constructSignInRoute = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupSignIn.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupSignIn;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct sign up route + with a default value of IW group\r\n     *\r\n     * @param groupUserName\r\n     * @param invitedUserID\r\n     */\r\n    public static constructSignUpRoute = (groupUserName: string, invitedUserID?: string) => {\r\n        if (groupUserName) {\r\n            return Routes.groupSignUp\r\n                .replace(\":groupUserName\", groupUserName)\r\n                .replace(invitedUserID ? \":id?\" : \"/:id?\", invitedUserID ?? \"\");\r\n        } else {\r\n            return Routes.nonGroupSignUp;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n    public static constructContactUsRoute = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupContactUs.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupContactUs;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Construct dashboard route (navigate to Dashboard page)\r\n     *\r\n     * @param routeParams\r\n     * @param ManageGroupUrlState\r\n     * @param AuthenticationState\r\n     */\r\n    public static constructDashboardRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\r\n                                             AuthenticationState: AuthenticationState) => {\r\n        let route: string = \"\";\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return Routes.constructSignInRoute(routeParams);\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\r\n        // an admin MUST use the correct sign in page to sign in\r\n        if (currentAdmin) {\r\n            // current admin is a super admin\r\n            // --> redirect to super admin dashboard\r\n            if (currentAdmin.superAdmin) {\r\n                route = Routes.nonGroupAdminDashboard;\r\n            }\r\n                // current admin is not a super admin\r\n            // --> redirect to group admin dashboard\r\n            else {\r\n                if (AuthenticationState.groupsOfMembership.length === 1) {\r\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\r\n                    route = Routes.groupAdminDashboard.replace(\":groupUserName\", adminGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\r\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\r\n        else {\r\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\r\n            if (routeParams.groupUserName) {\r\n                if (AuthenticationState.groupsOfMembership\r\n                    .filter(groupOfMembership =>\r\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\r\n                ) {\r\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", routeParams.groupUserName);\r\n                    } else {\r\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", routeParams.groupUserName);\r\n                    }\r\n                } else if (homeGroup) {\r\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                    } else {\r\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                    }\r\n                }\r\n            } else if (homeGroup) {\r\n                if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                    route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                } else {\r\n                    route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (route === \"\") {\r\n            return Routes.constructSignInRoute(routeParams);\r\n        }\r\n        route += \"?tab=Home\";\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view project (offer) route\r\n     *\r\n     * @param groupUserName\r\n     * @param projectID\r\n     */\r\n    public static constructProjectDetailRoute = (groupUserName: string | null, projectID: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewOffer.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupViewOffer;\r\n        }\r\n        route = route.replace(\":projectID\", projectID);\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct create project (offer) route\r\n     *\r\n     * @param groupUserName\r\n     * @param params\r\n     */\r\n    public static constructCreateProjectRoute = (groupUserName: string | null, params?: CreateProjectRouteParams) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupCreateOffer.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupCreateOffer;\r\n        }\r\n\r\n        if (params !== undefined) {\r\n            // edit an offer\r\n            if (params.edit) {\r\n                route += `?edit=${params.edit}`;\r\n            }\r\n            // group admin creates an offer on behalf of an issuer\r\n            else if (params.admin && params.issuer) {\r\n                route += `?admin=${params.admin}&issuer=${params.issuer}`;\r\n            }\r\n        }\r\n\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view group route\r\n     *\r\n     * @param groupUserName\r\n     * @param viewedGroupUserName\r\n     */\r\n    public static constructGroupDetailRoute = (groupUserName: string | null, viewedGroupUserName: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewGroup.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupViewGroup;\r\n        }\r\n        route = route.replace(\":viewedGroupUserName\", viewedGroupUserName);\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view resource detail route\r\n     *\r\n     * @param groupUserName\r\n     * @param resourceName\r\n     */\r\n    public static constructViewResourceDetailRoute = (groupUserName: string | null, resourceName: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewResourceDetail\r\n                .replace(\":groupUserName\", groupUserName)\r\n                .replace(\":resourceName\", resourceName);\r\n        } else {\r\n            route = Routes.nonGroupViewResourceDetail.replace(\":resourceName\", resourceName);\r\n        }\r\n        return route;\r\n    }\r\n}\r\n\r\n\r\n//------------------- OLD ROUTES ---------------------------------------------------------------------------------------\r\nexport const ORIGINAL_WEB_URL = \"https://investwest.online\";\r\n\r\n// angel network path INCLUDING Invest West angel network\r\nexport const GROUP_PATH = \"/groups/:groupUserName\";\r\n\r\n// front with angel network logo\r\nexport const FRONT = GROUP_PATH;\r\n// front with Invest West page --> Only for Invest West super admins\r\nexport const FRONT_INVEST_WEST_SUPER = \"/\";\r\n\r\n// sign in with angel network logo --> only allow admins and users belong to this angel network to login\r\nexport const SIGN_IN = `${GROUP_PATH}/signin`;\r\n// sign in with Invest West logo --> only allow Invest West super admins to login\r\nexport const SIGN_IN_INVEST_WEST_SUPER = \"/signin\";\r\n\r\n// admin dashboard of an angel network --> only allow admins of the angel network to interact\r\nexport const ADMIN = `${GROUP_PATH}/admin`;\r\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const ADMIN_INVEST_WEST_SUPER = \"/admin\";\r\n\r\n// issuer dashboard of an angel network --> only allow issuers of the angel network to interact\r\nexport const DASHBOARD_ISSUER = `${GROUP_PATH}/dashboard/issuer`;\r\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const DASHBOARD_ISSUER_INVEST_WEST_SUPER = \"/dashboard/issuer\";\r\n\r\n// investor dashboard of an angel network --> only allow investors of the angel network to interact\r\nexport const DASHBOARD_INVESTOR = `${GROUP_PATH}/dashboard/investor`;\r\n// investor dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const DASHBOARD_INVESTOR_INVEST_WEST_SUPER = \"/dashboard/investor\";\r\n\r\n// sign up page for an angel network --> only users who have been invited by this angel network can see\r\nexport const SIGN_UP = `${GROUP_PATH}/signup/:id`;\r\n// sign up page for Invest West --> only Invest West super admins can interact\r\nexport const SIGN_UP_INVEST_WEST_SUPER = \"/signup/:id\";\r\n\r\n// view a user's profile while logged in under an angel network\r\nexport const USER_PROFILE = `${GROUP_PATH}/view-profile/:userID`;\r\n// view a user's profile while logged in under Invest West super admins\r\nexport const USER_PROFILE_INVEST_WEST_SUPER = \"/view-profile/:userID\";\r\n\r\n// edit a user's profile for group admins\r\nexport const EDIT_USER_PROFILE = `${GROUP_PATH}/edit-profile/:userID`;\r\n// edit a user's profile for super admins\r\nexport const EDIT_USER_PROFILE_INVEST_WEST_SUPER = \"/edit-profile/:userID\";\r\n\r\n// pledge under an angel network\r\nexport const PLEDGE = `${GROUP_PATH}/pledge`;\r\n// pledge under Invest West Invest West super admins\r\nexport const PLEDGE_INVEST_WEST_SUPER = \"/pledge\";\r\n\r\n// create an offer under an angel network\r\nexport const CREATE_OFFER = `${GROUP_PATH}/create-offer`;\r\nexport const EDIT_OFFER = `${CREATE_OFFER}?edit=:projectID`;\r\nexport const GROUP_ADMIN_CREATE_OFFER_ON_BEHALF_OF_ISSUER = `${CREATE_OFFER}?admin=:adminID&issuer=:issuerID`;\r\n// create an offer under Invest West super admins\r\nexport const CREATE_OFFER_INVEST_WEST_SUPER = \"/create-offer\";\r\nexport const EDIT_OFFER_INVEST_WEST_SUPER = `${CREATE_OFFER_INVEST_WEST_SUPER}?edit=:projectID`;\r\n\r\n// view offer's details under an angel network\r\nexport const PROJECT_DETAILS = `${GROUP_PATH}/projects/:projectID`;\r\n// view offer's details under Invest West super admins\r\nexport const PROJECT_DETAILS_INVEST_WEST_SUPER = \"/projects/:projectID\";\r\n\r\nexport const VIEW_GROUP_DETAILS = `${GROUP_PATH}/view-group-details/:groupID`;\r\nexport const VIEW_GROUP_DETAILS_INVEST_WEST_SUPER = \"/view-group-details/:groupID\";\r\n\r\nexport const CONTACT_US = `${GROUP_PATH}/contact-us`;\r\nexport const CONTACT_US_INVEST_WEST_SUPER = \"/contact-us\";\r\n\r\nexport const CONTACT_US_2 = `${GROUP_PATH}/contact-us-2`;\r\nexport const CONTACT_US_INVEST_WEST_SUPER_2 = \"/contact-us-2\";\r\n\r\nexport const HELP = `${GROUP_PATH}/help`;\r\nexport const HELP_INVEST_WEST_SUPER = \"/help\";\r\n\r\nexport const TERMS_OF_USE = \"/terms-of-use\";\r\nexport const PRIVACY_POLICY = \"/privacy-policy\";\r\nexport const RISK_WARNING = \"/risk-warning-footer\";\r\nexport const CREATE_PITCH_TERMS_AND_CONDITIONS = \"/create-project-terms-and-conditions\";\r\nexport const ABOUT_US = \"/about-us\";\r\nexport const MARKETING_PREFERENCES = \"/marketing-preferences\";\r\n\r\nexport const ERROR_404 = \"/error/404\";","import axios, {AxiosError, AxiosRequestConfig, AxiosResponse, Method} from \"axios\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport HttpResponseError from \"./ResponseError\";\r\n\r\n/**\r\n * Api routes\r\n */\r\nexport class ApiRoutes {\r\n    static systemAttributesBaseRoute = \"/system-attributes\";\r\n    static retrieveSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/retrieve\";\r\n    static updateSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/update\";\r\n\r\n    static authBaseRoute = \"/auth\";\r\n    static requestResetPasswordRoute = ApiRoutes.authBaseRoute + \"/request-reset-password\";\r\n    static verifyAuthRoute = ApiRoutes.authBaseRoute + \"/verify\";\r\n\r\n    static emailBaseRoute = \"/email\";\r\n    static sendEmailRoute = ApiRoutes.emailBaseRoute + \"/send\";\r\n\r\n    static usersBaseRoute = \"/users\";\r\n    static createUser = ApiRoutes.usersBaseRoute + \"/create\";\r\n    static retrieveUser = ApiRoutes.usersBaseRoute + \"/:uid/retrieve\";\r\n    static retrieveInvitedUser = ApiRoutes.usersBaseRoute + \"/:invitedUserID/retrieve-invited\";\r\n    static updateUser = ApiRoutes.usersBaseRoute + \"/update\";\r\n    static listGroupsOfMembership = ApiRoutes.usersBaseRoute + \"/:uid/groups-of-membership\";\r\n    static exportUsersCsvRoute = ApiRoutes.usersBaseRoute + \"/export\";\r\n\r\n    static groupsBaseRoute = \"/groups\";\r\n    static listGroups = ApiRoutes.groupsBaseRoute + \"/list\";\r\n    static retrieveGroup = ApiRoutes.groupsBaseRoute + \"/:groupUserName\";\r\n    static addMembersToGroup = ApiRoutes.groupsBaseRoute + \"/:group/add-members\";\r\n    static listGroupMembers = ApiRoutes.groupsBaseRoute + \"/:group/list-members\";\r\n\r\n    static projectsBaseRoute = \"/projects\";\r\n    static listProjectsRoute = ApiRoutes.projectsBaseRoute + \"/list\";\r\n    static sendProjectBackToIssuerRoute = ApiRoutes.projectsBaseRoute + \"/send-back-to-issuer\";\r\n    static exportProjectsToCsvRoute = ApiRoutes.projectsBaseRoute + \"/export\";\r\n\r\n    static groupAdminsBaseRoute = \"/group-admins\";\r\n    static addGroupAdminRoute = ApiRoutes.groupAdminsBaseRoute + \"/add\";\r\n\r\n    static accessRequestsBaseRoute = \"/access-requests\";\r\n    static listAccessRequestsRoute = ApiRoutes.accessRequestsBaseRoute + \"/list\";\r\n    static createAccessRequestRoute = ApiRoutes.accessRequestsBaseRoute + \"/create\";\r\n    static removeAccessRequestRoute = ApiRoutes.createAccessRequestRoute + \"/remove\";\r\n\r\n    static investorSelfCertificationBaseRoute = \"/investor-self-certifications\";\r\n    static retrieveInvestorSelfCertificationRoute = ApiRoutes.investorSelfCertificationBaseRoute + \"/retrieve\";\r\n\r\n    static fileBaseRoute = \"/file\";\r\n    static uploadSingleFileRoute = ApiRoutes.fileBaseRoute + \"/upload-single\";\r\n\r\n    static testRoute = \"/test\";\r\n}\r\n\r\nexport interface RequestOptionalParams {\r\n    requestBody: any | null;\r\n    queryParameters: any | null;\r\n}\r\n\r\n/**\r\n * Api class\r\n */\r\nexport default class Api {\r\n    baseUrl: string | undefined = process.env.REACT_APP_BACK_END_BASE_URL;\r\n\r\n    /**\r\n     * Build request URL\r\n     *\r\n     * @param endPoint\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private buildUrl(endPoint: string, queryParameters: any): string {\r\n        let fullUrl = this.baseUrl + endPoint + Api.buildQueryParameters(queryParameters);\r\n        return encodeURI(fullUrl);\r\n    }\r\n\r\n    /**\r\n     * Build query parameters\r\n     *\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private static buildQueryParameters(queryParameters: any): string {\r\n        if (queryParameters === null) {\r\n            return \"\";\r\n        }\r\n\r\n        let result: string = \"?\";\r\n\r\n        for (let key in queryParameters) {\r\n            if (queryParameters.hasOwnProperty(key)) {\r\n                let value = queryParameters[key];\r\n                if (value !== undefined && value !== null) {\r\n                    if (!result.endsWith(\"?\")) {\r\n                        result += \"&\";\r\n                    }\r\n                    result += `${key}=${value.toString()}`;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.endsWith(\"?\")) {\r\n            result = \"\";\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Build form data\r\n     *\r\n     * @param data\r\n     * @private\r\n     */\r\n    private static buildFormData(data: any): FormData | null {\r\n        if (data === null) {\r\n            return null;\r\n        }\r\n\r\n        const formData = new FormData();\r\n\r\n        for (let key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                let value = data[key];\r\n                if (value !== undefined && value !== null) {\r\n                    formData.append(key, value);\r\n                }\r\n            }\r\n        }\r\n\r\n        return formData;\r\n    }\r\n\r\n    /**\r\n     * Send request\r\n     *\r\n     * @param requestType\r\n     * @param endPoint\r\n     * @param optionalParams\r\n     * @param formDataRequest\r\n     */\r\n    public async request(requestType: Method,\r\n                         endPoint: string,\r\n                         optionalParams?: RequestOptionalParams | null,\r\n                         formDataRequest?: boolean\r\n    ): Promise<AxiosResponse> {\r\n        if (endPoint === null || endPoint.length === 0) {\r\n            throw new Error(\"Empty url\");\r\n        }\r\n\r\n        const url: string = this.buildUrl(\r\n            endPoint,\r\n            optionalParams !== undefined && optionalParams !== null && optionalParams.queryParameters !== null\r\n                ? optionalParams.queryParameters\r\n                : null\r\n        );\r\n\r\n        let currentUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n        try {\r\n            let idToken: string | null = null;\r\n\r\n            if (currentUser) {\r\n                idToken = await currentUser.getIdToken();\r\n            }\r\n\r\n            let bodyData: any;\r\n\r\n            if (formDataRequest !== undefined && formDataRequest) {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? Api.buildFormData(optionalParams.requestBody)\r\n                    : null;\r\n            }\r\n            else {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? optionalParams.requestBody\r\n                    : null;\r\n            }\r\n\r\n            const config: AxiosRequestConfig = {\r\n                method: requestType,\r\n                url: url,\r\n                data: bodyData,\r\n                timeout: 20000 // timeout in 20 seconds\r\n            };\r\n\r\n            if (idToken) {\r\n                config.headers = {\r\n                    \"Authorization\": idToken\r\n                }\r\n\r\n                if (formDataRequest !== undefined && formDataRequest) {\r\n                    config.headers = {\r\n                        ...config.headers,\r\n                        // @ts-ignore\r\n                        \"Content-Type\": `multipart/form-data; boundary=${bodyData._boundary}`\r\n                    }\r\n                }\r\n            }\r\n\r\n            let response: AxiosResponse = await axios.request(config);\r\n\r\n            return this.parseResponse(response);\r\n        } catch (exception) {\r\n            const error = Api.parseError(exception);\r\n            console.log(`Failed to request. Status code: ${error.statusCode}. Cause: ${error.message}`);\r\n            throw new Error(error.statusCode + \" \" + error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse response\r\n     *\r\n     * @param response\r\n     * @private\r\n     */\r\n    private parseResponse(response: AxiosResponse) {\r\n        if (response === null) {\r\n            throw new Error(\"Null response.\");\r\n        }\r\n\r\n        if (this.isRequestSuccessful(response)) {\r\n            return response;\r\n        }\r\n\r\n        throw new Error(\"Response error.\");\r\n    }\r\n\r\n    /**\r\n     * Parse error\r\n     *\r\n     * @param error\r\n     * @private\r\n     */\r\n    private static parseError(error: AxiosError) {\r\n        let httpError: HttpResponseError = {\r\n            statusCode: -1,\r\n            message: \"\"\r\n        };\r\n\r\n        // client received an error response (5xx, 4xx) form the server\r\n        if (error.response) {\r\n            if (error.response.data) {\r\n                httpError = {\r\n                    statusCode: error.response.data.code,\r\n                    message: error.response.data.detail ?? error.response.data.message\r\n                }\r\n            }\r\n        }\r\n        // client never received a response, or request never left\r\n        else if (error.request) {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Server is not responding.\"\r\n            }\r\n        }\r\n        // anything else\r\n        else {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Unexpected error.\"\r\n            }\r\n        }\r\n\r\n        return httpError;\r\n    }\r\n\r\n    /**\r\n     * Check if a request is successful by checking the response code\r\n     *\r\n     * @param response\r\n     */\r\n    public isRequestSuccessful(response: AxiosResponse): boolean {\r\n        return response != null && response.status >= 200 && response.status < 300;\r\n    }\r\n}","import User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport {\r\n    AuthenticationAction,\r\n    AuthenticationEvents,\r\n    CompleteAuthenticationAction,\r\n    UpdateUserChangesAction\r\n} from \"../actions/authenticationActions\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport InvestorSelfCertification from \"../../models/investor_self_certification\";\r\n\r\nexport enum AuthenticationStatus {\r\n    NotInitialized,\r\n    Authenticating,\r\n    Authenticated,\r\n    Unauthenticated\r\n}\r\n\r\nexport interface AuthenticationState {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    selfCertification?: InvestorSelfCertification; // only available for investor\r\n    error?: Error\r\n}\r\n\r\nconst initialState: AuthenticationState = {\r\n    status: AuthenticationStatus.NotInitialized,\r\n    currentUser: null,\r\n    groupsOfMembership: []\r\n}\r\n\r\nexport const authIsNotInitialized = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.NotInitialized;\r\n}\r\n\r\nexport const isAuthenticating = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticating;\r\n}\r\n\r\nexport const successfullyAuthenticated = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticated && state.currentUser && state.error === undefined;\r\n}\r\n\r\nexport const hasAuthenticationError = (state: AuthenticationState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst authenticationReducer = (state = initialState, action: AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.StartAuthenticating:\r\n            return {\r\n                ...initialState,\r\n                status: AuthenticationStatus.Authenticating\r\n            }\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            const completeAuthenticationAction: CompleteAuthenticationAction = (action as CompleteAuthenticationAction);\r\n            return {\r\n                ...state,\r\n                status: completeAuthenticationAction.status,\r\n                currentUser: completeAuthenticationAction.currentUser\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.currentUser)) : state.currentUser,\r\n                selfCertification: completeAuthenticationAction.selfCertification\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.selfCertification))\r\n                    : state.selfCertification,\r\n                groupsOfMembership: JSON.parse(JSON.stringify(completeAuthenticationAction.groupsOfMembership)),\r\n                error: completeAuthenticationAction.error\r\n            }\r\n        case AuthenticationEvents.SignOut:\r\n            return {\r\n                ...state,\r\n                status: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? AuthenticationStatus.Unauthenticated\r\n                    : state.status,\r\n                currentUser: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? null\r\n                    : state.currentUser,\r\n                groupsOfMembership: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? []\r\n                    : state.groupsOfMembership,\r\n                error: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? undefined\r\n                    : state.error\r\n            }\r\n        case AuthenticationEvents.UpdateUserChanges:\r\n            const updateUserChangesAction: UpdateUserChangesAction = action as UpdateUserChangesAction;\r\n            return {\r\n                ...state,\r\n                currentUser: updateUserChangesAction.updatedUser\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authenticationReducer;","/**\r\n * This file contains all of the utility functions relating to Firebase database.\r\n */\r\n\r\nimport firebase from \"./firebaseApp\";\r\n\r\nimport * as ROUTES from \"../router/routes\";\r\nimport * as DB_CONST from \"./databaseConsts\";\r\nimport * as utils from \"../utils/utils\";\r\nimport Api, {ApiRoutes} from \"../api/Api\";\r\n\r\n/**\r\n * This function is used to track activities of a user\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectLocation\r\n * @param interactedObjectID\r\n * @param activitySummary\r\n * @param action\r\n * @param value\r\n */\r\nexport const trackActivity = (\r\n    {\r\n        userID, // user id (note that this id is the official user id for group admins and super admins)\r\n        activityType,\r\n        interactedObjectLocation = null, // main node in database (when changing password, this is null)\r\n        interactedObjectID = null, // object's id (when changing password, this is null)\r\n        activitySummary, // brief summary of the activity\r\n        action = null,\r\n        value = null // optional --> track changes of a node if it does.\r\n        // Format:\r\n        //  + value: {before: node_before_changed, after: node_after_changed} --> if there are changes\r\n        //  + value: node_object --> if the node has just been created\r\n    }\r\n) => {\r\n    const id = firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .push()\r\n        .key;\r\n\r\n    firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .child(id)\r\n        .set({\r\n            id,\r\n            userID,\r\n            activityType,\r\n            interactedObjectLocation,\r\n            interactedObjectID,\r\n            activitySummary,\r\n            action,\r\n            value,\r\n            time: utils.getCurrentDate()\r\n        })\r\n        .then(() => {\r\n            // do nothing\r\n        })\r\n        .catch(error => {\r\n            // handle error\r\n        });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_ACTIVITIES_BY_USER = 'FETCH_ACTIVITIES_BY_USER';\r\nexport const FETCH_ACTIVITIES_BY_TYPE = 'FETCH_ACTIVITIES_BY_TYPE';\r\nexport const FETCH_ACTIVITIES_BY_INTERACTED_OBJECT = 'FETCH_ACTIVITIES_BY_INTERACTED_OBJECT';\r\n\r\n/**\r\n * Fetch activities\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectID\r\n * @param shouldLoadUserProfile\r\n * @param fetchBy\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchActivitiesBy = async (\r\n    {\r\n        userID = null,\r\n        activityType = null,\r\n        interactedObjectID = null,\r\n        // this should only be set to True when loading activities for a group\r\n        // as a group has multiple group admins and each of them can perform different activities\r\n        shouldLoadUserProfile = false,\r\n        fetchBy = null // fetch mode\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (!fetchBy) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activitiesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n\r\n        switch (fetchBy) {\r\n            case FETCH_ACTIVITIES_BY_USER: {\r\n                if (!userID) {\r\n                    return reject(\"Invalid call. userID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('userID')\r\n                    .equalTo(userID);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_TYPE: {\r\n                if (!activityType) {\r\n                    return reject(\"Invalid call. activityType is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('activityType')\r\n                    .equalTo(activityType);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_INTERACTED_OBJECT: {\r\n                if (!interactedObjectID) {\r\n                    return reject(\"Invalid call. interactedObjectID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('interactedObjectID')\r\n                    .equalTo(interactedObjectID);\r\n\r\n                break;\r\n            }\r\n            default:\r\n                return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activities = [];\r\n\r\n        activitiesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(activities);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    activities.push(snapshot.val());\r\n                });\r\n\r\n                if (shouldLoadUserProfile) {\r\n                    Promise.all(\r\n                        activities.map(activity => {\r\n                            return new Promise((resolve, reject) => {\r\n                                getUserBasedOnID(activity.userID)\r\n                                    .then(user => {\r\n                                        activity.userProfile = user;\r\n                                        return resolve(activities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        // handle error\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        return resolve(activities);\r\n                    }).catch(error => {\r\n                        // handle error\r\n                        return reject(error);\r\n                    });\r\n                } else {\r\n                    return resolve(activities);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_GROUP_INVITATION = \"Invited %group% to Invest West platform.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION = \"Invited %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION = \"Resent invitation email to %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH = \"Published %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH = \"Rejected %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE = \"Moved %project% to pledge phase.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH = \"Closed %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE = \"Published %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE = \"Rejected %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE = \"Created pledge for %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT = \"Edited %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT = \"Created %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM = \"Clicked to view %group%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_GROUP_DETAILS = \"Viewed %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_NEW_PLEDGE = \"Made new pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PLEDGE = \"Edited pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CANCELLED_PLEDGE = \"Cancelled pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_PROJECT_ITEM = \"Clicked to view %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS = \"Viewed %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT = \"Made a vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT = \"Edited vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT = \"Commented in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT = \"Edited comment in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMPLETED_SELF_CERTIFICATION = \"Completed self certification.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE = \"Uploaded business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE = \"Updated business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS = \"Updated personal details.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE = \"Updated business profile of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS = \"Updated personal details of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM = \"Created \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD = \"Created \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD = \"Replied to \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD = \"Changed password.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY = \"Made an enquiry to %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY = \"Closed %project% temporarily.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN = \"Opened %project% again.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN = \"Added %groupAdminEmail% as a group admin.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM = \"Deleted \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM = \"Edited \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD = \"Edited \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD = \"Deleted \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY = \"Edited reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY = \"Deleted reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT = \"Replied to a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT = \"Deleted a reply of a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT = \"Edited a reply of a comment in %projectName% offer.\";\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Send a notification\r\n *\r\n * @param title\r\n * @param message\r\n * @param userID\r\n * @param action\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const sendNotification = async ({title = \"\", message = \"\", userID = \"\", action = \"\"}) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const id = db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .push()\r\n            .key;\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(id)\r\n            .set({\r\n                id,\r\n                title,\r\n                message,\r\n                userID,\r\n                action,\r\n                date: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(\"Failed to send notification.\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Log enquiries from users\r\n *\r\n * @param enquiry\r\n */\r\nexport const logContactUsEnquiry = (\r\n    {\r\n        userID = null, // anonymous user --> userID = null, otherwise, not null\r\n        anid = null, // null = Invest West, not null = group\r\n        email,\r\n        name,\r\n        phone = null,\r\n        subject,\r\n        description\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        const dbRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CONTACT_US_ENQUIRIES_CHILD);\r\n\r\n        const enquiryID = dbRef.push().key;\r\n\r\n        dbRef\r\n            .child(enquiryID)\r\n            .set({\r\n                userID,\r\n                groupContacted: anid,\r\n                email,\r\n                name,\r\n                phone,\r\n                subject,\r\n                description,\r\n                id: enquiryID,\r\n                time: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve(enquiryID);\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all admins of a group based on groupID (anid)\r\n *\r\n * @param groupID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupAdminsBasedOnGroupID = async (groupID) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let groupAdmins = [];\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('anid')\r\n            .equalTo(groupID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupAdmins);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    groupAdmins.push(snapshot.val());\r\n                });\r\n\r\n                return resolve(groupAdmins);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to check if an email has already been used.\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const doesUserExist = async (email) => {\r\n    return new Promise((resolve, reject) => {\r\n        const firebaseDB = firebase.database();\r\n        // check admin first\r\n        firebaseDB\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n                if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                    let admin = null;\r\n                    snapshots.forEach(snapshot => {\r\n                        admin = snapshot.val();\r\n                    });\r\n\r\n                    // admin exists\r\n                    return resolve({\r\n                        userExists: true,\r\n                        userIsAnAdmin: true,\r\n                        admin: admin\r\n                    });\r\n                }\r\n\r\n                firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .orderByChild('email')\r\n                    .equalTo(email.toLowerCase())\r\n                    .once('value', snapshots => {\r\n                        if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                            let user = null;\r\n                            snapshots.forEach(snapshot => {\r\n                                user = snapshot.val();\r\n                            });\r\n\r\n                            // normal user exists\r\n                            return resolve({\r\n                                userExists: true,\r\n                                userIsAnAdmin: false,\r\n                                user: user\r\n                            });\r\n                        } else {\r\n                            // user does not exist\r\n                            return resolve({\r\n                                userExists: false\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all the groups that the user is in\r\n *\r\n * @param userID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupsUserIsIn = async (userID) => {\r\n\r\n    let groupsUserIsIn = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // search through the InvitedUsers node\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('officialUserID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupsUserIsIn);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    // search for invited user with the officialID matched\r\n                    if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                        groupsUserIsIn.push({\r\n                            invitedUser: invitedUser,\r\n                            anid: invitedUser.invitedBy,\r\n                            userInGroupStatus: invitedUser.status\r\n                        });\r\n                    }\r\n                });\r\n\r\n                Promise.all(groupsUserIsIn.map(groupUserIsIn => {\r\n                    return new Promise((resolve, reject) => {\r\n                        firebase\r\n                            .database()\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(groupUserIsIn.anid)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n                                return resolve(groupUserIsIn);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(groupsUserIsIn);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on anid\r\n *\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnANID = async (anid) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    return reject(\"Angel network not found\");\r\n                }\r\n\r\n                return resolve(snapshot.val());\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on groupUserName\r\n *\r\n * @param groupUserName\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnGroupUserName = async (groupUserName) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .orderByChild('groupUserName')\r\n            .equalTo(groupUserName)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No group found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    return resolve(snapshot.val());\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const SEARCH_ANGEL_NETWORKS_NONE = 0;\r\nexport const SEARCH_ANGEL_NETWORKS_BY_NAME = 1;\r\n/**\r\n * Load angel networks\r\n *\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworks = async ({name = null, email = null}, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (mode !== SEARCH_ANGEL_NETWORKS_NONE\r\n            && mode !== SEARCH_ANGEL_NETWORKS_BY_NAME\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        let angelNetworks = [];\r\n\r\n        let angelNetworksRef;\r\n\r\n        if (mode === SEARCH_ANGEL_NETWORKS_NONE) {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n        } else {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild('displayNameLower',)\r\n                .startAt(name.toLowerCase());\r\n        }\r\n\r\n        angelNetworksRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworks);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const angelNetwork = snapshot.val();\r\n                    if (mode === SEARCH_ANGEL_NETWORKS_BY_NAME) {\r\n                        if (angelNetwork.displayNameLower.includes(name.toLowerCase())) {\r\n                            angelNetworks.push(snapshot.val());\r\n                        }\r\n                    } else {\r\n                        angelNetworks.push(snapshot.val());\r\n                    }\r\n                });\r\n\r\n                return resolve(angelNetworks);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the angel networks that invited the user with the specified email\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworksInvitedAUser = async (email) => {\r\n\r\n    const db = firebase.database();\r\n    let angelNetworksInvitedUser = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n\r\n                // user has not been invited by any angel networks\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworksInvitedUser);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    angelNetworksInvitedUser.push({\r\n                        Invitor: invitedUser.invitedBy,\r\n                        Invitee: invitedUser\r\n                    });\r\n                });\r\n\r\n                Promise.all(angelNetworksInvitedUser.map(angelNetworkInvitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(angelNetworkInvitedUser.Invitor)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                angelNetworkInvitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(angelNetworksInvitedUser);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(angelNetworksInvitedUser);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to remove a join request\r\n *\r\n * @param requestID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const removeAJoinRequest = async (requestID) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(requestID)\r\n            .remove()\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user object from firebase realtime db.\r\n *\r\n * Parameter:\r\n *  - type: 0 - retrieve a normal user (issuer, investor), 1 - retrieve an admin\r\n *  - firebaseUser\r\n *\r\n * @param {*} type\r\n * @param {*} userID\r\n */\r\nexport const getUser = async (type, userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        // if type === 0, a normal user (issuer, investor) will be returned \r\n        if (type === 0) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n        // if type === 1, an admin will be returned\r\n        else if (type === 1) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user's profile based on the uid provided.\r\n *\r\n * @param {*} uid\r\n */\r\nexport const getUserBasedOnID = async (uid) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!uid) {\r\n            return reject(\"Null id provided\");\r\n        }\r\n\r\n        // get normal user\r\n        getUser(0, uid)\r\n            .then(user => {\r\n                return resolve(user);\r\n            })\r\n            .catch(error => {\r\n                // get admin\r\n                getUser(1, uid)\r\n                    .then(admin => {\r\n                        // admin is a group admin\r\n                        if (!admin.superAdmin) {\r\n                            loadAngelNetworkBasedOnANID(admin.anid)\r\n                                .then(groupDetails => {\r\n                                    admin.groupDetails = groupDetails;\r\n                                    return resolve(admin);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(\"Group not found\");\r\n                                });\r\n                        }\r\n                        // admin is a super admin\r\n                        else {\r\n                            return resolve(admin);\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Profile not found\");\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a forums\r\n *\r\n * Parameters:\r\n *      + forumObj with the following structure\r\n *\r\n * {\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor: userID\r\n * }\r\n * @param {*} forumObj\r\n */\r\nexport const createForum = async (forumObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const forumID = db.ref(DB_CONST.FORUMS_CHILD).push().key;\r\n        forumObj.id = forumID;\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumObj.id)\r\n            .set(forumObj)\r\n            .then(() => {\r\n                return resolve(forumID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_FORUMS = \"LOAD_LIVE_FORUMS\";\r\nexport const LOAD_DELETED_FORUMS = \"LOAD_DELETED_FORUMS\";\r\n/**\r\n * This function is used to load all forums.\r\n *\r\n * A forums object has the following structure:\r\n *\r\n * {\r\n *      id,\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor,\r\n * \r\n *      ...\r\n * }\r\n */\r\nexport const loadForums = async (mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        let forums = [];\r\n\r\n        if (mode !== LOAD_LIVE_FORUMS && mode !== LOAD_DELETED_FORUMS) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        const db = firebase.database();\r\n\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .once('value', snapshots => {\r\n\r\n                // no forums\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(forums);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let forum = snapshot.val();\r\n                    if (mode === LOAD_LIVE_FORUMS) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (forum.hasOwnProperty('deleted') && forum.deleted === false)) {\r\n                            forums.push(forum);\r\n                        }\r\n                    } else {\r\n                        if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                            forums.push(forum);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(forums.map(forum => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                return resolve(forums);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(forums);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a forum\r\n *\r\n * @param editedForum\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editForum = async (editedForum) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(editedForum.id)\r\n            .update(editedForum)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a forum by adding a property called 'deleted' with the value = true\r\n *\r\n * @param forumID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteForum = async (forumID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a thread within a forums\r\n *\r\n * @param {*} threadObj\r\n */\r\nexport const createThread = async (threadObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const threadID = db.ref(DB_CONST.FORUM_THREADS_CHILD).push().key;\r\n        threadObj.id = threadID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadObj.id)\r\n            .set(threadObj)\r\n            .then(() => {\r\n                return resolve(threadID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a thread\r\n *\r\n * @param editedThread\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThread = async (editedThread) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(editedThread.id)\r\n            .update(editedThread)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread by adding a property called 'deleted' with the value = true\r\n *\r\n * @param threadID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThread = async (threadID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_THREADS = \"LOAD_LIVE_THREADS\";\r\nexport const LOAD_DELETED_THREADS = \"LOAD_DELETED_THREADS\";\r\n/**\r\n * This function is used to load the details of the author for each thread.\r\n * The reason for creating this function is that the author of each thread is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param mode\r\n * @param {*} forumSelected\r\n */\r\nexport const loadThreads = async (mode, forumSelected) => {\r\n    const db = firebase.database();\r\n    let threads = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .orderByChild(\"forumID\")\r\n            .equalTo(forumSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(threads);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    if (mode === LOAD_LIVE_THREADS) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (thread.hasOwnProperty('deleted') && thread.deleted === false)) {\r\n                            threads.push(thread);\r\n                        }\r\n                    } else {\r\n                        if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                            threads.push(thread);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(threads.map(thread => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                return resolve(threads);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(threads);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a reply to a thread.\r\n *\r\n * @param {*} replyObj\r\n */\r\nexport const createThreadReply = async (replyObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const replyID = db.ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD).push().key;\r\n        replyObj.id = replyID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(replyObj.id)\r\n            .set(replyObj)\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit an existing thread reply\r\n *\r\n * @param editedThreadReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThreadReply = async (editedThreadReply) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(editedThreadReply.id)\r\n            .update(editedThreadReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread reply\r\n *\r\n * @param threadReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThreadReply = async (threadReplyID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(threadReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the details of the author for each thread reply.\r\n * The reason for creating this function is that the author of each thread reply is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param {*} threadSelected\r\n */\r\nexport const loadThreadReplies = async (threadSelected) => {\r\n    const db = firebase.database();\r\n    let replies = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .orderByChild(\"threadID\")\r\n            .equalTo(threadSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(replies);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let replyObj = snapshot.val();\r\n                    replies.push(replyObj);\r\n                });\r\n\r\n                Promise.all(replies.map(reply => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(reply.author.id)\r\n                            .then(user => {\r\n                                reply.author = user;\r\n                                return resolve(replies);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(replies);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will load club attributes\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadClubAttributes = async () => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .once('value', snapshot => {\r\n                const clubAttributes = snapshot.val();\r\n                return resolve(clubAttributes);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to load invited users of an angel network or ALL for super admin\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadInvitedUsers = async (anid) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        let invitedUsers = [];\r\n\r\n        let dbRef;\r\n\r\n        // load invited users of an angel network\r\n        if (anid) {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('invitedBy')\r\n                .equalTo(anid);\r\n        }\r\n        // load ALL invited users\r\n        else {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n        }\r\n\r\n        dbRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(invitedUsers);\r\n                }\r\n                snapshots.forEach(snapshot => {\r\n                    let user = snapshot.val();\r\n                    invitedUsers.push(user);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n                            .then(angelNetwork => {\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n\r\n                                if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                                    getUserBasedOnID(invitedUser.officialUserID)\r\n                                        .then(officialUser => {\r\n                                            invitedUser.officialUser = officialUser;\r\n                                            return resolve(invitedUsers);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(invitedUsers);\r\n                                }\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject({error: \"No users\"});\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load requests to join (users request to join angel networks)\r\n *\r\n * @param userID\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadRequestsToJoin = async ({userID = null, anid = null}) => {\r\n    return new Promise((resolve, reject) => {\r\n        let requestsRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD);\r\n\r\n        if (userID && anid) {\r\n            return reject(\"userID and anid cannot be defined at the same time\");\r\n        }\r\n\r\n        if (userID) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('userID')\r\n                .equalTo(userID);\r\n        }\r\n\r\n        if (anid) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(anid);\r\n        }\r\n\r\n        if (!requestsRef) {\r\n            return reject(\"Error happened\");\r\n        }\r\n\r\n        let requests = [];\r\n\r\n        requestsRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(requests);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    requests.push(snapshot.val());\r\n                });\r\n\r\n                Promise.all(requests.map(request => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(request.userID)\r\n                            .then(userProfile => {\r\n\r\n                                request.userProfile = userProfile;\r\n\r\n                                loadAngelNetworkBasedOnANID(request.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n\r\n                                        request.group = angelNetwork;\r\n\r\n                                        return resolve(requests);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(requests);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load an invited user based on the official user IF\r\n *\r\n * @param idOrEmail\r\n * @param mode\r\n * @returns {Promise<*>}\r\n */\r\nexport const GET_INVITED_USER_BASED_ON_INVITED_ID = 1;\r\nexport const GET_INVITED_USER_BASED_ON_OFFICIAL_ID = 2;\r\nexport const GET_INVITED_USER_BASED_ON_EMAIL = 3;\r\nexport const getInvitedUserBasedOnIDOrEmail = async (idOrEmail, mode) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let invitedUsers = [];\r\n\r\n        if (mode !== GET_INVITED_USER_BASED_ON_INVITED_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_EMAIL\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild(\r\n                mode === GET_INVITED_USER_BASED_ON_INVITED_ID\r\n                    ?\r\n                    'id'\r\n                    :\r\n                    mode === GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n                        ?\r\n                        'officialUserID'\r\n                        :\r\n                        'email'\r\n            )\r\n            .equalTo(idOrEmail)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No invited users found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    invitedUsers.push(invitedUser);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(invitedUser.invitedBy)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(invitedUsers);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_PROJECTS_ORDER_BY_NONE = 0;\r\nexport const FETCH_PROJECTS_ORDER_BY_VISIBILITY = 1;\r\nexport const FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK = 2;\r\nexport const FETCH_PROJECTS_ORDER_BY_ISSUER = 3;\r\nexport const FETCH_PROJECTS_ORDER_BY_STATUS = 4;\r\n\r\nexport const FETCH_PROJECTS_IN_ANY_PHASE = 111;\r\nexport const FETCH_LIVE_PROJECTS = 222;\r\nexport const FETCH_SUCCESSFUL_PROJECTS = 333;\r\nexport const FETCH_FAILED_PROJECTS = 444;\r\n\r\n/**\r\n * This function is used to fetch projects with filter parameters and limit parameter\r\n *\r\n * @param visibility\r\n * @param angelNetwork\r\n * @param issuer\r\n * @param projectsWithStatus\r\n * @param orderBy\r\n * @param limit\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchProjectsBy = async (\r\n    {\r\n        visibility = null, // fetch projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n        angelNetwork = null, // fetch projects by angel network\r\n        issuer = null, // fetch projects by issuer\r\n        sector = null, // fetch projects by sector\r\n        projectsWithStatus = FETCH_LIVE_PROJECTS, // fetch projects by status\r\n        fetchOrderBy = null // mode to use orderByChild\r\n    },\r\n    limit = 100000 // number of instances to be loaded\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        let projects = [];\r\n\r\n        const db = firebase.database();\r\n        let projectsRef = db.ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n        switch (fetchOrderBy) {\r\n            case FETCH_PROJECTS_ORDER_BY_NONE:\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_VISIBILITY:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('visibility')\r\n                    .equalTo(visibility);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('anid')\r\n                    .equalTo(angelNetwork);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ISSUER:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('issuerID')\r\n                    .equalTo(issuer);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_STATUS:\r\n                if (projectsWithStatus === FETCH_LIVE_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .startAt(DB_CONST.PROJECT_STATUS_PITCH_PHASE)\r\n                        .endAt(DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE);\r\n                } else if (projectsWithStatus === FETCH_SUCCESSFUL_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .equalTo(DB_CONST.PROJECT_STATUS_SUCCESSFUL);\r\n                }\r\n                break;\r\n            default:\r\n                return reject(\"Incorrect mode to fetch projects\");\r\n        }\r\n\r\n        projectsRef\r\n            .limitToLast(limit)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(projects);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let project = snapshot.val();\r\n\r\n                    if (projectsWithStatus) {\r\n                        switch (projectsWithStatus) {\r\n                            case FETCH_PROJECTS_IN_ANY_PHASE:\r\n                                projects.push(project);\r\n                                break;\r\n                            case FETCH_LIVE_PROJECTS:\r\n                                if (utils.isProjectLive(project) && !utils.isProjectTemporarilyClosed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_SUCCESSFUL_PROJECTS:\r\n                                if (utils.isProjectSuccessful(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_FAILED_PROJECTS:\r\n                                if (utils.isProjectFailed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            default:\r\n                                if (project.status === projectsWithStatus) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                        }\r\n                    } else {\r\n                        projects.push(project);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    projects.map(project => {\r\n                        return new Promise((resolve, reject) => {\r\n                            loadAngelNetworkBasedOnANID(project.anid)\r\n                                .then(group => {\r\n                                    project.group = group;\r\n                                    getUserBasedOnID(project.issuerID)\r\n                                        .then(user => {\r\n                                            project.issuer = user;\r\n                                            // only load pledges when a project is in pledge phase\r\n                                            // or it has gone through pledge phase and closed\r\n                                            if (utils.isProjectInLivePledgePhase(project)\r\n                                                || utils.isProjectSuccessful(project)\r\n                                                || utils.isProjectFailed(project)\r\n                                            ) {\r\n                                                // load pledges\r\n                                                loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                    .then(pledges => {\r\n                                                        project.pledges = pledges;\r\n                                                        return resolve(projects);\r\n                                                    })\r\n                                                    .catch(error => {\r\n                                                        // error in loading pledges\r\n                                                        return reject(error);\r\n                                                    });\r\n                                            } else {\r\n                                                return resolve(projects);\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            return reject(error);\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                )\r\n                    .then(() => {\r\n                        return resolve(projects);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load a particular project from its id\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadAParticularProject = async (projectID) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists() || !snapshot.val()) {\r\n                    return reject(\"No project found.\");\r\n                }\r\n\r\n                let project = snapshot.val();\r\n\r\n                loadAngelNetworkBasedOnANID(project.anid)\r\n                    .then(group => {\r\n                        project.group = group;\r\n\r\n                        getUserBasedOnID(project.issuerID)\r\n                            .then(issuer => {\r\n                                project.issuer = issuer;\r\n\r\n                                // projects in pitch phase cannot have any pledges\r\n                                if (project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                                    // load pledges\r\n                                    loadPledges(projectID, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                        .then(pledges => {\r\n                                            project.pledges = pledges;\r\n                                            return resolve(project);\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // error in loading pledges\r\n                                            return reject(error);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(project);\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(\"Couldn't load project issuer\");\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Couldn't load group\");\r\n                    });\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Close a live project temporarily or open a temporarily closed project again\r\n *\r\n * @param admin\r\n * @param project\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleProjectLivelinessTemporarily = async (admin, project) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let shouldSendNotificationForIssuer = false;\r\n        if (project.issuer.type === DB_CONST.TYPE_ISSUER) {\r\n            shouldSendNotificationForIssuer = true;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n\r\n        project.temporarilyClosed = !project.hasOwnProperty('temporarilyClosed')\r\n            ?\r\n            true\r\n            :\r\n            !project.temporarilyClosed;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    project.temporarilyClosed === true\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN;\r\n\r\n                // track admin activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeUpdating,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send notification to the issuer\r\n                if (shouldSendNotificationForIssuer) {\r\n                    sendNotification({\r\n                        title:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                `${project.projectName} has been closed temporarily`\r\n                                :\r\n                                `${project.projectName} has been opened again`\r\n                        ,\r\n                        message:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                \"This investment opportunity has been closed temporarily by your group admin. We will notify you when it is opened again.\"\r\n                                :\r\n                                \"This investment opportunity has been opened again. The investors can now interact with it.\"\r\n                        ,\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                        .then(() => {\r\n                            // do nothing\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                }\r\n\r\n                // Send notifications to investors who voted or pledged\r\n                // load votes\r\n                loadVotes(project.id, null, LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        let listOfInvestorsToBeNotified = [];\r\n                        votes.forEach(vote => {\r\n                            listOfInvestorsToBeNotified.push(vote.investorID);\r\n                        });\r\n\r\n                        // load pledges\r\n                        loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n                                pledges.forEach(pledge => {\r\n                                    if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                        listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                    }\r\n                                });\r\n\r\n                                let notifications = [];\r\n                                listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                    const notification = {\r\n                                        title:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                `${project.projectName} has been closed temporarily`\r\n                                                :\r\n                                                `${project.projectName} has been opened again`\r\n                                        ,\r\n                                        message:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                \"This investment opportunity has been closed temporarily by the group admin. We will notify you when it is opened again.\"\r\n                                                :\r\n                                                \"This investment opportunity has been opened again. You can now interact with it as usual.\"\r\n                                        ,\r\n                                        userID: investorID,\r\n                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                                    };\r\n                                    notifications.push(notification);\r\n                                });\r\n\r\n                                // push all the notifications to firebase\r\n                                Promise.all(notifications.map(notification => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        sendNotification(notification)\r\n                                            .then(() => {\r\n                                                return resolve();\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })).then(() => {\r\n                                    // do nothing\r\n                                }).catch(error => {\r\n                                    // handle error\r\n                                });\r\n                            });\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoLiveDecision = async (admin, project, decisionObj) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n        projectBeforeDecision.issuer = null;\r\n        projectBeforeDecision.pledges = null;\r\n        projectBeforeDecision.group = null;\r\n\r\n        // project goes live\r\n        if (decisionObj.decision) {\r\n            project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n            project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        }\r\n        // project cannot go live\r\n        else {\r\n            project.status = DB_CONST.PROJECT_STATUS_REJECTED;\r\n            project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            let activitySummary =\r\n                decisionObj.decision\r\n                    ?\r\n                    ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH\r\n                    :\r\n                    ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH;\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        emailType: 2,\r\n                        emailInfo: {\r\n                            projectID: project.id\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n\r\n            // track admin activity\r\n            trackActivity({\r\n                userID: admin.id,\r\n                activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                interactedObjectID: project.id,\r\n                activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                value: {\r\n                    before: projectBeforeDecision,\r\n                    after: project\r\n                }\r\n            });\r\n\r\n            // send a notification to notify the issuer\r\n            await\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your offer has been published.`\r\n                            :\r\n                            `Unfortunately your offer has been rejected. Contact your group's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                });\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go to the Pledge phase\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decision\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoToPledgePhaseDecision = async (admin, project, decision) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project can go to the Pledge phase --> the issuer can create their Pledge\r\n    if (decision) {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER;\r\n    }\r\n    // project cannot go to Pledge phase --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has moved to the pledge phase. You can now create your pledge page. Your pledge page will be checked by the group admin before publication.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your group's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project's Pledge can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectPledgeGoLiveDecision = async (admin, project, decisionObj) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project's Pledge can go live --> the investors can start pledging it\r\n    if (decisionObj.decision) {\r\n        project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n        project.status = DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n    }\r\n    // project's pledge cannot go to live --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.PrimaryOffer.status = DB_CONST.PRIMARY_OFFER_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decisionObj.decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has been published. Investors can now pledge.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your group's admin for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all comments of a project\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadComments = async (projectID) => {\r\n    const db = firebase.database();\r\n\r\n    let comments = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(comments);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let comment = snapshot.val();\r\n                    comments.push(comment);\r\n                });\r\n\r\n                Promise.all(\r\n                    comments.map(comment => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(comment.commentedBy)\r\n                                .then(user => {\r\n                                    comment.author = user;\r\n                                    return resolve(comments);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(comments);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load pledges of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_PLEDGES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_PLEDGES_ORDER_BY_INVESTOR = 2;\r\nexport const loadPledges = async (projectID = null, investorID = null, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        let pledgesRef = db.ref(DB_CONST.PLEDGES_CHILD);\r\n        if (projectID && mode === LOAD_PLEDGES_ORDER_BY_PROJECT) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"projectID\")\r\n                .equalTo(projectID);\r\n        } else if (investorID && mode === LOAD_PLEDGES_ORDER_BY_INVESTOR) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"investorID\")\r\n                .equalTo(investorID);\r\n        } else {\r\n            return reject(\"Invalid mode\");\r\n        }\r\n\r\n        let pledges = [];\r\n\r\n        pledgesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(pledges);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let pledge = snapshot.val();\r\n                    if (pledge.amount !== \"\") {\r\n                        pledges.push(pledge);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    pledges.map(pledge => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n                                    return resolve(pledges);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(pledges);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load votes of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_VOTES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_VOTES_ORDER_BY_INVESTOR = 2;\r\nexport const loadVotes = async (projectID = null, investorID = null, mode) => {\r\n    const db = firebase.database();\r\n    let votesRef = db.ref(DB_CONST.VOTES_CHILD);\r\n    if (projectID && mode === LOAD_VOTES_ORDER_BY_PROJECT) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID);\r\n    } else if (investorID && mode === LOAD_VOTES_ORDER_BY_INVESTOR) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"investorID\")\r\n            .equalTo(investorID);\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n    let votes = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        votesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(votes);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let vote = snapshot.val();\r\n                    if (vote.voted !== \"\") {\r\n                        votes.push(vote);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    votes.map(vote => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(vote.investorID)\r\n                                .then(investor => {\r\n                                    vote.investor = investor;\r\n                                    return resolve(votes);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(votes);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    let notifications = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .orderByChild(\"userID\")\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(notifications);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let notification = snapshot.val();\r\n                    notifications.push(notification);\r\n                });\r\n\r\n                return resolve(notifications);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const deleteAllNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // load all notifications of the specified user\r\n        loadNotifications(userID)\r\n            .then(notifications => {\r\n                // delete them all\r\n                Promise.all(notifications.map(notification => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                            .child(notification.id)\r\n                            .remove()\r\n                            .then(() => {\r\n                                return resolve();\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                })).then(() => {\r\n                    return resolve();\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Post a comment reply\r\n *\r\n * @param commentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const postCommentReply = commentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        const replyID = db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(replyID)\r\n            .set({\r\n                ...commentReply,\r\n                id: replyID\r\n            })\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load replies of comments\r\n *\r\n * @param comments\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadCommentsReplies = comments => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        let updatedComments = [...comments];\r\n\r\n        Promise.all(\r\n            updatedComments.map(comment => {\r\n                return new Promise((resolve, reject) => {\r\n                    let replies = [];\r\n\r\n                    db\r\n                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                        .orderByChild('commentID')\r\n                        .equalTo(comment.id)\r\n                        .once('value', snapshots => {\r\n                            if (!snapshots\r\n                                || !snapshots.exists()\r\n                                || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                            ) {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }\r\n\r\n                            snapshots.forEach(snapshot => {\r\n                                const reply = snapshot.val();\r\n                                if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                    // do nothing\r\n                                } else {\r\n                                    replies.push(snapshot.val());\r\n                                }\r\n                            });\r\n\r\n                            Promise.all(\r\n                                replies.map(reply => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        getUserBasedOnID(reply.repliedBy)\r\n                                            .then(user => {\r\n                                                reply.author = user;\r\n                                                return resolve(replies);\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })\r\n                            ).then(() => {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }).catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            })\r\n        ).then(() => {\r\n            return resolve(updatedComments);\r\n        }).catch(error => {\r\n            return reject(error);\r\n        });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Delete a reply of a comment\r\n *\r\n * @param commentReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteCommentReply = commentReplyID => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(commentReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a comment reply\r\n *\r\n * @param updatedCommentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateCommentReply = updatedCommentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(updatedCommentReply.id)\r\n            .update(updatedCommentReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load marketing preferences\r\n *\r\n * @param userID: null --> load all, not null --> load for a particular user\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadMarketingPreferences = (userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const marketingPreferencesRef =\r\n            userID\r\n                ?\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                    .orderByChild(\"userID\")\r\n                    .equalTo(userID)\r\n                :\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD);\r\n\r\n        let marketingPreferences = [];\r\n\r\n        marketingPreferencesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(marketingPreferences);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let marketingPreference = snapshot.val();\r\n                    marketingPreferences.push(marketingPreference);\r\n                });\r\n\r\n                Promise.all(\r\n                    marketingPreferences.map(marketingPreference => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(marketingPreference.userID)\r\n                                .then(user => {\r\n                                    marketingPreference.user = user;\r\n                                    return resolve(marketingPreferences);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(marketingPreferences);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Turn on/off marketing preferences\r\n *\r\n * @param userID\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleMarketingPreferences = async (\r\n    {\r\n        userID,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!userID || !value) {\r\n            return reject(\"Missing arguments\");\r\n        }\r\n\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: value,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    marketingPreferences[0].accepted = value;\r\n                    marketingPreferences[0].date = utils.getCurrentDate();\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .set(marketingPreferences[0])\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a sub settings inside marketing preferences\r\n *\r\n * @param userID\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateMarketingPreferencesSetting = async (\r\n    {\r\n        userID,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: true,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID,\r\n                        settings: {\r\n                            field: value\r\n                        }\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .child('settings')\r\n                        .child(field)\r\n                        .set(value)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update group properties setting\r\n *\r\n * @param anid\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateGroupPropertiesSetting = async (\r\n    {\r\n        anid,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(value)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Bring an expired pitch back to live by setting a new expiry date\r\n *\r\n * @param project\r\n * @param newPitchExpiryDate\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const bringPitchBackToLive = async ({project, newPitchExpiryDate}) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n        project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        project.Pitch.expiredDate = newPitchExpiryDate;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */","import {\r\n    PASSWORD_CHANGE_FAIL,\r\n    PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED,\r\n    PASSWORD_CHANGE_NOT_STRONG_ENOUGH, PASSWORD_CHANGE_RE_AUTH_FAILED,\r\n    PASSWORD_CHANGE_SUCCESS\r\n} from '../../shared-components/change-password/ChangePasswordPage';\r\nimport * as utils from '../../utils/utils';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const CHANGE_PASSWORD_TEXT_CHANGED = 'CHANGE_PASSWORD_TEXT_CHANGED';\r\nexport const handleTextChanged = event => {\r\n    return {\r\n        type: CHANGE_PASSWORD_TEXT_CHANGED,\r\n        name: event.target.name,\r\n        value: event.target.value\r\n    }\r\n};\r\n\r\nexport const RESET_CHANGE_PASSWORD = 'RESET_CHANGE_PASSWORD';\r\nexport const reset = () => {\r\n    return {\r\n        type: RESET_CHANGE_PASSWORD\r\n    }\r\n};\r\n\r\nexport const RE_AUTHENTICATING_USER = 'RE_AUTHENTICATING_USER';\r\nexport const ERROR_CHANGING_PASSWORD = 'ERROR_CHANGING_PASSWORD';\r\nexport const requestChangePassword = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        dispatch({\r\n            type: RE_AUTHENTICATING_USER\r\n        });\r\n\r\n        const passwords = {\r\n            currentPassword: getState().changePassword.currentPassword,\r\n            newPassword: getState().changePassword.newPassword,\r\n            newPasswordVerified: getState().changePassword.newPasswordVerified\r\n        };\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        changePassword(currentUser.email, passwords)\r\n            .then(responseCode => {\r\n                dispatch({\r\n                    type: RESET_CHANGE_PASSWORD,\r\n                    responseCode\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: firebase.auth().currentUser.uid,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD\r\n                    });\r\n            })\r\n            .catch(errorCode => {\r\n                dispatch({\r\n                    type: ERROR_CHANGING_PASSWORD,\r\n                    errorCode\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nconst changePassword = async (email, passwords) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (passwords.newPassword !== passwords.newPasswordVerified) {\r\n            return reject(PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED);\r\n        }\r\n\r\n        const passwordStrength = utils.checkPasswordStrength(passwords.newPassword);\r\n        if (passwordStrength === utils.PASSWORD_VERY_WEAK) {\r\n            return reject(PASSWORD_CHANGE_NOT_STRONG_ENOUGH);\r\n        }\r\n\r\n        firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, passwords.currentPassword)\r\n            .then(credential => {\r\n                firebase\r\n                    .auth()\r\n                    .currentUser\r\n                    .updatePassword(passwords.newPassword)\r\n                    .then(() => {\r\n                        return resolve(PASSWORD_CHANGE_SUCCESS);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(PASSWORD_CHANGE_FAIL)\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(PASSWORD_CHANGE_RE_AUTH_FAILED);\r\n            });\r\n    });\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Typography,\r\n    IconButton\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as changePasswordActions from '../../redux-store/actions/changePasswordActions';\r\n\r\nexport const PASSWORD_CHANGE_NONE = 0;\r\nexport const PASSWORD_CHANGE_RE_AUTH = 1;\r\nexport const PASSWORD_CHANGE_SUCCESS = 2;\r\nexport const PASSWORD_CHANGE_FAIL = 3;\r\nexport const PASSWORD_CHANGE_RE_AUTH_FAILED = 4;\r\nexport const PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED = 5;\r\nexport const PASSWORD_CHANGE_NOT_STRONG_ENOUGH = 6;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentPassword: state.changePassword.currentPassword,\r\n        newPassword: state.changePassword.newPassword,\r\n        newPasswordVerified: state.changePassword.newPasswordVerified,\r\n        passwordChangeResponseCode: state.changePassword.passwordChangeResponseCode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleTextChanged: (event) => dispatch(changePasswordActions.handleTextChanged(event)),\r\n        reset: () => dispatch(changePasswordActions.reset()),\r\n        requestChangePassword: () => dispatch(changePasswordActions.requestChangePassword())\r\n    }\r\n};\r\n\r\nclass ChangePasswordPage extends Component {\r\n\r\n    render() {\r\n        const {\r\n            currentPassword,\r\n            newPassword,\r\n            newPasswordVerified,\r\n            passwordChangeResponseCode,\r\n\r\n            handleTextChanged,\r\n            reset,\r\n            requestChangePassword\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters >\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        <FlexView column >\r\n                            <Typography align=\"left\" variant=\"h6\" color=\"primary\">Update your password</Typography>\r\n                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 10, marginBottom: 18 }}>Update your password regularly to protect your account better. Password must contain at least 8 characters.</Typography>\r\n                            <TextField\r\n                                label=\"Current password\"\r\n                                name=\"currentPassword\"\r\n                                value={currentPassword}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                label=\"New password\"\r\n                                name=\"newPassword\"\r\n                                value={newPassword}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                error={\r\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\r\n                                }\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                label=\"Verify password\"\r\n                                name=\"newPasswordVerified\"\r\n                                value={newPasswordVerified}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                error={\r\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\r\n                                }\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <Row noGutters >\r\n                                <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 20 }} >\r\n                                    <PasswordUpdate\r\n                                        responseCode={passwordChangeResponseCode}\r\n                                        onCloseMessage={reset}\r\n                                    />\r\n                                </Col>\r\n                                <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 20 }} >\r\n                                    <FlexView hAlignContent=\"right\" width=\"100%\" >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={reset}>Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                onClick={requestChangePassword}\r\n                                                disabled={\r\n                                                    currentPassword.length === 0 ||\r\n                                                    newPassword.length === 0 ||\r\n                                                    newPasswordVerified.length === 0\r\n                                                }>\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nclass PasswordUpdate extends Component {\r\n\r\n    onCloseMessage = () => {\r\n        this.props.onCloseMessage();\r\n    };\r\n\r\n    renderMessage = () => {\r\n        switch (this.props.responseCode) {\r\n            case PASSWORD_CHANGE_RE_AUTH: {\r\n                return {message: \"Re-authenticating ...\", color: colors.dark_green};\r\n            }\r\n            case PASSWORD_CHANGE_FAIL: {\r\n                return {message: \"Failed to change password\", color: colors.red_700};\r\n            }\r\n            case PASSWORD_CHANGE_SUCCESS: {\r\n                return {\r\n                    message: \"Password changed successfully\",\r\n                    color: colors.dark_green\r\n                };\r\n            }\r\n            case PASSWORD_CHANGE_RE_AUTH_FAILED: {\r\n                return {message: \"Failed to re-authenticate\", color: colors.red_700};\r\n            }\r\n            case PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED: {\r\n                return {\r\n                    message: \"New passwords not match with each other\",\r\n                    color: colors.red_700\r\n                };\r\n            }\r\n            case PASSWORD_CHANGE_NOT_STRONG_ENOUGH: {\r\n                return {\r\n                    message:\r\n                        \"Password must have at least 8 characters\",\r\n                    color: colors.red_700\r\n                };\r\n            }\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            responseCode\r\n        } = this.props;\r\n        return (\r\n            responseCode === PASSWORD_CHANGE_NONE\r\n                ?\r\n                null\r\n                :\r\n                <FlexView grow={1} style={{ backgroundColor: this.renderMessage().color }} vAlignContent=\"center\" >\r\n\r\n                    <FlexView className={css(styles.changing_password_text_background)} >\r\n                        <Typography align=\"left\" variant=\"subtitle1\" color=\"inherit\" >{this.renderMessage().message}</Typography>\r\n                    </FlexView>\r\n\r\n                    <FlexView\r\n                        grow\r\n                        vAlignContent=\"center\"\r\n                        hAlignContent=\"right\"\r\n                        style={{ padding: 4 }}\r\n                    >\r\n                        <IconButton onClick={this.onCloseMessage} >\r\n                            <CloseIcon fontSize=\"small\" style={{ color: colors.white }} />\r\n                        </IconButton>\r\n                    </FlexView>\r\n                </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePasswordPage);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    changing_password_text_background: {\r\n        color: colors.white,\r\n        marginLeft: 15,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const SET_GROUP_USER_NAME_FROM_PARAMS = 'SET_GROUP_USER_NAME_FROM_PARAMS';\r\nexport const setGroupUserNameFromParams = groupUserName => {\r\n    return (dispatch, getState) => {\r\n        const prevGroupUserName = getState().manageGroupFromParams.groupUserName;\r\n\r\n        // if the newly set groupUserName is different from the current groupUserName, check again\r\n        if (prevGroupUserName !== groupUserName) {\r\n            dispatch({\r\n                type: SET_GROUP_USER_NAME_FROM_PARAMS,\r\n                groupUserName\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING = 'SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING';\r\nexport const setExpectedAndCurrentPathsForChecking = (expectedPath, currentPath) => {\r\n    return {\r\n        type: SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING,\r\n        expectedPath,\r\n        currentPath\r\n    }\r\n};\r\n\r\nexport const LOADING_ANGEL_NETWORK = 'LOADING_ANGEL_NETWORK';\r\nexport const ANGEL_NETWORK_LOADED = 'ANGEL_NETWORK_LOADED';\r\nexport const loadAngelNetwork = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            angelNetworkBeingLoaded,\r\n\r\n            expectedPath,\r\n            currentPath\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const firebaseUser = firebase.auth().currentUser;\r\n\r\n        // angel network has not been loaded before\r\n        if (!groupProperties && !groupPropertiesLoaded && !angelNetworkBeingLoaded) {\r\n\r\n            dispatch({\r\n                type: LOADING_ANGEL_NETWORK\r\n            });\r\n\r\n            // path expected and current path not matched\r\n            if (expectedPath !== currentPath) {\r\n                dispatch({\r\n                    type: ANGEL_NETWORK_LOADED,\r\n                    angelNetwork: null,\r\n                    shouldLoadOtherData: false\r\n                });\r\n                return;\r\n            }\r\n\r\n            // groupUserName is not specified --> Invest West super\r\n            if (!groupUserName) {\r\n                // the user is logged in\r\n                if (firebaseUser) {\r\n                    realtimeDBUtils\r\n                        .getUserBasedOnID(firebaseUser.uid)\r\n                        .then(user => {\r\n                            if (user.type === DB_CONST.TYPE_ADMIN) {\r\n                                if (user.superAdmin) {\r\n                                    dispatch({\r\n                                        type: ANGEL_NETWORK_LOADED,\r\n                                        angelNetwork: null,\r\n                                        shouldLoadOtherData: true\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    dispatch({\r\n                                        type: ANGEL_NETWORK_LOADED,\r\n                                        angelNetwork: null,\r\n                                        shouldLoadOtherData: false\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                dispatch({\r\n                                    type: ANGEL_NETWORK_LOADED,\r\n                                    angelNetwork: null,\r\n                                    shouldLoadOtherData: false\r\n                                });\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: ANGEL_NETWORK_LOADED,\r\n                                angelNetwork: null,\r\n                                shouldLoadOtherData: false\r\n                            });\r\n                        });\r\n                }\r\n                // the user is not logged in\r\n                else {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: null,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                    return;\r\n                }\r\n                return;\r\n            }\r\n\r\n            // angel network has been loaded before\r\n            if (groupProperties) {\r\n                // if anid = null (Invest West) or anid = angel network's anid\r\n                // do not need to load the angel network again\r\n                if (groupUserName === groupProperties.groupUserName) {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: groupProperties,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                    return;\r\n                }\r\n                // if the loaded angel network's anid is not the same as the anid specified in the URL --> load again\r\n                else {\r\n                    dispatch({\r\n                        type: SET_GROUP_USER_NAME_FROM_PARAMS,\r\n                        groupUserName\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: LOADING_ANGEL_NETWORK\r\n                    });\r\n                }\r\n            }\r\n\r\n            realtimeDBUtils\r\n                .loadAngelNetworkBasedOnGroupUserName(groupUserName)\r\n                .then(angelNetwork => {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: null,\r\n                        shouldLoadOtherData: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet angelNetworkListener = null;\r\n\r\nexport const ANGEL_NETWORK_PROPERTIES_CHANGED = 'ANGEL_NETWORK_PROPERTIES_CHANGED';\r\nexport const startListeningForAngelNetworkChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!angelNetworkListener) {\r\n            const {\r\n                groupProperties\r\n            } = getState().manageGroupFromParams;\r\n\r\n            if (groupProperties) {\r\n                if (angelNetworkListener) {\r\n                    return;\r\n                }\r\n                angelNetworkListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                    .child(groupProperties.anid)\r\n                    .on('child_changed', snapshot => {\r\n                        const key = snapshot.key;\r\n                        const value = snapshot.val();\r\n                        dispatch({\r\n                            type: ANGEL_NETWORK_PROPERTIES_CHANGED,\r\n                            key,\r\n                            value\r\n                        });\r\n                    });\r\n            }\r\n            else {\r\n                if (angelNetworkListener) {\r\n                    angelNetworkListener.off('child_changed');\r\n                    angelNetworkListener = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForAngelNetworkChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (angelNetworkListener) {\r\n            angelNetworkListener.off('child_changed');\r\n            angelNetworkListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview/lib/index';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {Typography} from '@material-ui/core';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {\r\n    Container,\r\n    Col,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName))\r\n    }\r\n};\r\n\r\nclass HeaderWithoutDesc extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            user,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0, backgroundColor: colors.white }} >\r\n                <Row noGutters >\r\n                    <Col xs={{span: 12, order: 2}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}} >\r\n                        {\r\n                            !groupProperties\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView vAlignContent=\"center\" height=\"100%\" marginLeft={10} >\r\n                                    {\r\n                                        !user || authStatus !== AUTH_SUCCESS\r\n                                            ?\r\n                                            <NavLink\r\n                                                to={groupUserName ? ROUTES.FRONT.replace(\":groupUserName\", groupUserName) : ROUTES.FRONT_INVEST_WEST_SUPER}\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            >\r\n                                                <Typography variant=\"body1\" className={css(styles.navigation_text)} >\r\n                                                    <HomeIcon style={{ marginBottom: 6, marginRight: 5 }} />\r\n                                                    Home\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                            :\r\n                                            <NavLink\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                to={\r\n                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        `${groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        :\r\n                                                        (\r\n                                                            user.type === DB_CONST.TYPE_ISSUER\r\n                                                                ?\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                                                :\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        )\r\n                                                }>\r\n                                                <Typography variant=\"body1\" className={css(styles.navigation_text)} >\r\n                                                    <HomeIcon style={{ marginBottom: 6, marginRight: 5 }} />\r\n                                                    My dashboard\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                    }\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                    <Col xs={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 1}} >\r\n                        <FlexView style={{ padding: 8 }} column height=\"100%\" widht=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" >\r\n                            {\r\n                                !groupProperties\r\n                                    ?\r\n                                    <a href={ROUTES.ORIGINAL_WEB_URL} className={css(sharedStyles.nav_link_hover_without_changing_text_color)} >\r\n                                        <FlexView hAlignContent=\"center\" column className={css(styles.logo_field)} >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography variant=\"body1\" color=\"primary\" >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Invest West\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </a>\r\n                                    :\r\n                                    <NavLink\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                        to={\r\n                                            groupUserName\r\n                                                ?\r\n                                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                                :\r\n                                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                                        }\r\n                                    >\r\n                                        <FlexView hAlignContent=\"center\" column className={css(styles.logo_field)} >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography variant=\"body1\" color=\"primary\" >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Invest West\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </NavLink>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={{span: 12, order: 3}} md={{span: 12, order: 3}} lg={{span: 12, order: 3}} >\r\n                        <FlexView height={1} style={{ backgroundColor: colors.gray_300 }} />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderWithoutDesc);\r\n\r\nconst styles = StyleSheet.create({\r\n    logo: {\r\n        width: \"auto\",\r\n        height: 38,\r\n        marginBottom: 2\r\n    },\r\n\r\n    logo_field: {\r\n        ':hover': {\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    navigation_text: {\r\n        margin: 15,\r\n        padding: 8,\r\n        color: colors.black,\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_100\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Dialog,\r\n    DialogTitle,\r\n    Typography,\r\n    Paper,\r\n    InputAdornment,\r\n    IconButton,\r\n    FormControl\r\n} from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nimport HeaderWithoutDesc from '../../shared-components/nav-bars/HeaderWithoutDesc';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as authActions from '../../redux-store/actions/authActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nexport const INVALID_AUTH_NONE = 0;\r\nexport const INVALID_AUTH_USER_NOT_EXIST = 1;\r\nexport const INVALID_AUTH_USER_DECLINED_TO_REGISTER = 2;\r\nexport const INVALID_AUTH_USER_LEFT = 3;\r\nexport const INVALID_AUTH_USER_KICKED_OUT = 4;\r\nexport const AUTH_SUCCESS = 5;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        authenticating: state.auth.authenticating,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        resetAuthStatus: () => dispatch(authActions.resetAuthStatus()),\r\n        signin: (email, password) => dispatch(authActions.signin(email, password))\r\n    }\r\n};\r\n\r\nclass Signin extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseAuth = firebase.auth();\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            showPassword: false,\r\n\r\n            error: {\r\n                email: false,\r\n                password: false\r\n            },\r\n\r\n            resetPassword: {\r\n                resetPasswordDialogOpen: false,\r\n                resetEmail: '',\r\n\r\n                resetChecking: false,\r\n                resetError: false,\r\n                resetEmailSent: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            resetAuthStatus,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.SIGN_IN : ROUTES.SIGN_IN_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            resetAuthStatus();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            groupUserName,\r\n\r\n            authenticating,\r\n            user,\r\n\r\n            authStatus,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!authenticating && authStatus === AUTH_SUCCESS) {\r\n                switch (user.type) {\r\n                    case DB_CONST.TYPE_ADMIN:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    case DB_CONST.TYPE_INVESTOR:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    case DB_CONST.TYPE_ISSUER:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    default:\r\n                        return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Capture the changes in input fields and update the corresponding states\r\n     */\r\n    handleTextChanged = event => {\r\n        // get the name of the input field\r\n        const name = event.target.name;\r\n        // get the value of the input field\r\n        const value = event.target.value;\r\n\r\n        if (name === \"resetEmail\") {\r\n            this.setState({\r\n                resetPassword: {\r\n                    ...this.state.resetPassword,\r\n                    [name]: value\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                [name]: value\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if pre-conditions met (password and email are filled?) before signing the user in.\r\n     */\r\n    handleSignin = event => {\r\n        event.preventDefault();\r\n\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const password = this.state.password;\r\n\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetEmailSent: false\r\n            }\r\n        });\r\n\r\n        if (email.length > 0 && password.length > 0) {\r\n            this.setState({\r\n                authStatus: false,\r\n                error: {\r\n                    email: false,\r\n                    password: false\r\n                }\r\n            });\r\n\r\n            this.props.signin(email, password);\r\n\r\n        } else {\r\n            if (email.length === 0 && password.length === 0) {\r\n                this.setState({\r\n                    authStatus: false,\r\n                    error: {\r\n                        email: true,\r\n                        password: true\r\n                    }\r\n                });\r\n            } else {\r\n                if (email.length === 0 && password.length > 0) {\r\n                    this.setState({\r\n                        authStatus: false,\r\n                        error: {\r\n                            email: true,\r\n                            password: false\r\n                        }\r\n                    });\r\n                } else if (password.length === 0 && email.length > 0) {\r\n                    this.setState({\r\n                        authStatus: false,\r\n                        error: {\r\n                            email: false,\r\n                            password: true\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Open Reset Password Dialog\r\n     */\r\n    openResetPasswordDialog = () => {\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetPasswordDialogOpen: true,\r\n                // set resetEmailSent state to false to ensure the message of successfully sent email (if have) will disappear\r\n                resetEmailSent: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Reset all states relating Reset Password Dialog when the dialog is closed.\r\n     */\r\n    handleCloseResetPasswordDialog = () => {\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetPasswordDialogOpen: false,\r\n                resetEmail: '',\r\n                resetChecking: false,\r\n                resetError: false,\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Send an email reset password to the user.\r\n     */\r\n    handleSendResetEmail = () => {\r\n        const email = this.state.resetPassword.resetEmail;\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                // set resetChecking state to true to indicate that the email the user input is being checked\r\n                resetChecking: true\r\n            }\r\n        });\r\n        firebase\r\n            .auth()\r\n            .sendPasswordResetEmail(email)\r\n            .then(() => {\r\n                this.setState({\r\n                    resetPassword: {\r\n                        ...this.state.resetPassword,\r\n                        resetEmailSent: true\r\n                    }\r\n                });\r\n                this.handleCloseResetPasswordDialog();\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    resetPassword: {\r\n                        ...this.state.resetPassword,\r\n                        resetChecking: false,\r\n                        resetError: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Click to show password\r\n     */\r\n    handleClickShowPassword = () => {\r\n        this.setState({\r\n            showPassword: !this.state.showPassword\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Render UI elements when the signing credentials are being checked\r\n     */\r\n    renderAuthStatus = () => {\r\n        const {\r\n            groupProperties,\r\n            authenticating,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        if (this.state.resetPassword.resetEmailSent) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    className={css(styles.reset_email_sent)}\r\n                    marginBottom={20}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        align=\"left\"\r\n                    >\r\n                        An email with password reset instructions has been sent to your email address\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        } else {\r\n            if (authenticating) {\r\n                return (\r\n                    <FlexView hAlignContent=\"center\" marginBottom={20} >\r\n                        <HashLoader\r\n                            color={\r\n                                !groupProperties\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    groupProperties.settings.primaryColor\r\n                            }\r\n                        />\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                let errorMsg = '';\r\n                switch (authStatus) {\r\n                    case INVALID_AUTH_NONE:\r\n                        return null;\r\n                    case AUTH_SUCCESS:\r\n                        return null;\r\n                    case INVALID_AUTH_USER_NOT_EXIST:\r\n                        errorMsg = \"Email or password is invalid, or you are not a member of this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_DECLINED_TO_REGISTER:\r\n                        errorMsg = \"You decided not to join this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_LEFT:\r\n                        errorMsg = \"You have left this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_KICKED_OUT:\r\n                        errorMsg = \"Unfortunately, you are no longer a member of this group.\";\r\n                        break;\r\n                    default:\r\n                        return null;\r\n                }\r\n\r\n                return (\r\n                    <FlexView\r\n                        className={css(styles.auth_error)}\r\n                        marginBottom={20}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            align=\"left\"\r\n                        >\r\n                            {errorMsg}\r\n                        </Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\" >\r\n                    <HashLoader color={colors.primaryColor} />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0, position: \"fixed\", top: 0, height: \"100%\", overflow: \"auto\", backgroundColor: colors.gray_200 }} >\r\n                <Row noGutters >\r\n\r\n                    <HeaderWithoutDesc/>\r\n\r\n                    <Col xs={{span: 12, offset: 0}} md={{span: 6, offset: 3}} lg={{span: 6, offset: 3}} style={{ padding: 20 }}>\r\n                        <FlexView column marginTop={80} marginBottom={40} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {/** Sign in card */}\r\n                            <Paper elevation={0} square className={css(sharedStyles.kick_starter_border_box)} style={{padding: 30}}>\r\n                                <form onSubmit={this.handleSignin} >\r\n                                    <FlexView column >\r\n                                        <FlexView column hAlignContent=\"center\" marginBottom={35} >\r\n                                            <Typography variant=\"h4\" align=\"center\" paragraph color=\"primary\">Sign in to your account</Typography>\r\n                                            <Typography variant=\"body1\" align=\"center\">Connecting businesses and investors across the South West of England</Typography>\r\n                                        </FlexView>\r\n\r\n                                        {this.renderAuthStatus()}\r\n\r\n                                        <FormControl>\r\n                                            <TextField label=\"Email address\" name=\"email\" margin=\"normal\" variant=\"outlined\" error={this.state.error.email} onChange={this.handleTextChanged}/>\r\n                                        </FormControl>\r\n\r\n                                        <FormControl>\r\n                                            <TextField\r\n                                                label=\"Password\"\r\n                                                name=\"password\"\r\n                                                type={this.state.showPassword ? \"text\" : \"password\"}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={this.state.error.password}\r\n                                                onChange={this.handleTextChanged}\r\n                                                InputProps={{\r\n                                                    endAdornment: (\r\n                                                        <InputAdornment position=\"end\" >\r\n                                                            <IconButton edge=\"end\" aria-label=\"Toggle password visibility\" onClick={this.handleClickShowPassword} >\r\n                                                                {\r\n                                                                    !this.state.showPassword\r\n                                                                        ?\r\n                                                                        <VisibilityOff/>\r\n                                                                        :\r\n                                                                        <Visibility/>\r\n                                                                }\r\n                                                            </IconButton>\r\n                                                        </InputAdornment>\r\n                                                    ),\r\n                                                }}\r\n                                            />\r\n                                        </FormControl>\r\n\r\n                                        <FlexView marginTop={35} marginBottom={45} >\r\n                                            <Typography variant=\"body1\" align=\"left\" >\r\n                                                By clicking Sign In, you agree to our\r\n                                                <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover)} style={{ color: !groupProperties ? colors.primaryColor : groupProperties.settings.primaryColor }}>\r\n                                                    <b> &nbsp;Terms of use&nbsp; </b>\r\n                                                </NavLink>\r\n                                                and our\r\n                                                <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover)} style={{ color: !groupProperties ? colors.primaryColor : groupProperties.settings.primaryColor }} >\r\n                                                    <b> &nbsp;Privacy policy. </b>\r\n                                                </NavLink>\r\n                                            </Typography>\r\n                                        </FlexView>\r\n\r\n                                        <FormControl>\r\n                                            <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\" className={css(sharedStyles.no_text_transform)}>Sign in</Button>\r\n                                        </FormControl>\r\n\r\n                                        <FlexView hAlignContent=\"center\" marginTop={25} onClick={this.openResetPasswordDialog} >\r\n                                            <Typography variant=\"body1\" color=\"primary\" className={css(sharedStyles.nav_link_hover)}>Forgot your password?</Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </form>\r\n                            </Paper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <ResetPasswordDialog groupProperties={groupProperties} open={this.state.resetPassword.resetPasswordDialogOpen} onClose={this.handleCloseResetPasswordDialog} onTextChanged={this.handleTextChanged} resetEmail={this.state.resetPassword.resetEmail} onSendEmailClick={this.handleSendResetEmail} resetChecking={this.state.resetPassword.resetChecking} resetError={this.state.resetPassword.resetError} />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);\r\n\r\nclass ResetPasswordDialog extends Component {\r\n\r\n    handleClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    onSendEmailClick = () => {\r\n        this.props.onSendEmailClick();\r\n    };\r\n\r\n    renderReset = () => {\r\n        const {\r\n            groupProperties,\r\n            resetChecking,\r\n            resetError\r\n        } = this.props;\r\n        if (resetChecking) {\r\n            return (\r\n                <FlexView hAlignContent=\"center\" marginBottom={30} >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        } else {\r\n            if (resetError) {\r\n                return (\r\n                    <FlexView style={{ backgroundColor: colors.red_700 }} vAlignContent=\"center\" marginBottom={30} >\r\n                        <Typography variant=\"body1\" className={css(styles.reset_email_error_text)}>Unable to send request password email</Typography>\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            resetEmail,\r\n            resetError,\r\n            resetChecking,\r\n\r\n            onClose,\r\n            onTextChanged,\r\n            onSendEmailClick,\r\n            ...other\r\n        } = this.props;\r\n        return (\r\n            <Dialog fullWidth maxWidth=\"sm\" onClose={this.handleClose} {...other} >\r\n                <DialogTitle>\r\n                    <FlexView hAlignContent=\"center\" marginTop={20} >\r\n                        <Typography variant=\"h4\" align=\"center\" paragraph>Reset Your Password</Typography>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <FlexView column hAlignContent=\"center\" >\r\n                    <FlexView column marginRight={60} marginLeft={60} >\r\n                        <Typography variant=\"body1\" align=\"center\" paragraph>Please provide the email address you used when you signed up for your Invest West account.</Typography>\r\n                        <Typography variant=\"body1\" align=\"center\" paragraph>We will send you an email with a link to reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b></Typography>\r\n                    </FlexView>\r\n                    <FlexView column width=\"100%\" marginTop={50} className={css(styles.reset_password_actions_layout)}>\r\n\r\n                        {this.renderReset()}\r\n\r\n                        <Container fluid style={{ padding: 0 }}>\r\n                            <Row>\r\n                                <Col xs={12} sm={12} md={7} lg={9}>\r\n                                    <FlexView height=\"100%\" vAlignContent=\"center\">\r\n                                        <TextField name=\"resetEmail\" value={resetEmail} label=\"Email address\" variant=\"outlined\" fullWidth onChange={this.onTextChanged}/>\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col xs={12} sm={12} md={5} lg={3}>\r\n                                    <FlexView height=\"100%\" vAlignContent=\"center\">\r\n                                        <Button fullWidth color=\"primary\" variant=\"contained\" size=\"medium\" onClick={this.onSendEmailClick} className={css(sharedStyles.no_text_transform)}>Send</Button>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n                    </FlexView>\r\n                </FlexView>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    hover: {\r\n        ':hover': {\r\n            color: colors.gray_800,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    auth_error: {\r\n        backgroundColor: colors.red_700,\r\n        color: colors.white,\r\n        padding: 15\r\n    },\r\n\r\n    reset_email_sent: {\r\n        backgroundColor: colors.dark_green,\r\n        color: colors.white,\r\n        padding: 15\r\n    },\r\n\r\n    reset_password_actions_layout: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingTop: 42,\r\n        paddingBottom: 42,\r\n        backgroundColor: colors.gray_200\r\n    },\r\n\r\n    reset_email_error_text: {\r\n        color: colors.white,\r\n        marginLeft: 15,\r\n        marginTop: 15,\r\n        marginBottom: 15\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {\r\n    INVALID_AUTH_USER_NOT_EXIST,\r\n    INVALID_AUTH_USER_DECLINED_TO_REGISTER,\r\n    INVALID_AUTH_USER_LEFT,\r\n    INVALID_AUTH_USER_KICKED_OUT,\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nexport const INITIALIZE_AUTH_STATE = 'INITIALIZE_AUTH_STATE';\r\nexport const initializeAuthState = () => {\r\n    return {\r\n        type: INITIALIZE_AUTH_STATE\r\n    }\r\n};\r\n\r\nexport const RESET_AUTH_STATUS = 'RESET_AUTH_STATUS';\r\nexport const resetAuthStatus = () => {\r\n    return {\r\n        type: RESET_AUTH_STATUS\r\n    }\r\n};\r\n\r\nexport const SIGNING_IN = 'SIGNING_IN';\r\nexport const AUTHENTICATING = 'AUTHENTICATING';\r\nexport const FINISHED_AUTHENTICATING = 'FINISHED_AUTHENTICATING';\r\nexport const signin = (email, password) => {\r\n    return (dispatch, getState) => {\r\n        // if the user is already logged in and they still press signin again\r\n        // log them out first before starting the sign in process\r\n        logOutWithIndirectDispatch(dispatch);\r\n\r\n        dispatch({\r\n            type: SIGNING_IN\r\n        });\r\n\r\n        dispatch({\r\n            type: AUTHENTICATING\r\n        });\r\n\r\n        firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, password)\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_AUTHENTICATING,\r\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP = 'TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP';\r\nexport const togglePreventValidatingUserWhenSigningUp = (shouldPrevent) => {\r\n    return {\r\n        type: TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP,\r\n        shouldPrevent\r\n    }\r\n};\r\n\r\nexport const USER_PROFILE_LOADED = 'USER_PROFILE_LOADED';\r\nexport const AUTH_LOADING_GROUPS_USER_IS_IN = 'AUTH_LOADING_GROUPS_USER_IS_IN';\r\nexport const AUTH_GROUPS_USER_IS_IN_LOADED = 'AUTH_GROUPS_USER_IS_IN_LOADED';\r\n/**\r\n * This function is used to load user's profile and check if the user belongs to the angel network specified in the URL\r\n *\r\n * @param uid\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const getUserProfileAndValidateUser = uid => {\r\n    return (dispatch, getState) => {\r\n\r\n        if (!uid) {\r\n            dispatch({\r\n                type: USER_PROFILE_LOADED,\r\n                user: null\r\n            });\r\n            return;\r\n        }\r\n\r\n        const {\r\n            groupUserName,\r\n            groupProperties\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const {\r\n            signingIn,\r\n            user,\r\n            userLoaded,\r\n            preventValidatingUserWhenSigningUp\r\n        } = getState().auth;\r\n\r\n        // if in signup process, do not proceed loading the user's profile as it will cause a lot of conflicts\r\n        // due to the lack of user's data on the database\r\n        if (preventValidatingUserWhenSigningUp) {\r\n            return;\r\n        }\r\n\r\n        if (user && userLoaded) {\r\n            return;\r\n        }\r\n\r\n        // if the page is reloaded (not from the Sign in button), this process will become the signin process\r\n        if (!signingIn) {\r\n            dispatch({\r\n                type: AUTHENTICATING\r\n            });\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .getUserBasedOnID(uid)\r\n            .then(user => {\r\n                dispatch({\r\n                    type: USER_PROFILE_LOADED,\r\n                    user\r\n                });\r\n\r\n                // if the user is an admin, do not need to check for groups they are in\r\n                if (user.type === DB_CONST.TYPE_ADMIN) {\r\n                    // groupUserName is specified in the URL --> angel network login\r\n                    if (groupUserName) {\r\n                        // check if the angel network specified in the URL is valid\r\n                        if (groupProperties) {\r\n                            // check if the admin is from an angel network and if the admin's anid is equal to the anid specified in the URL\r\n                            if (!user.isInvestWest && !user.superAdmin && user.anid === groupProperties.anid) {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: AUTH_SUCCESS\r\n                                });\r\n                            } else {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                            }\r\n                        } else {\r\n                            // do nothing\r\n                        }\r\n                    }\r\n                    // angel network is not specified in the URL --> Invest West login\r\n                    else {\r\n                        // admins are from Invest West\r\n                        if (user.isInvestWest || user.superAdmin) {\r\n                            dispatch({\r\n                                type: FINISHED_AUTHENTICATING,\r\n                                authStatus: AUTH_SUCCESS\r\n                            });\r\n                        } else {\r\n                            dispatch({\r\n                                type: FINISHED_AUTHENTICATING,\r\n                                authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                            });\r\n\r\n                            logOutWithIndirectDispatch(dispatch);\r\n                        }\r\n                    }\r\n                }\r\n                // the user is not an admin (issuer or investor), load the groups they are in to check for login with each angel network\r\n                else {\r\n                    dispatch({\r\n                        type: AUTH_LOADING_GROUPS_USER_IS_IN\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .loadGroupsUserIsIn(user.id)\r\n                        .then(groupsUserIsIn => {\r\n                            dispatch({\r\n                                type: AUTH_GROUPS_USER_IS_IN_LOADED,\r\n                                groups: groupsUserIsIn\r\n                            });\r\n\r\n                            // user is not in any groups --> this is impractical but worth checking just in case\r\n                            if (!groupsUserIsIn || (groupsUserIsIn && groupsUserIsIn.length === 0)) {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                                return;\r\n                            }\r\n\r\n                            let groupFound = null;\r\n\r\n                            // groupUserName is specified in the URL --> angel network login\r\n                            if (groupUserName) {\r\n                                // check if the angel network specified in the URL is valid\r\n                                if (groupProperties) {\r\n                                    groupsUserIsIn.forEach(group => {\r\n                                        if (group.anid === groupProperties.anid) {\r\n                                            groupFound = group;\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    // do nothing\r\n                                }\r\n                            }\r\n                            // angel network is not specified in the URL --> Invest West login\r\n                            else {\r\n                                groupsUserIsIn.forEach(group => {\r\n                                    if (group.isInvestWest) {\r\n                                        groupFound = group;\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            // check if the angel network specified in the URL is valid\r\n                            if (groupProperties) {\r\n                                if (groupFound) {\r\n                                    if (groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\r\n                                        dispatch({\r\n                                            type: FINISHED_AUTHENTICATING,\r\n                                            authStatus: AUTH_SUCCESS\r\n                                        });\r\n                                    } else {\r\n                                        dispatch({\r\n                                            type: FINISHED_AUTHENTICATING,\r\n                                            authStatus:\r\n                                                groupFound.userInGroupStatus === DB_CONST.INVITED_USER_DECLINED_TO_REGISTER\r\n                                                    ?\r\n                                                    INVALID_AUTH_USER_DECLINED_TO_REGISTER\r\n                                                    :\r\n                                                    groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_LEFT\r\n                                                        ?\r\n                                                        INVALID_AUTH_USER_LEFT\r\n                                                        :\r\n                                                        groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_KICKED_OUT\r\n                                                            ?\r\n                                                            INVALID_AUTH_USER_KICKED_OUT\r\n                                                            :\r\n                                                            INVALID_AUTH_USER_NOT_EXIST\r\n                                        });\r\n\r\n                                        logOutWithIndirectDispatch(dispatch);\r\n                                    }\r\n                                } else {\r\n                                    dispatch({\r\n                                        type: FINISHED_AUTHENTICATING,\r\n                                        authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                    });\r\n\r\n                                    logOutWithIndirectDispatch(dispatch);\r\n                                }\r\n                            }\r\n                            // the angel network is set to null --> super page\r\n                            else {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: AUTH_LOADING_GROUPS_USER_IS_IN,\r\n                                groups: null,\r\n                                error\r\n                            });\r\n\r\n                            logOutWithIndirectDispatch(dispatch);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: USER_PROFILE_LOADED,\r\n                    user: null\r\n                });\r\n\r\n                dispatch({\r\n                    type: FINISHED_AUTHENTICATING,\r\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                });\r\n\r\n                logOutWithIndirectDispatch(dispatch);\r\n            });\r\n    }\r\n};\r\n\r\n/**\r\n * Logout function to be used within this file\r\n *\r\n * @param dispatch\r\n */\r\nexport const logOutWithIndirectDispatch = (dispatch) => {\r\n    firebase\r\n        .auth()\r\n        .signOut()\r\n        .then(() => {\r\n            dispatch({\r\n                type: LOG_OUT\r\n            });\r\n        });\r\n};\r\n\r\nexport const LOG_OUT = 'LOG_OUT';\r\n/**\r\n * Logout function --> called outside this file\r\n *\r\n * For some reasons (don't now), this function won't get called when called inside this file\r\n *\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const logout = () => {\r\n    return (dispatch, getState) => {\r\n        // firebase\r\n        //     .auth()\r\n        //     .signOut()\r\n        //     .then(() => {\r\n        //\r\n        //     });\r\n        return dispatch({\r\n            type: LOG_OUT\r\n        });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet userListener = null;\r\nlet groupsUserIsInListener = null;\r\n\r\nexport const CURRENT_USER_PROFILE_HAS_CHANGED = 'CURRENT_USER_PROFILE_HAS_CHANGED';\r\nexport const startListeningForUserProfileChanges = () => {\r\n    return (dispatch, getState) => {\r\n        if (!userListener) {\r\n            const {\r\n                user\r\n            } = getState().auth;\r\n\r\n            userListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id);\r\n\r\n            userListener\r\n                .on('value', snapshot => {\r\n                    const userChanged = snapshot.val();\r\n                    // this on changed function will be invoked as soon as the user profile is downloaded\r\n                    // however, the snapshot.val() returns null as there are no changes\r\n                    // thus, we need to check if snapshot.val() is not null before assigning its value\r\n                    // to the user variable. Otherwise, the user variable will be set to null which causes\r\n                    // PageNotFound to be returned.\r\n                    if (userChanged) {\r\n                        dispatch({\r\n                            type: CURRENT_USER_PROFILE_HAS_CHANGED,\r\n                            userChanged\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForUserProfileChanges = () => {\r\n    return (dispatch, getState) => {\r\n        if (userListener) {\r\n            userListener.off('value');\r\n            userListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const GROUPS_USER_IS_IN_HAVE_CHANGED = 'GROUPS_USER_IS_IN_HAVE_CHANGED';\r\nexport const startListeningForGroupsUserIsIn = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const user = getState().auth.user;\r\n\r\n        if (!groupsUserIsInListener) {\r\n            groupsUserIsInListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('email')\r\n                .equalTo(user.email);\r\n\r\n            groupsUserIsInListener\r\n                .on('child_added', snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    const groupsUserIsIn = getState().auth.groupsUserIsIn;\r\n\r\n                    let groupUserIsIn = {\r\n                        invitedUser: invitedUser,\r\n                        anid: invitedUser.invitedBy,\r\n                        userInGroupStatus: invitedUser.status\r\n                    };\r\n\r\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\r\n                    if (index === -1) {\r\n                        realtimeDBUtils\r\n                            .loadAngelNetworkBasedOnANID(groupUserIsIn.anid)\r\n                            .then(angelNetwork => {\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n\r\n                                dispatch({\r\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\r\n                                    groups: [...groupsUserIsIn, groupUserIsIn]\r\n                                });\r\n                            });\r\n                    }\r\n                });\r\n\r\n            groupsUserIsInListener\r\n                .on('child_changed', snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    let groupsUserIsIn = getState().auth.groupsUserIsIn;\r\n\r\n                    let groupUserIsIn = {\r\n                        invitedUser: invitedUser,\r\n                        anid: invitedUser.invitedBy,\r\n                        userInGroupStatus: invitedUser.status\r\n                    };\r\n\r\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\r\n                    if (index !== -1) {\r\n                        realtimeDBUtils\r\n                            .loadAngelNetworkBasedOnANID(groupsUserIsIn.anid)\r\n                            .then(angelNetwork => {\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n\r\n                                groupsUserIsIn[index] = groupsUserIsIn;\r\n\r\n                                dispatch({\r\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\r\n                                    groups: [...groupsUserIsIn]\r\n                                });\r\n                            });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForGroupsUserIsIn = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupsUserIsInListener) {\r\n            groupsUserIsInListener.off('child_added');\r\n            groupsUserIsInListener.off('child_changed');\r\n            groupsUserIsInListener = null;\r\n        }\r\n    }\r\n};\r\n\r\n","export const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\r\nexport const toggleSidebar = checkSidebarDocked => {\r\n    return (dispatch, getState) => {\r\n\r\n        if (!checkSidebarDocked) {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarOpen: false\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (getState().MediaQueryState.isLaptop || getState().MediaQueryState.isDesktop) {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarDocked: !getState().dashboardSidebar.sidebarDocked,\r\n                sidebarOpen: false\r\n            });\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarDocked: false,\r\n                sidebarOpen: !getState().dashboardSidebar.sidebarOpen\r\n            });\r\n        }\r\n    }\r\n};","import * as utils from '../../utils/utils';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {trackActivity} from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const LOADING_FORUMS = 'LOADING_FORUMS';\r\nexport const FINISHED_LOADING_FORUMS = 'FINISHED_LOADING_FORUMS';\r\nexport const ERROR_LOADING_FORUMS = 'ERROR_LOADING_FORUMS';\r\nexport const loadForums = (mode) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const forums = getState().manageForums.forums;\r\n        const forumsLoaded = getState().manageForums.forumsLoaded;\r\n\r\n        if (!forumsLoaded && forums.length === 0) {\r\n            dispatch({\r\n                type: LOADING_FORUMS\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .loadForums(mode)\r\n                .then(forums => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_FORUMS,\r\n                        forums\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_FORUMS,\r\n                        forums: [],\r\n                        error\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not load forums.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_FORUMS_MAIN = 'GO_BACK_TO_FORUMS_MAIN';\r\nexport const goBackToForumsMain = () => {\r\n    return {\r\n        type: GO_BACK_TO_FORUMS_MAIN\r\n    }\r\n};\r\n\r\nexport const TOGGLE_CREATE_NEW_FORUM = 'TOGGLE_CREATE_NEW_FORUM';\r\nexport const toggleCreateNewForum = (open, forumEdited) => {\r\n    return {\r\n        type: TOGGLE_CREATE_NEW_FORUM,\r\n        open, // true --> Open, false --> Close\r\n        forumEdited // not null --> Editing a forum, null --> Creating a new forum\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_NEW_FORUM = 'ERROR_CREATING_NEW_FORUM';\r\nexport const createNewForum = () => {\r\n    return (dispatch, getState) => {\r\n        let forumBeforeEditing = getState().manageForums.forumEdited;\r\n        const createForumName = getState().manageForums.createForumName;\r\n        const createForumDesc = getState().manageForums.createForumDesc;\r\n\r\n        if (createForumName.trim().length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_NEW_FORUM\r\n            });\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // creating a new forum\r\n        if (!forumBeforeEditing) {\r\n            const forum = {\r\n                name: createForumName,\r\n                description: createForumDesc,\r\n                dateCreated: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createForum(forum)\r\n                .then(forumID => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_FORUM,\r\n                        open: false,\r\n                        forumEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                            interactedObjectID: forumID,\r\n                            value: {\r\n                                ...forum,\r\n                                id: forumID\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM\r\n                                .replace(\"%forum%\", forum.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Forum created.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create forum.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing a forum\r\n        else {\r\n            forumBeforeEditing.author = {\r\n                id: forumBeforeEditing.author.id\r\n            };\r\n\r\n            // only allow super admins to edit a forum\r\n            if (!currentUser\r\n                || (\r\n                    currentUser && !currentUser.superAdmin\r\n                )\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            let forumAfterEditing = JSON.parse(JSON.stringify(forumBeforeEditing));\r\n            forumAfterEditing.name = createForumName;\r\n            forumAfterEditing.description = createForumDesc;\r\n            // update the edited time\r\n            forumAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editForum(forumAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_FORUM,\r\n                        open: false,\r\n                        forumEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                            interactedObjectID: forumAfterEditing.id,\r\n                            value: {\r\n                                before: forumBeforeEditing,\r\n                                after: forumAfterEditing\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM\r\n                                .replace(\"%forumName%\", forumAfterEditing.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Forum updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update forum.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const deleteForum = forumID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // only allow super admins to delete a forum\r\n        if (!currentUser\r\n            || (\r\n                currentUser && !currentUser.superAdmin\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        let forums = [...getState().manageForums.forums];\r\n        let forumBeforeChanging = JSON.parse(JSON.stringify(forums[forums.findIndex(forum => forum.id === forumID)]));\r\n        forumBeforeChanging.author = {\r\n            id: forumBeforeChanging.author.id\r\n        };\r\n\r\n        realtimeDBUtils\r\n            .deleteForum(forumID)\r\n            .then(() => {\r\n                const forumAfterChanging = {\r\n                    ...forumBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                    interactedObjectID: forumBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM\r\n                        .replace(\"%forumName%\", forumBeforeChanging.name),\r\n                    value: {\r\n                        before: forumBeforeChanging,\r\n                        after: forumAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Forum deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete forum.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const FORUMS_INPUT_CHANGED = 'FORUMS_INPUT_CHANGED';\r\nexport const handleForumsInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const targetName = event.target.name;\r\n        const targetValue = event.target.value;\r\n\r\n        dispatch({\r\n            type: FORUMS_INPUT_CHANGED,\r\n            name: targetName,\r\n            value: targetValue\r\n        });\r\n\r\n        switch (targetName) {\r\n            // forumsLoadModeChanged\r\n            case \"forumsLoadMode\": {\r\n                dispatch({\r\n                    type: LOADING_FORUMS\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .loadForums(targetValue)\r\n                    .then(forums => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_FORUMS,\r\n                            forums\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_FORUMS,\r\n                            forums: [],\r\n                            error\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                            message: \"Error happened. Could not load forums.\",\r\n                            color: \"error\",\r\n                            position: \"bottom\"\r\n                        });\r\n                    });\r\n\r\n                return;\r\n            }\r\n            // threadsLoadMode changed\r\n            case \"threadsLoadMode\": {\r\n\r\n                const forumSelected = getState().manageForums.forumSelected;\r\n\r\n                dispatch({\r\n                    type: LOADING_THREADS_IN_A_FORUM,\r\n                    forumSelected: forumSelected\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .loadThreads(targetValue, forumSelected)\r\n                    .then(threads => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                            threads\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                            threads: [],\r\n                            error\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                            message: \"Error happened. Could not load threads.\",\r\n                            color: \"error\",\r\n                            position: \"bottom\"\r\n                        });\r\n                    });\r\n\r\n                return;\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n};\r\n\r\nexport const LOADING_THREADS_IN_A_FORUM = 'LOADING_THREADS_IN_A_FORUM';\r\nexport const FINISHED_LOADING_THREADS_IN_A_FORUM = 'FINISHED_LOADING_THREADS_IN_A_FORUM';\r\nexport const clickOnAParticularForum = forum => {\r\n    return (dispatch, getState) => {\r\n\r\n        const threadsLoadMode = getState().manageForums.threadsLoadMode;\r\n\r\n        dispatch({\r\n            type: LOADING_THREADS_IN_A_FORUM,\r\n            forumSelected: forum\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadThreads(threadsLoadMode, forum)\r\n            .then(threads => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                    threads\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                    threads: [],\r\n                    error\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load threads.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_FORUMS_LIST = 'GO_BACK_TO_FORUMS_LIST';\r\nexport const goBackToForumsList = () => {\r\n    return {\r\n        type: GO_BACK_TO_FORUMS_LIST\r\n    }\r\n};\r\n\r\nexport const TOGGLE_CREATE_NEW_THREAD = 'TOGGLE_CREATE_NEW_THREAD';\r\nexport const toggleCreateNewThread = (open, threadEdited) => {\r\n    return {\r\n        type: TOGGLE_CREATE_NEW_THREAD,\r\n        open, // true --> Open, false --> Close\r\n        threadEdited // not null --> Editing a thread, null --> Creating a new thread\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_NEW_THREAD = 'ERROR_CREATING_NEW_THREAD';\r\nexport const createNewThread = () => {\r\n    return (dispatch, getState) => {\r\n        let threadBeforeEditing = getState().manageForums.threadEdited;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const createThreadName = getState().manageForums.createThreadName;\r\n        const createThreadBriefDesc = getState().manageForums.createThreadBriefDesc;\r\n        const createThreadMessage = getState().manageForums.createThreadMessage;\r\n\r\n        if (createThreadName.trim().length === 0\r\n            || createThreadBriefDesc.trim().length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_NEW_THREAD\r\n            });\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // creating a new thread\r\n        if (!threadBeforeEditing) {\r\n            const thread = {\r\n                forumID: forumSelected.id,\r\n                name: createThreadName,\r\n                message: createThreadMessage,\r\n                description: createThreadBriefDesc,\r\n                dateCreated: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createThread(thread)\r\n                .then(threadID => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_THREAD,\r\n                        open: false,\r\n                        threadEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                            interactedObjectID: threadID,\r\n                            value: {\r\n                                ...thread,\r\n                                id: threadID\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD\r\n                                .replace(\"%thread%\", thread.name)\r\n                                .replace(\"%forum%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Thread created.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create thread.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing a thread\r\n        else {\r\n            threadBeforeEditing.author = {\r\n                id: threadBeforeEditing.author.id\r\n            };\r\n\r\n            // only allow super admins to edit a thread\r\n            if (!currentUser\r\n                || (\r\n                    currentUser && !currentUser.superAdmin\r\n                )\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            let threadAfterEditing = JSON.parse(JSON.stringify(threadBeforeEditing));\r\n            threadAfterEditing.name = createThreadName;\r\n            threadAfterEditing.description = createThreadBriefDesc;\r\n            threadAfterEditing.message = createThreadMessage;\r\n            // update the edited time\r\n            threadAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editThread(threadAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_THREAD,\r\n                        open: false,\r\n                        threadEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                            interactedObjectID: threadAfterEditing.id,\r\n                            value: {\r\n                                before: threadBeforeEditing,\r\n                                after: threadAfterEditing\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD\r\n                                .replace(\"%threadName%\", threadAfterEditing.name)\r\n                                .replace(\"%forumName%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Thread updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update thread.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const deleteThread = threadID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n\r\n        // only allow super admins to delete a thread\r\n        if (!currentUser\r\n            || (\r\n                currentUser && !currentUser.superAdmin\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        let threads = [...getState().manageForums.forumThreads];\r\n        let threadBeforeChanging = JSON.parse(JSON.stringify(threads[threads.findIndex(thread => thread.id === threadID)]));\r\n        threadBeforeChanging.author = {\r\n            id: threadBeforeChanging.author.id\r\n        };\r\n\r\n        realtimeDBUtils\r\n            .deleteThread(threadID)\r\n            .then(() => {\r\n                const threadAfterChanging = {\r\n                    ...threadBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                    interactedObjectID: threadBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD\r\n                        .replace(\"%threadName%\", threadBeforeChanging.name)\r\n                        .replace(\"%forumName%\", forumSelected.name),\r\n                    value: {\r\n                        before: threadBeforeChanging,\r\n                        after: threadAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Thread deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete thread.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const LOADING_REPLIES_IN_A_THREAD = 'LOADING_REPLIES_IN_A_THREAD';\r\nexport const FINISHED_LOADING_REPLIES_IN_A_THREAD = 'FINISHED_LOADING_REPLIES_IN_A_THREAD';\r\nexport const clickOnAParticularThread = thread => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: LOADING_REPLIES_IN_A_THREAD,\r\n            threadSelected: thread\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadThreadReplies(thread)\r\n            .then(replies => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\r\n                    replies\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\r\n                    replies: [],\r\n                    error\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load replies.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_THREADS_LIST = 'GO_BACK_TO_THREADS_LIST';\r\nexport const goBackToThreadsList = () => {\r\n    return {\r\n        type: GO_BACK_TO_THREADS_LIST\r\n    }\r\n};\r\n\r\nexport const TOGGLE_THREAD_REPLY = 'TOGGLE_THREAD_REPLY';\r\nexport const toggleThreadReply = (open, threadReplyEdited) => {\r\n    return {\r\n        type: TOGGLE_THREAD_REPLY,\r\n        open,\r\n        threadReplyEdited\r\n    }\r\n};\r\n\r\nexport const deleteThreadReply = threadReplyID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        let threadReplies = [...getState().manageForums.forumThreadReplies];\r\n        let threadReplyBeforeChanging = JSON.parse(JSON.stringify(threadReplies[threadReplies.findIndex(reply => reply.id === threadReplyID)]));\r\n        threadReplyBeforeChanging.author = {\r\n            id: threadReplyBeforeChanging.author.id\r\n        };\r\n\r\n        // this if statement ensures only super admins or the owner of the reply can delete it\r\n        if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeChanging.author.id) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .deleteThreadReply(threadReplyID)\r\n            .then(() => {\r\n                const threadReplyAfterChanging = {\r\n                    ...threadReplyBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                    interactedObjectID: threadReplyBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY\r\n                        .replace(\"%threadName%\", forumThreadSelected.name)\r\n                        .replace(\"%forumName%\", forumSelected.name),\r\n                    value: {\r\n                        before: threadReplyBeforeChanging,\r\n                        after: threadReplyAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Reply deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete reply.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_THREAD_REPLY = 'ERROR_CREATING_THREAD_REPLY';\r\nexport const submitThreadReply = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n        const threadReplySubject = getState().manageForums.threadReplySubject;\r\n        const threadReplyMessage = getState().manageForums.threadReplyMessage;\r\n\r\n        let threadReplyBeforeEditing = getState().manageForums.threadReplyEdited;\r\n\r\n        if (threadReplySubject.trim().length === 0 || threadReplyMessage.ops.length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_THREAD_REPLY\r\n            });\r\n            return;\r\n        }\r\n\r\n        // creating a new thread reply\r\n        if (!threadReplyBeforeEditing) {\r\n            const reply = {\r\n                threadID: forumThreadSelected.id,\r\n                subject: threadReplySubject,\r\n                message: threadReplyMessage,\r\n                replyDate: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createThreadReply(reply)\r\n                .then(replyID => {\r\n                    dispatch({\r\n                        type: TOGGLE_THREAD_REPLY,\r\n                        open: false,\r\n                        threadReplyEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            value: {\r\n                                ...reply,\r\n                                id: replyID\r\n                            },\r\n                            activitySummary:\r\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD\r\n                                    .replace(\"%thread%\", forumThreadSelected.name)\r\n                                    .replace(\"%forum%\", forumSelected.name)\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create reply.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing an existing thread reply\r\n        else {\r\n            threadReplyBeforeEditing.author = {\r\n                id: threadReplyBeforeEditing.author.id\r\n            }\r\n\r\n            // this if statement ensures only super admins or the owner of the reply can edit it\r\n            if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeEditing.author.id) {\r\n                return;\r\n            }\r\n\r\n            let threadReplyAfterEditing = JSON.parse(JSON.stringify(threadReplyBeforeEditing));\r\n            threadReplyAfterEditing.subject = threadReplySubject;\r\n            threadReplyAfterEditing.message = threadReplyMessage;\r\n            threadReplyAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editThreadReply(threadReplyAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_THREAD_REPLY,\r\n                        open: false,\r\n                        threadReplyEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\r\n                            interactedObjectID: threadReplyAfterEditing.id,\r\n                            value: {\r\n                                before: threadReplyBeforeEditing,\r\n                                after: threadReplyAfterEditing\r\n                            },\r\n                            activitySummary:\r\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY\r\n                                    .replace(\"%threadName%\", forumThreadSelected.name)\r\n                                    .replace(\"%forumName%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Reply updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update reply.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_FORUMS_TABLE_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (table, newPage) => {\r\n    return {\r\n        type: MANAGE_FORUMS_TABLE_PAGE_CHANGED,\r\n        newPage,\r\n        table\r\n    }\r\n};\r\n\r\nexport const MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = (table, event) => {\r\n    return {\r\n        type: MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10),\r\n        table\r\n    }\r\n};\r\n\r\nexport const FORUMS_QUILL_CHANGED = 'FORUMS_QUILL_CHANGED';\r\nexport const THREAD_CONTENT_QUILL = 'THREAD_CONTENT_QUILL';\r\nexport const THREAD_REPLY_CONTENT_QUILL = 'THREAD_REPLY_CONTENT_QUILL';\r\nexport const handleQuillChanged = (field, editor) => {\r\n    // check if the editor is empty (or does not have any text)\r\n    if (editor.getText().trim().length === 0) {\r\n        return {\r\n            type: FORUMS_QUILL_CHANGED,\r\n            quill: {ops: []},\r\n            field\r\n        }\r\n    } else {\r\n        return {\r\n            type: FORUMS_QUILL_CHANGED,\r\n            quill: editor.getContents(),\r\n            field\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\nlet forumsListener = null;\r\nlet forumThreadsListener = null;\r\nlet forumThreadRepliesListener = null;\r\n\r\nexport const FORUMS_CHANGED = 'FORUMS_CHANGED';\r\nexport const startListeningForForumsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!forumsListener) {\r\n            forumsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUMS_CHILD);\r\n\r\n            // a new forum is added\r\n            forumsListener\r\n                .on('child_added', snapshot => {\r\n                    let forum = snapshot.val();\r\n\r\n                    const currentUser = getState().auth.user;\r\n                    const forumsLoadMode = getState().manageForums.forumsLoadMode;\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\r\n\r\n                    // only add if the forum is not in the local forums array\r\n                    if (existingForumIndex === -1) {\r\n                        // only add live forums\r\n                        if (forumsLoadMode === realtimeDBUtils.LOAD_LIVE_FORUMS) {\r\n                            if (!forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            ) {\r\n                                if (forum.author.id === currentUser.id) {\r\n                                    forum.author = currentUser;\r\n                                    forums.push(forum);\r\n\r\n                                    dispatch({\r\n                                        type: FORUMS_CHANGED,\r\n                                        forumsChanged: [...forums]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(forum.author.id)\r\n                                        .then(user => {\r\n                                            forum.author = user;\r\n                                            forums.push(forum);\r\n\r\n                                            dispatch({\r\n                                                type: FORUMS_CHANGED,\r\n                                                forumsChanged: [...forums]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                        // only add deleted forums\r\n                        else {\r\n                            if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                                if (forum.author.id === currentUser.id) {\r\n                                    forum.author = currentUser;\r\n                                    forums.push(forum);\r\n\r\n                                    dispatch({\r\n                                        type: FORUMS_CHANGED,\r\n                                        forumsChanged: [...forums]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(forum.author.id)\r\n                                        .then(user => {\r\n                                            forum.author = user;\r\n                                            forums.push(forum);\r\n\r\n                                            dispatch({\r\n                                                type: FORUMS_CHANGED,\r\n                                                forumsChanged: [...forums]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a forum has changed\r\n            forumsListener\r\n                .on('child_changed', snapshot => {\r\n                    let forum = snapshot.val();\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\r\n\r\n                    if (existingForumIndex !== -1) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (\r\n                                forum.hasOwnProperty('deleted')\r\n                                && forum.deleted === false\r\n                            )\r\n                        ) {\r\n                            forum.author = forums[existingForumIndex].author;\r\n                            forums[existingForumIndex] = forum;\r\n                        } else {\r\n                            forums.splice(existingForumIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: FORUMS_CHANGED,\r\n                            forumsChanged: [...forums]\r\n                        });\r\n                    } else {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                forums.push(forum);\r\n\r\n                                dispatch({\r\n                                    type: FORUMS_CHANGED,\r\n                                    forumsChanged: [...forums]\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n\r\n            // a forums is removed\r\n            forumsListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === snapshot.key);\r\n                    forums.splice(existingForumIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: FORUMS_CHANGED,\r\n                        forumsChanged: [...forums]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForForumsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumsListener) {\r\n            forumsListener.off('child_added');\r\n            forumsListener.off('child_changed');\r\n            forumsListener.off('child_removed');\r\n            forumsListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const THREADS_CHANGED = 'THREADS_CHANGED';\r\nexport const startListeningForThreadsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n\r\n        if (!forumThreadsListener) {\r\n            forumThreadsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n                .orderByChild('forumID')\r\n                .equalTo(forumSelected.id);\r\n\r\n            // a new thread is added\r\n            forumThreadsListener\r\n                .on('child_added', snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    const currentUser = getState().auth.user;\r\n                    const threadsLoadMode = getState().manageForums.threadsLoadMode;\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\r\n\r\n                    // only add if the thread is not in the local threads array\r\n                    if (existingThreadIndex === -1) {\r\n                        // only add live threads\r\n                        if (threadsLoadMode === realtimeDBUtils.LOAD_LIVE_THREADS) {\r\n                            if (!thread.hasOwnProperty('deleted')\r\n                                || (\r\n                                    thread.hasOwnProperty('deleted')\r\n                                    && thread.deleted === false\r\n                                )\r\n                            ) {\r\n                                if (thread.author.id === currentUser.id) {\r\n                                    thread.author = currentUser;\r\n                                    threads.push(thread);\r\n\r\n                                    dispatch({\r\n                                        type: THREADS_CHANGED,\r\n                                        threadsChanged: [...threads]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(thread.author.id)\r\n                                        .then(user => {\r\n                                            thread.author = user;\r\n                                            threads.push(thread);\r\n\r\n                                            dispatch({\r\n                                                type: THREADS_CHANGED,\r\n                                                threadsChanged: [...threads]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                        // only add deleted threads\r\n                        else {\r\n                            if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                                if (thread.author.id === currentUser.id) {\r\n                                    thread.author = currentUser;\r\n                                    threads.push(thread);\r\n\r\n                                    dispatch({\r\n                                        type: THREADS_CHANGED,\r\n                                        threadsChanged: [...threads]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(thread.author.id)\r\n                                        .then(user => {\r\n                                            thread.author = user;\r\n                                            threads.push(thread);\r\n\r\n                                            dispatch({\r\n                                                type: THREADS_CHANGED,\r\n                                                forumsChanged: [...threads]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a thread has changed\r\n            forumThreadsListener\r\n                .on('child_changed', snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\r\n\r\n                    if (existingThreadIndex !== -1) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (\r\n                                thread.hasOwnProperty('deleted')\r\n                                && thread.deleted === false\r\n                            )\r\n                        ) {\r\n                            thread.author = threads[existingThreadIndex].author;\r\n                            threads[existingThreadIndex] = thread;\r\n                        } else {\r\n                            threads.splice(existingThreadIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: THREADS_CHANGED,\r\n                            threadsChanged: [...threads]\r\n                        });\r\n                    } else {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                threads.push(thread);\r\n\r\n                                dispatch({\r\n                                    type: THREADS_CHANGED,\r\n                                    threadsChanged: [...threads]\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n\r\n            // a thread is removed\r\n            forumThreadsListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === snapshot.key);\r\n                    threads.splice(existingThreadIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: THREADS_CHANGED,\r\n                        threadsChanged: [...threads]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForThreadsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumThreadsListener) {\r\n            forumThreadsListener.off('child_added');\r\n            forumThreadsListener.off('child_changed');\r\n            forumThreadsListener.off('child_removed');\r\n            forumThreadsListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const THREAD_REPLIES_CHANGED = 'THREAD_REPLIES_CHANGED';\r\nexport const startListeningForThreadRepliesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n\r\n        if (!forumThreadRepliesListener) {\r\n            forumThreadRepliesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n                .orderByChild('threadID')\r\n                .equalTo(forumThreadSelected.id);\r\n\r\n            // a new reply is added\r\n            forumThreadRepliesListener\r\n                .on('child_added', snapshot => {\r\n                    let reply = snapshot.val();\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                    // only add if the forums is not in the local forums array\r\n                    if (existingReplyIndex === -1) {\r\n                        if (reply.author.id === user.id) {\r\n                            reply.author = user;\r\n                            replies.push(reply);\r\n\r\n                            dispatch({\r\n                                type: THREAD_REPLIES_CHANGED,\r\n                                repliesChanged: [...replies]\r\n                            });\r\n                        } else {\r\n                            realtimeDBUtils\r\n                                .getUserBasedOnID(reply.author.id)\r\n                                .then(user => {\r\n                                    reply.author = user;\r\n                                    replies.push(reply);\r\n\r\n                                    dispatch({\r\n                                        type: THREAD_REPLIES_CHANGED,\r\n                                        repliesChanged: [...replies]\r\n                                    });\r\n                                })\r\n                                .catch(error => {\r\n                                    // handle error\r\n                                });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a reply has changed\r\n            forumThreadRepliesListener\r\n                .on('child_changed', snapshot => {\r\n                    let reply = snapshot.val();\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                    reply.author = replies[existingReplyIndex].author;\r\n                    replies[existingReplyIndex] = reply;\r\n\r\n                    dispatch({\r\n                        type: THREAD_REPLIES_CHANGED,\r\n                        repliesChanged: [...replies]\r\n                    });\r\n                });\r\n\r\n            // a reply is removed\r\n            forumThreadRepliesListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === snapshot.key);\r\n                    replies.splice(existingReplyIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: THREAD_REPLIES_CHANGED,\r\n                        repliesChanged: [...replies]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForThreadRepliesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumThreadRepliesListener) {\r\n            forumThreadRepliesListener.off('child_added');\r\n            forumThreadRepliesListener.off('child_changed');\r\n            forumThreadRepliesListener.off('child_removed');\r\n            forumThreadRepliesListener = null;\r\n        }\r\n    }\r\n};\r\n\r\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AuthenticationStatus, isAuthenticating, successfullyAuthenticated} from \"../reducers/authenticationReducer\";\r\nimport User, {isInvestor} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport {AppState} from \"../reducers\";\r\nimport InvestorSelfCertification from \"../../models/investor_self_certification\";\r\nimport InvestorSelfCertificationRepository from \"../../api/repositories/InvestorSelfCertificationRepository\";\r\nimport Routes from \"../../router/routes\";\r\nimport Firebase from \"firebase\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\n\r\nexport enum AuthenticationEvents {\r\n    StartAuthenticating = \"AuthenticationEvents.StartAuthenticating\",\r\n    CompleteAuthentication = \"AuthenticationEvents.CompleteAuthentication\",\r\n    SignOut = \"AuthenticationEvents.SignOut\",\r\n    UpdateUserChanges = \"AuthenticationEvents.UpdateUserChanges\"\r\n}\r\n\r\nexport interface AuthenticationAction extends Action {\r\n}\r\n\r\nexport interface UpdateUserChangesAction extends Action {\r\n    updatedUser: User | Admin;\r\n}\r\n\r\nexport interface CompleteAuthenticationAction extends AuthenticationAction {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    selfCertification?: InvestorSelfCertification;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    error?: Error;\r\n}\r\n\r\nexport const signIn: ActionCreator<any> = (email?: string, password?: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = getState();\r\n\r\n        if (isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        const authenticationCompleteAction: CompleteAuthenticationAction = {\r\n            type: AuthenticationEvents.CompleteAuthentication,\r\n            status: AuthenticationStatus.Authenticating,\r\n            currentUser: null,\r\n            groupsOfMembership: []\r\n        }\r\n\r\n        try {\r\n            let currentFirebaseUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n            // user is currently signed in with Firebase\r\n            if (currentFirebaseUser) {\r\n                if (successfullyAuthenticated(AuthenticationState)) {\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n            }\r\n            // user is currently not signed in with Firebase\r\n            else {\r\n                if (email === undefined || password === undefined) {\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    authenticationCompleteAction.error = {\r\n                        detail: \"Email and password not provided.\"\r\n                    }\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n\r\n                // set persistence state to SESSION\r\n                await firebase.auth().setPersistence(Firebase.auth.Auth.Persistence.LOCAL);\r\n\r\n                // sign in with Firebase using email and password\r\n                const credential: firebase.default.auth.UserCredential =\r\n                    await firebase.auth().signInWithEmailAndPassword(email, password);\r\n\r\n                currentFirebaseUser = credential.user;\r\n            }\r\n\r\n            if (currentFirebaseUser) {\r\n                const uid: string | undefined = currentFirebaseUser.uid;\r\n\r\n                // get current user profile\r\n                const retrieveUserResponse = await new UserRepository().retrieveUser(uid);\r\n\r\n                const currentUser: User | Admin = retrieveUserResponse.data;\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n                // Check:\r\n                // 1. Super admin must sign in via the dedicated URL.\r\n                // 2. Only super admin can sign in via the dedicated URL.\r\n                let validSuperAdminSignIn: boolean = true;\r\n\r\n                if (Routes.isSuperAdminSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (!(currentAdmin && currentAdmin.superAdmin)) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"You have no privileges to sign in.\"\r\n                        }\r\n                    }\r\n                } else if (Routes.isSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (currentAdmin && currentAdmin.superAdmin) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"Please sign in via your dedicated page.\"\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!validSuperAdminSignIn) {\r\n                    await dispatch(signOut());\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                authenticationCompleteAction.currentUser = currentUser;\r\n\r\n                if (isInvestor(currentUser)) {\r\n                    const selfCertificationResponse = await new InvestorSelfCertificationRepository().getInvestorSelfCertification(currentUser.id);\r\n                    authenticationCompleteAction.selfCertification = selfCertificationResponse.data;\r\n                }\r\n\r\n                // get groups of membership for the current user\r\n                const listGroupsOfMembershipResponse = await new UserRepository().listGroupsOfMembership(uid);\r\n\r\n                authenticationCompleteAction.groupsOfMembership = listGroupsOfMembershipResponse.data;\r\n\r\n                authenticationCompleteAction.status = AuthenticationStatus.Authenticated;\r\n                return dispatch(authenticationCompleteAction);\r\n            } else {\r\n                await dispatch(signOut());\r\n                authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                authenticationCompleteAction.error = {\r\n                    detail: \"Invalid credential.\"\r\n                }\r\n                return dispatch(authenticationCompleteAction);\r\n            }\r\n        } catch (error) {\r\n            await dispatch(signOut());\r\n            authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n            authenticationCompleteAction.error = {\r\n                detail: error.toString()\r\n            }\r\n            return dispatch(authenticationCompleteAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const signOut: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        try {\r\n            await firebase.auth().signOut();\r\n        } catch (error) {\r\n            console.log(`Error signing out: ${error.toString()}`);\r\n        }\r\n        return dispatch({\r\n            type: AuthenticationEvents.SignOut\r\n        });\r\n    }\r\n}\r\n\r\nexport const updateUserChanges: ActionCreator<any> = (updatedUser: User | Admin) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: UpdateUserChangesAction = {\r\n            type: AuthenticationEvents.UpdateUserChanges,\r\n            updatedUser: JSON.parse(JSON.stringify(updatedUser))\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport default class InvestorSelfCertificationRepository {\r\n\r\n    /**\r\n     * Get investor self certification\r\n     *\r\n     * @param userID\r\n     */\r\n    public async getInvestorSelfCertification(userID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.retrieveInvestorSelfCertificationRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: {\r\n                        userID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n}","import User, {ProfileImage, ProfileVideo} from \"../../models/user\";\r\nimport Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface UpdateUserData {\r\n    updatedUser: User;\r\n    newProfilePicture?: ProfileImage;\r\n    newLogo?: ProfileImage;\r\n    newVideo?: ProfileVideo;\r\n    removeProfilePicture?: true;\r\n}\r\n\r\nexport interface SignUpData {\r\n    isPublicRegistration: boolean;\r\n    invitedUserID?: string;\r\n    userProfile: Partial<User>;\r\n    password: string;\r\n    groupID: string;\r\n    acceptMarketingPreferences: boolean;\r\n}\r\n\r\nexport default class UserRepository {\r\n\r\n    /**\r\n     * Sign up\r\n     *\r\n     * @param data\r\n     */\r\n    public async signUp(data: SignUpData) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.createUser,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Retrieve user\r\n     *\r\n     * @param uid\r\n     */\r\n    public async retrieveUser(uid: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.retrieveUser.replace(\":uid\", uid));\r\n    }\r\n\r\n    /**\r\n     * Retrieve invited user\r\n     *\r\n     * @param invitedUserID\r\n     */\r\n    public async retrieveInvitedUser(invitedUserID: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.retrieveInvitedUser.replace(\":invitedUserID\", invitedUserID));\r\n    }\r\n\r\n    /**\r\n     * Update user\r\n     *\r\n     * @param data\r\n     */\r\n    public async updateUser(data: UpdateUserData) {\r\n        return await new Api()\r\n            .request(\r\n                \"put\",\r\n                ApiRoutes.updateUser,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * List groups of membership\r\n     *\r\n     * @param uid\r\n     */\r\n    public async listGroupsOfMembership(uid: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.listGroupsOfMembership.replace(\":uid\", uid));\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport Error from \"../../models/error\";\r\nimport {AppState} from \"../reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\n\r\nexport enum ManageGroupUrlEvents {\r\n    SetGroupUrl = \"ManageGroupUrlEvents.SetGroupUrl\",\r\n    ValidatingGroupUrl = \"ManageGroupUrlEvents.ValidatingGroupUrl\",\r\n    FinishedValidatingGroupUrl = \"ManageGroupUrlEvents.FinishedValidatingGroupUrl\"\r\n}\r\n\r\nexport interface ManageGroupUrlAction extends Action {\r\n    path?: string;\r\n    groupUserName?: string | null;\r\n    group?: GroupProperties | null;\r\n    validGroupUrl?: boolean;\r\n    error?: Error\r\n}\r\n\r\nexport interface SetGroupUrlAction extends ManageGroupUrlAction {\r\n    path: string;\r\n    groupUserName: string | null;\r\n}\r\n\r\nexport interface ValidatingGroupUrlAction extends ManageGroupUrlAction {\r\n}\r\n\r\nexport interface FinishedValidatingGroupUrlAction extends ManageGroupUrlAction {\r\n    group: GroupProperties | null;\r\n    validGroupUrl: boolean;\r\n    error?: Error\r\n}\r\n\r\nexport const validateGroupUrl: ActionCreator<any> = (path: string, groupUserName: string | null) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            routePath,\r\n            groupNameFromUrl,\r\n            group,\r\n            loadingGroup,\r\n            groupLoaded\r\n        } = getState().ManageGroupUrlState;\r\n\r\n        const setGroupUrlAction: SetGroupUrlAction = {\r\n            type: ManageGroupUrlEvents.SetGroupUrl,\r\n            path,\r\n            groupUserName\r\n        }\r\n\r\n        let shouldValidateGroupUrl = false;\r\n\r\n        // routePath or groupNameFromUrl or both of them have not been defined\r\n        if (routePath === undefined || groupNameFromUrl === undefined) {\r\n            shouldValidateGroupUrl = true;\r\n        }\r\n        // routePath and groupNameFromUrl have been defined\r\n        else {\r\n            if (groupNameFromUrl !== groupUserName) {\r\n                shouldValidateGroupUrl = true;\r\n            }\r\n        }\r\n\r\n        // group has not been loaded\r\n        // or group has been loaded but a new group name is set in the url\r\n        // --> continue validating group url\r\n        if ((!group && !loadingGroup && !groupLoaded)\r\n            || (!(!group && !loadingGroup && !groupLoaded) && shouldValidateGroupUrl)\r\n        ) {\r\n            dispatch(setGroupUrlAction);\r\n\r\n            const validatingGroupUrlAction: ValidatingGroupUrlAction = {\r\n                type: ManageGroupUrlEvents.ValidatingGroupUrl\r\n            }\r\n\r\n            dispatch(validatingGroupUrlAction);\r\n\r\n            const finishedLoadingGroupUrlAction: FinishedValidatingGroupUrlAction = {\r\n                type: ManageGroupUrlEvents.FinishedValidatingGroupUrl,\r\n                group: null,\r\n                validGroupUrl: false\r\n            }\r\n\r\n            // group name is not specified in the url\r\n            if (!groupUserName) {\r\n                finishedLoadingGroupUrlAction.validGroupUrl = true;\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            }\r\n\r\n            try {\r\n                const response = await new GroupRepository().getGroup(groupUserName);\r\n                const retrievedGroup: GroupProperties | null = response.data;\r\n                finishedLoadingGroupUrlAction.group = retrievedGroup;\r\n                finishedLoadingGroupUrlAction.validGroupUrl = retrievedGroup !== null;\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            } catch (error) {\r\n                finishedLoadingGroupUrlAction.error = {\r\n                    detail: error.toString()\r\n                }\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            }\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview/lib/index\";\r\nimport {css} from \"aphrodite\";\r\nimport {Divider, List, ListItem, ListItemIcon, ListItemText} from \"@material-ui/core\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport WorkIcon from \"@material-ui/icons/Work\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport ContactSupportIcon from \"@material-ui/icons/ContactSupport\";\r\nimport ArrowLeft from \"@material-ui/icons/SubdirectoryArrowLeft\";\r\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport ProjectIcon from \"@material-ui/icons/CardGiftcard\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as authActions from \"../../redux-store/actions/authActions\";\r\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\r\nimport * as forumsActions from \"../../redux-store/actions/forumsActions\";\r\n\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {signOut} from \"../../redux-store/actions/authenticationActions\";\r\nimport {School} from \"@material-ui/icons\";\r\n\r\nexport const HOME_TAB = \"Home\";\r\nexport const PROFILE_TAB = \"Profile\";\r\nexport const FORUMS_TAB = \"Forums\";\r\nexport const MY_OFFERS_TAB = \"My offers\";\r\n// export const MY_PLEDGES_TAB = \"My pledges\";\r\nexport const SETTINGS_TAB = \"Settings\";\r\nexport const CHANGE_PASSWORD_TAB = \"Change password\";\r\nexport const CONTACT_US_TAB = \"Contact us\";\r\nexport const GUIDELINE_TAB = \"Help\";\r\nexport const RESOURCES_TAB = \"Resources\";\r\nexport const EXPLORE_GROUPS_TAB = \"Explore groups\";\r\nexport const EXPLORE_OFFERS_TAB = \"Explore offers\";\r\nexport const MY_ACTIVITIES_TAB = \"My activities\";\r\nexport const GROUP_ACTIVITIES_TAB = \"Audit Log\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        signOutNew: async () => dispatch(signOut()),\r\n\r\n        logout: () => dispatch(authActions.logout()),\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        goBackToForumsMain: () => dispatch(forumsActions.goBackToForumsMain())\r\n    };\r\n};\r\n\r\nclass SidebarContent extends Component {\r\n\r\n    onLogoutClick = async () => {\r\n        const {\r\n            dashboardProps,\r\n            logout,\r\n\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            signOutNew\r\n        } = this.props;\r\n\r\n        await signOutNew();\r\n        dashboardProps.history.push(Routes.constructHomeRoute(dashboardProps.match.params, ManageGroupUrlState, AuthenticationState));\r\n\r\n        logout(); // logout old\r\n    };\r\n\r\n    onForumsTabClick = () => {\r\n        this.props.toggleSidebar(false);\r\n        this.props.goBackToForumsMain();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n\r\n            user,\r\n            dashboardProps,\r\n\r\n            toggleSidebar\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                width={240}\r\n                height=\"100%\"\r\n            >\r\n                {/** Sidebar header */}\r\n                <FlexView column height={65} vAlignContent=\"center\" hAlignContent=\"center\" style={{ padding: 8 }} >\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                :\r\n                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                        }\r\n                    >\r\n                        <Image\r\n                            style={{ width: \"auto\", height: 65, margin: 0, padding: 10, objectFit: \"scale-down\" }}\r\n                            src={\r\n                                !groupProperties\r\n                                    ?\r\n                                    require('../../img/logo.png').default\r\n                                    :\r\n                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                            }\r\n                        />\r\n                    </NavLink>\r\n                </FlexView>\r\n\r\n                <Divider/>\r\n\r\n                {/** Main navigation */}\r\n                <FlexView column marginTop={10} >\r\n                    {/** Home tab */}\r\n                    <List>\r\n                        <NavLink\r\n                            to={{ pathname: dashboardProps.match.pathname, search: `?tab=${HOME_TAB}` }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                <ListItemIcon>\r\n                                    <HomeIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText className={css(sharedStyles.black_text)}>{HOME_TAB}</ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n\r\n                        {/** Offers table */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                // user.type === DB_CONST.TYPE_INVESTOR\r\n                                //     ?\r\n                                //     <NavLink\r\n                                //         to={{\r\n                                //             pathname: dashboardProps.match.pathname,\r\n                                //             search: `?tab=${MY_PLEDGES_TAB}`\r\n                                //         }}\r\n                                //         className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                //     >\r\n                                //         <ListItem\r\n                                //             button\r\n                                //             onClick={() => toggleSidebar(false)}\r\n                                //         >\r\n                                //             <ListItemIcon>\r\n                                //                 <HowToVoteIcon/>\r\n                                //             </ListItemIcon>\r\n                                //             <ListItemText\r\n                                //                 className={css(sharedStyles.black_text)}\r\n                                //             >\r\n                                //                 {MY_PLEDGES_TAB}\r\n                                //             </ListItemText>\r\n                                //         </ListItem>\r\n                                //     </NavLink>\r\n                                //     :\r\n                                user.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    <NavLink\r\n                                        to={{ pathname: dashboardProps.match.pathname, search: `?tab=${MY_OFFERS_TAB}` }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem\r\n                                            button\r\n                                            onClick={() => toggleSidebar(false)}\r\n                                        >\r\n                                            <ListItemIcon>\r\n                                                <ProjectIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText className={css(sharedStyles.black_text)}>{MY_OFFERS_TAB}</ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                                    :\r\n                                    null\r\n                        }\r\n\r\n                        {/** Explore offers tab */}\r\n                        {\r\n                            user.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${EXPLORE_OFFERS_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <ProjectIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{EXPLORE_OFFERS_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Explore groups tab */}\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${EXPLORE_GROUPS_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                <ListItemIcon>\r\n                                    <BubbleChartIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText className={css(sharedStyles.black_text)}>{EXPLORE_GROUPS_TAB}</ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n\r\n                        {/** Resources */}\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${RESOURCES_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                <ListItemIcon>\r\n                                    <School/>\r\n                                </ListItemIcon>\r\n                                <ListItemText className={css(sharedStyles.black_text)}>{RESOURCES_TAB}</ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n                    </List>\r\n                </FlexView>\r\n\r\n                {/** Footer navigation */}\r\n                <FlexView column height='100%' vAlignContent=\"bottom\" >\r\n                    <List>\r\n                        {/** Profile tab (for normal users) || Settings tab (for admins) */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${PROFILE_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                            <ListItemIcon>\r\n                                                <WorkIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText className={css(sharedStyles.black_text)}>{PROFILE_TAB}</ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                                    :\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${SETTINGS_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                            <ListItemIcon>\r\n                                                <SettingsIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText className={css(sharedStyles.black_text)}>{SETTINGS_TAB}</ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                        }\r\n\r\n                        {/** My/Group activities tab */}\r\n                        {\r\n                            user.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${(user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin) ? GROUP_ACTIVITIES_TAB : MY_ACTIVITIES_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <HistoryIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)} >\r\n                                            {\r\n                                                GROUP_ACTIVITIES_TAB\r\n                                            }\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Change password tab */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${CHANGE_PASSWORD_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <VerifiedUserIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{CHANGE_PASSWORD_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Forums tab */}\r\n                        {/*<NavLink*/}\r\n                        {/*    to={{*/}\r\n                        {/*        pathname: dashboardProps.match.pathname,*/}\r\n                        {/*        search: `?tab=${FORUMS_TAB}`*/}\r\n                        {/*    }}*/}\r\n                        {/*    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}*/}\r\n                        {/*>*/}\r\n                        {/*    <ListItem*/}\r\n                        {/*        button*/}\r\n                        {/*        onClick={this.onForumsTabClick}*/}\r\n                        {/*    >*/}\r\n                        {/*        <ListItemIcon>*/}\r\n                        {/*            <ChatIcon/>*/}\r\n                        {/*        </ListItemIcon>*/}\r\n                        {/*        <ListItemText*/}\r\n                        {/*            className={css(sharedStyles.black_text)}*/}\r\n                        {/*        >*/}\r\n                        {/*            {FORUMS_TAB}*/}\r\n                        {/*        </ListItemText>*/}\r\n                        {/*    </ListItem>*/}\r\n                        {/*</NavLink>*/}\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.CONTACT_US.replace(':groupUserName', groupUserName)\r\n                                            :\r\n                                            ROUTES.CONTACT_US_INVEST_WEST_SUPER\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <ContactSupportIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{CONTACT_US_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Help tab */}\r\n                        {\r\n                            // don't need to show this tab to super admin\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                            && user.superAdmin\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.HELP.replace(':groupUserName', groupUserName)\r\n                                            :\r\n                                            ROUTES.HELP_INVEST_WEST_SUPER\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <InfoIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{GUIDELINE_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Logout tab */}\r\n                        <ListItem button onClick={this.onLogoutClick} >\r\n                            <ListItemIcon>\r\n                                <ArrowLeft/>\r\n                            </ListItemIcon>\r\n                            <ListItemText>Logout</ListItemText>\r\n                        </ListItem>\r\n                    </List>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarContent);","import React, { Component } from 'react';\r\nimport {\r\n    Avatar,\r\n    Typography\r\n} from '@material-ui/core';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class LetterAvatar extends Component {\r\n    render() {\r\n        const {\r\n            firstName,\r\n            lastName,\r\n            width,\r\n            height,\r\n            textVariant\r\n        } = this.props;\r\n\r\n        return (\r\n            <Avatar\r\n                style={{\r\n                    color: colors.white,\r\n                    backgroundColor: this.getBackgroundColor(),\r\n                    width: width,\r\n                    height: height\r\n                }}\r\n            >\r\n                <Typography variant={textVariant}>\r\n                    {`${firstName[0].toUpperCase()}${lastName[0].toUpperCase()}`}\r\n                </Typography>\r\n            </Avatar>\r\n        );\r\n    }\r\n\r\n    getBackgroundColor = () => {\r\n        const { firstName } = this.props;\r\n\r\n        switch (firstName[0].toLowerCase()) {\r\n            case \"a\":\r\n                return colors.background_a;\r\n            case \"b\":\r\n                return colors.background_b;\r\n            case \"c\":\r\n                return colors.background_c;\r\n            case \"d\":\r\n                return colors.background_d;\r\n            case \"e\":\r\n                return colors.background_e;\r\n            case \"f\":\r\n                return colors.background_f;\r\n            case \"g\":\r\n                return colors.background_g;\r\n            case \"h\":\r\n                return colors.background_h;\r\n            case \"i\":\r\n                return colors.background_i;\r\n            case \"j\":\r\n                return colors.background_j;\r\n            case \"k\":\r\n                return colors.background_k;\r\n            case \"l\":\r\n                return colors.background_l;\r\n            case \"m\":\r\n                return colors.background_m;\r\n            case \"n\":\r\n                return colors.background_n;\r\n            case \"o\":\r\n                return colors.background_o;\r\n            case \"p\":\r\n                return colors.background_p;\r\n            case \"q\":\r\n                return colors.background_q;\r\n            case \"r\":\r\n                return colors.background_r;\r\n            case \"s\":\r\n                return colors.background_s;\r\n            case \"t\":\r\n                return colors.background_t;\r\n            case \"u\":\r\n                return colors.background_u;\r\n            case \"v\":\r\n                return colors.background_v;\r\n            case \"w\":\r\n                return colors.background_w;\r\n            case \"x\":\r\n                return colors.background_x;\r\n            case \"y\":\r\n                return colors.background_y;\r\n            case \"z\":\r\n                return colors.background_z;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}","export const JSON_COMPARE_CHANGES_DIALOG_SET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_SET_DATA';\r\nexport const setData = (jsonBefore, jsonAfter) => {\r\n    return {\r\n        type: JSON_COMPARE_CHANGES_DIALOG_SET_DATA,\r\n        jsonBefore,\r\n        jsonAfter\r\n    }\r\n};\r\n\r\nexport const JSON_COMPARE_CHANGES_DIALOG_RESET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_RESET_DATA';\r\nexport const resetData = () => {\r\n    return {\r\n        type: JSON_COMPARE_CHANGES_DIALOG_RESET_DATA\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ReactJson from 'react-json-view';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        dialogOpen: state.manageJSONCompareChangesDialog.dialogOpen,\r\n        jsonBefore: state.manageJSONCompareChangesDialog.jsonBefore,\r\n        jsonAfter: state.manageJSONCompareChangesDialog.jsonAfter\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resetData: () => dispatch(manageJSONCompareChangesActions.resetData())\r\n    }\r\n};\r\n\r\nclass JSONCompareChangesDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n\r\n            dialogOpen,\r\n            jsonBefore,\r\n            jsonAfter,\r\n\r\n            resetData,\r\n\r\n            other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={dialogOpen}\r\n                fullWidth\r\n                maxWidth=\"lg\"\r\n                onClose={resetData}\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <FlexView vAlignContent=\"center\" >\r\n                        <FlexView grow={4} >\r\n                            <Typography variant=\"h5\" color=\"primary\" align=\"left\">Data changes</Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\" >\r\n                            <IconButton onClick={resetData} >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{ marginBottom: 25 }} >\r\n                    <FlexView>\r\n                        <Container fluid style={{ padding: 0 }} >\r\n                            {\r\n                                JSON.stringify(jsonBefore) === JSON.stringify(jsonAfter)\r\n                                    ?\r\n                                    // no data changes\r\n                                    <Row>\r\n                                        <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} >\r\n                                            <FlexView column width=\"100%\" >\r\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>No data changes after this activity</b></Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonBefore}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    // enable clipboard not working\r\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    :\r\n                                    // there are data changes\r\n                                    <Row>\r\n                                        {/** JSON before */}\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            <FlexView column width=\"100%\" >\r\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>Before</b></Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonBefore}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    // enable clipboard not working\r\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n\r\n                                        {/** JSON after */}\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            <FlexView column width=\"100%\" >\r\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>After</b></Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonAfter}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </Container>\r\n                    </FlexView>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JSONCompareChangesDialog);","import * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const ACTIVITIES_TABLE_SET_TABLE_USER = 'ACTIVITIES_TABLE_SET_TABLE_USER';\r\nexport const setTableUser = newUser => {\r\n    return (dispatch, getState) => {\r\n        const prevTableUser = getState().manageActivitiesTable.tableUser;\r\n\r\n        // if user is set to null --> meaning that we're resetting the table\r\n        // if the previous table user is null --> still set the new user\r\n        if (!newUser || !prevTableUser) {\r\n            dispatch({\r\n                type: ACTIVITIES_TABLE_SET_TABLE_USER,\r\n                user: newUser\r\n            });\r\n            return;\r\n        }\r\n\r\n        // previous table user is an actual user of normal users or admins\r\n        if (prevTableUser.hasOwnProperty('id')) {\r\n            // new table user is also an actual user of normal users or admins\r\n            if (newUser.hasOwnProperty('id')) {\r\n                if (prevTableUser.id === newUser.id) {\r\n                    return;\r\n                } else {\r\n                    // set new table user\r\n                }\r\n            }\r\n            // new table user is a groupProperties object\r\n            else {\r\n                // set new table user\r\n            }\r\n        }\r\n        // previous table user is a groupProperties object\r\n        else {\r\n            // new table user is an actual user of normal users or admins\r\n            if (newUser.hasOwnProperty('id')) {\r\n                // set new table user\r\n            }\r\n            // new table user is also a groupProperties object\r\n            else {\r\n                if (prevTableUser.anid === newUser.anid) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: ACTIVITIES_TABLE_SET_TABLE_USER,\r\n            user: newUser\r\n        });\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_LOADING_ACTIVITIES';\r\nexport const ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES';\r\nexport const loadActivities = () => {\r\n    return (dispatch, getState) => {\r\n        const tableUser = getState().manageActivitiesTable.tableUser;\r\n        const currentUser = getState().auth.user;\r\n\r\n        if (!tableUser || !currentUser) {\r\n            dispatch({\r\n                type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                activities: []\r\n            });\r\n            return;\r\n        }\r\n\r\n        // current user is not an admin\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            // and the current user is not the user referenced in the table\r\n            if (tableUser.hasOwnProperty('id') && currentUser.id === tableUser.id) {\r\n                // do nothing as the current user is actually the table user\r\n            } else {\r\n                dispatch({\r\n                    type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                    activities: []\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: ACTIVITIES_TABLE_LOADING_ACTIVITIES\r\n        });\r\n\r\n        // table user is an actual user\r\n        if (tableUser.hasOwnProperty('id')) {\r\n            realtimeDBUtils\r\n                .fetchActivitiesBy({\r\n                    userID: tableUser.id,\r\n                    fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\r\n                })\r\n                .then(activities => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: [...activities]\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: []\r\n                    });\r\n                });\r\n        }\r\n        // table user is a groupProperties object\r\n        else {\r\n            realtimeDBUtils\r\n                .loadGroupAdminsBasedOnGroupID(tableUser.anid)\r\n                .then(groupAdmins => {\r\n\r\n                    let allActivities = [];\r\n\r\n                    Promise.all(\r\n                        groupAdmins.map(groupAdmin => {\r\n                            return new Promise((resolve, reject) => {\r\n                                realtimeDBUtils\r\n                                    .fetchActivitiesBy({\r\n                                        userID: groupAdmin.id,\r\n                                        shouldLoadUserProfile: true,\r\n                                        fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\r\n                                    })\r\n                                    .then(activities => {\r\n                                        allActivities = [...allActivities, ...activities];\r\n                                        return resolve(allActivities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        dispatch({\r\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                            activities: [...allActivities]\r\n                        });\r\n                    }).catch(error => {\r\n                        dispatch({\r\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                            activities: []\r\n                        });\r\n                    });\r\n\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: []\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_PAGE_CHANGED = 'ACTIVITIES_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: ACTIVITIES_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED = 'ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet activitiesListener = null;\r\n\r\nexport const ACTIVITIES_IN_TABLE_CHANGED = 'ACTIVITIES_IN_TABLE_CHANGED';\r\nexport const startListeningForActivitiesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const tableUser = getState().manageActivitiesTable.tableUser;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN && currentUser.id !== tableUser.id) {\r\n            return;\r\n        }\r\n\r\n        if (activitiesListener) {\r\n            return;\r\n        }\r\n\r\n        // table user is an actual user\r\n        if (tableUser.hasOwnProperty('id')) {\r\n            activitiesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n                .orderByChild('userID')\r\n                .equalTo(tableUser.id);\r\n        }\r\n        // table user is a groupProperties object\r\n        else {\r\n            activitiesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n        }\r\n\r\n        activitiesListener\r\n            .on('child_added', snapshot => {\r\n                const activity = snapshot.val();\r\n                let activities = [...getState().manageActivitiesTable.activities];\r\n\r\n                const activityIndex = activities.findIndex(existingActivity => existingActivity.id === activity.id);\r\n                if (activityIndex === -1) {\r\n                    // table user is an actual user\r\n                    if (tableUser.hasOwnProperty('id')) {\r\n                        dispatch({\r\n                            type: ACTIVITIES_IN_TABLE_CHANGED,\r\n                            activities: [...activities, activity]\r\n                        });\r\n                    }\r\n                    // table user is a groupProperties object\r\n                    else {\r\n                        realtimeDBUtils\r\n                            .loadGroupAdminsBasedOnGroupID(tableUser.anid)\r\n                            .then(groupAdmins => {\r\n                                const adminIndex = groupAdmins.findIndex(groupAdmin => groupAdmin.id === activity.userID);\r\n                                if (adminIndex !== -1) {\r\n                                    activity.userProfile = groupAdmins[adminIndex];\r\n                                    dispatch({\r\n                                        type: ACTIVITIES_IN_TABLE_CHANGED,\r\n                                        activities: [...activities, activity]\r\n                                    });\r\n                                }\r\n                            });\r\n                    }\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForActivitiesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (activitiesListener) {\r\n            activitiesListener.off('child_added');\r\n            activitiesListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Table,\r\n    TableHead,\r\n    TableCell,\r\n    TableRow,\r\n    TableBody,\r\n    Typography,\r\n    Paper,\r\n    TablePagination,\r\n    TableFooter,\r\n    Button\r\n} from '@material-ui/core';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport FlexView from 'react-flexview';\r\nimport {HashLoader} from 'react-spinners';\r\nimport {css} from 'aphrodite';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport JSONCompareChangesDialog from './JSONCompareChangesDialog';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        tableUser: state.manageActivitiesTable.tableUser,\r\n        activities: state.manageActivitiesTable.activities,\r\n        activitiesLoaded: state.manageActivitiesTable.activitiesLoaded,\r\n        loadingActivities: state.manageActivitiesTable.loadingActivities,\r\n        page: state.manageActivitiesTable.page,\r\n        rowsPerPage: state.manageActivitiesTable.rowsPerPage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadActivities: () => dispatch(activitiesTableActions.loadActivities()),\r\n        changePage: (event, newPage) => dispatch(activitiesTableActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(activitiesTableActions.changeRowsPerPage(event)),\r\n        startListeningForActivitiesChanged: () => dispatch(activitiesTableActions.startListeningForActivitiesChanged()),\r\n        stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        jsonCompareDialog_setData: (jsonBefore, jsonAfter) => dispatch(manageJSONCompareChangesActions.setData(jsonBefore, jsonAfter))\r\n    }\r\n};\r\n\r\nclass ActivitiesTable extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            tableUser,\r\n\r\n            stopListeningForActivitiesChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if tableUser is set to null\r\n        if (!tableUser || !shouldLoadOtherData) {\r\n            stopListeningForActivitiesChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            tableUser,\r\n            loadingActivities,\r\n            activitiesLoaded,\r\n\r\n            loadActivities\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (tableUser && !loadingActivities && !activitiesLoaded) {\r\n                loadActivities();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            activities,\r\n            activitiesLoaded,\r\n\r\n            startListeningForActivitiesChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (activities && activitiesLoaded) {\r\n                startListeningForActivitiesChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            tableUser,\r\n\r\n            activities,\r\n            page,\r\n            rowsPerPage,\r\n\r\n            changePage,\r\n            changeRowsPerPage\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !tableUser || !currentUser) {\r\n            return null;\r\n        }\r\n\r\n        activities.sort((activity1, activity2) => {\r\n            return activity2.time - activity1.time;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Paper elevation={1} style={{ overflowX: \"auto\" }} >\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={2}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Event</Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Time</Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderTableRows()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[10, 30, 50]}\r\n                                    count={activities.length}\r\n                                    rowsPerPage={rowsPerPage}\r\n                                    page={page}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={changePage}\r\n                                    onChangeRowsPerPage={changeRowsPerPage}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n\r\n                <JSONCompareChangesDialog/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderTableRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            activities,\r\n            activitiesLoaded,\r\n            page,\r\n            rowsPerPage,\r\n\r\n            jsonCompareDialog_setData\r\n        } = this.props;\r\n\r\n        if (activities.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={3} >\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ margin: 20 }} >\r\n                            {\r\n                                activitiesLoaded\r\n                                    ?\r\n                                    <Typography variant=\"body1\" align=\"center\">No activities.</Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            activities.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(activity => (\r\n                    <TableRow key={activity.id} >\r\n                        <TableCell colSpan={2} >\r\n                            {\r\n                                activity.hasOwnProperty('action')\r\n                                    ?\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" >\r\n                                            <NavLink\r\n                                                to={\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${activity.action}`\r\n                                                        :\r\n                                                        activity.action\r\n                                                }\r\n                                                className={css(sharedStyles.nav_link_hover)}\r\n                                                style={{\r\n                                                    color:\r\n                                                        !groupProperties\r\n                                                            ?\r\n                                                            colors.primaryColor\r\n                                                            :\r\n                                                            groupProperties.settings.primaryColor\r\n                                                }}\r\n                                            >\r\n                                                <LinkIcon fontSize=\"small\" style={{ marginRight: 6 }} />\r\n                                                {activity.activitySummary}\r\n                                            </NavLink>\r\n                                        </Typography>\r\n                                        {\r\n                                            !activity.hasOwnProperty('userProfile')\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography\r\n                                                    variant=\"body2\"\r\n                                                    align=\"left\"\r\n                                                    style={{\r\n                                                        marginTop: 7\r\n                                                    }}\r\n                                                >\r\n                                                    <i>_ done by <b>{activity.userProfile.email}</b> _</i>\r\n                                                </Typography>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                !currentUser.superAdmin\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !activity.hasOwnProperty('value')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView marginTop={10} >\r\n                                                            <Button\r\n                                                                variant=\"outlined\"\r\n                                                                color=\"primary\"\r\n                                                                size=\"small\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={\r\n                                                                    () => jsonCompareDialog_setData(\r\n                                                                        activity.value.hasOwnProperty('before')\r\n                                                                            ?\r\n                                                                            activity.value.before\r\n                                                                            :\r\n                                                                            activity.value\r\n                                                                        ,\r\n                                                                        activity.value.hasOwnProperty('after')\r\n                                                                            ?\r\n                                                                            activity.value.after\r\n                                                                            :\r\n                                                                            activity.value\r\n                                                                    )\r\n                                                                }\r\n                                                            >View changes</Button>\r\n                                                        </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                    :\r\n                                    <Typography variant=\"body2\" align=\"left\">{activity.activitySummary}</Typography>\r\n                            }\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" align=\"left\">{utils.dateTimeInReadableFormat(activity.time)}</Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )\r\n            )\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivitiesTable);","import * as myUtils from '../../utils/utils';\r\nimport * as editImageActions from './editImageActions';\r\nimport * as editVideoActions from './editVideoActions';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport {\r\n    UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\r\n    UPLOAD_DONE_MODE,\r\n    UPLOAD_ERROR\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport {UPLOADING} from './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\n\r\nexport const ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED = 'ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED';\r\nexport const REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED = 'REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED';\r\nexport const TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED = 'TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED';\r\n// fields that are used to derive required information for business profile such as postcode search\r\nexport const BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED = 'BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED';\r\nexport const handleTextChanged = (fieldType, event) => {\r\n    return {\r\n        type: fieldType,\r\n        fieldName: event.target.name,\r\n        fieldValue: event.target.value\r\n    }\r\n};\r\n\r\nexport const SEARCHING_REGISTERED_OFFICE_ADDRESSES = 'SEARCHING_REGISTERED_OFFICE_ADDRESSES';\r\nexport const DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES = 'DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES';\r\nexport const SEARCHING_TRADING_ADDRESSES = 'SEARCHING_TRADING_ADDRESSES';\r\nexport const DONE_SEARCHING_TRADING_ADDRESSES = 'DONE_SEARCHING_TRADING_ADDRESSES';\r\nexport const searchAddresses = mode => {\r\n    return (dispatch, getState) => {\r\n        if (mode === SEARCHING_REGISTERED_OFFICE_ADDRESSES) {\r\n            const postcode = getState().createBusinessProfile.registeredOfficeSearchPostcode;\r\n            if (postcode.trim().length === 0) {\r\n                return;\r\n            }\r\n            myUtils\r\n                .findAddress(postcode)\r\n                .then(results => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES,\r\n                        results\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES,\r\n                        results: null\r\n                    });\r\n                });\r\n\r\n        } else if (mode === SEARCHING_TRADING_ADDRESSES) {\r\n            const postcode = getState().createBusinessProfile.tradingAddressSearchPostcode;\r\n            if (postcode.trim().length === 0) {\r\n                return;\r\n            }\r\n            myUtils.findAddress(postcode)\r\n                .then(results => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_TRADING_ADDRESSES,\r\n                        results\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_TRADING_ADDRESSES,\r\n                        results: null\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS = 'SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS';\r\nexport const SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS = 'SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS';\r\nexport const handleRecommendedAddressSelected = (field, index) => {\r\n    return (dispatch, getState) => {\r\n        if (field === SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS) {\r\n            const selectedAddress = getState().createBusinessProfile.registeredOfficeRecommendedAddresses.apiAddresses[index];\r\n            dispatch({\r\n                type: SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS,\r\n                selectedAddress\r\n            });\r\n        } else if (field === SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS) {\r\n            const selectedAddress = getState().createBusinessProfile.tradingAddressRecommendedAddresses.apiAddresses[index];\r\n            dispatch({\r\n                type: SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS,\r\n                selectedAddress\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY = 'TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY';\r\nexport const TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY = 'TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY';\r\nexport const toggleEnterAddressManually = field => {\r\n    if (field === TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY) {\r\n        return {\r\n            type: TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY\r\n        }\r\n    } else if (field === TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY) {\r\n        return {\r\n            type: TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY\r\n        }\r\n    }\r\n};\r\n\r\nexport const TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE = 'TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE';\r\nexport const toggleTradingAddressSameAsRegisteredOffice = checked => {\r\n    return {\r\n        type: TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE,\r\n        checked\r\n    }\r\n};\r\n\r\nexport const CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION = 'CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION';\r\nexport const clearAllFields = () => {\r\n    return {\r\n        type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n    }\r\n};\r\n\r\nexport const TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR = 'TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR';\r\nexport const toggleExpandBusinessProfileFillingForInvestor = () => {\r\n    return {\r\n        type: TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR\r\n    }\r\n};\r\n\r\nexport const uploadBusinessProfile = () => {\r\n    return (dispatch, getState) => {\r\n        const user = Object.assign({}, getState().auth.user);\r\n        const logoToBeUploaded = getState().createBusinessProfile.logoToBeUploaded;\r\n        const videoToBeUploaded = getState().createBusinessProfile.videoToBeUploaded;\r\n        let businessProfile = Object.assign({}, getState().createBusinessProfile.BusinessProfile);\r\n\r\n        // trading address is the same as registered office\r\n        if (getState().createBusinessProfile.tradingAddressSameAsRegisteredOffice) {\r\n            // set trading address to registered office\r\n            businessProfile.tradingAddress = businessProfile.registeredOffice;\r\n        }\r\n\r\n        editImageActions\r\n            .uploadImage(dispatch, user, getState().editImage, logoToBeUploaded)\r\n            .then(() => {\r\n                if (videoToBeUploaded) {\r\n                    editVideoActions\r\n                        .uploadVideo(dispatch, user, getState().editVideo, videoToBeUploaded)\r\n                        .then(() => {\r\n                            putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                            dispatch({\r\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                message: \"Error happened. We couldn't upload your video.\",\r\n                                color: \"error\",\r\n                                position: \"bottom\"\r\n                            });\r\n                        });\r\n                } else {\r\n                    putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your logo.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nconst putBusinessProfileToFirebaseDB = (dispatch, user, businessProfile) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        dispatch({\r\n            type: UPLOADING,\r\n            mode: UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\r\n            progress: 0\r\n        });\r\n\r\n        businessProfile.registeredOffice.postcode = businessProfile.registeredOffice.postcode.toUpperCase();\r\n        businessProfile.tradingAddress.postcode = businessProfile.tradingAddress.postcode.toUpperCase();\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(user.id)\r\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n            .update(businessProfile)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_DONE_MODE,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Your business profile has successfully been uploaded.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                        interactedObjectID: user.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE,\r\n                        value: {\r\n                            ...user,\r\n                            BusinessProfile: {\r\n                                ...businessProfile\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_ERROR,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your business profile.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                return reject(error);\r\n            });\r\n    });\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nexport const SET_ORIGINAL_USER_AND_EDITED_USER = 'SET_ORIGINAL_USER_AND_EDITED_USER';\r\nexport const setOriginalUserAndEditedUser = user => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const previouslySetUser = getState().editUser.originalUser;\r\n\r\n        let allowEditing = true;\r\n\r\n        // user is set to null\r\n        if (!user) {\r\n            dispatch({\r\n                type: SET_ORIGINAL_USER_AND_EDITED_USER,\r\n                user,\r\n                allowEditing\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (previouslySetUser && previouslySetUser.id === user.id) {\r\n            return;\r\n        }\r\n\r\n        if (user.hasOwnProperty('groupsUserIsIn')\r\n            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n            && !currentUser.superAdmin\r\n        ) {\r\n            let userHomeGroup = utils.getUserHomeGroup(user.groupsUserIsIn);\r\n            // userHomeGroup is null --> failed to find user's home group\r\n            // do not let any group admins to edit this user's profile\r\n            if (!userHomeGroup) {\r\n                allowEditing = false;\r\n            }\r\n            // userHomeGroup is not null\r\n            else {\r\n                // this current group admin does not belong to the userHomeGroup\r\n                if (currentUser.anid !== userHomeGroup.anid) {\r\n                    allowEditing = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: SET_ORIGINAL_USER_AND_EDITED_USER,\r\n            user,\r\n            allowEditing\r\n        });\r\n    }\r\n};\r\n\r\nexport const EDIT_PERSONAL_INFORMATION = 'EDIT_PERSONAL_INFORMATION';\r\nexport const EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION = 'EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION';\r\nexport const EDIT_TRADING_ADDRESS_BUSINESS_PROFILE = 'EDIT_TRADING_ADDRESS_BUSINESS_PROFILE';\r\nexport const EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE = 'EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE';\r\nexport const ADDING_NEW_DIRECTOR = 'ADDING_NEW_DIRECTOR';\r\nexport const editUserLocally = (type, edit) => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type,\r\n            edit: {\r\n                property: edit.property,\r\n                value: edit.value\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_ADD_NEW_DIRECTOR = 'TOGGLE_ADD_NEW_DIRECTOR';\r\nexport const toggleAddNewDirector = () => {\r\n    return {\r\n        type: TOGGLE_ADD_NEW_DIRECTOR\r\n    }\r\n};\r\n\r\nexport const ADD_NEW_DIRECTOR_TEMPORARILY = 'ADD_NEW_DIRECTOR_TEMPORARILY';\r\nexport const addNewDirectorTemporarily = isEditingExistingBusinessProfile => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: ADD_NEW_DIRECTOR_TEMPORARILY,\r\n            isEditingExistingBusinessProfile,\r\n            director: getState().editUser.newDirectorText\r\n        });\r\n    }\r\n};\r\n\r\nexport const DELETE_DIRECTOR_TEMPORARILY = 'DELETE_DIRECTOR_TEMPORARILY';\r\nexport const deleteDirectorTemporarily = (index, isEditingExistingBusinessProfile) => {\r\n    return {\r\n        type: DELETE_DIRECTOR_TEMPORARILY,\r\n        index,\r\n        isEditingExistingBusinessProfile\r\n    }\r\n};\r\n\r\nexport const RESET_PERSONAL_INFORMATION = 'RESET_PERSONAL_INFORMATION';\r\nexport const RESET_BUSINESS_PROFILE = 'RESET_BUSINESS_PROFILE';\r\nexport const cancelEditingUser = type => {\r\n    return {\r\n        type\r\n    }\r\n};\r\n\r\nexport const COMMIT_PERSONAL_INFORMATION_CHANGES = 'COMMIT_PERSONAL_INFORMATION_CHANGES';\r\nexport const COMMIT_BUSINESS_PROFILE_CHANGES = 'COMMIT_BUSINESS_PROFILE_CHANGES';\r\nexport const commitUserProfileChanges = type => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const originalUser = JSON.parse(JSON.stringify(getState().editUser.originalUser));\r\n        const userEdited = JSON.parse(JSON.stringify(getState().editUser.userEdited));\r\n\r\n        const userRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(userEdited.id);\r\n\r\n        if (type === COMMIT_PERSONAL_INFORMATION_CHANGES) {\r\n            userRef\r\n                .update({\r\n                    title: userEdited.title,\r\n                    firstName: userEdited.firstName,\r\n                    lastName: userEdited.lastName,\r\n                    email: userEdited.email,\r\n                    linkedin:\r\n                        userEdited.linkedin && userEdited.linkedin.trim().length > 0\r\n                            ?\r\n                            userEdited.linkedin\r\n                            :\r\n                            null\r\n                })\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"User's personal details have been updated.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Your personal details have been updated.\"\r\n                        ,\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                            interactedObjectID: userEdited.id,\r\n                            activitySummary:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS\r\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\r\n                            ,\r\n                            action:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    null\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                            ,\r\n                            value: {\r\n                                before: originalUser,\r\n                                after: userEdited\r\n                            }\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"Error happened. Couldn't update this user's personal details.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Error happened. We couldn't update your personal details.\"\r\n                        ,\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        } else if (type === COMMIT_BUSINESS_PROFILE_CHANGES) {\r\n\r\n            let businessProfile = JSON.parse(JSON.stringify(userEdited.BusinessProfile));\r\n            businessProfile.registeredOffice.postcode = businessProfile.registeredOffice.postcode.toUpperCase();\r\n            businessProfile.tradingAddress.postcode = businessProfile.tradingAddress.postcode.toUpperCase();\r\n\r\n            userRef\r\n                .update({\r\n                    BusinessProfile: businessProfile\r\n                })\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"User's business profile has been updated.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Your business profile has been updated.\"\r\n                        ,\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                            interactedObjectID: userEdited.id,\r\n                            activitySummary:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE\r\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\r\n                            ,\r\n                            action:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    null\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                            ,\r\n                            value: {\r\n                                before: originalUser,\r\n                                after: userEdited\r\n                            }\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"Error happened. Couldn't update this user's business profile.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Error happened. We couldn't update your business profile.\"\r\n                        ,\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    };\r\n};\r\n\r\nlet originalUserListener = null;\r\n\r\nexport const EDIT_USER_ORIGINAL_USER_CHANGED = 'EDIT_USER_ORIGINAL_USER_CHANGED';\r\nexport const startOriginalUserChangedListener = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const originalUser = getState().editUser.originalUser;\r\n\r\n        if (!currentUser || !originalUser) {\r\n            return;\r\n        }\r\n\r\n        // if the current user is the same as the user being edited\r\n        // then we don't need this listener since the current user changes\r\n        // are taken care by the auth actions.\r\n        if (currentUser.id === originalUser.id) {\r\n            return;\r\n        }\r\n\r\n        if (!originalUserListener) {\r\n            originalUserListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(originalUser.id);\r\n\r\n            originalUserListener\r\n                .on('value', snapshot => {\r\n                    let userChanged = snapshot.val();\r\n\r\n                    if (userChanged) {\r\n                        userChanged.groupsUserIsIn = originalUser.groupsUserIsIn;\r\n\r\n                        dispatch({\r\n                            type: EDIT_USER_ORIGINAL_USER_CHANGED,\r\n                            userChanged\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopOriginalUserChangedListener = () => {\r\n    return (dispatch, getState) => {\r\n        if (originalUserListener) {\r\n            originalUserListener.off('value');\r\n            originalUserListener = null;\r\n        }\r\n    }\r\n}","import firebase from '../../firebase/firebaseApp';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {UPLOADING} from './uploadingStatusActions';\r\nimport {\r\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\r\n    UPLOAD_PITCH_COVER_MODE,\r\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\r\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE,\r\n    UPLOAD_ERROR,\r\n    UPLOAD_DONE_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nexport const FILE_UPLOAD_CHANGED = 'FILE_UPLOAD_CHANGED';\r\nexport const handleFilesChanged = (mode, files, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const fileUploadErrorMessage = getState().uploadFiles.fileUploadErrorMessage;\r\n        const fileUploadErrorSnackbarOpen = getState().uploadFiles.fileUploadErrorSnackbarOpen;\r\n\r\n        if (fileUploadErrorMessage.trim().length > 0 || fileUploadErrorSnackbarOpen) {\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n\r\n                    const legalDocuments = getState().uploadFiles.filesToBeUploaded.legalDocuments;\r\n\r\n                    // user is an issuer\r\n                    if (user.type === DB_CONST.TYPE_ISSUER) {\r\n                        if (user.LegalDocuments) {\r\n                            if (legalDocuments.length >=\r\n                                DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER - user.LegalDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                dispatch({\r\n                                    type: FILE_UPLOAD_ERROR,\r\n                                    error: 'Max file count reached'\r\n                                });\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            if (legalDocuments.length >= DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER) {\r\n                                dispatch({\r\n                                    type: FILE_UPLOAD_ERROR,\r\n                                    error: 'Max file count reached'\r\n                                });\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    // user is an investor\r\n                    else if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        if (legalDocuments.length >= 1) {\r\n                            dispatch({\r\n                                type: FILE_UPLOAD_ERROR,\r\n                                error: 'Max file count reached'\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                    break;\r\n                case UPLOAD_PITCH_COVER_MODE:\r\n                    return;\r\n                case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                    return;\r\n                case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                    return;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            dispatch({\r\n                type: FILE_UPLOAD_CHANGED,\r\n                mode,\r\n                fileRead\r\n            });\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    }\r\n};\r\n\r\nexport const FILE_UPLOAD_ERROR = 'FILE_UPLOAD_ERROR';\r\nexport const handleFileError = (error, file) => {\r\n    return (dispatch, getState) => {\r\n        // handle file upload error\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        dispatch({\r\n            type: FILE_UPLOAD_ERROR,\r\n            error: errorMessage\r\n        });\r\n    }\r\n};\r\n\r\nexport const CLOSE_FILE_UPLOAD_ERROR_SNACKBAR = 'CLOSE_FILE_UPLOAD_ERROR_SNACKBAR';\r\nexport const closeErrorSnackbar = () => {\r\n    return {\r\n        type: CLOSE_FILE_UPLOAD_ERROR_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED = 'RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED';\r\nexport const resetErrorMessageWhenSnackbarExited = () => {\r\n    return {\r\n        type: RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED\r\n    }\r\n};\r\n\r\nexport const DELETE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_UPLOADED_LEGAL_DOCUMENT';\r\nexport const DELETE_UPLOADED_PITCH_COVER = 'DELETE_UPLOADED_PITCH_COVER';\r\nexport const DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETED_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\r\nexport const DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\r\nexport const deleteUploadedFile = (mode, index, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n        switch (mode) {\r\n            case DELETE_UPLOADED_LEGAL_DOCUMENT:\r\n                const legalDocumentsUserID = getState().legalDocuments.userID;\r\n                let updateLegalDocuments = [...getState().legalDocuments.legalDocuments];\r\n                updateLegalDocuments[index].removed = true;\r\n                firebase\r\n                    .database()\r\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                    .child(legalDocumentsUserID)\r\n                    .update(updateLegalDocuments);\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_COVER:\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n};\r\n\r\nexport const DELETE_TO_BE_UPLOADED_FILE = 'DELETE_TO_BE_UPLOADED_FILE';\r\nexport const DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_COVER = 'DELETE_TO_BE_UPLOADED_PITCH_COVER';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\r\nexport const deleteToBeUploadedFile = (mode, index) => {\r\n    return (dispatch, getState) => {\r\n\r\n        let updatedFilesToBeUploaded = null;\r\n\r\n        switch (mode) {\r\n            case DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.legalDocuments));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_COVER:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchCover));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments));\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        updatedFilesToBeUploaded.splice(index, 1);\r\n\r\n        dispatch({\r\n            type: DELETE_TO_BE_UPLOADED_FILE,\r\n            mode,\r\n            updatedFilesToBeUploaded\r\n        });\r\n    };\r\n};\r\n\r\nexport const FINISHED_UPLOADING_A_LEGAL_DOCUMENT = 'FINISHED_UPLOADING_A_LEGAL_DOCUMENT';\r\nexport const FINISHED_UPLOADING_A_PITCH_COVER = 'FINISHED_UPLOADING_A_PITCH_COVER';\r\nexport const FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT';\r\nexport const FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT';\r\nexport const FINISHED_UPLOADING_ALL_FILES = 'FINISHED_UPLOADING_ALL_FILES';\r\nexport const uploadFiles = (mode, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n\r\n        let files = [];\r\n\r\n        switch (mode) {\r\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.legalDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        dispatch({\r\n            type: UPLOADING,\r\n            mode,\r\n            progress: 0\r\n        });\r\n\r\n        Promise.all(\r\n            files.map(file => uploadIndividualFile(dispatch, mode, file, files.length, user, project))\r\n        ).then(() => {\r\n            // call this to clear temporarily files\r\n            dispatch({\r\n                type: FINISHED_UPLOADING_ALL_FILES,\r\n                mode,\r\n                waitingForUploadingReferences: true\r\n            });\r\n            putFilesReferencesToDatabase(dispatch, getState, mode, user, project)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: FINISHED_UPLOADING_ALL_FILES,\r\n                        mode,\r\n                        waitingForUploadingReferences: false\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                });\r\n        }).catch(error => {\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100,\r\n                error: error\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Upload a file to Firebase storage\r\n *\r\n * @param dispatch\r\n * @param mode\r\n * @param file: a single file to be uploaded\r\n * @param totalFiles: length of the files array --> calculate percent done\r\n * @param user: set when uploading legal documents\r\n * @param project: set when uploading pitch cover, pitch deck, or pitch supporting documents\r\n */\r\nconst uploadIndividualFile = async (dispatch, mode, file, totalFiles, user = null, project = null) => {\r\n\r\n    let fileRef = firebase.storage();\r\n\r\n    const storageID = utils.getCurrentDate();\r\n    const storageFileName = utils.constructStorageFileName(file, storageID);\r\n\r\n    switch (mode) {\r\n        case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        case UPLOAD_PITCH_COVER_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                .child(`${storageID}.${document.file.extension}`);\r\n            break;\r\n        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        default:\r\n            return;\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const uploadTask = fileRef.put(file.file);\r\n        uploadTask\r\n            .on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    dispatch({\r\n                        type: UPLOADING,\r\n                        mode,\r\n                        progress: progress.toFixed(0)\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask\r\n                    .snapshot\r\n                    .ref\r\n                    .getDownloadURL()\r\n                    .then(fileDownloadURL => {\r\n\r\n                        let percentDone = 0;\r\n\r\n                        switch (mode) {\r\n                            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                                percentDone = 100 / totalFiles;\r\n                                const legalDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: percentDone\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_LEGAL_DOCUMENT,\r\n                                    fileDBRef: legalDocument\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_COVER_MODE:\r\n                                const formattedCover = {\r\n                                    url: fileDownloadURL,\r\n                                    fileType: file.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                    fileExtension: document.file.extension,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: 100\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_COVER,\r\n                                    fileDBRef: formattedCover\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                                const formattedPresentationDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: 100\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT,\r\n                                    fileDBRef: formattedPresentationDocument\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                                percentDone = 100 / totalFiles;\r\n                                const formattedSupportingDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: percentDone\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT,\r\n                                    fileDBRef: formattedSupportingDocument\r\n                                });\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n\r\n                        return resolve();\r\n                    });\r\n            });\r\n    });\r\n};\r\n\r\nconst putFilesReferencesToDatabase = async (dispatch, getState, mode, user = null, project = null) => {\r\n\r\n    let firebaseRef = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        switch (mode) {\r\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                const legalDocumentsUserID = getState().legalDocuments.userID;\r\n                const existingLegalDocuments = getState().legalDocuments.legalDocuments;\r\n\r\n                const filesDBReferences = getState().uploadFiles.filesDBReferences.legalDocuments;\r\n                let filesReferencesToBeUploaded = [];\r\n\r\n                if (existingLegalDocuments) {\r\n                    filesReferencesToBeUploaded = [...existingLegalDocuments, ...filesDBReferences];\r\n                } else {\r\n                    filesReferencesToBeUploaded = filesDBReferences;\r\n                }\r\n\r\n                firebaseRef\r\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                    .child(legalDocumentsUserID)\r\n                    .set(filesReferencesToBeUploaded)\r\n                    .then(() => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_DONE_MODE,\r\n                            progress: 100\r\n                        });\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_ERROR,\r\n                            progress: 100\r\n                        });\r\n                        return reject(error);\r\n                    });\r\n\r\n                break;\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    });\r\n};\r\n\r\n","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LEGAL_DOCUMENTS_SET_USER = 'LEGAL_DOCUMENTS_SET_USER';\r\nexport const setUserID = userID => {\r\n    return {\r\n        type: LEGAL_DOCUMENTS_SET_USER,\r\n        userID\r\n    }\r\n};\r\n\r\nexport const LOADING_LEGAL_DOCUMENTS = 'LOADING_LEGAL_DOCUMENTS';\r\nexport const FINISHED_LOADING_LEGAL_DOCUMENTS = 'FINISHED_LOADING_LEGAL_DOCUMENTS';\r\nexport const getLegalDocuments = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const userID = getState().legalDocuments.userID;\r\n\r\n        dispatch({\r\n            type: LOADING_LEGAL_DOCUMENTS\r\n        });\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n            .child(userID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_LEGAL_DOCUMENTS,\r\n                        legalDocuments: null,\r\n                        error: 'No legal documents'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: FINISHED_LOADING_LEGAL_DOCUMENTS,\r\n                    legalDocuments: snapshot.val()\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nlet legalDocumentsListener = null;\r\n\r\nexport const LEGAL_DOCUMENTS_CHANGED = 'LEGAL_DOCUMENTS_CHANGED';\r\nexport const startListeningForLegalDocumentsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const userID = getState().legalDocuments.userID;\r\n\r\n        if (!legalDocumentsListener) {\r\n            legalDocumentsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                .child(userID);\r\n\r\n            legalDocumentsListener\r\n                .once('value', snapshot => {\r\n                    // user has not uploaded any documents\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        legalDocumentsListener = null;\r\n                        return;\r\n                    }\r\n\r\n                    legalDocumentsListener\r\n                        .on('child_added', snapshot => {\r\n                            let updatedLegalDocuments = Object.assign([], getState().legalDocuments.legalDocuments);\r\n                            if (updatedLegalDocuments.length === 0) {\r\n                                updatedLegalDocuments = [snapshot.val()];\r\n                            }\r\n                            else {\r\n                                const index = updatedLegalDocuments.findIndex(doc => doc.storageID === snapshot.val().storageID);\r\n                                if (index === -1) {\r\n                                    updatedLegalDocuments.push(snapshot.val());\r\n                                }\r\n                            }\r\n\r\n                            dispatch({\r\n                                type: LEGAL_DOCUMENTS_CHANGED,\r\n                                legalDocuments: updatedLegalDocuments\r\n                            });\r\n                        });\r\n\r\n                    legalDocumentsListener\r\n                        .on('child_changed', snapshot => {\r\n                            let updatedLegalDocuments = [...getState().legalDocuments.legalDocuments];\r\n                            updatedLegalDocuments[snapshot.key] = snapshot.val();\r\n\r\n                            dispatch({\r\n                                type: LEGAL_DOCUMENTS_CHANGED,\r\n                                legalDocuments: updatedLegalDocuments\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForLegalDocumentsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (legalDocumentsListener) {\r\n            legalDocumentsListener.off('child_added');\r\n            legalDocumentsListener.off('child_changed');\r\n            legalDocumentsListener = null;\r\n        }\r\n    }\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER';\r\nexport const setUser = (uid) => {\r\n    return (dispatch, getState) => {\r\n        const prevUserID = getState().manageInvestorSelfCertificationAgreement.userID;\r\n        // new userID is the same as the previous set one\r\n        // do nothing\r\n        if (prevUserID === uid) {\r\n            return;\r\n        }\r\n        dispatch({\r\n            type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER,\r\n            uid\r\n        });\r\n    };\r\n};\r\n\r\nexport const LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const loadInvestorSelfCertificationAgreement = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            userID\r\n        } = getState().manageInvestorSelfCertificationAgreement;\r\n\r\n        dispatch({\r\n            type: LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT\r\n        });\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .orderByChild('userID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots || !snapshots.exists()) {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                        result: null\r\n                    });\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                        result: snapshot.val()\r\n                    });\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED';\r\nexport const handleTickBoxChanged = event => {\r\n    return {\r\n        type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const setInvestorSelfCertificationAgreement = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            userID,\r\n            statementType\r\n        } = getState().manageInvestorSelfCertificationAgreement;\r\n\r\n        const id =  firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const agreementObject = {\r\n            id,\r\n            userID: userID,\r\n            agreedDate: utils.getCurrentDate(),\r\n            type: statementType\r\n        };\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .child(id)\r\n            .set(agreementObject)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: userID,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMPLETED_SELF_CERTIFICATION\r\n                    });\r\n\r\n                // update states\r\n                dispatch({\r\n                    type: UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                    agreement: agreementObject\r\n                });\r\n\r\n                // display snackbar to let the user know\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"You have now self certified.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                    agreement: null\r\n                });\r\n\r\n                // display snackbar to let the user know\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your self-certification statement.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED';\r\nexport const handleStatementTypeChanged = event => {\r\n    return {\r\n        type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED,\r\n        event\r\n    }\r\n};","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface FetchGroupsParams {\r\n    groupIds?: string[];\r\n    name?: string;\r\n}\r\n\r\nexport default class GroupRepository {\r\n\r\n    /**\r\n     * Get group\r\n     *\r\n     * @param groupUserName\r\n     */\r\n    public async getGroup(groupUserName: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.retrieveGroup.replace(\":groupUserName\", groupUserName)\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Fetch groups\r\n     *\r\n     * @param params\r\n     */\r\n    public async fetchGroups(params?: FetchGroupsParams) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listGroups,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: params\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Fetch group members\r\n     *\r\n     * @param groupID\r\n     */\r\n    public async fetchGroupMembers(groupID: string | \"system\") {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listGroupMembers.replace(\":group\", groupID)\r\n            );\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport enum FetchProjectsOrderByOptions {\r\n    Visibility = \"visibility\",\r\n    Group = \"group\",\r\n    Investor = \"investor\",\r\n    Issuer = \"issuer\",\r\n    Sector = \"sector\",\r\n    Phase = \"phase\"\r\n}\r\n\r\nexport enum FetchProjectsPhaseOptions {\r\n    Any = \"Any\",\r\n    Live = \"Live\",\r\n    TemporarilyClosed = \"TemporarilyClosed\",\r\n    Successful = \"Successful\",\r\n    Failed = \"Failed\",\r\n    LivePitch = \"LivePitch\",\r\n    ExpiredPitch = \"ExpiredPitch\"\r\n}\r\n\r\nexport interface FetchProjectsOptions {\r\n    search?: string; // filter projects by either name, group name, or issuer company name\r\n    name?: string; // filter projects by name\r\n    visibility?: number | \"all\"; // filter projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n    group?: string | \"all\"; // filter projects by group id\r\n    groupName?: string; // filter projects by group name\r\n    investor?: string | \"all\"; // filter projects by investor id\r\n    issuer?: string | \"all\"; // filter projects by issuer id\r\n    issuerCompanyName?: string; // filter projects by issuer company name\r\n    sector?: string | \"all\"; // filter projects by sector\r\n    phase?: string | number | \"all\"; // filter projects by status\r\n    orderBy?: FetchProjectsOrderByOptions; // mode to use orderByChild\r\n}\r\n\r\nexport default class OfferRepository {\r\n\r\n    /**\r\n     * Fetch offers\r\n     *\r\n     * @param options\r\n     */\r\n    public async fetchOffers(options: FetchProjectsOptions) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listProjectsRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: options\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Export to csv\r\n     *\r\n     * @param options\r\n     */\r\n    public async exportCsv(options?: FetchProjectsOptions) {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            try {\r\n                const response = await new Api()\r\n                    .request(\r\n                        \"get\",\r\n                        ApiRoutes.exportProjectsToCsvRoute,\r\n                        {\r\n                            requestBody: null,\r\n                            queryParameters: options ?? null\r\n                        }\r\n                    );\r\n\r\n                // create a file from the csv returned by the server\r\n                const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\r\n                const link = document.createElement(\"a\");\r\n                if (link.download !== undefined) {\r\n                    // create a download url\r\n                    const url = URL.createObjectURL(blob);\r\n                    link.setAttribute(\"href\", url);\r\n                    link.setAttribute(\"download\", \"offers_data.csv\");\r\n                    link.style.visibility = \"hidden\";\r\n                    document.body.appendChild(link);\r\n                    link.click();\r\n                    document.body.removeChild(link);\r\n                }\r\n                return resolve();\r\n            } catch (error) {\r\n                return reject(error);\r\n            }\r\n        });\r\n    }\r\n}","import GroupProperties from \"../../models/group_properties\";\r\nimport {\r\n    FinishedValidatingGroupUrlAction,\r\n    ManageGroupUrlAction,\r\n    ManageGroupUrlEvents,\r\n    SetGroupUrlAction\r\n} from \"../actions/manageGroupUrlActions\";\r\nimport Error from \"../../models/error\";\r\nimport {colors} from \"@material-ui/core\";\r\nimport {createMuiTheme, responsiveFontSizes, Theme} from \"@material-ui/core/styles\";\r\nimport {defaultTheme} from \"../../App\";\r\n\r\nexport interface ManageGroupUrlState {\r\n    routePath: string | undefined;\r\n    groupNameFromUrl: string | null | undefined;\r\n\r\n    group: GroupProperties | null;\r\n    groupLoaded: boolean;\r\n    loadingGroup: boolean;\r\n\r\n    validGroupUrl: boolean;\r\n\r\n    groupRouteTheme: Theme;\r\n\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ManageGroupUrlState = {\r\n    routePath: undefined,\r\n    groupNameFromUrl: undefined,\r\n\r\n    group: null,\r\n    groupLoaded: false,\r\n    loadingGroup: false,\r\n\r\n    groupRouteTheme: defaultTheme,\r\n\r\n    validGroupUrl: false\r\n};\r\n\r\nexport const isValidatingGroupUrl = (state: ManageGroupUrlState) => {\r\n    return (!state.group && !state.groupLoaded && state.loadingGroup)\r\n        || (!state.group && !state.groupLoaded && !state.loadingGroup);\r\n}\r\n\r\nexport const routeContainsGroupName = (state: ManageGroupUrlState) => {\r\n    return state.groupNameFromUrl !== null;\r\n}\r\n\r\nexport const successfullyValidatedGroupUrl = (state: ManageGroupUrlState) => {\r\n    return state.validGroupUrl && state.error === undefined;\r\n}\r\n\r\nexport const hasGroupValidationError = (state: ManageGroupUrlState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nexport const getGroupRouteTheme = (state: ManageGroupUrlState): Theme => {\r\n    if (state.groupRouteTheme === undefined) {\r\n        return defaultTheme;\r\n    }\r\n    return state.groupRouteTheme;\r\n}\r\n\r\nconst manageGroupUrlReducer = (state: ManageGroupUrlState = initialState, action: ManageGroupUrlAction) => {\r\n    switch (action.type) {\r\n        case ManageGroupUrlEvents.SetGroupUrl:\r\n            const setGroupUrlAction: SetGroupUrlAction = action as SetGroupUrlAction;\r\n            return {\r\n                ...state,\r\n                routePath: setGroupUrlAction.path,\r\n                groupNameFromUrl: setGroupUrlAction.groupUserName\r\n            }\r\n        case ManageGroupUrlEvents.ValidatingGroupUrl:\r\n            return {\r\n                ...state,\r\n                group: null,\r\n                groupLoaded: false,\r\n                loadingGroup: true,\r\n                validGroupUrl: false\r\n            }\r\n        case ManageGroupUrlEvents.FinishedValidatingGroupUrl:\r\n            const finishedValidatingGroupUrlAction: FinishedValidatingGroupUrlAction = action as FinishedValidatingGroupUrlAction;\r\n            return {\r\n                ...state,\r\n                group: finishedValidatingGroupUrlAction.group === null ? null : JSON.parse(JSON.stringify(action.group)),\r\n                groupLoaded: true,\r\n                loadingGroup: false,\r\n                validGroupUrl: finishedValidatingGroupUrlAction.validGroupUrl,\r\n                error: finishedValidatingGroupUrlAction.error,\r\n                groupRouteTheme:\r\n                    finishedValidatingGroupUrlAction.validGroupUrl && finishedValidatingGroupUrlAction.group\r\n                        ?\r\n                        responsiveFontSizes(\r\n                            createMuiTheme({\r\n                                palette: {\r\n                                    primary: {\r\n                                        main: finishedValidatingGroupUrlAction.group.settings.primaryColor\r\n                                    },\r\n\r\n                                    secondary: {\r\n                                        main: finishedValidatingGroupUrlAction.group.settings.secondaryColor\r\n                                    },\r\n\r\n                                    text: {\r\n                                        secondary: colors.blueGrey[\"700\"],\r\n                                    }\r\n                                },\r\n                                typography: {\r\n                                    fontFamily: \"Muli, sans-serif\"\r\n                                }\r\n                            })\r\n                        )\r\n                        :\r\n                        defaultTheme\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageGroupUrlReducer;","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport OfferRepository, {\r\n    FetchProjectsOptions,\r\n    FetchProjectsOrderByOptions\r\n} from \"../../api/repositories/OfferRepository\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\n\r\nexport enum OffersTableEvents {\r\n    SetTableUser = \"OffersTableEvents.SetTableUser\",\r\n    FetchingOffers = \"OffersTableEvents.FetchingOffers\",\r\n    CompleteFetchingOffers = \"OffersTableEvents.CompleteFetchingOffers\",\r\n    FilterChanged = \"OffersTableEvents.FilterChanged\",\r\n    FilterOffersByName = \"OffersTableEvents.FilterOffersByName\",\r\n    CancelFilteringOffersByName = \"OffersTableEvents.CancelFilteringOffersByName\",\r\n    ChangePage = \"OffersTableEvents.ChangePage\",\r\n    ChangeRowsPerPage = \"OffersTableEvents.ChangeRowsPerPage\",\r\n    ExportingCsv = \"OffersTableEvents.ExportingCsv\",\r\n    CompleteExportingCsv = \"OffersTableEvents.CompleteExportingCsv\"\r\n}\r\n\r\nexport interface OffersTableAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetTableUserAction extends OffersTableAction {\r\n    user: User | Admin | undefined;\r\n    groupsOfMembership: GroupOfMembership[] | undefined;\r\n    groupsSelect: GroupProperties[] | undefined;\r\n    error?: string;\r\n}\r\n\r\nexport interface CompleteFetchingOffersAction extends OffersTableAction {\r\n    offerInstances: ProjectInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterOffersByNameAction extends OffersTableAction {\r\n    offerInstances: ProjectInstance[];\r\n    isFilteringByName: boolean;\r\n}\r\n\r\nexport interface FilterChangedAction extends OffersTableAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface ChangePageAction extends OffersTableAction {\r\n    page: number;\r\n}\r\n\r\nexport interface ChangeRowsPerPageAction extends OffersTableAction {\r\n    rowsPerPage: number;\r\n}\r\n\r\nexport interface CompleteExportingCsvAction extends OffersTableAction {\r\n    error?: string;\r\n}\r\n\r\nexport const setUser: ActionCreator<any> = (user?: User | Admin) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentTableUser = getState().OffersTableLocalState.tableUser;\r\n        let shouldSetTableUser: boolean = false;\r\n        if (currentTableUser === undefined) {\r\n            if (user !== undefined) {\r\n                shouldSetTableUser = true;\r\n            }\r\n        } else {\r\n            if (user !== undefined) {\r\n                if (currentTableUser.id !== user.id) {\r\n                    shouldSetTableUser = true;\r\n                }\r\n            } else {\r\n                shouldSetTableUser = true;\r\n            }\r\n        }\r\n\r\n        if (shouldSetTableUser) {\r\n            const action: SetTableUserAction = {\r\n                type: OffersTableEvents.SetTableUser,\r\n                user: user,\r\n                groupsOfMembership: undefined,\r\n                groupsSelect: undefined\r\n            }\r\n\r\n            try {\r\n                if (user) {\r\n                    const groupsOfMembershipResponse = await new Api().request(\"get\",\r\n                        ApiRoutes.listGroupsOfMembership.replace(\":uid\", user.id));\r\n                    const groupsOfMembership: GroupOfMembership[] = groupsOfMembershipResponse.data;\r\n                    action.groupsOfMembership = groupsOfMembership;\r\n\r\n                    const isTableAdminUser: Admin | null = isAdmin(user);\r\n\r\n                    if (isTableAdminUser && isTableAdminUser.superAdmin) {\r\n                        const allGroupsResponse = await new GroupRepository().fetchGroups();\r\n                        action.groupsSelect = allGroupsResponse.data;\r\n                    } else {\r\n                        action.groupsSelect = groupsOfMembership.map(groupOfMembership => groupOfMembership.group);\r\n                    }\r\n                }\r\n                dispatch(action);\r\n                return dispatch(fetchOffers());\r\n            } catch (error) {\r\n                action.error = error.toString();\r\n                return dispatch(action);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const fetchOffers: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            tableUser,\r\n            tableUserGroupsOfMembership,\r\n            visibilityFilter,\r\n            groupFilter,\r\n            phaseFilter\r\n        } = getState().OffersTableLocalState;\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        if (!currentUser || !tableUser) {\r\n            return;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        const fetchOffersOptions: FetchProjectsOptions = {\r\n            visibility: visibilityFilter,\r\n            group: groupFilter,\r\n            phase: phaseFilter\r\n        };\r\n\r\n        const completeAction: CompleteFetchingOffersAction = {\r\n            type: OffersTableEvents.CompleteFetchingOffers,\r\n            offerInstances: []\r\n        }\r\n\r\n        let shouldFetchOffers: boolean = false;\r\n\r\n        // currentUser = tableUser --> issuer/investor/admin is viewing their own offers table\r\n        if (currentUser.id === tableUser.id) {\r\n            shouldFetchOffers = true;\r\n        }\r\n        // currentUser != tableUser --> admin is viewing issuer/investor/admin offers table\r\n        else if (currentAdmin) {\r\n            // super admin is viewing issuer/investor/admin offers table\r\n            if (currentAdmin.superAdmin) {\r\n                shouldFetchOffers = true;\r\n            }\r\n            // group admin is viewing issuer/investor offers table\r\n            else {\r\n                if (tableUserGroupsOfMembership !== undefined\r\n                    && tableUserGroupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === currentAdmin.anid) !== -1\r\n                    && !isAdmin(tableUser)\r\n                ) {\r\n                    shouldFetchOffers = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (shouldFetchOffers) {\r\n            if (isIssuer(tableUser)) {\r\n                fetchOffersOptions.issuer = tableUser.id;\r\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Issuer;\r\n            } else if (isInvestor(tableUser)) {\r\n                fetchOffersOptions.investor = tableUser.id;\r\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Investor;\r\n            } else if (currentAdmin) {\r\n                if (!currentAdmin.superAdmin) {\r\n                    fetchOffersOptions.group = currentAdmin.anid;\r\n                    fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Group;\r\n                }\r\n            } else {\r\n                completeAction.error = \"Invalid user reference.\";\r\n                return dispatch(completeAction);\r\n            }\r\n        } else {\r\n            completeAction.error = \"You don't have privileges to access this data.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        dispatch({\r\n            type: OffersTableEvents.FetchingOffers\r\n        });\r\n\r\n        try {\r\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\r\n            completeAction.offerInstances = response.data;\r\n            dispatch(completeAction);\r\n            return dispatch(filterOffersByName());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: OffersTableEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n        dispatch(action);\r\n        if (name !== \"nameFilter\") {\r\n            dispatch(fetchOffers());\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterOffersByName: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const nameFilter: string = getState().OffersTableLocalState.nameFilter;\r\n        let offerInstances: ProjectInstance[] = [...getState().OffersTableLocalState.offerInstances];\r\n\r\n        const action: FilterOffersByNameAction = {\r\n            type: OffersTableEvents.FilterOffersByName,\r\n            offerInstances: offerInstances,\r\n            isFilteringByName: false\r\n        }\r\n\r\n        if (nameFilter.trim().length > 0) {\r\n            offerInstances = offerInstances.filter(\r\n                offerInstance => offerInstance.projectDetail.projectName?.toLowerCase().includes(nameFilter.toLowerCase())\r\n            );\r\n            action.offerInstances = offerInstances;\r\n            action.isFilteringByName = true;\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const cancelFilteringOffersByName: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: OffersTableEvents.CancelFilteringOffersByName\r\n        });\r\n    }\r\n}\r\n\r\nexport const changePage: ActionCreator<any> = (event: any, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangePageAction = {\r\n            type: OffersTableEvents.ChangePage,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const changeRowsPerPage: ActionCreator<any> = (event: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeRowsPerPageAction = {\r\n            type: OffersTableEvents.ChangeRowsPerPage,\r\n            rowsPerPage: parseInt(event.target.value, 10)\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const exportCsv: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        const exportingCsv = getState().OffersTableLocalState.exportingCsv;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        if (!currentAdmin) {\r\n            return;\r\n        }\r\n\r\n        if (exportingCsv) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: OffersTableEvents.ExportingCsv\r\n        });\r\n\r\n        const completeAction: CompleteExportingCsvAction = {\r\n            type: OffersTableEvents.CompleteExportingCsv\r\n        };\r\n\r\n        try {\r\n            await new OfferRepository().exportCsv(\r\n                currentAdmin.superAdmin\r\n                    ? undefined\r\n                    : {group: currentAdmin.anid, orderBy: FetchProjectsOrderByOptions.Group}\r\n            );\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport React, {FormEvent} from \"react\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\r\nimport OfferRepository, {\r\n    FetchProjectsOptions,\r\n    FetchProjectsOrderByOptions\r\n} from \"../../api/repositories/OfferRepository\";\r\n\r\nexport enum ExploreOffersEvents {\r\n    FetchingOffers = \"ExploreOffersEvents.FetchingOffers\",\r\n    CompleteFetchingOffers = \"ExploreOffersEvents.CompleteFetchingOffers\",\r\n    FilterChanged = \"ExploreOffersEvents.FilterChanged\",\r\n    ClearSearchFilter = \"ExploreOffersEvents.ClearSearchFilter\",\r\n    PaginationChanged = \"ExploreOffersEvents.PaginationChanged\"\r\n}\r\n\r\nexport interface ExploreOffersAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteFetchingOffersAction extends ExploreOffersAction {\r\n    offerInstances: ProjectInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterChangedAction extends ExploreOffersAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface PaginationChangedAction extends ExploreOffersAction {\r\n    page: number;\r\n}\r\n\r\nexport const onSearchEnter: ActionCreator<any> = (event: FormEvent) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        event.preventDefault();\r\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\r\n    }\r\n}\r\n\r\nexport const fetchOffers: ActionCreator<any> = (orderBy?: FetchProjectsOrderByOptions) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            searchFilter,\r\n            visibilityFilter,\r\n            sectorFilter,\r\n            phaseFilter,\r\n            groupFilter\r\n        } = getState().ExploreOffersLocalState;\r\n\r\n        const fetchOffersOptions: FetchProjectsOptions = orderBy === undefined ? {\r\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\r\n            visibility: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? visibilityFilter : undefined,\r\n            group: groupFilter,\r\n            sector: sectorFilter,\r\n            phase: phaseFilter\r\n        } : {\r\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\r\n            visibility: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? visibilityFilter : undefined,\r\n            group: groupFilter,\r\n            sector: sectorFilter,\r\n            phase: phaseFilter,\r\n            orderBy: orderBy\r\n        };\r\n\r\n        dispatch({\r\n            type: ExploreOffersEvents.FetchingOffers\r\n        });\r\n\r\n        const completeAction: CompleteFetchingOffersAction = {\r\n            type: ExploreOffersEvents.CompleteFetchingOffers,\r\n            offerInstances: []\r\n        }\r\n\r\n        try {\r\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\r\n            completeAction.offerInstances = response.data;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: ExploreOffersEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n        dispatch(action);\r\n\r\n        switch (name) {\r\n            case \"searchFilter\":\r\n                return;\r\n            case \"visibilityFilter\":\r\n                if (value === \"all\" || value.toString() === PROJECT_VISIBILITY_PUBLIC.toString() || value.toString() === PROJECT_VISIBILITY_RESTRICTED.toString()) {\r\n                    return dispatch(fetchOffers(FetchProjectsOrderByOptions.Visibility));\r\n                }\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Group));\r\n            case \"sectorFilter\":\r\n                return  dispatch(fetchOffers(FetchProjectsOrderByOptions.Sector));\r\n            case \"phaseFilter\":\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase));\r\n            case \"groupFilter\":\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Group))\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport const clearSearchFilter: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreOffersEvents.ClearSearchFilter\r\n        });\r\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\r\n    }\r\n}\r\n\r\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: PaginationChangedAction = {\r\n            type: ExploreOffersEvents.PaginationChanged,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n","import {\r\n    ChangePageAction,\r\n    ChangeRowsPerPageAction,\r\n    CompleteExportingCsvAction,\r\n    CompleteFetchingOffersAction,\r\n    FilterChangedAction,\r\n    FilterOffersByNameAction,\r\n    OffersTableAction,\r\n    OffersTableEvents,\r\n    SetTableUserAction\r\n} from \"./OffersTableActions\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport interface OffersTableStates {\r\n    offerInstances: ProjectInstance[];\r\n    offerInstancesFilteredByName: ProjectInstance[];\r\n    fetchingOffers: boolean;\r\n    offersFetched: boolean;\r\n\r\n    tableUser?: User | Admin;\r\n    tableUserGroupsOfMembership?: GroupOfMembership[];\r\n\r\n    nameFilter: string;\r\n    visibilityFilter: number | \"all\";\r\n    groupFilter: string | \"all\";\r\n    groupsSelect?: GroupProperties[];\r\n    phaseFilter: string | number | \"all\";\r\n    filteringOffersByName: boolean;\r\n\r\n    currentPage: number;\r\n    rowsPerPage: number;\r\n\r\n    exportingCsv: boolean;\r\n    errorExportingCsv?: Error;\r\n\r\n    error?: Error\r\n}\r\n\r\nconst initialState: OffersTableStates = {\r\n    offerInstances: [],\r\n    offerInstancesFilteredByName: [],\r\n    fetchingOffers: false,\r\n    offersFetched: false,\r\n\r\n    nameFilter: \"\",\r\n    visibilityFilter: \"all\",\r\n    groupFilter: \"all\",\r\n    phaseFilter: \"all\",\r\n    filteringOffersByName: false,\r\n\r\n    currentPage: 0,\r\n    rowsPerPage: 5,\r\n\r\n    exportingCsv: false\r\n}\r\n\r\nexport const isFetchingOffers = (state: OffersTableStates) => {\r\n    return !state.offersFetched && state.fetchingOffers;\r\n}\r\n\r\nexport const successfullyFetchedOffers = (state: OffersTableStates) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const hasOffersForCurrentFilters = (state: OffersTableStates) => {\r\n    return successfullyFetchedOffers(state) && state.offerInstancesFilteredByName.length > 0;\r\n}\r\n\r\nexport const isFilteringOffersByName = (state: OffersTableStates) => {\r\n    return state.filteringOffersByName;\r\n}\r\n\r\nexport const hasErrorFetchingOffers = (state: OffersTableStates) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nexport const isExportingCsv = (state: OffersTableStates) => {\r\n    return state.exportingCsv;\r\n}\r\n\r\nexport const hasErrorExportingCsv = (state: OffersTableStates) => {\r\n    return state.errorExportingCsv !== undefined;\r\n}\r\n\r\nexport const hasGroupsSelect = (state: OffersTableStates) => {\r\n    return state.groupsSelect !== undefined && state.groupsSelect.length > 0;\r\n}\r\n\r\nconst offersTableReducer = (state = initialState, action: OffersTableAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case OffersTableEvents.SetTableUser:\r\n            const setTableUserAction: SetTableUserAction = action as SetTableUserAction;\r\n            return {\r\n                ...initialState,\r\n                tableUser: setTableUserAction.user !== undefined\r\n                    ? JSON.parse(JSON.stringify(setTableUserAction.user))\r\n                    : undefined,\r\n                tableUserGroupsOfMembership: setTableUserAction.groupsOfMembership !== undefined\r\n                    ? [...setTableUserAction.groupsOfMembership]\r\n                    : undefined,\r\n                groupsSelect: setTableUserAction.groupsSelect !== undefined\r\n                    ? [...setTableUserAction.groupsSelect]\r\n                    : undefined,\r\n                error: setTableUserAction.error !== undefined ? {detail: setTableUserAction.error} : state.error,\r\n            }\r\n        case OffersTableEvents.FetchingOffers:\r\n            return {\r\n                ...state,\r\n                offerInstances: [],\r\n                offerInstancesFilteredByName: [],\r\n                fetchingOffers: true,\r\n                offersFetched: false,\r\n                error: undefined\r\n            }\r\n        case OffersTableEvents.CompleteFetchingOffers:\r\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\r\n            return {\r\n                ...state,\r\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\r\n                fetchingOffers: false,\r\n                offersFetched: true,\r\n                currentPage: 0,\r\n                error: completeFetchingOffersAction.error !== undefined\r\n                    ? {detail: completeFetchingOffersAction.error} : state.error\r\n            }\r\n        case OffersTableEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.FilterOffersByName:\r\n            const filterOffersByNameAction: FilterOffersByNameAction = action as FilterOffersByNameAction;\r\n            return {\r\n                ...state,\r\n                offerInstancesFilteredByName: [...filterOffersByNameAction.offerInstances],\r\n                filteringOffersByName: filterOffersByNameAction.isFilteringByName,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.CancelFilteringOffersByName:\r\n            return {\r\n                ...state,\r\n                offerInstancesFilteredByName: [...state.offerInstances],\r\n                nameFilter: \"\",\r\n                filteringOffersByName: false,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.ChangePage:\r\n            const changePageAction: ChangePageAction = action as ChangePageAction;\r\n            return {\r\n                ...state,\r\n                currentPage: changePageAction.page\r\n            }\r\n        case OffersTableEvents.ChangeRowsPerPage:\r\n            const changeRowsPerPageAction: ChangeRowsPerPageAction = action as ChangeRowsPerPageAction;\r\n            return {\r\n                ...state,\r\n                rowsPerPage: changeRowsPerPageAction.rowsPerPage,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.ExportingCsv:\r\n            return {\r\n                ...state,\r\n                exportingCsv: true,\r\n                errorExportingCsv: undefined\r\n            }\r\n        case OffersTableEvents.CompleteExportingCsv:\r\n            const completeExportingCsvAction: CompleteExportingCsvAction = action as CompleteExportingCsvAction;\r\n            return {\r\n                ...state,\r\n                exportingCsv: false,\r\n                errorExportingCsv: completeExportingCsvAction.error !== undefined\r\n                    ? {detail: completeExportingCsvAction.error} : state.errorExportingCsv\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default offersTableReducer;","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\n\r\nexport interface CustomLinkProps {\r\n    url: string;\r\n    target?: string;\r\n    color: string | \"none\";\r\n    activeColor: string | \"none\";\r\n    activeUnderline: boolean;\r\n    component: \"a\" | \"nav-link\";\r\n    childComponent: React.ReactNode;\r\n}\r\n\r\nconst CustomLink = (props: CustomLinkProps) => {\r\n    if (props.component === \"a\") {\r\n        return <a\r\n            href={props.url}\r\n            target={props.target}\r\n            className={css(styles(props).link_style)}\r\n        >\r\n            {props.childComponent}\r\n        </a>;\r\n    }\r\n\r\n    return <NavLink\r\n        to={props.url}\r\n        target={props.target}\r\n        className={css(styles(props).link_style)}\r\n    >\r\n        {props.childComponent}\r\n    </NavLink>;\r\n}\r\n\r\nexport default CustomLink;\r\n\r\nconst styles = (props: CustomLinkProps) => StyleSheet.create({\r\n    link_style: {\r\n        color: props.color,\r\n        ':hover': {\r\n            color: props.activeColor,\r\n            textDecoration: props.activeUnderline ? \"underline\" : \"none\"\r\n        }\r\n    }\r\n});","import * as DB_CONST from \"../firebase/databaseConsts\";\r\nimport {\r\n    FILE_TYPE_IMAGE,\r\n    FILE_TYPE_VIDEO,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../firebase/databaseConsts\";\r\nimport CreatePitchAgreement from \"./create_pitch_agreement\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport User, {isIssuer} from \"./user\";\r\nimport Pledge from \"./pledge\";\r\nimport Admin, {isAdmin} from \"./admin\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\n\r\n/**\r\n * Project interface\r\n */\r\nexport default interface Project {\r\n    id: string;\r\n    anid: string;\r\n    issuerID: string;\r\n    visibility: number;\r\n    status: number;\r\n    projectName?: string; // optional for draft projects only\r\n    description?: string; // optional for draft projects only\r\n    sector?: string; // optional for draft projects only\r\n    edited?: number;\r\n    temporarilyClosed?: boolean;\r\n\r\n    /**\r\n     * This field contains the user id of the group admin who\r\n     * - created the project on their own\r\n     *      --> [issuerID] = user id of the group admin as well\r\n     *\r\n     * - created the project on behalf of an issuer\r\n     *      --> [issuerID] = user id of the issuer whom the group admin created the project for\r\n     */\r\n    createdByGroupAdmin?: string;\r\n\r\n    Pitch: ProjectPitch;\r\n    PrimaryOffer?: ProjectPledge;\r\n\r\n    createPitchAgreement?: CreatePitchAgreement | null\r\n}\r\n\r\n/**\r\n * Instance of project at load time that contains extra information from other collections\r\n */\r\nexport interface ProjectInstance {\r\n    projectDetail: Project;\r\n    group: GroupProperties;\r\n    issuer: User | Admin;\r\n    pledges: Pledge[];\r\n    rejectFeedbacks: ProjectRejectFeedback[];\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a project in csv\r\n */\r\nexport interface ProjectCsv {\r\n    visibility: \"public\" | \"restricted\" | \"private\";\r\n    projectName: string | undefined;\r\n    description: string | undefined;\r\n    sector: string | undefined;\r\n    postedDate: number | undefined; // = pitch postedDate\r\n    financialRound: string | undefined; // = pitch financialRound\r\n    howFundIsBeingRaised: string | undefined; // = pitch howFundIsBeingRaised\r\n\r\n    amountRaised: number | undefined; // = pitch amountRaised\r\n    detailsAboutEarlierFundraisingRounds: string | undefined; // = pitch detailsAboutEarlierFundraisingRounds\r\n    investorsCommitted: string | undefined; // = pitch investorsCommitted\r\n    fundRequired: number | undefined; // = pitch fundRequired\r\n    postMoneyValuation: number | undefined;\r\n    coverURL: string | undefined; // = active pitch cover\r\n    mainDocument: string | undefined; // = active pitch presentationDocument\r\n    mainText: string | undefined; // = pitch presentationPlainText\r\n    supportingDocuments: string | undefined; // = active pitch supportingDocuments\r\n\r\n    pitchExpiryDate: string | undefined; // = pitch expiredDate\r\n\r\n    pledgeExpiryDate: string | undefined; // = pledge expiredDate\r\n\r\n    // this field is only available for QIB group\r\n    qibSpecialNews?: string | undefined; // = pitch qibSpecialNews\r\n\r\n    agreedToShareRaisePublicly?: \"yes\" | \"no\" | undefined;\r\n}\r\n\r\n/**\r\n * Project - pitch interface\r\n */\r\nexport interface ProjectPitch {\r\n    postedDate: number;\r\n    status: number;\r\n    amountRaised?: number;\r\n    fundRequired?: number;\r\n    totalRaise?: number;\r\n    expiredDate?: number;\r\n    cover?: PitchCover[];\r\n    postMoneyValuation?: number;\r\n    detailsAboutEarlierFundraisingRounds?: string;\r\n    investorsCommitted?: string;\r\n    financialRound?: string;\r\n    howFundIsBeingRaised?: string;\r\n    presentationDocument?: PitchDocument[];\r\n    supportingDocuments?: PitchDocument[];\r\n    presentationText?: any;\r\n    presentationPlainText?: string; // a text-only version of the presentationText which is a Quill object\r\n\r\n    /**\r\n     * This field is only available for QIB\r\n     */\r\n    qibSpecialNews?: string;\r\n}\r\n\r\n/**\r\n * Project - pledge interface\r\n */\r\nexport interface ProjectPledge {\r\n    expiredDate: number;\r\n    status: number;\r\n    extraNotes?: string;\r\n    postMoneyValuation?: number;\r\n}\r\n\r\n/**\r\n * Project reject feedback\r\n */\r\nexport interface ProjectRejectFeedback {\r\n    projectID: string;\r\n    sentBy: string;\r\n    date: number;\r\n    feedback: string;\r\n}\r\n\r\n/**\r\n * Project - pitch cover interface\r\n */\r\nexport interface PitchCover {\r\n    fileExtension: string;\r\n    fileType: number;\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Project - pitch document interface\r\n */\r\nexport interface PitchDocument {\r\n    fileName: string;\r\n    readableSize: string;\r\n    storageID: number;\r\n    downloadURL: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = (project: Project) => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a draft project to submitted to the group admin for review\r\n *\r\n * @param project\r\n */\r\nexport const isDraftProjectNotSubmitted = (project: Project) => {\r\n    return isDraftProject(project) && project.Pitch.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n}\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = (project: Project) => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = (project: Project) => {\r\n    return project.temporarilyClosed !== undefined && project.temporarilyClosed;\r\n};\r\n\r\n/**\r\n * Check if a project has reject feedbacks\r\n *\r\n * @param projectInstance\r\n */\r\nexport const doesProjectHaveRejectFeedbacks = (projectInstance: ProjectInstance) => {\r\n    return projectInstance.rejectFeedbacks.length > 0;\r\n}\r\n\r\n/**\r\n * Check if a project is created by an admin\r\n *\r\n * @param project\r\n */\r\nexport const isProjectCreatedByGroupAdmin = (project: Project) => {\r\n    return project.createdByGroupAdmin !== undefined && project.createdByGroupAdmin !== null;\r\n}\r\n\r\n/**\r\n * Set a project to draft\r\n *\r\n * @param project\r\n */\r\nexport const setProjectToDraft = (project: Project): Project => {\r\n    project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n    project.status = DB_CONST.PROJECT_STATUS_DRAFT;\r\n    return project;\r\n}\r\n\r\nexport const getPitchCover = (project: Project) => {\r\n    if (project.Pitch.cover === undefined) {\r\n        return null;\r\n    }\r\n    const index = project.Pitch.cover.findIndex(cover => cover.removed === undefined || !cover.removed);\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return project.Pitch.cover[index];\r\n}\r\n\r\nexport const isImagePitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_IMAGE;\r\n}\r\n\r\nexport const isVideoPitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_VIDEO;\r\n}\r\n\r\nexport const isProjectPublic = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PUBLIC;\r\n}\r\n\r\nexport const isProjectRestricted = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_RESTRICTED;\r\n}\r\n\r\nexport const isProjectPrivate = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PRIVATE;\r\n}\r\n\r\n/**\r\n * Should hide project information from a user\r\n *\r\n * --> true: hide\r\n * --> false: not hide\r\n *\r\n * @param user\r\n * @param groupsOfMembership\r\n * @param project\r\n */\r\nexport const shouldHideProjectInformationFromUser = (user: User | Admin, groupsOfMembership: GroupOfMembership[], project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // user is an admin\r\n    if (admin) {\r\n        // user is a super admin\r\n        if (admin.superAdmin) {\r\n            return false;\r\n        }\r\n\r\n        // user is a group admin and is the group that owns the project\r\n        if (admin.anid === project.anid) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n    // user is not an admin\r\n    else {\r\n        // should not hide any information if the user is an issuer that created this offer\r\n        if (isIssuer(user) && user.id === project.issuerID) {\r\n            return false;\r\n        }\r\n\r\n        // user is a member of the group that owns this offer\r\n        if (groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === project.anid) !== -1) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Check if a user is the owner of a project\r\n *\r\n * @param user\r\n * @param project\r\n */\r\nexport const isProjectOwner = (user: User | Admin, project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // super admin does not own a project\r\n    if (admin && admin.superAdmin) {\r\n        return false;\r\n    }\r\n\r\n    if (admin) {\r\n        return admin.anid === project.anid;\r\n    } else {\r\n        return user.id === project.issuerID;\r\n    }\r\n}","import colorString from \"color-string\";\r\n\r\nexport const toRGBWithOpacity = (color: string, opacity?: number) => {\r\n    const rgbColor: colorString.Color | null = colorString.get.rgb(color);\r\n    if (!rgbColor) {\r\n        return color;\r\n    }\r\n    return colorString.to.hex(rgbColor[0], rgbColor[1], rgbColor[2], opacity === undefined ? 1.0 : opacity);\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    colors,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Close, CreateOutlined, ImportExportOutlined, Refresh, Search} from \"@material-ui/icons\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    hasErrorExportingCsv,\r\n    hasErrorFetchingOffers,\r\n    hasGroupsSelect,\r\n    hasOffersForCurrentFilters,\r\n    isExportingCsv,\r\n    isFetchingOffers,\r\n    isFilteringOffersByName,\r\n    OffersTableStates,\r\n    successfullyFetchedOffers\r\n} from \"./OffersTableReducer\";\r\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    cancelFilteringOffersByName,\r\n    changePage,\r\n    changeRowsPerPage,\r\n    exportCsv,\r\n    fetchOffers,\r\n    filterChanged,\r\n    filterOffersByName,\r\n    setUser\r\n} from \"./OffersTableActions\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport Routes from \"../../router/routes\";\r\nimport {dateInReadableFormat, isProjectInLivePitchPhase} from \"../../utils/utils\";\r\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {\r\n    PROJECT_STATUS_BEING_CHECKED,\r\n    PROJECT_STATUS_DRAFT,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../../firebase/databaseConsts\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\ninterface OffersTableProps {\r\n    // table user set by passing this prop to the OffersTable component when used\r\n    directTableUser?: User | Admin;\r\n\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    OffersTableLocalState: OffersTableStates;\r\n    setUser: (user?: User | Admin) => any;\r\n    fetchOffers: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterOffersByName: () => any;\r\n    cancelFilteringOffersByName: () => any;\r\n    changePage: (event: any, page: number) => any;\r\n    changeRowsPerPage: (event: any) => any;\r\n    exportCsv: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        OffersTableLocalState: state.OffersTableLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        setUser: (user?: User | Admin) => dispatch(setUser(user)),\r\n        fetchOffers: () => dispatch(fetchOffers()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterOffersByName: () => dispatch(filterOffersByName()),\r\n        cancelFilteringOffersByName: () => dispatch(cancelFilteringOffersByName()),\r\n        changePage: (event: any, page: number) => dispatch(changePage(event, page)),\r\n        changeRowsPerPage: (event: any) => dispatch(changeRowsPerPage(event)),\r\n        exportCsv: () => dispatch(exportCsv())\r\n    }\r\n}\r\n\r\nclass OffersTable extends Component<OffersTableProps, any> {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            directTableUser,\r\n            AuthenticationState,\r\n            setUser\r\n        } = this.props;\r\n        setUser(directTableUser ?? AuthenticationState.currentUser ?? undefined);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            OffersTableLocalState,\r\n            fetchOffers,\r\n            filterChanged,\r\n            filterOffersByName,\r\n            cancelFilteringOffersByName,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            exportCsv\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentUser: User | Admin = AuthenticationState.currentUser;\r\n        const tableUser: User | Admin | undefined = OffersTableLocalState.tableUser;\r\n\r\n        if (!currentUser || !tableUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n        const tableAdmin: Admin | null = isAdmin(tableUser);\r\n\r\n        return <TableContainer\r\n            component={Paper}\r\n        >\r\n            <Table\r\n                color=\"black\"\r\n            >\r\n                {/** Table header */}\r\n                <TableHead>\r\n                    {/** Export csv button (only available for admin */}\r\n                    {\r\n                        !(currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\r\n                            ? null\r\n                            : <TableRow>\r\n                                <TableCell colSpan={5} >\r\n                                    <Box>\r\n                                        <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => exportCsv()} >\r\n                                            <ImportExportOutlined fontSize=\"small\" />\r\n                                            <Box width=\"10px\" />\r\n                                            {\r\n                                                isExportingCsv(OffersTableLocalState)\r\n                                                    ? \"Exporting ...\"\r\n                                                    : \"Export csv\"\r\n                                            }\r\n                                        </Button>\r\n\r\n                                        {\r\n                                            !hasErrorExportingCsv(OffersTableLocalState)\r\n                                                ? null\r\n                                                : <Box marginTop=\"12px\" >\r\n                                                    <Typography variant=\"body2\" color=\"error\" >\r\n                                                        {`${OffersTableLocalState.errorExportingCsv?.detail}. Please retry.`}\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                        }\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                    }\r\n\r\n                    {/** Create new offer button (only available for issuers and admins) */}\r\n                    {\r\n                        isInvestor(currentUser) || (currentAdmin && currentAdmin.superAdmin)\r\n                            ? null\r\n                            : <TableRow>\r\n                                <TableCell\r\n                                    colSpan={5}\r\n                                >\r\n                                    <CustomLink\r\n                                        url={\r\n                                            isIssuer(currentUser) || (currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\r\n                                                // issuer creates offer for themselves\r\n                                                // group admin creates offer for their own group\r\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)\r\n                                                : (currentAdmin && isIssuer(tableUser))\r\n                                                // group admin creates offer for an issuer in their group\r\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {\r\n                                                    admin: currentAdmin.id,\r\n                                                    issuer: tableUser.id\r\n                                                })\r\n                                                : \"\"\r\n                                        }\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} >\r\n                                                <CreateOutlined fontSize=\"small\" />\r\n                                                <Box width=\"10px\" /> Create new offer\r\n                                            </Button>\r\n                                        }\r\n                                    />\r\n                                </TableCell>\r\n                            </TableRow>\r\n                    }\r\n\r\n                    {/** Search offer by name + refresh button */}\r\n                    <TableRow>\r\n                        <TableCell colSpan={5} >\r\n                            <Row>\r\n                                {/** Search by name field */}\r\n                                <Col xs={11} sm={11} md={8} lg={6} >\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        height=\"100%\"\r\n                                        alignItems=\"center\"\r\n                                        bgcolor={\r\n                                            !isFilteringOffersByName(OffersTableLocalState)\r\n                                                ? colors.grey[\"200\"]\r\n                                                : toRGBWithOpacity(getGroupRouteTheme(ManageGroupUrlState).palette.primary.main, 0.18)\r\n                                        }\r\n                                        borderRadius=\"10px\"\r\n                                    >\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            name=\"nameFilter\"\r\n                                            value={OffersTableLocalState.nameFilter}\r\n                                            placeholder=\"Search offer by name\"\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                            startAdornment={\r\n                                                <InputAdornment\r\n                                                    position=\"start\"\r\n                                                >\r\n                                                    <IconButton\r\n                                                        onClick={() => filterOffersByName()}\r\n                                                        disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                                    >\r\n                                                        <Search fontSize=\"small\"/>\r\n                                                    </IconButton>\r\n                                                </InputAdornment>\r\n                                            }\r\n                                            endAdornment={\r\n                                                !isFilteringOffersByName(OffersTableLocalState)\r\n                                                    ? null\r\n                                                    : <InputAdornment\r\n                                                        position=\"end\"\r\n                                                    >\r\n                                                        <IconButton onClick={() => cancelFilteringOffersByName()} >\r\n                                                            <Close fontSize=\"small\"/>\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                            }\r\n                                        />\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Refresh button */}\r\n                                <Col xs={1} sm={1} md={4} lg={6} >\r\n                                    <Box display=\"flex\" height=\"100%\" justifyContent=\"flex-end\" alignItems=\"center\" >\r\n                                        <IconButton onClick={() => fetchOffers()} disabled={!successfullyFetchedOffers(OffersTableLocalState)} >\r\n                                            <Refresh/>\r\n                                        </IconButton>\r\n                                    </Box>\r\n                                </Col>\r\n                            </Row>\r\n                        </TableCell>\r\n                    </TableRow>\r\n\r\n                    {/** Filters */}\r\n                    <TableRow>\r\n                        <TableCell colSpan={5} >\r\n                            <Row>\r\n                                {/** Visibility filter */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <Box paddingY=\"4px\" >\r\n                                        <Typography variant=\"body2\" >Visibility:</Typography>\r\n                                        <Box\r\n                                            height=\"8px\"\r\n                                        />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"visibilityFilter\"\r\n                                            value={OffersTableLocalState.visibilityFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                            <MenuItem key={PROJECT_VISIBILITY_PUBLIC} value={PROJECT_VISIBILITY_PUBLIC}>Public</MenuItem>\r\n                                            <MenuItem key={PROJECT_VISIBILITY_RESTRICTED} value={PROJECT_VISIBILITY_RESTRICTED}>Restricted</MenuItem>\r\n                                            <MenuItem key={PROJECT_VISIBILITY_PRIVATE} value={PROJECT_VISIBILITY_PRIVATE}>Private</MenuItem>\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Group filter */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <Box paddingY=\"4px\" >\r\n                                        <Typography variant=\"body2\" >Group:</Typography>\r\n                                        <Box height=\"8px\" />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"groupFilter\"\r\n                                            value={OffersTableLocalState.groupFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                            {\r\n                                                !hasGroupsSelect(OffersTableLocalState)\r\n                                                || !OffersTableLocalState.groupsSelect\r\n                                                    ? null\r\n                                                    : OffersTableLocalState.groupsSelect.map(group =>\r\n                                                        <MenuItem\r\n                                                            key={group.anid}\r\n                                                            value={group.anid}\r\n                                                        >\r\n                                                            {group.displayName}\r\n                                                        </MenuItem>\r\n                                                    )\r\n                                            }\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Phase (status) filter */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <Box paddingY=\"4px\" >\r\n                                        <Typography variant=\"body2\">Status:</Typography>\r\n                                        <Box height=\"8px\" />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"phaseFilter\"\r\n                                            value={OffersTableLocalState.phaseFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                            <MenuItem key={FetchProjectsPhaseOptions.LivePitch} value={FetchProjectsPhaseOptions.LivePitch}>Live</MenuItem>\r\n                                            <MenuItem key={PROJECT_STATUS_BEING_CHECKED} value={PROJECT_STATUS_BEING_CHECKED} >Submitted - awaiting review</MenuItem>\r\n                                            <MenuItem key={FetchProjectsPhaseOptions.TemporarilyClosed} value={FetchProjectsPhaseOptions.TemporarilyClosed}>Temporarily closed</MenuItem>\r\n                                            <MenuItem key={FetchProjectsPhaseOptions.ExpiredPitch} value={FetchProjectsPhaseOptions.ExpiredPitch}>Expired</MenuItem>\r\n                                            <MenuItem key={PROJECT_STATUS_DRAFT} value={PROJECT_STATUS_DRAFT} >Draft</MenuItem>\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n                            </Row>\r\n                        </TableCell>\r\n                    </TableRow>\r\n\r\n                    {/** Column headers */}\r\n                    <TableRow>\r\n                        <TableCell colSpan={2} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Project</Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Goal</Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Posted / expiry dates</Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Status</Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n\r\n                {/** Table body */}\r\n                <TableBody>\r\n                    {\r\n                        // Fetching offers\r\n                        isFetchingOffers(OffersTableLocalState)\r\n                            ? <TableRow>\r\n                                <TableCell colSpan={5} >\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\r\n                                        <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                            // Error setting table user / fetching offers\r\n                            : hasErrorFetchingOffers(OffersTableLocalState)\r\n                            ? <TableRow>\r\n                                <TableCell colSpan={5} >\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\r\n                                        <Typography variant=\"h6\" align=\"center\" color=\"error\">Error. Please retry.</Typography>\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                            // Not successfully fetching offers\r\n                            : !successfullyFetchedOffers(OffersTableLocalState)\r\n                                ? null\r\n                                // No offers available for current filters\r\n                                : !hasOffersForCurrentFilters(OffersTableLocalState)\r\n                                    ? <TableRow>\r\n                                        <TableCell colSpan={5} >\r\n                                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\r\n                                                <Typography variant=\"h6\" align=\"center\" >There are no offers available using your current filter criteria.</Typography>\r\n                                            </Box>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                    // Render offers\r\n                                    : OffersTableLocalState.offerInstancesFilteredByName\r\n                                        .slice(OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage, OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage + OffersTableLocalState.rowsPerPage)\r\n                                        .map(\r\n                                            offerInstance => <TableRow\r\n                                                key={offerInstance.projectDetail.id}\r\n                                                hover\r\n                                            >\r\n                                                {/** Offer name */}\r\n                                                <TableCell colSpan={2} >\r\n                                                    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" >\r\n                                                        {/** Visibility + Name */}\r\n                                                        <Box display=\"flex\" flexDirection=\"row\" >\r\n                                                            {\r\n                                                                isProjectPublic(offerInstance.projectDetail)\r\n                                                                    ? <PublicIcon fontSize=\"small\"/>\r\n                                                                    : isProjectRestricted(offerInstance.projectDetail)\r\n                                                                    ? <RestrictedIcon fontSize=\"small\"/>\r\n                                                                    : <PrivateIcon fontSize=\"small\"/>\r\n                                                            }\r\n                                                            <Box width=\"15px\" />\r\n                                                            <CustomLink\r\n                                                                url={\r\n                                                                    isDraftProject(offerInstance.projectDetail)\r\n                                                                        ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\r\n                                                                        : Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)\r\n                                                                }\r\n                                                                target={\r\n                                                                    isDraftProject(offerInstance.projectDetail)\r\n                                                                        ? \"_blank\"\r\n                                                                        : \"\"\r\n                                                                }\r\n                                                                color=\"black\"\r\n                                                                activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                                activeUnderline={false}\r\n                                                                component=\"nav-link\"\r\n                                                                childComponent={\r\n                                                                    <Typography\r\n                                                                        variant=\"body2\"\r\n                                                                        align=\"left\"\r\n                                                                    >\r\n                                                                        {offerInstance.projectDetail.projectName ?? \"\"}\r\n                                                                    </Typography>\r\n                                                                }\r\n                                                            />\r\n                                                        </Box>\r\n\r\n                                                        {/** Created by (not available for issuers who are looking at their own offers table) */}\r\n                                                        {\r\n                                                            isIssuer(currentUser)\r\n                                                            && OffersTableLocalState.tableUser !== undefined\r\n                                                            && currentUser.id === OffersTableLocalState.tableUser.id\r\n                                                                ? null\r\n                                                                : <Box marginTop=\"10px\" >\r\n                                                                    <Typography variant=\"body2\" align=\"left\" color=\"textSecondary\" >\r\n                                                                        <i>\r\n                                                                            {\r\n                                                                                offerInstance.projectDetail.createdByGroupAdmin\r\n                                                                                    ? `Created by ${offerInstance.group.displayName} admin`\r\n                                                                                    : `Created by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                                            }\r\n                                                                        </i>\r\n                                                                    </Typography>\r\n                                                                </Box>\r\n                                                        }\r\n\r\n                                                        {/** Edit button (only available for draft project) */}\r\n                                                        {\r\n                                                            isInvestor(currentUser)\r\n                                                                ? null\r\n                                                                : !isDraftProject(offerInstance.projectDetail)\r\n                                                                ? null\r\n                                                                : <Box marginTop=\"18px\" >\r\n                                                                    <CustomLink\r\n                                                                        url={\r\n                                                                            Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\r\n                                                                        }\r\n                                                                        target=\"_blank\"\r\n                                                                        color=\"none\"\r\n                                                                        activeColor=\"none\"\r\n                                                                        activeUnderline={false}\r\n                                                                        component=\"nav-link\"\r\n                                                                        childComponent={\r\n                                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} >\r\n                                                                                <CreateOutlined fontSize=\"small\" />\r\n                                                                                <Box width=\"8px\" />\r\n                                                                                Edit\r\n                                                                            </Button>\r\n                                                                        }\r\n                                                                    />\r\n                                                                </Box>\r\n                                                        }\r\n                                                    </Box>\r\n                                                </TableCell>\r\n\r\n                                                {/** Goal */}\r\n                                                <TableCell colSpan={1} >\r\n                                                    <Typography variant=\"body2\" align=\"left\" >\r\n                                                        {\r\n                                                            !offerInstance.projectDetail.Pitch.fundRequired\r\n                                                                ? \"\"\r\n                                                                : `${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(0)).toLocaleString()}`\r\n                                                        }\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n\r\n                                                {/** Posted / expiry dates */}\r\n                                                <TableCell colSpan={1} >\r\n                                                    <Box display=\"flex\" flexDirection=\"column\" >\r\n                                                        <Typography variant=\"body2\" align=\"left\" >\r\n                                                            {`Posted date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.postedDate)}`}\r\n                                                        </Typography>\r\n                                                        <Box height=\"12px\" />\r\n                                                        <Typography variant=\"body2\" align=\"left\" >\r\n                                                            {\r\n                                                                !offerInstance.projectDetail.Pitch.expiredDate\r\n                                                                    ? \"Expiry date: unknown\"\r\n                                                                    : `Expiry date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.expiredDate)}`\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                </TableCell>\r\n\r\n                                                {/** Status */}\r\n                                                <TableCell colSpan={1} >\r\n                                                    <Typography variant=\"body2\" align=\"left\" >\r\n                                                        {\r\n                                                            isDraftProject(offerInstance.projectDetail)\r\n                                                                ? \"Draft\"\r\n                                                                : isProjectWaitingToGoLive(offerInstance.projectDetail)\r\n                                                                ? \"Submitted. Awaiting group admin review\"\r\n                                                                : isProjectInLivePitchPhase(offerInstance.projectDetail)\r\n                                                                    ? isProjectTemporarilyClosed(offerInstance.projectDetail)\r\n                                                                        ? \"Temporarily closed\"\r\n                                                                        : \"Live\"\r\n                                                                    : isProjectPitchExpiredWaitingForAdminToCheck(offerInstance.projectDetail)\r\n                                                                        ? \"Expired. Awaiting group admin review\"\r\n                                                                        : \"Closed\"\r\n                                                        }\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )\r\n                    }\r\n                </TableBody>\r\n\r\n                {/** Table footer */}\r\n                <TableFooter>\r\n                    <TableRow>\r\n                        <TablePagination\r\n                            rowsPerPageOptions={[5, 10, 15]}\r\n                            count={OffersTableLocalState.offerInstancesFilteredByName.length}\r\n                            rowsPerPage={OffersTableLocalState.rowsPerPage}\r\n                            page={OffersTableLocalState.currentPage}\r\n                            backIconButtonProps={{\r\n                                'aria-label': 'Previous Page',\r\n                            }}\r\n                            nextIconButtonProps={{\r\n                                'aria-label': 'Next Page',\r\n                            }}\r\n                            SelectProps={{\r\n                                native: true,\r\n                            }}\r\n                            onChangePage={changePage}\r\n                            onChangeRowsPerPage={changeRowsPerPage}\r\n                        />\r\n                    </TableRow>\r\n                </TableFooter>\r\n            </Table>\r\n        </TableContainer>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OffersTable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Divider, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface FooterProps {\r\n    position?: \"relative\" | \"fixed\",\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Footer extends Component<FooterProps, any> {\r\n    render() {\r\n        const {\r\n            position,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            paddingX=\"15px\"\r\n            paddingY=\"20px\"\r\n            borderTop={1}\r\n            borderColor={appColors.kick_starter_gray_box_border}\r\n            bgcolor={appColors.kick_starter_background_color}\r\n            alignItems=\"center\"\r\n            width=\"100%\"\r\n            marginTop=\"100px\"\r\n            style={{\r\n                position: position !== undefined ? position : (MediaQueryState.isMobile || !MediaQueryState.minHeightScreen ? \"relative\" : \"fixed\"),\r\n                bottom: position === undefined ? 0 : \"none\"\r\n            }}\r\n        >\r\n            <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" >\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"termsOfUse\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography variant=\"body1\">Terms of Use</Typography>\r\n                    }\r\n                />\r\n\r\n                <Box width={25} />\r\n\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"privacyPolicy\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography variant=\"body1\">Privacy Policy</Typography>\r\n                    }\r\n                />\r\n            </Box>\r\n\r\n            <Box marginY=\"20px\" width={MediaQueryState.isMobile ? \"100%\" : \"500px\"}>\r\n                <Divider/>\r\n            </Box>\r\n\r\n            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"center\" >\r\n                <Image\r\n                    alt=\"Invest West logo\"\r\n                    src={require(\"../../img/logo.png\").default}\r\n                    style={{ width: \"auto\", height: 34, objectFit: \"contain\" }}\r\n                />\r\n                <Box width=\"20px\" />\r\n                <Typography align=\"left\" variant=\"body1\">Powered by Invest West. <br/> Copyright  2021 Invest West Ltd - All Rights Reserved.</Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Footer);\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    List,\r\n    ListItem,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {NavLink} from 'react-router-dom';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport LetterAvatar from './LetterAvatar';\r\nimport ActivitiesTable from '../activities-components/ActivitiesTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport Routes from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as createBusinessProfileActions from '../../redux-store/actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as uploadFilesActions from '../../redux-store/actions/uploadFilesActions';\r\nimport * as legalDocumentsActions from '../../redux-store/actions/legalDocumentsActions';\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from '../../redux-store/actions/investorSelfCertificationAgreementsActions';\r\nimport {\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_VIDEO_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport {HashLoader} from 'react-spinners';\r\nimport OffersTable from \"../offers-table/OffersTable\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../footer/Footer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // -- old states -----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        // Create new business profile state ----------------------------------------------------------------------------\r\n        createBusinessProfile: state.createBusinessProfile,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile state ------------------------------------------------------------------------------------\r\n        originalUser: state.editUser.originalUser,\r\n        userEdited: state.editUser.userEdited,\r\n        allowEditing: state.editUser.allowEditing,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Investor self-certification agreement (for investor only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,\r\n        investorSelfCertificationAgreementCheckBox1Checked: state.manageInvestorSelfCertificationAgreement.checkBox1Ticked,\r\n        investorSelfCertificationAgreementCheckBox2Checked: state.manageInvestorSelfCertificationAgreement.checkBox2Ticked,\r\n        investorSelfCertificationAgreementCheckBox3Checked: state.manageInvestorSelfCertificationAgreement.checkBox3Ticked,\r\n        investorSelfCertificationAgreementStatementType: state.manageInvestorSelfCertificationAgreement.statementType,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents (for issuer only) --------------------------------------------------------------------\r\n        legalDocuments_userID: state.legalDocuments.userID,\r\n        userLegalDocuments: state.legalDocuments.legalDocuments,\r\n        userLegalDocumentsLoaded: state.legalDocuments.legalDocumentsLoaded,\r\n        userLegalDocumentsBeingLoaded: state.legalDocuments.legalDocumentsBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents state --------------------------------------------------------------------------------------\r\n        toBeUploadedLegalDocuments: state.uploadFiles.filesToBeUploaded.legalDocuments,\r\n        fileUploadErrorMessage: state.uploadFiles.fileUploadErrorMessage,\r\n        fileUploadErrorSnackbarOpen: state.uploadFiles.fileUploadErrorSnackbarOpen,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // These states can be also be used when creating business profile ***********\r\n        addNewDirector: state.editUser.addNewDirector,\r\n        newDirectorText: state.editUser.newDirectorText\r\n        //***************************************************************************\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        // Create new business profile functions ------------------------------------------------------------------------\r\n        handleCreateBusinessProfileTextChanged: (fieldType, event) => dispatch(createBusinessProfileActions.handleTextChanged(fieldType, event)),\r\n        searchAddress: (mode) => dispatch(createBusinessProfileActions.searchAddresses(mode)),\r\n        toggleEnterAddressManually: (field) => dispatch(createBusinessProfileActions.toggleEnterAddressManually(field)),\r\n        toggleTradingAddressSameAsRegisteredOffice: (checked) => dispatch(createBusinessProfileActions.toggleTradingAddressSameAsRegisteredOffice(checked)),\r\n        resetCreatingBusinessProfile: () => dispatch(createBusinessProfileActions.clearAllFields()),\r\n        handleRecommendedAddressSelected: (field, index) => dispatch(createBusinessProfileActions.handleRecommendedAddressSelected(field, index)),\r\n        toggleExpandBusinessProfileFillingForInvestor: () => dispatch(createBusinessProfileActions.toggleExpandBusinessProfileFillingForInvestor()),\r\n        uploadBusinessProfile: () => dispatch(createBusinessProfileActions.uploadBusinessProfile()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile functions --------------------------------------------------------------------------------\r\n        editUserLocally: (type, edit) => dispatch(editUserActions.editUserLocally(type, edit)),\r\n        toggleAddNewDirector: () => dispatch(editUserActions.toggleAddNewDirector()),\r\n        addNewDirectorTemporarily: (isEditingExistingBusinessProfile) => dispatch(editUserActions.addNewDirectorTemporarily(isEditingExistingBusinessProfile)),\r\n        deleteDirectorTemporarily: (index, isEditingExistingBusinessProfile) => dispatch(editUserActions.deleteDirectorTemporarily(index, isEditingExistingBusinessProfile)),\r\n        cancelEditingUser: (type) => dispatch(editUserActions.cancelEditingUser(type)),\r\n        commitUserProfileChanges: (type) => dispatch(editUserActions.commitUserProfileChanges(type)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement()),\r\n        setInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.setInvestorSelfCertificationAgreement()),\r\n        investorSelfCertificationAgreement_handleCheckBoxChanged: (event) => dispatch(investorSelfCertificationAgreementsActions.handleTickBoxChanged(event)),\r\n        investorSelfCertificationAgreement_handleStatementTypeChanged: (event) => dispatch(investorSelfCertificationAgreementsActions.handleStatementTypeChanged(event)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents functions ----------------------------------------------------------------------------\r\n        legalDocuments_setUserID: (userID) => dispatch(legalDocumentsActions.setUserID(userID)),\r\n        getUserLegalDocuments: () => dispatch(legalDocumentsActions.getLegalDocuments()),\r\n        startListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.startListeningForLegalDocumentsChanged()),\r\n        stopListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.stopListeningForLegalDocumentsChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents functions ----------------------------------------------------------------------------------\r\n        handleFilesChanged: (mode, files, user, project) => dispatch(uploadFilesActions.handleFilesChanged(mode, files, user, project)),\r\n        handleFileError: (error, file) => dispatch(uploadFilesActions.handleFileError(error, file)),\r\n        closeFileUploadSnackbarError: () => dispatch(uploadFilesActions.closeErrorSnackbar()),\r\n        resetErrorMessageWhenFileUploadSnackbarExited: () => dispatch(uploadFilesActions.resetErrorMessageWhenSnackbarExited()),\r\n        deleteToBeUploadedFile: (mode, index) => dispatch(uploadFilesActions.deleteToBeUploadedFile(mode, index)),\r\n        deleteUploadedFile: (mode, index, user, project) => dispatch(uploadFilesActions.deleteUploadedFile(mode, index, user, project)),\r\n        uploadFiles: (mode, user, project) => dispatch(uploadFilesActions.uploadFiles(mode, user, project)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open edit image dialog --------------------------------------------------------------------------------------\r\n        toggleEditImageDialog: (mode) => dispatch(editImageActions.toggleEditImageDialog(mode)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open video image dialog -------------------------------------------------------------------------------------\r\n        toggleEditVideoDialog: (mode) => dispatch(editVideoActions.toggleEditVideoDialog(mode))\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass Profile extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            userLegalDocumentsLoaded,\r\n\r\n            startListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        this.loadData();\r\n\r\n        if (userLegalDocumentsLoaded) {\r\n            startListeningForLegalDocumentsChanged();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForLegalDocumentsChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            originalUser,\r\n\r\n            legalDocuments_userID,\r\n            userLegalDocumentsLoaded,\r\n            userLegalDocumentsBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            legalDocuments_setUserID,\r\n            getUserLegalDocuments,\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        // if user has been set\r\n        if (originalUser) {\r\n            // if user id for reference in legal documents has not been set\r\n            if (!legalDocuments_userID && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                legalDocuments_setUserID(originalUser.id);\r\n            }\r\n\r\n            // if user id for reference in investor self-certification agreement has not been set\r\n            if (!investorSelfCertificationAgreement_userID && originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                investorSelfCertificationAgreement_setUser(originalUser.id);\r\n            }\r\n        }\r\n\r\n        // if user id for reference in legal documents has been set\r\n        if (legalDocuments_userID) {\r\n            // if legal documents for issuer have not been loaded\r\n            if (!userLegalDocumentsLoaded && !userLegalDocumentsBeingLoaded && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                getUserLegalDocuments();\r\n            }\r\n        }\r\n\r\n        // if user id for reference in investor self-certification agreement has been set\r\n        if (investorSelfCertificationAgreement_userID) {\r\n            // if the investor self-certification agreement has not been loaded\r\n            if (!investorSelfCertificationAgreementLoaded && !investorSelfCertificationAgreementBeingLoaded && originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                loadInvestorSelfCertificationAgreement();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when editing user's profile\r\n     */\r\n    handleEditUser = type => event => {\r\n        this.props.editUserLocally(type, {property: event.target.name, value: event.target.value});\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when creating a new business profile\r\n     */\r\n    handleCreateBusinessProfileTextChanged = fieldType => event => {\r\n        this.props.handleCreateBusinessProfileTextChanged(fieldType, event);\r\n    };\r\n\r\n    /**\r\n     * Handle toggling if trading address is the same of registered office\r\n     */\r\n    toggleTradingAddressSameAsRegisteredOffice = event => {\r\n        this.props.toggleTradingAddressSameAsRegisteredOffice(event.target.checked);\r\n    };\r\n\r\n    /**\r\n     * Handle files changed when uploading legal documents\r\n     */\r\n    handleFilesChanged = (mode, user) => files => {\r\n        this.props.handleFilesChanged(mode, files, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle delete a to-be-uploaded file\r\n     *\r\n     * @param mode\r\n     * @returns {Function}\r\n     */\r\n    deleteToBeUploadedFile = mode => index => {\r\n        this.props.deleteToBeUploadedFile(mode, index);\r\n    };\r\n\r\n    /**\r\n     * Handle delete an uploaded file\r\n     *\r\n     * @param mode\r\n     * @param user\r\n     * @returns {Function}\r\n     */\r\n    deleteUploadedFile = (mode, user) => index => {\r\n        this.props.deleteUploadedFile(mode, index, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle upload legal documents\r\n     */\r\n    uploadFiles = (mode, user) => {\r\n        this.props.uploadFiles(mode, user, null);\r\n    };\r\n\r\n    //----------------------------------------------------------------------------------------------------------\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        // these users will be set in the componentDidMount (happens after render) of the main component\r\n        // therefore, without this check it may lead to a crash due to null objects\r\n        if (!currentUser || !originalUser || !userEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 20 }} >\r\n                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\" >\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", userEdited.id)\r\n                                        :\r\n                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                                }\r\n                                target={currentUser.id === originalUser.id ? \"\" : \"_blank\"}\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\" >\r\n                                    <PublicIcon style={{ marginRight: 8 }} />\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            \"View profile\"\r\n                                            :\r\n                                            \"View my profile\"\r\n                                    }\r\n                                </Button>\r\n                            </NavLink>\r\n                            <OverlayTrigger\r\n                                trigger={['hover', 'focus']}\r\n                                placement=\"bottom\"\r\n                                flip\r\n                                overlay={\r\n                                    <Tooltip id={`tooltip-bottom`} >\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                \"See how this user looks to other members. Since you are a group admin, you can see more information about this user than the other ordinary members.\"\r\n                                                :\r\n                                                \"See how you look to other members.\"\r\n                                        }\r\n                                    </Tooltip>\r\n                                }>\r\n                                <InfoIcon fontSize=\"small\" style={{ marginLeft: 15, color: colors.gray_600 }} />\r\n                            </OverlayTrigger>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Personal details */}\r\n                <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        <FlexView column >\r\n                            <Typography variant=\"h6\" color=\"primary\" >Personal details</Typography>\r\n\r\n                            <Row noGutters style={{ marginTop: 20 }} >\r\n                                {/** Profile picture */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <FlexView column hAlignContent=\"center\" style={{ padding: 10 }} >\r\n                                        {\r\n                                            !originalUser.profilePicture\r\n                                            || (\r\n                                                originalUser.profilePicture\r\n                                                && originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={originalUser.firstName} lastName={originalUser.lastName} width={196} height={196} textVariant=\"h5\" />\r\n                                                :\r\n                                                <FlexView width={256} height={256} >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={\r\n                                                            originalUser.profilePicture[\r\n                                                                originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed'))\r\n                                                                ].url\r\n                                                        }\r\n                                                        style={{ width: \"100%\", maxHeight: 256, objectFit: \"contain\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={20} marginBottom={20} >\r\n                                                    <Button size=\"small\" className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\" onClick={() => this.props.toggleEditImageDialog(UPLOAD_PROFILE_PICTURE_MODE)} style={{ width: 256 }} >Update profile picture</Button>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                {/** Personal info */}\r\n                                <Col xs={12} sm={12} md={6} lg={8} >\r\n                                    <Row>\r\n                                        {/** Title */}\r\n                                        <Col xs={12} md={12} lg={{span: 6, order: 1}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Title</b></FormLabel>\r\n                                                <Select name=\"title\" value={userEdited.title} onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} input={ <OutlinedInput/> } margin=\"dense\" >\r\n                                                    {\r\n                                                        DB_CONST.USER_TITLES.map((title, index) => (\r\n                                                            <MenuItem key={index} value={title}>{title}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Empty column to reserve empty space */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 2}} >\r\n                                            {/** Empty column to reserve empty space */}\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 3}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** First name */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 4}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>First name</b></FormLabel>\r\n                                                <TextField name=\"firstName\" placeholder=\"Enter first name\" value={userEdited.firstName} margin=\"dense\" variant=\"outlined\" onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} error={userEdited.firstName.trim().length === 0} />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Last name */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 5}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Last name</b></FormLabel>\r\n                                                <TextField name=\"lastName\" placeholder=\"Enter last name\" value={userEdited.lastName} margin=\"dense\" variant=\"outlined\" onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} error={userEdited.lastName.trim().length === 0} />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 6}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** Email */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 7}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Email</b></FormLabel>\r\n                                                <TextField\r\n                                                    name=\"email\"\r\n                                                    placeholder=\"Enter email\"\r\n                                                    value={userEdited.email}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    disabled={true} // --> do not allow the users (including the admins) to change the email field for now.\r\n                                                    error={userEdited.email.trim().length === 0}\r\n                                                />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 7}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** LinkedIn */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 8}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>LinkedIn</b></FormLabel>\r\n                                                <TextField\r\n                                                    name=\"linkedin\"\r\n                                                    placeholder=\"Enter your LinkedIn profile\"\r\n                                                    value={userEdited.hasOwnProperty('linkedin') ? userEdited.linkedin : ''}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    error={!utils.isValidLinkedInURL(userEdited.linkedin)}\r\n                                                />\r\n                                            </FormControl>\r\n                                            {\r\n                                                utils.isValidLinkedInURL(userEdited.linkedin)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FormHelperText className={css(sharedStyles.error_text)} >Invalid LinkedIn URL</FormHelperText>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n                                    <FlexView hAlignContent=\"right\" marginTop={30} >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={() => this.props.cancelEditingUser(editUserActions.RESET_PERSONAL_INFORMATION)} >Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                disabled={\r\n                                                    (\r\n                                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                        && !currentUser.superAdmin\r\n                                                        && !allowEditing\r\n                                                    )\r\n                                                    ||\r\n                                                    userEdited.firstName.trim().length === 0\r\n                                                    || userEdited.lastName.trim().length === 0\r\n                                                    ||\r\n                                                    (\r\n                                                        userEdited.title === originalUser.title\r\n                                                        && userEdited.firstName === originalUser.firstName\r\n                                                        && userEdited.lastName === originalUser.lastName\r\n                                                        && userEdited.email === originalUser.email\r\n                                                        && (\r\n                                                            (originalUser.linkedin && userEdited.linkedin && userEdited.linkedin === originalUser.linkedin)\r\n                                                            ||\r\n                                                            (!userEdited.linkedin && !originalUser.linkedin)\r\n                                                            ||\r\n                                                            (userEdited.linkedin && !originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                            ||\r\n                                                            (userEdited.linkedin && originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                        )\r\n                                                    )\r\n                                                }\r\n                                                onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_PERSONAL_INFORMATION_CHANGES)}\r\n                                            >\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && !currentUser.superAdmin\r\n                                        && !allowEditing\r\n                                            ?\r\n                                            <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }} >This user is not a home member of your group. So, you cannot edit their profile.</Typography>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ marginTop: 20 }} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Business profile */}\r\n                <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        {\r\n                            this.renderBusinessProfile()\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Investor self-certification agreement */}\r\n                {\r\n                    originalUser.type !== DB_CONST.TYPE_INVESTOR\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ paddingLeft: 24, paddingRight: 24, paddingTop: 24, paddingBottom: 35 }} >\r\n                                {\r\n                                    this.renderSelfCertificationAgreement()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} md={12} lg={12} >\r\n                                <Divider/>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Fundraising summary - only available for super user who is viewing the profile of an issuer or an investor */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                                        <FlexView column >\r\n                                            <Typography variant=\"h6\" color=\"primary\" >Fundraising summary</Typography>\r\n\r\n                                            <FlexView column marginTop={20} >\r\n                                                <OffersTable directTableUser={originalUser} />\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} md={12} lg={12} style={{ marginTop: 20 }} >\r\n                                        <Divider/>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                }\r\n\r\n\r\n                {/*/!** Block/Remove user - only available for admins *!/*/}\r\n                {/*{*/}\r\n                {/*    currentUser.type !== DB_CONST.TYPE_ADMIN*/}\r\n                {/*        ?*/}\r\n                {/*        null*/}\r\n                {/*        :*/}\r\n                {/*        <Row*/}\r\n                {/*            noGutters*/}\r\n                {/*            style={{*/}\r\n                {/*                backgroundColor: colors.white*/}\r\n                {/*            }}*/}\r\n                {/*        >*/}\r\n                {/*            <Col*/}\r\n                {/*                xs={12}*/}\r\n                {/*                md={12}*/}\r\n                {/*                lg={12}*/}\r\n                {/*                style={{*/}\r\n                {/*                    padding: 24*/}\r\n                {/*                }}*/}\r\n                {/*            >*/}\r\n                {/*                <FlexView*/}\r\n                {/*                    column*/}\r\n                {/*                >*/}\r\n                {/*                    <Typography*/}\r\n                {/*                        variant=\"h6\"*/}\r\n                {/*                        color=\"primary\"*/}\r\n                {/*                    >*/}\r\n                {/*                        Advanced*/}\r\n                {/*                    </Typography>*/}\r\n\r\n                {/*                    <Paper*/}\r\n                {/*                        style={{*/}\r\n                {/*                            overflowX: \"auto\",*/}\r\n                {/*                            marginTop: 30,*/}\r\n                {/*                            padding: 20,*/}\r\n                {/*                            backgroundColor: colors.kick_starter_background_color_1*/}\r\n                {/*                        }}*/}\r\n                {/*                    >*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            color=\"error\"*/}\r\n                {/*                            variant=\"h6\"*/}\r\n                {/*                            paragraph*/}\r\n                {/*                        >*/}\r\n                {/*                            Block user*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            variant=\"subtitle1\"*/}\r\n                {/*                            paragraph*/}\r\n                {/*                        >*/}\r\n                {/*                            Block the user will prevent them from*/}\r\n                {/*                            participating in all Invest West activities.*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                        <Button*/}\r\n                {/*                            color=\"secondary\"*/}\r\n                {/*                            variant=\"contained\"*/}\r\n                {/*                            disabled*/}\r\n                {/*                        >*/}\r\n                {/*                            Block user*/}\r\n                {/*                        </Button>*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            variant=\"body2\"*/}\r\n                {/*                            color=\"error\"*/}\r\n                {/*                            style={{*/}\r\n                {/*                                marginTop: 6*/}\r\n                {/*                            }}*/}\r\n                {/*                        >*/}\r\n                {/*                            This function is not available in this version.*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                    </Paper>*/}\r\n                {/*                </FlexView>*/}\r\n                {/*            </Col>*/}\r\n\r\n                {/*            {*/}\r\n                {/*                currentUser.type !== DB_CONST.TYPE_ADMIN*/}\r\n                {/*                    ?*/}\r\n                {/*                    null*/}\r\n                {/*                    :*/}\r\n                {/*                    <Col*/}\r\n                {/*                        xs={12}*/}\r\n                {/*                        md={12}*/}\r\n                {/*                        lg={12}*/}\r\n                {/*                        style={{*/}\r\n                {/*                            marginTop: 20*/}\r\n                {/*                        }}*/}\r\n                {/*                    >*/}\r\n                {/*                        <Divider/>*/}\r\n                {/*                    </Col>*/}\r\n                {/*            }*/}\r\n                {/*        </Row>*/}\r\n                {/*}*/}\r\n\r\n                {/** User's activities - only available for admins */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                            <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                                <FlexView column >\r\n                                    <Typography variant=\"h6\" color=\"primary\" >Activities</Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView column marginTop={20} >\r\n                                    <ActivitiesTable/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                <Row noGutters >\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Footer position=\"relative\" />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render self-certification agreement for investor\r\n     */\r\n    renderSelfCertificationAgreement = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            originalUser,\r\n            investorSelfCertificationAgreement,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementCheckBox1Checked,\r\n            investorSelfCertificationAgreementCheckBox2Checked,\r\n            investorSelfCertificationAgreementCheckBox3Checked,\r\n            investorSelfCertificationAgreementStatementType,\r\n\r\n            investorSelfCertificationAgreement_handleCheckBoxChanged,\r\n            investorSelfCertificationAgreement_handleStatementTypeChanged,\r\n            setInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            return null;\r\n        }\r\n\r\n        if (!investorSelfCertificationAgreementLoaded) {\r\n            return (\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" >Self-certification agreement</Typography>\r\n\r\n                    <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={25} >\r\n                        <HashLoader\r\n                            color={\r\n                                !groupProperties\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    groupProperties.settings.primaryColor\r\n                            }\r\n                        />\r\n                    </FlexView>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        // investor has agreed to the terms of self-certification\r\n        if (investorSelfCertificationAgreement) {\r\n            return (\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" color=\"primary\" align=\"left\" >Self-certification agreement</Typography>\r\n\r\n                    <Typography variant=\"subtitle1\" align=\"left\" style={{ marginTop: 25, marginBottom: 35 }} >\r\n                        {currentUser.type === DB_CONST.TYPE_ADMIN ? \"This investor has\" : \"You have\"} agreed to\r\n                        the statement\r\n                        of <b>{investorSelfCertificationAgreement.type === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT ? \"High net worth investor \" : \"Self-certified sophisticated investor \"}</b>\r\n                        on {utils.dateInReadableFormat(investorSelfCertificationAgreement.agreedDate)}.\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <Typography variant=\"h6\" color=\"error\" align=\"left\" paragraph >Self-certification agreement</Typography>\r\n\r\n                <Typography variant=\"body1\" align=\"left\" paragraph >\r\n                    {\r\n                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            \"To access the functionality of this site, this user must be a self-certified investor.\"\r\n                            :\r\n                            \"To access the functionality of this site, you must be a self-certified investor. Please select the appropriate statement below and read carefully.\"\r\n                    }\r\n                </Typography>\r\n\r\n                <Select\r\n                    name=\"statementType\"\r\n                    value={investorSelfCertificationAgreementStatementType}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    input={<OutlinedInput/>}\r\n                    onChange={investorSelfCertificationAgreement_handleStatementTypeChanged}\r\n                >\r\n                    <MenuItem value={DB_CONST.SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT} >Self-certified sophisticated investor statement</MenuItem>\r\n                    <MenuItem value={DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT} >High net worth investor statement</MenuItem>\r\n                </Select>\r\n\r\n                <FlexView column marginTop={35} style={{ maxHeight: 500, overflowY: \"auto\", border: `1px solid ${colors.gray_300}`, padding: 18 }} >\r\n                    {/** T&Cs title */}\r\n                    <Typography variant=\"h6\" align=\"left\" paragraph >\r\n                        <b>\r\n                            {\r\n                                investorSelfCertificationAgreementStatementType === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT\r\n                                    ?\r\n                                    \"Statement for self-certified high net worth individual\"\r\n                                    :\r\n                                    \"Statement for a self-certified sophisticated investor\"\r\n                            }\r\n                        </b>\r\n                    </Typography>\r\n\r\n                    {/** T&Cs text */}\r\n                    {\r\n                        investorSelfCertificationAgreementStatementType === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT\r\n                            ?\r\n                            <Typography variant=\"body1\" align=\"left\" component=\"span\" >\r\n                                I declare that I am a certified high net worth individual for the purposes of the\r\n                                Financial Services and Markets Act 2000 (Financial Promotion) Order 2005.\r\n                                <br/><br/>\r\n                                I understand that this means:\r\n                                <ol type=\"a\" >\r\n                                    <li>I can receive financial promotions that may not have been approved by a person authorised by the Financial Conduct Authority;</li>\r\n                                    <li>the content of such financial promotions may not conform to rules issued by the Financial Conduct Authority;</li>\r\n                                    <li>by signing this statement I may lose significant rights;</li>\r\n                                    <li>\r\n                                        I may have no right to complain to either of the following:-\r\n                                        <br/>\r\n                                        <ol type=\"i\" >\r\n                                            <li>the Financial Conduct Authority; or</li>\r\n                                            <li>the Financial Ombudsman Scheme</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>I may have no right to seek compensation from the Financial Services Compensation Scheme.</li>\r\n                                </ol>\r\n\r\n                                I am a certified high net worth individual because <b><u>at least one of the following\r\n                                applies:</u></b>\r\n\r\n                                <ol type=\"a\" >\r\n                                    <li>I had, during the financial year immediately preceding today's date, an annual income to the value of 100,000 or more;</li>\r\n                                    <li>\r\n                                        I held, throughout the financial year immediately preceding today's date, net\r\n                                        assets to the value of 250,000 or more. Net assets for these purposes do not\r\n                                        include:-\r\n                                        <ol type=\"i\">\r\n                                            <li>the property which is my primary residence or any loan secured on that residence;</li>\r\n                                            <li>any rights of mine under a qualifying contract of insurance within the meaning of the Financial Services and Markets Act 2000 (Regulated Activities) Order 2001; or</li>\r\n                                            <li>any benefits (in the form of pensions or otherwise) which are payable on the termination of my service or on my death or retirement and to which I am (or my dependants are), or may be, entitled.</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                </ol>\r\n                            </Typography>\r\n                            :\r\n                            <Typography variant=\"body1\" align=\"left\" component=\"span\" >\r\n                                I declare that I am a self-certified sophisticated investor for the purposes of the\r\n                                Financial Services and Markets Act (Financial Promotion) Order 2005.\r\n                                <br/><br/>\r\n                                I understand that this means:\r\n                                <ol type=\"a\" >\r\n                                    <li>I can receive financial promotions that may not have been approved by a person authorised by the Financial Conduct Authority;</li>\r\n                                    <li>the content of such financial promotions may not conform to rules issued by the Financial Conduct Authority;</li>\r\n                                    <li>by signing this statement I may lose significant rights;</li>\r\n                                    <li>\r\n                                        I may have no right to complain to either of the following:\r\n                                        <ol type=\"i\" >\r\n                                            <li>the Financial Conduct Authority; or</li>\r\n                                            <li>the Financial Ombudsman Scheme;</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>I may have no right to seek compensation from the Financial Services Compensation Scheme.</li>\r\n                                </ol>\r\n\r\n                                I am a self-certified sophisticated investor because <b><u>at least one of the following\r\n                                applies:</u></b>\r\n\r\n                                <ol type=\"a\" >\r\n                                    <li>I am a member of a network or syndicate of business angels and have been so for at least the last six months prior to today's date;</li>\r\n                                    <li>I have made more than one investment in an unlisted company in the two years prior to today's date;</li>\r\n                                    <li>I am working, or have worked in the two years prior to today's date, in a professional capacity in the private equity sector, or in the provision of finance for small and medium enterprises;</li>\r\n                                    <li>I am currently, or have been in the two years prior to today's date, a director of a company with an annual turnover of at least 1 million.</li>\r\n                                </ol>\r\n                            </Typography>\r\n                    }\r\n                    {/** Divider */}\r\n                    <Divider style={{ marginTop: 30, marginBottom: 18 }} />\r\n\r\n                    <FormControl component=\"fieldset\" fullWidth >\r\n                        <FormGroup row={true} >\r\n                            {/** Checkbox 1 */}\r\n                            <FormControlLabel\r\n                                style={{ width: \"100%\" }}\r\n                                control={\r\n                                    <Checkbox name=\"checkBox1Ticked\" color=\"primary\" value={investorSelfCertificationAgreementCheckBox1Checked} checked={investorSelfCertificationAgreementCheckBox1Checked} onChange={investorSelfCertificationAgreement_handleCheckBoxChanged} />\r\n                                }\r\n                                label={\r\n                                    <Typography variant=\"body1\" align=\"left\"><b>I accept that I can lose my property and other assets from making investment decisions based on financial promotions.</b></Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n\r\n                            {/** Checkbox 2 */}\r\n                            <FormControlLabel\r\n                                style={{ width: \"100%\" }}\r\n                                control={\r\n                                    <Checkbox\r\n                                        name=\"checkBox2Ticked\"\r\n                                        color=\"primary\"\r\n                                        value={investorSelfCertificationAgreementCheckBox2Checked}\r\n                                        checked={investorSelfCertificationAgreementCheckBox2Checked}\r\n                                        onChange={investorSelfCertificationAgreement_handleCheckBoxChanged}\r\n                                    />\r\n                                }\r\n                                label={\r\n                                    <Typography variant=\"body1\" align=\"left\" >I am aware that it is open to me to seek advice from someone who specialises in advising on investments.</Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n\r\n                            {/** Checkbox 3 */}\r\n                            <FormControlLabel\r\n                                style={{ width: \"100%\" }}\r\n                                control={\r\n                                    <Checkbox name=\"checkBox3Ticked\" color=\"primary\" value={investorSelfCertificationAgreementCheckBox3Checked} checked={investorSelfCertificationAgreementCheckBox3Checked} onChange={investorSelfCertificationAgreement_handleCheckBoxChanged} />\r\n                                }\r\n                                label={\r\n                                    <Typography variant=\"body1\" align=\"left\" >\r\n                                        <b>\r\n                                            I have read and agree to the&nbsp;\r\n                                            <CustomLink url={Routes.constructPublicRoute(\"termsOfUse\")} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"nav-link\" childComponent=\"Terms of Use\" />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink url={Routes.constructPublicRoute(\"privacyPolicy\")} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"nav-link\" childComponent=\"Privacy Policy\" />\r\n                                            .\r\n                                        </b>\r\n                                    </Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n                        </FormGroup>\r\n                    </FormControl>\r\n                </FlexView>\r\n\r\n                <FlexView column grow={1} hAlignContent=\"right\" marginTop={40} marginBottom={20} >\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={setInvestorSelfCertificationAgreement}\r\n                        disabled={\r\n                            !investorSelfCertificationAgreementCheckBox1Checked\r\n                            || !investorSelfCertificationAgreementCheckBox2Checked\r\n                            || !investorSelfCertificationAgreementCheckBox3Checked\r\n                            || currentUser.type === DB_CONST.TYPE_ADMIN\r\n                        }\r\n                    >\r\n                        Submit\r\n                    </Button>\r\n                    {\r\n                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }}>You cannot do this on behalf of the investor.</Typography>\r\n                            :\r\n                            null\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render business profile section\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderBusinessProfile = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing,\r\n\r\n            clubAttributes,\r\n\r\n            createBusinessProfile,\r\n            addNewDirector,\r\n            newDirectorText,\r\n\r\n            searchAddress,\r\n            toggleEnterAddressManually,\r\n            resetCreatingBusinessProfile,\r\n            handleRecommendedAddressSelected,\r\n            toggleExpandBusinessProfileFillingForInvestor,\r\n            uploadBusinessProfile\r\n        } = this.props;\r\n\r\n        // user has already uploaded their business profile\r\n        if (originalUser.BusinessProfile) {\r\n            return (\r\n                /** Business profile has been uploaded */\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                    <Row noGutters style={{ marginTop: 20 }} >\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ padding: 10, width: \"100%\" }} >\r\n                            <FlexView column hAlignContent=\"center\" >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                            && originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You haven't uploaded your company logo\"\r\n                                                        :\r\n                                                        \"This user hasn't uploaded company logo\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <FlexView width={256} height={256} >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        originalUser.BusinessProfile.logo[originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{ width: \"100%\", maxHeight: 256, objectFit: \"contain\" }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} >\r\n                                                <Button\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    fullWidth\r\n                                                    onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_MODE)}\r\n                                                    style={{ width: 256 }}\r\n                                                >Update logo\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                <FlexView column marginTop={80} marginBottom={20} width=\"100%\" hAlignContent=\"center\" style={{ paddingLeft: 25, paddingRight: 25 }} >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                            && originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You have no introduction video\"\r\n                                                        :\r\n                                                        \"This user has no introduction video\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <ReactPlayer\r\n                                                url={\r\n                                                    originalUser.BusinessProfile.video[\r\n                                                        originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed'))\r\n                                                        ].url\r\n                                                }\r\n                                                width=\"100%\"\r\n                                                height=\"100%\"\r\n                                                controls={true}\r\n                                                playing={false}\r\n                                            />\r\n                                    }\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20}>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_MODE)}\r\n                                                    style={{ width: 256 }}\r\n                                                >Update introduction video\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={8} >\r\n                            {/** Company name */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Company name</b></FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyName\"\r\n                                        placeholder=\"Enter company name\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('companyName') ? userEdited.BusinessProfile.companyName : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Registration number */}\r\n                            <FlexView column >\r\n                                <FormControl>\r\n                                    <FormLabel><b>Registration number</b></FormLabel>\r\n                                    <TextField\r\n                                        name=\"registrationNo\"\r\n                                        placeholder=\"Enter company registration number\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('registrationNo') ? userEdited.BusinessProfile.registrationNo : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        disabled={currentUser.type !== DB_CONST.TYPE_ADMIN}\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Registered office */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Registered office</b></FormLabel>\r\n                                    <FormGroup>\r\n                                        <FlexView column>\r\n                                            <TextField\r\n                                                name=\"address1\"\r\n                                                placeholder=\"Address 1\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address1\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                error={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                    && userEdited.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address2\"\r\n                                                placeholder=\"Address 2\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address2\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address3\"\r\n                                                placeholder=\"Address 3\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address3\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <Row>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"townCity\"\r\n                                                        placeholder=\"Town/City\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.registeredOffice.townCity\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                            && userEdited.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"postcode\"\r\n                                                        placeholder=\"Postcode\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.registeredOffice.postcode.toUpperCase()\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                            && userEdited.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FlexView>\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Trading address */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Trading address</b></FormLabel>\r\n                                    <FormGroup>\r\n                                        <FlexView column>\r\n                                            <TextField\r\n                                                name=\"address1\"\r\n                                                placeholder=\"Address 1\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address1\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                error={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                    && userEdited.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address2\"\r\n                                                placeholder=\"Address 2\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address2\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address3\"\r\n                                                placeholder=\"Address 3\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address3\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <Row>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"townCity\"\r\n                                                        placeholder=\"Town/City\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.tradingAddress.townCity\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                            && userEdited.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"postcode\"\r\n                                                        placeholder=\"Postcode\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.tradingAddress.postcode.toUpperCase()\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                            && userEdited.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FlexView>\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {\r\n                                !clubAttributes\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        <FlexView>\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Sector</b></FormLabel>\r\n                                                <Select\r\n                                                    name=\"sector\"\r\n                                                    value={\r\n                                                        userEdited.BusinessProfile.hasOwnProperty('sector')\r\n                                                            ?\r\n                                                            userEdited.BusinessProfile.sector\r\n                                                            :\r\n                                                            ''\r\n                                                    }\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                                    input={<OutlinedInput/>}\r\n                                                    margin=\"dense\"\r\n                                                >\r\n\r\n                                                    {\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </FlexView>\r\n                                    )\r\n                            }\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Directors */}\r\n                            <FlexView column>\r\n                                <FormControl\r\n                                    error={\r\n                                        userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                        && userEdited.BusinessProfile.directors.length === 0\r\n                                    }\r\n                                >\r\n                                    <FormLabel>\r\n                                        <b>Directors</b>\r\n                                    </FormLabel>\r\n\r\n                                    <Row noGutters>\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            {\r\n                                                !userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <List>\r\n                                                        {\r\n                                                            userEdited.BusinessProfile.directors.map((director, index) => (\r\n                                                                <ListItem\r\n                                                                    key={index}\r\n                                                                >\r\n                                                                    <ListItemText>\r\n                                                                        {director}\r\n                                                                    </ListItemText>\r\n                                                                    <ListItemSecondaryAction>\r\n                                                                        <IconButton onClick={() => this.props.deleteDirectorTemporarily(index, true)} >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                    </ListItemSecondaryAction>\r\n                                                                </ListItem>\r\n                                                            ))\r\n                                                        }\r\n                                                    </List>\r\n                                            }\r\n\r\n                                            {\r\n                                                !userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                                || (userEdited.BusinessProfile.hasOwnProperty('directors') && userEdited.BusinessProfile.directors.length === 0)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Divider style={{ marginTop: 10, marginBottom: 16 }} />\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            {\r\n                                                !addNewDirector\r\n                                                    ?\r\n                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} >\r\n                                                        <AddIcon fontSize=\"small\" style={{ marginRight: 4 }} />\r\n                                                        Add director\r\n                                                    </Button>\r\n                                                    :\r\n                                                    <FlexView column >\r\n                                                        <TextField\r\n                                                            placeholder=\"Enter director's name\"\r\n                                                            name=\"newDirectorText\"\r\n                                                            value={newDirectorText}\r\n                                                            fullWidth\r\n                                                            variant=\"outlined\"\r\n                                                            onChange={this.handleEditUser(editUserActions.ADDING_NEW_DIRECTOR)}\r\n                                                            margin=\"dense\"\r\n                                                        />\r\n\r\n                                                        <FlexView marginTop={8} hAlignContent=\"right\" >\r\n                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} style={{ marginRight: 8 }} >Cancel</Button>\r\n                                                            <Button\r\n                                                                variant=\"contained\"\r\n                                                                size=\"small\"\r\n                                                                color=\"primary\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={() => this.props.addNewDirectorTemporarily(true)}\r\n                                                                disabled={newDirectorText.trim().length === 0}\r\n                                                            >\r\n                                                                Add\r\n                                                            </Button>\r\n                                                        </FlexView>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n                            {/** Website */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Company website</b>\r\n                                    </FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyWebsite\"\r\n                                        placeholder=\"Enter company website\"\r\n                                        value={\r\n                                            userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                ?\r\n                                                userEdited.BusinessProfile.companyWebsite\r\n                                                :\r\n                                                ''\r\n                                        }\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={\r\n                                            (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                        }\r\n                                    />\r\n                                </FormControl>\r\n                                {\r\n                                    !userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length === 0\r\n                                    )\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                        && utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                    )\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\" > Invalid website URL </Typography>\r\n                                }\r\n                            </FlexView>\r\n\r\n                            <FlexView hAlignContent=\"right\" marginTop={30} >\r\n                                <FlexView marginRight={20} >\r\n                                    <Button variant=\"outlined\" color=\"primary\" onClick={() => this.props.cancelEditingUser(editUserActions.RESET_BUSINESS_PROFILE)}>Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={\r\n                                            (\r\n                                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                && !currentUser.superAdmin\r\n                                                && !allowEditing\r\n                                            )\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.address1.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.townCity.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.postcode.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.address1.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.townCity.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.postcode.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('directors') && userEdited.BusinessProfile.directors.length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite') && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                            || JSON.stringify(originalUser.BusinessProfile) === JSON.stringify(userEdited.BusinessProfile)\r\n                                        }\r\n                                        onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_BUSINESS_PROFILE_CHANGES)}\r\n                                    >\r\n                                        Save\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                            {\r\n                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                && !currentUser.superAdmin\r\n                                && !allowEditing\r\n                                    ?\r\n                                    <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }}>This user is not a home member of your group. So, you cannot edit their profile.</Typography>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            );\r\n        }\r\n        // user has not uploaded their business profile yet\r\n        else {\r\n            // if the user is not a super user\r\n            if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n                return (\r\n                    // user has not uploaded Business profile yet\r\n                    <FlexView column >\r\n                        <FlexView column >\r\n                            <Typography variant=\"h6\" color=\"primary\" style={{ marginBottom: 4 }} >Business profile</Typography>\r\n                            {\r\n                                originalUser.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Row noGutters >\r\n                                        <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}} >\r\n                                            <Button\r\n                                                fullWidth\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                color={\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ? \"primary\"\r\n                                                        : \"secondary\"\r\n                                                }\r\n                                                variant=\"outlined\"\r\n                                                size=\"medium\"\r\n                                                onClick={toggleExpandBusinessProfileFillingForInvestor}\r\n                                                style={{ marginTop: 25, marginBottom: 20 }}\r\n                                            >\r\n                                                {\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ?\r\n                                                        \"Create company profile (optional)\"\r\n                                                        :\r\n                                                        \"Cancel creating company profile\"\r\n                                                }\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </FlexView>\r\n\r\n                        {\r\n                            originalUser.type === DB_CONST.TYPE_ISSUER\r\n                            || createBusinessProfile.expandBusinessProfileFilling\r\n                                ?\r\n                                // start filling in Business profile\r\n                                <FlexView column marginTop={20} >\r\n                                    {/** Company name */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Company name</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company name\"\r\n                                                name=\"companyName\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyName}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Registration number */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Registration number</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company registration number\"\r\n                                                name=\"registrationNo\"\r\n                                                value={createBusinessProfile.BusinessProfile.registrationNo}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Registered office */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <Container fluid style={{ padding: 0 }} >\r\n                                                <Row noGutters >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        <FormLabel>\r\n                                                            <b>Registered office</b>\r\n                                                        </FormLabel>\r\n                                                        <FormHelperText>Enter a UK postcode to search for address or click on \"Enter address manually\" to enter your address manually.</FormHelperText>\r\n                                                        <FormGroup>\r\n                                                            {/** Search postcode field */}\r\n                                                            <FlexView>\r\n                                                                <TextField\r\n                                                                    placeholder=\"Enter UK postcode\"\r\n                                                                    name=\"registeredOfficeSearchPostcode\"\r\n                                                                    value={createBusinessProfile.registeredOfficeSearchPostcode.toUpperCase()}\r\n                                                                    fullWidth\r\n                                                                    variant=\"outlined\"\r\n                                                                    margin=\"dense\"\r\n                                                                    onChange={\r\n                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED)\r\n                                                                    }\r\n                                                                    InputProps={{\r\n                                                                        startAdornment:\r\n                                                                            <InputAdornment position=\"start\" >\r\n                                                                                <IconButton\r\n                                                                                    disableRipple\r\n                                                                                    style={{ width: 48, height: 48 }}\r\n                                                                                    onClick={() => searchAddress(createBusinessProfileActions.SEARCHING_REGISTERED_OFFICE_ADDRESSES)}\r\n                                                                                >\r\n                                                                                    <SearchIcon/>\r\n                                                                                </IconButton>\r\n                                                                            </InputAdornment>\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {\r\n                                                                !createBusinessProfile.registeredOfficeEnterAddressManually\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    <FlexView column >\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 1:*\"\r\n                                                                            name=\"address1\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address1}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            required\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 2:\"\r\n                                                                            name=\"address2\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address2}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 3:\"\r\n                                                                            name=\"address3\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address3}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <Row\r\n                                                                        >\r\n                                                                            <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Town/City:*\"\r\n                                                                                    name=\"townCity\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.registeredOffice.townCity}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n                                                                            </Col>\r\n                                                                            <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Postcode:*\"\r\n                                                                                    name=\"postcode\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.registeredOffice.postcode.toUpperCase()}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n                                                                            </Col>\r\n                                                                        </Row>\r\n                                                                    </FlexView>\r\n                                                            }\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                <Row\r\n                                                    noGutters\r\n                                                >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        {\r\n                                                            createBusinessProfile.registeredOfficeRecommendedAddresses\r\n                                                            && createBusinessProfile.registeredOfficeRecommendedAddresses.error\r\n                                                                ?\r\n                                                                <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{ marginTop: 4, marginBottom: 4 }} >Sorry, we can't find your address, please check the details entered and search again, alternatively you can enter your address manually below.</Typography>\r\n                                                                :\r\n                                                                null\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            !createBusinessProfile.registeredOfficeRecommendedAddresses\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                // error happened while finding addresses\r\n                                                                createBusinessProfile.registeredOfficeRecommendedAddresses.error\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    <List\r\n                                                                        className={css(styles.address_list)}\r\n                                                                    >\r\n                                                                        {\r\n                                                                            createBusinessProfile.registeredOfficeRecommendedAddresses.formattedAddresses.map((address, index) => (\r\n                                                                                <ListItem\r\n                                                                                    button\r\n                                                                                    key={index}\r\n                                                                                    onClick={() => handleRecommendedAddressSelected(createBusinessProfileActions.SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS, index)}\r\n                                                                                >\r\n                                                                                    <ListItemText primary={address} />\r\n                                                                                </ListItem>\r\n                                                                            ))\r\n                                                                        }\r\n                                                                    </List>\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            createBusinessProfile.registeredOfficeEnterAddressManually\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography\r\n                                                                    variant=\"body2\"\r\n                                                                    color=\"primary\"\r\n                                                                    align=\"left\"\r\n                                                                    className={css(styles.enter_address_manually)}\r\n                                                                    onClick={() => toggleEnterAddressManually(createBusinessProfileActions.TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY)}\r\n                                                                >\r\n                                                                    Enter address manually.\r\n                                                                </Typography>\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Container>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Trading address */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <Container fluid style={{ padding: 0 }} >\r\n                                                <Row noGutters >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        <FormLabel>\r\n                                                            <b>Trading address</b>\r\n                                                        </FormLabel>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                <Row noGutters >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        <FormGroup>\r\n                                                            <FormControlLabel\r\n                                                                label=\"Same as registered office address\"\r\n                                                                labelPlacement=\"end\"\r\n                                                                control={\r\n                                                                    <Checkbox checked={createBusinessProfile.tradingAddressSameAsRegisteredOffice} color=\"primary\" onChange={this.toggleTradingAddressSameAsRegisteredOffice} />\r\n                                                                }\r\n                                                            />\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                {\r\n                                                    createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Row noGutters >\r\n                                                            <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                                <FormGroup>\r\n                                                                    <FormHelperText>Enter a UK postcode to search for address or click on \"Enter address manually\" to enter your address manually.</FormHelperText>\r\n                                                                    <FlexView>\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Enter UK postcode\"\r\n                                                                            name=\"tradingAddressSearchPostcode\"\r\n                                                                            value={createBusinessProfile.tradingAddressSearchPostcode.toUpperCase()}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                            InputProps={{\r\n                                                                                startAdornment:\r\n                                                                                    <InputAdornment position=\"start\" >\r\n                                                                                        <IconButton disableRipple style={{ width: 48, height: 48 }} onClick={() => searchAddress(createBusinessProfileActions.SEARCHING_TRADING_ADDRESSES)} >\r\n                                                                                            <SearchIcon/>\r\n                                                                                        </IconButton>\r\n                                                                                    </InputAdornment>\r\n                                                                            }}\r\n                                                                        />\r\n                                                                    </FlexView>\r\n\r\n                                                                    {\r\n                                                                        !createBusinessProfile.tradingAddressEnterAddressManually\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 1:*\"\r\n                                                                                    name=\"address1\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address1}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 2:\"\r\n                                                                                    name=\"address2\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address2}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 3:\"\r\n                                                                                    name=\"address3\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address3}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <Row\r\n                                                                                >\r\n                                                                                    <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                        <TextField\r\n                                                                                            placeholder=\"Town/City:*\"\r\n                                                                                            name=\"townCity\"\r\n                                                                                            value={createBusinessProfile.BusinessProfile.tradingAddress.townCity}\r\n                                                                                            fullWidth\r\n                                                                                            variant=\"outlined\"\r\n                                                                                            required\r\n                                                                                            margin=\"dense\"\r\n                                                                                            onChange={\r\n                                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                            }\r\n                                                                                        />\r\n                                                                                    </Col>\r\n                                                                                    <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                        <TextField\r\n                                                                                            placeholder=\"Postcode:*\"\r\n                                                                                            name=\"postcode\"\r\n                                                                                            value={createBusinessProfile.BusinessProfile.tradingAddress.postcode.toUpperCase()}\r\n                                                                                            fullWidth\r\n                                                                                            variant=\"outlined\"\r\n                                                                                            required\r\n                                                                                            margin=\"dense\"\r\n                                                                                            onChange={\r\n                                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                            }\r\n                                                                                        />\r\n                                                                                    </Col>\r\n                                                                                </Row>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                }\r\n\r\n                                                {\r\n                                                    createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Row noGutters >\r\n                                                            <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                                {\r\n                                                                    createBusinessProfile.tradingAddressRecommendedAddresses\r\n                                                                    && createBusinessProfile.tradingAddressRecommendedAddresses.error\r\n                                                                        ?\r\n                                                                        <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{ marginTop: 4, marginBottom: 4 }} >Sorry, we can't find your address, please check the details entered and search again, alternatively you can enter your address manually below.</Typography>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n\r\n                                                                {\r\n                                                                    !createBusinessProfile.tradingAddressRecommendedAddresses\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        // error happened while finding addresses\r\n                                                                        createBusinessProfile.tradingAddressRecommendedAddresses.error\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <List\r\n                                                                                className={css(styles.address_list)}\r\n                                                                            >\r\n                                                                                {\r\n                                                                                    createBusinessProfile.tradingAddressRecommendedAddresses.formattedAddresses.map((address, index) => (\r\n                                                                                        <ListItem\r\n                                                                                            button\r\n                                                                                            key={index}\r\n                                                                                            onClick={() => handleRecommendedAddressSelected(createBusinessProfileActions.SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS, index)}\r\n                                                                                        >\r\n                                                                                            <ListItemText\r\n                                                                                                primary={address}\r\n                                                                                            />\r\n                                                                                        </ListItem>\r\n                                                                                    ))\r\n                                                                                }\r\n                                                                            </List>\r\n                                                                }\r\n\r\n                                                                {\r\n                                                                    createBusinessProfile.tradingAddressEnterAddressManually\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        <Typography variant=\"body2\" color=\"primary\" align=\"left\" className={css(styles.enter_address_manually)} onClick={() => toggleEnterAddressManually(createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY)} >Enter address manually.</Typography>\r\n                                                                }\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                }\r\n                                            </Container>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Directors */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Company directors</b>\r\n                                            </FormLabel>\r\n\r\n                                            <Row noGutters >\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <List>\r\n                                                        {\r\n                                                            createBusinessProfile.BusinessProfile.directors.map((director, index) => (\r\n                                                                <ListItem key={index} >\r\n                                                                    <ListItemText> {director} </ListItemText>\r\n                                                                    <ListItemSecondaryAction>\r\n                                                                        <IconButton onClick={() => this.props.deleteDirectorTemporarily(index, false)} >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                    </ListItemSecondaryAction>\r\n                                                                </ListItem>\r\n                                                            ))\r\n                                                        }\r\n                                                    </List>\r\n\r\n                                                    {\r\n                                                        createBusinessProfile.BusinessProfile.directors.length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <Divider style={{ marginTop: 10, marginBottom: 16 }} />\r\n                                                    }\r\n                                                </Col>\r\n\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                </Col>\r\n\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    {\r\n                                                        !addNewDirector\r\n                                                            ?\r\n                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} >\r\n                                                                <AddIcon fontSize=\"small\" style={{ marginRight: 4 }} />\r\n                                                                Add director\r\n                                                            </Button>\r\n                                                            :\r\n                                                            <FlexView column >\r\n                                                                <TextField\r\n                                                                    placeholder=\"Enter director's name\"\r\n                                                                    name=\"newDirectorText\"\r\n                                                                    value={newDirectorText}\r\n                                                                    fullWidth\r\n                                                                    variant=\"outlined\"\r\n                                                                    onChange={this.handleEditUser(editUserActions.ADDING_NEW_DIRECTOR)}\r\n                                                                    margin=\"dense\"\r\n                                                                />\r\n\r\n                                                                <FlexView marginTop={8} hAlignContent=\"right\" >\r\n                                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} style={{ marginRight: 8 }} >Cancel</Button>\r\n                                                                    <Button\r\n                                                                        variant=\"contained\"\r\n                                                                        size=\"small\"\r\n                                                                        color=\"primary\"\r\n                                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                                        onClick={() => this.props.addNewDirectorTemporarily(false)}\r\n                                                                        disabled={newDirectorText.trim().length === 0}\r\n                                                                    >\r\n                                                                        Add\r\n                                                                    </Button>\r\n                                                                </FlexView>\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{ marginTop: 20, marginBottom: 20 }}\r\n                                    />\r\n\r\n                                    {/** Business sector */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Business sector</b>\r\n                                            </FormLabel>\r\n                                            <Select\r\n                                                name=\"sector\"\r\n                                                value={createBusinessProfile.BusinessProfile.sector}\r\n                                                input={<OutlinedInput/>}\r\n                                                margin=\"dense\"\r\n                                                onChange={ this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED) }\r\n                                            >\r\n                                                <MenuItem key={-1} value={'None'} >Choose business sector</MenuItem>\r\n                                                {\r\n                                                    clubAttributes\r\n                                                        ?\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                        :\r\n                                                        null\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Company Website */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Company website</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company website\"\r\n                                                name=\"companyWebsite\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyWebsite}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                            {\r\n                                                createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                                                || utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" >Invalid website URL</Typography>\r\n                                            }\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Upload logo and introduction video */}\r\n                                    <FlexView marginBottom={20} width=\"100%\" hAlignContent=\"center\" >\r\n                                        <Row style={{ width: \"100%\" }} >\r\n                                            {/** Upload logo */}\r\n                                            <Col xs={12} sm={12} md={6} lg={6} style={{ padding: 15 }} >\r\n                                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                                    <FlexView className={css(styles.upload_files_area_style)} onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_FIRST_TIME_MODE)} >\r\n                                                        <Typography variant=\"body2\" align=\"center\" >Upload company logo (optional)</Typography>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.logoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView width={270} height={270} marginTop={28} >\r\n                                                                <Image src={window.URL.createObjectURL(createBusinessProfile.logoToBeUploaded)} roundedCircle thumbnail style={{ maxHeight: 270, width: \"100%\", objectFit: \"scale-down\" }}/>\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n\r\n                                            {/** Upload introduction video */}\r\n                                            <Col xs={12} sm={12} md={6} lg={6} style={{ padding: 15 }} >\r\n                                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                                    <FlexView vAlignContent=\"center\" >\r\n                                                        <FlexView className={css(styles.upload_files_area_style)} onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_FIRST_TIME_MODE)} >\r\n                                                            <Typography variant=\"body2\" align=\"center\" >Upload introduction video (optional)</Typography>\r\n                                                        </FlexView>\r\n\r\n                                                        <OverlayTrigger\r\n                                                            trigger={['hover', 'focus']}\r\n                                                            placement=\"top\"\r\n                                                            flip\r\n                                                            overlay={\r\n                                                                <Tooltip id={`tooltip-top`} >Introduction video helps other members understand more about your business.</Tooltip>\r\n                                                            }>\r\n                                                            <InfoIcon\r\n                                                                fontSize=\"default\"\r\n                                                                style={{\r\n                                                                    marginLeft: 14,\r\n                                                                    color: colors.gray_600\r\n                                                                }}\r\n                                                            />\r\n                                                        </OverlayTrigger>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.videoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView marginTop={28} >\r\n                                                                <ReactPlayer\r\n                                                                    url={\r\n                                                                        typeof (createBusinessProfile.videoToBeUploaded) === \"string\"\r\n                                                                            ?\r\n                                                                            createBusinessProfile.videoToBeUploaded\r\n                                                                            :\r\n                                                                            window.URL.createObjectURL(createBusinessProfile.videoToBeUploaded)\r\n                                                                    }\r\n                                                                    controls={true}\r\n                                                                    playing={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" marginTop={30} marginBottom={20} >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={resetCreatingBusinessProfile}>Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button variant=\"contained\" color=\"primary\" onClick={uploadBusinessProfile} disabled={this.shouldUploadButtonBeDisabled()}>Save</Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return (\r\n                    <FlexView column >\r\n                        <Typography variant=\"h6\" color=\"primary\" >Business profile</Typography>\r\n                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"center\" style={{ marginTop: 15 }} >Business profile has not been uploaded.</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if the user can upload business profile --> only allow upload when all the required information has been provided\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    shouldUploadButtonBeDisabled = () => {\r\n        const {\r\n            originalUser,\r\n            createBusinessProfile,\r\n        } = this.props;\r\n\r\n        // user is an issuer\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registrationNo.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                || (\r\n                    !createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                    && (\r\n                        createBusinessProfile.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                        || createBusinessProfile.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                        || createBusinessProfile.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                    )\r\n                )\r\n                || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                    && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                )\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        // user is an investor\r\n        else if (originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (createBusinessProfile.expandBusinessProfileFilling) {\r\n                if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registrationNo.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                    || (\r\n                        !createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                        && (\r\n                            createBusinessProfile.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                            || createBusinessProfile.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                            || createBusinessProfile.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                        )\r\n                    )\r\n                    || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                    || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                    || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                    || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                        && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                    )\r\n                ) {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n\r\nconst styles = StyleSheet.create({\r\n    upload_files_area_style: {\r\n        padding: 12,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.blue_gray_50,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    address_list: {\r\n        backgroundColor: colors.blue_gray_50,\r\n        borderRadius: 3,\r\n        padding: 4,\r\n        width: \"90%\",\r\n\r\n        position: 'relative',\r\n        overflow: 'auto',\r\n        maxHeight: 300\r\n    },\r\n\r\n    enter_address_manually: {\r\n        marginTop: 6,\r\n        ':hover': {\r\n            color: colors.blue_gray_600,\r\n            cursor: 'pointer',\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const TOGGLE_NOTIFICATIONS = 'TOGGLE_NOTIFICATIONS';\r\nexport const toggleNotifications = event => {\r\n    return (dispatch, getState) => {\r\n        const notificationsAnchorEl = getState().manageNotifications.notificationsAnchorEl;\r\n        const notificationsClickedOutside = getState().manageNotifications.notificationsClickedOutside;\r\n        const notificationsClickedOutsideActivated = getState().manageNotifications.notificationsClickedOutsideActivated;\r\n\r\n        // open notifications\r\n        // initialises states\r\n        if (!notificationsAnchorEl) {\r\n            dispatch({\r\n                type: TOGGLE_NOTIFICATIONS,\r\n                notificationsAnchorEl: event.currentTarget,\r\n                notificationsClickedOutsideActivated: true\r\n            });\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: TOGGLE_NOTIFICATIONS,\r\n                notificationsAnchorEl: null,\r\n                notificationsClickedOutsideActivated: false\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const CLOSED_NOTIFICATIONS = 'CLOSED_NOTIFICATIONS'\r\nexport const closeNotifications = event => {\r\n    return (dispatch, getState) => {\r\n        const notificationsAnchorEl = getState().manageNotifications.notificationsAnchorEl;\r\n        const notificationsClickedOutside = getState().manageNotifications.notificationsClickedOutside;\r\n        const notificationsClickedOutsideActivated = getState().manageNotifications.notificationsClickedOutsideActivated;\r\n\r\n        if (Boolean(notificationsAnchorEl)) {\r\n            dispatch({\r\n                type: CLOSED_NOTIFICATIONS,\r\n                notificationsAnchorEl: false,\r\n                notificationsClickedOutside: true\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const LOADING_NOTIFICATIONS = 'LOADING_NOTIFICATIONS';\r\nexport const FINISHED_LOADING_NOTIFICATIONS = 'FINISHED_LOADING_NOTIFICATIONS';\r\nexport const loadNotifications = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_NOTIFICATIONS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadNotifications(user.hasOwnProperty('anid') ? user.anid : user.id)\r\n            .then(notifications => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_NOTIFICATIONS,\r\n                    notifications\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_NOTIFICATIONS,\r\n                    notifications: []\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteANotification = notification => {\r\n    return (dispatch, getState) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(notification.id)\r\n            .remove()\r\n            .then(() => {\r\n                dispatch({\r\n                    type: TOGGLE_NOTIFICATIONS,\r\n                    notificationsAnchorEl: null\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteAllNotifications = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .deleteAllNotifications(user.hasOwnProperty('anid') ? user.anid : user.id);\r\n    }\r\n};\r\n\r\n// Listener ------------------------------------------------------------------------------------------------------------\r\n\r\nlet notificationsListener = null;\r\n\r\nexport const NOTIFICATIONS_LIST_CHANGED = 'NOTIFICATIONS_LIST_CHANGED';\r\nexport const startListeningForNotificationsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!notificationsListener) {\r\n\r\n            const user = getState().auth.user;\r\n\r\n            if (!user) {\r\n                return;\r\n            }\r\n\r\n            notificationsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                .orderByChild('userID')\r\n                .equalTo(user.hasOwnProperty('anid') ? user.anid : user.id);\r\n\r\n            notificationsListener\r\n                .on('child_added', snapshot => {\r\n                    let notification = snapshot.val();\r\n\r\n                    let notifications = [...getState().manageNotifications.notifications];\r\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\r\n                    if (notificationIndex === -1) {\r\n                        dispatch({\r\n                            type: NOTIFICATIONS_LIST_CHANGED,\r\n                            notifications: [...notifications, notification]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            notificationsListener\r\n                .on('child_removed', snapshot => {\r\n                    let notification = snapshot.val();\r\n\r\n                    let notifications = [...getState().manageNotifications.notifications];\r\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\r\n\r\n                    if (notificationIndex !== -1) {\r\n                        notifications.splice(notificationIndex, 1);\r\n                        dispatch({\r\n                            type: NOTIFICATIONS_LIST_CHANGED,\r\n                            notifications\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForNotificationsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (notificationsListener) {\r\n            notificationsListener.off('child_added');\r\n            notificationsListener.off('child_removed');\r\n            notificationsListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {\r\n    Fade,\r\n    List,\r\n    ListItem,\r\n    Paper,\r\n    Popper,\r\n    Typography,\r\n    Divider,\r\n    IconButton,\r\n    Button,\r\n    ClickAwayListener\r\n} from '@material-ui/core';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\r\n        notifications: state.manageNotifications.notifications,\r\n        loadingNotifications: state.manageNotifications.loadingNotifications,\r\n        notificationsLoaded: state.manageNotifications.notificationsLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\r\n        closeNotifications: (event) => dispatch(notificationsActions.closeNotifications(event)),\r\n        loadNotifications: () => dispatch(notificationsActions.loadNotifications()),\r\n        deleteANotification: (notification) => dispatch(notificationsActions.deleteANotification(notification)),\r\n        deleteAllNotifications: () => dispatch(notificationsActions.deleteAllNotifications()),\r\n\r\n        startListeningForNotificationsChanged: () => dispatch(notificationsActions.startListeningForNotificationsChanged()),\r\n        stopListeningForNotificationsChanged: () => dispatch(notificationsActions.stopListeningForNotificationsChanged())\r\n    }\r\n};\r\n\r\nclass NotificationsBox extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadNotifications\r\n        } = this.props;\r\n\r\n        loadNotifications();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            loadingNotifications,\r\n            notificationsLoaded,\r\n\r\n            startListeningForNotificationsChanged\r\n        } = this.props;\r\n\r\n        // notifications have been loaded\r\n        if (!loadingNotifications && notificationsLoaded) {\r\n            startListeningForNotificationsChanged();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForNotificationsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForNotificationsChanged();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            notificationsAnchorEl,\r\n            notifications,\r\n            notificationsLoaded,\r\n\r\n            toggleNotifications,\r\n            closeNotifications,\r\n            deleteANotification,\r\n            deleteAllNotifications\r\n\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <ClickAwayListener onClickAway={closeNotifications} mouseEvent='onMouseUp'>\r\n            <Popper\r\n                open={Boolean(notificationsAnchorEl)}\r\n                anchorEl={notificationsAnchorEl}\r\n                placement=\"bottom-start\"\r\n                disablePortal={false}\r\n                transition\r\n                modifiers={{\r\n                    flip: {\r\n                        enabled: true,\r\n                    },\r\n                    preventOverflow: {\r\n                        enabled: true,\r\n                        boundariesElement: 'scrollParent'\r\n                    }\r\n                }}\r\n                style={{\r\n                    // this zIndex is to ensure the notification box is on top of all other UI elements\r\n                    zIndex: 100\r\n                }}\r\n            >\r\n                {({TransitionProps}) => (\r\n                    <Fade {...TransitionProps} timeout={350} >\r\n                        <Paper elevation={4} square >\r\n                            <Container fluid style={{ padding: 0, maxWidth: 600 }} >\r\n                                <Row noGutters >\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ paddingLeft: 15, paddingRight: 15, paddingTop: 6, paddingBottom: 6, backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                                        <Row noGutters >\r\n                                            <Col xs={10} sm={10} md={10} lg={10} >\r\n                                                <FlexView height=\"100%\" vAlignContent=\"center\" >\r\n                                                    <Typography variant=\"body1\">Notifications</Typography>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                            <Col xs={2} sm={2} md={2} lg={2} >\r\n                                                <FlexView hAlignContent=\"right\" >\r\n                                                    <IconButton style={{ width: 44, height: 44 }} onClick={toggleNotifications} >\r\n                                                        <CloseIcon fontSize=\"small\" />\r\n                                                    </IconButton>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Col>\r\n\r\n                                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                                        <Divider/>\r\n                                    </Col>\r\n\r\n                                    {\r\n                                        notifications.length === 0\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col xs={12} sm={12} md={12} lg={12} style={{ paddingTop: 5, paddingBottom: 5, paddingRight: 18 }} >\r\n                                                <FlexView hAlignContent=\"right\" >\r\n                                                    <Button variant=\"text\" className={css(sharedStyles.no_text_transform, styles.clear_all_text)} size=\"medium\" onClick={deleteAllNotifications} >\r\n                                                        <ClearAllIcon style={{ marginRight: 6 }} />\r\n                                                        Clear all\r\n                                                    </Button>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                    }\r\n\r\n                                    {\r\n                                        notifications.length === 0\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                                <Divider/>\r\n                                            </Col>\r\n                                    }\r\n\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ minHeight: notifications.length === 0 ? 300 : \"None\", maxHeight: 500, overflowY: \"auto\" }} >\r\n                                        {\r\n                                            !notificationsLoaded\r\n                                                ?\r\n                                                <FlexView column height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                    <HashLoader\r\n                                                        color={\r\n                                                            !groupProperties\r\n                                                                ?\r\n                                                                colors.primaryColor\r\n                                                                :\r\n                                                                groupProperties.settings.primaryColor\r\n                                                        }\r\n                                                    />\r\n                                                </FlexView>\r\n                                                :\r\n                                                notifications.length === 0\r\n                                                    ?\r\n                                                    <FlexView column height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                        <NotificationsIcon className={css(styles.notifications_placeholder_icon)} />\r\n                                                        <Typography variant=\"body1\">Your notifications live here</Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <List component=\"ul\" style={{ padding: 0 }} >\r\n                                                        {\r\n                                                            notifications\r\n                                                                .sort((notification1, notification2) => {\r\n                                                                    return (notification2.date - notification1.date)\r\n                                                                })\r\n                                                                .map(notification => (\r\n                                                                    <ListItem\r\n                                                                        component=\"li\"\r\n                                                                        key={notification.id}\r\n                                                                        divider\r\n                                                                        className={css(styles.notification_item)}\r\n                                                                    >\r\n                                                                        <Row noGutters style={{ width: \"100%\", paddingTop: 13, paddingBottom: 13 }} >\r\n                                                                            <Col xs={10} sm={10} md={11} lg={11} style={{ paddingRight: 10 }} >\r\n                                                                                <NavLink\r\n                                                                                    to={\r\n                                                                                        groupUserName\r\n                                                                                            ?\r\n                                                                                            `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${notification.action}`\r\n                                                                                            :\r\n                                                                                            notification.action\r\n                                                                                    }\r\n                                                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                                                    onClick={() => deleteANotification(notification)}\r\n                                                                                >\r\n                                                                                    <FlexView vAlignContent=\"center\" >\r\n                                                                                        <NotificationsIcon className={css(styles.notification_item_icon)} />\r\n                                                                                        <FlexView column marginLeft={14} >\r\n                                                                                            <Typography variant=\"body1\" className={css(styles.black_text)}>{notification.title}</Typography>\r\n                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 4 }}>{notification.message}</Typography>\r\n                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{marginTop: 10}}><u>Sent:{utils.dateTimeInReadableFormat(notification.date)}</u> </Typography>\r\n                                                                                        </FlexView>\r\n                                                                                    </FlexView>\r\n                                                                                </NavLink>\r\n                                                                            </Col>\r\n                                                                            <Col xs={2} sm={2} md={1} lg={1} style={{ paddingLeft: 8, paddingRight: 8 }} >\r\n                                                                                <FlexView width=\"100%\" height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                                                    <IconButton onClick={() => deleteANotification(notification)} >\r\n                                                                                        <DeleteIcon fontSize=\"small\" />\r\n                                                                                    </IconButton>\r\n                                                                                </FlexView>\r\n                                                                            </Col>\r\n                                                                        </Row>\r\n                                                                    </ListItem>\r\n                                                                ))\r\n                                                        }\r\n                                                    </List>\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </Paper>\r\n                    </Fade>\r\n                )}\r\n            </Popper>\r\n            </ClickAwayListener>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NotificationsBox);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    },\r\n\r\n    notifications_placeholder_icon: {\r\n        width: 70,\r\n        height: \"auto\",\r\n        color: colors.gray_300,\r\n        marginBottom: 10\r\n    },\r\n\r\n    notification_item_icon: {\r\n        width: 36,\r\n        height: \"auto\",\r\n        color: colors.gray_300\r\n    },\r\n\r\n    clear_all_text: {\r\n        color: colors.blue_gray_600\r\n    },\r\n\r\n    notification_item: {\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_200\r\n        }\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\r\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport React from \"react\";\r\n\r\nexport enum ExploreGroupsEvents {\r\n    FetchingGroups = \"ExploreGroupsEvents.FetchingGroups\",\r\n    CompleteFetchingGroups = \"ExploreGroupsEvents.CompleteFetchingGroups\",\r\n    FilterChanged = \"ExploreGroupsEvents.FilterChanged\",\r\n    FilterGroupsByName = \"ExploreGroupsEvents.FilterGroupsByName\",\r\n    CancelFilterGroupsByName = \"ExploreGroupsEvents.CancelFilterGroupsByName\",\r\n    FilterGroupsByGroupFilter = \"ExploreGroupsEvents.FilterGroupsByGroupFilter\",\r\n    PaginationChanged = \"ExploreGroupsEvents.PaginationChanged\",\r\n    SendingAccessRequest = \"ExploreGroupsEvents.SendingAccessRequest\",\r\n    CompleteSendingAccessRequest = \"ExploreGroupsEvents.CompleteSendingAccessRequest\",\r\n    RemovingAccessRequest = \"ExploreGroupsEvents.RemovingAccessRequest\",\r\n    CompleteRemovingAccessRequest = \"ExploreGroupsEvents.CompleteRemovingAccessRequest\"\r\n}\r\n\r\nexport interface ExploreGroupsAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteFetchingGroupsAction extends ExploreGroupsAction {\r\n    groups: GroupProperties[];\r\n    accessRequestInstances?: AccessRequestInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterChangedAction extends ExploreGroupsAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface FilterGroupsByGroupFilterAction extends ExploreGroupsAction {\r\n    groupsFiltered: GroupProperties[];\r\n}\r\n\r\nexport interface PaginationChangedAction extends ExploreGroupsAction {\r\n    page: number;\r\n}\r\n\r\nexport interface SendingAccessRequestAction extends ExploreGroupsAction {\r\n    groupID: string;\r\n}\r\n\r\nexport interface CompleteSendingAccessRequestAction extends ExploreGroupsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport interface RemovingAccessRequestAction extends ExploreGroupsAction {\r\n    groupID: string;\r\n}\r\n\r\nexport interface CompleteRemovingAccessRequestAction extends ExploreGroupsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport const fetchGroups: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            accessRequestsInstances,\r\n            nameFilter\r\n        } = getState().ExploreGroupsLocalState;\r\n\r\n        dispatch({\r\n            type: ExploreGroupsEvents.FetchingGroups\r\n        });\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        const completeAction: CompleteFetchingGroupsAction = {\r\n            type: ExploreGroupsEvents.CompleteFetchingGroups,\r\n            groups: []\r\n        };\r\n\r\n        if (!currentUser) {\r\n            completeAction.error = \"Unauthenticated user.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const groupsResponse = await new GroupRepository().fetchGroups(\r\n                nameFilter.trim().length === 0 ? undefined : {name: nameFilter}\r\n            );\r\n            completeAction.groups = groupsResponse.data;\r\n\r\n            const admin: Admin | null = isAdmin(currentUser);\r\n            if (!admin || (admin && !admin.superAdmin)) {\r\n                // user is an issuer, investor, or group admin\r\n                // and access requests have not been fetched\r\n                if (!accessRequestsInstances) {\r\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\r\n                        user: currentUser.id,\r\n                        orderBy: \"user\"\r\n                    });\r\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\r\n                }\r\n            }\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: any) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: ExploreGroupsEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n\r\n        dispatch(action);\r\n\r\n        if (name === \"groupFilter\") {\r\n            dispatch(filterGroupsByGroupFilter());\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterGroupsByName: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreGroupsEvents.FilterGroupsByName\r\n        });\r\n        return dispatch(fetchGroups());\r\n    }\r\n}\r\n\r\nexport const cancelFilteringGroupsByName: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreGroupsEvents.CancelFilterGroupsByName\r\n        });\r\n        return dispatch(fetchGroups());\r\n    }\r\n}\r\n\r\nconst filterGroupsByGroupFilter: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            groupFilter,\r\n            accessRequestsInstances,\r\n            groups\r\n        } = getState().ExploreGroupsLocalState;\r\n\r\n        const AuthenticationState = getState().AuthenticationState;\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const groupsFiltered: GroupProperties[] = [];\r\n\r\n        groups.map(group => {\r\n            let satisfiedFilter = false;\r\n            switch (groupFilter) {\r\n                case \"all\":\r\n                    const admin: Admin | null = isAdmin(currentUser);\r\n                    if (admin && admin.superAdmin) {\r\n                        satisfiedFilter = true;\r\n                    } else {\r\n                        satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\r\n                            groupOfMembership => groupOfMembership.group.anid === group.anid) === -1\r\n                            && accessRequestsInstances !== undefined\r\n                            && accessRequestsInstances.findIndex(\r\n                                accessRequestInstance => accessRequestInstance.group.anid === group.anid) === -1;\r\n                    }\r\n                    break;\r\n                case \"groupsOfMembership\":\r\n                    satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\r\n                        groupOfMembership => groupOfMembership.group.anid === group.anid) !== -1;\r\n                    break;\r\n                case \"groupsOfPendingRequest\":\r\n                    satisfiedFilter = accessRequestsInstances !== undefined\r\n                        && accessRequestsInstances.findIndex(\r\n                            accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if (satisfiedFilter) {\r\n                groupsFiltered.push(group);\r\n            }\r\n        });\r\n\r\n        const action: FilterGroupsByGroupFilterAction = {\r\n            type: ExploreGroupsEvents.FilterGroupsByGroupFilter,\r\n            groupsFiltered: groupsFiltered\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: PaginationChangedAction = {\r\n            type: ExploreGroupsEvents.PaginationChanged,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const sendAccessRequest: ActionCreator<any> = (groupID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const sendingAction: SendingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.SendingAccessRequest,\r\n            groupID\r\n        };\r\n        dispatch(sendingAction);\r\n\r\n        const completeAction: CompleteSendingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.CompleteSendingAccessRequest\r\n        };\r\n\r\n        try {\r\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, groupID);\r\n            const accessRequestInstance: AccessRequestInstance = response.data;\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (currentAccessRequestInstances !== undefined) {\r\n                completeAction.updatedAccessRequestInstances = [\r\n                    ...currentAccessRequestInstances,\r\n                    accessRequestInstance\r\n                ];\r\n            } else {\r\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\r\n            }\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeAccessRequest: ActionCreator<any> = (groupID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const removingAction: RemovingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.RemovingAccessRequest,\r\n            groupID\r\n        };\r\n        dispatch(removingAction);\r\n\r\n        const completeAction: CompleteRemovingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.CompleteRemovingAccessRequest\r\n        };\r\n\r\n        try {\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (!currentAccessRequestInstances) {\r\n                return dispatch(completeAction);\r\n            }\r\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\r\n                accessRequestInstance => accessRequestInstance.group.anid === groupID && accessRequestInstance.user.id === currentUser.id);\r\n            if (accessRequestIndex === -1) {\r\n                return dispatch(completeAction);\r\n            }\r\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\r\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\r\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\r\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\r\n\r\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import Error from \"../../models/error\";\r\nimport {\r\n    CompleteFetchingOffersAction,\r\n    ExploreOffersAction,\r\n    ExploreOffersEvents,\r\n    FilterChangedAction,\r\n    PaginationChangedAction\r\n} from \"./ExploreOffersActions\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {OffersTableStates} from \"../offers-table/OffersTableReducer\";\r\n\r\nexport const maxOffersPerPage: number = 12;\r\n\r\nexport interface ExploreOffersState {\r\n    offerInstances: ProjectInstance[];\r\n    fetchingOffers: boolean;\r\n    offersFetched: boolean;\r\n\r\n    searchFilter: string;\r\n    visibilityFilter: number | \"all\";\r\n    sectorFilter: string | \"all\";\r\n    phaseFilter: string | number | \"all\";\r\n    groupFilter: string | \"all\";\r\n    currentPage: number;\r\n\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ExploreOffersState = {\r\n    offerInstances: [],\r\n    fetchingOffers: false,\r\n    offersFetched: false,\r\n\r\n    searchFilter: \"\",\r\n    visibilityFilter: \"all\",\r\n    sectorFilter: \"all\",\r\n    phaseFilter: FetchProjectsPhaseOptions.LivePitch,\r\n    groupFilter: \"all\",\r\n    currentPage: 1\r\n}\r\n\r\nexport const hasNotFetchedOffers = (state: ExploreOffersState) => {\r\n    return !state.fetchingOffers && !state.offersFetched;\r\n}\r\n\r\nexport const isFetchingOffers = (state: ExploreOffersState) => {\r\n    return state.fetchingOffers;\r\n}\r\n\r\nexport const successfullyFetchedOffers = (state: ExploreOffersState) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const successfullyFetchedOffers2 = (state: OffersTableStates) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const hasOffersForCurrentFilters = (state: ExploreOffersState) => {\r\n    return successfullyFetchedOffers(state) && state.offerInstances.length > 0;\r\n}\r\n\r\nexport const isSearchFilterActive = (state: ExploreOffersState) => {\r\n    return state.searchFilter.trim().length > 0;\r\n}\r\n\r\nexport const calculatePaginationPages = (state: ExploreOffersState) => {\r\n    if (state.offerInstances.length <= maxOffersPerPage) {\r\n        return 1;\r\n    }\r\n    if (state.offerInstances.length % maxOffersPerPage === 0) {\r\n        return (state.offerInstances.length / maxOffersPerPage) | 0;\r\n    }\r\n    return ((state.offerInstances.length / maxOffersPerPage) | 0) + 1;\r\n}\r\n\r\nexport const calculatePaginationIndices = (state: ExploreOffersState) => {\r\n    let startIndex, endIndex;\r\n    startIndex = (state.currentPage - 1) * maxOffersPerPage;\r\n    endIndex = startIndex + maxOffersPerPage - 1;\r\n    if (endIndex > state.offerInstances.length - 1) {\r\n        endIndex = state.offerInstances.length - 1;\r\n    }\r\n    return {\r\n        startIndex,\r\n        endIndex\r\n    };\r\n}\r\n\r\nconst exploreOffersReducer = (state: ExploreOffersState = initialState, action: ExploreOffersAction) => {\r\n    switch (action.type) {\r\n        case ExploreOffersEvents.FetchingOffers:\r\n            return {\r\n                ...state,\r\n                offerInstances: [],\r\n                fetchingOffers: true,\r\n                offersFetched: false,\r\n                error: undefined\r\n            }\r\n        case ExploreOffersEvents.CompleteFetchingOffers:\r\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\r\n            return {\r\n                ...state,\r\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\r\n                fetchingOffers: false,\r\n                offersFetched: true,\r\n                currentPage: 1,\r\n                error: completeFetchingOffersAction.error !== undefined\r\n                    ? {detail: completeFetchingOffersAction.error} : state.error\r\n            }\r\n        case ExploreOffersEvents.FilterChanged:\r\n            console.log(\"Filter changed\")\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value\r\n            }\r\n        case ExploreOffersEvents.ClearSearchFilter:\r\n            return {\r\n                ...state,\r\n                searchFilter: \"\"\r\n            }\r\n        case ExploreOffersEvents.PaginationChanged:\r\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\r\n            return {\r\n                ...state,\r\n                currentPage: paginationChangedAction.page\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default exploreOffersReducer;","/**\r\n * Group properties interface\r\n */\r\nexport default interface GroupProperties {\r\n    anid: string;\r\n    dateAdded: number;\r\n    description: string;\r\n    displayName: string;\r\n    displayNameLower: string;\r\n    groupUserName: string;\r\n    isInvestWest: boolean;\r\n    status: number;\r\n    website?: string;\r\n    logoWithText?: GroupLogo[];\r\n    plainLogo: GroupLogo[];\r\n    settings: GroupSettings;\r\n}\r\n\r\n/**\r\n * This should always be returned when a group is queried by an unauthenticated user\r\n */\r\nexport interface PublicGroupProperties {\r\n    description: string;\r\n    displayName: string;\r\n    groupUserName: string;\r\n}\r\n\r\n/**\r\n * Group settings interface\r\n */\r\nexport interface GroupSettings {\r\n    primaryColor: string;\r\n    secondaryColor: string;\r\n    projectVisibility: number;\r\n    makeInvestorsContactDetailsVisibleToIssuers: boolean;\r\n    PledgeFAQs?: GroupPledgeFAQ[];\r\n}\r\n\r\n/**\r\n * Group logo interface\r\n */\r\nexport interface GroupLogo {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Group pledge faq interface\r\n */\r\nexport interface GroupPledgeFAQ {\r\n    id: string;\r\n    question: string;\r\n    answer: string;\r\n}\r\n\r\nexport const getGroupLogo = (group: GroupProperties | null) => {\r\n    if (!group) {\r\n        return null;\r\n    }\r\n    if (group.plainLogo.length === 0) {\r\n        return null;\r\n    }\r\n    return group.plainLogo[group.plainLogo.findIndex(logo => logo.removed === undefined)].url;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    getPitchCover,\r\n    isImagePitchCover,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectLive,\r\n    isProjectPrivate,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    PitchCover,\r\n    ProjectInstance,\r\n    shouldHideProjectInformationFromUser\r\n} from \"../../models/project\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport '../../shared-js-css-styles/sharedStyles.scss';\r\nimport Routes from \"../../router/routes\";\r\nimport {Box, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from \"react-bootstrap\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport User from \"../../models/user\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\n\r\nconst CoverMaxHeight = 180;\r\n\r\ninterface OfferItemProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    offerInstance: ProjectInstance;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass OfferItem extends Component<OfferItemProps, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            offerInstance\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const pitchCover: PitchCover | null = getPitchCover(offerInstance.projectDetail);\r\n\r\n        return <CustomLink\r\n            url={Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)}\r\n            color=\"none\"\r\n            activeColor=\"none\"\r\n            activeUnderline={false}\r\n            component=\"nav-link\"\r\n            childComponent={\r\n                <Box border={`1px solid ${colors.grey[\"300\"]}`} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Box\r\n                                    height={`${CoverMaxHeight}px`}\r\n                                    width=\"100%\"\r\n                                    bgcolor={appColors.dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100}\r\n                                >\r\n                                    {\r\n                                        shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                            ? <Box display=\"flex\" width=\"100%\" height={CoverMaxHeight} justifyContent=\"center\" >\r\n                                                <Image src={getGroupLogo(offerInstance.group) ?? \"\"} width=\"auto\" height={CoverMaxHeight} style={{ padding: 20, objectFit: \"scale-down\" }} />\r\n                                            </Box>\r\n                                            : !pitchCover\r\n                                            ? null\r\n                                            : isImagePitchCover(pitchCover)\r\n                                                ? <Image src={pitchCover.url} width=\"100%\" height={CoverMaxHeight} style={{ objectFit: \"contain\" }} />\r\n                                                : <ReactPlayer url={pitchCover.url} light={false} width=\"100%\" height={CoverMaxHeight} playing={false} controls={false} />\r\n                                    }\r\n\r\n                                    {/** Group logo to be displayed at the top-right corner */}\r\n                                    <Image\r\n                                        src={getGroupLogo(offerInstance.group) ?? \"\"}\r\n                                        roundedCircle\r\n                                        height={46}\r\n                                        width={46}\r\n                                        style={{\r\n                                            position: \"absolute\",\r\n                                            right: 0,\r\n                                            top: 0,\r\n                                            zIndex: 1,\r\n                                            padding: \"5px\",\r\n                                            marginTop: \"5px\",\r\n                                            marginRight: \"5px\",\r\n                                            backgroundColor: colors.grey[\"300\"],\r\n                                            objectFit: \"contain\"\r\n                                        }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Divider/>\r\n\r\n                                <Box padding=\"14px\" >\r\n                                    {/** Project basic information */}\r\n                                    <Box>\r\n                                        {/** Project title */}\r\n                                        <Box marginY=\"6px\" >\r\n                                            <Typography noWrap variant=\"h6\" align=\"left\" >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? \"Members only offer\"\r\n                                                        : offerInstance.projectDetail.projectName\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n\r\n                                        {/** Sector / Description */}\r\n                                        <Box color={colors.grey[\"700\"]} >\r\n                                            <title className=\"projectInfo\">\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `in ${offerInstance.projectDetail.sector} sector`\r\n                                                        : offerInstance.projectDetail.description\r\n                                                }\r\n                                            </title>\r\n                                        </Box>\r\n\r\n                                        {/** By issuer */}\r\n                                        <Box color=\"black\" marginTop=\"8px\" >\r\n                                            <Typography variant=\"body2\" noWrap >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : isProjectCreatedByGroupAdmin(offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : `by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n                                    {/** Divider */}\r\n                                    <Box bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} height=\"3px\" marginTop=\"30px\" marginBottom=\"15px\" />\r\n\r\n                                    {/** Project phase information */}\r\n                                    <Box>\r\n                                        <Typography variant=\"body2\" color=\"primary\" align=\"left\" >\r\n                                            {\r\n                                                offerInstance.projectDetail.Pitch.fundRequired\r\n                                                    ? `${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`\r\n                                                    : \"\"\r\n                                            }\r\n                                        </Typography>\r\n\r\n                                        <Box marginTop=\"20px\" >\r\n                                            <Typography variant=\"body2\" align=\"left\" color=\"textSecondary\" >\r\n                                                {\r\n                                                    !isProjectLive(offerInstance.projectDetail)\r\n                                                        ? \"Offer expired\"\r\n                                                        : `${utils.dateDiff(offerInstance.projectDetail.Pitch.expiredDate)} days to go`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n                                    {/** Project visibility information */}\r\n                                    <Box display=\"flex\" marginTop=\"15px\" justifyContent=\"flex-end\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} >\r\n                                        <OverlayTrigger\r\n                                            trigger={[\"hover\", \"focus\"]}\r\n                                            placement=\"bottom\"\r\n                                            flip\r\n                                            overlay={\r\n                                                <Tooltip id=\"tooltip-bottom\" >\r\n                                                    {\r\n                                                        isProjectPublic(offerInstance.projectDetail)\r\n                                                            ? \"This is a public offer.\"\r\n                                                            : isProjectRestricted(offerInstance.projectDetail)\r\n                                                            ? \"This is a restricted offer.\"\r\n                                                            : isProjectPrivate(offerInstance.projectDetail)\r\n                                                                ? \"This is a private offer.\"\r\n                                                                : null\r\n                                                    }\r\n                                                </Tooltip>\r\n                                            }\r\n                                        >\r\n                                            {\r\n                                                isProjectPublic(offerInstance.projectDetail)\r\n                                                    ? <PublicIcon/>\r\n                                                    : isProjectRestricted(offerInstance.projectDetail)\r\n                                                    ? <RestrictedIcon/>\r\n                                                    : isProjectPrivate(offerInstance.projectDetail)\r\n                                                        ? <PrivateIcon/>\r\n                                                        : <Box/>\r\n                                            }\r\n                                        </OverlayTrigger>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Box>\r\n            }\r\n        />;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OfferItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Box, colors, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\ninterface RiskWarningProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nclass RiskWarning extends Component<RiskWarningProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Invest West\"\r\n            );\r\n\r\n        let splits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        const urlText = splits[1];\r\n\r\n        return <Box\r\n            border={`1px solid ${colors.grey[\"600\"]}`}\r\n            borderRadius=\"24px\"\r\n            padding=\"24px\"\r\n            bgcolor={colors.grey[\"100\"]}\r\n        >\r\n            <Typography variant=\"body1\" align=\"left\" ><u>Risk warning</u></Typography>\r\n            <Box marginTop=\"18px\" whiteSpace=\"pre-line\" >\r\n                <Typography variant=\"body1\" align=\"justify\" >\r\n                    {splits[0]}\r\n                    <CustomLink\r\n                        url={Routes.nonGroupRiskWarning}\r\n                        target=\"_blank\"\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                        activeColor=\"none\"\r\n                        activeUnderline={true}\r\n                        component=\"nav-link\"\r\n                        childComponent={ urlText }\r\n                    />\r\n                    {splits[2]}\r\n                </Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarning);","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {\r\n    Box,\r\n    Button, colors,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreOffersState,\r\n    hasNotFetchedOffers,\r\n    hasOffersForCurrentFilters,\r\n    isFetchingOffers,\r\n    isSearchFilterActive,\r\n    successfullyFetchedOffers,\r\n    successfullyFetchedOffers2\r\n} from \"./ExploreOffersReducer\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\r\nimport {clearSearchFilter, fetchOffers, filterChanged, onSearchEnter, paginationChanged} from \"./ExploreOffersActions\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport OfferItem from \"./OfferItem\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\nimport RiskWarning from \"../risk-warning/RiskWarning\";\r\nimport User, {isIssuer} from \"../../models/user\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {FetchProjectsOrderByOptions, FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {Close, Search} from \"@material-ui/icons\";\r\nimport {\r\n    hasErrorExportingCsv,\r\n    hasErrorFetchingOffers,\r\n    hasGroupsSelect,\r\n    isExportingCsv,\r\n    isFilteringOffersByName,\r\n    OffersTableStates,\r\n} from \"../offers-table/OffersTableReducer\";\r\nimport Admin from \"../../models/admin\";\r\n\r\ninterface ExploreOffersProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    onSearchEnter: (event: FormEvent) => any;\r\n    fetchOffers: (orderBy?: string) => any;\r\n    filterChanged: (event: any) => any;\r\n    clearSearchFilter: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n    OffersTableLocalState: OffersTableStates;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreOffersLocalState: state.ExploreOffersLocalState,\r\n        OffersTableLocalState: state.OffersTableLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onSearchEnter: (event: FormEvent) => dispatch(onSearchEnter(event)),\r\n        fetchOffers: (orderBy?: string) => dispatch(fetchOffers(orderBy)),\r\n        filterChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(filterChanged(event)),\r\n        clearSearchFilter: () => dispatch(clearSearchFilter()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreOffers extends Component<ExploreOffersProps, {}> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedOffers(this.props.ExploreOffersLocalState)) {\r\n            this.props.fetchOffers(FetchProjectsOrderByOptions.Phase);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreOffersLocalState,\r\n            fetchOffers,\r\n            filterChanged,\r\n            clearSearchFilter,\r\n            paginationChanged,\r\n            onSearchEnter,\r\n            OffersTableLocalState\r\n        } = this.props;\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreOffersLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreOffersLocalState);\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row>\r\n                {/** Group filter for Explore offers */}\r\n                <Col xs={12} sm={12} md={6} lg={4} >\r\n                    <Box paddingY=\"6px\" >\r\n                        <Typography variant=\"body1\">Group:</Typography>\r\n                        <Box height=\"8px\" />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"groupFilter\"\r\n                                value={OffersTableLocalState.groupFilter}\r\n                                onChange={filterChanged}\r\n                                input={<OutlinedInput/>}\r\n                                disabled={!successfullyFetchedOffers2(OffersTableLocalState)}\r\n                            >\r\n                                <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                {\r\n                                    !hasGroupsSelect(OffersTableLocalState)\r\n                                    || !OffersTableLocalState.groupsSelect\r\n                                        ? null\r\n                                        : OffersTableLocalState.groupsSelect.map(group =>\r\n                                            <MenuItem\r\n                                                key={group.anid}\r\n                                                value={group.anid}\r\n                                            >\r\n                                                {group.displayName}\r\n                                            </MenuItem>\r\n                                        )\r\n                                }\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n\r\n\r\n                {/** Sector filter */}\r\n                <Col xs={12} sm={12} md={6} lg={4} >\r\n                    <Box paddingY=\"6px\" >\r\n                        <Typography variant=\"body1\">Sector:</Typography>\r\n                        <Box height=\"8px\" />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"sectorFilter\"\r\n                                value={ExploreOffersLocalState.sectorFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem key=\"all\" value=\"all\">All sectors</MenuItem>\r\n\r\n                                {\r\n                                    !ManageSystemAttributesState.systemAttributes\r\n                                        ? null\r\n                                        : ManageSystemAttributesState.systemAttributes.Sectors.map((sector, index) => (\r\n                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                        ))\r\n                                }\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Phase filter */}\r\n                <Col xs={12} sm={12} md={6} lg={4} >\r\n                    <Box paddingY=\"6px\" >\r\n                        <Typography variant=\"body1\">Status:</Typography>\r\n                        <Box height=\"8px\" />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"phaseFilter\"\r\n                                value={ExploreOffersLocalState.phaseFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem key={FetchProjectsPhaseOptions.LivePitch} value={FetchProjectsPhaseOptions.LivePitch}>Live</MenuItem>\r\n\r\n                                <MenuItem key={FetchProjectsPhaseOptions.ExpiredPitch} value={FetchProjectsPhaseOptions.ExpiredPitch}>Expired</MenuItem>\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Search bar */}\r\n            <Row style={{ marginTop: 40 }} >\r\n                <Col xs={12} sm={12} md={8} lg={4} >\r\n                    <Box\r\n                        width=\"100%\"\r\n                        height=\"100%\"\r\n                        bgcolor=\"white\"\r\n                        border={2}\r\n                        borderColor={colors.grey[300]}\r\n                        borderRadius=\"20px\"\r\n                        paddingX=\"5px\"\r\n                        paddingY=\"8px\"\r\n                    >\r\n                        <form onSubmit={onSearchEnter} >\r\n                            <InputBase\r\n                                fullWidth\r\n                                name=\"searchFilter\"\r\n                                value={ExploreOffersLocalState.searchFilter}\r\n                                placeholder=\"Search name, group or issuer\"\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                startAdornment={\r\n                                    <InputAdornment position=\"start\" >\r\n                                        <IconButton\r\n                                            type=\"submit\"\r\n                                            onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)}\r\n                                            disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                        >\r\n                                            <Search fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </InputAdornment>\r\n                                }\r\n                                endAdornment={\r\n                                    !isSearchFilterActive(ExploreOffersLocalState)\r\n                                        ? null\r\n                                        : <InputAdornment position=\"end\" >\r\n                                            <IconButton onClick={() => clearSearchFilter()} >\r\n                                                <Close fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                }\r\n                            />\r\n                        </form>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" marginY=\"50px\" justifyContent=\"center\" >\r\n                                <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Offers */}\r\n            {\r\n                !successfullyFetchedOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            {\r\n                                !hasOffersForCurrentFilters(ExploreOffersLocalState)\r\n                                    ? <Box marginY=\"80px\" >\r\n                                        <Typography align=\"center\" variant=\"h5\" >There are no offers available using your current filter criteria</Typography>\r\n                                    </Box>\r\n                                    : <Box>\r\n                                        {/** Explore n offers + refresh button */}\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"row\"\r\n                                            alignItems=\"center\"\r\n                                            marginTop=\"50px\"\r\n                                            marginBottom=\"25px\"\r\n                                        >\r\n                                            <Typography variant=\"h6\">Explore</Typography>\r\n                                            <Typography variant=\"h6\" color=\"primary\">&nbsp;<b>{ExploreOffersLocalState.offerInstances.length} offers</b></Typography>\r\n                                            <Box marginLeft=\"8px\" >\r\n                                                <IconButton onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)} >\r\n                                                    <RefreshIcon/>\r\n                                                </IconButton>\r\n                                            </Box>\r\n                                        </Box>\r\n\r\n                                        {/** Create offer button (only available for issuers) */}\r\n                                        {\r\n                                            !AuthenticationState.currentUser\r\n                                                ? null\r\n                                                : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : <Box marginBottom=\"40px\" >\r\n                                                    <CustomLink\r\n                                                        url={Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)}\r\n                                                        target=\"_blank\"\r\n                                                        color=\"none\"\r\n                                                        activeColor=\"none\"\r\n                                                        activeUnderline={false}\r\n                                                        component=\"a\"\r\n                                                        childComponent={\r\n                                                            <Button size=\"medium\" variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} >\r\n                                                                <Box marginRight=\"8px\" >\r\n                                                                    <CreateIcon fontSize=\"small\" />\r\n                                                                </Box>Create new offer\r\n                                                            </Button>\r\n                                                        }\r\n                                                    />\r\n                                                </Box>\r\n                                        }\r\n\r\n                                        {/** Offers area */}\r\n                                        <Row>\r\n                                            {\r\n                                                ExploreOffersLocalState.offerInstances\r\n                                                    .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                                    .map(offerInstance => (\r\n                                                        <Col key={offerInstance.projectDetail.id} xs={12} sm={12} md={6} lg={3} >\r\n                                                            <Box margin=\"16px\" >\r\n                                                                <OfferItem offerInstance={offerInstance} />\r\n                                                            </Box>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Box>\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" marginTop=\"55px\" >\r\n                                <Pagination count={paginationPages} page={ExploreOffersLocalState.currentPage} color=\"primary\" onChange={paginationChanged} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Risk warning */}\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Box marginTop=\"100px\" >\r\n                        <RiskWarning/>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreOffers);","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface FetchAccessRequestsOptions {\r\n    user?: string;\r\n    group?: string;\r\n    orderBy: \"user\" | \"group\";\r\n}\r\n\r\nexport default class AccessRequestRepository {\r\n\r\n    /**\r\n     * Fetch access requests\r\n     */\r\n    public async fetchAccessRequests(options?: FetchAccessRequestsOptions) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listAccessRequestsRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: options ?? null\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Create access request\r\n     *\r\n     * @param userID\r\n     * @param groupID\r\n     */\r\n    public async createAccessRequest(userID: string, groupID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.createAccessRequestRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        userID,\r\n                        groupID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Remove access request\r\n     *\r\n     * @param requestID\r\n     */\r\n    public async removeAccessRequest(requestID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"delete\",\r\n                ApiRoutes.removeAccessRequestRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        requestID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport enum ClientEmailTypes {\r\n    EnquiryEmail,\r\n    InvitationEmail,\r\n    PitchPublished,\r\n    NewPitchSubmitted,\r\n    ContactResource,\r\n    ContactPitchOwner\r\n}\r\n\r\nexport interface EmailData {\r\n    emailType: number;\r\n    emailInfo: EmailInfo;\r\n}\r\n\r\nexport interface EmailInfo {\r\n    receiver: string | string[];\r\n    sender?: string;\r\n\r\n    [others: string]: any;\r\n}\r\n\r\nexport interface UserInvitationEmailData extends EmailInfo {\r\n    groupName: string;\r\n    groupLogo: string;\r\n    groupWebsite: string;\r\n    groupContactUs: string;\r\n    userType: string;\r\n    signupURL: string;\r\n}\r\n\r\nexport interface EnquiryEmailData extends EmailInfo {\r\n    isAuthenticatedRequest: boolean;\r\n    subject: string;\r\n    description: string;\r\n    senderName: string;\r\n    senderPhone: string;\r\n}\r\n\r\nexport interface PitchPublishedEmailData extends EmailInfo {\r\n    projectID: string;\r\n}\r\n\r\nexport interface NewPitchSubmittedEmailData extends EmailInfo {\r\n    projectID: string;\r\n}\r\n\r\nexport interface ContactResourceEmailData extends EmailInfo {\r\n    userName: string;\r\n    userCompanyName?: string;\r\n}\r\n\r\nexport interface ContactPitchOwnerEmailData extends EmailInfo {\r\n    userName: string;\r\n    projectName: string;\r\n}\r\n\r\nexport default class EmailRepository {\r\n\r\n    /**\r\n     * Send email\r\n     *\r\n     * @param data\r\n     */\r\n    public async sendEmail(data: EmailData) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n}","import {\r\n    CompleteFetchingGroupsAction,\r\n    CompleteRemovingAccessRequestAction,\r\n    CompleteSendingAccessRequestAction,\r\n    ExploreGroupsAction,\r\n    ExploreGroupsEvents,\r\n    FilterChangedAction,\r\n    FilterGroupsByGroupFilterAction,\r\n    PaginationChangedAction, RemovingAccessRequestAction, SendingAccessRequestAction\r\n} from \"./ExploreGroupsActions\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport Error from \"../../models/error\";\r\nimport {AccessRequestInstance} from \"../../models/access_request\";\r\n\r\nexport const maxGroupsPerPage: number = 12;\r\n\r\nexport interface ExploreGroupsState {\r\n    groups: GroupProperties[];\r\n    accessRequestsInstances?: AccessRequestInstance[]; // only available for issuer or investor\r\n    fetchingGroups: boolean;\r\n    groupsFetched: boolean;\r\n\r\n    filteringGroupsByName: boolean;\r\n    nameFilter: string;\r\n    groupFilter: \"all\" | \"groupsOfMembership\" | \"groupsOfPendingRequest\";\r\n    groupsFiltered: GroupProperties[];\r\n\r\n    currentPage: number;\r\n\r\n    error?: Error;\r\n\r\n    sendingAccessRequestToGroup?: string;\r\n    errorSendingAccessRequest?: Error;\r\n\r\n    removingAccessRequestFromGroup?: string;\r\n    errorRemovingAccessRequest?: Error;\r\n}\r\n\r\nconst initialState: ExploreGroupsState = {\r\n    groups: [],\r\n    fetchingGroups: false,\r\n    groupsFetched: false,\r\n\r\n    filteringGroupsByName: false,\r\n    nameFilter: \"\",\r\n    groupFilter: \"all\",\r\n    groupsFiltered: [],\r\n\r\n    currentPage: 1\r\n}\r\n\r\nexport const hasNotFetchedGroups = (state: ExploreGroupsState) => {\r\n    return !state.groupsFetched && !state.fetchingGroups;\r\n}\r\n\r\nexport const isFetchingGroups = (state: ExploreGroupsState) => {\r\n    return !state.groupsFetched && state.fetchingGroups;\r\n}\r\n\r\nexport const successfullyFetchedGroups = (state: ExploreGroupsState) => {\r\n    return state.groupsFetched && !state.fetchingGroups && state.error === undefined;\r\n}\r\n\r\nexport const isFilteringGroupsByName = (state: ExploreGroupsState) => {\r\n    return state.filteringGroupsByName;\r\n}\r\n\r\nexport const hasGroupsForCurrentFilters = (state: ExploreGroupsState) => {\r\n    return successfullyFetchedGroups(state) && state.groupsFiltered.length > 0;\r\n}\r\n\r\nexport const hasAccessRequestsBeenSatisfied = (state: ExploreGroupsState) => {\r\n    return successfullyFetchedGroups(state) && state.accessRequestsInstances !== undefined;\r\n}\r\n\r\nexport const calculatePaginationPages = (state: ExploreGroupsState) => {\r\n    if (state.groupsFiltered.length <= maxGroupsPerPage) {\r\n        return 1;\r\n    }\r\n    if (state.groupsFiltered.length % maxGroupsPerPage === 0) {\r\n        return (state.groupsFiltered.length / maxGroupsPerPage) | 0;\r\n    }\r\n    return ((state.groupsFiltered.length / maxGroupsPerPage) | 0) + 1;\r\n}\r\n\r\nexport const calculatePaginationIndices = (state: ExploreGroupsState) => {\r\n    let startIndex, endIndex;\r\n    startIndex = (state.currentPage - 1) * maxGroupsPerPage;\r\n    endIndex = startIndex + maxGroupsPerPage - 1;\r\n    if (endIndex > state.groupsFiltered.length - 1) {\r\n        endIndex = state.groupsFiltered.length - 1;\r\n    }\r\n    return {\r\n        startIndex,\r\n        endIndex\r\n    };\r\n}\r\n\r\nexport const isSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return state.sendingAccessRequestToGroup !== undefined && state.sendingAccessRequestToGroup === groupID;\r\n}\r\n\r\nexport const hasErrorSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return !isSendingAccessRequest(state, groupID) && state.errorSendingAccessRequest !== undefined;\r\n}\r\n\r\nexport const isRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return state.removingAccessRequestFromGroup !== undefined && state.removingAccessRequestFromGroup === groupID;\r\n}\r\n\r\nexport const hasErrorRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return !isRemovingAccessRequest(state, groupID) && state.errorRemovingAccessRequest !== undefined;\r\n}\r\n\r\nconst exploreGroupsReducer = (state = initialState, action: ExploreGroupsAction) => {\r\n    switch (action.type) {\r\n        case ExploreGroupsEvents.FetchingGroups:\r\n            return {\r\n                ...state,\r\n                groups: [],\r\n                fetchingGroups: true,\r\n                groupsFetched: false,\r\n                error: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteFetchingGroups:\r\n            const completeFetchingGroupsAction: CompleteFetchingGroupsAction = action as CompleteFetchingGroupsAction;\r\n            return {\r\n                ...state,\r\n                groups: [...completeFetchingGroupsAction.groups],\r\n                accessRequestsInstances: completeFetchingGroupsAction.accessRequestInstances !== undefined\r\n                    ? [...completeFetchingGroupsAction.accessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                fetchingGroups: false,\r\n                groupsFetched: true,\r\n                currentPage: 1,\r\n                error: completeFetchingGroupsAction.error !== undefined\r\n                    ? {detail: completeFetchingGroupsAction.error} : state.error\r\n            }\r\n        case ExploreGroupsEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value\r\n            }\r\n        case ExploreGroupsEvents.FilterGroupsByName:\r\n            return {\r\n                ...state,\r\n                filteringGroupsByName: true\r\n            }\r\n        case ExploreGroupsEvents.CancelFilterGroupsByName:\r\n            return {\r\n                ...state,\r\n                nameFilter: \"\",\r\n                filteringGroupsByName: false\r\n            }\r\n        case ExploreGroupsEvents.FilterGroupsByGroupFilter:\r\n            const filterGroupsByGroupFilterAction: FilterGroupsByGroupFilterAction = action as FilterGroupsByGroupFilterAction;\r\n            return {\r\n                ...state,\r\n                groupsFiltered: [...filterGroupsByGroupFilterAction.groupsFiltered],\r\n                currentPage: 1\r\n            }\r\n        case ExploreGroupsEvents.PaginationChanged:\r\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\r\n            return {\r\n                ...state,\r\n                currentPage: paginationChangedAction.page\r\n            }\r\n        case ExploreGroupsEvents.SendingAccessRequest:\r\n            const sendingAccessRequestAction: SendingAccessRequestAction = action as SendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequestToGroup: sendingAccessRequestAction.groupID,\r\n                errorSendingAccessRequest: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteSendingAccessRequest:\r\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequestToGroup: undefined,\r\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\r\n            }\r\n        case ExploreGroupsEvents.RemovingAccessRequest:\r\n            const removingAccessRequestAction: RemovingAccessRequestAction = action as RemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequestFromGroup: removingAccessRequestAction.groupID,\r\n                errorRemovingAccessRequest: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteRemovingAccessRequest:\r\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequestFromGroup: undefined,\r\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default exploreGroupsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Button, Card, CardActionArea, CardActions, colors, Typography} from \"@material-ui/core\";\r\nimport GroupProperties, {getGroupLogo} from \"../../models/group_properties\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {\r\n    ExploreGroupsState,\r\n    hasAccessRequestsBeenSatisfied,\r\n    isRemovingAccessRequest,\r\n    isSendingAccessRequest\r\n} from \"./ExploreGroupsReducer\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {CheckCircle} from \"@material-ui/icons\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {removeAccessRequest, sendAccessRequest} from \"./ExploreGroupsActions\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\n\r\ninterface GroupItemProps {\r\n    group: GroupProperties;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    sendAccessRequest: (groupID: string) => any;\r\n    removeAccessRequest: (groupID: string) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        sendAccessRequest: (groupID: string) => dispatch(sendAccessRequest(groupID)),\r\n        removeAccessRequest: (groupID: string) => dispatch(removeAccessRequest(groupID))\r\n    }\r\n}\r\n\r\nclass GroupItem extends Component<GroupItemProps, any> {\r\n    render() {\r\n        const {\r\n            group,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            sendAccessRequest,\r\n            removeAccessRequest\r\n        } = this.props;\r\n\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        let groupMember: GroupOfMembership | undefined = AuthenticationState.groupsOfMembership.find(\r\n            groupOfMembership => groupOfMembership.group.anid === group.anid);\r\n\r\n        let hasRequestedToAccessGroup: boolean = false;\r\n        if (hasAccessRequestsBeenSatisfied(ExploreGroupsLocalState)) {\r\n            hasRequestedToAccessGroup = ExploreGroupsLocalState.accessRequestsInstances\r\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\r\n        }\r\n\r\n        return <Box\r\n            marginY=\"18px\"\r\n        >\r\n            <Card>\r\n                <CustomLink\r\n                    url={Routes.constructGroupDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, group.groupUserName)}\r\n                    color=\"black\"\r\n                    activeColor=\"none\"\r\n                    activeUnderline={false}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <CardActionArea\r\n                            onClick={\r\n                                () => {\r\n                                    if (!isAdmin(currentUser)) {\r\n                                        realtimeDBUtils.trackActivity({\r\n                                            userID: currentUser.id,\r\n                                            activityType: DB_CONST.ACTIVITY_TYPE_CLICK,\r\n                                            interactedObjectLocation: DB_CONST.GROUP_PROPERTIES_CHILD,\r\n                                            interactedObjectID: group.anid,\r\n                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM.replace(\"%group%\", group.displayName),\r\n                                            action: Routes.nonGroupViewGroup.replace(\":groupID\", group.anid)\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        >\r\n                            <Box>\r\n                                <Box display=\"flex\" height=\"220px\" justifyContent=\"center\" bgcolor={colors.grey[\"200\"]} >\r\n                                    <Image\r\n                                        alt={`${group.displayName} logo`}\r\n                                        src={getGroupLogo(group) ?? undefined}\r\n                                        height=\"auto\"\r\n                                        width=\"100%\"\r\n                                        style={{ padding: 40, objectFit: \"scale-down\" }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Box paddingX=\"18px\" paddingY=\"20px\" >\r\n                                    <Typography variant=\"subtitle1\" align=\"center\" noWrap ><b>{group.displayName}</b></Typography>\r\n\r\n                                    {\r\n                                        !groupMember\r\n                                            ? null\r\n                                            : <Box display=\"flex\" flexDirection=\"row\" marginTop=\"15px\" alignItems=\"center\" justifyContent=\"center\" >\r\n                                                <CheckCircle fontSize=\"small\" color=\"primary\" />\r\n                                                <Box width=\"6px\" />\r\n                                                <Typography variant=\"body1\" align=\"center\" noWrap color=\"textSecondary\" >\r\n                                                    {\r\n                                                        getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\r\n                                                            ? \"Home member\"\r\n                                                            : \"Platform member\"\r\n                                                    }\r\n                                                </Typography>\r\n                                            </Box>\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n                        </CardActionArea>\r\n                    }\r\n                />\r\n\r\n                {\r\n                    isAdmin(currentUser)\r\n                        ? null\r\n                        : groupMember\r\n                        ? null\r\n                        : <CardActions style={{ padding: 0 }} >\r\n                            <Box display=\"flex\" width=\"100%\" padding=\"18px\" justifyContent=\"center\" >\r\n                                {\r\n                                    !hasRequestedToAccessGroup\r\n                                        ? <Button\r\n                                            fullWidth\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => sendAccessRequest(group.anid)}\r\n                                            disabled={isSendingAccessRequest(ExploreGroupsLocalState, group.anid)}\r\n                                        >\r\n                                            {\r\n                                                isSendingAccessRequest(ExploreGroupsLocalState, group.anid)\r\n                                                    ? \"Sending request ...\"\r\n                                                    : \"Join Group\"\r\n                                            }\r\n                                        </Button>\r\n                                        : <Button\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => removeAccessRequest(group.anid)}\r\n                                            disabled={isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)}\r\n                                        >\r\n                                            {\r\n                                                isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)\r\n                                                    ? \"Cancelling ...\"\r\n                                                    : \"Cancel request\"\r\n                                            }\r\n                                        </Button>\r\n                                }\r\n                            </Box>\r\n                        </CardActions>\r\n                }\r\n            </Card>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreGroupsState,\r\n    hasGroupsForCurrentFilters,\r\n    hasNotFetchedGroups,\r\n    isFetchingGroups,\r\n    isFilteringGroupsByName,\r\n    successfullyFetchedGroups\r\n} from \"./ExploreGroupsReducer\";\r\nimport {\r\n    Box,\r\n    Card,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Close, Refresh, Search} from \"@material-ui/icons\";\r\nimport {\r\n    cancelFilteringGroupsByName,\r\n    fetchGroups,\r\n    filterChanged,\r\n    filterGroupsByName,\r\n    paginationChanged\r\n} from \"./ExploreGroupsActions\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport GroupItem from \"./GroupItem\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\n\r\ninterface ExploreGroupsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    fetchGroups: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterGroupsByName: () => any;\r\n    cancelFilteringGroupsByName: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        fetchGroups: () => dispatch(fetchGroups()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterGroupsByName: () => dispatch(filterGroupsByName()),\r\n        cancelFilteringGroupsByName: () => dispatch(cancelFilteringGroupsByName()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreGroups extends Component<ExploreGroupsProps, any> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedGroups(this.props.ExploreGroupsLocalState)) {\r\n            this.props.fetchGroups();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            fetchGroups,\r\n            filterChanged,\r\n            filterGroupsByName,\r\n            cancelFilteringGroupsByName,\r\n            paginationChanged\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreGroupsLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreGroupsLocalState);\r\n\r\n        return <Box paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"} paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"} >\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 4, offset: 4}} >\r\n                    <Card elevation={0} >\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            alignItems=\"center\"\r\n                            bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            color=\"white\"\r\n                            paddingY=\"28px\"\r\n                        >\r\n                            <Typography variant=\"h6\" align=\"center\">Groups on Invest West network</Typography>\r\n\r\n                            <Box height=\"28px\" />\r\n\r\n                            <Box width=\"85%\" height=\"100%\" bgcolor=\"white\" borderRadius=\"50px\" >\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    name=\"nameFilter\"\r\n                                    value={ExploreGroupsLocalState.nameFilter}\r\n                                    placeholder=\"Search group by name\"\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <IconButton\r\n                                                onClick={() => filterGroupsByName()}\r\n                                                disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                            >\r\n                                                <Search fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        !isFilteringGroupsByName(ExploreGroupsLocalState)\r\n                                            ? null\r\n                                            : <InputAdornment position=\"end\" >\r\n                                                <IconButton onClick={() => cancelFilteringGroupsByName()} >\r\n                                                    <Close fontSize=\"small\"/>\r\n                                                </IconButton>\r\n                                            </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Filters (only available for issuer and investor) */}\r\n            {\r\n                isAdmin(AuthenticationState.currentUser)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={8} sm={8} md={3} lg={2} >\r\n                            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"48px\" >\r\n                                <Select\r\n                                    fullWidth\r\n                                    name=\"groupFilter\"\r\n                                    value={ExploreGroupsLocalState.groupFilter}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    input={<OutlinedInput/>}\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                >\r\n                                    <MenuItem key=\"all\" value=\"all\">All groups</MenuItem>\r\n                                    <MenuItem key=\"groupsOfMembership\" value=\"groupsOfMembership\">My groups</MenuItem>\r\n                                    <MenuItem key=\"groupsOfPendingRequest\" value=\"groupsOfPendingRequest\">Pending requests</MenuItem>\r\n                                </Select>\r\n\r\n                                <Box width=\"15px\" />\r\n\r\n                                <IconButton onClick={() => fetchGroups()} >\r\n                                    <Refresh/>\r\n                                </IconButton>\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" marginY=\"80px\" justifyContent=\"center\" >\r\n                                <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Groups area */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : !hasGroupsForCurrentFilters(ExploreGroupsLocalState)\r\n                    ? <Box marginY=\"80px\" >\r\n                        <Typography align=\"center\" variant=\"h5\" > There are no groups available using your current filter criteria </Typography>\r\n                    </Box>\r\n                    : <Box marginTop=\"30px\" >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Row>\r\n                                    {\r\n                                        ExploreGroupsLocalState.groupsFiltered\r\n                                            .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                            .map(group =>\r\n                                                <Col key={group.anid} xs={12} sm={12} md={4} lg={3} xl={2} >\r\n                                                    <GroupItem group={group} />\r\n                                                </Col>\r\n                                            )\r\n                                    }\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                    </Box>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" marginTop=\"55px\" >\r\n                                <Pagination count={paginationPages} page={ExploreGroupsLocalState.currentPage} color=\"primary\" onChange={paginationChanged} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreGroups);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {FeedbackSnackbarTypes} from \"./FeedbackSnackbarReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\n\r\nexport enum FeedbackSnackbarEvents {\r\n    Open = \"FeedbackSnackbarEvents.Open\",\r\n    Close = \"FeedbackSnackbarEvents.Close\"\r\n}\r\n\r\nexport interface FeedbackSnackbarAction extends Action {\r\n\r\n}\r\n\r\nexport interface OpenFeedbackSnackbarAction extends Action {\r\n    snackbarType: FeedbackSnackbarTypes;\r\n    message: string;\r\n}\r\n\r\nexport const openFeedbackSnackbar: ActionCreator<any> = (type: FeedbackSnackbarTypes, message: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: OpenFeedbackSnackbarAction = {\r\n            type: FeedbackSnackbarEvents.Open,\r\n            snackbarType: type,\r\n            message: message\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const closeFeedbackSnackbar: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: FeedbackSnackbarEvents.Close\r\n        });\r\n    }\r\n}","import {FeedbackSnackbarAction, FeedbackSnackbarEvents, OpenFeedbackSnackbarAction} from \"./FeedbackSnackbarActions\";\r\n\r\nexport enum FeedbackSnackbarTypes {\r\n    Success = \"success\",\r\n    Information = \"info\",\r\n    Error = \"error\",\r\n    Warning = \"warning\"\r\n}\r\n\r\nexport interface FeedbackSnackbarState {\r\n    type: FeedbackSnackbarTypes;\r\n    open: boolean;\r\n    message: string;\r\n}\r\n\r\nconst initialState: FeedbackSnackbarState = {\r\n    type: FeedbackSnackbarTypes.Success,\r\n    open: false,\r\n    message: \"\"\r\n};\r\n\r\nconst feedbackSnackbarReducerNew = (state = initialState, action: FeedbackSnackbarAction) => {\r\n    switch (action.type) {\r\n        case FeedbackSnackbarEvents.Open:\r\n            const openFeedbackSnackbarAction: OpenFeedbackSnackbarAction = action as OpenFeedbackSnackbarAction;\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                type: openFeedbackSnackbarAction.snackbarType,\r\n                message: openFeedbackSnackbarAction.message\r\n            }\r\n        case FeedbackSnackbarEvents.Close:\r\n            return {\r\n                ...state,\r\n                open: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default feedbackSnackbarReducerNew;","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport EmailRepository, {ClientEmailTypes, ContactResourceEmailData} from \"../../api/repositories/EmailRepository\";\r\nimport User, {hasBusinessProfile} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport {openFeedbackSnackbar} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ResourcesEvents {\r\n    DetailedPageToggleContactDialog = \"ResourcesEvents.DetailedPageToggleContactDialog\",\r\n    DetailedPageSendingContactEmail = \"ResourcesEvents.DetailedPageSendingContactEmail\",\r\n    DetailedPageCompleteSendingContactEmail = \"ResourcesEvents.DetailedPageCompleteSendingContactEmail\"\r\n}\r\n\r\nexport interface ResourcesAction extends Action {\r\n\r\n}\r\n\r\nexport interface DetailedPageCompleteSendingContactEmailAction extends ResourcesAction {\r\n    error?: string;\r\n}\r\n\r\nexport const toggleContactResourceDialog: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ResourcesEvents.DetailedPageToggleContactDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const sendContactEmail: ActionCreator<any> = (receiver: string | string[]) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            detailedPageSendingContactEmail\r\n        } = getState().ResourcesLocalState;\r\n\r\n        if (detailedPageSendingContactEmail) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            currentUser\r\n        } = getState().AuthenticationState;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const admin: Admin | null = isAdmin(currentUser);\r\n\r\n        dispatch({\r\n            type: ResourcesEvents.DetailedPageSendingContactEmail\r\n        });\r\n\r\n        const completeAction: DetailedPageCompleteSendingContactEmailAction = {\r\n            type: ResourcesEvents.DetailedPageCompleteSendingContactEmail\r\n        };\r\n\r\n        try {\r\n            const emailInfo: ContactResourceEmailData = {\r\n                receiver: receiver,\r\n                sender: currentUser.email,\r\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\r\n                userCompanyName: `${admin ? \"Not specified\" : hasBusinessProfile((currentUser as User))\r\n                    ? (currentUser as User).BusinessProfile?.companyName : \"Not specified.\"}`\r\n            };\r\n\r\n            await new EmailRepository().sendEmail({\r\n                emailType: ClientEmailTypes.ContactResource,\r\n                emailInfo: emailInfo\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport React from \"react\";\r\nimport {SystemAttributes} from \"../../../../models/system_attributes\";\r\nimport SystemAttributesRepository from \"../../../../api/repositories/SystemAttributesRepository\";\r\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ManageSectorsEvents {\r\n    SetSectors = \"ManageSectorsEvents.SetSectors\",\r\n    ToggleAddNewSector = \"ManageSectorsEvents.ToggleAddNewSector\",\r\n    AddNewSectorTextChanged = \"ManageSectorsEvents.AddNewSectorTextChanged\",\r\n    SavingSectorsChanges = \"ManageSectorsEvents.SavingSectorsChanges\",\r\n    CompletedSavingSectorsChanges = \"ManageSectorsEvents.CompletedSavingSectorsChanges\"\r\n}\r\n\r\nexport interface ManageSectorsAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetSectorsAction extends ManageSectorsAction {\r\n    sectors: string[];\r\n}\r\n\r\nexport interface AddNewSectorTextChangedAction extends ManageSectorsAction {\r\n    value: string;\r\n}\r\n\r\nexport interface CompletedSavingSectorsChangesAction extends ManageSectorsAction {\r\n    error?: string;\r\n}\r\n\r\nexport const setSectors: ActionCreator<any> = (sectors: string[]) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetSectorsAction = {\r\n            type: ManageSectorsEvents.SetSectors,\r\n            sectors: [...sectors]\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const toggleAddNewSector: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ManageSectorsEvents.ToggleAddNewSector\r\n        });\r\n    }\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: AddNewSectorTextChangedAction = {\r\n            type: ManageSectorsEvents.AddNewSectorTextChanged,\r\n            value: event.target.value\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const addNewSector: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const newSector: string = getState().ManageSectorsLocalState.newSector;\r\n        sectors.push(newSector);\r\n        dispatch(setSectors(sectors));\r\n        return dispatch(toggleAddNewSector());\r\n    }\r\n}\r\n\r\nexport const deleteSector: ActionCreator<any> = (sector: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const index = sectors.findIndex(eSector => eSector === sector);\r\n        if (index !== -1) {\r\n            sectors.splice(index, 1);\r\n        }\r\n        return dispatch(setSectors(sectors));\r\n    }\r\n}\r\n\r\nexport const cancelSectorsChanges: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const systemAttributes: SystemAttributes | null = getState().ManageSystemAttributesState.systemAttributes;\r\n        if (!systemAttributes) {\r\n            return;\r\n        }\r\n        return dispatch(setSectors([...systemAttributes.Sectors]));\r\n    }\r\n}\r\n\r\nexport const saveSectorsChanges: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const systemAttributes: SystemAttributes | null = JSON.parse(JSON.stringify(getState().ManageSystemAttributesState.systemAttributes));\r\n        if (!systemAttributes) {\r\n            return;\r\n        }\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const completeAction: CompletedSavingSectorsChangesAction = {\r\n            type: ManageSectorsEvents.CompletedSavingSectorsChanges\r\n        };\r\n        try {\r\n            systemAttributes.Sectors = sectors;\r\n            dispatch({\r\n                type: ManageSectorsEvents.SavingSectorsChanges\r\n            });\r\n            await new SystemAttributesRepository().updateSystemAttributes(systemAttributes);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {DetailedPageCompleteSendingContactEmailAction, ResourcesAction, ResourcesEvents} from \"./ResourcesActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface ResourcesState {\r\n    detailedPageContactDialogOpen: boolean;\r\n    detailedPageSendingContactEmail: boolean;\r\n    detailedPageErrorSendingContactEmail?: Error;\r\n}\r\n\r\nconst initialState: ResourcesState = {\r\n    detailedPageContactDialogOpen: false,\r\n    detailedPageSendingContactEmail: false\r\n}\r\n\r\nexport const isDetailedPageSendingContactEmail = (state: ResourcesState) => {\r\n    return state.detailedPageSendingContactEmail;\r\n}\r\n\r\nexport const hasErrorSendingContactEmailInDetailedPage = (state: ResourcesState) => {\r\n    return !state.detailedPageSendingContactEmail && state.detailedPageErrorSendingContactEmail !== undefined;\r\n}\r\n\r\nconst resourcesReducer = (state = initialState, action: ResourcesAction) => {\r\n    switch (action.type) {\r\n        case ResourcesEvents.DetailedPageToggleContactDialog:\r\n            return {\r\n                ...state,\r\n                detailedPageContactDialogOpen: !state.detailedPageContactDialogOpen\r\n            }\r\n        case ResourcesEvents.DetailedPageSendingContactEmail:\r\n            return {\r\n                ...state,\r\n                detailedPageSendingContactEmail: true,\r\n                detailedPageErrorSendingContactEmail: undefined\r\n            }\r\n        case ResourcesEvents.DetailedPageCompleteSendingContactEmail:\r\n            const detailedPageCompleteSendingContactEmailAction: DetailedPageCompleteSendingContactEmailAction = action as DetailedPageCompleteSendingContactEmailAction;\r\n            return {\r\n                ...state,\r\n                detailedPageContactDialogOpen: false,\r\n                detailedPageSendingContactEmail: false,\r\n                detailedPageErrorSendingContactEmail: detailedPageCompleteSendingContactEmailAction.error !== undefined\r\n                    ? {detail: detailedPageCompleteSendingContactEmailAction.error}\r\n                    : state.detailedPageErrorSendingContactEmail\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default resourcesReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\r\nimport {sendContactEmail, toggleContactResourceDialog} from \"../ResourcesActions\";\r\nimport {isDetailedPageSendingContactEmail, ResourcesState} from \"../ResourcesReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface ContactResourceDialogProps {\r\n    // set when using the component inside the page\r\n    resourceName: string;\r\n    // set when using the component inside the page\r\n    resourceEmail: string | string[];\r\n    ResourcesLocalState: ResourcesState;\r\n    toggle: () => any;\r\n    sendContactEmail: (receiver: string | string[]) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggle: () => dispatch(toggleContactResourceDialog()),\r\n        sendContactEmail: (receiver: string | string[]) => dispatch(sendContactEmail(receiver))\r\n    }\r\n}\r\n\r\nclass ContactResourceDialog extends Component<ContactResourceDialogProps, any> {\r\n    render() {\r\n        const {\r\n            resourceName,\r\n            resourceEmail,\r\n            ResourcesLocalState,\r\n            toggle,\r\n            sendContactEmail\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            open={ResourcesLocalState.detailedPageContactDialogOpen}\r\n            onClose={() => toggle()}\r\n        >\r\n            <DialogContent>\r\n                <Box\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                >\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        align=\"left\"\r\n                    >\r\n                        {`We will send an email to ${resourceName} asking them to contact you.`}\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        align=\"left\"\r\n                    >\r\n                        {`Are you happy for Invest West to share your email address with ${resourceName}?`}\r\n                    </Typography>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    isDetailedPageSendingContactEmail(ResourcesLocalState)\r\n                        ? null\r\n                        : <Button\r\n                            onClick={() => toggle()}\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                }\r\n                <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    className={css(sharedStyles.no_text_transform)}\r\n                    disabled={isDetailedPageSendingContactEmail(ResourcesLocalState)}\r\n                    onClick={() => sendContactEmail(resourceEmail)}\r\n                >\r\n                    {\r\n                        isDetailedPageSendingContactEmail(ResourcesLocalState)\r\n                            ? `Sending email to ${resourceName} ...`\r\n                            : \"Yes\"\r\n                    }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactResourceDialog);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Slide, SlideProps, Snackbar} from \"@material-ui/core\";\r\nimport {FeedbackSnackbarState} from \"./FeedbackSnackbarReducer\";\r\nimport {closeFeedbackSnackbar} from \"./FeedbackSnackbarActions\";\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\ninterface FeedbackSnackbarProps {\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    close: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        FeedbackSnackbarLocalState: state.FeedbackSnackbarLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        close: () => dispatch(closeFeedbackSnackbar())\r\n    }\r\n}\r\n\r\nclass FeedbackSnackbarNew extends Component<FeedbackSnackbarProps, any> {\r\n    render() {\r\n        const {\r\n            FeedbackSnackbarLocalState,\r\n            close\r\n        } = this.props;\r\n\r\n        return <Snackbar\r\n            open={FeedbackSnackbarLocalState.open}\r\n            anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"center\",\r\n            }}\r\n            autoHideDuration={2500}\r\n            onClose={close}\r\n            TransitionComponent={SlideTransitionUp}\r\n            transitionDuration={{\r\n                enter: 130,\r\n                exit: 130\r\n            }}\r\n        >\r\n            <Alert variant=\"filled\" severity={FeedbackSnackbarLocalState.type} onClose={close}>{FeedbackSnackbarLocalState.message}</Alert>\r\n        </Snackbar>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbarNew);\r\n\r\n/**\r\n * Slide transition - direction up\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionUp = React.forwardRef((props: SlideProps, ref) => <Slide {...props} ref={ref}\r\n                                                                                     direction=\"up\"/>);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\n\r\ninterface KeltieProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\ninterface KeltieResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst keltieLogo: string = `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`;\r\nconst sullivanFountainImg: string = `${process.env.PUBLIC_URL}/resources/keltie/sullivan-fountain.jpg`;\r\nconst richardLawrenceImg: string = `${process.env.PUBLIC_URL}/resources/keltie/richard-lawrence.jpg`;\r\n\r\nconst keltieDocuments: KeltieResource[] = [\r\n    {\r\n        name: \"An introduction to IP\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/an-introduction-to-ip.pdf`\r\n    },\r\n    {\r\n        name: \"Designs - Info Sheet\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/designs-info-sheet.pdf`\r\n    },\r\n    {\r\n        name: \"Patent searching overview guide\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patent-searching-overview-guide.pdf`\r\n    },\r\n    {\r\n        name: \"How to get the best from your IP\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/how-to-get-the-best-from-your-ip.pptx`\r\n    },\r\n    {\r\n        name: \"The tool box\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/the-tool-box.pptx`\r\n    }\r\n];\r\n\r\nconst keltieVideos: KeltieResource[] = [\r\n    {\r\n        name: \"IP for Startups: Top 5 Things You Need to Know\",\r\n        url: \"https://www.youtube.com/watch?v=r5mOCm2tzjg\"\r\n    },\r\n    {\r\n        name: \"Patents for non patent attorneys - Episode 1\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-1.mp4`\r\n    },\r\n    {\r\n        name: \"Patents for non patent attorneys - Episode 2\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-2.mp4`\r\n    },\r\n    {\r\n        name: \"Artificial Intelligence and Patents: AI Inventors\",\r\n        url: \"https://www.youtube.com/watch?v=QZOC2ZLWjPI\"\r\n    },\r\n    {\r\n        name: \"Patents and the Internet of Things\",\r\n        url: \"https://www.youtube.com/watch?v=BnyvbgUSjv4\"\r\n    },\r\n    {\r\n        name: \"IP Tips: Reducing patent spend (in light of Covid-19)\",\r\n        url: \"https://www.youtube.com/watch?v=7v00c9VpS-E\"\r\n    }\r\n];\r\n\r\nclass Keltie extends Component<KeltieProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} xl={{span: 6, offset: 3}}>\r\n                    <Paper>\r\n                        <Box padding=\"20px\">\r\n                            {/** Header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\r\n                                <Row noGutters style={{ width: \"100%\" }}>\r\n        \r\n                                    <Col sm={12} md={12} lg={12}>\r\n                                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\" paddingX=\"25px\">\r\n                                            <Box marginY=\"30px\">\r\n                                                <Typography variant=\"h3\" align=\"center\">Intellectual Property</Typography>\r\n                                            </Box>\r\n                                            <Typography variant=\"h6\" align=\"center\">A collection of resources to help entrepreneurs better understand Intellectual Property issues. This content is kindly provided by our friends at Keltie LLP.</Typography>\r\n                                        </Box>\r\n                                    </Col>\r\n                                    <Col sm={12} md={12} lg={12}>\r\n                                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" width=\"100%\" height=\"100%\">\r\n                                            <ReactPlayer url={keltieVideos[0].url} height=\"50vh\" width=\"100%\" playing={false} controls={true}/>\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Box height=\"30px\"/>\r\n\r\n                                <Row noGutters style={{ width: \"100%\"}}>\r\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\r\n                                        <Divider/>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Box height=\"30px\"/>\r\n\r\n                                <Row noGutters style={{ width: \"100%\" }}>\r\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\r\n                                        <Typography variant=\"body1\" align=\"center\">\r\n                                            Intellectual property comprises the intangible business assets that are the\r\n                                            result of creativity. In a technology business, much or even most of the\r\n                                            value of the business may lie in the intellectual property that it owns or\r\n                                            controls. While this asset value is significant, the main role of\r\n                                            intellectual property is usually to support the commercial strategy of the\r\n                                            business. It is therefore very important to understand what intellectual\r\n                                            property is needed by a business to support its commercial strategy, so that\r\n                                            the business can make good decisions about identifying and securing the\r\n                                            intellectual property that it needs as efficiently as possible.\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Tips */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Top 5 Things You Need to Know</Typography>\r\n                                <Box height=\"20px\"/>\r\n                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\r\n                                    <ol>\r\n                                        <li>\r\n                                            There are four main forms of IP Protection\r\n                                            <br/>\r\n                                            <ol type=\"a\">\r\n                                                <li><i>Patents</i> for technological innovations,</li>\r\n                                                <li><i>Trademarks</i> for branding,</li>\r\n                                                <li><i>Registered</i> Designs for the look and feel of a product,</li>\r\n                                                <li><i>Copyright</i> for creative works such as instruction manuals or\r\n                                                    software code.\r\n                                                </li>\r\n                                            </ol>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Registered vs. unregistered rights\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    There are differences in strength of registered vs unregistered\r\n                                                    rights, as well as their costs and timescales. Its important to\r\n                                                    choose the right option for your business.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Application vs. granted rights\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    When discussing registered rights, always be clear whether you have\r\n                                                    made an application for rights, or actually have granted rights.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Assessing risk - registrability searching vs Freedom To Operate (FTO)\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    Owning a registered right, be it a trade mark, patent or registered\r\n                                                    design, does not mean that you automatically have the right to use\r\n                                                    it.\r\n                                                </li>\r\n                                                <li>\r\n                                                    Two types of searching are therefore common with IP. The first is\r\n                                                    performed to understand the chances of your application passing the\r\n                                                    registration process (i.e. patentability searching or trade mark\r\n                                                    registrability searching), whilst the second considers whether your\r\n                                                    proposed commercial activities will be impacted by pre-existing\r\n                                                    rights.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            IP rights are jurisdictional\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li> IP rights are only enforceable in the country or region they have been granted.</li>\r\n                                            </ul>\r\n                                        </li>\r\n                                    </ol>\r\n                                </Typography>\r\n                                <br/>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    The UK IPO (Intellectual Property Office) provide funding for IP audits and support\r\n                                    for start-ups. <b>For more information on accessing IP audit funding in the South West,\r\n                                    follow this link</b>&nbsp;\r\n                                    <a href=\"https://www.businesswest.co.uk/about/partners-programmes/innovate2succeed\" target=\"_blank\">Innovate UK EDGE | Business West</a>.\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Resources</Typography>\r\n                                <Box height=\"20px\"/>\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    {\r\n                                        keltieDocuments.map((document: any) => (\r\n                                            <CustomLink\r\n                                                key={document.name}\r\n                                                url={document.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"12px\">\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box width=\"10px\"/>\r\n                                                        <Typography variant=\"body1\" align=\"left\">{document.name}</Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Training (videos) */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Training</Typography>\r\n                                <Box height=\"30px\"/>\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    {\r\n                                        keltieVideos.map((video: any, index: number) =>\r\n                                            <Box key={index} marginBottom=\"20px\">\r\n                                                <Row style={{ width: \"100%\" }}>\r\n                                                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                                                        <ReactPlayer url={video.url} height=\"auto\" width=\"100%\" playing={false} controls={true}/>\r\n                                                    </Col>\r\n                                                    <Col xs={12} sm={12} md={8} lg={9}>\r\n                                                        <Typography variant=\"subtitle1\" align=\"left\"><b>{video.name}</b></Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Box>\r\n                                        )\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" >\r\n                                <Typography variant=\"h6\" align=\"left\">About us</Typography>\r\n                                <Box height=\"15px\" />\r\n                                <Typography variant=\"body1\" align=\"justify\" >\r\n                                    Keltie is an intellectual property firm with a unique personality. A firm thats\r\n                                    renowned for its excellence, earned by putting talented, energetic and principled\r\n                                    people at its heart.\r\n                                    <br/><br/>\r\n                                    Based in Europe but with global reach, we specialise in IP law and management. Our\r\n                                    clients benefit from an extraordinarily experienced and multi-faceted group of IP\r\n                                    experts. Our team includes patent, trade mark and design attorneys who work on every\r\n                                    technology and in all commercial fields.\r\n                                    <br/><br/>\r\n                                    Sullivan Fountain and Richard Lawrence at the Keltie Cotswolds office serve the\r\n                                    South West region and would be delighted to discuss your IP challenges further.\r\n                                </Typography>\r\n                                <Box height=\"40px\" />\r\n                                <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" >\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={keltieLogo}\r\n                                                alt=\"Keltie logo\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{ objectFit: \"cover\" }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box width=\"25px\" />\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com/staff/sullivan-fountain.html\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={sullivanFountainImg}\r\n                                                alt=\"Sullivan Fountain\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{ objectFit: \"cover\" }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box width=\"25px\" />\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com/staff/richard-lawrence.html\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image src={richardLawrenceImg} alt=\"Richard Lawrence\" width={MediaQueryState.isMobile ? 100 : 145} height={MediaQueryState.isMobile ? 100 : 145} style={{ objectFit: \"cover\" }} />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                                <Box height=\"60px\" />\r\n                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                                    <Box bgcolor=\"#52155A\" color=\"white\" clone >\r\n                                        <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => toggleContactResourceDialog()} > Contact us </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box height=\"20px\" />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Keltie LLP\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"sullivan.fountain@keltie.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Keltie);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Card, colors, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {Resource} from \"./Resources\";\r\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface ResourceItemProps {\r\n    resource: Resource;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nclass ResourceItem extends Component<ResourceItemProps, any> {\r\n    render() {\r\n        const {\r\n            resource,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            marginY=\"18px\"\r\n        >\r\n            <Card>\r\n                <CustomLink\r\n                    url={Routes.constructViewResourceDetailRoute(\r\n                        ManageGroupUrlState.groupNameFromUrl ?? null, resource.name)}\r\n                    color=\"black\"\r\n                    activeColor=\"none\"\r\n                    activeUnderline={false}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Box>\r\n                            <Box display=\"flex\" height=\"220px\" justifyContent=\"center\" bgcolor={colors.grey[\"200\"]}>\r\n                                <Image alt={`${resource.name} logo`} src={resource.logo} height=\"auto\" width=\"100%\" style={{ padding: 40, objectFit: \"scale-down\" }} />\r\n                            </Box>\r\n\r\n                            <Box paddingX=\"18px\" paddingY=\"20px\">\r\n                                <Typography variant=\"subtitle1\" align=\"center\" noWrap><b>{resource.name}</b></Typography>\r\n                            </Box>\r\n                        </Box>\r\n                    }\r\n                />\r\n            </Card>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\n\r\ninterface FounderCatalystProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\ninterface FounderCatalystResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst founderCatalystLogo: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`;\r\nconst justynWaterworthImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/justyn-waterworth.jpeg`;\r\nconst samSimpsonImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/sam-simpson.jpeg`;\r\nconst charlesFrankImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/charles-frank.jpeg`;\r\n\r\nconst founderCatalystResources: FounderCatalystResource[] = [\r\n    {\r\n        name: \"Model Articles of Association\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-articles-of-association.pdf`\r\n    },\r\n    {\r\n        name: \"Model Board Minutes\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-board-minutes.pdf`\r\n    },\r\n    {\r\n        name: \"Model Subscription & Shareholders Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-subscription-and-shareholder-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model Founder Service Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-founder-service-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model IP Assignment\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-ip-assignment.pdf`\r\n    },\r\n    {\r\n        name: \"Model Disclosure Letter\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-disclosure-letter.pdf`\r\n    },\r\n    {\r\n        name: \"Model Non-disclosure Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-non-disclosure-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model Term Sheet\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-term-sheet.pdf`\r\n    }\r\n];\r\n\r\nclass FounderCatalyst extends Component<FounderCatalystProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        width: \"100%\"\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={5}\r\n                                        lg={4}\r\n                                        xl={3}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"center\"\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Image\r\n                                                src={founderCatalystLogo}\r\n                                                alt=\"Founder Catalyst Logo\"\r\n                                                width=\"100%\"\r\n                                                height=\"auto\"\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        </Box>\r\n                                    </Col>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={7}\r\n                                        lg={8}\r\n                                        xl={9}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"column\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"start\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Box\r\n                                                marginY=\"30px\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h4\"\r\n                                                    align=\"left\"\r\n                                                >\r\n                                                    Founder Catalyst\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                align=\"left\"\r\n                                            >\r\n                                                Legal paperwork for founders raising investment.\r\n                                                <br/><br/>\r\n                                                A collection of resources to help entrepreneurs better understand the\r\n                                                legal requirements when equity fundraising. This content is kindly\r\n                                                provided by our friends at FounderCatalyst.\r\n                                                <br/><br/>\r\n                                                When raising investment for your business, the legal journey can be\r\n                                                slow,\r\n                                                frustrating and expensive. When do you need a lawyer? How do you find a\r\n                                                good one? How can you afford them? This page aims to demystify some of\r\n                                                the process by showing you what documents you and your investors likely\r\n                                                to need as part of your fund-raising process.\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Tips */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    8 reasons why founders use FounderCatalysts platform\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <ol>\r\n                                        <li>\r\n                                            Save over 3,500. The traditional lawyer approach costs between 5,000 to\r\n                                            10,000. FounderCatalyst is 1,495 plus VAT, fixed!\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Simplifying the legal process. The FounderCatalyst platform is designed for\r\n                                            founders, to be as simple and intuitive to use as possible. The platform\r\n                                            works by asking you a series of questions in a logical order, with detailed\r\n                                            explanations alongside.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Up-to-date legal documents. Trusted documents based on the British Venture\r\n                                            Capital Associations (BVCA) model documents, used by many of the UKs\r\n                                            leading law firms.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            By using the FounderCatalyst platform, angel investors know you are more\r\n                                            likely to be investment ready and due diligence will be easier. A real\r\n                                            differentiator for you in the crowded funding market.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Time is risk. The conventional legal approach can be slow and frustrating.\r\n                                            By using the FounderCatalyst platform, get your legals completed in as\r\n                                            little as 30 minutes. Updates in minutes rather than days. Deal momentum is\r\n                                            key to your funding success.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Unsure and still want to use an advisor? No problem. By using both founder\r\n                                            and advisor roles on the platform, your trusted advisor can help as much or\r\n                                            as little as you want  so you still achieve significant time and cost\r\n                                            savings.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            EIS and SEIS advance assurance a must? Proven expertise on hand to help you\r\n                                            achieve this important tax relief for your investors, at no extra charge.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Invest West has negotiated a further 10% discount for our members. Please\r\n                                            sign up via the button below to receive your discount.\r\n                                            <br/><br/>\r\n                                            <CustomLink\r\n                                                url=\"http://www.foundercatalyst.com/v/INVESTWEST\"\r\n                                                target=\"_blank\"\r\n                                                color=\"none\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={false}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        bgcolor=\"#31C2DE\"\r\n                                                        color=\"white\"\r\n                                                        clone\r\n                                                    >\r\n                                                        <Button\r\n                                                            variant=\"contained\"\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                        >\r\n                                                            10% Discount\r\n                                                        </Button>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        </li>\r\n                                    </ol>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What documents are you and your investors likely to need?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <ol>\r\n                                        <li>\r\n                                            <b>Initial Term Sheet:</b> this summarises all the key points of the deal\r\n                                            you are offering to potential investors.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Founder Service Agreement:</b> one for each founder - it is an agreement\r\n                                            between you and the company, very similar to an employment contract.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>IP Assignment Letter:</b> this ensures that all intellectual property\r\n                                            relevant to the company has been transferred by you and other founders to\r\n                                            the company itself.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Subscription and Shareholders' Agreement (SSA):</b> this document details\r\n                                            the agreement between you and your fellow founders, the company, any\r\n                                            existing shareholders and your new investors.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Articles of Association:</b> this document works alongside the SSA and\r\n                                            contains the company's constitution.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Cap Table:</b> one for before investment and one for after. These\r\n                                            provide details of your current and future shareholders.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Resolutions:</b> for both shareholders and directors. These formally\r\n                                            allow the company to take on the new investment you are seeking.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Disclosure Letter:</b> this enables you to formally disclose any issues\r\n                                            relating to your business to your potential investors.\r\n                                        </li>\r\n                                    </ol>\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        founderCatalystResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    FounderCatalyst was created by a team of successful entrepreneurs, angel investors\r\n                                    and lawyers to simplify and accelerate the early-stage investment legal journey.\r\n                                    <br/><br/>\r\n                                    FounderCatalysts aim is to be the trusted legal platform of choice, simplifying and\r\n                                    managing the funding process, raising everyones chances of success.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"row\"\r\n                                    justifyContent=\"center\"\r\n                                >\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/justynwaterworth/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={justynWaterworthImg}\r\n                                                alt=\"Justyn Waterworth\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/samsimpson1/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={samSimpsonImg}\r\n                                                alt=\"Sam Simpson\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/charlesfrankspeechlys/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={charlesFrankImg}\r\n                                                alt=\"Charles Frank\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#31C2DE\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Founder Catalyst\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"justyn@foundercatalyst.com\", \"sam@foundercatalyst.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FounderCatalyst);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\ninterface GrantFundingProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\nconst grantFundingLogo: string = `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`;\r\n\r\ninterface GrantFundingResource {\r\n    name: string;\r\n    url: string;\r\n    img: string;\r\n}\r\n\r\nconst grantFundingResources: GrantFundingResource[] = [\r\n    {\r\n        name: \"Our Services Brochure\",\r\n        url: \"https://drive.google.com/open?id=1-GiFZT-maCglNUo-7UWJrezpXL64hLz2\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/our-services-brochure.png`\r\n    },\r\n    {\r\n        name: \"The Grant Report 2020\",\r\n        url: \"https://drive.google.com/open?id=1Wz-1dDroReh4s7UspQTQJ-tSafNnv7eg\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/the-grant-report-2020.png`\r\n    },\r\n    {\r\n        name: \"Blog - Are You Missing Out on R&D Tax Credits?\",\r\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-are-you-missing-out-on-rd-tax-credits.png`\r\n    },\r\n    {\r\n        name: \"Blog - When is the Right Time to Apply for Grant Funding?\",\r\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-when-is-the-right-time-to-apply-for-grant-funding.png`\r\n    },\r\n    {\r\n        name: \"Granted Consultancy Introduction\",\r\n        url: \"https://vimeo.com/317446864\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/granted-consultancy-introduction.png`\r\n    },\r\n    {\r\n        name: \"How to Know If Your Project is Eligible for R&D Grant Funding\",\r\n        url: \"https://vimeo.com/317450389\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/how-to-know-if-your-project-is-eligible-for-rd-grant-funding.png`\r\n    }\r\n];\r\n\r\nclass GrantFunding extends Component<GrantFundingProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h4\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Grant Funding\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What are the Benefits of Grant Funding?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        There are two main types of grants:\r\n                                        <ol>\r\n                                            <li>\r\n                                                Capital/Business Growth grants and\r\n                                            </li>\r\n                                            <li>\r\n                                                R&D grants.\r\n                                            </li>\r\n                                        </ol>\r\n                                        Using Business Growth grants enables bigger, more impactful projects to be\r\n                                        realised by covering capital expenditure e.g. buildings or machinery, with\r\n                                        project success often being predicated on job growth.\r\n                                        <br/><br/>\r\n                                        Research and Development (R&D) grants allow a significant reduction in an\r\n                                        innovative products time to market, beating the competition and establishing\r\n                                        first-to-market status. This can have a pronounced impact on your business\r\n                                        through the increase of commercial returns and subsequent business growth.\r\n                                        <br/><br/>\r\n                                        Other benefits of grant funding include:\r\n                                        <br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                No Debt - no costs or need to provide security\r\n                                            </li>\r\n                                            <li>\r\n                                                No Equity giveaway - ensuring you retain control\r\n                                            </li>\r\n                                            <li>\r\n                                                Access to Partners  funding may cover the costs of academic and\r\n                                                commercial experts and attract renowned organisations\r\n                                            </li>\r\n                                            <li>\r\n                                                External Validation  via a competitive process that has been\r\n                                                scrutinised, supporting later access to investors.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    How do you know you are eligible for an R&D grant?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"10px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        The main focus when applying for R&D grant funding should be on the outputs of a\r\n                                        defined project. There are typically four categories for assessing project\r\n                                        eligibility:\r\n                                        <br/>\r\n                                        <ol>\r\n                                            <li>\r\n                                                <b>Innovation</b> - Is your R&D project novel, disruptive and innovative\r\n                                                with wider economic, social and environmental impacts?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Scalable</b> - Does your project have high commercial growth (and\r\n                                                ideally\r\n                                                export) potential?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>IP Assignment Letter:</b> this ensures that all intellectual property\r\n                                                relevant to the company has been transferred by you and other founders\r\n                                                to\r\n                                                the company itself.\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Funding</b> - are you seeking 50k-5m funding for feasibility,\r\n                                                prototyping and/or testing?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Business</b> - Have you proven the concept, put a team of (UK/EU)\r\n                                                experts in place and investigated IP protection?\r\n                                            </li>\r\n                                        </ol>\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What Does the Application Process Typically Look Like?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        As a guide, it typically takes between 9-12 months from engaging with Granted\r\n                                        Consultancy to first drawdown of grant funds. The process involves taking into\r\n                                        account finding the right funding competition, developing the application,\r\n                                        waiting during the assessment window, progressing through due diligence and then\r\n                                        completing project kick off.\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Why Use a Grant Funding Consultancy?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        There are many different factors that will improve your chance of grant funding\r\n                                        success; a grant funding consultancy will know where to find suitable funding,\r\n                                        how to access it successfully and how to use it to best effect. Granted let you\r\n                                        focus on your business, saving you time while we write the grant application for\r\n                                        you.\r\n                                        <br/><br/>\r\n                                        A good consultancy will have pertinent sector expertise, the ability to upskill\r\n                                        at a rapid pace in new technologies, and experience of working with companies of\r\n                                        all sizes.\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        grantFundingResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <Image\r\n                                                            src={resource.img}\r\n                                                            alt={resource.name}\r\n                                                            style={{\r\n                                                                objectFit: \"cover\"\r\n                                                            }}\r\n                                                        />\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    Granted Consultancy are an in-house team of funding specialists with a demonstrable\r\n                                    10-year track record of securing non-dilutive funding for innovative companies,\r\n                                    raising over 85m in grant funding and 2.5m in R&D Tax Credits for clients.\r\n                                    <br/><br/>\r\n                                    Our full range of non-dilutive funding services (grant writing, project management,\r\n                                    training and R&D tax credit support) allow our clients to focus on their business.\r\n                                    Our experience covers the full lifespan of business maturities, from start-ups to\r\n                                    multinationals.\r\n                                    <br/><br/>\r\n                                    Granted Consultancys expertise spans a variety of cutting-edge technologies with a\r\n                                    focus on four key areas:\r\n                                    <ul>\r\n                                        <li>\r\n                                            AI, Digital and Data\r\n                                        </li>\r\n                                        <li>\r\n                                            Clean-tech and Agri-tech\r\n                                        </li>\r\n                                        <li>\r\n                                            Health, Life Sciences and Education\r\n                                        </li>\r\n                                        <li>\r\n                                            Manufacturing, Mobility and Materials\r\n                                        </li>\r\n                                    </ul>\r\n                                    <br/><br/>\r\n                                    The Granted team thrives on learning about new technologies, innovative business\r\n                                    models and the people behind them  then taking that information and translating it\r\n                                    into a language and format that funders can understand.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box>\r\n                                    <CustomLink\r\n                                        url=\"https://grantedltd.co.uk\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={grantFundingLogo}\r\n                                                alt=\"logo\"\r\n                                                width={MediaQueryState.isMobile ? \"100%\" : 400}\r\n                                                height=\"100%\"\r\n                                                style={{\r\n                                                    objectFit: \"contain\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body1\"\r\n                                >\r\n                                    <b>Get in touch! </b>\r\n                                    <br/>\r\n                                    If you have an R&D project that you would like to explore funding for,\r\n                                </Typography>\r\n\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                    marginTop=\"25px\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#8DC341\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Grant Funding\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"info@grantedltd.co.uk\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GrantFunding);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\ninterface MerixStudioProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\nconst MerixSolution: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-1.png`;\r\nconst MerixSolution3: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-4.jpg`;\r\n\r\n\r\n\r\ninterface MerixStudioResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst MerixStudioResources: MerixStudioResource[] = [\r\n    {\r\n        name: \"Minimum Viable Product uncovered\",\r\n        url: \"https://content.merixstudio.com/insights/minimum-viable-product-uncovered-what-it-really-an/?theme=startups\"\r\n    },\r\n    {\r\n        name: \"The right solution for your product launch\",\r\n        url: \"https://learn.merixstudio.com/product-launch-ebook\"\r\n    },\r\n    {\r\n        name: \"Startup DNA\",\r\n        url: \"https://www.merixstudio.com/services/startup-dna/\"\r\n    },\r\n    {\r\n        name: \"How to launch with a bang\",\r\n        url: \"https://content.merixstudio.com/insights/how-to-launch-a-product-with-a-bang/\"\r\n    },\r\n    {\r\n        name: \"State of early-stage startups 2021\",\r\n        url: \"https://content.merixstudio.com/insights/early-stage-startups-2021-report/\"\r\n    },\r\n    {\r\n        name: \"Startup DNA, turn your idea into a prototype\",\r\n        url: \"https://content.merixstudio.com/insights/startup-dna-turn-your-idea-prototype/\"\r\n    },\r\n    {\r\n        name: \"If you're passionate about an idea give it a try\",\r\n        url: \"https://content.merixstudio.com/insights/if-youre-passionate-about-an-idea-give-it-a-try-in/\"\r\n    },\r\n    {\r\n        name: \"Prototype is just one piece of the puzzle\",\r\n        url: \"https://content.merixstudio.com/insights/prototype-just-one-piece-puzzle-interview-truman-d/\"\r\n    },\r\n    {\r\n        name: \"Pimp your pitch deck\",\r\n        url: \"https://content.merixstudio.com/insights/pimp-your-pitch-deck/\"\r\n    },\r\n    {\r\n        name: \"Building prototype in a UK based startup\",\r\n        url: \"https://content.merixstudio.com/insights/building-prototype-uk-based-startup/\"\r\n    },\r\n];\r\n\r\nclass MerixStudio extends Component<MerixStudioProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} xl={{span: 6, offset: 3}}>\r\n                    <Paper>\r\n                        <Box padding=\"20px\">\r\n                            {/** Header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\r\n                                <Typography variant=\"h4\" align=\"left\">Merixstudio</Typography>\r\n                            </Box>\r\n                            <Box>\r\n                                <Typography align=\"left\" variant=\"body1\">Merixstudios key expertise is the delivery of high-quality and performant web applications and cross-platform mobile apps. Based on the needs of our clients, we can support them in end-to-end product development or seamlessly extend their in-house team of engineers.</Typography>\r\n                                <CustomLink\r\n                                    url=\"https://www.merixstudio.com/contact/\"\r\n                                    target=\"_blank\"\r\n                                    color=\"none\"\r\n                                    activeColor=\"none\"\r\n                                    activeUnderline={false}\r\n                                    component=\"a\"\r\n                                    childComponent={\r\n                                        <Box bgcolor=\"#31C2DE\" color=\"white\" marginY=\"20px\" clone>\r\n                                            <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)}>Contact Us</Button>\r\n                                        </Box>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Box marginY=\"30px\">\r\n                                    <Typography variant=\"h6\" align=\"left\">The right solution for your product launch</Typography>\r\n                                </Box>\r\n                                    <Typography variant=\"body1\" align=\"center\">THE ULTIMATE GUIDE TO COMPOSING</Typography>\r\n                                    <Typography variant=\"body1\" align=\"center\">THE RIGHT SOLUTION FOR YOUR PRODUCT LAUNCH</Typography>\r\n                                <Box marginY=\"30px\">\r\n                                    <Typography variant=\"body1\" align=\"left\">Although similar at first glance, the three concepts differ considerably - especially in terms of the purpose each of them serves. The choice of which one to start with depends on many factors, including your current state of knowledge or the budget you can spend on a given project.</Typography>\r\n                                </Box>\r\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution} alt=\"Merix image\"/>\r\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution3} alt=\"Merix image\"/>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Resources</Typography>\r\n                                <Box height=\"20px\"/>\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    {\r\n                                        MerixStudioResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"12px\">\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box width=\"10px\"/>\r\n                                                        <Typography variant=\"body1\" align=\"left\">{resource.name}</Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">About us</Typography>\r\n                                <Typography variant=\"body1\" align=\"justify\">\r\n                                    <br/><br/>\r\n                                    Merixstudios key expertise is the delivery of high-quality and performant web applications\r\n                                    and cross-platform mobile apps. Based on the needs of our clients, we can support them in\r\n                                    end-to-end product development or seamlessly extend their in-house team of engineers.\r\n                                    <br/><br/>\r\n                                    <ul>\r\n                                        <li>200+ engineers</li>\r\n                                        <li>250 clients supported</li>\r\n                                    </ul>\r\n                                </Typography>\r\n\r\n                                <Typography align=\"left\" variant=\"body1\">\r\n                                    <b>Get in touch!</b>\r\n                                    <br/>\r\n                                </Typography>\r\n\r\n                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"25px\">\r\n                                    <Box bgcolor=\"#8DC341\" color=\"white\" clone>\r\n                                        <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => toggleContactResourceDialog()}>Contact us</Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box height=\"20px\"/>\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Merix Studio\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"g.spychalski@merixstudio.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"j.kubczak@merixstudio.com\"\r\n                        : \"support@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MerixStudio);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport Keltie from \"./pages/keltie/Keltie\";\r\nimport {Box, Card, Typography} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport ResourceItem from \"./ResourceItem\";\r\nimport FounderCatalyst from \"./pages/founder-catalyst/FounderCatalyst\";\r\nimport GrantFunding from \"./pages/grant-funding/GrantFunding\";\r\nimport MerixStudio from \"./pages/merix-studio/merixStudio\";\r\n\r\n\r\ninterface ResourcesProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nexport interface Resource {\r\n    name: string;\r\n    logo: string;\r\n    page: React.ReactNode;\r\n}\r\n\r\nexport const resources: Resource[] = [\r\n    {\r\n        name: \"Intellectual Property\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`,\r\n        page: <Keltie/>\r\n    },\r\n    {\r\n        name: \"Fundraising Legals\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`,\r\n        page: <FounderCatalyst/>\r\n    },\r\n    {\r\n        name: \"Grant Funding\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`,\r\n        page: <GrantFunding/>\r\n    },\r\n    {\r\n        name: \"Product Development\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/merix-studio/merix-logo.png`,\r\n        page: <MerixStudio/>\r\n    }\r\n];\r\n\r\nclass Resources extends Component<ResourcesProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 4, offset: 4}}>\r\n                    <Card elevation={0}>\r\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} color=\"white\" paddingY=\"28px\">\r\n                            <Typography variant=\"h6\" align=\"center\">Resources on Invest West</Typography>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Loader */}\r\n            {/*{*/}\r\n            {/*    !isFetchingGroups(ExploreGroupsLocalState)*/}\r\n            {/*        ? null*/}\r\n            {/*        : <Row*/}\r\n            {/*            noGutters*/}\r\n            {/*        >*/}\r\n            {/*            <Col*/}\r\n            {/*                xs={12}*/}\r\n            {/*                sm={12}*/}\r\n            {/*                md={12}*/}\r\n            {/*                lg={12}*/}\r\n            {/*            >*/}\r\n            {/*                <Box*/}\r\n            {/*                    display=\"flex\"*/}\r\n            {/*                    marginY=\"80px\"*/}\r\n            {/*                    justifyContent=\"center\"*/}\r\n            {/*                >*/}\r\n            {/*                    <BeatLoader*/}\r\n            {/*                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}*/}\r\n            {/*                    />*/}\r\n            {/*                </Box>*/}\r\n            {/*            </Col>*/}\r\n            {/*        </Row>*/}\r\n            {/*}*/}\r\n\r\n            {/** Resources area */}\r\n            <Box marginTop=\"30px\">\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Row>\r\n                            {\r\n                                resources\r\n                                    .map(resource =>\r\n                                        <Col key={resource.name} xs={12} sm={12} md={3}>\r\n                                            <ResourceItem resource={resource}/>\r\n                                        </Col>\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Box>\r\n\r\n            {/** Pagination */}\r\n            {/*{*/}\r\n            {/*    // !successfullyFetchedGroups(ExploreGroupsLocalState)*/}\r\n            {/*    //     ? null*/}\r\n            {/*    //     : paginationPages === 1*/}\r\n            {/*    //     ? null*/}\r\n            {/*    //     :*/}\r\n            {/*        <Row*/}\r\n            {/*            noGutters*/}\r\n            {/*        >*/}\r\n            {/*            <Col*/}\r\n            {/*                xs={12}*/}\r\n            {/*                sm={12}*/}\r\n            {/*                md={12}*/}\r\n            {/*                lg={12}*/}\r\n            {/*            >*/}\r\n            {/*                <Box*/}\r\n            {/*                    display=\"flex\"*/}\r\n            {/*                    justifyContent=\"center\"*/}\r\n            {/*                    marginTop=\"55px\"*/}\r\n            {/*                >*/}\r\n            {/*                    <Pagination*/}\r\n            {/*                        count={0}*/}\r\n            {/*                        page={0}*/}\r\n            {/*                        color=\"primary\"*/}\r\n            {/*                        //onChange={}*/}\r\n            {/*                    />*/}\r\n            {/*                </Box>*/}\r\n            {/*            </Col>*/}\r\n            {/*        </Row>*/}\r\n            {/*}*/}\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Resources);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport Sidebar from \"react-sidebar\";\r\nimport {Badge, IconButton, Typography} from \"@material-ui/core\";\r\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport Menu from \"@material-ui/icons/Menu\";\r\nimport {HashLoader} from \"react-spinners\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\n\r\nimport UploadingDialog from \"../../shared-components/uploading-dialog/UploadingDialog\";\r\nimport EditImageDialog from \"../../shared-components/edit-image/EditImageDialog\";\r\nimport EditVideoDialog from \"../../shared-components/edit-video/EditVideoDialog\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport ChangePasswordPage from \"../../shared-components/change-password/ChangePasswordPage\";\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    HOME_TAB,\r\n    MY_OFFERS_TAB,\r\n    PROFILE_TAB,\r\n    RESOURCES_TAB\r\n} from \"../../shared-components/nav-bars/SidebarContent\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport ProfileTab from \"../../shared-components/profile/Profile\";\r\nimport NotificationsBox from \"../../shared-components/notifications/NotificationsBox\";\r\n\r\nimport * as colors from \"../../values/colors\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport queryString from \"query-string\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\r\nimport * as editUserActions from \"../../redux-store/actions/editUserActions\";\r\nimport * as notificationsActions from \"../../redux-store/actions/notificationsActions\";\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event))\r\n    }\r\n};\r\n\r\nclass IssuerDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_ISSUER : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            user,\r\n            editUserProfile_userEdited,\r\n\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser\r\n        } = this.props;\r\n\r\n        if (!user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\r\n            return;\r\n        }\r\n\r\n        if (!editUserProfile_userEdited) {\r\n            // initialize a copied instance of the user for editing\r\n            editUserProfile_setOriginalUserAndEditedUser(user);\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(user);\r\n    };\r\n\r\n    /**\r\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\r\n     */\r\n    renderPageContent = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * MY OFFERS TAB\r\n         */\r\n        if (params.tab === MY_OFFERS_TAB) {\r\n            return (\r\n                <div\r\n                    style={{\r\n                        margin: 30\r\n                    }}\r\n                >\r\n                    <OffersTable/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * PROFILE TAB\r\n         */\r\n        if (params.tab === PROFILE_TAB) {\r\n            return (\r\n                <ProfileTab/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroupsTab/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     */\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n\r\n            notifications,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Sidebar\r\n                sidebar={\r\n                    <SidebarContent dashboardProps={this.props}/>\r\n                }\r\n                shadow={false}\r\n                open={sidebarOpen}\r\n                docked={sidebarDocked}\r\n                onSetOpen={() => toggleSidebar(true)}\r\n                transitions\r\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}\r\n                }}>\r\n\r\n                <Container fluid style={{padding: 0}}>\r\n                    {/** Header */}\r\n                    <Row noGutters>\r\n                        <Col xs={12} sm={12} md={12} lg={12}>\r\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                                style={{\r\n                                    backgroundColor:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}>\r\n\r\n                                <Row style={{width: \"100%\"}} noGutters>\r\n                                    <Col xs={10} sm={10} md={11} lg={11}>\r\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                            {\r\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                    <Menu/>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                this.renderPageTitle()\r\n                                            }\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                            <IconButton onClick={toggleNotifications}>\r\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                                </Badge>\r\n                                            </IconButton>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {\r\n                        this.renderPageContent()\r\n                    }\r\n\r\n                    {/** Notifications box */}\r\n                    <NotificationsBox/>\r\n\r\n                    {/** Uploading dialog */}\r\n                    <UploadingDialog/>\r\n\r\n                    {/** Edit image dialog */}\r\n                    <EditImageDialog/>\r\n\r\n                    {/** Edit video dialog */}\r\n                    <EditVideoDialog/>\r\n                </Container>\r\n            </Sidebar>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the title of the page\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = \"\";\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case MY_OFFERS_TAB:\r\n                title = MY_OFFERS_TAB;\r\n                break;\r\n            case PROFILE_TAB:\r\n                title = PROFILE_TAB;\r\n                break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IssuerDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    }\r\n});\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport Sidebar from 'react-sidebar';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {Badge, IconButton, Typography} from '@material-ui/core';\r\nimport Menu from '@material-ui/icons/Menu';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    HOME_TAB,\r\n    PROFILE_TAB,\r\n    RESOURCES_TAB,\r\n} from '../../shared-components/nav-bars/SidebarContent';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport ProfileTab from '../../shared-components/profile/Profile';\r\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\r\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\r\nimport UploadingDialog from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport EditImageDialog from '../../shared-components/edit-image/EditImageDialog';\r\nimport UploadVideoDialog from '../../shared-components/edit-video/EditVideoDialog';\r\n\r\nimport queryString from 'query-string';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event))\r\n    }\r\n};\r\n\r\nclass InvestorDashboard extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_INVESTOR : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            user,\r\n            editUserProfile_userEdited,\r\n\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser\r\n        } = this.props;\r\n\r\n        if (!user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\r\n            return;\r\n        }\r\n\r\n        if (!editUserProfile_userEdited) {\r\n            // initialize a copied instance of the user for editing\r\n            editUserProfile_setOriginalUserAndEditedUser(user);\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(user);\r\n    };\r\n\r\n    /**\r\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\r\n     */\r\n    renderPageContent = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * PROFILE TAB\r\n         */\r\n        if (params.tab === PROFILE_TAB) {\r\n            return (\r\n                <ProfileTab/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroupsTab/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n\r\n            notifications,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Sidebar\r\n                sidebar={\r\n                    <SidebarContent dashboardProps={this.props}/>\r\n                }\r\n                open={sidebarOpen}\r\n                docked={sidebarDocked}\r\n                onSetOpen={() => toggleSidebar(true)}\r\n                transitions\r\n                shadow={false}\r\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}}}>\r\n\r\n                <Container fluid style={{padding: 0}}>\r\n                    {/** Header */}\r\n                    <Row noGutters>\r\n                        <Col xs={12} sm={12} md={12} lg={12}>\r\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                                style={{\r\n                                    backgroundColor:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}>\r\n                                <Row noGutters style={{width: \"100%\"}}>\r\n                                    {/** Page title */}\r\n                                    <Col xs={10} sm={10} md={11} lg={11}>\r\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                            {\r\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                    <Menu/>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                this.renderPageTitle()\r\n                                            }\r\n                                        </FlexView>\r\n                                    </Col>\r\n\r\n                                    {/** Notification icon */}\r\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                            <IconButton onClick={toggleNotifications}>\r\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                                </Badge>\r\n                                            </IconButton>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {\r\n                        this.renderPageContent()\r\n                    }\r\n\r\n                    {/** Notifications box */}\r\n                    <NotificationsBox/>\r\n\r\n                    {/** Uploading dialog */}\r\n                    <UploadingDialog/>\r\n\r\n                    {/** Edit image dialog */}\r\n                    <EditImageDialog/>\r\n\r\n                    {/** Upload video dialog */}\r\n                    <UploadVideoDialog/>\r\n\r\n                </Container>\r\n            </Sidebar>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render page's title\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = '';\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case PROFILE_TAB:\r\n                title = PROFILE_TAB;\r\n                break;\r\n            // case MY_PLEDGES_TAB:\r\n            //     title = MY_PLEDGES_TAB;\r\n            //     break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvestorDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    }\r\n});","import axios from \"axios\";\r\nimport {ApiRoutes} from \"../api/Api.tsx\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\n\r\n/**\r\n * Check is an email address is valid\r\n *\r\n * @param email\r\n * @returns {boolean}\r\n */\r\nexport const isValidEmailAddress = (email) => {\r\n    let RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return RegExp.test(email.trim().toLowerCase());\r\n}\r\n\r\nexport const EMAIL_ENQUIRY = 0;\r\nexport const EMAIL_INVITATION = 1;\r\n\r\nexport const sendEmail = async (\r\n    {\r\n        serverURL,\r\n        emailType,\r\n        data\r\n    }\r\n) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let requestConfig = {};\r\n\r\n        try {\r\n            // make authenticated request when sending invitation email\r\n            if (emailType === EMAIL_INVITATION) {\r\n                // get current user's id token\r\n                const idToken = await firebase.auth().currentUser.getIdToken(true);\r\n\r\n                requestConfig = {\r\n                    headers: {\r\n                        'Authorization': idToken\r\n                    }\r\n                };\r\n            }\r\n\r\n            await axios\r\n                .post(\r\n                    `${serverURL}${ApiRoutes.sendEmailRoute}`,\r\n                    {\r\n                        emailType,\r\n                        emailInfo: data\r\n                    },\r\n                    requestConfig\r\n                );\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as myUtils from '../../utils/utils';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport {\r\n    SEND_INVITATION_ERROR_HAPPENED,\r\n    SEND_INVITATION_INVITED_BEFORE,\r\n    SEND_INVITATION_PROCESSING,\r\n    SEND_INVITATION_SUCCESS,\r\n    SEND_INVITATION_USER_CANNOT_BE_INVITED\r\n} from '../../pages/admin/components/InvitationDialog';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nexport const TOGGLE_INVITATION_DIALOG = 'TOGGLE_INVITATION_DIALOG';\r\nexport const toggleInvitationDialog = () => {\r\n    return {\r\n        type: TOGGLE_INVITATION_DIALOG\r\n    }\r\n};\r\n\r\nexport const INVITATION_DIALOG_INPUT_CHANGED = 'INVITATION_DIALOG_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return {\r\n        type: INVITATION_DIALOG_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const INVITATION_DIALOG_SEND_BUTTON_CLICKED = 'INVITATION_DIALOG_SEND_BUTTON_CLICKED';\r\nexport const INVITATION_DIALOG_SEND_RESULT_CHANGED = 'INVITATION_DIALOG_SEND_RESULT_CHANGED';\r\nexport const sendInvitation = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: INVITATION_DIALOG_SEND_BUTTON_CLICKED\r\n        });\r\n\r\n        const {\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            userType\r\n        } = getState().manageInvitationDialog;\r\n\r\n        if (title === DB_CONST.USER_TITLES[0]\r\n            || firstName.trim().length === 0\r\n            || lastName.trim().length === 0\r\n            || email.trim().length === 0\r\n            || userType.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n            result: SEND_INVITATION_PROCESSING\r\n        });\r\n\r\n        //TODO: If the invitation has been sent to this user, check if this user belongs to this group\r\n        // If yes, display a message saying this user is already an investor/issuer in this group\r\n        // Otherwise, display a message saying this user is an investor/issuer in ABC group.\r\n        // Then, ask if the admin wants to invite this user to his group?\r\n        // Yes --> Send a notification to the user\r\n        // No --> Dismiss\r\n\r\n        const currentGroupAdmin = getState().auth.user;\r\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\r\n\r\n        realtimeDBUtils\r\n            .loadAngelNetworksInvitedAUser(email)\r\n            .then(angelNetworksInvitedUser => {\r\n\r\n                let invitedBefore = false;\r\n                let userIsAnIssuerOfAnotherGroup = false;\r\n\r\n                for (let angelNetworkInvitedUser of angelNetworksInvitedUser) {\r\n                    // user has been invited by this group before\r\n                    if (angelNetworkInvitedUser.Invitor.anid === groupProperties.anid) {\r\n                        invitedBefore = true;\r\n                        dispatch({\r\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                            result: SEND_INVITATION_INVITED_BEFORE,\r\n                            extraInfo: angelNetworkInvitedUser.Invitee\r\n                        });\r\n                        break;\r\n                    }\r\n\r\n                    // user is an issuer of another group\r\n                    if (angelNetworkInvitedUser.Invitee.type === DB_CONST.TYPE_ISSUER && angelNetworkInvitedUser.Invitor.anid !== groupProperties.anid) {\r\n                        userIsAnIssuerOfAnotherGroup = true;\r\n                        dispatch({\r\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                            result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\r\n                            extraInfo: null\r\n                        });\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (invitedBefore) {\r\n                    return;\r\n                }\r\n\r\n                if (userIsAnIssuerOfAnotherGroup) {\r\n                    return;\r\n                }\r\n\r\n                // the user has not been invited before by this group\r\n                if (!invitedBefore) {\r\n                    // check if user is an admin\r\n                    realtimeDBUtils\r\n                        .doesUserExist(email)\r\n                        .then(result => {\r\n                            // user is an admin\r\n                            if (result.userExists && result.hasOwnProperty('userIsAnAdmin') && result.userIsAnAdmin) {\r\n                                dispatch({\r\n                                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                    result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\r\n                                    extraInfo: null\r\n                                });\r\n                                return;\r\n                            }\r\n\r\n                            const invitedID = firebase\r\n                                .database()\r\n                                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                                .push()\r\n                                .key;\r\n\r\n                            const invitedUser = {\r\n                                title: title,\r\n                                firstName: firstName,\r\n                                lastName: lastName,\r\n                                email: email.toLowerCase(),\r\n                                type: parseInt(userType),\r\n                                // registered or not registered\r\n                                status: DB_CONST.INVITED_USER_NOT_REGISTERED,\r\n                                // id of this invited user\r\n                                id: invitedID,\r\n                                // date invited\r\n                                invitedDate: myUtils.getCurrentDate(),\r\n                                invitedBy: groupProperties.anid\r\n                            };\r\n\r\n                            // send invitation email via server\r\n                            emailUtils\r\n                                .sendEmail({\r\n                                    serverURL: clubAttributes.serverURL,\r\n                                    emailType: emailUtils.EMAIL_INVITATION,\r\n                                    data: {\r\n                                        groupName: groupProperties.displayName,\r\n                                        groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\r\n                                        groupWebsite: groupProperties.website,\r\n                                        groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\r\n                                        sender: currentGroupAdmin.email,\r\n                                        receiver: invitedUser.email,\r\n                                        receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\r\n                                        userType:\r\n                                            invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                                ?\r\n                                                \"Issuer\"\r\n                                                :\r\n                                                \"Investor\"\r\n                                        ,\r\n                                        signupURL:\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\r\n                                                :\r\n                                                `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\r\n                                    }\r\n                                })\r\n                                .then(() => {\r\n                                    // add invited user to firebase when the email has been successfully sent\r\n                                    firebase\r\n                                        .database()\r\n                                        .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                                        .child(invitedID)\r\n                                        .set(invitedUser)\r\n                                        .then(() => {\r\n\r\n                                            // track invitation sent activity\r\n                                            realtimeDBUtils\r\n                                                .trackActivity({\r\n                                                    userID: currentGroupAdmin.id,\r\n                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                    interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\r\n                                                    interactedObjectID: invitedUser.id,\r\n                                                    activitySummary:\r\n                                                        realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION\r\n                                                            .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\r\n                                                            .replace(\"%group%\", groupProperties.displayName)\r\n                                                            .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\r\n                                                    ,\r\n                                                    action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    ,\r\n                                                    value: invitedUser\r\n                                                });\r\n\r\n                                            dispatch({\r\n                                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                                result: SEND_INVITATION_SUCCESS,\r\n                                                extraInfo: null\r\n                                            });\r\n\r\n                                            dispatch({\r\n                                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                                message: \"Email has been sent.\",\r\n                                                color: \"primary\",\r\n                                                position: \"bottom\"\r\n                                            });\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    dispatch({\r\n                                        type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                        result: SEND_INVITATION_ERROR_HAPPENED,\r\n                                        extraInfo: null\r\n                                    });\r\n\r\n                                    dispatch({\r\n                                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                        message: \"Error happened.\",\r\n                                        color: \"error\",\r\n                                        position: \"bottom\"\r\n                                    });\r\n                                });\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                result: SEND_INVITATION_ERROR_HAPPENED,\r\n                                extraInfo: null\r\n                            });\r\n\r\n                            dispatch({\r\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                message: \"Error happened.\",\r\n                                color: \"error\",\r\n                                position: \"bottom\"\r\n                            });\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                    result: SEND_INVITATION_ERROR_HAPPENED,\r\n                    extraInfo: null\r\n                });\r\n            });\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormLabel,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as invitationDialogActions from '../../../redux-store/actions/invitationDialogActions';\r\n\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const SEND_INVITATION_NONE = 0;\r\nexport const SEND_INVITATION_PROCESSING = 1;\r\nexport const SEND_INVITATION_INVITED_BEFORE = 2;\r\nexport const SEND_INVITATION_USER_CANNOT_BE_INVITED = 3; // user is an issuer in another group or an admin\r\nexport const SEND_INVITATION_ERROR_HAPPENED = 4;\r\nexport const SEND_INVITATION_SUCCESS = 5;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        invitationDialogOpen: state.manageInvitationDialog.invitationDialogOpen,\r\n        title: state.manageInvitationDialog.title,\r\n        firstName: state.manageInvitationDialog.firstName,\r\n        lastName: state.manageInvitationDialog.lastName,\r\n        email: state.manageInvitationDialog.email,\r\n        userType: state.manageInvitationDialog.userType,\r\n        sendButtonClick: state.manageInvitationDialog.sendButtonClick,\r\n        sendResult: state.manageInvitationDialog.sendResult,\r\n        sendStatusExtraInfo: state.manageInvitationDialog.sendStatusExtraInfo\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleInputChanged: (event) => dispatch(invitationDialogActions.handleInputChanged(event)),\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog()),\r\n        sendInvitation: () => dispatch(invitationDialogActions.sendInvitation())\r\n    }\r\n};\r\n\r\nclass InvitationDialog extends Component {\r\n\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            invitationDialogOpen,\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            userType,\r\n            sendButtonClick,\r\n            sendResult,\r\n            sendStatusExtraInfo,\r\n            toggleInvitationDialog,\r\n            handleInputChanged,\r\n            sendInvitation,\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog ref={forwardedRef} open={invitationDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleInvitationDialog} {...other}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">Send invitation email</Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleInvitationDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{ marginTop: 10}}>\r\n                    <FormControl required error={sendButtonClick && title === DB_CONST.USER_TITLES[0]}>\r\n                        <FormLabel>Title</FormLabel>\r\n                        <Select name=\"title\" value={title} margin=\"dense\" input={<OutlinedInput/>} onChange={handleInputChanged}>\r\n                            {\r\n                                DB_CONST.USER_TITLES.map((title, id) => (\r\n                                    <MenuItem\r\n                                        key={id}\r\n                                        value={title}\r\n                                    >\r\n                                        {title}\r\n                                    </MenuItem>\r\n                                ))\r\n                            }\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                    <TextField\r\n                        label=\"First name\"\r\n                        placeholder=\"Write first name here ...\"\r\n                        name=\"firstName\"\r\n                        value={firstName}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && firstName.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <TextField\r\n                        label=\"Last name\"\r\n                        placeholder=\"Write last name here ...\"\r\n                        name=\"lastName\"\r\n                        value={lastName}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && lastName.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <TextField\r\n                        label=\"Email\"\r\n                        placeholder=\"Write email here ...\"\r\n                        name=\"email\"\r\n                        value={email}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && email.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <FlexView marginTop={20}>\r\n                        <FormControl required error={sendButtonClick && userType.length === 0}>\r\n                            <FormLabel>User type</FormLabel>\r\n                            <RadioGroup row name=\"userType\" value={userType} onChange={handleInputChanged}>\r\n                                <FormControlLabel value={DB_CONST.TYPE_ISSUER.toString()} control={<Radio color='primary'/>} label=\"Issuer\"/>\r\n                                <FormControlLabel value={DB_CONST.TYPE_INVESTOR.toString()} control={<Radio color='primary'/>} label=\"Investor\"/>\r\n                            </RadioGroup>\r\n                        </FormControl>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderRespondCode()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={sendInvitation} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 35}}>Send\r\n                            <SendIcon fontSize=\"small\" style={{marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render send result\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderRespondCode = () => {\r\n        const {\r\n            sendResult,\r\n            sendStatusExtraInfo\r\n        } = this.props;\r\n\r\n        let res = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (sendResult) {\r\n            case SEND_INVITATION_NONE:\r\n                return null;\r\n            case SEND_INVITATION_PROCESSING:\r\n                res.msg = \"Checking...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case SEND_INVITATION_INVITED_BEFORE:\r\n                res.msg =\r\n                    sendStatusExtraInfo.hasOwnProperty('officialUserID')\r\n                        ?\r\n                        `This user is already an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} in your group.`\r\n                        :\r\n                        `You have invited this user as an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} before.`;\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_USER_CANNOT_BE_INVITED:\r\n                res.msg = \"User is an admin or an issuer of another group.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_ERROR_HAPPENED:\r\n                res.msg = \"Error happened. Couldn't invite this user.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_SUCCESS:\r\n                res.msg = \"Invitation has been sent to this user.\";\r\n                res.color = \"primary\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <Typography\r\n                color={res.color}\r\n                variant=\"subtitle1\"\r\n            >\r\n                {res.msg}\r\n            </Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <InvitationDialog {...props} forwardedRef={ref}/>)\r\n);","import * as myUtils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED = 'SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED';\r\nexport const initializeClubAttributesEdited = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED,\r\n            clubAttributes: getState().manageClubAttributes.clubAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_INPUT_CHANGED = 'SUPER_ADMIN_SETTINGS_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const clubAttributesEdited = getState().superAdminSettings.clubAttributesEdited;\r\n        const target = event.target;\r\n\r\n        let isPropertyOfClubAttributes = false;\r\n\r\n        switch (target.type) {\r\n            case 'checkbox':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.checked);\r\n\r\n                    return;\r\n                }\r\n                break;\r\n            case 'radio':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(!isNaN(target.value) ? parseInt(target.value) : target.value);\r\n\r\n                    return;\r\n                }\r\n                break;\r\n            case 'text':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfClubAttributes = true;\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.value);\r\n                }\r\n                break;\r\n            case 'textarea':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfClubAttributes = true;\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.value);\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        dispatch({\r\n            type: SUPER_ADMIN_SETTINGS_INPUT_CHANGED,\r\n            name: target.name,\r\n            value: target.type === 'checkbox' ? target.checked : target.value,\r\n            isPropertyOfClubAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED = 'SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED';\r\nexport const handleQuillEditorChanged = (fieldName, content, delta, source, editor) => {\r\n    return (dispatch, getState) => {\r\n        if (editor.getText().trim().length === 0) {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\r\n                fieldName,\r\n                value: {ops: []}\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\r\n                fieldName,\r\n                value: editor.getContents()\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const saveEditedQuill = fieldName => {\r\n    return (dispatch, getState) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(fieldName)\r\n            .set(getState().superAdminSettings.clubAttributesEdited[fieldName])\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\r\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\r\n\r\n        if (isExpanded) {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                expandedPledgeFAQ: FAQ,\r\n                editExpandedPledgeFAQ: false\r\n            });\r\n        } else {\r\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                    expandedPledgeFAQ: null,\r\n                    editExpandedPledgeFAQ: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\r\nexport const toggleEditExpandedPledgeFAQ = () => {\r\n    return {\r\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\r\nexport const toggleAddNewPledgeFAQ = () => {\r\n    return {\r\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const submitNewPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer\r\n        } = getState().superAdminSettings;\r\n\r\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributes);\r\n\r\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const faq = {\r\n            id: myUtils.getCurrentDate(),\r\n            question: addedPledgeQuestion,\r\n            answer: addedPledgeAnswer\r\n        };\r\n\r\n        if (clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\r\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\r\n        } else {\r\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\r\n        }\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .update(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const saveEditedPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            clubAttributesEdited,\r\n            expandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer\r\n        } = getState().superAdminSettings;\r\n\r\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const editedFAQ = {\r\n            id: expandedPledgeFAQ.id,\r\n            question: editedPledgeQuestion,\r\n            answer: editedPledgeAnswer\r\n        };\r\n\r\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteExistingPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\r\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributesEdited);\r\n\r\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\r\n    }\r\n};\r\n\r\n\r\n","import Api, {ApiRoutes} from \"../Api\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\n\r\nexport default class SystemAttributesRepository {\r\n\r\n    /**\r\n     * Fetch system attributes\r\n     */\r\n    public async getSystemAttributes() {\r\n        return await new Api()\r\n            .request(\"get\", ApiRoutes.retrieveSystemAttributesRoute);\r\n    }\r\n\r\n    /**\r\n     * Update system attributes\r\n     */\r\n    public async updateSystemAttributes(systemAttributes: SystemAttributes) {\r\n        return await new Api()\r\n            .request(\r\n                \"put\",\r\n                ApiRoutes.updateSystemAttributesRoute,\r\n                {\r\n                    requestBody: systemAttributes,\r\n                    queryParameters: null\r\n                }\r\n            );\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\nimport Error from \"../../models/error\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\nimport SystemAttributesRepository from \"../../api/repositories/SystemAttributesRepository\";\r\nimport {setSectors} from \"../../pages/admin/components/manage-sectors/ManageSectorsActions\";\r\n\r\nexport enum ManageSystemAttributesEvents {\r\n    LoadingSystemAttributes = \"ManageSystemAttributesEvents.LoadingSystemAttributes\",\r\n    FinishedLoadingSystemAttributes = \"ManageSystemAttributesEvents.FinishedLoadingSystemAttributes\"\r\n}\r\n\r\nexport interface ManageSystemAttributesAction extends Action {\r\n}\r\n\r\nexport interface FinishedLoadingSystemAttributesAction extends ManageSystemAttributesAction {\r\n    systemAttributes: SystemAttributes | null;\r\n    error?: Error;\r\n}\r\n\r\nexport const loadSystemAttributes: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            systemAttributes,\r\n            systemAttributesLoaded,\r\n            loadingSystemAttributes\r\n        } = getState().ManageSystemAttributesState;\r\n\r\n        if (!systemAttributesLoaded && !loadingSystemAttributes && !systemAttributes) {\r\n            dispatch({\r\n                type: ManageSystemAttributesEvents.LoadingSystemAttributes\r\n            });\r\n\r\n            const finishedAction: FinishedLoadingSystemAttributesAction = {\r\n                type: ManageSystemAttributesEvents.FinishedLoadingSystemAttributes,\r\n                systemAttributes: null\r\n            }\r\n\r\n            try {\r\n                const response = await new SystemAttributesRepository().getSystemAttributes();\r\n                const systemAttributes: SystemAttributes = response.data;\r\n                finishedAction.systemAttributes = systemAttributes;\r\n                dispatch(setSectors(systemAttributes.Sectors))\r\n                return dispatch(finishedAction);\r\n            } catch (error) {\r\n                finishedAction.error = {\r\n                    detail: error.toString()\r\n                };\r\n                return dispatch(finishedAction);\r\n            }\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\n\r\nexport enum DocumentsDownloadEvents {\r\n    OpenRiskWarningDialog = \"DocumentsDownloadEvents.OpenRiskWarningDialog\",\r\n    CloseRiskWarningDialog = \"DocumentsDownloadEvents.CloseRiskWarningDialog\"\r\n}\r\n\r\nexport interface DocumentsDownloadAction extends Action {\r\n\r\n}\r\n\r\nexport interface DocumentClickAction extends DocumentsDownloadAction {\r\n    selectedDocument?: PitchDocument;\r\n}\r\n\r\nexport const onDocumentClick: ActionCreator<any> = (document: PitchDocument, shouldShowRiskWarning: boolean) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        if (!shouldShowRiskWarning) {\r\n            window.open(document.downloadURL, \"_blank\");\r\n            return;\r\n        }\r\n        const action: DocumentClickAction = {\r\n            type: DocumentsDownloadEvents.OpenRiskWarningDialog,\r\n            selectedDocument: document\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const onAcceptRiskWarningClick: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            selectedDocument\r\n        } = getState().DocumentsDownloadLocalState;\r\n        if (selectedDocument === undefined) {\r\n            return;\r\n        }\r\n        window.open(selectedDocument.downloadURL, \"_blank\");\r\n        return dispatch({\r\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const onCancelRiskWarningClick: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\r\n        });\r\n    }\r\n}","import {\r\n    FinishedLoadingSystemAttributesAction,\r\n    ManageSystemAttributesAction,\r\n    ManageSystemAttributesEvents\r\n} from \"../actions/manageSystemAttributesActions\";\r\nimport Error from \"../../models/error\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\n\r\nexport interface ManageSystemAttributesState {\r\n    systemAttributes: SystemAttributes | null;\r\n    systemAttributesLoaded: boolean;\r\n    loadingSystemAttributes: boolean;\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ManageSystemAttributesState = {\r\n    systemAttributes: null,\r\n    systemAttributesLoaded: false,\r\n    loadingSystemAttributes: false\r\n}\r\n\r\nexport const isLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.loadingSystemAttributes;\r\n}\r\n\r\nexport const successfullyLoadedSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.systemAttributes && state.error === undefined;\r\n}\r\n\r\nexport const hasErrorLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst manageSystemAttributesReducer = (state = initialState, action: ManageSystemAttributesAction) => {\r\n    switch (action.type) {\r\n        case ManageSystemAttributesEvents.LoadingSystemAttributes:\r\n            return {\r\n                ...state,\r\n                systemAttributes: null,\r\n                systemAttributesLoaded: false,\r\n                loadingSystemAttributes: true\r\n            }\r\n        case  ManageSystemAttributesEvents.FinishedLoadingSystemAttributes:\r\n            const finishedAction: FinishedLoadingSystemAttributesAction = (action as FinishedLoadingSystemAttributesAction);\r\n            return {\r\n                ...state,\r\n                systemAttributes: finishedAction.systemAttributes,\r\n                systemAttributesLoaded: true,\r\n                loadingSystemAttributes: false,\r\n                error: finishedAction.error\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemAttributesReducer;","import {\r\n    AddNewSectorTextChangedAction,\r\n    CompletedSavingSectorsChangesAction,\r\n    ManageSectorsAction,\r\n    ManageSectorsEvents,\r\n    SetSectorsAction\r\n} from \"./ManageSectorsActions\";\r\nimport Error from \"../../../../models/error\";\r\n\r\nexport interface ManageSectorsState {\r\n    addingNewSector: boolean;\r\n    newSector: string;\r\n    sectors: string[];\r\n    savingSectors: boolean;\r\n    errorSavingSectors?: Error;\r\n}\r\n\r\nconst initialState: ManageSectorsState = {\r\n    addingNewSector: false,\r\n    newSector: \"\",\r\n    sectors: [],\r\n    savingSectors: false\r\n}\r\n\r\nexport const isSavingSectorsChanges = (state: ManageSectorsState) => {\r\n    return state.savingSectors;\r\n}\r\n\r\nexport const manageSectorsReducer = (state = initialState, action: ManageSectorsAction) => {\r\n    switch (action.type) {\r\n        case ManageSectorsEvents.SetSectors:\r\n            const setSectorsAction: SetSectorsAction = action as SetSectorsAction;\r\n            return {\r\n                ...state,\r\n                sectors: setSectorsAction.sectors\r\n            }\r\n        case ManageSectorsEvents.ToggleAddNewSector:\r\n            return {\r\n                ...state,\r\n                addingNewSector: !state.addingNewSector,\r\n                newSector: \"\"\r\n            }\r\n        case ManageSectorsEvents.AddNewSectorTextChanged:\r\n            const addNewSectorTextChangedAction: AddNewSectorTextChangedAction = action as AddNewSectorTextChangedAction;\r\n            return {\r\n                ...state,\r\n                newSector: addNewSectorTextChangedAction.value\r\n            }\r\n        case ManageSectorsEvents.SavingSectorsChanges:\r\n            return {\r\n                ...state,\r\n                savingSectors: true,\r\n                errorSavingSectors: undefined\r\n            }\r\n        case ManageSectorsEvents.CompletedSavingSectorsChanges:\r\n            const completedSavingSectorsChanges: CompletedSavingSectorsChangesAction = action as CompletedSavingSectorsChangesAction;\r\n            return {\r\n                ...state,\r\n                savingSectors: false,\r\n                errorSavingSectors: completedSavingSectorsChanges.error !== undefined\r\n                    ? {detail: completedSavingSectorsChanges.error} : state.errorSavingSectors\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSectorsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, IconButton, TextField, Typography} from \"@material-ui/core\";\r\nimport {\r\n    ManageSystemAttributesState,\r\n    successfullyLoadedSystemAttributes\r\n} from \"../../../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isSavingSectorsChanges, ManageSectorsState} from \"./ManageSectorsReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport {\r\n    addNewSector,\r\n    cancelSectorsChanges, deleteSector,\r\n    onTextChanged,\r\n    saveSectorsChanges,\r\n    toggleAddNewSector\r\n} from \"./ManageSectorsActions\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\ninterface ManageSectorsProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n    toggleAddNewSector: () => any;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    addNewSector: () => any;\r\n    deleteSector: (sector: string) => any;\r\n    saveSectorsChanges: () => any;\r\n    cancelSectorsChanges: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageSectorsLocalState: state.ManageSectorsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleAddNewSector: () => dispatch(toggleAddNewSector()),\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        addNewSector: () => dispatch(addNewSector()),\r\n        deleteSector: (sector: string) => dispatch(deleteSector(sector)),\r\n        saveSectorsChanges: () => dispatch(saveSectorsChanges()),\r\n        cancelSectorsChanges: () => dispatch(cancelSectorsChanges())\r\n    }\r\n}\r\n\r\nclass ManageSectors extends Component<ManageSectorsProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageSectorsLocalState,\r\n            toggleAddNewSector,\r\n            onTextChanged,\r\n            addNewSector,\r\n            deleteSector,\r\n            saveSectorsChanges,\r\n            cancelSectorsChanges\r\n        } = this.props;\r\n\r\n        if (!successfullyLoadedSystemAttributes(ManageSystemAttributesState)) {\r\n            return null;\r\n        }\r\n\r\n        return <Box>\r\n            <Typography variant=\"h6\" color=\"primary\">Edit sectors</Typography>\r\n\r\n            <Box height=\"15px\"/>\r\n\r\n            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => toggleAddNewSector()}>\r\n                {\r\n                    !ManageSectorsLocalState.addingNewSector\r\n                        ? <AddIcon/>\r\n                        : <CloseIcon/>\r\n                }\r\n\r\n                <Box\r\n                    width=\"6px\"\r\n                />\r\n                {\r\n                    !ManageSectorsLocalState.addingNewSector\r\n                        ? \"Add new sector\"\r\n                        : \"Cancel adding new sector\"\r\n                }\r\n            </Button>\r\n\r\n            {\r\n                !ManageSectorsLocalState.addingNewSector\r\n                    ? null\r\n                    : <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginTop=\"10px\">\r\n                        <TextField variant=\"outlined\" margin=\"dense\" onChange={onTextChanged}/>\r\n                        <Box width=\"15px\"/>\r\n                        <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => addNewSector()}>Add</Button>\r\n                      </Box>\r\n            }\r\n\r\n            <Box height=\"30px\"/>\r\n\r\n            {\r\n                ManageSectorsLocalState.sectors.map(sector => (\r\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"10px\">\r\n                        <Typography align=\"left\" variant=\"body1\">{sector}\r\n                        </Typography>\r\n                        <Box width=\"10px\"/>\r\n                        <IconButton onClick={() => deleteSector(sector)} >\r\n                            <DeleteIcon fontSize=\"small\"/>\r\n                        </IconButton>\r\n                    </Box>\r\n                ))\r\n            }\r\n\r\n            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"20px\">\r\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => cancelSectorsChanges()}>Cancel changes</Button>\r\n                <Box width=\"15px\"/>\r\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => saveSectorsChanges()} disabled={isSavingSectorsChanges(ManageSectorsLocalState)}>\r\n                    {\r\n                        isSavingSectorsChanges(ManageSectorsLocalState)\r\n                            ? \"Saving ...\"\r\n                            : \"Save changes\"\r\n                    }\r\n                </Button>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageSectors);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CreateIcon from '@material-ui/icons/CreateOutlined';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n// React Quill - text editor\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nimport * as ROUTES from '../../../router/routes';\r\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\r\nimport {NavLink} from 'react-router-dom';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as colors from '../../../values/colors';\r\nimport {connect} from 'react-redux';\r\nimport * as superAdminSettingsActions from '../../../redux-store/actions/superAdminSettingsActions';\r\nimport ManageSectors from \"./manage-sectors/ManageSectors\";\r\nimport FeedbackSnackbarNew from \"../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesEdited: state.superAdminSettings.clubAttributesEdited,\r\n\r\n        addNewPledgeFAQ: state.superAdminSettings.addNewPledgeFAQ,\r\n        addedPledgeQuestion: state.superAdminSettings.addedPledgeQuestion,\r\n        addedPledgeAnswer: state.superAdminSettings.addedPledgeAnswer,\r\n        expandedPledgeFAQ: state.superAdminSettings.expandedPledgeFAQ,\r\n        editExpandedPledgeFAQ: state.superAdminSettings.editExpandedPledgeFAQ,\r\n        editedPledgeQuestion: state.superAdminSettings.editedPledgeQuestion,\r\n        editedPledgeAnswer: state.superAdminSettings.editedPledgeAnswer\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        initializeClubAttributesEdited: () => dispatch(superAdminSettingsActions.initializeClubAttributesEdited()),\r\n        handleInputChanged: (event) => dispatch(superAdminSettingsActions.handleInputChanged(event)),\r\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(superAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\r\n        toggleAddNewPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleAddNewPledgeFAQ()),\r\n        submitNewPledgeFAQ: () => dispatch(superAdminSettingsActions.submitNewPledgeFAQ()),\r\n        toggleEditExpandedPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\r\n        saveEditedPledgeFAQ: () => dispatch(superAdminSettingsActions.saveEditedPledgeFAQ()),\r\n        deleteExistingPledgeFAQ: () => dispatch(superAdminSettingsActions.deleteExistingPledgeFAQ()),\r\n        handleQuillEditorChanged: (fieldName, content, delta, source, editor) => dispatch(superAdminSettingsActions.handleQuillEditorChanged(fieldName, content, delta, source, editor)),\r\n        saveEditedQuill: (fieldName) => dispatch(superAdminSettingsActions.saveEditedQuill(fieldName))\r\n    }\r\n};\r\n\r\nclass SuperAdminSettings extends Component {\r\n\r\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\r\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\r\n    };\r\n\r\n    handleQuillEditorChanged = fieldName => (content, delta, source, editor) => {\r\n        this.props.handleQuillEditorChanged(fieldName, content, delta, source, editor);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            initializeClubAttributesEdited\r\n        } = this.props;\r\n\r\n        initializeClubAttributesEdited();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesEdited,\r\n\r\n            addNewPledgeFAQ,\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer,\r\n            expandedPledgeFAQ,\r\n            editExpandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer,\r\n\r\n            handleInputChanged,\r\n            toggleAddNewPledgeFAQ,\r\n            submitNewPledgeFAQ,\r\n            toggleEditExpandedPledgeFAQ,\r\n            saveEditedPledgeFAQ,\r\n            deleteExistingPledgeFAQ,\r\n            saveEditedQuill\r\n        } = this.props;\r\n\r\n        if (!clubAttributes || !clubAttributesEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 30\r\n                }}\r\n            >\r\n                <FeedbackSnackbarNew/>\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    {/** Manage system's functions */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Manage system's functions</Typography>\r\n\r\n                        <FlexView marginTop={20}>\r\n                            <FormControl>\r\n                                <FormControlLabel name=\"allowVideoUpload\"\r\n                                    control={\r\n                                        <Checkbox color=\"primary\" value={clubAttributesEdited.allowVideoUpload} checked={clubAttributesEdited.allowVideoUpload} onChange={handleInputChanged}/>\r\n                                    }\r\n                                    label=\"Allow video upload\"\r\n                                    labelPlacement=\"end\"\r\n                                />\r\n                                <FormHelperText>\r\n                                    Allow videos (Introduction video in Profile page and Pitch cover video) to be\r\n                                    uploaded to the database.\r\n                                    When turned off, the users cannot upload videos from their machines, instead they\r\n                                    can only upload a video URL.\r\n                                </FormHelperText>\r\n                            </FormControl>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Support email */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Edit support email</Typography>\r\n\r\n                        <FlexView marginTop={20}>\r\n                            <TextField name=\"supportEmail\" label=\"Support email\" value={clubAttributesEdited.supportEmail} margin=\"normal\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit sectors */}\r\n                    <Col xs={12}sm={12} md={12} lg={12}>\r\n                        <ManageSectors/>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit FAQs in Pledge Page */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Edit FAQs in Pledge Page</Typography>\r\n\r\n                        <Button onClick={toggleAddNewPledgeFAQ} variant=\"outlined\" className={css(sharedStyles.no_text_transform)} style={{ marginTop: 18}}>\r\n                            {\r\n                                !addNewPledgeFAQ\r\n                                    ?\r\n                                    <AddIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                                    :\r\n                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                            }\r\n                            {\r\n                                !addNewPledgeFAQ\r\n                                    ?\r\n                                    \"Add new FAQ\"\r\n                                    :\r\n                                    \"Cancel adding new FAQ\"\r\n                            }\r\n                        </Button>\r\n\r\n                        {\r\n                            !addNewPledgeFAQ\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView column marginTop={15}>\r\n                                    <TextField name=\"addedPledgeQuestion\" label=\"Question\" value={addedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\r\n                                    <TextField name=\"addedPledgeAnswer\" label=\"Answer\" value={addedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} onChange={handleInputChanged} style={{marginTop: 10}}/>\r\n                                    <FlexView hAlignContent=\"right\" marginTop={10}>\r\n                                        <Button onClick={submitNewPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>Add</Button>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                        }\r\n\r\n                        <FlexView column marginTop={20}>\r\n                            {\r\n                                !clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].map(FAQ => (\r\n                                        <ExpansionPanel key={FAQ.id} elevation={0} className={css(styles.frequently_asked_question_box)} expanded={(expandedPledgeFAQ && FAQ.id === expandedPledgeFAQ.id) ? true : false} onChange={this.handleExpandPledgeFAQPanel(FAQ)}>\r\n                                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                                <Typography variant=\"body2\" align=\"left\"><b>{FAQ.question}</b></Typography>\r\n                                            </ExpansionPanelSummary>\r\n\r\n                                            <ExpansionPanelDetails>\r\n                                                <FlexView column width=\"100%\">\r\n                                                    <Typography variant=\"body2\" align=\"left\">{FAQ.answer}</Typography>\r\n\r\n                                                    <FlexView marginTop={28}>\r\n                                                        <Button onClick={toggleEditExpandedPledgeFAQ} variant=\"outlined\" color={expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ ? \"default\" : \"primary\"} className={css(sharedStyles.no_text_transform)}>\r\n                                                            {\r\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                                    ?\r\n                                                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                                                                    :\r\n                                                                    <CreateIcon fontSize=\"small\" style={{ marginRight: 6}}/>\r\n                                                            }\r\n                                                            {\r\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                                    ?\r\n                                                                    \"Cancel editing\"\r\n                                                                    :\r\n                                                                    \"Edit\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <Button onClick={deleteExistingPledgeFAQ} variant=\"outlined\" color=\"secondary\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 12}}>\r\n                                                            <DeleteIcon fontSize=\"small\" style={{ marginRight: 6}}/>\r\n                                                            Delete\r\n                                                        </Button>\r\n                                                    </FlexView>\r\n\r\n                                                    {\r\n                                                        expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                            ?\r\n                                                            <FlexView column width=\"100%\" hAlignContent=\"right\" marginTop={12}>\r\n                                                                <TextField name=\"editedPledgeQuestion\" label=\"Question\" value={editedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required error={editedPledgeQuestion.trim().length === 0} onChange={handleInputChanged}/>\r\n                                                                <TextField name=\"editedPledgeAnswer\" label=\"Answer\" value={editedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} error={editedPledgeAnswer.trim().length === 0} onChange={handleInputChanged} style={{marginTop: 10}}/>\r\n\r\n                                                                <Button onClick={saveEditedPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} style={{marginTop: 10}}>Save</Button>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </ExpansionPanelDetails>\r\n                                        </ExpansionPanel>\r\n                                    ))\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit privacy policy */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit privacy policy</Typography>\r\n\r\n                            <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View privacy policy page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('privacyPolicy')} modules={modules} value={clubAttributesEdited.hasOwnProperty('privacyPolicy') ? clubAttributesEdited.privacyPolicy : {ops: []}} style={{marginTop: 20 }}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('privacyPolicy')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit terms of use */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit terms of use</Typography>\r\n\r\n                            <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{ marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View terms of use page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('termsOfUse')} modules={modules} value={clubAttributesEdited.hasOwnProperty('termsOfUse') ? clubAttributesEdited.termsOfUse : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('termsOfUse')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit risk warnings */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit risk warnings</Typography>\r\n\r\n                            {/** Risk warning footer */}\r\n                            <FlexView column marginTop={30}>\r\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning footer</b></Typography>\r\n                                <br/>\r\n                                <Typography variant=\"body1\" align=\"left\" color=\"textSecondary\">\r\n                                    Risk warning footer is used in the footer of the Explore Offers page and\r\n                                    the Pledge page.\r\n                                    <br/><br/>\r\n                                    As the group's name will be populated dynamically, therefore, anywhere in the text\r\n                                    that needs to use group's name, please replace it with <b><u>%groupName%</u></b>.\r\n                                    <br/><br/>\r\n                                    Also, this risk warning footer will need to have a URL that leads to the\r\n                                    risk warning page where the information will be further explained. Therefore, please\r\n                                    use the following format to express the URL:\r\n                                    <br/><br/>\r\n                                    <b><u>%URL%any text inside%URL%</u></b>. For example:&nbsp;\r\n                                    <b>%URL%Please click here to see full risk warning.%URL%</b>. The URL doesn't need\r\n                                    to be\r\n                                    put here manually, it will be done on the development side as long as the format\r\n                                    is correct.\r\n                                </Typography>\r\n                                <br/>\r\n                                <TextField variant=\"outlined\" name=\"riskWarningFooter\" placeholder=\"Edit risk warning footer\" value={clubAttributesEdited.riskWarningFooter} onChange={handleInputChanged} multiline rowsMax={10} rows={10}/>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{marginTop: 50, marginBottom: 40}}/>\r\n\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning page</b></Typography>\r\n\r\n                                <br/>\r\n\r\n                                <NavLink to={ROUTES.RISK_WARNING} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View risk warning page</Button>\r\n                                </NavLink>\r\n\r\n                                <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('riskWarning')} modules={modules} value={clubAttributesEdited.hasOwnProperty('riskWarning') ? clubAttributesEdited.riskWarning : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                                <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                    <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('riskWarning')} style={{marginLeft: 12}}>Save</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit create pitch terms and conditions */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit create pitch terms and conditions</Typography>\r\n\r\n                            <NavLink to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View create pitch terms and conditions page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('createPitchTermsAndConditions')} modules={modules} value={clubAttributesEdited.hasOwnProperty('createPitchTermsAndConditions') ? clubAttributesEdited.createPitchTermsAndConditions : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('createPitchTermsAndConditions')} style={{marginLeft: 12}}> Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit marketing preferences */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit marketing preferences</Typography>\r\n\r\n                            <NavLink to={ROUTES.MARKETING_PREFERENCES} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View marketing preferences page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('marketingPreferences')} modules={modules} value={clubAttributesEdited.hasOwnProperty('marketingPreferences') ? clubAttributesEdited.marketingPreferences : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('marketingPreferences')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperAdminSettings);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    frequently_asked_question_box: {\r\n        border: `1px solid ${colors.gray_300}`,\r\n        marginTop: 12\r\n    }\r\n});","import firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\n\r\nexport const GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED = 'GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED';\r\nexport const initializeGroupAttributesEdited = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED,\r\n            group: getState().manageGroupFromParams.groupProperties\r\n        });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CHANGED = 'GROUP_ADMIN_SETTINGS_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const groupAttributesEdited = getState().groupAdminSettings.groupAttributesEdited;\r\n        const target = event.target;\r\n\r\n        let isPropertyOfGroupAttributes = false;\r\n\r\n        let updateValue = null;\r\n        let shouldUpdateDatabase = false;\r\n\r\n        switch (target.type) {\r\n            case 'checkbox':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = target.checked;\r\n                }\r\n                break;\r\n            case 'radio':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = !isNaN(target.value) ? parseInt(target.value) : target.value;\r\n                }\r\n                break;\r\n            case 'text':\r\n                if (target.name !== \"primaryColor\"\r\n                    && target.name !== \"secondaryColor\"\r\n                    && groupAttributesEdited.hasOwnProperty(target.name)\r\n                ) {\r\n                    isPropertyOfGroupAttributes = true;\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = target.value;\r\n                }\r\n                break;\r\n            case 'textarea':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfGroupAttributes = true;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (shouldUpdateDatabase) {\r\n            realtimeDBUtils\r\n                .updateGroupPropertiesSetting({\r\n                    anid: groupProperties.anid,\r\n                    field: target.name,\r\n                    value: updateValue\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update this field.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            name: target.name,\r\n            value: target.type === 'checkbox' ? target.checked : target.value,\r\n            isPropertyOfGroupAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const handlePitchExpiryDateChanged = date => {\r\n    return (dispatch, getState) => {\r\n        if (date && date === \"Invalid Date\") {\r\n            dispatch({\r\n                type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n                isPropertyOfGroupAttributes: true,\r\n                name: \"defaultPitchExpiryDate\",\r\n                value: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            isPropertyOfGroupAttributes: true,\r\n            name: \"defaultPitchExpiryDate\",\r\n            value:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n}\r\n\r\nexport const handleSavePitchExpiryDate = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const groupSettings = getState().groupAdminSettings.groupAttributesEdited;\r\n\r\n        realtimeDBUtils\r\n            .updateGroupPropertiesSetting({\r\n                anid: groupProperties.anid,\r\n                field: \"defaultPitchExpiryDate\",\r\n                value: groupSettings.defaultPitchExpiryDate\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not update this field.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const handleCancelEditingPitchExpiryDate = () => {\r\n    return (dispatch, getState) => {\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            isPropertyOfGroupAttributes: true,\r\n            name: \"defaultPitchExpiryDate\",\r\n            value:\r\n                !groupProperties.settings.hasOwnProperty('defaultPitchExpiryDate')\r\n                    ?\r\n                    myUtils.getDateWithDaysFurtherThanToday(1)\r\n                    :\r\n                    groupProperties.settings.defaultPitchExpiryDate\r\n        });\r\n    }\r\n}\r\n\r\nexport const GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\r\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\r\n\r\n        if (isExpanded) {\r\n            dispatch({\r\n                type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                expandedPledgeFAQ: FAQ,\r\n                editExpandedPledgeFAQ: false\r\n            });\r\n        } else {\r\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                    expandedPledgeFAQ: null,\r\n                    editExpandedPledgeFAQ: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\r\nexport const toggleEditExpandedPledgeFAQ = () => {\r\n    return {\r\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\r\nexport const toggleAddNewPledgeFAQ = () => {\r\n    return {\r\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const submitNewPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer\r\n        } = getState().groupAdminSettings;\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\r\n\r\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const faq = {\r\n            id: myUtils.getCurrentDate(),\r\n            question: addedPledgeQuestion,\r\n            answer: addedPledgeAnswer\r\n        };\r\n\r\n        if (groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\r\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\r\n        } else {\r\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\r\n        }\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const saveEditedPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupAttributesEdited,\r\n            expandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer\r\n        } = getState().groupAdminSettings;\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const editedFAQ = {\r\n            id: expandedPledgeFAQ.id,\r\n            question: editedPledgeQuestion,\r\n            answer: editedPledgeAnswer\r\n        };\r\n\r\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteExistingPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\r\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\r\n    }\r\n};\r\n\r\nexport const saveGroupDetails = (field, value) => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(group.anid)\r\n            .child(field)\r\n            .set(value);\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS';\r\nexport const cancelEditingGroupDetails = (field) => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS,\r\n            name: field,\r\n            value: group[field]\r\n        });\r\n    }\r\n};\r\n\r\nexport const saveColor = field => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n        const color = field === \"primaryColor\" ? getState().groupAdminSettings.primaryColor : getState().groupAdminSettings.secondaryColor;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(group.anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(color.toUpperCase());\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR';\r\nexport const cancelEditingColor = field => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n        const color = field === \"primaryColor\" ? group.settings.primaryColor : group.settings.secondaryColor;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR,\r\n            field,\r\n            color\r\n        });\r\n    }\r\n};","import React, {Component} from \"react\";\r\n\r\nimport {\r\n    FormControl,\r\n    FormControlLabel,\r\n    Typography,\r\n    RadioGroup,\r\n    Radio,\r\n    Divider,\r\n    Button,\r\n    TextField,\r\n    ExpansionPanel,\r\n    ExpansionPanelSummary,\r\n    ExpansionPanelDetails,\r\n    Checkbox\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport DeleteIcon from \"@material-ui/icons/DeleteOutlined\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row\r\n} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as groupAdminSettingsActions from \"../../../redux-store/actions/groupAdminSettingsActions\";\r\n\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as colors from \"../../../values/colors\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupDetails: state.manageGroupFromParams.groupProperties,\r\n        groupAttributesEdited: state.groupAdminSettings.groupAttributesEdited,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        groupWebsite: state.groupAdminSettings.website,\r\n        groupDescription: state.groupAdminSettings.description,\r\n        primaryColor: state.groupAdminSettings.primaryColor,\r\n        secondaryColor: state.groupAdminSettings.secondaryColor,\r\n\r\n        addNewPledgeFAQ: state.groupAdminSettings.addNewPledgeFAQ,\r\n        addedPledgeQuestion: state.groupAdminSettings.addedPledgeQuestion,\r\n        addedPledgeAnswer: state.groupAdminSettings.addedPledgeAnswer,\r\n        expandedPledgeFAQ: state.groupAdminSettings.expandedPledgeFAQ,\r\n        editExpandedPledgeFAQ: state.groupAdminSettings.editExpandedPledgeFAQ,\r\n        editedPledgeQuestion: state.groupAdminSettings.editedPledgeQuestion,\r\n        editedPledgeAnswer: state.groupAdminSettings.editedPledgeAnswer\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        initializeGroupAttributesEdited: () => dispatch(groupAdminSettingsActions.initializeGroupAttributesEdited()),\r\n        handleInputChanged: (event) => dispatch(groupAdminSettingsActions.handleInputChanged(event)),\r\n\r\n        saveGroupDetails: (field, value) => dispatch(groupAdminSettingsActions.saveGroupDetails(field, value)),\r\n        cancelEditingGroupDetails: (field) => dispatch(groupAdminSettingsActions.cancelEditingGroupDetails(field)),\r\n\r\n        saveColor: (field) => dispatch(groupAdminSettingsActions.saveColor(field)),\r\n        cancelEditingColor: (field) => dispatch(groupAdminSettingsActions.cancelEditingColor(field)),\r\n        handlePitchExpiryDateChanged: (date) => dispatch(groupAdminSettingsActions.handlePitchExpiryDateChanged(date)),\r\n        handleSavePitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleSavePitchExpiryDate()),\r\n        handleCancelEditingPitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleCancelEditingPitchExpiryDate()),\r\n\r\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(groupAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\r\n        toggleAddNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleAddNewPledgeFAQ()),\r\n        submitNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.submitNewPledgeFAQ()),\r\n        toggleEditExpandedPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\r\n        saveEditedPledgeFAQ: () => dispatch(groupAdminSettingsActions.saveEditedPledgeFAQ()),\r\n        deleteExistingPledgeFAQ: () => dispatch(groupAdminSettingsActions.deleteExistingPledgeFAQ())\r\n    }\r\n};\r\n\r\nclass GroupAdminSettings extends Component {\r\n\r\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\r\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            initializeGroupAttributesEdited\r\n        } = this.props;\r\n\r\n        initializeGroupAttributesEdited();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupDetails,\r\n            groupAttributesEdited,\r\n\r\n            clubAttributes,\r\n\r\n            groupWebsite,\r\n            groupDescription,\r\n            primaryColor,\r\n            secondaryColor,\r\n\r\n            addNewPledgeFAQ,\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer,\r\n            expandedPledgeFAQ,\r\n            editExpandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer,\r\n\r\n            toggleAddNewPledgeFAQ,\r\n            submitNewPledgeFAQ,\r\n            toggleEditExpandedPledgeFAQ,\r\n            saveEditedPledgeFAQ,\r\n            deleteExistingPledgeFAQ,\r\n\r\n            handleInputChanged,\r\n            handlePitchExpiryDateChanged,\r\n            handleSavePitchExpiryDate,\r\n            handleCancelEditingPitchExpiryDate,\r\n            saveGroupDetails,\r\n            cancelEditingGroupDetails,\r\n            saveColor,\r\n            cancelEditingColor\r\n        } = this.props;\r\n\r\n        if (!groupAttributesEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 30}}>\r\n                <Row noGutters>\r\n                    {/** Manage group details */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">\r\n                            Manage group details\r\n                        </Typography>\r\n\r\n                        <FlexView marginTop={16} marginBottom={32}>\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", groupDetails.anid)\r\n                                        :\r\n                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", groupDetails.anid)\r\n                                }\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">\r\n                                    <PublicIcon style={{marginRight: 8}}/>\r\n                                    View group's public page\r\n                                </Button>\r\n                            </NavLink>\r\n                        </FlexView>\r\n\r\n                        {/** Edit group description */}\r\n                        <FlexView column marginTop={20}>\r\n                            <TextField name=\"description\" value={groupDescription} variant=\"outlined\" label=\"Group description\" multiline rowsMax={5} rows={5} onChange={handleInputChanged}/>\r\n\r\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('description')} style={{ marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('description', groupDescription)} disabled={groupDetails.description === groupDescription} style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Edit website */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FormControl fullWidth>\r\n                                <TextField label=\"Website\" placeholder=\"Official website\" name=\"website\" value={groupWebsite} fullWidth margin=\"dense\" variant=\"outlined\" required onChange={handleInputChanged}\r\n                                    error={\r\n                                        groupWebsite.trim().length === 0\r\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\r\n                                    }/>\r\n                                {\r\n                                    groupWebsite.trim().length === 0 || utils.isValidWebURL(groupWebsite)\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\">\r\n                                            Invalid website URL\r\n                                        </Typography>\r\n                                }\r\n                            </FormControl>\r\n\r\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('website')} style={{marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('website', groupWebsite)}\r\n                                    disabled={\r\n                                        groupDetails.website === groupWebsite\r\n                                        || groupWebsite.trim().length === 0\r\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\r\n                                    }\r\n                                    style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Sign up link */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FormControl fullWidth>\r\n                                <TextField label=\"Public registration link\" fullWidth margin=\"dense\" variant=\"outlined\" helperText=\"This link can be shared to unregistered issuers/investors so that they can sign up and become members of your group without sending invitation emails manually.\" value={ process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}/>\r\n                            </FormControl>\r\n                        </FlexView>\r\n\r\n                        {/** Edit primary color */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FlexView vAlignContent=\"center\">\r\n                                <TextField required name=\"primaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Primary color\" value={primaryColor.toUpperCase()} onChange={handleInputChanged}/>\r\n\r\n                                {\r\n                                    utils.isValidHexColorCode(primaryColor)\r\n                                        ?\r\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: primaryColor}}/>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                utils.isValidHexColorCode(primaryColor)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\r\n                                        Invalid color\r\n                                    </Typography>\r\n                            }\r\n\r\n                            <FlexView width=\"100%\" marginTop={10}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"primaryColor\")} style={{ marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"primaryColor\")}\r\n                                    disabled={!utils.isValidHexColorCode(primaryColor) || groupDetails.settings.primaryColor === primaryColor}\r\n                                    style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Edit secondary color */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FlexView vAlignContent=\"center\">\r\n                                <TextField required name=\"secondaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Secondary color\" value={secondaryColor.toUpperCase()} onChange={handleInputChanged}/>\r\n\r\n                                {\r\n                                    utils.isValidHexColorCode(secondaryColor)\r\n                                        ?\r\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: secondaryColor}}/>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                utils.isValidHexColorCode(secondaryColor)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\r\n                                        Invalid color\r\n                                    </Typography>\r\n                            }\r\n\r\n                            <FlexView width=\"100%\" marginTop={10}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"secondaryColor\")} style={{marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"secondaryColor\")}\r\n                                    disabled={!utils.isValidHexColorCode(secondaryColor) || groupDetails.settings.secondaryColor === secondaryColor}\r\n                                    style={{ marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\r\n                                backgroundColor:\r\n                                    !groupDetails\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupDetails.settings.primaryColor\r\n                            }}/>\r\n                    </Col>\r\n\r\n                    {/** Manage group attributes */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">\r\n                                Manage group attributes\r\n                            </Typography>\r\n\r\n                            {\r\n                                /**\r\n                                 * Set pitch expiry date (for QIB only)\r\n                                 */\r\n                            }\r\n                            {\r\n                                groupUserName !== \"qib\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column marginTop={30}>\r\n                                        <KeyboardDatePicker\r\n                                            autoOk\r\n                                            fullWidth\r\n                                            variant=\"dialog\"\r\n                                            inputVariant=\"outlined\"\r\n                                            label=\"Choose expired date for this pitch\"\r\n                                            format=\"dd/MM/yyyy\"\r\n                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                            value={\r\n                                                !groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                    ?\r\n                                                    utils.getDateWithDaysFurtherThanToday(1)\r\n                                                    :\r\n                                                    groupAttributesEdited.defaultPitchExpiryDate\r\n                                            }\r\n                                            InputAdornmentProps={{position: \"start\"}}\r\n                                            error={\r\n                                                groupAttributesEdited.hasOwnProperty('groupAttributesEdited')\r\n                                                    ?\r\n                                                    groupAttributesEdited.defaultPitchExpiryDate === null\r\n                                                    || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\r\n                                                    :\r\n                                                    false\r\n                                            }\r\n                                            onChange={handlePitchExpiryDateChanged}\r\n                                        />\r\n\r\n                                        <FlexView width=\"100%\" marginTop={15}>\r\n                                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={handleCancelEditingPitchExpiryDate} style={{marginRight: 6}}>\r\n                                                Cancel\r\n                                            </Button>\r\n                                            <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={handleSavePitchExpiryDate}\r\n                                                disabled={\r\n                                                    groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                        ?\r\n                                                        groupAttributesEdited.defaultPitchExpiryDate === null\r\n                                                        || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\r\n                                                        || (\r\n                                                            groupDetails.settings.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                            && groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                            && groupDetails.settings.defaultPitchExpiryDate === groupAttributesEdited.defaultPitchExpiryDate\r\n                                                        )\r\n                                                        :\r\n                                                        false}\r\n                                                style={{marginLeft: 6}}>\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n\r\n                                        {/** Divider */}\r\n                                        <Divider style={{marginTop: 40, marginBottom: 20, height: 3}}/>\r\n                                    </FlexView>\r\n                            }\r\n\r\n                            {\r\n                                /**\r\n                                 * Set project's visibility\r\n                                 */\r\n                            }\r\n                            <FlexView marginTop={20}>\r\n                                <FormControl>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Choose default visibility value for all newly created investment opportunities\r\n                                    </Typography>\r\n                                    <RadioGroup name=\"projectVisibility\" value={groupAttributesEdited.projectVisibility.toString()} onChange={handleInputChanged}>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PRIVATE.toString()} control={<Radio/>} label=\"Private\"/>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED.toString()} control={<Radio/>} label=\"Restricted\"/>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PUBLIC.toString()} control={<Radio/>} label=\"Public\"/>\r\n                                    </RadioGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {/** Divider */}\r\n                            <Divider style={{marginTop: 20, marginBottom: 20, height: 3}}/>\r\n\r\n                            {\r\n                                /**\r\n                                 * Hide/Show investors' contact details\r\n                                 */\r\n                            }\r\n                            {/*<FlexView>*/}\r\n                            {/*    <FormControl>*/}\r\n                            {/*        <FormControlLabel*/}\r\n                            {/*            name=\"makeInvestorsContactDetailsVisibleToIssuers\"*/}\r\n                            {/*            control={*/}\r\n                            {/*                <Checkbox*/}\r\n                            {/*                    color=\"primary\"*/}\r\n                            {/*                    value={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\r\n                            {/*                    checked={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\r\n                            {/*                    onChange={handleInputChanged}*/}\r\n                            {/*                />*/}\r\n                            {/*            }*/}\r\n                            {/*            label=\"Allow issuers to see investors' contact details\"*/}\r\n                            {/*            labelPlacement=\"end\"*/}\r\n                            {/*        />*/}\r\n                            {/*        <Typography*/}\r\n                            {/*            variant=\"body1\"*/}\r\n                            {/*            align=\"left\"*/}\r\n                            {/*            style={{*/}\r\n                            {/*                marginTop: 8*/}\r\n                            {/*            }}*/}\r\n                            {/*        >*/}\r\n                            {/*            <b*/}\r\n                            {/*                style={{*/}\r\n                            {/*                    color: colors.errorColor*/}\r\n                            {/*                }}*/}\r\n                            {/*            >*/}\r\n                            {/*                <u>Note:</u>&nbsp;This is a global setting.*/}\r\n                            {/*            </b>*/}\r\n                            {/*            &nbsp;When <u><b>ticked</b></u>, <b>the contact details of all investors in this*/}\r\n                            {/*            group</b> will be*/}\r\n                            {/*            made visible to the issuers.*/}\r\n                            {/*        </Typography>*/}\r\n                            {/*    </FormControl>*/}\r\n                            {/*</FlexView>*/}\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\r\n                                backgroundColor:\r\n                                    !groupDetails\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupDetails.settings.primaryColor\r\n                            }}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminSettings);\r\n\r\nconst styles = StyleSheet.create({\r\n    frequently_asked_question_box: {\r\n        border: `1px solid ${colors.gray_300}`,\r\n        marginTop: 12\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {OverlayTrigger, Tooltip} from 'react-bootstrap';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class InfoOverlay extends Component {\r\n    render() {\r\n        const {\r\n            message,\r\n            placement\r\n        } = this.props;\r\n\r\n        return (\r\n            <OverlayTrigger\r\n                trigger={['hover', 'focus']}\r\n                placement={placement}\r\n                flip\r\n                overlay={ <Tooltip id={`tooltip-${placement}`}>{message}</Tooltip> }\r\n            >\r\n                <InfoIcon fontSize=\"small\" style={{ color: colors.gray_600 }}/>\r\n            </OverlayTrigger>\r\n        );\r\n    }\r\n}","import firebase from \"../../firebase/firebaseApp\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport {getUserBasedOnID} from \"../../firebase/realtimeDBUtils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as emailUtils from \"../../utils/emailUtils\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport {\r\n    FILTER_GROUP_MEMBERS_ALL,\r\n    FILTER_HOME_MEMBERS,\r\n    FILTER_PLATFORM_MEMBERS,\r\n    FILTER_REGISTRATION_STATUS_ALL\r\n} from '../../pages/admin/components/InvitedUsers';\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const LOADING_INVITED_USERS = 'LOADING_INVITED_USERS';\r\nexport const FINISHED_LOADING_INVITED_USERS = 'FINISHED_LOADING_INVITED_USERS';\r\nexport const loadInvitedUsers = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: LOADING_INVITED_USERS\r\n        });\r\n\r\n        const admin = getState().auth.user;\r\n\r\n        realtimeDBUtils\r\n            .loadInvitedUsers(admin.superAdmin ? null : admin.anid)\r\n            .then(invitedUsers => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_INVITED_USERS,\r\n                    invitedUsers,\r\n                    error: null\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_INVITED_USERS,\r\n                    invitedUsers: [],\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_TOGGLE_SEARCH_MODE = 'INVITED_USERS_TOGGLE_SEARCH_MODE';\r\nexport const toggleInvitedUsersSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\r\n\r\n        const {\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup\r\n        } = getState().invitedUsers;\r\n\r\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        let matchedInvitedUsers;\r\n\r\n        // exit search mode\r\n        if (invitedUsersInSearchMode) {\r\n            matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                sourceInvitedUsers: invitedUsers,\r\n                searchText: null,\r\n                filterRegistrationStatus,\r\n                filterUserType,\r\n                filterMembers,\r\n                filterGroup,\r\n                currentGroupProperties\r\n            });\r\n        }\r\n        // enter search mode\r\n        else {\r\n            if (invitedUserSearchText.trim().length > 0) {\r\n                matchedInvitedUsers = prevMatchedInvitedUsers.filter(\r\n                    invitedUser => invitedUser.email.toLowerCase() === invitedUserSearchText.trim().toLowerCase()\r\n                );\r\n            } else {\r\n                matchedInvitedUsers = prevMatchedInvitedUsers;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITED_USERS_TOGGLE_SEARCH_MODE,\r\n            matchedInvitedUsers\r\n        });\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_SEARCH_VARIABLE_CHANGED = 'INVITED_USERS_SEARCH_VARIABLE_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\r\n        let matchedInvitedUsers = [];\r\n\r\n        const {\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup\r\n        } = getState().invitedUsers;\r\n\r\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const name = event.target.name;\r\n        let value = null;\r\n\r\n        switch (name) {\r\n            case 'invitedUserSearchText':\r\n                const newSearchText = event.target.value;\r\n                value = newSearchText;\r\n\r\n                // search mode is off\r\n                if (!invitedUsersInSearchMode) {\r\n                    // return the previous matchedProjects\r\n                    matchedInvitedUsers = prevMatchedInvitedUsers;\r\n                    break;\r\n                }\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: newSearchText,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterRegistrationStatus':\r\n                const newRegistrationStatusFilter = event.target.value;\r\n                value = newRegistrationStatusFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus: newRegistrationStatusFilter,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterUserType':\r\n                const newUserTypeFilter = event.target.value;\r\n                value = newUserTypeFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType: newUserTypeFilter,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterGroup':\r\n                const newGroupFilter = event.target.value;\r\n                value = newGroupFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup: newGroupFilter,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterMembers':\r\n                const newMembersFilter = event.target.value;\r\n                value = newMembersFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers: newMembersFilter,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITED_USERS_SEARCH_VARIABLE_CHANGED,\r\n            name,\r\n            value,\r\n            matchedInvitedUsers\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Get updated invitedUsers when a search criteria is changed\r\n *\r\n * @param sourceInvitedUsers\r\n * @param searchText\r\n * @param filterRegistrationStatus\r\n * @param filterUserType\r\n * @param filterMembers\r\n * @param filterGroup\r\n * @param currentGroupProperties\r\n * @returns {[]}\r\n */\r\nconst getUpdatedInvitedUsers = (\r\n    {\r\n        sourceInvitedUsers,\r\n        searchText,\r\n        filterRegistrationStatus,\r\n        filterUserType,\r\n        filterMembers,\r\n        filterGroup,\r\n        currentGroupProperties\r\n    }\r\n) => {\r\n    let matchedInvitedUsers = [];\r\n\r\n    sourceInvitedUsers.forEach(invitedUser => {\r\n        let satisfiedRegistrationStatusFilter = false;\r\n        let satisfiedUserTypeFilter = false;\r\n        let satisfiedGroupMembersFilter = false;\r\n        let satisfiedGroupFilter = false;\r\n\r\n        // filter by registration status\r\n        switch (filterRegistrationStatus) {\r\n            case FILTER_REGISTRATION_STATUS_ALL:\r\n                satisfiedRegistrationStatusFilter = true;\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                if (invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\r\n                    satisfiedRegistrationStatusFilter = true;\r\n                }\r\n                break;\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                if (invitedUser.status === DB_CONST.INVITED_USER_NOT_REGISTERED) {\r\n                    satisfiedRegistrationStatusFilter = true;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by user type\r\n        switch (filterUserType) {\r\n            case DB_CONST.TYPE_INVESTOR:\r\n                if (invitedUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                    satisfiedUserTypeFilter = true;\r\n                }\r\n                break;\r\n            case DB_CONST.TYPE_ISSUER:\r\n                if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                    satisfiedUserTypeFilter = true;\r\n                }\r\n                break;\r\n            case 0: // all user type\r\n                satisfiedUserTypeFilter = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by group members (all, home or foreign)\r\n        switch (filterMembers) {\r\n            case FILTER_GROUP_MEMBERS_ALL:\r\n                satisfiedGroupMembersFilter = true;\r\n                break;\r\n            case FILTER_HOME_MEMBERS:\r\n                if (currentGroupProperties) {\r\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\r\n                        && invitedUser.requestedToJoin === false\r\n                    ) {\r\n                        satisfiedGroupMembersFilter = true;\r\n                    }\r\n                } else {\r\n                    satisfiedGroupMembersFilter = true;\r\n                }\r\n                break;\r\n            case FILTER_PLATFORM_MEMBERS:\r\n                if (currentGroupProperties) {\r\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\r\n                        && invitedUser.requestedToJoin === true\r\n                    ) {\r\n                        satisfiedGroupMembersFilter = true;\r\n                    }\r\n                } else {\r\n                    satisfiedGroupMembersFilter = true;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by a specific group\r\n        if (filterGroup !== \"null\") {\r\n            if (invitedUser.invitedBy === filterGroup) {\r\n                satisfiedGroupFilter = true;\r\n            }\r\n        }\r\n        // all groups\r\n        else {\r\n            satisfiedGroupFilter = true;\r\n        }\r\n\r\n        if (satisfiedRegistrationStatusFilter\r\n            && satisfiedUserTypeFilter\r\n            && satisfiedGroupMembersFilter\r\n            && satisfiedGroupFilter\r\n        ) {\r\n            matchedInvitedUsers.push(invitedUser);\r\n        }\r\n    });\r\n\r\n    if (searchText !== null) {\r\n        matchedInvitedUsers = matchedInvitedUsers.filter(\r\n            invitedUser => invitedUser.email.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n    }\r\n\r\n    return matchedInvitedUsers;\r\n}\r\n\r\nexport const INVITED_USERS_CHANGE_PAGE = 'INVITED_USERS_CHANGE_PAGE';\r\nexport const handleChangeTablePage = (event, newPage) => {\r\n    return {\r\n        type: INVITED_USERS_CHANGE_PAGE,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_CHANGE_ROWS_PER_PAGE = 'INVITED_USERS_CHANGE_ROWS_PER_PAGE';\r\nexport const handleChangeTableRowsPerPage = event => {\r\n    return {\r\n        type: INVITED_USERS_CHANGE_ROWS_PER_PAGE,\r\n        rows: event.target.value\r\n    }\r\n};\r\n\r\nexport const resendInvite = invitedUser => {\r\n    return (dispatch, getState) => {\r\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\r\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const currentGroupAdmin = getState().auth.user;\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_INVITATION,\r\n                data: {\r\n                    groupName: groupProperties.displayName,\r\n                    groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\r\n                    groupWebsite: groupProperties.website,\r\n                    groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\r\n                    sender: currentGroupAdmin.email,\r\n                    receiver: invitedUser.email,\r\n                    receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\r\n                    userType:\r\n                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                            ?\r\n                            \"Issuer\"\r\n                            :\r\n                            \"Investor\"\r\n                    ,\r\n                    signupURL:\r\n                        groupUserName\r\n                            ?\r\n                            `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\r\n                            :\r\n                            `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\r\n                }\r\n            })\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentGroupAdmin.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\r\n                        interactedObjectID: invitedUser.id,\r\n                        activitySummary:\r\n                            realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION\r\n                                .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\r\n                                .replace(\"%group%\", groupProperties.displayName)\r\n                                .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\r\n                        ,\r\n                        action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                            .replace(\":userID\", invitedUser.id)\r\n                        ,\r\n                        value: {\r\n                            ...invitedUser,\r\n                            Invitor: null\r\n                        }\r\n                    });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Invitation resent.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED = \"INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED\";\r\nexport const addMembersFromOneGroupToAnotherGroup = (fromGroup, toGroup) => {\r\n    return async (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const addingMembersFromOneGroupToAnotherGroup = getState().invitedUsers.addingMembersFromOneGroupToAnotherGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (addingMembersFromOneGroupToAnotherGroup) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\r\n                value: true\r\n            });\r\n\r\n            await new Api()\r\n                .request(\r\n                    \"put\",\r\n                    ApiRoutes.addMembersToGroup.replace(\":group\", toGroup),\r\n                    {\r\n                        queryParameters: null,\r\n                        requestBody: {\r\n                            fromGroup,\r\n                            addUserType: \"all\"\r\n                        }\r\n                    }\r\n                );\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\r\n                value: false\r\n            });\r\n\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: \"Members added.\",\r\n                color: \"primary\",\r\n                position: \"bottom\"\r\n            });\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: error.toString(),\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const INVITED_USERS_REQUESTING_CSV_STATE_CHANGED = \"INVITED_USERS_REQUESTING_CSV_STATE_CHANGED\";\r\nexport const exportToCsv = () => {\r\n    return async (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const requestingCsv = getState().invitedUsers.requestingCsv;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (requestingCsv) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: true\r\n            });\r\n\r\n            let response = await new Api().request(\"get\", ApiRoutes.exportUsersCsvRoute);\r\n\r\n            // create a file from the csv returned by the server\r\n            const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\r\n            const link = document.createElement(\"a\");\r\n            if (link.download !== undefined) {\r\n                // create a download url\r\n                const url = URL.createObjectURL(blob);\r\n                link.setAttribute(\"href\", url);\r\n                link.setAttribute(\"download\", \"data.csv\");\r\n                link.style.visibility = \"hidden\";\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: false\r\n            });\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: error.toString(),\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: false\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\n\r\nlet invitedUsersListener = null;\r\n\r\nexport const INVITED_USERS_CHANGED = \"INVITED_USERS_CHANGED\";\r\n\r\nexport const startListeningForInvitedUsersChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!invitedUsersListener) {\r\n            const admin = getState().auth.user;\r\n\r\n            invitedUsersListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n\r\n            invitedUsersListener\r\n                .on(\"child_added\", async (snapshot) => {\r\n                        let invitedUser = snapshot.val();\r\n\r\n                        let shouldAddInvitedUser = false;\r\n\r\n                        if (admin.superAdmin) {\r\n                            shouldAddInvitedUser = true;\r\n                        } else {\r\n                            if (invitedUser.invitedBy === admin.anid) {\r\n                                shouldAddInvitedUser = true;\r\n                            }\r\n                        }\r\n\r\n                        if (!shouldAddInvitedUser) {\r\n                            return;\r\n                        }\r\n\r\n                        let invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n                        let invitedUserIndex = invitedUsers.findIndex(existingInvitedUser => existingInvitedUser.id === invitedUser.id);\r\n                        if (invitedUserIndex === -1) {\r\n                            const {\r\n                                invitedUserSearchText,\r\n                                invitedUsersInSearchMode,\r\n                                filterRegistrationStatus,\r\n                                filterUserType,\r\n                                filterMembers,\r\n                                filterGroup\r\n                            } = getState().invitedUsers;\r\n\r\n                            const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n                            const group = await realtimeDBUtils.loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n\r\n                            invitedUser.Invitor = {\r\n                                anid: group.anid,\r\n                                displayName: group.displayName,\r\n                                logo: group.logo\r\n                            };\r\n\r\n                            if (invitedUser.hasOwnProperty(\"officialUserID\")) {\r\n                                invitedUser.officialUser = await getUserBasedOnID(invitedUser.officialUserID);\r\n                            }\r\n\r\n                            let matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                                sourceInvitedUsers: [...invitedUsers, invitedUser],\r\n                                searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                                filterRegistrationStatus,\r\n                                filterUserType,\r\n                                filterMembers,\r\n                                filterGroup,\r\n                                currentGroupProperties\r\n                            });\r\n\r\n                            return dispatch({\r\n                                type: INVITED_USERS_CHANGED,\r\n                                invitedUsers: [...getState().invitedUsers.invitedUsers, invitedUser],\r\n                                matchedInvitedUsers\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n\r\n            invitedUsersListener\r\n                .on(\"child_changed\", async (snapshot) => {\r\n                    let invitedUser = snapshot.val();\r\n\r\n                    let shouldChangeInvitedUser = false;\r\n\r\n                    if (admin.superAdmin) {\r\n                        shouldChangeInvitedUser = true;\r\n                    } else {\r\n                        if (invitedUser.invitedBy === admin.anid) {\r\n                            shouldChangeInvitedUser = true;\r\n                        }\r\n                    }\r\n\r\n                    if (!shouldChangeInvitedUser) {\r\n                        return;\r\n                    }\r\n\r\n                    let invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n                    let invitedUserIndex = invitedUsers.findIndex(\r\n                        existingInvitedUser => existingInvitedUser.id === invitedUser.id\r\n                    );\r\n                    if (invitedUserIndex !== -1) {\r\n                        invitedUser.Invitor = invitedUsers[invitedUserIndex].Invitor;\r\n                        invitedUser.officialUser = invitedUsers[invitedUserIndex].officialUser;\r\n                        invitedUsers[invitedUserIndex] = invitedUser;\r\n                        const {\r\n                            invitedUserSearchText,\r\n                            invitedUsersInSearchMode,\r\n                            filterRegistrationStatus,\r\n                            filterUserType,\r\n                            filterMembers,\r\n                            filterGroup\r\n                        } = getState().invitedUsers;\r\n\r\n                        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n                        let matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                            sourceInvitedUsers: [...invitedUsers],\r\n                            searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                            filterRegistrationStatus,\r\n                            filterUserType,\r\n                            filterMembers,\r\n                            filterGroup,\r\n                            currentGroupProperties\r\n                        });\r\n\r\n                        return dispatch({\r\n                            type: INVITED_USERS_CHANGED,\r\n                            invitedUsers: [...invitedUsers],\r\n                            matchedInvitedUsers\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForInvitedUsersChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (invitedUsersListener) {\r\n            invitedUsersListener.off('child_added');\r\n            invitedUsersListener.off('child_changed');\r\n            invitedUsersListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    InputLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {HashLoader} from \"react-spinners\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css} from \"aphrodite\";\r\nimport InfoOverlay from \"../../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as invitedUsersActions from \"../../../redux-store/actions/invitedUsersActions\";\r\nimport * as invitationDialogActions from \"../../../redux-store/actions/invitationDialogActions\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport * as myUtils from \"../../../utils/utils\";\r\nimport * as colors from \"../../../values/colors\";\r\n\r\nexport const FILTER_REGISTRATION_STATUS_ALL = -1;\r\n\r\nexport const FILTER_GROUP_MEMBERS_ALL = 0;\r\nexport const FILTER_HOME_MEMBERS = 1;\r\nexport const FILTER_PLATFORM_MEMBERS = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n\r\n        admin: state.auth.user,\r\n\r\n        invitedUsers: state.invitedUsers.invitedUsers,\r\n        invitedUsersLoaded: state.invitedUsers.invitedUsersLoaded,\r\n        invitedUsersBeingLoaded: state.invitedUsers.invitedUsersBeingLoaded,\r\n\r\n        invitedUsersPage: state.invitedUsers.invitedUsersPage,\r\n        invitedUsersRowsPerPage: state.invitedUsers.invitedUsersRowsPerPage,\r\n\r\n        filterRegistrationStatus: state.invitedUsers.filterRegistrationStatus,\r\n        filterUserType: state.invitedUsers.filterUserType,\r\n        filterMembers: state.invitedUsers.filterMembers,\r\n        filterGroup: state.invitedUsers.filterGroup,\r\n\r\n        invitedUserSearchText: state.invitedUsers.invitedUserSearchText,\r\n        invitedUsersInSearchMode: state.invitedUsers.invitedUsersInSearchMode,\r\n\r\n        requestingCsv: state.invitedUsers.requestingCsv,\r\n        addingMembersFromOneGroupToAnotherGroup: state.invitedUsers.addingMembersFromOneGroupToAnotherGroup,\r\n\r\n        matchedInvitedUsers: state.invitedUsers.matchedInvitedUsers\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadInvitedUsers: () => dispatch(invitedUsersActions.loadInvitedUsers()),\r\n        toggleSearchMode: () => dispatch(invitedUsersActions.toggleInvitedUsersSearchMode()),\r\n        handleInputChanged: (event) => dispatch(invitedUsersActions.handleInputChanged(event)),\r\n        handleChangeTablePage: (event, newPage) => dispatch(invitedUsersActions.handleChangeTablePage(event, newPage)),\r\n        handleChangeTableRowsPerPage: (event) => dispatch(invitedUsersActions.handleChangeTableRowsPerPage(event)),\r\n        startListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.startListeningForInvitedUsersChanged()),\r\n        resendInvite: (invitedUser) => dispatch(invitedUsersActions.resendInvite(invitedUser)),\r\n        exportToCsv: () => dispatch(invitedUsersActions.exportToCsv()),\r\n        addMembersFromOneGroupToAnotherGroup: (fromGroup, toGroup) => dispatch(invitedUsersActions.addMembersFromOneGroupToAnotherGroup(fromGroup, toGroup)),\r\n\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog())\r\n    }\r\n};\r\n\r\nclass InvitedUsers extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n\r\n            startListeningForInvitedUsersChanged\r\n        } = this.props;\r\n\r\n        if (invitedUsers && invitedUsersLoaded) {\r\n            startListeningForInvitedUsersChanged();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            admin,\r\n\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup,\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n\r\n            systemGroups,\r\n            groupsLoaded,\r\n            requestingCsv,\r\n            addingMembersFromOneGroupToAnotherGroup,\r\n\r\n            toggleInvitationDialog,\r\n            toggleSearchMode,\r\n            handleInputChanged,\r\n            exportToCsv,\r\n            addMembersFromOneGroupToAnotherGroup\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column width=\"100%\">\r\n                <Divider style={{marginBottom: 30}}/>\r\n\r\n                {/** Invite new user button - available for group admins only */}\r\n                {\r\n                    admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row style={{marginBottom: 30}}>\r\n                            <Col xs={12} md={5} lg={12}>\r\n                                <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleInvitationDialog}>\r\n                                    <Add style={{ marginRight: 10, width: 20, height: \"auto\"}}/>Invite new group member</Button>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Filters */}\r\n                <Row>\r\n                    {/** Registration status */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">Registration status</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterRegistrationStatus\"/>\r\n                                }\r\n                                style={{marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterRegistrationStatus\"\r\n                                value={filterRegistrationStatus}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={FILTER_REGISTRATION_STATUS_ALL}> All</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_NOT_REGISTERED}>Not registered</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_STATUS_ACTIVE}>Active</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** User type */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">User type</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterUserType\"/>\r\n                                }\r\n                                style={{ marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterUserType\"\r\n                                value={filterUserType}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={0}>All</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_INVESTOR}>Investor</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_ISSUER}>Issuer</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** Group members */}\r\n                    {\r\n                        !admin.superAdmin\r\n                            ?\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FormControl fullWidth>\r\n                                        <InputLabel>\r\n                                            <Typography variant=\"body1\" color=\"primary\" align=\"left\">Members</Typography>\r\n                                        </InputLabel>\r\n                                        <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterMembers\"/>\r\n                                            }\r\n                                            style={{ marginTop: 25, width: \"100%\"}}\r\n                                            name=\"filterMembers\"\r\n                                            value={filterMembers}\r\n                                            onChange={handleInputChanged}\r\n                                        >\r\n                                            <MenuItem value={FILTER_GROUP_MEMBERS_ALL} key={FILTER_GROUP_MEMBERS_ALL}>All</MenuItem>\r\n                                            <MenuItem value={FILTER_HOME_MEMBERS} key={FILTER_HOME_MEMBERS}>Home members</MenuItem>\r\n                                            <MenuItem value={FILTER_PLATFORM_MEMBERS} key={FILTER_PLATFORM_MEMBERS}>Platform members</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n\r\n                                    <FlexView marginLeft={15}>\r\n                                        <InfoOverlay\r\n                                            placement=\"right\"\r\n                                            message={\r\n                                                \"Home members are the users that registered through this group. Platform members are existing users of Invest West who requested access to this group.\"\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n                            :\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FormControl fullWidth>\r\n                                    <InputLabel>\r\n                                        <Typography variant=\"body1\" color=\"primary\" align=\"left\">Group</Typography>\r\n                                    </InputLabel>\r\n                                    <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterGroup\" disabled={!groupsLoaded}/>\r\n                                        }\r\n                                        style={{marginTop: 25, width: \"100%\"}}\r\n                                        name=\"filterGroup\"\r\n                                        value={filterGroup}\r\n                                        onChange={handleInputChanged}>\r\n                                        <MenuItem value=\"null\" key=\"null\">\r\n                                            {\r\n                                                !groupsLoaded\r\n                                                    ?\r\n                                                    \"Loading groups ...\"\r\n                                                    :\r\n                                                    \"All\"\r\n                                            }\r\n                                        </MenuItem>\r\n                                        {\r\n                                            !groupsLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                systemGroups.map(group => (\r\n                                                    <MenuItem value={group.anid} key={group.anid}>{group.displayName}</MenuItem>\r\n                                                ))\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Search email */}\r\n                <Row\r\n                    style={{ marginTop: 30,  marginBottom: 30}}>\r\n                    <Col xs={12} sm={12} md={12} lg={8}>\r\n                        <FlexView>\r\n                            <FlexView basis=\"90%\" vAlignContent=\"center\" hAlignContent=\"center\"\r\n                            >\r\n                                <TextField value={invitedUserSearchText} label=\"Search by email\" name=\"invitedUserSearchText\" fullWidth variant=\"outlined\" margin=\"dense\" onChange={handleInputChanged}/>\r\n                            </FlexView>\r\n                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" basis=\"10%\" marginLeft={10}>\r\n                                <IconButton style={{width: 50,height: 50}}\r\n                                    onClick={toggleSearchMode}>\r\n                                    {\r\n                                        !invitedUsersInSearchMode\r\n                                            ?\r\n                                            <SearchIcon/>\r\n                                            :\r\n                                            <CloseIcon/>\r\n                                    }\r\n                                </IconButton>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Add members (only investors) from QIB to Silicon Gorge and vice versa */}\r\n                {\r\n                    !admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        systemGroups.findIndex(group => group.anid === filterGroup) !== -1\r\n                        && (\r\n                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                            || systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"iap-silicon-gorge\"\r\n                        )\r\n                            ?\r\n                            <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)}\r\n                                    onClick={\r\n                                        systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                            ?\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"iap-silicon-gorge\")].anid\r\n                                            )\r\n                                            :\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"qib\")].anid\r\n                                            )\r\n                                    }\r\n                                    style={{marginRight: 10}}>\r\n                                    {\r\n                                        addingMembersFromOneGroupToAnotherGroup\r\n                                            ?\r\n                                            \"Adding ...\"\r\n                                            :\r\n                                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                                ?\r\n                                                \"Add members from QIB to Silicon Gorge\"\r\n                                                :\r\n                                                \"Add members from Silicon Gorge to QIB\"\r\n                                    }\r\n                                </Button>\r\n                            </FlexView>\r\n                            :\r\n                            null\r\n                }\r\n\r\n                {/** Export button - only available for admins */}\r\n                {\r\n                    admin.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={exportToCsv} style={{marginRight: 10}}\r\n                            >\r\n                                {\r\n                                    requestingCsv\r\n                                        ?\r\n                                        \"Exporting ...\"\r\n                                        :\r\n                                        \"Export to csv\"\r\n                                }\r\n                            </Button>\r\n\r\n                            <InfoOverlay placement=\"right\"\r\n                                message={\r\n                                    admin.superAdmin\r\n                                        ?\r\n                                        \"Export all the users in the system to a .csv file.\"\r\n                                        :\r\n                                        \"Export all the members in your group to a .csv file.\"\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                }\r\n\r\n                {\r\n                    this.renderInvitedUsersTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users table\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUsersTable() {\r\n        const {\r\n            admin,\r\n\r\n            matchedInvitedUsers,\r\n\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n\r\n            handleChangeTablePage,\r\n            handleChangeTableRowsPerPage\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper elevation={0} style={{width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Name</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Email</b></Typography>\r\n                            </TableCell>\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <Typography align=\"left\" variant=\"body2\"><b>Group</b></Typography>\r\n                                    </TableCell>\r\n                            }\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>User type</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Invited/requested to join date</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Registration status</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\" ><b>Registered/joined date</b></Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderInvitedUsersRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} count={matchedInvitedUsers.length} rowsPerPage={invitedUsersRowsPerPage} page={invitedUsersPage}\r\n                                backIconButtonProps={{\r\n                                    'aria-label': 'Previous Page',\r\n                                }}\r\n                                nextIconButtonProps={{\r\n                                    'aria-label': 'Next Page',\r\n                                }}\r\n                                SelectProps={{\r\n                                    native: true,\r\n                                }}\r\n                                onChangePage={handleChangeTablePage}\r\n                                onChangeRowsPerPage={handleChangeTableRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvitedUsersRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            admin,\r\n            invitedUsersLoaded,\r\n            matchedInvitedUsers,\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterGroup,\r\n            filterMembers,\r\n            resendInvite\r\n        } = this.props;\r\n\r\n        let renderedInvitedUsers = [];\r\n\r\n        if (matchedInvitedUsers.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={12}>\r\n                        <FlexView style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                invitedUsersLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            invitedUsersInSearchMode\r\n                                            || filterRegistrationStatus !== FILTER_REGISTRATION_STATUS_ALL\r\n                                            || filterUserType !== 0\r\n                                            || filterGroup !== \"null\"\r\n                                            || filterMembers !== FILTER_GROUP_MEMBERS_ALL\r\n                                                ?\r\n                                                \"There are no users found using your current filter criteria.\"\r\n                                                :\r\n                                                \"No users found.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let matchedUsersInvitedByTheGroup = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate !== \"none\"\r\n        );\r\n        matchedUsersInvitedByTheGroup.sort((user1, user2) => {\r\n            return user2.invitedDate - user1.invitedDate;\r\n        });\r\n\r\n        let matchedUsersRequestedToJoin = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate === \"none\"\r\n        );\r\n        matchedUsersRequestedToJoin.sort((user1, user2) => {\r\n            return user2.requestedToJoinDate - user1.requestedToJoinDate;\r\n        });\r\n\r\n        if (filterMembers === FILTER_HOME_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup];\r\n        } else if (filterMembers === FILTER_PLATFORM_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersRequestedToJoin];\r\n        } else {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup, ...matchedUsersRequestedToJoin];\r\n        }\r\n\r\n        return (\r\n            !renderedInvitedUsers\r\n                ?\r\n                null\r\n                :\r\n                renderedInvitedUsers\r\n                    .slice(invitedUsersPage * invitedUsersRowsPerPage, invitedUsersPage * invitedUsersRowsPerPage + invitedUsersRowsPerPage)\r\n                    .map(invitedUser => (\r\n                        <TableRow hover key={invitedUser.id}>\r\n                            {/** User name */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    {/** User name */}\r\n                                    <NavLink\r\n                                        to={\r\n                                            invitedUser.hasOwnProperty('officialUserID')\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.EDIT_USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                    :\r\n                                                    ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                :\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    :\r\n                                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                        }\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <Typography color=\"primary\" align=\"left\">\r\n                                            {\r\n                                                invitedUser.hasOwnProperty('officialUser')\r\n                                                    ?\r\n                                                    `${invitedUser.officialUser.firstName} ${invitedUser.officialUser.lastName}`\r\n                                                    :\r\n                                                    `${invitedUser.firstName} ${invitedUser.lastName}`\r\n                                            }\r\n                                        </Typography>\r\n                                    </NavLink>\r\n\r\n                                    {/** Resend invite button */}\r\n                                    {\r\n                                        invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            // this check to ensure only the group admin that initally invited this\r\n                                            // user can resend the invitation\r\n                                            admin.superAdmin\r\n                                            || (!admin.superAdmin\r\n                                                && groupProperties\r\n                                                && groupProperties.anid !== invitedUser.invitedBy\r\n                                            )\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={10}>\r\n                                                    <Button variant=\"outlined\" size=\"small\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={() => resendInvite(invitedUser)}>Resend invite</Button>\r\n                                                </FlexView>\r\n                                    }\r\n\r\n                                    {/** Display home/platform members */}\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 15}}>\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Email */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    <Typography align=\"left\" variant=\"body2\" paragraph={admin.superAdmin}>{invitedUser.email}</Typography>\r\n\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            <FlexView column>\r\n                                                <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>Invited ID:</u></b> {invitedUser.id}</Typography>\r\n                                                {\r\n                                                    !invitedUser.hasOwnProperty('officialUserID')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>UID:</u></b> {invitedUser.officialUserID}</Typography>\r\n                                                }\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Group the user belongs to - available only for super admins */}\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <FlexView column>\r\n                                            <Typography align=\"left\" variant=\"body2\" paragraph>\r\n                                                {invitedUser.Invitor.displayName}\r\n                                            </Typography>\r\n\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </TableCell>\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\"  variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            \"Issuer\"\r\n                                            :\r\n                                            \"Investor\"\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Date invited / requested to join / registered via public link */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.invitedDate !== \"none\"\r\n                                        && (\r\n                                            invitedUser.hasOwnProperty('requestedToJoinDate')\r\n                                            && invitedUser.requestedToJoinDate !== \"none\"\r\n                                        )\r\n                                            ?\r\n                                            `Registered via public link on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                            :\r\n                                            invitedUser.invitedDate !== \"none\"\r\n                                                ?\r\n                                                `Invited on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                                :\r\n                                                `Requested to join on ${myUtils.dateInReadableFormat(invitedUser.requestedToJoinDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Registration status */}\r\n                            <TableCell colSpan={1}>{this.renderInvitedUserRegistrationStatus(invitedUser)}</TableCell>\r\n\r\n                            {/** Date registered/joined */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        !invitedUser.hasOwnProperty('joinedDate')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            !invitedUser.requestedToJoin\r\n                                                ?\r\n                                                `Registered on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                                :\r\n                                                `Joined on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function is used to render invited users' registration status\r\n     *\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUserRegistrationStatus = invitedUser => {\r\n\r\n        let msgObj = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (invitedUser.status) {\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                msgObj.msg = 'Not registered';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                msgObj.msg = `Current ${invitedUser.type === DB_CONST.TYPE_INVESTOR ? \"investor\" : \"issuer\"}`;\r\n                msgObj.color = 'primary';\r\n                break;\r\n            case DB_CONST.INVITED_USER_DECLINED_TO_REGISTER:\r\n                msgObj.msg = 'Declined to join';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_LEFT:\r\n                msgObj.msg = 'Left';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_KICKED_OUT:\r\n                msgObj.msg = 'Kicked out';\r\n                msgObj.color = 'error';\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"left\" variant=\"body2\" color={msgObj.color}>{msgObj.msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvitedUsers);","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog, DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    TextField,\r\n    Typography,\r\n    SnackbarContent,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport {Image} from 'react-bootstrap';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport Files from 'react-files';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\r\n\r\nimport sharedStyles, {SlideTransitionDown} from '../../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as colors from '../../../values/colors';\r\nimport * as utils from '../../../utils/utils';\r\n\r\nexport const ADD_STATUS_NONE = 0;\r\nexport const ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK = 1;\r\nexport const ADD_STATUS_USER_NAME_EXISTS = 2;\r\nexport const ADD_STATUS_EMAIL_ALREADY_USED = 3;\r\nexport const ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO = 4;\r\nexport const ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE = 5;\r\nexport const ADD_STATUS_SUCCESSFULLY_ADDED = 6;\r\nexport const ADD_STATUS_ERROR_HAPPENED = 7;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PLAIN_LOGO = 1;\r\nexport const UPLOAD_LOGO_WITH_TEXT = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        addAngelNetworkDialogOpen: state.manageAddAngelNetworkDialog.addAngelNetworkDialogOpen,\r\n\r\n        angelNetworkName: state.manageAddAngelNetworkDialog.angelNetworkName,\r\n        angelNetworkUsername: state.manageAddAngelNetworkDialog.angelNetworkUsername,\r\n        email: state.manageAddAngelNetworkDialog.email,\r\n        website: state.manageAddAngelNetworkDialog.website,\r\n        primaryColor: state.manageAddAngelNetworkDialog.primaryColor,\r\n        secondaryColor: state.manageAddAngelNetworkDialog.secondaryColor,\r\n\r\n        plainLogo: state.manageAddAngelNetworkDialog.plainLogo,\r\n        loadingPlainLogo: state.manageAddAngelNetworkDialog.loadingPlainLogo,\r\n        logoWithText: state.manageAddAngelNetworkDialog.logoWithText,\r\n        loadingLogoWithText: state.manageAddAngelNetworkDialog.loadingLogoWithText,\r\n\r\n        uploadMode: state.manageAddAngelNetworkDialog.uploadMode,\r\n        uploadProgress: state.manageAddAngelNetworkDialog.uploadProgress,\r\n\r\n        imgUploadError: state.manageAddAngelNetworkDialog.imgUploadError,\r\n        imgUploadErrorSnackbarOpen: state.manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen,\r\n\r\n        addButtonClicked: state.manageAddAngelNetworkDialog.addButtonClicked,\r\n        response: state.manageAddAngelNetworkDialog.addResult\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\r\n        handleInputChanged: (event) => dispatch(addAngelNetworkDialogActions.handleAddAngelNetworkInputChanged(event)),\r\n        addNewAngelNetwork: () => dispatch(addAngelNetworkDialogActions.addNewAngelNetwork()),\r\n\r\n        handleImageFilesChanged: (mode, files) => dispatch(addAngelNetworkDialogActions.handleImageFilesChanged(mode, files)),\r\n        handleImageFileError: (mode, error, file) => dispatch(addAngelNetworkDialogActions.handleImageFileError(mode, error, file)),\r\n        closeErrorSnackbar: () => dispatch(addAngelNetworkDialogActions.closeImageFileErrorSnackbar()),\r\n        resetImageFileErrorMessageWhenSnackbarExited: () => dispatch(addAngelNetworkDialogActions.resetImageFileErrorMessageWhenSnackbarExited())\r\n    }\r\n};\r\n\r\nclass AddAngelNetworkDialog extends Component {\r\n\r\n    handleImageFilesChanged = mode => files => {\r\n        this.props.handleImageFilesChanged(mode, files);\r\n    };\r\n\r\n    handleImageFileError = mode => (error, file) => {\r\n        this.props.handleImageFileError(mode, error, file);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            addAngelNetworkDialogOpen,\r\n\r\n            angelNetworkName,\r\n            angelNetworkUsername,\r\n            email,\r\n            website,\r\n            primaryColor,\r\n            secondaryColor,\r\n\r\n            plainLogo,\r\n            loadingPlainLogo,\r\n            logoWithText,\r\n            loadingLogoWithText,\r\n\r\n            imgUploadError,\r\n            imgUploadErrorSnackbarOpen,\r\n\r\n            addButtonClicked,\r\n\r\n            uploadMode,\r\n            uploadProgress,\r\n\r\n            handleImageFilesChanged,\r\n            handleImageFileError,\r\n            toggleAddAngelNetworkDialog,\r\n            handleInputChanged,\r\n            addNewAngelNetwork,\r\n            closeErrorSnackbar,\r\n            resetImageFileErrorMessageWhenSnackbarExited,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog ref={forwardedRef} open={addAngelNetworkDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleAddAngelNetworkDialog} {...other}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">\r\n                                Add new group\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleAddAngelNetworkDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{marginTop: 10}}>\r\n                    <TextField\r\n                        label=\"Group name\"\r\n                        placeholder=\"Write group's full name here ...\"\r\n                        name=\"angelNetworkName\"\r\n                        value={angelNetworkName}\r\n                        fullWidth\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={addButtonClicked && angelNetworkName.length === 0}\r\n                        onChange={handleInputChanged}\r\n                    />\r\n\r\n                    <TextField\r\n                        label=\"Group username\"\r\n                        placeholder=\"Write group's username here. E.g. aba, or qtec\"\r\n                        helperText=\"Note: Username must be unique. For convention, use lowercase letters and use - to connect words. E.g. future-space\"\r\n                        name=\"angelNetworkUsername\"\r\n                        value={angelNetworkUsername}\r\n                        fullWidth\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={addButtonClicked && angelNetworkUsername.trim().length === 0}\r\n                        onChange={handleInputChanged}\r\n                    />\r\n\r\n                    <FormControl fullWidth style={{marginTop: 25, marginBottom: 25}}>\r\n                        <TextField\r\n                            label=\"Registered email\"\r\n                            placeholder=\"Write email here ...\"\r\n                            helperText=\"This email will be used to login to group's admin page. Once added, an email with auto-generated password will be sent to this email address.\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && email.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth>\r\n                        <TextField\r\n                            label=\"Website\"\r\n                            placeholder=\"Group's official website\"\r\n                            name=\"website\"\r\n                            value={website}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && website.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                        {\r\n                            website.trim().length === 0 || utils.isValidWebURL(website)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    color=\"error\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Invalid website URL\r\n                                </Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth style={{marginTop: 25}}>\r\n                        <TextField\r\n                            label=\"Primary color\"\r\n                            placeholder=\"E.g. #FFFFFF\"\r\n                            name=\"primaryColor\"\r\n                            value={primaryColor.toUpperCase()}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && primaryColor.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                        {\r\n                            primaryColor.trim().length === 0 || utils.isValidHexColorCode(primaryColor)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography variant=\"body2\" color=\"error\"  align=\"left\">Invalid color</Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth style={{marginBottom: 25}}>\r\n                        <TextField\r\n                            label=\"Secondary color\"\r\n                            placeholder=\"E.g. #FFFFFF\"\r\n                            name=\"secondaryColor\"\r\n                            value={secondaryColor.toUpperCase()}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && secondaryColor.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n\r\n                        {\r\n                            secondaryColor.trim().length === 0 || utils.isValidHexColorCode(secondaryColor)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography variant=\"body2\" color=\"error\" align=\"left\">Invalid color</Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    {/** Upload plain (main) logo (compulsory) */}\r\n                    <FlexView column>\r\n                        <Files\r\n                            className={css(styles.img_drop_zone)}\r\n                            onChange={this.handleImageFilesChanged(UPLOAD_PLAIN_LOGO)}\r\n                            onError={this.handleImageFileError(UPLOAD_PLAIN_LOGO)}\r\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                            minFileSize={0}\r\n                            multiple\r\n                            clickable\r\n                            style={{marginTop: 25}}\r\n                        >\r\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\r\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload plain logo (with no text)</FlexView>\r\n                            </Files>\r\n\r\n                        {\r\n                            !plainLogo\r\n                                ?\r\n                                null\r\n                                :\r\n                                (\r\n                                    <FlexView marginTop={20} width={270} height={270}>\r\n                                        <Image src={window.URL.createObjectURL(plainLogo)} roundedCircle thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\r\n                                    </FlexView>\r\n                                )\r\n                        }\r\n                    </FlexView>\r\n\r\n                    {/** Upload logo with text (optional) */}\r\n                    <FlexView column marginTop={25}>\r\n                        <Files\r\n                            className={css(styles.img_drop_zone)}\r\n                            onChange={this.handleImageFilesChanged(UPLOAD_LOGO_WITH_TEXT)}\r\n                            onError={this.handleImageFileError(UPLOAD_LOGO_WITH_TEXT)}\r\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                            minFileSize={0}\r\n                            multiple\r\n                            clickable\r\n                        >\r\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\r\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload logo with text (optional)</FlexView>\r\n                            </Files>\r\n\r\n                        {\r\n                            !logoWithText\r\n                                ?\r\n                                null\r\n                                :\r\n                                (\r\n                                    <FlexView marginTop={20} width={540} height={270}>\r\n                                        <Image src={window.URL.createObjectURL(logoWithText)} thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\r\n                                    </FlexView>\r\n                                )\r\n                        }\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={15} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderRespondCode()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={addNewAngelNetwork} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                            disabled={\r\n                                angelNetworkName.trim().length === 0\r\n                                || angelNetworkUsername.trim().length === 0\r\n                                || email.trim().length === 0\r\n                                || website.trim().length === 0\r\n                                || (website.trim().length > 0 && !utils.isValidWebURL(website))\r\n                                || primaryColor.trim().length === 0\r\n                                || secondaryColor.trim().length === 0\r\n                                || (primaryColor.trim().length > 0 && !utils.isValidHexColorCode(primaryColor))\r\n                                || (secondaryColor.trim().length > 0 && !utils.isValidHexColorCode(secondaryColor))\r\n                                || !plainLogo\r\n                            }\r\n                            style={{ marginLeft: 35}}>\r\n                            Add\r\n                            <AddIcon fontSize=\"small\" style={{marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n\r\n                <Snackbar\r\n                    open={imgUploadErrorSnackbarOpen}\r\n                    anchorOrigin={{ vertical: 'top', horizontal: 'center',}}\r\n                    autoHideDuration={3000}\r\n                    onClose={closeErrorSnackbar}\r\n                    onExited={resetImageFileErrorMessageWhenSnackbarExited}\r\n                    TransitionComponent={SlideTransitionDown}\r\n                    transitionDuration={{ enter: 130, exit: 130}}>\r\n                    <SnackbarContent style={{backgroundColor: colors.red_700}}\r\n                        message={imgUploadError}\r\n                        action={[\r\n                            <IconButton key=\"close\" color=\"inherit\" onClick={closeErrorSnackbar}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        ]}\r\n                    />\r\n                </Snackbar>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render add angel network result\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderRespondCode = () => {\r\n        const {\r\n            response,\r\n            uploadMode,\r\n            uploadProgress\r\n        } = this.props;\r\n\r\n        let res = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (response) {\r\n            case ADD_STATUS_NONE:\r\n                return null;\r\n            case ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK:\r\n                res.msg = \"Checking if the angel network has been added before ...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_USER_NAME_EXISTS:\r\n                res.msg = \"This username has already been used.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO:\r\n                res.msg = `Uploading ${uploadMode === UPLOAD_PLAIN_LOGO ? \"plain logo\" : \"logo with text\"}, ${parseInt(uploadProgress)}% completed`;\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE:\r\n                res.msg = \"Creating angel network's profile ...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_EMAIL_ALREADY_USED:\r\n                res.msg = \"This email has already been used.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case ADD_STATUS_SUCCESSFULLY_ADDED:\r\n                res.msg = \"Added successfully. An email has been sent to the angel network for login information.\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_ERROR_HAPPENED:\r\n                res.msg = \"Error happened. Couldn't add the angel network.\";\r\n                res.color = \"error\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <Typography color={res.color} variant=\"subtitle1\" align=\"left\">\r\n                {res.msg}\r\n            </Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddAngelNetworkDialog);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    img_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as myUtils from '../../utils/utils';\r\nimport {\r\n    ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK,\r\n    ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE,\r\n    ADD_STATUS_EMAIL_ALREADY_USED,\r\n    ADD_STATUS_ERROR_HAPPENED,\r\n    ADD_STATUS_SUCCESSFULLY_ADDED,\r\n    ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n    ADD_STATUS_USER_NAME_EXISTS,\r\n    UPLOAD_LOGO_WITH_TEXT,\r\n    UPLOAD_PLAIN_LOGO\r\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const TOGGLE_ADD_ANGEL_NETWORK_DIALOG = 'TOGGLE_ADD_ANGEL_NETWORK_DIALOG';\r\nexport const toggleAddAngelNetworkDialog = () => {\r\n    return {\r\n        type: TOGGLE_ADD_ANGEL_NETWORK_DIALOG\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED = 'ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED';\r\nexport const handleAddAngelNetworkInputChanged = event => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED = 'ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED';\r\nexport const ADD_ANGEL_NETWORK_RESULT_CHANGED = 'ADD_ANGEL_NETWORK_RESULT_CHANGED';\r\nexport const addNewAngelNetwork = () => {\r\n    return async (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED\r\n        });\r\n\r\n        const {\r\n            angelNetworkName,\r\n            angelNetworkUsername,\r\n            email,\r\n            website,\r\n            primaryColor,\r\n            secondaryColor,\r\n            plainLogo,\r\n            logoWithText\r\n        } = getState().manageAddAngelNetworkDialog;\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n            result: ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK\r\n        });\r\n\r\n        // generate group id\r\n        const anid = firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        try {\r\n            // check if the group username has been used or not\r\n            const snapshots = await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild(\"groupUserName\")\r\n                .equalTo(angelNetworkUsername.toLowerCase())\r\n                .once(\"value\");\r\n\r\n            // username has already exists\r\n            if (snapshots.numChildren() > 0) {\r\n                dispatch({\r\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                    result: ADD_STATUS_USER_NAME_EXISTS\r\n                });\r\n                return;\r\n            }\r\n\r\n            const checkExistingUser = await realtimeDBUtils.doesUserExist(email);\r\n\r\n            // email has already been used\r\n            if (checkExistingUser.userExists) {\r\n                dispatch({\r\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                    result: ADD_STATUS_EMAIL_ALREADY_USED\r\n                });\r\n                return;\r\n            }\r\n\r\n            // upload plain logo\r\n            const uploadedPlainLogo = await uploadLogo(dispatch, anid, UPLOAD_PLAIN_LOGO, plainLogo);\r\n\r\n            // upload logo with text\r\n            const uploadedLogoWithText = await uploadLogo(dispatch, anid, UPLOAD_LOGO_WITH_TEXT, logoWithText);\r\n\r\n            // new group properties\r\n            const newGroupProperties = {\r\n                anid,\r\n                isInvestWest: false,\r\n                displayName: angelNetworkName,\r\n                displayNameLower: angelNetworkName.toLowerCase(), // for search function\r\n                groupUserName: angelNetworkUsername.toLowerCase(),\r\n                description: \"\",\r\n                website: website,\r\n                dateAdded: myUtils.getCurrentDate(),\r\n                status: DB_CONST.GROUP_STATUS_ACTIVE,\r\n                plainLogo: [{\r\n                    storageID: uploadedPlainLogo.storageID,\r\n                    url: uploadedPlainLogo.url\r\n                }],\r\n                logoWithText:\r\n                    !uploadedLogoWithText\r\n                        ?\r\n                        null\r\n                        :\r\n                        [{\r\n                            storageID: uploadedLogoWithText.storageID,\r\n                            url: uploadedLogoWithText.url\r\n                        }],\r\n                settings: {\r\n                    projectVisibility: DB_CONST.PROJECT_VISIBILITY_PRIVATE,\r\n                    makeInvestorsContactDetailsVisibleToIssuers: false, // initially set this to false\r\n                    primaryColor: primaryColor.toUpperCase(),\r\n                    secondaryColor: secondaryColor.toUpperCase()\r\n                }\r\n            }\r\n\r\n            // add new group properties to the database\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .child(anid)\r\n                .set(newGroupProperties);\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE\r\n            });\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.addGroupAdminRoute,\r\n                {\r\n                    requestBody: {\r\n                        adder: currentUser,\r\n                        groupProperties: newGroupProperties,\r\n                        newGroupAdminEmail: email\r\n                    }\r\n                }\r\n            );\r\n\r\n            // send a notification to the newly created super group admin\r\n            await realtimeDBUtils\r\n                .sendNotification({\r\n                    title: \"Change your password\",\r\n                    message: \"Welcome to Invest West. It is important to change your password as soon as possible. Please do it by clicking on the Password tab in your dashboard.\",\r\n                    userID: anid,\r\n                    action: `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Change password`\r\n                });\r\n\r\n            // adding a new super group admin succeeds\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_SUCCESSFULLY_ADDED\r\n            });\r\n        } catch (error) {\r\n            // remove the added group properties if error happened\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .child(anid)\r\n                .remove();\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_ERROR_HAPPENED,\r\n                error\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload an image (logo or profile picture)\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nconst uploadLogo = async (dispatch, anid, mode, blob) => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!blob) {\r\n            return resolve(null);\r\n        }\r\n\r\n        let firebaseStorage = firebase.storage();\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n            result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n            progress: 0\r\n        });\r\n\r\n        let storageID = myUtils.getCurrentDate();\r\n        let storageLocation = `${mode === UPLOAD_PLAIN_LOGO ? DB_CONST.PLAIN_LOGOS_CHILD : DB_CONST.LOGOS_WITH_TEXT_CHILD}/${storageID}`;\r\n\r\n        const storageRef = firebaseStorage\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child(storageLocation);\r\n\r\n        // upload logo to firebase storage\r\n        const uploadTask = storageRef.put(blob);\r\n        uploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n                progress,\r\n                mode\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_ERROR_HAPPENED,\r\n                mode\r\n            });\r\n\r\n            return reject(error);\r\n            // logo successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded logo\r\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\r\n\r\n                const imgUploadedObj = {\r\n                    storageID: storageID,\r\n                    url: imgDownloadURL\r\n                };\r\n\r\n                return resolve(imgUploadedObj);\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE = 'ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE';\r\nexport const ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED = 'ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED';\r\nexport const handleImageFilesChanged = (mode, files) => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageAddAngelNetworkDialog.imgUploadError.trim().length > 0 || getState().manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen) {\r\n            return null;\r\n        }\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE,\r\n            mode\r\n        });\r\n\r\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED,\r\n            blob,\r\n            mode\r\n        });\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR = 'ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR';\r\nexport const handleImageFileError = (mode, error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR,\r\n            error,\r\n            file,\r\n            mode\r\n        }\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR = 'ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR';\r\nexport const closeImageFileErrorSnackbar = () => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED = 'ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED';\r\nexport const resetImageFileErrorMessageWhenSnackbarExited = () => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED\r\n    }\r\n};\r\n\r\n","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_ANGEL_NETWORKS = 'LOADING_ANGEL_NETWORKS';\r\nexport const FINISHED_LOADING_ANGEL_NETWORKS = 'FINISHED_LOADING_ANGEL_NETWORKS';\r\nexport const loadAngelNetworks = () => {\r\n    return (dispatch, getState) => {\r\n        const admin = getState().auth.user;\r\n\r\n        if (!admin || (admin && !admin.superAdmin)) {\r\n            dispatch({\r\n                type: FINISHED_LOADING_ANGEL_NETWORKS\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_ANGEL_NETWORKS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\r\n            .then(angelNetworks => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\r\n                    angelNetworks\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: ANGEL_NETWORKS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_INPUT_CHANGED = 'ANGEL_NETWORKS_TABLE_INPUT_CHANGED';\r\nexport const handleAngelNetworksTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n\r\n        const searchText = event.target.value;\r\n        let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n\r\n        dispatch({\r\n            type: ANGEL_NETWORKS_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedAngelNetworks\r\n        });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE = 'TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().manageAngelNetworks.inSearchMode;\r\n        const searchText = getState().manageAngelNetworks.searchText;\r\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\r\n                enter: false,\r\n                matchedAngelNetworks: []\r\n            });\r\n        } else {\r\n            let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n            dispatch({\r\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\r\n                enter: true,\r\n                matchedAngelNetworks\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\n\r\nlet angelNetworksListener = null;\r\n\r\nexport const ANGEL_NETWORKS_IN_TABLE_CHANGED = 'ANGEL_NETWORKS_IN_TABLE_CHANGED';\r\n\r\nexport const startListeningForAngelNetworksChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!angelNetworksListener) {\r\n            angelNetworksListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n\r\n            angelNetworksListener\r\n                .on('child_added', snapshot => {\r\n                    let angelNetwork = snapshot.val();\r\n\r\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\r\n\r\n                    if (angelNetworkIndex === -1) {\r\n                        dispatch({\r\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\r\n                            angelNetworks: [...angelNetworks, angelNetwork]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            angelNetworksListener\r\n                .on('child_changed', snapshot => {\r\n                    let angelNetwork = snapshot.val();\r\n\r\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\r\n\r\n                    if (angelNetworkIndex !== -1) {\r\n                        angelNetworks[angelNetworkIndex] = angelNetwork;\r\n                        dispatch({\r\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\r\n                            angelNetworks\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForAngelNetworksChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (angelNetworksListener) {\r\n            angelNetworksListener.off('child_added');\r\n            angelNetworksListener.off('child_changed');\r\n            angelNetworksListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    Paper,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {HashLoader} from 'react-spinners';\r\n\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../../values/colors';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as myUtils from '../../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\r\nimport * as angelNetworksActions from '../../../redux-store/actions/angelNetworksActions';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        admin: state.auth.user,\r\n\r\n        angelNetworks: state.manageAngelNetworks.angelNetworks,\r\n        loadingAngelNetworks: state.manageAngelNetworks.loadingAngelNetworks,\r\n        angelNetworksLoaded: state.manageAngelNetworks.angelNetworksLoaded,\r\n        page: state.manageAngelNetworks.page,\r\n        rowsPerPage: state.manageAngelNetworks.rowsPerPage,\r\n\r\n        searchText: state.manageAngelNetworks.searchText,\r\n        inSearchMode: state.manageAngelNetworks.inSearchMode,\r\n        matchedAngelNetworks: state.manageAngelNetworks.matchedAngelNetworks\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\r\n        loadAngelNetworks: () => dispatch(angelNetworksActions.loadAngelNetworks()),\r\n        changePage: (event, newPage) => dispatch(angelNetworksActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(angelNetworksActions.changeRowsPerPage(event)),\r\n        handleAngelNetworksTableInputChanged: (event) => dispatch(angelNetworksActions.handleAngelNetworksTableInputChanged(event)),\r\n        toggleSearchMode: () => dispatch(angelNetworksActions.toggleSearchMode()),\r\n        startListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.startListeningForAngelNetworksChanged()),\r\n        stopListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.stopListeningForAngelNetworksChanged())\r\n    }\r\n};\r\n\r\nclass AngelNetworks extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData({inComponentDidMount: true});\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            stopListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if user is set to null\r\n        if (!admin || (admin && !admin.superAdmin) || !shouldLoadOtherData) {\r\n            stopListeningForAngelNetworksChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData({inComponentDidMount: false});\r\n        this.addListener();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        stopListeningForAngelNetworksChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = ({inComponentDidMount = true}) => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            loadingAngelNetworks,\r\n            angelNetworksLoaded,\r\n\r\n            loadAngelNetworks\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (inComponentDidMount) {\r\n                if (admin && admin.superAdmin) {\r\n                    loadAngelNetworks();\r\n                }\r\n            } else {\r\n                // loadAngelNetworks() is called in componentDidUpdate which happens after every state changes\r\n                // therefore, in order to avoid unlimited calls of loadAngelNetworks, another check variable called loadingAngelNetworks\r\n                // is added to ensure the function only gets called once.\r\n                if (admin && admin.superAdmin && !loadingAngelNetworks && !angelNetworksLoaded) {\r\n                    loadAngelNetworks();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            angelNetworks,\r\n            angelNetworksLoaded,\r\n\r\n            startListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (angelNetworks && angelNetworksLoaded) {\r\n                startListeningForAngelNetworksChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            toggleAddAngelNetworkDialog\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                width=\"100%\"\r\n            >\r\n                <Divider style={{marginBottom: 20}}/>\r\n                <Row style={{marginBottom: 10}}>\r\n                    <Col xs={12} md={5} lg={12} style={{marginBottom: 40}}>\r\n                        <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddAngelNetworkDialog}>\r\n                            <AddIcon style={{marginRight: 10, width: 20, height: \"auto\"}}/>\r\n                            Add new group\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n                {\r\n                    this.renderAngelNetworksTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render angel networks table\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderAngelNetworksTable = () => {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n            admin,\r\n            angelNetworks,\r\n            page,\r\n            rowsPerPage,\r\n            searchText,\r\n            inSearchMode,\r\n            loadAngelNetworks,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            handleAngelNetworksTableInputChanged,\r\n            toggleSearchMode\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !admin || (admin && !admin.superAdmin)) {\r\n            return null;\r\n        }\r\n\r\n        // sort angel networks by added date\r\n        angelNetworks.sort((angelNetwork1, angelNetwork2) => {\r\n            return (angelNetwork2.dateAdded - angelNetwork1.dateAdded);\r\n        });\r\n\r\n        return (\r\n            <Paper elevation={1} style={{overflowX: \"auto\"}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <InputBase name=\"searchText\" value={searchText}  onChange={handleAngelNetworksTableInputChanged} fullWidth placeholder=\"Search group by name\" type=\"text\"\r\n                                        startAdornment={\r\n                                            <InputAdornment position=\"start\">\r\n                                                <OverlayTrigger trigger={['hover', 'focus']}  flip placement=\"bottom\"\r\n                                                    overlay={\r\n                                                        <Tooltip id={`tooltip-bottom`}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    \"Exit search mode\"\r\n                                                                    :\r\n                                                                    \"Enter search mode\"\r\n                                                            }\r\n                                                        </Tooltip>\r\n                                                    }>\r\n                                                    <IconButton onClick={toggleSearchMode}>\r\n                                                        {\r\n                                                            inSearchMode\r\n                                                                ?\r\n                                                                <CloseIcon/>\r\n                                                                :\r\n                                                                <SearchIcon/>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                </OverlayTrigger>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip  placement=\"bottom\"\r\n                                            overlay={\r\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\r\n                                            }>\r\n                                            <IconButton onClick={loadAngelNetworks} style={{marginLeft: 10}}>\r\n                                                <RefreshIcon/>\r\n                                            </IconButton>\r\n                                        </OverlayTrigger>\r\n                                    </FlexView>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={2}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)}  align=\"left\">Groups</Typography>\r\n                                }/>\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">ID</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">\r\n                                        Date added\r\n                                    </Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">Status</Typography>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {this.renderAngelNetworkRows()}\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination style={{backgroundColor: colors.blue_gray_50}} rowsPerPageOptions={[5, 10, 25]} count={angelNetworks.length} rowsPerPage={rowsPerPage}  page={page} backIconButtonProps={{'aria-label': 'Previous Page',}} nextIconButtonProps={{'aria-label': 'Next Page',}} SelectProps={{ native: true,}} onChangePage={changePage} onChangeRowsPerPage={changeRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render angel network rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderAngelNetworkRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            angelNetworks,\r\n            angelNetworksLoaded,\r\n            matchedAngelNetworks,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage\r\n        } = this.props;\r\n\r\n        let renderedAngelNetworks = [];\r\n\r\n        if (inSearchMode) {\r\n            renderedAngelNetworks = matchedAngelNetworks;\r\n        } else {\r\n            renderedAngelNetworks = angelNetworks;\r\n        }\r\n\r\n        if (renderedAngelNetworks.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={5}>\r\n                        <FlexView\r\n                         style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                angelNetworksLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"Can't find any groups with this name.\"\r\n                                                :\r\n                                                \"No groups added yet.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            renderedAngelNetworks.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(angelNetwork => (\r\n                <TableRow key={angelNetwork.anid} hover>\r\n                    <TableCell colSpan={2}>\r\n                        <NavLink to={Routes.constructGroupDetailRoute(groupUserName, angelNetwork.groupUserName)} className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\r\n                            <Typography color=\"primary\">{angelNetwork.displayName}</Typography>\r\n                        </NavLink>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography color=\"primary\">{angelNetwork.anid}</Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography color=\"primary\">{myUtils.dateTimeInReadableFormat(angelNetwork.dateAdded)}</Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography\r\n                            color={\r\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\r\n                                    ?\r\n                                    \"primary\"\r\n                                    :\r\n                                    \"error\"\r\n                            }>\r\n                            {\r\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\r\n                                    ?\r\n                                    \"Active\"\r\n                                    :\r\n                                    \"Suspended\"\r\n                            }\r\n                        </Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            ))\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AngelNetworks);","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nexport const MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS';\r\nexport const MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS';\r\nexport const loadJoinRequests = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!groupProperties) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadRequestsToJoin({anid: groupProperties.anid})\r\n            .then(joinRequests => {\r\n                dispatch({\r\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\r\n                    joinRequests\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\r\n                    joinRequests: [],\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().manageJoinRequests.inSearchMode;\r\n        const searchText = getState().manageJoinRequests.searchText;\r\n        const joinRequests = getState().manageJoinRequests.joinRequests;\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: false,\r\n                matchedJoinRequests: []\r\n            });\r\n        } else {\r\n            let matchedJoinRequests = joinRequests.filter(joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n            dispatch({\r\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: true,\r\n                matchedJoinRequests\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED';\r\nexport const handleJoinRequestsTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const joinRequests = getState().manageJoinRequests.joinRequests;\r\n\r\n        const searchText = event.target.value;\r\n        let matchedJoinRequests = joinRequests.filter(\r\n            joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n\r\n        dispatch({\r\n            type: MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedJoinRequests\r\n        });\r\n    }\r\n};\r\n\r\nexport const acceptJoinRequest = (request) => {\r\n    return (dispatch, getState) => {\r\n        // remove the join request\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(request.id)\r\n            .remove()\r\n            .then(() => {\r\n                const pushKey = firebase.database().ref(DB_CONST.INVITED_USERS_CHILD).push().key;\r\n                const currentDate = utils.getCurrentDate();\r\n                // add a node in InvitedUsers\r\n                firebase\r\n                    .database()\r\n                    .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                    .child(pushKey)\r\n                    .set({\r\n                        id: pushKey,\r\n                        email: request.userProfile.email,\r\n                        firstName: request.userProfile.firstName,\r\n                        lastName: request.userProfile.lastName,\r\n                        title: request.userProfile.title,\r\n                        type: request.userProfile.type,\r\n                        status: DB_CONST.INVITED_USER_STATUS_ACTIVE,\r\n                        officialUserID: request.userID,\r\n                        invitedBy: request.groupToJoin,\r\n                        invitedDate: \"none\",\r\n                        requestedToJoin: true,\r\n                        requestedToJoinDate: currentDate,\r\n                        joinedDate: currentDate\r\n                    })\r\n                    .then(() => {\r\n                        realtimeDBUtils\r\n                            .sendNotification({\r\n                                title: `${request.group.displayName} has accepted your join request`,\r\n                                message: `Congratulations. You are now a member of ${request.group.displayName}. You can see and interact with all offers from ${request.group.displayName}.`,\r\n                                userID: request.userID,\r\n                                action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\r\n                            })\r\n                            .then(() => {\r\n                                // do something\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    });\r\n            });\r\n    }\r\n};\r\n\r\nexport const rejectJoinRequest = (request) => {\r\n    return (dispatch, getState) => {\r\n        // remove the join request\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(request.id)\r\n            .remove()\r\n            .then(() => {\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: `${request.group.displayName} has rejected your join request`,\r\n                        message: `We are so sorry that ${request.group.displayName} has rejected your join request. However, there are other groups that you can take part in.`,\r\n                        userID: request.userID,\r\n                        action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\r\n                    })\r\n                    .then(() => {\r\n                        // do something\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet joinRequestsListener = null;\r\n\r\nexport const MANAGE_JOIN_REQUESTS_CHANGED = 'MANAGE_JOIN_REQUESTS_CHANGED';\r\nexport const startListeningForJoinRequestsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!user || !groupProperties) {\r\n            return;\r\n        }\r\n\r\n        if (!joinRequestsListener) {\r\n            joinRequestsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(groupProperties.anid);\r\n\r\n            joinRequestsListener\r\n                .on('child_added', snapshot => {\r\n                    let joinRequest = snapshot.val();\r\n\r\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\r\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\r\n                    if (index === -1) {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(joinRequest.userID)\r\n                            .then(userProfile => {\r\n                                joinRequest.userProfile = userProfile;\r\n\r\n                                realtimeDBUtils\r\n                                    .loadAngelNetworkBasedOnANID(joinRequest.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n                                        joinRequest.group = angelNetwork;\r\n\r\n                                        dispatch({\r\n                                            type: MANAGE_JOIN_REQUESTS_CHANGED,\r\n                                            joinRequests: [...joinRequests, joinRequest]\r\n                                        });\r\n                                    });\r\n                            })\r\n                    }\r\n                });\r\n\r\n            joinRequestsListener\r\n                .on('child_removed', snapshot => {\r\n                    let joinRequest = snapshot.val();\r\n\r\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\r\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\r\n\r\n                    if (index !== -1) {\r\n                        joinRequests.splice(index, 1);\r\n                        dispatch({\r\n                            type: MANAGE_JOIN_REQUESTS_CHANGED,\r\n                            joinRequests\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForJoinRequestsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (joinRequestsListener) {\r\n            joinRequestsListener.off('child_added');\r\n            joinRequestsListener.off('child_removed');\r\n            joinRequestsListener = null;\r\n        }\r\n    }\r\n};\r\n","import React, {Component} from 'react';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\nimport {\r\n    Typography,\r\n    Paper,\r\n    TableHead,\r\n    TableRow,\r\n    TableCell,\r\n    TableBody,\r\n    TableFooter,\r\n    TablePagination,\r\n    Table,\r\n    InputBase,\r\n    InputAdornment,\r\n    IconButton, Button\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport FlexView from 'react-flexview';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {css} from 'aphrodite';\r\nimport {HashLoader} from 'react-spinners';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageJoinRequestsActions from '../../../redux-store/actions/manageJoinRequestsActions';\r\n\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../../values/colors';\r\nimport * as ROUTES from '../../../router/routes';\r\nimport * as myUtils from '../../../utils/utils';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n\r\n        joinRequests: state.manageJoinRequests.joinRequests,\r\n        loadingJoinRequests: state.manageJoinRequests.loadingJoinRequests,\r\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded,\r\n\r\n        searchText: state.manageJoinRequests.searchText,\r\n        inSearchMode: state.manageJoinRequests.inSearchMode,\r\n        matchedJoinRequests: state.manageJoinRequests.matchedJoinRequests,\r\n\r\n        page: state.manageJoinRequests.page,\r\n        rowsPerPage: state.manageJoinRequests.rowsPerPage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadJoinRequests: () => dispatch(manageJoinRequestsActions.loadJoinRequests()),\r\n        toggleSearchMode: () => dispatch(manageJoinRequestsActions.toggleSearchMode()),\r\n        changePage: (event, newPage) => dispatch(manageJoinRequestsActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(manageJoinRequestsActions.changeRowsPerPage(event)),\r\n        handleJoinRequestsTableInputChanged: (event) => dispatch(manageJoinRequestsActions.handleJoinRequestsTableInputChanged(event)),\r\n        acceptJoinRequest: (request) => dispatch(manageJoinRequestsActions.acceptJoinRequest(request)),\r\n        rejectJoinRequest: (request) => dispatch(manageJoinRequestsActions.rejectJoinRequest(request)),\r\n        startListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.startListeningForJoinRequestsChanged()),\r\n        stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged())\r\n    }\r\n};\r\n\r\nclass JoinRequests extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.attachListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n            user,\r\n            stopListeningForJoinRequestsChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if user is set to null\r\n        if (!user || !shouldLoadOtherData) {\r\n            stopListeningForJoinRequestsChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.attachListener();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n\r\n            loadingJoinRequests,\r\n            joinRequestsLoaded,\r\n\r\n            loadJoinRequests\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (user) {\r\n                if (!loadingJoinRequests && !joinRequestsLoaded) {\r\n                    loadJoinRequests();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener\r\n     */\r\n    attachListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            joinRequests,\r\n            joinRequestsLoaded,\r\n\r\n            startListeningForJoinRequestsChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (joinRequests && joinRequestsLoaded) {\r\n                startListeningForJoinRequestsChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            user,\r\n            joinRequests,\r\n            searchText,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage,\r\n            loadJoinRequests,\r\n            toggleSearchMode,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            handleJoinRequestsTableInputChanged\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !user) {\r\n            return null;\r\n        }\r\n\r\n        // sort join requests by request date (recent requests come first)\r\n        joinRequests.sort((joinRequest1, joinRequest2) => {\r\n            return (joinRequest2.requestedDate - joinRequest1.requestedDate);\r\n        });\r\n\r\n        return (\r\n            <Paper elevation={1} style={{ width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <InputBase name=\"searchText\" value={searchText} onChange={handleJoinRequestsTableInputChanged} fullWidth placeholder=\"Search access request by email\" type=\"text\"\r\n                                        startAdornment={\r\n                                            <InputAdornment position=\"start\">\r\n                                                <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\r\n                                                    overlay={\r\n                                                        <Tooltip id={`tooltip-bottom`}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    \"Exit search mode\"\r\n                                                                    :\r\n                                                                    \"Enter search mode\"\r\n                                                            }\r\n                                                        </Tooltip>\r\n                                                    }>\r\n                                                    <IconButton onClick={toggleSearchMode}>\r\n                                                        {\r\n                                                            inSearchMode\r\n                                                                ?\r\n                                                                <CloseIcon/>\r\n                                                                :\r\n                                                                <SearchIcon/>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                </OverlayTrigger>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\r\n                                            overlay={\r\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\r\n                                            }>\r\n                                            <IconButton onClick={loadJoinRequests} style={{marginLeft: 10}}>\r\n                                                <RefreshIcon/>\r\n                                            </IconButton>\r\n                                        </OverlayTrigger>\r\n                                    </FlexView>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={2}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>User's name</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Requested date</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Action</Typography>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderJoinRequestsRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} colSpan={5} count={joinRequests.length} rowsPerPage={rowsPerPage} page={page}\r\n                                backIconButtonProps={{'aria-label': 'Previous Page',}}\r\n                                nextIconButtonProps={{'aria-label': 'Next Page',}}\r\n                                SelectProps={{ native: true,}}\r\n                                onChangePage={changePage}\r\n                                onChangeRowsPerPage={changeRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render join requests table rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderJoinRequestsRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            joinRequests,\r\n            joinRequestsLoaded,\r\n            matchedJoinRequests,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage,\r\n            acceptJoinRequest,\r\n            rejectJoinRequest\r\n        } = this.props;\r\n\r\n        let renderedJoinRequests = [];\r\n\r\n        if (inSearchMode) {\r\n            renderedJoinRequests = matchedJoinRequests;\r\n        } else {\r\n            renderedJoinRequests = joinRequests;\r\n        }\r\n\r\n        if (renderedJoinRequests.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={5}>\r\n                        <FlexView style={{margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                joinRequestsLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"Can't find any access request with this email.\"\r\n                                                :\r\n                                                \"No access requests yet.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            renderedJoinRequests.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(joinRequest => (\r\n                <TableRow key={joinRequest.id} hover>\r\n                    <TableCell colSpan={2}>\r\n                        <FlexView column>\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        `${ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", joinRequest.userID)}`\r\n                                        :\r\n                                        `${ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", joinRequest.userID)}`\r\n                                }\r\n                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                            >\r\n                                <Typography align=\"left\" variant=\"body1\" color=\"primary\">\r\n                                    {`${joinRequest.userProfile.title} ${joinRequest.userProfile.firstName} ${joinRequest.userProfile.lastName}`}\r\n                                </Typography>\r\n                            </NavLink>\r\n                        </FlexView>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography align=\"left\" variant=\"body1\">\r\n                            {joinRequest.userProfile.email}\r\n                        </Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography align=\"left\" variant=\"body1\">\r\n                            {myUtils.dateInReadableFormat(joinRequest.requestedDate)}\r\n                        </Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <FlexView>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"secondary\" onClick={() => rejectJoinRequest(joinRequest)} style={{marginRight: 6}}>Reject</Button>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"primary\" onClick={() => acceptJoinRequest(joinRequest)} style={{marginLeft: 6}}>Accept</Button>\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            ))\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JoinRequests);","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport {trackActivity} from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport {\r\n    ADD_NEW_GROUP_ADMIN_STATUS_CHECKING,\r\n    ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED,\r\n    ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\r\n} from \"../../pages/admin/components/GroupAdminsTable\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const GROUP_ADMINS_TABLE_SET_GROUP = 'GROUP_ADMINS_TABLE_SET_GROUP';\r\nexport const setGroup = newGroup => {\r\n    return (dispatch, getState) => {\r\n        const prevTableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (!newGroup || !prevTableGroup) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_SET_GROUP,\r\n                group: newGroup\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (prevTableGroup.anid === newGroup.anid) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_SET_GROUP,\r\n            group: newGroup\r\n        });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS';\r\nexport const GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS';\r\nexport const loadGroupAdmins = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                groupAdmins: []\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superAdmin) {\r\n            if (currentUser.anid !== tableGroup.anid) {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: []\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadGroupAdminsBasedOnGroupID(tableGroup.anid)\r\n            .then(groupAdmins => {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: [...groupAdmins]\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: []\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE = 'GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED = 'GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG = 'GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG';\r\nexport const toggleAddNewGroupAdminDialog = () => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED = 'GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED';\r\nexport const handleAddNewGroupAdmin = () => {\r\n    return async (dispatch, getState) => {\r\n        const newGroupAdminEmail = getState().manageGroupAdminsTable.newGroupAdminEmail;\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superGroupAdmin) {\r\n            return;\r\n        }\r\n\r\n        if (newGroupAdminEmail.trim().length === 0) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n                status: ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n            status: ADD_NEW_GROUP_ADMIN_STATUS_CHECKING\r\n        });\r\n\r\n        try {\r\n            const checkResult = await realtimeDBUtils.doesUserExist(newGroupAdminEmail.toLowerCase());\r\n\r\n            // this email has already been used\r\n            if (checkResult.userExists) {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n                    status: ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED\r\n                });\r\n            } else {\r\n                const response = await new Api().request(\r\n                    \"post\",\r\n                    ApiRoutes.addGroupAdminRoute,\r\n                    {\r\n                        queryParameters: null,\r\n                        requestBody: {\r\n                            adder: currentUser,\r\n                            groupProperties: groupProperties,\r\n                            newGroupAdminEmail: newGroupAdminEmail\r\n                        }\r\n                    }\r\n                );\r\n\r\n                // obtain the newly created group admin profile from the server\r\n                const newGroupAdmin = response.data;\r\n\r\n                // track super group admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.ADMINISTRATORS_CHILD,\r\n                    interactedObjectID: newGroupAdmin.id,\r\n                    activitySummary:\r\n                        realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN\r\n                            .replace(\"%groupAdminEmail%\", newGroupAdminEmail)\r\n                    ,\r\n                    value: newGroupAdmin\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Group admin added successfully.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\r\n                });\r\n            }\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: \"Error happened. Couldn't add this group admin.\",\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n        }\r\n    }\r\n};\r\n//----------------------------------------------------------------------------------------------------------------------\r\n\r\nlet groupAdminsListener = null;\r\n\r\nexport const GROUP_ADMINS_TABLE_CHANGED = 'GROUP_ADMINS_TABLE_CHANGED';\r\nexport const startListeningForGroupAdminsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupAdminsListener) {\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superAdmin && currentUser.anid !== tableGroup.anid) {\r\n            return;\r\n        }\r\n\r\n        groupAdminsListener = firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD);\r\n\r\n        groupAdminsListener\r\n            .on('child_added', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index === -1) {\r\n\r\n                    if (groupAdmin.anid === tableGroup.anid) {\r\n                        dispatch({\r\n                            type: GROUP_ADMINS_TABLE_CHANGED,\r\n                            groupAdmins: [...groupAdmins, groupAdmin]\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n        groupAdminsListener\r\n            .on('child_changed', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index !== -1) {\r\n                    groupAdmins[index] = groupAdmin;\r\n                    dispatch({\r\n                        type: GROUP_ADMINS_TABLE_CHANGED,\r\n                        groupAdmins: [...groupAdmins]\r\n                    });\r\n                }\r\n            });\r\n\r\n        groupAdminsListener\r\n            .on('child_removed', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index !== -1) {\r\n                    groupAdmins.splice(index, 1);\r\n                    dispatch({\r\n                        type: GROUP_ADMINS_TABLE_CHANGED,\r\n                        groupAdmins: [...groupAdmins]\r\n                    });\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForGroupAdminsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupAdminsListener) {\r\n            groupAdminsListener.off('child_added');\r\n            groupAdminsListener.off('child_changed');\r\n            groupAdminsListener.off('child_removed');\r\n            groupAdminsListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Paper,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableFooter,\r\n    TableRow,\r\n    TableCell,\r\n    Typography,\r\n    Button,\r\n    InputBase,\r\n    TablePagination,\r\n    InputAdornment,\r\n    IconButton,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\nimport {\r\n    HashLoader,\r\n    BeatLoader\r\n} from 'react-spinners';\r\nimport {css} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\n\r\nimport * as utils from '../../../utils/utils';\r\nimport * as colors from '../../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as groupAdminsTableActions from '../../../redux-store/actions/groupAdminsTableActions';\r\n\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_NONE = 0;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL = 1;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_CHECKING = 2;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED = 3;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n        currentUser: state.auth.user,\r\n        tableGroup: state.manageGroupAdminsTable.tableGroup,\r\n        groupAdmins: state.manageGroupAdminsTable.groupAdmins,\r\n        groupAdminsLoaded: state.manageGroupAdminsTable.groupAdminsLoaded,\r\n        loadingGroupAdmins: state.manageGroupAdminsTable.loadingGroupAdmins,\r\n        page: state.manageGroupAdminsTable.page,\r\n        rowsPerPage: state.manageGroupAdminsTable.rowsPerPage,\r\n        searchText: state.manageGroupAdminsTable.searchText,\r\n        inSearchMode: state.manageGroupAdminsTable.inSearchMode,\r\n\r\n        addNewGroupAdminDialogOpen: state.manageGroupAdminsTable.addNewGroupAdminDialogOpen,\r\n        newGroupAdminEmail: state.manageGroupAdminsTable.newGroupAdminEmail,\r\n        addNewGroupAdminStatus: state.manageGroupAdminsTable.addNewGroupAdminStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadGroupAdmins: () => dispatch(groupAdminsTableActions.loadGroupAdmins()),\r\n        changePage: (event, newPage) => dispatch(groupAdminsTableActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(groupAdminsTableActions.changeRowsPerPage(event)),\r\n        handleInputChanged: (event) => dispatch(groupAdminsTableActions.handleInputChanged(event)),\r\n        toggleSearchMode: () => dispatch(groupAdminsTableActions.toggleSearchMode()),\r\n        startListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.startListeningForGroupAdminsChanged()),\r\n        stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\r\n        handleAddNewGroupAdmin: () => dispatch(groupAdminsTableActions.handleAddNewGroupAdmin()),\r\n\r\n        toggleAddNewGroupAdminDialog: () => dispatch(groupAdminsTableActions.toggleAddNewGroupAdminDialog())\r\n    }\r\n};\r\n\r\nclass GroupAdminsTable extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.addListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        const {\r\n            shouldLoadOtherData,\r\n            tableGroup,\r\n            stopListeningForGroupAdminsChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if tableGroup is set to null\r\n        if (!tableGroup || !shouldLoadOtherData) {\r\n            stopListeningForGroupAdminsChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.addListeners();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n            tableGroup,\r\n            loadingGroupAdmins,\r\n            groupAdminsLoaded,\r\n            loadGroupAdmins\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (tableGroup && !loadingGroupAdmins && !groupAdminsLoaded) {\r\n                loadGroupAdmins();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListeners = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupAdmins,\r\n            groupAdminsLoaded,\r\n            startListeningForGroupAdminsChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (groupAdmins && groupAdminsLoaded) {\r\n                startListeningForGroupAdminsChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            tableGroup,\r\n            page,\r\n            rowsPerPage,\r\n            searchText,\r\n            inSearchMode,\r\n            addNewGroupAdminDialogOpen,\r\n            newGroupAdminEmail,\r\n            addNewGroupAdminStatus,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            loadGroupAdmins,\r\n            handleInputChanged,\r\n            toggleSearchMode,\r\n            handleAddNewGroupAdmin,\r\n\r\n            toggleAddNewGroupAdminDialog\r\n        } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Paper elevation={1} style={{overflowX: \"auto\"}}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                    component={\r\n                                        <InputBase name=\"searchText\" value={searchText} onChange={handleInputChanged} fullWidth placeholder=\"Search by email\" type=\"text\"\r\n                                            startAdornment={\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" fli\r\n                                                        overlay={\r\n                                                            <Tooltip id={`tooltip-bottom`}>\r\n                                                                {\r\n                                                                    inSearchMode\r\n                                                                        ?\r\n                                                                        \"Exit search mode\"\r\n                                                                        :\r\n                                                                        \"Enter search mode\"\r\n                                                                }\r\n                                                            </Tooltip>\r\n                                                        }>\r\n                                                        <IconButton onClick={toggleSearchMode}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    <CloseIcon/>\r\n                                                                    :\r\n                                                                    <SearchIcon/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </OverlayTrigger>\r\n                                                </InputAdornment>\r\n                                            }\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50} component={\r\n                                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                            {\r\n                                                currentUser.superGroupAdmin\r\n                                                && tableGroup !== null\r\n                                                && currentUser.anid === tableGroup.anid\r\n                                                    ?\r\n                                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddNewGroupAdminDialog} style={{ marginRight: 8}}>Add new group admin</Button>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                overlay={\r\n                                                    <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>}>\r\n                                                <IconButton onClick={loadGroupAdmins} style={{marginLeft: 10}}>\r\n                                                    <RefreshIcon/>\r\n                                                </IconButton>\r\n                                            </OverlayTrigger>\r\n                                        </FlexView>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                            <TableRow>\r\n                                <StyledTableCell colSpan={2}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>}/>\r\n                                <StyledTableCell colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\"  className={css(sharedStyles.white_text)}>Type</Typography>}/>\r\n                                <StyledTableCell colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Date added</Typography>}/>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderTableRows()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{backgroundColor: colors.blue_gray_50}}\r\n                                    rowsPerPageOptions={[10, 30, 50]}\r\n                                    count={this.getRenderedGroupAdmins().length}\r\n                                    rowsPerPage={rowsPerPage}\r\n                                    page={page}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={changePage}\r\n                                    onChangeRowsPerPage={changeRowsPerPage}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n\r\n                <AddGroupAdminDialog\r\n                    groupProperties={groupProperties}\r\n                    addNewGroupAdminDialogOpen={addNewGroupAdminDialogOpen}\r\n                    newGroupAdminEmail={newGroupAdminEmail}\r\n                    addNewGroupAdminStatus={addNewGroupAdminStatus}\r\n                    toggleAddNewGroupAdminDialog={toggleAddNewGroupAdminDialog}\r\n                    handleInputChanged={handleInputChanged}\r\n                    handleAddNewGroupAdmin={handleAddNewGroupAdmin}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render table rows\r\n     *\r\n     * @returns {*[]|*}\r\n     */\r\n    renderTableRows = () => {\r\n        const {\r\n            groupProperties,\r\n            groupAdminsLoaded,\r\n            page,\r\n            rowsPerPage,\r\n            inSearchMode\r\n        } = this.props;\r\n\r\n        if (this.getRenderedGroupAdmins().length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{margin: 20}}>\r\n                            {\r\n                                groupAdminsLoaded\r\n                                    ?\r\n                                    <Typography variant=\"body1\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"No group admins found.\"\r\n                                                :\r\n                                                \"No group admins.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            this.getRenderedGroupAdmins()\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(groupAdmin => (\r\n                    <TableRow key={groupAdmin.id} hover>\r\n                        <TableCell colSpan={2}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {groupAdmin.email}\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {\r\n                                    groupAdmin.superGroupAdmin\r\n                                        ?\r\n                                        \"Super group admin\"\r\n                                        :\r\n                                        \"Group admin\"\r\n                                }\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {utils.dateTimeInReadableFormat(groupAdmin.dateAdded)}\r\n                            </Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )\r\n            )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Get rendered group admins\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    getRenderedGroupAdmins = () => {\r\n        const {\r\n            searchText,\r\n            inSearchMode,\r\n            groupAdmins\r\n        } = this.props;\r\n\r\n        let searchedGroupAdmins = [...groupAdmins];\r\n\r\n        if (inSearchMode) {\r\n            searchedGroupAdmins = searchedGroupAdmins\r\n                .filter(groupAdmin => groupAdmin.email.includes(searchText.toLowerCase()));\r\n        }\r\n\r\n        return searchedGroupAdmins.sort((groupAdmin1, groupAdmin2) => {\r\n            return groupAdmin2.time - groupAdmin1.time;\r\n        });\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminsTable);\r\n\r\nclass AddGroupAdminDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            addNewGroupAdminDialogOpen,\r\n            newGroupAdminEmail,\r\n            toggleAddNewGroupAdminDialog,\r\n            handleInputChanged,\r\n            handleAddNewGroupAdmin\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog open={addNewGroupAdminDialogOpen} ref={forwardedRef} fullWidth maxWidth=\"md\" onClose={toggleAddNewGroupAdminDialog}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">Add new group admin\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleAddNewGroupAdminDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        label=\"Email\"\r\n                        name=\"newGroupAdminEmail\"\r\n                        placeholder=\"Write email here\"\r\n                        value={newGroupAdminEmail}\r\n                        onChange={handleInputChanged}\r\n                        fullWidth\r\n                        required\r\n                        style={{ marginTop: 10}}/>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={20} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderStatusMessage()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={handleAddNewGroupAdmin} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 20}}>Add<AddIcon fontSize=\"small\" style={{ marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render status message\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderStatusMessage = () => {\r\n        const {\r\n            addNewGroupAdminStatus,\r\n            groupProperties\r\n        } = this.props;\r\n\r\n        let msg = {\r\n            text: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (addNewGroupAdminStatus) {\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_NONE:\r\n                return null;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL:\r\n                msg.tex = \"Please fill in the email.\";\r\n                msg.color = \"error\";\r\n                break;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_CHECKING:\r\n                return (\r\n                    <BeatLoader size={10}\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                );\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED:\r\n                msg.text = \"This email has been used by another account.\";\r\n                msg.color = \"error\";\r\n                break;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS:\r\n                return null;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography color={msg.color} variant=\"body1\" align=\"left\">\r\n                {msg.text}\r\n            </Typography>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport Sidebar from 'react-sidebar';\r\nimport FlexView from 'react-flexview';\r\nimport {Col, Container, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {Accordion, AccordionDetails, AccordionSummary, Badge, Divider, IconButton, Typography} from '@material-ui/core';\r\nimport Menu from '@material-ui/icons/Menu';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport queryString from 'query-string';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    EXPLORE_OFFERS_TAB,\r\n    RESOURCES_TAB,\r\n    GROUP_ACTIVITIES_TAB,\r\n    HOME_TAB,\r\n    MY_ACTIVITIES_TAB,\r\n    SETTINGS_TAB\r\n} from '../../shared-components/nav-bars/SidebarContent';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport InvitationDialog from './components/InvitationDialog';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport SuperAdminSettings from './components/SuperAdminSettings';\r\nimport GroupAdminSettings from './components/GroupAdminSettings';\r\nimport InvitedUsers from './components/InvitedUsers';\r\nimport AngelNetWorks from './components/AngelNetworks';\r\nimport AddAngelNetWorkDialog from './components/AddAngelNetWorkDialog';\r\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\r\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\r\nimport JoinRequests from './components/JoinRequests';\r\nimport ActivitiesTable from '../../shared-components/activities-components/ActivitiesTable';\r\nimport GroupAdminsTable from './components/GroupAdminsTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as groupAdminsTableActions from '../../redux-store/actions/groupAdminsTableActions';\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\r\nimport {successfullyFetchedOffers} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {isProjectWaitingToGoLive} from \"../../models/project\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nexport const MAX_CARD_DETAILS_HEIGHT = 2000;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n        OffersTableLocalState: state.OffersTableLocalState,\r\n\r\n        // --- old states ----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n\r\n        joinRequests: state.manageJoinRequests.joinRequests,\r\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\r\n\r\n        groupAdminsTable_setGroup: (group) => dispatch(groupAdminsTableActions.setGroup(group)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event))\r\n    }\r\n};\r\n\r\nclass AdminDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            currentUser,\r\n            groupProperties,\r\n\r\n            // projectsTable_setUser,\r\n            activitiesTable_setUser,\r\n            groupAdminsTable_setGroup\r\n        } = this.props;\r\n\r\n        if (!currentUser\r\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(currentUser);\r\n\r\n        // set user so that information can be used in the activities table component\r\n        activitiesTable_setUser(\r\n            currentUser.superAdmin\r\n                ?\r\n                currentUser\r\n                :\r\n                groupProperties\r\n        );\r\n\r\n        // set group so that information can be used in the group admins table component\r\n        groupAdminsTable_setGroup(groupProperties);\r\n    };\r\n\r\n    /**\r\n     * Component will mount\r\n     */\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.ADMIN : ROUTES.ADMIN_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n            OffersTableLocalState,\r\n\r\n            currentUser,\r\n\r\n            joinRequests,\r\n            joinRequestsLoaded\r\n        } = this.props;\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let projectsAwaitingDecision = 0;\r\n        // only do this if the table user is also set to the current admin\r\n        if (OffersTableLocalState.tableUser && OffersTableLocalState.tableUser.id === AuthenticationState.currentUser.id) {\r\n            if (successfullyFetchedOffers(OffersTableLocalState)) {\r\n                OffersTableLocalState.offerInstances.forEach(offerInstance => {\r\n                    if (isProjectWaitingToGoLive(offerInstance.projectDetail)) {\r\n                        projectsAwaitingDecision += 1;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return (\r\n                <Row noGutters style={{marginBottom: 30}}>\r\n                    {/* Manage groups */}\r\n                    {\r\n                        !currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage groups</Typography>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage groups that have joined the system.</Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <AngelNetWorks/>\r\n                                        </FlexView>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/* Manage group members (group admins) / system users (super admins) */}\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <Accordion className={css(styles.card_style)}>\r\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                <FlexView column>\r\n                                    <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage system users\"\r\n                                                :\r\n                                                \"Manage group members\"\r\n                                        }\r\n                                    </Typography>\r\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage all the system users (investors and issuers) including those who have been invited but not yet registered.\"\r\n                                                :\r\n                                                \"Manage all the group members (investors and issuers) including those who have been invited but not yet registered and those who joined this group from another group.\"\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                <InvitedUsers/>\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    </Col>\r\n\r\n                    {/* Manage access requests */}\r\n                    {\r\n                        currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <FlexView width=\"100%\">\r\n                                                <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage access requests</Typography>\r\n                                                <FlexView marginLeft={28} marginTop={8}>\r\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\r\n                                                        overlay={\r\n                                                            <Tooltip id={`tooltip-top`}>\r\n                                                                {joinRequests.length} access requests\r\n                                                                are awaiting your review.\r\n                                                            </Tooltip>\r\n                                                        }>\r\n                                                        <Badge badgeContent={!joinRequestsLoaded ? 0 : joinRequests.length} color=\"error\"\r\n                                                            invisible={\r\n                                                                !joinRequestsLoaded\r\n                                                                    ?\r\n                                                                    true\r\n                                                                    :\r\n                                                                    joinRequests.length === 0\r\n                                                            }/>\r\n                                                    </OverlayTrigger>\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                                Manage access requests from other groups' investors who would like\r\n                                                to\r\n                                                join this group.\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                        <JoinRequests/>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/* Manage offers */}\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <Accordion className={css(styles.card_style)}>\r\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                <FlexView column>\r\n                                    <FlexView width=\"100%\">\r\n                                        <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage offers</Typography>\r\n                                        <FlexView marginLeft={28} marginTop={8}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\r\n                                                overlay={\r\n                                                    <Tooltip\r\n                                                        id={`tooltip-top`}\r\n                                                    >\r\n                                                        {\r\n                                                            currentUser.superAdmin\r\n                                                                ?\r\n                                                                `${projectsAwaitingDecision} offers are awaiting group admins' review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\r\n                                                                :\r\n                                                                `${projectsAwaitingDecision} offers are awaiting your review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\r\n                                                        }\r\n                                                    </Tooltip>\r\n                                                }>\r\n                                                <Badge badgeContent={projectsAwaitingDecision} color=\"error\"\r\n                                                    invisible={projectsAwaitingDecision === 0}/>\r\n                                            </OverlayTrigger>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage all the offers created by all the issuers and group admins in the system.\"\r\n                                                :\r\n                                                \"Manage all the offers created by the issuers and group admins of this group.\"\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                <FlexView column width=\"100%\">\r\n                                    <Divider style={{marginBottom: 15}}/>\r\n                                    <OffersTable/>\r\n                                </FlexView>\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    </Col>\r\n\r\n                    {/* Manage group admins */}\r\n                    {\r\n                        currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage group admins</Typography>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage group admins. Only super group admin can add a new group\r\n                                                admin.</Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <GroupAdminsTable/>\r\n                                        </FlexView>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                </Row>\r\n            )\r\n        }\r\n\r\n        /**\r\n         * SETTINGS TAB\r\n         */\r\n        if (params.tab === SETTINGS_TAB) {\r\n            return (\r\n                currentUser.superAdmin\r\n                    ?\r\n                    <SuperAdminSettings/>\r\n                    :\r\n                    <GroupAdminSettings/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * GROUP ACTIVITIES TAB\r\n         */\r\n        if (params.tab === GROUP_ACTIVITIES_TAB || params.tab === MY_ACTIVITIES_TAB) {\r\n            return (\r\n                <div\r\n                    style={{\r\n                        margin: 30\r\n                    }}\r\n                >\r\n                    <ActivitiesTable/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE OFFERS TAB\r\n         */\r\n        if (params.tab === EXPLORE_OFFERS_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroups/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded,\r\n\r\n            notifications,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !currentUserLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !currentUser\r\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return <Sidebar\r\n            sidebar={\r\n                <SidebarContent\r\n                    dashboardProps={this.props}\r\n                />\r\n            }\r\n            shadow={false}\r\n            open={sidebarOpen}\r\n            docked={sidebarDocked}\r\n            onSetOpen={() => toggleSidebar(true)}\r\n            transitions\r\n            styles={{\r\n                sidebar: {backgroundColor: colors.blue_gray_50},\r\n                content: {backgroundColor: colors.gray_100}\r\n            }}\r\n        >\r\n            <Container\r\n                fluid\r\n                style={{ padding: 0}}>\r\n                {/** Header */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                         style={{backgroundColor:\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                            }}>\r\n                            <Row style={{width: \"100%\"}} noGutters>\r\n                                {/** Page title */}\r\n                                <Col xs={10} sm={10} md={11} lg={11}>\r\n                                    <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                        {\r\n                                            <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                <Menu/>\r\n                                            </IconButton>\r\n                                        }\r\n                                        {\r\n                                            this.renderPageTitle()\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n\r\n                                {/** Notification icon */}\r\n                                <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                    <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\" >\r\n                                        <IconButton onMouseDown={toggleNotifications} id=\"notification-button\">\r\n                                            <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                            </Badge>\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters style={{backgroundColor: colors.white}}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"body1\" align=\"center\" style={{paddingTop: 16,paddingBottom: 16}}>\r\n                            {\r\n                                currentUser.superAdmin\r\n                                    ?\r\n                                    \"System admin\"\r\n                                    :\r\n                                    currentUser.superGroupAdmin\r\n                                        ?\r\n                                        \"Super group admin\"\r\n                                        :\r\n                                        \"Group admin\"\r\n                            }\r\n                            : <b>{currentUser.email}</b>\r\n                        </Typography>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{backgroundColor: colors.kick_starter_gray_box_border}}/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n\r\n            {/** Notifications box */}\r\n            <NotificationsBox/>\r\n\r\n            {/** User invitation dialog */}\r\n            <InvitationDialog/>\r\n\r\n            {/** Add angel network dialog */}\r\n            <AddAngelNetWorkDialog/>\r\n        </Sidebar>;\r\n    }\r\n\r\n    /**\r\n     * Render page's title\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = '';\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case SETTINGS_TAB:\r\n                title = SETTINGS_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case GROUP_ACTIVITIES_TAB:\r\n                title = GROUP_ACTIVITIES_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            case EXPLORE_OFFERS_TAB:\r\n                title = EXPLORE_OFFERS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>\r\n                {title}\r\n            </Typography>\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    },\r\n\r\n    card_style: {\r\n        marginTop: 25,\r\n        marginLeft: 30,\r\n        marginRight: 30\r\n    },\r\n\r\n    card_details_expansion: {\r\n        maxHeight: MAX_CARD_DETAILS_HEIGHT,\r\n        overflowY: \"auto\"\r\n    }\r\n});","import React, { Component } from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class LegalDocuments extends Component {\r\n\r\n    onDeleteDocument = index => {\r\n        this.props.onDeleteDocument(index);\r\n    };\r\n\r\n    render() {\r\n\r\n        /**\r\n         * documents is an array with documents inside\r\n         * \r\n         * the document inside the array will have the following structure:\r\n         * \r\n         * {\r\n         *      file: File (obtained when uploading)\r\n         *      preview: preview obtained using FileReader\r\n         * }\r\n         */\r\n        const {\r\n            documents\r\n        } = this.props;\r\n\r\n        if (!documents || (documents && documents.length === 0)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView column marginTop={20}>\r\n                <List>\r\n                    {\r\n                        documents.map((document, index) => (\r\n                            <FlexView key={index} vAlignContent=\"center\">\r\n                                <ListItem button style={{ padding: 7 }} >\r\n                                    <img alt=\"Document\" className={css(styles.preview_icon)} src={require(\"../../img/document_icon.png\").default} />\r\n                                    <FlexView column hAlignContent=\"left\" >\r\n                                        <Typography variant=\"body2\" className={css(styles.black_text)} align=\"left\" >{document.file.name}</Typography>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{document.file.sizeReadable}</Typography>\r\n                                    </FlexView>\r\n                                </ListItem>\r\n\r\n                                <OverlayTrigger\r\n                                    trigger={['hover', 'focus']}\r\n                                    flip\r\n                                    placement=\"bottom\"\r\n                                    overlay={\r\n                                        <Tooltip id={`tooltip-bottom`} > Remove </Tooltip>\r\n                                    }>\r\n                                    <IconButton style={{ width: 44, height: 44 }} onClick={() => this.onDeleteDocument(index)}>\r\n                                        <CloseIcon fontSize=\"small\"/>\r\n                                    </IconButton>\r\n                                </OverlayTrigger>\r\n                            </FlexView>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    preview_icon: {\r\n        width: 48, \r\n        height: 48\r\n    },\r\n\r\n    file_name: {\r\n        fontSize: 14,\r\n        marginBottom: 2\r\n    },\r\n\r\n    file_size: {\r\n        fontSize: 13,\r\n        color: colors.blue_gray_700\r\n    }\r\n});","import React, { Component } from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport default class DocumentsDownload extends Component {\r\n\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    onDeleteDocument = index => {\r\n        this.props.onDeleteDocument(index);\r\n    };\r\n\r\n    render() {\r\n\r\n        /**\r\n         * documents is an array with documents inside\r\n         * \r\n         * the document inside the array will have the following structure:\r\n         * \r\n         * {\r\n         *      downloadURL: download URL from firebase storage\r\n         *      fileName: ...\r\n         *      readableSize: ...\r\n         * }\r\n         */\r\n        const {\r\n            documents,\r\n            deleteEnable\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView column marginTop={20} >\r\n                <List>\r\n                    {\r\n                        documents.map((document, index) => (\r\n                            document.hasOwnProperty('removed')\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView key={index} vAlignContent=\"center\" >\r\n                                    {\r\n                                        <a\r\n                                            href={document.downloadURL}\r\n                                            rel=\"noopener noreferrer\"\r\n                                            target=\"_blank\"\r\n                                            className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            style={{\r\n                                                width: \"100%\"\r\n                                            }}\r\n                                        >\r\n                                            <ListItem button style={{ padding: 7 }} >\r\n                                                <img\r\n                                                    alt=\"Document\"\r\n                                                    className={css(styles.preview_icon)}\r\n                                                    src={require(\"../../img/document_icon.png\").default}\r\n                                                />\r\n                                                <FlexView column hAlignContent=\"left\" >\r\n                                                    <Typography variant=\"body2\" className={css(styles.black_text)} align=\"left\">{document.fileName}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" >{document.readableSize}</Typography>\r\n                                                </FlexView>\r\n                                            </ListItem>\r\n                                        </a>\r\n                                    }\r\n                                    {\r\n                                        deleteEnable\r\n                                            ?\r\n                                            <OverlayTrigger\r\n                                                trigger={['hover', 'focus']}\r\n                                                flip\r\n                                                placement=\"top\"\r\n                                                overlay={\r\n                                                    <Tooltip id={`tooltip-top`}>Delete this document</Tooltip>\r\n                                                }>\r\n                                                <IconButton\r\n                                                    style={{ width: 44, height: 44 }}\r\n                                                    onClick={() => this.onDeleteDocument(index)}\r\n                                                >\r\n                                                    <CloseIcon fontSize=\"small\" />\r\n                                                </IconButton>\r\n                                            </OverlayTrigger>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    preview_icon: {\r\n        width: 48, \r\n        height: 48\r\n    },\r\n\r\n    file_name: {\r\n        fontSize: 14,\r\n        marginBottom: 2\r\n    },\r\n\r\n    file_size: {\r\n        fontSize: 13,\r\n        color: colors.blue_gray_700\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","export const SELECT_PROJECT_VISIBILITY_SET_PROJECT = 'SELECT_PROJECT_VISIBILITY_SET_PROJECT';\r\nexport const setProject = project => {\r\n    return {\r\n        type: SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n        project\r\n    }\r\n};\r\n\r\nexport const HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED = 'HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED';\r\nexport const handleProjectVisibilityChanged = (event) => {\r\n    return {\r\n        type: HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED,\r\n        event\r\n    }\r\n};","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from \"@material-ui/core\";\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\nimport {isValidatingGroupUrl, successfullyValidatedGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPitchVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl fullWidth >\r\n                <FormHelperText className={css(sharedStyles.black_text)} style={{ marginBottom: 6 }}>Select pitch visibility</FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                    ?\r\n                                    ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput labelWidth={0} name=\"projectVisibilitySetting\"/>\r\n                    }\r\n                >\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PUBLIC}>\r\n                        {`Public (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full pitch will be visible to all Invest West users)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED}\r\n                    >\r\n                        {`Restricted (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this pitch will be visible to all Invest West users. Only members of your group will see the full pitch)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PRIVATE}\r\n                    >\r\n                        {`Private (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Only members of this group will see this pitch)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPitchVisibility);\r\n\r\n","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    Fab,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    Step,\r\n    StepLabel,\r\n    Stepper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Files from \"react-files\";\r\nimport {NavLink, Redirect} from \"react-router-dom\";\r\nimport {Col, Container, Image, Overlay, OverlayTrigger, Popover, ProgressBar, Row, Tooltip} from \"react-bootstrap\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {BeatLoader, HashLoader} from \"react-spinners\";\r\n\r\nimport queryString from \"query-string\";\r\n// React Quill - text editor\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nimport UploadDocuments from \"../../shared-components/upload-documents/DocumentsUpload\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport DocumentsDownload from \"../../shared-components/download-documents/DocumentsDownload\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport \"./CreateProject.scss\";\r\nimport {getGroupRouteTheme, isValidatingGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {isAuthenticating, successfullyAuthenticated} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {isLoadingSystemAttributes} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isIssuer} from \"../../models/user\";\r\nimport {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {isDraftProjectNotSubmitted} from \"../../models/project\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\nconst PITCH_COVER_FILES_CHANGED = 1;\r\nconst PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED = 2;\r\nconst PITCH_PRESENTATION_FILES_CHANGED = 3;\r\n\r\nexport const PITCH_COVER_FILE_TYPE_SELECTED = 1; // users select to upload an image or a video for their pitch cover\r\nexport const PITCH_COVER_VIDEO_URL_TYPE_SELECTED = 2; // users select to upload a video URL for their pitch cover\r\n\r\n// pitch create non-check\r\nexport const PITCH_PUBLISH_CHECK_NONE = 0;\r\n// pitch cannot be created due to missing fields\r\nexport const PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION = 1;\r\n// pitch cannot be created due to 0 or negative value of fund or equity\r\nexport const PITCH_PUBLISH_FALSE_INVALID_DATE = 2;\r\nexport const PITCH_PUBLISH_FALSE_INVALID_FUND = 3;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER = 4;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION = 5;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PITCH_COVER_MODE = 1;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 2;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 3;\r\nexport const UPLOAD_REALTIME_DB = 4;\r\nexport const UPLOAD_DONE_MODE = 5;\r\n\r\nexport const STEP_PITCH_GENERAL_INFORMATION = 0;\r\nexport const STEP_PITCH_COVER = 1;\r\nexport const STEP_PITCH_DECK = 2;\r\nexport const STEP_PITCH_SUPPORTING_DOCUMENTS = 3;\r\nexport const STEP_ACCEPT_TERMS_AND_CONDITIONS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createProject: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        groupIssuerCreateOfferFor: \"undefined\",\r\n\r\n        // pitch sector\r\n        pitchSector: '-',\r\n        // pitch project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiryDate: null,\r\n\r\n        pitchAmountRaisedToDate: '',\r\n        pitchRaiseRequired: '',\r\n        howFundIsBeingRaised: '',\r\n        financialRound: '',\r\n        pitchPostMoneyValuation: '',\r\n        detailsAboutEarlierFundraisingRounds: '',\r\n        pitchInvestorsCommitted: '',\r\n\r\n        hasRaisedMoneyBefore: '',\r\n\r\n        // pitch cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // pitch cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // pitch supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // pitch presentation file (user uploads a file for pitch presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // pitch presentation text (user uses the provided text editor to make pitch presentation)\r\n        pitchPresentationText: {ops: []},\r\n        // plain text obtained from quill editor\r\n        pitchPresentationPlainText: null,\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        // T&Cs and marketing preferences ------------------------------------------------------------------------------\r\n        acceptedTermsAndConditions: false,\r\n        agreedToShareRaisePublicly: false,\r\n        agreedToReceiveLocalInvestmentInfo: false,\r\n        // -------------------------------------------------------------------------------------------------------------\r\n\r\n        projectID: null, // set when project has been successfully published to pass to UploadDialog\r\n\r\n        // customized fields (for specific groups only) ------------------------------------------------------------------\r\n        // this field is only available for QIB\r\n        qibSpecialNews: ''\r\n        // -------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass CreatePitchPageMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n        this.firebaseStorage = firebase.storage();\r\n\r\n        // listen for changes made in save project mode\r\n        this.projectEditedSaveModeRefListener = null;\r\n\r\n        // these variables contain the data that is formatted to be uploaded on Realtime DB\r\n        this.pitchCoverRealtimeDB = [];\r\n        this.pitchSupportingDocumentsRealtimeDB = [];\r\n        this.pitchPresentationDocumentRealtimeDB = [];\r\n\r\n        this.state = {\r\n            ...initState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            requestToLoadData\r\n        } = this.state;\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            recoveredFromPreviousState,\r\n            requestToLoadData,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const previousState = this.props.location.state;\r\n        // when the user clicks Save for the first time\r\n        // or when they click on the Next button in the STEP_PITCH_GENERAL_INFORMATION step\r\n        // the page will reload to take them to the edit page with the project ID.\r\n        // If the user clicks on the Next button in the STEP_PITCH_GENERAL_INFORMATION step, once the page is\r\n        // reloaded, they should be taken to the next step rather than stay in the same step.\r\n        if (previousState !== undefined && previousState !== null) {\r\n            if (!recoveredFromPreviousState) {\r\n                this.setState({\r\n                    recoveredFromPreviousState: true,\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep:\r\n                            previousState.activeStep !== -1\r\n                                ?\r\n                                previousState.activeStep\r\n                                :\r\n                                this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: !previousState.groupIssuerCreateOfferFor\r\n                            ? ManageGroupUrlState.group\r\n                                ? ManageGroupUrlState.group.anid\r\n                                : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                                    ? \"undefined\"\r\n                                    : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid\r\n                            : previousState.groupIssuerCreateOfferFor,\r\n                        requestToLoadData: !previousState.requestToLoadData ? true : previousState.requestToLoadData\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.uploadProject();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.projectEditedSaveModeRefListener) {\r\n            this.projectEditedSaveModeRefListener.off('child_changed');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to the same page with active step saved\r\n     * This will save the activeStep of the page, so when the user refreshes the page,\r\n     * they can still continue with their previous step.\r\n     *\r\n     * @param activeStep\r\n     * @param projectID\r\n     */\r\n    navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = this.state;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState) || isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (AuthenticationState.currentUser && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            requestToLoadData: false\r\n        });\r\n\r\n        // get project id from the URL\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        selectProjectVisibility_setProject(project);\r\n                    }\r\n\r\n                    // project is in draft mode\r\n                    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        if (!this.projectEditedSaveModeRefListener) {\r\n                            this.projectEditedSaveModeRefListener = this.firebaseDB\r\n                                .ref(DB_CONST.PROJECTS_CHILD)\r\n                                .orderByKey()\r\n                                .equalTo(project.id);\r\n\r\n                            this.projectEditedSaveModeRefListener\r\n                                .on('child_changed', snapshot => {\r\n\r\n                                    let project = snapshot.val();\r\n\r\n                                    this.setState({\r\n                                        projectEdited: Object.assign({}, project)\r\n                                    });\r\n                                });\r\n                        }\r\n                    }\r\n\r\n                    this.setState({\r\n                        projectBeforeEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            groupIssuerCreateOfferFor:\r\n                                !isDraftProjectNotSubmitted(project)\r\n                                    ? \"undefined\"\r\n                                    : project.hasOwnProperty('anid')\r\n                                    ? project.anid\r\n                                    : \"undefined\",\r\n                            // pitch sector\r\n                            pitchSector:\r\n                                project.hasOwnProperty('sector')\r\n                                    ?\r\n                                    project.sector\r\n                                    :\r\n                                    '-'\r\n                            ,\r\n                            // pitch project name\r\n                            pitchProjectName:\r\n                                project.hasOwnProperty('projectName')\r\n                                    ?\r\n                                    project.projectName\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchProjectDescription:\r\n                                project.hasOwnProperty('description')\r\n                                    ?\r\n                                    project.description\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchExpiryDate:\r\n                                project.Pitch.hasOwnProperty('expiredDate')\r\n                                    ?\r\n                                    project.Pitch.expiredDate\r\n                                    :\r\n                                    null\r\n                            ,\r\n                            pitchAmountRaisedToDate:\r\n                                project.Pitch.hasOwnProperty('amountRaised')\r\n                                    ?\r\n                                    Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchRaiseRequired:\r\n                                project.Pitch.hasOwnProperty('fundRequired')\r\n                                    ?\r\n                                    Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            howFundIsBeingRaised:\r\n                                project.Pitch.hasOwnProperty('howFundIsBeingRaised')\r\n                                    ?\r\n                                    project.Pitch.howFundIsBeingRaised\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            financialRound:\r\n                                project.Pitch.hasOwnProperty('financialRound')\r\n                                    ?\r\n                                    project.Pitch.financialRound\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchPostMoneyValuation:\r\n                                project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                    ?\r\n                                    Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            detailsAboutEarlierFundraisingRounds:\r\n                                project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                    ?\r\n                                    project.Pitch.detailsAboutEarlierFundraisingRounds\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchInvestorsCommitted:\r\n                                project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                    ?\r\n                                    project.Pitch.investorsCommitted\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            hasRaisedMoneyBefore:\r\n                                project.Pitch.hasOwnProperty('amountRaised')\r\n                                    ?\r\n                                    (\r\n                                        project.Pitch.amountRaised > 0\r\n                                            ?\r\n                                            \"true\"\r\n                                            :\r\n                                            \"false\"\r\n                                    )\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchPresentationText:\r\n                                !project.Pitch.presentationText\r\n                                    ?\r\n                                    {ops: []}\r\n                                    :\r\n                                    project.Pitch.presentationText\r\n                            ,\r\n                            // this field is only available for QIB\r\n                            qibSpecialNews:\r\n                                project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                    ?\r\n                                    project.Pitch.qibSpecialNews\r\n                                    :\r\n                                    ''\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            this.setState({\r\n                projectEditedLoaded: true,\r\n                projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    groupIssuerCreateOfferFor: ManageGroupUrlState.group\r\n                        ? ManageGroupUrlState.group.anid\r\n                        : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                            ? \"undefined\"\r\n                            : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid,\r\n                    pitchExpiryDate:\r\n                        ManageGroupUrlState.group.groupUserName === \"qib\"\r\n                            ?\r\n                            // if the group is QIB,\r\n                            // set the pitch expiry date to the one specified by the QIB' admins\r\n                            // Note: must ensure the defaultPitchExpiryDate field is valid\r\n                            ManageGroupUrlState.group.settings.defaultPitchExpiryDate\r\n                            :\r\n                            this.state.createProject.pitchExpiryDate\r\n                }\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                selectProjectVisibility_setProject(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Next Step button is clicked\r\n     */\r\n    handleNextStepClick = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            hasRaisedMoneyBefore,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiryDate === null\r\n                    || pitchRaiseRequired.trim().length === 0\r\n                    || howFundIsBeingRaised.trim().length === 0\r\n                    || financialRound.trim().length === 0\r\n                    || hasRaisedMoneyBefore.trim().length === 0\r\n                    || (hasRaisedMoneyBefore === \"true\" && pitchAmountRaisedToDate.trim().length === 0)\r\n                    || (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n                    || (isIssuer(AuthenticationState.currentUser) && !(params.edit && projectEdited) && groupIssuerCreateOfferFor === \"undefined\")\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiryDate)\r\n                    ||\r\n                    (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                // if the user enters invalid value for the money, warn them\r\n                if ((hasRaisedMoneyBefore === \"true\" && !utils.getNumberFromInputString(pitchAmountRaisedToDate))\r\n                    || !utils.getNumberFromInputString(pitchRaiseRequired)\r\n                    || (pitchPostMoneyValuation.trim().length > 0 && !utils.getNumberFromInputString(pitchPostMoneyValuation))\r\n                ) {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // for QIB, pitch deck is considered as one-pager\r\n                // there will be no presentation text, so don't need to check\r\n                if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                        ) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                    // for other groups, we need to ensure the user is uploading a pitch deck file or filling\r\n                // in the text editor or both\r\n                else {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && pitchPresentationText.ops.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                            && !projectEdited.Pitch.presentationText) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Back button is clicked (got to previous step)\r\n     */\r\n    handleBackClick = () => {\r\n        const projectEdited = this.state.projectEdited;\r\n        const activeStep = this.state.createProject.activeStep;\r\n\r\n        if (activeStep === 0) {\r\n            return;\r\n        }\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                activeStep: activeStep - 1\r\n            }\r\n        });\r\n        this.navigateToTheSamePageWithActiveStepSaved(activeStep - 1, projectEdited.id);\r\n    };\r\n\r\n    /**\r\n     * Handle between selecting to upload an image or a video or adding a video URL for the pitch cover.\r\n     *\r\n     * @param type\r\n     */\r\n    handleSelectPitchCoverTypeClick = type => {\r\n\r\n        const {\r\n            pitchCoverTypeSelected,\r\n            pitchCover,\r\n            pitchCoverVideoURL\r\n        } = this.state.createProject;\r\n\r\n        if (pitchCoverTypeSelected === type) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: null,\r\n                    pitchCover: type === PITCH_COVER_FILE_TYPE_SELECTED ? [] : pitchCover,\r\n                    pitchCoverVideoURL: type === PITCH_COVER_VIDEO_URL_TYPE_SELECTED ? '' : pitchCoverVideoURL\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: type\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded changed.\r\n     */\r\n    handleFilesChanged = (mode, files) => {\r\n\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                // there can only be 1 file uploaded for the pitch cover\r\n                case PITCH_COVER_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchCover: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                // there can be more than 1 pitch supporting files\r\n                case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                    // for QIB, supporting document will be considered as pitch deck\r\n                    // so, the user can only upload one file\r\n                    if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    // for other groups, the user can upload multiple files for supporting documents\r\n                    else {\r\n                        if (projectEdited) {\r\n                            if (!projectEdited.Pitch.supportingDocuments) {\r\n                                if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            } else {\r\n                                if (pitchSupportingDocuments.length >=\r\n                                    DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                setFeedbackSnackbarContent(\r\n                                    'Max file count reached.',\r\n                                    \"error\",\r\n                                    \"bottom\"\r\n                                );\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [...prevState.createProject.pitchSupportingDocuments, fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    break;\r\n                // there can only be 1 file for pitch presentation\r\n                case PITCH_PRESENTATION_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPresentationDocument: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded have error (exceed size, type not matched, etc.).\r\n     */\r\n    handleFileError = (error, file) => {\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        setFeedbackSnackbarContent(\r\n            errorMessage,\r\n            \"error\",\r\n            \"bottom\"\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function gets called when the texts in the Create Pitch Dialog changed.\r\n     */\r\n    handleCreatePitchInputChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        if (name === \"groupIssuerCreateOfferFor\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n\r\n            const {\r\n                AuthenticationState\r\n            } = this.props;\r\n\r\n            const params = queryString.parse(this.props.location.search);\r\n\r\n            let index = AuthenticationState.groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === value);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n\r\n            // edit mode\r\n            if (params.edit) {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    search: `?edit=${params.edit}`,\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n            // create mode\r\n            else {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            // maximum characters for description is 300\r\n            if (name === \"pitchProjectDescription\" && value.trim().length >= 300) {\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle changes when the Quill editor is changed.\r\n     */\r\n    handlePitchEditorChanged = (content, delta, source, editor) => {\r\n\r\n        // check if the editor is empty (or does not have any text)\r\n        // we must ensure that a pitch body contains text\r\n        if (editor.getText().trim().length === 0) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: {ops: []}\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: editor.getContents(),\r\n                    pitchPresentationPlainText: editor.getText()\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called to create a new pitch.\r\n     */\r\n    uploadProject = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n\r\n            projectVisibilitySetting\r\n        } = this.props;\r\n\r\n        const {\r\n            projectBeforeEdited,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n            detailsAboutEarlierFundraisingRounds,\r\n            pitchInvestorsCommitted,\r\n            hasRaisedMoneyBefore,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n            pitchPresentationPlainText,\r\n\r\n            agreedToShareRaisePublicly,\r\n            agreedToReceiveLocalInvestmentInfo,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.setState({\r\n                progressBeingSaved: true\r\n            });\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit && projectEdited) {\r\n            // new cover has been chosen\r\n            if (pitchCover.length > 0 || pitchCoverVideoURL.trim().length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('cover')) {\r\n                    // mark the existing cover with the 'removed' tag\r\n                    projectEdited.Pitch.cover.forEach((coverItem, index) => {\r\n                        coverItem.removed = true;\r\n                        projectEdited.Pitch.cover[index] = coverItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // new pitch presentation document has been chosen\r\n            if (pitchPresentationDocument.length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('presentationDocument')) {\r\n                    // mark the existing presentation document with the 'removed' tag\r\n                    projectEdited.Pitch.presentationDocument.forEach((presentationItem, index) => {\r\n                        presentationItem.removed = true;\r\n                        // noinspection TypeScriptValidateTypes\r\n                        projectEdited.Pitch.presentationDocument[index] = presentationItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // pitch reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n            // pitch storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(projectEdited.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectEdited.id);\r\n\r\n            // upload pitch cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload pitch supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload pitch presentation or pitch deck\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    let updatedProject = {\r\n                                        ...JSON.parse(JSON.stringify(projectEdited)),\r\n                                        issuer: null,\r\n                                        group: null,\r\n                                        anid:\r\n                                            isDraftProjectNotSubmitted(projectEdited)\r\n                                                ? groupIssuerCreateOfferFor !== \"undefined\"\r\n                                                ? groupIssuerCreateOfferFor\r\n                                                : projectEdited.anid\r\n                                                : projectEdited.anid,\r\n                                        projectName:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectName.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectName\r\n                                                :\r\n                                                pitchProjectName\r\n                                        ,\r\n                                        sector:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchSector === \"-\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchSector\r\n                                                :\r\n                                                pitchSector\r\n                                        ,\r\n                                        description:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectDescription.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectDescription\r\n                                                :\r\n                                                pitchProjectDescription\r\n                                        ,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                projectEdited.visibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                // in save progress mode --> set status to DRAFT\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // not in save progress mode --> publish mode\r\n                                                // check if the edited project is a draft one --> if so, change its status to being checked\r\n                                                // otherwise, keep the previous project status\r\n                                                projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                                    :\r\n                                                    projectEdited.status\r\n                                        ,\r\n                                        edited:\r\n                                            saveProgress\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                utils.getCurrentDate()\r\n                                        ,\r\n                                        PrimaryOffer:\r\n                                            projectEdited.PrimaryOffer\r\n                                                ?\r\n                                                projectEdited.PrimaryOffer\r\n                                                :\r\n                                                null\r\n                                        ,\r\n                                        Pitch: {\r\n                                            totalRaise:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                                :\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            amountRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                                :\r\n                                                                0\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                        :\r\n                                                        0\r\n                                            ,\r\n                                            fundRequired:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    pitchRaiseRequired.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            howFundIsBeingRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    howFundIsBeingRaised.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        howFundIsBeingRaised\r\n                                                    :\r\n                                                    howFundIsBeingRaised\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            postMoneyValuation:\r\n                                                pitchPostMoneyValuation.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments:\r\n                                                projectEdited.Pitch.supportingDocuments\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.supportingDocuments, ...this.pitchSupportingDocumentsRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchSupportingDocumentsRealtimeDB\r\n                                            ,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument:\r\n                                                this.pitchPresentationDocumentRealtimeDB.length === 0\r\n                                                    ?\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            projectEdited.Pitch.presentationDocument\r\n                                                            :\r\n                                                            null\r\n                                                    )\r\n                                                    :\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            [...projectEdited.Pitch.presentationDocument, ...this.pitchPresentationDocumentRealtimeDB]\r\n                                                            :\r\n                                                            this.pitchPresentationDocumentRealtimeDB\r\n                                                    )\r\n                                            ,\r\n                                            cover:\r\n                                                projectEdited.Pitch.cover\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.cover, ...this.pitchCoverRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchCoverRealtimeDB\r\n                                            ,\r\n                                            postedDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    utils.getCurrentDate()\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        utils.getCurrentDate()\r\n                                                        :\r\n                                                        projectEdited.Pitch.postedDate\r\n                                            ,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        DB_CONST.PITCH_STATUS_ON_GOING\r\n                                                        :\r\n                                                        projectEdited.Pitch.status\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    // set the updated pitch in firebase\r\n                                    projectRef\r\n                                        .child(projectEdited.id)\r\n                                        .update(updatedProject)\r\n                                        .then(() => {\r\n                                            // publish button is clicked\r\n                                            // only check and send notifications if the save progress is not triggered (save progress is only available for saving draft)\r\n                                            if (!saveProgress) {\r\n                                                // if the draft offer is published, don't need to check for sending notifications\r\n                                                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                                                    projectBeforeEdited.issuer = null;\r\n                                                    projectBeforeEdited.group = null;\r\n                                                    // track activity for editing a published project\r\n                                                    realtimeDBUtils\r\n                                                        .trackActivity({\r\n                                                            userID: AuthenticationState.currentUser.id,\r\n                                                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                            interactedObjectID: projectEdited.id,\r\n                                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT.replace(\"%project%\", projectEdited.projectName),\r\n                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id),\r\n                                                            value: {\r\n                                                                before: JSON.parse(JSON.stringify(projectBeforeEdited)),\r\n                                                                after: JSON.parse(JSON.stringify(updatedProject))\r\n                                                            }\r\n                                                        });\r\n\r\n                                                    // Send notifications to investors who voted or pledged\r\n                                                    // load votes\r\n                                                    realtimeDBUtils\r\n                                                        .loadVotes(projectEdited.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                                                        .then(votes => {\r\n\r\n                                                            let listOfInvestorsToBeNotified = [];\r\n                                                            votes.forEach(vote => {\r\n                                                                listOfInvestorsToBeNotified.push(vote.investorID);\r\n                                                            });\r\n\r\n                                                            // load pledges\r\n                                                            realtimeDBUtils\r\n                                                                .loadPledges(projectEdited.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                                .then(pledges => {\r\n                                                                    pledges.forEach(pledge => {\r\n                                                                        if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                                                            listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                                                        }\r\n                                                                    });\r\n\r\n                                                                    let notifications = [];\r\n                                                                    listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                                                        const notification = {\r\n                                                                            title: `${projectEdited.projectName} has been edited`,\r\n                                                                            message: `Please have a look at the changes that have been made in this offer. You may find some more useful information.`,\r\n                                                                            userID: investorID,\r\n                                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id)\r\n                                                                        };\r\n                                                                        notifications.push(notification);\r\n                                                                    });\r\n\r\n                                                                    // push all the notifications to firebase\r\n                                                                    Promise.all(notifications.map(notification => {\r\n                                                                        return new Promise((resolve, reject) => {\r\n                                                                            realtimeDBUtils\r\n                                                                                .sendNotification(notification)\r\n                                                                                .then(() => {\r\n                                                                                    return resolve();\r\n                                                                                })\r\n                                                                                .catch(error => {\r\n                                                                                    return reject(error);\r\n                                                                                });\r\n                                                                        });\r\n                                                                    })).then(() => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100,\r\n                                                                                projectID: projectEdited.id\r\n                                                                            }\r\n                                                                        });\r\n\r\n                                                                    }).catch(error => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100\r\n                                                                            }\r\n                                                                        });\r\n                                                                    });\r\n                                                                });\r\n                                                        });\r\n                                                }\r\n                                                // a draft offer is published\r\n                                                else {\r\n                                                    // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                    const acceptedTCsObj = {\r\n                                                        issuerID: AuthenticationState.currentUser.id,\r\n                                                        projectID: projectEdited.id,\r\n                                                        date: utils.getCurrentDate(),\r\n                                                        agreedToShareRaisePublicly\r\n                                                    };\r\n\r\n                                                    // push to Create Pitch T&Cs\r\n                                                    this.firebaseDB\r\n                                                        .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                        .push(acceptedTCsObj)\r\n                                                        .then(async () => {\r\n                                                            await new Api().request(\r\n                                                                \"post\",\r\n                                                                ApiRoutes.sendEmailRoute,\r\n                                                                {\r\n                                                                    queryParameters: null,\r\n                                                                    requestBody: {\r\n                                                                        emailType: 3,\r\n                                                                        emailInfo: {\r\n                                                                            projectID: projectEdited.id\r\n                                                                        }\r\n                                                                    }\r\n                                                                }\r\n                                                            );\r\n\r\n                                                            // track activity for creating a new project from a draft one\r\n                                                            realtimeDBUtils\r\n                                                                .trackActivity({\r\n                                                                    userID: AuthenticationState.currentUser.id,\r\n                                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                                    interactedObjectID: projectEdited.id,\r\n                                                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", updatedProject.projectName),\r\n                                                                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                                                                    value: updatedProject\r\n                                                                });\r\n\r\n                                                            // if the user is an issuer,\r\n                                                            // update the marketing preferences setting\r\n                                                            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER) {\r\n                                                                realtimeDBUtils\r\n                                                                    .updateMarketingPreferencesSetting({\r\n                                                                        userID: AuthenticationState.currentUser.id,\r\n                                                                        field: \"agreedToReceiveLocalInvestmentInfo\",\r\n                                                                        value: agreedToReceiveLocalInvestmentInfo\r\n                                                                    })\r\n                                                                    .catch(error => {\r\n                                                                        // handle error\r\n                                                                    });\r\n                                                            }\r\n\r\n                                                            this.setState({\r\n                                                                createProject: {\r\n                                                                    ...this.state.createProject,\r\n                                                                    uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                    uploadFileProgress: 100,\r\n                                                                    projectID: projectEdited.id\r\n                                                                }\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                            // save button is clicked\r\n                                            else {\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectEdited.id\r\n                                                );\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n        // in create new mode\r\n        else {\r\n            // calculate posted date (current time)\r\n            const postedDate = utils.getCurrentDate();\r\n\r\n            // pitch reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n            // get pitch's publishing id\r\n            const projectID = projectRef.push().key;\r\n\r\n            // pitch storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(AuthenticationState.currentUser.id)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectID);\r\n\r\n            // upload pitch cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload pitch supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload pitch presentation or pitch deck\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    const projectObj = {\r\n                                        id: projectID,\r\n                                        anid: groupIssuerCreateOfferFor === \"undefined\" ? ManageGroupUrlState.group.anid : groupIssuerCreateOfferFor,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                ManageGroupUrlState.group.settings.projectVisibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        issuerID:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then the issuerID is set to the id of the issuer that the\r\n                                                // group admin is creating an offer for\r\n                                                params.issuer\r\n                                                :\r\n                                                // in this case, it can be the issuer creating their own offer\r\n                                                // or a group admin is doing so for an unknown issuer --> this means\r\n                                                // the group admin clicks on the \"Create new investment opportunity\" in their\r\n                                                // main dashboard.\r\n                                                AuthenticationState.currentUser.id\r\n                                        , // this can the id of the issuer or the group admin\r\n                                        createdByGroupAdmin:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then, set the admin id as a proof of creating\r\n                                                params.admin\r\n                                                :\r\n                                                // the group admin is creating an offer for an unknown issuer\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // then, this field is also set to the group admin id\r\n                                                    AuthenticationState.currentUser.id\r\n                                                    :\r\n                                                    // this case means that the issuer is creating their own offer\r\n                                                    // so this field is set to null\r\n                                                    null\r\n                                        ,\r\n                                        projectName: saveProgress ? (pitchProjectName.trim().length === 0 ? null : pitchProjectName) : pitchProjectName,\r\n                                        sector: saveProgress ? (pitchSector === \"-\" ? null : pitchSector) : pitchSector,\r\n                                        description: saveProgress ? (pitchProjectDescription.trim().length === 0 ? null : pitchProjectDescription) : pitchProjectDescription,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // if a group admin creates the offer\r\n                                                // then let it go live\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                                    :\r\n                                                    // if an issuer creates the offer\r\n                                                    // let the group admin check it first\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                        ,\r\n                                        Pitch: {\r\n                                            totalRaise:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                                :\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            amountRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                                :\r\n                                                                0\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                        :\r\n                                                        0\r\n                                            ,\r\n                                            fundRequired:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    pitchRaiseRequired.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        detailsAboutEarlierFundraisingRounds\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            howFundIsBeingRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    howFundIsBeingRaised.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        howFundIsBeingRaised\r\n                                                    :\r\n                                                    howFundIsBeingRaised\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            postMoneyValuation:\r\n                                                pitchPostMoneyValuation.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments: this.pitchSupportingDocumentsRealtimeDB,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument: this.pitchPresentationDocumentRealtimeDB,\r\n                                            cover: this.pitchCoverRealtimeDB,\r\n                                            postedDate: postedDate,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    DB_CONST.PITCH_STATUS_ON_GOING\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    projectRef\r\n                                        .child(projectID)\r\n                                        .set(projectObj)\r\n                                        .then(() => {\r\n                                            // save button is clicked\r\n                                            if (saveProgress) {\r\n                                                // don't need to track activity for draft project\r\n\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    requestToLoadData: true,\r\n                                                    projectIDToBeLoadedAfterSavingFirstTime: projectID,\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    projectEditedLoaded: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectID\r\n                                                );\r\n                                            }\r\n                                            // publish button is clicked\r\n                                            else {\r\n                                                // track activity for creating a new project\r\n                                                realtimeDBUtils\r\n                                                    .trackActivity({\r\n                                                        userID: AuthenticationState.currentUser.id,\r\n                                                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                        interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                        interactedObjectID: projectID,\r\n                                                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", projectObj.projectName),\r\n                                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectObj.id),\r\n                                                        value: projectObj\r\n                                                    });\r\n\r\n                                                const id = this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .push()\r\n                                                    .key;\r\n\r\n                                                // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                const acceptedTCsObj = {\r\n                                                    id,\r\n                                                    issuerID: AuthenticationState.currentUser.id,\r\n                                                    projectID: projectID,\r\n                                                    date: utils.getCurrentDate()\r\n                                                };\r\n\r\n                                                this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .child(id)\r\n                                                    .set(acceptedTCsObj)\r\n                                                    .then(() => {\r\n                                                        this.setState({\r\n                                                            createProject: {\r\n                                                                ...this.state.createProject,\r\n                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                uploadFileProgress: 100,\r\n                                                                projectID: projectID\r\n                                                            }\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Upload multiple files\r\n     */\r\n    uploadMultipleFiles = async (mode, projectStorageRef) => {\r\n\r\n        const {\r\n            saveProgress\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchSupportingDocuments,\r\n            pitchPresentationDocument\r\n        } = this.state.createProject;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                openUploadingProgressDialog: !saveProgress,\r\n                uploadFileMode: mode,\r\n                uploadFileProgress: 0\r\n            }\r\n        });\r\n\r\n        let filesArray = null;\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // no pitch cover selected\r\n                if (!pitchCoverTypeSelected) {\r\n                    return null;\r\n                }\r\n                // pitch cover as a video URL\r\n                if (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED) {\r\n                    const formattedCover = {\r\n                        url: pitchCoverVideoURL,\r\n                        fileType: DB_CONST.FILE_TYPE_VIDEO,\r\n                        fileExtension: \"\",\r\n                        storageID: \"\"\r\n                    };\r\n                    this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                    return;\r\n                }\r\n                filesArray = pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                filesArray = pitchSupportingDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                filesArray = pitchPresentationDocument;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return Promise\r\n            .all(\r\n                filesArray.map(file => this.uploadIndividualFile(mode, projectStorageRef, file))\r\n            )\r\n            .then(() => {\r\n                return true;\r\n            })\r\n            .catch(error => {\r\n                return false;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Upload a single file (document)\r\n     */\r\n    uploadIndividualFile = async (mode, pitchStorageRef, document) => {\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        let docRef = null;\r\n\r\n        const storageID = utils.getCurrentDate();\r\n        const storageFileName = utils.constructStorageFileName(document, storageID);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                    .child(`${storageID}.${document.file.extension}`);\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const uploadTask = docRef.put(document.file);\r\n            uploadTask.on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: progress\r\n                        }\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask.snapshot.ref.getDownloadURL().then(fileDownloadURL => {\r\n\r\n                    let percentDone = 0;\r\n\r\n                    switch (mode) {\r\n                        case UPLOAD_PITCH_COVER_MODE:\r\n                            // capture the downloadable URL of the pitch cover and store in this variable for uploading to Realtime DB\r\n                            const formattedCover = {\r\n                                url: fileDownloadURL,\r\n                                fileType: document.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                fileExtension: document.file.extension,\r\n                                storageID: storageID\r\n                            };\r\n                            this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                            percentDone = 100 / (pitchSupportingDocuments.length);\r\n                            this.setState(prevState => ({\r\n                                createProject: {\r\n                                    ...prevState.createProject,\r\n                                    uploadFileProgress: prevState.createProject.uploadFileProgress + percentDone.toFixed(0)\r\n                                }\r\n                            }));\r\n                            const formattedSupportingDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchSupportingDocumentsRealtimeDB = [...this.pitchSupportingDocumentsRealtimeDB, formattedSupportingDocument];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                            const formattedPresentationDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchPresentationDocumentRealtimeDB = [...this.pitchPresentationDocumentRealtimeDB, formattedPresentationDocument];\r\n                            return resolve();\r\n                        default:\r\n                            return reject(\"Not existing mode\");\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function handles when a document is deleted\r\n     *\r\n     * @param mode\r\n     * @param index\r\n     */\r\n    handleDeleteDocument = (mode, index) => {\r\n\r\n        switch (mode) {\r\n            case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                let supportingDocuments = this.state.createProject.pitchSupportingDocuments;\r\n                supportingDocuments.splice(index, 1);\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchSupportingDocuments: supportingDocuments\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_PRESENTATION_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchPresentationDocument: []\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_COVER_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchCover: []\r\n                    }\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to set the reference of the Publish button so that the error message popover can be displayed properly\r\n     *\r\n     * @param target\r\n     */\r\n    attachNextStepButtonRef = target => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchNextStepButtonTarget: target\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close the popover error message displayed when the user hits the Publish click without filling all the required fields\r\n     */\r\n    handlePopoverErrorMessageClose = () => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishErrorMessageShowed: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is deleted ==> displaying a list of support documents ==> able to delete them\r\n     *\r\n     * @param index\r\n     */\r\n    handleDownloadDocumentDeleteClick = index => {\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let updatedProjectEdited = JSON.parse(JSON.stringify(projectEdited));\r\n        updatedProjectEdited.Pitch.supportingDocuments[index].removed = true;\r\n\r\n        this.setState({\r\n            projectEdited: updatedProjectEdited\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close file upload error snackbar\r\n     */\r\n    handleCloseErrorSnackbar = (event, reason) => {\r\n\r\n        if (reason === 'clickaway') {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    errorSnackbarOpen: false\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                errorSnackbarOpen: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when date changed\r\n     */\r\n    handleDateChanged = date => {\r\n\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchExpiryDate: NaN\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchExpiryDate:\r\n                    !date\r\n                        ?\r\n                        null\r\n                        :\r\n                        date.getTime()\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when accept terms and conditions checkbox changed\r\n     */\r\n    handleCheckboxChanged = event => {\r\n\r\n        const name = event.target.name;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                [name]: event.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the save progress button is clicked\r\n     */\r\n    handleSaveProgressClick = () => {\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n            hasRaisedMoneyBefore,\r\n\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        if (activeStep === STEP_PITCH_GENERAL_INFORMATION) {\r\n            // check if at least one field is filled\r\n            if (pitchSector === \"-\"\r\n                && pitchProjectName.trim().length === 0\r\n                && pitchProjectDescription.trim().length === 0\r\n                && pitchExpiryDate === null\r\n                && pitchRaiseRequired.trim().length === 0\r\n                && howFundIsBeingRaised.trim().length === 0\r\n                && financialRound.trim().length === 0\r\n                && pitchPostMoneyValuation.trim().length === 0\r\n                && hasRaisedMoneyBefore.trim().length === 0\r\n                && (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'You have nothing to save.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if the entered date is in a valid format or the entered date is less than the minimum date\r\n            if (isNaN(pitchExpiryDate)\r\n                ||\r\n                (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please enter a valid date.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if amount raised specified if the user chose Yes for prior investment\r\n            if (hasRaisedMoneyBefore.trim().length > 0) {\r\n                if (hasRaisedMoneyBefore === \"true\"\r\n                    && pitchAmountRaisedToDate.trim().length === 0\r\n                ) {\r\n                    setFeedbackSnackbarContent(\r\n                        'Please specify the fund you have raised.',\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // check if entered funds are valid\r\n            if ((hasRaisedMoneyBefore === \"true\"\r\n                    && pitchAmountRaisedToDate.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                )\r\n                || (pitchRaiseRequired.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchRaiseRequired)\r\n                )\r\n                || (pitchPostMoneyValuation.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                )\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please check your entered funds again.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            saveProgress: true,\r\n            progressBeingSaved: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user clicks on the Delete draft button\r\n     */\r\n    handleDeleteDraftClick = () => {\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            draftBeingDeleted: true\r\n        });\r\n\r\n        // delete pitch cover\r\n        this.deleteMultiplesOnStorage(UPLOAD_PITCH_COVER_MODE)\r\n            .then(() => {\r\n                // delete pitch deck\r\n                this.deleteMultiplesOnStorage(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE)\r\n                    .then(() => {\r\n                        // delete pitch supporting documents\r\n                        this.deleteMultiplesOnStorage(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE)\r\n                            .then(() => {\r\n                                this.firebaseDB\r\n                                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                                    .child(projectEdited.id)\r\n                                    .remove()\r\n                                    .then(() => {\r\n                                        // reset all variables and states to refresh the page\r\n                                        this.pitchCoverRealtimeDB = [];\r\n                                        this.pitchPresentationDocumentRealtimeDB = [];\r\n                                        this.pitchSupportingDocumentsRealtimeDB = [];\r\n                                        this.selectedProjectVisibilitySetting = -1;\r\n\r\n                                        this.setState({\r\n                                            ...initState\r\n                                        });\r\n\r\n                                        // remove listener\r\n                                        if (this.projectEditedSaveModeRefListener) {\r\n                                            this.projectEditedSaveModeRefListener.off('child_changed');\r\n                                        }\r\n\r\n                                        this.navigateToTheSamePageWithActiveStepSaved(0, null);\r\n                                        // reload the page\r\n                                        window.location.reload();\r\n                                    });\r\n                            });\r\n                    });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle delete multiple files on firebase storage\r\n     */\r\n    deleteMultiplesOnStorage = async (mode) => {\r\n        const {\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let storageRef = this.firebaseStorage\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(AuthenticationState.currentUser.id)\r\n            .child(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectEdited.id);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                if (!projectEdited.Pitch.cover) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.cover.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                if (!projectEdited.Pitch.presentationDocument) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.presentationDocument.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                if (!projectEdited.Pitch.supportingDocuments) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.supportingDocuments.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle delete a single file on firebase storage\r\n     */\r\n    deleteASingleFileOnStorage = async (mode, storageRef, file) => {\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // a video URL from other servers instead of from Firebase storage\r\n                if (file.storageID === \"\") {\r\n                    return;\r\n                }\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}.${file.fileExtension}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            isMobile\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            projectEditedLoaded,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            draftBeingDeleted\r\n        } = this.state;\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || isAuthenticating(AuthenticationState)\r\n        ) {\r\n            return null;\r\n        }\r\n\r\n        // when creating a new offer,\r\n        // if no user found or found user is an investor or a super admin\r\n        // --> display Page Not Found\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (successfullyAuthenticated(AuthenticationState) && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n            || (!params.edit && AuthenticationState.currentUser && (AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR\r\n                    || (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN && AuthenticationState.currentUser.superAdmin))\r\n            )\r\n        ) {\r\n            return (\r\n                <Redirect to={Routes.error404}/>\r\n            );\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit) {\r\n            // offer not loaded yet\r\n            if (!projectEditedLoaded) {\r\n                return (\r\n                    <FlexView width=\"100%\" hAlignContent=\"center\"  style={{padding: 30}}>\r\n                        <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // no offer found or found offer does not belong to the current issuer/group admin\r\n            if (\r\n                !projectEdited\r\n                // current user is an issuer that does not own the project\r\n                || (projectEdited\r\n                    && AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER\r\n                    && AuthenticationState.currentUser.id !== projectEdited.issuerID\r\n                )\r\n            ) {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n\r\n            // check editable offer\r\n            if (!utils.shouldAProjectBeEdited(AuthenticationState.currentUser, projectEdited)) {\r\n                return (\r\n                    <FlexView marginTop={50} width=\"100%\">\r\n                        <Typography variant=\"h4\" align=\"center\">This offer can't be edited anymore</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // current user is a group admin that does not own the project\r\n            if (projectEdited\r\n                && AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && !AuthenticationState.currentUser.superAdmin\r\n                && AuthenticationState.currentUser.anid !== projectEdited.anid\r\n            ) {\r\n                return <FlexView marginTop={50} hAlignContent=\"center\">\r\n                    <Typography variant=\"h4\" align=\"center\">\r\n                        {`You can only edit offers from ${getHomeGroup(AuthenticationState.groupsOfMembership).group.displayName}.`}\r\n                    </Typography>\r\n                </FlexView>;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <CreateProject\r\n                    clubAttributes={ManageSystemAttributesState.systemAttributes}\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    groupProperties={ManageGroupUrlState.group}\r\n                    params={params}\r\n                    AuthenticationState={AuthenticationState}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    projectEdited={projectEdited}\r\n                    projectEditedLoaded={projectEditedLoaded}\r\n                    saveProgress={saveProgress}\r\n                    progressBeingSaved={progressBeingSaved}\r\n                    draftBeingDeleted={draftBeingDeleted}\r\n                    isMobile={isMobile}\r\n                    createProjectState={this.state.createProject}\r\n                    onSelectPitchCoverTypeClick={this.handleSelectPitchCoverTypeClick}\r\n                    onFilesChanged={this.handleFilesChanged}\r\n                    onFilesError={this.handleFileError}\r\n                    onDeleteDocument={this.handleDeleteDocument}\r\n                    onInputChanged={this.handleCreatePitchInputChanged}\r\n                    onPitchEditorChanged={this.handlePitchEditorChanged}\r\n                    attachNextStepButtonRef={this.attachNextStepButtonRef}\r\n                    onPopoverErrorMessageClose={this.handlePopoverErrorMessageClose}\r\n                    onNextStepClick={this.handleNextStepClick}\r\n                    onBackClick={this.handleBackClick}\r\n                    onDownloadDocumentDeleteClick={this.handleDownloadDocumentDeleteClick}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCheckboxChanged={this.handleCheckboxChanged}\r\n                    onSaveProgressClick={this.handleSaveProgressClick}\r\n                    onDeleteDraftClick={this.handleDeleteDraftClick}\r\n                />\r\n\r\n                <UploadingDialog\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    open={this.state.createProject.openUploadingProgressDialog}\r\n                    uploadFileMode={this.state.createProject.uploadFileMode}\r\n                    uploadFileProgress={this.state.createProject.uploadFileProgress}\r\n                    params={params}\r\n                    projectEdited={projectEdited}\r\n                    projectID={this.state.createProject.projectID}\r\n                />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * This component contains the main UI elements for the whole page\r\n */\r\nclass CreateProject extends Component {\r\n\r\n    onNextStepClick = () => {\r\n        this.props.onNextStepClick();\r\n    };\r\n\r\n    onBackClick = () => {\r\n        this.props.onBackClick();\r\n    };\r\n\r\n    onSelectPitchCoverTypeClick = type => {\r\n        this.props.onSelectPitchCoverTypeClick(type);\r\n    };\r\n\r\n    onFilesChanged = mode => files => {\r\n        this.props.onFilesChanged(mode, files);\r\n    };\r\n\r\n    onFilesError = (error, files) => {\r\n        this.props.onFilesError(error, files);\r\n    };\r\n\r\n    onInputChanged = event => {\r\n        this.props.onInputChanged(event);\r\n    };\r\n\r\n    onPitchEditorChanged = (content, delta, source, editor) => {\r\n        this.props.onPitchEditorChanged(content, delta, source, editor);\r\n    };\r\n\r\n    onDeleteDocument = mode => index => {\r\n        this.props.onDeleteDocument(mode, index);\r\n    };\r\n\r\n    attachNextStepButtonRef = (target) => {\r\n        this.props.attachNextStepButtonRef(target);\r\n    };\r\n\r\n    onPopoverErrorMessageClose = () => {\r\n        this.props.onPopoverErrorMessageClose();\r\n    };\r\n\r\n    onDownloadDocumentDeleteClick = index => {\r\n        this.props.onDownloadDocumentDeleteClick(index);\r\n    };\r\n\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    };\r\n\r\n    onCheckboxChanged = event => {\r\n        this.props.onCheckboxChanged(event);\r\n    };\r\n\r\n    onSaveProgressClick = () => {\r\n        this.props.onSaveProgressClick();\r\n    };\r\n\r\n    onDeleteDraftClick = () => {\r\n        this.props.onDeleteDraftClick();\r\n    };\r\n\r\n    /**\r\n     * Render pop-over error message (if any) when the user clicks to move to the next step\r\n     */\r\n    renderPitchPublishErrorMessage = () => {\r\n\r\n        const {\r\n            groupUserName\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (this.props.createProjectState.pitchPublishCheck) {\r\n            case PITCH_PUBLISH_CHECK_NONE:\r\n                return null;\r\n            case PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION:\r\n                msg = \"Please fill in all the General information.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_FUND:\r\n                msg = \"Please check your entered funds again.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER:\r\n                msg = \"Please upload an image or a video for your pitch cover.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION:\r\n                // for QIB, pitch deck is a one-pager\r\n                if (groupUserName === \"qib\") {\r\n                    msg = \"Please upload your one-pager.\";\r\n                }\r\n                // for other groups, pitch deck is still pitch deck\r\n                else {\r\n                    msg = \"Please upload a file or use our provided text editor to make your pitch presentation.\";\r\n                }\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"error\">{msg}</Typography>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            clubAttributes,\r\n            groupUserName,\r\n            groupProperties,\r\n            currentUser,\r\n            params,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n            draftBeingDeleted,\r\n\r\n            isMobile,\r\n\r\n            createProjectState\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Stepper */}\r\n                <Row noGutters style={{ marginTop: 40, padding: 20}}>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            <Stepper activeStep={createProjectState.activeStep} alternativeLabel style={{ width: isMobile ? \"auto\" : \"100%\", padding: 0}}>\r\n                                <Step key={0}>\r\n                                    <StepLabel>General information</StepLabel>\r\n                                </Step>\r\n                                <Step key={1}>\r\n                                    <StepLabel>Pitch cover</StepLabel>\r\n                                </Step>\r\n                                <Step key={2}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>One-pager</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Pitch deck</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                <Step key={3}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>Pitch deck</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Supporting documents</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                {\r\n                                    params.edit && projectEdited\r\n                                        ?\r\n                                        (\r\n                                            projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Step key={4}>\r\n                                                    <StepLabel>Terms and conditions</StepLabel>\r\n                                                </Step>\r\n                                        )\r\n                                        :\r\n                                        <Step key={4}>\r\n                                            <StepLabel>Terms and conditions</StepLabel>\r\n                                        </Step>\r\n                                }\r\n                            </Stepper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main content (changed based on activeStep) */}\r\n                <Row noGutters style={{padding: 18}}>\r\n                    {\r\n                        createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION\r\n                            ?\r\n                            /**\r\n                             * General information column\r\n                             */\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                {\r\n                                    /**\r\n                                     * Step 1: General information\r\n                                     */\r\n                                }\r\n                                <FlexView column>\r\n                                    <FlexView>\r\n                                        <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 1: General information</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <SelectPitchVisibility/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {/** Let the issuer select the group they want to create an offer for */}\r\n                                    {\r\n                                        createProjectState.groupIssuerCreateOfferFor === \"undefined\"\r\n                                            ? null\r\n                                            : params.edit && projectEdited && !isDraftProjectNotSubmitted(projectEdited)\r\n                                            ? null\r\n                                            : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : AuthenticationState.groupsOfMembership === null || AuthenticationState.groupsOfMembership.length === 0\r\n                                                    ? null\r\n                                                    : <FlexView marginTop={30}>\r\n                                                        <FormControl fullWidth required>\r\n                                                            <FormLabel>Select group</FormLabel>\r\n                                                            <Select name=\"groupIssuerCreateOfferFor\" value={createProjectState.groupIssuerCreateOfferFor} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                                {\r\n                                                                    AuthenticationState.groupsOfMembership.map(\r\n                                                                        groupOfMembership =>\r\n                                                                            <MenuItem key={groupOfMembership.group.anid} value={groupOfMembership.group.anid}>{groupOfMembership.group.displayName}</MenuItem>\r\n                                                                    )\r\n                                                                }\r\n                                                            </Select>\r\n                                                        </FormControl>\r\n                                                    </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Choosing sector\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={30}>\r\n                                        <FormControl\r\n                                            fullWidth\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchSector === \"-\"\r\n                                            }\r\n                                        >\r\n                                            <FormLabel>Choose sector</FormLabel>\r\n                                            <Select name=\"pitchSector\" value={createProjectState.pitchSector} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                <MenuItem key={-1} value=\"-\">\r\n                                                    -\r\n                                                </MenuItem>\r\n                                                {\r\n                                                    !clubAttributes\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Select expiry date\r\n                                         *\r\n                                         * For QIB: Hide this section as the group admins will set\r\n                                         * the default expiry date for all the projects.\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                            Pitch expiry\r\n                                                            date: {utils.dateInReadableFormat(groupProperties.settings.defaultPitchExpiryDate)} (set\r\n                                                            by QIB admins)\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={8} lg={6}>\r\n                                                        {\r\n                                                            !params.edit || !projectEdited\r\n                                                                ?\r\n                                                                <KeyboardDatePicker\r\n                                                                    autoOk\r\n                                                                    fullWidth\r\n                                                                    variant=\"dialog\"\r\n                                                                    inputVariant=\"outlined\"\r\n                                                                    label=\"Choose expiry date for this pitch\"\r\n                                                                    format=\"dd/MM/yyyy\"\r\n                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                    value={createProjectState.pitchExpiryDate}\r\n                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                    error={\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                            && createProjectState.pitchExpiryDate === null)\r\n                                                                        ||\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                            && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                        )\r\n                                                                    }\r\n                                                                    onChange={date => this.onDateChanged(date)}\r\n                                                                />\r\n                                                                :\r\n                                                                (\r\n                                                                    utils.isDraftProject(projectEdited)\r\n                                                                        ?\r\n                                                                        <KeyboardDatePicker\r\n                                                                            autoOk\r\n                                                                            fullWidth\r\n                                                                            variant=\"dialog\"\r\n                                                                            inputVariant=\"outlined\"\r\n                                                                            label=\"Choose expiry date for this pitch\"\r\n                                                                            format=\"dd/MM/yyyy\"\r\n                                                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                            value={createProjectState.pitchExpiryDate}\r\n                                                                            InputAdornmentProps={{position: \"start\"}}\r\n                                                                            error={\r\n                                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                    && createProjectState.pitchExpiryDate === null)\r\n                                                                                || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                    && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                        || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                )\r\n                                                                            }\r\n                                                                            onChange={date => this.onDateChanged(date)}\r\n                                                                        />\r\n                                                                        :\r\n                                                                        <FlexView column>\r\n                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                {\r\n                                                                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                                                        ?\r\n                                                                                        null\r\n                                                                                        :\r\n                                                                                        projectEdited.PrimaryOffer\r\n                                                                                            ?\r\n                                                                                            `Pledge phase will be active in ${utils.dateDiff(projectEdited.PrimaryOffer.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                            :\r\n                                                                                            projectEdited.Pitch\r\n                                                                                                ?\r\n                                                                                                `Pitch phase will be active in ${utils.dateDiff(projectEdited.Pitch.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                }\r\n                                                                            </Typography>\r\n                                                                            {\r\n                                                                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                                                    ?\r\n                                                                                    null\r\n                                                                                    :\r\n                                                                                    (\r\n                                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                                                                            ?\r\n                                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                                Pitch phase has ended.\r\n                                                                                                Waiting\r\n                                                                                                for the issuer to create\r\n                                                                                                pledge.\r\n                                                                                            </Typography>\r\n                                                                                            :\r\n                                                                                            <KeyboardDatePicker\r\n                                                                                                autoOk\r\n                                                                                                fullWidth\r\n                                                                                                variant=\"dialog\"\r\n                                                                                                inputVariant=\"outlined\"\r\n                                                                                                label={\r\n                                                                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                                                                                        ?\r\n                                                                                                        \"Choose expiry date for pledge phase\"\r\n                                                                                                        :\r\n                                                                                                        \"Choose expiry date for pitch phase\"\r\n                                                                                                }\r\n                                                                                                format=\"dd/MM/yyyy\"\r\n                                                                                                minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                                value={createProjectState.pitchExpiryDate}\r\n                                                                                                InputAdornmentProps={{position: \"start\"}}\r\n                                                                                                error={\r\n                                                                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                                        && createProjectState.pitchExpiryDate === null)\r\n                                                                                                    || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                                        && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                                            || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                                    )\r\n                                                                                                }\r\n                                                                                                onChange={date => this.onDateChanged(date)}\r\n                                                                                            />\r\n                                                                                    )\r\n                                                                            }\r\n                                                                        </FlexView>\r\n                                                                )\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company name (or project name)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={20}>\r\n                                        <TextField\r\n                                            label=\"Company name\"\r\n                                            name=\"pitchProjectName\"\r\n                                            value={createProjectState.pitchProjectName}\r\n                                            fullWidth\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchProjectName.trim().length === 0\r\n                                            }\r\n                                            onChange={this.onInputChanged}\r\n                                        />\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company description (or project description)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={10}>\r\n                                        <FormControl required fullWidth>\r\n                                            <TextField\r\n                                                label=\"Please provide a brief summary of what you do (max 300 characters)\"\r\n                                                name=\"pitchProjectDescription\"\r\n                                                value={createProjectState.pitchProjectDescription}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.pitchProjectDescription.trim().length === 0\r\n                                                }\r\n                                                multiline\r\n                                                rowsMax={5}\r\n                                                rows={5}\r\n                                                onChange={this.onInputChanged}\r\n                                            />\r\n                                            <FormHelperText>\r\n                                                This will be circulated to investors in and outside region.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Amount of money that needs raising\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={50}>\r\n                                        <FormControl required fullWidth>\r\n                                            <FormLabel>How much do you want to raise?</FormLabel>\r\n                                            <TextField\r\n                                                name=\"pitchRaiseRequired\"\r\n                                                value={createProjectState.pitchRaiseRequired}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                onChange={this.onInputChanged}\r\n                                                error={\r\n                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                        && createProjectState.pitchRaiseRequired.trim().length === 0)\r\n                                                    ||\r\n                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                        && !utils.getNumberFromInputString(createProjectState.pitchRaiseRequired)\r\n                                                    )\r\n                                                }\r\n                                                InputProps={{\r\n                                                    startAdornment:\r\n                                                        <InputAdornment position=\"start\"></InputAdornment>\r\n                                                }}\r\n                                            />\r\n                                            <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.</FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Raised money before?\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={60}>\r\n                                        <FormControl component=\"fieldset\" required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.hasRaisedMoneyBefore.trim().length === 0\r\n                                            }>\r\n                                            <FormLabel> Have you already raised money?\r\n                                            </FormLabel>\r\n                                            <RadioGroup row name=\"hasRaisedMoneyBefore\" value={createProjectState.hasRaisedMoneyBefore} onChange={this.onInputChanged}>\r\n                                                <FormControlLabel value={true.toString()} control={<Radio color=\"primary\"/>} label=\"Yes\" labelPlacement=\"start\"/>\r\n                                                <FormControlLabel value={false.toString()} control={<Radio color=\"secondary\"/>} label=\"No\" labelPlacement=\"start\"/>\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * If raised money before, ask how much has been raised?\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        createProjectState.hasRaisedMoneyBefore !== \"true\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <FlexView>\r\n                                                    <FormControl fullWidth required>\r\n                                                        <FormLabel>How much have you already raised?</FormLabel>\r\n                                                        <TextField\r\n                                                            name=\"pitchAmountRaisedToDate\"\r\n                                                            value={createProjectState.pitchAmountRaisedToDate}\r\n                                                            fullWidth\r\n                                                            variant=\"outlined\"\r\n                                                            required\r\n                                                            onChange={this.onInputChanged}\r\n                                                            error={\r\n                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                    && createProjectState.hasRaisedMoneyBefore === \"true\"\r\n                                                                    && createProjectState.pitchAmountRaisedToDate.trim().length === 0)\r\n                                                                ||\r\n                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                                    && !utils.getNumberFromInputString(createProjectState.pitchAmountRaisedToDate)\r\n                                                                )\r\n                                                            }\r\n                                                            InputProps={{\r\n                                                                startAdornment: <InputAdornment\r\n                                                                    position=\"start\"></InputAdornment>\r\n                                                            }}\r\n                                                        />\r\n                                                        <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.</FormHelperText>\r\n                                                    </FormControl>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView marginTop={30}>\r\n                                                    <FormControl fullWidth>\r\n                                                        <FormLabel>Earlier fundraising rounds details</FormLabel>\r\n                                                        <TextField multiline name=\"detailsAboutEarlierFundraisingRounds\" value={createProjectState.detailsAboutEarlierFundraisingRounds} fullWidth variant=\"outlined\" onChange={this.onInputChanged}/>\r\n                                                        <FormHelperText>Please provide any further details on your earlier fundraising rounds</FormHelperText>\r\n                                                    </FormControl>\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * How fund is being raised?\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth>\r\n                                            <FormLabel>How are you raising? e.g. Do you have a crowdfunding page (please add a link)?</FormLabel>\r\n                                            <TextField name=\"howFundIsBeingRaised\" value={createProjectState.howFundIsBeingRaised} fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.howFundIsBeingRaised.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Financial round\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.financialRound.trim().length === 0\r\n                                            }\r\n                                        >\r\n                                            <FormLabel style={{marginBottom: 16}}>What financial round are you looking for?</FormLabel>\r\n                                            <RadioGroup name=\"financialRound\" value={createProjectState.financialRound} onChange={this.onInputChanged}>\r\n                                                {\r\n                                                    DB_CONST.FINANCIAL_ROUNDS.map(round =>\r\n                                                        <FormControlLabel key={round} value={round} control={<Radio/>} label={round}/>\r\n                                                    )\r\n                                                }\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Special news - QIB only\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                        || (\r\n                                            !groupUserName\r\n                                            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            && currentUser.superAdmin\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={45}>\r\n                                                <FormControl required fullWidth>\r\n                                                    <FormLabel>What special news should Briony talk about when she mentions your investment raise at the QIB?</FormLabel>\r\n                                                    <TextField name=\"qibSpecialNews\" value={createProjectState.qibSpecialNews} placeholder=\"This would be a good place to mention if you have already made progress in your funding round.\" fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                        error={\r\n                                                            groupUserName === \"qib\"\r\n                                                            && createProjectState.qibSpecialNews === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                            && createProjectState.qibSpecialNews.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                    <FormHelperText>QIB won't be able to mention everyone. So, you can make it REALLY exciting.</FormHelperText>\r\n                                                </FormControl>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Post money valuation\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl fullWidth>\r\n                                            <FormLabel>Enter post money valuation</FormLabel>\r\n                                            <TextField name=\"pitchPostMoneyValuation\" value={createProjectState.pitchPostMoneyValuation} fullWidth variant=\"outlined\" onChange={this.onInputChanged}\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                    && createProjectState.pitchPostMoneyValuation.trim().length > 0\r\n                                                    && !utils.getNumberFromInputString(createProjectState.pitchPostMoneyValuation)\r\n                                                }\r\n                                                InputProps={{\r\n                                                    startAdornment:\r\n                                                        <InputAdornment position=\"start\"></InputAdornment>\r\n                                                }}/>\r\n                                            <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n\r\n                                <Divider style={{marginTop: 60}}/>\r\n                            </Col>\r\n                            :\r\n                            (\r\n                                createProjectState.activeStep === STEP_PITCH_COVER\r\n                                    ?\r\n                                    // Pitch cover\r\n                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <Typography color=\"primary\" variant=\"h6\" align=\"left\" style={{marginRight: 15}}>Step 2: Upload pitch cover</Typography>\r\n                                                <InfoOverlay message=\"Pitch cover is an image or video that will appear on your pitch summary tile.\" placement=\"right\"/>\r\n                                            </FlexView>\r\n\r\n                                            {\r\n                                                !params.edit || !projectEdited\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView column width=\"100%\" marginTop={25} marginBottom={25}>\r\n                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginBottom: 20}}>Your current pitch cover</Typography>\r\n\r\n                                                            {\r\n                                                                projectEdited.Pitch.cover.map((coverItem, index) => (\r\n                                                                    coverItem.hasOwnProperty('removed')\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                                            ?\r\n                                                                            <ReactPlayer key={index} playsInline url={coverItem.url} width=\"100%\" height={coverItem.storageID === \"\" ? 280 : \"auto\"} playing={false} controls={true}/>\r\n                                                                            :\r\n                                                                            <Image key={index} fluid src={coverItem.url}/>\r\n                                                                ))\r\n                                                            }\r\n\r\n                                                            <Divider style={{marginTop: 45}}/></FlexView>\r\n                                            }\r\n\r\n                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 18}}>\r\n                                                {\r\n                                                    !params.edit || !projectEdited\r\n                                                        ?\r\n                                                        \"You need to upload an image or a video for the cover of your pitch.\"\r\n                                                        :\r\n                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                            ?\r\n                                                            \"You need to upload an image or a video for the cover of your pitch.\"\r\n                                                            :\r\n                                                            \"Upload an image or a video to change your pitch cover. We will use the new cover for your pitch instead of the old one.\"\r\n                                                }\r\n                                            </Typography>\r\n\r\n                                            {\r\n                                                groupUserName !== \"qib\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>Please upload your company logo here.</Typography>\r\n                                            }\r\n\r\n                                            <FlexView column marginTop={32}>\r\n                                                <FlexView>\r\n                                                    <Button\r\n                                                        variant={\r\n                                                            createProjectState.pitchCoverTypeSelected\r\n                                                            && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                \"contained\"\r\n                                                                :\r\n                                                                \"outlined\"\r\n                                                        }\r\n                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                        color=\"primary\"\r\n                                                        onClick={() => this.onSelectPitchCoverTypeClick(PITCH_COVER_FILE_TYPE_SELECTED)}\r\n                                                    >\r\n                                                        {\r\n                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                ?\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image or a video\"\r\n                                                                    :\r\n                                                                    \"Upload an image or a video\"\r\n                                                                :\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image\"\r\n                                                                    :\r\n                                                                    \"Upload an image\"\r\n                                                        }\r\n                                                    </Button>\r\n\r\n                                                    <FlexView marginLeft={20} vAlignContent=\"center\">\r\n                                                        <Button\r\n                                                            variant={\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"contained\"\r\n                                                                    :\r\n                                                                    \"outlined\"\r\n                                                            }\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                            color=\"primary\"\r\n                                                            onClick={\r\n                                                                () => this.onSelectPitchCoverTypeClick(PITCH_COVER_VIDEO_URL_TYPE_SELECTED)\r\n                                                            }\r\n                                                            style={{marginRight: 15}}>\r\n                                                            {\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload a video URL\"\r\n                                                                    :\r\n                                                                    \"Upload a video URL\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <InfoOverlay message=\"If your company has a short explainer or introductory video, we suggest you embed it here.\" placement=\"right\"/>\r\n                                                    </FlexView>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView column marginTop={20}>\r\n                                                    {\r\n                                                        !createProjectState.pitchCoverTypeSelected\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                <FlexView column marginTop={10}>\r\n                                                                    <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_COVER_FILES_CHANGED)} onError={this.onFilesError}\r\n                                                                        accepts={\r\n                                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                ?\r\n                                                                                ['video/mp4', 'image/*']\r\n                                                                                :\r\n                                                                                ['image/*']\r\n                                                                        }\r\n                                                                        multiple\r\n                                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                        minFileSize={0}\r\n                                                                        clickable>\r\n                                                                        <Typography variant=\"body2\" align=\"left\">\r\n                                                                            {\r\n                                                                                clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                    ?\r\n                                                                                    \"Drop an image or a video here or click to upload\"\r\n                                                                                    :\r\n                                                                                    \"Drop an image here or click to upload\"\r\n                                                                            }\r\n                                                                        </Typography>\r\n                                                                    </Files>\r\n                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}><u>Note:</u> Pitch cover must not exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column>\r\n                                                                    <TextField name=\"pitchCoverVideoURL\" value={createProjectState.pitchCoverVideoURL} placeholder=\"Enter your video URL here\" variant=\"outlined\" margin=\"dense\" onChange={this.onInputChanged}/>\r\n                                                                </FlexView>\r\n                                                    }\r\n\r\n                                                    {/** Pitch cover file type preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCover.length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35}>\r\n                                                                {\r\n                                                                    createProjectState.pitchCover[0].file.type !== \"video/mp4\"\r\n                                                                        ?\r\n                                                                        <Image fluid src={createProjectState.pitchCover[0].preview}/>\r\n                                                                        :\r\n                                                                        <ReactPlayer url={createProjectState.pitchCover[0].preview} playsInline width=\"100%\" height=\"auto\" playing={false} controls={true}/>\r\n                                                                }\r\n                                                                <FlexView marginTop={10} hAlignContent=\"center\">\r\n                                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                                        overlay={\r\n                                                                            <Tooltip id={`tooltip-bottom`}>Delete this cover</Tooltip>\r\n                                                                        }>\r\n                                                                        <IconButton onClick={this.onDeleteDocument(PITCH_COVER_FILES_CHANGED)}>\r\n                                                                            <DeleteIcon fontSize=\"default\" color=\"error\"/>\r\n                                                                        </IconButton>\r\n                                                                    </OverlayTrigger>\r\n                                                                </FlexView>\r\n\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n\r\n                                                    {/** Pitch cover video URL preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCoverVideoURL.trim().length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35} height={280}>\r\n                                                                <ReactPlayer url={createProjectState.pitchCoverVideoURL} playsInline width=\"100%\" height=\"100%\" playing={false} controls={true}/>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    :\r\n                                    (\r\n                                        createProjectState.activeStep === STEP_PITCH_DECK\r\n                                            ?\r\n                                            // Pitch deck (other groups)\r\n                                            // One-pager (for QIB only)\r\n                                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                {\r\n                                                    groupUserName === \"qib\"\r\n                                                        ?\r\n                                                        // QIB pitch deck which is also known as one-pager\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Submit your one-pager</Typography>\r\n\r\n                                                            {/** Display the current one-pager if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current one-pager\"\r\n                                                                                            :\r\n                                                                                            \"You haven't submitted your one-pager.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={30}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload your one-pager</Typography>\r\n                                                                <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)} onError={this.onFilesError} accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']} multiple maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES} minFileSize={0} clickable>\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> The one-pager must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments documents={createProjectState.pitchPresentationDocument} onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}/>\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <FlexView column marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\r\n                                                                    We recommend the following headings for your\r\n                                                                    one-page, one-sided summary:\r\n                                                                    <ul>\r\n                                                                        <li>Problem</li>\r\n                                                                        <li>Solution</li>\r\n                                                                        <li>Business model</li>\r\n                                                                        <li>Market opportunity</li>\r\n                                                                        <li>Team</li>\r\n                                                                        <li>Journey so far/timeline</li>\r\n                                                                        <li>Ask/Investment proposition</li>\r\n                                                                    </ul>\r\n                                                                </Typography>\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                        :\r\n                                                        // other groups pitch deck\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Upload pitch deck</Typography>\r\n\r\n                                                            {/** Display the current pitch deck if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current pitch deck\"\r\n                                                                                            :\r\n                                                                                            \"You have no pitch deck.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                {\r\n                                                                    !params.edit || !projectEdited\r\n                                                                        ?\r\n                                                                        \"You need to either upload your pitch deck (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                        :\r\n                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                                        &&\r\n                                                                        (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            \"You need to either upload your pitch deck (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                            :\r\n                                                                            \"Upload a PDF, Word, or Power Point file to change your pitch deck. We will use the new document for your pitch deck instead of the old one.\"\r\n                                                                }\r\n                                                            </Typography>\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload pitch deck</Typography>\r\n                                                                <Files\r\n                                                                    className={css(styles.file_drop_zone)}\r\n                                                                    onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                    onError={this.onFilesError}\r\n                                                                    accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']}\r\n                                                                    multiple\r\n                                                                    maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                    minFileSize={0}\r\n                                                                    clickable\r\n                                                                >\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> Pitch deck must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments\r\n                                                                    documents={createProjectState.pitchPresentationDocument}\r\n                                                                    onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Rich text editor */}\r\n                                                            <FlexView column marginTop={20}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Write overview</Typography>\r\n                                                                <ReactQuill\r\n                                                                    theme=\"snow\"\r\n                                                                    placeholder={\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            \"Write your pitch presentation here. Add images for visual effects.\"\r\n                                                                            :\r\n                                                                            projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('presentationText')\r\n                                                                                ?\r\n                                                                                \"Write your pitch presentation here. Add images for visual effects.\"\r\n                                                                                :\r\n                                                                                \"You haven't had text presentation\" +\r\n                                                                                \" for this offer.\"\r\n                                                                    }\r\n                                                                    onChange={this.onPitchEditorChanged}\r\n                                                                    modules={modules}\r\n                                                                    value={createProjectState.pitchPresentationText}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                }\r\n                                            </Col>\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                    ?\r\n                                                    // Supporting documents (other groups)\r\n                                                    // Pitch deck (for QIB only)\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        {\r\n                                                            groupUserName === \"qib\"\r\n                                                                ?\r\n                                                                // QIB supporting document which is also known as pitch deck\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload pitch deck (optional)</Typography>\r\n\r\n                                                                    {/** Display current pitch deck if there is */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your current pitch deck</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no pitch deck.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/></FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/></FlexView>\r\n                                                                :\r\n                                                                // Other groups supporting documents\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload supporting documents</Typography>\r\n\r\n                                                                    {/** Display current supporting documents if there are */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your supporting documents</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no supporting documents.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** Explanation text */}\r\n                                                                    <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                        {\r\n                                                                            !params.edit || !projectEdited\r\n                                                                                ?\r\n                                                                                `You can upload supporting documents to help strengthen your pitch. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                :\r\n                                                                                (\r\n                                                                                    !projectEdited.Pitch.supportingDocuments\r\n                                                                                        ?\r\n                                                                                        `You can upload supporting documents to help strengthen your pitch. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                        :\r\n                                                                                        `Upload new supporting documents. \r\n                                                                        You can still upload ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length} \r\n                                                                        more documents.`\r\n                                                                                )\r\n                                                                        }\r\n                                                                    </Typography>\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 5: Accept terms and conditions</Typography>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to share raise publicly\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\" style={{marginTop: 30}}>\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToShareRaisePublicly\" value={createProjectState.agreedToShareRaisePublicly} checked={createProjectState.agreedToShareRaisePublicly} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to share news of your raise publicly e.g. via Twitter, please tick this box.</Typography>\r\n                                                                    }/>\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to receive local investment information\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToReceiveLocalInvestmentInfo\" value={createProjectState.agreedToReceiveLocalInvestmentInfo} checked={createProjectState.agreedToReceiveLocalInvestmentInfo} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to receive information about the local investment ecosystem (max 8 times a year), please tick this box.</Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to T&Cs\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <Typography variant=\"body1\" align=\"left\">Please tick the box below to confirm that you agree\r\n                                                                    to comply with the terms and conditions of creating\r\n                                                                    a pitch in our platform.</Typography>\r\n                                                                <FormControlLabel style={{marginTop: 10}}\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"acceptedTermsAndConditions\" value={createProjectState.acceptedTermsAndConditions} checked={createProjectState.acceptedTermsAndConditions} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">I've read and accept the\r\n                                                                            <b>\r\n                                                                                &nbsp;\r\n                                                                                <NavLink\r\n                                                                                    to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS}\r\n                                                                                    target=\"_blank\"\r\n                                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                                    style={{\r\n                                                                                        color:\r\n                                                                                            !groupProperties\r\n                                                                                                ?\r\n                                                                                                colors.primaryColor\r\n                                                                                                :\r\n                                                                                                groupProperties.settings.primaryColor\r\n                                                                                    }}\r\n                                                                                >\r\n                                                                                    terms and conditions.\r\n                                                                                </NavLink>\r\n                                                                            </b>\r\n                                                                        </Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                        </FlexView>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </Row>\r\n\r\n                {/** Navigation buttons */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 20, marginBottom: 120, padding: 18}}>\r\n\r\n                        {\r\n                            params.edit && projectEdited\r\n                                ?\r\n                                (\r\n                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                            ?\r\n                                            (\r\n                                                !createProjectState.acceptedTermsAndConditions\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before you submit.</Typography>\r\n                                            )\r\n                                            :\r\n                                            null\r\n                                        :\r\n                                        createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                            ?\r\n                                            <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                            :\r\n                                            null\r\n                                )\r\n                                :\r\n                                (\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                        ?\r\n                                        (\r\n                                            !createProjectState.acceptedTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                        )\r\n                                        :\r\n                                        null\r\n                                )\r\n                        }\r\n\r\n                        <FlexView width=\"100%\" hAlignContent=\"right\">\r\n                            <Button variant=\"text\" onClick={this.onBackClick} disabled={createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION} size=\"large\" className={css(sharedStyles.no_text_transform)}>Back</Button>\r\n                            <Button ref={this.attachNextStepButtonRef} variant=\"outlined\" color=\"primary\" onClick={this.onNextStepClick} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                                disabled={\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                    && !createProjectState.acceptedTermsAndConditions\r\n                                }\r\n                                style={{marginLeft: 15}}>\r\n                                {\r\n                                    progressBeingSaved\r\n                                        ?\r\n                                        <BeatLoader size={8}/>\r\n                                        :\r\n                                        params.edit && projectEdited\r\n                                            ?\r\n                                            (\r\n                                                projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                        ?\r\n                                                        \"Update\"\r\n                                                        :\r\n                                                        \"Next\"\r\n                                                    :\r\n                                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                        ?\r\n                                                        \"Submit\"\r\n                                                        :\r\n                                                        \"Save and Next\"\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                    ?\r\n                                                    \"Submit\"\r\n                                                    :\r\n                                                    \"Save and Next\"\r\n                                            )\r\n                                }\r\n                            </Button>\r\n                            <Overlay show={createProjectState.pitchPublishErrorMessageShowed} target={createProjectState.pitchNextStepButtonTarget} placement=\"bottom\">\r\n                                <Popover style={{marginTop: 14}} id=\"publish-popover-bottom\">\r\n                                    <FlexView vAlignContent=\"center\">\r\n                                        {\r\n                                            this.renderPitchPublishErrorMessage()\r\n                                        }\r\n                                        <IconButton\r\n                                            style={{width: 42, height: 42}}  onClick={this.onPopoverErrorMessageClose}>\r\n                                            <CloseIcon fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </Popover>\r\n                            </Overlay>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    (!params.edit || !projectEdited)\r\n                    || (params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT)\r\n                        ?\r\n                        <div\r\n                            style={{position: 'fixed', width: 'auto', height: 'auto', bottom: 0, right: 0, marginRight: isMobile ? 72 : 120, marginBottom: isMobile ? 80 : 100}}>\r\n                            <FlexView column>\r\n                                <div>\r\n                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                        overlay={\r\n                                            <Tooltip id={`tooltip-left`}>Save draft</Tooltip>\r\n                                        }>\r\n                                        <Fab color=\"primary\" size={isMobile ? \"medium\" : \"large\"} onClick={this.onSaveProgressClick} disabled={saveProgress && progressBeingSaved} style={{position: 'absolute',zIndex: 1}}>\r\n                                            <SaveIcon/>\r\n                                        </Fab>\r\n                                    </OverlayTrigger>\r\n                                    {\r\n                                        saveProgress && progressBeingSaved\r\n                                            ?\r\n                                            <CircularProgress thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: -6, left: -6}}/>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </div>\r\n\r\n                                {\r\n                                    params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        <div style={{marginTop: isMobile ? 62 : 72}}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                             overlay={\r\n                                                    <Tooltip id={`tooltip-left`}>Delete this draft</Tooltip>\r\n                                                }>\r\n                                                <Fab size={isMobile ? \"medium\" : \"large\"} onClick={this.onDeleteDraftClick} disabled={draftBeingDeleted} style={{ position: 'absolute', zIndex: 1}}>\r\n                                                    <DeleteIcon color=\"error\"/>\r\n                                                </Fab>\r\n                                            </OverlayTrigger>\r\n                                            {\r\n                                                draftBeingDeleted\r\n                                                    ?\r\n                                                    <CircularProgress color=\"secondary\" thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: isMobile ? 56 : 66, left: -6}}/>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </div>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n                        </div>\r\n                        :\r\n                        null\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\n/**\r\n * This component shows the uploading progress\r\n */\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupUserName,\r\n\r\n            open,\r\n            uploadFileMode,\r\n            uploadFileProgress,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            params,\r\n            projectEdited, // pass in if in edit mode\r\n            projectID,\r\n            currentUser,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog maxWidth=\"sm\" fullWidth open={open} {...other}>\r\n                <DialogTitle disableTypography={true}>\r\n                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">\r\n                        {\r\n                            uploadFileMode === UPLOAD_DONE_MODE\r\n                                ?\r\n                                \"Congratulations!\"\r\n                                :\r\n                                \"You are almost done...\"\r\n                        }\r\n                    </Typography>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <Typography variant=\"body1\" align=\"left\">\r\n                            {\r\n                                uploadFileMode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please stay tuned while we are publishing your pitch\"\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Typography>\r\n                        <FlexView column marginBottom={20}>\r\n                            {\r\n                                this.renderUploadFileMode()\r\n                            }\r\n                            {\r\n                                uploadFileMode === UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <ProgressBar style={{marginTop: 25}} striped variant=\"success\" now={uploadFileProgress} label={`${parseInt(uploadFileProgress)}%`}/>\r\n                            }\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                {\r\n                    uploadFileMode !== UPLOAD_DONE_MODE\r\n                        ?\r\n                        null\r\n                        :\r\n                        <DialogActions>\r\n                            <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20} marginRight={20} marginLeft={20}>\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.PROJECT_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":projectID\", projectID)\r\n                                            :\r\n                                            ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectID)\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{ width: \"100%\", marginRight: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}>\r\n                                        {\r\n                                            params.edit && projectEdited\r\n                                                ?\r\n                                                (\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        \"View submitted offer\"\r\n                                                        :\r\n                                                        \"View updated offer\"\r\n                                                )\r\n                                                :\r\n                                                \"View submitted offer\"\r\n                                        }\r\n                                    </Button>\r\n                                </NavLink>\r\n                                <NavLink\r\n                                    to={\r\n                                        currentUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                :\r\n                                                `${ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                            :\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    `${ROUTES.ADMIN.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                    :\r\n                                                    `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                :\r\n                                                \"\"\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{width: \"100%\", marginLeft: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}> Go back to your dashboard</Button>\r\n                                </NavLink>\r\n                            </FlexView>\r\n                        </DialogActions>\r\n                }\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    renderUploadFileMode = () => {\r\n\r\n        const {\r\n            groupUserName,\r\n            uploadFileMode,\r\n            params,\r\n            projectEdited,\r\n            currentUser\r\n        } = this.props;\r\n\r\n        switch (uploadFileMode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading pitch cover</Typography>\r\n                );\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading pitch supporting documents</Typography>\r\n                );\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\"  align=\"left\"\r\n                    >Uploading pitch presentation document</Typography>\r\n                );\r\n            case UPLOAD_REALTIME_DB:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Finalizing</Typography>\r\n                );\r\n            case UPLOAD_DONE_MODE: {\r\n                if (params.edit && projectEdited) {\r\n                    if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your offer has been successfully updated.</Typography>;\r\n                    } else if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                            {\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and publish it.\"\r\n                            }\r\n                        </Typography>;\r\n                    } else {\r\n                        return <FlexView column>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                {\r\n                                    \"Your offer has been uploaded.\\n\" +\r\n                                    \"It will not be published until the group administrator has approved\" +\r\n                                    \" it.\\n\" +\r\n                                    \"You will be notified once approved.\\n\"\r\n                                }\r\n                            </Typography>\r\n                            <br/>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Invite investors to register and view your pitch with the following link:</Typography>\r\n                            <br/>\r\n                            <Box border={1} bgcolor={colors.gray_100} padding=\"6px\">\r\n                                <CustomLink url={Routes.constructSignUpRoute(groupUserName)} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"a\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">{process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}</Typography>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </FlexView>;\r\n                    }\r\n                } else {\r\n                    return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                        {/** Note: This is unnecessary --> Consider removing it. */}\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and make it go live.\"\r\n                                :\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"It will not be published until the group administrator has approved it.\\n\" +\r\n                                \"You will be notified once approved.\"\r\n                        }\r\n                    </Typography>;\r\n                }\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreatePitchPageMain);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    file_drop_zone: {\r\n        padding: 12,\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Image, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Divider, Paper, Typography} from '@material-ui/core';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport LetterAvatar from '../../shared-components/profile/LetterAvatar';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from '../../redux-store/actions/investorSelfCertificationAgreementsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n        // Investor self-certification agreement (for investors only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement())\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass ProfilePageViewOnly extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            userToBeViewed: null,\r\n            userToBeViewedLoaded: false,\r\n\r\n            userToBeViewedInvited: null,\r\n            userToBeViewedInvitedLoaded: false,\r\n\r\n            loadingUserToBeViewed: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.USER_PROFILE : ROUTES.USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            currentUser,\r\n            currentUserLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded,\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        if (!currentUserLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser) {\r\n            if (!userToBeViewedLoaded && !userToBeViewedInvitedLoaded && !loadingUserToBeViewed) {\r\n                this.setState({\r\n                    userToBeViewedLoaded: true,\r\n                    userToBeViewedInvitedLoaded: true,\r\n                    loadingUserToBeViewed: false\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.loadUserToBeViewedProfile();\r\n\r\n        // if user has been set\r\n        if (userToBeViewed) {\r\n            if (userToBeViewed.type === DB_CONST.TYPE_INVESTOR) {\r\n                investorSelfCertificationAgreement_setUser(userToBeViewed.id);\r\n            }\r\n        }\r\n\r\n        // if user id for reference in self-certification agreement has been set\r\n        if (investorSelfCertificationAgreement_userID) {\r\n            // if self-certification agreement has not been loaded\r\n            if (!investorSelfCertificationAgreementLoaded\r\n                && !investorSelfCertificationAgreementBeingLoaded\r\n                && userToBeViewed.type === DB_CONST.TYPE_INVESTOR\r\n            ) {\r\n                loadInvestorSelfCertificationAgreement();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load profile of the user to be viewed\r\n     */\r\n    loadUserToBeViewedProfile = () => {\r\n\r\n        const {\r\n            userToBeViewed,\r\n            loadingUserToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded\r\n        } = this.state;\r\n\r\n        if (!userToBeViewed && !loadingUserToBeViewed && !userToBeViewedLoaded && !userToBeViewedInvitedLoaded) {\r\n            this.setState({\r\n                loadingUserToBeViewed: true,\r\n                userToBeViewedLoaded: false,\r\n                userToBeViewedInvitedLoaded: false\r\n            });\r\n\r\n            // this id can be wither official user id or invited id (pass invited id if the user has not registered)\r\n            // Note: this id can be official id or invited id\r\n            // if the user has registered, this id is an official id. Otherwise, it is the invited id\r\n            const userToBeViewedID = this.props.match.params.userID;\r\n\r\n            // get profile of the user to be viewed\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeViewedID)\r\n                .then(user => {\r\n                    this.setState({\r\n                        userToBeViewed: user,\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                });\r\n\r\n            // get the invited profile of this user\r\n            // first call --> assume this id is an official id\r\n            realtimeDBUtils\r\n                .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_OFFICIAL_ID)\r\n                .then(invitedUser => {\r\n                    this.setState({\r\n                        userToBeViewedInvited: invitedUser[0],\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedInvitedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // no invited user with the official id found\r\n                    // second call --> this id is an invited id\r\n                    realtimeDBUtils\r\n                        .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_INVITED_ID)\r\n                        .then(invitedUser => {\r\n                            this.setState({\r\n                                userToBeViewedInvited: invitedUser[0],\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            // if this error happens --> this id is non-sense\r\n                            this.setState({\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n\r\n            userToBeViewedInvited,\r\n            userToBeViewedInvitedLoaded,\r\n\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !currentUserLoaded\r\n            || !userToBeViewedLoaded\r\n            || !userToBeViewedInvitedLoaded\r\n            || loadingUserToBeViewed\r\n        ) {\r\n            return (\r\n                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !currentUser) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (!userToBeViewed) {\r\n            // user was invited but not yet registered\r\n            if (userToBeViewedInvited) {\r\n                return (\r\n                    <Container fluid style={{padding: 0}}>\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography align=\"center\" variant=\"h5\" style={{marginTop: 35}}>\r\n                                    {`${userToBeViewedInvited.title} ${userToBeViewedInvited.firstName} ${userToBeViewedInvited.lastName} has been invited by ${userToBeViewedInvited.Invitor.displayName} but not yet registered.`}\r\n                                </Typography>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                );\r\n            } else {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0, backgroundColor: colors.gray_100, height: \"100%\", minHeight: \"100vh\", paddingTop: 50, paddingBottom: 100, paddingLeft: 12, paddingRight: 12}}>\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <Paper elevation={1} style={{padding: 15}}>\r\n                            <Row noGutters>\r\n                                <Col xs={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                        {\r\n                                            !userToBeViewed.profilePicture\r\n                                            || (\r\n                                                userToBeViewed.profilePicture\r\n                                                && userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={userToBeViewed.firstName} lastName={userToBeViewed.lastName} width={150} height={150} textVariant=\"h4\"/>\r\n                                                :\r\n                                                <FlexView width={156} height={156}>\r\n                                                    <Image roundedCircle thumbnail src={ userToBeViewed.profilePicture[userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url} style={{width: \"100%\", maxHeight: 156, objectFit: \"contain\"}}/>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col xs={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                    <FlexView column vAlignContent=\"center\" hAlignContent=\"center\" height=\"100%\" marginTop={10} marginBottom={10}>\r\n                                        <Typography align=\"center\" variant=\"h6\">\r\n                                            {`${userToBeViewed.title} ${userToBeViewed.firstName} ${userToBeViewed.lastName}`}\r\n                                        </Typography>\r\n                                        {\r\n                                            this.renderUserStatus(userToBeViewedInvited)\r\n                                        }\r\n                                        <FlexView column marginTop={18} hAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">{`Email: ${userToBeViewed.email}`}</Typography>\r\n                                            {\r\n                                                userToBeViewed.hasOwnProperty('linkedin') && userToBeViewed.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={userToBeViewed.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64, height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Paper>\r\n\r\n                        <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                            {\r\n                                !userToBeViewed.BusinessProfile\r\n                                    ?\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">Business profile has not been uploaded.</Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    :\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15}>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\"> Company name:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.companyName}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Registration number:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.registrationNo}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Directors:&nbsp;&nbsp;\r\n                                                <ul\r\n                                                    style={{marginTop: 8}}>\r\n                                                    {\r\n                                                        userToBeViewed.BusinessProfile.directors.map((director, index) => (\r\n                                                            <li key={index}>\r\n                                                                {director}\r\n                                                            </li>\r\n                                                        ))\r\n                                                    }\r\n                                                </ul>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Business sector:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.sector}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Registered office:&nbsp;&nbsp;\r\n                                                <br/>\r\n                                                <br/>\r\n                                                {userToBeViewed.BusinessProfile.registeredOffice.address1.toUpperCase()}\r\n                                                <br/>\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.registeredOffice.address2 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.registeredOffice.address2.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.registeredOffice.address3 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.registeredOffice.address3.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {userToBeViewed.BusinessProfile.registeredOffice.townCity.toUpperCase()}, {userToBeViewed.BusinessProfile.registeredOffice.postcode.toUpperCase()}\r\n                                                <br/>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Trading address:&nbsp;&nbsp;\r\n                                                <br/>\r\n                                                <br/>\r\n                                                {userToBeViewed.BusinessProfile.tradingAddress.address1.toUpperCase()}\r\n                                                <br/>\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.tradingAddress.address2 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.tradingAddress.address2.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.tradingAddress.address3 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.tradingAddress.address3.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {userToBeViewed.BusinessProfile.tradingAddress.townCity.toUpperCase()}, {userToBeViewed.BusinessProfile.tradingAddress.postcode.toUpperCase()}\r\n                                                <br/>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Company Website:&nbsp;&nbsp;\r\n                                                <a href={userToBeViewed.BusinessProfile.companyWebsite} rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                                    <b>{userToBeViewed.BusinessProfile.companyWebsite}</b>\r\n                                                </a>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <FlexView column>\r\n                                                <Typography variant=\"subtitle1\" align=\"left\">Introduction video\r\n                                                </Typography>\r\n                                                <FlexView marginTop={20} marginBottom={20} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                    {\r\n                                                        !userToBeViewed.BusinessProfile.video\r\n                                                        || (\r\n                                                            userToBeViewed.BusinessProfile.video\r\n                                                            && userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed')) === -1\r\n                                                        )\r\n                                                            ?\r\n                                                            <Typography align=\"center\" variant=\"subtitle1\" color=\"textSecondary\">No introduction video available.</Typography>\r\n                                                            :\r\n                                                            <ReactPlayer\r\n                                                                url={\r\n                                                                    userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].url\r\n                                                                }\r\n                                                                playsinline\r\n                                                                width=\"100%\"\r\n                                                                height={userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].storageID === \"\" ? 360 : \"auto\"}\r\n                                                                playing={false}\r\n                                                                controls={true}/>\r\n                                                    }\r\n                                                </FlexView>\r\n                                                <Divider className={css(styles.divider_style)}/>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                            }\r\n                        </Paper>\r\n\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && userToBeViewed.type === DB_CONST.TYPE_INVESTOR\r\n                                ?\r\n                                <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Self-certification agreement</Typography>\r\n                                        <FlexView column marginTop={25} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            {\r\n                                                !investorSelfCertificationAgreement\r\n                                                    ?\r\n                                                    <Typography align=\"center\" variant=\"body1\">This investor has not completed their self certification.</Typography>\r\n                                                    :\r\n                                                    <Typography align=\"center\" variant=\"body1\"> This investor has agreed to the statement of <b>{investorSelfCertificationAgreement.type === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT ? \"High net worth investor \" : \"Self-certified sophisticated investor \"}</b> on {utils.dateInReadableFormat(investorSelfCertificationAgreement.agreedDate)}.</Typography>\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Paper>\r\n                                :\r\n                                null\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the current status of the to-be-viewed user's profile\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderUserStatus = invitedUser => {\r\n        let statusMessage = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        if (invitedUser.status) {\r\n            if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                statusMessage.msg = \"Official Issuer of Invest West\";\r\n                statusMessage.color = \"primary\";\r\n            } else {\r\n                statusMessage.msg = \"Official Investor of Invest West\";\r\n                statusMessage.color = \"primary\";\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color={statusMessage.color}>{statusMessage.msg}</Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageViewOnly);\r\n\r\nconst styles = StyleSheet.create({\r\n    divider_style: {\r\n        marginTop: 12,\r\n        marginBottom: 12\r\n    }\r\n});","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from '@material-ui/core';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPledgeVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl fullWidth >\r\n                <FormHelperText className={css(sharedStyles.black_text)} style={{ marginBottom: 6 }} >\r\n                    Select pledge visibility\r\n                </FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                groupProperties\r\n                                    ?\r\n                                    groupProperties.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput labelWidth={0} name=\"projectVisibilitySetting\" />\r\n                    }\r\n                >\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PUBLIC} >\r\n                        {`Public (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full pledge will be visible to all Invest West users)`}\r\n                    </MenuItem>\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED} >\r\n                        {`Restricted (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this pledge will be visible to all Invest West users. Only members of your group will see the full pledge)`}\r\n                    </MenuItem>\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PRIVATE} >\r\n                        {`Private (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        } \r\n                        Only members of this group will see this pledge)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPledgeVisibility);\r\n\r\n","import {\r\n    CREATE_PLEDGE_STATUS_INVALID_DATE,\r\n    CREATE_PLEDGE_STATUS_INVALID_FUND,\r\n    CREATE_PLEDGE_STATUS_MISSING_FIELDS,\r\n    CREATE_PLEDGE_STATUS_VALID,\r\n} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nexport const TOGGLE_CREATE_PLEDGE_DIALOG = 'TOGGLE_CREATE_PLEDGE_DIALOG';\r\nexport const toggleCreatePledgeDialog = () => {\r\n    return {\r\n        type: TOGGLE_CREATE_PLEDGE_DIALOG\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_SET_PROJECT = 'CREATE_PLEDGE_DIALOG_SET_PROJECT';\r\nexport const setProject = (project) => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_SET_PROJECT,\r\n        project: project\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED';\r\nexport const handleInputChanged = (event) => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED';\r\nexport const handleDateChanged = date => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED,\r\n        date\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED = 'CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED';\r\nexport const createPledge = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            project,\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes\r\n        } = getState().manageCreatePledgeDialog;\r\n\r\n        // when a group admin creates a pledge, they will have the option to set the project visibility again\r\n        const projectVisibilitySetting = getState().manageSelectProjectVisibility.projectVisibilitySetting;\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // check if all the fields in creating primary offer dialog have been filled\r\n        if (expiredDate === null) {\r\n            dispatch({\r\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                status: CREATE_PLEDGE_STATUS_MISSING_FIELDS\r\n            });\r\n        } else {\r\n            if (isNaN(expiredDate)\r\n                ||\r\n                (expiredDate && (expiredDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                dispatch({\r\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                    status: CREATE_PLEDGE_STATUS_INVALID_DATE\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (postMoneyValuation.trim().length > 0\r\n                && !utils.getNumberFromInputString(postMoneyValuation)\r\n            ) {\r\n                dispatch({\r\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                    status: CREATE_PLEDGE_STATUS_INVALID_FUND\r\n                });\r\n                return;\r\n            }\r\n\r\n            dispatch({\r\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                status: CREATE_PLEDGE_STATUS_VALID\r\n            });\r\n\r\n            const primaryOfferObj = {\r\n                status: DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING,\r\n                postMoneyValuation:\r\n                    postMoneyValuation.trim().length === 0\r\n                        ?\r\n                        null\r\n                        :\r\n                        utils.getNumberFromInputString(postMoneyValuation)\r\n                ,\r\n                expiredDate: expiredDate,\r\n                extraNotes: extraNotes.trim().length === 0 ? null : extraNotes\r\n            };\r\n\r\n            let shouldSendNotificationToIssuer = false;\r\n            // if the issuerID returns an issuer and the offer was created by a group admin\r\n            // and the group admin is creating a pledge for this offer\r\n            // then we will notify the issuer that their offer has gone to the pledge phase and is ready to\r\n            // receive pledges from investor BECAUSE the pledge will not be double checked, it will go straight to\r\n            // live when created by a group admin.\r\n            if (project.issuer.type === DB_CONST.TYPE_ISSUER\r\n                && project.hasOwnProperty('createdByGroupAdmin')\r\n                && currentUser.type === DB_CONST.TYPE_ADMIN\r\n            ) {\r\n                shouldSendNotificationToIssuer = true;\r\n            }\r\n\r\n            let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n            projectBeforeUpdating.issuer = null;\r\n            projectBeforeUpdating.group = null;\r\n            projectBeforeUpdating.pledges = null;\r\n\r\n            let updatedProject = JSON.parse(JSON.stringify(project));\r\n            updatedProject.issuer = null;\r\n            updatedProject.group = null;\r\n            updatedProject.pledges = null;\r\n\r\n            updatedProject.status =\r\n                // if an admin is creating the pledge,\r\n                // then let it go live directly\r\n                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                    ?\r\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                    :\r\n                    // if an issuer is creating the pledge,\r\n                    // then let the admin check first\r\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n            updatedProject.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED;\r\n            updatedProject.PrimaryOffer = primaryOfferObj;\r\n            // if projectVisibilitySetting = -1, then go with the previous value of visibility\r\n            updatedProject.visibility =\r\n                projectVisibilitySetting === -1 ? projectBeforeUpdating.visibility : projectVisibilitySetting;\r\n\r\n            // create primary offer node in the project\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(updatedProject)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_PLEDGE_DIALOG\r\n                    });\r\n\r\n                    // track issuer's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE.replace(\"%project%\", updatedProject.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                            value: {\r\n                                before: projectBeforeUpdating,\r\n                                after: updatedProject\r\n                            }\r\n                        });\r\n\r\n                    if (shouldSendNotificationToIssuer) {\r\n                        realtimeDBUtils\r\n                            .sendNotification({\r\n                                title: project.projectName,\r\n                                message: \"Congratulations! Your investment opportunity has been published. Investors can now pledge.\",\r\n                                userID: project.issuerID,\r\n                                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    TextField,\r\n    Toolbar,\r\n    Typography,\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {KeyboardDatePicker} from '@material-ui/pickers';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\n\r\nimport SelectPledgeVisibility from '../select-pledge-visibility/SelectPledgeVisibility';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles, {SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as creatPledgeDialogActions from '../../redux-store/actions/createPledgeDialogActions';\r\n\r\nexport const CREATE_PLEDGE_STATUS_NONE = 0;\r\nexport const CREATE_PLEDGE_STATUS_VALID = 1;\r\nexport const CREATE_PLEDGE_STATUS_MISSING_FIELDS = 2;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_FUND = 3;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_DATE = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentUser: state.auth.user,\r\n\r\n        open: state.manageCreatePledgeDialog.open,\r\n        project: state.manageCreatePledgeDialog.project,\r\n        postMoneyValuation: state.manageCreatePledgeDialog.postMoneyValuation,\r\n        expiredDate: state.manageCreatePledgeDialog.expiredDate,\r\n        extraNotes: state.manageCreatePledgeDialog.extraNotes,\r\n        createStatus: state.manageCreatePledgeDialog.createStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreatePledgeDialog: () => dispatch(creatPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        handleInputChanged: (event) => dispatch(creatPledgeDialogActions.handleInputChanged(event)),\r\n        handleDateChanged: (date) => dispatch(creatPledgeDialogActions.handleDateChanged(date)),\r\n        createPledge: () => dispatch(creatPledgeDialogActions.createPledge())\r\n    }\r\n};\r\n\r\nclass CreatePledgeDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            currentUser,\r\n\r\n            project,\r\n\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes,\r\n            createStatus,\r\n\r\n            toggleCreatePledgeDialog,\r\n            handleInputChanged,\r\n            handleDateChanged,\r\n            createPledge,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                fullScreen\r\n                onClose={toggleCreatePledgeDialog}\r\n                TransitionComponent={\r\n                    SlideTransitionUp\r\n                }\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <AppBar elevation={0} >\r\n                        <Toolbar>\r\n                            <IconButton color=\"inherit\" onClick={toggleCreatePledgeDialog} aria-label=\"Close\" >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                            <FlexView marginLeft={10} >\r\n                                <Typography variant=\"h6\" color=\"inherit\">Create pledge</Typography>\r\n                            </FlexView>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Container fluid style={{ marginTop: 40 }} >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} >\r\n\r\n                                {/** Get the project name from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Project name\"\r\n                                    value={!project ? \"\" : project.projectName}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the Total raise from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Total fund needs raising ()\"\r\n                                    value={!project ? \"\" : project.Pitch.totalRaise}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raised amount from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund already raised to date ()\"\r\n                                    value={!project ? \"\" : project.Pitch.amountRaised}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raise required from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund required ()\"\r\n                                    value={!project ? \"\" : project.Pitch.fundRequired}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the investors committed from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Investors committed\"\r\n                                    value={!project ? \"\" : (project.Pitch.investorsCommitted ? project.Pitch.investorsCommitted : \"None\")}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the post money valuation from the pitch and put here */}\r\n                                <TextField\r\n                                    label=\"Post money valuation ()\"\r\n                                    name=\"postMoneyValuation\"\r\n                                    value={postMoneyValuation}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n\r\n                                <FlexView marginTop={15} width=\"100%\" >\r\n                                    <KeyboardDatePicker\r\n                                        autoOk\r\n                                        variant=\"dialog\"\r\n                                        inputVariant=\"outlined\"\r\n                                        label=\"Choose expired date\"\r\n                                        format=\"dd/MM/yyyy\"\r\n                                        minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                        value={expiredDate}\r\n                                        InputAdornmentProps={{position: \"start\"}}\r\n                                        onChange={handleDateChanged}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Some notes if the Issuer wants to add */}\r\n                                <TextField\r\n                                    label=\"Your extra notes\"\r\n                                    value={extraNotes}\r\n                                    name=\"extraNotes\"\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n                            </Col>\r\n\r\n                            {\r\n                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} style={{ marginTop: 10 }} >\r\n                                        <SelectPledgeVisibility/>\r\n                                    </Col>\r\n                            }\r\n\r\n                            <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} style={{ marginTop: 40, marginBottom: 50 }} >\r\n                                <FlexView hAlignContent=\"center\" marginBottom={30} >\r\n                                    {\r\n                                        this.renderCreatePledgeError()\r\n                                    }\r\n                                </FlexView>\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Button\r\n                                        size=\"large\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={createPledge}\r\n                                    >Create pledge</Button>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render error (if has) when the user clicks on the Create button\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderCreatePledgeError = () => {\r\n        const {\r\n            createStatus\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (createStatus) {\r\n            case CREATE_PLEDGE_STATUS_NONE:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_VALID:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_MISSING_FIELDS:\r\n                msg = \"Please fill in all the fields.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_FUND:\r\n                msg = \"Please enter a valid fund.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color=\"error\">{msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.forwardRef(\r\n    (props, ref) => <CreatePledgeDialog {...props} forwardedRef={ref}/>));","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const MANAGE_PLEDGES_TABLE_SET_PROJECT = 'MANAGE_PLEDGES_TABLE_SET_PROJECT';\r\nexport const setProject = project => {\r\n    return (dispatch, getState) => {\r\n        const prevProject = getState().managePledgesTable.project;\r\n        // if the newly set project is actually the same as the one set before\r\n        // do nothing\r\n        if (prevProject && prevProject.id === project.id) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_SET_PROJECT,\r\n            project\r\n        });\r\n    };\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_LOADING_PLEDGES';\r\nexport const MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES';\r\nexport const loadPledges = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            project\r\n        } = getState().managePledgesTable;\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_LOADING_PLEDGES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n            .then(pledges => {\r\n                Promise.all(pledges.map(pledge => {\r\n                    return new Promise((resolve, reject) => {\r\n                        realtimeDBUtils\r\n                            .loadGroupsUserIsIn(pledge.investorID)\r\n                            .then(groupsInvestorIsIn => {\r\n                                pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n                                return resolve(pledges);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    dispatch({\r\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\r\n                        pledges\r\n                    });\r\n                }).catch(error => {\r\n                    dispatch({\r\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\r\n                        pledges: [],\r\n                        error\r\n                    });\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().managePledgesTable.inSearchMode;\r\n        const searchText = getState().managePledgesTable.searchText;\r\n        const pledges = getState().managePledgesTable.pledges;\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: false,\r\n                matchedPledges: []\r\n            });\r\n        } else {\r\n            let matchedPledges = pledges.filter(\r\n                pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n                    || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n            );\r\n            dispatch({\r\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: true,\r\n                matchedPledges\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: MANAGE_PLEDGES_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_INPUT_CHANGED = 'MANAGE_PLEDGES_TABLE_INPUT_CHANGED';\r\nexport const handlePledgesTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const pledges = getState().managePledgesTable.pledges;\r\n\r\n        const searchText = event.target.value;\r\n        let matchedPledges = pledges.filter(\r\n            pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n                || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedPledges\r\n        });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet pledgesListener = null;\r\n\r\nexport const MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED = 'MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED';\r\nexport const startListeningForPledgesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!pledgesListener) {\r\n            const project = getState().managePledgesTable.project;\r\n\r\n            pledgesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.PLEDGES_CHILD)\r\n                .orderByChild('projectID')\r\n                .equalTo(project.id);\r\n\r\n            pledgesListener\r\n                .on('child_added', snapshot => {\r\n                    let pledge = snapshot.val();\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                    if (pledgeIndex === -1) {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(pledge.investorID)\r\n                            .then(investor => {\r\n                                pledge.investor = investor;\r\n\r\n                                realtimeDBUtils\r\n                                    .loadGroupsUserIsIn(pledge.investorID)\r\n                                    .then(groupsInvestorIsIn => {\r\n                                        pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n\r\n                                        dispatch({\r\n                                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                                            pledges: [...pledges, pledge]\r\n                                        });\r\n                                    });\r\n                            });\r\n                    }\r\n                });\r\n\r\n            pledgesListener\r\n                .on('child_changed', snapshot => {\r\n                    let pledge = snapshot.val();\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                    // pledge is in the local list\r\n                    if (pledgeIndex !== -1) {\r\n                        let updatedPledges = [...pledges];\r\n\r\n                        if (pledge.amount !== '') {\r\n                            pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                            pledge.groupsInvestorIsIn = updatedPledges[pledgeIndex].groupsInvestorIsIn;\r\n                            updatedPledges[pledgeIndex] = pledge;\r\n                        }\r\n                        else {\r\n                            updatedPledges.splice(pledgeIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                            pledges: [...updatedPledges]\r\n                        });\r\n                    }\r\n                    // pledge is not in the local list\r\n                    else {\r\n                        if (pledge.amount !== '') {\r\n                            realtimeDBUtils\r\n                                .getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n\r\n                                    realtimeDBUtils\r\n                                        .loadGroupsUserIsIn(pledge.investorID)\r\n                                        .then(groupsInvestorIsIn => {\r\n                                            pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n\r\n                                            dispatch({\r\n                                                type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                                                pledges: [...pledges, pledge]\r\n                                            });\r\n                                        });\r\n                                });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            pledgesListener\r\n                .on('child_removed', snapshot => {\r\n                    let pledgeRemovedID = snapshot.key;\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                    if (pledgeIndex !== -1) {\r\n                        let updatedPledges = pledges;\r\n                        updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                        dispatch({\r\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                            pledges: updatedPledges\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForPledgesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (pledgesListener) {\r\n            pledgesListener.off('child_added');\r\n            pledgesListener.off('child_changed');\r\n            pledgesListener.off('child_removed');\r\n            pledgesListener = null;\r\n        }\r\n    }\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport EmailRepository, {\r\n    ClientEmailTypes,\r\n    ContactPitchOwnerEmailData\r\n} from \"../../../../api/repositories/EmailRepository\";\r\nimport User from \"../../../../models/user\";\r\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ContactPitchOwnerDialogEvents {\r\n    ToggleContactDialog = \"ContactPitchOwnerDialogEvents.ToggleContactDialog\",\r\n    SendingContactEmail = \"ContactPitchOwnerDialogEvents.SendingContactEmail\",\r\n    CompleteSendingContactEmail = \"ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\"\r\n}\r\n\r\nexport interface ContactPitchOwnerDialogAction extends Action {\r\n\r\n}\r\n\r\nexport interface ToggleContactDialogAction extends ContactPitchOwnerDialogAction {\r\n    projectName: string | null;\r\n    projectOwnerEmail: string | null;\r\n}\r\n\r\nexport interface CompleteSendingContactEmailAction extends ContactPitchOwnerDialogAction {\r\n    error?: string;\r\n}\r\n\r\nexport const toggleContactPitchOwnerDialog: ActionCreator<any> = (projectName?: string, projectOwnerEmail?: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ToggleContactDialogAction = {\r\n            type: ContactPitchOwnerDialogEvents.ToggleContactDialog,\r\n            projectName: projectName ?? null,\r\n            projectOwnerEmail: projectOwnerEmail ?? null\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const sendContactEmail: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            projectName,\r\n            projectOwnerEmail,\r\n            sendingContactEmail\r\n        } = getState().ContactPitchOwnerDialogLocalState;\r\n\r\n        if (sendingContactEmail) {\r\n            return;\r\n        }\r\n\r\n        if (!projectName || !projectOwnerEmail) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            currentUser\r\n        } = getState().AuthenticationState;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: ContactPitchOwnerDialogEvents.SendingContactEmail\r\n        });\r\n\r\n        const completeAction: CompleteSendingContactEmailAction = {\r\n            type: ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\r\n        };\r\n\r\n        try {\r\n            const emailInfo: ContactPitchOwnerEmailData = {\r\n                receiver: projectOwnerEmail,\r\n                sender: currentUser.email,\r\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\r\n                projectName: projectName\r\n            };\r\n\r\n            await new EmailRepository().sendEmail({\r\n                emailType: ClientEmailTypes.ContactPitchOwner,\r\n                emailInfo: emailInfo\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {DocumentsDownloadState} from \"./DocumentsDownloadReducer\";\r\nimport {onAcceptRiskWarningClick, onCancelRiskWarningClick, onDocumentClick} from \"./DocumentsDownloadActions\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface DocumentsDownloadProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    documents: PitchDocument[];\r\n    shouldShowRiskWarningOnDownload?: boolean;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => any;\r\n    onAcceptRiskWarningClick: () => any;\r\n    onCancelRiskWarningClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        DocumentsDownloadLocalState: state.DocumentsDownloadLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => dispatch(onDocumentClick(document, shouldShowRiskWarning)),\r\n        onAcceptRiskWarningClick: () => dispatch(onAcceptRiskWarningClick()),\r\n        onCancelRiskWarningClick: () => dispatch(onCancelRiskWarningClick())\r\n    }\r\n}\r\n\r\nclass DocumentsDownload extends Component<DocumentsDownloadProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            documents,\r\n            shouldShowRiskWarningOnDownload,\r\n            DocumentsDownloadLocalState,\r\n            onDocumentClick,\r\n            onAcceptRiskWarningClick,\r\n            onCancelRiskWarningClick\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Invest West\"\r\n            );\r\n\r\n        let riskWarningTextSplits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        return <Box\r\n            marginTop=\"20px\"\r\n        >\r\n            <List>\r\n                {\r\n                    documents.map((document, index) => (\r\n                        document.removed !== undefined && document.removed\r\n                            ? null\r\n                            : <ListItem\r\n                                key={index}\r\n                                button\r\n                                onClick={() => onDocumentClick(document, shouldShowRiskWarningOnDownload ?? false)}\r\n                            >\r\n                                <img\r\n                                    alt=\"Document image\"\r\n                                    src={require(\"../../img/document_icon.png\").default}\r\n                                    width={48}\r\n                                    height={48}\r\n                                />\r\n                                <Box display=\"flex\" flexDirection=\"row\" >\r\n                                    <Typography variant=\"body2\" align=\"left\">{document.fileName}</Typography>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{document.readableSize}</Typography>\r\n                                </Box>\r\n                            </ListItem>\r\n                    ))\r\n                }\r\n            </List>\r\n\r\n            <Dialog\r\n                open={DocumentsDownloadLocalState.openRiskWarningDialog}\r\n                onClose={() => onCancelRiskWarningClick()}\r\n            >\r\n                <DialogTitle>Accept Risk Warning</DialogTitle>\r\n                <DialogContent>\r\n                    <Box marginTop=\"18px\" whiteSpace=\"pre-line\" >\r\n                        <Typography variant=\"body1\" align=\"justify\" >\r\n                            {riskWarningTextSplits[0]}\r\n                            <CustomLink\r\n                                url={Routes.nonGroupRiskWarning}\r\n                                target=\"_blank\"\r\n                                color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                                activeColor=\"none\"\r\n                                activeUnderline={true}\r\n                                component=\"nav-link\"\r\n                                childComponent={\r\n                                    riskWarningTextSplits[1]\r\n                                }\r\n                            />\r\n                            {riskWarningTextSplits[2]}\r\n                        </Typography>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Box display=\"flex\" flexDirection=\"row\" marginRight=\"4px\" marginBottom=\"4px\" >\r\n                        <Button\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onCancelRiskWarningClick()}\r\n                        >Cancel</Button>\r\n                        <Box width=\"14px\" />\r\n                        <Button\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onAcceptRiskWarningClick()}\r\n                        >Accept</Button>\r\n                    </Box>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsDownload);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport OfferRepository, {FetchProjectsOrderByOptions} from \"../../api/repositories/OfferRepository\";\r\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\r\n\r\nexport enum GroupDetailsEvents {\r\n    LoadingData = \"GroupDetailsEvents.LoadData\",\r\n    CompleteLoadingData = \"GroupDetailsEvents.CompleteLoadingData\",\r\n    SendingAccessRequest = \"GroupDetailsEvents.SendingAccessRequest\",\r\n    CompleteSendingAccessRequest = \"GroupDetailsEvents.CompleteSendingAccessRequest\",\r\n    RemovingAccessRequest = \"GroupDetailsEvents.RemovingAccessRequest\",\r\n    CompleteRemovingAccessRequest = \"GroupDetailsEvents.CompleteRemovingAccessRequest\"\r\n}\r\n\r\nexport interface GroupDetailsAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteLoadingDataAction extends GroupDetailsAction {\r\n    group?: GroupProperties;\r\n    members?: InvitedUserWithProfile[];\r\n    offers?: ProjectInstance[];\r\n    accessRequestInstances?: AccessRequestInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface CompleteSendingAccessRequestAction extends GroupDetailsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport interface CompleteRemovingAccessRequestAction extends GroupDetailsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport const loadData: ActionCreator<any> = (groupUserName: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            accessRequestsInstances\r\n        } = getState().GroupDetailsLocalState;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.LoadingData\r\n        });\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        const completeAction: CompleteLoadingDataAction = {\r\n            type: GroupDetailsEvents.CompleteLoadingData\r\n        }\r\n\r\n        if (!currentUser) {\r\n            completeAction.error = \"Unauthenticated user.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (groupUserName === undefined) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const groupResponse = await new GroupRepository().getGroup(groupUserName);\r\n            const group: GroupProperties = groupResponse.data;\r\n\r\n            const membersResponse = await new GroupRepository().fetchGroupMembers(group.anid);\r\n            const members: InvitedUserWithProfile[] = membersResponse.data;\r\n\r\n            const offersResponse = await new OfferRepository().fetchOffers({\r\n                phase: \"all\",\r\n                group: group.anid,\r\n                orderBy: FetchProjectsOrderByOptions.Group\r\n            });\r\n            const offers: ProjectInstance[] = offersResponse.data;\r\n\r\n            const admin: Admin | null = isAdmin(currentUser);\r\n            if (!admin || (admin && !admin.superAdmin)) {\r\n                // user is an issuer, investor, or group admin\r\n                // and access requests have not been fetched\r\n                if (!accessRequestsInstances) {\r\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\r\n                        user: currentUser.id,\r\n                        orderBy: \"user\"\r\n                    });\r\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\r\n                }\r\n            }\r\n\r\n            completeAction.group = group;\r\n            completeAction.members = members;\r\n            completeAction.offers = offers;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const sendAccessRequest: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const group = getState().GroupDetailsLocalState.group;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.SendingAccessRequest\r\n        });\r\n\r\n        const completeAction: CompleteSendingAccessRequestAction = {\r\n            type: GroupDetailsEvents.CompleteSendingAccessRequest\r\n        };\r\n\r\n        if (!group) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, group.anid);\r\n            const accessRequestInstance: AccessRequestInstance = response.data;\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (currentAccessRequestInstances !== undefined) {\r\n                completeAction.updatedAccessRequestInstances = [\r\n                    ...currentAccessRequestInstances,\r\n                    accessRequestInstance\r\n                ];\r\n            } else {\r\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\r\n            }\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeAccessRequest: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const group = getState().GroupDetailsLocalState.group;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.RemovingAccessRequest\r\n        });\r\n\r\n        const completeAction: CompleteRemovingAccessRequestAction = {\r\n            type: GroupDetailsEvents.CompleteRemovingAccessRequest\r\n        };\r\n\r\n        if (!group) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().GroupDetailsLocalState.accessRequestsInstances;\r\n            if (!currentAccessRequestInstances) {\r\n                return dispatch(completeAction);\r\n            }\r\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\r\n                accessRequestInstance => accessRequestInstance.group.anid === group.anid && accessRequestInstance.user.id === currentUser.id);\r\n            if (accessRequestIndex === -1) {\r\n                return dispatch(completeAction);\r\n            }\r\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\r\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\r\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\r\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\r\n\r\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteSendingContactEmailAction,\r\n    ContactPitchOwnerDialogAction,\r\n    ContactPitchOwnerDialogEvents,\r\n    ToggleContactDialogAction\r\n} from \"./ContactPitchOwnerDialogActions\";\r\nimport Error from \"../../../../models/error\";\r\n\r\nexport interface ContactPitchOwnerDialogState {\r\n    projectName: string | null;\r\n    projectOwnerEmail: string | null;\r\n    contactDialogOpen: boolean;\r\n    sendingContactEmail: boolean;\r\n    errorSendingContactEmail?: Error;\r\n}\r\n\r\nconst initialState: ContactPitchOwnerDialogState = {\r\n    projectName: null,\r\n    projectOwnerEmail: null,\r\n    contactDialogOpen: false,\r\n    sendingContactEmail: false\r\n}\r\n\r\nexport const isSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\r\n    return state.sendingContactEmail;\r\n}\r\n\r\nexport const hasErrorSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\r\n    return !state.sendingContactEmail && state.errorSendingContactEmail !== undefined;\r\n}\r\n\r\nconst contactPitchOwnerDialogReducer = (state = initialState, action: ContactPitchOwnerDialogAction) => {\r\n    switch (action.type) {\r\n        case ContactPitchOwnerDialogEvents.ToggleContactDialog:\r\n            const toggleContactDialogAction: ToggleContactDialogAction = action as ToggleContactDialogAction;\r\n            return {\r\n                ...state,\r\n                contactDialogOpen: !state.contactDialogOpen,\r\n                projectName: toggleContactDialogAction.projectName,\r\n                projectOwnerEmail: toggleContactDialogAction.projectOwnerEmail\r\n            }\r\n        case ContactPitchOwnerDialogEvents.SendingContactEmail:\r\n            return {\r\n                ...state,\r\n                sendingContactEmail: true,\r\n                errorSendingContactEmail: undefined\r\n            }\r\n        case ContactPitchOwnerDialogEvents.CompleteSendingContactEmail:\r\n            const completeSendingContactEmailFunction: CompleteSendingContactEmailAction = action as CompleteSendingContactEmailAction;\r\n            return {\r\n                ...state,\r\n                contactDialogOpen: false,\r\n                sendingContactEmail: false,\r\n                errorSendingContactEmail: completeSendingContactEmailFunction.error !== undefined\r\n                    ? {detail: completeSendingContactEmailFunction.error}\r\n                    : state.errorSendingContactEmail\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default contactPitchOwnerDialogReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ContactPitchOwnerDialogState, isSendingContactEmail} from \"./ContactPitchOwnerDialogReducer\";\r\nimport {AnyAction} from \"redux\";\r\nimport {sendContactEmail, toggleContactPitchOwnerDialog} from \"./ContactPitchOwnerDialogActions\";\r\n\r\ninterface ContactPitchOwnerDialogProps {\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n    toggleContactDialog: () => any;\r\n    sendContactEmail: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ContactPitchOwnerDialogLocalState: state.ContactPitchOwnerDialogLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactDialog: () => dispatch(toggleContactPitchOwnerDialog()),\r\n        sendContactEmail: () => dispatch(sendContactEmail())\r\n    }\r\n}\r\n\r\nclass ContactPitchOwnerDialog extends Component<ContactPitchOwnerDialogProps, any> {\r\n    render() {\r\n        const {\r\n            ContactPitchOwnerDialogLocalState,\r\n            toggleContactDialog,\r\n            sendContactEmail\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            open={ContactPitchOwnerDialogLocalState.contactDialogOpen}\r\n            onClose={() => toggleContactDialog()}\r\n        >\r\n            <DialogContent>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Typography variant=\"body1\" align=\"left\">{`We will let the pitch owner know that you would like to find out more.`}</Typography>\r\n                    <Box height=\"20px\"/>\r\n                    <Typography variant=\"body1\" align=\"left\">{`Are you happy for us to share your email address?`}</Typography>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    isSendingContactEmail(ContactPitchOwnerDialogLocalState)\r\n                        ? null\r\n                        : <Button\r\n                            onClick={() => toggleContactDialog()}\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                        >Cancel</Button>\r\n                }\r\n                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={isSendingContactEmail(ContactPitchOwnerDialogLocalState)} onClick={() => sendContactEmail()}>\r\n                    {\r\n                        isSendingContactEmail(ContactPitchOwnerDialogLocalState)\r\n                            ? `Sending email to ${ContactPitchOwnerDialogLocalState.projectOwnerEmail} ...`\r\n                            : \"Yes\"\r\n                    }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactPitchOwnerDialog);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle,\r\n    Divider,\r\n    InputBase,\r\n    Paper,\r\n    Step,\r\n    StepButton,\r\n    StepContent,\r\n    StepLabel,\r\n    Stepper,\r\n    Tab,\r\n    Tabs,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PageNotFound from \"../../shared-components/page-not-found/PageNotFound\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport CreatePledgeDialog from \"../../shared-components/create-pledge-dialog/CreatePledgeDialog\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as pledgesTableActions from \"../../redux-store/actions/pledgesTableActions\";\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from \"../../redux-store/actions/investorSelfCertificationAgreementsActions\";\r\nimport * as createPledgeDialogActions from \"../../redux-store/actions/createPledgeDialogActions\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\nimport \"./ProjectDetails.scss\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport {TYPE_INVESTOR} from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectFailed,\r\n    isProjectInLivePitchPhase,\r\n    isProjectInLivePledgePhase,\r\n    isProjectLive,\r\n    isProjectOwner,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectRejectedToGoLive,\r\n    isProjectSuccessful,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingForPledgeToBeChecked,\r\n    isProjectWaitingForPledgeToBeCreated,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport DocumentsDownload from \"../../shared-components/documents-download/DocumentsDownload\";\r\nimport RiskWarning from \"../../shared-components/risk-warning/RiskWarning\";\r\nimport {toggleContactPitchOwnerDialog} from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions\";\r\nimport ContactPitchOwnerDialog from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialog\";\r\nimport FeedbackSnackbarNew from \"../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {hasAuthenticationError, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\n\r\nconst ADMIN_OFFER_STATES_PUBLISH_PITCH = 0;\r\nconst ADMIN_OFFER_STATES_MOVE_TO_PLEDGE = 1;\r\nconst ADMIN_OFFER_STATES_PUBLISH_PLEDGE = 2;\r\n\r\nconst MAIN_BODY_ADMIN_OFFER_STATES = 0;\r\nconst MAIN_BODY_CAMPAIGN = 1;\r\nconst MAIN_BODY_DOCUMENTS = 2;\r\nconst MAIN_BODY_COMMENTS = 3;\r\nconst MAIN_BODY_NOTES = 4;\r\nconst MAIN_BODY_INVESTORS_PLEDGED = 5; // only available for issuer and admin\r\n\r\nconst MAX_COVER_HEIGHT_IN_MOBILE_MODE = 240;\r\nconst MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE = 550;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        userBeingLoaded: state.auth.userBeingLoaded,\r\n        groupsUserIsIn: state.auth.groupsUserIsIn,\r\n\r\n        // Investor self-certification agreement (for investor only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        pledgesTable_setProject: (project) => dispatch(pledgesTableActions.setProject(project)),\r\n        pledgesTable_stopListeningForPledgesChanged: () => dispatch(pledgesTableActions.stopListeningForPledgesChanged()),\r\n\r\n        createPledgeDialog_toggleDialog: () => dispatch(createPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        createPledgeDialog_setProject: (project) => dispatch(createPledgeDialogActions.setProject(project)),\r\n\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position)),\r\n\r\n        toggleContactPitchOwnerDialog: (projectName, projectOwnerEmail) => dispatch(toggleContactPitchOwnerDialog(projectName, projectOwnerEmail))\r\n    }\r\n};\r\n\r\nclass ProjectDetailsMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.database = firebase.database();\r\n\r\n        // project changed listener\r\n        this.projectListener = null;\r\n        // comments changed listener\r\n        this.commentsListener = null;\r\n        // comments replies changed listener\r\n        this.commentsRepliesListener = null;\r\n        // pledges changed listener\r\n        this.pledgesListener = null;\r\n        // votes changed listener\r\n        this.votesListener = null;\r\n\r\n        this.state = {\r\n            // variables to check if all the data has been loaded or being loaded\r\n            dataLoaded: false,\r\n            dataBeingLoaded: false,\r\n\r\n            investorPledge: null,\r\n            investorPledgeLoaded: false,\r\n\r\n            mainBody: MAIN_BODY_CAMPAIGN,\r\n            adminOfferStatesActiveStep: ADMIN_OFFER_STATES_PUBLISH_PITCH,\r\n\r\n            comments: [],\r\n            commentsLoaded: false,\r\n\r\n            // states for an investor to post a NEW comment\r\n            commentDialogOpen: false,\r\n            commentText: \"\",\r\n            commentSubmitClick: false,\r\n            // ---------------------------------\r\n\r\n            // existing comment of the current investor\r\n            currentComment: null,\r\n            currentCommentText: \"\",\r\n            // -------------------------------------------\r\n\r\n            // available for the issuer/group admins who own the project only\r\n            // allow the owners to reply to the investor's comments\r\n            replyingToComment: null,\r\n            replyText: \"\",\r\n            replyEdited: null,\r\n            // -------------------------------------------\r\n\r\n            // this state is used to capture the change in date when an admin wants to bring\r\n            // an expired pitch back to live\r\n            changedPitchExpiryDate: null,\r\n\r\n            // when an admin wants to send the pitch back to the issuer with some feedback rather than publish it\r\n            addingRejectFeedback: false,\r\n            rejectFeedback: \"\",\r\n            sendingProjectBack: false,\r\n\r\n            // pitch's details\r\n            projectDetail: {\r\n                // the pitch object\r\n                project: null,\r\n                projectLoaded: false,\r\n\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n\r\n                votes: [],\r\n                votesLoaded: false,\r\n\r\n                // the issuer object (the issuer who made this pitch)\r\n                projectIssuer: null,\r\n                projectIssuerLoaded: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty(\"groupUserName\")\r\n            ?\r\n            match.params.groupUserName\r\n            :\r\n            null\r\n        );\r\n        setExpectedAndCurrentPathsForChecking(\r\n            match.params.hasOwnProperty(\"groupUserName\")\r\n                ?\r\n                ROUTES.PROJECT_DETAILS\r\n                :\r\n                ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER, match.path\r\n        );\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n                if (user) {\r\n                    if (!investorSelfCertificationAgreement_userID && user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        investorSelfCertificationAgreement_setUser(user.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if user id for reference in self-certification agreement has been set\r\n            if (investorSelfCertificationAgreement_userID) {\r\n                // if self-certification agreement has not been loaded\r\n                if (!investorSelfCertificationAgreementLoaded\r\n                    && !investorSelfCertificationAgreementBeingLoaded\r\n                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                ) {\r\n                    loadInvestorSelfCertificationAgreement();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n                if (user) {\r\n                    if (!investorSelfCertificationAgreement_userID && user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        investorSelfCertificationAgreement_setUser(user.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if user id for reference in self-certification agreement has been set\r\n            if (investorSelfCertificationAgreement_userID) {\r\n                // if self-certification agreement has not been loaded\r\n                if (!investorSelfCertificationAgreementLoaded\r\n                    && !investorSelfCertificationAgreementBeingLoaded\r\n                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                ) {\r\n                    loadInvestorSelfCertificationAgreement();\r\n                }\r\n            }\r\n\r\n            // attach project changed listener\r\n            if (projectLoaded && project) {\r\n                this.attachProjectChangedListener();\r\n            }\r\n\r\n            this.loadDataWhenUIElementsChange();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            pledgesTable_stopListeningForPledgesChanged\r\n        } = this.props;\r\n\r\n        // detach pitch changed listener\r\n        this.detachProjectChangedListener();\r\n\r\n        // detach listener for votes\r\n        if (this.votesListener) {\r\n            this.votesListener.off(\"child_added\");\r\n            this.votesListener.off(\"child_changed\");\r\n            this.votesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for pledges\r\n        if (this.pledgesListener) {\r\n            this.pledgesListener.off(\"child_added\");\r\n            this.pledgesListener.off(\"child_changed\");\r\n            this.pledgesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for comments\r\n        if (this.commentsListener) {\r\n            this.commentsListener.off(\"child_added\");\r\n            this.commentsListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for comments replies\r\n        if (this.commentsRepliesListener) {\r\n            this.commentsRepliesListener.off(\"child_added\");\r\n            this.commentsRepliesListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for pledges changed in pledges table\r\n        pledgesTable_stopListeningForPledgesChanged();\r\n    }\r\n\r\n    /**\r\n     * This function is used to load data for the whole page\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            user,\r\n            userLoaded,\r\n\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        if (!userLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!user) {\r\n            if (!dataLoaded) {\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        // data is being loaded\r\n        if (dataBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            dataLoaded: false,\r\n            dataBeingLoaded: true\r\n        });\r\n\r\n        // load the requested project\r\n        const projectID = this.props.match.params.projectID;\r\n        realtimeDBUtils\r\n            .loadAParticularProject(projectID)\r\n            .then(project => {\r\n                // track activity for investors only\r\n                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_VIEW,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS.replace(\"%project%\", project.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                        });\r\n                }\r\n\r\n                // set project for the Select component that is used to choose the project visibility\r\n                selectProjectVisibility_setProject(project);\r\n\r\n                this.setState({\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        project: project,\r\n                        projectLoaded: true\r\n                    },\r\n                    mainBody:\r\n                        user.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            user.anid === project.anid\r\n                                ?\r\n                                MAIN_BODY_ADMIN_OFFER_STATES\r\n                                :\r\n                                MAIN_BODY_CAMPAIGN\r\n                            :\r\n                            MAIN_BODY_CAMPAIGN\r\n                    ,\r\n                    adminOfferStatesActiveStep:\r\n                        project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                            ?\r\n                            ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                            :\r\n                            (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED)\r\n                                ?\r\n                                ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                :\r\n                                (project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE)\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                    :\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                });\r\n\r\n                // load votes\r\n                realtimeDBUtils\r\n                    .loadVotes(project.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        this.setState({\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                votes: votes,\r\n                                votesLoaded: true\r\n                            }\r\n                        });\r\n\r\n                        // load pledges\r\n                        realtimeDBUtils\r\n                            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n\r\n                                // if the current user is an investor, check if they pledged this project\r\n                                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                                    let currentUserPledgeIndex = pledges.findIndex(pledge => pledge.investorID === user.id && pledge.amount !== '');\r\n                                    // this investor has pledges this project before\r\n                                    if (currentUserPledgeIndex !== -1) {\r\n                                        this.setState({\r\n                                            investorPledge: pledges[currentUserPledgeIndex]\r\n                                        });\r\n                                    }\r\n                                }\r\n\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: pledges,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n\r\n                                // load the profile of the Issuer or the Group Admin created this project\r\n                                // this user can be the issuer who created the offer themselves\r\n                                // or the group admin who created this offer on behalf of an unknown issuer\r\n                                // or the issuer who got the group admin create this offer for\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(project.issuerID)\r\n                                    .then(projectIssuer => {\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectIssuer: projectIssuer,\r\n                                                projectIssuerLoaded: true\r\n                                            }\r\n                                        });\r\n                                    })\r\n                                    .catch(error => {\r\n                                        this.setState({\r\n                                            dataLoaded: true,\r\n                                            dataBeingLoaded: false,\r\n                                            investorPledgeLoaded: true,\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectLoaded: true, // project is null\r\n                                                projectIssuerLoaded: true, // project issuer is null\r\n                                                votesLoaded: true,\r\n                                                pledgesLoaded: true\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        projectLoaded: true, // project is null\r\n                                        projectIssuerLoaded: true, // project issuer is null\r\n                                        votesLoaded: true,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            dataLoaded: true,\r\n                            dataBeingLoaded: false,\r\n                            investorPledgeLoaded: true,\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                projectLoaded: true, // project is null\r\n                                projectIssuerLoaded: true, // project issuer is null\r\n                                votesLoaded: true,\r\n                                pledgesLoaded: true\r\n                            }\r\n                        });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // error happens when loading the requested project\r\n                // we'll stop the loading process for all others\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Load data when UI elements change\r\n     */\r\n    loadDataWhenUIElementsChange = () => {\r\n        const {\r\n            user,\r\n\r\n            pledgesTable_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            mainBody,\r\n            commentsLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        // attach votes changed listener\r\n        if (votes && votesLoaded && project && projectLoaded) {\r\n            // votes can only happen if the project is in Pitch phase\r\n            if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                if (!this.votesListener) {\r\n                    this.votesListener = this.database\r\n                        .ref(DB_CONST.VOTES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // vote added\r\n                    this.votesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n                            if (voteIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(vote.investorID)\r\n                                    .then(investor => {\r\n                                        vote.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                votes: [...votes, vote]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // vote changed\r\n                    this.votesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n\r\n                                vote.investor = updatedVotes[voteIndex].investor;\r\n                                updatedVotes[voteIndex] = vote;\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // vote removed\r\n                    this.votesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let voteRemovedID = snapshot.key;\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === voteRemovedID);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n                                updatedVotes.splice(voteIndex, 1);\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // attach pledges changed listener\r\n        if (pledges && pledgesLoaded && projectLoaded && project) {\r\n            // pledges can only happen if the project is in Primary offer phase\r\n            if (project.status !== DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_FAILED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            ) {\r\n                if (!this.pledgesListener) {\r\n                    this.pledgesListener = this.database\r\n                        .ref(DB_CONST.PLEDGES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // new pledge added\r\n                    this.pledgesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                            if (pledgeIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(pledge.investorID)\r\n                                    .then(investor => {\r\n                                        pledge.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                pledges: [...pledges, pledge]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // pledge changed\r\n                    this.pledgesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n\r\n                                pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                                updatedPledges[pledgeIndex] = pledge;\r\n\r\n                                const currentPledge = JSON.parse(JSON.stringify(this.state.investorPledge));\r\n\r\n                                this.setState({\r\n                                    investorPledge:\r\n                                    // current pledge is not null\r\n                                        currentPledge !== null\r\n                                            ?\r\n                                            currentPledge.id === pledge.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                currentPledge\r\n                                            :\r\n                                            // current pledge is null\r\n                                            pledge.investorID === user.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                null\r\n                                    ,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: updatedPledges\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // pledge removed\r\n                    this.pledgesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let pledgeRemovedID = snapshot.key;\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n                                updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                                const currentPledge = this.state.investorPledge;\r\n                                if (!currentPledge && currentPledge.id === pledgeRemovedID) {\r\n                                    this.setState({\r\n                                        investorPledge: null,\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    this.setState({\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Pledges tab\r\n        if (mainBody === MAIN_BODY_INVESTORS_PLEDGED) {\r\n            if (project) {\r\n                pledgesTable_setProject(project);\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Comments tab\r\n        if (mainBody === MAIN_BODY_COMMENTS) {\r\n            // if comments have not been loaded yet\r\n            if (!commentsLoaded) {\r\n                // load comments\r\n                realtimeDBUtils\r\n                    .loadComments(project.id)\r\n                    .then(returnedComments => {\r\n\r\n                        realtimeDBUtils\r\n                            .loadCommentsReplies(returnedComments)\r\n                            .then(commentsWithReplies => {\r\n                                // comments loaded with replies\r\n                                this.setState({\r\n                                    comments: [...commentsWithReplies],\r\n                                    commentsLoaded: true\r\n                                });\r\n\r\n                                // attach comments listener\r\n                                if (!this.commentsListener) {\r\n                                    this.commentsListener = this.database\r\n                                        .ref(DB_CONST.COMMENTS_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    // new comment added\r\n                                    this.commentsListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n                                            comment.replies = [];\r\n\r\n                                            // assign comment to currentComment object if it belongs to the current investor\r\n                                            if (comment.commentedBy === user.id) {\r\n                                                const currentComment = this.state.currenComment;\r\n                                                if (!currentComment) {\r\n                                                    this.setState({\r\n                                                        currentComment: comment,\r\n                                                        currentCommentText: comment.comment\r\n                                                    });\r\n                                                }\r\n                                            }\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex === -1) {\r\n                                                realtimeDBUtils\r\n                                                    .getUserBasedOnID(comment.commentedBy)\r\n                                                    .then(user => {\r\n                                                        comment.author = user;\r\n                                                        this.setState({\r\n                                                            comments: [...comments, comment]\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        });\r\n\r\n                                    // comment changed\r\n                                    this.commentsListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex !== -1) {\r\n                                                let updatedComments = [...comments];\r\n                                                comment.author = updatedComments[commentIndex].author;\r\n                                                comment.replies = updatedComments[commentIndex].replies;\r\n\r\n                                                updatedComments[commentIndex] = comment;\r\n\r\n                                                // NOTE: Must explicitly call state here to avoid null from previous state\r\n                                                const currentComment = this.state.currentComment;\r\n\r\n                                                if (currentComment && currentComment.id === comment.id) {\r\n                                                    this.setState({\r\n                                                        comments: updatedComments,\r\n                                                        currentComment: comment\r\n                                                    });\r\n                                                } else {\r\n                                                    this.setState({\r\n                                                        comments: [...updatedComments]\r\n                                                    });\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n\r\n                                // attach comments replies listener\r\n                                if (!this.commentsRepliesListener) {\r\n                                    this.commentsRepliesListener = this.database\r\n                                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex === -1) {\r\n                                                    if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                                        return;\r\n                                                    }\r\n                                                    realtimeDBUtils\r\n                                                        .getUserBasedOnID(reply.repliedBy)\r\n                                                        .then(user => {\r\n                                                            reply.author = user;\r\n                                                            comment.replies = [...comment.replies, reply];\r\n\r\n                                                            comments[correspondingCommentIndex] = comment;\r\n\r\n                                                            this.setState({\r\n                                                                comments: [...comments]\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                        });\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex !== -1) {\r\n                                                    // reply has been deleted\r\n                                                    if (reply.hasOwnProperty(\"deleted\") && reply.deleted === true) {\r\n                                                        // remove reply from the local replies list\r\n                                                        comment.replies.splice(replyIndex, 1);\r\n\r\n                                                        comments[correspondingCommentIndex] = comment;\r\n\r\n                                                        this.setState({\r\n                                                            comments: [...comments]\r\n                                                        });\r\n                                                    }\r\n                                                    // reply is live\r\n                                                    else {\r\n                                                        realtimeDBUtils\r\n                                                            .getUserBasedOnID(reply.repliedBy)\r\n                                                            .then(user => {\r\n                                                                reply.author = comment.replies[replyIndex].author;\r\n                                                                comment.replies[replyIndex] = reply;\r\n\r\n                                                                comments[correspondingCommentIndex] = comment;\r\n\r\n                                                                this.setState({\r\n                                                                    comments: [...comments]\r\n                                                                });\r\n                                                            });\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    commentsLoaded: true\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            commentsLoaded: true\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Vot for pitch function\r\n     *\r\n     * @param voteVal\r\n     */\r\n    handleVotePitch = voteVal => {\r\n        const {\r\n            groupProperties,\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            project,\r\n            votes\r\n        } = this.state.projectDetail;\r\n\r\n        let currentVoteObj = getInvestorVote(votes, user);\r\n        if (currentVoteObj) {\r\n            currentVoteObj.investor = null;\r\n        }\r\n\r\n        let newVoteObj = {};\r\n\r\n        // investor has already voted before or voted and cancelled\r\n        // when an investor cancelled their vote, the vote value will be ''\r\n        if (currentVoteObj) {\r\n\r\n            newVoteObj = JSON.parse(JSON.stringify(currentVoteObj));\r\n\r\n            // the investor cancelled their vote\r\n            if (newVoteObj.voted === '') {\r\n                newVoteObj.voted = voteVal;\r\n            }\r\n            // the investor now clicks to cancel their vote\r\n            else {\r\n                newVoteObj.voted = ''; // update vote to void\r\n            }\r\n\r\n            // update the existing vote\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(newVoteObj.id)\r\n                .update(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: newVoteObj.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: currentVoteObj,\r\n                                after: newVoteObj\r\n                            }\r\n                        });\r\n                });\r\n        }\r\n        // investor has not voted before\r\n        else {\r\n            const id = this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .push()\r\n                .key;\r\n\r\n            newVoteObj.id = id;\r\n            newVoteObj.anid = groupProperties ? groupProperties.anid : null;\r\n            newVoteObj.investorID = user.id;\r\n            newVoteObj.projectID = project.id;\r\n            newVoteObj.voted = voteVal;\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(id)\r\n                .set(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity for first time voting\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: newVoteObj\r\n                        });\r\n\r\n                    // send a notification to notify the issuer\r\n                    realtimeDBUtils\r\n                        .sendNotification({\r\n                            title: \"Someone liked your pitch\",\r\n                            message: \"Congratulations. A new investor has showed interest in your pitch.\",\r\n                            userID: project.issuerID,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                        })\r\n                        .then(() => {\r\n                            // do something\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener for any changes that happen on this pitch\r\n     * Attach listener for any changes that happen on this pitch\r\n     */\r\n    attachProjectChangedListener = () => {\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (this.projectListener === null) {\r\n            this.projectListener = this.database\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id);\r\n\r\n            this.projectListener\r\n                .on(\"value\", snapshot => {\r\n                    const project = snapshot.val();\r\n                    project.group = this.state.projectDetail.project.group;\r\n                    project.issuer = this.state.projectDetail.project.issuer;\r\n\r\n                    this.setState({\r\n                        projectDetail: {\r\n                            ...this.state.projectDetail,\r\n                            project: project,\r\n                        },\r\n                        adminOfferStatesActiveStep:\r\n                            project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                ?\r\n                                ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                                :\r\n                                project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                    :\r\n                                    project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED\r\n                                    || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                        ?\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                        :\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                    });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Detach changes listener for this pitch\r\n     */\r\n    detachProjectChangedListener = () => {\r\n        if (this.projectListener) {\r\n            this.projectListener.off(\"value\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked (download it)\r\n     *\r\n     * @param downloadURL\r\n     */\r\n    handleDocumentClick = downloadURL => {\r\n        window.open(downloadURL, \"_blank\");\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go live or not\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoToPledgePhaseDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING\r\n            && project.Pitch.status !== DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoToPledgePhaseDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectPledgeGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectPledgeGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the main body tab changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    handleMainBodyTabChanged = (event, value) => {\r\n        this.setState({\r\n            mainBody: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post a comment button clicked (open a dialog for the Investors to write their comment)\r\n     */\r\n    handlePostACommentClick = () => {\r\n        this.setState({\r\n            commentDialogOpen: true\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the comment dialog is closed\r\n     */\r\n    handleCloseCommentDialog = () => {\r\n        this.setState({\r\n            commentDialogOpen: false,\r\n            commentText: '',\r\n            commentSubmitClick: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    handleTextChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    handleDateChanged = date => {\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                changedPitchExpiryDate: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            changedPitchExpiryDate:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle when the Investor clicks to submit their comment\r\n     */\r\n    handleSubmitCommentClick = () => {\r\n        const {\r\n            groupProperties,\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            commentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        this.setState({\r\n            commentSubmitClick: true\r\n        });\r\n\r\n        if (commentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const id = this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const comment = {\r\n            id,\r\n            commenterANID: groupProperties ? groupProperties.anid : null,\r\n            projectID: project.id,\r\n            commentedBy: user.id,\r\n            status: DB_CONST.COMMENT_STATUS_POSTED,\r\n            commentedDate: utils.getCurrentDate(),\r\n            comment: commentText\r\n        };\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(id)\r\n            .set(comment)\r\n            .then(() => {\r\n                // track investor's activity for posting a new comment\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: comment\r\n                    });\r\n\r\n                // send a notification to notify the issuer\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: \"Someone commented on your pitch\",\r\n                        message: \"An investor has commented on your pitch. Go and see what they said.\",\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                    .then(() => {\r\n                        this.handleCloseCommentDialog();\r\n                    })\r\n                    .catch(error => {\r\n                        this.handleCloseCommentDialog();\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment added.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                this.handleCloseCommentDialog();\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not add comment.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) cancels the update for their comment\r\n     */\r\n    handleCancelUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            currentCommentText: !currentComment.comment ? '' : currentComment.comment\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) submits the update for their comment\r\n     */\r\n    handleSubmitUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment,\r\n            currentCommentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (currentCommentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        let newComment = JSON.parse(JSON.stringify(currentComment));\r\n        newComment.status = DB_CONST.COMMENT_STATUS_EDITED;\r\n        newComment.comment = currentCommentText;\r\n        newComment.commentedDate = utils.getCurrentDate();\r\n        newComment.replies = null;\r\n        newComment.author = null;\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(newComment.id)\r\n            .update(newComment)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentComment.commentedBy,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: currentComment.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: {\r\n                            before: JSON.parse(JSON.stringify(currentComment)),\r\n                            after: newComment\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment updated.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle the input area to allow the project's owners to reply to investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    handleToggleReplyToComment = (comment, replyEdited) => {\r\n        this.setState({\r\n            replyingToComment: comment,\r\n            replyText: replyEdited ? replyEdited.text : '',\r\n            replyEdited\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    handleSubmitCommentReply = () => {\r\n        const {\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (!replyEdited) {\r\n            const commentReply = {\r\n                text: replyText,\r\n                repliedDate: utils.getCurrentDate(),\r\n                projectID: project.id,\r\n                commentID: replyingToComment.id,\r\n                repliedBy: user.id,\r\n                status: DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .postCommentReply(commentReply)\r\n                .then(replyID => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                ...commentReply,\r\n                                id: replyID\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply added.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not add reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        } else {\r\n            let replyBeforeUpdating = JSON.parse(JSON.stringify(replyEdited));\r\n            replyBeforeUpdating.author = null\r\n\r\n            let replyAfterUpdating = JSON.parse(JSON.stringify(replyBeforeUpdating));\r\n            replyAfterUpdating.text = replyText;\r\n            replyAfterUpdating.status = DB_CONST.COMMENT_REPLY_STATUS_EDITED;\r\n            replyAfterUpdating.repliedDate = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .updateCommentReply(replyAfterUpdating)\r\n                .then(() => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyAfterUpdating.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: replyBeforeUpdating,\r\n                                after: replyAfterUpdating\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply updated.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not update reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    handleDeleteCommentReply = reply => {\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .deleteCommentReply(reply.id)\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                        interactedObjectID: reply.id,\r\n                        activitySummary: realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT\r\n                            .replace(\"%projectName%\", project.projectName)\r\n                        ,\r\n                        action: ROUTES\r\n                            .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                            .replace(\":projectID\", project.id)\r\n                        ,\r\n                        value: {\r\n                            before: {\r\n                                ...reply,\r\n                                author: null\r\n                            },\r\n                            after: {\r\n                                ...reply,\r\n                                author: null,\r\n                                deleted: true\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Reply deleted.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not delete reply.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Offer states click to change active step\r\n     *\r\n     * @param step\r\n     */\r\n    handleAdminOfferStatesStepClick = step => {\r\n        this.setState({\r\n            adminOfferStatesActiveStep: step\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Bring pitch back to live again\r\n     *\r\n     * @returns {Promise<void>}\r\n     */\r\n    bringPitchBackToLive = async () => {\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            changedPitchExpiryDate\r\n        } = this.state;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await realtimeDBUtils\r\n                .bringPitchBackToLive({\r\n                    project: JSON.parse(JSON.stringify(project)),\r\n                    newPitchExpiryDate: changedPitchExpiryDate\r\n                });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Pitch is now live again.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            // handle error\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't update pitch.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.setState({\r\n            addingRejectFeedback: !this.state.addingRejectFeedback,\r\n            rejectFeedback: \"\"\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = async () => {\r\n        const {\r\n            projectDetail,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (rejectFeedback.trim().length === 0 || sendingProjectBack) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sendingProjectBack: true\r\n        });\r\n\r\n        try {\r\n            // send project back to the issuer\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendProjectBackToIssuerRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        projectID: projectDetail.project.id,\r\n                        feedback: rejectFeedback\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.setState({\r\n                sendingProjectBack: false\r\n            });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Pitch has been sent back.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't send offer back.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            isMobile,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n            groupsUserIsIn,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n\r\n            projectVisibilitySetting,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            commentDialogOpen,\r\n            commentText,\r\n            commentSubmitClick,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || isAuthenticating(AuthenticationState)) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || hasAuthenticationError(AuthenticationState)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <ProjectDetails\r\n                    AuthenticationState={this.props.AuthenticationState}\r\n                    groupUserName={groupUserName}\r\n                    groupProperties={groupProperties}\r\n                    isMobile={isMobile}\r\n                    user={user}\r\n                    userLoaded={userLoaded}\r\n                    groupsUserIsIn={groupsUserIsIn}\r\n                    investorSelfCertificationAgreement={investorSelfCertificationAgreement}\r\n                    mainBody={mainBody}\r\n                    adminOfferStatesActiveStep={adminOfferStatesActiveStep}\r\n                    comments={comments}\r\n                    commentsLoaded={commentsLoaded}\r\n                    currentComment={currentComment}\r\n                    currentCommentText={currentCommentText}\r\n                    replyingToComment={replyingToComment}\r\n                    replyText={replyText}\r\n                    replyEdited={replyEdited}\r\n                    changedPitchExpiryDate={changedPitchExpiryDate}\r\n                    addingRejectFeedback={addingRejectFeedback}\r\n                    rejectFeedback={rejectFeedback}\r\n                    sendingProjectBack={sendingProjectBack}\r\n                    project={project}\r\n                    projectLoaded={projectLoaded}\r\n                    votes={votes}\r\n                    votesLoaded={votesLoaded}\r\n                    pledges={pledges}\r\n                    pledgesLoaded={pledgesLoaded}\r\n                    investorPledge={investorPledge}\r\n                    investorPledgeLoaded={investorPledgeLoaded}\r\n                    projectIssuer={projectIssuer}\r\n                    projectIssuerLoaded={projectIssuerLoaded}\r\n                    projectVisibilitySetting={projectVisibilitySetting}\r\n                    onVote={this.handleVotePitch}\r\n                    onDocumentClick={this.handleDocumentClick}\r\n                    // only available for admins ----------------------------\r\n                    onMakeProjectGoLiveDecision={this.handleMakeProjectGoLiveDecision}\r\n                    onMakeProjectGoToPledgePhaseDecision={this.handleMakeProjectGoToPledgePhaseDecision}\r\n                    onMakeProjectPledgeGoLiveDecision={this.handleMakeProjectPledgeGoLiveDecision}\r\n                    //-------------------------------------------------------\r\n                    onTabChanged={this.handleMainBodyTabChanged}\r\n                    onPostACommentClick={this.handlePostACommentClick}\r\n                    onTextChanged={this.handleTextChanged}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCancelUpdateCurrentComment={this.handleCancelUpdateCurrentComment}\r\n                    onSubmitUpdateCurrentComment={this.handleSubmitUpdateCurrentComment}\r\n                    onToggleReplyToComment={this.handleToggleReplyToComment}\r\n                    onSubmitCommentReply={this.handleSubmitCommentReply}\r\n                    onDeleteCommentReply={this.handleDeleteCommentReply}\r\n                    onAdminOfferStatesStepClick={this.handleAdminOfferStatesStepClick}\r\n                    createPledgeDialog_toggleDialog={createPledgeDialog_toggleDialog}\r\n                    createPledgeDialog_setProject={createPledgeDialog_setProject}\r\n                    selectProjectVisibility_setProject={selectProjectVisibility_setProject}\r\n                    bringPitchBackToLive={this.bringPitchBackToLive}\r\n                    toggleRejectFeedback={this.toggleRejectFeedback}\r\n                    sendProjectBackToIssuer={this.sendProjectBackToIssuer}\r\n                    toggleContactPitchOwnerDialog={() => this.props.toggleContactPitchOwnerDialog(project.projectName, projectIssuer.email)}\r\n                />\r\n\r\n                <CommentDialog\r\n                    open={commentDialogOpen}\r\n                    project={project}\r\n                    commentText={commentText}\r\n                    commentSubmitClick={commentSubmitClick}\r\n                    onClose={this.handleCloseCommentDialog}\r\n                    onCommentTextChanged={this.handleTextChanged}\r\n                    onSubmitCommentClick={this.handleSubmitCommentClick}\r\n                />\r\n\r\n                <CreatePledgeDialog/>\r\n\r\n                <ContactPitchOwnerDialog/>\r\n\r\n                <FeedbackSnackbarNew/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ProjectDetails extends Component {\r\n\r\n    /**\r\n     * Handle when the navigation tab is changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    onTabChanged = (event, value) => {\r\n        this.props.onTabChanged(event, value);\r\n    };\r\n\r\n    /**\r\n     * Handle when text input changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    }\r\n\r\n    /**\r\n     * Handle when the vote button is clicked.\r\n     *\r\n     * @param vote\r\n     */\r\n    onVote = vote => {\r\n        this.props.onVote(vote);\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked\r\n     */\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go live (Admin only)\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoLiveDecision = decision => {\r\n        this.props.onMakeProjectGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoToPledgePhaseDecision = decision => {\r\n        this.props.onMakeProjectGoToPledgePhaseDecision(decision);\r\n    };\r\n    /**\r\n     * Make a decision whether a project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectPledgeGoLiveDecision = decision => {\r\n        this.props.onMakeProjectPledgeGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post comment button is clicked --> Open comment dialog\r\n     */\r\n    onPostACommentClick = () => {\r\n        this.props.onPostACommentClick();\r\n    };\r\n\r\n    /**\r\n     * Handle to cancel updating current comment\r\n     */\r\n    onCancelUpdateCurrentComment = () => {\r\n        this.props.onCancelUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to submit the updated comment\r\n     */\r\n    onSubmitUpdateCurrentComment = () => {\r\n        this.props.onSubmitUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle input area to allow the project's owners to reply to the investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    onDeleteCommentReply = reply => {\r\n        this.props.onDeleteCommentReply(reply);\r\n    }\r\n\r\n    /**\r\n     * Handle when the offer state is changed\r\n     *\r\n     * @param step\r\n     */\r\n    onAdminOfferStatesStepClick = step => {\r\n        this.props.onAdminOfferStatesStepClick(step);\r\n    };\r\n\r\n    /**\r\n     * Bring pitch back to live\r\n     */\r\n    bringPitchBackToLive = () => {\r\n        this.props.bringPitchBackToLive();\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.props.toggleRejectFeedback();\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = () => {\r\n        this.props.sendProjectBackToIssuer();\r\n    }\r\n\r\n    /**\r\n     * Toggle contact pitch owner dialog\r\n     */\r\n    toggleContactPitchOwnerDialog = () => {\r\n        this.props.toggleContactPitchOwnerDialog();\r\n    }\r\n\r\n    /**\r\n     * Render the page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            groupsUserIsIn,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            project,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack,\r\n\r\n            projectVisibilitySetting,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        // if the data is being loaded\r\n        // display loading\r\n        if (!pledgesLoaded\r\n            || !votesLoaded\r\n            || !investorPledgeLoaded\r\n            || !projectIssuerLoaded\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <FlexView width=\"100%\" marginTop={20} hAlignContent=\"center\">\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // return Page Not Found for security reason\r\n        if (!project\r\n            || !pledges\r\n            || !projectIssuer\r\n            // the project is private\r\n            // the user is an investor/issuer that is not in the group that owns this project\r\n            || (\r\n                project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                && (user.type === DB_CONST.TYPE_INVESTOR || user.type === DB_CONST.TYPE_ISSUER)\r\n                && (groupsUserIsIn !== null && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is temporarily closed\r\n        // only display its content to the super admins,\r\n        // group admins that own this project, and the issuer of this project\r\n        if (utils.isProjectTemporarilyClosed(project)\r\n            && (\r\n                (user.type === DB_CONST.TYPE_ISSUER && user.id !== project.issuerID)\r\n                || (user.type === DB_CONST.TYPE_INVESTOR)\r\n                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin && user.anid !== project.anid)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\">This offer has been closed temporarily.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is private\r\n        // the user is a group admin that does not own this project\r\n        if (project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n            && (user.type === DB_CONST.TYPE_ADMIN)\r\n            && !user.superAdmin\r\n            && user.anid !== project.anid\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\"> You can only edit offers from your group.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        let sortedComments = comments;\r\n        // if the list of comments is not null\r\n        if (sortedComments) {\r\n            // sort by oldest day first\r\n            sortedComments.sort((comment1, comment2) => {\r\n                return (comment1.commentedDate - comment2.commentedDate);\r\n            });\r\n\r\n            let currentCommentIndex = sortedComments.findIndex(comment => comment.commentedBy === user.id);\r\n            if (currentCommentIndex !== -1) {\r\n                const currentComment = comments[currentCommentIndex];\r\n                sortedComments.splice(currentCommentIndex, 1);\r\n                sortedComments.push(currentComment);\r\n            }\r\n\r\n            sortedComments.reverse();\r\n        }\r\n\r\n        // sort replies in each comment\r\n        sortedComments.forEach(comment => {\r\n            comment.replies.sort((reply1, reply2) => {\r\n                return reply2.repliedDate - reply1.repliedDate;\r\n            });\r\n        });\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingTop: 0, paddingBottom: 100}}>\r\n                <Row noGutters style={{paddingTop: 25, paddingBottom: 25, backgroundColor: colors.kick_starter_background_color}}>\r\n                    {/** Banner to announce if a project is temporarily closed */}\r\n                    {\r\n                        !utils.isProjectTemporarilyClosed(project)\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 0}} sm={{span: 12, offset: 0, order: 0}} md={{span: 12, offset: 0, order: 0}} lg={{span: 12, offset: 0, order: 0}}>\r\n                                <FlexView marginBottom={20} hAlignContent=\"center\" style={{backgroundColor: colors.errorColor, padding: 15}} >\r\n                                    <Typography variant=\"body2\" align=\"center\" className={css(sharedStyles.white_text)}><b>This offer has been temporarily closed.</b></Typography>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Pledge (displayed if the user is an investor and has pledged this project before) */}\r\n                    {\r\n                        !investorPledge\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 2}} sm={{span: 12, offset: 0, order: 2}} md={{span: 10, offset: 1, order: 2}} lg={{span: 10, offset: 1, order: 1}}>\r\n                                <Paper elevation={3} style={{margin: 12}} square>\r\n                                    <Row noGutters style={{padding: 6}}>\r\n                                        <Col xs={12} sm={12} md={{span: 5, order: 1}} lg={{span: 3, order: 1}}>\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" height=\"100%\" width=\"100%\" style={{padding: 10}}>\r\n                                                <CheckCircleIcon color=\"primary\" style={{marginRight: 15}}/>\r\n                                                <Typography align=\"left\" variant=\"body1\">\r\n                                                    {\r\n                                                        investorPledge.status === DB_CONST.MAKE_A_NEW_PLEDGE\r\n                                                            ?\r\n                                                            `You pledged ${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                            :\r\n                                                            `You updated your pledge to ${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                    }\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        <Col xs={12} sm={12} md={{span: 5, offset: 2, order: 2}} lg={{span: 3, offset: 6, order: 2}}>\r\n                                            <FlexView width=\"100%\" hAlignContent=\"center\" style={{padding: 10}}>\r\n                                                {\r\n                                                    !utils.isProjectInLivePledgePhase(project)\r\n                                                        ?\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"secondary\">Offer has ended. You can't change your pledge anymore.</Typography>\r\n                                                        :\r\n                                                        <NavLink\r\n                                                            to={{\r\n                                                                pathname: groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                ,\r\n                                                                search: `?project=${project.id}`\r\n                                                            }}\r\n                                                            className={css(sharedStyles.nav_link_hover)}\r\n                                                        >\r\n                                                            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">Manage your pledge</Button>\r\n                                                        </NavLink>\r\n                                                }\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Paper>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Project title and description */}\r\n                    <Col xs={{span: 12, offset: 0, order: 3}} sm={{span: 12, offset: 0, order: 3}} md={{span: 10, offset: 1, order: 3}} lg={{span: 8, offset: 2, order: 2}} style={{paddingLeft: 20, paddingRight: 20, paddingTop: 20, paddingBottom: 40}}>\r\n                        <FlexView column width=\"100%\" hAlignContent=\"center\">\r\n                            <Typography align=\"center\" variant=\"h5\" style={{marginBottom: 12}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        \"This is an offer\"\r\n                                        :\r\n                                        project.projectName\r\n                                }\r\n                            </Typography>\r\n                            <Typography className={css(styles.gray_text)} align=\"center\" variant=\"body1\" style={{whiteSpace: \"pre-line\"}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        `in ${project.sector} sector`\r\n                                        :\r\n                                        project.description\r\n                                }\r\n                            </Typography>\r\n                            {\r\n                                user.type === DB_CONST.TYPE_ADMIN\r\n                                || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)\r\n                                    ?\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" marginTop={20}>\r\n                                        {\r\n                                            !utils.shouldAProjectBeEdited(user, project)\r\n                                                ?\r\n                                                <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)} disabled>\r\n                                                    <CreateIcon style={{marginRight: 8,  width: 20, height: \"auto\"}}\r\n                                                    />Edit offer</Button>\r\n                                                :\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.EDIT_OFFER\r\n                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                            :\r\n                                                            ROUTES.EDIT_OFFER_INVEST_WEST_SUPER\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                    }\r\n                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                >\r\n                                                    <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)}>\r\n                                                        <CreateIcon style={{marginRight: 8, width: 20, height: \"auto\"}}/>Edit offer</Button>\r\n                                                </NavLink>\r\n                                        }\r\n                                        {/*<FlexView*/}\r\n                                        {/*    marginLeft={15}*/}\r\n                                        {/*>*/}\r\n                                        {/*    <InfoOverlay*/}\r\n                                        {/*        message={*/}\r\n                                        {/*            user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                        {/*                ?*/}\r\n                                        {/*                \"Edit offer.\"*/}\r\n                                        {/*                :*/}\r\n                                        {/*                utils.isDraftProject(project)*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    \"This offer is still a draft. Complete it.\"*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    !utils.shouldAProjectBeEdited(user, project)*/}\r\n                                        {/*                        ?*/}\r\n                                        {/*                        \"Pages cannot be edited.\"*/}\r\n                                        {/*                        :*/}\r\n                                        {/*                        `Pages can only be edited before the pitch phase expires. You can edit until ${utils.dateInReadableFormat(project.Pitch.expiredDate)}.`*/}\r\n                                        {/*        }*/}\r\n                                        {/*        placement=\"right\"*/}\r\n                                        {/*    />*/}\r\n                                        {/*</FlexView>*/}\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            {\r\n                                user.id === project.issuerID\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column hAlignContent=\"center\">\r\n                                        <NavLink\r\n                                            to={\r\n                                                this.shouldHideInformation()\r\n                                                || (\r\n                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                    && project.createdByGroupAdmin\r\n                                                )\r\n                                                    ?\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.VIEW_GROUP_DETAILS\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                        :\r\n                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                    :\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.USER_PROFILE\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                                        :\r\n                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                            }\r\n                                            className={css(sharedStyles.nav_link_hover, styles.black_text)}\r\n                                        >\r\n                                            <Typography align=\"center\" variant=\"body2\" style={{marginTop: 23}}>\r\n                                                {\r\n                                                    this.shouldHideInformation()\r\n                                                    || (\r\n                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                        && project.createdByGroupAdmin\r\n                                                    )\r\n                                                        ?\r\n                                                        <u>by {`${project.group.displayName}`}</u>\r\n                                                        :\r\n                                                        <u>by {`${projectIssuer.firstName} ${projectIssuer.lastName}`}</u>\r\n                                                }\r\n                                            </Typography>\r\n                                        </NavLink>\r\n                                        {\r\n                                            project.hasOwnProperty('createdByGroupAdmin')\r\n                                            && project.createdByGroupAdmin\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                projectIssuer.hasOwnProperty('linkedin')\r\n                                                && projectIssuer.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={projectIssuer.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64,  height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                        }\r\n                                    </FlexView>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Project cover (image or video) */}\r\n                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 7, offset: 1, order: 3}} style={{paddingLeft: 20, paddingRight: 20, height: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE}}>\r\n                        {\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Image src={utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, project.group)}\r\n                                    style={{\r\n                                        maxHeight:\r\n                                            isMobile\r\n                                                ?\r\n                                                MAX_COVER_HEIGHT_IN_MOBILE_MODE\r\n                                                :\r\n                                                MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE\r\n                                        ,\r\n                                        border: `1px solid ${colors.gray_300}`,\r\n                                        width: \"100%\",\r\n                                        objectFit: \"scale-down\"\r\n                                    }}\r\n                                />\r\n                                :\r\n                                project.Pitch.cover.map((coverItem, index) => (\r\n                                    coverItem.hasOwnProperty('removed')\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        (\r\n                                            coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                ?\r\n                                                <ReactPlayer\r\n                                                    key={index}\r\n                                                    url={coverItem.url}\r\n                                                    playsInline\r\n                                                    pip={true}\r\n                                                    width=\"100%\"\r\n                                                    height={coverItem.storageID === \"\" ? \"100%\" : \"auto\"}\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                />\r\n                                                :\r\n                                                <Image key={index} src={coverItem.url} style={{maxHeight: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE, border: `1px solid ${colors.gray_300}`, width: \"100%\", objectFit: \"scale-down\"}}/>\r\n                                        )\r\n                                ))\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Project information */}\r\n                    <Col xs={{span: 12, order: 4}} sm={{span: 12, order: 4}} md={{span: 12, order: 4}} lg={{span: 3, order: 4}} style={{paddingLeft: 20, paddingRight: 20}}>\r\n                        <Row noGutters>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 1}} lg={{span: 12, offset: 0, order: 1}}>\r\n                                <FlexView width=\"100%\" height={4} style={{\r\n                                        backgroundColor:\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n\r\n                            {/** Funding goal / Pledged */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 2}} lg={{span: 12, offset: 0, order: 2}}>\r\n                                <FlexView column marginTop={18}>\r\n                                    {\r\n                                        utils.isDraftProject(project)\r\n                                        || utils.isProjectWaitingToGoLive(project)\r\n                                        || utils.isProjectRejectedToGoLive(project)\r\n                                        || utils.isProjectInLivePitchPhase(project)\r\n                                        || utils.isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeCreated(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeChecked(project)\r\n                                            ?\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <FlexView column marginRight={20}>\r\n                                                    <Typography variant=\"h5\" color=\"secondary\" align=\"left\">{'' + Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Funding goal</Typography>\r\n                                                </FlexView>\r\n                                                <InfoOverlay message=\"Funding amount sought via Invest West.\" placement=\"top\"/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <FlexView column marginRight={20}>\r\n                                                    <Typography variant=\"h5\" color=\"primary\" align=\"left\">{`${Number(utils.calculatePledgesAmount(pledges).toFixed(2)).toLocaleString()}`}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{`pledged of ${Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`}</Typography>\r\n                                                </FlexView>\r\n                                                <InfoOverlay message=\"Total amount pledged via Invest West.\" placement=\"top\"/>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            {/** Post money valuation */}\r\n                            {\r\n                                !project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 3}} lg={{span: 12, offset: 0, order: 3}}>\r\n                                        <FlexView marginTop={20} vAlignContent=\"center\">\r\n                                            <FlexView column marginRight={20}>\r\n                                                <Typography variant=\"h5\" color=\"inherit\" align=\"left\">{'' + Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()}</Typography>\r\n                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Post money valuation</Typography>\r\n                                            </FlexView>\r\n                                            <InfoOverlay message=\"This is the company post money valuation.\" placement=\"top\"/>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Project status */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 0, order: 4}} lg={{span: 12, offset: 0, order: 4}}>\r\n                                {\r\n                                    this.renderProjectStatus()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** Contact us */}\r\n                            {\r\n                                isProjectOwner(AuthenticationState.currentUser, project)\r\n                                    ? null\r\n                                    : <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 5}} lg={{span: 12, offset: 0, order: 5}} style={{marginTop: 15}}>\r\n                                        <FlexView column hAlignContent=\"left\">\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={this.shouldHideInformation() || (user.type === TYPE_INVESTOR && !investorSelfCertificationAgreement)} onClick={() => this.toggleContactPitchOwnerDialog()}>Contact us</Button>\r\n                                                {/*<Button*/}\r\n                                                {/*    size=\"medium\"*/}\r\n                                                {/*    variant={getInvestorVote(votes, user) && getInvestorVote(votes, user).voted ? \"contained\" : \"outlined\"}*/}\r\n                                                {/*    color=\"primary\"*/}\r\n                                                {/*    disabled={this.shouldVoteDisabled()}*/}\r\n                                                {/*    onClick={() => this.onVote(true)}*/}\r\n                                                {/*    className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <i*/}\r\n                                                {/*        style={{*/}\r\n                                                {/*            fontSize: 21,*/}\r\n                                                {/*            marginRight: 8*/}\r\n                                                {/*        }}*/}\r\n                                                {/*        className=\"far fa-thumbs-up\"*/}\r\n                                                {/*    />*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        Like*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</Button>*/}\r\n                                                {/*<FlexView*/}\r\n                                                {/*    marginLeft={10}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*        color=\"primary\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        {this.displayVote(true)}*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</FlexView>*/}\r\n                                            </FlexView>\r\n                                            {/*{*/}\r\n                                            {/*    user.type === DB_CONST.TYPE_ISSUER*/}\r\n                                            {/*        ?*/}\r\n                                            {/*        <Typography*/}\r\n                                            {/*            variant=\"body2\"*/}\r\n                                            {/*            align=\"left\"*/}\r\n                                            {/*            color=\"error\"*/}\r\n                                            {/*            style={{*/}\r\n                                            {/*                marginTop: 10*/}\r\n                                            {/*            }}*/}\r\n                                            {/*        >*/}\r\n                                            {/*            Only investors can vote.*/}\r\n                                            {/*        </Typography>*/}\r\n                                            {/*        :*/}\r\n                                            {/*        null*/}\r\n                                            {/*}*/}\r\n                                        </FlexView>\r\n                                        {\r\n                                            this.shouldHideInformation()\r\n                                                ?\r\n                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot see detailed information of this restricted offer.</Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                        <NavLink\r\n                                                            to={\r\n                                                                groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                            }\r\n                                                            style={{marginTop: 4}}>\r\n                                                            <Typography variant=\"body2\">Request access</Typography>\r\n                                                        </NavLink>\r\n                                                    </FlexView>\r\n                                                :\r\n                                                this.renderInvestorSelfCertifyReminder()\r\n                                        }\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Pledge this project (available only for investor and only appears when the project is in the Primary offer phase) */}\r\n                            {\r\n                                !utils.isProjectInLivePledgePhase(project)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        user.type !== DB_CONST.TYPE_INVESTOR\r\n                                            ?\r\n                                            (\r\n                                                <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                    <Typography align=\"left\" variant=\"body2\">\r\n                                                        <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                    </Typography>\r\n                                                </Col>\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                investorPledge\r\n                                                    ?\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                        <Typography align=\"left\" variant=\"body2\"><u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n\r\n                                                        {\r\n                                                            user.type === DB_CONST.TYPE_INVESTOR\r\n                                                            && !investorSelfCertificationAgreement\r\n                                                                ?\r\n                                                                <Button style={{marginBottom: 14}} className={css(sharedStyles.no_text_transform)} fullWidth variant=\"outlined\" color=\"primary\" size=\"medium\"\r\n                                                                    disabled={\r\n                                                                        user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                        && !investorSelfCertificationAgreement\r\n                                                                    }\r\n                                                                >\r\n                                                                    Pledge now\r\n                                                                </Button>\r\n                                                                :\r\n                                                                <NavLink\r\n                                                                    to={{\r\n                                                                        pathname: groupUserName\r\n                                                                            ?\r\n                                                                            ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                            :\r\n                                                                            ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                        ,\r\n                                                                        search: `?project=${project.id}`\r\n                                                                    }}\r\n                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                >\r\n                                                                    <Button style={{marginBottom: 14}} className={css(sharedStyles.no_text_transform)} fullWidth variant=\"outlined\" color=\"primary\" size=\"medium\">Pledge now</Button>\r\n                                                                </NavLink>\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                        }\r\n\r\n                                                        <Typography align=\"left\" variant=\"body2\" style={{marginTop: 15}}>\r\n                                                            <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u></Typography>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Sections bar */}\r\n                <Row noGutters className={css(styles.sticky_body_sections_bar)}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n\r\n                    <Col style={{padding: 10}} xs={{span: 12, offset: 0}} sm={{span: 12, offset: 0}} md={{span: 12, offset: 0}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\">\r\n                            <Tabs value={mainBody} onChange={this.onTabChanged} indicatorColor=\"primary\" textColor=\"primary\" variant=\"scrollable\" scrollButtons=\"on\">\r\n                                {\r\n                                    // user is a super admin\r\n                                    // or a group admin that owns the project\r\n                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))\r\n                                    )\r\n                                    // project is not a draft\r\n                                    && !utils.isDraftProject(project)\r\n                                        ?\r\n                                        <Tab value={MAIN_BODY_ADMIN_OFFER_STATES} className={css(sharedStyles.tab_title)} fullWidth label=\"Control phases\"\r\n                                         style={{\r\n                                                color:\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        colors.secondaryColor\r\n                                                        :\r\n                                                        groupProperties.settings.secondaryColor\r\n                                            }}\r\n                                        />\r\n                                        :\r\n                                        null\r\n                                }\r\n                                {/*{*/}\r\n                                {/*    // user is a super admin*/}\r\n                                {/*    // or a group admin that owns the project*/}\r\n                                {/*    (user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                {/*        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))*/}\r\n                                {/*    )*/}\r\n                                {/*    // user is the issuer that owns the project*/}\r\n                                {/*    || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)*/}\r\n                                {/*        ?*/}\r\n                                {/*        <Tab*/}\r\n                                {/*            value={MAIN_BODY_INVESTORS_PLEDGED}*/}\r\n                                {/*            className={css(sharedStyles.tab_title)}*/}\r\n                                {/*            fullWidth*/}\r\n                                {/*            label=\"Pledges\"*/}\r\n                                {/*            style={{*/}\r\n                                {/*                color:*/}\r\n                                {/*                    !groupProperties*/}\r\n                                {/*                        ?*/}\r\n                                {/*                        colors.secondaryColor*/}\r\n                                {/*                        :*/}\r\n                                {/*                        groupProperties.settings.secondaryColor*/}\r\n                                {/*            }}*/}\r\n                                {/*        />*/}\r\n                                {/*        :*/}\r\n                                {/*        null*/}\r\n                                {/*}*/}\r\n                                <Tab value={MAIN_BODY_CAMPAIGN} className={css(sharedStyles.tab_title)} fullWidth label=\"Campaign\"/>\r\n                                <Tab value={MAIN_BODY_DOCUMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Documents\"/>\r\n                                <Tab value={MAIN_BODY_COMMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Investor comments\"/>\r\n                                <Tab value={MAIN_BODY_NOTES} className={css(sharedStyles.tab_title)} fullWidth label=\"Extra information\"/>\r\n                            </Tabs>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main body */}\r\n                <Row noGutters className={css(styles.main_body_section)}>\r\n                    {/** Offer states (only visible to Admin) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_ADMIN_OFFER_STATES\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                <FlexView column marginTop={30}>\r\n                                    <Typography variant=\"h5\"> Control phases</Typography>\r\n\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 8, order: 0}} lg={{span: 8, order: 0}}>\r\n                                            <Stepper nonLinear orientation=\"vertical\" activeStep={adminOfferStatesActiveStep} style={{marginTop: 15}}>\r\n                                                {/** Publish pitch step */}\r\n                                                <Step key={ADMIN_OFFER_STATES_PUBLISH_PITCH} completed={!utils.isProjectWaitingToGoLive(project)}>\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PITCH)}>\r\n                                                        <StepLabel>Publish pitch</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            utils.isProjectWaitingToGoLive(project)\r\n                                                                ?\r\n                                                                <FlexView column width=\"100%\" marginTop={20} className={css(styles.admin_state_control_box)}>\r\n                                                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                                                        Please check this offer\r\n                                                                        carefully\r\n                                                                        before publishing as this action cannot be\r\n                                                                        reversed. You\r\n                                                                        can control who can see this investment\r\n                                                                        opportunity\r\n                                                                        using the options below.\r\n                                                                    </Typography>\r\n\r\n                                                                    <Divider style={{marginTop: 25, marginBottom: 20}}/>\r\n\r\n                                                                    {/** Select project visibility before publishing pitch */}\r\n                                                                    <SelectPitchVisibility/>\r\n\r\n                                                                    <Divider style={{marginTop: 35, marginBottom: 25}}/>\r\n\r\n                                                                    {\r\n                                                                        !addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column>\r\n                                                                                <TextField\r\n                                                                                    label=\"Feedback\"\r\n                                                                                    placeholder=\"Feedback for issuer\"\r\n                                                                                    name=\"rejectFeedback\"\r\n                                                                                    value={rejectFeedback}\r\n                                                                                    fullWidth\r\n                                                                                    margin=\"normal\"\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    multiline\r\n                                                                                    rows={5}\r\n                                                                                    rowsMax={5}\r\n                                                                                    onChange={this.onTextChanged}\r\n                                                                                />\r\n\r\n                                                                                <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={10}>\r\n                                                                                    <FlexView marginRight={6}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={rejectFeedback.trim().length === 0} onClick={() => this.sendProjectBackToIssuer()}>\r\n                                                                                            {\r\n                                                                                                sendingProjectBack\r\n                                                                                                    ?\r\n                                                                                                    \"Sending...\"\r\n                                                                                                    :\r\n                                                                                                    \"Send\"\r\n                                                                                            }\r\n                                                                                        </Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView marginLeft={6}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => this.toggleRejectFeedback()}>Cancel</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            isProjectCreatedByGroupAdmin(project)\r\n                                                                                ?\r\n                                                                                <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish pitch</Button>\r\n                                                                                :\r\n                                                                                <FlexView>\r\n                                                                                    <FlexView grow marginRight={10}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish pitch</Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView grow marginLeft={10}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.toggleRejectFeedback()}>Send back to issuer</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        !user.superAdmin\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <Typography variant=\"body1\" color=\"error\" align=\"left\" style={{marginTop: 20}}>Only group admin can do this.</Typography>\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                isDraftProject(project)\r\n                                                                                    ?\r\n                                                                                    \"This offer is in draft phase.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has been published.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                </FlexView>\r\n                                                        }\r\n\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/** Move Pitch to Pledge step */}\r\n                                                <Step\r\n                                                    key={ADMIN_OFFER_STATES_MOVE_TO_PLEDGE}\r\n                                                    disabled={\r\n                                                        isProjectWaitingToGoLive(project)\r\n                                                        || isProjectRejectedToGoLive(project)\r\n                                                    }\r\n                                                    completed={\r\n                                                        isProjectSuccessful(project)\r\n                                                        || isProjectFailed(project)\r\n                                                        || isProjectInLivePledgePhase(project)\r\n                                                        || isProjectWaitingForPledgeToBeCreated(project)\r\n                                                        || isProjectWaitingForPledgeToBeChecked(project)\r\n                                                    }\r\n                                                >\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_MOVE_TO_PLEDGE)}>\r\n                                                        {/*<StepLabel*/}\r\n                                                        {/*    error={utils.isProjectRejectedToGoLive(project)}*/}\r\n                                                        {/*>*/}\r\n                                                        {/*    Move pitch to pledge phase*/}\r\n                                                        {/*</StepLabel>*/}\r\n                                                        <StepLabel error={utils.isProjectRejectedToGoLive(project)}>Make decision for expired pitch</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            (isProjectInLivePitchPhase(project)\r\n                                                                || isProjectPitchExpiredWaitingForAdminToCheck(project))\r\n                                                            && !isProjectWaitingForPledgeToBeCreated(project)\r\n                                                            && !isProjectWaitingForPledgeToBeChecked(project)\r\n                                                                ?\r\n                                                                <FlexView\r\n                                                                    column\r\n                                                                >\r\n                                                                    {\r\n                                                                        !isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column width=\"100%\" marginTop={20} marginBottom={20} className={css(styles.admin_state_control_box)}>\r\n                                                                                <Typography align=\"left\" variant=\"body1\" style={{marginBottom: 35}}>This pitch has expired. You can bring it back to live by updating the expiry date or close it.</Typography>\r\n\r\n                                                                                <KeyboardDatePicker\r\n                                                                                    autoOk\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"dialog\"\r\n                                                                                    inputVariant=\"outlined\"\r\n                                                                                    label=\"Update expiry date for this pitch\"\r\n                                                                                    format=\"dd/MM/yyyy\"\r\n                                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                    value={changedPitchExpiryDate}\r\n                                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                                    onChange={this.onDateChanged}\r\n                                                                                />\r\n\r\n                                                                                <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                    disabled={\r\n                                                                                        !changedPitchExpiryDate\r\n                                                                                        || isNaN(changedPitchExpiryDate)\r\n                                                                                        || changedPitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)\r\n                                                                                    }\r\n                                                                                    style={{marginTop: 25}} onClick={this.bringPitchBackToLive}>Make pitch live again</Button>\r\n\r\n                                                                                <FlexView column marginTop={100}>\r\n                                                                                    <Button fullWidth color=\"secondary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" disabled={user.superAdmin} onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}>Close pitch</Button>\r\n\r\n                                                                                    <Typography align=\"center\" variant=\"body2\" style={{marginTop: 12}}>\r\n                                                                                        <b>\r\n                                                                                            <u>\r\n                                                                                                Please do it carefully\r\n                                                                                                as you cannot\r\n                                                                                                reverse\r\n                                                                                                your action.\r\n                                                                                            </u>\r\n                                                                                        </b>\r\n                                                                                    </Typography>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/*<FlexView*/}\r\n                                                                    {/*    column*/}\r\n                                                                    {/*    width=\"100%\"*/}\r\n                                                                    {/*    marginTop={20}*/}\r\n                                                                    {/*    className={css(styles.admin_state_control_box)}*/}\r\n                                                                    {/*>*/}\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*        paragraph*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        This offer is currently in the*/}\r\n                                                                    {/*        pitch*/}\r\n                                                                    {/*        phase. You can now move it to the pledge*/}\r\n                                                                    {/*        phase.*/}\r\n                                                                    {/*        The*/}\r\n                                                                    {/*        issuer will be notified and prompted to*/}\r\n                                                                    {/*        create*/}\r\n                                                                    {/*        their*/}\r\n                                                                    {/*        pledge page.*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        <b>*/}\r\n                                                                    {/*            <u>*/}\r\n                                                                    {/*                Please do it carefully as you cannot*/}\r\n                                                                    {/*                reverse*/}\r\n                                                                    {/*                your action.*/}\r\n                                                                    {/*            </u>*/}\r\n                                                                    {/*        </b>*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Divider*/}\r\n                                                                    {/*        style={{*/}\r\n                                                                    {/*            marginTop: 30,*/}\r\n                                                                    {/*            marginBottom: 30*/}\r\n                                                                    {/*        }}*/}\r\n                                                                    {/*    />*/}\r\n\r\n                                                                    {/*    <FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginRight={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"primary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(true)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Move to pledge phase*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginLeft={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"secondary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Close pitch*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*    </FlexView>*/}\r\n\r\n                                                                    {/*    {*/}\r\n                                                                    {/*        !user.superAdmin*/}\r\n                                                                    {/*            ?*/}\r\n                                                                    {/*            null*/}\r\n                                                                    {/*            :*/}\r\n                                                                    {/*            <Typography*/}\r\n                                                                    {/*                variant=\"body1\"*/}\r\n                                                                    {/*                color=\"error\"*/}\r\n                                                                    {/*                align=\"left\"*/}\r\n                                                                    {/*                style={{*/}\r\n                                                                    {/*                    marginTop: 20*/}\r\n                                                                    {/*                }}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Only group admin can do this.*/}\r\n                                                                    {/*            </Typography>*/}\r\n                                                                    {/*    }*/}\r\n                                                                    {/*</FlexView>*/}\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                                    ?\r\n                                                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                    && project.createdByGroupAdmin\r\n                                                                                    && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                                        ?\r\n                                                                                        \"You can create a pledge page for this offer now.\"\r\n                                                                                        :\r\n                                                                                        \"The issuer has been prompted to create their pledge page. You will then be able to check the pledge before publishing.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has moved to the pledge phase.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                    {\r\n                                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                        && project.createdByGroupAdmin\r\n                                                                        && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                        && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                            ?\r\n                                                                            <FlexView marginTop={20}>\r\n                                                                                <Button color=\"primary\" variant=\"outlined\" size=\"medium\"\r\n                                                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                                                    onClick={() => {\r\n                                                                                        createPledgeDialog_toggleDialog();\r\n                                                                                        createPledgeDialog_setProject(project);\r\n                                                                                        selectProjectVisibility_setProject(project);\r\n                                                                                    }}>\r\n                                                                                    Create pledge\r\n                                                                                </Button>\r\n                                                                            </FlexView>\r\n                                                                            :\r\n                                                                            null\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/*/!** Publish Pledge step *!/*/}\r\n                                                {/*<Step*/}\r\n                                                {/*    key={ADMIN_OFFER_STATES_PUBLISH_PLEDGE}*/}\r\n                                                {/*    disabled={*/}\r\n                                                {/*        isProjectWaitingToGoLive(project)*/}\r\n                                                {/*        || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*        || isProjectInLivePitchPhase(project)*/}\r\n                                                {/*        || isProjectPitchExpiredWaitingForAdminToCheck(project)*/}\r\n                                                {/*        || isProjectFailed(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*    completed={*/}\r\n                                                {/*        isProjectFailed(project)*/}\r\n                                                {/*        || isProjectSuccessful(project)*/}\r\n                                                {/*        || isProjectInLivePledgePhase(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*>*/}\r\n                                                {/*    <StepButton*/}\r\n                                                {/*        onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PLEDGE)}*/}\r\n                                                {/*    >*/}\r\n                                                {/*        <StepLabel*/}\r\n                                                {/*            error={*/}\r\n                                                {/*                isProjectFailed(project)*/}\r\n                                                {/*                || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*            }*/}\r\n                                                {/*        >*/}\r\n                                                {/*            Publish pledge*/}\r\n                                                {/*        </StepLabel>*/}\r\n                                                {/*    </StepButton>*/}\r\n                                                {/*    <StepContent>*/}\r\n                                                {/*        {*/}\r\n                                                {/*            project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED*/}\r\n                                                {/*                ?*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                    className={css(styles.admin_state_control_box)}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                        paragraph*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        The issuer has now created their pledge page.*/}\r\n                                                {/*                        Please*/}\r\n                                                {/*                        check this carefully before publishing as you*/}\r\n                                                {/*                        cannot*/}\r\n                                                {/*                        reverse this action. You can also control who*/}\r\n                                                {/*                        can see*/}\r\n                                                {/*                        this pledge using the options below.*/}\r\n                                                {/*                    </Typography>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 25,*/}\r\n                                                {/*                            marginBottom: 20*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    /!** Select project visibility before publishing pledge *!/*/}\r\n                                                {/*                    <SelectPledgeVisibility/>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 35,*/}\r\n                                                {/*                            marginBottom: 25*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    <FlexView*/}\r\n                                                {/*                        marginTop={20}*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginRight={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"primary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({*/}\r\n                                                {/*                                    decision: true,*/}\r\n                                                {/*                                    projectVisibilitySetting*/}\r\n                                                {/*                                })}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Publish pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginLeft={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"secondary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({decision: false})}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Close pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                    </FlexView>*/}\r\n\r\n                                                {/*                    {*/}\r\n                                                {/*                        !user.superAdmin*/}\r\n                                                {/*                            ?*/}\r\n                                                {/*                            null*/}\r\n                                                {/*                            :*/}\r\n                                                {/*                            <Typography*/}\r\n                                                {/*                                variant=\"body1\"*/}\r\n                                                {/*                                color=\"error\"*/}\r\n                                                {/*                                align=\"left\"*/}\r\n                                                {/*                                style={{*/}\r\n                                                {/*                                    marginTop: 20*/}\r\n                                                {/*                                }}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Only group admin can do this.*/}\r\n                                                {/*                            </Typography>*/}\r\n                                                {/*                    }*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*                :*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        color={*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"secondary\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"primary\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        {*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"This offer has been rejected.\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"This offer has been published.\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                    </Typography>*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*        }*/}\r\n                                                {/*    </StepContent>*/}\r\n                                                {/*</Step>*/}\r\n                                            </Stepper>\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 0}} sm={{span: 12, order: 0}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}}>\r\n                                            {\r\n                                                !isProjectLive(project)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FlexView column marginTop={30}>\r\n                                                        <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                            onClick={() => realtimeDBUtils.toggleProjectLivelinessTemporarily(user, JSON.parse(JSON.stringify(project)))}\r\n                                                            disabled={\r\n                                                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                                                || (\r\n                                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                                    && user.anid !== project.anid\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"Open again\"\r\n                                                                    :\r\n                                                                    \"Close temporarily\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        {\r\n                                                            !user.superAdmin\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography variant=\"body2\" align=\"left\" color=\"error\" style={{marginTop: 12}}>Only group admins can do this.</Typography>\r\n                                                        }\r\n                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 15}}>\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"This offer will be opened again.\"\r\n                                                                    :\r\n                                                                    \"This offer will be closed temporarily and it will no longer be visible to any investors until you open it again.\"\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Main presentation (Campaign) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_CAMPAIGN\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\"> Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n\r\n                                    {\r\n                                        // pitch deck\r\n                                        !project.Pitch.presentationDocument\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography variant=\"h5\">Pitch deck</Typography>\r\n                                                <DocumentsDownload documents={project.Pitch.presentationDocument} shouldShowRiskWarningOnDownload={true}/>\r\n                                                <Divider style={{marginTop: 10}}/>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        // pitch presentation text\r\n                                        !project.Pitch.presentationText\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(project.Pitch.presentationText.ops)}} marginTop={30}/>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/*/!** Investors pledged (only available when the primary offer expired and there are investors pledging the offer) *!/*/}\r\n                    {/*{*/}\r\n                    {/*    mainBody !== MAIN_BODY_INVESTORS_PLEDGED*/}\r\n                    {/*        ?*/}\r\n                    {/*        null*/}\r\n                    {/*        :*/}\r\n                    {/*        <Col*/}\r\n                    {/*            xs={12}*/}\r\n                    {/*            sm={12}*/}\r\n                    {/*            md={12}*/}\r\n                    {/*            lg={{span: 6, offset: 3}}*/}\r\n                    {/*        >*/}\r\n                    {/*            <FlexView*/}\r\n                    {/*                column*/}\r\n                    {/*                marginTop={30}*/}\r\n                    {/*            >*/}\r\n                    {/*                <Typography*/}\r\n                    {/*                    variant=\"h5\"*/}\r\n                    {/*                    align=\"left\"*/}\r\n                    {/*                    paragraph*/}\r\n                    {/*                >*/}\r\n                    {/*                    Pledges from investors*/}\r\n                    {/*                </Typography>*/}\r\n\r\n                    {/*                /!** Pledges table *!/*/}\r\n                    {/*                <PledgesTable/>*/}\r\n                    {/*            </FlexView>*/}\r\n                    {/*        </Col>*/}\r\n                    {/*}*/}\r\n\r\n                    {/** Comments */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_COMMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}}>\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 8, order: 1}} lg={{span: 8, order: 1}} style={{marginTop: 40}}>\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography align=\"center\" style={{padding: 15, backgroundColor: colors.kick_starter_background_color_1, marginBottom: 30}} variant=\"body2\" color=\"inherit\">Only investors can post comments.</Typography>\r\n                                            }\r\n\r\n                                            {\r\n                                                !commentsLoaded\r\n                                                    ?\r\n                                                    // comments not loaded yet --> load them and wait for them to be loaded\r\n                                                    <FlexView marginTop={30} hAlignContent=\"center\" width=\"100%\">\r\n                                                        <HashLoader\r\n                                                            color={\r\n                                                                !groupProperties\r\n                                                                    ?\r\n                                                                    colors.primaryColor\r\n                                                                    :\r\n                                                                    groupProperties.settings.primaryColor\r\n                                                            }\r\n                                                        />\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    (\r\n                                                        sortedComments.length > 0\r\n                                                            ?\r\n                                                            (\r\n                                                                <FlexView className={css(styles.border_box)} style={{padding: 15, backgroundColor: colors.kick_starter_background_color}} column>\r\n                                                                    {\r\n                                                                        sortedComments.map(comment => (\r\n                                                                            (\r\n                                                                                // if the comment is from the current user\r\n                                                                                comment.commentedBy === user.id\r\n                                                                                    ?\r\n                                                                                    <FlexView key={comment.id} column marginTop={12} marginBottom={12} className={css(styles.border_box)} style={{backgroundColor: colors.white, width: \"100%\"}}>\r\n                                                                                        <Typography style={{marginTop: 15, marginBottom: 10}} variant=\"body1\" className={css(styles.gray_text)} align=\"left\">Update your comment</Typography>\r\n                                                                                        <InputBase name=\"currentCommentText\" onChange={this.onTextChanged} value={currentCommentText} fullWidth rows={5} multiline className={css(styles.border_box)}/>\r\n                                                                                        <FlexView marginTop={25} width=\"100%\" hAlignContent=\"right\">\r\n                                                                                            <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onCancelUpdateCurrentComment}>Cancel</Button>\r\n                                                                                            <Button style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" disabled={(currentComment && currentComment.comment === currentCommentText) || currentCommentText.trim().length === 0} onClick={this.onSubmitUpdateCurrentComment}>Update</Button>\r\n                                                                                        </FlexView>\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>{reply.text}</Typography>\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                                    :\r\n                                                                                    <FlexView key={comment.id} className={css(styles.border_box)} style={{backgroundColor: colors.white}} column marginTop={12} marginBottom={12}>\r\n                                                                                        {/** Date */}\r\n                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                            {\r\n                                                                                                comment.status === DB_CONST.COMMENT_STATUS_POSTED\r\n                                                                                                    ?\r\n                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                                    :\r\n                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                            }\r\n                                                                                        </Typography>\r\n\r\n                                                                                        {/** Comment author */}\r\n                                                                                        {\r\n                                                                                            user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                            && user.superAdmin\r\n                                                                                                ?\r\n                                                                                                <NavLink\r\n                                                                                                    to={\r\n                                                                                                        groupUserName\r\n                                                                                                            ?\r\n                                                                                                            ROUTES.USER_PROFILE\r\n                                                                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                            :\r\n                                                                                                            ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                    }\r\n                                                                                                >\r\n                                                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">by {comment.author.firstName} {comment.author.lastName}</Typography>\r\n                                                                                                </NavLink>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Comment text */}\r\n                                                                                        <Typography style={{marginTop: 12}} variant=\"body1\" align=\"left\">{comment.comment}</Typography>\r\n\r\n                                                                                        {/** Reply button */}\r\n                                                                                        {\r\n                                                                                            (user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                && user.id === projectIssuer.id)\r\n                                                                                            || (\r\n                                                                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                && project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                                && user.anid === project.anid\r\n                                                                                            )\r\n                                                                                                ?\r\n                                                                                                <FlexView marginTop={25}>\r\n                                                                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                                        disabled={\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited === null\r\n                                                                                                        }\r\n                                                                                                        onClick={() => this.onToggleReplyToComment(comment, null)}\r\n                                                                                                    >Reply</Button>\r\n                                                                                                </FlexView>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Reply input area */}\r\n                                                                                        {\r\n                                                                                            replyingToComment !== null\r\n                                                                                            && replyingToComment.id === comment.id\r\n                                                                                            && replyEdited === null\r\n                                                                                                ?\r\n                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>\r\n                                                                                                            {reply.text}\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Delete/edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            // allow group admins that created this project,\r\n                                                                                                            // and issuer that created this project and owns this reply\r\n                                                                                                            // to edit/delete this reply\r\n                                                                                                            (\r\n                                                                                                                user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin)\r\n                                                                                                            )\r\n                                                                                                            && user.id === projectIssuer.id\r\n                                                                                                            && user.id === reply.repliedBy\r\n                                                                                                                ?\r\n                                                                                                                <FlexView marginTop={16}>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"secondary\" onClick={() => this.onDeleteCommentReply(reply)} style={{marginRight: 10}}>Delete<DeleteIcon fontSize=\"small\" style={{marginLeft: 6}}/>\r\n                                                                                                                    </Button>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"primary\" onClick={() => this.onToggleReplyToComment(comment, reply)}>Edit<EditIcon fontSize=\"small\" style={{marginLeft: 6}}/></Button>\r\n                                                                                                                </FlexView>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n\r\n                                                                                                        {/** Reply input area to edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited !== null\r\n                                                                                                            && replyEdited.id === reply.id\r\n                                                                                                                ?\r\n                                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                            )\r\n                                                                        ))\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                            )\r\n                                                            :\r\n                                                            user.type !== DB_CONST.TYPE_INVESTOR\r\n                                                                ?\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                    <FlexView marginTop={25} column hAlignContent=\"center\">\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\" fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                    && !investorSelfCertificationAgreement\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n\r\n                                                                        {\r\n                                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                                        }\r\n                                                                    </FlexView>\r\n                                                                </FlexView>\r\n                                                    )\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}} style={{marginTop: 40}}>\r\n\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    (\r\n                                                        comments.filter(comment => comment.commentedBy === user.id).length === 0\r\n                                                            ?\r\n                                                            <FlexView column>\r\n                                                                <Typography variant=\"subtitle1\" align=\"left\" style={{marginBottom: 25}}>This is your space to offer support and feedback to the issuer. Your identity will not be shared.</Typography>\r\n\r\n                                                                {/** Post a comment - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\"fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                    && !investorSelfCertificationAgreement\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n\r\n                                                                {/** Check investor's self certification status - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        this.renderInvestorSelfCertifyReminder()\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            <Typography variant=\"subtitle1\" align=\"left\">You have already commented on this investment opportunity. You can only edit your comment.</Typography>\r\n                                                    )\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" align=\"left\">All the comments from investors are displayed anonymously here.</Typography>\r\n                                            }\r\n\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Documents */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_DOCUMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Supporting documents</Typography>\r\n\r\n                                    {\r\n                                        project.Pitch.supportingDocuments && project.Pitch.supportingDocuments.findIndex(document => !document.hasOwnProperty('removed')) !== -1\r\n                                            ?\r\n                                            <DocumentsDownload documents={project.Pitch.supportingDocuments} shouldShowRiskWarningOnDownload={true}/>\r\n                                            :\r\n                                            <Typography variant=\"body1\" color=\"textSecondary\" style={{marginTop: 35}}>No supporting documents uploaded.</Typography>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Notes */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_NOTES\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Extra information</Typography>\r\n\r\n                                    {/** Financial round */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('financialRound')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Financial round the company is looking for:&nbsp;&nbsp;\r\n                                                    <b>\r\n                                                        {project.Pitch.financialRound}\r\n                                                    </b>\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Prior investment */}\r\n                                    <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={40} vAlignContent=\"center\">\r\n                                        <Typography variant=\"body1\" align=\"left\">Prior investment raised:&nbsp;&nbsp;<b>\r\n                                                {\r\n                                                    project.Pitch.amountRaised === 0\r\n                                                        ?\r\n                                                        \"none\"\r\n                                                        :\r\n                                                        `${Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()}`\r\n                                                }\r\n                                            </b>\r\n                                        </Typography>\r\n\r\n                                        {/*{*/}\r\n                                        {/*    project.Pitch.amountRaised === 0*/}\r\n                                        {/*        ?*/}\r\n                                        {/*        null*/}\r\n                                        {/*        :*/}\r\n                                        {/*        <Typography*/}\r\n                                        {/*            style={{marginTop: 30}}*/}\r\n                                        {/*            variant=\"body1\"*/}\r\n                                        {/*            align=\"left\"*/}\r\n                                        {/*        >*/}\r\n                                        {/*            Investors publicly committed:*/}\r\n                                        {/*            {*/}\r\n                                        {/*                !project.Pitch.investorsCommitted*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    <b>&nbsp;&nbsp; Not provided.</b>*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    <b>&nbsp;&nbsp; {project.Pitch.investorsCommitted}</b>*/}\r\n                                        {/*            }*/}\r\n                                        {/*        </Typography>*/}\r\n                                        {/*}*/}\r\n                                    </FlexView>\r\n\r\n                                    {/** How fund is being raised */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('howFundIsBeingRaised')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">How the company is rai{project.Pitch.howFundIsBeingRaised}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Details about earlier fundraising rounds */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Details about earlier fundraising rounds:<br/><br/> {project.Pitch.detailsAboutEarlierFundraisingRounds}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** QIB - special news */}\r\n                                    {\r\n                                        project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                        && (\r\n                                            (\r\n                                                (\r\n                                                    groupProperties\r\n                                                    && groupProperties.groupUserName === \"qib\"\r\n                                                )\r\n                                                && (\r\n                                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                                        && user.anid === groupProperties.anid)\r\n                                                    || (user.type === DB_CONST.TYPE_ISSUER\r\n                                                        && user.id === project.issuerID)\r\n                                                )\r\n                                            )\r\n                                            ||\r\n                                            (\r\n                                                !groupProperties\r\n                                                && user.type === DB_CONST.TYPE_ADMIN\r\n                                                && user.superAdmin\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Special news that Briony should talk about:\r\n                                                    <br/><br/>\r\n                                                    {project.Pitch.qibSpecialNews}\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Risk warning footer */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <RiskWarning/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Prevent the investors from interacting with the offer if they have not self-certified\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvestorSelfCertifyReminder = () => {\r\n        const {\r\n            groupUserName,\r\n            user,\r\n            investorSelfCertificationAgreement,\r\n            project\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_INVESTOR) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            utils.isProjectLive(project)\r\n            && !investorSelfCertificationAgreement\r\n                ?\r\n                <FlexView column marginTop={20}>\r\n                    <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot interact with this offer as you have not completed your self certification.</Typography>\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                `${ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName)}?tab=Profile`\r\n                                :\r\n                                `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Profile`\r\n                        }\r\n                        style={{\r\n                            marginTop: 4\r\n                        }}\r\n                    >\r\n                        <Typography variant=\"body2\"><u>Self certify</u></Typography>\r\n                    </NavLink>\r\n                </FlexView>\r\n                :\r\n                null\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Function to decide if information should be hidden or not\r\n     */\r\n    shouldHideInformation = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn\r\n        } = this.props;\r\n\r\n        // user is an admin\r\n        if (user.type === DB_CONST.TYPE_ADMIN) {\r\n            // user is a super admin\r\n            if (user.superAdmin) {\r\n                return false;\r\n            }\r\n\r\n            // user is a group admin and is the group that owns the project\r\n            if (user.anid === project.anid) {\r\n                return false;\r\n            }\r\n\r\n            // other group admins must go through the checks of project's visibility\r\n            switch (project.visibility) {\r\n                case DB_CONST.PROJECT_VISIBILITY_PUBLIC:\r\n                    return false;\r\n                case DB_CONST.PROJECT_VISIBILITY_RESTRICTED:\r\n                    return true;\r\n                case DB_CONST.PROJECT_VISIBILITY_PRIVATE:\r\n                    return true;\r\n                default:\r\n                    return true;\r\n            }\r\n        }\r\n        // user is not an admin\r\n        else {\r\n            // should not hide any information if the user is an issuer that created this offer\r\n            if (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID) {\r\n                return false;\r\n            }\r\n\r\n            // if somehow groupsUserIsIn is null, information must be hidden\r\n            if (!groupsUserIsIn) {\r\n                return true;\r\n            }\r\n\r\n            // if the project is not a restricted one, should not hide any information\r\n            if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_RESTRICTED) {\r\n                return false;\r\n            }\r\n\r\n            // user is not the member of the group that posted this offer --> hide information\r\n            // otherwise, should not hide information\r\n            return groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render the status for this project\r\n     */\r\n    renderProjectStatus = () => {\r\n        const {\r\n            project\r\n        } = this.props;\r\n\r\n        let stt = {text: '', color: ''};\r\n\r\n        if (utils.isProjectWaitingToGoLive(project)\r\n            || utils.isProjectRejectedToGoLive(project)\r\n            || utils.isProjectSuccessful(project)\r\n            || utils.isProjectFailed(project)\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} marginBottom={30}>\r\n                    <Typography variant=\"body1\" color=\"error\" align=\"left\">\r\n                        {\r\n                            utils.isProjectWaitingToGoLive(project)\r\n                                ?\r\n                                \"Offer is being checked.\"\r\n                                :\r\n                                utils.isProjectRejectedToGoLive(project)\r\n                                    ?\r\n                                    \"Offer has been rejected.\"\r\n                                    :\r\n                                    \"Offer closed.\"\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (project.PrimaryOffer) {\r\n            switch (project.PrimaryOffer.status) {\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pledge phase</Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.PrimaryOffer.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_EXPIRED:\r\n                    stt.text = \"Pledge has expired.\";\r\n                    stt.color = \"primary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (project.Pitch.status) {\r\n                case DB_CONST.PITCH_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pitch phase\r\n                            </Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.Pitch.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\"\r\n                            >days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER:\r\n                    stt.text = \"Awaiting pledge page to be created.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_REJECTED:\r\n                    stt.text = \"Offer failed as its pitch was rejected.\";\r\n                    stt.color = \"error\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN:\r\n                    stt.text = \"Pitch expired. Awaiting Group Admin review.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <FlexView marginTop={30} marginBottom={30}>\r\n                <Typography align=\"left\" variant=\"body1\" color={stt.color}>{stt.text}</Typography>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Check whether voting should be disabled or not\r\n     */\r\n    shouldVoteDisabled = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn,\r\n            investorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        // do not let the owner of the pitch vote for themselves\r\n        // also, do not let the admin vote the pitch\r\n        if (project.issuerID === firebase.auth().currentUser.uid\r\n            || user.type === DB_CONST.TYPE_ADMIN\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        if (!groupsUserIsIn) {\r\n            return true;\r\n        }\r\n\r\n        // user is not in the group that posted the offer\r\n        if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n            && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        // do not let investors who haven't uploaded self-certification vote\r\n        if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (!investorSelfCertificationAgreement) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // do not let issuers vote\r\n        if (user.type === DB_CONST.TYPE_ISSUER) {\r\n            return true;\r\n        }\r\n\r\n        // do not allow investors to vote when the Pitch has expired\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING) {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Displaying votes (number or percentage depending on the type of user who is viewing it)\r\n     *\r\n     * If an investor is viewing it, percentage should be displayed.\r\n     *\r\n     * If an issuer or admin is viewing it, number should be displayed.\r\n     */\r\n    displayVote = type => {\r\n        const {\r\n            // user,\r\n            votes\r\n        } = this.props;\r\n\r\n        let yesVotes = 0;\r\n        let noVotes = 0;\r\n\r\n        votes.forEach(vote => {\r\n            const voted = vote.voted;\r\n            if (voted !== '') {\r\n                if (voted) {\r\n                    yesVotes += 1;\r\n                } else {\r\n                    noVotes += 1;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (type) {\r\n            return yesVotes;\r\n        } else {\r\n            return noVotes\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Get investor vote\r\n *\r\n * @param votes\r\n * @param user\r\n * @returns {null|*}\r\n */\r\nconst getInvestorVote = (votes, user) => {\r\n    if (votes.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    let investorVoteIndex = votes.findIndex(vote => vote.investorID === user.id);\r\n    // investor has voted\r\n    if (investorVoteIndex !== -1) {\r\n        return votes[investorVoteIndex];\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * Comment dialog - displayed when the Investor clicks on the Comment button\r\n */\r\nclass CommentDialog extends Component {\r\n\r\n    onClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onCommentTextChanged = event => {\r\n        this.props.onCommentTextChanged(event);\r\n    };\r\n\r\n    onSubmitCommentClick = () => {\r\n        this.props.onSubmitCommentClick();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            open,\r\n            project,\r\n            commentText,\r\n            commentSubmitClick\r\n        } = this.props;\r\n\r\n        if (!project) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Dialog fullWidth open={open} onClose={this.onClose}>\r\n                <DialogTitle>Make a comment</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText align=\"left\">Please enter your comment here.</DialogContentText>\r\n                    <InputBase error={commentText.trim().length === 0 && commentSubmitClick} name=\"commentText\" value={commentText} onChange={this.onCommentTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                </DialogContent>\r\n                <DialogActions style={{paddingTop: 20, paddingBottom: 20, paddingRight: 24}}>\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onClose}>Cancel</Button>\r\n                    <Button disabled={commentText.trim().length > 0 && commentSubmitClick} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" onClick={this.onSubmitCommentClick}>Post comment</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Reply input area\r\n */\r\nclass CommentReplyInputArea extends Component {\r\n\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            replyText\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column marginTop={30} width=\"auto\">\r\n                <InputBase name=\"replyText\" value={replyText} onChange={this.onTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                <FlexView marginTop={18} width=\"100%\" hAlignContent=\"right\">\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" className={css(sharedStyles.no_text_transform)} onClick={() => this.onToggleReplyToComment(null, null)}>Cancel</Button>\r\n                    <Button disabled={replyText.trim().length === 0} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={this.onSubmitCommentReply}>Submit</Button>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectDetailsMain);\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    gray_text: {\r\n        color: colors.gray_700\r\n    },\r\n\r\n    faq_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none',\r\n        backgroundColor: colors.white,\r\n        marginBottom: 12,\r\n        ':hover': {\r\n            backgroundColor: colors.gray_50\r\n        }\r\n    },\r\n\r\n    border_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 14\r\n    },\r\n\r\n    admin_state_control_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 24,\r\n        backgroundColor: colors.gray_100\r\n    },\r\n\r\n    sticky_body_sections_bar: {\r\n        position: \"sticky\",\r\n        top: 0,\r\n        backgroundColor: colors.white,\r\n        zIndex: 1\r\n    },\r\n\r\n    main_body_section: {\r\n        minHeight: 600,\r\n        padding: 15,\r\n        backgroundColor: colors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass PrivacyPolicyPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Privacy policy\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.privacyPolicy\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.privacyPolicy.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PrivacyPolicyPage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass TermsOfUsePage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Terms of use\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.termsOfUse\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.termsOfUse.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(TermsOfUsePage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass RiskWarningPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row noGutters>\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Risk warning\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row noGutters>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.riskWarning\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.riskWarning.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarningPage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass CreatePitchTermsAndConditionsPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Row noGutters style={{backgroundColor: colors.gray_100}}>\r\n                                    <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}} style={{paddingTop: 30, paddingBottom: 30, paddingLeft: 12, paddingRight: 12}}>\r\n                                        <Typography variant=\"h5\" align=\"left\">\r\n                                            <b>{\"Create pitch terms and conditions\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.createPitchTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.createPitchTermsAndConditions.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CreatePitchTermsAndConditionsPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    FormLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\nconst subjects = [\r\n    \"I am an investor\",\r\n    \"I am looking to raise funds\",\r\n    \"I am a potential partner or supplier\",\r\n    \"Other query\"\r\n];\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authenticating: state.auth.authenticating,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    email: '',\r\n    subject: '-',\r\n    name: '',\r\n    phone: '',\r\n    description: '',\r\n\r\n    submitClick: false,\r\n    sending: false,\r\n    error: false,\r\n\r\n    hasSetData: false\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...initState\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.CONTACT_US : ROUTES.CONTACT_US_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Submit button is clicked\r\n     */\r\n    onSubmitClick = event => {\r\n        event.preventDefault();\r\n\r\n        const {\r\n            clubAttributes,\r\n            groupProperties,\r\n\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description\r\n        } = this.state;\r\n\r\n        if (email.trim().length === 0\r\n            || subject === \"-\"\r\n            || name.trim().length === 0\r\n            || description.trim().length === 0\r\n        ) {\r\n            this.setState({\r\n                submitClick: true\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sending: true\r\n        });\r\n\r\n        let groupID = groupProperties ? groupProperties.anid : \"InvestWestSupport\";\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_ENQUIRY,\r\n                data: {\r\n                    sender: email.toLowerCase(),\r\n                    receiver: groupID,\r\n                    subject,\r\n                    description,\r\n                    senderName: name,\r\n                    senderPhone: phone\r\n                }\r\n            })\r\n            .then(() => {\r\n                this.setState({\r\n                    ...initState\r\n                });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Your email has been successfully sent.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n\r\n                realtimeDBUtils\r\n                    .logContactUsEnquiry({\r\n                        userID: user ? user.id : null,\r\n                        anid: !groupProperties ? \"Invest West super admin\" : groupProperties.anid,\r\n                        email: email.toLowerCase(),\r\n                        name,\r\n                        phone,\r\n                        subject,\r\n                        description\r\n                    })\r\n                    .then(enquiryID => {\r\n                        // track activity for authenticated user\r\n                        if (user) {\r\n                            realtimeDBUtils\r\n                                .trackActivity({\r\n                                    userID: user.id,\r\n                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                    interactedObjectLocation: DB_CONST.CONTACT_US_ENQUIRIES_CHILD,\r\n                                    interactedObjectID: enquiryID,\r\n                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY.replace(\"%group%\", groupProperties.displayName)\r\n                                });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    error: true,\r\n                    sending: false\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            authenticating,\r\n            userLoaded,\r\n            clubAttributesLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description,\r\n            submitClick,\r\n            sending\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    marginTop={30}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={colors.primaryColor}\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || !clubAttributesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    marginTop={20}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <Row noGutters style={{padding: 14}}>\r\n                    <Col xs={12} sm={12} md={{span: 11, offset: 1}} lg={{span: 5, offset: 2}}>\r\n                        <form onSubmit={this.onSubmitClick}>\r\n                            <FlexView column marginTop={40}>\r\n                                <Typography variant=\"h4\">\r\n                                    <b>Contact Us</b>\r\n                                </Typography>\r\n\r\n                                <FlexView width=\"100%\" marginTop={40}>\r\n                                    <FormControl fullWidth required error={submitClick && email.trim().length === 0}>\r\n                                        <FormLabel> Your email address</FormLabel>\r\n                                        <TextField value={email} name=\"email\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && email.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth required error={submitClick && subject === \"-\"}>\r\n                                        <FormLabel>\r\n                                            Subject\r\n                                        </FormLabel>\r\n                                        <Select name=\"subject\" value={subject} variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} input={<OutlinedInput/>} error={submitClick && subject === \"-\"} >\r\n                                            <MenuItem value={\"-\"} key={-1}>\r\n                                                -\r\n                                            </MenuItem>\r\n                                            {\r\n                                                subjects.map((subject, index) => (\r\n                                                    <MenuItem\r\n                                                        value={subject}\r\n                                                        key={index}\r\n                                                    >\r\n                                                        {subject}\r\n                                                    </MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Name\r\n                                        </FormLabel>\r\n                                        <TextField value={name} name=\"name\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && name.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Phone number\r\n                                        </FormLabel>\r\n                                        <TextField value={phone} name=\"phone\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n                            </FlexView>\r\n\r\n                            <FlexView width=\"100%\" marginTop={25}>\r\n                                <FormControl fullWidth required error={submitClick && description.trim().length === 0}>\r\n                                    <FormLabel>\r\n                                        Description\r\n                                    </FormLabel>\r\n                                    <TextField value={description} name=\"description\" variant=\"outlined\" margin=\"dense\" multiline rows={5} rowsMax={5} onChange={this.onTextChanged} error={submitClick && description.trim().length === 0}/>\r\n                                    <FormHelperText>\r\n                                        Please enter the details of your request. A member of our support team will respond as soon as possible.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {\r\n                                sending\r\n                                    ?\r\n                                    <FlexView marginTop={30} width=\"100%\" hAlignContent=\"center\">\r\n                                        <HashLoader\r\n                                            color={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            <Row\r\n                            >\r\n                                <Col xs={12} sm={12} md={4} lg={4} style={{width: \"100%\", marginTop: 50}}>\r\n                                    <FormControl fullWidth>\r\n                                        <Button type=\"submit\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} color=\"primary\" fullWidth>\r\n                                            Submit\r\n                                        </Button>\r\n                                    </FormControl>\r\n                                </Col>\r\n                            </Row>\r\n                        </form>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Footer/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactUs);","import React, {Component} from 'react';\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Paper,\r\n    Tab,\r\n    Tabs,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport RestrictedIcon from '@material-ui/icons/VpnLock';\r\nimport PrivateIcon from '@material-ui/icons/LockOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ContactSupportIcon from '@material-ui/icons/ContactSupport';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork())\r\n    }\r\n};\r\n\r\nclass HelpPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            helpType: DB_CONST.TYPE_INVESTOR,\r\n            autoSwitching: true,\r\n            expandedPanel: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.HELP : ROUTES.HELP_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        this.autoSwitchToAppropriateHelpTab();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.autoSwitchToAppropriateHelpTab();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Switch to the appropriate Help tab based on user's type\r\n     */\r\n    autoSwitchToAppropriateHelpTab = () => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            helpType,\r\n            autoSwitching\r\n        } = this.state;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            // when the user just opened this Help page\r\n            // detect if the type of the user to automatically switch the Help tab\r\n            // this should only happen once\r\n            if (user.type !== helpType) {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        helpType: user.type,\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            } else {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle tab changed\r\n     *\r\n     * @param event\r\n     * @param newValue\r\n     */\r\n    handleTabChanged = (event, newValue) => {\r\n        this.setState({\r\n            helpType: newValue,\r\n            expandedPanel: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle panel changed\r\n     *\r\n     * @param panel\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    handleExpandPanel = panel => (event, isExpanded) => {\r\n        this.setState({\r\n            expandedPanel: isExpanded ? panel : false\r\n        });\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            helpType\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !user\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingBottom: 50}}>\r\n                <Row noGutters style={{marginTop: 40, marginBottom: 60}}>\r\n                    <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}}>\r\n                        <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20}>\r\n                            <ContactSupportIcon\r\n                                style={{\r\n                                    fontSize: \"7em\",\r\n                                    color:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}\r\n                            />\r\n                        </FlexView>\r\n                        <Typography variant=\"h4\" align=\"center\" color=\"primary\">\r\n                            How can we help you?\r\n                        </Typography>\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" marginTop={40}>\r\n                                    <Paper elevation={2} style={{width: \"100%\"}}>\r\n                                        <Tabs indicatorColor=\"primary\" textColor=\"primary\" variant=\"fullWidth\" value={helpType} onChange={this.handleTabChanged}>\r\n                                            <Tab value={DB_CONST.TYPE_INVESTOR} label=\"Investor\" className={css(sharedStyles.no_text_transform)}/>\r\n                                            <Tab value={DB_CONST.TYPE_ISSUER} label=\"Issuer\" className={css(sharedStyles.no_text_transform)}/>\r\n                                        </Tabs>\r\n                                    </Paper>\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    user.type === DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        this.renderGroupAdminHelp()\r\n                        :\r\n                        helpType === DB_CONST.TYPE_INVESTOR\r\n                            ?\r\n                            this.renderInvestorHelp()\r\n                            :\r\n                            this.renderIssuerHelp()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render group admin help\r\n     */\r\n    renderGroupAdminHelp = () => {\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n        /** Group admin guide  */\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_navigating_invest_west'} onChange={this.handleExpandPanel('group_admin_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                    Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                    tutorial showing the key functions of the site.\r\n                                </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the My dashboard button at the top right of the page. This will take you to your unique dashboard where you can access all the sites functions.</Typography>\r\n                                    <img alt=\"group_admin_help_my_dashboard\" src={require(\"../../img/group_admin_help_my_dashboard.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons; home, settings, change password, audit log, explore offers, explore groups, forums, help and logout</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/group_admin_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView\r\n                                    column\r\n                                >\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your group. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"group_admin_help_notifications\" src={require(\"../../img/group_admin_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Home page */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.4. Home page</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The home page will display all the group management functions, from this page you can manage group members, manage access requests to your group, manage the groups offers and manage group admins.</Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Manage group users */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_user_management'} onChange={this.handleExpandPanel('group_admin_help_user_management')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. User management\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The manage group members tab is used to manage exiting members, invite new users and view details of the groups users. To access this function, click on the manage group members tab from the home page. From this section you can view all user's names, emails, user types, the date invited/requested to join, registration status and the date they registered.</Typography>\r\n                                <img alt=\"group_admin_help_user_management\" src={require(\"../../img/group_admin_help_user_management.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Inviting a new user */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Inviting a new user</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage group members tab you can invite a new user. You will need the users title, first name, last name, email and user type. To invite a new user, click on the Invite new user button.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_01\" src={require(\"../../img/group_admin_help_inviting_a_new_user_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">After clicking the button, enter the users details and select Issuer or Investor. An Issuer is a business owner or entrepreneur who will create their own offer. An Investor is someone who is looking to invest in offers and will view offers. Click the send button to send the invite to the users email. If the user does not receive the invitation, you can resend the invite (see resending invites in section 2.2). You may need to ask users to check their junk or spam folder.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_02\" src={require(\"../../img/group_admin_help_inviting_a_new_user_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Resending invites */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Resending invites</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage group members tab you can resend invites to users who have previously been invited but have not yet registered.  Once in the invitation and registrations tab select the user who has already been invited and click on the resend button. Please remind any user who has not received their invites to check their junk or spam folders in their email account.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_03\" src={require(\"../../img/group_admin_help_inviting_a_new_user_03.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 3. Manage access requests */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_access_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_access_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Manage access requests\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The access request tab is used to accept or reject investors from joining your group. Other users on the platform can request to join your group to gain access to your groups offers. Click on the access requests tab and this will show any pending requests, from there you can accept or reject individual requests.</Typography>\r\n                                <img alt=\"group_admin_help_manage_access_requests\" src={require(\"../../img/group_admin_help_manage_access_requests.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 4. Manage group members */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_group_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Manage group members\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>To manage all members in your group, click manage group members from the home page. The user management page allows you to view and modify group members information; be aware you can only edit the information for invited group members and not external group members who joined the group through an access request.  To view a users information/activity or edit their details click on their name in the list or alternatively you can search by email address.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_requests\" src={require(\"../../img/group_admin_help_manage_group_members.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>If a user needs to be blocked or removed from the platform, please contact us support@investwest.online for assistance.</Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Manage offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_offers'} onChange={this.handleExpandPanel('group_admin_help_manage_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Manage offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>From the manage offers tab, you can view and edit all your groups offers. The dropdown will show the offers title, its creator, its fundraising goal, and status.</Typography>\r\n\r\n                                {/** Viewing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Viewing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view an offer, open the manage offers tab and click on the title of the offer or you can also search for an offer by name.</Typography>\r\n                                    <img alt=\"group_admin_help_viewing_an_offer\" src={require(\"../../img/group_admin_help_viewing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Accepting and rejecting an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Accepting and rejecting an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>The Invest West process starts with an issuer creating an offer. The new offer will appear in your manage offers table, the bell icon will also notify you that an offer requires your attention. Newly submitted offers show a status of Submitted. Awaiting group admin review. From this section you can view each offer by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer\" src={require(\"../../img/group_admin_help_accept_reject_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>To accept or reject the offer scroll down to the bottom of the page and click on the control phases tab. From here you can change the offers default visibility (see what the different levels of visibility mean in section 10.1) as well as accept or reject the offer.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer_2\" src={require(\"../../img/group_admin_help_accept_reject_2_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Editing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a group admin you can edit an offers details if necessary. This can be done in the manage offers tab. To edit an offer, you first need to view it by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_01\" src={require(\"../../img/group_admin_help_edit_offer_01.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        Then you can click on the edit button on the \"Edit offer\" button.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_02\" src={require(\"../../img/group_admin_help_edit_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Temporarily closing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.4. Temporarily closing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a group admin you can temporarily close any offer (stop it being visible to any users). This can be done in the manage offers tab. Select the title of the offer (see viewing an offer in section 5.1), scroll down the bottom of the page, then click on control phases tab and press the Close temporally button.</Typography>\r\n                                    <img alt=\"group_admin_help_temporarily_closing_an_offer\" src={require(\"../../img/group_admin_help_temporarily_closing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Reopening a temporarily closed offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.5. Reopening a temporarily closed offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        If an offer has been temporally closed (see temporarily closing an offer in\r\n                                        section 5.4), it can be re-opened. This can be done in the manage investment\r\n                                        opportunities tab. Select the title of the offer (see viewing an offer in\r\n                                        section 5.1), from here scroll down the bottom of the page, then click on\r\n                                        control phases tab and press the \"Open again\" button. Please note, an offer can\r\n                                        only be re-opened if it is temporarily closed.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_reopening_a_temporarily_closed_offer\" src={require(\"../../img/group_admin_help_reopening_a_temporarily_closed_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Manage group admins */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_admins'} onChange={this.handleExpandPanel('group_admin_help_manage_group_admins')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Manage group admins\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">This page allows you to add another Group Admin to the Group. Please be advised, only add group admins if essential as each new admin will have full administer rights to the group. To add a group admin, click on the mange group admins tab, then click on the Add new group admin button and enter their email address and click the Add button.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_admins\" src={require(\"../../img/group_admin_help_manage_group_admins.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 7. Explore offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_offers'} onChange={this.handleExpandPanel('group_admin_help_explore_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Exploring offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore offers made by other issuers click on the Explore offers button in the navigation bar. This page provides a view how Investors view offers. This page can also be used to give issuers and group admins an idea of how offers are structured.</Typography>\r\n                                <img alt=\"group_admin_help_explore_offers\" src={require(\"../../img/group_admin_help_explore_offers.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Explore groups */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_groups'} onChange={this.handleExpandPanel('group_admin_help_explore_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the Explore groups button in the navigation bar. </Typography>\r\n                                <img alt=\"group_admin_help_explore_groups\" src={require(\"../../img/group_admin_help_explore_groups.png\").default} className={css(styles.image_style)}\r\n                                />\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 9. Resources */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_resources'} onChange={this.handleExpandPanel('group_admin_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    9. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore resource on Invest West, click on the Resources button in the navigation bar. From this page you can view a range of information and services applicable to you and your users.</Typography>\r\n                                <img alt=\"group_admin_help_resources\" src={require(\"../../img/group_admin_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 10. Settings */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'group_admin_help_settings'} onChange={this.handleExpandPanel('group_admin_help_settings')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    10. Settings\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The settings page allows you to configure the groups settings. This page allows you to add a group description, change the groups website, alter the colour scheme, manage the default visibility of the group, configure issuer settings and edit the groups FAQs. This page can be accessed by clicking on the settings button in the navigation bar. To view the groups details from the perspective of an external user not in your group click on the View groups public page button.</Typography>\r\n                                <img alt=\"group_admin_help_settings\" src={require(\"../../img/group_admin_help_settings.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Visibility level */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>10.1. Visibility level</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>As the group admin you can set the visibility level for offers created by your Group. With Invest west having multiple groups the level of visibility is used to define which of the groups investment opportunities are visible to other users.</Typography>\r\n\r\n                                    {/** Public */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.1. Public</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting Public allows all Invest West users (including users who are not a member of your group) to see an offers full details and also interact with the offer. Here is an example of a public offer, where all information on the offer is visible.</Typography>\r\n                                        <img alt=\"group_admin_help_public_offer\" src={require(\"../../img/group_admin_help_public_offer.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>When an offer is public all investors can also see the offers campaign, pitch deck, documents, comments and extra information.</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {/** Restricted */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.2. Restricted</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting Restricted allows all Invest West users (including users who are not a member of your group) to see the offers basic information only. Only member of your group will be able to see the offers full details. Here is an example of the same offer as above but restricted. Investors who are not members of your group will not be able to see the offers campaign, pitch deck, documents, comments or extra information. If they want to see this, they will be prompted to join your group.</Typography>\r\n                                        <img alt=\"group_admin_help_restricted_offer\" src={require(\"../../img/group_admin_help_restricted_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n\r\n                                    {/** Private */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.3. Private</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            Private allows only members of your group to see the offer's information. No\r\n                                            external user will be able to view the offer.\r\n                                        </Typography>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 11. Audit log */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_audit_log'} onChange={this.handleExpandPanel('group_admin_help_audit_log')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    11. Audit log\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The Audit Log is used to monitor all the activities made by the admins of the group.</Typography>\r\n                                <img alt=\"group_admin_help_audit_log\" src={require(\"../../img/group_admin_help_audit_log.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 12. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_password'} onChange={this.handleExpandPanel('group_admin_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    12. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the Forgot your password? button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                <img alt=\"group_admin_help_password\" src={require(\"../../img/group_admin_help_password.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Changing password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\">\r\n                                        <b>12.1. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To change your password, click on the \"Change password\" button in the navigation\r\n                                        bar. You will need to enter your old password then your new password twice.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_change_password\" src={require(\"../../img/group_admin_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 13. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_logging_out'} onChange={this.handleExpandPanel('group_admin_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    13. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"group_admin_help_logging_out\" src={require(\"../../img/group_admin_help_logging_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render investor help\r\n     */\r\n    renderInvestorHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_navigating_invest_west'} onChange={this.handleExpandPanel('investor_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>Welcome to Invest West, we are excited to work with you. Here is a basic tutorial showing the key functionalities of the site. </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">When you have logged in you can view your dashboard by clicking the My dashboard button at the top right of the page. This will take you to your unique dashboard where you can access all the sites functionality.</Typography>\r\n                                    <img alt=\"investor_help_my_dashboard\" src={require(\"../../img/investor_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons home, profile button, my pledges, change password, explore groups, forums button, the contact us button, help and the logout button.</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/investor_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"investor_help_notifications\" src={require(\"../../img/investor_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_offers'} onChange={this.handleExpandPanel('investor_help_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. Offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The home page will display all the offers available to you, and their relevant information.</Typography>\r\n\r\n                                {/** Viewing offers */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Viewing offers</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">To view and interact with an offer, you need to click on that offer. The Icon at the bottom right of each tile shows the visibility of the offer. There are three visibility settings\r\n                                        <br/><br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                <PublicIcon style={{marginRight: 8}}/>\r\n                                                Public offers are viewable to all investors on the system,\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <RestrictedIcon style={{marginRight: 8}}/>\r\n                                                Restricted offers are publicly viewable but with limited information\r\n                                                and\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <PrivateIcon style={{marginRight: 8}}/>\r\n                                                Private offers are only viewable to investors that belong to the\r\n                                                same group as the offer.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                 {/** Viewing the campaign */}\r\n                                 <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Viewing the campaign</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1), the information about the offer can be found down the page. You can see the campaign, attached documents, comments and see any extra information. To see the campaign, scroll down to the bottom of the page and click on campaign tab, this will contain the campaign information in the form of text or a document; click on the document to download it.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers_campaign.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Commenting on an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Commenting on an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1) you can comment on that offer. Comments are public and all users can view them. To make a comment navigate to the comments section at the bottom of the offer page and click on the investor comments button.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_pitch_phase_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography><b>Note: You cannot interact with an offer until you have completed your self-certification form. See 5.3.</b></Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.4. Contacting the fundraiser</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1) you can contact the fundraiser by clicking the Contact us button on the right hand side of the page.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_contacting_fundraiser.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography><b>Note: You cannot interact with an offer until you have completed your self-certification form. See 5.3.</b></Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'investor_help_exploring_groups'} onChange={this.handleExpandPanel('investor_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups and request to join them by clicking on the Explore groups button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_exploring_groups\" src={require(\"../../img/investor_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                       {/** 4. Resources */}\r\n                       <ExpansionPanel expanded={expandedPanel === 'investor_help_resources'} onChange={this.handleExpandPanel('investor_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resources on Invest West, click on the Resources button in the navigation bar. From this page you can view a range of content for investors, business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"investor_help_resources\" src={require(\"../../img/investor_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Your profile */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_your_profile'} onChange={this.handleExpandPanel('investor_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and complete your self-certification form. To access your profile page, click on the Profile button in the navigation bar. You need to complete your self-certification form to interact with any offer.</Typography>\r\n                                    <img alt=\"investor_help_profile\" src={require(\"../../img/investor_help_profile.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add your LinkedIn account by inserting a URL to your LinkedIn profile in, dont forget to click the save button after you make any changes. You can also update your profile picture by clicking on the update profile picture button and attaching a photo. To view how users will see your profile click on the view my public profile button in the top right-hand side of the profile page.</Typography>\r\n                                    <img alt=\"investor_help_editing_your_profile\" src={require(\"../../img/investor_help_editing_your_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Setting up a business profile is optional, to do this you need to click on the I want to upload my business profile button.</Typography>\r\n                                    <img alt=\"investor_help_setting_up_business_profile\" src={require(\"../../img/investor_help_setting_up_business_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Self-certification */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Self-certification</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">All Invest West users must complete a self-certification form. You can do this in the bottom of the Profile page. Select the appropriate statement for your circumstances from the drop-down box and read the full statement carefully. You will be prompted to recertify every 12 months.</Typography>\r\n                                    <img alt=\"investor_help_self_certification\" src={require(\"../../img/investor_help_self_certification.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_password'} onChange={this.handleExpandPanel('investor_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph\r\n                                    >\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the Forgot your password? button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"investor_help_reset_password\" src={require(\"../../img/investor_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password click on the Change password button in the navigation bar. You will need to enter your old password then your new password twice. If you dont know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"investor_help_change_password\" src={require(\"../../img/investor_help_change_password.png\").default}  className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                   {/** 7. Support */}\r\n                   <ExpansionPanel expanded={expandedPanel === 'investor_help_support'} onChange={this.handleExpandPanel('investor_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the contact us button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_support_01\" src={require(\"../../img/investor_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the contact us button at the top right of the page.</Typography>\r\n                                <img alt=\"investor_help_support_02\" src={require(\"../../img/investor_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_logging_out'} onChange={this.handleExpandPanel('investor_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"investor_help_log_out\" src={require(\"../../img/investor_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render issuer help\r\n     */\r\n    renderIssuerHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row\r\n                noGutters\r\n                style={{\r\n                    marginBottom: 50\r\n                }}\r\n            >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_navigating_invest_west'} onChange={this.handleExpandPanel('issuer_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                        tutorial showing the key functions of the site.\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the My dashboard button at the top right of the page. This will take you to your unique dashboard where you can access all the sites functionality. The home page will display all the offers on Invest West.</Typography>\r\n                                    <img alt=\"issuer_help_my_dashboard\" src={require(\"../../img/issuer_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can get around using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three white lines. On the navigation bar there are nine main buttons; home, profile, change password, explore offers, explore groups, forums, contact us, help and the logout.</Typography>\r\n                                    <img alt=\"issuer_help_navigation_bar\" src={require(\"../../img/issuer_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"issuer_help_notifications\" src={require(\"../../img/issuer_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                         {/** 2. My offers */}\r\n                         <ExpansionPanel expanded={expandedPanel === 'issuer_help_my_offers'} onChange={this.handleExpandPanel('issuer_help_my_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. My offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Creating a new offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Creating a new offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        You need to set up a business profile before you can create your first offer (see setting up your business profile in section 5.2). \r\n                                        <br/><br/>\r\n                                        To create a new offer, click on the start a new offer button located at the top left of the home page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_01\" src={require(\"../../img/issuer_help_create_new_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you have clicked this button you will be taken to the five-step process for creating your offer, the sections marked with an Asterix are mandatory and must be filled out. You can save your funding round at any point and return to edit it later by clicking the save button located at the bottom right of the page.</Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_02\" src={require(\"../../img/issuer_help_create_new_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you submit your offer you will be notified that it has been successfully uploaded. It will not be published until it has been checked and approved by your Group Administrator. You will be notified once your offer is approved (or rejected). If your offer is rejected, you will get an email with feedback from your Group Administrator.</Typography>\r\n                                </FlexView>\r\n\r\n                                <br/>\r\n\r\n                                {/** Managing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Managing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">You can manage your offers from the My offers page, to view and edit an offer click on the offers title.</Typography>\r\n                                    <img alt=\"issuer_help_manage_offer\" src={require(\"../../img/issuer_help_manage_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                                    <br/>\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Editing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To edit your offer, click on the \"Edit offer\" button on the offers main page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_edit_offer\" src={require(\"../../img/issuer_help_edit_offer.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    {/** Replying to comments */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            <b>2.3.1. Replying to comments</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">If an investor comments on your offer you will be notified via the bell icon.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_01\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\">From the offers main page scroll down and click on the Investor comments tab, then click on the reply button to reply to the selected comment.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_02\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'issuer_help_exploring_groups'} onChange={this.handleExpandPanel('issuer_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the Explore offers button in the navigation bar. From this page you can click on specific groups to see the groups details.</Typography>\r\n                                <img alt=\"issuer_help_exploring_groups\" src={require(\"../../img/issuer_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 4. Resources */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_resources'} onChange={this.handleExpandPanel('issuer_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resource on Invest West, click on the Resources button in the navigation bar. From this page you can view a range of content for business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"issuer_help_resources\" src={require(\"../../img/issuer_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 5. Your profile */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_your_profile'} onChange={this.handleExpandPanel('issuer_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and upload formal documents. To access your profile page, click on the Profile button in the navigation bar. You need to set up a business profile before you can create your first offer.</Typography>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add in your LinkedIn account by inserting a URL to your LinkedIn profile, dont forget to click the save button after you make any changes. You can also update your profile picture by clicking on the update profile picture button and attaching a photo.</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_01\" src={require(\"../../img/issuer_help_edit_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view how investors will see your profile click on the view my public profile button in the top right-hand side of the profile page</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_02\" src={require(\"../../img/issuer_help_edit_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To take part in invest west activities you will need to set up your business profile. To set this up go to the profile page and scroll down to the business profile section. You will need to fill out all fields with a *.\r\n                                        <br/><br/>\r\n                                        You can enter your registered office manually or search for your address by entering the postcode. The trading address is automatically set to the same as the registered address, if this is not the case for your business uncheck the box and enter in your trading address.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_01\" src={require(\"../../img/issuer_help_setting_business_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">When adding a director click the add director button, type their full name in the box provide and then click the add button. You must have multiple directors, but you need a minimum of one. Once all the mandatory fields have been completed the Save button will become available and you can click this button to finish setting up your business profile.</Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_02\" src={require(\"../../img/issuer_help_setting_business_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_password'} onChange={this.handleExpandPanel('issuer_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the Forgot your password? button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"issuer_help_reset_password\" src={require(\"../../img/issuer_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password, click on the Change password button in the navigation bar. You will need to enter your old password then your new password twice. If you dont know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"issuer_help_change_password\" src={require(\"../../img/issuer_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 7. Support */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_support'} onChange={this.handleExpandPanel('issuer_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the contact us button in the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_support_01\" src={require(\"../../img/issuer_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the contact us button at the top right of the page.</Typography>\r\n                                <img alt=\"issuer_help_support_02\" src={require(\"../../img/issuer_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    \r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_logging_out'} onChange={this.handleExpandPanel('issuer_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To logout press the logout button at the bottom of the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_log_out\" src={require(\"../../img/issuer_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HelpPage);\r\n\r\nconst styles = StyleSheet.create({\r\n    image_style: {\r\n        objectFit: \"contain\"\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport React, {FormEvent} from \"react\";\r\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\n\r\nexport enum SignInEvents {\r\n    ResetAllStates = \"SignInEvents.ResetAllStates\",\r\n    TextChanged = \"SignInEvents.TextChanged\",\r\n    TogglePasswordVisibility = \"SignInEvents.TogglePasswordVisibility\",\r\n    SignInEmailError = \"SignInEvents.SignInEmailError\",\r\n    SignInPasswordError = \"SignInEvents.SignInPasswordError\",\r\n    ClearErrors = \"SignInEvents.ClearErrors\",\r\n    ToggleResetPasswordDialog = \"SignInEvents.ToggleResetPasswordDialog\",\r\n    ProcessingResetPasswordRequest = \"SignInEvents.ProcessingResetPasswordRequest\",\r\n    CompleteProcessingResetPasswordRequest = \"SignInEvents.CompleteProcessingResetPasswordRequest\"\r\n}\r\n\r\nexport interface SignInAction extends Action {\r\n}\r\n\r\nexport interface TextChangedAction extends SignInAction {\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport interface CompleteProcessingResetPasswordRequestAction extends SignInAction {\r\n    error?: string;\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: TextChangedAction = {\r\n            type: SignInEvents.TextChanged,\r\n            name: event.target.name,\r\n            value: event.target.value\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const togglePasswordVisibility: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: SignInEvents.TogglePasswordVisibility\r\n        });\r\n    }\r\n}\r\n\r\nexport const onSignInClick: ActionCreator<any> = (event: FormEvent) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            signInEmail,\r\n            signInPassword\r\n        } = getState().SignInLocalState;\r\n\r\n        event.preventDefault();\r\n\r\n        dispatch({\r\n            type: SignInEvents.ClearErrors\r\n        });\r\n\r\n        const email: string = signInEmail.trim().toLowerCase();\r\n        const password: string = signInPassword;\r\n\r\n        let allowSignIn: boolean = true;\r\n\r\n        if (email.length === 0) {\r\n            dispatch({\r\n                type: SignInEvents.SignInEmailError\r\n            });\r\n            allowSignIn = false;\r\n        }\r\n\r\n        if (password.length === 0) {\r\n            dispatch({\r\n                type: SignInEvents.SignInPasswordError\r\n            });\r\n            allowSignIn = false;\r\n        }\r\n\r\n        if (!allowSignIn) {\r\n            return;\r\n        }\r\n\r\n        return dispatch(signIn(email, password));\r\n    }\r\n}\r\n\r\nexport const toggleResetPasswordDialog: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: SignInEvents.ToggleResetPasswordDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const onSendResetPasswordClick: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: SignInEvents.ProcessingResetPasswordRequest\r\n        });\r\n\r\n        const completeAction: CompleteProcessingResetPasswordRequestAction = {\r\n            type: SignInEvents.CompleteProcessingResetPasswordRequest\r\n        }\r\n\r\n        try {\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.requestResetPasswordRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        email: getState().SignInLocalState.resetPasswordDialogEmail\r\n                    }\r\n                }\r\n            );\r\n            dispatch(toggleResetPasswordDialog());\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteLoadingDataAction,\r\n    CompleteRemovingAccessRequestAction,\r\n    CompleteSendingAccessRequestAction,\r\n    GroupDetailsAction,\r\n    GroupDetailsEvents\r\n} from \"./GroupDetailsActions\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport Error from \"../../models/error\";\r\nimport {AccessRequestInstance} from \"../../models/access_request\";\r\n\r\nexport interface GroupDetailsState {\r\n    group?: GroupProperties;\r\n    members?: InvitedUserWithProfile[];\r\n    offers?: ProjectInstance[];\r\n    accessRequestsInstances?: AccessRequestInstance[];\r\n\r\n    loadingData: boolean;\r\n    dataLoaded: boolean;\r\n\r\n    error?: Error;\r\n\r\n    sendingAccessRequest: boolean;\r\n    errorSendingAccessRequest?: Error;\r\n\r\n    removingAccessRequest: boolean;\r\n    errorRemovingAccessRequest?: Error;\r\n}\r\n\r\nconst initialState: GroupDetailsState = {\r\n    loadingData: false,\r\n    dataLoaded: false,\r\n\r\n    sendingAccessRequest: false,\r\n    removingAccessRequest: false\r\n}\r\n\r\nexport const hasNotLoadedData = (state: GroupDetailsState) => {\r\n    return !state.dataLoaded && !state.loadingData;\r\n}\r\n\r\nexport const isLoadingData = (state: GroupDetailsState) => {\r\n    return !state.dataLoaded && state.loadingData;\r\n}\r\n\r\nexport const successfullyLoadedData = (state: GroupDetailsState) => {\r\n    return state.dataLoaded && !state.loadingData && state.group && state.members && state.offers && state.error === undefined;\r\n}\r\n\r\nexport const hasAccessRequestsBeenSatisfied = (state: GroupDetailsState) => {\r\n    return successfullyLoadedData(state) && state.accessRequestsInstances !== undefined;\r\n}\r\n\r\nexport const hasErrorLoadingData = (state: GroupDetailsState) => {\r\n    return state.dataLoaded && !state.loadingData && state.error !== undefined;\r\n}\r\n\r\nexport const isSendingAccessRequest = (state: GroupDetailsState) => {\r\n    return state.sendingAccessRequest;\r\n}\r\n\r\nexport const hasErrorSendingAccessRequest = (state: GroupDetailsState) => {\r\n    return !isSendingAccessRequest(state) && state.errorSendingAccessRequest !== undefined;\r\n}\r\n\r\nexport const isRemovingAccessRequest = (state: GroupDetailsState) => {\r\n    return state.removingAccessRequest;\r\n}\r\n\r\nexport const hasErrorRemovingAccessRequest = (state: GroupDetailsState) => {\r\n    return !isRemovingAccessRequest(state) && state.errorRemovingAccessRequest !== undefined;\r\n}\r\n\r\nconst groupDetailsReducer = (state = initialState, action: GroupDetailsAction) => {\r\n    switch (action.type) {\r\n        case GroupDetailsEvents.LoadingData:\r\n            return {\r\n                ...initialState,\r\n                loadingData: true,\r\n                dataLoaded: false\r\n            }\r\n        case GroupDetailsEvents.CompleteLoadingData:\r\n            const completeLoadingDataAction: CompleteLoadingDataAction = action as CompleteLoadingDataAction;\r\n            return {\r\n                ...state,\r\n                loadingData: false,\r\n                dataLoaded: true,\r\n                group: completeLoadingDataAction.group !== undefined\r\n                    ? JSON.parse(JSON.stringify(completeLoadingDataAction.group))\r\n                    : state.group,\r\n                members: completeLoadingDataAction.members !== undefined\r\n                    ? [...completeLoadingDataAction.members]\r\n                    : state.members,\r\n                offers: completeLoadingDataAction.offers !== undefined\r\n                    ? [...completeLoadingDataAction.offers]\r\n                    : state.offers,\r\n                accessRequestsInstances: completeLoadingDataAction.accessRequestInstances !== undefined\r\n                    ? [...completeLoadingDataAction.accessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                error: completeLoadingDataAction.error !== undefined\r\n                    ? {detail: completeLoadingDataAction.error}\r\n                    : state.error\r\n            }\r\n        case GroupDetailsEvents.SendingAccessRequest:\r\n            return {\r\n                ...state,\r\n                sendingAccessRequest: true,\r\n                errorSendingAccessRequest: undefined\r\n            }\r\n        case GroupDetailsEvents.CompleteSendingAccessRequest:\r\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequest: false,\r\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\r\n            }\r\n        case GroupDetailsEvents.RemovingAccessRequest:\r\n            return {\r\n                ...state,\r\n                removingAccessRequest: true,\r\n                errorRemovingAccessRequest: undefined\r\n            }\r\n        case GroupDetailsEvents.CompleteRemovingAccessRequest:\r\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequest: false,\r\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default groupDetailsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    GroupDetailsState,\r\n    hasAccessRequestsBeenSatisfied,\r\n    hasErrorLoadingData,\r\n    isLoadingData, isRemovingAccessRequest, isSendingAccessRequest,\r\n    successfullyLoadedData\r\n} from \"./GroupDetailsReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {loadData, removeAccessRequest, sendAccessRequest} from \"./GroupDetailsActions\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport {dateInReadableFormat} from \"../../utils/utils\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {CheckCircle} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface GroupDetailsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    loadData: (viewedGroupUserName: string) => any;\r\n    sendAccessRequest: () => any;\r\n    removeAccessRequest: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        GroupDetailsLocalState: state.GroupDetailsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadData: (viewedGroupUserName: string) => dispatch(loadData(viewedGroupUserName)),\r\n        sendAccessRequest: () => dispatch(sendAccessRequest()),\r\n        removeAccessRequest: () => dispatch(removeAccessRequest())\r\n    }\r\n}\r\n\r\nclass GroupDetails extends Component<GroupDetailsProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n\r\n    componentDidMount() {\r\n        this.props.loadData(this.props.match.params.viewedGroupUserName);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            GroupDetailsLocalState,\r\n            sendAccessRequest,\r\n            removeAccessRequest\r\n        } = this.props;\r\n\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        // loading\r\n        if (isLoadingData(GroupDetailsLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\r\n                <BeatLoader\r\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                />\r\n            </Box>;\r\n        }\r\n\r\n        // error\r\n        if (hasErrorLoadingData(GroupDetailsLocalState) || !successfullyLoadedData(GroupDetailsLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\r\n                <Typography variant=\"h5\" color=\"error\" align=\"center\">Error loading page. Please retry.</Typography>\r\n            </Box>;\r\n        }\r\n\r\n        let groupMember: GroupOfMembership | undefined = undefined;\r\n        if (!currentAdmin) {\r\n            groupMember = AuthenticationState.groupsOfMembership.find(\r\n                groupOfMembership => groupOfMembership.group.anid === GroupDetailsLocalState.group?.anid);\r\n        }\r\n\r\n        let hasRequestedToAccessGroup: boolean = false;\r\n        if (hasAccessRequestsBeenSatisfied(GroupDetailsLocalState)) {\r\n            hasRequestedToAccessGroup = GroupDetailsLocalState.accessRequestsInstances\r\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === GroupDetailsLocalState.group?.anid) !== -1;\r\n        }\r\n\r\n        // successfully loaded\r\n        return <Box paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}>\r\n            {/** Header section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box>\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Row noGutters>\r\n                                    {/** Logo section */}\r\n                                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                        <Box display=\"flex\"justifyContent=\"center\" alignItems=\"center\">\r\n                                            <Image alt={`${GroupDetailsLocalState.group?.displayName} logo`} src={getGroupLogo(GroupDetailsLocalState.group ?? null) ?? undefined} style={{width: \"100%\", height: \"auto\", padding: 20, objectFit: \"scale-down\"}}/>\r\n                                        </Box>\r\n                                    </Col>\r\n\r\n                                    {/** Name section */}\r\n                                    <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                        <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\r\n                                            <Typography align=\"center\" variant=\"h4\">{GroupDetailsLocalState.group?.displayName}</Typography>\r\n\r\n                                            {/** Home/platform member + joined date (available for investor and issuer) */}\r\n                                            {\r\n                                                currentAdmin\r\n                                                    ? null\r\n                                                    : !groupMember\r\n                                                    ? <Box marginTop=\"25px\">\r\n                                                        {\r\n                                                            !hasRequestedToAccessGroup\r\n                                                                ? <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => sendAccessRequest()} disabled={isSendingAccessRequest(GroupDetailsLocalState)}>\r\n                                                                    {\r\n                                                                        isSendingAccessRequest(GroupDetailsLocalState)\r\n                                                                            ? \"Sending request ...\"\r\n                                                                            : \"Join Group\"\r\n                                                                    }\r\n                                                                </Button>\r\n                                                                : <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => removeAccessRequest()} disabled={isRemovingAccessRequest(GroupDetailsLocalState)}>\r\n                                                                    {\r\n                                                                        isRemovingAccessRequest(GroupDetailsLocalState)\r\n                                                                            ? \"Cancelling ...\"\r\n                                                                            : \"Cancel request\"\r\n                                                                    }\r\n                                                                </Button>\r\n                                                        }\r\n                                                    </Box>\r\n                                                    : <Box marginTop=\"25px\">\r\n                                                        <Box display=\"flex\" flexDirection=\"row\">\r\n                                                            <CheckCircle fontSize=\"small\" color=\"primary\"/>\r\n                                                            <Box width=\"6px\"/>\r\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n                                                                {\r\n                                                                    getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\r\n                                                                        ? \"Home member\"\r\n                                                                        : \"Platform member\"\r\n                                                                }\r\n                                                            </Typography>\r\n                                                        </Box>\r\n\r\n\r\n                                                        <Box marginTop=\"5px\">\r\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n                                                                Joined\r\n                                                                on: {dateInReadableFormat(groupMember.joinedDate)}\r\n                                                            </Typography>\r\n                                                        </Box>\r\n                                                    </Box>\r\n                                            }\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** About section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box marginTop=\"25px\">\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Typography variant=\"h6\">About</Typography>\r\n\r\n                                <Box marginTop=\"18px\" whiteSpace=\"pre-line\">\r\n                                    <Typography variant=\"body1\" align=\"left\">{GroupDetailsLocalState.group?.description}</Typography>\r\n                                </Box>\r\n\r\n                                <Box marginTop=\"18px\">\r\n                                    <Typography variant=\"body1\" align=\"left\">For more information, visit us at:&nbsp;\r\n                                        <CustomLink\r\n                                            url={GroupDetailsLocalState.group?.website ?? \"\"}\r\n                                            target=\"_blank\"\r\n                                            color=\"none\"\r\n                                            activeColor=\"none\"\r\n                                            activeUnderline={true}\r\n                                            component=\"a\"\r\n                                            childComponent={\r\n                                                GroupDetailsLocalState.group?.website ?? \"unknown\"\r\n                                            }/>\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Statistics section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box marginTop=\"25px\">\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Typography variant=\"h6\">Statistics</Typography>\r\n\r\n                                <Box marginTop=\"20px\" border={`1px solid ${colors.grey[\"300\"]}`} bgcolor={appColors.kick_starter_background_color}>\r\n                                    <Row>\r\n                                        <Col xs={12} sm={12} md={6} lg={6}>\r\n                                            <Box padding=\"18px\">\r\n                                                <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.members?.length}</Typography>\r\n                                                    <Box height=\"2px\"/>\r\n                                                <Typography variant=\"body1\" align=\"left\">Members</Typography>\r\n                                            </Box>\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6}>\r\n                                            <Box display=\"flex\" flexDirection=\"row\">\r\n                                                <Box>\r\n                                                    <Divider orientation=\"vertical\"/>\r\n                                                </Box>\r\n\r\n                                                <Box padding=\"18px\">\r\n                                                    <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.offers?.length}</Typography>\r\n\r\n                                                    <Box height=\"2px\"/>\r\n\r\n                                                    <Typography variant=\"body1\" align=\"left\">Investment opportunities</Typography>\r\n                                                </Box>\r\n                                            </Box>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Box>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupDetails);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass MarketingPreferencesPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Marketing preferences\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.marketingPreferences\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.marketingPreferences.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MarketingPreferencesPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from \"react-flexview\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport Profile from '../../shared-components/profile/Profile';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        admin: state.auth.user,\r\n        adminLoaded: state.auth.userLoaded,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited,\r\n        projectsTable_user: state.projectsTable.user\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n        editUserProfile_startOriginalUserChangedListener: () => dispatch(editUserActions.startOriginalUserChangedListener()),\r\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n        // projectsTable_stopListeningForProjectsChanged: () => dispatch(projectsTableActions.stopListeningForProjectsChanged()),\r\n        // projectsTable_stopListeningForPledgesChanged: () => dispatch(projectsTableActions.stopListeningForPledgesChanged()),\r\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor: () => dispatch(projectsTableActions.stopListeningForPledgesMadeByTableInvestor()),\r\n\r\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\r\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nclass ProfilePageEditable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            userToBeEdited: null,\r\n            userToBeEditedLoaded: false,\r\n            loadingUserToBeEdited: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.EDIT_USER_PROFILE : ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            loadAngelNetwork,\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser,\r\n            activitiesTable_setUser\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited\r\n        } = this.state;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n\r\n            if (admin && userToBeEdited) {\r\n                editUserProfile_setOriginalUserAndEditedUser(userToBeEdited);\r\n\r\n                // projectsTable_setUser(userToBeEdited);\r\n\r\n                activitiesTable_setUser(userToBeEdited);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n\r\n            // projectsTable_setUser,\r\n            // projectsTable_stopListeningForProjectsChanged,\r\n            // projectsTable_stopListeningForPledgesChanged,\r\n            // projectsTable_stopListeningForPledgesMadeByTableInvestor,\r\n\r\n            activitiesTable_setUser,\r\n            activitiesTable_stopListeningForActivitiesChanged,\r\n\r\n            editUserProfile_stopOriginalUserChangedListener\r\n        } = this.props;\r\n\r\n        // when click to go back,\r\n        // reset the user referenced in edit user profile\r\n        editUserProfile_setOriginalUserAndEditedUser(null);\r\n\r\n        // stop listening for user's profile changes if added\r\n        editUserProfile_stopOriginalUserChangedListener();\r\n\r\n        // reset the user references in projects table\r\n        // ---> avoid caches\r\n        // projectsTable_setUser(null);\r\n        // projectsTable_stopListeningForProjectsChanged();\r\n        // projectsTable_stopListeningForPledgesChanged();\r\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor();\r\n\r\n        // reset the user references in activities table\r\n        // ---> avoid caches\r\n        activitiesTable_setUser(null);\r\n        activitiesTable_stopListeningForActivitiesChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        // get user's id from the URL\r\n        const userToBeEditedID = this.props.match.params.userID;\r\n\r\n        const {\r\n            editUserProfile_startOriginalUserChangedListener\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited,\r\n            userToBeEditedLoaded,\r\n            loadingUserToBeEdited\r\n        } = this.state;\r\n\r\n        if (!userToBeEdited && !userToBeEditedLoaded && !loadingUserToBeEdited) {\r\n            this.setState({\r\n                userToBeEditedLoaded: false,\r\n                loadingUserToBeEdited: true\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeEditedID)\r\n                .then(user => {\r\n\r\n                    realtimeDBUtils\r\n                        .loadGroupsUserIsIn(userToBeEditedID)\r\n                        .then(groupsUserIsIn => {\r\n\r\n                            user.groupsUserIsIn = groupsUserIsIn;\r\n\r\n                            this.setState({\r\n                                userToBeEdited: JSON.parse(JSON.stringify(user)),\r\n                                userToBeEditedLoaded: true,\r\n                                loadingUserToBeEdited: false\r\n                            });\r\n\r\n                            // start listening for user's profile changes\r\n                            editUserProfile_startOriginalUserChangedListener();\r\n                        })\r\n                        .catch(error => {\r\n                            this.setState({\r\n                                userToBeEdited: null,\r\n                                userToBeEditedLoaded: true,\r\n                                loadingUserToBeEdited: false\r\n                            });\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        userToBeEdited: null,\r\n                        userToBeEditedLoaded: true,\r\n                        loadingUserToBeEdited: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            admin,\r\n            adminLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited,\r\n            userToBeEditedLoaded\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !adminLoaded\r\n            || !userToBeEditedLoaded\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !admin\r\n            || (admin && admin.type !== DB_CONST.TYPE_ADMIN)\r\n            || !userToBeEdited\r\n        ) {\r\n            return (\r\n                <PageNotFoundWhole/>\r\n            );\r\n        }\r\n\r\n        // the group admins are trying to open this page\r\n        // to edit profile of a user that is NOT a member of their group\r\n        if (!admin.superAdmin\r\n            && userToBeEdited.hasOwnProperty('groupsUserIsIn')\r\n            && userToBeEdited.groupsUserIsIn.findIndex(group => group.anid === admin.anid) === -1\r\n        ) {\r\n            return (\r\n                <PageNotFoundWhole/>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Body */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}} style={{marginTop: 30, marginBottom: 30}}>\r\n                        {\r\n                            !userToBeEdited\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Profile/>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageEditable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport {Box, Button, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\nconst logoHeightMobile: number = 160;\r\nconst logoHeight: number = 220;\r\n\r\ninterface FrontProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Front extends Component<FrontProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{padding: 0, position: \"fixed\", height: \"100% !important\", overflowY: \"auto\", top: 0}}>\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\" paddingX=\"30px\" paddingY=\"20px\">\r\n                        <CustomLink url={Routes.constructContactUsRoute(this.props.match.params)} color=\"black\" activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeUnderline={false} component=\"nav-link\" \r\n                        childComponent={\r\n                                <Typography variant=\"body1\">Contact us</Typography>\r\n                            }/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <CustomLink\r\n                            url={\r\n                                isAuthenticating(AuthenticationState)\r\n                                    ? \"\"\r\n                                    : !successfullyAuthenticated(AuthenticationState)\r\n                                    ? Routes.constructSignInRoute(this.props.match.params)\r\n                                    : Routes.constructDashboardRoute(this.props.match.params, ManageGroupUrlState, AuthenticationState)\r\n                            }\r\n                            color=\"black\"\r\n                            activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            activeUnderline={false}\r\n                            // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                            component=\"a\"\r\n                            childComponent={\r\n                                <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">\r\n                                    {\r\n                                        isAuthenticating(AuthenticationState)\r\n                                            ? \"\"\r\n                                            : !successfullyAuthenticated(AuthenticationState)\r\n                                            ? \"Sign in\"\r\n                                            : \"Dashboard\"\r\n                                    }\r\n                                </Button>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" minHeight=\"100vh\"\r\n                        bgcolor={\r\n                            toRGBWithOpacity(\r\n                                getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                0.12\r\n                            )\r\n                        }\r\n                    >\r\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" flexGrow={3} paddingY=\"50px\">\r\n                            {\r\n                                isValidatingGroupUrl(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Image\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            !routeContainsGroupName(ManageGroupUrlState)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : getGroupLogo(ManageGroupUrlState.group)\r\n                                        }\r\n                                        style={{\r\n                                            width: \"auto\",\r\n                                            height: MediaQueryState.isMobile ? logoHeightMobile : logoHeight\r\n                                        }}\r\n                                    />\r\n                            }\r\n\r\n                            <Box height=\"20px\"/>\r\n\r\n                            <Typography color=\"primary\" variant=\"h2\" align=\"center\">\r\n                                {\r\n                                    isValidatingGroupUrl(ManageGroupUrlState)\r\n                                        ? \"\"\r\n                                        : !routeContainsGroupName(ManageGroupUrlState)\r\n                                        ? \"Invest West\"\r\n                                        : ManageGroupUrlState.group?.displayName\r\n                                }\r\n                            </Typography>\r\n\r\n                            {\r\n                                routeContainsGroupName(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Box color={colors.blueGrey[\"500\"]} marginTop=\"20px\">\r\n                                        <Typography variant=\"h4\" align=\"center\">Connecting businesses and investors</Typography>\r\n                                    </Box>\r\n                            }\r\n                        </Box>\r\n\r\n                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                            <Image alt=\"front_footer\" src={require(\"../../img/front_page_cover_image.png\").default} style={{objectFit: \"fill\"}}/>\r\n                            <Box height=\"90px\"\r\n                                bgcolor={\r\n                                    toRGBWithOpacity(\r\n                                        getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                        0.75\r\n                                    )\r\n                                }\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Front);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport React from \"react\";\r\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/utils\";\r\n\r\nexport enum ResetPasswordEvents {\r\n    VerifyingCode = \"ResetPasswordEvents.VerifyingCode\",\r\n    CompleteVerifyingCode = \"ResetPasswordEvents.CompleteVerifyingCode\",\r\n    TextChanged = \"ResetPasswordEvents.TextChanged\",\r\n    ConfirmingResetPassword = \"ResetPasswordEvents.ConfirmingResetPassword\",\r\n    CompleteConfirmingResetPassword = \"ResetPasswordEvents.CompleteConfirmingResetPassword\"\r\n}\r\n\r\nexport interface ResetPasswordAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteVerifyingCodeAction extends ResetPasswordAction {\r\n    actionCode: string | null;\r\n    email: string | null;\r\n    error?: string;\r\n}\r\n\r\nexport interface TextChangedAction extends ResetPasswordAction {\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport interface CompleteConfirmingResetPasswordAction extends ResetPasswordAction {\r\n    error?: string;\r\n}\r\n\r\nexport const verifyCode: ActionCreator<any> = (code: string | null) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ResetPasswordEvents.VerifyingCode\r\n        });\r\n\r\n        const completeAction: CompleteVerifyingCodeAction = {\r\n            type: ResetPasswordEvents.CompleteVerifyingCode,\r\n            actionCode: null,\r\n            email: null\r\n        };\r\n\r\n        if (code === null) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            completeAction.actionCode = code;\r\n            completeAction.email = await firebase.auth().verifyPasswordResetCode(code);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const confirmPasswordReset: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            password,\r\n            confirmedPassword,\r\n            actionCode\r\n        } = getState().ResetPasswordLocalState;\r\n\r\n        const completeAction: CompleteConfirmingResetPasswordAction = {\r\n            type: ResetPasswordEvents.CompleteConfirmingResetPassword\r\n        };\r\n\r\n        if (password.trim().length === 0 || confirmedPassword.trim().length === 0) {\r\n            completeAction.error = \"Please fill in the required fields.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (password !== confirmedPassword) {\r\n            completeAction.error = \"Passwords do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (password.trim().length < 8) {\r\n            completeAction.error = \"Password must have at least 8 characters.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\r\n            completeAction.error = \"Please select a stronger password.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        dispatch({\r\n            type: ResetPasswordEvents.ConfirmingResetPassword\r\n        });\r\n\r\n        try {\r\n            await firebase.auth().confirmPasswordReset(actionCode as string, password);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: TextChangedAction = {\r\n            type: ResetPasswordEvents.TextChanged,\r\n            name: event.target.name,\r\n            value: event.target.value\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}","import {\r\n    CompleteProcessingResetPasswordRequestAction,\r\n    SignInAction,\r\n    SignInEvents,\r\n    TextChangedAction\r\n} from \"./SignInActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface SignInState {\r\n    signInEmail: string;\r\n    signInPassword: string;\r\n    showPassword: boolean;\r\n\r\n    errorSignInEmail: boolean;\r\n    errorSignInPassword: boolean;\r\n\r\n    showResetPasswordDialog: boolean;\r\n    resetPasswordDialogEmail: string;\r\n    resetPasswordDialogProcessing: boolean;\r\n    resetPasswordDialogEmailSent: boolean;\r\n    resetPasswordDialogError?: Error;\r\n}\r\n\r\nconst initialState: SignInState = {\r\n    signInEmail: \"\",\r\n    signInPassword: \"\",\r\n    showPassword: false,\r\n\r\n    errorSignInEmail: false,\r\n    errorSignInPassword: false,\r\n\r\n    showResetPasswordDialog: false,\r\n    resetPasswordDialogEmail: \"\",\r\n    resetPasswordDialogProcessing: false,\r\n    resetPasswordDialogEmailSent: false\r\n}\r\n\r\nexport const successfullySentResetPassword = (state: SignInState) => {\r\n    return state.resetPasswordDialogEmailSent && state.resetPasswordDialogError === undefined;\r\n}\r\n\r\nexport const errorSendingResetPassword = (state: SignInState) => {\r\n    return state.resetPasswordDialogError !== undefined;\r\n}\r\n\r\nexport const isProcessingResetPasswordRequest = (state: SignInState) => {\r\n    return state.resetPasswordDialogProcessing;\r\n}\r\n\r\nconst signInReducer = (state: SignInState = initialState, action: SignInAction) => {\r\n    switch (action.type) {\r\n        case SignInEvents.ResetAllStates:\r\n            return {\r\n                ...initialState\r\n            }\r\n        case SignInEvents.TextChanged:\r\n            const textChangedAction: TextChangedAction = (action as TextChangedAction);\r\n            return {\r\n                ...state,\r\n                [textChangedAction.name]: textChangedAction.value\r\n            }\r\n        case SignInEvents.TogglePasswordVisibility:\r\n            return {\r\n                ...state,\r\n                showPassword: !state.showPassword\r\n            }\r\n        case SignInEvents.SignInEmailError:\r\n            return {\r\n                ...state,\r\n                errorSignInEmail: true\r\n            }\r\n        case SignInEvents.SignInPasswordError:\r\n            return {\r\n                ...state,\r\n                errorSignInPassword: true\r\n            }\r\n        case SignInEvents.ClearErrors:\r\n            return {\r\n                ...state,\r\n                errorSignInEmail: false,\r\n                errorSignInPassword: false\r\n            }\r\n        case SignInEvents.ToggleResetPasswordDialog:\r\n            return {\r\n                ...state,\r\n                showResetPasswordDialog: !state.showResetPasswordDialog,\r\n                resetPasswordDialogEmail: \"\",\r\n                resetPasswordDialogError: undefined\r\n            }\r\n        case SignInEvents.ProcessingResetPasswordRequest:\r\n            return {\r\n                ...state,\r\n                resetPasswordDialogProcessing: true,\r\n                resetPasswordDialogError: undefined\r\n            }\r\n        case SignInEvents.CompleteProcessingResetPasswordRequest:\r\n            const completeAction: CompleteProcessingResetPasswordRequestAction =\r\n                (action as CompleteProcessingResetPasswordRequestAction);\r\n            return {\r\n                ...state,\r\n                resetPasswordDialogEmailSent: completeAction.error === undefined,\r\n                resetPasswordDialogError: completeAction.error !== undefined\r\n                    ? {detail: completeAction.error} : state.resetPasswordDialogError,\r\n                resetPasswordDialogProcessing: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default signInReducer;","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    InputAdornment,\r\n    Paper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport Routes from \"../../router/routes\";\r\nimport {\r\n    errorSendingResetPassword,\r\n    isProcessingResetPasswordRequest,\r\n    SignInState,\r\n    successfullySentResetPassword\r\n} from \"./SignInReducer\";\r\nimport {\r\n    onSendResetPasswordClick,\r\n    onSignInClick,\r\n    onTextChanged,\r\n    togglePasswordVisibility,\r\n    toggleResetPasswordDialog\r\n} from \"./SignInActions\";\r\nimport {\r\n    AuthenticationState,\r\n    hasAuthenticationError,\r\n    isAuthenticating\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Close} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignInProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n    SignInLocalState: SignInState;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    togglePasswordVisibility: () => any;\r\n    onSignInClick: (event: FormEvent) => any;\r\n    toggleResetPasswordDialog: () => any;\r\n    onSendResetPasswordClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        SignInLocalState: state.SignInLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        togglePasswordVisibility: () => dispatch(togglePasswordVisibility()),\r\n        onSignInClick: (event: FormEvent) => dispatch(onSignInClick(event)),\r\n        toggleResetPasswordDialog: () => dispatch(toggleResetPasswordDialog()),\r\n        onSendResetPasswordClick: () => dispatch(onSendResetPasswordClick())\r\n    }\r\n}\r\n\r\nclass SignInNew extends Component<SignInProps\r\n    & Readonly<RouteComponentProps<RouteParams>>,\r\n    {}> {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            togglePasswordVisibility,\r\n            onSignInClick,\r\n            toggleResetPasswordDialog\r\n        } = this.props;\r\n\r\n        return <Box>\r\n            {/** Sign in card */}\r\n            <Row noGutters >\r\n                <Col xs={{span: 12, offset: 0}} md={{span: 6, offset: 3}} lg={{span: 6, offset: 3}} >\r\n                    <Box display=\"flex\" width=\"100%\" justifyContent=\"center\" paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"} paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"} >\r\n                        {/** Sign in card container */}\r\n                        <Paper elevation={0} square className={css(sharedStyles.kick_starter_border_box)} style={{ width: 650, padding: MediaQueryState.isMobile ? 20 : 30 }} >\r\n                            {/** Sign in card header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" marginBottom=\"35px\" >\r\n                                <Typography variant=\"h4\" align=\"center\" paragraph color=\"primary\">Sign in to your account</Typography>\r\n                                <Typography variant=\"body1\" align=\"center\">Connecting businesses and investors across the South West of England</Typography>\r\n                            </Box>\r\n\r\n                            {/** Display message to inform the user that the reset password email\r\n                             has been successfully sent */}\r\n                            {\r\n                                !successfullySentResetPassword(SignInLocalState)\r\n                                    ? null\r\n                                    : <Box marginBottom=\"35px\" color=\"white\" bgcolor={appColors.dark_green} padding=\"15px\" >\r\n                                        <Typography variant=\"body1\" align=\"left\">An email with password reset instructions has been sent to your email address.</Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Signin error */}\r\n                            {\r\n                                !hasAuthenticationError(AuthenticationState)\r\n                                    ? null\r\n                                    : <Box marginBottom=\"35px\" padding=\"15px\" color=\"white\" bgcolor=\"error.main\" >\r\n                                        <Typography variant=\"body1\" align=\"left\">\r\n                                       {/** {AuthenticationState.error?.detail} */}\r\n                                       Error: Username or password not recognised\r\n                                        </Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Sign in form */}\r\n                            <form onSubmit={onSignInClick} >\r\n                                <Box display=\"flex\" flexDirection=\"column\" >\r\n                                    {/** Email field */}\r\n                                    <FormControl>\r\n                                        <TextField label=\"Email address\" name=\"signInEmail\" value={SignInLocalState.signInEmail} margin=\"normal\" variant=\"outlined\" error={SignInLocalState.errorSignInEmail} onChange={onTextChanged} />\r\n                                    </FormControl>\r\n\r\n                                    {/** Password field */}\r\n                                    <FormControl>\r\n                                        <TextField\r\n                                            label=\"Password\"\r\n                                            name=\"signInPassword\"\r\n                                            type={SignInLocalState.showPassword ? \"text\" : \"password\"}\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            error={SignInLocalState.errorSignInPassword}\r\n                                            onChange={onTextChanged}\r\n                                            InputProps={{\r\n                                                endAdornment: (\r\n                                                    <InputAdornment position=\"end\" >\r\n                                                        <IconButton edge=\"end\" aria-label=\"Toggle password visibility\" onClick={togglePasswordVisibility} >\r\n                                                            {\r\n                                                                SignInLocalState.showPassword\r\n                                                                    ?\r\n                                                                    <VisibilityOff/>\r\n                                                                    :\r\n                                                                    <Visibility/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                ),\r\n                                            }}\r\n                                        />\r\n                                    </FormControl>\r\n\r\n                                    <Box marginTop=\"35px\" marginBottom=\"45px\" >\r\n                                        <Typography variant=\"body1\" align=\"center\" >\r\n                                            By clicking Sign In, you agree to our&nbsp;\r\n                                            <CustomLink url={Routes.nonGroupTermsOfUse} target=\"_blank\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Terms of use\" } />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink url={Routes.nonGroupPrivacyPolicy} target=\"_blank\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Privacy policy\" } />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {\r\n                                        !isAuthenticating(AuthenticationState)\r\n                                            ? null\r\n                                            : <Box display=\"flex\" marginBottom=\"45px\" justifyContent=\"center\" >\r\n                                                <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                                            </Box>\r\n                                    }\r\n\r\n                                    <FormControl>\r\n                                        <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\" className={css(sharedStyles.no_text_transform)}>Sign in</Button>\r\n                                    </FormControl>\r\n\r\n                                    {/** Sign up */}\r\n                                    <Box display=\"flex\" marginTop=\"25px\" justifyContent=\"center\" >\r\n                                        <Typography variant=\"body1\" >\r\n                                            Don't have an Invest West account?&nbsp;\r\n                                            <CustomLink url={Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")} color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Sign up\" } />\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {/** Forgot password */}\r\n                                    <Box display=\"flex\" marginTop=\"16px\" justifyContent=\"center\" onClick={toggleResetPasswordDialog} >\r\n                                        <Typography variant=\"body1\" color=\"primary\" className={css(sharedStyles.nav_link_hover)}>Forgot your password?</Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            </form>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Reset password dialog */}\r\n            <ResetPasswordDialogComponent/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInNew);\r\n\r\nclass ResetPasswordDialog extends Component<SignInProps, {}> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            toggleResetPasswordDialog,\r\n            onSendResetPasswordClick\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            fullWidth\r\n            maxWidth=\"sm\"\r\n            fullScreen={this.props.MediaQueryState.isMobile}\r\n            open={SignInLocalState.showResetPasswordDialog}\r\n            onClose={toggleResetPasswordDialog}\r\n        >\r\n            <DialogTitle>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                    <Box display=\"flex\" justifyContent=\"flex-start\" flexGrow={2}>\r\n                        <Typography variant=\"h5\" align=\"left\">Reset Your Password</Typography>\r\n                    </Box>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                        <IconButton onClick={toggleResetPasswordDialog}>\r\n                            <Close/>\r\n                        </IconButton>\r\n                    </Box>\r\n                </Box>\r\n            </DialogTitle>\r\n\r\n            <DialogContent style={{ padding: 0 }}>\r\n                <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" marginTop=\"15px\" paddingX=\"24px\">\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                        <Typography variant=\"body1\" align=\"left\">Please provide the email address you used when you signed up for your Invest West account.</Typography>\r\n                        <Box height=\"25px\"/>\r\n                        <Typography variant=\"body1\" align=\"left\">We will send you an email with a link to reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b></Typography>\r\n                    </Box>\r\n\r\n                    <Box height=\"42px\"/>\r\n\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                        {/** Display error */}\r\n                        {\r\n                            !errorSendingResetPassword(SignInLocalState)\r\n                                ? null\r\n                                : <Box width=\"100%\" bgcolor=\"error.main\" padding=\"15px\" marginBottom=\"42px\" color=\"white\">\r\n                                    <Typography variant=\"body1\" align=\"left\">Unable to send request password email.</Typography>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Processing indicator */}\r\n                        {\r\n                            !isProcessingResetPasswordRequest(SignInLocalState)\r\n                                ? null\r\n                                : <Box display=\"flex\" justifyContent=\"center\" marginBottom=\"42px\">\r\n                                    <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Email input */}\r\n                        <TextField name=\"resetPasswordDialogEmail\" value={SignInLocalState.resetPasswordDialogEmail} label=\"Email address\" variant=\"outlined\" fullWidth onChange={onTextChanged}/>\r\n                    </Box>\r\n\r\n                    <Box height=\"25px\"/>\r\n                </Box>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" padding=\"8px\">\r\n                    <Button color=\"primary\" variant=\"contained\" size=\"medium\" onClick={onSendResetPasswordClick} className={css(sharedStyles.no_text_transform)} disabled={SignInLocalState.resetPasswordDialogEmail.trim().length === 0}>Send</Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nconst ResetPasswordDialogComponent = connect(mapStateToProps, mapDispatchToProps)(ResetPasswordDialog);\r\n\r\n","import React, {Component} from \"react\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport {Box, Typography} from \"@material-ui/core\";\r\nimport * as appColors from \"../../values/colors\";\r\n\r\nexport default class PageNotFound extends Component<any, any> {\r\n    render() {\r\n        return <Container\r\n            fluid\r\n            style={{ padding: 0 }}\r\n        >\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Box display=\"flex\" flexDirection=\"column\" width=\"100%\" height=\"100%\" alignItems=\"center\" marginTop=\"120px\" >\r\n                        <Box color={appColors.primaryColor} >\r\n                            <Typography variant=\"h1\" align=\"center\" >404 error</Typography>\r\n                        </Box>\r\n                        <Box height=\"40px\" />\r\n                        <Typography variant=\"h2\" align=\"center\" >Page not found</Typography>\r\n                        <Box height=\"25px\" />\r\n                        <Typography variant=\"h2\" color=\"textSecondary\" align=\"center\">We're sorry, the page you requested could not be found.</Typography>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName,\r\n    successfullyValidatedGroupUrl\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {Box, Button, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport Routes from \"../../router/routes\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface HeaderProps extends HeaderLocalProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\ninterface HeaderLocalProps {\r\n    routePath: string;\r\n    homUrl: string;\r\n    dashboardUrl: string;\r\n    signInUrl: string;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass Header extends Component<HeaderProps, {}> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            routePath,\r\n            homUrl,\r\n            dashboardUrl,\r\n            signInUrl\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{ padding: 0 }} >\r\n            <Row noGutters style={{ paddingTop: 10, paddingBottom: 10, backgroundColor: appColors.white }}>\r\n                {/** Home/Dashboard */}\r\n                <Col xs={{span: 6, order: 3}} sm={{span: 6, order: 3}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}} >\r\n                    <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" alignItems=\"center\" marginLeft=\"30px\" >\r\n                        {\r\n                            successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={homUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\">Home</Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n\r\n                        {\r\n                            isAuthenticating(AuthenticationState)\r\n                                ? null\r\n                                : !successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={dashboardUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\">Dashboard</Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Logo */}\r\n                <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <CustomLink\r\n                            color=\"none\"\r\n                            activeColor=\"none\"\r\n                            activeUnderline={false}\r\n                            url={homUrl}\r\n                            component=\"nav-link\"\r\n                            childComponent={\r\n                                <Box display=\"flex\" flexDirection=\"column\" width=\"125px\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\r\n                                    <img\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                ? null\r\n                                                : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                    ? require(\"../../img/logo.png\").default\r\n                                                    : successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                                        ? getGroupLogo(ManageGroupUrlState.group)\r\n                                                        : null\r\n                                        }\r\n                                        style={{ width: \"auto\", height: 36, objectFit: \"contain\" }}\r\n                                    />\r\n                                    <Box height=\"3px\" />\r\n                                    <Box\r\n                                        fontWeight=\"fontWeightBold\"\r\n                                        color={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? appColors.primaryColor\r\n                                                : \"primary.main\"\r\n                                        }\r\n                                    >\r\n                                        <Typography variant=\"body1\" noWrap >\r\n                                            {\r\n                                                Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                    ? \"Invest West\"\r\n                                                    : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                    ? \"\"\r\n                                                    : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                        ? \"Invest West\"\r\n                                                        : ManageGroupUrlState.group?.displayName\r\n                                            }\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n\r\n                {\r\n                    !MediaQueryState.isMobile\r\n                        ? null\r\n                        : <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} >\r\n                            <Box marginY=\"10px\" >\r\n                                <Divider/>\r\n                            </Box>\r\n                        </Col>\r\n                }\r\n\r\n                {/** Sign in/Avatar */}\r\n                <Col xs={{span: 6, order: 4}} sm={{span: 6, order: 4}} md={{span: 4, order: 3}} lg={{span: 4, order: 3}} >\r\n                    {\r\n                        isAuthenticating(AuthenticationState)\r\n                            ? null\r\n                            : !successfullyAuthenticated(AuthenticationState)\r\n                            ? Routes.isSignInRoute(routePath)\r\n                                ? null\r\n                                : <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" justifyContent=\"flex-end\" alignItems=\"center\" marginRight=\"30px\" >\r\n                                    <CustomLink\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        url={signInUrl}\r\n                                        // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">Sign in</Button>\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                            : null\r\n                    }\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Divider */}\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../redux-store/reducers\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    successfullyValidatedGroupUrl\r\n} from \"../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport Routes from \"./routes\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {validateGroupUrl} from \"../redux-store/actions/manageGroupUrlActions\";\r\nimport {\r\n    AuthenticationState,\r\n    authIsNotInitialized,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../redux-store/reducers/authenticationReducer\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport Header from \"../shared-components/header/Header\";\r\nimport {signIn, signOut} from \"../redux-store/actions/authenticationActions\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport {RouteParams} from \"./router\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport {\r\n    isLoadingSystemAttributes,\r\n    ManageSystemAttributesState\r\n} from \"../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {loadSystemAttributes} from \"../redux-store/actions/manageSystemAttributesActions\";\r\nimport User, {isInvestor, isIssuer} from \"../models/user\";\r\nimport Admin, {isAdmin} from \"../models/admin\";\r\nimport GroupOfMembership from \"../models/group_of_membership\";\r\nimport {BarLoader} from \"react-spinners\";\r\n\r\ninterface GroupRouteProps extends GroupRouteLocalProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    loadSystemAttributes: () => any;\r\n    validateGroupUrl: (path: string, groupUserName: string | null) => any;\r\n    signIn: () => any;\r\n    signOut: () => any;\r\n}\r\n\r\ninterface GroupRouteLocalProps {\r\n    showHeader: boolean;\r\n    backgroundColor?: string;\r\n    component: React.ReactNode;\r\n}\r\n\r\ninterface GroupRouteState {\r\n    navigatingFromSignInOrSignUpToDashboard: boolean;\r\n    navigatingToSignIn: boolean;\r\n    navigatingToError: boolean;\r\n}\r\n\r\nconst initialState: GroupRouteState = {\r\n    navigatingFromSignInOrSignUpToDashboard: false,\r\n    navigatingToSignIn: false,\r\n    navigatingToError: false\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadSystemAttributes: () => dispatch(loadSystemAttributes()),\r\n        validateGroupUrl: (path: string, groupUserName: string | null) => dispatch(validateGroupUrl(path, groupUserName)),\r\n        signIn: () => dispatch(signIn()),\r\n        signOut: () => dispatch(signOut())\r\n    }\r\n}\r\n\r\nclass GroupRoute extends Component<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>, GroupRouteState> {\r\n    private authListener: firebase.default.Unsubscribe | null;\r\n    private routePath: string;\r\n    private routeParams: any;\r\n\r\n    constructor(props: GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>) {\r\n        super(props);\r\n        this.authListener = null;\r\n        this.routePath = this.props.match.path;\r\n        this.routeParams = this.props.match.params;\r\n        this.state = {\r\n            ...initialState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateRouteAndAuthentication();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>>, prevState: Readonly<GroupRouteState>, snapshot?: any) {\r\n        this.validateRouteAndAuthentication();\r\n\r\n        // system attributes are being loaded\r\n        if (isLoadingSystemAttributes(this.props.ManageSystemAttributesState)) {\r\n            return;\r\n        }\r\n\r\n        // group url is being validated\r\n        if (isValidatingGroupUrl(this.props.ManageGroupUrlState)) {\r\n            return;\r\n        }\r\n\r\n        // invalid group url --> redirect to 404 page\r\n        if (!successfullyValidatedGroupUrl(this.props.ManageGroupUrlState) && !this.state.navigatingToError) {\r\n            this.setState({\r\n                navigatingToError: true\r\n            });\r\n            this.props.history.push(Routes.error404);\r\n            return;\r\n        }\r\n\r\n        // redirect an unauthenticated user to the sign in route if they try to access protected routes\r\n        if (Routes.isProtectedRoute(this.routePath)\r\n            && !authIsNotInitialized(this.props.AuthenticationState)\r\n            && !isAuthenticating(this.props.AuthenticationState)\r\n            && !successfullyAuthenticated(this.props.AuthenticationState)\r\n            && !this.state.navigatingToSignIn\r\n        ) {\r\n            this.setState({\r\n                navigatingToSignIn: true\r\n            });\r\n            this.props.history.push(Routes.constructSignInRoute(this.routeParams));\r\n        }\r\n\r\n        // redirect the user to their dashboard if they are on the sign in/up route and are successfully authenticated\r\n        if ((Routes.isSignInRoute(this.routePath) || Routes.isSignUpRoute(this.routePath))\r\n            && successfullyAuthenticated(this.props.AuthenticationState)\r\n            && !this.state.navigatingFromSignInOrSignUpToDashboard\r\n        ) {\r\n            const dashboardRoute: string = Routes.constructDashboardRoute(this.routeParams, this.props.ManageGroupUrlState, this.props.AuthenticationState);\r\n            this.setState({\r\n                navigatingFromSignInOrSignUpToDashboard: true\r\n            });\r\n            this.props.history.push(dashboardRoute);\r\n        }\r\n\r\n        // redirect the user to 404 page if they are trying to access routes that are not meant for them\r\n        if (successfullyAuthenticated(this.props.AuthenticationState)) {\r\n            const currentUser: User | Admin | null = this.props.AuthenticationState.currentUser;\r\n            if (currentUser) {\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n                let shouldRedirectToError: boolean = false;\r\n\r\n                if (Routes.isRouteReservedForSuperAdmin(this.routePath)) {\r\n                    if (!currentAdmin || (currentAdmin && !currentAdmin.superAdmin)) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                } else if (Routes.isGroupAdminRoute(this.routePath)) {\r\n                    if (!currentAdmin) {\r\n                        shouldRedirectToError = true;\r\n                    } else {\r\n                        const adminGroup: GroupOfMembership = this.props.AuthenticationState.groupsOfMembership[0];\r\n                        if (adminGroup.group.groupUserName !== this.routeParams.groupUserName) {\r\n                            shouldRedirectToError = true;\r\n                        }\r\n                    }\r\n                } else if (Routes.isIssuerDashboardRoute(this.routePath)) {\r\n                    if (!isIssuer(currentUser)) {\r\n                        shouldRedirectToError = true;\r\n                    } else if (this.props.AuthenticationState.groupsOfMembership\r\n                        .filter(groupOfMembership =>\r\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\r\n                    ) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                } else if (Routes.isInvestorDashboardRoute(this.routePath)) {\r\n                    if (!isInvestor(currentUser)) {\r\n                        shouldRedirectToError = true;\r\n                    } else if (this.props.AuthenticationState.groupsOfMembership\r\n                        .filter(groupOfMembership =>\r\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\r\n                    ) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                }\r\n\r\n                if (shouldRedirectToError && !this.state.navigatingToError) {\r\n                    this.setState({\r\n                        navigatingToError: true\r\n                    });\r\n                    this.props.history.push(Routes.error404);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath) && this.state.navigatingFromSignInOrSignUpToDashboard) {\r\n            this.setState({\r\n                navigatingFromSignInOrSignUpToDashboard: false\r\n            });\r\n        }\r\n\r\n        if (Routes.isSignInRoute(this.routePath) && this.state.navigatingToSignIn) {\r\n            this.setState({\r\n                navigatingToSignIn: false\r\n            });\r\n        }\r\n\r\n        if (Routes.isErrorRoute(this.routePath) && this.state.navigatingToError) {\r\n            this.setState({\r\n                navigatingToError: false\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.detachAuthListener();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            showHeader,\r\n            backgroundColor\r\n        } = this.props;\r\n\r\n        this.updateRouteAndParams();\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || (successfullyValidatedGroupUrl(ManageGroupUrlState) && authIsNotInitialized(AuthenticationState))\r\n            || ((!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath))\r\n                && isAuthenticating(AuthenticationState))\r\n        ) {\r\n            return (\r\n                <Box>\r\n                    <BarLoader\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                        width=\"100%\"\r\n                        height={4}\r\n                    />\r\n                </Box>\r\n            );\r\n        }\r\n\r\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState)) {\r\n            return (\r\n                <Container\r\n                    fluid\r\n                    style={{\r\n                        padding: 0,\r\n                        height: backgroundColor !== undefined ? \"100%\" : \"none\",\r\n                        minHeight: backgroundColor !== undefined ? \"100vh\" : \"none\",\r\n                        backgroundColor: backgroundColor ?? \"none\"\r\n                    }}\r\n                >\r\n                    {\r\n                        !showHeader\r\n                            ? null\r\n                            : <Row\r\n                                noGutters\r\n                            >\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={12}\r\n                                    lg={12}\r\n                                >\r\n                                    <Header\r\n                                        routePath={this.routePath}\r\n                                        homUrl={Routes.constructHomeRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\r\n                                        dashboardUrl={Routes.constructDashboardRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\r\n                                        signInUrl={Routes.constructSignInRoute(this.routeParams)}\r\n                                    />\r\n                                </Col>\r\n                            </Row>\r\n                    }\r\n\r\n                    <Row\r\n                        noGutters\r\n                    >\r\n                        <Box\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                        >\r\n                            {\r\n                                this.props.component\r\n                            }\r\n                        </Box>\r\n                    </Row>\r\n                </Container>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    validateRouteAndAuthentication = () => {\r\n        this.updateRouteAndParams();\r\n\r\n        this.props.loadSystemAttributes();\r\n\r\n        this.props.validateGroupUrl(\r\n            this.routePath, this.routeParams.hasOwnProperty(\"groupUserName\")\r\n                ? this.routeParams.groupUserName : null\r\n        );\r\n\r\n        this.attachAuthListener();\r\n    }\r\n\r\n    updateRouteAndParams = () => {\r\n        this.routePath = this.props.match.path;\r\n        this.routeParams = this.props.match.params;\r\n    }\r\n\r\n    attachAuthListener = () => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState) && !this.authListener) {\r\n            this.authListener = firebase.auth().onAuthStateChanged(firebaseUser => {\r\n                if (firebaseUser) {\r\n                    this.props.signIn();\r\n                } else {\r\n                    this.props.signOut();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    detachAuthListener = () => {\r\n        if (this.authListener) {\r\n            this.authListener();\r\n            this.authListener = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupRoute);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport InvitedUser from \"../../models/invited_user\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\nimport React from \"react\";\r\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/passwordUtils\";\r\nimport {isValidEmailAddress} from \"../../utils/emailUtils\";\r\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport enum SignUpEvents {\r\n    LoadingInvitedUser = \"SignUpEvents.LoadingInvitedUser\",\r\n    CompleteLoadingInvitedUser = \"SignUpEvents.CompleteLoadingInvitedUser\",\r\n    InputFieldChanged = \"SignUpEvents.InputFieldChanged\",\r\n    CreatingAccount = \"SignUpEvents.CreatingAccount\",\r\n    CompleteCreatingAccount = \"SignUpEvents.CompleteCreatingAccount\"\r\n}\r\n\r\nexport interface SignUpAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteLoadingInvitedUserAction extends SignUpAction {\r\n    invitedUser?: InvitedUser;\r\n    error?: string;\r\n}\r\n\r\nexport interface InputFieldChangedAction extends SignUpAction {\r\n    name: string;\r\n    value: string | boolean;\r\n}\r\n\r\nexport interface CompleteCreatingAccountAction extends SignUpAction {\r\n    error?: string;\r\n}\r\n\r\nexport const loadInvitedUser: ActionCreator<any> = (invitedUserID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n\r\n        const completeAction: CompleteLoadingInvitedUserAction = {\r\n            type: SignUpEvents.CompleteLoadingInvitedUser\r\n        };\r\n\r\n        try {\r\n            dispatch({\r\n                type: SignUpEvents.LoadingInvitedUser\r\n            });\r\n\r\n            const response = await new UserRepository().retrieveInvitedUser(invitedUserID);\r\n            const invitedUser: InvitedUser = response.data;\r\n            completeAction.invitedUser = JSON.parse(JSON.stringify(invitedUser));\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const handleInputFieldChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const inputFieldType: string = event.target.type;\r\n        const inputFieldName: string = event.target.name;\r\n        const inputFieldValue: string = event.target.value;\r\n        const inputFieldChecked: boolean = event.target.checked;\r\n\r\n        const action: InputFieldChangedAction = {\r\n            type: SignUpEvents.InputFieldChanged,\r\n            name: inputFieldName,\r\n            value: inputFieldType === \"checkbox\" ? inputFieldChecked : inputFieldValue\r\n        };\r\n\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const createAccount: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            invitedUser,\r\n            userType,\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            confirmedEmail,\r\n            password,\r\n            confirmedPassword,\r\n            acceptMarketingPreferences\r\n        } = getState().SignUpLocalState;\r\n\r\n        const {\r\n            group\r\n        } = getState().ManageGroupUrlState;\r\n\r\n        const completeAction: CompleteCreatingAccountAction = {\r\n            type: SignUpEvents.CompleteCreatingAccount\r\n        };\r\n\r\n        // invalid email address\r\n        if (!isValidEmailAddress(email) || !isValidEmailAddress(confirmedEmail)) {\r\n            completeAction.error = \"Please enter a valid email address.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // emails not match\r\n        if (email.trim().toLocaleLowerCase() !== confirmedEmail.trim().toLocaleLowerCase()) {\r\n            completeAction.error = \"Emails do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // passwords not match\r\n        if (password !== confirmedPassword) {\r\n            completeAction.error = \"Passwords do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // password not strong enough\r\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\r\n            completeAction.error = \"Password is too weak. Please select a stronger password.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: SignUpEvents.CreatingAccount\r\n            });\r\n\r\n            await new UserRepository().signUp({\r\n                isPublicRegistration: invitedUser === undefined,\r\n                invitedUserID: invitedUser !== undefined ? invitedUser.id : undefined,\r\n                userProfile: {\r\n                    title,\r\n                    firstName,\r\n                    lastName,\r\n                    email,\r\n                    type: userType\r\n                },\r\n                password,\r\n                groupID: invitedUser ? invitedUser.invitedBy : group?.anid ?? \"\",\r\n                acceptMarketingPreferences: acceptMarketingPreferences\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(signIn(email, password));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteConfirmingResetPasswordAction,\r\n    CompleteVerifyingCodeAction,\r\n    ResetPasswordAction,\r\n    ResetPasswordEvents,\r\n    TextChangedAction\r\n} from \"./ResetPasswordActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface ResetPasswordState {\r\n    verifyingCode: boolean;\r\n    codeVerified: boolean;\r\n    actionCode: string | null;\r\n    email: string | null;\r\n    errorVerifyingCode?: Error;\r\n\r\n    password: string;\r\n    confirmedPassword: string;\r\n\r\n    resettingPassword: boolean;\r\n    passwordReset: boolean;\r\n    errorResettingPassword?: Error;\r\n}\r\n\r\nconst initialState: ResetPasswordState = {\r\n    verifyingCode: false,\r\n    codeVerified: false,\r\n    actionCode: null,\r\n    email: null,\r\n\r\n    password: \"\",\r\n    confirmedPassword: \"\",\r\n\r\n    resettingPassword: false,\r\n    passwordReset: false\r\n}\r\n\r\nexport const isVerifyingCode = (state: ResetPasswordState) => {\r\n    return state.verifyingCode && !state.codeVerified;\r\n}\r\n\r\nexport const successfullyVerifyingCode = (state: ResetPasswordState) => {\r\n    return !state.verifyingCode && state.codeVerified && state.email !== null && state.errorVerifyingCode === undefined;\r\n}\r\n\r\nexport const hasErrorVerifyingCode = (state: ResetPasswordState) => {\r\n    return !state.verifyingCode && state.codeVerified && state.email === null && state.errorVerifyingCode !== undefined;\r\n}\r\n\r\nexport const isResettingPassword = (state: ResetPasswordState) => {\r\n    return state.resettingPassword && !state.passwordReset;\r\n}\r\n\r\nexport const successfullyResettingPassword = (state: ResetPasswordState) => {\r\n    return !state.resettingPassword && state.passwordReset && state.errorResettingPassword === undefined;\r\n}\r\n\r\nexport const hasErrorResettingPassword = (state: ResetPasswordState) => {\r\n    return !state.resettingPassword && !state.passwordReset && state.errorResettingPassword !== undefined;\r\n}\r\n\r\nconst resetPasswordReducer = (state = initialState, action: ResetPasswordAction) => {\r\n    switch (action.type) {\r\n        case ResetPasswordEvents.VerifyingCode:\r\n            return {\r\n                ...state,\r\n                verifyingCode: true,\r\n                codeVerified: false\r\n            }\r\n        case ResetPasswordEvents.CompleteVerifyingCode:\r\n            const completeVerifyingCodeAction: CompleteVerifyingCodeAction = action as CompleteVerifyingCodeAction;\r\n            return {\r\n                ...state,\r\n                verifyingCode: false,\r\n                codeVerified: true,\r\n                actionCode: completeVerifyingCodeAction.actionCode,\r\n                email: completeVerifyingCodeAction.email,\r\n                errorVerifyingCode: completeVerifyingCodeAction.error !== undefined ? {detail: completeVerifyingCodeAction.error} : state.errorVerifyingCode\r\n            }\r\n        case ResetPasswordEvents.TextChanged:\r\n            const textChangedAction: TextChangedAction = action as TextChangedAction;\r\n            return {\r\n                ...state,\r\n                [textChangedAction.name]: textChangedAction.value\r\n            }\r\n        case ResetPasswordEvents.ConfirmingResetPassword:\r\n            return {\r\n                ...state,\r\n                resettingPassword: true,\r\n                passwordReset: false,\r\n                errorResettingPassword: undefined\r\n            }\r\n        case ResetPasswordEvents.CompleteConfirmingResetPassword:\r\n            const completeConfirmingResetPasswordAction: CompleteConfirmingResetPasswordAction = action as CompleteConfirmingResetPasswordAction;\r\n            return {\r\n                ...state,\r\n                resettingPassword: false,\r\n                passwordReset: completeConfirmingResetPasswordAction.error === undefined,\r\n                errorResettingPassword: completeConfirmingResetPasswordAction.error ? {detail: completeConfirmingResetPasswordAction.error} : state.errorResettingPassword\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default resetPasswordReducer;","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppState } from \"../../redux-store/reducers\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AnyAction } from \"redux\";\r\nimport { Box, Button, TextField, Typography } from \"@material-ui/core\";\r\nimport { Redirect, RouteComponentProps } from \"react-router-dom\";\r\nimport { RouteParams } from \"../../router/router\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { css } from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport queryString from \"query-string\";\r\nimport { confirmPasswordReset, onTextChanged, verifyCode } from \"./ResetPasswordActions\";\r\nimport {\r\n    hasErrorResettingPassword,\r\n    hasErrorVerifyingCode,\r\n    isResettingPassword,\r\n    isVerifyingCode,\r\n    ResetPasswordState,\r\n    successfullyResettingPassword\r\n} from \"./ResetPasswordReducer\";\r\nimport { HashLoader } from \"react-spinners\";\r\nimport { getGroupRouteTheme, ManageGroupUrlState } from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport { MediaQueryState } from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface ResetPasswordProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    verifyCode: (code: string | null) => any;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    confirmPasswordReset: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResetPasswordLocalState: state.ResetPasswordLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        verifyCode: (code: string | null) => dispatch(verifyCode(code)),\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        confirmPasswordReset: () => dispatch(confirmPasswordReset())\r\n    }\r\n}\r\n\r\nclass ResetPassword extends Component<ResetPasswordProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n\r\n    componentDidMount() {\r\n        const params = queryString.parse(this.props.location.search);\r\n        if (params.oobCode) {\r\n            const actionCode: string | string[] | null | undefined = params.oobCode;\r\n            if (actionCode) {\r\n                this.props.verifyCode(actionCode as string);\r\n            } else {\r\n                this.props.verifyCode(null);\r\n            }\r\n        } else {\r\n            this.props.verifyCode(null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            MediaQueryState,\r\n            ResetPasswordLocalState,\r\n            onTextChanged,\r\n            confirmPasswordReset\r\n        } = this.props;\r\n\r\n        // verifying code\r\n        if (isVerifyingCode(ResetPasswordLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\r\n                <HashLoader\r\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                />\r\n            </Box>;\r\n        }\r\n\r\n        // failed to verify code\r\n        if (hasErrorVerifyingCode(ResetPasswordLocalState)) {\r\n            return <Redirect\r\n                to={Routes.error404}\r\n            />;\r\n        }\r\n\r\n        // password has been successfully updated\r\n        if (successfullyResettingPassword(ResetPasswordLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\r\n                <Typography\r\n                    variant=\"h5\"\r\n                    color=\"primary\"\r\n                    align=\"center\"\r\n                >\r\n                    Your password has been updated.\r\n                </Typography>\r\n            </Box>;\r\n        }\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"18px\" : \"0px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"30px\" : \"60px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{ span: 6, offset: 3 }}\r\n                    lg={{ span: 4, offset: 4 }}\r\n                >\r\n                    <Box>\r\n                        <Typography\r\n                            variant=\"h4\"\r\n                            align=\"left\"\r\n                        >\r\n                            Reset Password\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"40px\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            label=\"Password\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            onChange={onTextChanged}\r\n                        />\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            label=\"Confirm Password\"\r\n                            name=\"confirmedPassword\"\r\n                            type=\"password\"\r\n                            onChange={onTextChanged}\r\n                        />\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        {\r\n                            !hasErrorResettingPassword(ResetPasswordLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    width=\"100%\"\r\n                                    bgcolor=\"error.main\"\r\n                                    padding=\"15px\"\r\n                                    marginBottom=\"20px\"\r\n                                    color=\"white\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {ResetPasswordLocalState.errorResettingPassword?.detail}\r\n                                    </Typography>\r\n                                </Box>\r\n                        }\r\n                        {\r\n                            !isResettingPassword(ResetPasswordLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    marginBottom=\"20px\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                    />\r\n                                </Box>\r\n                        }\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <Box\r\n                            display=\"flex\"\r\n                            justifyContent=\"flex-end\"\r\n                        >\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                onClick={() => confirmPasswordReset()}\r\n                            >\r\n                                Submit\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPassword);\r\n","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {resources} from \"../Resources\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nclass ResourceDetail extends Component<any, any> {\r\n    render() {\r\n        const resourceName = this.props.match.params.resourceName;\r\n        const resourceIndex = resources.findIndex(resource => resource.name === resourceName);\r\n        if (resourceIndex !== -1) {\r\n            const resource = resources[resourceIndex];\r\n            return resource.page;\r\n        }\r\n\r\n        return <Redirect to={Routes.error404}/>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceDetail);","export const PASSWORD_VERY_WEAK = 1;\r\nexport const PASSWORD_WEAK = 2;\r\nexport const PASSWORD_GOOD = 3;\r\nexport const PASSWORD_STRONG = 4;\r\nexport const PASSWORD_VERY_STRONG = 5;\r\nconst passwordBlacklist: string[] = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\r\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\r\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\r\n\r\n/**\r\n * This function is used to check the strength of the password.\r\n *\r\n * @param {*} password\r\n */\r\nexport const checkPasswordStrength = (password: string) => {\r\n    let strength = 0;\r\n    const minLength = 8;\r\n    // If the password length is less than or equal to minLength\r\n    if (password.length < minLength) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    } else {\r\n        strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\r\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\r\n        // strength = PASSWORD_WEAK;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\r\n    if (password.length > minLength &&\r\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\r\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\r\n        // strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\r\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_STRONG;\r\n    }\r\n\r\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\r\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_VERY_STRONG;\r\n    }\r\n\r\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    }\r\n\r\n    return strength;\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\n\r\nconst screenSizeQueries = {\r\n    mobile: `(min-width: 320px) and (max-width: 480px) and (orientation: portrait), (min-height: 320px) and (max-height: 480px) and (orientation: landscape)`,\r\n    tablet: `(min-width: 768px) and (max-width: 1024px) and (orientation: portrait), (min-height: 768px) and (max-height: 1024px) and (orientation: landscape)`,\r\n    laptop: `(min-width: 1200px) and (max-width: 1600px) and (orientation: landscape)`,\r\n    desktop: `(min-width: 1600px) and (orientation: landscape)`,\r\n    minHeight: `(min-height: 1200px)`\r\n}\r\n\r\nexport const mobileScreen = window.matchMedia(screenSizeQueries.mobile);\r\nexport const tabletScreen = window.matchMedia(screenSizeQueries.tablet);\r\nexport const laptopScreen = window.matchMedia(screenSizeQueries.laptop);\r\nexport const desktopScreen = window.matchMedia(screenSizeQueries.desktop);\r\nexport const minHeightScreen = window.matchMedia(screenSizeQueries.minHeight);\r\n\r\nexport enum MediaQueryEvents {\r\n    MediaQueryChanged = \"MediaQueryEvents.MediaQueryChanged\"\r\n}\r\n\r\nexport interface MediaQueryAction extends Action {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport const addMediaQueryListeners: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        mobileScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isMobile', mobileScreen.matches));\r\n        tabletScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isTablet', tabletScreen.matches));\r\n        laptopScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isLaptop', laptopScreen.matches));\r\n        desktopScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isDesktop', desktopScreen.matches));\r\n        minHeightScreen.addEventListener('change',\r\n            () => listener(dispatch, 'minHeightScreen', minHeightScreen.matches));\r\n    }\r\n};\r\n\r\nexport const removeMediaQueryListeners: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        mobileScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        tabletScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        laptopScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        desktopScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        minHeightScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n    }\r\n};\r\n\r\nconst listener = (dispatch: Dispatch | null, name: string | null, value: boolean | null) => {\r\n    if (dispatch) {\r\n        return dispatch({\r\n            type: MediaQueryEvents.MediaQueryChanged,\r\n            name,\r\n            value\r\n        });\r\n    }\r\n};","import {\r\n    CompleteCreatingAccountAction,\r\n    CompleteLoadingInvitedUserAction,\r\n    InputFieldChangedAction,\r\n    SignUpAction,\r\n    SignUpEvents\r\n} from \"./SignUpActions\";\r\nimport Error from \"../../models/error\";\r\nimport InvitedUser from \"../../models/invited_user\";\r\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport interface SignUpState {\r\n    invitedUser?: InvitedUser;\r\n    invitedUserLoaded: boolean;\r\n    loadingInvitedUser: boolean;\r\n    errorLoadingInvitedUser?: Error;\r\n\r\n    userType: number;\r\n    title: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    confirmedEmail: string;\r\n    password: string;\r\n    confirmedPassword: string;\r\n    acceptMarketingPreferences: boolean;\r\n\r\n    creatingAccount: boolean;\r\n    errorCreatingAccount?: Error;\r\n}\r\n\r\nconst initialState: SignUpState = {\r\n    invitedUserLoaded: false,\r\n    loadingInvitedUser: false,\r\n\r\n    userType: -1,\r\n    title: \"-1\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    confirmedEmail: \"\",\r\n    password: \"\",\r\n    confirmedPassword: \"\",\r\n    acceptMarketingPreferences: false,\r\n\r\n    creatingAccount: false\r\n}\r\n\r\nexport const isLoadingInvitedUser = (state: SignUpState) => {\r\n    return !state.invitedUserLoaded && state.loadingInvitedUser;\r\n}\r\n\r\nexport const hasSuccessfullyLoadedInvitedUser = (state: SignUpState) => {\r\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser !== undefined && state.errorLoadingInvitedUser === undefined;\r\n}\r\n\r\nexport const hasErrorLoadingInvitedUser = (state: SignUpState) => {\r\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser === undefined && state.errorLoadingInvitedUser !== undefined;\r\n}\r\n\r\nexport const notFoundInvitedUser = (state: SignUpState) => {\r\n    return hasErrorLoadingInvitedUser(state) && state.errorLoadingInvitedUser && state.errorLoadingInvitedUser.detail.includes(\"404\");\r\n}\r\n\r\nexport const isCreatingAccount = (state: SignUpState) => {\r\n    return state.creatingAccount;\r\n}\r\n\r\nexport const hasErrorCreatingAccount = (state: SignUpState) => {\r\n    return !state.creatingAccount && state.errorCreatingAccount !== undefined;\r\n}\r\n\r\nconst signUpReducer = (state = initialState, action: SignUpAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            return initialState;\r\n        case SignUpEvents.LoadingInvitedUser:\r\n            return {\r\n                ...state,\r\n                invitedUser: undefined,\r\n                invitedUserLoaded: false,\r\n                loadingInvitedUser: true,\r\n                errorLoadingInvitedUser: undefined\r\n            }\r\n        case SignUpEvents.CompleteLoadingInvitedUser:\r\n            const completeLoadingInvitedUserAction: CompleteLoadingInvitedUserAction = action as CompleteLoadingInvitedUserAction;\r\n            return {\r\n                ...state,\r\n                invitedUser: completeLoadingInvitedUserAction.invitedUser,\r\n                invitedUserLoaded: true,\r\n                loadingInvitedUser: false,\r\n                errorLoadingInvitedUser: completeLoadingInvitedUserAction.error !== undefined\r\n                    ? {detail: completeLoadingInvitedUserAction.error} : state.errorLoadingInvitedUser,\r\n                userType: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.type : state.userType,\r\n                title: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.title : state.title,\r\n                firstName: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.firstName : state.firstName,\r\n                lastName: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.lastName : state.lastName,\r\n                email: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.email : state.email\r\n            }\r\n        case SignUpEvents.InputFieldChanged:\r\n            const inputFieldChangedAction: InputFieldChangedAction = action as InputFieldChangedAction;\r\n            return {\r\n                ...state,\r\n                [inputFieldChangedAction.name]: inputFieldChangedAction.value\r\n            }\r\n        case SignUpEvents.CreatingAccount:\r\n            return {\r\n                ...state,\r\n                creatingAccount: true,\r\n                successfullyCreatedAccount: false,\r\n                errorCreatingAccount: undefined\r\n            }\r\n        case SignUpEvents.CompleteCreatingAccount:\r\n            const completeCreatingAccountAction: CompleteCreatingAccountAction = action as CompleteCreatingAccountAction;\r\n            return {\r\n                ...state,\r\n                creatingAccount: false,\r\n                errorCreatingAccount: completeCreatingAccountAction.error\r\n                    ? {detail: completeCreatingAccountAction.error} : state.errorCreatingAccount\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default signUpReducer;","/**\r\n * Invited user interface\r\n */\r\nimport User from \"./user\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport Project from \"./project\";\r\nimport InvestorSelfCertification from \"./investor_self_certification\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\nimport Pledge from \"./pledge\";\r\n\r\nexport default interface InvitedUser {\r\n    id: string;\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    title: string;\r\n    type: number;\r\n    status: number;\r\n\r\n    /**\r\n     * id of the group that the user is in\r\n     */\r\n    invitedBy: string;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds):\r\n     *      - indicates the date an unregistered user was invited by [invitedBy] group.\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = \"none\"\r\n     *\r\n     *      - indicates the date an unregistered user used PUBLIC URL to registered to [invitedBy] group\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = date in milliseconds\r\n     *\r\n     * --> \"none\": the user who requested to join the [invitedBy] group from their home group\r\n     */\r\n    invitedDate: number | \"none\";\r\n\r\n    /**\r\n     * this field only exists when the user is a registered user and [officialUserID] must map to a valid User profile\r\n     */\r\n    officialUserID?: string;\r\n\r\n    /**\r\n     * the date the user joined a group either\r\n     *\r\n     * - by invitation (an unregistered user was invited by a group admin)\r\n     *\r\n     * - or by registering via the PUBLIC URL (an unregistered registered to group a group via its public url)\r\n     *\r\n     * - or by requesting to access (the user must send a request access which has to be accepted by the group admins)\r\n     */\r\n    joinedDate?: number;\r\n\r\n    /**\r\n     * can be true or false\r\n     *\r\n     * --> true: the user to requested to join a group from their home group\r\n     *\r\n     * --> false: the other cases specified above\r\n     */\r\n    requestedToJoin?: boolean;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds): the user to requested to join a group from their home group or registered to a group\r\n     * via its PUBLIC URL\r\n     *\r\n     * --> \"none\": the user was invited to a group\r\n     */\r\n    requestedToJoinDate?: number | \"none\";\r\n}\r\n\r\n/**\r\n * Invited user with official profile\r\n */\r\nexport interface InvitedUserWithProfile extends InvitedUser {\r\n    profile?: User;\r\n    homeGroup: GroupProperties;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    offersCreated?: Project[]; // for issuers\r\n    pledges?: Pledge[]; // for investors\r\n    certification?: InvestorSelfCertification | null; // self-certification of investors (undefined: user is an issuer, null: an investor has not certified)\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a user in csv\r\n */\r\nexport interface InvitedUserCsv {\r\n    name: string; // user's official profile --> title + first name + last name\r\n    email: string;\r\n    userType: \"investor\" | \"issuer\";\r\n    memberType: \"home\" | \"platform\";\r\n    homeGroup?: string; // specified only when exporting to csv for super admins\r\n    statusInGroup: \"unregistered\" | \"active\"; // this list will be expanded more in the future\r\n    joinedDate: string | undefined;\r\n    offersCreated: string | \"none\" | \"not applicable\"; // none if the issuer has not created any offers, not applicable if the user is not an issuer\r\n    pledges: number | \"not applicable\"; // number of pledges for investor, not applicable if the user is not an issuer\r\n    certifiedDate: string | \"not certified\" | \"not applicable\";\r\n}\r\n\r\n/**\r\n * Check if an invited user a home member in a group\r\n *\r\n * @param user\r\n */\r\nexport const isHomeMember = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    // if either of these 2 fields is undefined, it means the invited user has been invited\r\n    // by a group and not yet registered\r\n    if (user.requestedToJoin === undefined || user.requestedToJoinDate === undefined) {\r\n        return true;\r\n    }\r\n\r\n    // user was invited\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate === \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // user registered via the public url\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate !== \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // in other cases, the user is not a home member of the group\r\n    return false;\r\n}\r\n\r\n/**\r\n * Check if an invited user has registered or not\r\n *\r\n * @param user\r\n */\r\nexport const hasRegistered = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    return user.officialUserID !== undefined;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {UserTitles} from \"../../models/user\";\r\nimport {AuthenticationState, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {createAccount, handleInputFieldChanged, loadInvitedUser} from \"./SignUpActions\";\r\nimport {\r\n    hasErrorCreatingAccount,\r\n    hasErrorLoadingInvitedUser,\r\n    isCreatingAccount,\r\n    isLoadingInvitedUser,\r\n    notFoundInvitedUser,\r\n    SignUpState\r\n} from \"./SignUpReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {BarLoader} from \"react-spinners\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../../firebase/databaseConsts\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {hasRegistered} from \"../../models/invited_user\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignUpProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    AuthenticationState: AuthenticationState;\r\n    SignUpLocalState: SignUpState;\r\n    loadInvitedUser: (invitedUserID: string) => any;\r\n    handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    createAccount: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        SignUpLocalState: state.SignUpLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadInvitedUser: (invitedUserID: string) => dispatch(loadInvitedUser(invitedUserID)),\r\n        handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(handleInputFieldChanged(event)),\r\n        createAccount: () => dispatch(createAccount())\r\n    }\r\n}\r\n\r\nclass SignUpNew extends Component<SignUpProps & Readonly<RouteComponentProps<RouteParams>>, {}> {\r\n    // invited user id (optional parameter from the url)\r\n    // if invitedUserId = undefined --> public registration\r\n    private invitedUserId: string | undefined;\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadInvitedUser\r\n        } = this.props;\r\n\r\n        this.invitedUserId = this.props.match.params.id;\r\n        if (this.invitedUserId) {\r\n            loadInvitedUser(this.invitedUserId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignUpLocalState,\r\n            handleInputFieldChanged,\r\n            createAccount\r\n        } = this.props;\r\n\r\n        // invited user ID is specified in the url\r\n        if (this.invitedUserId) {\r\n            // loading invited user\r\n            if (isLoadingInvitedUser(SignUpLocalState)) {\r\n                return (\r\n                    <Box>\r\n                        <BarLoader\r\n                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            width=\"100%\"\r\n                            height={4}\r\n                        />\r\n                    </Box>\r\n                );\r\n            }\r\n\r\n            // error loading invited user (network error or not found)\r\n            // OR user has already signed up\r\n            if (hasErrorLoadingInvitedUser(SignUpLocalState)\r\n                || (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser))\r\n            ) {\r\n                return <Box\r\n                    marginTop=\"30px\"\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                    alignItems=\"center\"\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        color=\"error\"\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"This registration URL is not valid.\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"You have already registered. Please sign in.\"\r\n                                // other error\r\n                                : `${SignUpLocalState.errorLoadingInvitedUser?.detail}`\r\n                        }\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Button\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={() => {\r\n                            // invalid invitedUserID\r\n                            if (notFoundInvitedUser(SignUpLocalState)) {\r\n                                this.props.history.replace(\r\n                                    Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")\r\n                                );\r\n                                window.location.reload();\r\n                                return;\r\n                            }\r\n\r\n                            // user has already signed up\r\n                            if (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)) {\r\n                                this.props.history.push(Routes.constructSignInRoute(this.props.match.params));\r\n                                return;\r\n                            }\r\n\r\n                            // other error\r\n                            window.location.reload();\r\n                        }}\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"Go to public registration\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"Sign in\"\r\n                                // other error\r\n                                : \"Retry\"\r\n                        }\r\n                    </Button>\r\n                </Box>;\r\n            }\r\n        }\r\n\r\n        return <Box>\r\n            {/** Sign up card */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={{span: 12, offset: 0}}\r\n                    sm={{span: 12, offset: 0}}\r\n                    md={{span: 8, offset: 2}}\r\n                    lg={{span: 4, offset: 4}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        width=\"100%\"\r\n                        justifyContent=\"center\"\r\n                        paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"}\r\n                        paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"}\r\n                    >\r\n                        <Paper\r\n                            elevation={0}\r\n                            square\r\n                            className={css(sharedStyles.kick_starter_border_box)}\r\n                            style={{\r\n                                width: 650,\r\n                                padding: MediaQueryState.isMobile ? 20 : 30\r\n                            }}\r\n                        >\r\n                            <Typography\r\n                                align=\"center\"\r\n                                variant=\"h5\"\r\n                                color=\"primary\"\r\n                            >\r\n                                {`Welcome to ${ManageGroupUrlState.group?.displayName}`}\r\n                            </Typography>\r\n\r\n                            <Box\r\n                                height=\"20px\"\r\n                            />\r\n\r\n                            {/** Hash loader */}\r\n                            {\r\n                                isCreatingAccount(SignUpLocalState) || isAuthenticating(AuthenticationState)\r\n                                    ? <Box\r\n                                        display=\"flex\"\r\n                                        marginY=\"20px\"\r\n                                        justifyContent=\"center\"\r\n                                    >\r\n                                        <HashLoader\r\n                                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        />\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** Error message */}\r\n                            {\r\n                                !hasErrorCreatingAccount(SignUpLocalState)\r\n                                    ? <Box\r\n                                        marginY=\"20px\"\r\n                                    >\r\n                                        <Typography\r\n                                            align=\"center\"\r\n                                            variant=\"body1\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            {SignUpLocalState.errorCreatingAccount?.detail}\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                                disabled={this.invitedUserId !== undefined}\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        What would you like to do?\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"userType\"\r\n                                    value={SignUpLocalState.userType}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value={-1}\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_INVESTOR}\r\n                                        value={TYPE_INVESTOR}\r\n                                    >\r\n                                        Invest\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_ISSUER}\r\n                                        value={TYPE_ISSUER}\r\n                                    >\r\n                                        Raise funds\r\n                                    </MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"30px\"\r\n                            />\r\n\r\n                            {/** Title */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Title\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"title\"\r\n                                    value={SignUpLocalState.title}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value=\"-1\"\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    {\r\n                                        UserTitles.map((title, index) => (\r\n                                            <MenuItem\r\n                                                key={index}\r\n                                                value={title}\r\n                                            >\r\n                                                {title}\r\n                                            </MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"25px\"\r\n                            />\r\n\r\n                            {/** Names */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** First name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"First name\"\r\n                                        name=\"firstName\"\r\n                                        value={SignUpLocalState.firstName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Last name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Last name\"\r\n                                        name=\"lastName\"\r\n                                        value={SignUpLocalState.lastName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Emails */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** Email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Email\"\r\n                                        name=\"email\"\r\n                                        value={SignUpLocalState.email}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        disabled={this.invitedUserId !== undefined}\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Re-enter email\"\r\n                                        name=\"confirmedEmail\"\r\n                                        value={SignUpLocalState.confirmedEmail}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Passwords */}\r\n                            <Box>\r\n                                {/** Password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Password\"\r\n                                        name=\"password\"\r\n                                        value={SignUpLocalState.password}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Confirm password\"\r\n                                        name=\"confirmedPassword\"\r\n                                        value={SignUpLocalState.confirmedPassword}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Marketing preferences checkbox */}\r\n                            <Box\r\n                                marginTop=\"18px\"\r\n                            >\r\n                                <FormControl>\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        flexDirection=\"row\"\r\n                                        alignItems=\"center\"\r\n                                    >\r\n                                        <Checkbox\r\n                                            name=\"acceptMarketingPreferences\"\r\n                                            color=\"primary\"\r\n                                            checked={SignUpLocalState.acceptMarketingPreferences}\r\n                                            onChange={handleInputFieldChanged}\r\n                                        />\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Accept&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.nonGroupMarketingPreferences}\r\n                                                target=\"_blank\"\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    \"marketing preferences\"\r\n                                                }\r\n                                            />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** T&Cs */}\r\n                            <Box\r\n                                marginTop=\"25px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    By signing up, you agree to our&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupTermsOfUse}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Terms of use\"\r\n                                        }\r\n                                    />\r\n                                    &nbsp;and&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupPrivacyPolicy}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Privacy policy\"\r\n                                        }\r\n                                    />\r\n                                    .\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Create Account button */}\r\n                            <Box\r\n                                marginTop=\"40px\"\r\n                                display=\"flex\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                <Button\r\n                                    className={css(sharedStyles.no_text_transform)}\r\n                                    color=\"primary\"\r\n                                    variant=\"contained\"\r\n                                    disabled={\r\n                                        SignUpLocalState.userType === -1\r\n                                        || SignUpLocalState.title === \"-1\"\r\n                                        || SignUpLocalState.firstName.trim().length === 0\r\n                                        || SignUpLocalState.lastName.trim().length === 0\r\n                                        || SignUpLocalState.email.trim().length === 0\r\n                                        || SignUpLocalState.confirmedEmail.trim().length === 0\r\n                                        || SignUpLocalState.password.trim().length === 0\r\n                                        || SignUpLocalState.confirmedPassword.trim().length === 0\r\n                                    }\r\n                                    onClick={() => createAccount()}\r\n                                >\r\n                                    Create account\r\n                                </Button>\r\n                            </Box>\r\n\r\n                            {/** Sign in if have an account */}\r\n                            <Box\r\n                                marginTop=\"20px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    Already have an Invest West account?&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.constructSignInRoute(this.props.match.params)}\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"nav-link\"\r\n                                        childComponent={\r\n                                            \"Sign in\"\r\n                                        }\r\n                                    />\r\n                                </Typography>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpNew);","import React from \"react\";\r\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\r\nimport IssuerDashboard from \"../pages/dashboard-issuer/IssuerDashboard\";\r\nimport InvestorDashboard from \"../pages/dashboard-investor/InvestorDashboard\";\r\nimport AdminDashboard from \"../pages/admin/AdminDashboard\";\r\nimport CreatePitchPage from \"../pages/create-project/CreateProject\";\r\nimport UserProfile from \"../pages/profile/ProfilePageViewOnly\";\r\nimport ProjectDetails from \"../pages/project-details/ProjectDetails\";\r\nimport PrivacyPolicyPage from \"../pages/system-public-pages/PrivacyPolicyPage\";\r\nimport TermsOfUsePage from \"../pages/system-public-pages/TermsOfUsePage\";\r\nimport RiskWarningPage from \"../pages/system-public-pages/RiskWarningPage\";\r\nimport CreatePitchTermsAndConditionsPage from \"../pages/system-public-pages/CreatePitchTermsAndConditionsPage\";\r\nimport ContactUs from \"../pages/system-public-pages/ContactUs\";\r\nimport HelpPage from \"../pages/system-public-pages/HelpPage\";\r\nimport GroupDetails from \"../pages/group-details/GroupDetails\";\r\nimport MarketingPreferencesPage from \"../pages/system-public-pages/MarketingPreferencesPage\";\r\nimport ProfilePageEditable from \"../pages/profile/ProfilePageEditable\";\r\n\r\nimport Front from \"../pages/front/Front\";\r\nimport SignIn from \"../pages/signin/SignInNew\";\r\nimport PageNotFound from \"../shared-components/page-not-found/PageNotFoundNew\";\r\n\r\nimport Routes from \"./routes\";\r\nimport GroupRoute from \"./GroupRoute\";\r\nimport ResetPassword from \"../pages/reset-password/ResetPassword\";\r\nimport ResourceDetail from \"../pages/resources/pages/ResourceDetail\";\r\nimport SignUpNew from \"../pages/signup/SignUpNew\";\r\nimport {colors} from \"@material-ui/core\";\r\n\r\n/**\r\n * Parameters in the url\r\n */\r\nexport interface RouteParams {\r\n    groupUserName: string;\r\n\r\n    [params: string]: string;\r\n}\r\n\r\nconst AppRouter = () => (\r\n    <BrowserRouter>\r\n        <Switch>\r\n            <Route path={Routes.groupSignUp} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignUpNew {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupSignUp} exact\r\n                            // @ts-ignore\r\n                            render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                                // @ts-ignore\r\n                                                            component={<SignUpNew {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupFront} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\r\n            <Route path={Routes.groupFront} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n            <Route path={Routes.groupSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n            <Route path={Routes.superAdminSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupAdminDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<AdminDashboard {...props}/>}/>}/>\r\n            <Route path={Routes.groupAdminDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<AdminDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupIssuerDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<IssuerDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupInvestorDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<InvestorDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProjectDetails {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProjectDetails {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupCreateOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchPage {...props}/>}/>}/>\r\n            <Route path={Routes.groupCreateOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewGroup} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<GroupDetails {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewGroup} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<GroupDetails {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<UserProfile {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<UserProfile {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewResourceDetail} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ResourceDetail {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewResourceDetail} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ResourceDetail {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupEditUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\r\n            <Route path={Routes.groupEditUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupHelp} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<HelpPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupContactUs} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs {...props}/>}/>}/>\r\n            <Route path={Routes.groupContactUs} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs {...props}/>}/>}/>\r\n\r\n\r\n\r\n            <Route path={Routes.nonGroupPrivacyPolicy} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<PrivacyPolicyPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupTermsOfUse} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<TermsOfUsePage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupRiskWarning} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<RiskWarningPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupCreatePitchTermsAndConditions} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchTermsAndConditionsPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupMarketingPreferences} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<MarketingPreferencesPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupAuthAction} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                       // @ts-ignore\r\n                                                component={<ResetPassword {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.error404} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<PageNotFound {...props}/>}/>}/>\r\n\r\n            {/** Handle undefined paths */}\r\n            <Route\r\n                // @ts-ignore\r\n                render={props => <GroupRoute {...props} showHeader={true}\r\n                                             component={<PageNotFound {...props}/>}/>}/>\r\n\r\n        </Switch>\r\n    </BrowserRouter>\r\n);\r\n\r\nexport default AppRouter;\r\n","import React, {Component} from 'react';\r\nimport {\r\n    IconButton,\r\n    Snackbar,\r\n    SnackbarContent\r\n} from '@material-ui/core';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport {SlideTransitionDown, SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        group: state.manageGroupFromParams.groupProperties,\r\n\r\n        open: state.manageFeedbackSnackbar.open,\r\n        message: state.manageFeedbackSnackbar.message,\r\n        color: state.manageFeedbackSnackbar.color,\r\n        position: state.manageFeedbackSnackbar.position\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar()),\r\n        resetStatesWhenSnackbarClosed: () => dispatch(feedbackSnackbarActions.resetStatesWhenSnackbarClosed())\r\n    }\r\n};\r\n\r\nclass FeedbackSnackbar extends Component {\r\n\r\n    render() {\r\n        const {\r\n            group,\r\n\r\n            open,\r\n            message,\r\n            color,\r\n            position,\r\n\r\n            closeFeedbackSnackbar,\r\n            resetStatesWhenSnackbarClosed\r\n        } = this.props;\r\n\r\n        return (\r\n            <Snackbar\r\n                open={open}\r\n                anchorOrigin={{\r\n                    vertical: position === \"\" ? \"bottom\" : position, // default vertical anchor is bottom\r\n                    horizontal: 'center',\r\n                }}\r\n                autoHideDuration={2500}\r\n                onClose={closeFeedbackSnackbar}\r\n                onExited={resetStatesWhenSnackbarClosed}\r\n                TransitionComponent={\r\n                    position === \"bottom\"\r\n                        ?\r\n                        SlideTransitionUp\r\n                        :\r\n                        position === \"top\"\r\n                            ?\r\n                            SlideTransitionDown\r\n                            :\r\n                            null\r\n                }\r\n                transitionDuration={{\r\n                    enter: 130,\r\n                    exit: 130\r\n                }}\r\n            >\r\n                <SnackbarContent\r\n                    style={{\r\n                        backgroundColor:\r\n                            color === \"primary\"\r\n                                ?\r\n                                !group\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    group.settings.primaryColor\r\n                                :\r\n                                color === \"error\"\r\n                                    ?\r\n                                    colors.errorColor\r\n                                    :\r\n                                    \"\"\r\n                    }}\r\n                    message={\r\n                        <span>\r\n                            {\r\n                                color === \"error\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <CheckCircleIcon style={{ marginRight: 8 }}/>\r\n                            }\r\n                            {message}\r\n                        </span>\r\n                    }\r\n                    action={[\r\n                        <IconButton key=\"close\" color=\"inherit\" onClick={closeFeedbackSnackbar}>\r\n                            <CloseIcon/>\r\n                        </IconButton>\r\n                    ]}\r\n                />\r\n            </Snackbar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbar);","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_CLUB_ATTRIBUTES = 'LOADING_CLUB_ATTRIBUTES';\r\nexport const CLUB_ATTRIBUTES_LOADED = 'CLUB_ATTRIBUTES_LOADED';\r\nexport const loadClubAttributes = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const {\r\n            clubAttributesLoaded,\r\n            clubAttributesBeingLoaded\r\n        } = getState().manageClubAttributes;\r\n\r\n        if (!clubAttributesLoaded && clubAttributesBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_CLUB_ATTRIBUTES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                dispatch({\r\n                    type: CLUB_ATTRIBUTES_LOADED,\r\n                    clubAttributes\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const CLUB_ATTRIBUTES_CHANGED = 'CLUB_ATTRIBUTES_CHANGED';\r\nexport const startListeningForClubAttributesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        let clubAttributesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\r\n\r\n        clubAttributesRef\r\n            .on('child_changed', snapshot => {\r\n                dispatch({\r\n                    type: CLUB_ATTRIBUTES_CHANGED,\r\n                    key: snapshot.key,\r\n                    value: snapshot.val()\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForClubAttributesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        let clubAttributesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\r\n\r\n        clubAttributesRef.off('child_changed');\r\n    }\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\nimport {signOut} from \"./authenticationActions\";\r\nimport {logout} from \"./authActions\";\r\n\r\nexport enum ManageSystemIdleTimeEvents {\r\n    OnActive = \"ManageSystemIdleTimeEvents.OnActive\",\r\n    OnIdle = \"ManageSystemIdleTimeEvents.OnIdle\"\r\n}\r\n\r\nexport interface ManageSystemIdleTimeAction extends Action {\r\n\r\n}\r\n\r\n// Called when the user is no longer idle\r\nexport const onActive: ActionCreator<any> = (event: Event) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ManageSystemIdleTimeEvents.OnActive\r\n        });\r\n    }\r\n}\r\n\r\n// Called when the user is now idle\r\nexport const onIdle: ActionCreator<any> = (event: Event) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ManageSystemIdleTimeEvents.OnIdle\r\n        });\r\n        // TODO: Remove this line when all the components have been migrated to the new authentication flow\r\n        // @ts-ignore\r\n        dispatch(logout());\r\n        return await dispatch(signOut());\r\n    }\r\n}","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_SYSTEM_GROUPS = 'LOADING_SYSTEM_GROUPS';\r\nexport const FINISHED_LOADING_SYSTEM_GROUPS = 'FINISHED_LOADING_SYSTEM_GROUPS';\r\nexport const loadGroups = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            loadingGroups,\r\n            groupsLoaded\r\n        } = getState().manageSystemGroups;\r\n\r\n        if (!loadingGroups && !groupsLoaded) {\r\n            dispatch({\r\n                type: LOADING_SYSTEM_GROUPS\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\r\n                .then(groups => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_SYSTEM_GROUPS,\r\n                        groups: [...groups]\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nlet groupsListener = null;\r\n\r\nexport const SYSTEM_GROUPS_CHANGED = 'SYSTEM_GROUPS_CHANGED';\r\nexport const startListeningForSystemGroupsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!groupsListener) {\r\n            groupsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n\r\n            groupsListener\r\n                .on('child_added', snapshot => {\r\n                    const group = snapshot.val();\r\n\r\n                    let groups = [...getState().manageSystemGroups.systemGroups];\r\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\r\n                    if (groupIndex === -1) {\r\n                        dispatch({\r\n                            type: SYSTEM_GROUPS_CHANGED,\r\n                            groups: [...groups, group]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            groupsListener\r\n                .on('child_changed', snapshot => {\r\n                    const group = snapshot.val();\r\n\r\n                    let groups = [...getState().manageSystemGroups.systemGroups];\r\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\r\n                    if (groupIndex !== -1) {\r\n\r\n                        groups[groupIndex] = group;\r\n\r\n                        dispatch({\r\n                            type: SYSTEM_GROUPS_CHANGED,\r\n                            groups: [...groups]\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForSystemGroupsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupsListener) {\r\n            groupsListener.off('child_added');\r\n            groupsListener.off('child_changed');\r\n            groupsListener = null;\r\n        }\r\n    }\r\n}","import {ManageSystemIdleTimeAction, ManageSystemIdleTimeEvents} from \"../actions/manageSystemIdleTimeActions\";\r\nimport {AuthenticationAction, AuthenticationEvents} from \"../actions/authenticationActions\";\r\n\r\n// active timeout: 1 hour\r\nexport const activeTimeOut = 1000 * 60 * 60;\r\n\r\nexport interface ManageSystemIdleTimeState {\r\n    nowIdle: boolean;\r\n    nowActive: boolean;\r\n}\r\n\r\nconst initialState: ManageSystemIdleTimeState = {\r\n    nowIdle: false,\r\n    nowActive: true\r\n}\r\n\r\nexport const isUserNowIdle = (state: ManageSystemIdleTimeState) => {\r\n    return state.nowIdle && !state.nowActive;\r\n}\r\n\r\nexport const isUserNowActive = (state: ManageSystemIdleTimeState) => {\r\n    return state.nowActive && !state.nowIdle;\r\n}\r\n\r\nconst manageSystemIdleTimeReducer = (state = initialState, action: ManageSystemIdleTimeAction | AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case ManageSystemIdleTimeEvents.OnActive:\r\n            return {\r\n                ...state,\r\n                nowActive: true,\r\n                nowIdle: false\r\n            }\r\n        case ManageSystemIdleTimeEvents.OnIdle:\r\n            return {\r\n                ...state,\r\n                nowActive: false,\r\n                nowIdle: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemIdleTimeReducer;","import React, {Component} from 'react';\r\nimport {createMuiTheme, MuiThemeProvider, responsiveFontSizes} from '@material-ui/core/styles';\r\nimport {MuiPickersUtilsProvider} from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport AppRouter from \"./router/router.tsx\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from './redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {AUTH_SUCCESS} from './pages/signin/Signin';\r\n\r\nimport FeedbackSnackbar from './shared-components/feedback-snackbar/FeedbackSnackbar';\r\n\r\nimport firebase from './firebase/firebaseApp';\r\nimport * as colors from './values/colors';\r\nimport * as authActions from './redux-store/actions/authActions';\r\nimport * as clubAttributesActions from './redux-store/actions/clubAttributesActions';\r\nimport * as mediaQueryActions from './redux-store/actions/mediaQueryActions';\r\nimport * as invitedUsersActions from './redux-store/actions/invitedUsersActions';\r\nimport * as manageJoinRequestsActions from './redux-store/actions/manageJoinRequestsActions';\r\nimport * as activitiesTableActions from './redux-store/actions/activitiesTableActions';\r\nimport * as groupAdminsTableActions from './redux-store/actions/groupAdminsTableActions';\r\nimport * as forumsActions from './redux-store/actions/forumsActions';\r\nimport * as editUserActions from './redux-store/actions/editUserActions';\r\nimport * as manageSystemGroupsActions from './redux-store/actions/manageSystemGroupsActions';\r\nimport {signIn} from \"./redux-store/actions/authenticationActions\";\r\nimport {getGroupRouteTheme} from \"./redux-store/reducers/manageGroupUrlReducer\";\r\nimport IdleTimer from \"react-idle-timer\";\r\nimport {activeTimeOut} from \"./redux-store/reducers/manageSystemIdleTimeReducer\";\r\nimport {onIdle} from \"./redux-store/actions/manageSystemIdleTimeActions\";\r\n\r\n// map redux states to props of this component\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        /**\r\n         * Old state --------------------------------------------------------------------------------------------------\r\n         */\r\n        // angel network loaded from anid from URL params\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // user --------------------------------------------------------------------------------------------------------\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authStatus: state.auth.authStatus,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        forums: state.manageForums.forums,\r\n\r\n        // club attributes ---------------------------------------------------------------------------------------------\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // system groups -----------------------------------------------------------------------------------------------\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n        loadingGroups: state.manageSystemGroups.loadingGroups\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\n// map redux dispatch (actions) to props of this component\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        signIn: () => dispatch(signIn()),\r\n        onIdle: (event) => dispatch(onIdle(event)),\r\n\r\n        /**\r\n         * Old dispatch ------------------------------------------------------------------------------------------------\r\n         */\r\n        startListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.startListeningForAngelNetworkChanged()),\r\n        stopListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.stopListeningForAngelNetworkChanged()),\r\n\r\n        // auth functions  ---------------------------------------------------------------------------------------------\r\n        initializeAuthState: () => dispatch(authActions.initializeAuthState()),\r\n        getUserProfileAndValidateUser: (uid) => dispatch(authActions.getUserProfileAndValidateUser(uid)),\r\n        startListeningForUserProfileChanges: () => dispatch(authActions.startListeningForUserProfileChanges()),\r\n        stopListeningForUserProfileChanges: () => dispatch(authActions.stopListeningForUserProfileChanges()),\r\n        startListeningForGroupsUserIsIn: () => dispatch(authActions.startListeningForGroupsUserIsIn()),\r\n        stopListeningForGroupsUserIsIn: () => dispatch(authActions.stopListeningForGroupsUserIsIn()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // club attributes functions  ----------------------------------------------------------------------------------\r\n        loadClubAttributes: () => dispatch(clubAttributesActions.loadClubAttributes()),\r\n        startListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.startListeningForClubAttributesChanged()),\r\n        stopListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.stopListeningForClubAttributesChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // media query functions  --------------------------------------------------------------------------------------\r\n        addMediaQueryListeners: () => dispatch(mediaQueryActions.addMediaQueryListeners()),\r\n        removeMediaQueryListeners: () => dispatch(mediaQueryActions.removeMediaQueryListeners()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        adminDashboard_stopListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.stopListeningForInvitedUsersChanged()),\r\n\r\n        joinRequestsTable_stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged()),\r\n\r\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        groupAdminsTable_stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\r\n\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\r\n\r\n        loadSystemGroups: () => dispatch(manageSystemGroupsActions.loadGroups()),\r\n        startListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.startListeningForSystemGroupsChanged()),\r\n        stopListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.stopListeningForSystemGroupsChanged())\r\n    }\r\n};\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseAuth = firebase.auth();\r\n        this.authListener = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            addMediaQueryListeners\r\n        } = this.props;\r\n\r\n        // add media query listeners\r\n        addMediaQueryListeners();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadClubAttributesIfNotLoaded();\r\n            this.attachListeners();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadClubAttributesIfNotLoaded();\r\n            this.attachListeners();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            removeMediaQueryListeners,\r\n            stopListeningForAngelNetworkChanged,\r\n            stopListeningForClubAttributesChanged\r\n        } = this.props;\r\n\r\n        /**\r\n         * These listeners are global for whole system.\r\n         * Therefore, they should only be cancelled when the page is destroyed.\r\n         */\r\n        // cancel listening for auth state changed\r\n        this.authListener();\r\n        this.authListener = null;\r\n        // remove media query listeners\r\n        removeMediaQueryListeners();\r\n        // stop listening for angel network's changes\r\n        stopListeningForAngelNetworkChanged();\r\n        // stop listening for club attributes' changes\r\n        stopListeningForClubAttributesChanged();\r\n        /**\r\n         * ////---------------------------------------------------------------------------------------------------------\r\n         */\r\n\r\n        // cancel all other listeners when the page is destroyed\r\n        this.cancelAllListeners();\r\n    }\r\n\r\n    /**\r\n     * Cancel all listeners used in the components within the system\r\n     */\r\n    cancelAllListeners = () => {\r\n        const {\r\n            stopListeningForUserProfileChanges,\r\n\r\n            stopListeningForGroupsUserIsIn,\r\n\r\n            joinRequestsTable_stopListeningForJoinRequestsChanged,\r\n\r\n            adminDashboard_stopListeningForInvitedUsersChanged,\r\n\r\n            activitiesTable_stopListeningForActivitiesChanged,\r\n\r\n            groupAdminsTable_stopListeningForGroupAdminsChanged,\r\n\r\n            stopListeningForForumsChanged,\r\n            stopListeningForThreadsChanged,\r\n            stopListeningForThreadRepliesChanged,\r\n\r\n            editUserProfile_stopOriginalUserChangedListener,\r\n\r\n            stopListeningForSystemGroupsChanged\r\n        } = this.props;\r\n        // stop listening for user's profile changes\r\n        stopListeningForUserProfileChanges();\r\n        // stop listening for groups user is in changes\r\n        stopListeningForGroupsUserIsIn();\r\n\r\n        // stop listening for join requests changes in the JoinRequests table component\r\n        joinRequestsTable_stopListeningForJoinRequestsChanged();\r\n\r\n        // stop listening for invited users changes in the InvitedUsers component\r\n        adminDashboard_stopListeningForInvitedUsersChanged();\r\n\r\n        // stop listening for activities changes in the ActivitiesTable component\r\n        activitiesTable_stopListeningForActivitiesChanged();\r\n\r\n        // stop listening for group admins changes in the GroupAdminsTable component\r\n        groupAdminsTable_stopListeningForGroupAdminsChanged();\r\n\r\n        // stop listening for forums changes\r\n        stopListeningForForumsChanged();\r\n        // stop listening for threads changes\r\n        stopListeningForThreadsChanged();\r\n        // stop listening for thread replies changes\r\n        stopListeningForThreadRepliesChanged();\r\n\r\n        // stop listening for edited user's changes\r\n        // this should get called if the current user and the user being edited are different\r\n        editUserProfile_stopOriginalUserChangedListener();\r\n\r\n        // stop listening for system groups changes\r\n        stopListeningForSystemGroupsChanged();\r\n    };\r\n\r\n    /**\r\n     * Load club attributes\r\n     */\r\n    loadClubAttributesIfNotLoaded = () => {\r\n        const {\r\n            clubAttributesLoaded,\r\n            clubAttributesBeingLoaded,\r\n\r\n            loadClubAttributes\r\n        } = this.props;\r\n\r\n        if (!clubAttributesLoaded && !clubAttributesBeingLoaded) {\r\n            // load club attributes\r\n            loadClubAttributes();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load all the groups in the system\r\n     * --> This should be done as soon as the user is logged in\r\n     */\r\n    loadSystemGroups = () => {\r\n        const {\r\n            groupsLoaded,\r\n            loadingGroups,\r\n\r\n            loadSystemGroups\r\n        } = this.props;\r\n\r\n        if (!groupsLoaded && !loadingGroups) {\r\n            // load system groups\r\n            loadSystemGroups();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attach listeners\r\n     */\r\n    attachListeners = () => {\r\n        const {\r\n            authStatus,\r\n\r\n            user,\r\n            userLoaded,\r\n            clubAttributesLoaded,\r\n            groupsLoaded,\r\n\r\n            initializeAuthState,\r\n            getUserProfileAndValidateUser,\r\n            startListeningForClubAttributesChanged,\r\n            startListeningForUserProfileChanges,\r\n            startListeningForAngelNetworkChanged,\r\n            startListeningForGroupsUserIsIn,\r\n            startListeningForSystemGroupsChanged\r\n        } = this.props;\r\n\r\n        startListeningForAngelNetworkChanged();\r\n\r\n        if (user && userLoaded && authStatus === AUTH_SUCCESS) {\r\n            // start listening for user's profile changes\r\n            startListeningForUserProfileChanges();\r\n            // start listening for groups user is in changes\r\n            startListeningForGroupsUserIsIn();\r\n\r\n            if (groupsLoaded) {\r\n                // start listening for system groups changed\r\n                startListeningForSystemGroupsChanged();\r\n            }\r\n        }\r\n\r\n        if (clubAttributesLoaded) {\r\n            // start listening for club attributes' changes\r\n            startListeningForClubAttributesChanged();\r\n        }\r\n\r\n        if (!this.authListener) {\r\n            // listen for auth state changed\r\n            this.authListener = this.firebaseAuth\r\n                .onAuthStateChanged(firebaseUser => {\r\n                    // call this function to always set userLoaded to false when user is signed out\r\n                    initializeAuthState();\r\n                    // if user is authenticated\r\n                    if (firebaseUser) {\r\n                        getUserProfileAndValidateUser(firebaseUser.uid);\r\n\r\n                        // load system groups\r\n                        this.loadSystemGroups();\r\n                    }\r\n                    // user is not authenticated\r\n                    else {\r\n                        getUserProfileAndValidateUser(null);\r\n                        // the listeners used in components within the system must be cancelled\r\n                        // when the logged in user logs out\r\n                        this.cancelAllListeners();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    getTheme = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (ManageGroupUrlState.group) {\r\n            return getGroupRouteTheme(ManageGroupUrlState);\r\n        }\r\n\r\n        if (!groupPropertiesLoaded || !shouldLoadOtherData || !groupProperties) {\r\n            return defaultTheme;\r\n        }\r\n\r\n        return responsiveFontSizes(\r\n            createMuiTheme({\r\n                palette: {\r\n                    primary: {\r\n                        main: groupProperties.settings.primaryColor\r\n                    },\r\n\r\n                    secondary: {\r\n                        main: groupProperties.settings.secondaryColor\r\n                    },\r\n\r\n                    text: {\r\n                        secondary: colors.blue_gray_700,\r\n                    }\r\n                },\r\n                typography: {\r\n                    fontFamily: \"Muli, sans-serif\"\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <IdleTimer\r\n                    timeout={activeTimeOut}\r\n                    onIdle={this.props.onIdle}\r\n                />\r\n\r\n                <MuiThemeProvider\r\n                    theme={this.getTheme()}\r\n                >\r\n                    <MuiPickersUtilsProvider\r\n                        utils={DateFnsUtils}\r\n                    >\r\n                        <AppRouter/>\r\n\r\n                        {/** Feedback snackbar */}\r\n                        <FeedbackSnackbar/>\r\n                    </MuiPickersUtilsProvider>\r\n                </MuiThemeProvider>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// export the App component using redux connect to hook up states and actions\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nexport const defaultTheme = responsiveFontSizes(createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: colors.primaryColor\r\n        },\r\n\r\n        secondary: {\r\n            main: colors.secondaryColor\r\n        },\r\n\r\n        text: {\r\n            secondary: colors.blue_gray_700,\r\n        }\r\n    },\r\n    typography: {\r\n        fontFamily: \"Muli, sans-serif\"\r\n    }\r\n}));","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport User from \"../../models/user\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport React from \"react\";\r\n\r\nexport enum ProfileEvents {\r\n    SetCopiedUser = \"PersonalDetailsEvents.SetCopiedUser\"\r\n}\r\n\r\nexport interface ProfileAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetCopiedUserAction extends ProfileAction {\r\n    copiedUser?: User;\r\n    firstTimeSetCopiedUser?: true; // true or undefined\r\n}\r\n\r\nexport const setCopiedUser: ActionCreator<any> = (user: User | null, firstTimeSetCopiedUser?: true) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetCopiedUserAction = {\r\n            type: ProfileEvents.SetCopiedUser,\r\n            copiedUser: user ? JSON.parse(JSON.stringify(user)) : undefined,\r\n            firstTimeSetCopiedUser\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n// These are the input field categories corresponding to different groups of input fields in the Profile page\r\nexport enum InputCategories {\r\n    // includes text fields in the Personal details section\r\n    PersonalDetails = \"InputCategories.PersonalDetails\",\r\n    // includes text fields in the Business profile section\r\n    BusinessProfile = \"InputCategories.BusinessProfile\",\r\n    // includes text fields in the Registered office section (subsection of Business profile)\r\n    RegisteredOffice = \"InputCategories.RegisteredOffice\",\r\n    // includes text fields in the Trading address section (subsection of Business profile)\r\n    TradingAddress = \"InputCategories.TradingAddress\",\r\n    // includes text fields in the Director section (subsection of Business profile)\r\n    Director = \"InputCategories.Director\",\r\n    // includes all checkboxes in Business profile section\r\n    BusinessProfileCheckBox = \"InputCategories.BusinessProfileCheckBox\"\r\n}\r\n\r\nexport const handleInputFieldChanged: ActionCreator<any> = (inputCategory: InputCategories, event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        let currentCopiedUser: User | undefined = JSON.parse(JSON.stringify(getState().ProfileLocalState.copiedUser));\r\n        if (!currentCopiedUser) {\r\n            return;\r\n        }\r\n\r\n        // let newBusinessProfile: BusinessProfile = getState().ProfileLocalState.BusinessProfileState.newBusinessProfile;\r\n        //\r\n        // const inputFieldName: string = event.target.name;\r\n        // const inputFieldValue: string = event.target.value;\r\n        // const inputFieldChecked: boolean = event.target.checked;\r\n        //\r\n        // switch (inputCategory) {\r\n        //     case InputCategories.PersonalDetails:\r\n        //         currentCopiedUser = {\r\n        //             ...currentCopiedUser,\r\n        //             [inputFieldName]: inputFieldValue\r\n        //         }\r\n        //         return dispatch(setCopiedUser(currentCopiedUser));\r\n        //     case InputCategories.BusinessProfile:\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     [inputFieldName]: inputFieldValue\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 [inputFieldName]: inputFieldValue\r\n        //             }\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     case InputCategories.RegisteredOffice: {\r\n        //         if (inputFieldValue === \"none\") {\r\n        //             return;\r\n        //         }\r\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\r\n        //         if (!foundAddresses) {\r\n        //             return;\r\n        //         }\r\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\r\n        //         if (index === -1) {\r\n        //             return;\r\n        //         }\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     registeredOffice: foundAddresses[index]\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 registeredOffice: foundAddresses[index]\r\n        //             };\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     }\r\n        //     case InputCategories.TradingAddress: {\r\n        //         if (inputFieldValue === \"none\") {\r\n        //             return;\r\n        //         }\r\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\r\n        //         if (!foundAddresses) {\r\n        //             return;\r\n        //         }\r\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\r\n        //         if (index === -1) {\r\n        //             return;\r\n        //         }\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     tradingAddress: foundAddresses[index]\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 tradingAddress: foundAddresses[index]\r\n        //             };\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     }\r\n        //     case InputCategories.BusinessProfileCheckBox:\r\n        //         const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = {\r\n        //             type: BusinessProfileEvents.CheckBoxChanged,\r\n        //             name: inputFieldName,\r\n        //             value: inputFieldChecked\r\n        //         };\r\n        //         return dispatch(businessProfileCheckBoxChangedAction);\r\n        //     default:\r\n        //         return;\r\n        // }\r\n    }\r\n}","import * as authActions from '../actions/authActions';\r\nimport {\r\n    INVALID_AUTH_NONE,\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\n// auth initial state\r\nconst initState = {\r\n    signingIn: false,\r\n    authenticating: false,\r\n    authStatus: INVALID_AUTH_NONE,\r\n\r\n    preventValidatingUserWhenSigningUp: false,\r\n\r\n    user: null,\r\n    userLoaded: false,\r\n    userBeingLoaded: false,\r\n\r\n    groupsUserIsIn: null,\r\n    loadingGroupsUserIsIn: false,\r\n    groupsUserIsInLoaded: false\r\n};\r\n\r\nconst authReducer = (state = initState, action) => {\r\n\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return {\r\n                ...initState,\r\n                authenticating: state.authenticating,\r\n                authStatus: state.authStatus\r\n            };\r\n        case authActions.INITIALIZE_AUTH_STATE:\r\n            return {\r\n                ...initState,\r\n                authenticating: state.authenticating,\r\n                authStatus: state.authStatus\r\n            };\r\n        case authActions.TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP:\r\n            return {\r\n                ...state,\r\n                preventValidatingUserWhenSigningUp: action.shouldPrevent\r\n            };\r\n        case authActions.RESET_AUTH_STATUS:\r\n            return {\r\n                ...state,\r\n                authStatus: INVALID_AUTH_NONE\r\n            };\r\n        case authActions.SIGNING_IN:\r\n            return {\r\n                ...state,\r\n                singingIn: true\r\n            };\r\n        case authActions.AUTHENTICATING:\r\n            return {\r\n                ...state,\r\n                singingIn: false,\r\n                authenticating: true,\r\n                authStatus: INVALID_AUTH_NONE,\r\n                preventValidatingUserWhenSigningUp: false,\r\n\r\n                user: null,\r\n                userLoaded: false,\r\n                userBeingLoaded: true,\r\n\r\n                groupsUserIsIn: null,\r\n                loadingGroupsUserIsIn: false,\r\n                groupsUserIsInLoaded: false\r\n            };\r\n        case authActions.AUTH_LOADING_GROUPS_USER_IS_IN:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [],\r\n                loadingGroupsUserIsIn: true,\r\n                groupsUserIsInLoaded: false\r\n            };\r\n        case authActions.AUTH_GROUPS_USER_IS_IN_LOADED:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [...action.groups],\r\n                loadingGroupsUserIsIn: false,\r\n                groupsUserIsInLoaded: true\r\n            };\r\n        case authActions.FINISHED_AUTHENTICATING:\r\n            return {\r\n                ...state,\r\n                signingIn: false,\r\n                authenticating: false,\r\n                authStatus: action.authStatus,\r\n                preventValidatingUserWhenSigningUp: false,\r\n\r\n                user: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.user,\r\n                userLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? true : state.userLoaded,\r\n                userBeingLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.userBeingLoaded,\r\n\r\n                groupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.groupsUserIsIn,\r\n                loadingGroupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.loadingGroupsUserIsIn,\r\n                groupsUserIsInLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.groupsUserIsInLoaded\r\n            };\r\n        // set state when finished loading user's profile\r\n        case authActions.USER_PROFILE_LOADED:\r\n            return {\r\n                ...state,\r\n                user: JSON.parse(JSON.stringify(action.user)),\r\n                userLoaded: true,\r\n                userBeingLoaded: false\r\n            };\r\n        // when user's profile has changed\r\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\r\n            return {\r\n                ...state,\r\n                user: JSON.parse(JSON.stringify(action.userChanged))\r\n            };\r\n        case authActions.GROUPS_USER_IS_IN_HAVE_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [...action.groups]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n\r\n\r\n","import * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../actions/editUserActions';\r\nimport * as editImageActions from '../actions/editImageActions';\r\nimport * as editVideoActions from '../actions/editVideoActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    BusinessProfile: {\r\n        companyName: '',\r\n        registrationNo: '',\r\n        sector: 'None',\r\n        companyWebsite: '',\r\n\r\n        registeredOffice: {\r\n            address1: '',\r\n            address2: '',\r\n            address3: '',\r\n            townCity: '',\r\n            postcode: ''\r\n        },\r\n\r\n        tradingAddress: {\r\n            address1: '',\r\n            address2: '',\r\n            address3: '',\r\n            townCity: '',\r\n            postcode: ''\r\n        },\r\n\r\n        directors: []\r\n    },\r\n\r\n    logoToBeUploaded: null,\r\n    videoToBeUploaded: null,\r\n\r\n    registeredOfficeSearchPostcode: '', // field for user to fill in with postcode\r\n    registeredOfficeEnterAddressManually: false,\r\n    registeredOfficeRecommendedAddresses: null, // searched addresses from entered postcode\r\n\r\n    tradingAddressSameAsRegisteredOffice: true,\r\n    tradingAddressSearchPostcode: '', // field for user to fill in with postcode\r\n    tradingAddressEnterAddressManually: false,\r\n    tradingAddressRecommendedAddresses: null, // searched addresses from entered postcode\r\n\r\n    expandBusinessProfileFilling: false // this field is only available for investor\r\n};\r\n\r\nconst createBusinessProfileReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    [action.fieldName]: action.fieldValue\r\n                }\r\n            };\r\n        case createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice: {\r\n                        ...state.BusinessProfile.registeredOffice,\r\n                        [action.fieldName]: action.fieldValue\r\n                    }\r\n                }\r\n            };\r\n        case createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        ...state.BusinessProfile.tradingAddress,\r\n                        [action.fieldName]: action.fieldValue\r\n                    }\r\n                }\r\n            };\r\n        case createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.fieldValue,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice:\r\n                        action.fieldName !== \"registeredOfficeSearchPostcode\"\r\n                            ?\r\n                            state.BusinessProfile.registeredOffice\r\n                            :\r\n                            {\r\n                                address1: '',\r\n                                address2: '',\r\n                                address3: '',\r\n                                townCity: '',\r\n                                postcode: ''\r\n                            },\r\n                    tradingAddress:\r\n                        action.fieldName !== \"tradingAddressSearchPostcode\"\r\n                            ?\r\n                            state.BusinessProfile.tradingAddress\r\n                            :\r\n                            {\r\n                                address1: '',\r\n                                address2: '',\r\n                                address3: '',\r\n                                townCity: '',\r\n                                postcode: ''\r\n                            }\r\n                },\r\n                registeredOfficeEnterAddressManually:\r\n                    action.fieldName !== \"registeredOfficeSearchPostcode\" ? state.registeredOfficeEnterAddressManually : false,\r\n                registeredOfficeRecommendedAddresses:\r\n                    action.fieldName !== \"registeredOfficeSearchPostcode\" ? state.registeredOfficeRecommendedAddresses : null,\r\n                tradingAddressEnterAddressManually:\r\n                    action.fieldName !== \"tradingAddressSearchPostcode\" ? state.tradingAddressEnterAddressManually : false,\r\n                tradingAddressRecommendedAddresses:\r\n                    action.fieldName !== \"tradingAddressSearchPostcode\" ? state.tradingAddressRecommendedAddresses : null,\r\n            };\r\n        case createBusinessProfileActions.SEARCHING_REGISTERED_OFFICE_ADDRESSES:\r\n            return state;\r\n        case createBusinessProfileActions.DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES:\r\n            return {\r\n                ...state,\r\n                registeredOfficeRecommendedAddresses: action.results\r\n            };\r\n        case createBusinessProfileActions.SEARCHING_TRADING_ADDRESSES:\r\n            return state;\r\n        case createBusinessProfileActions.DONE_SEARCHING_TRADING_ADDRESSES:\r\n            return {\r\n                ...state,\r\n                tradingAddressRecommendedAddresses: action.results\r\n            };\r\n        case createBusinessProfileActions.SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice: {\r\n                        ...state.BusinessProfile.registeredOffice,\r\n                        address1: action.selectedAddress[0],\r\n                        address2: action.selectedAddress[1],\r\n                        address3: action.selectedAddress[2],\r\n                        townCity: action.selectedAddress[3],\r\n                        postcode: state.registeredOfficeSearchPostcode.toUpperCase(),\r\n                    }\r\n                },\r\n                registeredOfficeEnterAddressManually: true,\r\n                registeredOfficeSearchPostcode: '',\r\n                registeredOfficeRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        ...state.BusinessProfile.tradingAddress,\r\n                        address1: action.selectedAddress[0],\r\n                        address2: action.selectedAddress[1],\r\n                        address3: action.selectedAddress[2],\r\n                        townCity: action.selectedAddress[3],\r\n                        postcode: state.tradingAddressSearchPostcode.toUpperCase(),\r\n                    }\r\n                },\r\n                tradingAddressEnterAddressManually: true,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY:\r\n            return {\r\n                ...state,\r\n                registeredOfficeEnterAddressManually: !state.registeredOfficeEnterAddressManually,\r\n                registeredOfficeSearchPostcode: '',\r\n                registeredOfficeRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY:\r\n            return {\r\n                ...state,\r\n                tradingAddressEnterAddressManually: !state.tradingAddressEnterAddressManually,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE:\r\n            return {\r\n                ...state,\r\n                tradingAddressSameAsRegisteredOffice: action.checked,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null,\r\n                tradingAddressEnterAddressManually: false,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        address1: '',\r\n                        address2: '',\r\n                        address3: '',\r\n                        townCity: '',\r\n                        postcode: ''\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.ADD_NEW_DIRECTOR_TEMPORARILY:\r\n            // update this state only when creating a new business profile\r\n            if (!action.isEditingExistingBusinessProfile) {\r\n                return {\r\n                    ...state,\r\n                    BusinessProfile: {\r\n                        ...state.BusinessProfile,\r\n                        directors: [...state.BusinessProfile.directors, action.director]\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editUserActions.DELETE_DIRECTOR_TEMPORARILY:\r\n            if (!action.isEditingExistingBusinessProfile) {\r\n                let editedDirectors = JSON.parse(JSON.stringify(state.BusinessProfile.directors));\r\n                editedDirectors.splice(action.index, 1);\r\n                return {\r\n                    ...state,\r\n                    BusinessProfile: {\r\n                        ...state.BusinessProfile,\r\n                        directors: editedDirectors\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\r\n            return {\r\n                ...state,\r\n                logoToBeUploaded: action.blob\r\n            };\r\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\r\n            return {\r\n                ...state,\r\n                videoToBeUploaded: action.video\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                expandBusinessProfileFilling: state.expandBusinessProfileFilling\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR:\r\n            return {\r\n                ...initState,\r\n                expandBusinessProfileFilling: !state.expandBusinessProfileFilling\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default createBusinessProfileReducer;","import * as editUserActions from '../actions/editUserActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    // this variable is to ensure the user's profile won't be able to be edited\r\n    // by the group admins if they don't belong to that group\r\n    // if the originalUser has the \"groupsUserIsIn\" property\r\n    // and the group admins do not belong to the user's home group,\r\n    // then they won't be able to edit this user's profile.\r\n    allowEditing: true,\r\n\r\n    // original user object\r\n    originalUser: null,\r\n    // user edited object\r\n    userEdited: null,\r\n\r\n    // when a new director is being added\r\n    addNewDirector: false,\r\n    newDirectorText: ''\r\n};\r\n\r\n// Reducer\r\nconst editUserReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editUserActions.SET_ORIGINAL_USER_AND_EDITED_USER:\r\n            return {\r\n                ...state,\r\n                originalUser: action.user,\r\n                userEdited: action.user,\r\n                allowEditing: action.allowEditing\r\n            };\r\n        case editUserActions.EDIT_PERSONAL_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    [action.edit.property]: action.edit.value\r\n                }\r\n            };\r\n        case editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        [action.edit.property]: action.edit.value\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        registeredOffice: {\r\n                            ...state.userEdited.BusinessProfile.registeredOffice,\r\n                            [action.edit.property]: action.edit.value\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        tradingAddress: {\r\n                            ...state.userEdited.BusinessProfile.tradingAddress,\r\n                            [action.edit.property]: action.edit.value\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.TOGGLE_ADD_NEW_DIRECTOR:\r\n            return {\r\n                ...state,\r\n                addNewDirector: !state.addNewDirector,\r\n                newDirectorText: state.addNewDirector ? '' : state.newDirectorText\r\n            };\r\n        case editUserActions.ADDING_NEW_DIRECTOR:\r\n            return {\r\n                ...state,\r\n                [action.edit.property]: action.edit.value\r\n            };\r\n        case editUserActions.ADD_NEW_DIRECTOR_TEMPORARILY:\r\n            // update this state only when editing an existing business profile\r\n            if (action.isEditingExistingBusinessProfile) {\r\n                return {\r\n                    ...state,\r\n                    userEdited: {\r\n                        ...state.userEdited,\r\n                        BusinessProfile: {\r\n                            ...state.userEdited.BusinessProfile,\r\n                            directors: [...state.userEdited.BusinessProfile.directors, state.newDirectorText]\r\n                        }\r\n                    },\r\n                    addNewDirector: false,\r\n                    newDirectorText: ''\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                addNewDirector: false,\r\n                newDirectorText: ''\r\n            };\r\n        case editUserActions.DELETE_DIRECTOR_TEMPORARILY:\r\n            // update this state only when editing an existing business profile\r\n            if (action.isEditingExistingBusinessProfile) {\r\n                let editedDirectors = JSON.parse(JSON.stringify(state.userEdited.BusinessProfile.directors));\r\n                editedDirectors.splice(action.index, 1);\r\n                return {\r\n                    ...state,\r\n                    userEdited: {\r\n                        ...state.userEdited,\r\n                        BusinessProfile: {\r\n                            ...state.userEdited.BusinessProfile,\r\n                            directors: editedDirectors\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editUserActions.RESET_PERSONAL_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    title: state.originalUser.title,\r\n                    firstName: state.originalUser.firstName,\r\n                    lastName: state.originalUser.lastName,\r\n                    email: state.originalUser.email,\r\n                    linkedin: !state.originalUser.linkedin ? '' : state.originalUser.linkedin\r\n                }\r\n            };\r\n        case editUserActions.RESET_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: JSON.parse(JSON.stringify(state.originalUser.BusinessProfile))\r\n                }\r\n            };\r\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\r\n            return {\r\n                ...state,\r\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\r\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\r\n            };\r\n        case editUserActions.EDIT_USER_ORIGINAL_USER_CHANGED:\r\n            return {\r\n                ...state,\r\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\r\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editUserReducer;","import * as editImageActions from '../actions/editImageActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport {\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_LOGO_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nconst initState = {\r\n    editImageDialogOpen: false,\r\n    mode: null,\r\n\r\n    imgEditor: null,\r\n    imgEdited: null, // blob file obtained after editing\r\n\r\n    imgZoom: 1,\r\n\r\n    imgPreEdited: null, // file chosen from computer or url from previous logos\r\n    imgPreEditedLoaded: true,\r\n    imgPreIndex: -1, // index of previous image in the original list (not sorted) on firebase (when choose)\r\n\r\n    previousPhotos: null\r\n};\r\n\r\nconst editImageReducer = (state = initState, action) => {\r\n\r\n    switch(action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editImageActions.TOGGLE_EDIT_IMAGE_DIALOG:\r\n            return {\r\n                ...state,\r\n                editImageDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editImageDialogOpen,\r\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\r\n                imgPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.imgPreIndex : -1,\r\n                previousPhotos:\r\n                    action.mode === UPLOAD_LOGO_MODE\r\n                        ?\r\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.logo)\r\n                            ?\r\n                            []\r\n                            :\r\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.logo))\r\n                        :\r\n                        action.mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                            ?\r\n                            !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.profilePicture)\r\n                                ?\r\n                                []\r\n                                :\r\n                                JSON.parse(JSON.stringify(action.user.profilePicture))\r\n                            :\r\n                            [],\r\n                imgEdited: null,\r\n                imgZoom: 1,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: true\r\n            };\r\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case editImageActions.SET_IMAGE_EDITOR_REFERENCE:\r\n            return {\r\n                ...state,\r\n                imgEditor: action.editor\r\n            };\r\n        case editImageActions.LOADING_IMAGE_FILE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: false\r\n            };\r\n        case editImageActions.IMAGE_FILES_LOADED:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: window.URL.createObjectURL(action.blob),\r\n                imgPreEditedLoaded: true,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.IMAGE_ZOOM_CHANGED:\r\n            return {\r\n                ...state,\r\n                imgZoom: action.zoom\r\n            };\r\n        case editImageActions.LOADING_PREVIOUS_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: false,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.FINISHED_LOADING_PREVIOUS_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: window.URL.createObjectURL(action.blob),\r\n                imgPreEditedLoaded: true,\r\n                imgPreIndex: state.previousPhotos.length - 1 - action.selectedIndex, // get the original index\r\n            };\r\n        case editImageActions.CANCEL_EDITING_CURRENT_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: true,\r\n                imgEdited: null,\r\n                imgZoom: 1,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.EDITED_IMAGE_OBTAINED:\r\n            return {\r\n                ...state,\r\n                imgEdited: action.blob\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editImageReducer;","import * as editVideoActions from '../actions/editVideoActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport {\r\n    UPLOAD_VIDEO_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nconst initState = {\r\n    editVideoDialogOpen: false,\r\n    mode: null,\r\n\r\n    videoTypeSelected: null,\r\n    videoChosen: null,\r\n    previousVideos: null,\r\n    videoPreIndex: -1\r\n};\r\n\r\nconst editVideoReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editVideoActions.TOGGLE_EDIT_VIDEO_DIALOG:\r\n            return {\r\n                ...state,\r\n                editVideoDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editVideoDialogOpen,\r\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\r\n                videoPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoPreIndex : -1,\r\n                previousVideos:\r\n                    action.mode === UPLOAD_VIDEO_MODE\r\n                        ?\r\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.video)\r\n                            ?\r\n                            []\r\n                            :\r\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.video))\r\n                        :\r\n                        [],\r\n                videoChosen: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoChosen : null,\r\n                videoTypeSelected: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoTypeSelected : null\r\n            };\r\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case editVideoActions.VIDEO_TYPE_CHOSEN:\r\n            return {\r\n                ...state,\r\n                videoTypeSelected: action.videoType,\r\n                videoChosen: null,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.VIDEO_URL_CHANGED:\r\n            return {\r\n                ...state,\r\n                videoChosen: action.url\r\n            };\r\n        case editVideoActions.VIDEO_FILE_CHANGED:\r\n            return {\r\n                ...state,\r\n                videoChosen: action.blob,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.CANCEL_EDITING_CURRENT_VIDEO:\r\n            return {\r\n                ...state,\r\n                videoChosen: null,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.PREVIOUS_VIDEO_SELECTED:\r\n            return {\r\n                ...state,\r\n                videoChosen: state.previousVideos[action.selectedIndex].url,\r\n                videoPreIndex: state.previousVideos.length - 1 - action.selectedIndex,\r\n                videoTypeSelected: null\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editVideoReducer;","import * as uploadFilesActions from '../actions/uploadFilesActions';\r\nimport {\r\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\r\n    UPLOAD_PITCH_COVER_MODE,\r\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\r\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    mode: null, // file upload mode (e.g. Legal documents, Pitch cover, Pitch deck, and Pitch supporting documents)\r\n    filesToBeUploaded: {\r\n        legalDocuments: [],\r\n        pitchCover: [],\r\n        pitchPresentationDocument: [],\r\n        pitchSupportingDocuments: []\r\n    }, // arrays of files that will be uploaded to Firebase storage\r\n    filesDBReferences: {\r\n        legalDocuments: [],\r\n        pitchCover: [],\r\n        pitchPresentationDocument: [],\r\n        pitchSupportingDocuments: []\r\n    }, // references of the uploaded files in the Firebase realtime DB\r\n\r\n    fileUploadErrorMessage: '',\r\n    fileUploadErrorSnackbarOpen: false\r\n};\r\n\r\nconst uploadFilesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case uploadFilesActions.DELETE_TO_BE_UPLOADED_FILE:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_COVER\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_ALL_FILES:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                },\r\n                filesDBReferences: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchSupportingDocuments\r\n                },\r\n                mode: null,\r\n                fileUploadErrorMessage: '',\r\n                fileUploadErrorSnackbarOpen: false\r\n            };\r\n        case uploadFilesActions.FILE_UPLOAD_CHANGED:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                            ?\r\n                            [...state.filesToBeUploaded.legalDocuments, action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                            ?\r\n                            [action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                            ?\r\n                            [action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                            ?\r\n                            [...state.filesToBeUploaded.pitchSupportingDocuments, action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                }\r\n            };\r\n        case uploadFilesActions.FILE_UPLOAD_ERROR:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorMessage: action.error,\r\n                fileUploadErrorSnackbarOpen: true\r\n            };\r\n        case uploadFilesActions.CLOSE_FILE_UPLOAD_ERROR_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorSnackbarOpen: false\r\n            };\r\n        case uploadFilesActions.RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorMessage: ''\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_LEGAL_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    legalDocuments: [...state.filesDBReferences.legalDocuments, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_COVER:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchCover: [...state.filesDBReferences.pitchCover, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchPresentationDocument: [...state.filesDBReferences.pitchPresentationDocument, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchSupportingDocuments: [...state.filesDBReferences.pitchSupportingDocuments, action.fileDBRef]\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default uploadFilesReducer;","import * as uploadingStatusActions from '../actions/uploadingStatusActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    UPLOAD_NONE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport {DISMISS_UPLOADING_STATUS} from \"../actions/uploadingStatusActions\";\r\n\r\nconst initState = {\r\n    mode: UPLOAD_NONE,\r\n    progress: 0\r\n};\r\n\r\nconst uploadingStatusReducer = (state = initState, action) => {\r\n    switch(action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case uploadingStatusActions.UPLOADING:\r\n            return {\r\n                mode: action.mode,\r\n                progress: action.progress\r\n            };\r\n        case DISMISS_UPLOADING_STATUS:\r\n            return {\r\n                mode: UPLOAD_NONE,\r\n                progress: 0\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default uploadingStatusReducer;","import * as changePasswordActions from '../actions/changePasswordActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    PASSWORD_CHANGE_NONE,\r\n    PASSWORD_CHANGE_RE_AUTH\r\n} from '../../shared-components/change-password/ChangePasswordPage';\r\n\r\nconst initState = {\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    newPasswordVerified: '',\r\n    passwordChangeResponseCode: PASSWORD_CHANGE_NONE\r\n};\r\n\r\nconst changePasswordReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case changePasswordActions.RE_AUTHENTICATING_USER:\r\n            return {\r\n                ...state,\r\n                passwordChangeResponseCode: PASSWORD_CHANGE_RE_AUTH\r\n            };\r\n        case changePasswordActions.RESET_CHANGE_PASSWORD:\r\n            return {\r\n                ...state,\r\n                currentPassword: '',\r\n                newPassword: '',\r\n                newPasswordVerified: '',\r\n                passwordChangeResponseCode: action.hasOwnProperty('responseCode') ? action.responseCode : PASSWORD_CHANGE_NONE\r\n            };\r\n        case changePasswordActions.CHANGE_PASSWORD_TEXT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case changePasswordActions.ERROR_CHANGING_PASSWORD:\r\n            return {\r\n                ...state,\r\n                passwordChangeResponseCode: action.errorCode\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default changePasswordReducer;","import * as clubAttributesActions from '../actions/clubAttributesActions';\r\n\r\nconst initState = {\r\n    clubAttributes: null,\r\n    clubAttributesLoaded: false,\r\n    clubAttributesBeingLoaded: false\r\n};\r\n\r\nconst clubAttributesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case clubAttributesActions.LOADING_CLUB_ATTRIBUTES:\r\n            return {\r\n                ...state,\r\n                clubAttributes: null,\r\n                clubAttributesLoaded: false,\r\n                clubAttributesBeingLoaded: true\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_LOADED:\r\n            return {\r\n                ...state,\r\n                clubAttributes: JSON.parse(JSON.stringify(action.clubAttributes)),\r\n                clubAttributesLoaded: true,\r\n                clubAttributesBeingLoaded: false\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributes: {\r\n                    ...state.clubAttributes,\r\n                    [action.key]: action.value\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default clubAttributesReducer;","import React, {Component} from 'react';\r\nimport {Button, TextField, Typography} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        createForumName: state.manageForums.createForumName,\r\n        createForumDesc: state.manageForums.createForumDesc,\r\n        createForumAuthor: state.manageForums.createForumAuthor,\r\n        createForumError: state.manageForums.createForumError,\r\n        forumEdited: state.manageForums.forumEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        createNewForum: () => dispatch(forumsActions.createNewForum()),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\r\n    }\r\n};\r\n\r\nclass CreateForum extends Component {\r\n    render() {\r\n        const {\r\n            createForumName,\r\n            createForumDesc,\r\n            createForumError,\r\n            forumEdited,\r\n\r\n            toggleCreateNewForum,\r\n            createNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column >\r\n                <Typography paragraph variant=\"h6\" color=\"primary\" >\r\n                    {\r\n                        forumEdited\r\n                            ?\r\n                            \"Edit forum\"\r\n                            :\r\n                            \"Create forum\"\r\n                    }\r\n                </Typography>\r\n                {\r\n                    forumEdited\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Typography paragraph variant=\"body1\" color=\"textSecondary\" align=\"left\">Forums are made up of individual discussion threads that can be organised around a particular subject. Create forums to organise discussions.</Typography>\r\n                }\r\n                <FlexView column marginTop={10} >\r\n                    <Typography variant=\"subtitle1\">Forum information</Typography>\r\n                    <TextField\r\n                        name=\"createForumName\"\r\n                        label=\"Name\"\r\n                        required\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        value={createForumName}\r\n                        error={createForumError && createForumName.trim().length === 0}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n                    <TextField\r\n                        name=\"createForumDesc\"\r\n                        label=\"Description\"\r\n                        placeholder=\"(optional)\"\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        multiline\r\n                        rows={4}\r\n                        rowsMax={4}\r\n                        value={createForumDesc}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n                    <Row noGutters >\r\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }} >\r\n                            <FlexView>\r\n                                {\r\n                                    !createForumError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\">Please enter forum name.</Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }}>\r\n                            <FlexView hAlignContent=\"right\" >\r\n                                <FlexView marginRight={5} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleCreateNewForum(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView marginLeft={5} >\r\n                                    <Button variant=\"contained\" color=\"primary\" onClick={createNewForum} className={css(sharedStyles.no_text_transform)}>Submit</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateForum);","import React, {Component} from 'react';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Button, TextField, Typography} from '@material-ui/core';\r\nimport ReactQuill from 'react-quill';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        createThreadName: state.manageForums.createThreadName,\r\n        createThreadBriefDesc: state.manageForums.createThreadBriefDesc,\r\n        createThreadMessage: state.manageForums.createThreadMessage,\r\n        createThreadError: state.manageForums.createThreadError,\r\n        threadEdited: state.manageForums.threadEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        createNewThread: () => dispatch(forumsActions.createNewThread()),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor))\r\n    }\r\n};\r\n\r\nclass CreateThread extends Component {\r\n\r\n    /**\r\n     * Handle react quill changed\r\n     *\r\n     * @param field\r\n     * @returns {Function}\r\n     */\r\n    handleQuillChanged = field => (content, delta, source, editor) => {\r\n        this.props.handleQuillChanged(field, editor);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            createThreadName,\r\n            createThreadBriefDesc,\r\n            createThreadMessage,\r\n            createThreadError,\r\n            threadEdited,\r\n\r\n            toggleCreateNewThread,\r\n            createNewThread,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        return (\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <FlexView column >\r\n                        <Typography paragraph variant=\"h6\" color=\"primary\" >\r\n                            {\r\n                                threadEdited\r\n                                    ?\r\n                                    \"Edit thread\"\r\n                                    :\r\n                                    \"Create thread\"\r\n                            }\r\n                        </Typography>\r\n                        {\r\n                            threadEdited\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography paragraph variant=\"body1\" color=\"textSecondary\" align=\"left\">A thread is a series of posts related to the same subject. Threads provide an organisational structure within a forum for users to share posts on similar topics. Creating a thread posts the first message.</Typography>\r\n                        }\r\n                        <FlexView column marginTop={10} >\r\n                            <Typography variant=\"body1\">Thread information</Typography>\r\n\r\n                            <TextField\r\n                                name=\"createThreadName\"\r\n                                label=\"Name\"\r\n                                required\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                value={createThreadName}\r\n                                error={createThreadError && createThreadName.trim().length === 0}\r\n                                onChange={handleForumsInputChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                name=\"createThreadBriefDesc\"\r\n                                label=\"Brief description\"\r\n                                required\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                value={createThreadBriefDesc}\r\n                                error={createThreadError && createThreadBriefDesc.trim().length === 0}\r\n                                onChange={handleForumsInputChanged}\r\n                            />\r\n\r\n                            <FlexView column marginTop={40} >\r\n                                <Typography paragraph variant=\"body1\">Thread message</Typography>\r\n                                <ReactQuill\r\n                                    placeholder=\"Write your thread message here. Add images for visual effects.\"\r\n                                    theme=\"snow\"\r\n                                    value={createThreadMessage}\r\n                                    onChange={this.handleQuillChanged(forumsActions.THREAD_CONTENT_QUILL)}\r\n                                    modules={modules}\r\n                                />\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </Col>\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Row noGutters >\r\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }}>\r\n                            <FlexView>\r\n                                {\r\n                                    !createThreadError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\">Please fill in the required fields.</Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }}>\r\n                            <FlexView hAlignContent=\"right\">\r\n                                <FlexView marginRight={5}>\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleCreateNewThread(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView marginLeft={5} >\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={createNewThread}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Submit</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateThread);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from 'react-flexview';\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {SORT_BY_CURRENT_USER, SORT_BY_LAST, SORT_BY_OLDEST} from './Forums';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        threadsTablePage: state.manageForums.threadsTablePage,\r\n        threadsTableRowsPerPage: state.manageForums.threadsTableRowsPerPage,\r\n\r\n        threadsLoadMode: state.manageForums.threadsLoadMode,\r\n        threadsSortedMode: state.manageForums.threadsSortedMode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        deleteThread: (threadID) => dispatch(forumsActions.deleteThread(threadID)),\r\n        goBackToForumsList: () => dispatch(forumsActions.goBackToForumsList()),\r\n        clickOnAParticularThread: (thread) => dispatch(forumsActions.clickOnAParticularThread(thread)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass IndividualForum extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    /**\r\n     * Render threads table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderThreads = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            forumThreadsLoaded,\r\n            forumThreads,\r\n            threadsSortedMode,\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            toggleCreateNewThread,\r\n            deleteThread,\r\n            clickOnAParticularThread\r\n        } = this.props;\r\n\r\n        if (!forumThreadsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={20} >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedThreads = [];\r\n\r\n        switch (threadsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n                sortedThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread1.dateCreated - thread2.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedThreads.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <Typography variant=\"body1\" align=\"center\" style={{ marginTop: 20, marginBottom: 20 }}>No threads created.</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedThreads\r\n                .slice(threadsTablePage * threadsTableRowsPerPage, threadsTablePage * threadsTableRowsPerPage + threadsTableRowsPerPage)\r\n                .map(thread => (\r\n                        <TableRow\r\n                            key={thread.id}\r\n                            hover\r\n                        >\r\n                            <TableCell>\r\n                                <Typography align=\"left\" variant=\"body2\" >{utils.dateTimeInReadableFormat(thread.dateCreated)}</Typography>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 400 }} >\r\n                                <FlexView column hAlignContent=\"left\" >\r\n                                    <ButtonBase onClick={() => clickOnAParticularThread(thread)} >\r\n                                        <Typography align=\"left\" variant=\"body2\" color=\"primary\" noWrap>{thread.name}</Typography>\r\n                                    </ButtonBase>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                        && (\r\n                                            !thread.hasOwnProperty('deleted')\r\n                                            || (\r\n                                                thread.hasOwnProperty('deleted')\r\n                                                && thread.deleted === false\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={12} >\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"secondary\"\r\n                                                    onClick={() => deleteThread(thread.id)}\r\n                                                    style={{ marginRight: 10 }}\r\n                                                >Delete\r\n                                                    <DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }}/>\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => toggleCreateNewThread(true, JSON.parse(JSON.stringify(thread)))}\r\n                                                > Edit\r\n                                                    <EditIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 400 }} >\r\n                                <Typography align=\"left\" variant=\"body2\" noWrap>{thread.description}</Typography>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 200 }} >\r\n                                <Typography align=\"left\" variant=\"body2\" noWrap >\r\n                                    {\r\n                                        thread.author.type !== DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            // normal users\r\n                                            `${thread.author.firstName} ${thread.author.lastName}`\r\n                                            :\r\n                                            thread.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                \"Invest West Super Admin\"\r\n                                                :\r\n                                                // group admins\r\n                                                `${thread.author.groupDetails.displayName} Admin`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            threadsLoadMode,\r\n            threadsSortedMode,\r\n\r\n            toggleCreateNewThread,\r\n            handleForumsInputChanged,\r\n            goBackToForumsList\r\n        } = this.props;\r\n\r\n        let sortedThreads = [...forumThreads];\r\n\r\n        if (threadsSortedMode === SORT_BY_CURRENT_USER) {\r\n            sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n            sortedThreads.sort((thread1, thread2) => {\r\n                return (thread2.dateCreated - thread1.dateCreated);\r\n            });\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <FlexView vAlignContent=\"center\" >\r\n                    <IconButton color=\"primary\" aria-label=\"Back\" onClick={goBackToForumsList} >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView marginLeft={8} >\r\n                        <Typography color=\"primary\" variant=\"h6\">{`Forum: ${forumSelected.name}`}</Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <FlexView marginTop={12} marginBottom={24} >\r\n                    <Typography variant=\"body2\" align=\"left\" >\r\n                        {\r\n                            !forumSelected.hasOwnProperty('lastEdited')\r\n                                ?\r\n                                `Created on: ${utils.dateTimeInReadableFormat(forumSelected.dateCreated)}`\r\n                                :\r\n                                `Last edited: ${utils.dateTimeInReadableFormat(forumSelected.lastEdited)}`\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n\r\n                <Typography variant=\"body1\" align=\"left\"><b><u>Description:</u></b></Typography>\r\n\r\n                <Typography variant=\"body1\" align=\"left\" style={{ whiteSpace: \"pre-line\", marginTop: 6 }}>{forumSelected.description}</Typography>\r\n\r\n                <Divider style={{ height: 2, marginTop: 35, marginBottom: 35, backgroundColor: colors.blue_gray_100 }} />\r\n\r\n                <FlexView marginBottom={35} >\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        onClick={() => toggleCreateNewThread(true, null)}\r\n                    >\r\n                        <AddIcon fontSize=\"small\" style={{ marginRight: 10 }}/>Create thread\r\n                    </Button>\r\n                </FlexView>\r\n\r\n                {/** Filters */}\r\n                <Container fluid style={{ padding: 0, marginBottom: 40 }} >\r\n                    <Row>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                                ?\r\n                                <Col xs={12} sm={12} md={4} lg={2} >\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Mode</Typography>\r\n                                        <Paper>\r\n                                            <FormControl fullWidth >\r\n                                                <Select\r\n                                                    value={threadsLoadMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput labelWidth={0} name=\"threadsLoadMode\" />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem value={realtimeDBUtils.LOAD_LIVE_THREADS}>Live threads</MenuItem>\r\n                                                    <MenuItem value={realtimeDBUtils.LOAD_DELETED_THREADS}>Deleted threads</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                                :\r\n                                null\r\n                        }\r\n                        <Col xs={12} sm={12} md={4} lg={2} >\r\n                            <FlexView column >\r\n                                <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Sort by</Typography>\r\n                                <Paper>\r\n                                    <FormControl fullWidth >\r\n                                        <Select\r\n                                            value={threadsSortedMode}\r\n                                            onChange={handleForumsInputChanged}\r\n                                            margin=\"dense\"\r\n                                            input={\r\n                                                <OutlinedInput labelWidth={0} name=\"threadsSortedMode\" />\r\n                                            }\r\n                                        >\r\n                                            <MenuItem value={SORT_BY_LAST}>Newest</MenuItem>\r\n                                            <MenuItem value={SORT_BY_CURRENT_USER}>Mine</MenuItem>\r\n                                            <MenuItem value={SORT_BY_OLDEST}>Oldest</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Paper>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n\r\n                {/** Threads table */}\r\n                <Paper style={{ overflowX: \"auto\" }}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Date</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Thread</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Description</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Author</b></Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderThreads()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[5, 20, 50]}\r\n                                    count={sortedThreads.length}\r\n                                    rowsPerPage={threadsTableRowsPerPage}\r\n                                    page={threadsTablePage}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={this.tableChangePage('threads')}\r\n                                    onChangeRowsPerPage={this.tableChangeRowsPerPage('threads')}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualForum);","import React, {Component} from 'react';\r\n\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport {Button, Paper, TextField, Typography} from '@material-ui/core';\r\nimport ReactQuill from 'react-quill';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        submitThreadReply: () => dispatch(forumsActions.submitThreadReply()),\r\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\r\n    }\r\n};\r\n\r\nclass CreateReply extends Component {\r\n\r\n    /**\r\n     * Handle react quill changed\r\n     *\r\n     * @param field\r\n     * @returns {Function}\r\n     */\r\n    handleQuillChanged = field => (content, delta, source, editor) => {\r\n        this.props.handleQuillChanged(field, editor);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            threadReplySubject,\r\n            threadReplyMessage,\r\n            createThreadReplyError,\r\n\r\n            handleForumsInputChanged,\r\n            submitThreadReply,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper style={{ marginTop: 20 }} className={css(styles.thread_reply_style)} >\r\n                <FlexView column >\r\n                    <TextField\r\n                        name=\"threadReplySubject\"\r\n                        label=\"Subject\"\r\n                        required\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        value={threadReplySubject}\r\n                        error={createThreadReplyError && threadReplySubject.trim().length === 0}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n\r\n                    <FlexView column marginTop={30} >\r\n                        <Typography paragraph variant=\"body1\" >Message *</Typography>\r\n                        <ReactQuill\r\n                            placeholder=\"Write your reply here. Add images for visual effects.\"\r\n                            value={threadReplyMessage}\r\n                            theme=\"snow\"\r\n                            onChange={this.handleQuillChanged(forumsActions.THREAD_REPLY_CONTENT_QUILL)}\r\n                            modules={modules}\r\n                        />\r\n                    </FlexView>\r\n\r\n                    <Row noGutters >\r\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }}>\r\n                            <FlexView>\r\n                                {\r\n                                    !createThreadReplyError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\" > Please fill in the required fields. </Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }} >\r\n                            <FlexView hAlignContent=\"right\" >\r\n                                <FlexView marginRight={5} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleThreadReply(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView marginLeft={5}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={submitThreadReply}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Submit</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            </Paper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateReply);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});\r\n","import React, {Component} from 'react';\r\n\r\nimport {Button, IconButton, Paper, Typography} from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {Image} from 'react-bootstrap';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport LetterAvatar from '../profile/LetterAvatar';\r\nimport CreateReply from './CreateReply';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst AVATAR_MAX_HEIGHT = 75;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplyEdited: state.manageForums.threadReplyEdited,\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        deleteThreadReply: (threadReplyID) => dispatch(forumsActions.deleteThreadReply(threadReplyID)),\r\n        goBackToThreadsList: () => dispatch(forumsActions.goBackToThreadsList())\r\n    }\r\n};\r\n\r\nclass IndividualThread extends Component {\r\n\r\n    /**\r\n     * Render replies within this thread\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderReplies = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            forumThreadReplies,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            toggleThreadReply,\r\n            deleteThreadReply\r\n        } = this.props;\r\n\r\n        if (forumThreadReplies.length === 0) {\r\n            return;\r\n        }\r\n\r\n        forumThreadReplies.sort((reply1, reply2) => {\r\n            return (reply2.replyDate - reply1.replyDate);\r\n        });\r\n\r\n        return forumThreadReplies.map(reply => (\r\n            <Paper key={reply.id} className={css(styles.thread_reply_style)} >\r\n                {\r\n                    reply.hasOwnProperty('deleted')\r\n                    && reply.deleted === true\r\n                        ?\r\n                        <FlexView>\r\n                            <Typography variant=\"body1\" align=\"left\"><i>This reply has been removed.</i></Typography>\r\n                        </FlexView>\r\n                        :\r\n                        <FlexView column width=\"100%\" >\r\n                            <FlexView vAlignContent=\"center\" marginBottom={10} width=\"100%\" >\r\n                                {/** Author's avatar */}\r\n                                <FlexView hAlignContent=\"left\" >\r\n                                    {\r\n                                        reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            reply.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                <FlexView\r\n                                                    width={AVATAR_MAX_HEIGHT}\r\n                                                    height={AVATAR_MAX_HEIGHT}\r\n                                                >\r\n                                                    <Image roundedCircle thumbnail src={require('../../img/admin_logo.png').default} style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }} />\r\n                                                </FlexView>\r\n                                                :\r\n                                                // group admins\r\n                                                <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={ utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, reply.author.groupDetails) }\r\n                                                        style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            :\r\n                                            (\r\n                                                !reply.author.profilePicture\r\n                                                || (reply.author.profilePicture && reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                                    ?\r\n                                                    // normal users with no profile picture\r\n                                                    <LetterAvatar\r\n                                                        firstName={reply.author.firstName}\r\n                                                        lastName={reply.author.lastName}\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                        textVariant=\"h5\"\r\n                                                    />\r\n                                                    :\r\n                                                    // normal users with profile picture\r\n                                                    <FlexView\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                    >\r\n                                                        <Image\r\n                                                            roundedCircle\r\n                                                            thumbnail\r\n                                                            src={\r\n                                                                reply.author.profilePicture[reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                            }\r\n                                                            style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                        />\r\n                                                    </FlexView>\r\n                                            )\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                {/** Author name and dates */}\r\n                                <FlexView column marginLeft={15} hAlignContent=\"left\" >\r\n                                    <Typography variant=\"body1\" align=\"left\" >\r\n                                        <b>\r\n                                            {\r\n                                                reply.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // normal users\r\n                                                    `${reply.author.firstName} ${reply.author.lastName}`\r\n                                                    :\r\n                                                    reply.author.superAdmin\r\n                                                        ?\r\n                                                        // super admins\r\n                                                        \"Invest West Super Admin\"\r\n                                                        :\r\n                                                        // group admins\r\n                                                        `${reply.author.groupDetails.displayName} Admin`\r\n                                            }\r\n                                        </b>\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle2\" align=\"left\" >\r\n                                        {\r\n                                            !reply.hasOwnProperty('lastEdited')\r\n                                                ?\r\n                                                `Replied on: ${utils.dateTimeInReadableFormat(reply.replyDate)}`\r\n                                                :\r\n                                                `Last edited: ${utils.dateTimeInReadableFormat(reply.lastEdited)}`\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n\r\n                                {/** Delete/Edit reply */}\r\n                                {\r\n                                    (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                    ) || currentUser.id === reply.author.id\r\n                                        ?\r\n                                        <FlexView hAlignContent=\"left\" vAlignContent=\"center\" marginLeft={60} >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"secondary\"\r\n                                                onClick={() => deleteThreadReply(reply.id)}\r\n                                                style={{ marginRight: 10 }}\r\n                                            >Delete<DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"primary\"\r\n                                                onClick={() => toggleThreadReply(true, JSON.parse(JSON.stringify(reply)))}\r\n                                            >Edit<EditIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                !reply.message\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column marginTop={15} dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(reply.message.ops)}} />\r\n                            }\r\n\r\n                            {\r\n                                threadInReplyMode\r\n                                && threadReplyEdited\r\n                                && threadReplyEdited.id === reply.id\r\n                                    ?\r\n                                    <CreateReply/>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </FlexView>\r\n                }\r\n            </Paper>\r\n        ));\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupProperties,\r\n\r\n            forumThreadSelected,\r\n            forumThreadRepliesLoaded,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            goBackToThreadsList,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        if (!forumThreadRepliesLoaded) {\r\n            return (\r\n                <FlexView hAlignContent=\"center\" >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <FlexView vAlignContent=\"center\" marginBottom={24} >\r\n                    <IconButton color=\"primary\" aria-label=\"Back\" onClick={goBackToThreadsList} >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView marginLeft={8} >\r\n                        <Typography color=\"primary\" variant=\"h6\">{`Thread: ${forumThreadSelected.name}`}</Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <Paper className={css(styles.thread_reply_style)} >\r\n                    <FlexView column >\r\n                        <FlexView vAlignContent=\"center\" marginBottom={10} >\r\n                            {\r\n                                forumThreadSelected.author.type === DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    forumThreadSelected.author.superAdmin\r\n                                        ?\r\n                                        // super admins\r\n                                        <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={require('../../img/admin_logo.png').default}\r\n                                                style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                            />\r\n                                        </FlexView>\r\n                                        :\r\n                                        // group admins\r\n                                        <FlexView\r\n                                            width={AVATAR_MAX_HEIGHT}\r\n                                            height={AVATAR_MAX_HEIGHT}\r\n                                        >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={\r\n                                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, forumThreadSelected.author.groupDetails)\r\n                                                }\r\n                                                style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                            />\r\n                                        </FlexView>\r\n                                    :\r\n                                    (\r\n                                        !forumThreadSelected.author.profilePicture\r\n                                        || (forumThreadSelected.author.profilePicture && forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                            ?\r\n                                            // normal users with no profile picture\r\n                                            <LetterAvatar\r\n                                                firstName={forumThreadSelected.author.firstName}\r\n                                                lastName={forumThreadSelected.author.lastName}\r\n                                                width={AVATAR_MAX_HEIGHT}\r\n                                                height={AVATAR_MAX_HEIGHT}\r\n                                                textVariant=\"h5\"\r\n                                            />\r\n                                            :\r\n                                            // normal users with profile picture\r\n                                            <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        forumThreadSelected.author.profilePicture[forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    )\r\n                            }\r\n                            <FlexView column marginLeft={15} marginBottom={10} >\r\n                                <Typography variant=\"body1\" >\r\n                                    <b>\r\n                                        {\r\n                                            forumThreadSelected.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                // normal users\r\n                                                `${forumThreadSelected.author.firstName} ${forumThreadSelected.author.lastName}`\r\n                                                :\r\n                                                forumThreadSelected.author.superAdmin\r\n                                                    ?\r\n                                                    // super admins\r\n                                                    \"Invest West Super Admin\"\r\n                                                    :\r\n                                                    // group admins\r\n                                                    `${forumThreadSelected.author.groupDetails.displayName} Admin`\r\n                                        }\r\n                                    </b>\r\n                                </Typography>\r\n\r\n                                <Typography variant=\"subtitle2\" align=\"left\" >\r\n                                    {\r\n                                        !forumThreadSelected.hasOwnProperty('lastEdited')\r\n                                            ?\r\n                                            `Created on: ${utils.dateTimeInReadableFormat(forumThreadSelected.dateCreated)}`\r\n                                            :\r\n                                            `Last edited: ${utils.dateTimeInReadableFormat(forumThreadSelected.lastEdited)}`\r\n                                    }\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                        <Typography variant=\"body1\" align=\"left\"><b><u>Description:</u></b></Typography>\r\n                        <Typography variant=\"body1\" align=\"left\" style={{ whiteSpace: \"pre-line\", marginTop: 6, marginBottom: 15 }}>{forumThreadSelected.description}</Typography>\r\n                        {\r\n                            !forumThreadSelected.message\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    column\r\n                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(forumThreadSelected.message.ops)}}\r\n                                    marginTop={25}\r\n                                />\r\n                        }\r\n                        {\r\n                            threadInReplyMode\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView marginTop={25} marginBottom={8} >\r\n                                    <Button\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleThreadReply(true, null)}\r\n                                    >Reply</Button>\r\n                                </FlexView>\r\n                        }\r\n                    </FlexView>\r\n                </Paper>\r\n                {\r\n                    !threadInReplyMode\r\n                        ?\r\n                        null\r\n                        :\r\n                        threadReplyEdited\r\n                            ?\r\n                            null\r\n                            :\r\n                            <CreateReply/>\r\n                }\r\n                <FlexView column marginTop={20} >\r\n                    {\r\n                        this.renderReplies()\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualThread);\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css} from 'aphrodite';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    FormControl,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\nimport CreateForum from './CreateForum';\r\nimport CreateThread from './CreateThread';\r\nimport IndividualForum from './IndividualForum';\r\nimport IndividualThread from './IndividualThread';\r\nimport './Forums.scss';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const MODE_FORUMS_MAIN = 0;\r\nexport const MODE_CREATE_FORUM = 1;\r\nexport const MODE_VIEW_FORUM = 2;\r\nexport const MODE_CREATE_THREAD = 3;\r\nexport const MODE_VIEW_THREAD = 4;\r\n\r\nexport const SORT_BY_CURRENT_USER = 0;\r\nexport const SORT_BY_LAST = 1;\r\nexport const SORT_BY_OLDEST = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        modeForums: state.manageForums.modeForums,\r\n\r\n        forumsSortedMode: state.manageForums.forumsSortedMode,\r\n        forumsLoadMode: state.manageForums.forumsLoadMode,\r\n\r\n        forums: state.manageForums.forums,\r\n        forumsLoaded: state.manageForums.forumsLoaded,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        forumsTablePage: state.manageForums.forumsTablePage,\r\n        forumsTableRowsPerPage: state.manageForums.forumsTableRowsPerPage,\r\n\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadForums: (mode) => dispatch(forumsActions.loadForums(mode)),\r\n        startListeningForForumsChanged: () => dispatch(forumsActions.startListeningForForumsChanged()),\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        startListeningForThreadsChanged: () => dispatch(forumsActions.startListeningForThreadsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        startListeningForThreadRepliesChanged: () => dispatch(forumsActions.startListeningForThreadRepliesChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        clickOnAParticularForum: (forum) => dispatch(forumsActions.clickOnAParticularForum(forum)),\r\n        deleteForum: (forumID) => dispatch(forumsActions.deleteForum(forumID)),\r\n\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass Forums extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadForums\r\n        } = this.props;\r\n\r\n        // load forums when this component is displayed\r\n        loadForums(realtimeDBUtils.LOAD_LIVE_FORUMS);\r\n\r\n        // call add and remove listeners here because when switching to another tab, all the listeners will be removed,\r\n        // but when switching back to the Forums tab, the componentDidUpdate won't be called. As a result, the listeners\r\n        // will not be added according to the state of the forum components.\r\n        // Therefore, we call add and remove listeners explicitly in this componentDidMount to ensure\r\n        // the listeners will be added accordingly to the Forums state.\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    /**\r\n     * Add and remove listeners accordingly to the Forums state\r\n     */\r\n    addAndRemoveListeners = () => {\r\n        const {\r\n            forums,\r\n            forumsLoaded,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n            forumThreadsLoaded,\r\n\r\n            forumThreadSelected,\r\n            forumThreadReplies,\r\n            forumThreadRepliesLoaded,\r\n\r\n            startListeningForForumsChanged,\r\n            startListeningForThreadsChanged,\r\n            stopListeningForThreadsChanged,\r\n            startListeningForThreadRepliesChanged,\r\n            stopListeningForThreadRepliesChanged\r\n        } = this.props;\r\n\r\n        // forums have been loaded\r\n        if (forums && forumsLoaded) {\r\n            startListeningForForumsChanged();\r\n        }\r\n\r\n        // if the user is viewing threads of a particular forum\r\n        // and all the threads have been loaded\r\n        if (forumSelected && forumThreads && forumThreadsLoaded) {\r\n            startListeningForThreadsChanged();\r\n        }\r\n\r\n        // remove threads listener when the user is not viewing the threads\r\n        if (!forumSelected && !forumThreadsLoaded) {\r\n            stopListeningForThreadsChanged();\r\n        }\r\n\r\n        // if the user is viewing the replies within a particular thread\r\n        // and all replies have been loaded\r\n        if (forumThreadSelected && forumThreadReplies && forumThreadRepliesLoaded) {\r\n            startListeningForThreadRepliesChanged();\r\n        }\r\n\r\n        // remove replies listener when the user is not viewing the replies\r\n        if (!forumThreadSelected && !forumThreadRepliesLoaded) {\r\n            stopListeningForThreadRepliesChanged();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render content of the Forums tab\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderContent = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n            modeForums,\r\n\r\n            forums,\r\n\r\n            forumsSortedMode,\r\n            forumsLoadMode,\r\n\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            toggleCreateNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        switch (modeForums) {\r\n            case MODE_FORUMS_MAIN: {\r\n\r\n                let sortedForums = [...forums];\r\n\r\n                if (forumsSortedMode === SORT_BY_CURRENT_USER) {\r\n                    sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                    sortedForums.sort((forum1, forum2) => {\r\n                        return (forum2.dateCreated - forum1.dateCreated)\r\n                    });\r\n                }\r\n\r\n                return (\r\n                    <FlexView column >\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" >\r\n                            Forums are made up of individual discussion threads that can be organised around a\r\n                            particular subject.\r\n                            Create forums to organise discussions.\r\n                            <br/>\r\n                            <u>Note that all forums are visible across the Invest West network.</u>\r\n                        </Typography>\r\n                        <FlexView marginTop={35} marginBottom={35} >\r\n                            <Button\r\n                                color=\"primary\"\r\n                                variant=\"outlined\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                onClick={() => toggleCreateNewForum(true, null)}\r\n                            >\r\n                                <AddIcon fontSize=\"small\" style={{ marginRight: 10 }} />\r\n                                Create forum\r\n                            </Button>\r\n                        </FlexView>\r\n\r\n                        {/** Filters */}\r\n                        <Container fluid style={{ padding: 0, marginBottom: 40 }} >\r\n                            <Row>\r\n                                {\r\n                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                    && currentUser.superAdmin\r\n                                        ?\r\n                                        <Col xs={12} sm={12} md={4} lg={2} >\r\n                                            <FlexView column >\r\n                                                <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Mode</Typography>\r\n                                                <Paper>\r\n                                                    <FormControl fullWidth >\r\n                                                        <Select\r\n                                                            value={forumsLoadMode}\r\n                                                            onChange={handleForumsInputChanged}\r\n                                                            margin=\"dense\"\r\n                                                            input={\r\n                                                                <OutlinedInput labelWidth={0} name=\"forumsLoadMode\" /> }\r\n                                                        >\r\n                                                            <MenuItem value={realtimeDBUtils.LOAD_LIVE_FORUMS}>Live forums</MenuItem>\r\n                                                            <MenuItem value={realtimeDBUtils.LOAD_DELETED_FORUMS}>Deleted forums</MenuItem>\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Paper>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        :\r\n                                        null\r\n                                }\r\n                                <Col xs={12} sm={12} md={4} lg={2} >\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Sort by</Typography>\r\n                                        <Paper>\r\n                                            <FormControl fullWidth >\r\n                                                <Select\r\n                                                    value={forumsSortedMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput labelWidth={0} name=\"forumsSortedMode\" />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem value={SORT_BY_LAST}>Newest</MenuItem>\r\n                                                    <MenuItem value={SORT_BY_CURRENT_USER}>Mine</MenuItem>\r\n                                                    <MenuItem value={SORT_BY_OLDEST}>Oldest</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n\r\n                        {/** Forums table */}\r\n                        <Paper style={{ overflowX: \"auto\" }} >\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Date</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Forum</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Description</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Author</b></Typography>\r\n                                            }\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {\r\n                                        this.renderForums()\r\n                                    }\r\n                                </TableBody>\r\n                                <TableFooter>\r\n                                    <TableRow>\r\n                                        <TablePagination\r\n                                            style={{\r\n                                                backgroundColor: colors.blue_gray_50\r\n                                            }}\r\n                                            rowsPerPageOptions={[5, 20, 50]}\r\n                                            count={sortedForums.length}\r\n                                            rowsPerPage={forumsTableRowsPerPage}\r\n                                            page={forumsTablePage}\r\n                                            backIconButtonProps={{\r\n                                                'aria-label': 'Previous Page',\r\n                                            }}\r\n                                            nextIconButtonProps={{\r\n                                                'aria-label': 'Next Page',\r\n                                            }}\r\n                                            SelectProps={{\r\n                                                native: true,\r\n                                            }}\r\n                                            onChangePage={this.tableChangePage('forums')}\r\n                                            onChangeRowsPerPage={this.tableChangeRowsPerPage('forums')}\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableFooter>\r\n                            </Table>\r\n                        </Paper>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            case MODE_CREATE_FORUM:\r\n                return (\r\n                    <CreateForum/>\r\n                );\r\n\r\n            case MODE_VIEW_FORUM:\r\n                return (\r\n                    <IndividualForum/>\r\n                );\r\n\r\n            case MODE_CREATE_THREAD:\r\n                return (\r\n                    <CreateThread/>\r\n                );\r\n\r\n            case MODE_VIEW_THREAD:\r\n                return (\r\n                    <IndividualThread/>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render forums table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderForums = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n\r\n            forums,\r\n            forumsLoaded,\r\n            forumsSortedMode,\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            clickOnAParticularForum,\r\n            deleteForum,\r\n            toggleCreateNewForum\r\n        } = this.props;\r\n\r\n        if (!forumsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={20} >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedForums = [];\r\n\r\n        switch (forumsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                sortedForums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum1.dateCreated - forum2.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedForums.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <Typography variant=\"body1\" align=\"center\" style={{ marginTop: 20, marginBottom: 20 }}>No forums created.</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedForums\r\n                .slice(forumsTablePage * forumsTableRowsPerPage, forumsTablePage * forumsTableRowsPerPage + forumsTableRowsPerPage)\r\n                .map(forum => (\r\n                        <ForumRow\r\n                            currentUser={currentUser}\r\n                            key={forum.id}\r\n                            forum={forum}\r\n                            onForumClick={clickOnAParticularForum}\r\n                            deleteForum={deleteForum}\r\n                            toggleEditForum={toggleCreateNewForum}\r\n                        />\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 30 }} >\r\n                {\r\n                    this.renderContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Forums);\r\n\r\n\r\n/**\r\n * Forum row component ------------------------------------------------------------------------------------------------------------------\r\n */\r\nclass ForumRow extends Component {\r\n\r\n    onForumClick = forum => {\r\n        this.props.onForumClick(forum);\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            currentUser,\r\n            forum,\r\n\r\n            deleteForum,\r\n            toggleEditForum\r\n        } = this.props;\r\n\r\n        return (\r\n            <TableRow hover >\r\n                <TableCell> <Typography align=\"left\" variant=\"body2\">{utils.dateTimeInReadableFormat(forum.dateCreated)}</Typography>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 400 }} >\r\n                    <FlexView column hAlignContent=\"left\" >\r\n                        <ButtonBase onClick={() => this.onForumClick(forum)} >\r\n                            <Typography align=\"left\" variant=\"body2\" color=\"primary\" noWrap>{forum.name}</Typography>\r\n                        </ButtonBase>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                            && (\r\n                                !forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            )\r\n                                ?\r\n                                <FlexView marginTop={12} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"secondary\"\r\n                                        onClick={() => deleteForum(forum.id)}\r\n                                        style={{ marginRight: 10 }}\r\n                                    >Delete\r\n                                        <DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleEditForum(true, JSON.parse(JSON.stringify(forum)))}\r\n                                    >Edit\r\n                                        <EditIcon fontSize=\"small\" style={{ marginLeft: 6 }}/>\r\n                                    </Button>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 400 }}>\r\n                    <Typography variant=\"body2\" align=\"left\" noWrap>{forum.description}</Typography>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 200 }} >\r\n                    <Typography align=\"left\" variant=\"body2\" noWrap >\r\n                        {\r\n                            forum.author.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // normal users\r\n                                `${forum.author.firstName} ${forum.author.lastName}`\r\n                                :\r\n                                forum.author.superAdmin\r\n                                    ?\r\n                                    // super admins\r\n                                    \"Invest West Super Admin\"\r\n                                    :\r\n                                    // group admins\r\n                                    `${forum.author.groupDetails.displayName} Admin`\r\n                        }\r\n                    </Typography>\r\n                </TableCell>\r\n            </TableRow>\r\n        )\r\n    }\r\n}\r\n","import {\r\n    MODE_CREATE_FORUM,\r\n    MODE_CREATE_THREAD,\r\n    MODE_FORUMS_MAIN,\r\n    MODE_VIEW_FORUM,\r\n    MODE_VIEW_THREAD,\r\n    SORT_BY_LAST\r\n} from '../../shared-components/forums/Forums';\r\nimport * as forumsActions from '../actions/forumsActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\n\r\nconst initState = {\r\n    modeForums: MODE_FORUMS_MAIN,\r\n\r\n    forumsSortedMode: SORT_BY_LAST,\r\n    forumsLoadMode: realtimeDBUtils.LOAD_LIVE_FORUMS,\r\n\r\n    threadsLoadMode: realtimeDBUtils.LOAD_LIVE_THREADS,\r\n    threadsSortedMode: SORT_BY_LAST,\r\n\r\n    forums: [],\r\n    forumsLoaded: false,\r\n\r\n    forumsTablePage: 0,\r\n    forumsTableRowsPerPage: 5,\r\n\r\n    forumSelected: null,\r\n    forumThreads: [],\r\n    forumThreadsLoaded: false,\r\n\r\n    forumThreadSelected: null,\r\n    forumThreadReplies: [],\r\n    forumThreadRepliesLoaded: false,\r\n\r\n    threadsTablePage: 0,\r\n    threadsTableRowsPerPage: 5,\r\n\r\n    createForumName: '',\r\n    createForumDesc: '',\r\n    createForumAuthor: null,\r\n    createForumError: false,\r\n    forumEdited: null,\r\n\r\n    createThreadName: '',\r\n    createThreadBriefDesc: '',\r\n    createThreadMessage: {ops: []},\r\n    createThreadError: false,\r\n    threadEdited: null,\r\n\r\n    threadInReplyMode: false,\r\n    threadReplyEdited: null,\r\n    threadReplySubject: '',\r\n    threadReplyMessage: {ops: []},\r\n    createThreadReplyError: false\r\n};\r\n\r\nconst forumsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case forumsActions.GO_BACK_TO_FORUMS_MAIN:\r\n            return {\r\n                ...initState,\r\n                forums: state.forums,\r\n                forumsLoaded: state.forumsLoaded,\r\n                forumsSortedMode: state.forumsSortedMode,\r\n                forumsLoadMode: state.forumsLoadMode,\r\n\r\n                forumsTablePage: state.forumsTablePage,\r\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\r\n            };\r\n        case forumsActions.LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [],\r\n                forumsLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [...action.forums],\r\n                forumsLoaded: true\r\n            };\r\n        case forumsActions.ERROR_LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [],\r\n                forumsLoaded: true\r\n            };\r\n        case forumsActions.TOGGLE_CREATE_NEW_FORUM:\r\n            return {\r\n                ...state,\r\n                modeForums: action.open\r\n                    ?\r\n                    MODE_CREATE_FORUM\r\n                    :\r\n                    MODE_FORUMS_MAIN\r\n                ,\r\n                forumEdited: action.forumEdited\r\n                    ?\r\n                    JSON.parse(JSON.stringify(action.forumEdited))\r\n                    :\r\n                    null\r\n                ,\r\n                createForumName:\r\n                    action.forumEdited\r\n                        ?\r\n                        action.forumEdited.name\r\n                        :\r\n                        ''\r\n                ,\r\n                createForumDesc:\r\n                    action.forumEdited\r\n                        ?\r\n                        action.forumEdited.description\r\n                        :\r\n                        ''\r\n                ,\r\n                createForumError: false,\r\n                createForumAuthor: null\r\n            };\r\n        case forumsActions.ERROR_CREATING_NEW_FORUM:\r\n            return {\r\n                ...state,\r\n                createForumError: true\r\n            };\r\n        case forumsActions.FORUMS_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case forumsActions.LOADING_THREADS_IN_A_FORUM:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_FORUM,\r\n                forumSelected: JSON.parse(JSON.stringify(action.forumSelected)),\r\n                forumThreadsLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_THREADS_IN_A_FORUM:\r\n            return {\r\n                ...state,\r\n                forumThreads: [...action.threads],\r\n                forumThreadsLoaded: true\r\n            };\r\n        case forumsActions.GO_BACK_TO_FORUMS_LIST:\r\n            return {\r\n                ...initState,\r\n                forums: state.forums,\r\n                forumsLoaded: state.forumsLoaded,\r\n                forumsSortedMode: state.forumsSortedMode,\r\n                forumsLoadMode: state.forumsLoadMode,\r\n\r\n                forumsTablePage: state.forumsTablePage,\r\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\r\n            };\r\n        case forumsActions.TOGGLE_CREATE_NEW_THREAD:\r\n            return {\r\n                ...state,\r\n                modeForums: action.open\r\n                    ?\r\n                    MODE_CREATE_THREAD\r\n                    :\r\n                    MODE_VIEW_FORUM\r\n                ,\r\n                threadEdited: action.threadEdited\r\n                    ?\r\n                    JSON.parse(JSON.stringify(action.threadEdited))\r\n                    :\r\n                    null\r\n                ,\r\n                createThreadName: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.name\r\n                    :\r\n                    ''\r\n                ,\r\n                createThreadBriefDesc: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.description\r\n                    :\r\n                    ''\r\n                ,\r\n                createThreadMessage: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.message\r\n                    :\r\n                    {ops: []}\r\n                ,\r\n                createThreadError: false\r\n            };\r\n        case forumsActions.ERROR_CREATING_NEW_THREAD:\r\n            return {\r\n                ...state,\r\n                createThreadError: true\r\n            };\r\n        case forumsActions.LOADING_REPLIES_IN_A_THREAD:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_THREAD,\r\n                forumThreadSelected: JSON.parse(JSON.stringify(action.threadSelected)),\r\n                forumThreadRepliesLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_REPLIES_IN_A_THREAD:\r\n            return {\r\n                ...state,\r\n                forumThreadReplies: [...action.replies],\r\n                forumThreadRepliesLoaded: true\r\n            };\r\n        case forumsActions.GO_BACK_TO_THREADS_LIST:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_FORUM,\r\n                forumThreadSelected: null,\r\n                forumThreadReplies: [],\r\n                forumThreadRepliesLoaded: false,\r\n\r\n                threadInReplyMode: false,\r\n                threadReplyMessage: {ops: []}\r\n            };\r\n        case forumsActions.TOGGLE_THREAD_REPLY:\r\n            return {\r\n                ...state,\r\n                threadInReplyMode: action.open,\r\n                threadReplyEdited: JSON.parse(JSON.stringify(action.threadReplyEdited)),\r\n                threadReplySubject: action.open\r\n                    ?\r\n                    action.threadReplyEdited\r\n                        ?\r\n                        action.threadReplyEdited.subject\r\n                        :\r\n                        `RE: ${state.forumThreadSelected.name}`\r\n                    :\r\n                    ''\r\n                ,\r\n                threadReplyMessage: action.open\r\n                    ?\r\n                    action.threadReplyEdited\r\n                        ?\r\n                        action.threadReplyEdited.message\r\n                        :\r\n                        {ops: []}\r\n                    :\r\n                    {ops: []}\r\n                ,\r\n                createThreadReplyError: false\r\n            };\r\n        case forumsActions.ERROR_CREATING_THREAD_REPLY:\r\n            return {\r\n                ...state,\r\n                createThreadReplyError: true\r\n            };\r\n        case forumsActions.FORUMS_QUILL_CHANGED:\r\n            return {\r\n                ...state,\r\n                createThreadMessage: action.field === forumsActions.THREAD_CONTENT_QUILL ? action.quill : state.createThreadMessage,\r\n                threadReplyMessage: action.field === forumsActions.THREAD_REPLY_CONTENT_QUILL ? action.quill : state.threadReplyMessage\r\n            };\r\n        case forumsActions.FORUMS_CHANGED:\r\n            return {\r\n                ...state,\r\n                forums: [...action.forumsChanged]\r\n            };\r\n        case forumsActions.THREADS_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumThreads: [...action.threadsChanged]\r\n            };\r\n        case forumsActions.THREAD_REPLIES_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumThreadReplies: [...action.repliesChanged]\r\n            };\r\n        case forumsActions.MANAGE_FORUMS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumsTablePage: action.table === 'forums' ? action.newPage : state.forumsTablePage,\r\n                threadsTablePage: action.table === 'threads' ? action.newPage : state.threadsTablePage\r\n            };\r\n        case forumsActions.MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumsTableRowsPerPage: action.table === 'forums' ? action.value : state.forumsTableRowsPerPage,\r\n                threadsTableRowsPerPage: action.table === 'threads' ? action.value : state.threadsTableRowsPerPage,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default forumsReducer;","import * as notificationsActions from '../actions/notificationsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    notificationsAnchorEl: null,\r\n    notificationsClickedOutside: false,\r\n\r\n    notifications: [],\r\n    loadingNotifications: false,\r\n    notificationsLoaded: false\r\n};\r\n\r\nconst notificationsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case notificationsActions.TOGGLE_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                notificationsAnchorEl: action.notificationsAnchorEl,\r\n                notificationsClickedOutsideActivated: action.notificationsClickedOutsideActivated\r\n            };\r\n        case notificationsActions.CLOSED_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                notificationsAnchorEl: action.notificationsAnchorEl,\r\n                notificationsClickedOutside: action.notificationsClickedOutside\r\n            }\r\n        case notificationsActions.LOADING_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                loadingNotifications: true,\r\n                notificationsLoaded: false\r\n            };\r\n        case notificationsActions.FINISHED_LOADING_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                loadingNotifications: false,\r\n                notificationsLoaded: true,\r\n                notifications: [...action.notifications]\r\n            };\r\n        case notificationsActions.NOTIFICATIONS_LIST_CHANGED:\r\n            return {\r\n                ...state,\r\n                notifications: [...action.notifications]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default notificationsReducer;","import * as mediaQueryActions from '../actions/mediaQueryActions';\r\nimport * as dashboardSidebarActions from '../actions/dashboardSidebarActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {MediaQueryEvents} from \"../actions/mediaQueryActions\";\r\n\r\nconst initState = {\r\n    sidebarDocked: mediaQueryActions.laptopScreen.matches || mediaQueryActions.desktopScreen.matches,\r\n    sidebarOpen: false\r\n};\r\n\r\nconst dashboardSidebarReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case dashboardSidebarActions.TOGGLE_SIDEBAR:\r\n            return {\r\n                ...state,\r\n                sidebarDocked: action.hasOwnProperty('sidebarDocked') ? action.sidebarDocked : state.sidebarDocked,\r\n                sidebarOpen: action.sidebarOpen\r\n            };\r\n        case MediaQueryEvents.MediaQueryChanged:\r\n            return {\r\n                ...state,\r\n                sidebarDocked:\r\n                    action.name === 'isLaptop' || action.name === 'isDesktop'\r\n                        ?\r\n                        action.value\r\n                        :\r\n                        state.sidebarDocked\r\n                ,\r\n                sidebarOpen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default dashboardSidebarReducer;","import {\r\n    desktopScreen,\r\n    laptopScreen,\r\n    MediaQueryAction,\r\n    MediaQueryEvents,\r\n    minHeightScreen,\r\n    mobileScreen,\r\n    tabletScreen\r\n} from \"../actions/mediaQueryActions\";\r\n\r\nexport interface MediaQueryState {\r\n    isMobile: boolean;\r\n    isTablet: boolean;\r\n    isLaptop: boolean;\r\n    isDesktop: boolean;\r\n    minHeightScreen: boolean;\r\n}\r\n\r\nconst initState: MediaQueryState = {\r\n    isMobile: mobileScreen.matches,\r\n    isTablet: tabletScreen.matches,\r\n    isLaptop: laptopScreen.matches,\r\n    isDesktop: desktopScreen.matches,\r\n    minHeightScreen: minHeightScreen.matches\r\n};\r\n\r\nconst mediaQueryReducer = (state = initState, action: MediaQueryAction) => {\r\n    if (action.type === MediaQueryEvents.MediaQueryChanged) {\r\n        return {\r\n            ...state,\r\n            [action.name]: action.value\r\n        };\r\n    } else {\r\n        return state;\r\n    }\r\n};\r\n\r\nexport default mediaQueryReducer;","import * as superAdminSettingsActions from '../actions/superAdminSettingsActions';\r\nimport * as clubAttributesActions from '../actions/clubAttributesActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nconst initState = {\r\n    clubAttributesEdited: null,\r\n\r\n    addNewPledgeFAQ: false,\r\n    addedPledgeQuestion: '',\r\n    addedPledgeAnswer: '',\r\n    expandedPledgeFAQ: null,\r\n    editExpandedPledgeFAQ: false,\r\n    editedPledgeQuestion: '',\r\n    editedPledgeAnswer: ''\r\n};\r\n\r\nconst superAdminSettingsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: JSON.parse(JSON.stringify(action.clubAttributes))\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: {\r\n                    ...state.clubAttributesEdited,\r\n                    [action.key]: action.value\r\n                },\r\n                expandedPledgeFAQ:\r\n                    !state.expandedPledgeFAQ\r\n                        ?\r\n                        null\r\n                        :\r\n                        action.key !== DB_CONST.PLEDGE_FAQS_CHILD\r\n                            ?\r\n                            state.expandedPledgeFAQ\r\n                            :\r\n                            !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\r\n                                ?\r\n                                null\r\n                                :\r\n                                !state.expandedPledgeFAQ\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id) === -1\r\n                                        ?\r\n                                        state.expandedPledgeFAQ\r\n                                        :\r\n                                        action.value[action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id)]\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INPUT_CHANGED:\r\n            const isPropertyOfClubAttributes = action.isPropertyOfClubAttributes;\r\n\r\n            if (isPropertyOfClubAttributes) {\r\n                return {\r\n                    ...state,\r\n                    clubAttributesEdited: {\r\n                        ...state.clubAttributesEdited,\r\n                        [action.name]: action.value\r\n                    }\r\n                };\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    [action.name]: action.value\r\n                };\r\n            }\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: {\r\n                    ...state.clubAttributesEdited,\r\n                    [action.fieldName]: action.value\r\n                }\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\r\n            return {\r\n                ...state,\r\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\r\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\r\n                addedPledgeQuestion: '',\r\n                addedPledgeAnswer: ''\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\r\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\r\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default superAdminSettingsReducer;","import * as groupAdminSettingsActions from \"../actions/groupAdminSettingsActions\";\r\nimport * as manageANIDFromParamsActions from \"../actions/manageGroupFromParamsActions\";\r\nimport * as authActions from \"../actions/authActions\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as utils from \"../../utils/utils\"\r\n\r\nconst initState = {\r\n    groupAttributesEdited: null,\r\n\r\n    website: '',\r\n    description: '',\r\n    primaryColor: '',\r\n    secondaryColor: '',\r\n\r\n    addNewPledgeFAQ: false,\r\n    addedPledgeQuestion: '',\r\n    addedPledgeAnswer: '',\r\n    expandedPledgeFAQ: null,\r\n    editExpandedPledgeFAQ: false,\r\n    editedPledgeQuestion: '',\r\n    editedPledgeAnswer: ''\r\n};\r\n\r\nconst groupAdminSettingsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED:\r\n\r\n            let groupSettings = JSON.parse(JSON.stringify(action.group.settings));\r\n            // if the defaultPitchExpiryDate property does not exist,\r\n            // assign it with an initial value\r\n            if (!groupSettings.hasOwnProperty('defaultPitchExpiryDate')) {\r\n                groupSettings.defaultPitchExpiryDate = utils.getDateWithDaysFurtherThanToday(1);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                groupAttributesEdited: groupSettings,\r\n                website:  action.group.hasOwnProperty('website') ? action.group.website : '',\r\n                description: action.group.hasOwnProperty('description') ? action.group.description : '',\r\n                primaryColor: action.group.settings.primaryColor,\r\n                secondaryColor: action.group.settings.secondaryColor\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CHANGED:\r\n            const isPropertyOfGroupAttributes = action.isPropertyOfGroupAttributes;\r\n\r\n            if (isPropertyOfGroupAttributes) {\r\n                return {\r\n                    ...state,\r\n                    groupAttributesEdited: {\r\n                        ...state.groupAttributesEdited,\r\n                        [action.name]: action.value\r\n                    }\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    [action.name]: action.value\r\n                };\r\n            }\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\r\n            if (action.key === 'settings') {\r\n                return {\r\n                    ...state,\r\n                    groupAttributesEdited: JSON.parse(JSON.stringify(action.value)),\r\n                    primaryColor: action.value.primaryColor,\r\n                    secondaryColor: action.value.secondaryColor,\r\n                    expandedPledgeFAQ:\r\n                        !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\r\n                            ?\r\n                            null\r\n                            :\r\n                            !state.expandedPledgeFAQ\r\n                                ?\r\n                                null\r\n                                :\r\n                                action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id) !== -1\r\n                                    ?\r\n                                    action.value[DB_CONST.PLEDGE_FAQS_CHILD][action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id)]\r\n                                    :\r\n                                    state.expandedPledgeFAQ\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    [action.key]: action.value\r\n                }\r\n            }\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\r\n            return {\r\n                ...state,\r\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\r\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\r\n                addedPledgeQuestion: '',\r\n                addedPledgeAnswer: ''\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\r\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\r\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR:\r\n            return {\r\n                ...state,\r\n                primaryColor: action.field === \"primaryColor\" ? action.color : state.primaryColor,\r\n                secondaryColor: action.field === \"secondaryColor\" ? action.color : state.secondaryColor\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default groupAdminSettingsReducer;","import * as legalDocumentsActions from '../actions/legalDocumentsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    userID: null,\r\n\r\n    legalDocuments: null,\r\n    legalDocumentsLoaded: false,\r\n    legalDocumentsBeingLoaded: false\r\n};\r\n\r\nconst legalDocumentsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT: {\r\n            return initState;\r\n        }\r\n        case legalDocumentsActions.LEGAL_DOCUMENTS_SET_USER:\r\n            return {\r\n                ...state,\r\n                userID: action.userID\r\n            };\r\n        case legalDocumentsActions.LOADING_LEGAL_DOCUMENTS:\r\n            return {\r\n                ...state,\r\n                legalDocuments: [],\r\n                legalDocumentsLoaded: false,\r\n                legalDocumentsBeingLoaded: true\r\n            };\r\n        case legalDocumentsActions.FINISHED_LOADING_LEGAL_DOCUMENTS:\r\n            return {\r\n                ...state,\r\n                legalDocuments: action.legalDocuments,\r\n                legalDocumentsLoaded: true,\r\n                legalDocumentsBeingLoaded: false\r\n            };\r\n        case legalDocumentsActions.LEGAL_DOCUMENTS_CHANGED: {\r\n            return {\r\n                ...state,\r\n                legalDocuments: action.legalDocuments\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default legalDocumentsReducer;\r\n\r\n","import * as invitedUsersActions from '../actions/invitedUsersActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {FILTER_GROUP_MEMBERS_ALL, FILTER_REGISTRATION_STATUS_ALL} from '../../pages/admin/components/InvitedUsers';\r\n\r\nconst initState = {\r\n    invitedUsers: [],\r\n    invitedUsersLoaded: false,\r\n    invitedUsersBeingLoaded: false,\r\n\r\n    invitedUsersPage: 0,\r\n    invitedUsersRowsPerPage: 5,\r\n\r\n    filterRegistrationStatus: FILTER_REGISTRATION_STATUS_ALL,\r\n    filterUserType: 0, // all user types\r\n    filterGroup: \"null\", // no group selected --> all\r\n    filterMembers: FILTER_GROUP_MEMBERS_ALL, // display all members (including home and foreign members) for group admins\r\n\r\n    invitedUserSearchText: '',\r\n    invitedUsersInSearchMode: false,\r\n\r\n    requestingCsv: false,\r\n\r\n    addingMembersFromOneGroupToAnotherGroup: false,\r\n\r\n    matchedInvitedUsers: []\r\n};\r\n\r\nconst invitedUsersReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case invitedUsersActions.LOADING_INVITED_USERS:\r\n            return {\r\n                ...state,\r\n                invitedUsers: [],\r\n                invitedUsersLoaded: false,\r\n                invitedUsersBeingLoaded: true\r\n            };\r\n        case invitedUsersActions.FINISHED_LOADING_INVITED_USERS:\r\n            return {\r\n                ...state,\r\n                invitedUsers: [...action.invitedUsers],\r\n                matchedInvitedUsers: [...action.invitedUsers],\r\n                invitedUsersLoaded: true,\r\n                invitedUsersBeingLoaded: false\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                invitedUsersInSearchMode: !state.invitedUsersInSearchMode,\r\n                invitedUserSearchText: state.invitedUsersInSearchMode ? '' : state.invitedUserSearchText,\r\n                invitedUsersPage: 0,\r\n                matchedInvitedUsers: action.matchedInvitedUsers\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_SEARCH_VARIABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value,\r\n                matchedInvitedUsers: action.matchedInvitedUsers,\r\n                invitedUsersPage: 0\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGE_PAGE:\r\n            return {\r\n                ...state,\r\n                invitedUsersPage: action.newPage\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGE_ROWS_PER_PAGE:\r\n            return {\r\n                ...state,\r\n                invitedUsersRowsPerPage: parseInt(action.rows, 10),\r\n                invitedUsersPage: 0\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGED:\r\n            return {\r\n                ...state,\r\n                invitedUsers: action.invitedUsers,\r\n                matchedInvitedUsers: action.matchedInvitedUsers\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_REQUESTING_CSV_STATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                requestingCsv: action.value\r\n            }\r\n        case invitedUsersActions.INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                addingMembersFromOneGroupToAnotherGroup: action.value\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default invitedUsersReducer;","import * as invitationDialogActions from '../actions/invitationDialogActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    SEND_INVITATION_NONE,\r\n    SEND_INVITATION_SUCCESS\r\n} from '../../pages/admin/components/InvitationDialog';\r\n\r\nconst initState = {\r\n    invitationDialogOpen: false,\r\n\r\n    title: DB_CONST.USER_TITLES[0],\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    userType: '',\r\n\r\n    sendButtonClick: false,\r\n    sendResult: SEND_INVITATION_NONE,\r\n    sendStatusExtraInfo: null\r\n};\r\n\r\nconst invitationDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case invitationDialogActions.TOGGLE_INVITATION_DIALOG:\r\n            return {\r\n                ...initState,\r\n                invitationDialogOpen: !state.invitationDialogOpen\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_SEND_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                sendButtonClick: true\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_SEND_RESULT_CHANGED:\r\n            return {\r\n                ...state,\r\n                sendResult: action.result,\r\n\r\n                title: action.result === SEND_INVITATION_SUCCESS ? DB_CONST.USER_TITLES[0] : state.title,\r\n                firstName: action.result === SEND_INVITATION_SUCCESS ? '' : state.firstName,\r\n                lastName: action.result === SEND_INVITATION_SUCCESS ? '' : state.lastName,\r\n                email: action.result === SEND_INVITATION_SUCCESS ? '' : state.email,\r\n                userType: action.result === SEND_INVITATION_SUCCESS ? '' : state.userType,\r\n\r\n                sendButtonClick: action.result === SEND_INVITATION_SUCCESS ? false : state.sendButtonClick,\r\n\r\n                sendStatusExtraInfo: action.extraInfo\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default invitationDialogReducer;","import * as addAngelNetworkDialogActions from '../actions/addAngelNetworkDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    ADD_STATUS_NONE,\r\n    ADD_STATUS_SUCCESSFULLY_ADDED,\r\n    UPLOAD_PLAIN_LOGO,\r\n    UPLOAD_NONE,\r\n    UPLOAD_LOGO_WITH_TEXT\r\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\n\r\nconst initState = {\r\n    addAngelNetworkDialogOpen: false,\r\n\r\n    angelNetworkName: '',\r\n    angelNetworkUsername: '',\r\n    email: '',\r\n    website: '',\r\n    primaryColor: '',\r\n    secondaryColor: '',\r\n\r\n    plainLogo: null,\r\n    loadingPlainLogo: false,\r\n    logoWithText: null,\r\n    loadingLogoWithText: false,\r\n\r\n    uploadMode: UPLOAD_NONE,\r\n    uploadProgress: 0,\r\n\r\n    imgUploadError: '',\r\n    imgUploadErrorSnackbarOpen: false,\r\n\r\n    addButtonClicked: false,\r\n    addResult: ADD_STATUS_NONE,\r\n};\r\n\r\nconst addAngelNetworkDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case addAngelNetworkDialogActions.TOGGLE_ADD_ANGEL_NETWORK_DIALOG:\r\n            return {\r\n                ...initState,\r\n                addAngelNetworkDialogOpen: !state.addAngelNetworkDialogOpen\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                addButtonClicked: true\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESULT_CHANGED:\r\n            return {\r\n                ...state,\r\n                addResult: action.result,\r\n\r\n                angelNetworkName: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkName,\r\n                angelNetworkUsername: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkUsername,\r\n                email: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.email,\r\n                primaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.primaryColor,\r\n                secondaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.secondaryColor,\r\n\r\n                plainLogo: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.plainLogo,\r\n                logoWithText: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.logoWithText,\r\n\r\n                uploadMode: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? UPLOAD_NONE : action.hasOwnProperty('mode') ? action.mode : state.uploadMode,\r\n                uploadProgress: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? 0 : action.hasOwnProperty('progress') ? action.progress : state.uploadProgress,\r\n\r\n                addButtonClicked: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? false : state.addButtonClicked\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE:\r\n            return {\r\n                ...state,\r\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? null : state.plainLogo,\r\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? true : state.loadingPlainLogo,\r\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? null : state.logoWithText,\r\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? true : state.loadingLogoWithText\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED:\r\n            return {\r\n                ...state,\r\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? action.blob : state.plainLogo,\r\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? false : state.loadingPlainLogo,\r\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? action.blob : state.logoWithText,\r\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? false : state.loadingLogoWithText\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR:\r\n            return {\r\n                ...state,\r\n                imgUploadError: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n                imgUploadErrorSnackbarOpen: true\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED:\r\n            return {\r\n                ...state,\r\n                imgUploadError: ''\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                imgUploadErrorSnackbarOpen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default addAngelNetworkDialogReducer;","import * as manageANIDFromParamsActions from '../actions/manageGroupFromParamsActions';\r\n\r\nconst initState = {\r\n    groupUserName: null,\r\n    anid: null,\r\n\r\n    groupProperties: null,\r\n    groupPropertiesLoaded: false,\r\n    angelNetworkBeingLoaded: false,\r\n\r\n    expectedPath: null,\r\n    currentPath: null,\r\n    shouldLoadOtherData: false\r\n};\r\n\r\nconst manageGroupFromParamsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case manageANIDFromParamsActions.SET_GROUP_USER_NAME_FROM_PARAMS:\r\n            return {\r\n                ...state,\r\n                groupUserName: action.groupUserName,\r\n                groupProperties: null,\r\n                groupPropertiesLoaded: false,\r\n                angelNetworkBeingLoaded: false\r\n            };\r\n        case manageANIDFromParamsActions.SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING:\r\n            return {\r\n                ...state,\r\n                expectedPath: action.expectedPath,\r\n                currentPath: action.currentPath\r\n            };\r\n        case manageANIDFromParamsActions.LOADING_ANGEL_NETWORK:\r\n            return {\r\n                ...state,\r\n                groupProperties: null,\r\n                groupPropertiesLoaded: false,\r\n                angelNetworkBeingLoaded: true,\r\n                shouldLoadOtherData: false\r\n            };\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_LOADED:\r\n            return {\r\n                ...state,\r\n                groupProperties: JSON.parse(JSON.stringify(action.angelNetwork)),\r\n                groupPropertiesLoaded: true,\r\n                angelNetworkBeingLoaded: false,\r\n                shouldLoadOtherData: action.shouldLoadOtherData\r\n            };\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupProperties: {\r\n                    ...state.groupProperties,\r\n                    [action.key]: action.value\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageGroupFromParamsReducer;\r\n\r\n","import * as investorSelfCertificationAgreementsActions from '../actions/investorSelfCertificationAgreementsActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as FIRBASE_CONST from '../../firebase/databaseConsts';\r\n\r\nconst initState = {\r\n    userID: null,\r\n\r\n    // type of agreement\r\n    statementType: FIRBASE_CONST.SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT,\r\n    // used to control checkboxes if the user has not done this before\r\n    checkBox1Ticked: false,\r\n    checkBox2Ticked: false,\r\n    checkBox3Ticked: false,\r\n\r\n    investorSelfCertificationAgreement: null,\r\n    investorSelfCertificationAgreementLoaded: false,\r\n    investorSelfCertificationAgreementBeingLoaded: false\r\n};\r\n\r\nconst investorSelfCertificationAgreementsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER:\r\n            return {\r\n                ...initState,\r\n                userID: action.uid\r\n            };\r\n        case investorSelfCertificationAgreementsActions.LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: null,\r\n                investorSelfCertificationAgreementLoaded: false,\r\n                investorSelfCertificationAgreementBeingLoaded: true\r\n            };\r\n        case investorSelfCertificationAgreementsActions.FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: JSON.parse(JSON.stringify(action.result)),\r\n                investorSelfCertificationAgreementLoaded: true,\r\n                investorSelfCertificationAgreementBeingLoaded: false\r\n            };\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.checked\r\n            };\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED:\r\n            return {\r\n                ...state,\r\n                statementType: action.event.target.value,\r\n                checkBox1Ticked: false,\r\n                checkBox2Ticked: false\r\n            };\r\n        case investorSelfCertificationAgreementsActions.UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: JSON.parse(JSON.stringify(action.agreement))\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default investorSelfCertificationAgreementsReducer;","import * as angelNetworksActions from '../actions/angelNetworksActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    angelNetworks: [],\r\n    loadingAngelNetworks: false,\r\n    angelNetworksLoaded: false,\r\n    page: 0,\r\n    rowsPerPage: 5,\r\n\r\n    searchText: '', // string typed to search angel networks by name\r\n    inSearchMode: false, // when the search button is clicked --> show X icon to exit search mode\r\n    matchedAngelNetworks: [] // angel networks that match\r\n};\r\n\r\nconst angelNetworksReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case angelNetworksActions.LOADING_ANGEL_NETWORKS:\r\n            return {\r\n                ...state,\r\n                loadingAngelNetworks: true,\r\n                angelNetworksLoaded: false,\r\n                angelNetworks: []\r\n            };\r\n        case angelNetworksActions.FINISHED_LOADING_ANGEL_NETWORKS:\r\n            return {\r\n                ...state,\r\n                loadingAngelNetworks: false,\r\n                angelNetworksLoaded: true,\r\n                angelNetworks: action.hasOwnProperty('angelNetworks') ? [...action.angelNetworks] : []\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\r\n            };\r\n        case angelNetworksActions.TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_IN_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                angelNetworks: [...action.angelNetworks]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default angelNetworksReducer;","import * as manageJoinRequestsActions from '../actions/manageJoinRequestsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    joinRequests: [],\r\n    loadingJoinRequests: false,\r\n    joinRequestsLoaded: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n    matchedJoinRequests: [],\r\n\r\n    page: 0,\r\n    rowsPerPage: 5\r\n};\r\n\r\nconst manageJoinRequestsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS:\r\n            return {\r\n                ...state,\r\n                joinRequests: [],\r\n                loadingJoinRequests: true,\r\n                joinRequestsLoaded: false\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS:\r\n            return {\r\n                ...state,\r\n                joinRequests: [...action.joinRequests],\r\n                loadingJoinRequests: false,\r\n                joinRequestsLoaded: true\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedJoinRequests: action.matchedJoinRequests\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedJoinRequests: action.matchedJoinRequests\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_CHANGED:\r\n            return {\r\n                ...state,\r\n                joinRequests: [...action.joinRequests]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageJoinRequestsReducer;","import * as pledgesTableActions from '../actions/pledgesTableActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    project: null,\r\n\r\n    pledges: [],\r\n    pledgesLoaded: false,\r\n    loadingPledges: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n    matchedPledges: [],\r\n\r\n    page: 0,\r\n    rowsPerPage: 10\r\n};\r\n\r\nconst pledgesTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_SET_PROJECT:\r\n            return {\r\n                ...initState,\r\n                project: JSON.parse(JSON.stringify(action.project))\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_LOADING_PLEDGES:\r\n            return {\r\n                ...state,\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n                loadingPledges: true\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES:\r\n            return {\r\n                ...state,\r\n                pledges: [...action.pledges],\r\n                pledgesLoaded: true,\r\n                loadingPledges: false\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value,\r\n                page: 0\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedPledges: [...action.matchedPledges]\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedPledges: [...action.matchedPledges]\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED:\r\n            return {\r\n                ...state,\r\n                pledges: [...action.pledges]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default pledgesTableReducer;","import * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\r\n\r\nconst initState = {\r\n    open: false,\r\n    message: '',\r\n    color: '', // primary or error\r\n    position: '' // top or bottom\r\n};\r\n\r\nconst feedbackSnackbarReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case feedbackSnackbarActions.CLOSE_FEEDBACK_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                open: false\r\n            };\r\n        case feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT:\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                message: action.message,\r\n                color: action.color,\r\n                position: action.position\r\n            };\r\n        case feedbackSnackbarActions.RESET_STATES_WHEN_SNACKBAR_CLOSED:\r\n            return {\r\n                ...initState\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default feedbackSnackbarReducer;","import * as activitiesTableActions from '../actions/activitiesTableActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    tableUser: null,\r\n\r\n    activities: [],\r\n    activitiesLoaded: false,\r\n    loadingActivities: false,\r\n\r\n    page: 0,\r\n    rowsPerPage: 10\r\n};\r\n\r\nconst activitiesTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case activitiesTableActions.ACTIVITIES_TABLE_SET_TABLE_USER:\r\n            return {\r\n                ...initState,\r\n                tableUser: JSON.parse(JSON.stringify(action.user))\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_LOADING_ACTIVITIES:\r\n            return {\r\n                ...state,\r\n                activities: [],\r\n                activitiesLoaded: false,\r\n                loadingActivities: true\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES:\r\n            return {\r\n                ...state,\r\n                activities: [...action.activities],\r\n                activitiesLoaded: true,\r\n                loadingActivities: false\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_IN_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                activities: [...action.activities]\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default activitiesTableReducer;","import * as manageJSONCompareChangesDialogActions from '../actions/manageJSONCompareChangesDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    dialogOpen: false,\r\n    jsonBefore: {},\r\n    jsonAfter: {}\r\n};\r\n\r\nconst manageJSONCompareChangesDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_SET_DATA:\r\n            return {\r\n                ...state,\r\n                dialogOpen: true,\r\n                jsonBefore: JSON.parse(JSON.stringify(action.jsonBefore)),\r\n                jsonAfter: JSON.parse(JSON.stringify(action.jsonAfter))\r\n            };\r\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_RESET_DATA:\r\n            return {\r\n                ...state,\r\n                dialogOpen: false,\r\n                jsonBefore: {},\r\n                jsonAfter: {}\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageJSONCompareChangesDialogReducer;","import * as groupAdminsTableActions from '../actions/groupAdminsTableActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {ADD_NEW_GROUP_ADMIN_STATUS_NONE} from '../../pages/admin/components/GroupAdminsTable';\r\n\r\nconst initState = {\r\n    tableGroup: null,\r\n\r\n    groupAdmins: [],\r\n    groupAdminsLoaded: false,\r\n    loadingGroupAdmins: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n\r\n    page: 0,\r\n    rowsPerPage: 10,\r\n\r\n    addNewGroupAdminDialogOpen: false,\r\n    newGroupAdminEmail: '',\r\n    addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\r\n};\r\n\r\nconst groupAdminsTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_SET_GROUP:\r\n            return {\r\n                ...initState,\r\n                tableGroup: JSON.parse(JSON.stringify(action.group))\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [],\r\n                groupAdminsLoaded: false,\r\n                loadingGroupAdmins: true\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [...action.groupAdmins],\r\n                groupAdminsLoaded: true,\r\n                loadingGroupAdmins: false\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.newPage\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                searchText: state.inSearchMode ? '' : state.searchText,\r\n                inSearchMode: !state.inSearchMode\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG:\r\n            return {\r\n                ...state,\r\n                addNewGroupAdminDialogOpen: !state.addNewGroupAdminDialogOpen,\r\n                newGroupAdminEmail: '',\r\n                addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [...action.groupAdmins]\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED:\r\n            return {\r\n                ...state,\r\n                addNewGroupAdminStatus: action.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default groupAdminsTableReducer;","import * as createPledgeDialogActions from '../actions/createPledgeDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as utils from '../../utils/utils';\r\nimport {CREATE_PLEDGE_STATUS_NONE} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\r\n\r\nconst initState = {\r\n    open: false,\r\n    project: null,\r\n    postMoneyValuation: '',\r\n    expiredDate: null,\r\n    extraNotes: '',\r\n    createStatus: CREATE_PLEDGE_STATUS_NONE\r\n};\r\n\r\nconst createPledgeDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createPledgeDialogActions.TOGGLE_CREATE_PLEDGE_DIALOG:\r\n            return {\r\n                ...initState,\r\n                open: !state.open\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_SET_PROJECT:\r\n            return {\r\n                ...state,\r\n                project: JSON.parse(JSON.stringify(action.project)),\r\n                postMoneyValuation:\r\n                    action.project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                        ?\r\n                        Number(action.project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                        :\r\n                        ''\r\n                ,\r\n                expiredDate: utils.getDateWithDaysFurtherThanToday(1),\r\n                extraNotes: ''\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                expiredDate:\r\n                    action.date && action.date === \"Invalid Date\"\r\n                        ?\r\n                        NaN\r\n                        :\r\n                        action.date === null\r\n                            ?\r\n                            null\r\n                            :\r\n                            action.date.getTime()\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED:\r\n            return {\r\n                ...state,\r\n                createStatus: action.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default createPledgeDialogReducer;","import * as selectProjectVisibilityActions from '../actions/selectProjectVisibilityActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    projectVisibilitySetting: -1,\r\n    project: null\r\n};\r\n\r\nconst selectProjectVisibilityReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT:\r\n            return {\r\n                ...initState,\r\n                project: JSON.parse(JSON.stringify(action.project))\r\n            };\r\n        case selectProjectVisibilityActions.HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default selectProjectVisibilityReducer;","import * as manageSystemGroupsActions from '../actions/manageSystemGroupsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    systemGroups: [],\r\n    loadingGroups: false,\r\n    groupsLoaded: false\r\n};\r\n\r\nconst manageSystemGroupsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageSystemGroupsActions.LOADING_SYSTEM_GROUPS:\r\n            return {\r\n                ...state,\r\n                systemGroups: [],\r\n                loadingGroups: true,\r\n                groupsLoaded: false\r\n            };\r\n        case manageSystemGroupsActions.FINISHED_LOADING_SYSTEM_GROUPS:\r\n            return {\r\n                ...state,\r\n                systemGroups: action.groups,\r\n                loadingGroups: false,\r\n                groupsLoaded: true\r\n            };\r\n        case manageSystemGroupsActions.SYSTEM_GROUPS_CHANGED:\r\n            return {\r\n                ...state,\r\n                systemGroups: action.groups\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemGroupsReducer;","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_MARKETING_PREFERENCES = 'LOADING_MARKETING_PREFERENCES';\r\nexport const FINISHED_LOADING_MARKETING_PREFERENCES = 'FINISHED_LOADING_MARKETING_PREFERENCES';\r\nexport const loadMarketingPreferences = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n            // do not allow group admins to load marketing preferences\r\n            if (!currentUser.superAdmin) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_MARKETING_PREFERENCES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadMarketingPreferences(\r\n                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                    ?\r\n                    null\r\n                    :\r\n                    currentUser.id\r\n            )\r\n            .then(marketingPreferences => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_MARKETING_PREFERENCES,\r\n                    marketingPreferences\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load marketing preferences.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}","import * as manageMarketingPreferencesActions from '../actions/manageMarketingPreferencesActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    marketingPreferences: [],\r\n    loadingMarketingPreferences: false,\r\n    marketingPreferencesLoaded: false\r\n};\r\n\r\nconst manageMarketingPreferencesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageMarketingPreferencesActions.LOADING_MARKETING_PREFERENCES:\r\n            return {\r\n                ...state,\r\n                marketingPreferences: [],\r\n                loadingMarketingPreferences: true,\r\n                marketingPreferencesLoaded: false\r\n            };\r\n        case manageMarketingPreferencesActions.FINISHED_LOADING_MARKETING_PREFERENCES:\r\n            return {\r\n                ...state,\r\n                marketingPreferences: JSON.parse(JSON.stringify(action.marketingPreferences)),\r\n                loadingMarketingPreferences: false,\r\n                marketingPreferencesLoaded: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageMarketingPreferencesReducer;","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as selectProjectVisibilityActions from \"../actions/selectProjectVisibilityActions\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport {\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n    PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n    PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n    STEP_ACCEPT_TERMS_AND_CONDITIONS,\r\n    STEP_PITCH_COVER,\r\n    STEP_PITCH_DECK,\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    STEP_PITCH_SUPPORTING_DOCUMENTS,\r\n    PITCH_COVER_FILE_TYPE_SELECTED,\r\n    PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n} from \"../../pages/create-project/CreateProject\";\r\nimport * as ROUTES from \"../../router/routes\";\r\n\r\nexport const CREATE_PROJECT_SET_COMPONENT_PROPS = \"CREATE_PROJECT_SET_COMPONENT_PROPS\";\r\nexport const setComponentContext = (context) => {\r\n    return {\r\n        type: CREATE_PROJECT_SET_COMPONENT_PROPS,\r\n        context\r\n    }\r\n}\r\n\r\nexport const CREATE_PROJECT_LOADING_DATA = \"CREATE_PROJECT_LOADING_DATA\";\r\nexport const CREATE_PROJECT_FINISHED_LOADING_DATA = \"CREATE_PROJECT_FINISHED_LOADING_DATA\";\r\n\r\nexport const CREATE_PROJECT_MODE_EDIT = 1;\r\nexport const CREATE_PROJECT_MODE_CREATE_NEW = 2;\r\n\r\n/**\r\n * Load data\r\n *\r\n * @param params\r\n * @returns {Promise<function(...[*]=)>}\r\n */\r\nexport const loadData = async (params) => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = getState().manageCreateProject;\r\n\r\n        if (!currentUser\r\n            ||\r\n            (currentUser && currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n                dispatch({\r\n                    type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                    error: \"Error happened.\"\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: CREATE_PROJECT_LOADING_DATA\r\n        });\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if ((currentUser.type === DB_CONST.TYPE_ADMIN && currentUser.anid === project.anid)\r\n                        && (groupProperties && groupProperties.anid === project.anid)\r\n                    ) {\r\n                        dispatch({\r\n                            type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                            project\r\n                        });\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        projectEdited: project,\r\n                        mode: CREATE_PROJECT_MODE_EDIT\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        error: error\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            dispatch({\r\n                type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                mode: CREATE_PROJECT_MODE_CREATE_NEW\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && (groupProperties && groupProperties.anid === currentUser.anid)\r\n            ) {\r\n                dispatch({\r\n                    type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                    project: null\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Navigate to the same page with active step saved\r\n * This will save the activeStep of the page, so when the user refreshes the page,\r\n * they can still continue with their previous step.\r\n *\r\n * @param activeStep\r\n * @param projectID\r\n */\r\nexport const navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const componentContext = getState().manageCreateProject.componentContext;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const handleMoveToNextStep = (params) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = getState().manageCreateProject;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiredDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            pitchPostMoneyValuation,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            hasRaisedMoneyBefore\r\n        } = getState().manageCreateProject.createNewPitch;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiredDate === null\r\n                    || pitchRaiseRequired.trim().length === 0\r\n                    || hasRaisedMoneyBefore.trim().length === 0\r\n                    || (hasRaisedMoneyBefore === \"true\" && pitchAmountRaisedToDate.trim().length === 0)) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiredDate)\r\n                    ||\r\n                    (pitchExpiredDate && (pitchExpiredDate < myUtils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                // if the user enters invalid value for the money, warn them\r\n                if ((hasRaisedMoneyBefore === \"true\" && !myUtils.getNumberFromInputString(pitchAmountRaisedToDate))\r\n                    || !myUtils.getNumberFromInputString(pitchRaiseRequired)\r\n                    || (pitchPostMoneyValuation.trim().length > 0 && !myUtils.getNumberFromInputString(pitchPostMoneyValuation))\r\n                ) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (pitchPresentationDocument.length === 0\r\n                        && pitchPresentationText.ops.length === 0\r\n                        && (\r\n                            !projectEdited.Pitch.presentationDocument\r\n                            ||\r\n                            (\r\n                                projectEdited.Pitch.presentationDocument\r\n                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                            )\r\n                        )\r\n                        && !projectEdited.Pitch.presentationText) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                    if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    }\r\n}\r\n\r\nlet draftProjectListener = null;\r\n\r\nexport const CREATE_PROJECT_DRAFT_PROJECT_CHANGED = \"CREATE_PROJECT_DRAFT_PROJECT_CHANGED\";\r\nexport const startListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const projectEdited = getState().manageCreateProject.projectEdited;\r\n\r\n        if (utils.isDraftProject(projectEdited)) {\r\n            if (!draftProjectListener) {\r\n                draftProjectListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                    .orderByKey()\r\n                    .equalTo(projectEdited.id);\r\n\r\n                draftProjectListener\r\n                    .on('child_changed', snapshot => {\r\n\r\n                        let project = snapshot.val();\r\n\r\n                        this.setState({\r\n                            projectEdited: Object.assign({}, project)\r\n                        });\r\n                        dispatch({\r\n                            type: CREATE_PROJECT_DRAFT_PROJECT_CHANGED,\r\n                            projectChanged: project\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (draftProjectListener) {\r\n            draftProjectListener.off('child_changed');\r\n            draftProjectListener = null;\r\n        }\r\n    }\r\n}","import * as createProjectActions from '../actions/createProjectActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    UPLOAD_NONE\r\n} from '../../pages/create-project/CreateProject';\r\n\r\nconst initState = {\r\n    componentContext: null,\r\n\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createNewPitch: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        // pitch sector\r\n        pitchSector: '-',\r\n        // pitch project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiredDate: null,\r\n\r\n        pitchAmountRaisedToDate: '',\r\n        pitchRaiseRequired: '',\r\n        pitchPostMoneyValuation: '',\r\n        pitchInvestorsCommitted: '',\r\n\r\n        hasRaisedMoneyBefore: '',\r\n\r\n        // pitch cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // pitch cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // pitch supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // pitch presentation file (user uploads a file for pitch presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // pitch presentation text (user uses the provided text editor to make pitch presentation)\r\n        pitchPresentationText: {ops: []},\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        snackbarErrorMessage: '',\r\n        errorSnackbarOpen: false,\r\n\r\n        acceptedTermsAndConditions: false,\r\n\r\n        projectID: null // set when project has been successfully published to pass to UploadDialog\r\n    }\r\n};\r\n\r\nconst createProjectReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createProjectActions.CREATE_PROJECT_SET_COMPONENT_PROPS:\r\n            return {\r\n                ...state,\r\n                componentContext: action.context\r\n            }\r\n        case createProjectActions.CREATE_PROJECT_LOADING_DATA:\r\n            return {\r\n                ...state,\r\n                requestToLoadData: false\r\n            };\r\n        case createProjectActions.CREATE_PROJECT_FINISHED_LOADING_DATA: {\r\n            if (action.hasOwnProperty('error')) {\r\n                return {\r\n                    ...state,\r\n                    projectEditedLoaded: true,\r\n                    projectIDToBeLoadedAfterSavingFirstTime: null\r\n                }\r\n            }\r\n            else {\r\n                // error\r\n                if (!action.hasOwnProperty('mode')) {\r\n                    return initState;\r\n                }\r\n\r\n                switch (action.mode) {\r\n                    case createProjectActions.CREATE_PROJECT_MODE_EDIT: {\r\n                        const project = JSON.parse(JSON.stringify(action.projectEdited));\r\n\r\n                        return {\r\n                            ...state,\r\n                            projectBeforeEdited: project,\r\n                            projectEdited: project,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                            createNewPitch: {\r\n                                ...state.createNewPitch,\r\n                                // pitch sector\r\n                                pitchSector:\r\n                                    project.hasOwnProperty('sector')\r\n                                        ?\r\n                                        project.sector\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                // pitch project name\r\n                                pitchProjectName:\r\n                                    project.hasOwnProperty('projectName')\r\n                                        ?\r\n                                        project.projectName\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchProjectDescription:\r\n                                    project.hasOwnProperty('description')\r\n                                        ?\r\n                                        project.description\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchExpiredDate:\r\n                                    project.Pitch.hasOwnProperty('expiredDate')\r\n                                        ?\r\n                                        project.Pitch.expiredDate\r\n                                        :\r\n                                        null\r\n                                ,\r\n                                pitchAmountRaisedToDate:\r\n                                    project.Pitch.hasOwnProperty('amountRaised')\r\n                                        ?\r\n                                        Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchRaiseRequired:\r\n                                    project.Pitch.hasOwnProperty('fundRequired')\r\n                                        ?\r\n                                        Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchPostMoneyValuation:\r\n                                    project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                        ?\r\n                                        Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchInvestorsCommitted:\r\n                                    project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                        ?\r\n                                        project.Pitch.investorsCommitted\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                hasRaisedMoneyBefore:\r\n                                    project.Pitch.hasOwnProperty('amountRaised')\r\n                                        ?\r\n                                        (\r\n                                            project.Pitch.amountRaised > 0\r\n                                                ?\r\n                                                \"true\"\r\n                                                :\r\n                                                \"false\"\r\n                                        )\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                pitchPresentationText:\r\n                                    !project.Pitch.presentationText\r\n                                        ?\r\n                                        {ops: []}\r\n                                        :\r\n                                        project.Pitch.presentationText\r\n                            }\r\n                        };\r\n                    }\r\n                    case createProjectActions.CREATE_PROJECT_MODE_CREATE_NEW:\r\n                        return {\r\n                            ...state,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null\r\n                        };\r\n                    default:\r\n                        return initState;\r\n                }\r\n            }\r\n        }\r\n        case createProjectActions.CREATE_PROJECT_DRAFT_PROJECT_CHANGED:\r\n            return {\r\n                ...state,\r\n                projectEdited: JSON.parse(JSON.stringify(action.projectChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default createProjectReducer;","import {DocumentClickAction, DocumentsDownloadAction, DocumentsDownloadEvents} from \"./DocumentsDownloadActions\";\r\nimport {PitchDocument} from \"../../models/project\";\r\n\r\nexport interface DocumentsDownloadState {\r\n    selectedDocument?: PitchDocument;\r\n    openRiskWarningDialog: boolean;\r\n}\r\n\r\nconst initialState: DocumentsDownloadState = {\r\n    openRiskWarningDialog: false\r\n}\r\n\r\nconst documentsDownloadReducer = (state: DocumentsDownloadState = initialState, action: DocumentsDownloadAction) => {\r\n    switch (action.type) {\r\n        case DocumentsDownloadEvents.OpenRiskWarningDialog:\r\n            const openRiskWarningDialogAction: DocumentClickAction = action as DocumentClickAction;\r\n            return {\r\n                ...state,\r\n                selectedDocument: openRiskWarningDialogAction.selectedDocument,\r\n                openRiskWarningDialog: true\r\n            }\r\n        case DocumentsDownloadEvents.CloseRiskWarningDialog:\r\n            return {\r\n                ...state,\r\n                selectedDocument: undefined,\r\n                openRiskWarningDialog: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default documentsDownloadReducer;","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\r\nimport {ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {openFeedbackSnackbar} from \"../../../feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport React from \"react\";\r\nimport {EditImageDialogModes, isDeletingProfilePicture, isSavingProfilePicture} from \"../../ProfileReducer\";\r\nimport UserRepository from \"../../../../api/repositories/UserRepository\";\r\nimport User from \"../../../../models/user\";\r\nimport {updateUserChanges} from \"../../../../redux-store/actions/authenticationActions\";\r\nimport FileRepository from \"../../../../api/repositories/FileRepository\";\r\nimport {getCurrentDate} from \"../../../../utils/utils\";\r\nimport {PROFILE_PICTURES_CHILD, USERS_CHILD} from \"../../../../firebase/databaseConsts\";\r\n\r\nexport enum EditImageDialogEvents {\r\n    ToggleDialog = \"EditImageDialogEvents.ToggleDialog\",\r\n    SetEditor = \"EditImageDialogEvents.SetEditor\",\r\n    ChangeMode = \"EditImageDialogEvents.ChangeMode\",\r\n    SuccessfullySelectedImage = \"EditImageDialogEvents.SuccessfullySelectedImage\",\r\n    SliderChanged = \"EditImageDialogEvents.SliderChanged\",\r\n    SavingImage = \"EditImageDialogEvents.SavingImage\",\r\n    DeletingImage = \"EditImageDialogEvents.DeletingImage\"\r\n}\r\n\r\nexport interface EditImageDialogAction extends ProfileAction {\r\n\r\n}\r\n\r\nexport interface ToggleDialogAction extends EditImageDialogAction {\r\n    // when set (must be a URL), the dialog will be opened in \"Display photo\" mode\r\n    image?: string;\r\n}\r\n\r\nexport interface SetEditorAction extends EditImageDialogAction {\r\n    editor: any;\r\n}\r\n\r\nexport interface ChangeModeAction extends EditImageDialogAction {\r\n    mode: EditImageDialogModes;\r\n}\r\n\r\nexport interface SuccessfullySelectedImageAction extends EditImageDialogAction {\r\n    selectedImage: File;\r\n}\r\n\r\nexport interface SliderChangedAction extends EditImageDialogAction {\r\n    name: string;\r\n    value: number;\r\n}\r\n\r\nexport interface SavingImageAction extends EditImageDialogAction {\r\n    saving: boolean;\r\n}\r\n\r\nexport interface DeletingImageAction extends EditImageDialogAction {\r\n    deleting: boolean;\r\n}\r\n\r\nexport const toggleDialog: ActionCreator<any> = (image?: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ToggleDialogAction = {\r\n            type: EditImageDialogEvents.ToggleDialog,\r\n            image\r\n        };\r\n        dispatch(action);\r\n        if (image) {\r\n            dispatch(changeMode(EditImageDialogModes.DisplayPhoto));\r\n        }\r\n    }\r\n}\r\n\r\nexport const setEditor: ActionCreator<any> = (editor: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetEditorAction = {\r\n            type: EditImageDialogEvents.SetEditor,\r\n            editor\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const changeMode: ActionCreator<any> = (mode: EditImageDialogModes) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeModeAction = {\r\n            type: EditImageDialogEvents.ChangeMode,\r\n            mode\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n/**\r\n * Handle when an image is successfully selected\r\n *\r\n * @param files\r\n */\r\nexport const handleImageChanged: ActionCreator<any> = (files: File[]) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        // error happened\r\n        if (files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const imageFile: File = files[0];\r\n        const action: SuccessfullySelectedImageAction = {\r\n            type: EditImageDialogEvents.SuccessfullySelectedImage,\r\n            selectedImage: imageFile\r\n        };\r\n        dispatch(action);\r\n        return dispatch(changeMode(EditImageDialogModes.EditPhoto));\r\n    }\r\n}\r\n\r\n/**\r\n * Handle when an image is unsuccessfully selected due to oversize, etc.\r\n *\r\n * Note: when this event occur, handleImageChanged is also called with files = [].\r\n *\r\n * @param error\r\n * @param file\r\n */\r\nexport const handleImageError: ActionCreator<any> = (error: MediaError, file: File) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, error.message))\r\n    }\r\n}\r\n\r\nexport const handleSliderChanged: ActionCreator<any> = (sliderName: string, value: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SliderChangedAction = {\r\n            type: EditImageDialogEvents.SliderChanged,\r\n            name: sliderName,\r\n            value\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n/**\r\n * Save edited image as a new profile picture\r\n */\r\nexport const saveImage: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            EditImageDialogState\r\n        } = getState().ProfileLocalState;\r\n\r\n        const editor: any = EditImageDialogState.editor;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        if (isSavingProfilePicture(EditImageDialogState)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Note: this can only be done if cors is set.\r\n            // To set cors on Firebase, follow this: https://stackoverflow.com/questions/37760695/firebase-storage-and-access-control-allow-origin/37765371\r\n            const canvas: HTMLCanvasElement = editor.getImage();\r\n            // @ts-ignore\r\n            const editedImageAsBlob: Blob = await new Promise(resolve => canvas.toBlob(resolve));\r\n\r\n            const savingImageAction: SavingImageAction = {\r\n                type: EditImageDialogEvents.SavingImage,\r\n                saving: true\r\n            };\r\n            dispatch(savingImageAction);\r\n\r\n            const storageID: number = getCurrentDate();\r\n            const imageUrl = await new FileRepository().uploadSingleFile({\r\n                file: editedImageAsBlob,\r\n                fileName: storageID,\r\n                storageLocation: `${USERS_CHILD}/${copiedUser.id}/${PROFILE_PICTURES_CHILD}`\r\n            });\r\n\r\n            // update user\r\n            const response = await new UserRepository().updateUser({\r\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\r\n                newProfilePicture: {\r\n                    storageID,\r\n                    url: imageUrl\r\n                }\r\n            });\r\n\r\n            const updatedUser: User = response.data;\r\n\r\n            dispatch(toggleDialog());\r\n            dispatch(updateUserChanges(updatedUser));\r\n            return dispatch(setCopiedUser(updatedUser));\r\n        } catch (error) {\r\n            const errorSavingImageAction: SavingImageAction = {\r\n                type: EditImageDialogEvents.SavingImage,\r\n                saving: false\r\n            };\r\n            dispatch(errorSavingImageAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not save profile photo.\"));\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Delete current profile picture\r\n */\r\nexport const deleteImage: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            EditImageDialogState\r\n        } = getState().ProfileLocalState;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        if (isDeletingProfilePicture(EditImageDialogState)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const deletingImageAction: DeletingImageAction = {\r\n                type: EditImageDialogEvents.DeletingImage,\r\n                deleting: true\r\n            };\r\n            dispatch(deletingImageAction);\r\n\r\n            // update user\r\n            const response = await new UserRepository().updateUser({\r\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\r\n                removeProfilePicture: true\r\n            });\r\n\r\n            const updatedUser: User = response.data;\r\n\r\n            dispatch(changeMode(EditImageDialogModes.AddPhoto));\r\n            dispatch(updateUserChanges(updatedUser));\r\n            return dispatch(setCopiedUser(updatedUser));\r\n        }\r\n        catch (error) {\r\n            const deletingImageAction: DeletingImageAction = {\r\n                type: EditImageDialogEvents.DeletingImage,\r\n                deleting: false\r\n            };\r\n            dispatch(deletingImageAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not delete profile photo.\"));\r\n        }\r\n    }\r\n}","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\r\nimport User, {BusinessProfile, hasBusinessProfile} from \"../../../../models/user\";\r\nimport {ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport Address from \"../../../../models/address\";\r\nimport AddressRepository from \"../../../../api/repositories/AddressRepository\";\r\nimport {AddressStates} from \"../../ProfileReducer\";\r\n\r\nexport enum BusinessProfileEvents {\r\n    NewBusinessProfileChanged = \"BusinessProfileEvents.NewBusinessProfileChanged\",\r\n    CheckBoxChanged = \"BusinessProfileEvents.CheckBoxChanged\",\r\n    FindingAddress = \"BusinessProfileEvents.FindingAddress\",\r\n    FinishedFindingAddress = \"BusinessProfileEvents.FinishedFindingAddress\",\r\n    ChangeAddressState = \"BusinessProfileEvents.ChangeAddressState\"\r\n}\r\n\r\nexport interface BusinessProfileAction extends ProfileAction {\r\n\r\n}\r\n\r\nexport interface ToggleEnterAddressManuallyAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\"\r\n}\r\n\r\nexport interface FindingAddressAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n}\r\n\r\nexport interface FinishedFindingAddressAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n    foundAddresses: Address[] | undefined;\r\n    error?: string;\r\n}\r\n\r\nexport interface ChangeAddressFindingStateAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n    addressState: AddressStates;\r\n}\r\n\r\nexport interface BusinessProfileCheckBoxChangedAction extends BusinessProfileAction {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport const findAddress: ActionCreator<any> = (mode: \"registeredOffice\" | \"tradingAddress\") => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            BusinessProfileState\r\n        } = getState().ProfileLocalState;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        let postcode: string;\r\n\r\n        // if (hasBusinessProfile(copiedUser)) {\r\n        //     if (mode === \"registeredOffice\") {\r\n        //         postcode = copiedUser.BusinessProfile?.registeredOffice.postcode ?? \"\";\r\n        //     } else {\r\n        //         postcode = copiedUser.BusinessProfile?.tradingAddress.postcode ?? \"\";\r\n        //     }\r\n        // } else {\r\n        //     if (mode === \"registeredOffice\") {\r\n        //         postcode = BusinessProfileState.newBusinessProfile.registeredOffice.postcode;\r\n        //     } else {\r\n        //         postcode = BusinessProfileState.newBusinessProfile.tradingAddress.postcode;\r\n        //     }\r\n        // }\r\n\r\n        const finishedFindingAddressAction: FinishedFindingAddressAction = {\r\n            type: BusinessProfileEvents.FinishedFindingAddress,\r\n            mode,\r\n            foundAddresses: undefined\r\n        };\r\n\r\n        try {\r\n            const findingAddressAction: FindingAddressAction = {\r\n                type: BusinessProfileEvents.FindingAddress,\r\n                mode\r\n            };\r\n            dispatch(findingAddressAction);\r\n\r\n            const results: Address[] = await new AddressRepository().findAddress(\"dummy postcode\");\r\n            finishedFindingAddressAction.foundAddresses = [...results];\r\n            dispatch(finishedFindingAddressAction);\r\n            return dispatch(changeAddressFindingState(mode, AddressStates.DisplayFoundAddresses));\r\n        } catch (error) {\r\n            finishedFindingAddressAction.error = error.toString();\r\n            dispatch(finishedFindingAddressAction);\r\n            return dispatch(changeAddressFindingState(mode, AddressStates.EnterPostcode));\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeAddressFindingState: ActionCreator<any> = (mode: \"registeredOffice\" | \"tradingAddress\", addressState: AddressStates) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeAddressFindingStateAction = {\r\n            type: BusinessProfileEvents.ChangeAddressState,\r\n            mode,\r\n            addressState\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import {ProfileAction, ProfileEvents, SetCopiedUserAction} from \"./ProfileActions\";\r\nimport User, {BusinessProfile} from \"../../models/user\";\r\nimport Error from \"../../models/error\";\r\nimport {\r\n    ChangeModeAction,\r\n    DeletingImageAction,\r\n    EditImageDialogEvents,\r\n    SavingImageAction,\r\n    SetEditorAction,\r\n    SliderChangedAction,\r\n    SuccessfullySelectedImageAction,\r\n    ToggleDialogAction\r\n} from \"./components/edit-image-dialog/EditImageDialogActions\";\r\nimport {\r\n    BusinessProfileCheckBoxChangedAction,\r\n    BusinessProfileEvents,\r\n    ChangeAddressFindingStateAction,\r\n    FindingAddressAction,\r\n    FinishedFindingAddressAction\r\n} from \"./components/business-profile/BusinessProfileActions\";\r\nimport Address from \"../../models/address\";\r\n\r\n// State for Personal details section\r\nexport interface PersonalDetailsState {\r\n\r\n}\r\n\r\nexport enum AddressStates {\r\n    EnterPostcode = \"AddressFindingStates.EnterPostcode\",\r\n    FindingAddresses = \"AddressFindingStates.FindingAddresses\",\r\n    DisplayFoundAddresses = \"AddressFindingStates.DisplayFoundAddresses\"\r\n}\r\n\r\n// State for Business profile section\r\nexport interface BusinessProfileState {\r\n    // this state is used to keeping track of the changes in Business profile\r\n    editedBusinessProfile: BusinessProfile;\r\n    // find address by postcode state for Registered office section\r\n    registeredOfficeState: AddressStates;\r\n    // find address by postcode state for Registered office section\r\n    tradingAddressState: AddressStates;\r\n    // list of addresses found by postcode from Registered office section\r\n    foundAddressesForRegisteredOffice?: Address[];\r\n    // list of addresses found by postcode from Trading address section\r\n    foundAddressesForTradingAddress?: Address[];\r\n    // error finding addresses for Registered office\r\n    errorFindingAddressesForRegisteredOffice?: Error;\r\n    // error finding addresses for Trading address\r\n    errorFindingAddressesForTradingAddress?: Error;\r\n    tradingAddressSameAsRegisteredOffice: boolean;\r\n}\r\n\r\nexport enum EditImageDialogModes {\r\n    AddPhoto = \"EditImageDialogModes.AddPhoto\",\r\n    EditPhoto = \"EditImageDialogModes.EditPhoto\",\r\n    DisplayPhoto = \"EditImageDialogModes.DisplayPhoto\"\r\n}\r\n\r\n// State for Edit Image dialog\r\nexport interface EditImageDialogState {\r\n    dialogOpen: boolean;\r\n    mode: EditImageDialogModes;\r\n    // reference to the editor\r\n    editor?: any;\r\n    rawImage?: File | string;\r\n    editedImage?: Blob;\r\n\r\n    scale: number;\r\n    rotate: number;\r\n\r\n    savingImage: boolean;\r\n    deletingImage: boolean;\r\n}\r\n\r\n// State for the whole Profile page\r\nexport interface ProfileState {\r\n    copiedUser?: User;\r\n    hasInitiallySetCopiedUser: boolean;\r\n    PersonalDetailsState: PersonalDetailsState;\r\n    BusinessProfileState: BusinessProfileState;\r\n    EditImageDialogState: EditImageDialogState;\r\n}\r\n\r\n// initial state for Personal details section\r\nconst initialPersonalDetailsState: PersonalDetailsState = {}\r\n\r\n// initial state for Business profile section\r\nconst initialBusinessProfileState: BusinessProfileState = {\r\n    editedBusinessProfile: {\r\n        companyName: \"\",\r\n        companyWebsite: \"\",\r\n        registrationNo: \"\",\r\n        sector: \"none\",\r\n        directors: [\"\"],\r\n        registeredOffice: {\r\n            address1: \"none\",\r\n            address2: \"\",\r\n            address3: \"\",\r\n            postcode: \"\",\r\n            townCity: \"\"\r\n        },\r\n        tradingAddress: {\r\n            address1: \"none\",\r\n            address2: \"\",\r\n            address3: \"\",\r\n            postcode: \"\",\r\n            townCity: \"\"\r\n        },\r\n        logo: [\r\n            {\r\n                storageID: -1,\r\n                url: \"\"\r\n            }\r\n        ]\r\n    },\r\n    registeredOfficeState: AddressStates.EnterPostcode,\r\n    tradingAddressState: AddressStates.EnterPostcode,\r\n    tradingAddressSameAsRegisteredOffice: true\r\n}\r\n\r\n// initial state for Edit Image dialog\r\nconst initialEditImageDialogState: EditImageDialogState = {\r\n    dialogOpen: false,\r\n    mode: EditImageDialogModes.AddPhoto,\r\n\r\n    scale: 1,\r\n    rotate: 0,\r\n\r\n    savingImage: false,\r\n    deletingImage: false\r\n}\r\n\r\n// initial state for the whole Profile page\r\nconst initialState: ProfileState = {\r\n    hasInitiallySetCopiedUser: false,\r\n    PersonalDetailsState: initialPersonalDetailsState,\r\n    BusinessProfileState: initialBusinessProfileState,\r\n    EditImageDialogState: initialEditImageDialogState\r\n}\r\n\r\nexport const hasInitiallySetCopiedUser = (state: ProfileState) => {\r\n    return state.hasInitiallySetCopiedUser;\r\n}\r\n\r\nexport const isSavingProfilePicture = (state: EditImageDialogState) => {\r\n    return state.savingImage;\r\n}\r\n\r\nexport const isDeletingProfilePicture = (state: EditImageDialogState) => {\r\n    return state.deletingImage;\r\n}\r\n\r\nexport const hasErrorFindingAddressForRegisteredOffice = (state: BusinessProfileState) => {\r\n    return state.errorFindingAddressesForRegisteredOffice !== undefined;\r\n}\r\n\r\nexport const hasErrorFindingAddressForTradingAddress = (state: BusinessProfileState) => {\r\n    return state.errorFindingAddressesForTradingAddress !== undefined;\r\n}\r\n\r\nconst profileReducer = (state = initialState, action: ProfileAction) => {\r\n    switch (action.type) {\r\n        case ProfileEvents.SetCopiedUser:\r\n            const setCopiedUserAction: SetCopiedUserAction = action as SetCopiedUserAction;\r\n            return {\r\n                ...state,\r\n                copiedUser: setCopiedUserAction.copiedUser,\r\n                hasInitiallySetCopiedUser: setCopiedUserAction.firstTimeSetCopiedUser === true ? true : state.hasInitiallySetCopiedUser\r\n            }\r\n        case EditImageDialogEvents.ToggleDialog:\r\n            const toggleDialogAction: ToggleDialogAction = action as ToggleDialogAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...initialEditImageDialogState,\r\n                    dialogOpen: !state.EditImageDialogState.dialogOpen,\r\n                    rawImage: toggleDialogAction.image\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SetEditor:\r\n            const setEditorAction: SetEditorAction = action as SetEditorAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    editor: setEditorAction.editor\r\n                }\r\n            }\r\n        case EditImageDialogEvents.ChangeMode:\r\n            const changeModeAction: ChangeModeAction = action as ChangeModeAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    mode: changeModeAction.mode\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SuccessfullySelectedImage:\r\n            const successfullySelectedImageAction: SuccessfullySelectedImageAction = action as SuccessfullySelectedImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    rawImage: successfullySelectedImageAction.selectedImage\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SliderChanged:\r\n            const sliderChangedAction: SliderChangedAction = action as SliderChangedAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    [sliderChangedAction.name]: sliderChangedAction.value\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SavingImage:\r\n            const savingImageAction: SavingImageAction = action as SavingImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    savingImage: savingImageAction.saving\r\n                }\r\n            }\r\n        case EditImageDialogEvents.DeletingImage:\r\n            const deletingImageAction: DeletingImageAction = action as DeletingImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    deletingImage: deletingImageAction.deleting\r\n                }\r\n            }\r\n        // case BusinessProfileEvents.NewBusinessProfileChanged:\r\n        //     const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = action as UpdateNewBusinessProfileAction;\r\n        //     return {\r\n        //         ...state,\r\n        //         BusinessProfileState: {\r\n        //             ...state.BusinessProfileState,\r\n        //             newBusinessProfile: updateNewBusinessProfileAction.updatedNewBusinessProfile\r\n        //         }\r\n        //     }\r\n        case BusinessProfileEvents.CheckBoxChanged:\r\n            const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = action as BusinessProfileCheckBoxChangedAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    [businessProfileCheckBoxChangedAction.name]: businessProfileCheckBoxChangedAction.value\r\n                }\r\n            }\r\n        case BusinessProfileEvents.FindingAddress:\r\n            const findingAddressAction: FindingAddressAction = action as FindingAddressAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    registeredOfficeState: findingAddressAction.mode === \"registeredOffice\"\r\n                        ? AddressStates.FindingAddresses : state.BusinessProfileState.registeredOfficeState,\r\n                    tradingAddressState: findingAddressAction.mode === \"tradingAddress\"\r\n                        ? AddressStates.FindingAddresses : state.BusinessProfileState.tradingAddressState\r\n                }\r\n            }\r\n        case BusinessProfileEvents.FinishedFindingAddress:\r\n            const finishedFindingAddressAction: FinishedFindingAddressAction = action as FinishedFindingAddressAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    foundAddressesForRegisteredOffice: finishedFindingAddressAction.mode === \"registeredOffice\"\r\n                        ? finishedFindingAddressAction.foundAddresses : state.BusinessProfileState.foundAddressesForRegisteredOffice,\r\n                    foundAddressesForTradingAddress: finishedFindingAddressAction.mode === \"tradingAddress\"\r\n                        ? finishedFindingAddressAction.foundAddresses : state.BusinessProfileState.foundAddressesForTradingAddress,\r\n                    errorFindingAddressesForRegisteredOffice: finishedFindingAddressAction.mode === \"registeredOffice\" && finishedFindingAddressAction.error !== undefined\r\n                        ? {detail: finishedFindingAddressAction.error} : state.BusinessProfileState.errorFindingAddressesForRegisteredOffice,\r\n                    errorFindingAddressesForTradingAddress: finishedFindingAddressAction.mode === \"tradingAddress\" && finishedFindingAddressAction.error !== undefined\r\n                        ? {detail: finishedFindingAddressAction.error} : state.BusinessProfileState.errorFindingAddressesForTradingAddress\r\n                }\r\n            }\r\n        case BusinessProfileEvents.ChangeAddressState:\r\n            const changeAddressStateAction: ChangeAddressFindingStateAction = action as ChangeAddressFindingStateAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    registeredOfficeState: changeAddressStateAction.mode === \"registeredOffice\"\r\n                        ? changeAddressStateAction.addressState : state.BusinessProfileState.registeredOfficeState,\r\n                    tradingAddressState: changeAddressStateAction.mode === \"tradingAddress\"\r\n                        ? changeAddressStateAction.addressState : state.BusinessProfileState.tradingAddressState,\r\n                    // if addressState is set to EnterPostcode, reset other states to initial values\r\n                    foundAddressesForRegisteredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.foundAddressesForRegisteredOffice,\r\n                    foundAddressesForTradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.foundAddressesForTradingAddress,\r\n                    errorFindingAddressesForRegisteredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.errorFindingAddressesForRegisteredOffice,\r\n                    errorFindingAddressesForTradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.errorFindingAddressesForTradingAddress,\r\n                    editedBusinessProfile: {\r\n                        ...state.BusinessProfileState.editedBusinessProfile,\r\n                        registeredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                        && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                            ? initialBusinessProfileState.editedBusinessProfile.registeredOffice\r\n                            : state.BusinessProfileState.editedBusinessProfile.registeredOffice,\r\n                        tradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                        && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                            ? initialBusinessProfileState.editedBusinessProfile.tradingAddress\r\n                            : state.BusinessProfileState.editedBusinessProfile.tradingAddress\r\n                    }\r\n                }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import {combineReducers} from \"redux\";\r\nimport authReducer from './authReducer';\r\nimport createBusinessProfileReducer from './createBusinessProfileReducer';\r\nimport editUserReducer from './editUserReducer';\r\nimport editImageReducer from './editImageReducer';\r\nimport editVideoReducer from './editVideoReducer';\r\nimport uploadFilesReducer from './uploadFilesReducer';\r\nimport uploadingStatusReducer from './uploadingStatusReducer';\r\nimport changePasswordReducer from './changePasswordReducer';\r\nimport clubAttributesReducer from './clubAttributesReducer';\r\nimport forumsReducer from './forumsReducer';\r\nimport notificationsReducer from './notificationsReducer';\r\nimport dashboardSidebarReducer from './dashboardSidebarReducer';\r\nimport mediaQueryReducer, {MediaQueryState} from './mediaQueryReducer';\r\nimport superAdminSettingsReducer from './superAdminSettingsReducer';\r\nimport groupAdminSettingsReducer from './groupAdminSettingsReducer';\r\nimport legalDocumentsReducer from './legalDocumentsReducer';\r\nimport invitedUsersReducer from './invitedUsersReducer';\r\nimport invitationDialogReducer from './invitationDialogReducer';\r\nimport addAngelNetworkDialogReducer from './addAngelNetworkDialogReducer';\r\nimport manageGroupFromParamsReducer from './manageGroupFromParamsReducer';\r\nimport investorSelfCertificationAgreementsReducer from './investorSelfCertificationAgreementsReducer';\r\nimport angelNetworksReducer from './angelNetworksReducer';\r\nimport manageJoinRequestsReducer from './manageJoinRequestsReducer';\r\nimport pledgesTableReducer from './pledgesTableReducer';\r\nimport feedbackSnackbarReducer from './feedbackSnackbarReducer';\r\nimport activitiesTableReducer from './activitiesTableReducer';\r\nimport manageJSONCompareChangesDialogReducer from './manageJSONCompareChangesDialogReducer';\r\nimport groupAdminsTableReducer from './groupAdminsTableReducer';\r\nimport createPledgeDialogReducer from './createPledgeDialogReducer';\r\nimport selectProjectVisibilityReducer from './selectProjectVisiblityReducer';\r\nimport manageSystemGroupsReducer from './manageSystemGroupsReducer';\r\nimport manageMarketingPreferencesReducer from './manageMarketingPreferencesReducer';\r\nimport createProjectReducer from './createProjectReducer';\r\nimport manageGroupUrlReducer, {ManageGroupUrlState} from \"./manageGroupUrlReducer\";\r\nimport signInReducer, {SignInState} from \"../../pages/signin/SignInReducer\";\r\nimport authenticationReducer, {AuthenticationState} from \"./authenticationReducer\";\r\nimport manageSystemAttributesReducer, {ManageSystemAttributesState} from \"./manageSystemAttributesReducer\";\r\nimport exploreOffersReducer, {ExploreOffersState} from \"../../shared-components/explore-offers/ExploreOffersReducer\";\r\nimport offersTableReducer, {OffersTableStates} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {ExploreGroupsState} from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport newExploreGroupsReducer from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport groupDetailsReducer, {GroupDetailsState} from \"../../pages/group-details/GroupDetailsReducer\";\r\nimport manageSystemIdleTimeReducer, {ManageSystemIdleTimeState} from \"./manageSystemIdleTimeReducer\";\r\nimport resetPasswordReducer, {ResetPasswordState} from \"../../pages/reset-password/ResetPasswordReducer\";\r\nimport resourcesReducer, {ResourcesState} from \"../../pages/resources/ResourcesReducer\";\r\nimport feedbackSnackbarReducerNew, {FeedbackSnackbarState} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport documentsDownloadReducer, {DocumentsDownloadState} from \"../../shared-components/documents-download/DocumentsDownloadReducer\";\r\nimport contactPitchOwnerDialogReducer, {ContactPitchOwnerDialogState} from \"../../pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer\";\r\nimport profileReducer, {ProfileState} from \"../../shared-components/profile/ProfileReducer\";\r\nimport signUpReducer, {SignUpState} from \"../../pages/signup/SignUpReducer\";\r\nimport manageSectorsReducer, {ManageSectorsState} from \"../../pages/admin/components/manage-sectors/ManageSectorsReducer\";\r\n\r\nexport interface AppState {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemIdleTimeState: ManageSystemIdleTimeState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n\r\n    SignInLocalState: SignInState;\r\n    SignUpLocalState: SignUpState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    OffersTableLocalState: OffersTableStates;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    ResourcesLocalState: ResourcesState;\r\n\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n\r\n    ProfileLocalState: ProfileState;\r\n\r\n    // mitigation plan for the old states of old reducers\r\n    [oldReducers: string]: any;\r\n}\r\n\r\nconst rootReducer = combineReducers<AppState>({\r\n    MediaQueryState: mediaQueryReducer,\r\n    ManageSystemIdleTimeState: manageSystemIdleTimeReducer,\r\n    ManageGroupUrlState: manageGroupUrlReducer,\r\n    AuthenticationState: authenticationReducer,\r\n    ManageSystemAttributesState: manageSystemAttributesReducer,\r\n\r\n    SignInLocalState: signInReducer,\r\n    SignUpLocalState: signUpReducer,\r\n    ExploreOffersLocalState: exploreOffersReducer,\r\n    OffersTableLocalState: offersTableReducer,\r\n    ExploreGroupsLocalState: newExploreGroupsReducer,\r\n    GroupDetailsLocalState: groupDetailsReducer,\r\n    ResetPasswordLocalState: resetPasswordReducer,\r\n    ResourcesLocalState: resourcesReducer,\r\n\r\n    FeedbackSnackbarLocalState: feedbackSnackbarReducerNew,\r\n    DocumentsDownloadLocalState: documentsDownloadReducer,\r\n    ContactPitchOwnerDialogLocalState: contactPitchOwnerDialogReducer,\r\n\r\n    ManageSectorsLocalState: manageSectorsReducer,\r\n\r\n    ProfileLocalState: profileReducer,\r\n\r\n    // Old reducers --------------------------\r\n    auth: authReducer,\r\n    createBusinessProfile: createBusinessProfileReducer,\r\n    editUser: editUserReducer,\r\n    editImage: editImageReducer,\r\n    editVideo: editVideoReducer,\r\n    uploadFiles: uploadFilesReducer,\r\n    uploadingStatus: uploadingStatusReducer,\r\n    changePassword: changePasswordReducer,\r\n    manageClubAttributes: clubAttributesReducer,\r\n    manageForums: forumsReducer,\r\n    manageNotifications: notificationsReducer,\r\n    dashboardSidebar: dashboardSidebarReducer,\r\n    superAdminSettings: superAdminSettingsReducer,\r\n    groupAdminSettings: groupAdminSettingsReducer,\r\n    legalDocuments: legalDocumentsReducer,\r\n    invitedUsers: invitedUsersReducer,\r\n    manageInvitationDialog: invitationDialogReducer,\r\n    manageAddAngelNetworkDialog: addAngelNetworkDialogReducer,\r\n    manageGroupFromParams: manageGroupFromParamsReducer,\r\n    manageInvestorSelfCertificationAgreement: investorSelfCertificationAgreementsReducer,\r\n    manageAngelNetworks: angelNetworksReducer,\r\n    manageJoinRequests: manageJoinRequestsReducer,\r\n    managePledgesTable: pledgesTableReducer,\r\n    manageFeedbackSnackbar: feedbackSnackbarReducer,\r\n    manageActivitiesTable: activitiesTableReducer,\r\n    manageJSONCompareChangesDialog: manageJSONCompareChangesDialogReducer,\r\n    manageGroupAdminsTable: groupAdminsTableReducer,\r\n    manageCreatePledgeDialog: createPledgeDialogReducer,\r\n    manageSelectProjectVisibility: selectProjectVisibilityReducer,\r\n    manageSystemGroups: manageSystemGroupsReducer,\r\n    manageMarketingPreferences: manageMarketingPreferencesReducer,\r\n    manageCreateProject: createProjectReducer,\r\n});\r\n\r\nexport default rootReducer;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport {applyMiddleware, createStore, Store} from \"redux\";\r\nimport rootReducer, {AppState} from \"./redux-store/reducers\";\r\nimport {Provider} from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst store: Store<AppState> = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n    <Provider\r\n        store={store}\r\n    >\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}