{"version":3,"sources":["img/logo.png","img/document_icon.png","img/linkedin_logo.png","img/admin_logo.png","img/group_admin_help_my_dashboard.png","img/group_admin_help_navigation_bar.png","img/group_admin_help_notifications.png","img/group_admin_help_user_management.png","img/group_admin_help_inviting_a_new_user_01.png","img/group_admin_help_inviting_a_new_user_02.png","img/group_admin_help_inviting_a_new_user_03.png","img/group_admin_help_manage_access_requests.png","img/group_admin_help_manage_group_members.png","img/group_admin_help_viewing_an_offer.png","img/group_admin_help_accept_reject_offer.png","img/group_admin_help_accept_reject_2_offer.png","img/group_admin_help_edit_offer_01.png","img/group_admin_help_edit_offer_02.png","img/group_admin_help_temporarily_closing_an_offer.png","img/group_admin_help_reopening_a_temporarily_closed_offer.png","img/group_admin_help_manage_group_admins.png","img/group_admin_help_explore_offers.png","img/group_admin_help_explore_groups.png","img/group_admin_help_resources.png","img/group_admin_help_settings.png","img/group_admin_help_public_offer.png","img/group_admin_help_restricted_offer.png","img/group_admin_help_audit_log.png","img/group_admin_help_password.png","img/group_admin_help_change_password.png","img/group_admin_help_logging_out.png","img/investor_help_my_dashboard.png","img/investor_help_navigation_bar.png","img/investor_help_notifications.png","img/investor_help_viewing_offers.png","img/investor_help_viewing_offers_campaign.png","img/investor_help_pitch_phase_02.png","img/investor_contacting_fundraiser.png","img/investor_help_exploring_groups.png","img/investor_help_resources.png","img/investor_help_profile.png","img/investor_help_editing_your_profile.png","img/investor_help_setting_up_business_profile.png","img/investor_help_self_certification.png","img/investor_help_reset_password.png","img/investor_help_change_password.png","img/investor_help_support_01.png","img/investor_help_support_02.png","img/investor_help_log_out.png","img/issuer_help_my_dashboard.png","img/issuer_help_navigation_bar.png","img/issuer_help_notifications.png","img/issuer_help_create_new_offer_01.png","img/issuer_help_create_new_offer_02.png","img/issuer_help_manage_offer.png","img/issuer_help_edit_offer.png","img/issuer_help_replying_to_comments_in_offer_01.png","img/issuer_help_replying_to_comments_in_offer_02.png","img/issuer_help_exploring_groups.png","img/issuer_help_resources.png","img/issuer_help_edit_profile_01.png","img/issuer_help_edit_profile_02.png","img/issuer_help_setting_business_profile_01.png","img/issuer_help_setting_business_profile_02.png","img/issuer_help_reset_password.png","img/issuer_help_change_password.png","img/issuer_help_support_01.png","img/issuer_help_support_02.png","img/issuer_help_log_out.png","img/front_page_cover_image.png","firebase/firebaseApp.jsx","redux-store/actions/uploadingStatusActions.jsx","shared-components/uploading-dialog/UploadingDialog.jsx","values/colors.jsx","shared-js-css-styles/SharedStyles.jsx","firebase/databaseConsts.jsx","utils/utils.jsx","redux-store/actions/feedbackSnackbarActions.jsx","redux-store/actions/editImageActions.jsx","shared-components/edit-image/EditImageDialog.jsx","redux-store/actions/editVideoActions.jsx","shared-components/edit-video/EditVideoDialog.jsx","shared-components/page-not-found/PageNotFound.jsx","shared-components/page-not-found/PageNotFoundWhole.jsx","models/admin.tsx","models/group_of_membership.tsx","models/user.tsx","router/routes.tsx","api/Api.tsx","redux-store/reducers/authenticationReducer.tsx","firebase/realtimeDBUtils.jsx","redux-store/actions/changePasswordActions.jsx","shared-components/change-password/ChangePasswordPage.jsx","redux-store/actions/manageGroupFromParamsActions.jsx","shared-components/nav-bars/HeaderWithoutDesc.jsx","pages/signin/Signin.jsx","redux-store/actions/authActions.jsx","redux-store/actions/dashboardSidebarActions.jsx","redux-store/actions/forumsActions.jsx","redux-store/actions/authenticationActions.tsx","api/repositories/InvestorSelfCertificationRepository.tsx","api/repositories/UserRepository.tsx","redux-store/actions/manageGroupUrlActions.tsx","shared-components/nav-bars/SidebarContent.jsx","shared-components/profile/LetterAvatar.jsx","redux-store/actions/manageJSONCompareChangesDialogActions.jsx","shared-components/activities-components/JSONCompareChangesDialog.jsx","redux-store/actions/activitiesTableActions.jsx","shared-components/activities-components/ActivitiesTable.jsx","redux-store/actions/createBusinessProfileActions.jsx","redux-store/actions/editUserActions.jsx","redux-store/actions/uploadFilesActions.jsx","redux-store/actions/legalDocumentsActions.jsx","redux-store/actions/investorSelfCertificationAgreementsActions.jsx","api/repositories/GroupRepository.tsx","api/repositories/OfferRepository.tsx","redux-store/reducers/manageGroupUrlReducer.tsx","shared-components/offers-table/OffersTableActions.tsx","shared-components/explore-offers/ExploreOffersActions.tsx","shared-components/offers-table/OffersTableReducer.tsx","shared-js-css-styles/CustomLink.tsx","models/project.tsx","utils/colorUtils.tsx","shared-components/offers-table/OffersTable.tsx","shared-components/footer/Footer.tsx","shared-components/profile/Profile.jsx","redux-store/actions/notificationsActions.jsx","shared-components/notifications/NotificationsBox.jsx","shared-components/explore-groups/ExploreGroupsActions.tsx","shared-components/explore-offers/ExploreOffersReducer.tsx","models/group_properties.tsx","shared-components/explore-offers/OfferItem.tsx","shared-components/risk-warning/RiskWarning.tsx","shared-components/explore-offers/ExploreOffers.tsx","api/repositories/AccessRequestRepository.tsx","api/repositories/EmailRepository.tsx","shared-components/explore-groups/ExploreGroupsReducer.tsx","shared-components/explore-groups/GroupItem.tsx","shared-components/explore-groups/ExploreGroups.tsx","shared-components/feedback-snackbar/FeedbackSnackbarActions.tsx","shared-components/feedback-snackbar/FeedbackSnackbarReducer.tsx","pages/resources/ResourcesActions.tsx","pages/admin/components/manage-sectors/ManageSectorsActions.tsx","pages/resources/ResourcesReducer.tsx","pages/resources/components/ContactResourceDialog.tsx","shared-components/feedback-snackbar/FeedbackSnackbarNew.tsx","pages/resources/pages/keltie/Keltie.tsx","pages/resources/ResourceItem.tsx","pages/resources/pages/founder-catalyst/FounderCatalyst.tsx","pages/resources/pages/grant-funding/GrantFunding.tsx","pages/resources/pages/merix-studio/merixStudio.tsx","pages/resources/Resources.tsx","pages/dashboard-issuer/IssuerDashboard.jsx","pages/dashboard-investor/InvestorDashboard.jsx","utils/emailUtils.jsx","redux-store/actions/invitationDialogActions.jsx","pages/admin/components/InvitationDialog.jsx","redux-store/actions/superAdminSettingsActions.jsx","api/repositories/SystemAttributesRepository.tsx","redux-store/actions/manageSystemAttributesActions.tsx","shared-components/documents-download/DocumentsDownloadActions.tsx","redux-store/reducers/manageSystemAttributesReducer.tsx","pages/admin/components/manage-sectors/ManageSectorsReducer.tsx","pages/admin/components/manage-sectors/ManageSectors.tsx","pages/admin/components/SuperAdminSettings.jsx","redux-store/actions/groupAdminSettingsActions.jsx","pages/admin/components/GroupAdminSettings.jsx","shared-components/info_overlay/InfoOverlay.jsx","redux-store/actions/invitedUsersActions.jsx","pages/admin/components/InvitedUsers.jsx","pages/admin/components/AddAngelNetWorkDialog.jsx","redux-store/actions/addAngelNetworkDialogActions.jsx","redux-store/actions/angelNetworksActions.jsx","pages/admin/components/AngelNetworks.jsx","redux-store/actions/manageJoinRequestsActions.jsx","pages/admin/components/JoinRequests.jsx","redux-store/actions/groupAdminsTableActions.jsx","pages/admin/components/GroupAdminsTable.jsx","pages/admin/AdminDashboard.jsx","shared-components/upload-documents/DocumentsUpload.jsx","shared-components/download-documents/DocumentsDownload.jsx","redux-store/actions/selectProjectVisibilityActions.jsx","shared-components/select-pitch-visibility/SelectPitchVisibility.jsx","pages/create-project/CreateProject.jsx","pages/profile/ProfilePageViewOnly.jsx","shared-components/select-pledge-visibility/SelectPledgeVisibility.jsx","redux-store/actions/createPledgeDialogActions.jsx","shared-components/create-pledge-dialog/CreatePledgeDialog.jsx","redux-store/actions/pledgesTableActions.jsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions.tsx","shared-components/documents-download/DocumentsDownload.tsx","pages/group-details/GroupDetailsActions.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialog.tsx","pages/project-details/ProjectDetails.jsx","pages/system-public-pages/PrivacyPolicyPage.jsx","pages/system-public-pages/TermsOfUsePage.jsx","pages/system-public-pages/RiskWarningPage.jsx","pages/system-public-pages/CreatePitchTermsAndConditionsPage.jsx","pages/system-public-pages/ContactUs.jsx","pages/system-public-pages/HelpPage.jsx","pages/signin/SignInActions.tsx","pages/group-details/GroupDetailsReducer.tsx","pages/group-details/GroupDetails.tsx","pages/system-public-pages/MarketingPreferencesPage.jsx","pages/profile/ProfilePageEditable.jsx","pages/front/Front.tsx","pages/reset-password/ResetPasswordActions.tsx","pages/signin/SignInReducer.tsx","pages/signin/SignInNew.tsx","shared-components/page-not-found/PageNotFoundNew.tsx","shared-components/header/Header.tsx","router/GroupRoute.tsx","pages/signup/SignUpActions.tsx","pages/reset-password/ResetPasswordReducer.tsx","pages/reset-password/ResetPassword.tsx","pages/resources/pages/ResourceDetail.tsx","utils/passwordUtils.tsx","redux-store/actions/mediaQueryActions.tsx","pages/signup/SignUpReducer.tsx","models/invited_user.tsx","pages/signup/SignUpNew.tsx","router/router.tsx","shared-components/feedback-snackbar/FeedbackSnackbar.jsx","redux-store/actions/clubAttributesActions.jsx","redux-store/actions/manageSystemIdleTimeActions.tsx","redux-store/actions/manageSystemGroupsActions.jsx","redux-store/reducers/manageSystemIdleTimeReducer.tsx","App.jsx","serviceWorker.js","shared-components/profile/ProfileActions.tsx","redux-store/reducers/authReducer.jsx","redux-store/reducers/createBusinessProfileReducer.jsx","redux-store/reducers/editUserReducer.jsx","redux-store/reducers/editImageReducer.jsx","redux-store/reducers/editVideoReducer.jsx","redux-store/reducers/uploadFilesReducer.jsx","redux-store/reducers/uploadingStatusReducer.jsx","redux-store/reducers/changePasswordReducer.jsx","redux-store/reducers/clubAttributesReducer.jsx","shared-components/forums/CreateForum.jsx","shared-components/forums/CreateThread.jsx","shared-components/forums/IndividualForum.jsx","shared-components/forums/CreateReply.jsx","shared-components/forums/IndividualThread.jsx","shared-components/forums/Forums.jsx","redux-store/reducers/forumsReducer.jsx","redux-store/reducers/notificationsReducer.jsx","redux-store/reducers/dashboardSidebarReducer.jsx","redux-store/reducers/mediaQueryReducer.tsx","redux-store/reducers/superAdminSettingsReducer.jsx","redux-store/reducers/groupAdminSettingsReducer.jsx","redux-store/reducers/legalDocumentsReducer.jsx","redux-store/reducers/invitedUsersReducer.jsx","redux-store/reducers/invitationDialogReducer.jsx","redux-store/reducers/addAngelNetworkDialogReducer.jsx","redux-store/reducers/manageGroupFromParamsReducer.jsx","redux-store/reducers/investorSelfCertificationAgreementsReducer.jsx","redux-store/reducers/angelNetworksReducer.jsx","redux-store/reducers/manageJoinRequestsReducer.jsx","redux-store/reducers/pledgesTableReducer.jsx","redux-store/reducers/feedbackSnackbarReducer.jsx","redux-store/reducers/activitiesTableReducer.jsx","redux-store/reducers/manageJSONCompareChangesDialogReducer.jsx","redux-store/reducers/groupAdminsTableReducer.jsx","redux-store/reducers/createPledgeDialogReducer.jsx","redux-store/reducers/selectProjectVisiblityReducer.jsx","redux-store/reducers/manageSystemGroupsReducer.jsx","redux-store/actions/manageMarketingPreferencesActions.jsx","redux-store/reducers/manageMarketingPreferencesReducer.jsx","redux-store/actions/createProjectActions.jsx","redux-store/reducers/createProjectReducer.jsx","shared-components/documents-download/DocumentsDownloadReducer.tsx","shared-components/profile/components/edit-image-dialog/EditImageDialogActions.tsx","shared-components/profile/components/business-profile/BusinessProfileActions.tsx","shared-components/profile/ProfileReducer.tsx","redux-store/reducers/index.tsx","index.tsx"],"names":["firebaseApp","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","UPLOADING","DISMISS_UPLOADING_STATUS","UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE","UPLOAD_DONE_MODE","UPLOAD_ERROR","UploadingDialog","this","props","forwardRef","mode","progress","dismiss","Dialog","ref","open","fullWidth","DialogTitle","DialogContent","column","ProgressBar","variant","striped","now","label","Typography","style","marginTop","DialogActions","Button","color","size","disabled","onClick","margin","Component","connect","state","uploadingStatus","dispatch","type","React","forwardedRef","black","white","red_700","dark_green","gray_50","gray_100","gray_200","gray_300","gray_400","gray_600","blue_gray_50","blue_gray_600","blue_gray_700","background_a","background_b","background_c","background_d","background_e","background_f","background_g","background_h","background_i","background_j","background_k","background_l","background_m","background_n","background_o","background_p","background_q","background_r","background_s","background_t","background_u","background_v","background_w","background_x","background_y","background_z","primaryColor","secondaryColor","errorColor","kick_starter_background_color","kick_starter_background_color_1","kick_starter_gray_box_border","sharedStyles","StyleSheet","create","nav_link_hover","appColors","textDecoration","cursor","nav_link_white_text_hover_without_changing_text_color","nav_link_hover_without_changing_text_color","page_title","marginLeft","hamburger_button","tab_title","textTransform","fontSize","kick_starter_border_box","border","boxShadow","no_text_transform","error_text","white_text","black_text","StyledTableCell","classes","makeStyles","root","background","cellColor","textColor","useStyles","TableCell","className","colSpan","component","SlideTransitionUp","Slide","direction","SlideTransitionDown","GROUP_PROPERTIES_CHILD","ADMINISTRATORS_CHILD","CLUB_ATTRIBUTES_CHILD","USERS_CHILD","PROJECTS_CHILD","ACTIVITIES_LOG_CHILD","INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD","REQUESTS_TO_JOIN_CHILD","CONTACT_US_ENQUIRIES_CHILD","MARKETING_PREFERENCES_CHILD","INVITED_USERS_CHILD","BUSINESS_PROFILE_CHILD","ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD","COMMENTS_CHILD","COMMENT_REPLIES_CHILD","PLEDGES_CHILD","VOTES_CHILD","PLEDGE_FAQS_CHILD","NOTIFICATIONS_CHILD","FORUMS_CHILD","FORUM_THREADS_CHILD","FORUM_THREAD_REPLIES_CHILD","LEGAL_DOCUMENTS_CHILD","LOGOS_CHILD","INTRO_VIDEOS_CHILD","PROFILE_PICTURES_CHILD","PROJECT_SUPPORTING_DOCUMENTS_CHILD","PROJECT_PRESENTATION_DOCUMENT_CHILD","PROJECT_COVER_CHILD","PROJECT_STATUS_DRAFT","USER_TITLES","FINANCIAL_ROUNDS","EIS_BADGE","SEIS_BADGE","MAX_FILE_SIZE_IN_BYTES","MAX_VIDEO_OR_IMAGE_SIZE_IN_MB","MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES","MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS","STORAGE_FILE_NAME_ID_SPLIT","getCurrentDate","Date","getTime","getDateWithDaysFurtherThanToday","days","neededDate","currentDate","setDate","getDate","dateInReadableFormat","milliseconds","toLocaleDateString","dateTimeInReadableFormat","date","toLocaleTimeString","passwordBlacklist","checkPasswordStrength","password","strength","length","match","findIndex","badPassword","toLowerCase","convertQuillDeltaToHTML","ops","QuillDeltaToHtmlConverter","convert","dateDiff","Math","abs","toFixed","findAddress","postcode","a","addressQuery","Promise","resolve","reject","fetch","then","results","json","data","apiAddresses","formattedAddresses","error","addresses","forEach","address","push","formattedAddress","element","index","trim","slice","calculatePledgesAmount","pledges","pledgesAmount","pledge","amount","getNumberFromInputString","inputString","includes","commaSplits","split","invalidSeparator","part","commaFreeString","replace","isNaN","number","parseFloat","constructStorageFileName","document","newStorageID","originalName","file","name","nameSplits","DB_CONST","isValidLinkedInURL","url","startsWith","getLogoFromGroup","getLogoType","groupProperties","hasOwnProperty","plainLogo","logo","logoWithText","shouldAProjectBeEdited","user","project","status","id","issuerID","Pitch","isValidHexColorCode","hexColorCode","test","isValidWebURL","isProjectLive","isProjectInLivePitchPhase","isProjectInLivePledgePhase","isDraftProject","isProjectWaitingToGoLive","isProjectRejectedToGoLive","isProjectPitchExpiredWaitingForAdminToCheck","isProjectWaitingForPledgeToBeCreated","isProjectWaitingForPledgeToBeChecked","isProjectSuccessful","isProjectFailed","isProjectTemporarilyClosed","temporarilyClosed","CLOSE_FEEDBACK_SNACKBAR","closeFeedbackSnackbar","SET_FEEDBACK_SNACKBAR_CONTENT","setFeedbackSnackbarContent","message","position","RESET_STATES_WHEN_SNACKBAR_CLOSED","TOGGLE_EDIT_IMAGE_DIALOG","toggleEditImageDialog","getState","auth","SET_IMAGE_EDITOR_REFERENCE","LOADING_IMAGE_FILE","IMAGE_FILES_LOADED","LOADING_PREVIOUS_IMAGE","FINISHED_LOADING_PREVIOUS_IMAGE","IMAGE_ZOOM_CHANGED","CANCEL_EDITING_CURRENT_IMAGE","EDITED_IMAGE_OBTAINED","getEditedImage","imgEditor","getCroppingRect","x","getImage","toBlob","blob","CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE","uploadImage","editImageState","imgPreIndex","firebaseStorage","storage","firebaseDB","database","storageID","storageLocation","imgName","BusinessProfile","child","delete","myUtils","profilePicture","storageRef","uploadTask","put","on","snapshot","bytesTransferred","totalBytes","getDownloadURL","imgDownloadURL","imgUploadedObj","prevNodeImgs","firebaseRef","splice","imgItem","removed","set","waitForUploading","catch","EditImageDialog","renderSelectedPreviousPhotoStatus","msg","profilePic","align","isMobile","previousPhotos","imgPreEdited","imgPreEditedLoaded","imgEdited","imgZoom","onClose","setEditorReference","handleImageFilesChanged","handleImageFileError","handleSliderChanged","onPreviousImageItemClick","cancelEditingCurrentImage","viewEditedImagePreview","saveEditedImage","other","maxWidth","fullScreen","padding","Container","fluid","Row","noGutters","Col","xs","sm","md","lg","backgroundColor","colors","paddingTop","paddingBottom","paddingLeft","paddingRight","vAlignContent","grow","hAlignContent","IconButton","Divider","width","marginBottom","css","styles","img_drop_zone","onChange","onError","accepts","maxFileSize","minFileSize","multiple","clickable","marginRight","height","image","borderRadius","disableBoundaryChecks","disableHiDPIScaling","scale","top","zIndex","CircularProgress","Slider","min","max","step","value","Image","src","window","URL","createObjectURL","roundedCircle","thumbnail","objectFit","sort","photo1","photo2","map","previousPhoto","previous_img_item_selected","editImage","editImageDialogOpen","MediaQueryState","editImageActions","editor","files","manageFeedbackSnackbar","Blob","code","feedbackSnackbarActions","event","newValue","zoom","response","selectedIndex","textAlign","opacity","TOGGLE_EDIT_VIDEO_DIALOG","toggleEditVideoDialog","VIDEO_TYPE_CHOSEN","VIDEO_URL_CHANGED","VIDEO_FILE_CHANGED","CREATE_BUSINESS_PROFILE_SAVE_VIDEO","PREVIOUS_VIDEO_SELECTED","CANCEL_EDITING_CURRENT_VIDEO","uploadVideo","editVideoState","video","videoPreIndex","downloadedPreviousVideo","videoName","videoUploadedObj","dateUploaded","utils","putUploadedVideoToFirebaseRealtime","videoUploadTask","videoDownloadURL","prevNodeVideos","EditVideoDialog","renderSelectedPreviousVideoStatus","allowVideoUpload","videoTypeSelected","previousVideos","videoChosen","chooseVideoType","handleVideoURLChanged","handleVideoFileChanged","handleVideoFileError","cancelEditingCurrentVideo","handlePreviousVideoItemClick","handleSaveVideo","video_drop_zone","TextField","placeholder","playing","controls","video1","video2","previousVideo","playsinline","previous_video_item_selected","manageClubAttributes","clubAttributes","editVideo","editVideoDialogOpen","editVideoActions","videoType","target","PageNotFound","page_not_found_text","explain_text","fontWeight","PageNotFoundWhole","isAdmin","JSON","parse","stringify","getHomeGroup","groups","group","isHomeGroup","UserTitles","isIssuer","isInvestor","Routes","baseGroup","nonGroupFront","groupFront","nonGroupSignIn","groupSignIn","superAdminSignIn","nonGroupSignUp","groupSignUp","nonGroupAdminDashboard","groupAdminDashboard","groupIssuerDashboard","groupInvestorDashboard","nonGroupViewUserProfile","groupViewUserProfile","nonGroupEditUserProfile","groupEditUserProfile","nonGroupCreateOffer","groupCreateOffer","nonGroupViewOffer","groupViewOffer","nonGroupViewPledge","groupViewPledge","nonGroupViewGroup","groupViewGroup","nonGroupViewResourceDetail","groupViewResourceDetail","nonGroupContactUs","groupContactUs","groupHelp","nonGroupTermsOfUse","nonGroupPrivacyPolicy","nonGroupRiskWarning","nonGroupCreatePitchTermsAndConditions","nonGroupMarketingPreferences","nonGroupAuthAction","error404","isProtectedRoute","route","isRouteReservedForSuperAdmin","isGroupAdminRoute","isIssuerDashboardRoute","isInvestorDashboardRoute","isSignInRoute","isSuperAdminSignInRoute","isSignUpRoute","isErrorRoute","isSystemPublicRoute","constructPublicRoute","constructHomeRoute","routeParams","ManageGroupUrlState","AuthenticationState","currentUser","groupUserName","currentAdmin","superAdmin","groupsOfMembership","adminGroup","homeGroup","filter","groupOfMembership","constructSignInRoute","constructSignUpRoute","invitedUserID","constructContactUsRoute","constructDashboardRoute","constructProjectDetailRoute","projectID","constructCreateProjectRoute","params","undefined","edit","admin","issuer","constructGroupDetailRoute","viewedGroupUserName","constructViewResourceDetailRoute","resourceName","GROUP_PATH","FRONT","SIGN_IN","ADMIN","ADMIN_INVEST_WEST_SUPER","DASHBOARD_ISSUER","DASHBOARD_ISSUER_INVEST_WEST_SUPER","DASHBOARD_INVESTOR","DASHBOARD_INVESTOR_INVEST_WEST_SUPER","USER_PROFILE","USER_PROFILE_INVEST_WEST_SUPER","EDIT_USER_PROFILE","EDIT_USER_PROFILE_INVEST_WEST_SUPER","PLEDGE","PLEDGE_INVEST_WEST_SUPER","CREATE_OFFER","EDIT_OFFER","CREATE_OFFER_INVEST_WEST_SUPER","EDIT_OFFER_INVEST_WEST_SUPER","PROJECT_DETAILS","PROJECT_DETAILS_INVEST_WEST_SUPER","VIEW_GROUP_DETAILS","VIEW_GROUP_DETAILS_INVEST_WEST_SUPER","CONTACT_US","CONTACT_US_INVEST_WEST_SUPER","HELP","HELP_INVEST_WEST_SUPER","TERMS_OF_USE","PRIVACY_POLICY","CREATE_PITCH_TERMS_AND_CONDITIONS","ApiRoutes","retrieveSystemAttributesRoute","systemAttributesBaseRoute","updateSystemAttributesRoute","requestResetPasswordRoute","authBaseRoute","verifyAuthRoute","sendEmailRoute","emailBaseRoute","createUser","usersBaseRoute","retrieveUser","retrieveInvitedUser","updateUser","listGroupsOfMembership","exportUsersCsvRoute","listGroups","groupsBaseRoute","retrieveGroup","addMembersToGroup","listGroupMembers","listProjectsRoute","projectsBaseRoute","sendProjectBackToIssuerRoute","exportProjectsToCsvRoute","addGroupAdminRoute","groupAdminsBaseRoute","listAccessRequestsRoute","accessRequestsBaseRoute","removeAccessRequestRoute","createAccessRequestRoute","retrieveInvestorSelfCertificationRoute","investorSelfCertificationBaseRoute","uploadSingleFileRoute","fileBaseRoute","testRoute","AuthenticationStatus","Api","baseUrl","endPoint","queryParameters","fullUrl","buildQueryParameters","encodeURI","requestType","optionalParams","formDataRequest","Error","buildUrl","idToken","getIdToken","bodyData","requestBody","buildFormData","config","method","timeout","headers","_boundary","axios","request","parseResponse","parseError","console","log","statusCode","isRequestSuccessful","result","key","endsWith","toString","formData","FormData","append","httpError","detail","trackActivity","userID","activityType","interactedObjectLocation","interactedObjectID","activitySummary","action","time","FETCH_ACTIVITIES_BY_USER","fetchActivitiesBy","shouldLoadUserProfile","fetchBy","activitiesRef","orderByChild","equalTo","activities","once","snapshots","exists","val","numChildren","all","activity","getUserBasedOnID","userProfile","ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT","sendNotification","title","db","loadGroupAdminsBasedOnGroupID","groupID","groupAdmins","doesUserExist","email","userExists","userIsAnAdmin","loadGroupsUserIsIn","groupsUserIsIn","invitedUser","anid","invitedBy","userInGroupStatus","groupUserIsIn","angelNetwork","isInvestWest","groupDetails","loadAngelNetworkBasedOnANID","loadAngelNetworkBasedOnGroupUserName","loadAngelNetworks","angelNetworks","startAt","displayNameLower","loadAngelNetworksInvitedAUser","angelNetworksInvitedUser","Invitor","Invitee","angelNetworkInvitedUser","displayName","getUser","uid","createForum","forumObj","forumID","LOAD_LIVE_FORUMS","LOAD_DELETED_FORUMS","loadForums","forums","forum","deleted","author","editForum","editedForum","update","deleteForum","createThread","threadObj","threadID","editThread","editedThread","deleteThread","LOAD_LIVE_THREADS","loadThreads","forumSelected","threads","thread","createThreadReply","replyObj","replyID","editThreadReply","editedThreadReply","deleteThreadReply","threadReplyID","loadThreadReplies","threadSelected","replies","reply","loadClubAttributes","loadInvitedUsers","invitedUsers","officialUserID","officialUser","loadRequestsToJoin","requestsRef","requests","groupToJoin","getInvitedUserBasedOnIDOrEmail","idOrEmail","loadAParticularProject","loadPledges","LOAD_PLEDGES_ORDER_BY_PROJECT","toggleProjectLivelinessTemporarily","shouldSendNotificationForIssuer","projectBeforeUpdating","projectName","ROUTES","before","after","loadVotes","LOAD_VOTES_ORDER_BY_PROJECT","votes","listOfInvestorsToBeNotified","vote","investorID","notifications","notification","makeProjectGoLiveDecision","decisionObj","projectBeforeDecision","decision","visibility","projectVisibilitySetting","emailType","emailInfo","makeProjectGoToPledgePhaseDecision","makeProjectPledgeGoLiveDecision","PrimaryOffer","loadComments","comments","comment","commentedBy","pledgesRef","investor","votesRef","voted","loadNotifications","deleteAllNotifications","remove","loadMarketingPreferences","marketingPreferencesRef","marketingPreferences","marketingPreference","updateMarketingPreferencesSetting","field","accepted","settings","updateGroupPropertiesSetting","bringPitchBackToLive","newPitchExpiryDate","expiredDate","CHANGE_PASSWORD_TEXT_CHANGED","RESET_CHANGE_PASSWORD","RE_AUTHENTICATING_USER","ERROR_CHANGING_PASSWORD","changePassword","passwords","newPassword","newPasswordVerified","PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED","PASSWORD_CHANGE_NOT_STRONG_ENOUGH","signInWithEmailAndPassword","currentPassword","credential","updatePassword","PASSWORD_CHANGE_SUCCESS","PASSWORD_CHANGE_FAIL","PASSWORD_CHANGE_RE_AUTH_FAILED","ChangePasswordPage","passwordChangeResponseCode","handleTextChanged","reset","requestChangePassword","responseCode","onCloseMessage","PasswordUpdate","renderMessage","changing_password_text_background","changePasswordActions","realtimeDBUtils","errorCode","SET_GROUP_USER_NAME_FROM_PARAMS","setGroupUserNameFromParams","manageGroupFromParams","SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING","setExpectedAndCurrentPathsForChecking","expectedPath","currentPath","LOADING_ANGEL_NETWORK","ANGEL_NETWORK_LOADED","loadAngelNetwork","groupPropertiesLoaded","angelNetworkBeingLoaded","firebaseUser","shouldLoadOtherData","angelNetworkListener","ANGEL_NETWORK_PROPERTIES_CHANGED","HeaderWithoutDesc","authStatus","span","order","AUTH_SUCCESS","to","navigation_text","widht","logo_field","alt","require","default","href","manageGroupFromParamsActions","Signin","setState","resetPassword","handleSignin","preventDefault","resetEmailSent","signin","openResetPasswordDialog","resetPasswordDialogOpen","handleCloseResetPasswordDialog","resetEmail","resetChecking","resetError","handleSendResetEmail","sendPasswordResetEmail","handleClickShowPassword","showPassword","renderAuthStatus","authenticating","reset_email_sent","errorMsg","auth_error","firebaseAuth","resetAuthStatus","path","prevProps","prevState","history","pathname","search","overflow","offset","Paper","elevation","square","onSubmit","paragraph","FormControl","InputProps","endAdornment","InputAdornment","edge","aria-label","onTextChanged","onSendEmailClick","ResetPasswordDialog","userLoaded","authActions","handleClose","renderReset","reset_email_error_text","reset_password_actions_layout","no_margin","hover","INITIALIZE_AUTH_STATE","RESET_AUTH_STATUS","SIGNING_IN","AUTHENTICATING","FINISHED_AUTHENTICATING","logOutWithIndirectDispatch","TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP","USER_PROFILE_LOADED","AUTH_LOADING_GROUPS_USER_IS_IN","AUTH_GROUPS_USER_IS_IN_LOADED","signOut","LOG_OUT","logout","userListener","groupsUserIsInListener","CURRENT_USER_PROFILE_HAS_CHANGED","GROUPS_USER_IS_IN_HAVE_CHANGED","TOGGLE_SIDEBAR","toggleSidebar","checkSidebarDocked","isLaptop","isDesktop","sidebarDocked","dashboardSidebar","sidebarOpen","LOADING_FORUMS","FINISHED_LOADING_FORUMS","ERROR_LOADING_FORUMS","GO_BACK_TO_FORUMS_MAIN","TOGGLE_CREATE_NEW_FORUM","toggleCreateNewForum","forumEdited","ERROR_CREATING_NEW_FORUM","FORUMS_INPUT_CHANGED","handleForumsInputChanged","targetName","targetValue","manageForums","LOADING_THREADS_IN_A_FORUM","FINISHED_LOADING_THREADS_IN_A_FORUM","GO_BACK_TO_FORUMS_LIST","TOGGLE_CREATE_NEW_THREAD","toggleCreateNewThread","threadEdited","ERROR_CREATING_NEW_THREAD","LOADING_REPLIES_IN_A_THREAD","FINISHED_LOADING_REPLIES_IN_A_THREAD","GO_BACK_TO_THREADS_LIST","TOGGLE_THREAD_REPLY","toggleThreadReply","threadReplyEdited","ERROR_CREATING_THREAD_REPLY","MANAGE_FORUMS_TABLE_PAGE_CHANGED","changePage","table","newPage","MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED","changeRowsPerPage","parseInt","FORUMS_QUILL_CHANGED","THREAD_CONTENT_QUILL","THREAD_REPLY_CONTENT_QUILL","handleQuillChanged","getText","quill","getContents","forumsListener","forumThreadsListener","forumThreadRepliesListener","FORUMS_CHANGED","stopListeningForForumsChanged","off","THREADS_CHANGED","stopListeningForThreadsChanged","THREAD_REPLIES_CHANGED","stopListeningForThreadRepliesChanged","AuthenticationEvents","initialState","NotInitialized","authIsNotInitialized","isAuthenticating","Authenticating","successfullyAuthenticated","Authenticated","hasAuthenticationError","authenticationReducer","StartAuthenticating","CompleteAuthentication","completeAuthenticationAction","selfCertification","SignOut","Unauthenticated","UpdateUserChanges","updateUserChangesAction","updatedUser","InvestorSelfCertificationRepository","UserRepository","ManageGroupUrlEvents","signIn","authenticationCompleteAction","currentFirebaseUser","setPersistence","Firebase","Auth","Persistence","LOCAL","retrieveUserResponse","validSuperAdminSignIn","routePath","getInvestorSelfCertification","selfCertificationResponse","listGroupsOfMembershipResponse","HOME_TAB","PROFILE_TAB","MY_OFFERS_TAB","SETTINGS_TAB","CHANGE_PASSWORD_TAB","RESOURCES_TAB","EXPLORE_GROUPS_TAB","EXPLORE_OFFERS_TAB","MY_ACTIVITIES_TAB","GROUP_ACTIVITIES_TAB","SidebarContent","onLogoutClick","dashboardProps","signOutNew","onForumsTabClick","goBackToForumsMain","List","ListItem","button","ListItemIcon","ListItemText","School","dashboardSidebarActions","LetterAvatar","getBackgroundColor","firstName","lastName","textVariant","Avatar","toUpperCase","JSON_COMPARE_CHANGES_DIALOG_SET_DATA","JSON_COMPARE_CHANGES_DIALOG_RESET_DATA","JSONCompareChangesDialog","dialogOpen","jsonBefore","jsonAfter","resetData","theme","collapseStringsAfterLength","enableClipboard","copy","navigator","clipboard","writeText","manageJSONCompareChangesDialog","ACTIVITIES_TABLE_SET_TABLE_USER","setTableUser","newUser","prevTableUser","manageActivitiesTable","tableUser","ACTIVITIES_TABLE_LOADING_ACTIVITIES","ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES","ACTIVITIES_TABLE_PAGE_CHANGED","ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED","activitiesListener","ACTIVITIES_IN_TABLE_CHANGED","stopListeningForActivitiesChanged","ActivitiesTable","loadData","loadingActivities","activitiesLoaded","loadActivities","addListener","startListeningForActivitiesChanged","renderTableRows","page","rowsPerPage","jsonCompareDialog_setData","TableRow","activity1","activity2","overflowX","Table","TableHead","TableBody","TableFooter","TablePagination","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","SelectProps","native","onChangePage","onChangeRowsPerPage","allActivities","groupAdmin","activitiesTableActions","existingActivity","adminIndex","manageJSONCompareChangesActions","ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED","REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED","TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED","BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED","SEARCHING_REGISTERED_OFFICE_ADDRESSES","DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES","SEARCHING_TRADING_ADDRESSES","DONE_SEARCHING_TRADING_ADDRESSES","SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS","SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS","TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE","CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION","TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR","putBusinessProfileToFirebaseDB","businessProfile","registeredOffice","tradingAddress","SET_ORIGINAL_USER_AND_EDITED_USER","setOriginalUserAndEditedUser","previouslySetUser","editUser","originalUser","allowEditing","userHomeGroup","requestedToJoin","EDIT_PERSONAL_INFORMATION","EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION","EDIT_TRADING_ADDRESS_BUSINESS_PROFILE","EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE","ADDING_NEW_DIRECTOR","TOGGLE_ADD_NEW_DIRECTOR","ADD_NEW_DIRECTOR_TEMPORARILY","DELETE_DIRECTOR_TEMPORARILY","RESET_PERSONAL_INFORMATION","RESET_BUSINESS_PROFILE","COMMIT_PERSONAL_INFORMATION_CHANGES","COMMIT_BUSINESS_PROFILE_CHANGES","originalUserListener","EDIT_USER_ORIGINAL_USER_CHANGED","stopOriginalUserChangedListener","FILE_UPLOAD_CHANGED","FILE_UPLOAD_ERROR","CLOSE_FILE_UPLOAD_ERROR_SNACKBAR","RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED","DELETE_UPLOADED_LEGAL_DOCUMENT","DELETE_UPLOADED_PITCH_COVER","DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","DELETE_TO_BE_UPLOADED_FILE","DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_COVER","DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_A_LEGAL_DOCUMENT","FINISHED_UPLOADING_A_PITCH_COVER","FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT","FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_ALL_FILES","uploadIndividualFile","totalFiles","fileRef","storageFileName","extension","fileDownloadURL","percentDone","legalDocument","fileName","readableSize","sizeReadable","downloadURL","fileDBRef","formattedCover","fileType","fileExtension","formattedPresentationDocument","formattedSupportingDocument","putFilesReferencesToDatabase","legalDocumentsUserID","legalDocuments","existingLegalDocuments","filesDBReferences","uploadFiles","filesReferencesToBeUploaded","LEGAL_DOCUMENTS_SET_USER","LOADING_LEGAL_DOCUMENTS","FINISHED_LOADING_LEGAL_DOCUMENTS","legalDocumentsListener","LEGAL_DOCUMENTS_CHANGED","INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER","setUser","manageInvestorSelfCertificationAgreement","LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT","FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT","loadInvestorSelfCertificationAgreement","INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED","UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT","INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED","GroupRepository","FetchProjectsOrderByOptions","FetchProjectsPhaseOptions","groupNameFromUrl","groupLoaded","loadingGroup","groupRouteTheme","defaultTheme","validGroupUrl","isValidatingGroupUrl","routeContainsGroupName","successfullyValidatedGroupUrl","getGroupRouteTheme","manageGroupUrlReducer","SetGroupUrl","setGroupUrlAction","ValidatingGroupUrl","FinishedValidatingGroupUrl","finishedValidatingGroupUrlAction","responsiveFontSizes","createMuiTheme","palette","primary","main","secondary","text","blueGrey","typography","fontFamily","OffersTableEvents","OfferRepository","options","link","createElement","download","setAttribute","body","appendChild","click","removeChild","ExploreOffersEvents","fetchOffers","OffersTableLocalState","tableUserGroupsOfMembership","visibilityFilter","groupFilter","phaseFilter","fetchOffersOptions","phase","completeAction","CompleteFetchingOffers","offerInstances","shouldFetchOffers","orderBy","Issuer","Investor","Group","FetchingOffers","filterOffersByName","nameFilter","FilterOffersByName","isFilteringByName","offerInstance","projectDetail","offerInstancesFilteredByName","fetchingOffers","offersFetched","filteringOffersByName","currentPage","exportingCsv","isFetchingOffers","successfullyFetchedOffers","hasOffersForCurrentFilters","isFilteringOffersByName","hasErrorFetchingOffers","hasErrorExportingCsv","errorExportingCsv","hasGroupsSelect","groupsSelect","offersTableReducer","SetTableUser","setTableUserAction","completeFetchingOffersAction","FilterChanged","filterChangedAction","filterOffersByNameAction","CancelFilteringOffersByName","ChangePage","changePageAction","ChangeRowsPerPage","changeRowsPerPageAction","ExportingCsv","CompleteExportingCsv","completeExportingCsvAction","CustomLink","link_style","childComponent","activeColor","activeUnderline","isDraftProjectNotSubmitted","isProjectCreatedByGroupAdmin","createdByGroupAdmin","isImagePitchCover","pitchCover","isProjectPublic","isProjectRestricted","isProjectPrivate","shouldHideProjectInformationFromUser","isProjectOwner","toRGBWithOpacity","rgbColor","colorString","get","rgb","hex","OffersTable","directTableUser","filterChanged","cancelFilteringOffersByName","exportCsv","tableAdmin","TableContainer","Box","ImportExportOutlined","CreateOutlined","display","alignItems","bgcolor","grey","InputBase","startAdornment","justifyContent","Refresh","paddingY","Select","input","OutlinedInput","MenuItem","LivePitch","TemporarilyClosed","ExpiredPitch","flexDirection","fundRequired","Number","toLocaleString","postedDate","ManageSystemAttributesState","currentTableUser","shouldSetTableUser","groupsOfMembershipResponse","isTableAdminUser","fetchGroups","allGroupsResponse","Footer","paddingX","borderTop","borderColor","minHeightScreen","bottom","marginY","Profile","legalDocuments_userID","userLegalDocumentsLoaded","userLegalDocumentsBeingLoaded","investorSelfCertificationAgreement_userID","investorSelfCertificationAgreementLoaded","investorSelfCertificationAgreementBeingLoaded","legalDocuments_setUserID","getUserLegalDocuments","investorSelfCertificationAgreement_setUser","handleEditUser","editUserLocally","property","handleCreateBusinessProfileTextChanged","fieldType","toggleTradingAddressSameAsRegisteredOffice","checked","handleFilesChanged","deleteToBeUploadedFile","deleteUploadedFile","renderSelfCertificationAgreement","investorSelfCertificationAgreement","investorSelfCertificationAgreementCheckBox1Checked","investorSelfCertificationAgreementCheckBox2Checked","investorSelfCertificationAgreementCheckBox3Checked","investorSelfCertificationAgreementStatementType","investorSelfCertificationAgreement_handleCheckBoxChanged","investorSelfCertificationAgreement_handleStatementTypeChanged","setInvestorSelfCertificationAgreement","agreedDate","maxHeight","overflowY","FormGroup","row","FormControlLabel","control","Checkbox","labelPlacement","renderBusinessProfile","userEdited","createBusinessProfile","addNewDirector","newDirectorText","searchAddress","toggleEnterAddressManually","resetCreatingBusinessProfile","handleRecommendedAddressSelected","toggleExpandBusinessProfileFillingForInvestor","uploadBusinessProfile","logoItem","videoItem","FormLabel","companyName","editUserActions","registrationNo","address1","address2","address3","townCity","sector","Sectors","directors","director","ListItemSecondaryAction","deleteDirectorTemporarily","toggleAddNewDirector","addNewDirectorTemporarily","companyWebsite","cancelEditingUser","commitUserProfileChanges","expandBusinessProfileFilling","required","createBusinessProfileActions","FormHelperText","registeredOfficeSearchPostcode","disableRipple","registeredOfficeEnterAddressManually","registeredOfficeRecommendedAddresses","address_list","enter_address_manually","tradingAddressSameAsRegisteredOffice","tradingAddressSearchPostcode","tradingAddressEnterAddressManually","tradingAddressRecommendedAddresses","upload_files_area_style","logoToBeUploaded","OverlayTrigger","trigger","placement","flip","overlay","Tooltip","videoToBeUploaded","shouldUploadButtonBeDisabled","startListeningForLegalDocumentsChanged","stopListeningForLegalDocumentsChanged","linkedin","checkBox1Ticked","checkBox2Ticked","checkBox3Ticked","statementType","userLegalDocuments","legalDocumentsLoaded","legalDocumentsBeingLoaded","toBeUploadedLegalDocuments","filesToBeUploaded","fileUploadErrorMessage","fileUploadErrorSnackbarOpen","fieldName","fieldValue","selectedAddress","Object","assign","isEditingExistingBusinessProfile","userRef","investorSelfCertificationAgreementsActions","agreementObject","agreement","legalDocumentsActions","updatedLegalDocuments","doc","reader","FileReader","addEventListener","fileRead","preview","LegalDocuments","readAsDataURL","uploadFilesActions","handleFileError","errorMessage","charAt","closeFileUploadSnackbarError","resetErrorMessageWhenFileUploadSnackbarExited","updatedFilesToBeUploaded","pitchPresentationDocument","pitchSupportingDocuments","updateLegalDocuments","waitingForUploadingReferences","TOGGLE_NOTIFICATIONS","toggleNotifications","notificationsAnchorEl","manageNotifications","notificationBellRef","NOTIFICATIONBELL_REF","notificationRefUpdated","LOADING_NOTIFICATIONS","FINISHED_LOADING_NOTIFICATIONS","notificationsListener","NOTIFICATIONS_LIST_CHANGED","NotificationsBox","wrapperRef","createRef","handleClickOutside","bind","loadingNotifications","notificationsLoaded","startListeningForNotificationsChanged","stopListeningForNotificationsChanged","removeEventListener","current","contains","deleteANotification","Popper","Boolean","anchorEl","disablePortal","transition","modifiers","enabled","preventOverflow","boundariesElement","TransitionProps","Fade","clear_all_text","minHeight","notifications_placeholder_icon","notification1","notification2","divider","notification_item","notification_item_icon","notificationsActions","existingNotification","notificationIndex","ExploreGroupsEvents","ExploreOffersLocalState","searchFilter","sectorFilter","maxOffersPerPage","successfullyFetchedOffers2","isSearchFilterActive","exploreOffersReducer","ClearSearchFilter","PaginationChanged","paginationChangedAction","getGroupLogo","CoverMaxHeight","OfferItem","cover","getPitchCover","light","right","noWrap","description","hasSEIS","hasEIS","RiskWarning","systemAttributes","riskWarningFooter","splits","join","urlText","whiteSpace","ExploreOffers","Phase","clearSearchFilter","paginationChanged","onSearchEnter","paginationPages","paginationIndices","startIndex","endIndex","calculatePaginationIndices","Pagination","Visibility","Sector","AccessRequestRepository","requestID","ClientEmailTypes","ExploreGroupsLocalState","accessRequestsInstances","FetchingGroups","CompleteFetchingGroups","groupsResponse","fetchAccessRequests","accessRequestInstancesResponse","accessRequestInstances","filterGroupsByGroupFilter","groupsFiltered","satisfiedFilter","accessRequestInstance","FilterGroupsByGroupFilter","maxGroupsPerPage","fetchingGroups","groupsFetched","filteringGroupsByName","isFetchingGroups","successfullyFetchedGroups","isFilteringGroupsByName","hasGroupsForCurrentFilters","isSendingAccessRequest","sendingAccessRequestToGroup","isRemovingAccessRequest","removingAccessRequestFromGroup","exploreGroupsReducer","completeFetchingGroupsAction","FilterGroupsByName","CancelFilterGroupsByName","filterGroupsByGroupFilterAction","SendingAccessRequest","sendingAccessRequestAction","errorSendingAccessRequest","CompleteSendingAccessRequest","completeSendingAccessRequestAction","updatedAccessRequestInstances","RemovingAccessRequest","removingAccessRequestAction","errorRemovingAccessRequest","CompleteRemovingAccessRequest","completeRemovingAccessRequestAction","GroupItem","sendAccessRequest","removeAccessRequest","groupMember","find","hasRequestedToAccessGroup","Card","CardActionArea","CheckCircle","CardActions","sendingAction","createAccessRequest","currentAccessRequestInstances","removingAction","accessRequestIndex","accessRequest","ExploreGroups","filterGroupsByName","cancelFilteringGroupsByName","xl","FeedbackSnackbarEvents","EmailRepository","FeedbackSnackbarTypes","openFeedbackSnackbar","Open","snackbarType","ResourcesEvents","Success","feedbackSnackbarReducerNew","openFeedbackSnackbarAction","Close","ManageSectorsEvents","toggleContactResourceDialog","DetailedPageToggleContactDialog","detailedPageContactDialogOpen","detailedPageSendingContactEmail","isDetailedPageSendingContactEmail","resourcesReducer","DetailedPageSendingContactEmail","detailedPageErrorSendingContactEmail","DetailedPageCompleteSendingContactEmail","detailedPageCompleteSendingContactEmailAction","ContactResourceDialog","resourceEmail","ResourcesLocalState","toggle","sendContactEmail","receiver","sender","userName","userCompanyName","sendEmail","ContactResource","FeedbackSnackbarNew","FeedbackSnackbarLocalState","close","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","TransitionComponent","transitionDuration","enter","exit","Alert","severity","keltieLogo","sullivanFountainImg","richardLawrenceImg","keltieDocuments","keltieVideos","Keltie","AttachFile","clone","ResourceItem","resource","founderCatalystLogo","justynWaterworthImg","samSimpsonImg","charlesFrankImg","founderCatalystResources","FounderCatalyst","grantFundingLogo","grantFundingResources","img","GrantFunding","MerixSolution","MerixSolution3","MerixStudioResources","MerixStudio","resources","Resources","IssuerDashboard","setDataForComponents","editUserProfile_userEdited","editUserProfile_setOriginalUserAndEditedUser","renderPageContent","queryString","location","tab","renderPageTitle","notificationBell","sidebar","shadow","docked","onSetOpen","transitions","content","Badge","badgeContent","invisible","InvestorDashboard","clubAttributesLoaded","isValidEmailAddress","serverURL","requestConfig","post","TOGGLE_INVITATION_DIALOG","toggleInvitationDialog","INVITATION_DIALOG_INPUT_CHANGED","INVITATION_DIALOG_SEND_BUTTON_CLICKED","INVITATION_DIALOG_SEND_RESULT_CHANGED","SEND_INVITATION_PROCESSING","SEND_INVITATION_INVITED_BEFORE","SEND_INVITATION_USER_CANNOT_BE_INVITED","SEND_INVITATION_ERROR_HAPPENED","SEND_INVITATION_SUCCESS","InvitationDialog","renderRespondCode","sendResult","sendStatusExtraInfo","res","invitationDialogOpen","userType","sendButtonClick","handleInputChanged","sendInvitation","disableTypography","RadioGroup","Radio","manageInvitationDialog","invitationDialogActions","currentGroupAdmin","invitedBefore","userIsAnIssuerOfAnotherGroup","extraInfo","invitedID","invitedDate","emailUtils","groupName","groupLogo","groupWebsite","website","websiteURL","receiverName","signupURL","SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED","SUPER_ADMIN_SETTINGS_INPUT_CHANGED","SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED","SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","SystemAttributesRepository","ManageSystemAttributesEvents","setSectors","sectors","SetSectors","toggleAddNewSector","ToggleAddNewSector","DocumentsDownloadEvents","systemAttributesLoaded","loadingSystemAttributes","isLoadingSystemAttributes","manageSystemAttributesReducer","LoadingSystemAttributes","FinishedLoadingSystemAttributes","finishedAction","addingNewSector","newSector","savingSectors","isSavingSectorsChanges","manageSectorsReducer","setSectorsAction","AddNewSectorTextChanged","addNewSectorTextChangedAction","SavingSectorsChanges","errorSavingSectors","CompletedSavingSectorsChanges","completedSavingSectorsChanges","ManageSectors","ManageSectorsLocalState","addNewSector","deleteSector","saveSectorsChanges","cancelSectorsChanges","eSector","updateSystemAttributes","SuperAdminSettings","handleExpandPledgeFAQPanel","FAQ","isExpanded","handleQuillEditorChanged","delta","source","initializeClubAttributesEdited","clubAttributesEdited","addNewPledgeFAQ","addedPledgeQuestion","addedPledgeAnswer","expandedPledgeFAQ","editExpandedPledgeFAQ","editedPledgeQuestion","editedPledgeAnswer","toggleAddNewPledgeFAQ","submitNewPledgeFAQ","toggleEditExpandedPledgeFAQ","saveEditedPledgeFAQ","deleteExistingPledgeFAQ","saveEditedQuill","supportEmail","multiline","rowsMax","ExpansionPanel","frequently_asked_question_box","expanded","ExpansionPanelSummary","expandIcon","question","ExpansionPanelDetails","answer","modules","privacyPolicy","termsOfUse","rows","riskWarning","createPitchTermsAndConditions","superAdminSettings","isPropertyOfClubAttributes","superAdminSettingsActions","faq","editedFAQ","toolbar","GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED","GROUP_ADMIN_SETTINGS_CHANGED","GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR","GroupAdminSettings","initializeGroupAttributesEdited","groupAttributesEdited","groupDescription","handlePitchExpiryDateChanged","handleSavePitchExpiryDate","handleCancelEditingPitchExpiryDate","saveGroupDetails","cancelEditingGroupDetails","saveColor","cancelEditingColor","helperText","autoOk","inputVariant","format","minDate","defaultPitchExpiryDate","InputAdornmentProps","projectVisibility","groupAdminSettings","isPropertyOfGroupAttributes","updateValue","shouldUpdateDatabase","groupAdminSettingsActions","NaN","groupSettings","InfoOverlay","LOADING_INVITED_USERS","FINISHED_LOADING_INVITED_USERS","INVITED_USERS_TOGGLE_SEARCH_MODE","INVITED_USERS_SEARCH_VARIABLE_CHANGED","getUpdatedInvitedUsers","sourceInvitedUsers","searchText","filterRegistrationStatus","filterUserType","filterMembers","filterGroup","currentGroupProperties","matchedInvitedUsers","satisfiedRegistrationStatusFilter","satisfiedUserTypeFilter","satisfiedGroupMembersFilter","satisfiedGroupFilter","FILTER_REGISTRATION_STATUS_ALL","FILTER_GROUP_MEMBERS_ALL","FILTER_HOME_MEMBERS","FILTER_PLATFORM_MEMBERS","INVITED_USERS_CHANGE_PAGE","INVITED_USERS_CHANGE_ROWS_PER_PAGE","INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED","INVITED_USERS_REQUESTING_CSV_STATE_CHANGED","invitedUsersListener","INVITED_USERS_CHANGED","InvitedUsers","invitedUsersLoaded","startListeningForInvitedUsersChanged","renderInvitedUsersRows","invitedUsersPage","invitedUsersRowsPerPage","invitedUsersInSearchMode","resendInvite","renderedInvitedUsers","matchedUsersInvitedByTheGroup","user1","user2","matchedUsersRequestedToJoin","requestedToJoinDate","renderInvitedUserRegistrationStatus","joinedDate","msgObj","invitedUsersBeingLoaded","invitedUserSearchText","systemGroups","groupsLoaded","requestingCsv","addingMembersFromOneGroupToAnotherGroup","toggleSearchMode","exportToCsv","addMembersFromOneGroupToAnotherGroup","InputLabel","labelWidth","basis","renderInvitedUsersTable","handleChangeTablePage","handleChangeTableRowsPerPage","manageSystemGroups","prevMatchedInvitedUsers","newSearchText","newRegistrationStatusFilter","newUserTypeFilter","newGroupFilter","newMembersFilter","invitedUsersActions","shouldAddInvitedUser","existingInvitedUser","shouldChangeInvitedUser","invitedUserIndex","fromGroup","toGroup","addUserType","AddAngelNetworkDialog","uploadMode","uploadProgress","addAngelNetworkDialogOpen","angelNetworkName","angelNetworkUsername","loadingPlainLogo","imgUploadError","loadingLogoWithText","imgUploadErrorSnackbarOpen","addButtonClicked","toggleAddAngelNetworkDialog","addNewAngelNetwork","closeErrorSnackbar","resetImageFileErrorMessageWhenSnackbarExited","onExited","SnackbarContent","manageAddAngelNetworkDialog","addResult","addAngelNetworkDialogActions","TOGGLE_ADD_ANGEL_NETWORK_DIALOG","ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED","handleAddAngelNetworkInputChanged","ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED","ADD_ANGEL_NETWORK_RESULT_CHANGED","uploadLogo","uploadedPlainLogo","uploadedLogoWithText","newGroupProperties","dateAdded","makeInvestorsContactDetailsVisibleToIssuers","adder","newGroupAdminEmail","ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE","ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED","ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR","ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR","closeImageFileErrorSnackbar","ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED","LOADING_ANGEL_NETWORKS","FINISHED_LOADING_ANGEL_NETWORKS","ANGEL_NETWORKS_TABLE_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_INPUT_CHANGED","TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE","angelNetworksListener","ANGEL_NETWORKS_IN_TABLE_CHANGED","AngelNetworks","inComponentDidMount","loadingAngelNetworks","angelNetworksLoaded","startListeningForAngelNetworksChanged","renderAngelNetworksTable","inSearchMode","handleAngelNetworksTableInputChanged","angelNetwork1","angelNetwork2","renderAngelNetworkRows","matchedAngelNetworks","renderedAngelNetworks","stopListeningForAngelNetworksChanged","manageAngelNetworks","angelNetworksActions","existingAN","angelNetworkIndex","MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE","MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED","joinRequestsListener","MANAGE_JOIN_REQUESTS_CHANGED","stopListeningForJoinRequestsChanged","JoinRequests","loadingJoinRequests","joinRequestsLoaded","loadJoinRequests","attachListener","joinRequests","startListeningForJoinRequestsChanged","renderJoinRequestsRows","matchedJoinRequests","acceptJoinRequest","rejectJoinRequest","renderedJoinRequests","joinRequest","requestedDate","handleJoinRequestsTableInputChanged","joinRequest1","joinRequest2","manageJoinRequests","manageJoinRequestsActions","pushKey","existingJoinRequest","GROUP_ADMINS_TABLE_SET_GROUP","GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_PAGE_CHANGED","GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE","GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG","GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED","groupAdminsListener","GROUP_ADMINS_TABLE_CHANGED","stopListeningForGroupAdminsChanged","ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL","ADD_NEW_GROUP_ADMIN_STATUS_CHECKING","ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED","GroupAdminsTable","tableGroup","loadingGroupAdmins","groupAdminsLoaded","loadGroupAdmins","addListeners","startListeningForGroupAdminsChanged","getRenderedGroupAdmins","superGroupAdmin","searchedGroupAdmins","groupAdmin1","groupAdmin2","addNewGroupAdminDialogOpen","addNewGroupAdminStatus","handleAddNewGroupAdmin","toggleAddNewGroupAdminDialog","fli","manageGroupAdminsTable","groupAdminsTableActions","existingGroupAdmin","newGroupAdmin","AddGroupAdminDialog","renderStatusMessage","tex","AdminDashboard","activitiesTable_setUser","groupAdminsTable_setGroup","projectsAwaitingDecision","Accordion","card_style","AccordionSummary","AccordionDetails","card_details_expansion","currentUserLoaded","onMouseDown","e","AddAngelNetWorkDialog","newGroup","prevTableGroup","onDeleteDocument","documents","preview_icon","file_name","file_size","DocumentsDownload","onDocumentClick","deleteEnable","rel","SELECT_PROJECT_VISIBILITY_SET_PROJECT","setProject","HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED","handleProjectVisibilityChanged","SelectPitchVisibility","manageSelectProjectVisibility","selectProjectVisibilityActions","initState","recoveredFromPreviousState","projectBeforeEdited","projectEdited","projectEditedLoaded","requestToLoadData","projectIDToBeLoadedAfterSavingFirstTime","saveProgress","progressBeingSaved","draftBeingDeleted","createProject","activeStep","groupIssuerCreateOfferFor","pitchSector","pitchProjectName","pitchProjectDescription","pitchExpiryDate","pitchAmountRaisedToDate","pitchRaiseRequired","howFundIsBeingRaised","financialRound","pitchPostMoneyValuation","detailsAboutEarlierFundraisingRounds","pitchInvestorsCommitted","hasRaisedMoneyBefore","pitchCoverVideoURL","pitchCoverTypeSelected","pitchPresentationText","pitchPresentationPlainText","pitchPublishCheck","pitchNextStepButtonTarget","pitchPublishErrorMessageShowed","uploadFileProgress","uploadFileMode","openUploadingProgressDialog","acceptedTermsAndConditions","agreedToShareRaisePublicly","agreedToReceiveLocalInvestmentInfo","qibSpecialNews","CreatePitchPageMain","navigateToTheSamePageWithActiveStepSaved","selectProjectVisibility_setProject","projectEditedSaveModeRefListener","orderByKey","amountRaised","postMoneyValuation","investorsCommitted","presentationText","handleNextStepClick","coverItem","presentationDocument","uploadProject","handleSaveProgressClick","handleBackClick","handleSelectPitchCoverTypeClick","supportingDocuments","handleCreatePitchInputChanged","handlePitchEditorChanged","presentationItem","projectRef","projectStorageRef","uploadMultipleFiles","successful","updatedProject","edited","totalRaise","pitchSupportingDocumentsRealtimeDB","presentationPlainText","pitchPresentationDocumentRealtimeDB","pitchCoverRealtimeDB","acceptedTCsObj","projectObj","filesArray","pitchStorageRef","docRef","handleDeleteDocument","attachNextStepButtonRef","handlePopoverErrorMessageClose","handleDownloadDocumentDeleteClick","updatedProjectEdited","handleCloseErrorSnackbar","reason","errorSnackbarOpen","handleDateChanged","handleCheckboxChanged","handleDeleteDraftClick","deleteMultiplesOnStorage","selectedProjectVisibilitySetting","reload","deleteASingleFileOnStorage","previousState","createProjectState","onSelectPitchCoverTypeClick","onFilesChanged","onFilesError","onInputChanged","onPitchEditorChanged","onPopoverErrorMessageClose","onNextStepClick","onBackClick","onDownloadDocumentDeleteClick","onDateChanged","onCheckboxChanged","onSaveProgressClick","onDeleteDraftClick","CreateProject","renderPitchPublishErrorMessage","Stepper","alternativeLabel","Step","StepLabel","round","playsInline","file_drop_zone","Overlay","show","Popover","Fab","thickness","left","renderUploadFileMode","ProfilePageViewOnly","userToBeViewed","userToBeViewedLoaded","userToBeViewedInvitedLoaded","loadingUserToBeViewed","loadUserToBeViewedProfile","userToBeViewedID","userToBeViewedInvited","renderUserStatus","statusMessage","pictureItem","divider_style","SelectPledgeVisibility","TOGGLE_CREATE_PLEDGE_DIALOG","toggleCreatePledgeDialog","CREATE_PLEDGE_DIALOG_SET_PROJECT","CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED","CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED","CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED","CREATE_PLEDGE_STATUS_VALID","CREATE_PLEDGE_STATUS_MISSING_FIELDS","CREATE_PLEDGE_STATUS_INVALID_FUND","CREATE_PLEDGE_STATUS_INVALID_DATE","CreatePledgeDialog","renderCreatePledgeError","createStatus","extraNotes","createPledge","AppBar","Toolbar","manageCreatePledgeDialog","creatPledgeDialogActions","primaryOfferObj","shouldSendNotificationToIssuer","MANAGE_PLEDGES_TABLE_SET_PROJECT","MANAGE_PLEDGES_TABLE_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE","MANAGE_PLEDGES_TABLE_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_INPUT_CHANGED","pledgesListener","MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED","ContactPitchOwnerDialogEvents","shouldShowRiskWarningOnDownload","DocumentsDownloadLocalState","onAcceptRiskWarningClick","onCancelRiskWarningClick","riskWarningTextSplits","openRiskWarningDialog","shouldShowRiskWarning","OpenRiskWarningDialog","selectedDocument","CloseRiskWarningDialog","GroupDetailsEvents","toggleContactPitchOwnerDialog","projectOwnerEmail","ToggleContactDialog","contactDialogOpen","sendingContactEmail","isSendingContactEmail","contactPitchOwnerDialogReducer","toggleContactDialogAction","SendingContactEmail","errorSendingContactEmail","CompleteSendingContactEmail","completeSendingContactEmailFunction","ContactPitchOwnerDialog","ContactPitchOwnerDialogLocalState","toggleContactDialog","ContactPitchOwner","MAX_COVER_HEIGHT_IN_MOBILE_MODE","MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE","ProjectDetailsMain","dataLoaded","dataBeingLoaded","projectLoaded","mainBody","adminOfferStatesActiveStep","votesLoaded","currentUserPledgeIndex","investorPledge","investorPledgeLoaded","pledgesLoaded","projectIssuer","projectIssuerLoaded","loadDataWhenUIElementsChange","pledgesTable_setProject","commentsLoaded","votesListener","existingVote","voteIndex","updatedVotes","voteRemovedID","existingPledge","pledgeIndex","updatedPledges","currentPledge","pledgeRemovedID","returnedComments","updatedComments","repliedBy","commentsWithReplies","commentsListener","currenComment","currentComment","currentCommentText","existingComment","commentIndex","commentsRepliesListener","correspondingCommentIndex","commentID","existingReply","replyIndex","handleVotePitch","voteVal","currentVoteObj","getInvestorVote","newVoteObj","attachProjectChangedListener","projectListener","detachProjectChangedListener","handleDocumentClick","handleMakeProjectGoLiveDecision","handleMakeProjectGoToPledgePhaseDecision","handleMakeProjectPledgeGoLiveDecision","handleMainBodyTabChanged","handlePostACommentClick","commentDialogOpen","handleCloseCommentDialog","commentText","commentSubmitClick","changedPitchExpiryDate","handleSubmitCommentClick","commenterANID","commentedDate","handleCancelUpdateCurrentComment","handleSubmitUpdateCurrentComment","newComment","handleToggleReplyToComment","replyEdited","replyingToComment","replyText","handleSubmitCommentReply","updatedCommentReply","replyBeforeUpdating","replyAfterUpdating","repliedDate","commentReply","handleDeleteCommentReply","commentReplyID","handleAdminOfferStatesStepClick","toggleRejectFeedback","addingRejectFeedback","rejectFeedback","sendProjectBackToIssuer","sendingProjectBack","feedback","userBeingLoaded","pledgesTable_stopListeningForPledgesChanged","createPledgeDialog_toggleDialog","createPledgeDialog_setProject","onVote","onMakeProjectGoLiveDecision","onMakeProjectGoToPledgePhaseDecision","onMakeProjectPledgeGoLiveDecision","onTabChanged","onPostACommentClick","onCancelUpdateCurrentComment","onSubmitUpdateCurrentComment","onToggleReplyToComment","onSubmitCommentReply","onDeleteCommentReply","onAdminOfferStatesStepClick","onCommentTextChanged","onSubmitCommentClick","ProjectDetails","sortedComments","comment1","comment2","currentCommentIndex","reverse","reply1","reply2","shouldHideInformation","gray_text","pip","renderProjectStatus","border_box","renderInvestorSelfCertifyReminder","sticky_body_sections_bar","Tabs","indicatorColor","scrollButtons","Tab","main_body_section","nonLinear","orientation","completed","StepButton","StepContent","admin_state_control_box","dangerouslySetInnerHTML","__html","stt","shouldVoteDisabled","displayVote","yesVotes","noVotes","investorVoteIndex","CommentDialog","DialogContentText","CommentReplyInputArea","prevProject","managePledgesTable","pledgesTableActions","createPledgeDialogActions","faq_box","PrivacyPolicyPage","TermsOfUsePage","RiskWarningPage","CreatePitchTermsAndConditionsPage","subjects","subject","phone","submitClick","sending","hasSetData","ContactUs","onSubmitClick","senderName","senderPhone","dbRef","enquiryID","groupContacted","HelpPage","autoSwitchToAppropriateHelpTab","helpType","autoSwitching","handleTabChanged","expandedPanel","handleExpandPanel","panel","renderGroupAdminHelp","image_style","renderInvestorHelp","renderIssuerHelp","SignInEvents","loadingData","sendingAccessRequest","removingAccessRequest","successfullyLoadedData","members","offers","groupDetailsReducer","LoadingData","CompleteLoadingData","completeLoadingDataAction","GroupDetails","GroupDetailsLocalState","hasErrorLoadingData","hasAccessRequestsBeenSatisfied","getGroup","groupResponse","fetchGroupMembers","membersResponse","offersResponse","MarketingPreferencesPage","ProfilePageEditable","userToBeEditedID","editUserProfile_startOriginalUserChangedListener","userToBeEdited","userToBeEditedLoaded","loadingUserToBeEdited","activitiesTable_stopListeningForActivitiesChanged","editUserProfile_stopOriginalUserChangedListener","adminLoaded","projectsTable_user","projectsTable","userChanged","Front","flexGrow","ResetPasswordEvents","toggleResetPasswordDialog","ToggleResetPasswordDialog","signInEmail","signInPassword","errorSignInEmail","errorSignInPassword","showResetPasswordDialog","resetPasswordDialogEmail","resetPasswordDialogProcessing","resetPasswordDialogEmailSent","isProcessingResetPasswordRequest","signInReducer","ResetAllStates","TextChanged","textChangedAction","TogglePasswordVisibility","SignInEmailError","SignInPasswordError","ClearErrors","resetPasswordDialogError","ProcessingResetPasswordRequest","CompleteProcessingResetPasswordRequest","mapStateToProps","SignInLocalState","mapDispatchToProps","togglePasswordVisibility","onSignInClick","allowSignIn","onSendResetPasswordClick","SignInNew","ResetPasswordDialogComponent","Header","homUrl","dashboardUrl","signInUrl","navigatingFromSignInOrSignUpToDashboard","navigatingToSignIn","navigatingToError","GroupRoute","authListener","validateRouteAndAuthentication","updateRouteAndParams","loadSystemAttributes","validateGroupUrl","attachAuthListener","onAuthStateChanged","detachAuthListener","dashboardRoute","shouldRedirectToError","showHeader","getSystemAttributes","shouldValidateGroupUrl","validatingGroupUrlAction","finishedLoadingGroupUrlAction","retrievedGroup","SignUpEvents","verifyingCode","codeVerified","actionCode","confirmedPassword","resettingPassword","passwordReset","isResettingPassword","hasErrorResettingPassword","errorResettingPassword","resetPasswordReducer","VerifyingCode","CompleteVerifyingCode","completeVerifyingCodeAction","errorVerifyingCode","ConfirmingResetPassword","CompleteConfirmingResetPassword","completeConfirmingResetPasswordAction","ResetPassword","oobCode","verifyCode","ResetPasswordLocalState","confirmPasswordReset","hasErrorVerifyingCode","successfullyResettingPassword","verifyPasswordResetCode","ResourceDetail","resourceIndex","MediaQueryEvents","invitedUserLoaded","loadingInvitedUser","confirmedEmail","acceptMarketingPreferences","creatingAccount","hasErrorLoadingInvitedUser","errorLoadingInvitedUser","notFoundInvitedUser","isCreatingAccount","hasErrorCreatingAccount","errorCreatingAccount","signUpReducer","LoadingInvitedUser","CompleteLoadingInvitedUser","completeLoadingInvitedUserAction","InputFieldChanged","inputFieldChangedAction","CreatingAccount","successfullyCreatedAccount","CompleteCreatingAccount","completeCreatingAccountAction","hasRegistered","SignUpNew","invitedUserId","loadInvitedUser","SignUpLocalState","handleInputFieldChanged","createAccount","inputFieldType","inputFieldName","inputFieldValue","inputFieldChecked","toLocaleLowerCase","signUp","isPublicRegistration","AppRouter","exact","render","FeedbackSnackbar","resetStatesWhenSnackbarClosed","LOADING_CLUB_ATTRIBUTES","CLUB_ATTRIBUTES_LOADED","CLUB_ATTRIBUTES_CHANGED","screenSizeQueries","mobileScreen","matchMedia","tabletScreen","laptopScreen","desktopScreen","ManageSystemIdleTimeEvents","listener","MediaQueryChanged","LOADING_SYSTEM_GROUPS","FINISHED_LOADING_SYSTEM_GROUPS","groupsListener","SYSTEM_GROUPS_CHANGED","nowIdle","nowActive","manageSystemIdleTimeReducer","OnActive","OnIdle","App","cancelAllListeners","stopListeningForUserProfileChanges","stopListeningForGroupsUserIsIn","joinRequestsTable_stopListeningForJoinRequestsChanged","adminDashboard_stopListeningForInvitedUsersChanged","groupAdminsTable_stopListeningForGroupAdminsChanged","stopListeningForSystemGroupsChanged","loadClubAttributesIfNotLoaded","clubAttributesBeingLoaded","loadSystemGroups","loadingGroups","attachListeners","initializeAuthState","getUserProfileAndValidateUser","startListeningForClubAttributesChanged","startListeningForUserProfileChanges","startListeningForAngelNetworkChanged","startListeningForGroupsUserIsIn","startListeningForSystemGroupsChanged","getTheme","addMediaQueryListeners","removeMediaQueryListeners","stopListeningForAngelNetworkChanged","stopListeningForClubAttributesChanged","onIdle","DateFnsUtils","signingIn","preventValidatingUserWhenSigningUp","groupFound","matches","forumsActions","existingGroup","groupIndex","hostname","ProfileEvents","loadingGroupsUserIsIn","groupsUserIsInLoaded","authReducer","shouldPrevent","singingIn","createBusinessProfileReducer","editedDirectors","editUserReducer","editImageReducer","editVideoReducer","uploadFilesReducer","uploadingStatusReducer","uploadingStatusActions","changePasswordReducer","clubAttributesReducer","clubAttributesActions","CreateForum","createForumName","createForumDesc","createForumError","createNewForum","createForumAuthor","forumBeforeEditing","forumAfterEditing","lastEdited","dateCreated","CreateThread","createThreadName","createThreadBriefDesc","createThreadMessage","createThreadError","createNewThread","threadBeforeEditing","threadAfterEditing","IndividualForum","tableChangePage","tableChangeRowsPerPage","renderThreads","forumThreadsLoaded","forumThreads","threadsSortedMode","threadsTablePage","threadsTableRowsPerPage","clickOnAParticularThread","sortedThreads","SORT_BY_CURRENT_USER","thread1","thread2","SORT_BY_LAST","SORT_BY_OLDEST","ButtonBase","threadsLoadMode","goBackToForumsList","threadBeforeChanging","threadAfterChanging","CreateReply","threadReplySubject","threadReplyMessage","createThreadReplyError","submitThreadReply","thread_reply_style","forumThreadSelected","threadReplyBeforeEditing","threadReplyAfterEditing","replyDate","AVATAR_MAX_HEIGHT","IndividualThread","renderReplies","forumThreadReplies","threadInReplyMode","forumThreadRepliesLoaded","goBackToThreadsList","threadReplies","threadReplyBeforeChanging","threadReplyAfterChanging","Forums","addAndRemoveListeners","forumsLoaded","startListeningForForumsChanged","startListeningForThreadsChanged","startListeningForThreadRepliesChanged","renderContent","modeForums","forumsSortedMode","forumsLoadMode","forumsTablePage","forumsTableRowsPerPage","sortedForums","forum1","forum2","renderForums","clickOnAParticularForum","onForumClick","toggleEditForum","ForumRow","existingForum","forumsChanged","existingForumIndex","existingThread","threadsChanged","existingThreadIndex","repliesChanged","existingReplyIndex","forumBeforeChanging","forumAfterChanging","forumsReducer","notificationsReducer","mediaQueryActions","dashboardSidebarReducer","isTablet","mediaQueryReducer","superAdminSettingsReducer","groupAdminSettingsReducer","manageANIDFromParamsActions","legalDocumentsReducer","invitedUsersReducer","invitationDialogReducer","addAngelNetworkDialogReducer","manageGroupFromParamsReducer","investorSelfCertificationAgreementsReducer","angelNetworksReducer","manageJoinRequestsReducer","loadingPledges","matchedPledges","pledgesTableReducer","feedbackSnackbarReducer","activitiesTableReducer","manageJSONCompareChangesDialogReducer","manageJSONCompareChangesDialogActions","groupAdminsTableReducer","createPledgeDialogReducer","selectProjectVisibilityReducer","manageSystemGroupsReducer","manageSystemGroupsActions","LOADING_MARKETING_PREFERENCES","FINISHED_LOADING_MARKETING_PREFERENCES","loadingMarketingPreferences","marketingPreferencesLoaded","manageMarketingPreferencesReducer","manageMarketingPreferencesActions","CREATE_PROJECT_SET_COMPONENT_PROPS","CREATE_PROJECT_LOADING_DATA","CREATE_PROJECT_FINISHED_LOADING_DATA","CREATE_PROJECT_DRAFT_PROJECT_CHANGED","componentContext","createNewPitch","pitchExpiredDate","snackbarErrorMessage","createProjectReducer","createProjectActions","context","projectChanged","documentsDownloadReducer","openRiskWarningDialogAction","InputCategories","EditImageDialogEvents","BusinessProfileEvents","AddressStates","EditImageDialogModes","initialBusinessProfileState","editedBusinessProfile","registeredOfficeState","EnterPostcode","tradingAddressState","initialEditImageDialogState","AddPhoto","rotate","savingImage","deletingImage","hasInitiallySetCopiedUser","PersonalDetailsState","BusinessProfileState","EditImageDialogState","profileReducer","SetCopiedUser","setCopiedUserAction","copiedUser","firstTimeSetCopiedUser","ToggleDialog","toggleDialogAction","rawImage","SetEditor","setEditorAction","ChangeMode","changeModeAction","SuccessfullySelectedImage","successfullySelectedImageAction","selectedImage","SliderChanged","sliderChangedAction","SavingImage","savingImageAction","saving","DeletingImage","deletingImageAction","deleting","CheckBoxChanged","businessProfileCheckBoxChangedAction","FindingAddress","findingAddressAction","FindingAddresses","FinishedFindingAddress","finishedFindingAddressAction","foundAddressesForRegisteredOffice","foundAddresses","foundAddressesForTradingAddress","errorFindingAddressesForRegisteredOffice","errorFindingAddressesForTradingAddress","ChangeAddressState","changeAddressStateAction","addressState","rootReducer","combineReducers","ManageSystemIdleTimeState","newExploreGroupsReducer","ProfileLocalState","manageMarketingPreferences","manageCreateProject","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"kHAAA,OAAe,cAA0B,kC,uDCAzC,OAAe,48N,iCCAf,OAAe,wkK,iCCAf,OAAe,cAA0B,wC,mGCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,oE,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,2E,iCCAzC,OAAe,cAA0B,mF,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,qD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,gE,iCCAzC,OAAe,cAA0B,uE,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,oD,iCCAzC,OAAe,cAA0B,0E,iCCAzC,OAAe,cAA0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","file":"static/js/main.ee89ae55.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.5e7ff337.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC0FBMVEUAAAAA//8Af/8AqqoAf78AmcwAqtQAkdoAn98AjcYAmcwAotAAlNQAnNcAkdoAmcwAj88AltIAm9QAk9YAltAAm9IAlNQAmNYAk9cAl88AmtEAldMAlNUAl88AmtAAltIAmNMAlNQAl9UAltEAmdIAldMAl9QAlNUAltAAldIAl9MAlNQAltUAmNIAldMAl9QAmNIAldMAl9MAmdQAltEAmNEAldIAldMAltQAmNEAltIAl9IAldMAltMAmNQAltEAl9IAldIAltMAmNMAltQAl9EAldIAl9IAmNMAltMAl9QAltIAl9IAmNMAltMAl9QAltEAl9IAldIAltMAl9MAltQAl9EAldIAltIAl9MAltMAl9QAltIAl9IAmNIAltMAl9MAltQAl9IAmNIAltIAl9MAltMAl9QAmNIAltIAl9MAltMAl9MAldEAltIAl9IAltMAl9MAltMAltIAl9IAltIAl9MAltMAl9MAl9IAltIAl9IAltMAl9MAl9MAltIAl9IAltEAl9MAltMAltIAl9IAltIAl9MAltMAldMAl9IAltIAl9IAltMAldMAl9MAltIAl9IAltEAl9MAl9MAltMAl9IAltIAldMAl9MAltIAl9IAltEAldMAl9MAl9IAltEAldMAl9MAltMAl9IAltIAl9EAl9MAldMAl9MAltIAl9IAl9EAl9MAltMAl9IAldEAl9MAltMAl9MAldEAl9EAldMAl9MAltIAldIAl9EAldMAl9MAltMAl9IAl9EAldEAl9MAltMAl9MAl9IAldEAl9EAldMAl9MAltMAldIAl9EAldEAl9MAltMAldMAl9EAldEAl9EAltMAldMAl9IAldEAl9EAldMAl9MAl9MAldIAl9EAldEAl9MAl9MAldMAl9EAldEAl9EAltMAldMAl9MAldEAl9EAldEAldMAl9MAldMAl9EAldEAl9NBjL3XAAAA73RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExYXGBkaGxwdHyAhIiMkJScoKSorLC4vMDE0NTY5Ojs8PT4/QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaSlpqeoqaqsra6vsLGys7S1tre4ubu8vb/AwcLExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/jWJrzEAAAsKSURBVHja7d0LjBT1HQfw2bvjOBAqbxGrB/g4sBWwjagUqgaFiqIWtBSi1VRpY6lWq7VGom2MTa2v1ket0mpaRasmPDSkVorB2gYjRkGCPR4FxFh5Csj7dbuFiorH3u4A11vmP5+Pmujuf2Z25/fd3/xnHXaiCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACSJ3NIvIpjamq6t25VmUnLXs9uWvPe/HeWCsBuFQMu7n9MKj98y6ZPenV72gPQ8epRR6S4Aa8aP255mgPQ7qbLq1J+DN72+D1rUhuAEXd0MAuL1tzybDoD0OaBoar/P1OuXZvCANQ801Xp91g8ckHqAnDyhLYK/6l1w2alLAAnT2mp7HvZNHRWqgJQ86LPf70eMGhhigLQZrrjf32Lzl5Xis2Wl+TNjjtVwetr121yagIw4gb13lePf9em5BDQ7nXf/+Szuu/adHSAn31dsfNpWTY9FR2g45wqxc5ra++VTb7NsqZ/m1erfwOqrkpDB6iYe4RSN2D5STvD7wAD1L9Bnful4BAwXJ0bNiwFARigzA07M/wAHHOMMjesukvwAahR5UJOFIB0qwk+AN0VueAxIPgAtFbkQtoFH4BWilxIi+ADUKnIhTQLPgAZRT6kdk+ZfZ5uAiAACAACgAAgAAgAAoAAIAAIAAKAACAACAACgAAgAAgAAoAAIAAIAIlWkdyXvuH1eQvWrK9o2eXYL5/izxulLQAfTXj67c9+UKmq/4gLZCBFh4DVt33phjf3+kGtrdNG97p/q2qmJQBP9n1wU/3HVvz81JeUMxUBWD8i/y123vv2jTsUNPwALDtnakNPPXbRBhUNPQDLzitwf6UZF2xW0rADsPFbSwo9PfvSrJoGHYAfzS38/PR71TTkAEyaWGzEr95W1HADsGls0SF11ytquAF4eFnxMbOmqmqoAdg6Ls6oe1Q11AA8vzrOqDcWK2ugAXgm5kxRWcMMwNbX4o17WVnDDMDMbfHGza5T1yAD8E7McVveVdcgAzA/7kCzwDADsCLuwLXqGmQA1scduEldgwxA7PscV6hrkAGIfbORw9Q1yAAcHXdgR3UNMgCx76h1vLoGGYA+cRtAZ3UNMgC9Y95S6zRlDTMAZYPjjRuirGEGIBoVa1SL85Q10AD0PynOqOHuTRlqAKKbY4wpv05Vgw3AkAHFx3z3WFUNNgDRb4q29y5jFTXgAHS/r8iAinGHK2rAAYguvrHw83d/TU2DDkA0dnShZ2+9QkkDD0B01y0N3mC54v4fq2jwAYh+8uf2+Z84esp3FDQFAYgGz7g4z6OV18w4VT1TEYCo0++nD6l3eVDr0W/c3ko5919Cr57q89TyCS++teWTc//Th5zbQi3TFIAo6jxmzI5Fiz7aVNmq8wmuAEphAHZp1qOHAqZyDoAAIAAIAAKAACAACAACgACwn/xR+qJySxYsWbp89YbtOzPNqtp0+mK3biceLgApsX7GP1+ft3Gfh7v2OaP/cQJQko/j5kxZeaYsz5Erl8vuUlbVwILZLWW77Xs5WS6bq8tmq/L8/MiKFya8lf8mNO++OznqNvjC0wSgqf3xtj03hcnssauAu0q/yyc3ijjumbx/MOSOh/b8yGDZx4tl6i3X7JLf1svFy4++srPQS1nyyCPVIy89KukByDT1BieedTBL91xedMjNP83z4MbqoncSmdFz734x4b55sT4/37imb6PunmmXOAsoJMavRef9ibAPi99JZu/fIHul//di1T/aOWXwBbOdBgbR05p/+m+rLv9mbfzl/jHwuvUCENJs6MV+L+zXgtk/9fu7ACTfnj1RN3bU6v1d9D/Dfy0AiT8ufDxkw7CHD2D1dbePqROAEKwa8uqBLfj0FXUCkOwOsLuAK8+fe6BbmPIDAUi2XBStu2jBgS//3C8FINEdIBttH1F7MNu4+68CkOxDwPUzD66F/HC5ACRY9omnD3INH14nAAnuAAtvPuitvPQXAUhuAMZuOfjN3LpDABIbgMa40dDipwQgsQFoFPfuFIBUe3+yAKTb7wQg3d6qFYA0zwGi6FkBSLfJApDuDrB0jgCkOgDRVAFIt5cEIN0dYPZGAUi1na8JQKo7QJSsAFQIQIPadmpZGW3bsGzz/i02QwACCEyfc/v2bvPJmd2bf5u6Jv6ytbmMACS7Axx2+eiue/1ndfWwbc/d9X7cpdcvStJPB5gE7uv8N37Rtd5DzS+b+f3Yy//LJDDJKh988sg8D7e48w+VMdcw3xwgwarGD2zgmeHlV2ZjrWKBDpBc5Y8NbPC5i26Kt47FApBctw0p8OSNvWKtY4UAJFa/awq2hztjrWR5VgASehpY+UDhgacPiLOWulUCkFCXFrv1/JhYqxGAhCq7ttiIczrFWc9aAUjmIaB/ddHdNTjOejYKQDKNLD7kbAEItwNkzolxmhBnRdsEIJF6tC8+pkO1AATbAb4SKyUxxvgeIJl6xxlUE2NMTgASqXucQV0FIFhd4gzqLADBOjLOoPYCEKrmbeKMaiMAoeoQa1RrZwGhahtrVEsdIFSt4h0oBCBUsaYAsS6iFIBDTpxvAg9vtB0mAIl0mACkW4tGW5OzgGR+D9Boa9IBEqlcB0i3jA4QrlyT7goBSKQy79ohQAcwCRQAHUAABEAATId8D6AD6AACoAOgA6SjJOYAKQ+AOQA6gA6gA/geQAdAB3AI0AFw4MMhAB0AHQCTQHtfB0hu/83pAA4BOkCKA5ATAB0AHcAcwCTQISCVATAJ1AEEwCTQHMAkUAcIPgBZZwE6QPCfWwFwFiAAjb33cwKQ7tPArAD4HkAAUhyAxiubs4CUB0AHSPnpgw5QSlkdwCFABxAAp4EC4CxAAErzudUBSqnOIUAHMAl0GthIrUMHSE8AHAISIMa9/b5wgMvFvHVsnD1WKQD/LxcWHVE1PN+jHc4onq2B8V5Cz+JDTknQHs009QYnnnVQiy9cVVZeXlaW2f3XZ689l8tmd/2drasrP6FN/q5cu273crsW2/XPXg9nc3sWLOsR79ax0ebarUU+U+1qDvz9TbukietRkawOEB1//AEG/cTGegUtvxrUlMn/DUw5ARAABAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAFAABAABAABQAAQAAQAAUAAEAAEAAEgllzwAcgqciE7gg/AJkUuZHPwAVijyIfU7mnyALynyIUsDT4A8xW5kHnBB+AdRS6kNvgALF2myg1bsiz4AETTlflQ2jlNH4BJynwo7Zwmv19AVDm3o0I34INedeF3gO3jFbohT9SloANEnWc3V+q8NvdenYI5QLT8caXO79Gmr38pOkDUfmY7xc5j5Snrm36j5SV4o1tWnK/aeYyZU4KNluR6gGenqPa+Jjxfiq1mSvJe207rruD1zB+0PkpLB4jWjlyn4p/34aiS1L9Ul4QtGObCkM/ZMHxxlKYARLOG6gF7f/6Hvh2lKwDRrEGL1P2z43+p6l/Cq4IXnv28yn9s4qDFJdt2ppRvfPidHVQ/WnlTKT8J5aV867Xjy3tVpLz8mx+6ck4pt58p8fvvdNVlnVNc/g+eeGx1aV9BpuT7oKLfsDOrU1n9JdMnvVZX6heROSR2xVE9a6rbtWiWSUnlczs2r1k6r9bVkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwgP4L8YdkJdYJMf4AAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/admin_logo.ba46fba4.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_my_dashboard.bd396a1f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_navigation_bar.9371ce16.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_notifications.5cb03a6b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_user_management.f70fb039.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_01.188cd7b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_02.43a3a338.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_03.d21bb154.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_access_requests.28fe688a.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_members.441a6d6f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_viewing_an_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_2_offer.ef822bde.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_01.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_02.6811f18b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_temporarily_closing_an_offer.2af2fa2e.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_reopening_a_temporarily_closed_offer.a6df5162.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_admins.56a845b1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_offers.c2b77876.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_groups.6d981bb7.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_resources.46aab3b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_settings.db022052.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_public_offer.9199adf5.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_restricted_offer.47d1cb14.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_audit_log.7ba81ce1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_password.6b0f1016.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_change_password.d432f2e0.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_logging_out.d5b27005.png\";","export default __webpack_public_path__ + \"static/media/investor_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/investor_help_navigation_bar.484f4980.png\";","export default __webpack_public_path__ + \"static/media/investor_help_notifications.591a0a3c.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers.e803e5a3.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers_campaign.c87eedb6.png\";","export default __webpack_public_path__ + \"static/media/investor_help_pitch_phase_02.ed931b04.png\";","export default __webpack_public_path__ + \"static/media/investor_contacting_fundraiser.a655d6ac.png\";","export default __webpack_public_path__ + \"static/media/investor_help_exploring_groups.2626dbb8.png\";","export default __webpack_public_path__ + \"static/media/investor_help_resources.d795f034.png\";","export default __webpack_public_path__ + \"static/media/investor_help_profile.161003e4.png\";","export default __webpack_public_path__ + \"static/media/investor_help_editing_your_profile.7557feb5.png\";","export default __webpack_public_path__ + \"static/media/investor_help_setting_up_business_profile.4f382457.png\";","export default __webpack_public_path__ + \"static/media/investor_help_self_certification.316c14bd.png\";","export default __webpack_public_path__ + \"static/media/investor_help_reset_password.3367ff8a.png\";","export default __webpack_public_path__ + \"static/media/investor_help_change_password.ee808f9b.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_01.3369ce18.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_02.360ef7c1.png\";","export default __webpack_public_path__ + \"static/media/investor_help_log_out.b96d7eaf.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_navigation_bar.c03a1c44.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_notifications.ee71f277.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_01.7ef3c24c.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_02.e6fe49c4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_manage_offer.3aaa83e4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_offer.6dc9997a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_01.6baa1cf8.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_02.e5dcb344.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_exploring_groups.2ddf42d1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_resources.394adc7a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_01.f76d41fd.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_02.5ba1a9b1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_01.740f5dec.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_02.4487dfd3.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_reset_password.6e395e52.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_change_password.a3ecf01b.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_01.866d8280.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_02.39aafbdc.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_log_out.7f3b30bd.png\";","export default __webpack_public_path__ + \"static/media/front_page_cover_image.2b9aa708.png\";","/** \r\n * This file contains Firebase connection setup.\r\n * \r\n * This file will only be imported in the App.jsx file to initialize Firebase.\r\n */\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport 'firebase/storage';\r\n\r\nconst config = {\r\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n};\r\nconst firebaseApp = firebase.initializeApp(config);\r\nexport default firebaseApp;","export const UPLOADING = 'UPLOADING';\r\nexport const uploading = (mode, progress) => {\r\n    return {\r\n        type: UPLOADING,\r\n        mode,\r\n        progress\r\n    }\r\n};\r\n\r\nexport const DISMISS_UPLOADING_STATUS = 'DISMISS_UPLOADING_STATUS';\r\nexport const dismissUploadingStatus = () => {\r\n    return {\r\n        type: DISMISS_UPLOADING_STATUS\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {ProgressBar} from 'react-bootstrap';\r\nimport {connect} from 'react-redux';\r\nimport * as uploadingStatusActions from '../../redux-store/actions/uploadingStatusActions';\r\n\r\n// Upload states\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_LOGO_FIRST_TIME_MODE = 1; // upload logo first time together with business profile information\r\nexport const UPLOAD_LOGO_MODE = 2; // upload logo separately later times\r\nexport const UPLOAD_PROFILE_PICTURE_MODE = 3;\r\nexport const UPLOAD_VIDEO_FIRST_TIME_MODE = 4;\r\nexport const UPLOAD_VIDEO_MODE = 5;\r\nexport const UPLOAD_LEGAL_DOCUMENTS_MODE = 6;\r\nexport const UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION = 7;\r\nexport const UPLOAD_PITCH_COVER_MODE = 8;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 9;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 10;\r\nexport const UPLOAD_DONE_MODE = 11;\r\nexport const UPLOAD_ERROR = 12;\r\n//--------------------------------------------------------------------\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        mode: state.uploadingStatus.mode,\r\n        progress: state.uploadingStatus.progress\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        dismiss: () => dispatch(uploadingStatusActions.dismissUploadingStatus())\r\n    }\r\n};\r\n\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardRef,\r\n\r\n            mode,\r\n            progress,\r\n\r\n            dismiss\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardRef}\r\n                open={mode !== UPLOAD_NONE}\r\n                fullWidth\r\n            >\r\n                <DialogTitle>\r\n                    {\r\n                        mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE\r\n                            ?\r\n                            \"Uploading logo\"\r\n                            :\r\n                            (\r\n                                mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                                    ?\r\n                                    \"Uploading profile picture\"\r\n                                    :\r\n                                    (\r\n                                        mode === UPLOAD_VIDEO_MODE || mode === UPLOAD_VIDEO_FIRST_TIME_MODE\r\n                                            ?\r\n                                            \"Uploading video\"\r\n                                            :\r\n                                            (\r\n                                                mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                                                    ?\r\n                                                    \"Uploading documents\"\r\n                                                    :\r\n                                                    (\r\n                                                        mode === UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION\r\n                                                            ?\r\n                                                            \"Uploading business profile\"\r\n                                                            :\r\n                                                            (\r\n                                                                mode === UPLOAD_ERROR\r\n                                                                    ?\r\n                                                                    \"Error uploading\"\r\n                                                                    :\r\n                                                                    (\r\n                                                                        mode === UPLOAD_DONE_MODE\r\n                                                                            ?\r\n                                                                            \"Upload done\"\r\n                                                                            :\r\n                                                                            \"\"\r\n                                                                    )\r\n                                                            )\r\n                                                    )\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <ProgressBar variant=\"success\" striped now={progress} label={`${progress}%`} />\r\n                        <Typography variant=\"body2\" style={{ marginTop: 10 }} >\r\n                            {\r\n                                mode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please wait while we're uploading your files...\"\r\n                                    :\r\n                                    \"Your files have successfully uploaded.\"\r\n                            }\r\n                        </Typography>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button variant=\"outlined\" color=\"primary\" size=\"small\" disabled={mode !== UPLOAD_DONE_MODE && mode !== UPLOAD_ERROR} onClick={dismiss} style={{ margin: 8 }}>Close</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <UploadingDialog {...props} forwardedRef={ref}/>)\r\n);","/** This file contains all of the colors that will be used */\r\n\r\nexport const black = \"#000000\";\r\nexport const white = \"#FFFFFF\";\r\n\r\nexport const red = \"#FF0000\";\r\nexport const red_700 = \"#D32F2F\";\r\n\r\nexport const dark_green = \"#4C8484\";\r\nexport const dark_green_50 = \"#5DA2A2\";\r\n\r\n// obtain using this website: https://hihayk.github.io/scale/#4/6/58/94/-51/-17/100/14/4C8484/76/132/132\r\nexport const dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100 = \"#F3F7F9\";\r\n\r\nexport const gray_50 = \"#FAFAFA\";\r\nexport const gray_100 = \"#F5F5F5\";\r\nexport const gray_200 = \"#EEEEEE\";\r\nexport const gray_300 = \"#E0E0E0\";\r\nexport const gray_400 = \"#BDBDBD\";\r\nexport const gray_500 = \"#9E9E9E\";\r\nexport const gray_600 = \"#757575\";\r\nexport const gray_700 = \"#616161\";\r\nexport const gray_800 = \"#424242\";\r\n\r\nexport const pink_500 = \"#E91E63\";\r\n\r\nexport const blue_900 = \"#0D47A1\";\r\n\r\nexport const blue_gray_50 = \"#ECEFF1\";\r\nexport const blue_gray_100 = \"#CFD8DC\";\r\nexport const blue_gray_600 = \"#546E7A\";\r\nexport const blue_gray_700 = \"#455A64\";\r\n\r\n//---- Background color for letter avatar --------------------\r\nexport const background_a = \"#58B99D\";\r\nexport const background_b = \"#4A9D86\";\r\nexport const background_c = \"#EAC545\";\r\nexport const background_d = \"#E79F3C\";\r\nexport const background_e = \"#65C87A\";\r\nexport const background_f = \"#55AB68\";\r\nexport const background_g = \"#C45C24\";\r\nexport const background_h = \"#5197D5\";\r\nexport const background_i = \"#437FB4\";\r\nexport const background_j = \"#C8473F\";\r\nexport const background_k = \"#D65745\";\r\nexport const background_l = \"#B14334\";\r\nexport const background_m = \"#925EB1\";\r\nexport const background_n = \"#844A87\";\r\nexport const background_o = \"#BEC3C6\";\r\nexport const background_p = \"#38495C\";\r\nexport const background_q = \"#303E4E\";\r\nexport const background_r = \"#98A4A6\";\r\nexport const background_s = \"#818C8D\";\r\nexport const background_t = \"#DE8DBD\";\r\nexport const background_u = \"#CA76AA\";\r\nexport const background_v = \"#E99B89\";\r\nexport const background_w = \"#9DA282\";\r\nexport const background_x = \"#AF935E\";\r\nexport const background_y = \"#E5B547\";\r\nexport const background_z = \"#9D473B\";\r\n//------------------------------------------------------------\r\n\r\n//---------------------------------------------------------------------\r\n/**\r\n * Theme colors - MUST BE DEFINED LAST so that other colors can be referenced\r\n */\r\nexport const primaryColor = dark_green;\r\nexport const secondaryColor = pink_500;\r\nexport const errorColor = \"#E15241\";\r\n\r\nexport const kick_starter_background_color = \"#FBFBFA\";\r\nexport const kick_starter_background_color_1 = \"#F7F7F6\";\r\nexport const kick_starter_gray_box_border = \"#DCDEDD\";\r\nexport const kick_starter_signup_background = \"#FCFCFB\";\r\nexport const kick_starter_gray_background = \"#F0F0F0\";\r\n\r\nexport const crowdcube_risk_warning_background = \"#2C383B\";\r\nexport const crowdcube_risk_warning_link_before_cover = \"#D98E34\";\r\nexport const crowdcube_risk_warning_link_after_cover = \"#CA6B2D\";\r\n//---------------------------------------------------------------------\r\n","import React from 'react';\r\nimport { StyleSheet } from 'aphrodite';\r\nimport {\r\n    TableCell,\r\n    Slide\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport * as appColors from '../values/colors';\r\n\r\nconst sharedStyles = StyleSheet.create({\r\n    nav_link_hover: {\r\n        ':hover': {\r\n            color: appColors.blue_gray_700,\r\n            textDecoration: 'none',\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    nav_link_white_text_hover_without_changing_text_color: {\r\n        color: appColors.white,\r\n        ':hover': {\r\n            textDecoration: 'none'\r\n        }\r\n    },\r\n\r\n    nav_link_hover_without_changing_text_color: {\r\n        ':hover': {\r\n            textDecoration: 'none'\r\n        }\r\n    },\r\n\r\n    page_title: {\r\n        marginLeft: 20,\r\n        color: appColors.white\r\n    },\r\n\r\n    hamburger_button: {\r\n        color: appColors.white,\r\n        marginLeft: 10\r\n    },\r\n\r\n    tab_title: {\r\n        textTransform: \"none\",\r\n        fontSize: \"0.9em\"\r\n    },\r\n\r\n    kick_starter_border_box: {\r\n        border: `1px solid ${appColors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none'\r\n    },\r\n\r\n    no_text_transform: {\r\n        textTransform: \"none\"\r\n    },\r\n\r\n    error_text: {\r\n        color: appColors.errorColor\r\n    },\r\n\r\n    white_text: {\r\n        color: appColors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: appColors.black\r\n    }\r\n});\r\nexport default sharedStyles;\r\n\r\n/**\r\n * Styled table cell\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport function StyledTableCell(props) {\r\n    const useStyles = makeStyles({\r\n        root: {\r\n            background: props => props.cellColor,\r\n            color: props.textColor\r\n        }\r\n    });\r\n    const classes = useStyles(props);\r\n    return (\r\n        <TableCell\r\n            className={classes.root}\r\n            colSpan={props.colSpan}\r\n        >\r\n            {props.component}\r\n        </TableCell>\r\n    );\r\n}\r\n\r\n/**\r\n * Slide transition - direction up\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionUp = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"up\" />);\r\n\r\n/**\r\n * Slide transition - direction down\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionDown = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"down\" />);","/**\r\n * This file contains all Firebase paths and constant values.\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE NODES ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Groups node\r\nexport const GROUP_PROPERTIES_CHILD = \"AngelNetworkProperties\";\r\n\r\n// Admins node\r\nexport const ADMINISTRATORS_CHILD = \"Administrators\";\r\n\r\n// System's attributes node\r\nexport const CLUB_ATTRIBUTES_CHILD = \"ClubAttributes\";\r\n\r\n// Users node\r\nexport const USERS_CHILD = \"Users\";\r\n\r\n// Projects node\r\nexport const PROJECTS_CHILD = \"Projects\";\r\n\r\n// Activities log node\r\nexport const ACTIVITIES_LOG_CHILD = \"ActivitiesLog\";\r\n\r\n// Investor Self-certification agreements node\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD = \"InvestorSelfCertificationAgreements\";\r\n\r\n// Access requests to a group node\r\nexport const REQUESTS_TO_JOIN_CHILD = \"RequestsToJoin\";\r\n\r\n// Contact us enquiries node\r\nexport const CONTACT_US_ENQUIRIES_CHILD = \"ContactUsEnquiries\";\r\n\r\n// Marketing preferences node\r\nexport const MARKETING_PREFERENCES_CHILD = \"MarketingPreferences\";\r\n\r\n// Invited users node\r\nexport const INVITED_USERS_CHILD = \"InvitedUsers\";\r\n\r\n// Business profile node\r\nexport const BUSINESS_PROFILE_CHILD = \"BusinessProfile\";\r\n\r\n// Accepted create pitch T&Cs node\r\nexport const ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD = \"AcceptedCreatePitchTermsAndConditions\";\r\n\r\n// Project comments node\r\nexport const COMMENTS_CHILD = \"Comments\";\r\n\r\n// Project comment replies node\r\nexport const COMMENT_REPLIES_CHILD = \"CommentReplies\";\r\n\r\n// Pledges node\r\nexport const PLEDGES_CHILD = \"Pledges\";\r\n\r\n// Project votes node\r\nexport const VOTES_CHILD = \"Votes\";\r\n\r\n// Pledge FAQs node\r\nexport const PLEDGE_FAQS_CHILD = \"PledgeFAQs\";\r\n\r\n// Notifications node\r\nexport const NOTIFICATIONS_CHILD = \"Notifications\";\r\n\r\n// Forums node\r\nexport const FORUMS_CHILD = \"Forums\";\r\n\r\n// Forum threads node\r\nexport const FORUM_THREADS_CHILD = \"ForumThreads\";\r\n\r\n// Forum thread replies node\r\nexport const FORUM_THREAD_REPLIES_CHILD = \"ForumThreadReplies\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE STORAGE DIRECTORIES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Plain logos directory\r\nexport const PLAIN_LOGOS_CHILD = \"PlainLogos\";\r\n\r\n// Logos with text directory\r\nexport const LOGOS_WITH_TEXT_CHILD = \"LogosWithText\";\r\n\r\n// Legal documents directory\r\nexport const LEGAL_DOCUMENTS_CHILD = \"LegalDocuments\";\r\n\r\n// Logos directory\r\nexport const LOGOS_CHILD = \"Logos\";\r\n\r\n// Videos directory\r\nexport const INTRO_VIDEOS_CHILD = \"Videos\";\r\n\r\n// Profile pictures directory\r\nexport const PROFILE_PICTURES_CHILD = \"ProfilePictures\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE ATTRIBUTES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\nexport const PROJECT_SUPPORTING_DOCUMENTS_CHILD = \"supportingDocuments\";\r\n\r\nexport const PROJECT_PRESENTATION_DOCUMENT_CHILD = \"presentationDocument\";\r\n\r\nexport const PROFILE_PICTURE_CHILD = \"profilePicture\";\r\n\r\nexport const PROJECT_COVER_CHILD = \"cover\";\r\n\r\nexport const LOGO_CHILD = \"logo\";\r\n\r\nexport const INTRO_VIDEO_CHILD = \"video\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * ACTIVITY LOG TYPES --------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const ACTIVITY_TYPE_CLICK = 1; // profile, pitch/offer\r\nexport const ACTIVITY_TYPE_VIEW = 2; // profile, pitch/offer, group\r\nexport const ACTIVITY_TYPE_DOWNLOAD = 3; // download documents\r\nexport const ACTIVITY_TYPE_POST = 4; // comments, forums, threads, replies, pledges, likes, changes password\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVITED USER STATUS -------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a user in a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const INVITED_USER_NOT_REGISTERED = 0;\r\nexport const INVITED_USER_DECLINED_TO_REGISTER = 1;\r\nexport const INVITED_USER_STATUS_ACTIVE = 2;\r\nexport const INVITED_USER_STATUS_LEFT = 3;\r\nexport const INVITED_USER_STATUS_KICKED_OUT = 4;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * GROUP STATUS --------------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const GROUP_STATUS_ACTIVE = 1;\r\nexport const GROUP_STATUS_SUSPENDED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TYPE -----------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const TYPE_INVESTOR = 1;\r\nexport const TYPE_ISSUER = 2;\r\nexport const TYPE_ADMIN = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT VISIBILITY --------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the visibility of a project (offer).\r\n *\r\n * @type {number}\r\n */\r\nexport const PROJECT_VISIBILITY_PRIVATE = 1;\r\nexport const PROJECT_VISIBILITY_RESTRICTED = 2;\r\nexport const PROJECT_VISIBILITY_PUBLIC = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVESTOR AGREEMENT TYPE ---------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the investors' self-certification type.\r\n *\r\n * @type {number}\r\n */\r\nexport const HIGH_NET_WORTH_INVESTOR_AGREEMENT = 1;\r\nexport const SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT STATUS ------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\n\r\n// --- Project overall status ---\r\nexport const PROJECT_STATUS_DRAFT = -2; // project has not been published yet\r\nexport const PROJECT_STATUS_REJECTED = -1; // this status means the project failed even before it is publicly showed\r\nexport const PROJECT_STATUS_BEING_CHECKED = 0; // the project (offer) must be checked by admin first\r\nexport const PROJECT_STATUS_PITCH_PHASE = 1;\r\nexport const PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED = 2;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED = 3;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_PHASE = 4;\r\nexport const PROJECT_STATUS_SUCCESSFUL = 5;\r\nexport const PROJECT_STATUS_FAILED = 6;\r\n\r\n// --- Pitch status only ---\r\nexport const PITCH_STATUS_ON_GOING = 1;\r\nexport const PITCH_STATUS_ACCEPTED = 2;\r\nexport const PITCH_STATUS_REJECTED = 3;\r\n// when the admin accepts a pitch, its status will change to this state (pitch accepted and waiting for primary offer to be created)\r\n// when the issuer creates a primary offer, the pitch's status will change to PITCH_STATUS_ACCEPTED\r\nexport const PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER = 4;\r\n// this status means the pitch has expired but admin has not accepted or rejected it\r\nexport const PITCH_STATUS_WAITING_FOR_ADMIN = 5;\r\n\r\n// --- Pledge status only ---\r\nexport const PRIMARY_OFFER_STATUS_ON_GOING = 1;\r\nexport const PRIMARY_OFFER_STATUS_EXPIRED = 2;\r\nexport const PRIMARY_OFFER_STATUS_REJECTED = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT STATUS ----------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_STATUS_POSTED = 1;\r\nexport const COMMENT_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT REPLY STATUS ----------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_REPLY_STATUS_POSTED = 1;\r\nexport const COMMENT_REPLY_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * CONTROL IF A PLEDGE IS NEWLY CREATED OR EDITED ----------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const MAKE_A_NEW_PLEDGE = 1;\r\nexport const EDIT_A_PLEDGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TITLES ---------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const USER_TITLES = [\"Please select\", \"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Dr.\", \"Prof.\"];\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FINANCIAL ROUNDS ----------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const FINANCIAL_ROUNDS = [\"Pre-seed\", \"Seed\", \"Series A\", \"Series B\", \"Series C\"];\r\n\r\nexport const EIS_BADGE = [\"Yes\", \"No\"];\r\n\r\nexport const SEIS_BADGE = [\"Yes\", \"No\"];\r\n\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * MULTIMEDIA TYPE (VIDEO OR IMAGE) ------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const FILE_TYPE_VIDEO = 1;\r\nexport const FILE_TYPE_IMAGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FILE CONFIGURATION ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {number|string}\r\n */\r\nexport const MAX_FILE_SIZE_IN_MB = 15;\r\nexport const MAX_FILE_SIZE_IN_BYTES = 15000000;\r\n\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_MB = 30;\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES = 30000000;\r\n\r\nexport const MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER = 2;\r\nexport const MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS = 10;\r\n\r\nexport const STORAGE_FILE_NAME_ID_SPLIT = \"-invest-west-\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */","import * as DB_CONST from '../firebase/databaseConsts';\r\n\r\nimport {QuillDeltaToHtmlConverter} from 'quill-delta-to-html';\r\n\r\n/**\r\n * This function will return the current date in milliseconds.\r\n */\r\nexport const getCurrentDate = () => {\r\n    const date = new Date();\r\n    return date.getTime();\r\n};\r\n\r\n\r\n/**\r\n * This function is used to calculate the date that is n days further than today\r\n *\r\n * @param days\r\n * @returns {number}\r\n */\r\nexport const getDateWithDaysFurtherThanToday = days => {\r\n    let neededDate = new Date();\r\n    const currentDate = new Date();\r\n    neededDate.setDate(currentDate.getDate() + days);\r\n    return neededDate.getTime();\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (DD/MM/YYYY)\r\n *\r\n * This function will take 1 parameter: milliseconds\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    return date.toLocaleDateString();\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (DD/MM/YYYY, HH:mm:ss)\r\n *\r\n * This function will take 1 parameter: milliseconds\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateTimeInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    return `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\r\n};\r\n\r\n/**\r\n * This function will return a readable date format (dayOfWeek, month date year hour)\r\n *\r\n * @param milliseconds\r\n */\r\nexport const fullDateTimeInReadableFormat = milliseconds => {\r\n    const date = new Date(milliseconds);\r\n    const dayList = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    const monthList = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n    let dayOfWeek = dayList[date.getDay()];\r\n    let month = monthList[date.getMonth()];\r\n    let hour = date.getHours();\r\n    let minute = date.getMinutes();\r\n    let second = date.getSeconds();\r\n\r\n    hour = (hour >= 12) ? hour - 12 : hour;\r\n    let prepand = (hour >= 12) ? \" PM \" : \" AM \";\r\n\r\n    if (hour === 0 && prepand === ' PM ') {\r\n        if (minute === 0 && second === 0) {\r\n            hour = 12;\r\n            prepand = ' Noon';\r\n        } else {\r\n            hour = 12;\r\n            prepand = ' PM';\r\n        }\r\n    }\r\n    if (hour === 0 && prepand === ' AM ') {\r\n        if (minute === 0 && second === 0) {\r\n            hour = 12;\r\n            prepand = ' Midnight';\r\n        } else {\r\n            hour = 12;\r\n            prepand = ' AM';\r\n        }\r\n    }\r\n    return `${dayOfWeek}, ${month} ${date.getDate()} ${date.getFullYear()} ${hour}:${minute} ${prepand}`;\r\n};\r\n\r\nexport const PASSWORD_VERY_WEAK = 1;\r\nexport const PASSWORD_WEAK = 2;\r\nexport const PASSWORD_GOOD = 3;\r\nexport const PASSWORD_STRONG = 4;\r\nexport const PASSWORD_VERY_STRONG = 5;\r\nconst passwordBlacklist = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\r\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\r\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\r\n\r\n/**\r\n * This function is used to check the strength of the password.\r\n *\r\n * @param {*} password\r\n */\r\nexport const checkPasswordStrength = password => {\r\n    let strength = 0;\r\n    const minLength = 8;\r\n    // If the password length is less than or equal to minLength\r\n    if (password.length < minLength) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    } else {\r\n        strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\r\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\r\n        // strength = PASSWORD_WEAK;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\r\n    if (password.length > minLength &&\r\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\r\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\r\n        // strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\r\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_STRONG;\r\n    }\r\n\r\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\r\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_VERY_STRONG;\r\n    }\r\n\r\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    }\r\n\r\n    return strength;\r\n};\r\n\r\n\r\n/**\r\n * Convert a Delta object (obtained using ReactQuill to create rich text) to HTML\r\n *\r\n * @param {*} ops\r\n */\r\nexport const convertQuillDeltaToHTML = ops => {\r\n    if (!ops) {\r\n        return null;\r\n    }\r\n    let cfg = {};\r\n    /**\r\n     * Delta object obtained using ReactQuill has the following format:\r\n     * {\r\n     *      \"ops\": [\r\n     *          {},\r\n     *          {}\r\n     *      ]\r\n     * }\r\n     *\r\n     * This object is stored in the database.\r\n     * However, we only need the \"ops\" array to convert to HTML.\r\n     * So, after converting the JSON string to JSON, we need to retrieve the \"ops\" array so that the HTML tree can be created.\r\n     */\r\n    let converter = new QuillDeltaToHtmlConverter(ops, cfg);\r\n    return converter.convert();\r\n};\r\n\r\n\r\n/**\r\n * This function is used to calculate the difference in date between a specified date (in milliseconds) and the current date\r\n *\r\n * @param {*} milliseconds\r\n */\r\nexport const dateDiff = (milliseconds) => {\r\n    const currentDate = new Date();\r\n    if (milliseconds - currentDate.getTime() < 0) {\r\n        return 0;\r\n    }\r\n    const dateDiff = Math.abs(milliseconds - currentDate.getTime()); // difference\r\n    return (dateDiff / (24 * 60 * 60 * 1000)).toFixed(0); //Convert values days and return value\r\n};\r\n\r\n/**\r\n * This function will find addresses based on postcode\r\n *\r\n * @param {*} postcode\r\n */\r\nexport const findAddress = async (postcode) => {\r\n    const GET_ADDRESS_API_KEY = \"Wbj4a1np5EejXhsnpv3RXQ19730\";\r\n    const addressQuery = `https://api.getAddress.io/find/${postcode}?api-key=${GET_ADDRESS_API_KEY}&sort=True&format=True`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        fetch(addressQuery)\r\n            .then(results => {\r\n                return results.json();\r\n            })\r\n            .then(data => {\r\n                let results = {\r\n                    apiAddresses: [], // addresses to store information to database\r\n                    formattedAddresses: [], // displayed addresses\r\n                    error: false\r\n                };\r\n                // no addresses can be found\r\n                if (!data.addresses) {\r\n                    results.error = true;\r\n                    return resolve(results);\r\n                }\r\n                data.addresses\r\n                    .forEach(address => {\r\n                        results.apiAddresses.push(address);\r\n                        // each address consists of 5 elements (address 1, address 2, address 3, town/city, postcode)\r\n                        let formattedAddress = \"\";\r\n                        address.forEach((element, index) => {\r\n                            if (element !== \"\") {\r\n                                formattedAddress += (element + \", \");\r\n                            }\r\n                        });\r\n                        formattedAddress = formattedAddress.trim();\r\n                        if (formattedAddress[formattedAddress.length - 1] === \",\") {\r\n                            formattedAddress = formattedAddress.slice(0, formattedAddress.length - 1);\r\n                        }\r\n                        results.formattedAddresses.push(formattedAddress);\r\n                    });\r\n                return resolve(results);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to calculate the equity gain based on the amount of money pledged\r\n * @param moneyPledge\r\n * @param fundTarget\r\n * @param equityOffered\r\n */\r\nexport const calculateEquityGain = (moneyPledge, fundTarget, equityOffered) => {\r\n    return ((moneyPledge * equityOffered) / fundTarget).toFixed(2);\r\n};\r\n\r\n/**\r\n * This function is used to calculate the amount of money pledged for this project\r\n *\r\n * @param pledges\r\n * @returns {number}\r\n */\r\nexport const calculatePledgesAmount = pledges => {\r\n\r\n    let pledgesAmount = 0;\r\n\r\n    if (!pledges || pledges.length === 0) {\r\n        return pledgesAmount;\r\n    }\r\n\r\n    pledges.forEach(pledge => {\r\n        if (pledge.amount !== '') {\r\n            pledgesAmount += pledge.amount;\r\n        }\r\n    });\r\n\r\n    return pledgesAmount;\r\n};\r\n\r\n/**\r\n * This function is used to convert a string to a number\r\n * Note: in this case, comma is considered the thousands-separator\r\n *\r\n * @param inputString\r\n * @returns {null|number}\r\n */\r\nexport const getNumberFromInputString = inputString => {\r\n\r\n    // user enters decimal numbers\r\n    if (inputString.includes('.')) {\r\n        return null;\r\n    }\r\n\r\n    let commaSplits = inputString.split(',');\r\n\r\n    if (commaSplits.length > 1) {\r\n        let invalidSeparator = false;\r\n        // check if the input string has valid comma separators\r\n        commaSplits.forEach((part, index) => {\r\n            if (index === 0) {\r\n                if (part.length > 3 || part.length < 1) {\r\n                    invalidSeparator = true;\r\n                }\r\n            } else {\r\n                if (part.length !== 3) {\r\n                    invalidSeparator = true;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (invalidSeparator) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    let commaFreeString = inputString.replace(/,/g, '');\r\n    // check if the string is a number\r\n    if (isNaN(commaFreeString) === true) {\r\n        return null;\r\n    }\r\n\r\n    let number = parseFloat(commaFreeString);\r\n    if (number < 0) {\r\n        return null;\r\n    }\r\n\r\n    return number;\r\n};\r\n\r\n/**\r\n * Construct file name to be uploaded to firebase storage\r\n *\r\n * @param document\r\n * @param newStorageID\r\n * @returns {string}\r\n */\r\nexport const constructStorageFileName = (document, newStorageID) => {\r\n\r\n    let constructedName = '';\r\n\r\n    let originalName = document.file.name;\r\n    let nameSplits = originalName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT);\r\n    // file downloaded from invest west server\r\n    if (nameSplits.length > 1) {\r\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + nameSplits[1];\r\n    }\r\n    // file from user's computer\r\n    else {\r\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + originalName;\r\n    }\r\n\r\n    return constructedName;\r\n};\r\n\r\n/**\r\n * Check if a LinkedIn URL is valid\r\n *\r\n * @param url\r\n * @returns {boolean|boolean | *}\r\n */\r\nexport const isValidLinkedInURL = url => {\r\n    if (!url) {\r\n        return true;\r\n    }\r\n    return url.startsWith(\"https://www.linkedin.com/in/\");\r\n};\r\n\r\nexport const GET_PLAIN_LOGO = 1;\r\nexport const GET_LOGO_WITH_TEXT = 2;\r\nexport const getLogoFromGroup = (getLogoType, groupProperties) => {\r\n    if (!groupProperties) {\r\n        return null;\r\n    }\r\n\r\n    switch (getLogoType) {\r\n        case GET_PLAIN_LOGO:\r\n            if (!groupProperties.hasOwnProperty('plainLogo')\r\n                || (groupProperties.hasOwnProperty('plainLogo') && groupProperties.plainLogo === null)\r\n            ) {\r\n                return null;\r\n            }\r\n            return groupProperties.plainLogo[groupProperties.plainLogo.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\r\n        case GET_LOGO_WITH_TEXT:\r\n            if (!groupProperties.hasOwnProperty('logoWithText')\r\n                || (groupProperties.hasOwnProperty('logoWithText') && groupProperties.logoWithText === null)\r\n            ) {\r\n                return null;\r\n            }\r\n            return groupProperties.logoWithText[groupProperties.logoWithText.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Get the user's home group\r\n *\r\n * @param groupsUserIsIn\r\n * @returns {*}\r\n */\r\nexport const getUserHomeGroup = groupsUserIsIn => {\r\n    const index = groupsUserIsIn.findIndex(group => group.invitedUser.requestedToJoin === false);\r\n    if (index !== -1) {\r\n        return groupsUserIsIn[index];\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Check if a project can be edited\r\n *\r\n * @param user\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const shouldAProjectBeEdited = (user, project) => {\r\n    if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n        return false;\r\n    }\r\n\r\n    if (user.type === DB_CONST.TYPE_ADMIN) {\r\n        return !(project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL\r\n            || project.status === DB_CONST.PROJECT_STATUS_FAILED\r\n            || project.status === DB_CONST.PROJECT_STATUS_REJECTED\r\n        );\r\n    }\r\n\r\n    // user is an issuer, but not the owner of the project\r\n    if (user.id !== project.issuerID) {\r\n        return false;\r\n    }\r\n\r\n    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n        || project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n    ) {\r\n        return true;\r\n    }\r\n\r\n    if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n        return project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\n/**\r\n * Check if a hex color code is valid\r\n *\r\n * @param hexColorCode\r\n * @returns {boolean}\r\n */\r\nexport const isValidHexColorCode = (hexColorCode) => {\r\n    let RegExp = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\r\n    return RegExp.test(hexColorCode);\r\n};\r\n\r\n/**\r\n * Check if a website URL is valid\r\n *\r\n * @param url\r\n * @returns {boolean}\r\n */\r\nexport const isValidWebURL = (url) => {\r\n    let RegExp = /^(http|https):\\/\\/(([a-zA-Z0-9$\\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\\/(([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\\/([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\\?([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?(\\#([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?)?$/;\r\n    return RegExp.test(url);\r\n};\r\n\r\n/**\r\n * Check is an email address is valid\r\n *\r\n * @param email\r\n * @returns {boolean}\r\n */\r\nexport const isValidEmailAddress = (email) => {\r\n    let RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return RegExp.test(email.trim().toLowerCase());\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = project => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = project => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = project => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = project => {\r\n    return project.hasOwnProperty('temporarilyClosed') && project.temporarilyClosed === true;\r\n};","export const CLOSE_FEEDBACK_SNACKBAR = 'CLOSE_FEEDBACK_SNACKBAR';\r\nexport const closeFeedbackSnackbar = () => {\r\n    return {\r\n        type: CLOSE_FEEDBACK_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const SET_FEEDBACK_SNACKBAR_CONTENT= 'SET_FEEDBACK_SNACKBAR_CONTENT';\r\nexport const setFeedbackSnackbarContent = (message, color, position) => {\r\n    return {\r\n        type: SET_FEEDBACK_SNACKBAR_CONTENT,\r\n        message,\r\n        color,\r\n        position\r\n    }\r\n};\r\n\r\nexport const RESET_STATES_WHEN_SNACKBAR_CLOSED = 'RESET_STATES_WHEN_SNACKBAR_CLOSED';\r\nexport const resetStatesWhenSnackbarClosed = () => {\r\n    return {\r\n        type: RESET_STATES_WHEN_SNACKBAR_CLOSED\r\n    }\r\n};","import {\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_ERROR,\r\n    UPLOAD_DONE_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as myUtils from '../../utils/utils';\r\nimport {UPLOADING} from  './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const TOGGLE_EDIT_IMAGE_DIALOG = 'TOGGLE_EDIT_IMAGE_DIALOG';\r\nexport const toggleEditImageDialog = mode => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n            mode, // upload logo (first time or not) or profile picture\r\n            user: getState().auth.user\r\n        });\r\n    }\r\n};\r\n\r\nexport const SET_IMAGE_EDITOR_REFERENCE = 'SET_IMAGE_EDITOR_REFERENCE';\r\nexport const setImageEditorReference = editor => {\r\n    return {\r\n        type: SET_IMAGE_EDITOR_REFERENCE,\r\n        editor\r\n    }\r\n};\r\n\r\nexport const LOADING_IMAGE_FILE = 'LOADING_IMAGE_FILE';\r\nexport const IMAGE_FILES_LOADED = 'IMAGE_FILES_LOADED';\r\nexport const handleImageFilesChanged = files => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_IMAGE_FILE\r\n        });\r\n\r\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\r\n\r\n        dispatch({\r\n            type: IMAGE_FILES_LOADED,\r\n            blob\r\n        });\r\n    }\r\n};\r\n\r\nexport const handleImageFileError = (error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n            message: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n            color: \"error\",\r\n            position: \"bottom\"\r\n        };\r\n    }\r\n};\r\n\r\nexport const LOADING_PREVIOUS_IMAGE = 'LOADING_PREVIOUS_IMAGE';\r\nexport const FINISHED_LOADING_PREVIOUS_IMAGE = 'FINISHED_LOADING_PREVIOUS_IMAGE';\r\nexport const handlePreviousImageItemClick = index => {\r\n    return (dispatch, getState) => {\r\n\r\n        dispatch({\r\n            type: LOADING_PREVIOUS_IMAGE\r\n        });\r\n\r\n        // send request through a CORS proxy can avoid cors problem\r\n        // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\r\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n\r\n        fetch(proxyUrl + getState().editImage.previousPhotos[index].url)\r\n            .then(response => {\r\n                return response.blob();\r\n            })\r\n            .then(blob => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_PREVIOUS_IMAGE,\r\n                    selectedIndex: index,\r\n                    blob,\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const IMAGE_ZOOM_CHANGED = 'IMAGE_ZOOM_CHANGED';\r\nexport const handleZoomSliderChanged = (event, newValue) => {\r\n    return {\r\n        type: IMAGE_ZOOM_CHANGED,\r\n        zoom: newValue\r\n    }\r\n};\r\n\r\nexport const CANCEL_EDITING_CURRENT_IMAGE = 'CANCEL_EDITING_CURRENT_IMAGE';\r\nexport const cancelEditingCurrentImage = () => {\r\n    return {\r\n        type: CANCEL_EDITING_CURRENT_IMAGE\r\n    }\r\n};\r\n\r\nexport const EDITED_IMAGE_OBTAINED = 'EDITED_IMAGE_OBTAINED';\r\nexport const viewEditedImagePreview = () => {\r\n    return (dispatch, getState) => {\r\n        const imgEditor = getState().editImage.imgEditor;\r\n\r\n        getEditedImage(imgEditor)\r\n            .then(blob => {\r\n                dispatch({\r\n                    type: EDITED_IMAGE_OBTAINED,\r\n                    blob\r\n                });\r\n            });\r\n    }\r\n};\r\n/**\r\n * Util function to get edited image\r\n *\r\n * @param imgEditor\r\n * @returns {Promise<unknown>}\r\n */\r\nconst getEditedImage = async (imgEditor) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (imgEditor && !isNaN(imgEditor.getCroppingRect().x)) {\r\n            // This returns a HTMLCanvasElement, it can be made into a data URL or a blob,\r\n            // drawn on another canvas, or added to the DOM.\r\n            imgEditor.getImage().toBlob(blob => {\r\n                return resolve(blob);\r\n            }, 'image/jpg');\r\n        }\r\n        else {\r\n            return reject();\r\n        }\r\n    });\r\n};\r\n\r\nexport const CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE = 'CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE';\r\nexport const handleSaveEditedImage = () => {\r\n    return (dispatch, getState) => {\r\n        if (getState().editImage.mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n            getEditedImage(getState().editImage.imgEditor)\r\n                .then(blob => {\r\n                    dispatch({\r\n                        type: CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE,\r\n                        blob\r\n                    });\r\n                });\r\n            return;\r\n        }\r\n\r\n        getEditedImage(getState().editImage.imgEditor)\r\n            .then(blob => {\r\n                // dismiss edit image dialog\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                    waitForUploading: true\r\n                });\r\n                // start uploading image\r\n                uploadImage(dispatch, getState().auth.user, getState().editImage, blob);\r\n            });\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload an image (logo or profile picture)\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const uploadImage = async (dispatch, user, editImageState, blob) => {\r\n    const {\r\n        mode,\r\n        imgPreIndex\r\n    } = editImageState;\r\n\r\n    let firebaseStorage = firebase.storage();\r\n    let firebaseDB = firebase.database();\r\n\r\n    if (mode !== UPLOAD_PROFILE_PICTURE_MODE && mode !== UPLOAD_LOGO_FIRST_TIME_MODE && mode !== UPLOAD_LOGO_MODE) {\r\n        return;\r\n    }\r\n\r\n    dispatch({\r\n        type: UPLOADING,\r\n        mode,\r\n        progress: 0\r\n    });\r\n\r\n    let storageID = 0;\r\n    let storageLocation = '';\r\n\r\n    // upload logo\r\n    if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n\r\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n        if (imgPreIndex !== -1) {\r\n            // don't need to check for BusinessProfile and logo nodes here because imgPreIndex only be set if the user already has images uploaded\r\n            const imgName = user.BusinessProfile.logo[imgPreIndex].storageID;\r\n            // delete old image\r\n            await firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.LOGOS_CHILD}/${imgName}`)\r\n                .delete();\r\n        } else {\r\n            // do nothing here\r\n        }\r\n        storageID = myUtils.getCurrentDate();\r\n        storageLocation = `${DB_CONST.LOGOS_CHILD}/${storageID}`;\r\n    }\r\n    // upload profile picture\r\n    else if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\r\n\r\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n        if (imgPreIndex !== -1) {\r\n            // don't need to check for profilePicture node here because imgPreIndex only be set if the user already has images uploaded\r\n            const imgName = user.profilePicture[imgPreIndex].storageID;\r\n            // delete old image\r\n            await firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.PROFILE_PICTURES_CHILD}/${imgName}`)\r\n                .delete();\r\n        } else {\r\n            // do nothing here\r\n        }\r\n        storageID = myUtils.getCurrentDate();\r\n        storageLocation = `${DB_CONST.PROFILE_PICTURES_CHILD}/${storageID}`;\r\n    }\r\n    // mode invalid\r\n    else {\r\n        return;\r\n    }\r\n\r\n    const storageRef = firebaseStorage\r\n        .ref(DB_CONST.USERS_CHILD)\r\n        .child(user.id)\r\n        .child(storageLocation);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // upload logo to firebase storage\r\n        const uploadTask = storageRef.put(blob);\r\n        uploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode,\r\n                progress: progress.toFixed(0)\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100\r\n            });\r\n\r\n            return reject(error);\r\n            // logo successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded logo\r\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\r\n\r\n                const imgUploadedObj = {\r\n                    storageID: storageID,\r\n                    url: imgDownloadURL\r\n                };\r\n\r\n                let prevNodeImgs = [];\r\n                let firebaseRef = firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .child(user.id);\r\n\r\n                // upload logo\r\n                if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\r\n                    // user has not uploaded any images\r\n                    if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\r\n                        prevNodeImgs = [];\r\n                        prevNodeImgs.push(imgUploadedObj);\r\n                    }\r\n                    // user has uploaded images\r\n                    else {\r\n                        prevNodeImgs = user.BusinessProfile.logo;\r\n\r\n                        // edit previous image --> don't to save new, just need to edit the node instead\r\n                        if (imgPreIndex !== -1) {\r\n                            prevNodeImgs.splice(imgPreIndex, 1);\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                        // upload new image\r\n                        else {\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                    }\r\n\r\n                    firebaseRef = firebaseRef\r\n                        .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n                        .child(DB_CONST.LOGO_CHILD);\r\n                }\r\n                // upload profile picture\r\n                else {\r\n                    // user has not uploaded any images\r\n                    if (!user.profilePicture) {\r\n                        prevNodeImgs = [];\r\n                        prevNodeImgs.push(imgUploadedObj);\r\n                    } else {\r\n                        prevNodeImgs = user.profilePicture;\r\n\r\n                        // edit previous image --> don't to save new, just need to edit the node instead\r\n                        if (imgPreIndex !== -1) {\r\n                            prevNodeImgs.splice(imgPreIndex, 1);\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                        // upload new image\r\n                        else {\r\n                            prevNodeImgs.forEach(imgItem => {\r\n                                imgItem.removed = true;\r\n                            });\r\n                            prevNodeImgs.push(imgUploadedObj);\r\n                        }\r\n                    }\r\n\r\n                    firebaseRef = firebaseRef\r\n                        .child(DB_CONST.PROFILE_PICTURE_CHILD);\r\n                }\r\n\r\n                // update firebase realtime database\r\n                firebaseRef\r\n                    .set(prevNodeImgs)\r\n                    .then(() => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_DONE_MODE,\r\n                            progress: 100\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                            waitForUploading: false\r\n                        });\r\n\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_ERROR,\r\n                            progress: 100\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\r\n                            waitForUploading: false\r\n                        });\r\n\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    Divider,\r\n    IconButton,\r\n    Typography,\r\n    CircularProgress,\r\n    Slider\r\n} from '@material-ui/core';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Image\r\n} from 'react-bootstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport FlexView from 'react-flexview';\r\nimport Files from 'react-files';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport AvatarEditor from 'react-avatar-editor';\r\n\r\nimport {\r\n    UPLOAD_PROFILE_PICTURE_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.auth.user,\r\n\r\n        open: state.editImage.editImageDialogOpen,\r\n        mode: state.editImage.mode,\r\n        previousPhotos: state.editImage.previousPhotos,\r\n        imgPreEdited: state.editImage.imgPreEdited,\r\n        imgPreEditedLoaded: state.editImage.imgPreEditedLoaded,\r\n        imgPreIndex: state.editImage.imgPreIndex,\r\n        imgEdited: state.editImage.imgEdited,\r\n        imgZoom: state.editImage.imgZoom,\r\n\r\n        isMobile: state.MediaQueryState.isMobile\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onClose: () => dispatch(editImageActions.toggleEditImageDialog(null)),\r\n        setEditorReference: (editor) => dispatch(editImageActions.setImageEditorReference(editor)),\r\n        handleImageFilesChanged: (files) => dispatch(editImageActions.handleImageFilesChanged(files)),\r\n        handleImageFileError: (error, file) => dispatch(editImageActions.handleImageFileError(error, file)),\r\n        handleSliderChanged: (event, newValue) => dispatch(editImageActions.handleZoomSliderChanged(event, newValue)),\r\n        onPreviousImageItemClick: (index) => dispatch(editImageActions.handlePreviousImageItemClick(index)),\r\n        cancelEditingCurrentImage: () => dispatch(editImageActions.cancelEditingCurrentImage()),\r\n        viewEditedImagePreview: () => dispatch(editImageActions.viewEditedImagePreview()),\r\n        saveEditedImage: () => dispatch(editImageActions.handleSaveEditedImage()),\r\n\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\r\n    }\r\n};\r\n\r\nclass EditImageDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            open,\r\n            mode,\r\n            previousPhotos,\r\n            imgPreEdited,\r\n            imgPreEditedLoaded,\r\n            imgPreIndex,\r\n            imgEdited,\r\n            imgZoom,\r\n\r\n            onClose,\r\n            setEditorReference,\r\n            handleImageFilesChanged,\r\n            handleImageFileError,\r\n            handleSliderChanged,\r\n            onPreviousImageItemClick,\r\n            cancelEditingCurrentImage,\r\n            viewEditedImagePreview,\r\n            saveEditedImage,\r\n\r\n            closeFeedbackSnackbar,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={open}\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                fullScreen={isMobile}\r\n                onClose={onClose}\r\n                {...other}\r\n            >\r\n                <DialogContent style={{ padding: 0 }} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters >\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12}\r\n                                style={{\r\n                                    backgroundColor: colors.kick_starter_background_color_1,\r\n                                    paddingTop: 6,\r\n                                    paddingBottom: 6,\r\n                                    paddingLeft: 15,\r\n                                    paddingRight: 15\r\n                                }}\r\n                            >\r\n                                <FlexView vAlignContent=\"center\" >\r\n                                    <FlexView grow={8} >\r\n                                        <Typography variant=\"body1\" >\r\n                                            {\r\n                                                mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                                                    ?\r\n                                                    \"Upload profile picture\"\r\n                                                    :\r\n                                                    \"Upload logo\"\r\n                                            }\r\n                                        </Typography>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" >\r\n                                        <IconButton onClick={onClose} >\r\n                                            <CloseIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider/>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 18 }} >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ marginBottom: 25 }} >Upload a new photo or choose from your previous photos</Typography>\r\n                                    <Files\r\n                                        className={css(styles.img_drop_zone)}\r\n                                        onChange={handleImageFilesChanged}\r\n                                        onError={handleImageFileError}\r\n                                        accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                        minFileSize={0}\r\n                                        multiple\r\n                                        clickable\r\n                                        onClick={closeFeedbackSnackbar}\r\n                                    >\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                            <AddIcon fontSize=\"small\" style={{ marginRight: 8 }} />\r\n                                            Upload photo\r\n                                        </FlexView>\r\n                                    </Files>\r\n\r\n                                    <FlexView marginTop={22} hAlignContent=\"center\" style={{ position: 'relative', width: \"100%\", height: 325 }} >\r\n                                        <AvatarEditor\r\n                                            ref={setEditorReference}\r\n                                            image={imgPreEdited}\r\n                                            width={270}\r\n                                            height={270}\r\n                                            border={25}\r\n                                            borderRadius={150}\r\n                                            disableBoundaryChecks={false}\r\n                                            disableHiDPIScaling={false}\r\n                                            scale={imgZoom}\r\n                                            style={{\r\n                                                position: 'absolute',\r\n                                                top: 0\r\n                                            }}\r\n                                        />\r\n                                        {\r\n                                            imgPreEditedLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    hAlignContent=\"center\"\r\n                                                    vAlignContent=\"center\"\r\n                                                    style={{ position: 'absolute', width: \"100%\", height: \"100%\", top: 0, zIndex: 1 }}\r\n                                                >\r\n                                                    <CircularProgress color=\"primary\" />\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        this.renderSelectedPreviousPhotoStatus()\r\n                                    }\r\n\r\n                                    <FlexView width={310} marginTop={15} vAlignContent=\"center\" >\r\n                                        <ImageIcon fontSize=\"small\"/>\r\n                                        <Slider\r\n                                            min={1}\r\n                                            max={2.5}\r\n                                            step={0.001}\r\n                                            value={imgZoom}\r\n                                            onChange={handleSliderChanged}\r\n                                            style={{ marginLeft: 11, marginRight: 11 }}\r\n                                        />\r\n                                        <ImageIcon fontSize=\"large\"/>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView marginTop={15} hAlignContent=\"right\" >\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"outlined\"\r\n                                            color=\"primary\"\r\n                                            onClick={() => cancelEditingCurrentImage()}\r\n                                        >Cancel</Button>\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            disabled={!imgPreEdited}\r\n                                            onClick={() => viewEditedImagePreview()}\r\n                                            style={{ marginLeft: 16, marginRight: 16 }} >Preview</Button>\r\n                                        <Button\r\n                                            size=\"medium\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            disabled={!imgPreEdited}\r\n                                            onClick={() => saveEditedImage()}\r\n                                        >Save</Button>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        !imgEdited\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            (\r\n                                                <FlexView marginTop={20} width={270} height={270} >\r\n                                                    <Image\r\n                                                        src={window.URL.createObjectURL(imgEdited)}\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        style={{ width: \"100%\", height: \"auto\", objectFit: \"scale-down\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            )\r\n                                    }\r\n\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider/>\r\n                            </Col>\r\n\r\n                            {\r\n                                // previous photos set to null --> don't want to display previous photos\r\n                                !previousPhotos\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 15 }} >\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\" >Your photos</Typography>\r\n\r\n                                        <Row noGutters style={{ padding: 12 }} >\r\n                                            {\r\n                                                previousPhotos\r\n                                                    .sort((photo1, photo2) => photo2.storageID - photo1.storageID)\r\n                                                    .map((previousPhoto, index) => (\r\n                                                        <Col\r\n                                                            key={index}\r\n                                                            xs={6}\r\n                                                            sm={4}\r\n                                                            md={3}\r\n                                                            lg={3}\r\n                                                            onClick={() => onPreviousImageItemClick(index)}\r\n                                                        >\r\n                                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ width: \"100%\", padding: 5 }} >\r\n                                                                <Image\r\n                                                                    key={index}\r\n                                                                    src={previousPhoto.url}\r\n                                                                    className={css(styles.previous_img_item_selected)}\r\n                                                                    style={{\r\n                                                                        height: 128,\r\n                                                                        width: 128,\r\n                                                                        objectFit: \"contain\"\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Render selected previous photo's status\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderSelectedPreviousPhotoStatus = () => {\r\n        const {\r\n            user,\r\n            imgPreIndex,\r\n            mode\r\n        } = this.props;\r\n\r\n        let msg = '';\r\n\r\n        if (imgPreIndex === -1) {\r\n            return null;\r\n        }\r\n\r\n        // upload profile picture\r\n        if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\r\n            // user has no previous profile pictures\r\n            if (!user.profilePicture) {\r\n                return null;\r\n            }\r\n            // user has previous profile pictures\r\n            else {\r\n                // the selected photo is not the current profile picture\r\n                if (imgPreIndex !== user.profilePicture.findIndex(profilePic => !profilePic.hasOwnProperty('removed'))) {\r\n                    msg = 'This photo is a previous profile picture.';\r\n                } else {\r\n                    msg = 'This photo is the current profile picture.';\r\n                }\r\n            }\r\n        }\r\n        // upload logo\r\n        else {\r\n            // user has no previous logos\r\n            if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\r\n                return null;\r\n            }\r\n            // user has previous logos\r\n            else {\r\n                // the selected photo is not the current logo\r\n                if (imgPreIndex !== user.BusinessProfile.logo.findIndex(logo => !logo.hasOwnProperty('removed'))) {\r\n                    msg = 'This photo is a previous logo.';\r\n                } else {\r\n                    msg = 'This photo is the current logo.';\r\n                }\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 12 }}>{msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => (<EditImageDialog {...props} forwardedRef={ref}/>))\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    img_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    previous_img_item_selected: {\r\n        ':hover': {\r\n            border: `4px solid ${colors.primaryColor}`,\r\n            cursor: 'pointer',\r\n            opacity: 0.90\r\n        }\r\n    }\r\n});","import {\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_DONE_MODE,\r\n    UPLOAD_ERROR\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {UPLOADING} from  './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const TOGGLE_EDIT_VIDEO_DIALOG = 'TOGGLE_EDIT_VIDEO_DIALOG';\r\nexport const toggleEditVideoDialog = mode => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n            mode, // upload video (first time or not)\r\n            user: getState().auth.user\r\n        });\r\n    }\r\n};\r\n\r\nexport const VIDEO_TYPE_CHOSEN = 'VIDEO_TYPE_CHOSEN';\r\nexport const chooseVideoType = videoType => {\r\n    return {\r\n        type: VIDEO_TYPE_CHOSEN,\r\n        videoType\r\n    }\r\n};\r\n\r\nexport const VIDEO_URL_CHANGED = 'VIDEO_URL_CHANGED';\r\nexport const handleVideoURLChanged = event => {\r\n    return {\r\n        type: VIDEO_URL_CHANGED,\r\n        url: event.target.value\r\n    }\r\n};\r\n\r\nexport const VIDEO_FILE_CHANGED = 'VIDEO_FILE_CHANGED';\r\nexport const handleVideoFilesChanged = files => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\r\n            return;\r\n        }\r\n        const blob = new Blob([files[files.length - 1]], {type: 'video/mp4'});\r\n        dispatch({\r\n            type: VIDEO_FILE_CHANGED,\r\n            blob\r\n        });\r\n    }\r\n};\r\n\r\nexport const VIDEO_FILE_ERROR = 'VIDEO_FILE_ERROR';\r\nexport const handleVideoFileError = (error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n            message: `Video is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n            color: \"error\",\r\n            position: \"bottom\"\r\n        };\r\n    }\r\n};\r\n\r\nexport const CREATE_BUSINESS_PROFILE_SAVE_VIDEO = 'CREATE_BUSINESS_PROFILE_SAVE_VIDEO';\r\nexport const handleSaveVideo = () => {\r\n    return (dispatch, getState) => {\r\n        if (getState().editVideo.mode === UPLOAD_VIDEO_FIRST_TIME_MODE) {\r\n            dispatch({\r\n                type: CREATE_BUSINESS_PROFILE_SAVE_VIDEO,\r\n                video: getState().editVideo.videoChosen\r\n            });\r\n            return;\r\n        }\r\n        // dismiss edit image dialog\r\n        dispatch({\r\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n            waitForUploading: true\r\n        });\r\n        // start uploading image\r\n        uploadVideo(dispatch, getState().auth.user, getState().editVideo, getState().editVideo.videoChosen);\r\n    }\r\n};\r\n\r\nexport const PREVIOUS_VIDEO_SELECTED = 'PREVIOUS_VIDEO_SELECTED';\r\nexport const handlePreviousVideoItemClick = index => {\r\n    return {\r\n        type: PREVIOUS_VIDEO_SELECTED,\r\n        selectedIndex: index\r\n    }\r\n};\r\n\r\nexport const CANCEL_EDITING_CURRENT_VIDEO = 'CANCEL_EDITING_CURRENT_VIDEO';\r\nexport const cancelEditingCurrentVideo = () => {\r\n    return {\r\n        type: CANCEL_EDITING_CURRENT_VIDEO\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload intro video to firebase storage\r\n *\r\n * @param dispatch\r\n * @param user\r\n * @param editVideoState\r\n * @param video\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const uploadVideo = async (dispatch, user, editVideoState, video) => {\r\n\r\n    const {\r\n        mode,\r\n        videoPreIndex\r\n    } = editVideoState;\r\n\r\n    dispatch({\r\n        type: UPLOADING,\r\n        mode,\r\n        progress: 0\r\n    });\r\n\r\n    let downloadedPreviousVideo = null;\r\n\r\n    // edit previous image --> overwrite existing one in the storage instead of saving a new entry\r\n    // video entry with storageID = \"\" is the one not stored in Firebase storage\r\n    if (videoPreIndex !== -1) {\r\n        // select previously uploaded video as the current video\r\n        if (user.BusinessProfile.video[videoPreIndex].storageID !== \"\") {\r\n            // send request through a CORS proxy can avoid cors problem\r\n            // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\r\n            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\r\n\r\n            await fetch(proxyUrl + user.BusinessProfile.video[videoPreIndex].url)\r\n                .then(response => {\r\n                    return response.blob();\r\n                })\r\n                .then(blob => {\r\n                    downloadedPreviousVideo = blob;\r\n                });\r\n\r\n            // don't need to check for BusinessProfile and video nodes here because videoPreIndex only be set if the user already has videos uploaded\r\n            const videoName = user.BusinessProfile.video[videoPreIndex].storageID;\r\n            // delete old video, don't need to wait for this to complete as the file will be deleted anyway\r\n            firebase.storage()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(`${DB_CONST.INTRO_VIDEOS_CHILD}/${videoName}`)\r\n                .delete();\r\n        }\r\n        // select previous video URL as the current video\r\n        else {\r\n            const videoUploadedObj = {\r\n                storageID: \"\",\r\n                dateUploaded: utils.getCurrentDate(),\r\n                url: video\r\n            };\r\n\r\n            return new Promise((resolve, reject) => {\r\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        }\r\n    } else {\r\n        // do nothing here\r\n    }\r\n\r\n    // upload a new video URL\r\n    if (typeof (video) === \"string\") {\r\n        const videoUploadedObj = {\r\n            storageID: \"\",\r\n            dateUploaded: utils.getCurrentDate(),\r\n            url: video\r\n        };\r\n\r\n        return new Promise((resolve, reject) => {\r\n            putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                .then(() => {\r\n                    return resolve();\r\n                })\r\n                .catch(error => {\r\n                    return reject(error);\r\n                });\r\n        });\r\n    }\r\n\r\n    const storageID = utils.getCurrentDate();\r\n    const storageLocation = `${DB_CONST.INTRO_VIDEOS_CHILD}/${storageID}`;\r\n\r\n    const storageRef = firebase.storage()\r\n        .ref(DB_CONST.USERS_CHILD)\r\n        .child(user.id)\r\n        .child(storageLocation);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // upload logo to firebase storage\r\n        const videoUploadTask = storageRef.put(downloadedPreviousVideo ? downloadedPreviousVideo : video);\r\n        videoUploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode,\r\n                progress: progress.toFixed(0)\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100\r\n            });\r\n\r\n            return reject(error);\r\n            // video successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded video\r\n            videoUploadTask.snapshot.ref.getDownloadURL().then(videoDownloadURL => {\r\n\r\n                const videoUploadedObj = {\r\n                    storageID: storageID,\r\n                    dateUploaded: storageID,\r\n                    url: videoDownloadURL\r\n                };\r\n\r\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * Handle to put the uploaded video to Firebase realtime\r\n *\r\n * @param dispatch\r\n * @param user\r\n * @param videoUploadedObj\r\n * @param videoPreIndex\r\n * @returns {Promise<unknown>}\r\n */\r\nconst putUploadedVideoToFirebaseRealtime = async (dispatch, user, videoUploadedObj, videoPreIndex) => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n        let prevNodeVideos = [];\r\n        let firebaseRef = firebase.database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(user.id)\r\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n            .child(DB_CONST.INTRO_VIDEO_CHILD);\r\n\r\n        // user has not uploaded any videos\r\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\r\n            prevNodeVideos = [];\r\n            prevNodeVideos.push(videoUploadedObj);\r\n        }\r\n        // user has uploaded videos\r\n        else {\r\n            prevNodeVideos = user.BusinessProfile.video;\r\n\r\n            // edit previous video --> don't need to save new, just need to edit the node instead\r\n            if (videoPreIndex !== -1) {\r\n                prevNodeVideos.splice(videoPreIndex, 1);\r\n                prevNodeVideos.forEach(imgItem => {\r\n                    imgItem.removed = true;\r\n                });\r\n                prevNodeVideos.push(videoUploadedObj);\r\n            }\r\n            // upload new video\r\n            else {\r\n                prevNodeVideos.forEach(imgItem => {\r\n                    imgItem.removed = true;\r\n                });\r\n                prevNodeVideos.push(videoUploadedObj);\r\n            }\r\n        }\r\n\r\n        firebaseRef\r\n            .set(prevNodeVideos)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_DONE_MODE,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n                    waitForUploading: false\r\n                });\r\n\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_ERROR,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\r\n                    waitForUploading: false\r\n                });\r\n\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    Divider,\r\n    IconButton,\r\n    Typography,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport Files from 'react-files';\r\nimport { css, StyleSheet } from 'aphrodite';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nexport const VIDEO_UPLOAD_FILE_SELECTED = 1;\r\nexport const VIDEO_UPLOAD_URL_SELECTED = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.auth.user,\r\n\r\n        allowVideoUpload:\r\n            state.manageClubAttributes.clubAttributes && state.manageClubAttributes.clubAttributes.hasOwnProperty('allowVideoUpload')\r\n                ?\r\n                state.manageClubAttributes.clubAttributes.allowVideoUpload\r\n                :\r\n                false,\r\n\r\n        open: state.editVideo.editVideoDialogOpen,\r\n        mode: state.editVideo.mode,\r\n\r\n        videoTypeSelected: state.editVideo.videoTypeSelected,\r\n        videoChosen: state.editVideo.videoChosen,\r\n        previousVideos: state.editVideo.previousVideos,\r\n        videoPreIndex: state.editVideo.videoPreIndex,\r\n\r\n        isMobile: state.MediaQueryState.isMobile\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onClose: () => dispatch(editVideoActions.toggleEditVideoDialog(null)),\r\n        chooseVideoType: (videoType) => dispatch(editVideoActions.chooseVideoType(videoType)),\r\n        handleVideoURLChanged: (event) => dispatch(editVideoActions.handleVideoURLChanged(event)),\r\n        handleVideoFileChanged: (files) => dispatch(editVideoActions.handleVideoFilesChanged(files)),\r\n        handleVideoFileError: (error, file) => dispatch(editVideoActions.handleVideoFileError(error, file)),\r\n        cancelEditingCurrentVideo: () => dispatch(editVideoActions.cancelEditingCurrentVideo()),\r\n        handlePreviousVideoItemClick: (index) => dispatch(editVideoActions.handlePreviousVideoItemClick(index)),\r\n        handleSaveVideo: () => dispatch(editVideoActions.handleSaveVideo()),\r\n\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\r\n    }\r\n};\r\n\r\nclass EditVideoDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            isMobile,\r\n            open,\r\n            user,\r\n\r\n            allowVideoUpload,\r\n            videoTypeSelected,\r\n\r\n            previousVideos,\r\n            videoChosen,\r\n            videoPreIndex,\r\n\r\n            onClose,\r\n            chooseVideoType,\r\n            handleVideoURLChanged,\r\n            handleVideoFileChanged,\r\n            handleVideoFileError,\r\n            cancelEditingCurrentVideo,\r\n            handlePreviousVideoItemClick,\r\n            handleSaveVideo,\r\n\r\n            closeFeedbackSnackbar,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={open}\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                fullScreen={isMobile}\r\n                onClose={onClose}\r\n                {...other}\r\n            >\r\n                <DialogContent style={{ padding: 0 }} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12}\r\n                                style={{\r\n                                    backgroundColor: colors.kick_starter_background_color_1,\r\n                                    paddingTop: 6,\r\n                                    paddingBottom: 6,\r\n                                    paddingLeft: 15,\r\n                                    paddingRight: 15\r\n                                }}\r\n                            >\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FlexView grow={8} >\r\n                                        <Typography variant=\"body1\">Upload introduction video</Typography>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" >\r\n                                        <IconButton onClick={onClose} >\r\n                                            <CloseIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider />\r\n                            </Col>\r\n\r\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 18 }} >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ marginBottom: 25 }} >Upload a new video or choose from your previous videos</Typography>\r\n\r\n                                    {\r\n                                        allowVideoUpload\r\n                                            ?\r\n                                            <FlexView>\r\n                                                <Button\r\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                    color=\"primary\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    onClick={\r\n                                                        () => chooseVideoType(\r\n                                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                VIDEO_UPLOAD_FILE_SELECTED\r\n                                                        )\r\n                                                    }\r\n                                                >\r\n                                                    {\r\n                                                        videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                            ?\r\n                                                            \"Cancel upload a video\"\r\n                                                            :\r\n                                                            \"Upload a video\"\r\n                                                    }\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                    color=\"primary\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    onClick={\r\n                                                        () => chooseVideoType(\r\n                                                            videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                VIDEO_UPLOAD_URL_SELECTED\r\n                                                        )\r\n                                                    }\r\n                                                    style={{ marginLeft: 20 }}\r\n                                                >\r\n                                                    {\r\n                                                        videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                            ?\r\n                                                            \"Cancel upload a video URL\"\r\n                                                            :\r\n                                                            \"Upload a video URL\"\r\n                                                    }\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <Button\r\n                                                variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\r\n                                                color=\"primary\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                onClick={() => chooseVideoType(VIDEO_UPLOAD_URL_SELECTED)}\r\n                                            >\r\n                                                {\r\n                                                    videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\r\n                                                        ?\r\n                                                        \"Cancel upload a video URL\"\r\n                                                        :\r\n                                                        \"Upload a video URL\"\r\n                                                }\r\n                                            </Button>\r\n                                    }\r\n\r\n                                    {/** Upload video field (upload file or URL) */}\r\n                                    {\r\n                                        !videoTypeSelected\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\r\n                                                ?\r\n                                                <FlexView column marginTop={20} >\r\n                                                    <Files\r\n                                                        className={css(styles.video_drop_zone)}\r\n                                                        onChange={handleVideoFileChanged}\r\n                                                        onError={handleVideoFileError}\r\n                                                        accepts={['video/mp4']}\r\n                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                        minFileSize={0}\r\n                                                        multiple\r\n                                                        clickable\r\n                                                        onClick={closeFeedbackSnackbar}\r\n                                                    >\r\n                                                        <FlexView vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                            <AddIcon fontSize=\"small\" style={{ marginRight: 8 }} />\r\n                                                            Upload video\r\n                                                        </FlexView>\r\n                                                    </Files>\r\n                                                </FlexView>\r\n                                                :\r\n                                                <TextField\r\n                                                    name=\"videoChosen\"\r\n                                                    placeholder=\"Enter your video URL\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={\r\n                                                        !videoChosen\r\n                                                            ?\r\n                                                            ''\r\n                                                            :\r\n                                                            typeof(videoChosen) === \"string\"\r\n                                                                ?\r\n                                                                videoChosen\r\n                                                                :\r\n                                                                ''\r\n                                                    }\r\n                                                    fullWidth\r\n                                                    onChange={handleVideoURLChanged}\r\n                                                    style={{\r\n                                                        marginTop: 20\r\n                                                    }}\r\n                                                />\r\n                                    }\r\n\r\n                                    {/** Preview video */}\r\n                                    {\r\n                                        !videoChosen\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} hAlignContent=\"center\" style={{ width: \"100%\" }} >\r\n                                                <ReactPlayer\r\n                                                    url={\r\n                                                        typeof(videoChosen) === \"string\"\r\n                                                            ?\r\n                                                            videoChosen\r\n                                                            :\r\n                                                            window.URL.createObjectURL(videoChosen)\r\n                                                    }\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                    width=\"100%\"\r\n                                                    height={280}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Previous/current video status */}\r\n                                    {\r\n                                        this.renderSelectedPreviousVideoStatus()\r\n                                    }\r\n\r\n                                    {/** Cancel/Save */}\r\n                                    {\r\n                                        !videoChosen\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} hAlignContent=\"right\" >\r\n                                                <Button\r\n                                                    size=\"medium\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => cancelEditingCurrentVideo()}\r\n                                                    style={{ marginRight: 8 }}\r\n                                                >Cancel\r\n                                                </Button>\r\n                                                <Button\r\n                                                    size=\"medium\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"contained\"\r\n                                                    color=\"primary\"\r\n                                                    disabled={!videoChosen}\r\n                                                    onClick={handleSaveVideo}\r\n                                                    style={{\r\n                                                        marginLeft: 8\r\n                                                    }}\r\n                                                >Save\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Divider style={{ marginTop: 8 }} />\r\n                            </Col>\r\n\r\n                            {/** Previous videos */}\r\n                            {\r\n                                // previous videos set to null --> don't want to display previous videos\r\n                                !previousVideos\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 15 }} >\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\">Your videos</Typography>\r\n\r\n                                        <Row noGutters style={{ padding: 12 }} >\r\n                                            {\r\n                                                previousVideos\r\n                                                    .sort((video1, video2) => video2.dateUploaded - video1.dateUploaded)\r\n                                                    .map((previousVideo, index) => (\r\n                                                        <Col\r\n                                                            key={index}\r\n                                                            xs={6}\r\n                                                            sm={4}\r\n                                                            md={4}\r\n                                                            lg={4}\r\n                                                            onClick={() => handlePreviousVideoItemClick(index)}\r\n                                                        >\r\n                                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ width: \"100%\", padding: 10 }} >\r\n                                                                <ReactPlayer\r\n                                                                    url={previousVideo.url}\r\n                                                                    playing={false}\r\n                                                                    controls={false}\r\n                                                                    playsinline={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                    className={css(styles.previous_video_item_selected)}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        )\r\n    }\r\n\r\n    renderSelectedPreviousVideoStatus = () => {\r\n        const {\r\n            user,\r\n            videoPreIndex,\r\n        } = this.props;\r\n\r\n        let msg = '';\r\n\r\n        if (videoPreIndex === -1) {\r\n            return null;\r\n        }\r\n\r\n        // user has no previous videos\r\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\r\n            return null;\r\n        }\r\n        // user has previous videos\r\n        else {\r\n            // the selected photo is not the current video\r\n            if (videoPreIndex !== user.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))) {\r\n                msg = 'This video is a previous introduction video.';\r\n            }\r\n            else {\r\n                msg = 'This video is the current introduction video.';\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 12 }}>{msg}</Typography>\r\n        );\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <EditVideoDialog {...props} forwardedRef={ref} />)\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    video_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    previous_video_item_selected: {\r\n        ':hover': {\r\n            border: `4px solid ${colors.primaryColor}`,\r\n            cursor: 'pointer',\r\n            opacity: 0.90\r\n        }\r\n    }\r\n});","import React, { Component } from \"react\";\r\nimport {\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport FlexView from \"react-flexview\";\r\nimport { StyleSheet, css } from \"aphrodite\";\r\nimport * as colors from \"../../values/colors\";\r\n\r\nexport default class PageNotFound extends Component {\r\n    render() {\r\n        return (\r\n            <FlexView column hAlignContent=\"center\" marginTop={50} marginLeft=\"10%\" marginRight=\"10%\" >\r\n                <Typography className={css(styles.error_text)} >404 Error</Typography>\r\n                <Typography className={css(styles.page_not_found_text)} >Page not found</Typography>\r\n                <Typography className={css(styles.explain_text)} >We are sorry, the page you requested could not be found.</Typography>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    error_text: {\r\n        fontSize: 65,\r\n        color: colors.primaryColor,\r\n        textAlign: 'center'\r\n    },\r\n\r\n    page_not_found_text: {\r\n        fontSize: 50,\r\n        fontWeight: 'bold',\r\n        marginTop: 30,\r\n        marginBottom: 20,\r\n        textAlign: 'center'\r\n    },\r\n\r\n    explain_text: {\r\n        fontSize: 40,\r\n        color: colors.gray_600,\r\n        textAlign: 'center'\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport PageNotFound from './PageNotFound';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class PageNotFoundWhole extends Component {\r\n    render() {\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                    <Col xs={12} md={12} lg={12} >\r\n                        <FlexView height={1} style={{ backgroundColor: colors.gray_300 }} />\r\n                    </Col>\r\n                    <Col xs={12} md={12} lg={12} >\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}","/**\r\n * Admin interface\r\n */\r\nimport User from \"./user\";\r\n\r\nexport default interface Admin {\r\n    id: string;\r\n    anid: string;\r\n    email: string;\r\n    superAdmin: boolean;\r\n    superGroupAdmin: boolean;\r\n    type: number;\r\n    isInvestWest: boolean;\r\n    dateAdded?: number; // superAdmin doesn't have this field\r\n}\r\n\r\n/**\r\n * Check if a user is an admin\r\n *\r\n * @param user\r\n */\r\nexport const isAdmin = (user: User | Admin): Admin | null => {\r\n    if (\"anid\" in user) {\r\n        return JSON.parse(JSON.stringify(user));\r\n    }\r\n    return null;\r\n}","import GroupProperties from \"./group_properties\";\r\n\r\nexport default interface GroupOfMembership {\r\n    group: GroupProperties;\r\n    joinedDate: number;\r\n    isHomeGroup: boolean;\r\n    userInGroupStatus: number;\r\n}\r\n\r\nexport const getHomeGroup = (groups: GroupOfMembership[]): GroupOfMembership | null => {\r\n    const index = groups.findIndex(group => group.isHomeGroup);\r\n    if (index !== -1) {\r\n        return groups[index];\r\n    }\r\n    return null;\r\n}","/**\r\n * User interface\r\n *\r\n * \"none\" means this user profile doesn't actually exist\r\n */\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../firebase/databaseConsts\";\r\nimport Admin from \"./admin\";\r\nimport Address from \"./address\";\r\n\r\nexport const UserTitles = [\"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Dr.\", \"Prof.\"];\r\n\r\nexport default interface User {\r\n    id: string | \"none\";\r\n    email: string;\r\n    linkedin?: string;\r\n    firstName: string | \"none\";\r\n    lastName: string | \"none\";\r\n    title: string | \"none\";\r\n    profilePicture?: ProfileImage[];\r\n    BusinessProfile?: BusinessProfile;\r\n    type: number;\r\n}\r\n\r\nexport interface BusinessProfile {\r\n    companyName: string;\r\n    companyWebsite: string;\r\n    registrationNo: string;\r\n    sector: string;\r\n    directors: string[];\r\n    registeredOffice: Address;\r\n    tradingAddress: Address;\r\n    logo: ProfileImage[];\r\n    video?: ProfileVideo[];\r\n}\r\n\r\nexport interface ProfileImage {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport interface ProfileVideo {\r\n    storageID: number;\r\n    dateUploaded: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport const isIssuer = (user: User | Admin) => {\r\n    return user.type === TYPE_ISSUER;\r\n}\r\n\r\nexport const isInvestor = (user: User | Admin) => {\r\n    return user.type === TYPE_INVESTOR;\r\n}\r\n\r\nexport const hasBusinessProfile = (user: User) => {\r\n    return user.BusinessProfile !== undefined;\r\n}\r\n\r\nexport const isTradingAddressSameAsRegisteredOffice = (user: User) => {\r\n    return user.BusinessProfile?.registeredOffice.postcode === user.BusinessProfile?.tradingAddress.postcode\r\n        && user.BusinessProfile?.registeredOffice.address1 === user.BusinessProfile?.tradingAddress.address1\r\n        && user.BusinessProfile?.registeredOffice.townCity === user.BusinessProfile?.tradingAddress.townCity\r\n}\r\n\r\nexport const getProfilePicture = (user: User): string | null => {\r\n    if (!user.profilePicture) {\r\n        return null;\r\n    }\r\n\r\n    const index: number = user.profilePicture.findIndex((profilePicture: ProfileImage) =>\r\n        profilePicture.removed === undefined);\r\n\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return user.profilePicture[index].url;\r\n}","import Admin, {isAdmin} from \"../models/admin\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../models/group_of_membership\";\r\nimport {AuthenticationState} from \"../redux-store/reducers/authenticationReducer\";\r\nimport {ManageGroupUrlState} from \"../redux-store/reducers/manageGroupUrlReducer\";\r\nimport User, {isInvestor} from \"../models/user\";\r\n\r\nexport interface CreateProjectRouteParams {\r\n    edit?: string;\r\n    admin?: string;\r\n    issuer?: string;\r\n}\r\n\r\nexport default class Routes {\r\n    static baseGroup: string = \"/groups/:groupUserName\";\r\n\r\n    static nonGroupFront: string = \"/\";\r\n    static groupFront: string = `${Routes.baseGroup}`;\r\n\r\n    static nonGroupSignIn: string = \"/groups/invest-west/signin\";\r\n    static groupSignIn: string = `${Routes.baseGroup}/signin`;\r\n    static superAdminSignIn: string = \"/signin/super-admin\";\r\n\r\n    static nonGroupSignUp:string = \"/groups/invest-west/signup\";\r\n    static groupSignUp: string = `${Routes.baseGroup}/signup/:id?`;\r\n\r\n    static nonGroupAdminDashboard: string = \"/admin\";\r\n    static groupAdminDashboard: string = `${Routes.baseGroup}/admin`;\r\n\r\n    static groupIssuerDashboard: string = `${Routes.baseGroup}/dashboard/issuer`;\r\n\r\n    static groupInvestorDashboard: string = `${Routes.baseGroup}/dashboard/investor`;\r\n\r\n    static nonGroupViewUserProfile: string = \"/view-profile/:userID\";\r\n    static groupViewUserProfile: string = `${Routes.baseGroup}/view-profile/:userID`;\r\n\r\n    static nonGroupEditUserProfile: string = \"/edit-profile/:userID\";\r\n    static groupEditUserProfile: string = `${Routes.baseGroup}/edit-profile/:userID`;\r\n\r\n    static nonGroupCreateOffer: string = \"/create-offer\";\r\n    static groupCreateOffer: string = `${Routes.baseGroup}/create-offer`;\r\n\r\n    static nonGroupViewOffer: string = \"/projects/:projectID\";\r\n    static groupViewOffer: string = `${Routes.baseGroup}/projects/:projectID`;\r\n\r\n    static nonGroupViewPledge: string = \"/pledge\";\r\n    static groupViewPledge: string = `${Routes.baseGroup}/pledge`;\r\n\r\n    static nonGroupViewGroup: string = \"/view-group-details/:viewedGroupUserName\";\r\n    static groupViewGroup: string = `${Routes.baseGroup}/view-group-details/:viewedGroupUserName`;\r\n\r\n    static nonGroupViewResourceDetail: string = \"/resources/:resourceName\";\r\n    static groupViewResourceDetail: string = `${Routes.baseGroup}/resources/:resourceName`;\r\n\r\n    static nonGroupContactUs: string = \"/contact-us\";\r\n    static groupContactUs: string = `${Routes.baseGroup}/contact-us`;\r\n\r\n    static groupHelp: string = `${Routes.baseGroup}/help`;\r\n\r\n    static nonGroupTermsOfUse: string = \"/terms-of-use\";\r\n    static nonGroupPrivacyPolicy: string = \"/privacy-policy\";\r\n    static nonGroupRiskWarning: string = \"/risk-warning-footer\";\r\n    static nonGroupCreatePitchTermsAndConditions: string = \"/create-project-terms-and-conditions\";\r\n    static nonGroupMarketingPreferences: string = \"/marketing-preferences\";\r\n\r\n    static nonGroupAuthAction: string = \"/auth/action\";\r\n\r\n    static error404: string = \"/error/404\";\r\n\r\n    /**\r\n     * Check if a route is a protected one\r\n     *\r\n     * @param route\r\n     */\r\n    public static isProtectedRoute = (route: string) => {\r\n        return route !== Routes.nonGroupFront\r\n            && route !== Routes.groupFront\r\n            && route !== Routes.nonGroupSignIn\r\n            && route !== Routes.groupSignIn\r\n            && route !== Routes.nonGroupSignUp\r\n            && route !== Routes.groupSignUp\r\n            && route !== Routes.nonGroupContactUs\r\n            && route !== Routes.groupContactUs\r\n            && route !== Routes.nonGroupPrivacyPolicy\r\n            && route !== Routes.nonGroupTermsOfUse\r\n            && route !== Routes.nonGroupRiskWarning\r\n            && route !== Routes.nonGroupCreatePitchTermsAndConditions\r\n            && route !== Routes.nonGroupMarketingPreferences\r\n            && route !== Routes.nonGroupAuthAction\r\n            && route !== Routes.error404;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is reserved just for super admin\r\n     *\r\n     * @param route\r\n     */\r\n    public static isRouteReservedForSuperAdmin = (route: string) => {\r\n        return route === Routes.nonGroupAdminDashboard\r\n            || route === Routes.nonGroupViewUserProfile\r\n            || route === Routes.nonGroupEditUserProfile\r\n            || route === Routes.nonGroupCreateOffer\r\n            || route === Routes.nonGroupViewOffer\r\n            || route === Routes.nonGroupViewPledge\r\n            || route === Routes.nonGroupViewGroup;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is dedicated for a group admin\r\n     *\r\n     * @param route\r\n     */\r\n    public static isGroupAdminRoute = (route: string) => {\r\n        return route === Routes.groupAdminDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is dedicated for an issuer\r\n     *\r\n     * @param route\r\n     */\r\n    public static isIssuerDashboardRoute = (route: string) => {\r\n        return route === Routes.groupIssuerDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check  if a route is dedicated for an investor\r\n     *\r\n     * @param route\r\n     */\r\n    public static isInvestorDashboardRoute = (route: string) => {\r\n        return route === Routes.groupInvestorDashboard;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a sign in route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSignInRoute = (route: string) => {\r\n        return route === Routes.nonGroupSignIn || route === Routes.groupSignIn || route === Routes.superAdminSignIn;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a super admin sign in route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSuperAdminSignInRoute = (route: string) => {\r\n        return route === Routes.superAdminSignIn;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a sign up route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSignUpRoute = (route: string) => {\r\n        return route === Routes.nonGroupSignUp || route === Routes.groupSignUp;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is an error route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isErrorRoute = (route: string) => {\r\n        return route === Routes.error404;\r\n    }\r\n\r\n    /**\r\n     * Check if a route is a system public route\r\n     *\r\n     * @param route\r\n     */\r\n    public static isSystemPublicRoute = (route: string) => {\r\n        return route === Routes.nonGroupPrivacyPolicy\r\n            || route === Routes.nonGroupRiskWarning\r\n            || route === Routes.nonGroupTermsOfUse\r\n            || route === Routes.nonGroupCreatePitchTermsAndConditions\r\n            || route === Routes.nonGroupMarketingPreferences;\r\n    }\r\n\r\n    /**\r\n     * Construct public route\r\n     *\r\n     * @param route\r\n     */\r\n    public static constructPublicRoute = (route: \"privacyPolicy\" | \"riskWarning\" | \"termsOfUse\" | \"createPitchTermsAndConditions\" | \"marketingPreferences\") => {\r\n        switch (route) {\r\n            case \"privacyPolicy\":\r\n                return Routes.nonGroupPrivacyPolicy;\r\n            case \"riskWarning\":\r\n                return Routes.nonGroupRiskWarning;\r\n            case \"termsOfUse\":\r\n                return Routes.nonGroupTermsOfUse;\r\n            case \"createPitchTermsAndConditions\":\r\n                return Routes.nonGroupCreatePitchTermsAndConditions;\r\n            case \"marketingPreferences\":\r\n                return Routes.nonGroupMarketingPreferences;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct home route (navigate to Front page)\r\n     *\r\n     * @param routeParams\r\n     * @param ManageGroupUrlState\r\n     * @param AuthenticationState\r\n     */\r\n    public static constructHomeRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\r\n                                        AuthenticationState: AuthenticationState) => {\r\n        let route: string = \"\";\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            if (!routeParams.groupUserName) {\r\n                return Routes.nonGroupFront;\r\n            } else {\r\n                return Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\r\n            }\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\r\n        // an admin MUST use the correct sign in page to sign in\r\n        if (currentAdmin) {\r\n            // current admin is a super admin\r\n            if (currentAdmin.superAdmin) {\r\n                route = Routes.nonGroupFront;\r\n            }\r\n            // current admin is not a super admin\r\n            else {\r\n                if (AuthenticationState.groupsOfMembership.length === 1) {\r\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\r\n                    route = Routes.groupFront.replace(\":groupUserName\", adminGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\r\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\r\n        else {\r\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\r\n            if (routeParams.groupUserName) {\r\n                if (AuthenticationState.groupsOfMembership\r\n                    .filter(groupOfMembership =>\r\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\r\n                ) {\r\n                    route = Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\r\n                } else if (homeGroup) {\r\n                    route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                }\r\n            } else if (homeGroup) {\r\n                route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n            }\r\n        }\r\n\r\n        if (!route) {\r\n            return Routes.nonGroupFront;\r\n        }\r\n\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n    public static constructSignInRoute = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupSignIn.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupSignIn;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct sign up route + with a default value of IW group\r\n     *\r\n     * @param groupUserName\r\n     * @param invitedUserID\r\n     */\r\n    public static constructSignUpRoute = (groupUserName: string, invitedUserID?: string) => {\r\n        if (groupUserName) {\r\n            return Routes.groupSignUp\r\n                .replace(\":groupUserName\", groupUserName)\r\n                .replace(invitedUserID ? \":id?\" : \"/:id?\", invitedUserID ?? \"\");\r\n        } else {\r\n            return Routes.nonGroupSignUp;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construct sign in route (navigate to Sign in page)\r\n     *\r\n     * @param routeParams\r\n     */\r\n    public static constructContactUsRoute = (routeParams: any) => {\r\n        if (routeParams.groupUserName) {\r\n            return Routes.groupContactUs.replace(\":groupUserName\", routeParams.groupUserName);\r\n        } else {\r\n            return Routes.nonGroupContactUs;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Construct dashboard route (navigate to Dashboard page)\r\n     *\r\n     * @param routeParams\r\n     * @param ManageGroupUrlState\r\n     * @param AuthenticationState\r\n     */\r\n    public static constructDashboardRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\r\n                                             AuthenticationState: AuthenticationState) => {\r\n        let route: string = \"\";\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return Routes.constructSignInRoute(routeParams);\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\r\n        // an admin MUST use the correct sign in page to sign in\r\n        if (currentAdmin) {\r\n            // current admin is a super admin\r\n            // --> redirect to super admin dashboard\r\n            if (currentAdmin.superAdmin) {\r\n                route = Routes.nonGroupAdminDashboard;\r\n            }\r\n                // current admin is not a super admin\r\n            // --> redirect to group admin dashboard\r\n            else {\r\n                if (AuthenticationState.groupsOfMembership.length === 1) {\r\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\r\n                    route = Routes.groupAdminDashboard.replace(\":groupUserName\", adminGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\r\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\r\n        else {\r\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\r\n            if (routeParams.groupUserName) {\r\n                if (AuthenticationState.groupsOfMembership\r\n                    .filter(groupOfMembership =>\r\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\r\n                ) {\r\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", routeParams.groupUserName);\r\n                    } else {\r\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", routeParams.groupUserName);\r\n                    }\r\n                } else if (homeGroup) {\r\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                    } else {\r\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                    }\r\n                }\r\n            } else if (homeGroup) {\r\n                if (isInvestor(AuthenticationState.currentUser as User)) {\r\n                    route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                } else {\r\n                    route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (route === \"\") {\r\n            return Routes.constructSignInRoute(routeParams);\r\n        }\r\n        route += \"?tab=Home\";\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view project (offer) route\r\n     *\r\n     * @param groupUserName\r\n     * @param projectID\r\n     */\r\n    public static constructProjectDetailRoute = (groupUserName: string | null, projectID: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewOffer.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupViewOffer;\r\n        }\r\n        route = route.replace(\":projectID\", projectID);\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct create project (offer) route\r\n     *\r\n     * @param groupUserName\r\n     * @param params\r\n     */\r\n    public static constructCreateProjectRoute = (groupUserName: string | null, params?: CreateProjectRouteParams) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupCreateOffer.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupCreateOffer;\r\n        }\r\n\r\n        if (params !== undefined) {\r\n            // edit an offer\r\n            if (params.edit) {\r\n                route += `?edit=${params.edit}`;\r\n            }\r\n            // group admin creates an offer on behalf of an issuer\r\n            else if (params.admin && params.issuer) {\r\n                route += `?admin=${params.admin}&issuer=${params.issuer}`;\r\n            }\r\n        }\r\n\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view group route\r\n     *\r\n     * @param groupUserName\r\n     * @param viewedGroupUserName\r\n     */\r\n    public static constructGroupDetailRoute = (groupUserName: string | null, viewedGroupUserName: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewGroup.replace(\":groupUserName\", groupUserName);\r\n        } else {\r\n            route = Routes.nonGroupViewGroup;\r\n        }\r\n        route = route.replace(\":viewedGroupUserName\", viewedGroupUserName);\r\n        return route;\r\n    }\r\n\r\n    /**\r\n     * Construct view resource detail route\r\n     *\r\n     * @param groupUserName\r\n     * @param resourceName\r\n     */\r\n    public static constructViewResourceDetailRoute = (groupUserName: string | null, resourceName: string) => {\r\n        let route;\r\n        if (groupUserName) {\r\n            route = Routes.groupViewResourceDetail\r\n                .replace(\":groupUserName\", groupUserName)\r\n                .replace(\":resourceName\", resourceName);\r\n        } else {\r\n            route = Routes.nonGroupViewResourceDetail.replace(\":resourceName\", resourceName);\r\n        }\r\n        return route;\r\n    }\r\n}\r\n\r\n\r\n//------------------- OLD ROUTES ---------------------------------------------------------------------------------------\r\nexport const ORIGINAL_WEB_URL = \"https://investwest.online\";\r\n\r\n// angel network path INCLUDING Invest West angel network\r\nexport const GROUP_PATH = \"/groups/:groupUserName\";\r\n\r\n// front with angel network logo\r\nexport const FRONT = GROUP_PATH;\r\n// front with Invest West page --> Only for Invest West super admins\r\nexport const FRONT_INVEST_WEST_SUPER = \"/\";\r\n\r\n// sign in with angel network logo --> only allow admins and users belong to this angel network to login\r\nexport const SIGN_IN = `${GROUP_PATH}/signin`;\r\n// sign in with Invest West logo --> only allow Invest West super admins to login\r\nexport const SIGN_IN_INVEST_WEST_SUPER = \"/signin\";\r\n\r\n// admin dashboard of an angel network --> only allow admins of the angel network to interact\r\nexport const ADMIN = `${GROUP_PATH}/admin`;\r\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const ADMIN_INVEST_WEST_SUPER = \"/admin\";\r\n\r\n// issuer dashboard of an angel network --> only allow issuers of the angel network to interact\r\nexport const DASHBOARD_ISSUER = `${GROUP_PATH}/dashboard/issuer`;\r\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const DASHBOARD_ISSUER_INVEST_WEST_SUPER = \"/dashboard/issuer\";\r\n\r\n// investor dashboard of an angel network --> only allow investors of the angel network to interact\r\nexport const DASHBOARD_INVESTOR = `${GROUP_PATH}/dashboard/investor`;\r\n// investor dashboard of Invest West --> only allow Invest West super admins to interact\r\nexport const DASHBOARD_INVESTOR_INVEST_WEST_SUPER = \"/dashboard/investor\";\r\n\r\n// sign up page for an angel network --> only users who have been invited by this angel network can see\r\nexport const SIGN_UP = `${GROUP_PATH}/signup/:id`;\r\n// sign up page for Invest West --> only Invest West super admins can interact\r\nexport const SIGN_UP_INVEST_WEST_SUPER = \"/signup/:id\";\r\n\r\n// view a user's profile while logged in under an angel network\r\nexport const USER_PROFILE = `${GROUP_PATH}/view-profile/:userID`;\r\n// view a user's profile while logged in under Invest West super admins\r\nexport const USER_PROFILE_INVEST_WEST_SUPER = \"/view-profile/:userID\";\r\n\r\n// edit a user's profile for group admins\r\nexport const EDIT_USER_PROFILE = `${GROUP_PATH}/edit-profile/:userID`;\r\n// edit a user's profile for super admins\r\nexport const EDIT_USER_PROFILE_INVEST_WEST_SUPER = \"/edit-profile/:userID\";\r\n\r\n// pledge under an angel network\r\nexport const PLEDGE = `${GROUP_PATH}/pledge`;\r\n// pledge under Invest West Invest West super admins\r\nexport const PLEDGE_INVEST_WEST_SUPER = \"/pledge\";\r\n\r\n// create an offer under an angel network\r\nexport const CREATE_OFFER = `${GROUP_PATH}/create-offer`;\r\nexport const EDIT_OFFER = `${CREATE_OFFER}?edit=:projectID`;\r\nexport const GROUP_ADMIN_CREATE_OFFER_ON_BEHALF_OF_ISSUER = `${CREATE_OFFER}?admin=:adminID&issuer=:issuerID`;\r\n// create an offer under Invest West super admins\r\nexport const CREATE_OFFER_INVEST_WEST_SUPER = \"/create-offer\";\r\nexport const EDIT_OFFER_INVEST_WEST_SUPER = `${CREATE_OFFER_INVEST_WEST_SUPER}?edit=:projectID`;\r\n\r\n// view offer's details under an angel network\r\nexport const PROJECT_DETAILS = `${GROUP_PATH}/projects/:projectID`;\r\n// view offer's details under Invest West super admins\r\nexport const PROJECT_DETAILS_INVEST_WEST_SUPER = \"/projects/:projectID\";\r\n\r\nexport const VIEW_GROUP_DETAILS = `${GROUP_PATH}/view-group-details/:groupID`;\r\nexport const VIEW_GROUP_DETAILS_INVEST_WEST_SUPER = \"/view-group-details/:groupID\";\r\n\r\nexport const CONTACT_US = `${GROUP_PATH}/contact-us`;\r\nexport const CONTACT_US_INVEST_WEST_SUPER = \"/contact-us\";\r\n\r\nexport const CONTACT_US_2 = `${GROUP_PATH}/contact-us-2`;\r\nexport const CONTACT_US_INVEST_WEST_SUPER_2 = \"/contact-us-2\";\r\n\r\nexport const HELP = `${GROUP_PATH}/help`;\r\nexport const HELP_INVEST_WEST_SUPER = \"/help\";\r\n\r\nexport const TERMS_OF_USE = \"/terms-of-use\";\r\nexport const PRIVACY_POLICY = \"/privacy-policy\";\r\nexport const RISK_WARNING = \"/risk-warning-footer\";\r\nexport const CREATE_PITCH_TERMS_AND_CONDITIONS = \"/create-project-terms-and-conditions\";\r\nexport const ABOUT_US = \"/about-us\";\r\nexport const MARKETING_PREFERENCES = \"/marketing-preferences\";\r\n\r\nexport const ERROR_404 = \"/error/404\";","import axios, {AxiosError, AxiosRequestConfig, AxiosResponse, Method} from \"axios\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport HttpResponseError from \"./ResponseError\";\r\n\r\n/**\r\n * Api routes\r\n */\r\nexport class ApiRoutes {\r\n    static systemAttributesBaseRoute = \"/system-attributes\";\r\n    static retrieveSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/retrieve\";\r\n    static updateSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/update\";\r\n\r\n    static authBaseRoute = \"/auth\";\r\n    static requestResetPasswordRoute = ApiRoutes.authBaseRoute + \"/request-reset-password\";\r\n    static verifyAuthRoute = ApiRoutes.authBaseRoute + \"/verify\";\r\n\r\n    static emailBaseRoute = \"/email\";\r\n    static sendEmailRoute = ApiRoutes.emailBaseRoute + \"/send\";\r\n\r\n    static usersBaseRoute = \"/users\";\r\n    static createUser = ApiRoutes.usersBaseRoute + \"/create\";\r\n    static retrieveUser = ApiRoutes.usersBaseRoute + \"/:uid/retrieve\";\r\n    static retrieveInvitedUser = ApiRoutes.usersBaseRoute + \"/:invitedUserID/retrieve-invited\";\r\n    static updateUser = ApiRoutes.usersBaseRoute + \"/update\";\r\n    static listGroupsOfMembership = ApiRoutes.usersBaseRoute + \"/:uid/groups-of-membership\";\r\n    static exportUsersCsvRoute = ApiRoutes.usersBaseRoute + \"/export\";\r\n\r\n    static groupsBaseRoute = \"/groups\";\r\n    static listGroups = ApiRoutes.groupsBaseRoute + \"/list\";\r\n    static retrieveGroup = ApiRoutes.groupsBaseRoute + \"/:groupUserName\";\r\n    static addMembersToGroup = ApiRoutes.groupsBaseRoute + \"/:group/add-members\";\r\n    static listGroupMembers = ApiRoutes.groupsBaseRoute + \"/:group/list-members\";\r\n\r\n    static projectsBaseRoute = \"/projects\";\r\n    static listProjectsRoute = ApiRoutes.projectsBaseRoute + \"/list\";\r\n    static sendProjectBackToIssuerRoute = ApiRoutes.projectsBaseRoute + \"/send-back-to-issuer\";\r\n    static exportProjectsToCsvRoute = ApiRoutes.projectsBaseRoute + \"/export\";\r\n\r\n    static groupAdminsBaseRoute = \"/group-admins\";\r\n    static addGroupAdminRoute = ApiRoutes.groupAdminsBaseRoute + \"/add\";\r\n\r\n    static accessRequestsBaseRoute = \"/access-requests\";\r\n    static listAccessRequestsRoute = ApiRoutes.accessRequestsBaseRoute + \"/list\";\r\n    static createAccessRequestRoute = ApiRoutes.accessRequestsBaseRoute + \"/create\";\r\n    static removeAccessRequestRoute = ApiRoutes.createAccessRequestRoute + \"/remove\";\r\n\r\n    static investorSelfCertificationBaseRoute = \"/investor-self-certifications\";\r\n    static retrieveInvestorSelfCertificationRoute = ApiRoutes.investorSelfCertificationBaseRoute + \"/retrieve\";\r\n\r\n    static fileBaseRoute = \"/file\";\r\n    static uploadSingleFileRoute = ApiRoutes.fileBaseRoute + \"/upload-single\";\r\n\r\n    static testRoute = \"/test\";\r\n}\r\n\r\nexport interface RequestOptionalParams {\r\n    requestBody: any | null;\r\n    queryParameters: any | null;\r\n}\r\n\r\n/**\r\n * Api class\r\n */\r\nexport default class Api {\r\n    baseUrl: string | undefined = process.env.REACT_APP_BACK_END_BASE_URL;\r\n\r\n    /**\r\n     * Build request URL\r\n     *\r\n     * @param endPoint\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private buildUrl(endPoint: string, queryParameters: any): string {\r\n        let fullUrl = this.baseUrl + endPoint + Api.buildQueryParameters(queryParameters);\r\n        return encodeURI(fullUrl);\r\n    }\r\n\r\n    /**\r\n     * Build query parameters\r\n     *\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private static buildQueryParameters(queryParameters: any): string {\r\n        if (queryParameters === null) {\r\n            return \"\";\r\n        }\r\n\r\n        let result: string = \"?\";\r\n\r\n        for (let key in queryParameters) {\r\n            if (queryParameters.hasOwnProperty(key)) {\r\n                let value = queryParameters[key];\r\n                if (value !== undefined && value !== null) {\r\n                    if (!result.endsWith(\"?\")) {\r\n                        result += \"&\";\r\n                    }\r\n                    result += `${key}=${value.toString()}`;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.endsWith(\"?\")) {\r\n            result = \"\";\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Build form data\r\n     *\r\n     * @param data\r\n     * @private\r\n     */\r\n    private static buildFormData(data: any): FormData | null {\r\n        if (data === null) {\r\n            return null;\r\n        }\r\n\r\n        const formData = new FormData();\r\n\r\n        for (let key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                let value = data[key];\r\n                if (value !== undefined && value !== null) {\r\n                    formData.append(key, value);\r\n                }\r\n            }\r\n        }\r\n\r\n        return formData;\r\n    }\r\n\r\n    /**\r\n     * Send request\r\n     *\r\n     * @param requestType\r\n     * @param endPoint\r\n     * @param optionalParams\r\n     * @param formDataRequest\r\n     */\r\n    public async request(requestType: Method,\r\n                         endPoint: string,\r\n                         optionalParams?: RequestOptionalParams | null,\r\n                         formDataRequest?: boolean\r\n    ): Promise<AxiosResponse> {\r\n        if (endPoint === null || endPoint.length === 0) {\r\n            throw new Error(\"Empty url\");\r\n        }\r\n\r\n        const url: string = this.buildUrl(\r\n            endPoint,\r\n            optionalParams !== undefined && optionalParams !== null && optionalParams.queryParameters !== null\r\n                ? optionalParams.queryParameters\r\n                : null\r\n        );\r\n\r\n        let currentUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n        try {\r\n            let idToken: string | null = null;\r\n\r\n            if (currentUser) {\r\n                idToken = await currentUser.getIdToken();\r\n            }\r\n\r\n            let bodyData: any;\r\n\r\n            if (formDataRequest !== undefined && formDataRequest) {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? Api.buildFormData(optionalParams.requestBody)\r\n                    : null;\r\n            }\r\n            else {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? optionalParams.requestBody\r\n                    : null;\r\n            }\r\n\r\n            const config: AxiosRequestConfig = {\r\n                method: requestType,\r\n                url: url,\r\n                data: bodyData,\r\n                timeout: 20000 // timeout in 20 seconds\r\n            };\r\n\r\n            if (idToken) {\r\n                config.headers = {\r\n                    \"Authorization\": idToken\r\n                }\r\n\r\n                if (formDataRequest !== undefined && formDataRequest) {\r\n                    config.headers = {\r\n                        ...config.headers,\r\n                        // @ts-ignore\r\n                        \"Content-Type\": `multipart/form-data; boundary=${bodyData._boundary}`\r\n                    }\r\n                }\r\n            }\r\n\r\n            let response: AxiosResponse = await axios.request(config);\r\n\r\n            return this.parseResponse(response);\r\n        } catch (exception) {\r\n            const error = Api.parseError(exception);\r\n            console.log(`Failed to request. Status code: ${error.statusCode}. Cause: ${error.message}`);\r\n            throw new Error(error.statusCode + \" \" + error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse response\r\n     *\r\n     * @param response\r\n     * @private\r\n     */\r\n    private parseResponse(response: AxiosResponse) {\r\n        if (response === null) {\r\n            throw new Error(\"Null response.\");\r\n        }\r\n\r\n        if (this.isRequestSuccessful(response)) {\r\n            return response;\r\n        }\r\n\r\n        throw new Error(\"Response error.\");\r\n    }\r\n\r\n    /**\r\n     * Parse error\r\n     *\r\n     * @param error\r\n     * @private\r\n     */\r\n    private static parseError(error: AxiosError) {\r\n        let httpError: HttpResponseError = {\r\n            statusCode: -1,\r\n            message: \"\"\r\n        };\r\n\r\n        // client received an error response (5xx, 4xx) form the server\r\n        if (error.response) {\r\n            if (error.response.data) {\r\n                httpError = {\r\n                    statusCode: error.response.data.code,\r\n                    message: error.response.data.detail ?? error.response.data.message\r\n                }\r\n            }\r\n        }\r\n        // client never received a response, or request never left\r\n        else if (error.request) {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Server is not responding.\"\r\n            }\r\n        }\r\n        // anything else\r\n        else {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Unexpected error.\"\r\n            }\r\n        }\r\n\r\n        return httpError;\r\n    }\r\n\r\n    /**\r\n     * Check if a request is successful by checking the response code\r\n     *\r\n     * @param response\r\n     */\r\n    public isRequestSuccessful(response: AxiosResponse): boolean {\r\n        return response != null && response.status >= 200 && response.status < 300;\r\n    }\r\n}","import User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport {\r\n    AuthenticationAction,\r\n    AuthenticationEvents,\r\n    CompleteAuthenticationAction,\r\n    UpdateUserChangesAction\r\n} from \"../actions/authenticationActions\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport InvestorSelfCertification from \"../../models/investor_self_certification\";\r\n\r\nexport enum AuthenticationStatus {\r\n    NotInitialized,\r\n    Authenticating,\r\n    Authenticated,\r\n    Unauthenticated\r\n}\r\n\r\nexport interface AuthenticationState {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    selfCertification?: InvestorSelfCertification; // only available for investor\r\n    error?: Error\r\n}\r\n\r\nconst initialState: AuthenticationState = {\r\n    status: AuthenticationStatus.NotInitialized,\r\n    currentUser: null,\r\n    groupsOfMembership: []\r\n}\r\n\r\nexport const authIsNotInitialized = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.NotInitialized;\r\n}\r\n\r\nexport const isAuthenticating = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticating;\r\n}\r\n\r\nexport const successfullyAuthenticated = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticated && state.currentUser && state.error === undefined;\r\n}\r\n\r\nexport const hasAuthenticationError = (state: AuthenticationState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst authenticationReducer = (state = initialState, action: AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.StartAuthenticating:\r\n            return {\r\n                ...initialState,\r\n                status: AuthenticationStatus.Authenticating\r\n            }\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            const completeAuthenticationAction: CompleteAuthenticationAction = (action as CompleteAuthenticationAction);\r\n            return {\r\n                ...state,\r\n                status: completeAuthenticationAction.status,\r\n                currentUser: completeAuthenticationAction.currentUser\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.currentUser)) : state.currentUser,\r\n                selfCertification: completeAuthenticationAction.selfCertification\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.selfCertification))\r\n                    : state.selfCertification,\r\n                groupsOfMembership: JSON.parse(JSON.stringify(completeAuthenticationAction.groupsOfMembership)),\r\n                error: completeAuthenticationAction.error\r\n            }\r\n        case AuthenticationEvents.SignOut:\r\n            return {\r\n                ...state,\r\n                status: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? AuthenticationStatus.Unauthenticated\r\n                    : state.status,\r\n                currentUser: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? null\r\n                    : state.currentUser,\r\n                groupsOfMembership: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? []\r\n                    : state.groupsOfMembership,\r\n                error: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? undefined\r\n                    : state.error\r\n            }\r\n        case AuthenticationEvents.UpdateUserChanges:\r\n            const updateUserChangesAction: UpdateUserChangesAction = action as UpdateUserChangesAction;\r\n            return {\r\n                ...state,\r\n                currentUser: updateUserChangesAction.updatedUser\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authenticationReducer;","/**\r\n * This file contains all of the utility functions relating to Firebase database.\r\n */\r\n\r\nimport firebase from \"./firebaseApp\";\r\n\r\nimport * as ROUTES from \"../router/routes\";\r\nimport * as DB_CONST from \"./databaseConsts\";\r\nimport * as utils from \"../utils/utils\";\r\nimport Api, {ApiRoutes} from \"../api/Api\";\r\n\r\n/**\r\n * This function is used to track activities of a user\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectLocation\r\n * @param interactedObjectID\r\n * @param activitySummary\r\n * @param action\r\n * @param value\r\n */\r\nexport const trackActivity = (\r\n    {\r\n        userID, // user id (note that this id is the official user id for group admins and super admins)\r\n        activityType,\r\n        interactedObjectLocation = null, // main node in database (when changing password, this is null)\r\n        interactedObjectID = null, // object's id (when changing password, this is null)\r\n        activitySummary, // brief summary of the activity\r\n        action = null,\r\n        value = null // optional --> track changes of a node if it does.\r\n        // Format:\r\n        //  + value: {before: node_before_changed, after: node_after_changed} --> if there are changes\r\n        //  + value: node_object --> if the node has just been created\r\n    }\r\n) => {\r\n    const id = firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .push()\r\n        .key;\r\n\r\n    firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .child(id)\r\n        .set({\r\n            id,\r\n            userID,\r\n            activityType,\r\n            interactedObjectLocation,\r\n            interactedObjectID,\r\n            activitySummary,\r\n            action,\r\n            value,\r\n            time: utils.getCurrentDate()\r\n        })\r\n        .then(() => {\r\n            // do nothing\r\n        })\r\n        .catch(error => {\r\n            // handle error\r\n        });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_ACTIVITIES_BY_USER = 'FETCH_ACTIVITIES_BY_USER';\r\nexport const FETCH_ACTIVITIES_BY_TYPE = 'FETCH_ACTIVITIES_BY_TYPE';\r\nexport const FETCH_ACTIVITIES_BY_INTERACTED_OBJECT = 'FETCH_ACTIVITIES_BY_INTERACTED_OBJECT';\r\n\r\n/**\r\n * Fetch activities\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectID\r\n * @param shouldLoadUserProfile\r\n * @param fetchBy\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchActivitiesBy = async (\r\n    {\r\n        userID = null,\r\n        activityType = null,\r\n        interactedObjectID = null,\r\n        // this should only be set to True when loading activities for a group\r\n        // as a group has multiple group admins and each of them can perform different activities\r\n        shouldLoadUserProfile = false,\r\n        fetchBy = null // fetch mode\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (!fetchBy) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activitiesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n\r\n        switch (fetchBy) {\r\n            case FETCH_ACTIVITIES_BY_USER: {\r\n                if (!userID) {\r\n                    return reject(\"Invalid call. userID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('userID')\r\n                    .equalTo(userID);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_TYPE: {\r\n                if (!activityType) {\r\n                    return reject(\"Invalid call. activityType is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('activityType')\r\n                    .equalTo(activityType);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_INTERACTED_OBJECT: {\r\n                if (!interactedObjectID) {\r\n                    return reject(\"Invalid call. interactedObjectID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('interactedObjectID')\r\n                    .equalTo(interactedObjectID);\r\n\r\n                break;\r\n            }\r\n            default:\r\n                return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activities = [];\r\n\r\n        activitiesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(activities);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    activities.push(snapshot.val());\r\n                });\r\n\r\n                if (shouldLoadUserProfile) {\r\n                    Promise.all(\r\n                        activities.map(activity => {\r\n                            return new Promise((resolve, reject) => {\r\n                                getUserBasedOnID(activity.userID)\r\n                                    .then(user => {\r\n                                        activity.userProfile = user;\r\n                                        return resolve(activities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        // handle error\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        return resolve(activities);\r\n                    }).catch(error => {\r\n                        // handle error\r\n                        return reject(error);\r\n                    });\r\n                } else {\r\n                    return resolve(activities);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_GROUP_INVITATION = \"Invited %group% to Invest West platform.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION = \"Invited %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION = \"Resent invitation email to %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH = \"Published %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH = \"Rejected %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE = \"Moved %project% to pledge phase.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH = \"Closed %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE = \"Published %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE = \"Rejected %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE = \"Created pledge for %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT = \"Edited %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT = \"Created %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM = \"Clicked to view %group%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_GROUP_DETAILS = \"Viewed %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_NEW_PLEDGE = \"Made new pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PLEDGE = \"Edited pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CANCELLED_PLEDGE = \"Cancelled pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_PROJECT_ITEM = \"Clicked to view %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS = \"Viewed %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT = \"Made a vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT = \"Edited vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT = \"Commented in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT = \"Edited comment in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMPLETED_SELF_CERTIFICATION = \"Completed self certification.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE = \"Uploaded business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE = \"Updated business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS = \"Updated personal details.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE = \"Updated business profile of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS = \"Updated personal details of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM = \"Created \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD = \"Created \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD = \"Replied to \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD = \"Changed password.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY = \"Made an enquiry to %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY = \"Closed %project% temporarily.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN = \"Opened %project% again.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN = \"Added %groupAdminEmail% as a group admin.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM = \"Deleted \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM = \"Edited \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD = \"Edited \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD = \"Deleted \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY = \"Edited reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY = \"Deleted reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT = \"Replied to a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT = \"Deleted a reply of a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT = \"Edited a reply of a comment in %projectName% offer.\";\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Send a notification\r\n *\r\n * @param title\r\n * @param message\r\n * @param userID\r\n * @param action\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const sendNotification = async ({title = \"\", message = \"\", userID = \"\", action = \"\"}) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const id = db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .push()\r\n            .key;\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(id)\r\n            .set({\r\n                id,\r\n                title,\r\n                message,\r\n                userID,\r\n                action,\r\n                date: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(\"Failed to send notification.\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Log enquiries from users\r\n *\r\n * @param enquiry\r\n */\r\nexport const logContactUsEnquiry = (\r\n    {\r\n        userID = null, // anonymous user --> userID = null, otherwise, not null\r\n        anid = null, // null = Invest West, not null = group\r\n        email,\r\n        name,\r\n        phone = null,\r\n        subject,\r\n        description\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        const dbRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CONTACT_US_ENQUIRIES_CHILD);\r\n\r\n        const enquiryID = dbRef.push().key;\r\n\r\n        dbRef\r\n            .child(enquiryID)\r\n            .set({\r\n                userID,\r\n                groupContacted: anid,\r\n                email,\r\n                name,\r\n                phone,\r\n                subject,\r\n                description,\r\n                id: enquiryID,\r\n                time: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve(enquiryID);\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all admins of a group based on groupID (anid)\r\n *\r\n * @param groupID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupAdminsBasedOnGroupID = async (groupID) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let groupAdmins = [];\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('anid')\r\n            .equalTo(groupID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupAdmins);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    groupAdmins.push(snapshot.val());\r\n                });\r\n\r\n                return resolve(groupAdmins);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to check if an email has already been used.\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const doesUserExist = async (email) => {\r\n    return new Promise((resolve, reject) => {\r\n        const firebaseDB = firebase.database();\r\n        // check admin first\r\n        firebaseDB\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n                if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                    let admin = null;\r\n                    snapshots.forEach(snapshot => {\r\n                        admin = snapshot.val();\r\n                    });\r\n\r\n                    // admin exists\r\n                    return resolve({\r\n                        userExists: true,\r\n                        userIsAnAdmin: true,\r\n                        admin: admin\r\n                    });\r\n                }\r\n\r\n                firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .orderByChild('email')\r\n                    .equalTo(email.toLowerCase())\r\n                    .once('value', snapshots => {\r\n                        if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                            let user = null;\r\n                            snapshots.forEach(snapshot => {\r\n                                user = snapshot.val();\r\n                            });\r\n\r\n                            // normal user exists\r\n                            return resolve({\r\n                                userExists: true,\r\n                                userIsAnAdmin: false,\r\n                                user: user\r\n                            });\r\n                        } else {\r\n                            // user does not exist\r\n                            return resolve({\r\n                                userExists: false\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all the groups that the user is in\r\n *\r\n * @param userID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupsUserIsIn = async (userID) => {\r\n\r\n    let groupsUserIsIn = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // search through the InvitedUsers node\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('officialUserID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupsUserIsIn);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    // search for invited user with the officialID matched\r\n                    if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                        groupsUserIsIn.push({\r\n                            invitedUser: invitedUser,\r\n                            anid: invitedUser.invitedBy,\r\n                            userInGroupStatus: invitedUser.status\r\n                        });\r\n                    }\r\n                });\r\n\r\n                Promise.all(groupsUserIsIn.map(groupUserIsIn => {\r\n                    return new Promise((resolve, reject) => {\r\n                        firebase\r\n                            .database()\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(groupUserIsIn.anid)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n                                return resolve(groupUserIsIn);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(groupsUserIsIn);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on anid\r\n *\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnANID = async (anid) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    return reject(\"Angel network not found\");\r\n                }\r\n\r\n                return resolve(snapshot.val());\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on groupUserName\r\n *\r\n * @param groupUserName\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnGroupUserName = async (groupUserName) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .orderByChild('groupUserName')\r\n            .equalTo(groupUserName)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No group found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    return resolve(snapshot.val());\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const SEARCH_ANGEL_NETWORKS_NONE = 0;\r\nexport const SEARCH_ANGEL_NETWORKS_BY_NAME = 1;\r\n/**\r\n * Load angel networks\r\n *\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworks = async ({name = null, email = null}, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (mode !== SEARCH_ANGEL_NETWORKS_NONE\r\n            && mode !== SEARCH_ANGEL_NETWORKS_BY_NAME\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        let angelNetworks = [];\r\n\r\n        let angelNetworksRef;\r\n\r\n        if (mode === SEARCH_ANGEL_NETWORKS_NONE) {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n        } else {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild('displayNameLower',)\r\n                .startAt(name.toLowerCase());\r\n        }\r\n\r\n        angelNetworksRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworks);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const angelNetwork = snapshot.val();\r\n                    if (mode === SEARCH_ANGEL_NETWORKS_BY_NAME) {\r\n                        if (angelNetwork.displayNameLower.includes(name.toLowerCase())) {\r\n                            angelNetworks.push(snapshot.val());\r\n                        }\r\n                    } else {\r\n                        angelNetworks.push(snapshot.val());\r\n                    }\r\n                });\r\n\r\n                return resolve(angelNetworks);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the angel networks that invited the user with the specified email\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworksInvitedAUser = async (email) => {\r\n\r\n    const db = firebase.database();\r\n    let angelNetworksInvitedUser = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n\r\n                // user has not been invited by any angel networks\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworksInvitedUser);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    angelNetworksInvitedUser.push({\r\n                        Invitor: invitedUser.invitedBy,\r\n                        Invitee: invitedUser\r\n                    });\r\n                });\r\n\r\n                Promise.all(angelNetworksInvitedUser.map(angelNetworkInvitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(angelNetworkInvitedUser.Invitor)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                angelNetworkInvitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(angelNetworksInvitedUser);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(angelNetworksInvitedUser);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to remove a join request\r\n *\r\n * @param requestID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const removeAJoinRequest = async (requestID) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(requestID)\r\n            .remove()\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user object from firebase realtime db.\r\n *\r\n * Parameter:\r\n *  - type: 0 - retrieve a normal user (issuer, investor), 1 - retrieve an admin\r\n *  - firebaseUser\r\n *\r\n * @param {*} type\r\n * @param {*} userID\r\n */\r\nexport const getUser = async (type, userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        // if type === 0, a normal user (issuer, investor) will be returned \r\n        if (type === 0) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n        // if type === 1, an admin will be returned\r\n        else if (type === 1) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user's profile based on the uid provided.\r\n *\r\n * @param {*} uid\r\n */\r\nexport const getUserBasedOnID = async (uid) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!uid) {\r\n            return reject(\"Null id provided\");\r\n        }\r\n\r\n        // get normal user\r\n        getUser(0, uid)\r\n            .then(user => {\r\n                return resolve(user);\r\n            })\r\n            .catch(error => {\r\n                // get admin\r\n                getUser(1, uid)\r\n                    .then(admin => {\r\n                        // admin is a group admin\r\n                        if (!admin.superAdmin) {\r\n                            loadAngelNetworkBasedOnANID(admin.anid)\r\n                                .then(groupDetails => {\r\n                                    admin.groupDetails = groupDetails;\r\n                                    return resolve(admin);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(\"Group not found\");\r\n                                });\r\n                        }\r\n                        // admin is a super admin\r\n                        else {\r\n                            return resolve(admin);\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Profile not found\");\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a forums\r\n *\r\n * Parameters:\r\n *      + forumObj with the following structure\r\n *\r\n * {\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor: userID\r\n * }\r\n * @param {*} forumObj\r\n */\r\nexport const createForum = async (forumObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const forumID = db.ref(DB_CONST.FORUMS_CHILD).push().key;\r\n        forumObj.id = forumID;\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumObj.id)\r\n            .set(forumObj)\r\n            .then(() => {\r\n                return resolve(forumID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_FORUMS = \"LOAD_LIVE_FORUMS\";\r\nexport const LOAD_DELETED_FORUMS = \"LOAD_DELETED_FORUMS\";\r\n/**\r\n * This function is used to load all forums.\r\n *\r\n * A forums object has the following structure:\r\n *\r\n * {\r\n *      id,\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor,\r\n * \r\n *      ...\r\n * }\r\n */\r\nexport const loadForums = async (mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        let forums = [];\r\n\r\n        if (mode !== LOAD_LIVE_FORUMS && mode !== LOAD_DELETED_FORUMS) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        const db = firebase.database();\r\n\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .once('value', snapshots => {\r\n\r\n                // no forums\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(forums);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let forum = snapshot.val();\r\n                    if (mode === LOAD_LIVE_FORUMS) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (forum.hasOwnProperty('deleted') && forum.deleted === false)) {\r\n                            forums.push(forum);\r\n                        }\r\n                    } else {\r\n                        if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                            forums.push(forum);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(forums.map(forum => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                return resolve(forums);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(forums);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a forum\r\n *\r\n * @param editedForum\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editForum = async (editedForum) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(editedForum.id)\r\n            .update(editedForum)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a forum by adding a property called 'deleted' with the value = true\r\n *\r\n * @param forumID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteForum = async (forumID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a thread within a forums\r\n *\r\n * @param {*} threadObj\r\n */\r\nexport const createThread = async (threadObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const threadID = db.ref(DB_CONST.FORUM_THREADS_CHILD).push().key;\r\n        threadObj.id = threadID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadObj.id)\r\n            .set(threadObj)\r\n            .then(() => {\r\n                return resolve(threadID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a thread\r\n *\r\n * @param editedThread\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThread = async (editedThread) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(editedThread.id)\r\n            .update(editedThread)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread by adding a property called 'deleted' with the value = true\r\n *\r\n * @param threadID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThread = async (threadID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_THREADS = \"LOAD_LIVE_THREADS\";\r\nexport const LOAD_DELETED_THREADS = \"LOAD_DELETED_THREADS\";\r\n/**\r\n * This function is used to load the details of the author for each thread.\r\n * The reason for creating this function is that the author of each thread is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param mode\r\n * @param {*} forumSelected\r\n */\r\nexport const loadThreads = async (mode, forumSelected) => {\r\n    const db = firebase.database();\r\n    let threads = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .orderByChild(\"forumID\")\r\n            .equalTo(forumSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(threads);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    if (mode === LOAD_LIVE_THREADS) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (thread.hasOwnProperty('deleted') && thread.deleted === false)) {\r\n                            threads.push(thread);\r\n                        }\r\n                    } else {\r\n                        if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                            threads.push(thread);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(threads.map(thread => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                return resolve(threads);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(threads);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a reply to a thread.\r\n *\r\n * @param {*} replyObj\r\n */\r\nexport const createThreadReply = async (replyObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const replyID = db.ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD).push().key;\r\n        replyObj.id = replyID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(replyObj.id)\r\n            .set(replyObj)\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit an existing thread reply\r\n *\r\n * @param editedThreadReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThreadReply = async (editedThreadReply) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(editedThreadReply.id)\r\n            .update(editedThreadReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread reply\r\n *\r\n * @param threadReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThreadReply = async (threadReplyID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(threadReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the details of the author for each thread reply.\r\n * The reason for creating this function is that the author of each thread reply is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param {*} threadSelected\r\n */\r\nexport const loadThreadReplies = async (threadSelected) => {\r\n    const db = firebase.database();\r\n    let replies = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .orderByChild(\"threadID\")\r\n            .equalTo(threadSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(replies);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let replyObj = snapshot.val();\r\n                    replies.push(replyObj);\r\n                });\r\n\r\n                Promise.all(replies.map(reply => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(reply.author.id)\r\n                            .then(user => {\r\n                                reply.author = user;\r\n                                return resolve(replies);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(replies);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will load club attributes\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadClubAttributes = async () => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .once('value', snapshot => {\r\n                const clubAttributes = snapshot.val();\r\n                return resolve(clubAttributes);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to load invited users of an angel network or ALL for super admin\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadInvitedUsers = async (anid) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        let invitedUsers = [];\r\n\r\n        let dbRef;\r\n\r\n        // load invited users of an angel network\r\n        if (anid) {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('invitedBy')\r\n                .equalTo(anid);\r\n        }\r\n        // load ALL invited users\r\n        else {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n        }\r\n\r\n        dbRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(invitedUsers);\r\n                }\r\n                snapshots.forEach(snapshot => {\r\n                    let user = snapshot.val();\r\n                    invitedUsers.push(user);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n                            .then(angelNetwork => {\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n\r\n                                if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                                    getUserBasedOnID(invitedUser.officialUserID)\r\n                                        .then(officialUser => {\r\n                                            invitedUser.officialUser = officialUser;\r\n                                            return resolve(invitedUsers);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(invitedUsers);\r\n                                }\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject({error: \"No users\"});\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load requests to join (users request to join angel networks)\r\n *\r\n * @param userID\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadRequestsToJoin = async ({userID = null, anid = null}) => {\r\n    return new Promise((resolve, reject) => {\r\n        let requestsRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD);\r\n\r\n        if (userID && anid) {\r\n            return reject(\"userID and anid cannot be defined at the same time\");\r\n        }\r\n\r\n        if (userID) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('userID')\r\n                .equalTo(userID);\r\n        }\r\n\r\n        if (anid) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(anid);\r\n        }\r\n\r\n        if (!requestsRef) {\r\n            return reject(\"Error happened\");\r\n        }\r\n\r\n        let requests = [];\r\n\r\n        requestsRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(requests);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    requests.push(snapshot.val());\r\n                });\r\n\r\n                Promise.all(requests.map(request => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(request.userID)\r\n                            .then(userProfile => {\r\n\r\n                                request.userProfile = userProfile;\r\n\r\n                                loadAngelNetworkBasedOnANID(request.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n\r\n                                        request.group = angelNetwork;\r\n\r\n                                        return resolve(requests);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(requests);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load an invited user based on the official user IF\r\n *\r\n * @param idOrEmail\r\n * @param mode\r\n * @returns {Promise<*>}\r\n */\r\nexport const GET_INVITED_USER_BASED_ON_INVITED_ID = 1;\r\nexport const GET_INVITED_USER_BASED_ON_OFFICIAL_ID = 2;\r\nexport const GET_INVITED_USER_BASED_ON_EMAIL = 3;\r\nexport const getInvitedUserBasedOnIDOrEmail = async (idOrEmail, mode) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let invitedUsers = [];\r\n\r\n        if (mode !== GET_INVITED_USER_BASED_ON_INVITED_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_EMAIL\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild(\r\n                mode === GET_INVITED_USER_BASED_ON_INVITED_ID\r\n                    ?\r\n                    'id'\r\n                    :\r\n                    mode === GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n                        ?\r\n                        'officialUserID'\r\n                        :\r\n                        'email'\r\n            )\r\n            .equalTo(idOrEmail)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No invited users found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    invitedUsers.push(invitedUser);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(invitedUser.invitedBy)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(invitedUsers);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_PROJECTS_ORDER_BY_NONE = 0;\r\nexport const FETCH_PROJECTS_ORDER_BY_VISIBILITY = 1;\r\nexport const FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK = 2;\r\nexport const FETCH_PROJECTS_ORDER_BY_ISSUER = 3;\r\nexport const FETCH_PROJECTS_ORDER_BY_STATUS = 4;\r\n\r\nexport const FETCH_PROJECTS_IN_ANY_PHASE = 111;\r\nexport const FETCH_LIVE_PROJECTS = 222;\r\nexport const FETCH_SUCCESSFUL_PROJECTS = 333;\r\nexport const FETCH_FAILED_PROJECTS = 444;\r\n\r\n/**\r\n * This function is used to fetch projects with filter parameters and limit parameter\r\n *\r\n * @param visibility\r\n * @param angelNetwork\r\n * @param issuer\r\n * @param projectsWithStatus\r\n * @param orderBy\r\n * @param limit\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchProjectsBy = async (\r\n    {\r\n        visibility = null, // fetch projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n        angelNetwork = null, // fetch projects by angel network\r\n        issuer = null, // fetch projects by issuer\r\n        sector = null, // fetch projects by sector\r\n        projectsWithStatus = FETCH_LIVE_PROJECTS, // fetch projects by status\r\n        fetchOrderBy = null // mode to use orderByChild\r\n    },\r\n    limit = 100000 // number of instances to be loaded\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        let projects = [];\r\n\r\n        const db = firebase.database();\r\n        let projectsRef = db.ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n        switch (fetchOrderBy) {\r\n            case FETCH_PROJECTS_ORDER_BY_NONE:\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_VISIBILITY:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('visibility')\r\n                    .equalTo(visibility);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('anid')\r\n                    .equalTo(angelNetwork);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ISSUER:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('issuerID')\r\n                    .equalTo(issuer);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_STATUS:\r\n                if (projectsWithStatus === FETCH_LIVE_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .startAt(DB_CONST.PROJECT_STATUS_PITCH_PHASE)\r\n                        .endAt(DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE);\r\n                } else if (projectsWithStatus === FETCH_SUCCESSFUL_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .equalTo(DB_CONST.PROJECT_STATUS_SUCCESSFUL);\r\n                }\r\n                break;\r\n            default:\r\n                return reject(\"Incorrect mode to fetch projects\");\r\n        }\r\n\r\n        projectsRef\r\n            .limitToLast(limit)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(projects);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let project = snapshot.val();\r\n\r\n                    if (projectsWithStatus) {\r\n                        switch (projectsWithStatus) {\r\n                            case FETCH_PROJECTS_IN_ANY_PHASE:\r\n                                projects.push(project);\r\n                                break;\r\n                            case FETCH_LIVE_PROJECTS:\r\n                                if (utils.isProjectLive(project) && !utils.isProjectTemporarilyClosed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_SUCCESSFUL_PROJECTS:\r\n                                if (utils.isProjectSuccessful(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_FAILED_PROJECTS:\r\n                                if (utils.isProjectFailed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            default:\r\n                                if (project.status === projectsWithStatus) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                        }\r\n                    } else {\r\n                        projects.push(project);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    projects.map(project => {\r\n                        return new Promise((resolve, reject) => {\r\n                            loadAngelNetworkBasedOnANID(project.anid)\r\n                                .then(group => {\r\n                                    project.group = group;\r\n                                    getUserBasedOnID(project.issuerID)\r\n                                        .then(user => {\r\n                                            project.issuer = user;\r\n                                            // only load pledges when a project is in pledge phase\r\n                                            // or it has gone through pledge phase and closed\r\n                                            if (utils.isProjectInLivePledgePhase(project)\r\n                                                || utils.isProjectSuccessful(project)\r\n                                                || utils.isProjectFailed(project)\r\n                                            ) {\r\n                                                // load pledges\r\n                                                loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                    .then(pledges => {\r\n                                                        project.pledges = pledges;\r\n                                                        return resolve(projects);\r\n                                                    })\r\n                                                    .catch(error => {\r\n                                                        // error in loading pledges\r\n                                                        return reject(error);\r\n                                                    });\r\n                                            } else {\r\n                                                return resolve(projects);\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            return reject(error);\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                )\r\n                    .then(() => {\r\n                        return resolve(projects);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load a particular project from its id\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadAParticularProject = async (projectID) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists() || !snapshot.val()) {\r\n                    return reject(\"No project found.\");\r\n                }\r\n\r\n                let project = snapshot.val();\r\n\r\n                loadAngelNetworkBasedOnANID(project.anid)\r\n                    .then(group => {\r\n                        project.group = group;\r\n\r\n                        getUserBasedOnID(project.issuerID)\r\n                            .then(issuer => {\r\n                                project.issuer = issuer;\r\n\r\n                                // projects in pitch phase cannot have any pledges\r\n                                if (project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                                    // load pledges\r\n                                    loadPledges(projectID, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                        .then(pledges => {\r\n                                            project.pledges = pledges;\r\n                                            return resolve(project);\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // error in loading pledges\r\n                                            return reject(error);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(project);\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(\"Couldn't load project issuer\");\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Couldn't load group\");\r\n                    });\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Close a live project temporarily or open a temporarily closed project again\r\n *\r\n * @param admin\r\n * @param project\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleProjectLivelinessTemporarily = async (admin, project) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let shouldSendNotificationForIssuer = false;\r\n        if (project.issuer.type === DB_CONST.TYPE_ISSUER) {\r\n            shouldSendNotificationForIssuer = true;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n\r\n        project.temporarilyClosed = !project.hasOwnProperty('temporarilyClosed')\r\n            ?\r\n            true\r\n            :\r\n            !project.temporarilyClosed;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    project.temporarilyClosed === true\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN;\r\n\r\n                // track admin activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeUpdating,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send notification to the issuer\r\n                if (shouldSendNotificationForIssuer) {\r\n                    sendNotification({\r\n                        title:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                `${project.projectName} has been closed temporarily`\r\n                                :\r\n                                `${project.projectName} has been opened again`\r\n                        ,\r\n                        message:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                \"This investment opportunity has been closed temporarily by your group admin. We will notify you when it is opened again.\"\r\n                                :\r\n                                \"This investment opportunity has been opened again. The investors can now interact with it.\"\r\n                        ,\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                        .then(() => {\r\n                            // do nothing\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                }\r\n\r\n                // Send notifications to investors who voted or pledged\r\n                // load votes\r\n                loadVotes(project.id, null, LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        let listOfInvestorsToBeNotified = [];\r\n                        votes.forEach(vote => {\r\n                            listOfInvestorsToBeNotified.push(vote.investorID);\r\n                        });\r\n\r\n                        // load pledges\r\n                        loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n                                pledges.forEach(pledge => {\r\n                                    if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                        listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                    }\r\n                                });\r\n\r\n                                let notifications = [];\r\n                                listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                    const notification = {\r\n                                        title:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                `${project.projectName} has been closed temporarily`\r\n                                                :\r\n                                                `${project.projectName} has been opened again`\r\n                                        ,\r\n                                        message:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                \"This investment opportunity has been closed temporarily by the group admin. We will notify you when it is opened again.\"\r\n                                                :\r\n                                                \"This investment opportunity has been opened again. You can now interact with it as usual.\"\r\n                                        ,\r\n                                        userID: investorID,\r\n                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                                    };\r\n                                    notifications.push(notification);\r\n                                });\r\n\r\n                                // push all the notifications to firebase\r\n                                Promise.all(notifications.map(notification => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        sendNotification(notification)\r\n                                            .then(() => {\r\n                                                return resolve();\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })).then(() => {\r\n                                    // do nothing\r\n                                }).catch(error => {\r\n                                    // handle error\r\n                                });\r\n                            });\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoLiveDecision = async (admin, project, decisionObj) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n        projectBeforeDecision.issuer = null;\r\n        projectBeforeDecision.pledges = null;\r\n        projectBeforeDecision.group = null;\r\n\r\n        // project goes live\r\n        if (decisionObj.decision) {\r\n            project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n            project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        }\r\n        // project cannot go live\r\n        else {\r\n            project.status = DB_CONST.PROJECT_STATUS_REJECTED;\r\n            project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            let activitySummary =\r\n                decisionObj.decision\r\n                    ?\r\n                    ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH\r\n                    :\r\n                    ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH;\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        emailType: 2,\r\n                        emailInfo: {\r\n                            projectID: project.id\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n\r\n            // track admin activity\r\n            trackActivity({\r\n                userID: admin.id,\r\n                activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                interactedObjectID: project.id,\r\n                activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                value: {\r\n                    before: projectBeforeDecision,\r\n                    after: project\r\n                }\r\n            });\r\n\r\n            // send a notification to notify the issuer\r\n            await\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your offer has been published.`\r\n                            :\r\n                            `Unfortunately your offer has been rejected. Contact your group's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                });\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go to the Pledge phase\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decision\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoToPledgePhaseDecision = async (admin, project, decision) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project can go to the Pledge phase --> the issuer can create their Pledge\r\n    if (decision) {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER;\r\n    }\r\n    // project cannot go to Pledge phase --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has moved to the pledge phase. You can now create your pledge page. Your pledge page will be checked by the group admin before publication.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your group's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project's Pledge can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectPledgeGoLiveDecision = async (admin, project, decisionObj) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project's Pledge can go live --> the investors can start pledging it\r\n    if (decisionObj.decision) {\r\n        project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n        project.status = DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n    }\r\n    // project's pledge cannot go to live --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.PrimaryOffer.status = DB_CONST.PRIMARY_OFFER_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decisionObj.decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has been published. Investors can now pledge.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your group's admin for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all comments of a project\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadComments = async (projectID) => {\r\n    const db = firebase.database();\r\n\r\n    let comments = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(comments);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let comment = snapshot.val();\r\n                    comments.push(comment);\r\n                });\r\n\r\n                Promise.all(\r\n                    comments.map(comment => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(comment.commentedBy)\r\n                                .then(user => {\r\n                                    comment.author = user;\r\n                                    return resolve(comments);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(comments);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load pledges of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_PLEDGES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_PLEDGES_ORDER_BY_INVESTOR = 2;\r\nexport const loadPledges = async (projectID = null, investorID = null, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        let pledgesRef = db.ref(DB_CONST.PLEDGES_CHILD);\r\n        if (projectID && mode === LOAD_PLEDGES_ORDER_BY_PROJECT) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"projectID\")\r\n                .equalTo(projectID);\r\n        } else if (investorID && mode === LOAD_PLEDGES_ORDER_BY_INVESTOR) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"investorID\")\r\n                .equalTo(investorID);\r\n        } else {\r\n            return reject(\"Invalid mode\");\r\n        }\r\n\r\n        let pledges = [];\r\n\r\n        pledgesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(pledges);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let pledge = snapshot.val();\r\n                    if (pledge.amount !== \"\") {\r\n                        pledges.push(pledge);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    pledges.map(pledge => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n                                    return resolve(pledges);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(pledges);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load votes of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_VOTES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_VOTES_ORDER_BY_INVESTOR = 2;\r\nexport const loadVotes = async (projectID = null, investorID = null, mode) => {\r\n    const db = firebase.database();\r\n    let votesRef = db.ref(DB_CONST.VOTES_CHILD);\r\n    if (projectID && mode === LOAD_VOTES_ORDER_BY_PROJECT) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID);\r\n    } else if (investorID && mode === LOAD_VOTES_ORDER_BY_INVESTOR) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"investorID\")\r\n            .equalTo(investorID);\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n    let votes = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        votesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(votes);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let vote = snapshot.val();\r\n                    if (vote.voted !== \"\") {\r\n                        votes.push(vote);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    votes.map(vote => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(vote.investorID)\r\n                                .then(investor => {\r\n                                    vote.investor = investor;\r\n                                    return resolve(votes);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(votes);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    let notifications = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .orderByChild(\"userID\")\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(notifications);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let notification = snapshot.val();\r\n                    notifications.push(notification);\r\n                });\r\n\r\n                return resolve(notifications);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const deleteAllNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // load all notifications of the specified user\r\n        loadNotifications(userID)\r\n            .then(notifications => {\r\n                // delete them all\r\n                Promise.all(notifications.map(notification => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                            .child(notification.id)\r\n                            .remove()\r\n                            .then(() => {\r\n                                return resolve();\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                })).then(() => {\r\n                    return resolve();\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Post a comment reply\r\n *\r\n * @param commentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const postCommentReply = commentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        const replyID = db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(replyID)\r\n            .set({\r\n                ...commentReply,\r\n                id: replyID\r\n            })\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load replies of comments\r\n *\r\n * @param comments\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadCommentsReplies = comments => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        let updatedComments = [...comments];\r\n\r\n        Promise.all(\r\n            updatedComments.map(comment => {\r\n                return new Promise((resolve, reject) => {\r\n                    let replies = [];\r\n\r\n                    db\r\n                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                        .orderByChild('commentID')\r\n                        .equalTo(comment.id)\r\n                        .once('value', snapshots => {\r\n                            if (!snapshots\r\n                                || !snapshots.exists()\r\n                                || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                            ) {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }\r\n\r\n                            snapshots.forEach(snapshot => {\r\n                                const reply = snapshot.val();\r\n                                if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                    // do nothing\r\n                                } else {\r\n                                    replies.push(snapshot.val());\r\n                                }\r\n                            });\r\n\r\n                            Promise.all(\r\n                                replies.map(reply => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        getUserBasedOnID(reply.repliedBy)\r\n                                            .then(user => {\r\n                                                reply.author = user;\r\n                                                return resolve(replies);\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })\r\n                            ).then(() => {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }).catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            })\r\n        ).then(() => {\r\n            return resolve(updatedComments);\r\n        }).catch(error => {\r\n            return reject(error);\r\n        });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Delete a reply of a comment\r\n *\r\n * @param commentReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteCommentReply = commentReplyID => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(commentReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a comment reply\r\n *\r\n * @param updatedCommentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateCommentReply = updatedCommentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(updatedCommentReply.id)\r\n            .update(updatedCommentReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load marketing preferences\r\n *\r\n * @param userID: null --> load all, not null --> load for a particular user\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadMarketingPreferences = (userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const marketingPreferencesRef =\r\n            userID\r\n                ?\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                    .orderByChild(\"userID\")\r\n                    .equalTo(userID)\r\n                :\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD);\r\n\r\n        let marketingPreferences = [];\r\n\r\n        marketingPreferencesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(marketingPreferences);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let marketingPreference = snapshot.val();\r\n                    marketingPreferences.push(marketingPreference);\r\n                });\r\n\r\n                Promise.all(\r\n                    marketingPreferences.map(marketingPreference => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(marketingPreference.userID)\r\n                                .then(user => {\r\n                                    marketingPreference.user = user;\r\n                                    return resolve(marketingPreferences);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(marketingPreferences);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Turn on/off marketing preferences\r\n *\r\n * @param userID\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleMarketingPreferences = async (\r\n    {\r\n        userID,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!userID || !value) {\r\n            return reject(\"Missing arguments\");\r\n        }\r\n\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: value,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    marketingPreferences[0].accepted = value;\r\n                    marketingPreferences[0].date = utils.getCurrentDate();\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .set(marketingPreferences[0])\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a sub settings inside marketing preferences\r\n *\r\n * @param userID\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateMarketingPreferencesSetting = async (\r\n    {\r\n        userID,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: true,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID,\r\n                        settings: {\r\n                            field: value\r\n                        }\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .child('settings')\r\n                        .child(field)\r\n                        .set(value)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update group properties setting\r\n *\r\n * @param anid\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateGroupPropertiesSetting = async (\r\n    {\r\n        anid,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(value)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Bring an expired pitch back to live by setting a new expiry date\r\n *\r\n * @param project\r\n * @param newPitchExpiryDate\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const bringPitchBackToLive = async ({project, newPitchExpiryDate}) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n        project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        project.Pitch.expiredDate = newPitchExpiryDate;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */","import {\r\n    PASSWORD_CHANGE_FAIL,\r\n    PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED,\r\n    PASSWORD_CHANGE_NOT_STRONG_ENOUGH, PASSWORD_CHANGE_RE_AUTH_FAILED,\r\n    PASSWORD_CHANGE_SUCCESS\r\n} from '../../shared-components/change-password/ChangePasswordPage';\r\nimport * as utils from '../../utils/utils';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const CHANGE_PASSWORD_TEXT_CHANGED = 'CHANGE_PASSWORD_TEXT_CHANGED';\r\nexport const handleTextChanged = event => {\r\n    return {\r\n        type: CHANGE_PASSWORD_TEXT_CHANGED,\r\n        name: event.target.name,\r\n        value: event.target.value\r\n    }\r\n};\r\n\r\nexport const RESET_CHANGE_PASSWORD = 'RESET_CHANGE_PASSWORD';\r\nexport const reset = () => {\r\n    return {\r\n        type: RESET_CHANGE_PASSWORD\r\n    }\r\n};\r\n\r\nexport const RE_AUTHENTICATING_USER = 'RE_AUTHENTICATING_USER';\r\nexport const ERROR_CHANGING_PASSWORD = 'ERROR_CHANGING_PASSWORD';\r\nexport const requestChangePassword = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        dispatch({\r\n            type: RE_AUTHENTICATING_USER\r\n        });\r\n\r\n        const passwords = {\r\n            currentPassword: getState().changePassword.currentPassword,\r\n            newPassword: getState().changePassword.newPassword,\r\n            newPasswordVerified: getState().changePassword.newPasswordVerified\r\n        };\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        changePassword(currentUser.email, passwords)\r\n            .then(responseCode => {\r\n                dispatch({\r\n                    type: RESET_CHANGE_PASSWORD,\r\n                    responseCode\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: firebase.auth().currentUser.uid,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD\r\n                    });\r\n            })\r\n            .catch(errorCode => {\r\n                dispatch({\r\n                    type: ERROR_CHANGING_PASSWORD,\r\n                    errorCode\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nconst changePassword = async (email, passwords) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (passwords.newPassword !== passwords.newPasswordVerified) {\r\n            return reject(PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED);\r\n        }\r\n\r\n        const passwordStrength = utils.checkPasswordStrength(passwords.newPassword);\r\n        if (passwordStrength === utils.PASSWORD_VERY_WEAK) {\r\n            return reject(PASSWORD_CHANGE_NOT_STRONG_ENOUGH);\r\n        }\r\n\r\n        firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, passwords.currentPassword)\r\n            .then(credential => {\r\n                firebase\r\n                    .auth()\r\n                    .currentUser\r\n                    .updatePassword(passwords.newPassword)\r\n                    .then(() => {\r\n                        return resolve(PASSWORD_CHANGE_SUCCESS);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(PASSWORD_CHANGE_FAIL)\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(PASSWORD_CHANGE_RE_AUTH_FAILED);\r\n            });\r\n    });\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Typography,\r\n    IconButton\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as changePasswordActions from '../../redux-store/actions/changePasswordActions';\r\n\r\nexport const PASSWORD_CHANGE_NONE = 0;\r\nexport const PASSWORD_CHANGE_RE_AUTH = 1;\r\nexport const PASSWORD_CHANGE_SUCCESS = 2;\r\nexport const PASSWORD_CHANGE_FAIL = 3;\r\nexport const PASSWORD_CHANGE_RE_AUTH_FAILED = 4;\r\nexport const PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED = 5;\r\nexport const PASSWORD_CHANGE_NOT_STRONG_ENOUGH = 6;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentPassword: state.changePassword.currentPassword,\r\n        newPassword: state.changePassword.newPassword,\r\n        newPasswordVerified: state.changePassword.newPasswordVerified,\r\n        passwordChangeResponseCode: state.changePassword.passwordChangeResponseCode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleTextChanged: (event) => dispatch(changePasswordActions.handleTextChanged(event)),\r\n        reset: () => dispatch(changePasswordActions.reset()),\r\n        requestChangePassword: () => dispatch(changePasswordActions.requestChangePassword())\r\n    }\r\n};\r\n\r\nclass ChangePasswordPage extends Component {\r\n\r\n    render() {\r\n        const {\r\n            currentPassword,\r\n            newPassword,\r\n            newPasswordVerified,\r\n            passwordChangeResponseCode,\r\n\r\n            handleTextChanged,\r\n            reset,\r\n            requestChangePassword\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters >\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        <FlexView column >\r\n                            <Typography align=\"left\" variant=\"h6\" color=\"primary\">Update your password</Typography>\r\n                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 10, marginBottom: 18 }}>Update your password regularly to protect your account better. Password must contain at least 8 characters.</Typography>\r\n                            <TextField\r\n                                label=\"Current password\"\r\n                                name=\"currentPassword\"\r\n                                value={currentPassword}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                label=\"New password\"\r\n                                name=\"newPassword\"\r\n                                value={newPassword}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                error={\r\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\r\n                                }\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                label=\"Verify password\"\r\n                                name=\"newPasswordVerified\"\r\n                                value={newPasswordVerified}\r\n                                type=\"password\"\r\n                                margin=\"normal\"\r\n                                variant=\"outlined\"\r\n                                error={\r\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\r\n                                }\r\n                                onChange={handleTextChanged}\r\n                            />\r\n\r\n                            <Row noGutters >\r\n                                <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 20 }} >\r\n                                    <PasswordUpdate\r\n                                        responseCode={passwordChangeResponseCode}\r\n                                        onCloseMessage={reset}\r\n                                    />\r\n                                </Col>\r\n                                <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 20 }} >\r\n                                    <FlexView hAlignContent=\"right\" width=\"100%\" >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={reset}>Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                onClick={requestChangePassword}\r\n                                                disabled={\r\n                                                    currentPassword.length === 0 ||\r\n                                                    newPassword.length === 0 ||\r\n                                                    newPasswordVerified.length === 0\r\n                                                }>\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nclass PasswordUpdate extends Component {\r\n\r\n    onCloseMessage = () => {\r\n        this.props.onCloseMessage();\r\n    };\r\n\r\n    renderMessage = () => {\r\n        switch (this.props.responseCode) {\r\n            case PASSWORD_CHANGE_RE_AUTH: {\r\n                return {message: \"Re-authenticating ...\", color: colors.dark_green};\r\n            }\r\n            case PASSWORD_CHANGE_FAIL: {\r\n                return {message: \"Failed to change password\", color: colors.red_700};\r\n            }\r\n            case PASSWORD_CHANGE_SUCCESS: {\r\n                return {\r\n                    message: \"Password changed successfully\",\r\n                    color: colors.dark_green\r\n                };\r\n            }\r\n            case PASSWORD_CHANGE_RE_AUTH_FAILED: {\r\n                return {message: \"Failed to re-authenticate\", color: colors.red_700};\r\n            }\r\n            case PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED: {\r\n                return {\r\n                    message: \"New passwords not match with each other\",\r\n                    color: colors.red_700\r\n                };\r\n            }\r\n            case PASSWORD_CHANGE_NOT_STRONG_ENOUGH: {\r\n                return {\r\n                    message:\r\n                        \"Password must have at least 8 characters\",\r\n                    color: colors.red_700\r\n                };\r\n            }\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            responseCode\r\n        } = this.props;\r\n        return (\r\n            responseCode === PASSWORD_CHANGE_NONE\r\n                ?\r\n                null\r\n                :\r\n                <FlexView grow={1} style={{ backgroundColor: this.renderMessage().color }} vAlignContent=\"center\" >\r\n\r\n                    <FlexView className={css(styles.changing_password_text_background)} >\r\n                        <Typography align=\"left\" variant=\"subtitle1\" color=\"inherit\" >{this.renderMessage().message}</Typography>\r\n                    </FlexView>\r\n\r\n                    <FlexView\r\n                        grow\r\n                        vAlignContent=\"center\"\r\n                        hAlignContent=\"right\"\r\n                        style={{ padding: 4 }}\r\n                    >\r\n                        <IconButton onClick={this.onCloseMessage} >\r\n                            <CloseIcon fontSize=\"small\" style={{ color: colors.white }} />\r\n                        </IconButton>\r\n                    </FlexView>\r\n                </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePasswordPage);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    changing_password_text_background: {\r\n        color: colors.white,\r\n        marginLeft: 15,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const SET_GROUP_USER_NAME_FROM_PARAMS = 'SET_GROUP_USER_NAME_FROM_PARAMS';\r\nexport const setGroupUserNameFromParams = groupUserName => {\r\n    return (dispatch, getState) => {\r\n        const prevGroupUserName = getState().manageGroupFromParams.groupUserName;\r\n\r\n        // if the newly set groupUserName is different from the current groupUserName, check again\r\n        if (prevGroupUserName !== groupUserName) {\r\n            dispatch({\r\n                type: SET_GROUP_USER_NAME_FROM_PARAMS,\r\n                groupUserName\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING = 'SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING';\r\nexport const setExpectedAndCurrentPathsForChecking = (expectedPath, currentPath) => {\r\n    return {\r\n        type: SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING,\r\n        expectedPath,\r\n        currentPath\r\n    }\r\n};\r\n\r\nexport const LOADING_ANGEL_NETWORK = 'LOADING_ANGEL_NETWORK';\r\nexport const ANGEL_NETWORK_LOADED = 'ANGEL_NETWORK_LOADED';\r\nexport const loadAngelNetwork = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            angelNetworkBeingLoaded,\r\n\r\n            expectedPath,\r\n            currentPath\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const firebaseUser = firebase.auth().currentUser;\r\n\r\n        // angel network has not been loaded before\r\n        if (!groupProperties && !groupPropertiesLoaded && !angelNetworkBeingLoaded) {\r\n\r\n            dispatch({\r\n                type: LOADING_ANGEL_NETWORK\r\n            });\r\n\r\n            // path expected and current path not matched\r\n            if (expectedPath !== currentPath) {\r\n                dispatch({\r\n                    type: ANGEL_NETWORK_LOADED,\r\n                    angelNetwork: null,\r\n                    shouldLoadOtherData: false\r\n                });\r\n                return;\r\n            }\r\n\r\n            // groupUserName is not specified --> Invest West super\r\n            if (!groupUserName) {\r\n                // the user is logged in\r\n                if (firebaseUser) {\r\n                    realtimeDBUtils\r\n                        .getUserBasedOnID(firebaseUser.uid)\r\n                        .then(user => {\r\n                            if (user.type === DB_CONST.TYPE_ADMIN) {\r\n                                if (user.superAdmin) {\r\n                                    dispatch({\r\n                                        type: ANGEL_NETWORK_LOADED,\r\n                                        angelNetwork: null,\r\n                                        shouldLoadOtherData: true\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    dispatch({\r\n                                        type: ANGEL_NETWORK_LOADED,\r\n                                        angelNetwork: null,\r\n                                        shouldLoadOtherData: false\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                dispatch({\r\n                                    type: ANGEL_NETWORK_LOADED,\r\n                                    angelNetwork: null,\r\n                                    shouldLoadOtherData: false\r\n                                });\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: ANGEL_NETWORK_LOADED,\r\n                                angelNetwork: null,\r\n                                shouldLoadOtherData: false\r\n                            });\r\n                        });\r\n                }\r\n                // the user is not logged in\r\n                else {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: null,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                    return;\r\n                }\r\n                return;\r\n            }\r\n\r\n            // angel network has been loaded before\r\n            if (groupProperties) {\r\n                // if anid = null (Invest West) or anid = angel network's anid\r\n                // do not need to load the angel network again\r\n                if (groupUserName === groupProperties.groupUserName) {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: groupProperties,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                    return;\r\n                }\r\n                // if the loaded angel network's anid is not the same as the anid specified in the URL --> load again\r\n                else {\r\n                    dispatch({\r\n                        type: SET_GROUP_USER_NAME_FROM_PARAMS,\r\n                        groupUserName\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: LOADING_ANGEL_NETWORK\r\n                    });\r\n                }\r\n            }\r\n\r\n            realtimeDBUtils\r\n                .loadAngelNetworkBasedOnGroupUserName(groupUserName)\r\n                .then(angelNetwork => {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork,\r\n                        shouldLoadOtherData: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ANGEL_NETWORK_LOADED,\r\n                        angelNetwork: null,\r\n                        shouldLoadOtherData: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet angelNetworkListener = null;\r\n\r\nexport const ANGEL_NETWORK_PROPERTIES_CHANGED = 'ANGEL_NETWORK_PROPERTIES_CHANGED';\r\nexport const startListeningForAngelNetworkChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!angelNetworkListener) {\r\n            const {\r\n                groupProperties\r\n            } = getState().manageGroupFromParams;\r\n\r\n            if (groupProperties) {\r\n                if (angelNetworkListener) {\r\n                    return;\r\n                }\r\n                angelNetworkListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                    .child(groupProperties.anid)\r\n                    .on('child_changed', snapshot => {\r\n                        const key = snapshot.key;\r\n                        const value = snapshot.val();\r\n                        dispatch({\r\n                            type: ANGEL_NETWORK_PROPERTIES_CHANGED,\r\n                            key,\r\n                            value\r\n                        });\r\n                    });\r\n            }\r\n            else {\r\n                if (angelNetworkListener) {\r\n                    angelNetworkListener.off('child_changed');\r\n                    angelNetworkListener = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForAngelNetworkChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (angelNetworkListener) {\r\n            angelNetworkListener.off('child_changed');\r\n            angelNetworkListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview/lib/index';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {Typography} from '@material-ui/core';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {\r\n    Container,\r\n    Col,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName))\r\n    }\r\n};\r\n\r\nclass HeaderWithoutDesc extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            user,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0, backgroundColor: colors.white }} >\r\n                <Row noGutters >\r\n                    <Col xs={{span: 12, order: 2}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}} >\r\n                        {\r\n                            !groupProperties\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView vAlignContent=\"center\" height=\"100%\" marginLeft={10} >\r\n                                    {\r\n                                        !user || authStatus !== AUTH_SUCCESS\r\n                                            ?\r\n                                            <NavLink\r\n                                                to={groupUserName ? ROUTES.FRONT.replace(\":groupUserName\", groupUserName) : ROUTES.FRONT_INVEST_WEST_SUPER}\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            >\r\n                                                <Typography variant=\"body1\" className={css(styles.navigation_text)} >\r\n                                                    <HomeIcon style={{ marginBottom: 6, marginRight: 5 }} />\r\n                                                    Home\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                            :\r\n                                            <NavLink\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                to={\r\n                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        `${groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        :\r\n                                                        (\r\n                                                            user.type === DB_CONST.TYPE_ISSUER\r\n                                                                ?\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                                                :\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        )\r\n                                                }>\r\n                                                <Typography variant=\"body1\" className={css(styles.navigation_text)} >\r\n                                                    <HomeIcon style={{ marginBottom: 6, marginRight: 5 }} />\r\n                                                    My dashboard\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                    }\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                    <Col xs={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 1}} >\r\n                        <FlexView style={{ padding: 8 }} column height=\"100%\" widht=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" >\r\n                            {\r\n                                !groupProperties\r\n                                    ?\r\n                                    <a href={ROUTES.ORIGINAL_WEB_URL} className={css(sharedStyles.nav_link_hover_without_changing_text_color)} >\r\n                                        <FlexView hAlignContent=\"center\" column className={css(styles.logo_field)} >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography variant=\"body1\" color=\"primary\" >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Invest West\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </a>\r\n                                    :\r\n                                    <NavLink\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                        to={\r\n                                            groupUserName\r\n                                                ?\r\n                                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                                :\r\n                                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                                        }\r\n                                    >\r\n                                        <FlexView hAlignContent=\"center\" column className={css(styles.logo_field)} >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography variant=\"body1\" color=\"primary\" >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Invest West\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </NavLink>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={{span: 12, order: 3}} md={{span: 12, order: 3}} lg={{span: 12, order: 3}} >\r\n                        <FlexView height={1} style={{ backgroundColor: colors.gray_300 }} />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderWithoutDesc);\r\n\r\nconst styles = StyleSheet.create({\r\n    logo: {\r\n        width: \"auto\",\r\n        height: 38,\r\n        marginBottom: 2\r\n    },\r\n\r\n    logo_field: {\r\n        ':hover': {\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    navigation_text: {\r\n        margin: 15,\r\n        padding: 8,\r\n        color: colors.black,\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_100\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Dialog,\r\n    DialogTitle,\r\n    Typography,\r\n    Paper,\r\n    InputAdornment,\r\n    IconButton,\r\n    FormControl\r\n} from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nimport HeaderWithoutDesc from '../../shared-components/nav-bars/HeaderWithoutDesc';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as authActions from '../../redux-store/actions/authActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nexport const INVALID_AUTH_NONE = 0;\r\nexport const INVALID_AUTH_USER_NOT_EXIST = 1;\r\nexport const INVALID_AUTH_USER_DECLINED_TO_REGISTER = 2;\r\nexport const INVALID_AUTH_USER_LEFT = 3;\r\nexport const INVALID_AUTH_USER_KICKED_OUT = 4;\r\nexport const AUTH_SUCCESS = 5;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        authenticating: state.auth.authenticating,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        resetAuthStatus: () => dispatch(authActions.resetAuthStatus()),\r\n        signin: (email, password) => dispatch(authActions.signin(email, password))\r\n    }\r\n};\r\n\r\nclass Signin extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseAuth = firebase.auth();\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            showPassword: false,\r\n\r\n            error: {\r\n                email: false,\r\n                password: false\r\n            },\r\n\r\n            resetPassword: {\r\n                resetPasswordDialogOpen: false,\r\n                resetEmail: '',\r\n\r\n                resetChecking: false,\r\n                resetError: false,\r\n                resetEmailSent: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            resetAuthStatus,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.SIGN_IN : ROUTES.SIGN_IN_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            resetAuthStatus();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            groupUserName,\r\n\r\n            authenticating,\r\n            user,\r\n\r\n            authStatus,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!authenticating && authStatus === AUTH_SUCCESS) {\r\n                switch (user.type) {\r\n                    case DB_CONST.TYPE_ADMIN:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    case DB_CONST.TYPE_INVESTOR:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    case DB_CONST.TYPE_ISSUER:\r\n                        this.props.history.push({\r\n                            pathname: groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER,\r\n                            search: '?tab=Home'\r\n                        });\r\n                        return;\r\n                    default:\r\n                        return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Capture the changes in input fields and update the corresponding states\r\n     */\r\n    handleTextChanged = event => {\r\n        // get the name of the input field\r\n        const name = event.target.name;\r\n        // get the value of the input field\r\n        const value = event.target.value;\r\n\r\n        if (name === \"resetEmail\") {\r\n            this.setState({\r\n                resetPassword: {\r\n                    ...this.state.resetPassword,\r\n                    [name]: value\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                [name]: value\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if pre-conditions met (password and email are filled?) before signing the user in.\r\n     */\r\n    handleSignin = event => {\r\n        event.preventDefault();\r\n\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const password = this.state.password;\r\n\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetEmailSent: false\r\n            }\r\n        });\r\n\r\n        if (email.length > 0 && password.length > 0) {\r\n            this.setState({\r\n                authStatus: false,\r\n                error: {\r\n                    email: false,\r\n                    password: false\r\n                }\r\n            });\r\n\r\n            this.props.signin(email, password);\r\n\r\n        } else {\r\n            if (email.length === 0 && password.length === 0) {\r\n                this.setState({\r\n                    authStatus: false,\r\n                    error: {\r\n                        email: true,\r\n                        password: true\r\n                    }\r\n                });\r\n            } else {\r\n                if (email.length === 0 && password.length > 0) {\r\n                    this.setState({\r\n                        authStatus: false,\r\n                        error: {\r\n                            email: true,\r\n                            password: false\r\n                        }\r\n                    });\r\n                } else if (password.length === 0 && email.length > 0) {\r\n                    this.setState({\r\n                        authStatus: false,\r\n                        error: {\r\n                            email: false,\r\n                            password: true\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Open Reset Password Dialog\r\n     */\r\n    openResetPasswordDialog = () => {\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetPasswordDialogOpen: true,\r\n                // set resetEmailSent state to false to ensure the message of successfully sent email (if have) will disappear\r\n                resetEmailSent: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Reset all states relating Reset Password Dialog when the dialog is closed.\r\n     */\r\n    handleCloseResetPasswordDialog = () => {\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                resetPasswordDialogOpen: false,\r\n                resetEmail: '',\r\n                resetChecking: false,\r\n                resetError: false,\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Send an email reset password to the user.\r\n     */\r\n    handleSendResetEmail = () => {\r\n        const email = this.state.resetPassword.resetEmail;\r\n        this.setState({\r\n            resetPassword: {\r\n                ...this.state.resetPassword,\r\n                // set resetChecking state to true to indicate that the email the user input is being checked\r\n                resetChecking: true\r\n            }\r\n        });\r\n        firebase\r\n            .auth()\r\n            .sendPasswordResetEmail(email)\r\n            .then(() => {\r\n                this.setState({\r\n                    resetPassword: {\r\n                        ...this.state.resetPassword,\r\n                        resetEmailSent: true\r\n                    }\r\n                });\r\n                this.handleCloseResetPasswordDialog();\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    resetPassword: {\r\n                        ...this.state.resetPassword,\r\n                        resetChecking: false,\r\n                        resetError: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Click to show password\r\n     */\r\n    handleClickShowPassword = () => {\r\n        this.setState({\r\n            showPassword: !this.state.showPassword\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Render UI elements when the signing credentials are being checked\r\n     */\r\n    renderAuthStatus = () => {\r\n        const {\r\n            groupProperties,\r\n            authenticating,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        if (this.state.resetPassword.resetEmailSent) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    className={css(styles.reset_email_sent)}\r\n                    marginBottom={20}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        align=\"left\"\r\n                    >\r\n                        An email with password reset instructions has been sent to your email address\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        } else {\r\n            if (authenticating) {\r\n                return (\r\n                    <FlexView hAlignContent=\"center\" marginBottom={20} >\r\n                        <HashLoader\r\n                            color={\r\n                                !groupProperties\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    groupProperties.settings.primaryColor\r\n                            }\r\n                        />\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                let errorMsg = '';\r\n                switch (authStatus) {\r\n                    case INVALID_AUTH_NONE:\r\n                        return null;\r\n                    case AUTH_SUCCESS:\r\n                        return null;\r\n                    case INVALID_AUTH_USER_NOT_EXIST:\r\n                        errorMsg = \"Email or password is invalid, or you are not a member of this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_DECLINED_TO_REGISTER:\r\n                        errorMsg = \"You decided not to join this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_LEFT:\r\n                        errorMsg = \"You have left this group.\";\r\n                        break;\r\n                    case INVALID_AUTH_USER_KICKED_OUT:\r\n                        errorMsg = \"Unfortunately, you are no longer a member of this group.\";\r\n                        break;\r\n                    default:\r\n                        return null;\r\n                }\r\n\r\n                return (\r\n                    <FlexView\r\n                        className={css(styles.auth_error)}\r\n                        marginBottom={20}\r\n                    >\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            align=\"left\"\r\n                        >\r\n                            {errorMsg}\r\n                        </Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\" >\r\n                    <HashLoader color={colors.primaryColor} />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0, position: \"fixed\", top: 0, height: \"100%\", overflow: \"auto\", backgroundColor: colors.gray_200 }} >\r\n                <Row noGutters >\r\n\r\n                    <HeaderWithoutDesc/>\r\n\r\n                    <Col xs={{span: 12, offset: 0}} md={{span: 6, offset: 3}} lg={{span: 6, offset: 3}} style={{ padding: 20 }}>\r\n                        <FlexView column marginTop={80} marginBottom={40} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {/** Sign in card */}\r\n                            <Paper elevation={0} square className={css(sharedStyles.kick_starter_border_box)} style={{padding: 30}}>\r\n                                <form onSubmit={this.handleSignin} >\r\n                                    <FlexView column >\r\n                                        <FlexView column hAlignContent=\"center\" marginBottom={35} >\r\n                                            <Typography variant=\"h4\" align=\"center\" paragraph color=\"primary\">Sign in to your account</Typography>\r\n                                            <Typography variant=\"body1\" align=\"center\">Connecting businesses and investors across the South West of England</Typography>\r\n                                        </FlexView>\r\n\r\n                                        {this.renderAuthStatus()}\r\n\r\n                                        <FormControl>\r\n                                            <TextField label=\"Email address\" name=\"email\" margin=\"normal\" variant=\"outlined\" error={this.state.error.email} onChange={this.handleTextChanged}/>\r\n                                        </FormControl>\r\n\r\n                                        <FormControl>\r\n                                            <TextField\r\n                                                label=\"Password\"\r\n                                                name=\"password\"\r\n                                                type={this.state.showPassword ? \"text\" : \"password\"}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={this.state.error.password}\r\n                                                onChange={this.handleTextChanged}\r\n                                                InputProps={{\r\n                                                    endAdornment: (\r\n                                                        <InputAdornment position=\"end\" >\r\n                                                            <IconButton edge=\"end\" aria-label=\"Toggle password visibility\" onClick={this.handleClickShowPassword} >\r\n                                                                {\r\n                                                                    !this.state.showPassword\r\n                                                                        ?\r\n                                                                        <VisibilityOff/>\r\n                                                                        :\r\n                                                                        <Visibility/>\r\n                                                                }\r\n                                                            </IconButton>\r\n                                                        </InputAdornment>\r\n                                                    ),\r\n                                                }}\r\n                                            />\r\n                                        </FormControl>\r\n\r\n                                        <FlexView marginTop={35} marginBottom={45} >\r\n                                            <Typography variant=\"body1\" align=\"left\" >\r\n                                                By clicking Sign In, you agree to our\r\n                                                <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover)} style={{ color: !groupProperties ? colors.primaryColor : groupProperties.settings.primaryColor }}>\r\n                                                    <b> &nbsp;Terms of use&nbsp; </b>\r\n                                                </NavLink>\r\n                                                and our\r\n                                                <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover)} style={{ color: !groupProperties ? colors.primaryColor : groupProperties.settings.primaryColor }} >\r\n                                                    <b> &nbsp;Privacy policy. </b>\r\n                                                </NavLink>\r\n                                            </Typography>\r\n                                        </FlexView>\r\n\r\n                                        <FormControl>\r\n                                            <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\" className={css(sharedStyles.no_text_transform)}>Sign in</Button>\r\n                                        </FormControl>\r\n\r\n                                        <FlexView hAlignContent=\"center\" marginTop={25} onClick={this.openResetPasswordDialog} >\r\n                                            <Typography variant=\"body1\" color=\"primary\" className={css(sharedStyles.nav_link_hover)}>Forgot your password?</Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </form>\r\n                            </Paper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <ResetPasswordDialog groupProperties={groupProperties} open={this.state.resetPassword.resetPasswordDialogOpen} onClose={this.handleCloseResetPasswordDialog} onTextChanged={this.handleTextChanged} resetEmail={this.state.resetPassword.resetEmail} onSendEmailClick={this.handleSendResetEmail} resetChecking={this.state.resetPassword.resetChecking} resetError={this.state.resetPassword.resetError} />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);\r\n\r\nclass ResetPasswordDialog extends Component {\r\n\r\n    handleClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    onSendEmailClick = () => {\r\n        this.props.onSendEmailClick();\r\n    };\r\n\r\n    renderReset = () => {\r\n        const {\r\n            groupProperties,\r\n            resetChecking,\r\n            resetError\r\n        } = this.props;\r\n        if (resetChecking) {\r\n            return (\r\n                <FlexView hAlignContent=\"center\" marginBottom={30} >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        } else {\r\n            if (resetError) {\r\n                return (\r\n                    <FlexView style={{ backgroundColor: colors.red_700 }} vAlignContent=\"center\" marginBottom={30} >\r\n                        <Typography variant=\"body1\" className={css(styles.reset_email_error_text)}>Unable to send request password email</Typography>\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            resetEmail,\r\n            resetError,\r\n            resetChecking,\r\n\r\n            onClose,\r\n            onTextChanged,\r\n            onSendEmailClick,\r\n            ...other\r\n        } = this.props;\r\n        return (\r\n            <Dialog fullWidth maxWidth=\"sm\" onClose={this.handleClose} {...other} >\r\n                <DialogTitle>\r\n                    <FlexView hAlignContent=\"center\" marginTop={20} >\r\n                        <Typography variant=\"h4\" align=\"center\" paragraph>Reset Your Password</Typography>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <FlexView column hAlignContent=\"center\" >\r\n                    <FlexView column marginRight={60} marginLeft={60} >\r\n                        <Typography variant=\"body1\" align=\"center\" paragraph>Please provide the email address you used when you signed up for your Invest West account.</Typography>\r\n                        <Typography variant=\"body1\" align=\"center\" paragraph>We will send you an email with a link to reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b></Typography>\r\n                    </FlexView>\r\n                    <FlexView column width=\"100%\" marginTop={50} className={css(styles.reset_password_actions_layout)}>\r\n\r\n                        {this.renderReset()}\r\n\r\n                        <Container fluid style={{ padding: 0 }}>\r\n                            <Row>\r\n                                <Col xs={12} sm={12} md={7} lg={9}>\r\n                                    <FlexView height=\"100%\" vAlignContent=\"center\">\r\n                                        <TextField name=\"resetEmail\" value={resetEmail} label=\"Email address\" variant=\"outlined\" fullWidth onChange={this.onTextChanged}/>\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col xs={12} sm={12} md={5} lg={3}>\r\n                                    <FlexView height=\"100%\" vAlignContent=\"center\">\r\n                                        <Button fullWidth color=\"primary\" variant=\"contained\" size=\"medium\" onClick={this.onSendEmailClick} className={css(sharedStyles.no_text_transform)}>Send</Button>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n                    </FlexView>\r\n                </FlexView>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    hover: {\r\n        ':hover': {\r\n            color: colors.gray_800,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    auth_error: {\r\n        backgroundColor: colors.red_700,\r\n        color: colors.white,\r\n        padding: 15\r\n    },\r\n\r\n    reset_email_sent: {\r\n        backgroundColor: colors.dark_green,\r\n        color: colors.white,\r\n        padding: 15\r\n    },\r\n\r\n    reset_password_actions_layout: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingTop: 42,\r\n        paddingBottom: 42,\r\n        backgroundColor: colors.gray_200\r\n    },\r\n\r\n    reset_email_error_text: {\r\n        color: colors.white,\r\n        marginLeft: 15,\r\n        marginTop: 15,\r\n        marginBottom: 15\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {\r\n    INVALID_AUTH_USER_NOT_EXIST,\r\n    INVALID_AUTH_USER_DECLINED_TO_REGISTER,\r\n    INVALID_AUTH_USER_LEFT,\r\n    INVALID_AUTH_USER_KICKED_OUT,\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nexport const INITIALIZE_AUTH_STATE = 'INITIALIZE_AUTH_STATE';\r\nexport const initializeAuthState = () => {\r\n    return {\r\n        type: INITIALIZE_AUTH_STATE\r\n    }\r\n};\r\n\r\nexport const RESET_AUTH_STATUS = 'RESET_AUTH_STATUS';\r\nexport const resetAuthStatus = () => {\r\n    return {\r\n        type: RESET_AUTH_STATUS\r\n    }\r\n};\r\n\r\nexport const SIGNING_IN = 'SIGNING_IN';\r\nexport const AUTHENTICATING = 'AUTHENTICATING';\r\nexport const FINISHED_AUTHENTICATING = 'FINISHED_AUTHENTICATING';\r\nexport const signin = (email, password) => {\r\n    return (dispatch, getState) => {\r\n        // if the user is already logged in and they still press signin again\r\n        // log them out first before starting the sign in process\r\n        logOutWithIndirectDispatch(dispatch);\r\n\r\n        dispatch({\r\n            type: SIGNING_IN\r\n        });\r\n\r\n        dispatch({\r\n            type: AUTHENTICATING\r\n        });\r\n\r\n        firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, password)\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_AUTHENTICATING,\r\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP = 'TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP';\r\nexport const togglePreventValidatingUserWhenSigningUp = (shouldPrevent) => {\r\n    return {\r\n        type: TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP,\r\n        shouldPrevent\r\n    }\r\n};\r\n\r\nexport const USER_PROFILE_LOADED = 'USER_PROFILE_LOADED';\r\nexport const AUTH_LOADING_GROUPS_USER_IS_IN = 'AUTH_LOADING_GROUPS_USER_IS_IN';\r\nexport const AUTH_GROUPS_USER_IS_IN_LOADED = 'AUTH_GROUPS_USER_IS_IN_LOADED';\r\n/**\r\n * This function is used to load user's profile and check if the user belongs to the angel network specified in the URL\r\n *\r\n * @param uid\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const getUserProfileAndValidateUser = uid => {\r\n    return (dispatch, getState) => {\r\n\r\n        if (!uid) {\r\n            dispatch({\r\n                type: USER_PROFILE_LOADED,\r\n                user: null\r\n            });\r\n            return;\r\n        }\r\n\r\n        const {\r\n            groupUserName,\r\n            groupProperties\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const {\r\n            signingIn,\r\n            user,\r\n            userLoaded,\r\n            preventValidatingUserWhenSigningUp\r\n        } = getState().auth;\r\n\r\n        // if in signup process, do not proceed loading the user's profile as it will cause a lot of conflicts\r\n        // due to the lack of user's data on the database\r\n        if (preventValidatingUserWhenSigningUp) {\r\n            return;\r\n        }\r\n\r\n        if (user && userLoaded) {\r\n            return;\r\n        }\r\n\r\n        // if the page is reloaded (not from the Sign in button), this process will become the signin process\r\n        if (!signingIn) {\r\n            dispatch({\r\n                type: AUTHENTICATING\r\n            });\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .getUserBasedOnID(uid)\r\n            .then(user => {\r\n                dispatch({\r\n                    type: USER_PROFILE_LOADED,\r\n                    user\r\n                });\r\n\r\n                // if the user is an admin, do not need to check for groups they are in\r\n                if (user.type === DB_CONST.TYPE_ADMIN) {\r\n                    // groupUserName is specified in the URL --> angel network login\r\n                    if (groupUserName) {\r\n                        // check if the angel network specified in the URL is valid\r\n                        if (groupProperties) {\r\n                            // check if the admin is from an angel network and if the admin's anid is equal to the anid specified in the URL\r\n                            if (!user.isInvestWest && !user.superAdmin && user.anid === groupProperties.anid) {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: AUTH_SUCCESS\r\n                                });\r\n                            } else {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                            }\r\n                        } else {\r\n                            // do nothing\r\n                        }\r\n                    }\r\n                    // angel network is not specified in the URL --> Invest West login\r\n                    else {\r\n                        // admins are from Invest West\r\n                        if (user.isInvestWest || user.superAdmin) {\r\n                            dispatch({\r\n                                type: FINISHED_AUTHENTICATING,\r\n                                authStatus: AUTH_SUCCESS\r\n                            });\r\n                        } else {\r\n                            dispatch({\r\n                                type: FINISHED_AUTHENTICATING,\r\n                                authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                            });\r\n\r\n                            logOutWithIndirectDispatch(dispatch);\r\n                        }\r\n                    }\r\n                }\r\n                // the user is not an admin (issuer or investor), load the groups they are in to check for login with each angel network\r\n                else {\r\n                    dispatch({\r\n                        type: AUTH_LOADING_GROUPS_USER_IS_IN\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .loadGroupsUserIsIn(user.id)\r\n                        .then(groupsUserIsIn => {\r\n                            dispatch({\r\n                                type: AUTH_GROUPS_USER_IS_IN_LOADED,\r\n                                groups: groupsUserIsIn\r\n                            });\r\n\r\n                            // user is not in any groups --> this is impractical but worth checking just in case\r\n                            if (!groupsUserIsIn || (groupsUserIsIn && groupsUserIsIn.length === 0)) {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                                return;\r\n                            }\r\n\r\n                            let groupFound = null;\r\n\r\n                            // groupUserName is specified in the URL --> angel network login\r\n                            if (groupUserName) {\r\n                                // check if the angel network specified in the URL is valid\r\n                                if (groupProperties) {\r\n                                    groupsUserIsIn.forEach(group => {\r\n                                        if (group.anid === groupProperties.anid) {\r\n                                            groupFound = group;\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    // do nothing\r\n                                }\r\n                            }\r\n                            // angel network is not specified in the URL --> Invest West login\r\n                            else {\r\n                                groupsUserIsIn.forEach(group => {\r\n                                    if (group.isInvestWest) {\r\n                                        groupFound = group;\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            // check if the angel network specified in the URL is valid\r\n                            if (groupProperties) {\r\n                                if (groupFound) {\r\n                                    if (groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\r\n                                        dispatch({\r\n                                            type: FINISHED_AUTHENTICATING,\r\n                                            authStatus: AUTH_SUCCESS\r\n                                        });\r\n                                    } else {\r\n                                        dispatch({\r\n                                            type: FINISHED_AUTHENTICATING,\r\n                                            authStatus:\r\n                                                groupFound.userInGroupStatus === DB_CONST.INVITED_USER_DECLINED_TO_REGISTER\r\n                                                    ?\r\n                                                    INVALID_AUTH_USER_DECLINED_TO_REGISTER\r\n                                                    :\r\n                                                    groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_LEFT\r\n                                                        ?\r\n                                                        INVALID_AUTH_USER_LEFT\r\n                                                        :\r\n                                                        groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_KICKED_OUT\r\n                                                            ?\r\n                                                            INVALID_AUTH_USER_KICKED_OUT\r\n                                                            :\r\n                                                            INVALID_AUTH_USER_NOT_EXIST\r\n                                        });\r\n\r\n                                        logOutWithIndirectDispatch(dispatch);\r\n                                    }\r\n                                } else {\r\n                                    dispatch({\r\n                                        type: FINISHED_AUTHENTICATING,\r\n                                        authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                    });\r\n\r\n                                    logOutWithIndirectDispatch(dispatch);\r\n                                }\r\n                            }\r\n                            // the angel network is set to null --> super page\r\n                            else {\r\n                                dispatch({\r\n                                    type: FINISHED_AUTHENTICATING,\r\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                                });\r\n\r\n                                logOutWithIndirectDispatch(dispatch);\r\n                            }\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: AUTH_LOADING_GROUPS_USER_IS_IN,\r\n                                groups: null,\r\n                                error\r\n                            });\r\n\r\n                            logOutWithIndirectDispatch(dispatch);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: USER_PROFILE_LOADED,\r\n                    user: null\r\n                });\r\n\r\n                dispatch({\r\n                    type: FINISHED_AUTHENTICATING,\r\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST\r\n                });\r\n\r\n                logOutWithIndirectDispatch(dispatch);\r\n            });\r\n    }\r\n};\r\n\r\n/**\r\n * Logout function to be used within this file\r\n *\r\n * @param dispatch\r\n */\r\nexport const logOutWithIndirectDispatch = (dispatch) => {\r\n    firebase\r\n        .auth()\r\n        .signOut()\r\n        .then(() => {\r\n            dispatch({\r\n                type: LOG_OUT\r\n            });\r\n        });\r\n};\r\n\r\nexport const LOG_OUT = 'LOG_OUT';\r\n/**\r\n * Logout function --> called outside this file\r\n *\r\n * For some reasons (don't now), this function won't get called when called inside this file\r\n *\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const logout = () => {\r\n    return (dispatch, getState) => {\r\n        // firebase\r\n        //     .auth()\r\n        //     .signOut()\r\n        //     .then(() => {\r\n        //\r\n        //     });\r\n        return dispatch({\r\n            type: LOG_OUT\r\n        });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet userListener = null;\r\nlet groupsUserIsInListener = null;\r\n\r\nexport const CURRENT_USER_PROFILE_HAS_CHANGED = 'CURRENT_USER_PROFILE_HAS_CHANGED';\r\nexport const startListeningForUserProfileChanges = () => {\r\n    return (dispatch, getState) => {\r\n        if (!userListener) {\r\n            const {\r\n                user\r\n            } = getState().auth;\r\n\r\n            userListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id);\r\n\r\n            userListener\r\n                .on('value', snapshot => {\r\n                    const userChanged = snapshot.val();\r\n                    // this on changed function will be invoked as soon as the user profile is downloaded\r\n                    // however, the snapshot.val() returns null as there are no changes\r\n                    // thus, we need to check if snapshot.val() is not null before assigning its value\r\n                    // to the user variable. Otherwise, the user variable will be set to null which causes\r\n                    // PageNotFound to be returned.\r\n                    if (userChanged) {\r\n                        dispatch({\r\n                            type: CURRENT_USER_PROFILE_HAS_CHANGED,\r\n                            userChanged\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForUserProfileChanges = () => {\r\n    return (dispatch, getState) => {\r\n        if (userListener) {\r\n            userListener.off('value');\r\n            userListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const GROUPS_USER_IS_IN_HAVE_CHANGED = 'GROUPS_USER_IS_IN_HAVE_CHANGED';\r\nexport const startListeningForGroupsUserIsIn = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const user = getState().auth.user;\r\n\r\n        if (!groupsUserIsInListener) {\r\n            groupsUserIsInListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('email')\r\n                .equalTo(user.email);\r\n\r\n            groupsUserIsInListener\r\n                .on('child_added', snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    const groupsUserIsIn = getState().auth.groupsUserIsIn;\r\n\r\n                    let groupUserIsIn = {\r\n                        invitedUser: invitedUser,\r\n                        anid: invitedUser.invitedBy,\r\n                        userInGroupStatus: invitedUser.status\r\n                    };\r\n\r\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\r\n                    if (index === -1) {\r\n                        realtimeDBUtils\r\n                            .loadAngelNetworkBasedOnANID(groupUserIsIn.anid)\r\n                            .then(angelNetwork => {\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n\r\n                                dispatch({\r\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\r\n                                    groups: [...groupsUserIsIn, groupUserIsIn]\r\n                                });\r\n                            });\r\n                    }\r\n                });\r\n\r\n            groupsUserIsInListener\r\n                .on('child_changed', snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    let groupsUserIsIn = getState().auth.groupsUserIsIn;\r\n\r\n                    let groupUserIsIn = {\r\n                        invitedUser: invitedUser,\r\n                        anid: invitedUser.invitedBy,\r\n                        userInGroupStatus: invitedUser.status\r\n                    };\r\n\r\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\r\n                    if (index !== -1) {\r\n                        realtimeDBUtils\r\n                            .loadAngelNetworkBasedOnANID(groupsUserIsIn.anid)\r\n                            .then(angelNetwork => {\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n\r\n                                groupsUserIsIn[index] = groupsUserIsIn;\r\n\r\n                                dispatch({\r\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\r\n                                    groups: [...groupsUserIsIn]\r\n                                });\r\n                            });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForGroupsUserIsIn = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupsUserIsInListener) {\r\n            groupsUserIsInListener.off('child_added');\r\n            groupsUserIsInListener.off('child_changed');\r\n            groupsUserIsInListener = null;\r\n        }\r\n    }\r\n};\r\n\r\n","export const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\r\nexport const toggleSidebar = checkSidebarDocked => {\r\n    return (dispatch, getState) => {\r\n\r\n        if (!checkSidebarDocked) {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarOpen: false\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (getState().MediaQueryState.isLaptop || getState().MediaQueryState.isDesktop) {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarDocked: !getState().dashboardSidebar.sidebarDocked,\r\n                sidebarOpen: false\r\n            });\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: TOGGLE_SIDEBAR,\r\n                sidebarDocked: false,\r\n                sidebarOpen: !getState().dashboardSidebar.sidebarOpen\r\n            });\r\n        }\r\n    }\r\n};","import * as utils from '../../utils/utils';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {trackActivity} from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const LOADING_FORUMS = 'LOADING_FORUMS';\r\nexport const FINISHED_LOADING_FORUMS = 'FINISHED_LOADING_FORUMS';\r\nexport const ERROR_LOADING_FORUMS = 'ERROR_LOADING_FORUMS';\r\nexport const loadForums = (mode) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const forums = getState().manageForums.forums;\r\n        const forumsLoaded = getState().manageForums.forumsLoaded;\r\n\r\n        if (!forumsLoaded && forums.length === 0) {\r\n            dispatch({\r\n                type: LOADING_FORUMS\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .loadForums(mode)\r\n                .then(forums => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_FORUMS,\r\n                        forums\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_FORUMS,\r\n                        forums: [],\r\n                        error\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not load forums.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_FORUMS_MAIN = 'GO_BACK_TO_FORUMS_MAIN';\r\nexport const goBackToForumsMain = () => {\r\n    return {\r\n        type: GO_BACK_TO_FORUMS_MAIN\r\n    }\r\n};\r\n\r\nexport const TOGGLE_CREATE_NEW_FORUM = 'TOGGLE_CREATE_NEW_FORUM';\r\nexport const toggleCreateNewForum = (open, forumEdited) => {\r\n    return {\r\n        type: TOGGLE_CREATE_NEW_FORUM,\r\n        open, // true --> Open, false --> Close\r\n        forumEdited // not null --> Editing a forum, null --> Creating a new forum\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_NEW_FORUM = 'ERROR_CREATING_NEW_FORUM';\r\nexport const createNewForum = () => {\r\n    return (dispatch, getState) => {\r\n        let forumBeforeEditing = getState().manageForums.forumEdited;\r\n        const createForumName = getState().manageForums.createForumName;\r\n        const createForumDesc = getState().manageForums.createForumDesc;\r\n\r\n        if (createForumName.trim().length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_NEW_FORUM\r\n            });\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // creating a new forum\r\n        if (!forumBeforeEditing) {\r\n            const forum = {\r\n                name: createForumName,\r\n                description: createForumDesc,\r\n                dateCreated: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createForum(forum)\r\n                .then(forumID => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_FORUM,\r\n                        open: false,\r\n                        forumEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                            interactedObjectID: forumID,\r\n                            value: {\r\n                                ...forum,\r\n                                id: forumID\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM\r\n                                .replace(\"%forum%\", forum.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Forum created.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create forum.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing a forum\r\n        else {\r\n            forumBeforeEditing.author = {\r\n                id: forumBeforeEditing.author.id\r\n            };\r\n\r\n            // only allow super admins to edit a forum\r\n            if (!currentUser\r\n                || (\r\n                    currentUser && !currentUser.superAdmin\r\n                )\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            let forumAfterEditing = JSON.parse(JSON.stringify(forumBeforeEditing));\r\n            forumAfterEditing.name = createForumName;\r\n            forumAfterEditing.description = createForumDesc;\r\n            // update the edited time\r\n            forumAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editForum(forumAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_FORUM,\r\n                        open: false,\r\n                        forumEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                            interactedObjectID: forumAfterEditing.id,\r\n                            value: {\r\n                                before: forumBeforeEditing,\r\n                                after: forumAfterEditing\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM\r\n                                .replace(\"%forumName%\", forumAfterEditing.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Forum updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update forum.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const deleteForum = forumID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // only allow super admins to delete a forum\r\n        if (!currentUser\r\n            || (\r\n                currentUser && !currentUser.superAdmin\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        let forums = [...getState().manageForums.forums];\r\n        let forumBeforeChanging = JSON.parse(JSON.stringify(forums[forums.findIndex(forum => forum.id === forumID)]));\r\n        forumBeforeChanging.author = {\r\n            id: forumBeforeChanging.author.id\r\n        };\r\n\r\n        realtimeDBUtils\r\n            .deleteForum(forumID)\r\n            .then(() => {\r\n                const forumAfterChanging = {\r\n                    ...forumBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUMS_CHILD,\r\n                    interactedObjectID: forumBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM\r\n                        .replace(\"%forumName%\", forumBeforeChanging.name),\r\n                    value: {\r\n                        before: forumBeforeChanging,\r\n                        after: forumAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Forum deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete forum.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const FORUMS_INPUT_CHANGED = 'FORUMS_INPUT_CHANGED';\r\nexport const handleForumsInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const targetName = event.target.name;\r\n        const targetValue = event.target.value;\r\n\r\n        dispatch({\r\n            type: FORUMS_INPUT_CHANGED,\r\n            name: targetName,\r\n            value: targetValue\r\n        });\r\n\r\n        switch (targetName) {\r\n            // forumsLoadModeChanged\r\n            case \"forumsLoadMode\": {\r\n                dispatch({\r\n                    type: LOADING_FORUMS\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .loadForums(targetValue)\r\n                    .then(forums => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_FORUMS,\r\n                            forums\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_FORUMS,\r\n                            forums: [],\r\n                            error\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                            message: \"Error happened. Could not load forums.\",\r\n                            color: \"error\",\r\n                            position: \"bottom\"\r\n                        });\r\n                    });\r\n\r\n                return;\r\n            }\r\n            // threadsLoadMode changed\r\n            case \"threadsLoadMode\": {\r\n\r\n                const forumSelected = getState().manageForums.forumSelected;\r\n\r\n                dispatch({\r\n                    type: LOADING_THREADS_IN_A_FORUM,\r\n                    forumSelected: forumSelected\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .loadThreads(targetValue, forumSelected)\r\n                    .then(threads => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                            threads\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                            threads: [],\r\n                            error\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                            message: \"Error happened. Could not load threads.\",\r\n                            color: \"error\",\r\n                            position: \"bottom\"\r\n                        });\r\n                    });\r\n\r\n                return;\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n};\r\n\r\nexport const LOADING_THREADS_IN_A_FORUM = 'LOADING_THREADS_IN_A_FORUM';\r\nexport const FINISHED_LOADING_THREADS_IN_A_FORUM = 'FINISHED_LOADING_THREADS_IN_A_FORUM';\r\nexport const clickOnAParticularForum = forum => {\r\n    return (dispatch, getState) => {\r\n\r\n        const threadsLoadMode = getState().manageForums.threadsLoadMode;\r\n\r\n        dispatch({\r\n            type: LOADING_THREADS_IN_A_FORUM,\r\n            forumSelected: forum\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadThreads(threadsLoadMode, forum)\r\n            .then(threads => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                    threads\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\r\n                    threads: [],\r\n                    error\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load threads.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_FORUMS_LIST = 'GO_BACK_TO_FORUMS_LIST';\r\nexport const goBackToForumsList = () => {\r\n    return {\r\n        type: GO_BACK_TO_FORUMS_LIST\r\n    }\r\n};\r\n\r\nexport const TOGGLE_CREATE_NEW_THREAD = 'TOGGLE_CREATE_NEW_THREAD';\r\nexport const toggleCreateNewThread = (open, threadEdited) => {\r\n    return {\r\n        type: TOGGLE_CREATE_NEW_THREAD,\r\n        open, // true --> Open, false --> Close\r\n        threadEdited // not null --> Editing a thread, null --> Creating a new thread\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_NEW_THREAD = 'ERROR_CREATING_NEW_THREAD';\r\nexport const createNewThread = () => {\r\n    return (dispatch, getState) => {\r\n        let threadBeforeEditing = getState().manageForums.threadEdited;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const createThreadName = getState().manageForums.createThreadName;\r\n        const createThreadBriefDesc = getState().manageForums.createThreadBriefDesc;\r\n        const createThreadMessage = getState().manageForums.createThreadMessage;\r\n\r\n        if (createThreadName.trim().length === 0\r\n            || createThreadBriefDesc.trim().length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_NEW_THREAD\r\n            });\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // creating a new thread\r\n        if (!threadBeforeEditing) {\r\n            const thread = {\r\n                forumID: forumSelected.id,\r\n                name: createThreadName,\r\n                message: createThreadMessage,\r\n                description: createThreadBriefDesc,\r\n                dateCreated: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createThread(thread)\r\n                .then(threadID => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_THREAD,\r\n                        open: false,\r\n                        threadEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                            interactedObjectID: threadID,\r\n                            value: {\r\n                                ...thread,\r\n                                id: threadID\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD\r\n                                .replace(\"%thread%\", thread.name)\r\n                                .replace(\"%forum%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Thread created.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create thread.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing a thread\r\n        else {\r\n            threadBeforeEditing.author = {\r\n                id: threadBeforeEditing.author.id\r\n            };\r\n\r\n            // only allow super admins to edit a thread\r\n            if (!currentUser\r\n                || (\r\n                    currentUser && !currentUser.superAdmin\r\n                )\r\n            ) {\r\n                return;\r\n            }\r\n\r\n            let threadAfterEditing = JSON.parse(JSON.stringify(threadBeforeEditing));\r\n            threadAfterEditing.name = createThreadName;\r\n            threadAfterEditing.description = createThreadBriefDesc;\r\n            threadAfterEditing.message = createThreadMessage;\r\n            // update the edited time\r\n            threadAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editThread(threadAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_NEW_THREAD,\r\n                        open: false,\r\n                        threadEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                            interactedObjectID: threadAfterEditing.id,\r\n                            value: {\r\n                                before: threadBeforeEditing,\r\n                                after: threadAfterEditing\r\n                            },\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD\r\n                                .replace(\"%threadName%\", threadAfterEditing.name)\r\n                                .replace(\"%forumName%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Thread updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update thread.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const deleteThread = threadID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n\r\n        // only allow super admins to delete a thread\r\n        if (!currentUser\r\n            || (\r\n                currentUser && !currentUser.superAdmin\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        let threads = [...getState().manageForums.forumThreads];\r\n        let threadBeforeChanging = JSON.parse(JSON.stringify(threads[threads.findIndex(thread => thread.id === threadID)]));\r\n        threadBeforeChanging.author = {\r\n            id: threadBeforeChanging.author.id\r\n        };\r\n\r\n        realtimeDBUtils\r\n            .deleteThread(threadID)\r\n            .then(() => {\r\n                const threadAfterChanging = {\r\n                    ...threadBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                    interactedObjectID: threadBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD\r\n                        .replace(\"%threadName%\", threadBeforeChanging.name)\r\n                        .replace(\"%forumName%\", forumSelected.name),\r\n                    value: {\r\n                        before: threadBeforeChanging,\r\n                        after: threadAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Thread deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete thread.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const LOADING_REPLIES_IN_A_THREAD = 'LOADING_REPLIES_IN_A_THREAD';\r\nexport const FINISHED_LOADING_REPLIES_IN_A_THREAD = 'FINISHED_LOADING_REPLIES_IN_A_THREAD';\r\nexport const clickOnAParticularThread = thread => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: LOADING_REPLIES_IN_A_THREAD,\r\n            threadSelected: thread\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadThreadReplies(thread)\r\n            .then(replies => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\r\n                    replies\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\r\n                    replies: [],\r\n                    error\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load replies.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GO_BACK_TO_THREADS_LIST = 'GO_BACK_TO_THREADS_LIST';\r\nexport const goBackToThreadsList = () => {\r\n    return {\r\n        type: GO_BACK_TO_THREADS_LIST\r\n    }\r\n};\r\n\r\nexport const TOGGLE_THREAD_REPLY = 'TOGGLE_THREAD_REPLY';\r\nexport const toggleThreadReply = (open, threadReplyEdited) => {\r\n    return {\r\n        type: TOGGLE_THREAD_REPLY,\r\n        open,\r\n        threadReplyEdited\r\n    }\r\n};\r\n\r\nexport const deleteThreadReply = threadReplyID => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        let threadReplies = [...getState().manageForums.forumThreadReplies];\r\n        let threadReplyBeforeChanging = JSON.parse(JSON.stringify(threadReplies[threadReplies.findIndex(reply => reply.id === threadReplyID)]));\r\n        threadReplyBeforeChanging.author = {\r\n            id: threadReplyBeforeChanging.author.id\r\n        };\r\n\r\n        // this if statement ensures only super admins or the owner of the reply can delete it\r\n        if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeChanging.author.id) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .deleteThreadReply(threadReplyID)\r\n            .then(() => {\r\n                const threadReplyAfterChanging = {\r\n                    ...threadReplyBeforeChanging,\r\n                    deleted: true\r\n                };\r\n\r\n                // track super admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\r\n                    interactedObjectID: threadReplyBeforeChanging.id,\r\n                    activitySummary: realtimeDBUtils\r\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY\r\n                        .replace(\"%threadName%\", forumThreadSelected.name)\r\n                        .replace(\"%forumName%\", forumSelected.name),\r\n                    value: {\r\n                        before: threadReplyBeforeChanging,\r\n                        after: threadReplyAfterChanging\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Reply deleted.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not delete reply.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const ERROR_CREATING_THREAD_REPLY = 'ERROR_CREATING_THREAD_REPLY';\r\nexport const submitThreadReply = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n        const threadReplySubject = getState().manageForums.threadReplySubject;\r\n        const threadReplyMessage = getState().manageForums.threadReplyMessage;\r\n\r\n        let threadReplyBeforeEditing = getState().manageForums.threadReplyEdited;\r\n\r\n        if (threadReplySubject.trim().length === 0 || threadReplyMessage.ops.length === 0) {\r\n            dispatch({\r\n                type: ERROR_CREATING_THREAD_REPLY\r\n            });\r\n            return;\r\n        }\r\n\r\n        // creating a new thread reply\r\n        if (!threadReplyBeforeEditing) {\r\n            const reply = {\r\n                threadID: forumThreadSelected.id,\r\n                subject: threadReplySubject,\r\n                message: threadReplyMessage,\r\n                replyDate: utils.getCurrentDate(),\r\n                author: {\r\n                    id: currentUser.id\r\n                }\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .createThreadReply(reply)\r\n                .then(replyID => {\r\n                    dispatch({\r\n                        type: TOGGLE_THREAD_REPLY,\r\n                        open: false,\r\n                        threadReplyEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            value: {\r\n                                ...reply,\r\n                                id: replyID\r\n                            },\r\n                            activitySummary:\r\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD\r\n                                    .replace(\"%thread%\", forumThreadSelected.name)\r\n                                    .replace(\"%forum%\", forumSelected.name)\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not create reply.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n        // editing an existing thread reply\r\n        else {\r\n            threadReplyBeforeEditing.author = {\r\n                id: threadReplyBeforeEditing.author.id\r\n            }\r\n\r\n            // this if statement ensures only super admins or the owner of the reply can edit it\r\n            if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeEditing.author.id) {\r\n                return;\r\n            }\r\n\r\n            let threadReplyAfterEditing = JSON.parse(JSON.stringify(threadReplyBeforeEditing));\r\n            threadReplyAfterEditing.subject = threadReplySubject;\r\n            threadReplyAfterEditing.message = threadReplyMessage;\r\n            threadReplyAfterEditing.lastEdited = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .editThreadReply(threadReplyAfterEditing)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_THREAD_REPLY,\r\n                        open: false,\r\n                        threadReplyEdited: null\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\r\n                            interactedObjectID: threadReplyAfterEditing.id,\r\n                            value: {\r\n                                before: threadReplyBeforeEditing,\r\n                                after: threadReplyAfterEditing\r\n                            },\r\n                            activitySummary:\r\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY\r\n                                    .replace(\"%threadName%\", forumThreadSelected.name)\r\n                                    .replace(\"%forumName%\", forumSelected.name)\r\n                        });\r\n\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Reply updated.\",\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update reply.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_FORUMS_TABLE_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (table, newPage) => {\r\n    return {\r\n        type: MANAGE_FORUMS_TABLE_PAGE_CHANGED,\r\n        newPage,\r\n        table\r\n    }\r\n};\r\n\r\nexport const MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = (table, event) => {\r\n    return {\r\n        type: MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10),\r\n        table\r\n    }\r\n};\r\n\r\nexport const FORUMS_QUILL_CHANGED = 'FORUMS_QUILL_CHANGED';\r\nexport const THREAD_CONTENT_QUILL = 'THREAD_CONTENT_QUILL';\r\nexport const THREAD_REPLY_CONTENT_QUILL = 'THREAD_REPLY_CONTENT_QUILL';\r\nexport const handleQuillChanged = (field, editor) => {\r\n    // check if the editor is empty (or does not have any text)\r\n    if (editor.getText().trim().length === 0) {\r\n        return {\r\n            type: FORUMS_QUILL_CHANGED,\r\n            quill: {ops: []},\r\n            field\r\n        }\r\n    } else {\r\n        return {\r\n            type: FORUMS_QUILL_CHANGED,\r\n            quill: editor.getContents(),\r\n            field\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\nlet forumsListener = null;\r\nlet forumThreadsListener = null;\r\nlet forumThreadRepliesListener = null;\r\n\r\nexport const FORUMS_CHANGED = 'FORUMS_CHANGED';\r\nexport const startListeningForForumsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!forumsListener) {\r\n            forumsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUMS_CHILD);\r\n\r\n            // a new forum is added\r\n            forumsListener\r\n                .on('child_added', snapshot => {\r\n                    let forum = snapshot.val();\r\n\r\n                    const currentUser = getState().auth.user;\r\n                    const forumsLoadMode = getState().manageForums.forumsLoadMode;\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\r\n\r\n                    // only add if the forum is not in the local forums array\r\n                    if (existingForumIndex === -1) {\r\n                        // only add live forums\r\n                        if (forumsLoadMode === realtimeDBUtils.LOAD_LIVE_FORUMS) {\r\n                            if (!forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            ) {\r\n                                if (forum.author.id === currentUser.id) {\r\n                                    forum.author = currentUser;\r\n                                    forums.push(forum);\r\n\r\n                                    dispatch({\r\n                                        type: FORUMS_CHANGED,\r\n                                        forumsChanged: [...forums]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(forum.author.id)\r\n                                        .then(user => {\r\n                                            forum.author = user;\r\n                                            forums.push(forum);\r\n\r\n                                            dispatch({\r\n                                                type: FORUMS_CHANGED,\r\n                                                forumsChanged: [...forums]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                        // only add deleted forums\r\n                        else {\r\n                            if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                                if (forum.author.id === currentUser.id) {\r\n                                    forum.author = currentUser;\r\n                                    forums.push(forum);\r\n\r\n                                    dispatch({\r\n                                        type: FORUMS_CHANGED,\r\n                                        forumsChanged: [...forums]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(forum.author.id)\r\n                                        .then(user => {\r\n                                            forum.author = user;\r\n                                            forums.push(forum);\r\n\r\n                                            dispatch({\r\n                                                type: FORUMS_CHANGED,\r\n                                                forumsChanged: [...forums]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a forum has changed\r\n            forumsListener\r\n                .on('child_changed', snapshot => {\r\n                    let forum = snapshot.val();\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\r\n\r\n                    if (existingForumIndex !== -1) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (\r\n                                forum.hasOwnProperty('deleted')\r\n                                && forum.deleted === false\r\n                            )\r\n                        ) {\r\n                            forum.author = forums[existingForumIndex].author;\r\n                            forums[existingForumIndex] = forum;\r\n                        } else {\r\n                            forums.splice(existingForumIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: FORUMS_CHANGED,\r\n                            forumsChanged: [...forums]\r\n                        });\r\n                    } else {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                forums.push(forum);\r\n\r\n                                dispatch({\r\n                                    type: FORUMS_CHANGED,\r\n                                    forumsChanged: [...forums]\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n\r\n            // a forums is removed\r\n            forumsListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let forums = [...getState().manageForums.forums];\r\n\r\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === snapshot.key);\r\n                    forums.splice(existingForumIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: FORUMS_CHANGED,\r\n                        forumsChanged: [...forums]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForForumsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumsListener) {\r\n            forumsListener.off('child_added');\r\n            forumsListener.off('child_changed');\r\n            forumsListener.off('child_removed');\r\n            forumsListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const THREADS_CHANGED = 'THREADS_CHANGED';\r\nexport const startListeningForThreadsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const forumSelected = getState().manageForums.forumSelected;\r\n\r\n        if (!forumThreadsListener) {\r\n            forumThreadsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n                .orderByChild('forumID')\r\n                .equalTo(forumSelected.id);\r\n\r\n            // a new thread is added\r\n            forumThreadsListener\r\n                .on('child_added', snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    const currentUser = getState().auth.user;\r\n                    const threadsLoadMode = getState().manageForums.threadsLoadMode;\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\r\n\r\n                    // only add if the thread is not in the local threads array\r\n                    if (existingThreadIndex === -1) {\r\n                        // only add live threads\r\n                        if (threadsLoadMode === realtimeDBUtils.LOAD_LIVE_THREADS) {\r\n                            if (!thread.hasOwnProperty('deleted')\r\n                                || (\r\n                                    thread.hasOwnProperty('deleted')\r\n                                    && thread.deleted === false\r\n                                )\r\n                            ) {\r\n                                if (thread.author.id === currentUser.id) {\r\n                                    thread.author = currentUser;\r\n                                    threads.push(thread);\r\n\r\n                                    dispatch({\r\n                                        type: THREADS_CHANGED,\r\n                                        threadsChanged: [...threads]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(thread.author.id)\r\n                                        .then(user => {\r\n                                            thread.author = user;\r\n                                            threads.push(thread);\r\n\r\n                                            dispatch({\r\n                                                type: THREADS_CHANGED,\r\n                                                threadsChanged: [...threads]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                        // only add deleted threads\r\n                        else {\r\n                            if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                                if (thread.author.id === currentUser.id) {\r\n                                    thread.author = currentUser;\r\n                                    threads.push(thread);\r\n\r\n                                    dispatch({\r\n                                        type: THREADS_CHANGED,\r\n                                        threadsChanged: [...threads]\r\n                                    });\r\n                                } else {\r\n                                    realtimeDBUtils\r\n                                        .getUserBasedOnID(thread.author.id)\r\n                                        .then(user => {\r\n                                            thread.author = user;\r\n                                            threads.push(thread);\r\n\r\n                                            dispatch({\r\n                                                type: THREADS_CHANGED,\r\n                                                forumsChanged: [...threads]\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                        });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a thread has changed\r\n            forumThreadsListener\r\n                .on('child_changed', snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\r\n\r\n                    if (existingThreadIndex !== -1) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (\r\n                                thread.hasOwnProperty('deleted')\r\n                                && thread.deleted === false\r\n                            )\r\n                        ) {\r\n                            thread.author = threads[existingThreadIndex].author;\r\n                            threads[existingThreadIndex] = thread;\r\n                        } else {\r\n                            threads.splice(existingThreadIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: THREADS_CHANGED,\r\n                            threadsChanged: [...threads]\r\n                        });\r\n                    } else {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                threads.push(thread);\r\n\r\n                                dispatch({\r\n                                    type: THREADS_CHANGED,\r\n                                    threadsChanged: [...threads]\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n\r\n            // a thread is removed\r\n            forumThreadsListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let threads = [...getState().manageForums.forumThreads];\r\n\r\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === snapshot.key);\r\n                    threads.splice(existingThreadIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: THREADS_CHANGED,\r\n                        threadsChanged: [...threads]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForThreadsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumThreadsListener) {\r\n            forumThreadsListener.off('child_added');\r\n            forumThreadsListener.off('child_changed');\r\n            forumThreadsListener.off('child_removed');\r\n            forumThreadsListener = null;\r\n        }\r\n    }\r\n};\r\n\r\nexport const THREAD_REPLIES_CHANGED = 'THREAD_REPLIES_CHANGED';\r\nexport const startListeningForThreadRepliesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\r\n\r\n        if (!forumThreadRepliesListener) {\r\n            forumThreadRepliesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n                .orderByChild('threadID')\r\n                .equalTo(forumThreadSelected.id);\r\n\r\n            // a new reply is added\r\n            forumThreadRepliesListener\r\n                .on('child_added', snapshot => {\r\n                    let reply = snapshot.val();\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                    // only add if the forums is not in the local forums array\r\n                    if (existingReplyIndex === -1) {\r\n                        if (reply.author.id === user.id) {\r\n                            reply.author = user;\r\n                            replies.push(reply);\r\n\r\n                            dispatch({\r\n                                type: THREAD_REPLIES_CHANGED,\r\n                                repliesChanged: [...replies]\r\n                            });\r\n                        } else {\r\n                            realtimeDBUtils\r\n                                .getUserBasedOnID(reply.author.id)\r\n                                .then(user => {\r\n                                    reply.author = user;\r\n                                    replies.push(reply);\r\n\r\n                                    dispatch({\r\n                                        type: THREAD_REPLIES_CHANGED,\r\n                                        repliesChanged: [...replies]\r\n                                    });\r\n                                })\r\n                                .catch(error => {\r\n                                    // handle error\r\n                                });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            // a reply has changed\r\n            forumThreadRepliesListener\r\n                .on('child_changed', snapshot => {\r\n                    let reply = snapshot.val();\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                    reply.author = replies[existingReplyIndex].author;\r\n                    replies[existingReplyIndex] = reply;\r\n\r\n                    dispatch({\r\n                        type: THREAD_REPLIES_CHANGED,\r\n                        repliesChanged: [...replies]\r\n                    });\r\n                });\r\n\r\n            // a reply is removed\r\n            forumThreadRepliesListener\r\n                .on('child_removed', snapshot => {\r\n\r\n                    let replies = [...getState().manageForums.forumThreadReplies];\r\n\r\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === snapshot.key);\r\n                    replies.splice(existingReplyIndex, 1);\r\n\r\n                    dispatch({\r\n                        type: THREAD_REPLIES_CHANGED,\r\n                        repliesChanged: [...replies]\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForThreadRepliesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (forumThreadRepliesListener) {\r\n            forumThreadRepliesListener.off('child_added');\r\n            forumThreadRepliesListener.off('child_changed');\r\n            forumThreadRepliesListener.off('child_removed');\r\n            forumThreadRepliesListener = null;\r\n        }\r\n    }\r\n};\r\n\r\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AuthenticationStatus, isAuthenticating, successfullyAuthenticated} from \"../reducers/authenticationReducer\";\r\nimport User, {isInvestor} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport {AppState} from \"../reducers\";\r\nimport InvestorSelfCertification from \"../../models/investor_self_certification\";\r\nimport InvestorSelfCertificationRepository from \"../../api/repositories/InvestorSelfCertificationRepository\";\r\nimport Routes from \"../../router/routes\";\r\nimport Firebase from \"firebase\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\n\r\nexport enum AuthenticationEvents {\r\n    StartAuthenticating = \"AuthenticationEvents.StartAuthenticating\",\r\n    CompleteAuthentication = \"AuthenticationEvents.CompleteAuthentication\",\r\n    SignOut = \"AuthenticationEvents.SignOut\",\r\n    UpdateUserChanges = \"AuthenticationEvents.UpdateUserChanges\"\r\n}\r\n\r\nexport interface AuthenticationAction extends Action {\r\n}\r\n\r\nexport interface UpdateUserChangesAction extends Action {\r\n    updatedUser: User | Admin;\r\n}\r\n\r\nexport interface CompleteAuthenticationAction extends AuthenticationAction {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    selfCertification?: InvestorSelfCertification;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    error?: Error;\r\n}\r\n\r\nexport const signIn: ActionCreator<any> = (email?: string, password?: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = getState();\r\n\r\n        if (isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        const authenticationCompleteAction: CompleteAuthenticationAction = {\r\n            type: AuthenticationEvents.CompleteAuthentication,\r\n            status: AuthenticationStatus.Authenticating,\r\n            currentUser: null,\r\n            groupsOfMembership: []\r\n        }\r\n\r\n        try {\r\n            let currentFirebaseUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n            // user is currently signed in with Firebase\r\n            if (currentFirebaseUser) {\r\n                if (successfullyAuthenticated(AuthenticationState)) {\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n            }\r\n            // user is currently not signed in with Firebase\r\n            else {\r\n                if (email === undefined || password === undefined) {\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    authenticationCompleteAction.error = {\r\n                        detail: \"Email and password not provided.\"\r\n                    }\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n\r\n                // set persistence state to SESSION\r\n                await firebase.auth().setPersistence(Firebase.auth.Auth.Persistence.LOCAL);\r\n\r\n                // sign in with Firebase using email and password\r\n                const credential: firebase.default.auth.UserCredential =\r\n                    await firebase.auth().signInWithEmailAndPassword(email, password);\r\n\r\n                currentFirebaseUser = credential.user;\r\n            }\r\n\r\n            if (currentFirebaseUser) {\r\n                const uid: string | undefined = currentFirebaseUser.uid;\r\n\r\n                // get current user profile\r\n                const retrieveUserResponse = await new UserRepository().retrieveUser(uid);\r\n\r\n                const currentUser: User | Admin = retrieveUserResponse.data;\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n                // Check:\r\n                // 1. Super admin must sign in via the dedicated URL.\r\n                // 2. Only super admin can sign in via the dedicated URL.\r\n                let validSuperAdminSignIn: boolean = true;\r\n\r\n                if (Routes.isSuperAdminSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (!(currentAdmin && currentAdmin.superAdmin)) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"You have no privileges to sign in.\"\r\n                        }\r\n                    }\r\n                } else if (Routes.isSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (currentAdmin && currentAdmin.superAdmin) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"Please sign in via your dedicated page.\"\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!validSuperAdminSignIn) {\r\n                    await dispatch(signOut());\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                authenticationCompleteAction.currentUser = currentUser;\r\n\r\n                if (isInvestor(currentUser)) {\r\n                    const selfCertificationResponse = await new InvestorSelfCertificationRepository().getInvestorSelfCertification(currentUser.id);\r\n                    authenticationCompleteAction.selfCertification = selfCertificationResponse.data;\r\n                }\r\n\r\n                // get groups of membership for the current user\r\n                const listGroupsOfMembershipResponse = await new UserRepository().listGroupsOfMembership(uid);\r\n\r\n                authenticationCompleteAction.groupsOfMembership = listGroupsOfMembershipResponse.data;\r\n\r\n                authenticationCompleteAction.status = AuthenticationStatus.Authenticated;\r\n                return dispatch(authenticationCompleteAction);\r\n            } else {\r\n                await dispatch(signOut());\r\n                authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                authenticationCompleteAction.error = {\r\n                    detail: \"Invalid credential.\"\r\n                }\r\n                return dispatch(authenticationCompleteAction);\r\n            }\r\n        } catch (error) {\r\n            await dispatch(signOut());\r\n            authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n            authenticationCompleteAction.error = {\r\n                detail: error.toString()\r\n            }\r\n            return dispatch(authenticationCompleteAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const signOut: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        try {\r\n            await firebase.auth().signOut();\r\n        } catch (error) {\r\n            console.log(`Error signing out: ${error.toString()}`);\r\n        }\r\n        return dispatch({\r\n            type: AuthenticationEvents.SignOut\r\n        });\r\n    }\r\n}\r\n\r\nexport const updateUserChanges: ActionCreator<any> = (updatedUser: User | Admin) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: UpdateUserChangesAction = {\r\n            type: AuthenticationEvents.UpdateUserChanges,\r\n            updatedUser: JSON.parse(JSON.stringify(updatedUser))\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport default class InvestorSelfCertificationRepository {\r\n\r\n    /**\r\n     * Get investor self certification\r\n     *\r\n     * @param userID\r\n     */\r\n    public async getInvestorSelfCertification(userID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.retrieveInvestorSelfCertificationRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: {\r\n                        userID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n}","import User, {ProfileImage, ProfileVideo} from \"../../models/user\";\r\nimport Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface UpdateUserData {\r\n    updatedUser: User;\r\n    newProfilePicture?: ProfileImage;\r\n    newLogo?: ProfileImage;\r\n    newVideo?: ProfileVideo;\r\n    removeProfilePicture?: true;\r\n}\r\n\r\nexport interface SignUpData {\r\n    isPublicRegistration: boolean;\r\n    invitedUserID?: string;\r\n    userProfile: Partial<User>;\r\n    password: string;\r\n    groupID: string;\r\n    acceptMarketingPreferences: boolean;\r\n}\r\n\r\nexport default class UserRepository {\r\n\r\n    /**\r\n     * Sign up\r\n     *\r\n     * @param data\r\n     */\r\n    public async signUp(data: SignUpData) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.createUser,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Retrieve user\r\n     *\r\n     * @param uid\r\n     */\r\n    public async retrieveUser(uid: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.retrieveUser.replace(\":uid\", uid));\r\n    }\r\n\r\n    /**\r\n     * Retrieve invited user\r\n     *\r\n     * @param invitedUserID\r\n     */\r\n    public async retrieveInvitedUser(invitedUserID: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.retrieveInvitedUser.replace(\":invitedUserID\", invitedUserID));\r\n    }\r\n\r\n    /**\r\n     * Update user\r\n     *\r\n     * @param data\r\n     */\r\n    public async updateUser(data: UpdateUserData) {\r\n        return await new Api()\r\n            .request(\r\n                \"put\",\r\n                ApiRoutes.updateUser,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * List groups of membership\r\n     *\r\n     * @param uid\r\n     */\r\n    public async listGroupsOfMembership(uid: string) {\r\n        return await new Api().request(\"get\",\r\n            ApiRoutes.listGroupsOfMembership.replace(\":uid\", uid));\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport Error from \"../../models/error\";\r\nimport {AppState} from \"../reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\n\r\nexport enum ManageGroupUrlEvents {\r\n    SetGroupUrl = \"ManageGroupUrlEvents.SetGroupUrl\",\r\n    ValidatingGroupUrl = \"ManageGroupUrlEvents.ValidatingGroupUrl\",\r\n    FinishedValidatingGroupUrl = \"ManageGroupUrlEvents.FinishedValidatingGroupUrl\"\r\n}\r\n\r\nexport interface ManageGroupUrlAction extends Action {\r\n    path?: string;\r\n    groupUserName?: string | null;\r\n    group?: GroupProperties | null;\r\n    validGroupUrl?: boolean;\r\n    error?: Error\r\n}\r\n\r\nexport interface SetGroupUrlAction extends ManageGroupUrlAction {\r\n    path: string;\r\n    groupUserName: string | null;\r\n}\r\n\r\nexport interface ValidatingGroupUrlAction extends ManageGroupUrlAction {\r\n}\r\n\r\nexport interface FinishedValidatingGroupUrlAction extends ManageGroupUrlAction {\r\n    group: GroupProperties | null;\r\n    validGroupUrl: boolean;\r\n    error?: Error\r\n}\r\n\r\nexport const validateGroupUrl: ActionCreator<any> = (path: string, groupUserName: string | null) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            routePath,\r\n            groupNameFromUrl,\r\n            group,\r\n            loadingGroup,\r\n            groupLoaded\r\n        } = getState().ManageGroupUrlState;\r\n\r\n        const setGroupUrlAction: SetGroupUrlAction = {\r\n            type: ManageGroupUrlEvents.SetGroupUrl,\r\n            path,\r\n            groupUserName\r\n        }\r\n\r\n        let shouldValidateGroupUrl = false;\r\n\r\n        // routePath or groupNameFromUrl or both of them have not been defined\r\n        if (routePath === undefined || groupNameFromUrl === undefined) {\r\n            shouldValidateGroupUrl = true;\r\n        }\r\n        // routePath and groupNameFromUrl have been defined\r\n        else {\r\n            if (groupNameFromUrl !== groupUserName) {\r\n                shouldValidateGroupUrl = true;\r\n            }\r\n        }\r\n\r\n        // group has not been loaded\r\n        // or group has been loaded but a new group name is set in the url\r\n        // --> continue validating group url\r\n        if ((!group && !loadingGroup && !groupLoaded)\r\n            || (!(!group && !loadingGroup && !groupLoaded) && shouldValidateGroupUrl)\r\n        ) {\r\n            dispatch(setGroupUrlAction);\r\n\r\n            const validatingGroupUrlAction: ValidatingGroupUrlAction = {\r\n                type: ManageGroupUrlEvents.ValidatingGroupUrl\r\n            }\r\n\r\n            dispatch(validatingGroupUrlAction);\r\n\r\n            const finishedLoadingGroupUrlAction: FinishedValidatingGroupUrlAction = {\r\n                type: ManageGroupUrlEvents.FinishedValidatingGroupUrl,\r\n                group: null,\r\n                validGroupUrl: false\r\n            }\r\n\r\n            // group name is not specified in the url\r\n            if (!groupUserName) {\r\n                finishedLoadingGroupUrlAction.validGroupUrl = true;\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            }\r\n\r\n            try {\r\n                const response = await new GroupRepository().getGroup(groupUserName);\r\n                const retrievedGroup: GroupProperties | null = response.data;\r\n                finishedLoadingGroupUrlAction.group = retrievedGroup;\r\n                finishedLoadingGroupUrlAction.validGroupUrl = retrievedGroup !== null;\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            } catch (error) {\r\n                finishedLoadingGroupUrlAction.error = {\r\n                    detail: error.toString()\r\n                }\r\n                return dispatch(finishedLoadingGroupUrlAction);\r\n            }\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview/lib/index\";\r\nimport {css} from \"aphrodite\";\r\nimport {Divider, List, ListItem, ListItemIcon, ListItemText} from \"@material-ui/core\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport WorkIcon from \"@material-ui/icons/Work\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport ContactSupportIcon from \"@material-ui/icons/ContactSupport\";\r\nimport ArrowLeft from \"@material-ui/icons/SubdirectoryArrowLeft\";\r\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport ProjectIcon from \"@material-ui/icons/CardGiftcard\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as authActions from \"../../redux-store/actions/authActions\";\r\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\r\nimport * as forumsActions from \"../../redux-store/actions/forumsActions\";\r\n\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {signOut} from \"../../redux-store/actions/authenticationActions\";\r\nimport {School} from \"@material-ui/icons\";\r\n\r\nexport const HOME_TAB = \"Home\";\r\nexport const PROFILE_TAB = \"Profile\";\r\nexport const FORUMS_TAB = \"Forums\";\r\nexport const MY_OFFERS_TAB = \"My offers\";\r\n// export const MY_PLEDGES_TAB = \"My pledges\";\r\nexport const SETTINGS_TAB = \"Settings\";\r\nexport const CHANGE_PASSWORD_TAB = \"Change password\";\r\nexport const CONTACT_US_TAB = \"Contact us\";\r\nexport const GUIDELINE_TAB = \"Help\";\r\nexport const RESOURCES_TAB = \"Resources\";\r\nexport const EXPLORE_GROUPS_TAB = \"Explore groups\";\r\nexport const EXPLORE_OFFERS_TAB = \"Explore offers\";\r\nexport const MY_ACTIVITIES_TAB = \"My activities\";\r\nexport const GROUP_ACTIVITIES_TAB = \"Audit Log\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        signOutNew: async () => dispatch(signOut()),\r\n\r\n        logout: () => dispatch(authActions.logout()),\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        goBackToForumsMain: () => dispatch(forumsActions.goBackToForumsMain())\r\n    };\r\n};\r\n\r\nclass SidebarContent extends Component {\r\n\r\n    onLogoutClick = async () => {\r\n        const {\r\n            dashboardProps,\r\n            logout,\r\n\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            signOutNew\r\n        } = this.props;\r\n\r\n        await signOutNew();\r\n        dashboardProps.history.push(Routes.constructHomeRoute(dashboardProps.match.params, ManageGroupUrlState, AuthenticationState));\r\n\r\n        logout(); // logout old\r\n    };\r\n\r\n    onForumsTabClick = () => {\r\n        this.props.toggleSidebar(false);\r\n        this.props.goBackToForumsMain();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n\r\n            user,\r\n            dashboardProps,\r\n\r\n            toggleSidebar\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                width={240}\r\n                height=\"100%\"\r\n            >\r\n                {/** Sidebar header */}\r\n                <FlexView column height={65} vAlignContent=\"center\" hAlignContent=\"center\" style={{ padding: 8 }} >\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                :\r\n                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                        }\r\n                    >\r\n                        <Image\r\n                            style={{ width: \"auto\", height: 65, margin: 0, padding: 10, objectFit: \"scale-down\" }}\r\n                            src={\r\n                                !groupProperties\r\n                                    ?\r\n                                    require('../../img/logo.png').default\r\n                                    :\r\n                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                            }\r\n                        />\r\n                    </NavLink>\r\n                </FlexView>\r\n\r\n                <Divider/>\r\n\r\n                {/** Main navigation */}\r\n                <FlexView column marginTop={10} >\r\n                    {/** Home tab */}\r\n                    <List>\r\n                        <NavLink\r\n                            to={{ pathname: dashboardProps.match.pathname, search: `?tab=${HOME_TAB}` }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                <ListItemIcon>\r\n                                    <HomeIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText className={css(sharedStyles.black_text)}>{HOME_TAB}</ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n\r\n                        {/** Offers table */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                // user.type === DB_CONST.TYPE_INVESTOR\r\n                                //     ?\r\n                                //     <NavLink\r\n                                //         to={{\r\n                                //             pathname: dashboardProps.match.pathname,\r\n                                //             search: `?tab=${MY_PLEDGES_TAB}`\r\n                                //         }}\r\n                                //         className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                //     >\r\n                                //         <ListItem\r\n                                //             button\r\n                                //             onClick={() => toggleSidebar(false)}\r\n                                //         >\r\n                                //             <ListItemIcon>\r\n                                //                 <HowToVoteIcon/>\r\n                                //             </ListItemIcon>\r\n                                //             <ListItemText\r\n                                //                 className={css(sharedStyles.black_text)}\r\n                                //             >\r\n                                //                 {MY_PLEDGES_TAB}\r\n                                //             </ListItemText>\r\n                                //         </ListItem>\r\n                                //     </NavLink>\r\n                                //     :\r\n                                user.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    <NavLink\r\n                                        to={{ pathname: dashboardProps.match.pathname, search: `?tab=${MY_OFFERS_TAB}` }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem\r\n                                            button\r\n                                            onClick={() => toggleSidebar(false)}\r\n                                        >\r\n                                            <ListItemIcon>\r\n                                                <ProjectIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText className={css(sharedStyles.black_text)}>{MY_OFFERS_TAB}</ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                                    :\r\n                                    null\r\n                        }\r\n\r\n                        {/** Explore offers tab */}\r\n                        {\r\n                            user.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${EXPLORE_OFFERS_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <ProjectIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{EXPLORE_OFFERS_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Explore groups tab */}\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${EXPLORE_GROUPS_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                <ListItemIcon>\r\n                                    <BubbleChartIcon/>\r\n                                </ListItemIcon>\r\n                                <ListItemText className={css(sharedStyles.black_text)}>{EXPLORE_GROUPS_TAB}</ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n\r\n                        {/** Resources */}\r\n                        <NavLink\r\n                            to={{\r\n                                pathname: dashboardProps.match.pathname,\r\n                                search: `?tab=${RESOURCES_TAB}`\r\n                            }}\r\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                        >\r\n                            <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                <ListItemIcon>\r\n                                    <School/>\r\n                                </ListItemIcon>\r\n                                <ListItemText className={css(sharedStyles.black_text)}>{RESOURCES_TAB}</ListItemText>\r\n                            </ListItem>\r\n                        </NavLink>\r\n                    </List>\r\n                </FlexView>\r\n\r\n                {/** Footer navigation */}\r\n                <FlexView column height='100%' vAlignContent=\"bottom\" >\r\n                    <List>\r\n                        {/** Profile tab (for normal users) || Settings tab (for admins) */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${PROFILE_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                            <ListItemIcon>\r\n                                                <WorkIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText className={css(sharedStyles.black_text)}>{PROFILE_TAB}</ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                                    :\r\n                                    <NavLink\r\n                                        to={{\r\n                                            pathname: dashboardProps.match.pathname,\r\n                                            search: `?tab=${SETTINGS_TAB}`\r\n                                        }}\r\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                            <ListItemIcon>\r\n                                                <SettingsIcon/>\r\n                                            </ListItemIcon>\r\n                                            <ListItemText className={css(sharedStyles.black_text)}>{SETTINGS_TAB}</ListItemText>\r\n                                        </ListItem>\r\n                                    </NavLink>\r\n                        }\r\n\r\n                        {/** My/Group activities tab */}\r\n                        {\r\n                            user.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${(user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin) ? GROUP_ACTIVITIES_TAB : MY_ACTIVITIES_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <HistoryIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)} >\r\n                                            {\r\n                                                GROUP_ACTIVITIES_TAB\r\n                                            }\r\n                                        </ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Change password tab */}\r\n                        {\r\n                            !user\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={{\r\n                                        pathname: dashboardProps.match.pathname,\r\n                                        search: `?tab=${CHANGE_PASSWORD_TAB}`\r\n                                    }}\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <VerifiedUserIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{CHANGE_PASSWORD_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Forums tab */}\r\n                        {/*<NavLink*/}\r\n                        {/*    to={{*/}\r\n                        {/*        pathname: dashboardProps.match.pathname,*/}\r\n                        {/*        search: `?tab=${FORUMS_TAB}`*/}\r\n                        {/*    }}*/}\r\n                        {/*    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}*/}\r\n                        {/*>*/}\r\n                        {/*    <ListItem*/}\r\n                        {/*        button*/}\r\n                        {/*        onClick={this.onForumsTabClick}*/}\r\n                        {/*    >*/}\r\n                        {/*        <ListItemIcon>*/}\r\n                        {/*            <ChatIcon/>*/}\r\n                        {/*        </ListItemIcon>*/}\r\n                        {/*        <ListItemText*/}\r\n                        {/*            className={css(sharedStyles.black_text)}*/}\r\n                        {/*        >*/}\r\n                        {/*            {FORUMS_TAB}*/}\r\n                        {/*        </ListItemText>*/}\r\n                        {/*    </ListItem>*/}\r\n                        {/*</NavLink>*/}\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.CONTACT_US.replace(':groupUserName', groupUserName)\r\n                                            :\r\n                                            ROUTES.CONTACT_US_INVEST_WEST_SUPER\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <ContactSupportIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{CONTACT_US_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Help tab */}\r\n                        {\r\n                            // don't need to show this tab to super admin\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                            && user.superAdmin\r\n                                ?\r\n                                null\r\n                                :\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.HELP.replace(':groupUserName', groupUserName)\r\n                                            :\r\n                                            ROUTES.HELP_INVEST_WEST_SUPER\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                                >\r\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\r\n                                        <ListItemIcon>\r\n                                            <InfoIcon/>\r\n                                        </ListItemIcon>\r\n                                        <ListItemText className={css(sharedStyles.black_text)}>{GUIDELINE_TAB}</ListItemText>\r\n                                    </ListItem>\r\n                                </NavLink>\r\n                        }\r\n\r\n                        {/** Logout tab */}\r\n                        <ListItem button onClick={this.onLogoutClick} >\r\n                            <ListItemIcon>\r\n                                <ArrowLeft/>\r\n                            </ListItemIcon>\r\n                            <ListItemText>Logout</ListItemText>\r\n                        </ListItem>\r\n                    </List>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarContent);","import React, { Component } from 'react';\r\nimport {\r\n    Avatar,\r\n    Typography\r\n} from '@material-ui/core';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class LetterAvatar extends Component {\r\n    render() {\r\n        const {\r\n            firstName,\r\n            lastName,\r\n            width,\r\n            height,\r\n            textVariant\r\n        } = this.props;\r\n\r\n        return (\r\n            <Avatar\r\n                style={{\r\n                    color: colors.white,\r\n                    backgroundColor: this.getBackgroundColor(),\r\n                    width: width,\r\n                    height: height\r\n                }}\r\n            >\r\n                <Typography variant={textVariant}>\r\n                    {`${firstName[0].toUpperCase()}${lastName[0].toUpperCase()}`}\r\n                </Typography>\r\n            </Avatar>\r\n        );\r\n    }\r\n\r\n    getBackgroundColor = () => {\r\n        const { firstName } = this.props;\r\n\r\n        switch (firstName[0].toLowerCase()) {\r\n            case \"a\":\r\n                return colors.background_a;\r\n            case \"b\":\r\n                return colors.background_b;\r\n            case \"c\":\r\n                return colors.background_c;\r\n            case \"d\":\r\n                return colors.background_d;\r\n            case \"e\":\r\n                return colors.background_e;\r\n            case \"f\":\r\n                return colors.background_f;\r\n            case \"g\":\r\n                return colors.background_g;\r\n            case \"h\":\r\n                return colors.background_h;\r\n            case \"i\":\r\n                return colors.background_i;\r\n            case \"j\":\r\n                return colors.background_j;\r\n            case \"k\":\r\n                return colors.background_k;\r\n            case \"l\":\r\n                return colors.background_l;\r\n            case \"m\":\r\n                return colors.background_m;\r\n            case \"n\":\r\n                return colors.background_n;\r\n            case \"o\":\r\n                return colors.background_o;\r\n            case \"p\":\r\n                return colors.background_p;\r\n            case \"q\":\r\n                return colors.background_q;\r\n            case \"r\":\r\n                return colors.background_r;\r\n            case \"s\":\r\n                return colors.background_s;\r\n            case \"t\":\r\n                return colors.background_t;\r\n            case \"u\":\r\n                return colors.background_u;\r\n            case \"v\":\r\n                return colors.background_v;\r\n            case \"w\":\r\n                return colors.background_w;\r\n            case \"x\":\r\n                return colors.background_x;\r\n            case \"y\":\r\n                return colors.background_y;\r\n            case \"z\":\r\n                return colors.background_z;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}","export const JSON_COMPARE_CHANGES_DIALOG_SET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_SET_DATA';\r\nexport const setData = (jsonBefore, jsonAfter) => {\r\n    return {\r\n        type: JSON_COMPARE_CHANGES_DIALOG_SET_DATA,\r\n        jsonBefore,\r\n        jsonAfter\r\n    }\r\n};\r\n\r\nexport const JSON_COMPARE_CHANGES_DIALOG_RESET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_RESET_DATA';\r\nexport const resetData = () => {\r\n    return {\r\n        type: JSON_COMPARE_CHANGES_DIALOG_RESET_DATA\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ReactJson from 'react-json-view';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col\r\n} from 'react-bootstrap';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        dialogOpen: state.manageJSONCompareChangesDialog.dialogOpen,\r\n        jsonBefore: state.manageJSONCompareChangesDialog.jsonBefore,\r\n        jsonAfter: state.manageJSONCompareChangesDialog.jsonAfter\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resetData: () => dispatch(manageJSONCompareChangesActions.resetData())\r\n    }\r\n};\r\n\r\nclass JSONCompareChangesDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n\r\n            dialogOpen,\r\n            jsonBefore,\r\n            jsonAfter,\r\n\r\n            resetData,\r\n\r\n            other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                open={dialogOpen}\r\n                fullWidth\r\n                maxWidth=\"lg\"\r\n                onClose={resetData}\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <FlexView vAlignContent=\"center\" >\r\n                        <FlexView grow={4} >\r\n                            <Typography variant=\"h5\" color=\"primary\" align=\"left\">Data changes</Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\" >\r\n                            <IconButton onClick={resetData} >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{ marginBottom: 25 }} >\r\n                    <FlexView>\r\n                        <Container fluid style={{ padding: 0 }} >\r\n                            {\r\n                                JSON.stringify(jsonBefore) === JSON.stringify(jsonAfter)\r\n                                    ?\r\n                                    // no data changes\r\n                                    <Row>\r\n                                        <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} >\r\n                                            <FlexView column width=\"100%\" >\r\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>No data changes after this activity</b></Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonBefore}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    // enable clipboard not working\r\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    :\r\n                                    // there are data changes\r\n                                    <Row>\r\n                                        {/** JSON before */}\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            <FlexView column width=\"100%\" >\r\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>Before</b></Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonBefore}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    // enable clipboard not working\r\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n\r\n                                        {/** JSON after */}\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            <FlexView column width=\"100%\" >\r\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>After</b></Typography>\r\n\r\n                                                <ReactJson\r\n                                                    src={jsonAfter}\r\n                                                    theme=\"monokai\"\r\n                                                    collapseStringsAfterLength={50}\r\n                                                    enableClipboard={\r\n                                                        (copy) => {\r\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\r\n                                                        }\r\n                                                    }\r\n                                                />\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </Container>\r\n                    </FlexView>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JSONCompareChangesDialog);","import * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const ACTIVITIES_TABLE_SET_TABLE_USER = 'ACTIVITIES_TABLE_SET_TABLE_USER';\r\nexport const setTableUser = newUser => {\r\n    return (dispatch, getState) => {\r\n        const prevTableUser = getState().manageActivitiesTable.tableUser;\r\n\r\n        // if user is set to null --> meaning that we're resetting the table\r\n        // if the previous table user is null --> still set the new user\r\n        if (!newUser || !prevTableUser) {\r\n            dispatch({\r\n                type: ACTIVITIES_TABLE_SET_TABLE_USER,\r\n                user: newUser\r\n            });\r\n            return;\r\n        }\r\n\r\n        // previous table user is an actual user of normal users or admins\r\n        if (prevTableUser.hasOwnProperty('id')) {\r\n            // new table user is also an actual user of normal users or admins\r\n            if (newUser.hasOwnProperty('id')) {\r\n                if (prevTableUser.id === newUser.id) {\r\n                    return;\r\n                } else {\r\n                    // set new table user\r\n                }\r\n            }\r\n            // new table user is a groupProperties object\r\n            else {\r\n                // set new table user\r\n            }\r\n        }\r\n        // previous table user is a groupProperties object\r\n        else {\r\n            // new table user is an actual user of normal users or admins\r\n            if (newUser.hasOwnProperty('id')) {\r\n                // set new table user\r\n            }\r\n            // new table user is also a groupProperties object\r\n            else {\r\n                if (prevTableUser.anid === newUser.anid) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: ACTIVITIES_TABLE_SET_TABLE_USER,\r\n            user: newUser\r\n        });\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_LOADING_ACTIVITIES';\r\nexport const ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES';\r\nexport const loadActivities = () => {\r\n    return (dispatch, getState) => {\r\n        const tableUser = getState().manageActivitiesTable.tableUser;\r\n        const currentUser = getState().auth.user;\r\n\r\n        if (!tableUser || !currentUser) {\r\n            dispatch({\r\n                type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                activities: []\r\n            });\r\n            return;\r\n        }\r\n\r\n        // current user is not an admin\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            // and the current user is not the user referenced in the table\r\n            if (tableUser.hasOwnProperty('id') && currentUser.id === tableUser.id) {\r\n                // do nothing as the current user is actually the table user\r\n            } else {\r\n                dispatch({\r\n                    type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                    activities: []\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: ACTIVITIES_TABLE_LOADING_ACTIVITIES\r\n        });\r\n\r\n        // table user is an actual user\r\n        if (tableUser.hasOwnProperty('id')) {\r\n            realtimeDBUtils\r\n                .fetchActivitiesBy({\r\n                    userID: tableUser.id,\r\n                    fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\r\n                })\r\n                .then(activities => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: [...activities]\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: []\r\n                    });\r\n                });\r\n        }\r\n        // table user is a groupProperties object\r\n        else {\r\n            realtimeDBUtils\r\n                .loadGroupAdminsBasedOnGroupID(tableUser.anid)\r\n                .then(groupAdmins => {\r\n\r\n                    let allActivities = [];\r\n\r\n                    Promise.all(\r\n                        groupAdmins.map(groupAdmin => {\r\n                            return new Promise((resolve, reject) => {\r\n                                realtimeDBUtils\r\n                                    .fetchActivitiesBy({\r\n                                        userID: groupAdmin.id,\r\n                                        shouldLoadUserProfile: true,\r\n                                        fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\r\n                                    })\r\n                                    .then(activities => {\r\n                                        allActivities = [...allActivities, ...activities];\r\n                                        return resolve(allActivities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        dispatch({\r\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                            activities: [...allActivities]\r\n                        });\r\n                    }).catch(error => {\r\n                        dispatch({\r\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                            activities: []\r\n                        });\r\n                    });\r\n\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\r\n                        activities: []\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_PAGE_CHANGED = 'ACTIVITIES_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: ACTIVITIES_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED = 'ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet activitiesListener = null;\r\n\r\nexport const ACTIVITIES_IN_TABLE_CHANGED = 'ACTIVITIES_IN_TABLE_CHANGED';\r\nexport const startListeningForActivitiesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const tableUser = getState().manageActivitiesTable.tableUser;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN && currentUser.id !== tableUser.id) {\r\n            return;\r\n        }\r\n\r\n        if (activitiesListener) {\r\n            return;\r\n        }\r\n\r\n        // table user is an actual user\r\n        if (tableUser.hasOwnProperty('id')) {\r\n            activitiesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n                .orderByChild('userID')\r\n                .equalTo(tableUser.id);\r\n        }\r\n        // table user is a groupProperties object\r\n        else {\r\n            activitiesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n        }\r\n\r\n        activitiesListener\r\n            .on('child_added', snapshot => {\r\n                const activity = snapshot.val();\r\n                let activities = [...getState().manageActivitiesTable.activities];\r\n\r\n                const activityIndex = activities.findIndex(existingActivity => existingActivity.id === activity.id);\r\n                if (activityIndex === -1) {\r\n                    // table user is an actual user\r\n                    if (tableUser.hasOwnProperty('id')) {\r\n                        dispatch({\r\n                            type: ACTIVITIES_IN_TABLE_CHANGED,\r\n                            activities: [...activities, activity]\r\n                        });\r\n                    }\r\n                    // table user is a groupProperties object\r\n                    else {\r\n                        realtimeDBUtils\r\n                            .loadGroupAdminsBasedOnGroupID(tableUser.anid)\r\n                            .then(groupAdmins => {\r\n                                const adminIndex = groupAdmins.findIndex(groupAdmin => groupAdmin.id === activity.userID);\r\n                                if (adminIndex !== -1) {\r\n                                    activity.userProfile = groupAdmins[adminIndex];\r\n                                    dispatch({\r\n                                        type: ACTIVITIES_IN_TABLE_CHANGED,\r\n                                        activities: [...activities, activity]\r\n                                    });\r\n                                }\r\n                            });\r\n                    }\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForActivitiesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (activitiesListener) {\r\n            activitiesListener.off('child_added');\r\n            activitiesListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Table,\r\n    TableHead,\r\n    TableCell,\r\n    TableRow,\r\n    TableBody,\r\n    Typography,\r\n    Paper,\r\n    TablePagination,\r\n    TableFooter,\r\n    Button\r\n} from '@material-ui/core';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport FlexView from 'react-flexview';\r\nimport {HashLoader} from 'react-spinners';\r\nimport {css} from 'aphrodite';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport JSONCompareChangesDialog from './JSONCompareChangesDialog';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        tableUser: state.manageActivitiesTable.tableUser,\r\n        activities: state.manageActivitiesTable.activities,\r\n        activitiesLoaded: state.manageActivitiesTable.activitiesLoaded,\r\n        loadingActivities: state.manageActivitiesTable.loadingActivities,\r\n        page: state.manageActivitiesTable.page,\r\n        rowsPerPage: state.manageActivitiesTable.rowsPerPage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadActivities: () => dispatch(activitiesTableActions.loadActivities()),\r\n        changePage: (event, newPage) => dispatch(activitiesTableActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(activitiesTableActions.changeRowsPerPage(event)),\r\n        startListeningForActivitiesChanged: () => dispatch(activitiesTableActions.startListeningForActivitiesChanged()),\r\n        stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        jsonCompareDialog_setData: (jsonBefore, jsonAfter) => dispatch(manageJSONCompareChangesActions.setData(jsonBefore, jsonAfter))\r\n    }\r\n};\r\n\r\nclass ActivitiesTable extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            tableUser,\r\n\r\n            stopListeningForActivitiesChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if tableUser is set to null\r\n        if (!tableUser || !shouldLoadOtherData) {\r\n            stopListeningForActivitiesChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            tableUser,\r\n            loadingActivities,\r\n            activitiesLoaded,\r\n\r\n            loadActivities\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (tableUser && !loadingActivities && !activitiesLoaded) {\r\n                loadActivities();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            activities,\r\n            activitiesLoaded,\r\n\r\n            startListeningForActivitiesChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (activities && activitiesLoaded) {\r\n                startListeningForActivitiesChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            tableUser,\r\n\r\n            activities,\r\n            page,\r\n            rowsPerPage,\r\n\r\n            changePage,\r\n            changeRowsPerPage\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !tableUser || !currentUser) {\r\n            return null;\r\n        }\r\n\r\n        activities.sort((activity1, activity2) => {\r\n            return activity2.time - activity1.time;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Paper elevation={1} style={{ overflowX: \"auto\" }} >\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={2}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Event</Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Time</Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderTableRows()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[10, 30, 50]}\r\n                                    count={activities.length}\r\n                                    rowsPerPage={rowsPerPage}\r\n                                    page={page}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={changePage}\r\n                                    onChangeRowsPerPage={changeRowsPerPage}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n\r\n                <JSONCompareChangesDialog/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderTableRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            activities,\r\n            activitiesLoaded,\r\n            page,\r\n            rowsPerPage,\r\n\r\n            jsonCompareDialog_setData\r\n        } = this.props;\r\n\r\n        if (activities.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={3} >\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ margin: 20 }} >\r\n                            {\r\n                                activitiesLoaded\r\n                                    ?\r\n                                    <Typography variant=\"body1\" align=\"center\">No activities.</Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            activities.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(activity => (\r\n                    <TableRow key={activity.id} >\r\n                        <TableCell colSpan={2} >\r\n                            {\r\n                                activity.hasOwnProperty('action')\r\n                                    ?\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" >\r\n                                            <NavLink\r\n                                                to={\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${activity.action}`\r\n                                                        :\r\n                                                        activity.action\r\n                                                }\r\n                                                className={css(sharedStyles.nav_link_hover)}\r\n                                                style={{\r\n                                                    color:\r\n                                                        !groupProperties\r\n                                                            ?\r\n                                                            colors.primaryColor\r\n                                                            :\r\n                                                            groupProperties.settings.primaryColor\r\n                                                }}\r\n                                            >\r\n                                                <LinkIcon fontSize=\"small\" style={{ marginRight: 6 }} />\r\n                                                {activity.activitySummary}\r\n                                            </NavLink>\r\n                                        </Typography>\r\n                                        {\r\n                                            !activity.hasOwnProperty('userProfile')\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography\r\n                                                    variant=\"body2\"\r\n                                                    align=\"left\"\r\n                                                    style={{\r\n                                                        marginTop: 7\r\n                                                    }}\r\n                                                >\r\n                                                    <i>_ done by <b>{activity.userProfile.email}</b> _</i>\r\n                                                </Typography>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                !currentUser.superAdmin\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !activity.hasOwnProperty('value')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView marginTop={10} >\r\n                                                            <Button\r\n                                                                variant=\"outlined\"\r\n                                                                color=\"primary\"\r\n                                                                size=\"small\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={\r\n                                                                    () => jsonCompareDialog_setData(\r\n                                                                        activity.value.hasOwnProperty('before')\r\n                                                                            ?\r\n                                                                            activity.value.before\r\n                                                                            :\r\n                                                                            activity.value\r\n                                                                        ,\r\n                                                                        activity.value.hasOwnProperty('after')\r\n                                                                            ?\r\n                                                                            activity.value.after\r\n                                                                            :\r\n                                                                            activity.value\r\n                                                                    )\r\n                                                                }\r\n                                                            >View changes</Button>\r\n                                                        </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                    :\r\n                                    <Typography variant=\"body2\" align=\"left\">{activity.activitySummary}</Typography>\r\n                            }\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" align=\"left\">{utils.dateTimeInReadableFormat(activity.time)}</Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )\r\n            )\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivitiesTable);","import * as myUtils from '../../utils/utils';\r\nimport * as editImageActions from './editImageActions';\r\nimport * as editVideoActions from './editVideoActions';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport {\r\n    UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\r\n    UPLOAD_DONE_MODE,\r\n    UPLOAD_ERROR\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport {UPLOADING} from './uploadingStatusActions';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\n\r\nexport const ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED = 'ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED';\r\nexport const REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED = 'REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED';\r\nexport const TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED = 'TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED';\r\n// fields that are used to derive required information for business profile such as postcode search\r\nexport const BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED = 'BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED';\r\nexport const handleTextChanged = (fieldType, event) => {\r\n    return {\r\n        type: fieldType,\r\n        fieldName: event.target.name,\r\n        fieldValue: event.target.value\r\n    }\r\n};\r\n\r\nexport const SEARCHING_REGISTERED_OFFICE_ADDRESSES = 'SEARCHING_REGISTERED_OFFICE_ADDRESSES';\r\nexport const DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES = 'DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES';\r\nexport const SEARCHING_TRADING_ADDRESSES = 'SEARCHING_TRADING_ADDRESSES';\r\nexport const DONE_SEARCHING_TRADING_ADDRESSES = 'DONE_SEARCHING_TRADING_ADDRESSES';\r\nexport const searchAddresses = mode => {\r\n    return (dispatch, getState) => {\r\n        if (mode === SEARCHING_REGISTERED_OFFICE_ADDRESSES) {\r\n            const postcode = getState().createBusinessProfile.registeredOfficeSearchPostcode;\r\n            if (postcode.trim().length === 0) {\r\n                return;\r\n            }\r\n            myUtils\r\n                .findAddress(postcode)\r\n                .then(results => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES,\r\n                        results\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES,\r\n                        results: null\r\n                    });\r\n                });\r\n\r\n        } else if (mode === SEARCHING_TRADING_ADDRESSES) {\r\n            const postcode = getState().createBusinessProfile.tradingAddressSearchPostcode;\r\n            if (postcode.trim().length === 0) {\r\n                return;\r\n            }\r\n            myUtils.findAddress(postcode)\r\n                .then(results => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_TRADING_ADDRESSES,\r\n                        results\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DONE_SEARCHING_TRADING_ADDRESSES,\r\n                        results: null\r\n                    });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS = 'SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS';\r\nexport const SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS = 'SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS';\r\nexport const handleRecommendedAddressSelected = (field, index) => {\r\n    return (dispatch, getState) => {\r\n        if (field === SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS) {\r\n            const selectedAddress = getState().createBusinessProfile.registeredOfficeRecommendedAddresses.apiAddresses[index];\r\n            dispatch({\r\n                type: SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS,\r\n                selectedAddress\r\n            });\r\n        } else if (field === SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS) {\r\n            const selectedAddress = getState().createBusinessProfile.tradingAddressRecommendedAddresses.apiAddresses[index];\r\n            dispatch({\r\n                type: SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS,\r\n                selectedAddress\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY = 'TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY';\r\nexport const TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY = 'TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY';\r\nexport const toggleEnterAddressManually = field => {\r\n    if (field === TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY) {\r\n        return {\r\n            type: TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY\r\n        }\r\n    } else if (field === TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY) {\r\n        return {\r\n            type: TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY\r\n        }\r\n    }\r\n};\r\n\r\nexport const TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE = 'TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE';\r\nexport const toggleTradingAddressSameAsRegisteredOffice = checked => {\r\n    return {\r\n        type: TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE,\r\n        checked\r\n    }\r\n};\r\n\r\nexport const CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION = 'CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION';\r\nexport const clearAllFields = () => {\r\n    return {\r\n        type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n    }\r\n};\r\n\r\nexport const TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR = 'TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR';\r\nexport const toggleExpandBusinessProfileFillingForInvestor = () => {\r\n    return {\r\n        type: TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR\r\n    }\r\n};\r\n\r\nexport const uploadBusinessProfile = () => {\r\n    return (dispatch, getState) => {\r\n        const user = Object.assign({}, getState().auth.user);\r\n        const logoToBeUploaded = getState().createBusinessProfile.logoToBeUploaded;\r\n        const videoToBeUploaded = getState().createBusinessProfile.videoToBeUploaded;\r\n        let businessProfile = Object.assign({}, getState().createBusinessProfile.BusinessProfile);\r\n\r\n        // trading address is the same as registered office\r\n        if (getState().createBusinessProfile.tradingAddressSameAsRegisteredOffice) {\r\n            // set trading address to registered office\r\n            businessProfile.tradingAddress = businessProfile.registeredOffice;\r\n        }\r\n\r\n        editImageActions\r\n            .uploadImage(dispatch, user, getState().editImage, logoToBeUploaded)\r\n            .then(() => {\r\n                if (videoToBeUploaded) {\r\n                    editVideoActions\r\n                        .uploadVideo(dispatch, user, getState().editVideo, videoToBeUploaded)\r\n                        .then(() => {\r\n                            putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                            dispatch({\r\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                message: \"Error happened. We couldn't upload your video.\",\r\n                                color: \"error\",\r\n                                position: \"bottom\"\r\n                            });\r\n                        });\r\n                } else {\r\n                    putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your logo.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nconst putBusinessProfileToFirebaseDB = (dispatch, user, businessProfile) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        dispatch({\r\n            type: UPLOADING,\r\n            mode: UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\r\n            progress: 0\r\n        });\r\n\r\n        businessProfile.registeredOffice.postcode = businessProfile.registeredOffice.postcode.toUpperCase();\r\n        businessProfile.tradingAddress.postcode = businessProfile.tradingAddress.postcode.toUpperCase();\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(user.id)\r\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\r\n            .update(businessProfile)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_DONE_MODE,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Your business profile has successfully been uploaded.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                        interactedObjectID: user.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE,\r\n                        value: {\r\n                            ...user,\r\n                            BusinessProfile: {\r\n                                ...businessProfile\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: UPLOADING,\r\n                    mode: UPLOAD_ERROR,\r\n                    progress: 100\r\n                });\r\n\r\n                dispatch({\r\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your business profile.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                return reject(error);\r\n            });\r\n    });\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nexport const SET_ORIGINAL_USER_AND_EDITED_USER = 'SET_ORIGINAL_USER_AND_EDITED_USER';\r\nexport const setOriginalUserAndEditedUser = user => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const previouslySetUser = getState().editUser.originalUser;\r\n\r\n        let allowEditing = true;\r\n\r\n        // user is set to null\r\n        if (!user) {\r\n            dispatch({\r\n                type: SET_ORIGINAL_USER_AND_EDITED_USER,\r\n                user,\r\n                allowEditing\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (previouslySetUser && previouslySetUser.id === user.id) {\r\n            return;\r\n        }\r\n\r\n        if (user.hasOwnProperty('groupsUserIsIn')\r\n            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n            && !currentUser.superAdmin\r\n        ) {\r\n            let userHomeGroup = utils.getUserHomeGroup(user.groupsUserIsIn);\r\n            // userHomeGroup is null --> failed to find user's home group\r\n            // do not let any group admins to edit this user's profile\r\n            if (!userHomeGroup) {\r\n                allowEditing = false;\r\n            }\r\n            // userHomeGroup is not null\r\n            else {\r\n                // this current group admin does not belong to the userHomeGroup\r\n                if (currentUser.anid !== userHomeGroup.anid) {\r\n                    allowEditing = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: SET_ORIGINAL_USER_AND_EDITED_USER,\r\n            user,\r\n            allowEditing\r\n        });\r\n    }\r\n};\r\n\r\nexport const EDIT_PERSONAL_INFORMATION = 'EDIT_PERSONAL_INFORMATION';\r\nexport const EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION = 'EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION';\r\nexport const EDIT_TRADING_ADDRESS_BUSINESS_PROFILE = 'EDIT_TRADING_ADDRESS_BUSINESS_PROFILE';\r\nexport const EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE = 'EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE';\r\nexport const ADDING_NEW_DIRECTOR = 'ADDING_NEW_DIRECTOR';\r\nexport const editUserLocally = (type, edit) => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type,\r\n            edit: {\r\n                property: edit.property,\r\n                value: edit.value\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_ADD_NEW_DIRECTOR = 'TOGGLE_ADD_NEW_DIRECTOR';\r\nexport const toggleAddNewDirector = () => {\r\n    return {\r\n        type: TOGGLE_ADD_NEW_DIRECTOR\r\n    }\r\n};\r\n\r\nexport const ADD_NEW_DIRECTOR_TEMPORARILY = 'ADD_NEW_DIRECTOR_TEMPORARILY';\r\nexport const addNewDirectorTemporarily = isEditingExistingBusinessProfile => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: ADD_NEW_DIRECTOR_TEMPORARILY,\r\n            isEditingExistingBusinessProfile,\r\n            director: getState().editUser.newDirectorText\r\n        });\r\n    }\r\n};\r\n\r\nexport const DELETE_DIRECTOR_TEMPORARILY = 'DELETE_DIRECTOR_TEMPORARILY';\r\nexport const deleteDirectorTemporarily = (index, isEditingExistingBusinessProfile) => {\r\n    return {\r\n        type: DELETE_DIRECTOR_TEMPORARILY,\r\n        index,\r\n        isEditingExistingBusinessProfile\r\n    }\r\n};\r\n\r\nexport const RESET_PERSONAL_INFORMATION = 'RESET_PERSONAL_INFORMATION';\r\nexport const RESET_BUSINESS_PROFILE = 'RESET_BUSINESS_PROFILE';\r\nexport const cancelEditingUser = type => {\r\n    return {\r\n        type\r\n    }\r\n};\r\n\r\nexport const COMMIT_PERSONAL_INFORMATION_CHANGES = 'COMMIT_PERSONAL_INFORMATION_CHANGES';\r\nexport const COMMIT_BUSINESS_PROFILE_CHANGES = 'COMMIT_BUSINESS_PROFILE_CHANGES';\r\nexport const commitUserProfileChanges = type => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n        const originalUser = JSON.parse(JSON.stringify(getState().editUser.originalUser));\r\n        const userEdited = JSON.parse(JSON.stringify(getState().editUser.userEdited));\r\n\r\n        const userRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(userEdited.id);\r\n\r\n        if (type === COMMIT_PERSONAL_INFORMATION_CHANGES) {\r\n            userRef\r\n                .update({\r\n                    title: userEdited.title,\r\n                    firstName: userEdited.firstName,\r\n                    lastName: userEdited.lastName,\r\n                    email: userEdited.email,\r\n                    linkedin:\r\n                        userEdited.linkedin && userEdited.linkedin.trim().length > 0\r\n                            ?\r\n                            userEdited.linkedin\r\n                            :\r\n                            null\r\n                })\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"User's personal details have been updated.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Your personal details have been updated.\"\r\n                        ,\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                            interactedObjectID: userEdited.id,\r\n                            activitySummary:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS\r\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\r\n                            ,\r\n                            action:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    null\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                            ,\r\n                            value: {\r\n                                before: originalUser,\r\n                                after: userEdited\r\n                            }\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"Error happened. Couldn't update this user's personal details.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Error happened. We couldn't update your personal details.\"\r\n                        ,\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        } else if (type === COMMIT_BUSINESS_PROFILE_CHANGES) {\r\n\r\n            let businessProfile = JSON.parse(JSON.stringify(userEdited.BusinessProfile));\r\n            businessProfile.registeredOffice.postcode = businessProfile.registeredOffice.postcode.toUpperCase();\r\n            businessProfile.tradingAddress.postcode = businessProfile.tradingAddress.postcode.toUpperCase();\r\n\r\n            userRef\r\n                .update({\r\n                    BusinessProfile: businessProfile\r\n                })\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"User's business profile has been updated.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Your business profile has been updated.\"\r\n                        ,\r\n                        color: \"primary\",\r\n                        position: \"bottom\"\r\n                    });\r\n\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\r\n                            interactedObjectID: userEdited.id,\r\n                            activitySummary:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE\r\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\r\n                            ,\r\n                            action:\r\n                                currentUser.id === userEdited.id\r\n                                    ?\r\n                                    // user is editing their own details\r\n                                    null\r\n                                    :\r\n                                    // admin is editing user's details\r\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                            ,\r\n                            value: {\r\n                                before: originalUser,\r\n                                after: userEdited\r\n                            }\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message:\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // an admin is editing the user's profile\r\n                                \"Error happened. Couldn't update this user's business profile.\"\r\n                                :\r\n                                // the user is editing their own profile\r\n                                \"Error happened. We couldn't update your business profile.\"\r\n                        ,\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n    };\r\n};\r\n\r\nlet originalUserListener = null;\r\n\r\nexport const EDIT_USER_ORIGINAL_USER_CHANGED = 'EDIT_USER_ORIGINAL_USER_CHANGED';\r\nexport const startOriginalUserChangedListener = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const originalUser = getState().editUser.originalUser;\r\n\r\n        if (!currentUser || !originalUser) {\r\n            return;\r\n        }\r\n\r\n        // if the current user is the same as the user being edited\r\n        // then we don't need this listener since the current user changes\r\n        // are taken care by the auth actions.\r\n        if (currentUser.id === originalUser.id) {\r\n            return;\r\n        }\r\n\r\n        if (!originalUserListener) {\r\n            originalUserListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(originalUser.id);\r\n\r\n            originalUserListener\r\n                .on('value', snapshot => {\r\n                    let userChanged = snapshot.val();\r\n\r\n                    if (userChanged) {\r\n                        userChanged.groupsUserIsIn = originalUser.groupsUserIsIn;\r\n\r\n                        dispatch({\r\n                            type: EDIT_USER_ORIGINAL_USER_CHANGED,\r\n                            userChanged\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopOriginalUserChangedListener = () => {\r\n    return (dispatch, getState) => {\r\n        if (originalUserListener) {\r\n            originalUserListener.off('value');\r\n            originalUserListener = null;\r\n        }\r\n    }\r\n}","import firebase from '../../firebase/firebaseApp';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {UPLOADING} from './uploadingStatusActions';\r\nimport {\r\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\r\n    UPLOAD_PITCH_COVER_MODE,\r\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\r\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE,\r\n    UPLOAD_ERROR,\r\n    UPLOAD_DONE_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nexport const FILE_UPLOAD_CHANGED = 'FILE_UPLOAD_CHANGED';\r\nexport const handleFilesChanged = (mode, files, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const fileUploadErrorMessage = getState().uploadFiles.fileUploadErrorMessage;\r\n        const fileUploadErrorSnackbarOpen = getState().uploadFiles.fileUploadErrorSnackbarOpen;\r\n\r\n        if (fileUploadErrorMessage.trim().length > 0 || fileUploadErrorSnackbarOpen) {\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n\r\n                    const legalDocuments = getState().uploadFiles.filesToBeUploaded.legalDocuments;\r\n\r\n                    // user is an issuer\r\n                    if (user.type === DB_CONST.TYPE_ISSUER) {\r\n                        if (user.LegalDocuments) {\r\n                            if (legalDocuments.length >=\r\n                                DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER - user.LegalDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                dispatch({\r\n                                    type: FILE_UPLOAD_ERROR,\r\n                                    error: 'Max file count reached'\r\n                                });\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            if (legalDocuments.length >= DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER) {\r\n                                dispatch({\r\n                                    type: FILE_UPLOAD_ERROR,\r\n                                    error: 'Max file count reached'\r\n                                });\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    // user is an investor\r\n                    else if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        if (legalDocuments.length >= 1) {\r\n                            dispatch({\r\n                                type: FILE_UPLOAD_ERROR,\r\n                                error: 'Max file count reached'\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                    break;\r\n                case UPLOAD_PITCH_COVER_MODE:\r\n                    return;\r\n                case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                    return;\r\n                case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                    return;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            dispatch({\r\n                type: FILE_UPLOAD_CHANGED,\r\n                mode,\r\n                fileRead\r\n            });\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    }\r\n};\r\n\r\nexport const FILE_UPLOAD_ERROR = 'FILE_UPLOAD_ERROR';\r\nexport const handleFileError = (error, file) => {\r\n    return (dispatch, getState) => {\r\n        // handle file upload error\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        dispatch({\r\n            type: FILE_UPLOAD_ERROR,\r\n            error: errorMessage\r\n        });\r\n    }\r\n};\r\n\r\nexport const CLOSE_FILE_UPLOAD_ERROR_SNACKBAR = 'CLOSE_FILE_UPLOAD_ERROR_SNACKBAR';\r\nexport const closeErrorSnackbar = () => {\r\n    return {\r\n        type: CLOSE_FILE_UPLOAD_ERROR_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED = 'RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED';\r\nexport const resetErrorMessageWhenSnackbarExited = () => {\r\n    return {\r\n        type: RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED\r\n    }\r\n};\r\n\r\nexport const DELETE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_UPLOADED_LEGAL_DOCUMENT';\r\nexport const DELETE_UPLOADED_PITCH_COVER = 'DELETE_UPLOADED_PITCH_COVER';\r\nexport const DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETED_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\r\nexport const DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\r\nexport const deleteUploadedFile = (mode, index, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n        switch (mode) {\r\n            case DELETE_UPLOADED_LEGAL_DOCUMENT:\r\n                const legalDocumentsUserID = getState().legalDocuments.userID;\r\n                let updateLegalDocuments = [...getState().legalDocuments.legalDocuments];\r\n                updateLegalDocuments[index].removed = true;\r\n                firebase\r\n                    .database()\r\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                    .child(legalDocumentsUserID)\r\n                    .update(updateLegalDocuments);\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_COVER:\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\r\n                return;\r\n            case DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n};\r\n\r\nexport const DELETE_TO_BE_UPLOADED_FILE = 'DELETE_TO_BE_UPLOADED_FILE';\r\nexport const DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_COVER = 'DELETE_TO_BE_UPLOADED_PITCH_COVER';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\r\nexport const DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\r\nexport const deleteToBeUploadedFile = (mode, index) => {\r\n    return (dispatch, getState) => {\r\n\r\n        let updatedFilesToBeUploaded = null;\r\n\r\n        switch (mode) {\r\n            case DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.legalDocuments));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_COVER:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchCover));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument));\r\n                break;\r\n            case DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\r\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments));\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        updatedFilesToBeUploaded.splice(index, 1);\r\n\r\n        dispatch({\r\n            type: DELETE_TO_BE_UPLOADED_FILE,\r\n            mode,\r\n            updatedFilesToBeUploaded\r\n        });\r\n    };\r\n};\r\n\r\nexport const FINISHED_UPLOADING_A_LEGAL_DOCUMENT = 'FINISHED_UPLOADING_A_LEGAL_DOCUMENT';\r\nexport const FINISHED_UPLOADING_A_PITCH_COVER = 'FINISHED_UPLOADING_A_PITCH_COVER';\r\nexport const FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT';\r\nexport const FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT';\r\nexport const FINISHED_UPLOADING_ALL_FILES = 'FINISHED_UPLOADING_ALL_FILES';\r\nexport const uploadFiles = (mode, user = null, project = null) => {\r\n    return (dispatch, getState) => {\r\n\r\n        let files = [];\r\n\r\n        switch (mode) {\r\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.legalDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                files = getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        dispatch({\r\n            type: UPLOADING,\r\n            mode,\r\n            progress: 0\r\n        });\r\n\r\n        Promise.all(\r\n            files.map(file => uploadIndividualFile(dispatch, mode, file, files.length, user, project))\r\n        ).then(() => {\r\n            // call this to clear temporarily files\r\n            dispatch({\r\n                type: FINISHED_UPLOADING_ALL_FILES,\r\n                mode,\r\n                waitingForUploadingReferences: true\r\n            });\r\n            putFilesReferencesToDatabase(dispatch, getState, mode, user, project)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: FINISHED_UPLOADING_ALL_FILES,\r\n                        mode,\r\n                        waitingForUploadingReferences: false\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                });\r\n        }).catch(error => {\r\n            dispatch({\r\n                type: UPLOADING,\r\n                mode: UPLOAD_ERROR,\r\n                progress: 100,\r\n                error: error\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Upload a file to Firebase storage\r\n *\r\n * @param dispatch\r\n * @param mode\r\n * @param file: a single file to be uploaded\r\n * @param totalFiles: length of the files array --> calculate percent done\r\n * @param user: set when uploading legal documents\r\n * @param project: set when uploading pitch cover, pitch deck, or pitch supporting documents\r\n */\r\nconst uploadIndividualFile = async (dispatch, mode, file, totalFiles, user = null, project = null) => {\r\n\r\n    let fileRef = firebase.storage();\r\n\r\n    const storageID = utils.getCurrentDate();\r\n    const storageFileName = utils.constructStorageFileName(file, storageID);\r\n\r\n    switch (mode) {\r\n        case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(user.id)\r\n                .child(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        case UPLOAD_PITCH_COVER_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                .child(`${storageID}.${document.file.extension}`);\r\n            break;\r\n        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n            fileRef = fileRef\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(project.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                .child(storageFileName);\r\n            break;\r\n        default:\r\n            return;\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const uploadTask = fileRef.put(file.file);\r\n        uploadTask\r\n            .on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    dispatch({\r\n                        type: UPLOADING,\r\n                        mode,\r\n                        progress: progress.toFixed(0)\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask\r\n                    .snapshot\r\n                    .ref\r\n                    .getDownloadURL()\r\n                    .then(fileDownloadURL => {\r\n\r\n                        let percentDone = 0;\r\n\r\n                        switch (mode) {\r\n                            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                                percentDone = 100 / totalFiles;\r\n                                const legalDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: percentDone\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_LEGAL_DOCUMENT,\r\n                                    fileDBRef: legalDocument\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_COVER_MODE:\r\n                                const formattedCover = {\r\n                                    url: fileDownloadURL,\r\n                                    fileType: file.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                    fileExtension: document.file.extension,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: 100\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_COVER,\r\n                                    fileDBRef: formattedCover\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                                const formattedPresentationDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: 100\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT,\r\n                                    fileDBRef: formattedPresentationDocument\r\n                                });\r\n                                break;\r\n                            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                                percentDone = 100 / totalFiles;\r\n                                const formattedSupportingDocument = {\r\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                    readableSize: file.file.sizeReadable,\r\n                                    downloadURL: fileDownloadURL,\r\n                                    storageID: storageID\r\n                                };\r\n                                // updating progress\r\n                                dispatch({\r\n                                    type: UPLOADING,\r\n                                    mode,\r\n                                    progress: percentDone\r\n                                });\r\n                                // updating array of uploaded files\r\n                                dispatch({\r\n                                    type: FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT,\r\n                                    fileDBRef: formattedSupportingDocument\r\n                                });\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n\r\n                        return resolve();\r\n                    });\r\n            });\r\n    });\r\n};\r\n\r\nconst putFilesReferencesToDatabase = async (dispatch, getState, mode, user = null, project = null) => {\r\n\r\n    let firebaseRef = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        switch (mode) {\r\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\r\n                const legalDocumentsUserID = getState().legalDocuments.userID;\r\n                const existingLegalDocuments = getState().legalDocuments.legalDocuments;\r\n\r\n                const filesDBReferences = getState().uploadFiles.filesDBReferences.legalDocuments;\r\n                let filesReferencesToBeUploaded = [];\r\n\r\n                if (existingLegalDocuments) {\r\n                    filesReferencesToBeUploaded = [...existingLegalDocuments, ...filesDBReferences];\r\n                } else {\r\n                    filesReferencesToBeUploaded = filesDBReferences;\r\n                }\r\n\r\n                firebaseRef\r\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                    .child(legalDocumentsUserID)\r\n                    .set(filesReferencesToBeUploaded)\r\n                    .then(() => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_DONE_MODE,\r\n                            progress: 100\r\n                        });\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: UPLOADING,\r\n                            mode: UPLOAD_ERROR,\r\n                            progress: 100\r\n                        });\r\n                        return reject(error);\r\n                    });\r\n\r\n                break;\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    });\r\n};\r\n\r\n","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LEGAL_DOCUMENTS_SET_USER = 'LEGAL_DOCUMENTS_SET_USER';\r\nexport const setUserID = userID => {\r\n    return {\r\n        type: LEGAL_DOCUMENTS_SET_USER,\r\n        userID\r\n    }\r\n};\r\n\r\nexport const LOADING_LEGAL_DOCUMENTS = 'LOADING_LEGAL_DOCUMENTS';\r\nexport const FINISHED_LOADING_LEGAL_DOCUMENTS = 'FINISHED_LOADING_LEGAL_DOCUMENTS';\r\nexport const getLegalDocuments = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const userID = getState().legalDocuments.userID;\r\n\r\n        dispatch({\r\n            type: LOADING_LEGAL_DOCUMENTS\r\n        });\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n            .child(userID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_LEGAL_DOCUMENTS,\r\n                        legalDocuments: null,\r\n                        error: 'No legal documents'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: FINISHED_LOADING_LEGAL_DOCUMENTS,\r\n                    legalDocuments: snapshot.val()\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nlet legalDocumentsListener = null;\r\n\r\nexport const LEGAL_DOCUMENTS_CHANGED = 'LEGAL_DOCUMENTS_CHANGED';\r\nexport const startListeningForLegalDocumentsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const userID = getState().legalDocuments.userID;\r\n\r\n        if (!legalDocumentsListener) {\r\n            legalDocumentsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\r\n                .child(userID);\r\n\r\n            legalDocumentsListener\r\n                .once('value', snapshot => {\r\n                    // user has not uploaded any documents\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        legalDocumentsListener = null;\r\n                        return;\r\n                    }\r\n\r\n                    legalDocumentsListener\r\n                        .on('child_added', snapshot => {\r\n                            let updatedLegalDocuments = Object.assign([], getState().legalDocuments.legalDocuments);\r\n                            if (updatedLegalDocuments.length === 0) {\r\n                                updatedLegalDocuments = [snapshot.val()];\r\n                            }\r\n                            else {\r\n                                const index = updatedLegalDocuments.findIndex(doc => doc.storageID === snapshot.val().storageID);\r\n                                if (index === -1) {\r\n                                    updatedLegalDocuments.push(snapshot.val());\r\n                                }\r\n                            }\r\n\r\n                            dispatch({\r\n                                type: LEGAL_DOCUMENTS_CHANGED,\r\n                                legalDocuments: updatedLegalDocuments\r\n                            });\r\n                        });\r\n\r\n                    legalDocumentsListener\r\n                        .on('child_changed', snapshot => {\r\n                            let updatedLegalDocuments = [...getState().legalDocuments.legalDocuments];\r\n                            updatedLegalDocuments[snapshot.key] = snapshot.val();\r\n\r\n                            dispatch({\r\n                                type: LEGAL_DOCUMENTS_CHANGED,\r\n                                legalDocuments: updatedLegalDocuments\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForLegalDocumentsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (legalDocumentsListener) {\r\n            legalDocumentsListener.off('child_added');\r\n            legalDocumentsListener.off('child_changed');\r\n            legalDocumentsListener = null;\r\n        }\r\n    }\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER';\r\nexport const setUser = (uid) => {\r\n    return (dispatch, getState) => {\r\n        const prevUserID = getState().manageInvestorSelfCertificationAgreement.userID;\r\n        // new userID is the same as the previous set one\r\n        // do nothing\r\n        if (prevUserID === uid) {\r\n            return;\r\n        }\r\n        dispatch({\r\n            type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER,\r\n            uid\r\n        });\r\n    };\r\n};\r\n\r\nexport const LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const loadInvestorSelfCertificationAgreement = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            userID\r\n        } = getState().manageInvestorSelfCertificationAgreement;\r\n\r\n        dispatch({\r\n            type: LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT\r\n        });\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .orderByChild('userID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots || !snapshots.exists()) {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                        result: null\r\n                    });\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                        result: snapshot.val()\r\n                    });\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED';\r\nexport const handleTickBoxChanged = event => {\r\n    return {\r\n        type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT = 'UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT';\r\nexport const setInvestorSelfCertificationAgreement = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            userID,\r\n            statementType\r\n        } = getState().manageInvestorSelfCertificationAgreement;\r\n\r\n        const id =  firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const agreementObject = {\r\n            id,\r\n            userID: userID,\r\n            agreedDate: utils.getCurrentDate(),\r\n            type: statementType\r\n        };\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD)\r\n            .child(id)\r\n            .set(agreementObject)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: userID,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.INVESTOR_SELF_CERTIFICATION_AGREEMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMPLETED_SELF_CERTIFICATION\r\n                    });\r\n\r\n                // update states\r\n                dispatch({\r\n                    type: UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                    agreement: agreementObject\r\n                });\r\n\r\n                // display snackbar to let the user know\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"You have now self certified.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT,\r\n                    agreement: null\r\n                });\r\n\r\n                // display snackbar to let the user know\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. We couldn't upload your self-certification statement.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED = 'INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED';\r\nexport const handleStatementTypeChanged = event => {\r\n    return {\r\n        type: INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED,\r\n        event\r\n    }\r\n};","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface FetchGroupsParams {\r\n    groupIds?: string[];\r\n    name?: string;\r\n}\r\n\r\nexport default class GroupRepository {\r\n\r\n    /**\r\n     * Get group\r\n     *\r\n     * @param groupUserName\r\n     */\r\n    public async getGroup(groupUserName: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.retrieveGroup.replace(\":groupUserName\", groupUserName)\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Fetch groups\r\n     *\r\n     * @param params\r\n     */\r\n    public async fetchGroups(params?: FetchGroupsParams) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listGroups,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: params\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Fetch group members\r\n     *\r\n     * @param groupID\r\n     */\r\n    public async fetchGroupMembers(groupID: string | \"system\") {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listGroupMembers.replace(\":group\", groupID)\r\n            );\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport enum FetchProjectsOrderByOptions {\r\n    Visibility = \"visibility\",\r\n    Group = \"group\",\r\n    Investor = \"investor\",\r\n    Issuer = \"issuer\",\r\n    Sector = \"sector\",\r\n    Phase = \"phase\"\r\n}\r\n\r\nexport enum FetchProjectsPhaseOptions {\r\n    Any = \"Any\",\r\n    Live = \"Live\",\r\n    TemporarilyClosed = \"TemporarilyClosed\",\r\n    Successful = \"Successful\",\r\n    Failed = \"Failed\",\r\n    LivePitch = \"LivePitch\",\r\n    ExpiredPitch = \"ExpiredPitch\"\r\n}\r\n\r\nexport interface FetchProjectsOptions {\r\n    search?: string; // filter projects by either name, group name, or issuer company name\r\n    name?: string; // filter projects by name\r\n    visibility?: number | \"all\"; // filter projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n    group?: string | \"all\"; // filter projects by group id\r\n    groupName?: string; // filter projects by group name\r\n    investor?: string | \"all\"; // filter projects by investor id\r\n    issuer?: string | \"all\"; // filter projects by issuer id\r\n    issuerCompanyName?: string; // filter projects by issuer company name\r\n    sector?: string | \"all\"; // filter projects by sector\r\n    phase?: string | number | \"all\"; // filter projects by status\r\n    orderBy?: FetchProjectsOrderByOptions; // mode to use orderByChild\r\n}\r\n\r\nexport default class OfferRepository {\r\n\r\n    /**\r\n     * Fetch offers\r\n     *\r\n     * @param options\r\n     */\r\n    public async fetchOffers(options: FetchProjectsOptions) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listProjectsRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: options\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Export to csv\r\n     *\r\n     * @param options\r\n     */\r\n    public async exportCsv(options?: FetchProjectsOptions) {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            try {\r\n                const response = await new Api()\r\n                    .request(\r\n                        \"get\",\r\n                        ApiRoutes.exportProjectsToCsvRoute,\r\n                        {\r\n                            requestBody: null,\r\n                            queryParameters: options ?? null\r\n                        }\r\n                    );\r\n\r\n                // create a file from the csv returned by the server\r\n                const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\r\n                const link = document.createElement(\"a\");\r\n                if (link.download !== undefined) {\r\n                    // create a download url\r\n                    const url = URL.createObjectURL(blob);\r\n                    link.setAttribute(\"href\", url);\r\n                    link.setAttribute(\"download\", \"offers_data.csv\");\r\n                    link.style.visibility = \"hidden\";\r\n                    document.body.appendChild(link);\r\n                    link.click();\r\n                    document.body.removeChild(link);\r\n                }\r\n                return resolve();\r\n            } catch (error) {\r\n                return reject(error);\r\n            }\r\n        });\r\n    }\r\n}","import GroupProperties from \"../../models/group_properties\";\r\nimport {\r\n    FinishedValidatingGroupUrlAction,\r\n    ManageGroupUrlAction,\r\n    ManageGroupUrlEvents,\r\n    SetGroupUrlAction\r\n} from \"../actions/manageGroupUrlActions\";\r\nimport Error from \"../../models/error\";\r\nimport {colors} from \"@material-ui/core\";\r\nimport {createMuiTheme, responsiveFontSizes, Theme} from \"@material-ui/core/styles\";\r\nimport {defaultTheme} from \"../../App\";\r\n\r\nexport interface ManageGroupUrlState {\r\n    routePath: string | undefined;\r\n    groupNameFromUrl: string | null | undefined;\r\n\r\n    group: GroupProperties | null;\r\n    groupLoaded: boolean;\r\n    loadingGroup: boolean;\r\n\r\n    validGroupUrl: boolean;\r\n\r\n    groupRouteTheme: Theme;\r\n\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ManageGroupUrlState = {\r\n    routePath: undefined,\r\n    groupNameFromUrl: undefined,\r\n\r\n    group: null,\r\n    groupLoaded: false,\r\n    loadingGroup: false,\r\n\r\n    groupRouteTheme: defaultTheme,\r\n\r\n    validGroupUrl: false\r\n};\r\n\r\nexport const isValidatingGroupUrl = (state: ManageGroupUrlState) => {\r\n    return (!state.group && !state.groupLoaded && state.loadingGroup)\r\n        || (!state.group && !state.groupLoaded && !state.loadingGroup);\r\n}\r\n\r\nexport const routeContainsGroupName = (state: ManageGroupUrlState) => {\r\n    return state.groupNameFromUrl !== null;\r\n}\r\n\r\nexport const successfullyValidatedGroupUrl = (state: ManageGroupUrlState) => {\r\n    return state.validGroupUrl && state.error === undefined;\r\n}\r\n\r\nexport const hasGroupValidationError = (state: ManageGroupUrlState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nexport const getGroupRouteTheme = (state: ManageGroupUrlState): Theme => {\r\n    if (state.groupRouteTheme === undefined) {\r\n        return defaultTheme;\r\n    }\r\n    return state.groupRouteTheme;\r\n}\r\n\r\nconst manageGroupUrlReducer = (state: ManageGroupUrlState = initialState, action: ManageGroupUrlAction) => {\r\n    switch (action.type) {\r\n        case ManageGroupUrlEvents.SetGroupUrl:\r\n            const setGroupUrlAction: SetGroupUrlAction = action as SetGroupUrlAction;\r\n            return {\r\n                ...state,\r\n                routePath: setGroupUrlAction.path,\r\n                groupNameFromUrl: setGroupUrlAction.groupUserName\r\n            }\r\n        case ManageGroupUrlEvents.ValidatingGroupUrl:\r\n            return {\r\n                ...state,\r\n                group: null,\r\n                groupLoaded: false,\r\n                loadingGroup: true,\r\n                validGroupUrl: false\r\n            }\r\n        case ManageGroupUrlEvents.FinishedValidatingGroupUrl:\r\n            const finishedValidatingGroupUrlAction: FinishedValidatingGroupUrlAction = action as FinishedValidatingGroupUrlAction;\r\n            return {\r\n                ...state,\r\n                group: finishedValidatingGroupUrlAction.group === null ? null : JSON.parse(JSON.stringify(action.group)),\r\n                groupLoaded: true,\r\n                loadingGroup: false,\r\n                validGroupUrl: finishedValidatingGroupUrlAction.validGroupUrl,\r\n                error: finishedValidatingGroupUrlAction.error,\r\n                groupRouteTheme:\r\n                    finishedValidatingGroupUrlAction.validGroupUrl && finishedValidatingGroupUrlAction.group\r\n                        ?\r\n                        responsiveFontSizes(\r\n                            createMuiTheme({\r\n                                palette: {\r\n                                    primary: {\r\n                                        main: finishedValidatingGroupUrlAction.group.settings.primaryColor\r\n                                    },\r\n\r\n                                    secondary: {\r\n                                        main: finishedValidatingGroupUrlAction.group.settings.secondaryColor\r\n                                    },\r\n\r\n                                    text: {\r\n                                        secondary: colors.blueGrey[\"700\"],\r\n                                    }\r\n                                },\r\n                                typography: {\r\n                                    fontFamily: \"Muli, sans-serif\"\r\n                                }\r\n                            })\r\n                        )\r\n                        :\r\n                        defaultTheme\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageGroupUrlReducer;","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport OfferRepository, {\r\n    FetchProjectsOptions,\r\n    FetchProjectsOrderByOptions\r\n} from \"../../api/repositories/OfferRepository\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\n\r\nexport enum OffersTableEvents {\r\n    SetTableUser = \"OffersTableEvents.SetTableUser\",\r\n    FetchingOffers = \"OffersTableEvents.FetchingOffers\",\r\n    CompleteFetchingOffers = \"OffersTableEvents.CompleteFetchingOffers\",\r\n    FilterChanged = \"OffersTableEvents.FilterChanged\",\r\n    FilterOffersByName = \"OffersTableEvents.FilterOffersByName\",\r\n    CancelFilteringOffersByName = \"OffersTableEvents.CancelFilteringOffersByName\",\r\n    ChangePage = \"OffersTableEvents.ChangePage\",\r\n    ChangeRowsPerPage = \"OffersTableEvents.ChangeRowsPerPage\",\r\n    ExportingCsv = \"OffersTableEvents.ExportingCsv\",\r\n    CompleteExportingCsv = \"OffersTableEvents.CompleteExportingCsv\"\r\n}\r\n\r\nexport interface OffersTableAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetTableUserAction extends OffersTableAction {\r\n    user: User | Admin | undefined;\r\n    groupsOfMembership: GroupOfMembership[] | undefined;\r\n    groupsSelect: GroupProperties[] | undefined;\r\n    error?: string;\r\n}\r\n\r\nexport interface CompleteFetchingOffersAction extends OffersTableAction {\r\n    offerInstances: ProjectInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterOffersByNameAction extends OffersTableAction {\r\n    offerInstances: ProjectInstance[];\r\n    isFilteringByName: boolean;\r\n}\r\n\r\nexport interface FilterChangedAction extends OffersTableAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface ChangePageAction extends OffersTableAction {\r\n    page: number;\r\n}\r\n\r\nexport interface ChangeRowsPerPageAction extends OffersTableAction {\r\n    rowsPerPage: number;\r\n}\r\n\r\nexport interface CompleteExportingCsvAction extends OffersTableAction {\r\n    error?: string;\r\n}\r\n\r\nexport const setUser: ActionCreator<any> = (user?: User | Admin) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentTableUser = getState().OffersTableLocalState.tableUser;\r\n        let shouldSetTableUser: boolean = false;\r\n        if (currentTableUser === undefined) {\r\n            if (user !== undefined) {\r\n                shouldSetTableUser = true;\r\n            }\r\n        } else {\r\n            if (user !== undefined) {\r\n                if (currentTableUser.id !== user.id) {\r\n                    shouldSetTableUser = true;\r\n                }\r\n            } else {\r\n                shouldSetTableUser = true;\r\n            }\r\n        }\r\n\r\n        if (shouldSetTableUser) {\r\n            const action: SetTableUserAction = {\r\n                type: OffersTableEvents.SetTableUser,\r\n                user: user,\r\n                groupsOfMembership: undefined,\r\n                groupsSelect: undefined\r\n            }\r\n\r\n            try {\r\n                if (user) {\r\n                    const groupsOfMembershipResponse = await new Api().request(\"get\",\r\n                        ApiRoutes.listGroupsOfMembership.replace(\":uid\", user.id));\r\n                    const groupsOfMembership: GroupOfMembership[] = groupsOfMembershipResponse.data;\r\n                    action.groupsOfMembership = groupsOfMembership;\r\n\r\n                    const isTableAdminUser: Admin | null = isAdmin(user);\r\n\r\n                    if (isTableAdminUser && isTableAdminUser.superAdmin) {\r\n                        const allGroupsResponse = await new GroupRepository().fetchGroups();\r\n                        action.groupsSelect = allGroupsResponse.data;\r\n                    } else {\r\n                        action.groupsSelect = groupsOfMembership.map(groupOfMembership => groupOfMembership.group);\r\n                    }\r\n                }\r\n                dispatch(action);\r\n                return dispatch(fetchOffers());\r\n            } catch (error) {\r\n                action.error = error.toString();\r\n                return dispatch(action);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const fetchOffers: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            tableUser,\r\n            tableUserGroupsOfMembership,\r\n            visibilityFilter,\r\n            groupFilter,\r\n            phaseFilter\r\n        } = getState().OffersTableLocalState;\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        if (!currentUser || !tableUser) {\r\n            return;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        const fetchOffersOptions: FetchProjectsOptions = {\r\n            visibility: visibilityFilter,\r\n            group: groupFilter,\r\n            phase: phaseFilter\r\n        };\r\n\r\n        const completeAction: CompleteFetchingOffersAction = {\r\n            type: OffersTableEvents.CompleteFetchingOffers,\r\n            offerInstances: []\r\n        }\r\n\r\n        let shouldFetchOffers: boolean = false;\r\n\r\n        // currentUser = tableUser --> issuer/investor/admin is viewing their own offers table\r\n        if (currentUser.id === tableUser.id) {\r\n            shouldFetchOffers = true;\r\n        }\r\n        // currentUser != tableUser --> admin is viewing issuer/investor/admin offers table\r\n        else if (currentAdmin) {\r\n            // super admin is viewing issuer/investor/admin offers table\r\n            if (currentAdmin.superAdmin) {\r\n                shouldFetchOffers = true;\r\n            }\r\n            // group admin is viewing issuer/investor offers table\r\n            else {\r\n                if (tableUserGroupsOfMembership !== undefined\r\n                    && tableUserGroupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === currentAdmin.anid) !== -1\r\n                    && !isAdmin(tableUser)\r\n                ) {\r\n                    shouldFetchOffers = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (shouldFetchOffers) {\r\n            if (isIssuer(tableUser)) {\r\n                fetchOffersOptions.issuer = tableUser.id;\r\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Issuer;\r\n            } else if (isInvestor(tableUser)) {\r\n                fetchOffersOptions.investor = tableUser.id;\r\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Investor;\r\n            } else if (currentAdmin) {\r\n                if (!currentAdmin.superAdmin) {\r\n                    fetchOffersOptions.group = currentAdmin.anid;\r\n                    fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Group;\r\n                }\r\n            } else {\r\n                completeAction.error = \"Invalid user reference.\";\r\n                return dispatch(completeAction);\r\n            }\r\n        } else {\r\n            completeAction.error = \"You don't have privileges to access this data.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        dispatch({\r\n            type: OffersTableEvents.FetchingOffers\r\n        });\r\n\r\n        try {\r\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\r\n            completeAction.offerInstances = response.data;\r\n            dispatch(completeAction);\r\n            return dispatch(filterOffersByName());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: OffersTableEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n        dispatch(action);\r\n        if (name !== \"nameFilter\") {\r\n            dispatch(fetchOffers());\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterOffersByName: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const nameFilter: string = getState().OffersTableLocalState.nameFilter;\r\n        let offerInstances: ProjectInstance[] = [...getState().OffersTableLocalState.offerInstances];\r\n\r\n        const action: FilterOffersByNameAction = {\r\n            type: OffersTableEvents.FilterOffersByName,\r\n            offerInstances: offerInstances,\r\n            isFilteringByName: false\r\n        }\r\n\r\n        if (nameFilter.trim().length > 0) {\r\n            offerInstances = offerInstances.filter(\r\n                offerInstance => offerInstance.projectDetail.projectName?.toLowerCase().includes(nameFilter.toLowerCase())\r\n            );\r\n            action.offerInstances = offerInstances;\r\n            action.isFilteringByName = true;\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const cancelFilteringOffersByName: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: OffersTableEvents.CancelFilteringOffersByName\r\n        });\r\n    }\r\n}\r\n\r\nexport const changePage: ActionCreator<any> = (event: any, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangePageAction = {\r\n            type: OffersTableEvents.ChangePage,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const changeRowsPerPage: ActionCreator<any> = (event: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeRowsPerPageAction = {\r\n            type: OffersTableEvents.ChangeRowsPerPage,\r\n            rowsPerPage: parseInt(event.target.value, 10)\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const exportCsv: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        const exportingCsv = getState().OffersTableLocalState.exportingCsv;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        if (!currentAdmin) {\r\n            return;\r\n        }\r\n\r\n        if (exportingCsv) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: OffersTableEvents.ExportingCsv\r\n        });\r\n\r\n        const completeAction: CompleteExportingCsvAction = {\r\n            type: OffersTableEvents.CompleteExportingCsv\r\n        };\r\n\r\n        try {\r\n            await new OfferRepository().exportCsv(\r\n                currentAdmin.superAdmin\r\n                    ? undefined\r\n                    : {group: currentAdmin.anid, orderBy: FetchProjectsOrderByOptions.Group}\r\n            );\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport React, {FormEvent} from \"react\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\r\nimport OfferRepository, {\r\n    FetchProjectsOptions,\r\n    FetchProjectsOrderByOptions\r\n} from \"../../api/repositories/OfferRepository\";\r\n\r\nexport enum ExploreOffersEvents {\r\n    FetchingOffers = \"ExploreOffersEvents.FetchingOffers\",\r\n    CompleteFetchingOffers = \"ExploreOffersEvents.CompleteFetchingOffers\",\r\n    FilterChanged = \"ExploreOffersEvents.FilterChanged\",\r\n    ClearSearchFilter = \"ExploreOffersEvents.ClearSearchFilter\",\r\n    PaginationChanged = \"ExploreOffersEvents.PaginationChanged\"\r\n}\r\n\r\nexport interface ExploreOffersAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteFetchingOffersAction extends ExploreOffersAction {\r\n    offerInstances: ProjectInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterChangedAction extends ExploreOffersAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface PaginationChangedAction extends ExploreOffersAction {\r\n    page: number;\r\n}\r\n\r\nexport const onSearchEnter: ActionCreator<any> = (event: FormEvent) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        event.preventDefault();\r\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\r\n    }\r\n}\r\n\r\nexport const fetchOffers: ActionCreator<any> = (orderBy?: FetchProjectsOrderByOptions) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            searchFilter,\r\n            visibilityFilter,\r\n            sectorFilter,\r\n            phaseFilter,\r\n            groupFilter\r\n        } = getState().ExploreOffersLocalState;\r\n\r\n        const fetchOffersOptions: FetchProjectsOptions = orderBy === undefined ? {\r\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\r\n            visibility: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? visibilityFilter : undefined,\r\n            group: groupFilter,\r\n            sector: sectorFilter,\r\n            phase: phaseFilter\r\n        } : {\r\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\r\n            visibility: visibilityFilter === \"all\" || visibilityFilter === PROJECT_VISIBILITY_PUBLIC\r\n            || visibilityFilter === PROJECT_VISIBILITY_RESTRICTED\r\n                ? visibilityFilter : undefined,\r\n            group: groupFilter,\r\n            sector: sectorFilter,\r\n            phase: phaseFilter,\r\n            orderBy: orderBy\r\n        };\r\n\r\n        dispatch({\r\n            type: ExploreOffersEvents.FetchingOffers\r\n        });\r\n\r\n        const completeAction: CompleteFetchingOffersAction = {\r\n            type: ExploreOffersEvents.CompleteFetchingOffers,\r\n            offerInstances: []\r\n        }\r\n\r\n        try {\r\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\r\n            completeAction.offerInstances = response.data;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: ExploreOffersEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n        dispatch(action);\r\n\r\n        switch (name) {\r\n            case \"searchFilter\":\r\n                return;\r\n            case \"visibilityFilter\":\r\n                if (value === \"all\" || value.toString() === PROJECT_VISIBILITY_PUBLIC.toString() || value.toString() === PROJECT_VISIBILITY_RESTRICTED.toString()) {\r\n                    return dispatch(fetchOffers(FetchProjectsOrderByOptions.Visibility));\r\n                }\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Group));\r\n            case \"sectorFilter\":\r\n                return  dispatch(fetchOffers(FetchProjectsOrderByOptions.Sector));\r\n            case \"phaseFilter\":\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase));\r\n            case \"groupFilter\":\r\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Group))\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport const clearSearchFilter: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreOffersEvents.ClearSearchFilter\r\n        });\r\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\r\n    }\r\n}\r\n\r\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: PaginationChangedAction = {\r\n            type: ExploreOffersEvents.PaginationChanged,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n","import {\r\n    ChangePageAction,\r\n    ChangeRowsPerPageAction,\r\n    CompleteExportingCsvAction,\r\n    CompleteFetchingOffersAction,\r\n    FilterChangedAction,\r\n    FilterOffersByNameAction,\r\n    OffersTableAction,\r\n    OffersTableEvents,\r\n    SetTableUserAction\r\n} from \"./OffersTableActions\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport interface OffersTableStates {\r\n    offerInstances: ProjectInstance[];\r\n    offerInstancesFilteredByName: ProjectInstance[];\r\n    fetchingOffers: boolean;\r\n    offersFetched: boolean;\r\n\r\n    tableUser?: User | Admin;\r\n    tableUserGroupsOfMembership?: GroupOfMembership[];\r\n\r\n    nameFilter: string;\r\n    visibilityFilter: number | \"all\";\r\n    groupFilter: string | \"all\";\r\n    groupsSelect?: GroupProperties[];\r\n    phaseFilter: string | number | \"all\";\r\n    filteringOffersByName: boolean;\r\n\r\n    currentPage: number;\r\n    rowsPerPage: number;\r\n\r\n    exportingCsv: boolean;\r\n    errorExportingCsv?: Error;\r\n\r\n    error?: Error\r\n}\r\n\r\nconst initialState: OffersTableStates = {\r\n    offerInstances: [],\r\n    offerInstancesFilteredByName: [],\r\n    fetchingOffers: false,\r\n    offersFetched: false,\r\n\r\n    nameFilter: \"\",\r\n    visibilityFilter: \"all\",\r\n    groupFilter: \"all\",\r\n    phaseFilter: \"all\",\r\n    filteringOffersByName: false,\r\n\r\n    currentPage: 0,\r\n    rowsPerPage: 5,\r\n\r\n    exportingCsv: false\r\n}\r\n\r\nexport const isFetchingOffers = (state: OffersTableStates) => {\r\n    return !state.offersFetched && state.fetchingOffers;\r\n}\r\n\r\nexport const successfullyFetchedOffers = (state: OffersTableStates) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const hasOffersForCurrentFilters = (state: OffersTableStates) => {\r\n    return successfullyFetchedOffers(state) && state.offerInstancesFilteredByName.length > 0;\r\n}\r\n\r\nexport const isFilteringOffersByName = (state: OffersTableStates) => {\r\n    return state.filteringOffersByName;\r\n}\r\n\r\nexport const hasErrorFetchingOffers = (state: OffersTableStates) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nexport const isExportingCsv = (state: OffersTableStates) => {\r\n    return state.exportingCsv;\r\n}\r\n\r\nexport const hasErrorExportingCsv = (state: OffersTableStates) => {\r\n    return state.errorExportingCsv !== undefined;\r\n}\r\n\r\nexport const hasGroupsSelect = (state: OffersTableStates) => {\r\n    return state.groupsSelect !== undefined && state.groupsSelect.length > 0;\r\n}\r\n\r\nconst offersTableReducer = (state = initialState, action: OffersTableAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case OffersTableEvents.SetTableUser:\r\n            const setTableUserAction: SetTableUserAction = action as SetTableUserAction;\r\n            return {\r\n                ...initialState,\r\n                tableUser: setTableUserAction.user !== undefined\r\n                    ? JSON.parse(JSON.stringify(setTableUserAction.user))\r\n                    : undefined,\r\n                tableUserGroupsOfMembership: setTableUserAction.groupsOfMembership !== undefined\r\n                    ? [...setTableUserAction.groupsOfMembership]\r\n                    : undefined,\r\n                groupsSelect: setTableUserAction.groupsSelect !== undefined\r\n                    ? [...setTableUserAction.groupsSelect]\r\n                    : undefined,\r\n                error: setTableUserAction.error !== undefined ? {detail: setTableUserAction.error} : state.error,\r\n            }\r\n        case OffersTableEvents.FetchingOffers:\r\n            return {\r\n                ...state,\r\n                offerInstances: [],\r\n                offerInstancesFilteredByName: [],\r\n                fetchingOffers: true,\r\n                offersFetched: false,\r\n                error: undefined\r\n            }\r\n        case OffersTableEvents.CompleteFetchingOffers:\r\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\r\n            return {\r\n                ...state,\r\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\r\n                fetchingOffers: false,\r\n                offersFetched: true,\r\n                currentPage: 0,\r\n                error: completeFetchingOffersAction.error !== undefined\r\n                    ? {detail: completeFetchingOffersAction.error} : state.error\r\n            }\r\n        case OffersTableEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.FilterOffersByName:\r\n            const filterOffersByNameAction: FilterOffersByNameAction = action as FilterOffersByNameAction;\r\n            return {\r\n                ...state,\r\n                offerInstancesFilteredByName: [...filterOffersByNameAction.offerInstances],\r\n                filteringOffersByName: filterOffersByNameAction.isFilteringByName,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.CancelFilteringOffersByName:\r\n            return {\r\n                ...state,\r\n                offerInstancesFilteredByName: [...state.offerInstances],\r\n                nameFilter: \"\",\r\n                filteringOffersByName: false,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.ChangePage:\r\n            const changePageAction: ChangePageAction = action as ChangePageAction;\r\n            return {\r\n                ...state,\r\n                currentPage: changePageAction.page\r\n            }\r\n        case OffersTableEvents.ChangeRowsPerPage:\r\n            const changeRowsPerPageAction: ChangeRowsPerPageAction = action as ChangeRowsPerPageAction;\r\n            return {\r\n                ...state,\r\n                rowsPerPage: changeRowsPerPageAction.rowsPerPage,\r\n                currentPage: 0\r\n            }\r\n        case OffersTableEvents.ExportingCsv:\r\n            return {\r\n                ...state,\r\n                exportingCsv: true,\r\n                errorExportingCsv: undefined\r\n            }\r\n        case OffersTableEvents.CompleteExportingCsv:\r\n            const completeExportingCsvAction: CompleteExportingCsvAction = action as CompleteExportingCsvAction;\r\n            return {\r\n                ...state,\r\n                exportingCsv: false,\r\n                errorExportingCsv: completeExportingCsvAction.error !== undefined\r\n                    ? {detail: completeExportingCsvAction.error} : state.errorExportingCsv\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default offersTableReducer;","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\n\r\nexport interface CustomLinkProps {\r\n    url: string;\r\n    target?: string;\r\n    color: string | \"none\";\r\n    activeColor: string | \"none\";\r\n    activeUnderline: boolean;\r\n    component: \"a\" | \"nav-link\";\r\n    childComponent: React.ReactNode;\r\n}\r\n\r\nconst CustomLink = (props: CustomLinkProps) => {\r\n    if (props.component === \"a\") {\r\n        return <a\r\n            href={props.url}\r\n            target={props.target}\r\n            className={css(styles(props).link_style)}\r\n        >\r\n            {props.childComponent}\r\n        </a>;\r\n    }\r\n\r\n    return <NavLink\r\n        to={props.url}\r\n        target={props.target}\r\n        className={css(styles(props).link_style)}\r\n    >\r\n        {props.childComponent}\r\n    </NavLink>;\r\n}\r\n\r\nexport default CustomLink;\r\n\r\nconst styles = (props: CustomLinkProps) => StyleSheet.create({\r\n    link_style: {\r\n        color: props.color,\r\n        ':hover': {\r\n            color: props.activeColor,\r\n            textDecoration: props.activeUnderline ? \"underline\" : \"none\"\r\n        }\r\n    }\r\n});","import * as DB_CONST from \"../firebase/databaseConsts\";\r\nimport {\r\n    FILE_TYPE_IMAGE,\r\n    FILE_TYPE_VIDEO,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../firebase/databaseConsts\";\r\nimport CreatePitchAgreement from \"./create_pitch_agreement\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport User, {isIssuer} from \"./user\";\r\nimport Pledge from \"./pledge\";\r\nimport Admin, {isAdmin} from \"./admin\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\n\r\n/**\r\n * Project interface\r\n */\r\nexport default interface Project {\r\n    id: string;\r\n    anid: string;\r\n    issuerID: string;\r\n    visibility: number;\r\n    status: number;\r\n    projectName?: string; // optional for draft projects only\r\n    description?: string; // optional for draft projects only\r\n    hasSEIS?: string; // = Pitch has SEIS badge\r\n    hasEIS?: string;\r\n    sector?: string; // optional for draft projects only\r\n    edited?: number;\r\n    temporarilyClosed?: boolean;\r\n\r\n    /**\r\n     * This field contains the user id of the group admin who\r\n     * - created the project on their own\r\n     *      --> [issuerID] = user id of the group admin as well\r\n     *\r\n     * - created the project on behalf of an issuer\r\n     *      --> [issuerID] = user id of the issuer whom the group admin created the project for\r\n     */\r\n    createdByGroupAdmin?: string;\r\n\r\n    Pitch: ProjectPitch;\r\n    PrimaryOffer?: ProjectPledge;\r\n\r\n    createPitchAgreement?: CreatePitchAgreement | null\r\n}\r\n\r\n/**\r\n * Instance of project at load time that contains extra information from other collections\r\n */\r\nexport interface ProjectInstance {\r\n    projectDetail: Project;\r\n    group: GroupProperties;\r\n    issuer: User | Admin;\r\n    pledges: Pledge[];\r\n    rejectFeedbacks: ProjectRejectFeedback[];\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a project in csv\r\n */\r\nexport interface ProjectCsv {\r\n    visibility: \"public\" | \"restricted\" | \"private\";\r\n    projectName: string | undefined;\r\n    description: string | undefined;\r\n    sector: string | undefined;\r\n    postedDate: number | undefined; // = pitch postedDate\r\n    financialRound: string | undefined; // = pitch financialRound\r\n    howFundIsBeingRaised: string | undefined; // = pitch howFundIsBeingRaised\r\n\r\n    amountRaised: number | undefined; // = pitch amountRaised\r\n    detailsAboutEarlierFundraisingRounds: string | undefined; // = pitch detailsAboutEarlierFundraisingRounds\r\n    investorsCommitted: string | undefined; // = pitch investorsCommitted\r\n    fundRequired: number | undefined; // = pitch fundRequired\r\n    postMoneyValuation: number | undefined;\r\n    coverURL: string | undefined; // = active pitch cover\r\n    mainDocument: string | undefined; // = active pitch presentationDocument\r\n    mainText: string | undefined; // = pitch presentationPlainText\r\n    supportingDocuments: string | undefined; // = active pitch supportingDocuments\r\n\r\n    pitchExpiryDate: string | undefined; // = pitch expiredDate\r\n\r\n    pledgeExpiryDate: string | undefined; // = pledge expiredDate\r\n\r\n    hasSEIS: string | undefined; // = Pitch has SEIS badge\r\n    hasEIS: string | undefined; // = Pitch has EIS badge\r\n\r\n    // this field is only available for QIB group\r\n    qibSpecialNews?: string | undefined; // = pitch qibSpecialNews\r\n\r\n    agreedToShareRaisePublicly?: \"yes\" | \"no\" | undefined;\r\n}\r\n\r\n/**\r\n * Project - pitch interface\r\n */\r\nexport interface ProjectPitch {\r\n    postedDate: number;\r\n    status: number;\r\n    amountRaised?: number;\r\n    fundRequired?: number;\r\n    totalRaise?: number;\r\n    expiredDate?: number;\r\n    cover?: PitchCover[];\r\n    postMoneyValuation?: number;\r\n    detailsAboutEarlierFundraisingRounds?: string;\r\n    investorsCommitted?: string;\r\n    financialRound?: string;\r\n    hasSEIS?: string;\r\n    hasEIS?: string;\r\n    howFundIsBeingRaised?: string;\r\n    presentationDocument?: PitchDocument[];\r\n    supportingDocuments?: PitchDocument[];\r\n    presentationText?: any;\r\n    presentationPlainText?: string; // a text-only version of the presentationText which is a Quill object\r\n\r\n    /**\r\n     * This field is only available for QIB\r\n     */\r\n    qibSpecialNews?: string;\r\n}\r\n\r\n/**\r\n * Project - pledge interface\r\n */\r\nexport interface ProjectPledge {\r\n    expiredDate: number;\r\n    status: number;\r\n    extraNotes?: string;\r\n    postMoneyValuation?: number;\r\n}\r\n\r\n/**\r\n * Project reject feedback\r\n */\r\nexport interface ProjectRejectFeedback {\r\n    projectID: string;\r\n    sentBy: string;\r\n    date: number;\r\n    feedback: string;\r\n}\r\n\r\n/**\r\n * Project - pitch cover interface\r\n */\r\nexport interface PitchCover {\r\n    fileExtension: string;\r\n    fileType: number;\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Project - pitch document interface\r\n */\r\nexport interface PitchDocument {\r\n    fileName: string;\r\n    readableSize: string;\r\n    storageID: number;\r\n    downloadURL: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = (project: Project) => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a draft project to submitted to the group admin for review\r\n *\r\n * @param project\r\n */\r\nexport const isDraftProjectNotSubmitted = (project: Project) => {\r\n    return isDraftProject(project) && project.Pitch.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n}\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = (project: Project) => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = (project: Project) => {\r\n    return project.temporarilyClosed !== undefined && project.temporarilyClosed;\r\n};\r\n\r\n/**\r\n * Check if a project has reject feedbacks\r\n *\r\n * @param projectInstance\r\n */\r\nexport const doesProjectHaveRejectFeedbacks = (projectInstance: ProjectInstance) => {\r\n    return projectInstance.rejectFeedbacks.length > 0;\r\n}\r\n\r\n/**\r\n * Check if a project is created by an admin\r\n *\r\n * @param project\r\n */\r\nexport const isProjectCreatedByGroupAdmin = (project: Project) => {\r\n    return project.createdByGroupAdmin !== undefined && project.createdByGroupAdmin !== null;\r\n}\r\n\r\n/**\r\n * Set a project to draft\r\n *\r\n * @param project\r\n */\r\nexport const setProjectToDraft = (project: Project): Project => {\r\n    project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n    project.status = DB_CONST.PROJECT_STATUS_DRAFT;\r\n    return project;\r\n}\r\n\r\nexport const getPitchCover = (project: Project) => {\r\n    if (project.Pitch.cover === undefined) {\r\n        return null;\r\n    }\r\n    const index = project.Pitch.cover.findIndex(cover => cover.removed === undefined || !cover.removed);\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return project.Pitch.cover[index];\r\n}\r\n\r\nexport const isImagePitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_IMAGE;\r\n}\r\n\r\nexport const isVideoPitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_VIDEO;\r\n}\r\n\r\nexport const isProjectPublic = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PUBLIC;\r\n}\r\n\r\nexport const isProjectRestricted = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_RESTRICTED;\r\n}\r\n\r\nexport const isProjectPrivate = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PRIVATE;\r\n}\r\n\r\n/**\r\n * Should hide project information from a user\r\n *\r\n * --> true: hide\r\n * --> false: not hide\r\n *\r\n * @param user\r\n * @param groupsOfMembership\r\n * @param project\r\n */\r\nexport const shouldHideProjectInformationFromUser = (user: User | Admin, groupsOfMembership: GroupOfMembership[], project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // user is an admin\r\n    if (admin) {\r\n        // user is a super admin\r\n        if (admin.superAdmin) {\r\n            return false;\r\n        }\r\n\r\n        // user is a group admin and is the group that owns the project\r\n        if (admin.anid === project.anid) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n    // user is not an admin\r\n    else {\r\n        // should not hide any information if the user is an issuer that created this offer\r\n        if (isIssuer(user) && user.id === project.issuerID) {\r\n            return false;\r\n        }\r\n\r\n        // user is a member of the group that owns this offer\r\n        if (groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === project.anid) !== -1) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Check if a user is the owner of a project\r\n *\r\n * @param user\r\n * @param project\r\n */\r\nexport const isProjectOwner = (user: User | Admin, project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // super admin does not own a project\r\n    if (admin && admin.superAdmin) {\r\n        return false;\r\n    }\r\n\r\n    if (admin) {\r\n        return admin.anid === project.anid;\r\n    } else {\r\n        return user.id === project.issuerID;\r\n    }\r\n}","import colorString from \"color-string\";\r\n\r\nexport const toRGBWithOpacity = (color: string, opacity?: number) => {\r\n    const rgbColor: colorString.Color | null = colorString.get.rgb(color);\r\n    if (!rgbColor) {\r\n        return color;\r\n    }\r\n    return colorString.to.hex(rgbColor[0], rgbColor[1], rgbColor[2], opacity === undefined ? 1.0 : opacity);\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    colors,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Close, CreateOutlined, ImportExportOutlined, Refresh, Search} from \"@material-ui/icons\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    hasErrorExportingCsv,\r\n    hasErrorFetchingOffers,\r\n    hasGroupsSelect,\r\n    hasOffersForCurrentFilters,\r\n    isExportingCsv,\r\n    isFetchingOffers,\r\n    isFilteringOffersByName,\r\n    OffersTableStates,\r\n    successfullyFetchedOffers\r\n} from \"./OffersTableReducer\";\r\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    cancelFilteringOffersByName,\r\n    changePage,\r\n    changeRowsPerPage,\r\n    exportCsv,\r\n    fetchOffers,\r\n    filterChanged,\r\n    filterOffersByName,\r\n    setUser\r\n} from \"./OffersTableActions\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport Routes from \"../../router/routes\";\r\nimport {dateInReadableFormat, isProjectInLivePitchPhase} from \"../../utils/utils\";\r\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {\r\n    PROJECT_STATUS_BEING_CHECKED,\r\n    PROJECT_STATUS_DRAFT,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../../firebase/databaseConsts\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\ninterface OffersTableProps {\r\n    // table user set by passing this prop to the OffersTable component when used\r\n    directTableUser?: User | Admin;\r\n\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    OffersTableLocalState: OffersTableStates;\r\n    setUser: (user?: User | Admin) => any;\r\n    fetchOffers: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterOffersByName: () => any;\r\n    cancelFilteringOffersByName: () => any;\r\n    changePage: (event: any, page: number) => any;\r\n    changeRowsPerPage: (event: any) => any;\r\n    exportCsv: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        OffersTableLocalState: state.OffersTableLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        setUser: (user?: User | Admin) => dispatch(setUser(user)),\r\n        fetchOffers: () => dispatch(fetchOffers()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterOffersByName: () => dispatch(filterOffersByName()),\r\n        cancelFilteringOffersByName: () => dispatch(cancelFilteringOffersByName()),\r\n        changePage: (event: any, page: number) => dispatch(changePage(event, page)),\r\n        changeRowsPerPage: (event: any) => dispatch(changeRowsPerPage(event)),\r\n        exportCsv: () => dispatch(exportCsv())\r\n    }\r\n}\r\n\r\nclass OffersTable extends Component<OffersTableProps, any> {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            directTableUser,\r\n            AuthenticationState,\r\n            setUser\r\n        } = this.props;\r\n        setUser(directTableUser ?? AuthenticationState.currentUser ?? undefined);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            OffersTableLocalState,\r\n            fetchOffers,\r\n            filterChanged,\r\n            filterOffersByName,\r\n            cancelFilteringOffersByName,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            exportCsv\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentUser: User | Admin = AuthenticationState.currentUser;\r\n        const tableUser: User | Admin | undefined = OffersTableLocalState.tableUser;\r\n\r\n        if (!currentUser || !tableUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n        const tableAdmin: Admin | null = isAdmin(tableUser);\r\n\r\n        return <TableContainer\r\n            component={Paper}\r\n        >\r\n            <Table\r\n                color=\"black\"\r\n            >\r\n                {/** Table header */}\r\n                <TableHead>\r\n                    {/** Export csv button (only available for admin */}\r\n                    {\r\n                        !(currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\r\n                            ? null\r\n                            : <TableRow>\r\n                                <TableCell colSpan={5} >\r\n                                    <Box>\r\n                                        <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => exportCsv()} >\r\n                                            <ImportExportOutlined fontSize=\"small\" />\r\n                                            <Box width=\"10px\" />\r\n                                            {\r\n                                                isExportingCsv(OffersTableLocalState)\r\n                                                    ? \"Exporting ...\"\r\n                                                    : \"Export csv\"\r\n                                            }\r\n                                        </Button>\r\n\r\n                                        {\r\n                                            !hasErrorExportingCsv(OffersTableLocalState)\r\n                                                ? null\r\n                                                : <Box marginTop=\"12px\" >\r\n                                                    <Typography variant=\"body2\" color=\"error\" >\r\n                                                        {`${OffersTableLocalState.errorExportingCsv?.detail}. Please retry.`}\r\n                                                    </Typography>\r\n                                                </Box>\r\n                                        }\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                    }\r\n\r\n                    {/** Create new offer button (only available for issuers and admins) */}\r\n                    {\r\n                        isInvestor(currentUser) || (currentAdmin && currentAdmin.superAdmin)\r\n                            ? null\r\n                            : <TableRow>\r\n                                <TableCell\r\n                                    colSpan={5}\r\n                                >\r\n                                    <CustomLink\r\n                                        url={\r\n                                            isIssuer(currentUser) || (currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\r\n                                                // issuer creates offer for themselves\r\n                                                // group admin creates offer for their own group\r\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)\r\n                                                : (currentAdmin && isIssuer(tableUser))\r\n                                                // group admin creates offer for an issuer in their group\r\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {\r\n                                                    admin: currentAdmin.id,\r\n                                                    issuer: tableUser.id\r\n                                                })\r\n                                                : \"\"\r\n                                        }\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} >\r\n                                                <CreateOutlined fontSize=\"small\" />\r\n                                                <Box width=\"10px\" /> Create new offer\r\n                                            </Button>\r\n                                        }\r\n                                    />\r\n                                </TableCell>\r\n                            </TableRow>\r\n                    }\r\n\r\n                    {/** Search offer by name + refresh button */}\r\n                    <TableRow>\r\n                        <TableCell colSpan={5} >\r\n                            <Row>\r\n                                {/** Search by name field */}\r\n                                <Col xs={11} sm={11} md={8} lg={6} >\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        height=\"100%\"\r\n                                        alignItems=\"center\"\r\n                                        bgcolor={\r\n                                            !isFilteringOffersByName(OffersTableLocalState)\r\n                                                ? colors.grey[\"200\"]\r\n                                                : toRGBWithOpacity(getGroupRouteTheme(ManageGroupUrlState).palette.primary.main, 0.18)\r\n                                        }\r\n                                        borderRadius=\"10px\"\r\n                                    >\r\n                                        <InputBase\r\n                                            fullWidth\r\n                                            name=\"nameFilter\"\r\n                                            value={OffersTableLocalState.nameFilter}\r\n                                            placeholder=\"Search offer by name\"\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                            startAdornment={\r\n                                                <InputAdornment\r\n                                                    position=\"start\"\r\n                                                >\r\n                                                    <IconButton\r\n                                                        onClick={() => filterOffersByName()}\r\n                                                        disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                                    >\r\n                                                        <Search fontSize=\"small\"/>\r\n                                                    </IconButton>\r\n                                                </InputAdornment>\r\n                                            }\r\n                                            endAdornment={\r\n                                                !isFilteringOffersByName(OffersTableLocalState)\r\n                                                    ? null\r\n                                                    : <InputAdornment\r\n                                                        position=\"end\"\r\n                                                    >\r\n                                                        <IconButton onClick={() => cancelFilteringOffersByName()} >\r\n                                                            <Close fontSize=\"small\"/>\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                            }\r\n                                        />\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Refresh button */}\r\n                                <Col xs={1} sm={1} md={4} lg={6} >\r\n                                    <Box display=\"flex\" height=\"100%\" justifyContent=\"flex-end\" alignItems=\"center\" >\r\n                                        <IconButton onClick={() => fetchOffers()} disabled={!successfullyFetchedOffers(OffersTableLocalState)} >\r\n                                            <Refresh/>\r\n                                        </IconButton>\r\n                                    </Box>\r\n                                </Col>\r\n                            </Row>\r\n                        </TableCell>\r\n                    </TableRow>\r\n\r\n                    {/** Filters */}\r\n                    <TableRow>\r\n                        <TableCell colSpan={5} >\r\n                            <Row>\r\n                                {/** Visibility filter */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <Box paddingY=\"4px\" >\r\n                                        <Typography variant=\"body2\" >Visibility:</Typography>\r\n                                        <Box\r\n                                            height=\"8px\"\r\n                                        />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"visibilityFilter\"\r\n                                            value={OffersTableLocalState.visibilityFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                            <MenuItem key={PROJECT_VISIBILITY_PUBLIC} value={PROJECT_VISIBILITY_PUBLIC}>Public</MenuItem>\r\n                                            <MenuItem key={PROJECT_VISIBILITY_RESTRICTED} value={PROJECT_VISIBILITY_RESTRICTED}>Restricted</MenuItem>\r\n                                            <MenuItem key={PROJECT_VISIBILITY_PRIVATE} value={PROJECT_VISIBILITY_PRIVATE}>Private</MenuItem>\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Group filter */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <Box paddingY=\"4px\" >\r\n                                        <Typography variant=\"body2\" >Group:</Typography>\r\n                                        <Box height=\"8px\" />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"groupFilter\"\r\n                                            value={OffersTableLocalState.groupFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                            {\r\n                                                !hasGroupsSelect(OffersTableLocalState)\r\n                                                || !OffersTableLocalState.groupsSelect\r\n                                                    ? null\r\n                                                    : OffersTableLocalState.groupsSelect.map(group =>\r\n                                                        <MenuItem\r\n                                                            key={group.anid}\r\n                                                            value={group.anid}\r\n                                                        >\r\n                                                            {group.displayName}\r\n                                                        </MenuItem>\r\n                                                    )\r\n                                            }\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n\r\n                                {/** Phase (status) filter */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <Box paddingY=\"4px\" >\r\n                                        <Typography variant=\"body2\">Status:</Typography>\r\n                                        <Box height=\"8px\" />\r\n                                        <Select\r\n                                            fullWidth\r\n                                            name=\"phaseFilter\"\r\n                                            value={OffersTableLocalState.phaseFilter}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            input={<OutlinedInput/>}\r\n                                            onChange={filterChanged}\r\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\r\n                                        >\r\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                            <MenuItem key={FetchProjectsPhaseOptions.LivePitch} value={FetchProjectsPhaseOptions.LivePitch}>Live</MenuItem>\r\n                                            <MenuItem key={PROJECT_STATUS_BEING_CHECKED} value={PROJECT_STATUS_BEING_CHECKED} >Submitted - awaiting review</MenuItem>\r\n                                            <MenuItem key={FetchProjectsPhaseOptions.TemporarilyClosed} value={FetchProjectsPhaseOptions.TemporarilyClosed}>Temporarily closed</MenuItem>\r\n                                            <MenuItem key={FetchProjectsPhaseOptions.ExpiredPitch} value={FetchProjectsPhaseOptions.ExpiredPitch}>Expired</MenuItem>\r\n                                            <MenuItem key={PROJECT_STATUS_DRAFT} value={PROJECT_STATUS_DRAFT} >Draft</MenuItem>\r\n                                        </Select>\r\n                                    </Box>\r\n                                </Col>\r\n                            </Row>\r\n                        </TableCell>\r\n                    </TableRow>\r\n\r\n                    {/** Column headers */}\r\n                    <TableRow>\r\n                        <TableCell colSpan={2} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Project</Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Goal</Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Posted / expiry dates</Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1} >\r\n                            <Typography variant=\"body2\" color=\"primary\" >Status</Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n\r\n                {/** Table body */}\r\n                <TableBody>\r\n                    {\r\n                        // Fetching offers\r\n                        isFetchingOffers(OffersTableLocalState)\r\n                            ? <TableRow>\r\n                                <TableCell colSpan={5} >\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\r\n                                        <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                            // Error setting table user / fetching offers\r\n                            : hasErrorFetchingOffers(OffersTableLocalState)\r\n                            ? <TableRow>\r\n                                <TableCell colSpan={5} >\r\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\r\n                                        <Typography variant=\"h6\" align=\"center\" color=\"error\">Error. Please retry.</Typography>\r\n                                    </Box>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                            // Not successfully fetching offers\r\n                            : !successfullyFetchedOffers(OffersTableLocalState)\r\n                                ? null\r\n                                // No offers available for current filters\r\n                                : !hasOffersForCurrentFilters(OffersTableLocalState)\r\n                                    ? <TableRow>\r\n                                        <TableCell colSpan={5} >\r\n                                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\r\n                                                <Typography variant=\"h6\" align=\"center\" >There are no offers available using your current filter criteria.</Typography>\r\n                                            </Box>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                    // Render offers\r\n                                    : OffersTableLocalState.offerInstancesFilteredByName\r\n                                        .slice(OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage, OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage + OffersTableLocalState.rowsPerPage)\r\n                                        .map(\r\n                                            offerInstance => <TableRow\r\n                                                key={offerInstance.projectDetail.id}\r\n                                                hover\r\n                                            >\r\n                                                {/** Offer name */}\r\n                                                <TableCell colSpan={2} >\r\n                                                    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" >\r\n                                                        {/** Visibility + Name */}\r\n                                                        <Box display=\"flex\" flexDirection=\"row\" >\r\n                                                            {\r\n                                                                isProjectPublic(offerInstance.projectDetail)\r\n                                                                    ? <PublicIcon fontSize=\"small\"/>\r\n                                                                    : isProjectRestricted(offerInstance.projectDetail)\r\n                                                                    ? <RestrictedIcon fontSize=\"small\"/>\r\n                                                                    : <PrivateIcon fontSize=\"small\"/>\r\n                                                            }\r\n                                                            <Box width=\"15px\" />\r\n                                                            <CustomLink\r\n                                                                url={\r\n                                                                    isDraftProject(offerInstance.projectDetail)\r\n                                                                        ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\r\n                                                                        : Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)\r\n                                                                }\r\n                                                                target={\r\n                                                                    isDraftProject(offerInstance.projectDetail)\r\n                                                                        ? \"_blank\"\r\n                                                                        : \"\"\r\n                                                                }\r\n                                                                color=\"black\"\r\n                                                                activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                                activeUnderline={false}\r\n                                                                component=\"nav-link\"\r\n                                                                childComponent={\r\n                                                                    <Typography\r\n                                                                        variant=\"body2\"\r\n                                                                        align=\"left\"\r\n                                                                    >\r\n                                                                        {offerInstance.projectDetail.projectName ?? \"\"}\r\n                                                                    </Typography>\r\n                                                                }\r\n                                                            />\r\n                                                        </Box>\r\n\r\n                                                        {/** Created by (not available for issuers who are looking at their own offers table) */}\r\n                                                        {\r\n                                                            isIssuer(currentUser)\r\n                                                            && OffersTableLocalState.tableUser !== undefined\r\n                                                            && currentUser.id === OffersTableLocalState.tableUser.id\r\n                                                                ? null\r\n                                                                : <Box marginTop=\"10px\" >\r\n                                                                    <Typography variant=\"body2\" align=\"left\" color=\"textSecondary\" >\r\n                                                                        <i>\r\n                                                                            {\r\n                                                                                offerInstance.projectDetail.createdByGroupAdmin\r\n                                                                                    ? `Created by ${offerInstance.group.displayName} admin`\r\n                                                                                    : `Created by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                                            }\r\n                                                                        </i>\r\n                                                                    </Typography>\r\n                                                                </Box>\r\n                                                        }\r\n\r\n                                                        {/** Edit button (only available for draft project) */}\r\n                                                        {\r\n                                                            isInvestor(currentUser)\r\n                                                                ? null\r\n                                                                : !isDraftProject(offerInstance.projectDetail)\r\n                                                                ? null\r\n                                                                : <Box marginTop=\"18px\" >\r\n                                                                    <CustomLink\r\n                                                                        url={\r\n                                                                            Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\r\n                                                                        }\r\n                                                                        target=\"_blank\"\r\n                                                                        color=\"none\"\r\n                                                                        activeColor=\"none\"\r\n                                                                        activeUnderline={false}\r\n                                                                        component=\"nav-link\"\r\n                                                                        childComponent={\r\n                                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} >\r\n                                                                                <CreateOutlined fontSize=\"small\" />\r\n                                                                                <Box width=\"8px\" />\r\n                                                                                Edit\r\n                                                                            </Button>\r\n                                                                        }\r\n                                                                    />\r\n                                                                </Box>\r\n                                                        }\r\n                                                    </Box>\r\n                                                </TableCell>\r\n\r\n                                                {/** Goal */}\r\n                                                <TableCell colSpan={1} >\r\n                                                    <Typography variant=\"body2\" align=\"left\" >\r\n                                                        {\r\n                                                            !offerInstance.projectDetail.Pitch.fundRequired\r\n                                                                ? \"\"\r\n                                                                : `£${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(0)).toLocaleString()}`\r\n                                                        }\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n\r\n                                                {/** Posted / expiry dates */}\r\n                                                <TableCell colSpan={1} >\r\n                                                    <Box display=\"flex\" flexDirection=\"column\" >\r\n                                                        <Typography variant=\"body2\" align=\"left\" >\r\n                                                            {`Posted date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.postedDate)}`}\r\n                                                        </Typography>\r\n                                                        <Box height=\"12px\" />\r\n                                                        <Typography variant=\"body2\" align=\"left\" >\r\n                                                            {\r\n                                                                !offerInstance.projectDetail.Pitch.expiredDate\r\n                                                                    ? \"Expiry date: unknown\"\r\n                                                                    : `Expiry date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.expiredDate)}`\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                </TableCell>\r\n\r\n                                                {/** Status */}\r\n                                                <TableCell colSpan={1} >\r\n                                                    <Typography variant=\"body2\" align=\"left\" >\r\n                                                        {\r\n                                                            isDraftProject(offerInstance.projectDetail)\r\n                                                                ? \"Draft\"\r\n                                                                : isProjectWaitingToGoLive(offerInstance.projectDetail)\r\n                                                                ? \"Submitted. Awaiting group admin review\"\r\n                                                                : isProjectInLivePitchPhase(offerInstance.projectDetail)\r\n                                                                    ? isProjectTemporarilyClosed(offerInstance.projectDetail)\r\n                                                                        ? \"Temporarily closed\"\r\n                                                                        : \"Live\"\r\n                                                                    : isProjectPitchExpiredWaitingForAdminToCheck(offerInstance.projectDetail)\r\n                                                                        ? \"Expired. Awaiting group admin review\"\r\n                                                                        : \"Closed\"\r\n                                                        }\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )\r\n                    }\r\n                </TableBody>\r\n\r\n                {/** Table footer */}\r\n                <TableFooter>\r\n                    <TableRow>\r\n                        <TablePagination\r\n                            rowsPerPageOptions={[5, 10, 15]}\r\n                            count={OffersTableLocalState.offerInstancesFilteredByName.length}\r\n                            rowsPerPage={OffersTableLocalState.rowsPerPage}\r\n                            page={OffersTableLocalState.currentPage}\r\n                            backIconButtonProps={{\r\n                                'aria-label': 'Previous Page',\r\n                            }}\r\n                            nextIconButtonProps={{\r\n                                'aria-label': 'Next Page',\r\n                            }}\r\n                            SelectProps={{\r\n                                native: true,\r\n                            }}\r\n                            onChangePage={changePage}\r\n                            onChangeRowsPerPage={changeRowsPerPage}\r\n                        />\r\n                    </TableRow>\r\n                </TableFooter>\r\n            </Table>\r\n        </TableContainer>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OffersTable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Divider, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface FooterProps {\r\n    position?: \"relative\" | \"fixed\",\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Footer extends Component<FooterProps, any> {\r\n    render() {\r\n        const {\r\n            position,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            paddingX=\"15px\"\r\n            paddingY=\"20px\"\r\n            borderTop={1}\r\n            borderColor={appColors.kick_starter_gray_box_border}\r\n            bgcolor={appColors.kick_starter_background_color}\r\n            alignItems=\"center\"\r\n            width=\"100%\"\r\n            marginTop=\"100px\"\r\n            style={{\r\n                position: position !== undefined ? position : (MediaQueryState.isMobile || !MediaQueryState.minHeightScreen ? \"relative\" : \"fixed\"),\r\n                bottom: position === undefined ? 0 : \"none\"\r\n            }}\r\n        >\r\n            <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" >\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"termsOfUse\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography variant=\"body1\">Terms of Use</Typography>\r\n                    }\r\n                />\r\n\r\n                <Box width={25} />\r\n\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"privacyPolicy\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography variant=\"body1\">Privacy Policy</Typography>\r\n                    }\r\n                />\r\n            </Box>\r\n\r\n            <Box marginY=\"20px\" width={MediaQueryState.isMobile ? \"100%\" : \"500px\"}>\r\n                <Divider/>\r\n            </Box>\r\n\r\n            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"center\" >\r\n                <Image\r\n                    alt=\"Invest West logo\"\r\n                    src={require(\"../../img/logo.png\").default}\r\n                    style={{ width: \"auto\", height: 34, objectFit: \"contain\" }}\r\n                />\r\n                <Box width=\"20px\" />\r\n                <Typography align=\"left\" variant=\"body1\">Powered by Invest West. <br/> Copyright © 2021 Invest West Ltd - All Rights Reserved.</Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Footer);\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    List,\r\n    ListItem,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {NavLink} from 'react-router-dom';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport LetterAvatar from './LetterAvatar';\r\nimport ActivitiesTable from '../activities-components/ActivitiesTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport Routes from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as createBusinessProfileActions from '../../redux-store/actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as uploadFilesActions from '../../redux-store/actions/uploadFilesActions';\r\nimport * as legalDocumentsActions from '../../redux-store/actions/legalDocumentsActions';\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from '../../redux-store/actions/investorSelfCertificationAgreementsActions';\r\nimport {\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_VIDEO_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport {HashLoader} from 'react-spinners';\r\nimport OffersTable from \"../offers-table/OffersTable\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../footer/Footer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // -- old states -----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        // Create new business profile state ----------------------------------------------------------------------------\r\n        createBusinessProfile: state.createBusinessProfile,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile state ------------------------------------------------------------------------------------\r\n        originalUser: state.editUser.originalUser,\r\n        userEdited: state.editUser.userEdited,\r\n        allowEditing: state.editUser.allowEditing,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Investor self-certification agreement (for investor only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,\r\n        investorSelfCertificationAgreementCheckBox1Checked: state.manageInvestorSelfCertificationAgreement.checkBox1Ticked,\r\n        investorSelfCertificationAgreementCheckBox2Checked: state.manageInvestorSelfCertificationAgreement.checkBox2Ticked,\r\n        investorSelfCertificationAgreementCheckBox3Checked: state.manageInvestorSelfCertificationAgreement.checkBox3Ticked,\r\n        investorSelfCertificationAgreementStatementType: state.manageInvestorSelfCertificationAgreement.statementType,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents (for issuer only) --------------------------------------------------------------------\r\n        legalDocuments_userID: state.legalDocuments.userID,\r\n        userLegalDocuments: state.legalDocuments.legalDocuments,\r\n        userLegalDocumentsLoaded: state.legalDocuments.legalDocumentsLoaded,\r\n        userLegalDocumentsBeingLoaded: state.legalDocuments.legalDocumentsBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents state --------------------------------------------------------------------------------------\r\n        toBeUploadedLegalDocuments: state.uploadFiles.filesToBeUploaded.legalDocuments,\r\n        fileUploadErrorMessage: state.uploadFiles.fileUploadErrorMessage,\r\n        fileUploadErrorSnackbarOpen: state.uploadFiles.fileUploadErrorSnackbarOpen,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // These states can be also be used when creating business profile ***********\r\n        addNewDirector: state.editUser.addNewDirector,\r\n        newDirectorText: state.editUser.newDirectorText\r\n        //***************************************************************************\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        // Create new business profile functions ------------------------------------------------------------------------\r\n        handleCreateBusinessProfileTextChanged: (fieldType, event) => dispatch(createBusinessProfileActions.handleTextChanged(fieldType, event)),\r\n        searchAddress: (mode) => dispatch(createBusinessProfileActions.searchAddresses(mode)),\r\n        toggleEnterAddressManually: (field) => dispatch(createBusinessProfileActions.toggleEnterAddressManually(field)),\r\n        toggleTradingAddressSameAsRegisteredOffice: (checked) => dispatch(createBusinessProfileActions.toggleTradingAddressSameAsRegisteredOffice(checked)),\r\n        resetCreatingBusinessProfile: () => dispatch(createBusinessProfileActions.clearAllFields()),\r\n        handleRecommendedAddressSelected: (field, index) => dispatch(createBusinessProfileActions.handleRecommendedAddressSelected(field, index)),\r\n        toggleExpandBusinessProfileFillingForInvestor: () => dispatch(createBusinessProfileActions.toggleExpandBusinessProfileFillingForInvestor()),\r\n        uploadBusinessProfile: () => dispatch(createBusinessProfileActions.uploadBusinessProfile()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile functions --------------------------------------------------------------------------------\r\n        editUserLocally: (type, edit) => dispatch(editUserActions.editUserLocally(type, edit)),\r\n        toggleAddNewDirector: () => dispatch(editUserActions.toggleAddNewDirector()),\r\n        addNewDirectorTemporarily: (isEditingExistingBusinessProfile) => dispatch(editUserActions.addNewDirectorTemporarily(isEditingExistingBusinessProfile)),\r\n        deleteDirectorTemporarily: (index, isEditingExistingBusinessProfile) => dispatch(editUserActions.deleteDirectorTemporarily(index, isEditingExistingBusinessProfile)),\r\n        cancelEditingUser: (type) => dispatch(editUserActions.cancelEditingUser(type)),\r\n        commitUserProfileChanges: (type) => dispatch(editUserActions.commitUserProfileChanges(type)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement()),\r\n        setInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.setInvestorSelfCertificationAgreement()),\r\n        investorSelfCertificationAgreement_handleCheckBoxChanged: (event) => dispatch(investorSelfCertificationAgreementsActions.handleTickBoxChanged(event)),\r\n        investorSelfCertificationAgreement_handleStatementTypeChanged: (event) => dispatch(investorSelfCertificationAgreementsActions.handleStatementTypeChanged(event)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents functions ----------------------------------------------------------------------------\r\n        legalDocuments_setUserID: (userID) => dispatch(legalDocumentsActions.setUserID(userID)),\r\n        getUserLegalDocuments: () => dispatch(legalDocumentsActions.getLegalDocuments()),\r\n        startListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.startListeningForLegalDocumentsChanged()),\r\n        stopListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.stopListeningForLegalDocumentsChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents functions ----------------------------------------------------------------------------------\r\n        handleFilesChanged: (mode, files, user, project) => dispatch(uploadFilesActions.handleFilesChanged(mode, files, user, project)),\r\n        handleFileError: (error, file) => dispatch(uploadFilesActions.handleFileError(error, file)),\r\n        closeFileUploadSnackbarError: () => dispatch(uploadFilesActions.closeErrorSnackbar()),\r\n        resetErrorMessageWhenFileUploadSnackbarExited: () => dispatch(uploadFilesActions.resetErrorMessageWhenSnackbarExited()),\r\n        deleteToBeUploadedFile: (mode, index) => dispatch(uploadFilesActions.deleteToBeUploadedFile(mode, index)),\r\n        deleteUploadedFile: (mode, index, user, project) => dispatch(uploadFilesActions.deleteUploadedFile(mode, index, user, project)),\r\n        uploadFiles: (mode, user, project) => dispatch(uploadFilesActions.uploadFiles(mode, user, project)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open edit image dialog --------------------------------------------------------------------------------------\r\n        toggleEditImageDialog: (mode) => dispatch(editImageActions.toggleEditImageDialog(mode)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open video image dialog -------------------------------------------------------------------------------------\r\n        toggleEditVideoDialog: (mode) => dispatch(editVideoActions.toggleEditVideoDialog(mode))\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass Profile extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            userLegalDocumentsLoaded,\r\n\r\n            startListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        this.loadData();\r\n\r\n        if (userLegalDocumentsLoaded) {\r\n            startListeningForLegalDocumentsChanged();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForLegalDocumentsChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            originalUser,\r\n\r\n            legalDocuments_userID,\r\n            userLegalDocumentsLoaded,\r\n            userLegalDocumentsBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            legalDocuments_setUserID,\r\n            getUserLegalDocuments,\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        // if user has been set\r\n        if (originalUser) {\r\n            // if user id for reference in legal documents has not been set\r\n            if (!legalDocuments_userID && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                legalDocuments_setUserID(originalUser.id);\r\n            }\r\n\r\n            // if user id for reference in investor self-certification agreement has not been set\r\n            if (!investorSelfCertificationAgreement_userID && originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                investorSelfCertificationAgreement_setUser(originalUser.id);\r\n            }\r\n        }\r\n\r\n        // if user id for reference in legal documents has been set\r\n        if (legalDocuments_userID) {\r\n            // if legal documents for issuer have not been loaded\r\n            if (!userLegalDocumentsLoaded && !userLegalDocumentsBeingLoaded && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                getUserLegalDocuments();\r\n            }\r\n        }\r\n\r\n        // if user id for reference in investor self-certification agreement has been set\r\n        if (investorSelfCertificationAgreement_userID) {\r\n            // if the investor self-certification agreement has not been loaded\r\n            if (!investorSelfCertificationAgreementLoaded && !investorSelfCertificationAgreementBeingLoaded && originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                loadInvestorSelfCertificationAgreement();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when editing user's profile\r\n     */\r\n    handleEditUser = type => event => {\r\n        this.props.editUserLocally(type, {property: event.target.name, value: event.target.value});\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when creating a new business profile\r\n     */\r\n    handleCreateBusinessProfileTextChanged = fieldType => event => {\r\n        this.props.handleCreateBusinessProfileTextChanged(fieldType, event);\r\n    };\r\n\r\n    /**\r\n     * Handle toggling if trading address is the same of registered office\r\n     */\r\n    toggleTradingAddressSameAsRegisteredOffice = event => {\r\n        this.props.toggleTradingAddressSameAsRegisteredOffice(event.target.checked);\r\n    };\r\n\r\n    /**\r\n     * Handle files changed when uploading legal documents\r\n     */\r\n    handleFilesChanged = (mode, user) => files => {\r\n        this.props.handleFilesChanged(mode, files, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle delete a to-be-uploaded file\r\n     *\r\n     * @param mode\r\n     * @returns {Function}\r\n     */\r\n    deleteToBeUploadedFile = mode => index => {\r\n        this.props.deleteToBeUploadedFile(mode, index);\r\n    };\r\n\r\n    /**\r\n     * Handle delete an uploaded file\r\n     *\r\n     * @param mode\r\n     * @param user\r\n     * @returns {Function}\r\n     */\r\n    deleteUploadedFile = (mode, user) => index => {\r\n        this.props.deleteUploadedFile(mode, index, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle upload legal documents\r\n     */\r\n    uploadFiles = (mode, user) => {\r\n        this.props.uploadFiles(mode, user, null);\r\n    };\r\n\r\n    //----------------------------------------------------------------------------------------------------------\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        // these users will be set in the componentDidMount (happens after render) of the main component\r\n        // therefore, without this check it may lead to a crash due to null objects\r\n        if (!currentUser || !originalUser || !userEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 20 }} >\r\n                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\" >\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", userEdited.id)\r\n                                        :\r\n                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                                }\r\n                                target={currentUser.id === originalUser.id ? \"\" : \"_blank\"}\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\" >\r\n                                    <PublicIcon style={{ marginRight: 8 }} />\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            \"View profile\"\r\n                                            :\r\n                                            \"View my profile\"\r\n                                    }\r\n                                </Button>\r\n                            </NavLink>\r\n                            <OverlayTrigger\r\n                                trigger={['hover', 'focus']}\r\n                                placement=\"bottom\"\r\n                                flip\r\n                                overlay={\r\n                                    <Tooltip id={`tooltip-bottom`} >\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                \"See how this user looks to other members. Since you are a group admin, you can see more information about this user than the other ordinary members.\"\r\n                                                :\r\n                                                \"See how you look to other members.\"\r\n                                        }\r\n                                    </Tooltip>\r\n                                }>\r\n                                <InfoIcon fontSize=\"small\" style={{ marginLeft: 15, color: colors.gray_600 }} />\r\n                            </OverlayTrigger>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Personal details */}\r\n                <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        <FlexView column >\r\n                            <Typography variant=\"h6\" color=\"primary\" >Personal details</Typography>\r\n\r\n                            <Row noGutters style={{ marginTop: 20 }} >\r\n                                {/** Profile picture */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <FlexView column hAlignContent=\"center\" style={{ padding: 10 }} >\r\n                                        {\r\n                                            !originalUser.profilePicture\r\n                                            || (\r\n                                                originalUser.profilePicture\r\n                                                && originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={originalUser.firstName} lastName={originalUser.lastName} width={196} height={196} textVariant=\"h5\" />\r\n                                                :\r\n                                                <FlexView width={256} height={256} >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={\r\n                                                            originalUser.profilePicture[\r\n                                                                originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed'))\r\n                                                                ].url\r\n                                                        }\r\n                                                        style={{ width: \"100%\", maxHeight: 256, objectFit: \"contain\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={20} marginBottom={20} >\r\n                                                    <Button size=\"small\" className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\" onClick={() => this.props.toggleEditImageDialog(UPLOAD_PROFILE_PICTURE_MODE)} style={{ width: 256 }} >Update profile picture</Button>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                {/** Personal info */}\r\n                                <Col xs={12} sm={12} md={6} lg={8} >\r\n                                    <Row>\r\n                                        {/** Title */}\r\n                                        <Col xs={12} md={12} lg={{span: 6, order: 1}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Title</b></FormLabel>\r\n                                                <Select name=\"title\" value={userEdited.title} onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} input={ <OutlinedInput/> } margin=\"dense\" >\r\n                                                    {\r\n                                                        DB_CONST.USER_TITLES.map((title, index) => (\r\n                                                            <MenuItem key={index} value={title}>{title}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Empty column to reserve empty space */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 2}} >\r\n                                            {/** Empty column to reserve empty space */}\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 3}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** First name */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 4}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>First name</b></FormLabel>\r\n                                                <TextField name=\"firstName\" placeholder=\"Enter first name\" value={userEdited.firstName} margin=\"dense\" variant=\"outlined\" onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} error={userEdited.firstName.trim().length === 0} />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Last name */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 5}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Last name</b></FormLabel>\r\n                                                <TextField name=\"lastName\" placeholder=\"Enter last name\" value={userEdited.lastName} margin=\"dense\" variant=\"outlined\" onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} error={userEdited.lastName.trim().length === 0} />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 6}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** Email */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 7}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Email</b></FormLabel>\r\n                                                <TextField\r\n                                                    name=\"email\"\r\n                                                    placeholder=\"Enter email\"\r\n                                                    value={userEdited.email}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    disabled={true} // --> do not allow the users (including the admins) to change the email field for now.\r\n                                                    error={userEdited.email.trim().length === 0}\r\n                                                />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 7}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** LinkedIn */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 8}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>LinkedIn</b></FormLabel>\r\n                                                <TextField\r\n                                                    name=\"linkedin\"\r\n                                                    placeholder=\"Enter your LinkedIn profile\"\r\n                                                    value={userEdited.hasOwnProperty('linkedin') ? userEdited.linkedin : ''}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    error={!utils.isValidLinkedInURL(userEdited.linkedin)}\r\n                                                />\r\n                                            </FormControl>\r\n                                            {\r\n                                                utils.isValidLinkedInURL(userEdited.linkedin)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FormHelperText className={css(sharedStyles.error_text)} >Invalid LinkedIn URL</FormHelperText>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n                                    <FlexView hAlignContent=\"right\" marginTop={30} >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={() => this.props.cancelEditingUser(editUserActions.RESET_PERSONAL_INFORMATION)} >Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                disabled={\r\n                                                    (\r\n                                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                        && !currentUser.superAdmin\r\n                                                        && !allowEditing\r\n                                                    )\r\n                                                    ||\r\n                                                    userEdited.firstName.trim().length === 0\r\n                                                    || userEdited.lastName.trim().length === 0\r\n                                                    ||\r\n                                                    (\r\n                                                        userEdited.title === originalUser.title\r\n                                                        && userEdited.firstName === originalUser.firstName\r\n                                                        && userEdited.lastName === originalUser.lastName\r\n                                                        && userEdited.email === originalUser.email\r\n                                                        && (\r\n                                                            (originalUser.linkedin && userEdited.linkedin && userEdited.linkedin === originalUser.linkedin)\r\n                                                            ||\r\n                                                            (!userEdited.linkedin && !originalUser.linkedin)\r\n                                                            ||\r\n                                                            (userEdited.linkedin && !originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                            ||\r\n                                                            (userEdited.linkedin && originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                        )\r\n                                                    )\r\n                                                }\r\n                                                onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_PERSONAL_INFORMATION_CHANGES)}\r\n                                            >\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && !currentUser.superAdmin\r\n                                        && !allowEditing\r\n                                            ?\r\n                                            <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }} >This user is not a home member of your group. So, you cannot edit their profile.</Typography>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ marginTop: 20 }} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Business profile */}\r\n                <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        {\r\n                            this.renderBusinessProfile()\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Investor self-certification agreement */}\r\n                {\r\n                    originalUser.type !== DB_CONST.TYPE_INVESTOR\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ paddingLeft: 24, paddingRight: 24, paddingTop: 24, paddingBottom: 35 }} >\r\n                                {\r\n                                    this.renderSelfCertificationAgreement()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} md={12} lg={12} >\r\n                                <Divider/>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Fundraising summary - only available for super user who is viewing the profile of an issuer or an investor */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                                        <FlexView column >\r\n                                            <Typography variant=\"h6\" color=\"primary\" >Fundraising summary</Typography>\r\n\r\n                                            <FlexView column marginTop={20} >\r\n                                                <OffersTable directTableUser={originalUser} />\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} md={12} lg={12} style={{ marginTop: 20 }} >\r\n                                        <Divider/>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                }\r\n\r\n\r\n                {/*/!** Block/Remove user - only available for admins *!/*/}\r\n                {/*{*/}\r\n                {/*    currentUser.type !== DB_CONST.TYPE_ADMIN*/}\r\n                {/*        ?*/}\r\n                {/*        null*/}\r\n                {/*        :*/}\r\n                {/*        <Row*/}\r\n                {/*            noGutters*/}\r\n                {/*            style={{*/}\r\n                {/*                backgroundColor: colors.white*/}\r\n                {/*            }}*/}\r\n                {/*        >*/}\r\n                {/*            <Col*/}\r\n                {/*                xs={12}*/}\r\n                {/*                md={12}*/}\r\n                {/*                lg={12}*/}\r\n                {/*                style={{*/}\r\n                {/*                    padding: 24*/}\r\n                {/*                }}*/}\r\n                {/*            >*/}\r\n                {/*                <FlexView*/}\r\n                {/*                    column*/}\r\n                {/*                >*/}\r\n                {/*                    <Typography*/}\r\n                {/*                        variant=\"h6\"*/}\r\n                {/*                        color=\"primary\"*/}\r\n                {/*                    >*/}\r\n                {/*                        Advanced*/}\r\n                {/*                    </Typography>*/}\r\n\r\n                {/*                    <Paper*/}\r\n                {/*                        style={{*/}\r\n                {/*                            overflowX: \"auto\",*/}\r\n                {/*                            marginTop: 30,*/}\r\n                {/*                            padding: 20,*/}\r\n                {/*                            backgroundColor: colors.kick_starter_background_color_1*/}\r\n                {/*                        }}*/}\r\n                {/*                    >*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            color=\"error\"*/}\r\n                {/*                            variant=\"h6\"*/}\r\n                {/*                            paragraph*/}\r\n                {/*                        >*/}\r\n                {/*                            Block user*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            variant=\"subtitle1\"*/}\r\n                {/*                            paragraph*/}\r\n                {/*                        >*/}\r\n                {/*                            Block the user will prevent them from*/}\r\n                {/*                            participating in all Invest West activities.*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                        <Button*/}\r\n                {/*                            color=\"secondary\"*/}\r\n                {/*                            variant=\"contained\"*/}\r\n                {/*                            disabled*/}\r\n                {/*                        >*/}\r\n                {/*                            Block user*/}\r\n                {/*                        </Button>*/}\r\n                {/*                        <Typography*/}\r\n                {/*                            variant=\"body2\"*/}\r\n                {/*                            color=\"error\"*/}\r\n                {/*                            style={{*/}\r\n                {/*                                marginTop: 6*/}\r\n                {/*                            }}*/}\r\n                {/*                        >*/}\r\n                {/*                            This function is not available in this version.*/}\r\n                {/*                        </Typography>*/}\r\n                {/*                    </Paper>*/}\r\n                {/*                </FlexView>*/}\r\n                {/*            </Col>*/}\r\n\r\n                {/*            {*/}\r\n                {/*                currentUser.type !== DB_CONST.TYPE_ADMIN*/}\r\n                {/*                    ?*/}\r\n                {/*                    null*/}\r\n                {/*                    :*/}\r\n                {/*                    <Col*/}\r\n                {/*                        xs={12}*/}\r\n                {/*                        md={12}*/}\r\n                {/*                        lg={12}*/}\r\n                {/*                        style={{*/}\r\n                {/*                            marginTop: 20*/}\r\n                {/*                        }}*/}\r\n                {/*                    >*/}\r\n                {/*                        <Divider/>*/}\r\n                {/*                    </Col>*/}\r\n                {/*            }*/}\r\n                {/*        </Row>*/}\r\n                {/*}*/}\r\n\r\n                {/** User's activities - only available for admins */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                            <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                                <FlexView column >\r\n                                    <Typography variant=\"h6\" color=\"primary\" >Activities</Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView column marginTop={20} >\r\n                                    <ActivitiesTable/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                <Row noGutters >\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Footer position=\"relative\" />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render self-certification agreement for investor\r\n     */\r\n    renderSelfCertificationAgreement = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            originalUser,\r\n            investorSelfCertificationAgreement,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementCheckBox1Checked,\r\n            investorSelfCertificationAgreementCheckBox2Checked,\r\n            investorSelfCertificationAgreementCheckBox3Checked,\r\n            investorSelfCertificationAgreementStatementType,\r\n\r\n            investorSelfCertificationAgreement_handleCheckBoxChanged,\r\n            investorSelfCertificationAgreement_handleStatementTypeChanged,\r\n            setInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            return null;\r\n        }\r\n\r\n        if (!investorSelfCertificationAgreementLoaded) {\r\n            return (\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" >Self-certification agreement</Typography>\r\n\r\n                    <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={25} >\r\n                        <HashLoader\r\n                            color={\r\n                                !groupProperties\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    groupProperties.settings.primaryColor\r\n                            }\r\n                        />\r\n                    </FlexView>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        // investor has agreed to the terms of self-certification\r\n        if (investorSelfCertificationAgreement) {\r\n            return (\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" color=\"primary\" align=\"left\" >Self-certification agreement</Typography>\r\n\r\n                    <Typography variant=\"subtitle1\" align=\"left\" style={{ marginTop: 25, marginBottom: 35 }} >\r\n                        {currentUser.type === DB_CONST.TYPE_ADMIN ? \"This investor has\" : \"You have\"} agreed to\r\n                        the statement\r\n                        of <b>{investorSelfCertificationAgreement.type === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT ? \"High net worth investor \" : \"Self-certified sophisticated investor \"}</b>\r\n                        on {utils.dateInReadableFormat(investorSelfCertificationAgreement.agreedDate)}.\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <Typography variant=\"h6\" color=\"error\" align=\"left\" paragraph >Self-certification agreement</Typography>\r\n\r\n                <Typography variant=\"body1\" align=\"left\" paragraph >\r\n                    {\r\n                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            \"To access the functionality of this site, this user must be a self-certified investor.\"\r\n                            :\r\n                            \"To access the functionality of this site, you must be a self-certified investor. Please select the appropriate statement below and read carefully.\"\r\n                    }\r\n                </Typography>\r\n\r\n                <Select\r\n                    name=\"statementType\"\r\n                    value={investorSelfCertificationAgreementStatementType}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    input={<OutlinedInput/>}\r\n                    onChange={investorSelfCertificationAgreement_handleStatementTypeChanged}\r\n                >\r\n                    <MenuItem value={DB_CONST.SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT} >Self-certified sophisticated investor statement</MenuItem>\r\n                    <MenuItem value={DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT} >High net worth investor statement</MenuItem>\r\n                </Select>\r\n\r\n                <FlexView column marginTop={35} style={{ maxHeight: 500, overflowY: \"auto\", border: `1px solid ${colors.gray_300}`, padding: 18 }} >\r\n                    {/** T&Cs title */}\r\n                    <Typography variant=\"h6\" align=\"left\" paragraph >\r\n                        <b>\r\n                            {\r\n                                investorSelfCertificationAgreementStatementType === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT\r\n                                    ?\r\n                                    \"Statement for self-certified high net worth individual\"\r\n                                    :\r\n                                    \"Statement for a self-certified sophisticated investor\"\r\n                            }\r\n                        </b>\r\n                    </Typography>\r\n\r\n                    {/** T&Cs text */}\r\n                    {\r\n                        investorSelfCertificationAgreementStatementType === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT\r\n                            ?\r\n                            <Typography variant=\"body1\" align=\"left\" component=\"span\" >\r\n                                I declare that I am a certified high net worth individual for the purposes of the\r\n                                Financial Services and Markets Act 2000 (Financial Promotion) Order 2005.\r\n                                <br/><br/>\r\n                                I understand that this means:\r\n                                <ol type=\"a\" >\r\n                                    <li>I can receive financial promotions that may not have been approved by a person authorised by the Financial Conduct Authority;</li>\r\n                                    <li>the content of such financial promotions may not conform to rules issued by the Financial Conduct Authority;</li>\r\n                                    <li>by signing this statement I may lose significant rights;</li>\r\n                                    <li>\r\n                                        I may have no right to complain to either of the following:-\r\n                                        <br/>\r\n                                        <ol type=\"i\" >\r\n                                            <li>the Financial Conduct Authority; or</li>\r\n                                            <li>the Financial Ombudsman Scheme</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>I may have no right to seek compensation from the Financial Services Compensation Scheme.</li>\r\n                                </ol>\r\n\r\n                                I am a certified high net worth individual because <b><u>at least one of the following\r\n                                applies:</u></b>\r\n\r\n                                <ol type=\"a\" >\r\n                                    <li>I had, during the financial year immediately preceding today's date, an annual income to the value of £100,000 or more;</li>\r\n                                    <li>\r\n                                        I held, throughout the financial year immediately preceding today's date, net\r\n                                        assets to the value of £250,000 or more. Net assets for these purposes do not\r\n                                        include:-\r\n                                        <ol type=\"i\">\r\n                                            <li>the property which is my primary residence or any loan secured on that residence;</li>\r\n                                            <li>any rights of mine under a qualifying contract of insurance within the meaning of the Financial Services and Markets Act 2000 (Regulated Activities) Order 2001; or</li>\r\n                                            <li>any benefits (in the form of pensions or otherwise) which are payable on the termination of my service or on my death or retirement and to which I am (or my dependants are), or may be, entitled.</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                </ol>\r\n                            </Typography>\r\n                            :\r\n                            <Typography variant=\"body1\" align=\"left\" component=\"span\" >\r\n                                I declare that I am a self-certified sophisticated investor for the purposes of the\r\n                                Financial Services and Markets Act (Financial Promotion) Order 2005.\r\n                                <br/><br/>\r\n                                I understand that this means:\r\n                                <ol type=\"a\" >\r\n                                    <li>I can receive financial promotions that may not have been approved by a person authorised by the Financial Conduct Authority;</li>\r\n                                    <li>the content of such financial promotions may not conform to rules issued by the Financial Conduct Authority;</li>\r\n                                    <li>by signing this statement I may lose significant rights;</li>\r\n                                    <li>\r\n                                        I may have no right to complain to either of the following:\r\n                                        <ol type=\"i\" >\r\n                                            <li>the Financial Conduct Authority; or</li>\r\n                                            <li>the Financial Ombudsman Scheme;</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>I may have no right to seek compensation from the Financial Services Compensation Scheme.</li>\r\n                                </ol>\r\n\r\n                                I am a self-certified sophisticated investor because <b><u>at least one of the following\r\n                                applies:</u></b>\r\n\r\n                                <ol type=\"a\" >\r\n                                    <li>I am a member of a network or syndicate of business angels and have been so for at least the last six months prior to today's date;</li>\r\n                                    <li>I have made more than one investment in an unlisted company in the two years prior to today's date;</li>\r\n                                    <li>I am working, or have worked in the two years prior to today's date, in a professional capacity in the private equity sector, or in the provision of finance for small and medium enterprises;</li>\r\n                                    <li>I am currently, or have been in the two years prior to today's date, a director of a company with an annual turnover of at least £1 million.</li>\r\n                                </ol>\r\n                            </Typography>\r\n                    }\r\n                    {/** Divider */}\r\n                    <Divider style={{ marginTop: 30, marginBottom: 18 }} />\r\n\r\n                    <FormControl component=\"fieldset\" fullWidth >\r\n                        <FormGroup row={true} >\r\n                            {/** Checkbox 1 */}\r\n                            <FormControlLabel\r\n                                style={{ width: \"100%\" }}\r\n                                control={\r\n                                    <Checkbox name=\"checkBox1Ticked\" color=\"primary\" value={investorSelfCertificationAgreementCheckBox1Checked} checked={investorSelfCertificationAgreementCheckBox1Checked} onChange={investorSelfCertificationAgreement_handleCheckBoxChanged} />\r\n                                }\r\n                                label={\r\n                                    <Typography variant=\"body1\" align=\"left\"><b>I accept that I can lose my property and other assets from making investment decisions based on financial promotions.</b></Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n\r\n                            {/** Checkbox 2 */}\r\n                            <FormControlLabel\r\n                                style={{ width: \"100%\" }}\r\n                                control={\r\n                                    <Checkbox\r\n                                        name=\"checkBox2Ticked\"\r\n                                        color=\"primary\"\r\n                                        value={investorSelfCertificationAgreementCheckBox2Checked}\r\n                                        checked={investorSelfCertificationAgreementCheckBox2Checked}\r\n                                        onChange={investorSelfCertificationAgreement_handleCheckBoxChanged}\r\n                                    />\r\n                                }\r\n                                label={\r\n                                    <Typography variant=\"body1\" align=\"left\" >I am aware that it is open to me to seek advice from someone who specialises in advising on investments.</Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n\r\n                            {/** Checkbox 3 */}\r\n                            <FormControlLabel\r\n                                style={{ width: \"100%\" }}\r\n                                control={\r\n                                    <Checkbox name=\"checkBox3Ticked\" color=\"primary\" value={investorSelfCertificationAgreementCheckBox3Checked} checked={investorSelfCertificationAgreementCheckBox3Checked} onChange={investorSelfCertificationAgreement_handleCheckBoxChanged} />\r\n                                }\r\n                                label={\r\n                                    <Typography variant=\"body1\" align=\"left\" >\r\n                                        <b>\r\n                                            I have read and agree to the&nbsp;\r\n                                            <CustomLink url={Routes.constructPublicRoute(\"termsOfUse\")} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"nav-link\" childComponent=\"Terms of Use\" />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink url={Routes.constructPublicRoute(\"privacyPolicy\")} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"nav-link\" childComponent=\"Privacy Policy\" />\r\n                                            .\r\n                                        </b>\r\n                                    </Typography>\r\n                                }\r\n                                labelPlacement=\"end\"\r\n                            />\r\n                        </FormGroup>\r\n                    </FormControl>\r\n                </FlexView>\r\n\r\n                <FlexView column grow={1} hAlignContent=\"right\" marginTop={40} marginBottom={20} >\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={setInvestorSelfCertificationAgreement}\r\n                        disabled={\r\n                            !investorSelfCertificationAgreementCheckBox1Checked\r\n                            || !investorSelfCertificationAgreementCheckBox2Checked\r\n                            || !investorSelfCertificationAgreementCheckBox3Checked\r\n                            || currentUser.type === DB_CONST.TYPE_ADMIN\r\n                        }\r\n                    >\r\n                        Submit\r\n                    </Button>\r\n                    {\r\n                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }}>You cannot do this on behalf of the investor.</Typography>\r\n                            :\r\n                            null\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render business profile section\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderBusinessProfile = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing,\r\n\r\n            clubAttributes,\r\n\r\n            createBusinessProfile,\r\n            addNewDirector,\r\n            newDirectorText,\r\n\r\n            searchAddress,\r\n            toggleEnterAddressManually,\r\n            resetCreatingBusinessProfile,\r\n            handleRecommendedAddressSelected,\r\n            toggleExpandBusinessProfileFillingForInvestor,\r\n            uploadBusinessProfile\r\n        } = this.props;\r\n\r\n        // user has already uploaded their business profile\r\n        if (originalUser.BusinessProfile) {\r\n            return (\r\n                /** Business profile has been uploaded */\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                    <Row noGutters style={{ marginTop: 20 }} >\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ padding: 10, width: \"100%\" }} >\r\n                            <FlexView column hAlignContent=\"center\" >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                            && originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You haven't uploaded your company logo\"\r\n                                                        :\r\n                                                        \"This user hasn't uploaded company logo\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <FlexView width={256} height={256} >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        originalUser.BusinessProfile.logo[originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{ width: \"100%\", maxHeight: 256, objectFit: \"contain\" }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} >\r\n                                                <Button\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    fullWidth\r\n                                                    onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_MODE)}\r\n                                                    style={{ width: 256 }}\r\n                                                >Update logo\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                <FlexView column marginTop={80} marginBottom={20} width=\"100%\" hAlignContent=\"center\" style={{ paddingLeft: 25, paddingRight: 25 }} >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                            && originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You have no introduction video\"\r\n                                                        :\r\n                                                        \"This user has no introduction video\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <ReactPlayer\r\n                                                url={\r\n                                                    originalUser.BusinessProfile.video[\r\n                                                        originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed'))\r\n                                                        ].url\r\n                                                }\r\n                                                width=\"100%\"\r\n                                                height=\"100%\"\r\n                                                controls={true}\r\n                                                playing={false}\r\n                                            />\r\n                                    }\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20}>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_MODE)}\r\n                                                    style={{ width: 256 }}\r\n                                                >Update introduction video\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={8} >\r\n                            {/** Company name */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Company name</b></FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyName\"\r\n                                        placeholder=\"Enter company name\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('companyName') ? userEdited.BusinessProfile.companyName : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Registration number */}\r\n                            <FlexView column >\r\n                                <FormControl>\r\n                                    <FormLabel><b>Registration number</b></FormLabel>\r\n                                    <TextField\r\n                                        name=\"registrationNo\"\r\n                                        placeholder=\"Enter company registration number\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('registrationNo') ? userEdited.BusinessProfile.registrationNo : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        disabled={currentUser.type !== DB_CONST.TYPE_ADMIN}\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Registered office */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Registered office</b></FormLabel>\r\n                                    <FormGroup>\r\n                                        <FlexView column>\r\n                                            <TextField\r\n                                                name=\"address1\"\r\n                                                placeholder=\"Address 1\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address1\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                error={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                    && userEdited.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address2\"\r\n                                                placeholder=\"Address 2\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address2\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address3\"\r\n                                                placeholder=\"Address 3\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.registeredOffice.address3\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <Row>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"townCity\"\r\n                                                        placeholder=\"Town/City\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.registeredOffice.townCity\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                            && userEdited.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"postcode\"\r\n                                                        placeholder=\"Postcode\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.registeredOffice.postcode.toUpperCase()\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('registeredOffice')\r\n                                                            && userEdited.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FlexView>\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Trading address */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Trading address</b></FormLabel>\r\n                                    <FormGroup>\r\n                                        <FlexView column>\r\n                                            <TextField\r\n                                                name=\"address1\"\r\n                                                placeholder=\"Address 1\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address1\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                error={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                    && userEdited.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address2\"\r\n                                                placeholder=\"Address 2\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address2\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <TextField\r\n                                                name=\"address3\"\r\n                                                placeholder=\"Address 3\"\r\n                                                value={\r\n                                                    userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                        ?\r\n                                                        userEdited.BusinessProfile.tradingAddress.address3\r\n                                                        :\r\n                                                        ''\r\n                                                }\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                fullWidth\r\n                                                onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                            />\r\n                                            <Row>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"townCity\"\r\n                                                        placeholder=\"Town/City\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.tradingAddress.townCity\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                            && userEdited.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <TextField\r\n                                                        name=\"postcode\"\r\n                                                        placeholder=\"Postcode\"\r\n                                                        value={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                                ?\r\n                                                                userEdited.BusinessProfile.tradingAddress.postcode.toUpperCase()\r\n                                                                :\r\n                                                                ''\r\n                                                        }\r\n                                                        margin=\"dense\"\r\n                                                        variant=\"outlined\"\r\n                                                        fullWidth\r\n                                                        onChange={this.handleEditUser(editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE)}\r\n                                                        error={\r\n                                                            userEdited.BusinessProfile.hasOwnProperty('tradingAddress')\r\n                                                            && userEdited.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FlexView>\r\n                                    </FormGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {\r\n                                !clubAttributes\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        <FlexView>\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Sector</b></FormLabel>\r\n                                                <Select\r\n                                                    name=\"sector\"\r\n                                                    value={\r\n                                                        userEdited.BusinessProfile.hasOwnProperty('sector')\r\n                                                            ?\r\n                                                            userEdited.BusinessProfile.sector\r\n                                                            :\r\n                                                            ''\r\n                                                    }\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                                    input={<OutlinedInput/>}\r\n                                                    margin=\"dense\"\r\n                                                >\r\n\r\n                                                    {\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </FlexView>\r\n                                    )\r\n                            }\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Directors */}\r\n                            <FlexView column>\r\n                                <FormControl\r\n                                    error={\r\n                                        userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                        && userEdited.BusinessProfile.directors.length === 0\r\n                                    }\r\n                                >\r\n                                    <FormLabel>\r\n                                        <b>Directors</b>\r\n                                    </FormLabel>\r\n\r\n                                    <Row noGutters>\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            {\r\n                                                !userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <List>\r\n                                                        {\r\n                                                            userEdited.BusinessProfile.directors.map((director, index) => (\r\n                                                                <ListItem\r\n                                                                    key={index}\r\n                                                                >\r\n                                                                    <ListItemText>\r\n                                                                        {director}\r\n                                                                    </ListItemText>\r\n                                                                    <ListItemSecondaryAction>\r\n                                                                        <IconButton onClick={() => this.props.deleteDirectorTemporarily(index, true)} >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                    </ListItemSecondaryAction>\r\n                                                                </ListItem>\r\n                                                            ))\r\n                                                        }\r\n                                                    </List>\r\n                                            }\r\n\r\n                                            {\r\n                                                !userEdited.BusinessProfile.hasOwnProperty('directors')\r\n                                                || (userEdited.BusinessProfile.hasOwnProperty('directors') && userEdited.BusinessProfile.directors.length === 0)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Divider style={{ marginTop: 10, marginBottom: 16 }} />\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6} >\r\n                                            {\r\n                                                !addNewDirector\r\n                                                    ?\r\n                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} >\r\n                                                        <AddIcon fontSize=\"small\" style={{ marginRight: 4 }} />\r\n                                                        Add director\r\n                                                    </Button>\r\n                                                    :\r\n                                                    <FlexView column >\r\n                                                        <TextField\r\n                                                            placeholder=\"Enter director's name\"\r\n                                                            name=\"newDirectorText\"\r\n                                                            value={newDirectorText}\r\n                                                            fullWidth\r\n                                                            variant=\"outlined\"\r\n                                                            onChange={this.handleEditUser(editUserActions.ADDING_NEW_DIRECTOR)}\r\n                                                            margin=\"dense\"\r\n                                                        />\r\n\r\n                                                        <FlexView marginTop={8} hAlignContent=\"right\" >\r\n                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} style={{ marginRight: 8 }} >Cancel</Button>\r\n                                                            <Button\r\n                                                                variant=\"contained\"\r\n                                                                size=\"small\"\r\n                                                                color=\"primary\"\r\n                                                                className={css(sharedStyles.no_text_transform)}\r\n                                                                onClick={() => this.props.addNewDirectorTemporarily(true)}\r\n                                                                disabled={newDirectorText.trim().length === 0}\r\n                                                            >\r\n                                                                Add\r\n                                                            </Button>\r\n                                                        </FlexView>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n                            {/** Website */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Company website</b>\r\n                                    </FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyWebsite\"\r\n                                        placeholder=\"Enter company website\"\r\n                                        value={\r\n                                            userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                ?\r\n                                                userEdited.BusinessProfile.companyWebsite\r\n                                                :\r\n                                                ''\r\n                                        }\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={\r\n                                            (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                        }\r\n                                    />\r\n                                </FormControl>\r\n                                {\r\n                                    !userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length === 0\r\n                                    )\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                        && utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                    )\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\" > Invalid website URL </Typography>\r\n                                }\r\n                            </FlexView>\r\n\r\n                            <FlexView hAlignContent=\"right\" marginTop={30} >\r\n                                <FlexView marginRight={20} >\r\n                                    <Button variant=\"outlined\" color=\"primary\" onClick={() => this.props.cancelEditingUser(editUserActions.RESET_BUSINESS_PROFILE)}>Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={\r\n                                            (\r\n                                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                && !currentUser.superAdmin\r\n                                                && !allowEditing\r\n                                            )\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.address1.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.townCity.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('registeredOffice') && userEdited.BusinessProfile.registeredOffice.postcode.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.address1.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.townCity.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('tradingAddress') && userEdited.BusinessProfile.tradingAddress.postcode.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('directors') && userEdited.BusinessProfile.directors.length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite') && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                            || JSON.stringify(originalUser.BusinessProfile) === JSON.stringify(userEdited.BusinessProfile)\r\n                                        }\r\n                                        onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_BUSINESS_PROFILE_CHANGES)}\r\n                                    >\r\n                                        Save\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                            {\r\n                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                && !currentUser.superAdmin\r\n                                && !allowEditing\r\n                                    ?\r\n                                    <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }}>This user is not a home member of your group. So, you cannot edit their profile.</Typography>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            );\r\n        }\r\n        // user has not uploaded their business profile yet\r\n        else {\r\n            // if the user is not a super user\r\n            if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n                return (\r\n                    // user has not uploaded Business profile yet\r\n                    <FlexView column >\r\n                        <FlexView column >\r\n                            <Typography variant=\"h6\" color=\"primary\" style={{ marginBottom: 4 }} >Business profile</Typography>\r\n                            {\r\n                                originalUser.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Row noGutters >\r\n                                        <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}} >\r\n                                            <Button\r\n                                                fullWidth\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                color={\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ? \"primary\"\r\n                                                        : \"secondary\"\r\n                                                }\r\n                                                variant=\"outlined\"\r\n                                                size=\"medium\"\r\n                                                onClick={toggleExpandBusinessProfileFillingForInvestor}\r\n                                                style={{ marginTop: 25, marginBottom: 20 }}\r\n                                            >\r\n                                                {\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ?\r\n                                                        \"Create company profile (optional)\"\r\n                                                        :\r\n                                                        \"Cancel creating company profile\"\r\n                                                }\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </FlexView>\r\n\r\n                        {\r\n                            originalUser.type === DB_CONST.TYPE_ISSUER\r\n                            || createBusinessProfile.expandBusinessProfileFilling\r\n                                ?\r\n                                // start filling in Business profile\r\n                                <FlexView column marginTop={20} >\r\n                                    {/** Company name */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Company name</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company name\"\r\n                                                name=\"companyName\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyName}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Registration number */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Registration number</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company registration number\"\r\n                                                name=\"registrationNo\"\r\n                                                value={createBusinessProfile.BusinessProfile.registrationNo}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Registered office */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <Container fluid style={{ padding: 0 }} >\r\n                                                <Row noGutters >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        <FormLabel>\r\n                                                            <b>Registered office</b>\r\n                                                        </FormLabel>\r\n                                                        <FormHelperText>Enter a UK postcode to search for address or click on \"Enter address manually\" to enter your address manually.</FormHelperText>\r\n                                                        <FormGroup>\r\n                                                            {/** Search postcode field */}\r\n                                                            <FlexView>\r\n                                                                <TextField\r\n                                                                    placeholder=\"Enter UK postcode\"\r\n                                                                    name=\"registeredOfficeSearchPostcode\"\r\n                                                                    value={createBusinessProfile.registeredOfficeSearchPostcode.toUpperCase()}\r\n                                                                    fullWidth\r\n                                                                    variant=\"outlined\"\r\n                                                                    margin=\"dense\"\r\n                                                                    onChange={\r\n                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED)\r\n                                                                    }\r\n                                                                    InputProps={{\r\n                                                                        startAdornment:\r\n                                                                            <InputAdornment position=\"start\" >\r\n                                                                                <IconButton\r\n                                                                                    disableRipple\r\n                                                                                    style={{ width: 48, height: 48 }}\r\n                                                                                    onClick={() => searchAddress(createBusinessProfileActions.SEARCHING_REGISTERED_OFFICE_ADDRESSES)}\r\n                                                                                >\r\n                                                                                    <SearchIcon/>\r\n                                                                                </IconButton>\r\n                                                                            </InputAdornment>\r\n                                                                    }}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {\r\n                                                                !createBusinessProfile.registeredOfficeEnterAddressManually\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    <FlexView column >\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 1:*\"\r\n                                                                            name=\"address1\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address1}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            required\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 2:\"\r\n                                                                            name=\"address2\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address2}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Address 3:\"\r\n                                                                            name=\"address3\"\r\n                                                                            value={createBusinessProfile.BusinessProfile.registeredOffice.address3}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                        />\r\n\r\n                                                                        <Row\r\n                                                                        >\r\n                                                                            <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Town/City:*\"\r\n                                                                                    name=\"townCity\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.registeredOffice.townCity}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n                                                                            </Col>\r\n                                                                            <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Postcode:*\"\r\n                                                                                    name=\"postcode\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.registeredOffice.postcode.toUpperCase()}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n                                                                            </Col>\r\n                                                                        </Row>\r\n                                                                    </FlexView>\r\n                                                            }\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                <Row\r\n                                                    noGutters\r\n                                                >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        {\r\n                                                            createBusinessProfile.registeredOfficeRecommendedAddresses\r\n                                                            && createBusinessProfile.registeredOfficeRecommendedAddresses.error\r\n                                                                ?\r\n                                                                <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{ marginTop: 4, marginBottom: 4 }} >Sorry, we can't find your address, please check the details entered and search again, alternatively you can enter your address manually below.</Typography>\r\n                                                                :\r\n                                                                null\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            !createBusinessProfile.registeredOfficeRecommendedAddresses\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                // error happened while finding addresses\r\n                                                                createBusinessProfile.registeredOfficeRecommendedAddresses.error\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    <List\r\n                                                                        className={css(styles.address_list)}\r\n                                                                    >\r\n                                                                        {\r\n                                                                            createBusinessProfile.registeredOfficeRecommendedAddresses.formattedAddresses.map((address, index) => (\r\n                                                                                <ListItem\r\n                                                                                    button\r\n                                                                                    key={index}\r\n                                                                                    onClick={() => handleRecommendedAddressSelected(createBusinessProfileActions.SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS, index)}\r\n                                                                                >\r\n                                                                                    <ListItemText primary={address} />\r\n                                                                                </ListItem>\r\n                                                                            ))\r\n                                                                        }\r\n                                                                    </List>\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            createBusinessProfile.registeredOfficeEnterAddressManually\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography\r\n                                                                    variant=\"body2\"\r\n                                                                    color=\"primary\"\r\n                                                                    align=\"left\"\r\n                                                                    className={css(styles.enter_address_manually)}\r\n                                                                    onClick={() => toggleEnterAddressManually(createBusinessProfileActions.TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY)}\r\n                                                                >\r\n                                                                    Enter address manually.\r\n                                                                </Typography>\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Container>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Trading address */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <Container fluid style={{ padding: 0 }} >\r\n                                                <Row noGutters >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        <FormLabel>\r\n                                                            <b>Trading address</b>\r\n                                                        </FormLabel>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                <Row noGutters >\r\n                                                    <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                        <FormGroup>\r\n                                                            <FormControlLabel\r\n                                                                label=\"Same as registered office address\"\r\n                                                                labelPlacement=\"end\"\r\n                                                                control={\r\n                                                                    <Checkbox checked={createBusinessProfile.tradingAddressSameAsRegisteredOffice} color=\"primary\" onChange={this.toggleTradingAddressSameAsRegisteredOffice} />\r\n                                                                }\r\n                                                            />\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                </Row>\r\n\r\n                                                {\r\n                                                    createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Row noGutters >\r\n                                                            <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                                <FormGroup>\r\n                                                                    <FormHelperText>Enter a UK postcode to search for address or click on \"Enter address manually\" to enter your address manually.</FormHelperText>\r\n                                                                    <FlexView>\r\n                                                                        <TextField\r\n                                                                            placeholder=\"Enter UK postcode\"\r\n                                                                            name=\"tradingAddressSearchPostcode\"\r\n                                                                            value={createBusinessProfile.tradingAddressSearchPostcode.toUpperCase()}\r\n                                                                            fullWidth\r\n                                                                            variant=\"outlined\"\r\n                                                                            margin=\"dense\"\r\n                                                                            onChange={\r\n                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED)\r\n                                                                            }\r\n                                                                            InputProps={{\r\n                                                                                startAdornment:\r\n                                                                                    <InputAdornment position=\"start\" >\r\n                                                                                        <IconButton disableRipple style={{ width: 48, height: 48 }} onClick={() => searchAddress(createBusinessProfileActions.SEARCHING_TRADING_ADDRESSES)} >\r\n                                                                                            <SearchIcon/>\r\n                                                                                        </IconButton>\r\n                                                                                    </InputAdornment>\r\n                                                                            }}\r\n                                                                        />\r\n                                                                    </FlexView>\r\n\r\n                                                                    {\r\n                                                                        !createBusinessProfile.tradingAddressEnterAddressManually\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column >\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 1:*\"\r\n                                                                                    name=\"address1\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address1}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 2:\"\r\n                                                                                    name=\"address2\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address2}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <TextField\r\n                                                                                    placeholder=\"Address 3:\"\r\n                                                                                    name=\"address3\"\r\n                                                                                    value={createBusinessProfile.BusinessProfile.tradingAddress.address3}\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    margin=\"dense\"\r\n                                                                                    onChange={\r\n                                                                                        this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                    }\r\n                                                                                />\r\n\r\n                                                                                <Row\r\n                                                                                >\r\n                                                                                    <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                        <TextField\r\n                                                                                            placeholder=\"Town/City:*\"\r\n                                                                                            name=\"townCity\"\r\n                                                                                            value={createBusinessProfile.BusinessProfile.tradingAddress.townCity}\r\n                                                                                            fullWidth\r\n                                                                                            variant=\"outlined\"\r\n                                                                                            required\r\n                                                                                            margin=\"dense\"\r\n                                                                                            onChange={\r\n                                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                            }\r\n                                                                                        />\r\n                                                                                    </Col>\r\n                                                                                    <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                                                        <TextField\r\n                                                                                            placeholder=\"Postcode:*\"\r\n                                                                                            name=\"postcode\"\r\n                                                                                            value={createBusinessProfile.BusinessProfile.tradingAddress.postcode.toUpperCase()}\r\n                                                                                            fullWidth\r\n                                                                                            variant=\"outlined\"\r\n                                                                                            required\r\n                                                                                            margin=\"dense\"\r\n                                                                                            onChange={\r\n                                                                                                this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                                                            }\r\n                                                                                        />\r\n                                                                                    </Col>\r\n                                                                                </Row>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                }\r\n\r\n                                                {\r\n                                                    createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Row noGutters >\r\n                                                            <Col xs={12} sm={12} md={6} lg={4} >\r\n                                                                {\r\n                                                                    createBusinessProfile.tradingAddressRecommendedAddresses\r\n                                                                    && createBusinessProfile.tradingAddressRecommendedAddresses.error\r\n                                                                        ?\r\n                                                                        <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{ marginTop: 4, marginBottom: 4 }} >Sorry, we can't find your address, please check the details entered and search again, alternatively you can enter your address manually below.</Typography>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n\r\n                                                                {\r\n                                                                    !createBusinessProfile.tradingAddressRecommendedAddresses\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        // error happened while finding addresses\r\n                                                                        createBusinessProfile.tradingAddressRecommendedAddresses.error\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <List\r\n                                                                                className={css(styles.address_list)}\r\n                                                                            >\r\n                                                                                {\r\n                                                                                    createBusinessProfile.tradingAddressRecommendedAddresses.formattedAddresses.map((address, index) => (\r\n                                                                                        <ListItem\r\n                                                                                            button\r\n                                                                                            key={index}\r\n                                                                                            onClick={() => handleRecommendedAddressSelected(createBusinessProfileActions.SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS, index)}\r\n                                                                                        >\r\n                                                                                            <ListItemText\r\n                                                                                                primary={address}\r\n                                                                                            />\r\n                                                                                        </ListItem>\r\n                                                                                    ))\r\n                                                                                }\r\n                                                                            </List>\r\n                                                                }\r\n\r\n                                                                {\r\n                                                                    createBusinessProfile.tradingAddressEnterAddressManually\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        <Typography variant=\"body2\" color=\"primary\" align=\"left\" className={css(styles.enter_address_manually)} onClick={() => toggleEnterAddressManually(createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY)} >Enter address manually.</Typography>\r\n                                                                }\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                }\r\n                                            </Container>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Directors */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Company directors</b>\r\n                                            </FormLabel>\r\n\r\n                                            <Row noGutters >\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    <List>\r\n                                                        {\r\n                                                            createBusinessProfile.BusinessProfile.directors.map((director, index) => (\r\n                                                                <ListItem key={index} >\r\n                                                                    <ListItemText> {director} </ListItemText>\r\n                                                                    <ListItemSecondaryAction>\r\n                                                                        <IconButton onClick={() => this.props.deleteDirectorTemporarily(index, false)} >\r\n                                                                            <CloseIcon/>\r\n                                                                        </IconButton>\r\n                                                                    </ListItemSecondaryAction>\r\n                                                                </ListItem>\r\n                                                            ))\r\n                                                        }\r\n                                                    </List>\r\n\r\n                                                    {\r\n                                                        createBusinessProfile.BusinessProfile.directors.length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <Divider style={{ marginTop: 10, marginBottom: 16 }} />\r\n                                                    }\r\n                                                </Col>\r\n\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                </Col>\r\n\r\n                                                <Col xs={12} sm={12} md={6} lg={6} >\r\n                                                    {\r\n                                                        !addNewDirector\r\n                                                            ?\r\n                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} >\r\n                                                                <AddIcon fontSize=\"small\" style={{ marginRight: 4 }} />\r\n                                                                Add director\r\n                                                            </Button>\r\n                                                            :\r\n                                                            <FlexView column >\r\n                                                                <TextField\r\n                                                                    placeholder=\"Enter director's name\"\r\n                                                                    name=\"newDirectorText\"\r\n                                                                    value={newDirectorText}\r\n                                                                    fullWidth\r\n                                                                    variant=\"outlined\"\r\n                                                                    onChange={this.handleEditUser(editUserActions.ADDING_NEW_DIRECTOR)}\r\n                                                                    margin=\"dense\"\r\n                                                                />\r\n\r\n                                                                <FlexView marginTop={8} hAlignContent=\"right\" >\r\n                                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} onClick={this.props.toggleAddNewDirector} style={{ marginRight: 8 }} >Cancel</Button>\r\n                                                                    <Button\r\n                                                                        variant=\"contained\"\r\n                                                                        size=\"small\"\r\n                                                                        color=\"primary\"\r\n                                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                                        onClick={() => this.props.addNewDirectorTemporarily(false)}\r\n                                                                        disabled={newDirectorText.trim().length === 0}\r\n                                                                    >\r\n                                                                        Add\r\n                                                                    </Button>\r\n                                                                </FlexView>\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider\r\n                                        style={{ marginTop: 20, marginBottom: 20 }}\r\n                                    />\r\n\r\n                                    {/** Business sector */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Business sector</b>\r\n                                            </FormLabel>\r\n                                            <Select\r\n                                                name=\"sector\"\r\n                                                value={createBusinessProfile.BusinessProfile.sector}\r\n                                                input={<OutlinedInput/>}\r\n                                                margin=\"dense\"\r\n                                                onChange={ this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED) }\r\n                                            >\r\n                                                <MenuItem key={-1} value={'None'} >Choose business sector</MenuItem>\r\n                                                {\r\n                                                    clubAttributes\r\n                                                        ?\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                        :\r\n                                                        null\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Company Website */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Company website</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company website\"\r\n                                                name=\"companyWebsite\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyWebsite}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                            {\r\n                                                createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                                                || utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" >Invalid website URL</Typography>\r\n                                            }\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Upload logo and introduction video */}\r\n                                    <FlexView marginBottom={20} width=\"100%\" hAlignContent=\"center\" >\r\n                                        <Row style={{ width: \"100%\" }} >\r\n                                            {/** Upload logo */}\r\n                                            <Col xs={12} sm={12} md={6} lg={6} style={{ padding: 15 }} >\r\n                                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                                    <FlexView className={css(styles.upload_files_area_style)} onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_FIRST_TIME_MODE)} >\r\n                                                        <Typography variant=\"body2\" align=\"center\" >Upload company logo (optional)</Typography>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.logoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView width={270} height={270} marginTop={28} >\r\n                                                                <Image src={window.URL.createObjectURL(createBusinessProfile.logoToBeUploaded)} roundedCircle thumbnail style={{ maxHeight: 270, width: \"100%\", objectFit: \"scale-down\" }}/>\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n\r\n                                            {/** Upload introduction video */}\r\n                                            <Col xs={12} sm={12} md={6} lg={6} style={{ padding: 15 }} >\r\n                                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                                    <FlexView vAlignContent=\"center\" >\r\n                                                        <FlexView className={css(styles.upload_files_area_style)} onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_FIRST_TIME_MODE)} >\r\n                                                            <Typography variant=\"body2\" align=\"center\" >Upload introduction video (optional)</Typography>\r\n                                                        </FlexView>\r\n\r\n                                                        <OverlayTrigger\r\n                                                            trigger={['hover', 'focus']}\r\n                                                            placement=\"top\"\r\n                                                            flip\r\n                                                            overlay={\r\n                                                                <Tooltip id={`tooltip-top`} >Introduction video helps other members understand more about your business.</Tooltip>\r\n                                                            }>\r\n                                                            <InfoIcon\r\n                                                                fontSize=\"default\"\r\n                                                                style={{\r\n                                                                    marginLeft: 14,\r\n                                                                    color: colors.gray_600\r\n                                                                }}\r\n                                                            />\r\n                                                        </OverlayTrigger>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.videoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView marginTop={28} >\r\n                                                                <ReactPlayer\r\n                                                                    url={\r\n                                                                        typeof (createBusinessProfile.videoToBeUploaded) === \"string\"\r\n                                                                            ?\r\n                                                                            createBusinessProfile.videoToBeUploaded\r\n                                                                            :\r\n                                                                            window.URL.createObjectURL(createBusinessProfile.videoToBeUploaded)\r\n                                                                    }\r\n                                                                    controls={true}\r\n                                                                    playing={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" marginTop={30} marginBottom={20} >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={resetCreatingBusinessProfile}>Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button variant=\"contained\" color=\"primary\" onClick={uploadBusinessProfile} disabled={this.shouldUploadButtonBeDisabled()}>Save</Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return (\r\n                    <FlexView column >\r\n                        <Typography variant=\"h6\" color=\"primary\" >Business profile</Typography>\r\n                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"center\" style={{ marginTop: 15 }} >Business profile has not been uploaded.</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if the user can upload business profile --> only allow upload when all the required information has been provided\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    shouldUploadButtonBeDisabled = () => {\r\n        const {\r\n            originalUser,\r\n            createBusinessProfile,\r\n        } = this.props;\r\n\r\n        // user is an issuer\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registrationNo.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                || (\r\n                    !createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                    && (\r\n                        createBusinessProfile.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                        || createBusinessProfile.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                        || createBusinessProfile.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                    )\r\n                )\r\n                || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                    && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                )\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        // user is an investor\r\n        else if (originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (createBusinessProfile.expandBusinessProfileFilling) {\r\n                if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registrationNo.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.address1.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.townCity.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.registeredOffice.postcode.trim().length === 0\r\n                    || (\r\n                        !createBusinessProfile.tradingAddressSameAsRegisteredOffice\r\n                        && (\r\n                            createBusinessProfile.BusinessProfile.tradingAddress.address1.trim().length === 0\r\n                            || createBusinessProfile.BusinessProfile.tradingAddress.townCity.trim().length === 0\r\n                            || createBusinessProfile.BusinessProfile.tradingAddress.postcode.trim().length === 0\r\n                        )\r\n                    )\r\n                    || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                    || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                    || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                    || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                        && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                    )\r\n                ) {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n\r\nconst styles = StyleSheet.create({\r\n    upload_files_area_style: {\r\n        padding: 12,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.blue_gray_50,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    address_list: {\r\n        backgroundColor: colors.blue_gray_50,\r\n        borderRadius: 3,\r\n        padding: 4,\r\n        width: \"90%\",\r\n\r\n        position: 'relative',\r\n        overflow: 'auto',\r\n        maxHeight: 300\r\n    },\r\n\r\n    enter_address_manually: {\r\n        marginTop: 6,\r\n        ':hover': {\r\n            color: colors.blue_gray_600,\r\n            cursor: 'pointer',\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const TOGGLE_NOTIFICATIONS = 'TOGGLE_NOTIFICATIONS';\r\nexport const CALLED_LAST = 'CALLED_LAST';\r\nexport const CALLED_BEFORE_LAST = 'CALLED_BEFORE_LAST';\r\nexport const toggleNotifications = (event) => {\r\n    return (dispatch, getState) => {\r\n        const notificationsAnchorEl = getState().manageNotifications.notificationsAnchorEl;\r\n        const notificationBellRef = getState().manageNotifications.notificationBellRef;\r\n\r\n        const openPanel = () => {\r\n            dispatch({\r\n                type: TOGGLE_NOTIFICATIONS,\r\n                notificationsAnchorEl: notificationBellRef\r\n            });\r\n        }\r\n\r\n        const closePanel = () => {\r\n            dispatch({\r\n                type: TOGGLE_NOTIFICATIONS,\r\n                notificationsAnchorEl: null\r\n            });\r\n        }\r\n\r\n        if (!notificationsAnchorEl) {\r\n            openPanel();\r\n        }\r\n        else {\r\n            closePanel();\r\n        }\r\n    }\r\n};\r\n\r\nexport const NOTIFICATIONBELL_REF = 'NOTIFICATIONBELL_REF';\r\nexport const notificationRefUpdated = ref => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: NOTIFICATIONBELL_REF,\r\n            notificationBellRef: ref\r\n        });\r\n    }\r\n};\r\n\r\nexport const LOADING_NOTIFICATIONS = 'LOADING_NOTIFICATIONS';\r\nexport const FINISHED_LOADING_NOTIFICATIONS = 'FINISHED_LOADING_NOTIFICATIONS';\r\nexport const loadNotifications = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_NOTIFICATIONS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadNotifications(user.hasOwnProperty('anid') ? user.anid : user.id)\r\n            .then(notifications => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_NOTIFICATIONS,\r\n                    notifications\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_NOTIFICATIONS,\r\n                    notifications: []\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteANotification = notification => {\r\n    return (dispatch, getState) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(notification.id)\r\n            .remove()\r\n            .then(() => {\r\n                dispatch({\r\n                    type: TOGGLE_NOTIFICATIONS,\r\n                    notificationsAnchorEl: null\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteAllNotifications = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .deleteAllNotifications(user.hasOwnProperty('anid') ? user.anid : user.id);\r\n    }\r\n};\r\n\r\n// Listener ------------------------------------------------------------------------------------------------------------\r\n\r\nlet notificationsListener = null;\r\n\r\nexport const NOTIFICATIONS_LIST_CHANGED = 'NOTIFICATIONS_LIST_CHANGED';\r\nexport const startListeningForNotificationsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!notificationsListener) {\r\n\r\n            const user = getState().auth.user;\r\n\r\n            if (!user) {\r\n                return;\r\n            }\r\n\r\n            notificationsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                .orderByChild('userID')\r\n                .equalTo(user.hasOwnProperty('anid') ? user.anid : user.id);\r\n\r\n            notificationsListener\r\n                .on('child_added', snapshot => {\r\n                    let notification = snapshot.val();\r\n\r\n                    let notifications = [...getState().manageNotifications.notifications];\r\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\r\n                    if (notificationIndex === -1) {\r\n                        dispatch({\r\n                            type: NOTIFICATIONS_LIST_CHANGED,\r\n                            notifications: [...notifications, notification]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            notificationsListener\r\n                .on('child_removed', snapshot => {\r\n                    let notification = snapshot.val();\r\n\r\n                    let notifications = [...getState().manageNotifications.notifications];\r\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\r\n\r\n                    if (notificationIndex !== -1) {\r\n                        notifications.splice(notificationIndex, 1);\r\n                        dispatch({\r\n                            type: NOTIFICATIONS_LIST_CHANGED,\r\n                            notifications\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForNotificationsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (notificationsListener) {\r\n            notificationsListener.off('child_added');\r\n            notificationsListener.off('child_removed');\r\n            notificationsListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {\r\n    Fade,\r\n    List,\r\n    ListItem,\r\n    Paper,\r\n    Popper,\r\n    Typography,\r\n    Divider,\r\n    IconButton,\r\n    Button,\r\n    ClickAwayListener\r\n} from '@material-ui/core';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\r\n        notificationBellRef: state.manageNotifications.notificationBellRef,\r\n        notifications: state.manageNotifications.notifications,\r\n        loadingNotifications: state.manageNotifications.loadingNotifications,\r\n        notificationsLoaded: state.manageNotifications.notificationsLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\r\n        loadNotifications: () => dispatch(notificationsActions.loadNotifications()),\r\n        deleteANotification: (notification) => dispatch(notificationsActions.deleteANotification(notification)),\r\n        deleteAllNotifications: () => dispatch(notificationsActions.deleteAllNotifications()),\r\n\r\n        startListeningForNotificationsChanged: () => dispatch(notificationsActions.startListeningForNotificationsChanged()),\r\n        stopListeningForNotificationsChanged: () => dispatch(notificationsActions.stopListeningForNotificationsChanged())\r\n    }\r\n};\r\n\r\nclass NotificationsBox extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.wrapperRef = React.createRef();\r\n        this.handleClickOutside = this.handleClickOutside.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadNotifications\r\n        } = this.props;\r\n\r\n        loadNotifications();\r\n\r\n        document.addEventListener('mouseup', this.handleClickOutside);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            loadingNotifications,\r\n            notificationsLoaded,\r\n\r\n            startListeningForNotificationsChanged\r\n        } = this.props;\r\n\r\n        // notifications have been loaded\r\n        if (!loadingNotifications && notificationsLoaded) {\r\n            startListeningForNotificationsChanged();\r\n        }\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForNotificationsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForNotificationsChanged();\r\n\r\n        document.removeEventListener('mouseup', this.handleClickOutside);\r\n    }\r\n\r\n    handleClickOutside(event) {\r\n        const {\r\n            toggleNotifications,\r\n            notificationBellRef,\r\n        } = this.props;\r\n\r\n\r\n        if (this.wrapperRef && !this.wrapperRef.current.contains(event.target) && !notificationBellRef.contains(event.target) ) {\r\n            toggleNotifications(event);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            notificationsAnchorEl,\r\n            notifications,\r\n            notificationsLoaded,\r\n\r\n            toggleNotifications,\r\n            deleteANotification,\r\n            deleteAllNotifications\r\n\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <div ref={this.wrapperRef}>\r\n            <Popper\r\n                open={Boolean(notificationsAnchorEl)}\r\n                anchorEl={notificationsAnchorEl}\r\n                placement=\"bottom-start\"\r\n                disablePortal={false}\r\n                transition\r\n                modifiers={{\r\n                    flip: {\r\n                        enabled: true,\r\n                    },\r\n                    preventOverflow: {\r\n                        enabled: true,\r\n                        boundariesElement: 'scrollParent'\r\n                    }\r\n                }}\r\n                style={{\r\n                    // this zIndex is to ensure the notification box is on top of all other UI elements\r\n                    zIndex: 100\r\n                }}\r\n            >\r\n                {({TransitionProps}) => (\r\n                    <Fade {...TransitionProps} timeout={350} >\r\n                        <Paper elevation={4} square >\r\n                            <Container fluid style={{ padding: 0, maxWidth: 600 }} >\r\n                                <Row noGutters >\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ paddingLeft: 15, paddingRight: 15, paddingTop: 6, paddingBottom: 6, backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                                        <Row noGutters >\r\n                                            <Col xs={10} sm={10} md={10} lg={10} >\r\n                                                <FlexView height=\"100%\" vAlignContent=\"center\" >\r\n                                                    <Typography variant=\"body1\">Notifications</Typography>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                            <Col xs={2} sm={2} md={2} lg={2} >\r\n                                                <FlexView hAlignContent=\"right\" >\r\n                                                    <IconButton style={{ width: 44, height: 44 }} onClick={toggleNotifications} >\r\n                                                        <CloseIcon fontSize=\"small\" />\r\n                                                    </IconButton>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Col>\r\n\r\n                                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                                        <Divider/>\r\n                                    </Col>\r\n\r\n                                    {\r\n                                        notifications.length === 0\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col xs={12} sm={12} md={12} lg={12} style={{ paddingTop: 5, paddingBottom: 5, paddingRight: 18 }} >\r\n                                                <FlexView hAlignContent=\"right\" >\r\n                                                    <Button variant=\"text\" className={css(sharedStyles.no_text_transform, styles.clear_all_text)} size=\"medium\" onClick={deleteAllNotifications} >\r\n                                                        <ClearAllIcon style={{ marginRight: 6 }} />\r\n                                                        Clear all\r\n                                                    </Button>\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                    }\r\n\r\n                                    {\r\n                                        notifications.length === 0\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                                <Divider/>\r\n                                            </Col>\r\n                                    }\r\n\r\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ minHeight: notifications.length === 0 ? 300 : \"None\", maxHeight: 500, overflowY: \"auto\" }} >\r\n                                        {\r\n                                            !notificationsLoaded\r\n                                                ?\r\n                                                <FlexView column height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                    <HashLoader\r\n                                                        color={\r\n                                                            !groupProperties\r\n                                                                ?\r\n                                                                colors.primaryColor\r\n                                                                :\r\n                                                                groupProperties.settings.primaryColor\r\n                                                        }\r\n                                                    />\r\n                                                </FlexView>\r\n                                                :\r\n                                                notifications.length === 0\r\n                                                    ?\r\n                                                    <FlexView column height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                        <NotificationsIcon className={css(styles.notifications_placeholder_icon)} />\r\n                                                        <Typography variant=\"body1\">Your notifications live here</Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <List component=\"ul\" style={{ padding: 0 }} >\r\n                                                        {\r\n                                                            notifications\r\n                                                                .sort((notification1, notification2) => {\r\n                                                                    return (notification2.date - notification1.date)\r\n                                                                })\r\n                                                                .map(notification => (\r\n                                                                    <ListItem\r\n                                                                        component=\"li\"\r\n                                                                        key={notification.id}\r\n                                                                        divider\r\n                                                                        className={css(styles.notification_item)}\r\n                                                                    >\r\n                                                                        <Row noGutters style={{ width: \"100%\", paddingTop: 13, paddingBottom: 13 }} >\r\n                                                                            <Col xs={10} sm={10} md={11} lg={11} style={{ paddingRight: 10 }} >\r\n                                                                                <NavLink\r\n                                                                                    to={\r\n                                                                                        groupUserName\r\n                                                                                            ?\r\n                                                                                            `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${notification.action}`\r\n                                                                                            :\r\n                                                                                            notification.action\r\n                                                                                    }\r\n                                                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                                                    onClick={() => deleteANotification(notification)}\r\n                                                                                >\r\n                                                                                    <FlexView vAlignContent=\"center\" >\r\n                                                                                        <NotificationsIcon className={css(styles.notification_item_icon)} />\r\n                                                                                        <FlexView column marginLeft={14} >\r\n                                                                                            <Typography variant=\"body1\" className={css(styles.black_text)}>{notification.title}</Typography>\r\n                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 4 }}>{notification.message}</Typography>\r\n                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{marginTop: 10}}><u>Sent:{utils.dateTimeInReadableFormat(notification.date)}</u> </Typography>\r\n                                                                                        </FlexView>\r\n                                                                                    </FlexView>\r\n                                                                                </NavLink>\r\n                                                                            </Col>\r\n                                                                            <Col xs={2} sm={2} md={1} lg={1} style={{ paddingLeft: 8, paddingRight: 8 }} >\r\n                                                                                <FlexView width=\"100%\" height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\r\n                                                                                    <IconButton onClick={() => deleteANotification(notification)} >\r\n                                                                                        <DeleteIcon fontSize=\"small\" />\r\n                                                                                    </IconButton>\r\n                                                                                </FlexView>\r\n                                                                            </Col>\r\n                                                                        </Row>\r\n                                                                    </ListItem>\r\n                                                                ))\r\n                                                        }\r\n                                                    </List>\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Container>\r\n                        </Paper>\r\n                    </Fade>\r\n                )}\r\n            </Popper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NotificationsBox);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    },\r\n\r\n    notifications_placeholder_icon: {\r\n        width: 70,\r\n        height: \"auto\",\r\n        color: colors.gray_300,\r\n        marginBottom: 10\r\n    },\r\n\r\n    notification_item_icon: {\r\n        width: 36,\r\n        height: \"auto\",\r\n        color: colors.gray_300\r\n    },\r\n\r\n    clear_all_text: {\r\n        color: colors.blue_gray_600\r\n    },\r\n\r\n    notification_item: {\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_200\r\n        }\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\r\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport React from \"react\";\r\n\r\nexport enum ExploreGroupsEvents {\r\n    FetchingGroups = \"ExploreGroupsEvents.FetchingGroups\",\r\n    CompleteFetchingGroups = \"ExploreGroupsEvents.CompleteFetchingGroups\",\r\n    FilterChanged = \"ExploreGroupsEvents.FilterChanged\",\r\n    FilterGroupsByName = \"ExploreGroupsEvents.FilterGroupsByName\",\r\n    CancelFilterGroupsByName = \"ExploreGroupsEvents.CancelFilterGroupsByName\",\r\n    FilterGroupsByGroupFilter = \"ExploreGroupsEvents.FilterGroupsByGroupFilter\",\r\n    PaginationChanged = \"ExploreGroupsEvents.PaginationChanged\",\r\n    SendingAccessRequest = \"ExploreGroupsEvents.SendingAccessRequest\",\r\n    CompleteSendingAccessRequest = \"ExploreGroupsEvents.CompleteSendingAccessRequest\",\r\n    RemovingAccessRequest = \"ExploreGroupsEvents.RemovingAccessRequest\",\r\n    CompleteRemovingAccessRequest = \"ExploreGroupsEvents.CompleteRemovingAccessRequest\"\r\n}\r\n\r\nexport interface ExploreGroupsAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteFetchingGroupsAction extends ExploreGroupsAction {\r\n    groups: GroupProperties[];\r\n    accessRequestInstances?: AccessRequestInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface FilterChangedAction extends ExploreGroupsAction {\r\n    name: string;\r\n    value: any;\r\n}\r\n\r\nexport interface FilterGroupsByGroupFilterAction extends ExploreGroupsAction {\r\n    groupsFiltered: GroupProperties[];\r\n}\r\n\r\nexport interface PaginationChangedAction extends ExploreGroupsAction {\r\n    page: number;\r\n}\r\n\r\nexport interface SendingAccessRequestAction extends ExploreGroupsAction {\r\n    groupID: string;\r\n}\r\n\r\nexport interface CompleteSendingAccessRequestAction extends ExploreGroupsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport interface RemovingAccessRequestAction extends ExploreGroupsAction {\r\n    groupID: string;\r\n}\r\n\r\nexport interface CompleteRemovingAccessRequestAction extends ExploreGroupsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport const fetchGroups: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            accessRequestsInstances,\r\n            nameFilter\r\n        } = getState().ExploreGroupsLocalState;\r\n\r\n        dispatch({\r\n            type: ExploreGroupsEvents.FetchingGroups\r\n        });\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        const completeAction: CompleteFetchingGroupsAction = {\r\n            type: ExploreGroupsEvents.CompleteFetchingGroups,\r\n            groups: []\r\n        };\r\n\r\n        if (!currentUser) {\r\n            completeAction.error = \"Unauthenticated user.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const groupsResponse = await new GroupRepository().fetchGroups(\r\n                nameFilter.trim().length === 0 ? undefined : {name: nameFilter}\r\n            );\r\n            completeAction.groups = groupsResponse.data;\r\n\r\n            const admin: Admin | null = isAdmin(currentUser);\r\n            if (!admin || (admin && !admin.superAdmin)) {\r\n                // user is an issuer, investor, or group admin\r\n                // and access requests have not been fetched\r\n                if (!accessRequestsInstances) {\r\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\r\n                        user: currentUser.id,\r\n                        orderBy: \"user\"\r\n                    });\r\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\r\n                }\r\n            }\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterChanged: ActionCreator<any> = (event: any) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        const action: FilterChangedAction = {\r\n            type: ExploreGroupsEvents.FilterChanged,\r\n            name: name,\r\n            value: value\r\n        }\r\n\r\n        dispatch(action);\r\n\r\n        if (name === \"groupFilter\") {\r\n            dispatch(filterGroupsByGroupFilter());\r\n        }\r\n    }\r\n}\r\n\r\nexport const filterGroupsByName: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreGroupsEvents.FilterGroupsByName\r\n        });\r\n        return dispatch(fetchGroups());\r\n    }\r\n}\r\n\r\nexport const cancelFilteringGroupsByName: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ExploreGroupsEvents.CancelFilterGroupsByName\r\n        });\r\n        return dispatch(fetchGroups());\r\n    }\r\n}\r\n\r\nconst filterGroupsByGroupFilter: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            groupFilter,\r\n            accessRequestsInstances,\r\n            groups\r\n        } = getState().ExploreGroupsLocalState;\r\n\r\n        const AuthenticationState = getState().AuthenticationState;\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const groupsFiltered: GroupProperties[] = [];\r\n\r\n        groups.map(group => {\r\n            let satisfiedFilter = false;\r\n            switch (groupFilter) {\r\n                case \"all\":\r\n                    const admin: Admin | null = isAdmin(currentUser);\r\n                    if (admin && admin.superAdmin) {\r\n                        satisfiedFilter = true;\r\n                    } else {\r\n                        satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\r\n                            groupOfMembership => groupOfMembership.group.anid === group.anid) === -1\r\n                            && accessRequestsInstances !== undefined\r\n                            && accessRequestsInstances.findIndex(\r\n                                accessRequestInstance => accessRequestInstance.group.anid === group.anid) === -1;\r\n                    }\r\n                    break;\r\n                case \"groupsOfMembership\":\r\n                    satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\r\n                        groupOfMembership => groupOfMembership.group.anid === group.anid) !== -1;\r\n                    break;\r\n                case \"groupsOfPendingRequest\":\r\n                    satisfiedFilter = accessRequestsInstances !== undefined\r\n                        && accessRequestsInstances.findIndex(\r\n                            accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if (satisfiedFilter) {\r\n                groupsFiltered.push(group);\r\n            }\r\n        });\r\n\r\n        const action: FilterGroupsByGroupFilterAction = {\r\n            type: ExploreGroupsEvents.FilterGroupsByGroupFilter,\r\n            groupsFiltered: groupsFiltered\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: PaginationChangedAction = {\r\n            type: ExploreGroupsEvents.PaginationChanged,\r\n            page: page\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const sendAccessRequest: ActionCreator<any> = (groupID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const sendingAction: SendingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.SendingAccessRequest,\r\n            groupID\r\n        };\r\n        dispatch(sendingAction);\r\n\r\n        const completeAction: CompleteSendingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.CompleteSendingAccessRequest\r\n        };\r\n\r\n        try {\r\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, groupID);\r\n            const accessRequestInstance: AccessRequestInstance = response.data;\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (currentAccessRequestInstances !== undefined) {\r\n                completeAction.updatedAccessRequestInstances = [\r\n                    ...currentAccessRequestInstances,\r\n                    accessRequestInstance\r\n                ];\r\n            } else {\r\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\r\n            }\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeAccessRequest: ActionCreator<any> = (groupID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const removingAction: RemovingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.RemovingAccessRequest,\r\n            groupID\r\n        };\r\n        dispatch(removingAction);\r\n\r\n        const completeAction: CompleteRemovingAccessRequestAction = {\r\n            type: ExploreGroupsEvents.CompleteRemovingAccessRequest\r\n        };\r\n\r\n        try {\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (!currentAccessRequestInstances) {\r\n                return dispatch(completeAction);\r\n            }\r\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\r\n                accessRequestInstance => accessRequestInstance.group.anid === groupID && accessRequestInstance.user.id === currentUser.id);\r\n            if (accessRequestIndex === -1) {\r\n                return dispatch(completeAction);\r\n            }\r\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\r\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\r\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\r\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\r\n\r\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\r\n            dispatch(completeAction);\r\n            return dispatch(filterGroupsByGroupFilter());\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import Error from \"../../models/error\";\r\nimport {\r\n    CompleteFetchingOffersAction,\r\n    ExploreOffersAction,\r\n    ExploreOffersEvents,\r\n    FilterChangedAction,\r\n    PaginationChangedAction\r\n} from \"./ExploreOffersActions\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {OffersTableStates} from \"../offers-table/OffersTableReducer\";\r\n\r\nexport const maxOffersPerPage: number = 12;\r\n\r\nexport interface ExploreOffersState {\r\n    offerInstances: ProjectInstance[];\r\n    fetchingOffers: boolean;\r\n    offersFetched: boolean;\r\n\r\n    searchFilter: string;\r\n    visibilityFilter: number | \"all\";\r\n    sectorFilter: string | \"all\";\r\n    phaseFilter: string | number | \"all\";\r\n    groupFilter: string | \"all\";\r\n    currentPage: number;\r\n\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ExploreOffersState = {\r\n    offerInstances: [],\r\n    fetchingOffers: false,\r\n    offersFetched: false,\r\n\r\n    searchFilter: \"\",\r\n    visibilityFilter: \"all\",\r\n    sectorFilter: \"all\",\r\n    phaseFilter: FetchProjectsPhaseOptions.LivePitch,\r\n    groupFilter: \"all\",\r\n    currentPage: 1\r\n}\r\n\r\nexport const hasNotFetchedOffers = (state: ExploreOffersState) => {\r\n    return !state.fetchingOffers && !state.offersFetched;\r\n}\r\n\r\nexport const isFetchingOffers = (state: ExploreOffersState) => {\r\n    return state.fetchingOffers;\r\n}\r\n\r\nexport const successfullyFetchedOffers = (state: ExploreOffersState) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const successfullyFetchedOffers2 = (state: OffersTableStates) => {\r\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\r\n}\r\n\r\nexport const hasOffersForCurrentFilters = (state: ExploreOffersState) => {\r\n    return successfullyFetchedOffers(state) && state.offerInstances.length > 0;\r\n}\r\n\r\nexport const isSearchFilterActive = (state: ExploreOffersState) => {\r\n    return state.searchFilter.trim().length > 0;\r\n}\r\n\r\nexport const calculatePaginationPages = (state: ExploreOffersState) => {\r\n    if (state.offerInstances.length <= maxOffersPerPage) {\r\n        return 1;\r\n    }\r\n    if (state.offerInstances.length % maxOffersPerPage === 0) {\r\n        return (state.offerInstances.length / maxOffersPerPage) | 0;\r\n    }\r\n    return ((state.offerInstances.length / maxOffersPerPage) | 0) + 1;\r\n}\r\n\r\nexport const calculatePaginationIndices = (state: ExploreOffersState) => {\r\n    let startIndex, endIndex;\r\n    startIndex = (state.currentPage - 1) * maxOffersPerPage;\r\n    endIndex = startIndex + maxOffersPerPage - 1;\r\n    if (endIndex > state.offerInstances.length - 1) {\r\n        endIndex = state.offerInstances.length - 1;\r\n    }\r\n    return {\r\n        startIndex,\r\n        endIndex\r\n    };\r\n}\r\n\r\nconst exploreOffersReducer = (state: ExploreOffersState = initialState, action: ExploreOffersAction) => {\r\n    switch (action.type) {\r\n        case ExploreOffersEvents.FetchingOffers:\r\n            return {\r\n                ...state,\r\n                offerInstances: [],\r\n                fetchingOffers: true,\r\n                offersFetched: false,\r\n                error: undefined\r\n            }\r\n        case ExploreOffersEvents.CompleteFetchingOffers:\r\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\r\n            return {\r\n                ...state,\r\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\r\n                fetchingOffers: false,\r\n                offersFetched: true,\r\n                currentPage: 1,\r\n                error: completeFetchingOffersAction.error !== undefined\r\n                    ? {detail: completeFetchingOffersAction.error} : state.error\r\n            }\r\n        case ExploreOffersEvents.FilterChanged:\r\n            console.log(\"Filter changed\")\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value\r\n            }\r\n        case ExploreOffersEvents.ClearSearchFilter:\r\n            return {\r\n                ...state,\r\n                searchFilter: \"\"\r\n            }\r\n        case ExploreOffersEvents.PaginationChanged:\r\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\r\n            return {\r\n                ...state,\r\n                currentPage: paginationChangedAction.page\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default exploreOffersReducer;","/**\r\n * Group properties interface\r\n */\r\nexport default interface GroupProperties {\r\n    anid: string;\r\n    dateAdded: number;\r\n    description: string;\r\n    displayName: string;\r\n    displayNameLower: string;\r\n    groupUserName: string;\r\n    isInvestWest: boolean;\r\n    status: number;\r\n    website?: string;\r\n    logoWithText?: GroupLogo[];\r\n    plainLogo: GroupLogo[];\r\n    settings: GroupSettings;\r\n}\r\n\r\n/**\r\n * This should always be returned when a group is queried by an unauthenticated user\r\n */\r\nexport interface PublicGroupProperties {\r\n    description: string;\r\n    displayName: string;\r\n    groupUserName: string;\r\n}\r\n\r\n/**\r\n * Group settings interface\r\n */\r\nexport interface GroupSettings {\r\n    primaryColor: string;\r\n    secondaryColor: string;\r\n    projectVisibility: number;\r\n    makeInvestorsContactDetailsVisibleToIssuers: boolean;\r\n    PledgeFAQs?: GroupPledgeFAQ[];\r\n}\r\n\r\n/**\r\n * Group logo interface\r\n */\r\nexport interface GroupLogo {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Group pledge faq interface\r\n */\r\nexport interface GroupPledgeFAQ {\r\n    id: string;\r\n    question: string;\r\n    answer: string;\r\n}\r\n\r\nexport const getGroupLogo = (group: GroupProperties | null) => {\r\n    if (!group) {\r\n        return null;\r\n    }\r\n    if (group.plainLogo.length === 0) {\r\n        return null;\r\n    }\r\n    return group.plainLogo[group.plainLogo.findIndex(logo => logo.removed === undefined)].url;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    getPitchCover,\r\n    isImagePitchCover,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectLive,\r\n    isProjectPrivate,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    PitchCover,\r\n    ProjectInstance,\r\n    shouldHideProjectInformationFromUser\r\n} from \"../../models/project\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport '../../shared-js-css-styles/sharedStyles.scss';\r\nimport Routes from \"../../router/routes\";\r\nimport {Box, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from \"react-bootstrap\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport User from \"../../models/user\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\n\r\nconst CoverMaxHeight = 180;\r\n\r\ninterface OfferItemProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    offerInstance: ProjectInstance;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass OfferItem extends Component<OfferItemProps, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            offerInstance\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n\r\n\r\n        const pitchCover: PitchCover | null = getPitchCover(offerInstance.projectDetail);\r\n\r\n\r\n        return <CustomLink\r\n            url={Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)}\r\n            color=\"none\"\r\n            activeColor=\"none\"\r\n            activeUnderline={false}\r\n            component=\"nav-link\"\r\n            childComponent={\r\n                <Box border={`1px solid ${colors.grey[\"300\"]}`} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Box\r\n                                    height={`${CoverMaxHeight}px`}\r\n                                    width=\"100%\"\r\n                                    bgcolor={appColors.dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100}\r\n                                >\r\n                                    {\r\n                                        shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                            ? <Box display=\"flex\" width=\"100%\" height={CoverMaxHeight} justifyContent=\"center\" >\r\n                                                <Image src={getGroupLogo(offerInstance.group) ?? \"\"} width=\"auto\" height={CoverMaxHeight} style={{ padding: 20, objectFit: \"scale-down\" }} />\r\n                                            </Box>\r\n                                            : !pitchCover\r\n                                            ? null\r\n                                            : isImagePitchCover(pitchCover)\r\n                                                ? <Image src={pitchCover.url} width=\"100%\" height={CoverMaxHeight} style={{ objectFit: \"contain\" }} />\r\n                                                : <ReactPlayer url={pitchCover.url} light={false} width=\"100%\" height={CoverMaxHeight} playing={false} controls={false} />\r\n                                    }\r\n\r\n                                    {/** Group logo to be displayed at the top-right corner */}\r\n                                    <Image\r\n                                        src={getGroupLogo(offerInstance.group) ?? \"\"}\r\n                                        roundedCircle\r\n                                        height={46}\r\n                                        width={46}\r\n                                        style={{\r\n                                            position: \"absolute\",\r\n                                            right: 0,\r\n                                            top: 0,\r\n                                            zIndex: 1,\r\n                                            padding: \"5px\",\r\n                                            marginTop: \"5px\",\r\n                                            marginRight: \"5px\",\r\n                                            backgroundColor: colors.grey[\"300\"],\r\n                                            objectFit: \"contain\"\r\n                                        }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Divider/>\r\n\r\n                                <Box padding=\"14px\" >\r\n                                    {/** Project basic information */}\r\n                                    <Box>\r\n                                        {/** Project title */}\r\n                                        <Box marginY=\"6px\" >\r\n                                            <Typography noWrap variant=\"h6\" align=\"left\" >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? \"Members only offer\"\r\n                                                        : offerInstance.projectDetail.projectName\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n\r\n\r\n                                        {/** Sector / Description */}\r\n                                        <Box color={colors.grey[\"700\"]} >\r\n                                            <title className=\"projectInfo\">\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `in ${offerInstance.projectDetail.sector} sector`\r\n                                                        : offerInstance.projectDetail.description\r\n                                                }\r\n                                            </title>\r\n                                        </Box>\r\n\r\n                                        {/** By issuer */}\r\n                                        <Box color=\"black\" marginTop=\"8px\" >\r\n                                            <Typography variant=\"body2\" noWrap >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : isProjectCreatedByGroupAdmin(offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : `by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n\r\n\r\n                                    {/** Divider */}\r\n                                    <Box bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} height=\"3px\" marginTop=\"30px\" marginBottom=\"15px\" />\r\n\r\n                                    {/** Project phase information */}\r\n                                    <Box>\r\n                                        <Typography variant=\"body2\" color=\"primary\" align=\"left\" >\r\n                                            {\r\n                                                offerInstance.projectDetail.Pitch.fundRequired\r\n                                                    ? `£${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`\r\n                                                    : \"\"\r\n                                            }\r\n                                        </Typography>\r\n\r\n                                        <Box marginTop=\"5px\" >\r\n                                            <Typography variant=\"body2\" align=\"left\" color=\"textSecondary\" >\r\n                                                {\r\n                                                    !isProjectLive(offerInstance.projectDetail)\r\n                                                        ? \"Offer expired\"\r\n                                                        : `${utils.dateDiff(offerInstance.projectDetail.Pitch.expiredDate)} days to go`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n                                    <Box className=\"badges\">\r\n                                        {\r\n                                        offerInstance.projectDetail.Pitch.hasSEIS === \"No\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col className=\"badge-spacing\" >\r\n                                                <Typography className=\"text-badges\" variant=\"body2\" align=\"center\"><b> SEIS </b></Typography>\r\n                                            </Col>\r\n                                        }\r\n\r\n                                        {\r\n                                        offerInstance.projectDetail.Pitch.hasEIS === \"No\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Col className=\"badge-spacing\" >\r\n                                                <Typography className=\"text-badges\" variant=\"body2\" align=\"center\"><b> EIS </b></Typography>\r\n                                            </Col>\r\n                                        }\r\n                                    </Box>\r\n\r\n                                    {/** Project visibility information */}\r\n                                    <Box display=\"flex\" marginTop=\"15px\" justifyContent=\"flex-end\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} >\r\n                                        <OverlayTrigger\r\n                                            trigger={[\"hover\", \"focus\"]}\r\n                                            placement=\"bottom\"\r\n                                            flip\r\n                                            overlay={\r\n                                                <Tooltip id=\"tooltip-bottom\" >\r\n                                                    {\r\n                                                        isProjectPublic(offerInstance.projectDetail)\r\n                                                            ? \"This is a public offer.\"\r\n                                                            : isProjectRestricted(offerInstance.projectDetail)\r\n                                                            ? \"This is a restricted offer.\"\r\n                                                            : isProjectPrivate(offerInstance.projectDetail)\r\n                                                                ? \"This is a private offer.\"\r\n                                                                : null\r\n                                                    }\r\n                                                </Tooltip>\r\n                                            }\r\n                                        >\r\n                                            {\r\n                                                isProjectPublic(offerInstance.projectDetail)\r\n                                                    ? <PublicIcon/>\r\n                                                    : isProjectRestricted(offerInstance.projectDetail)\r\n                                                    ? <RestrictedIcon/>\r\n                                                    : isProjectPrivate(offerInstance.projectDetail)\r\n                                                        ? <PrivateIcon/>\r\n                                                        : <Box/>\r\n                                            }\r\n                                        </OverlayTrigger>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Box>\r\n            }\r\n        />;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OfferItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Box, colors, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\ninterface RiskWarningProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nclass RiskWarning extends Component<RiskWarningProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Invest West\"\r\n            );\r\n\r\n        let splits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        const urlText = splits[1];\r\n\r\n        return <Box\r\n            border={`1px solid ${colors.grey[\"600\"]}`}\r\n            borderRadius=\"24px\"\r\n            padding=\"24px\"\r\n            bgcolor={colors.grey[\"100\"]}\r\n        >\r\n            <Typography variant=\"body1\" align=\"left\" ><u>Risk warning</u></Typography>\r\n            <Box marginTop=\"18px\" whiteSpace=\"pre-line\" >\r\n                <Typography variant=\"body1\" align=\"justify\" >\r\n                    {splits[0]}\r\n                    <CustomLink\r\n                        url={Routes.nonGroupRiskWarning}\r\n                        target=\"_blank\"\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                        activeColor=\"none\"\r\n                        activeUnderline={true}\r\n                        component=\"nav-link\"\r\n                        childComponent={ urlText }\r\n                    />\r\n                    {splits[2]}\r\n                </Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarning);","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {\r\n    Box,\r\n    Button, colors,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreOffersState,\r\n    hasNotFetchedOffers,\r\n    hasOffersForCurrentFilters,\r\n    isFetchingOffers,\r\n    isSearchFilterActive,\r\n    successfullyFetchedOffers,\r\n    successfullyFetchedOffers2\r\n} from \"./ExploreOffersReducer\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\r\nimport {clearSearchFilter, fetchOffers, filterChanged, onSearchEnter, paginationChanged} from \"./ExploreOffersActions\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport OfferItem from \"./OfferItem\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\nimport RiskWarning from \"../risk-warning/RiskWarning\";\r\nimport User, {isIssuer} from \"../../models/user\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {FetchProjectsOrderByOptions, FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\r\nimport {Close, Search} from \"@material-ui/icons\";\r\nimport {\r\n    hasErrorExportingCsv,\r\n    hasErrorFetchingOffers,\r\n    hasGroupsSelect,\r\n    isExportingCsv,\r\n    isFilteringOffersByName,\r\n    OffersTableStates,\r\n} from \"../offers-table/OffersTableReducer\";\r\nimport Admin from \"../../models/admin\";\r\n\r\ninterface ExploreOffersProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    onSearchEnter: (event: FormEvent) => any;\r\n    fetchOffers: (orderBy?: string) => any;\r\n    filterChanged: (event: any) => any;\r\n    clearSearchFilter: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n    OffersTableLocalState: OffersTableStates;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreOffersLocalState: state.ExploreOffersLocalState,\r\n        OffersTableLocalState: state.OffersTableLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onSearchEnter: (event: FormEvent) => dispatch(onSearchEnter(event)),\r\n        fetchOffers: (orderBy?: string) => dispatch(fetchOffers(orderBy)),\r\n        filterChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(filterChanged(event)),\r\n        clearSearchFilter: () => dispatch(clearSearchFilter()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreOffers extends Component<ExploreOffersProps, {}> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedOffers(this.props.ExploreOffersLocalState)) {\r\n            this.props.fetchOffers(FetchProjectsOrderByOptions.Phase);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreOffersLocalState,\r\n            fetchOffers,\r\n            filterChanged,\r\n            clearSearchFilter,\r\n            paginationChanged,\r\n            onSearchEnter,\r\n            OffersTableLocalState\r\n        } = this.props;\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreOffersLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreOffersLocalState);\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row>\r\n                {/** Group filter for Explore offers */}\r\n                <Col xs={12} sm={12} md={6} lg={4} >\r\n                    <Box paddingY=\"6px\" >\r\n                        <Typography variant=\"body1\">Group:</Typography>\r\n                        <Box height=\"8px\" />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"groupFilter\"\r\n                                value={OffersTableLocalState.groupFilter}\r\n                                onChange={filterChanged}\r\n                                input={<OutlinedInput/>}\r\n                                disabled={!successfullyFetchedOffers2(OffersTableLocalState)}\r\n                            >\r\n                                <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\r\n                                {\r\n                                    !hasGroupsSelect(OffersTableLocalState)\r\n                                    || !OffersTableLocalState.groupsSelect\r\n                                        ? null\r\n                                        : OffersTableLocalState.groupsSelect.map(group =>\r\n                                            <MenuItem\r\n                                                key={group.anid}\r\n                                                value={group.anid}\r\n                                            >\r\n                                                {group.displayName}\r\n                                            </MenuItem>\r\n                                        )\r\n                                }\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n\r\n\r\n                {/** Sector filter */}\r\n                <Col xs={12} sm={12} md={6} lg={4} >\r\n                    <Box paddingY=\"6px\" >\r\n                        <Typography variant=\"body1\">Sector:</Typography>\r\n                        <Box height=\"8px\" />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"sectorFilter\"\r\n                                value={ExploreOffersLocalState.sectorFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem key=\"all\" value=\"all\">All sectors</MenuItem>\r\n\r\n                                {\r\n                                    !ManageSystemAttributesState.systemAttributes\r\n                                        ? null\r\n                                        : ManageSystemAttributesState.systemAttributes.Sectors.map((sector, index) => (\r\n                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                        ))\r\n                                }\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Phase filter */}\r\n                <Col xs={12} sm={12} md={6} lg={4} >\r\n                    <Box paddingY=\"6px\" >\r\n                        <Typography variant=\"body1\">Status:</Typography>\r\n                        <Box height=\"8px\" />\r\n                        <Paper>\r\n                            <Select\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                name=\"phaseFilter\"\r\n                                value={ExploreOffersLocalState.phaseFilter}\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                input={<OutlinedInput/>}\r\n                            >\r\n                                <MenuItem key={FetchProjectsPhaseOptions.LivePitch} value={FetchProjectsPhaseOptions.LivePitch}>Live</MenuItem>\r\n\r\n                                <MenuItem key={FetchProjectsPhaseOptions.ExpiredPitch} value={FetchProjectsPhaseOptions.ExpiredPitch}>Expired</MenuItem>\r\n                            </Select>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Search bar */}\r\n            <Row style={{ marginTop: 40 }} >\r\n                <Col xs={12} sm={12} md={8} lg={4} >\r\n                    <Box\r\n                        width=\"100%\"\r\n                        height=\"100%\"\r\n                        bgcolor=\"white\"\r\n                        border={2}\r\n                        borderColor={colors.grey[300]}\r\n                        borderRadius=\"20px\"\r\n                        paddingX=\"5px\"\r\n                        paddingY=\"8px\"\r\n                    >\r\n                        <form onSubmit={onSearchEnter} >\r\n                            <InputBase\r\n                                fullWidth\r\n                                name=\"searchFilter\"\r\n                                value={ExploreOffersLocalState.searchFilter}\r\n                                placeholder=\"Search name, group or issuer\"\r\n                                onChange={filterChanged}\r\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                startAdornment={\r\n                                    <InputAdornment position=\"start\" >\r\n                                        <IconButton\r\n                                            type=\"submit\"\r\n                                            onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)}\r\n                                            disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\r\n                                        >\r\n                                            <Search fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </InputAdornment>\r\n                                }\r\n                                endAdornment={\r\n                                    !isSearchFilterActive(ExploreOffersLocalState)\r\n                                        ? null\r\n                                        : <InputAdornment position=\"end\" >\r\n                                            <IconButton onClick={() => clearSearchFilter()} >\r\n                                                <Close fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                }\r\n                            />\r\n                        </form>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" marginY=\"50px\" justifyContent=\"center\" >\r\n                                <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Offers */}\r\n            {\r\n                !successfullyFetchedOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            {\r\n                                !hasOffersForCurrentFilters(ExploreOffersLocalState)\r\n                                    ? <Box marginY=\"80px\" >\r\n                                        <Typography align=\"center\" variant=\"h5\" >There are no offers available using your current filter criteria</Typography>\r\n                                    </Box>\r\n                                    : <Box>\r\n                                        {/** Explore n offers + refresh button */}\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"row\"\r\n                                            alignItems=\"center\"\r\n                                            marginTop=\"50px\"\r\n                                            marginBottom=\"25px\"\r\n                                        >\r\n                                            <Typography variant=\"h6\">Explore</Typography>\r\n                                            <Typography variant=\"h6\" color=\"primary\">&nbsp;<b>{ExploreOffersLocalState.offerInstances.length} offers</b></Typography>\r\n                                            <Box marginLeft=\"8px\" >\r\n                                                <IconButton onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)} >\r\n                                                    <RefreshIcon/>\r\n                                                </IconButton>\r\n                                            </Box>\r\n                                        </Box>\r\n\r\n                                        {/** Create offer button (only available for issuers) */}\r\n                                        {\r\n                                            !AuthenticationState.currentUser\r\n                                                ? null\r\n                                                : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : <Box marginBottom=\"40px\" >\r\n                                                    <CustomLink\r\n                                                        url={Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)}\r\n                                                        target=\"_blank\"\r\n                                                        color=\"none\"\r\n                                                        activeColor=\"none\"\r\n                                                        activeUnderline={false}\r\n                                                        component=\"a\"\r\n                                                        childComponent={\r\n                                                            <Button size=\"medium\" variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} >\r\n                                                                <Box marginRight=\"8px\" >\r\n                                                                    <CreateIcon fontSize=\"small\" />\r\n                                                                </Box>Create new offer\r\n                                                            </Button>\r\n                                                        }\r\n                                                    />\r\n                                                </Box>\r\n                                        }\r\n\r\n                                        {/** Offers area */}\r\n                                        <Row>\r\n                                            {\r\n                                                ExploreOffersLocalState.offerInstances\r\n                                                    .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                                    .map(offerInstance => (\r\n                                                        <Col key={offerInstance.projectDetail.id} xs={12} sm={12} md={6} lg={3} >\r\n                                                            <Box margin=\"16px\" >\r\n                                                                <OfferItem offerInstance={offerInstance} />\r\n                                                            </Box>\r\n                                                        </Col>\r\n                                                    ))\r\n                                            }\r\n                                        </Row>\r\n                                    </Box>\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedOffers(ExploreOffersLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" marginTop=\"55px\" >\r\n                                <Pagination count={paginationPages} page={ExploreOffersLocalState.currentPage} color=\"primary\" onChange={paginationChanged} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Risk warning */}\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Box marginTop=\"100px\" >\r\n                        <RiskWarning/>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreOffers);","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport interface FetchAccessRequestsOptions {\r\n    user?: string;\r\n    group?: string;\r\n    orderBy: \"user\" | \"group\";\r\n}\r\n\r\nexport default class AccessRequestRepository {\r\n\r\n    /**\r\n     * Fetch access requests\r\n     */\r\n    public async fetchAccessRequests(options?: FetchAccessRequestsOptions) {\r\n        return await new Api()\r\n            .request(\r\n                \"get\",\r\n                ApiRoutes.listAccessRequestsRoute,\r\n                {\r\n                    requestBody: null,\r\n                    queryParameters: options ?? null\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Create access request\r\n     *\r\n     * @param userID\r\n     * @param groupID\r\n     */\r\n    public async createAccessRequest(userID: string, groupID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.createAccessRequestRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        userID,\r\n                        groupID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Remove access request\r\n     *\r\n     * @param requestID\r\n     */\r\n    public async removeAccessRequest(requestID: string) {\r\n        return await new Api()\r\n            .request(\r\n                \"delete\",\r\n                ApiRoutes.removeAccessRequestRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        requestID\r\n                    }\r\n                }\r\n            );\r\n    }\r\n}","import Api, {ApiRoutes} from \"../Api\";\r\n\r\nexport enum ClientEmailTypes {\r\n    EnquiryEmail,\r\n    InvitationEmail,\r\n    PitchPublished,\r\n    NewPitchSubmitted,\r\n    ContactResource,\r\n    ContactPitchOwner\r\n}\r\n\r\nexport interface EmailData {\r\n    emailType: number;\r\n    emailInfo: EmailInfo;\r\n}\r\n\r\nexport interface EmailInfo {\r\n    receiver: string | string[];\r\n    sender?: string;\r\n\r\n    [others: string]: any;\r\n}\r\n\r\nexport interface UserInvitationEmailData extends EmailInfo {\r\n    groupName: string;\r\n    groupLogo: string;\r\n    groupWebsite: string;\r\n    groupContactUs: string;\r\n    userType: string;\r\n    signupURL: string;\r\n}\r\n\r\nexport interface EnquiryEmailData extends EmailInfo {\r\n    isAuthenticatedRequest: boolean;\r\n    subject: string;\r\n    description: string;\r\n    senderName: string;\r\n    senderPhone: string;\r\n}\r\n\r\nexport interface PitchPublishedEmailData extends EmailInfo {\r\n    projectID: string;\r\n}\r\n\r\nexport interface NewPitchSubmittedEmailData extends EmailInfo {\r\n    projectID: string;\r\n}\r\n\r\nexport interface ContactResourceEmailData extends EmailInfo {\r\n    userName: string;\r\n    userCompanyName?: string;\r\n}\r\n\r\nexport interface ContactPitchOwnerEmailData extends EmailInfo {\r\n    userName: string;\r\n    projectName: string;\r\n}\r\n\r\nexport default class EmailRepository {\r\n\r\n    /**\r\n     * Send email\r\n     *\r\n     * @param data\r\n     */\r\n    public async sendEmail(data: EmailData) {\r\n        return await new Api()\r\n            .request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: data\r\n                }\r\n            );\r\n    }\r\n}","import {\r\n    CompleteFetchingGroupsAction,\r\n    CompleteRemovingAccessRequestAction,\r\n    CompleteSendingAccessRequestAction,\r\n    ExploreGroupsAction,\r\n    ExploreGroupsEvents,\r\n    FilterChangedAction,\r\n    FilterGroupsByGroupFilterAction,\r\n    PaginationChangedAction, RemovingAccessRequestAction, SendingAccessRequestAction\r\n} from \"./ExploreGroupsActions\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport Error from \"../../models/error\";\r\nimport {AccessRequestInstance} from \"../../models/access_request\";\r\n\r\nexport const maxGroupsPerPage: number = 12;\r\n\r\nexport interface ExploreGroupsState {\r\n    groups: GroupProperties[];\r\n    accessRequestsInstances?: AccessRequestInstance[]; // only available for issuer or investor\r\n    fetchingGroups: boolean;\r\n    groupsFetched: boolean;\r\n\r\n    filteringGroupsByName: boolean;\r\n    nameFilter: string;\r\n    groupFilter: \"all\" | \"groupsOfMembership\" | \"groupsOfPendingRequest\";\r\n    groupsFiltered: GroupProperties[];\r\n\r\n    currentPage: number;\r\n\r\n    error?: Error;\r\n\r\n    sendingAccessRequestToGroup?: string;\r\n    errorSendingAccessRequest?: Error;\r\n\r\n    removingAccessRequestFromGroup?: string;\r\n    errorRemovingAccessRequest?: Error;\r\n}\r\n\r\nconst initialState: ExploreGroupsState = {\r\n    groups: [],\r\n    fetchingGroups: false,\r\n    groupsFetched: false,\r\n\r\n    filteringGroupsByName: false,\r\n    nameFilter: \"\",\r\n    groupFilter: \"all\",\r\n    groupsFiltered: [],\r\n\r\n    currentPage: 1\r\n}\r\n\r\nexport const hasNotFetchedGroups = (state: ExploreGroupsState) => {\r\n    return !state.groupsFetched && !state.fetchingGroups;\r\n}\r\n\r\nexport const isFetchingGroups = (state: ExploreGroupsState) => {\r\n    return !state.groupsFetched && state.fetchingGroups;\r\n}\r\n\r\nexport const successfullyFetchedGroups = (state: ExploreGroupsState) => {\r\n    return state.groupsFetched && !state.fetchingGroups && state.error === undefined;\r\n}\r\n\r\nexport const isFilteringGroupsByName = (state: ExploreGroupsState) => {\r\n    return state.filteringGroupsByName;\r\n}\r\n\r\nexport const hasGroupsForCurrentFilters = (state: ExploreGroupsState) => {\r\n    return successfullyFetchedGroups(state) && state.groupsFiltered.length > 0;\r\n}\r\n\r\nexport const hasAccessRequestsBeenSatisfied = (state: ExploreGroupsState) => {\r\n    return successfullyFetchedGroups(state) && state.accessRequestsInstances !== undefined;\r\n}\r\n\r\nexport const calculatePaginationPages = (state: ExploreGroupsState) => {\r\n    if (state.groupsFiltered.length <= maxGroupsPerPage) {\r\n        return 1;\r\n    }\r\n    if (state.groupsFiltered.length % maxGroupsPerPage === 0) {\r\n        return (state.groupsFiltered.length / maxGroupsPerPage) | 0;\r\n    }\r\n    return ((state.groupsFiltered.length / maxGroupsPerPage) | 0) + 1;\r\n}\r\n\r\nexport const calculatePaginationIndices = (state: ExploreGroupsState) => {\r\n    let startIndex, endIndex;\r\n    startIndex = (state.currentPage - 1) * maxGroupsPerPage;\r\n    endIndex = startIndex + maxGroupsPerPage - 1;\r\n    if (endIndex > state.groupsFiltered.length - 1) {\r\n        endIndex = state.groupsFiltered.length - 1;\r\n    }\r\n    return {\r\n        startIndex,\r\n        endIndex\r\n    };\r\n}\r\n\r\nexport const isSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return state.sendingAccessRequestToGroup !== undefined && state.sendingAccessRequestToGroup === groupID;\r\n}\r\n\r\nexport const hasErrorSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return !isSendingAccessRequest(state, groupID) && state.errorSendingAccessRequest !== undefined;\r\n}\r\n\r\nexport const isRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return state.removingAccessRequestFromGroup !== undefined && state.removingAccessRequestFromGroup === groupID;\r\n}\r\n\r\nexport const hasErrorRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\r\n    return !isRemovingAccessRequest(state, groupID) && state.errorRemovingAccessRequest !== undefined;\r\n}\r\n\r\nconst exploreGroupsReducer = (state = initialState, action: ExploreGroupsAction) => {\r\n    switch (action.type) {\r\n        case ExploreGroupsEvents.FetchingGroups:\r\n            return {\r\n                ...state,\r\n                groups: [],\r\n                fetchingGroups: true,\r\n                groupsFetched: false,\r\n                error: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteFetchingGroups:\r\n            const completeFetchingGroupsAction: CompleteFetchingGroupsAction = action as CompleteFetchingGroupsAction;\r\n            return {\r\n                ...state,\r\n                groups: [...completeFetchingGroupsAction.groups],\r\n                accessRequestsInstances: completeFetchingGroupsAction.accessRequestInstances !== undefined\r\n                    ? [...completeFetchingGroupsAction.accessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                fetchingGroups: false,\r\n                groupsFetched: true,\r\n                currentPage: 1,\r\n                error: completeFetchingGroupsAction.error !== undefined\r\n                    ? {detail: completeFetchingGroupsAction.error} : state.error\r\n            }\r\n        case ExploreGroupsEvents.FilterChanged:\r\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\r\n            return {\r\n                ...state,\r\n                [filterChangedAction.name]: filterChangedAction.value\r\n            }\r\n        case ExploreGroupsEvents.FilterGroupsByName:\r\n            return {\r\n                ...state,\r\n                filteringGroupsByName: true\r\n            }\r\n        case ExploreGroupsEvents.CancelFilterGroupsByName:\r\n            return {\r\n                ...state,\r\n                nameFilter: \"\",\r\n                filteringGroupsByName: false\r\n            }\r\n        case ExploreGroupsEvents.FilterGroupsByGroupFilter:\r\n            const filterGroupsByGroupFilterAction: FilterGroupsByGroupFilterAction = action as FilterGroupsByGroupFilterAction;\r\n            return {\r\n                ...state,\r\n                groupsFiltered: [...filterGroupsByGroupFilterAction.groupsFiltered],\r\n                currentPage: 1\r\n            }\r\n        case ExploreGroupsEvents.PaginationChanged:\r\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\r\n            return {\r\n                ...state,\r\n                currentPage: paginationChangedAction.page\r\n            }\r\n        case ExploreGroupsEvents.SendingAccessRequest:\r\n            const sendingAccessRequestAction: SendingAccessRequestAction = action as SendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequestToGroup: sendingAccessRequestAction.groupID,\r\n                errorSendingAccessRequest: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteSendingAccessRequest:\r\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequestToGroup: undefined,\r\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\r\n            }\r\n        case ExploreGroupsEvents.RemovingAccessRequest:\r\n            const removingAccessRequestAction: RemovingAccessRequestAction = action as RemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequestFromGroup: removingAccessRequestAction.groupID,\r\n                errorRemovingAccessRequest: undefined\r\n            }\r\n        case ExploreGroupsEvents.CompleteRemovingAccessRequest:\r\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequestFromGroup: undefined,\r\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default exploreGroupsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Button, Card, CardActionArea, CardActions, colors, Typography} from \"@material-ui/core\";\r\nimport GroupProperties, {getGroupLogo} from \"../../models/group_properties\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {\r\n    ExploreGroupsState,\r\n    hasAccessRequestsBeenSatisfied,\r\n    isRemovingAccessRequest,\r\n    isSendingAccessRequest\r\n} from \"./ExploreGroupsReducer\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {CheckCircle} from \"@material-ui/icons\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {removeAccessRequest, sendAccessRequest} from \"./ExploreGroupsActions\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\n\r\ninterface GroupItemProps {\r\n    group: GroupProperties;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    sendAccessRequest: (groupID: string) => any;\r\n    removeAccessRequest: (groupID: string) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        sendAccessRequest: (groupID: string) => dispatch(sendAccessRequest(groupID)),\r\n        removeAccessRequest: (groupID: string) => dispatch(removeAccessRequest(groupID))\r\n    }\r\n}\r\n\r\nclass GroupItem extends Component<GroupItemProps, any> {\r\n    render() {\r\n        const {\r\n            group,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            sendAccessRequest,\r\n            removeAccessRequest\r\n        } = this.props;\r\n\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        let groupMember: GroupOfMembership | undefined = AuthenticationState.groupsOfMembership.find(\r\n            groupOfMembership => groupOfMembership.group.anid === group.anid);\r\n\r\n        let hasRequestedToAccessGroup: boolean = false;\r\n        if (hasAccessRequestsBeenSatisfied(ExploreGroupsLocalState)) {\r\n            hasRequestedToAccessGroup = ExploreGroupsLocalState.accessRequestsInstances\r\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\r\n        }\r\n\r\n        return <Box\r\n            marginY=\"18px\"\r\n        >\r\n            <Card>\r\n                <CustomLink\r\n                    url={Routes.constructGroupDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, group.groupUserName)}\r\n                    color=\"black\"\r\n                    activeColor=\"none\"\r\n                    activeUnderline={false}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <CardActionArea\r\n                            onClick={\r\n                                () => {\r\n                                    if (!isAdmin(currentUser)) {\r\n                                        realtimeDBUtils.trackActivity({\r\n                                            userID: currentUser.id,\r\n                                            activityType: DB_CONST.ACTIVITY_TYPE_CLICK,\r\n                                            interactedObjectLocation: DB_CONST.GROUP_PROPERTIES_CHILD,\r\n                                            interactedObjectID: group.anid,\r\n                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM.replace(\"%group%\", group.displayName),\r\n                                            action: Routes.nonGroupViewGroup.replace(\":groupID\", group.anid)\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        >\r\n                            <Box>\r\n                                <Box display=\"flex\" height=\"220px\" justifyContent=\"center\" bgcolor={colors.grey[\"200\"]} >\r\n                                    <Image\r\n                                        alt={`${group.displayName} logo`}\r\n                                        src={getGroupLogo(group) ?? undefined}\r\n                                        height=\"auto\"\r\n                                        width=\"100%\"\r\n                                        style={{ padding: 40, objectFit: \"scale-down\" }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Box paddingX=\"18px\" paddingY=\"20px\" >\r\n                                    <Typography variant=\"subtitle1\" align=\"center\" noWrap ><b>{group.displayName}</b></Typography>\r\n\r\n                                    {\r\n                                        !groupMember\r\n                                            ? null\r\n                                            : <Box display=\"flex\" flexDirection=\"row\" marginTop=\"15px\" alignItems=\"center\" justifyContent=\"center\" >\r\n                                                <CheckCircle fontSize=\"small\" color=\"primary\" />\r\n                                                <Box width=\"6px\" />\r\n                                                <Typography variant=\"body1\" align=\"center\" noWrap color=\"textSecondary\" >\r\n                                                    {\r\n                                                        getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\r\n                                                            ? \"Home member\"\r\n                                                            : \"Platform member\"\r\n                                                    }\r\n                                                </Typography>\r\n                                            </Box>\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n                        </CardActionArea>\r\n                    }\r\n                />\r\n\r\n                {\r\n                    isAdmin(currentUser)\r\n                        ? null\r\n                        : groupMember\r\n                        ? null\r\n                        : <CardActions style={{ padding: 0 }} >\r\n                            <Box display=\"flex\" width=\"100%\" padding=\"18px\" justifyContent=\"center\" >\r\n                                {\r\n                                    !hasRequestedToAccessGroup\r\n                                        ? <Button\r\n                                            fullWidth\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => sendAccessRequest(group.anid)}\r\n                                            disabled={isSendingAccessRequest(ExploreGroupsLocalState, group.anid)}\r\n                                        >\r\n                                            {\r\n                                                isSendingAccessRequest(ExploreGroupsLocalState, group.anid)\r\n                                                    ? \"Sending request ...\"\r\n                                                    : \"Join Group\"\r\n                                            }\r\n                                        </Button>\r\n                                        : <Button\r\n                                            variant=\"outlined\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => removeAccessRequest(group.anid)}\r\n                                            disabled={isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)}\r\n                                        >\r\n                                            {\r\n                                                isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)\r\n                                                    ? \"Cancelling ...\"\r\n                                                    : \"Cancel request\"\r\n                                            }\r\n                                        </Button>\r\n                                }\r\n                            </Box>\r\n                        </CardActions>\r\n                }\r\n            </Card>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreGroupsState,\r\n    hasGroupsForCurrentFilters,\r\n    hasNotFetchedGroups,\r\n    isFetchingGroups,\r\n    isFilteringGroupsByName,\r\n    successfullyFetchedGroups\r\n} from \"./ExploreGroupsReducer\";\r\nimport {\r\n    Box,\r\n    Card,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Close, Refresh, Search} from \"@material-ui/icons\";\r\nimport {\r\n    cancelFilteringGroupsByName,\r\n    fetchGroups,\r\n    filterChanged,\r\n    filterGroupsByName,\r\n    paginationChanged\r\n} from \"./ExploreGroupsActions\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport GroupItem from \"./GroupItem\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\n\r\ninterface ExploreGroupsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    fetchGroups: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterGroupsByName: () => any;\r\n    cancelFilteringGroupsByName: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        fetchGroups: () => dispatch(fetchGroups()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterGroupsByName: () => dispatch(filterGroupsByName()),\r\n        cancelFilteringGroupsByName: () => dispatch(cancelFilteringGroupsByName()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreGroups extends Component<ExploreGroupsProps, any> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedGroups(this.props.ExploreGroupsLocalState)) {\r\n            this.props.fetchGroups();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            fetchGroups,\r\n            filterChanged,\r\n            filterGroupsByName,\r\n            cancelFilteringGroupsByName,\r\n            paginationChanged\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreGroupsLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreGroupsLocalState);\r\n\r\n        return <Box paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"} paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"} >\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 4, offset: 4}} >\r\n                    <Card elevation={0} >\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            alignItems=\"center\"\r\n                            bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            color=\"white\"\r\n                            paddingY=\"28px\"\r\n                        >\r\n                            <Typography variant=\"h6\" align=\"center\">Groups on Invest West network</Typography>\r\n\r\n                            <Box height=\"28px\" />\r\n\r\n                            <Box width=\"85%\" height=\"100%\" bgcolor=\"white\" borderRadius=\"50px\" >\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    name=\"nameFilter\"\r\n                                    value={ExploreGroupsLocalState.nameFilter}\r\n                                    placeholder=\"Search group by name\"\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <IconButton\r\n                                                onClick={() => filterGroupsByName()}\r\n                                                disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                            >\r\n                                                <Search fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        !isFilteringGroupsByName(ExploreGroupsLocalState)\r\n                                            ? null\r\n                                            : <InputAdornment position=\"end\" >\r\n                                                <IconButton onClick={() => cancelFilteringGroupsByName()} >\r\n                                                    <Close fontSize=\"small\"/>\r\n                                                </IconButton>\r\n                                            </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Filters (only available for issuer and investor) */}\r\n            {\r\n                isAdmin(AuthenticationState.currentUser)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={8} sm={8} md={3} lg={2} >\r\n                            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"48px\" >\r\n                                <Select\r\n                                    fullWidth\r\n                                    name=\"groupFilter\"\r\n                                    value={ExploreGroupsLocalState.groupFilter}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    input={<OutlinedInput/>}\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                >\r\n                                    <MenuItem key=\"all\" value=\"all\">All groups</MenuItem>\r\n                                    <MenuItem key=\"groupsOfMembership\" value=\"groupsOfMembership\">My groups</MenuItem>\r\n                                    <MenuItem key=\"groupsOfPendingRequest\" value=\"groupsOfPendingRequest\">Pending requests</MenuItem>\r\n                                </Select>\r\n\r\n                                <Box width=\"15px\" />\r\n\r\n                                <IconButton onClick={() => fetchGroups()} >\r\n                                    <Refresh/>\r\n                                </IconButton>\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" marginY=\"80px\" justifyContent=\"center\" >\r\n                                <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Groups area */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : !hasGroupsForCurrentFilters(ExploreGroupsLocalState)\r\n                    ? <Box marginY=\"80px\" >\r\n                        <Typography align=\"center\" variant=\"h5\" > There are no groups available using your current filter criteria </Typography>\r\n                    </Box>\r\n                    : <Box marginTop=\"30px\" >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Row>\r\n                                    {\r\n                                        ExploreGroupsLocalState.groupsFiltered\r\n                                            .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                            .map(group =>\r\n                                                <Col key={group.anid} xs={12} sm={12} md={4} lg={3} xl={2} >\r\n                                                    <GroupItem group={group} />\r\n                                                </Col>\r\n                                            )\r\n                                    }\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                    </Box>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" marginTop=\"55px\" >\r\n                                <Pagination count={paginationPages} page={ExploreGroupsLocalState.currentPage} color=\"primary\" onChange={paginationChanged} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreGroups);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {FeedbackSnackbarTypes} from \"./FeedbackSnackbarReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\n\r\nexport enum FeedbackSnackbarEvents {\r\n    Open = \"FeedbackSnackbarEvents.Open\",\r\n    Close = \"FeedbackSnackbarEvents.Close\"\r\n}\r\n\r\nexport interface FeedbackSnackbarAction extends Action {\r\n\r\n}\r\n\r\nexport interface OpenFeedbackSnackbarAction extends Action {\r\n    snackbarType: FeedbackSnackbarTypes;\r\n    message: string;\r\n}\r\n\r\nexport const openFeedbackSnackbar: ActionCreator<any> = (type: FeedbackSnackbarTypes, message: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: OpenFeedbackSnackbarAction = {\r\n            type: FeedbackSnackbarEvents.Open,\r\n            snackbarType: type,\r\n            message: message\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const closeFeedbackSnackbar: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: FeedbackSnackbarEvents.Close\r\n        });\r\n    }\r\n}","import {FeedbackSnackbarAction, FeedbackSnackbarEvents, OpenFeedbackSnackbarAction} from \"./FeedbackSnackbarActions\";\r\n\r\nexport enum FeedbackSnackbarTypes {\r\n    Success = \"success\",\r\n    Information = \"info\",\r\n    Error = \"error\",\r\n    Warning = \"warning\"\r\n}\r\n\r\nexport interface FeedbackSnackbarState {\r\n    type: FeedbackSnackbarTypes;\r\n    open: boolean;\r\n    message: string;\r\n}\r\n\r\nconst initialState: FeedbackSnackbarState = {\r\n    type: FeedbackSnackbarTypes.Success,\r\n    open: false,\r\n    message: \"\"\r\n};\r\n\r\nconst feedbackSnackbarReducerNew = (state = initialState, action: FeedbackSnackbarAction) => {\r\n    switch (action.type) {\r\n        case FeedbackSnackbarEvents.Open:\r\n            const openFeedbackSnackbarAction: OpenFeedbackSnackbarAction = action as OpenFeedbackSnackbarAction;\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                type: openFeedbackSnackbarAction.snackbarType,\r\n                message: openFeedbackSnackbarAction.message\r\n            }\r\n        case FeedbackSnackbarEvents.Close:\r\n            return {\r\n                ...state,\r\n                open: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default feedbackSnackbarReducerNew;","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport EmailRepository, {ClientEmailTypes, ContactResourceEmailData} from \"../../api/repositories/EmailRepository\";\r\nimport User, {hasBusinessProfile} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport {openFeedbackSnackbar} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ResourcesEvents {\r\n    DetailedPageToggleContactDialog = \"ResourcesEvents.DetailedPageToggleContactDialog\",\r\n    DetailedPageSendingContactEmail = \"ResourcesEvents.DetailedPageSendingContactEmail\",\r\n    DetailedPageCompleteSendingContactEmail = \"ResourcesEvents.DetailedPageCompleteSendingContactEmail\"\r\n}\r\n\r\nexport interface ResourcesAction extends Action {\r\n\r\n}\r\n\r\nexport interface DetailedPageCompleteSendingContactEmailAction extends ResourcesAction {\r\n    error?: string;\r\n}\r\n\r\nexport const toggleContactResourceDialog: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ResourcesEvents.DetailedPageToggleContactDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const sendContactEmail: ActionCreator<any> = (receiver: string | string[]) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            detailedPageSendingContactEmail\r\n        } = getState().ResourcesLocalState;\r\n\r\n        if (detailedPageSendingContactEmail) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            currentUser\r\n        } = getState().AuthenticationState;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const admin: Admin | null = isAdmin(currentUser);\r\n\r\n        dispatch({\r\n            type: ResourcesEvents.DetailedPageSendingContactEmail\r\n        });\r\n\r\n        const completeAction: DetailedPageCompleteSendingContactEmailAction = {\r\n            type: ResourcesEvents.DetailedPageCompleteSendingContactEmail\r\n        };\r\n\r\n        try {\r\n            const emailInfo: ContactResourceEmailData = {\r\n                receiver: receiver,\r\n                sender: currentUser.email,\r\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\r\n                userCompanyName: `${admin ? \"Not specified\" : hasBusinessProfile((currentUser as User))\r\n                    ? (currentUser as User).BusinessProfile?.companyName : \"Not specified.\"}`\r\n            };\r\n\r\n            await new EmailRepository().sendEmail({\r\n                emailType: ClientEmailTypes.ContactResource,\r\n                emailInfo: emailInfo\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport React from \"react\";\r\nimport {SystemAttributes} from \"../../../../models/system_attributes\";\r\nimport SystemAttributesRepository from \"../../../../api/repositories/SystemAttributesRepository\";\r\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ManageSectorsEvents {\r\n    SetSectors = \"ManageSectorsEvents.SetSectors\",\r\n    ToggleAddNewSector = \"ManageSectorsEvents.ToggleAddNewSector\",\r\n    AddNewSectorTextChanged = \"ManageSectorsEvents.AddNewSectorTextChanged\",\r\n    SavingSectorsChanges = \"ManageSectorsEvents.SavingSectorsChanges\",\r\n    CompletedSavingSectorsChanges = \"ManageSectorsEvents.CompletedSavingSectorsChanges\"\r\n}\r\n\r\nexport interface ManageSectorsAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetSectorsAction extends ManageSectorsAction {\r\n    sectors: string[];\r\n}\r\n\r\nexport interface AddNewSectorTextChangedAction extends ManageSectorsAction {\r\n    value: string;\r\n}\r\n\r\nexport interface CompletedSavingSectorsChangesAction extends ManageSectorsAction {\r\n    error?: string;\r\n}\r\n\r\nexport const setSectors: ActionCreator<any> = (sectors: string[]) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetSectorsAction = {\r\n            type: ManageSectorsEvents.SetSectors,\r\n            sectors: [...sectors]\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const toggleAddNewSector: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ManageSectorsEvents.ToggleAddNewSector\r\n        });\r\n    }\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: AddNewSectorTextChangedAction = {\r\n            type: ManageSectorsEvents.AddNewSectorTextChanged,\r\n            value: event.target.value\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const addNewSector: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const newSector: string = getState().ManageSectorsLocalState.newSector;\r\n        sectors.push(newSector);\r\n        dispatch(setSectors(sectors));\r\n        return dispatch(toggleAddNewSector());\r\n    }\r\n}\r\n\r\nexport const deleteSector: ActionCreator<any> = (sector: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const index = sectors.findIndex(eSector => eSector === sector);\r\n        if (index !== -1) {\r\n            sectors.splice(index, 1);\r\n        }\r\n        return dispatch(setSectors(sectors));\r\n    }\r\n}\r\n\r\nexport const cancelSectorsChanges: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const systemAttributes: SystemAttributes | null = getState().ManageSystemAttributesState.systemAttributes;\r\n        if (!systemAttributes) {\r\n            return;\r\n        }\r\n        return dispatch(setSectors([...systemAttributes.Sectors]));\r\n    }\r\n}\r\n\r\nexport const saveSectorsChanges: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const systemAttributes: SystemAttributes | null = JSON.parse(JSON.stringify(getState().ManageSystemAttributesState.systemAttributes));\r\n        if (!systemAttributes) {\r\n            return;\r\n        }\r\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\r\n        const completeAction: CompletedSavingSectorsChangesAction = {\r\n            type: ManageSectorsEvents.CompletedSavingSectorsChanges\r\n        };\r\n        try {\r\n            systemAttributes.Sectors = sectors;\r\n            dispatch({\r\n                type: ManageSectorsEvents.SavingSectorsChanges\r\n            });\r\n            await new SystemAttributesRepository().updateSystemAttributes(systemAttributes);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {DetailedPageCompleteSendingContactEmailAction, ResourcesAction, ResourcesEvents} from \"./ResourcesActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface ResourcesState {\r\n    detailedPageContactDialogOpen: boolean;\r\n    detailedPageSendingContactEmail: boolean;\r\n    detailedPageErrorSendingContactEmail?: Error;\r\n}\r\n\r\nconst initialState: ResourcesState = {\r\n    detailedPageContactDialogOpen: false,\r\n    detailedPageSendingContactEmail: false\r\n}\r\n\r\nexport const isDetailedPageSendingContactEmail = (state: ResourcesState) => {\r\n    return state.detailedPageSendingContactEmail;\r\n}\r\n\r\nexport const hasErrorSendingContactEmailInDetailedPage = (state: ResourcesState) => {\r\n    return !state.detailedPageSendingContactEmail && state.detailedPageErrorSendingContactEmail !== undefined;\r\n}\r\n\r\nconst resourcesReducer = (state = initialState, action: ResourcesAction) => {\r\n    switch (action.type) {\r\n        case ResourcesEvents.DetailedPageToggleContactDialog:\r\n            return {\r\n                ...state,\r\n                detailedPageContactDialogOpen: !state.detailedPageContactDialogOpen\r\n            }\r\n        case ResourcesEvents.DetailedPageSendingContactEmail:\r\n            return {\r\n                ...state,\r\n                detailedPageSendingContactEmail: true,\r\n                detailedPageErrorSendingContactEmail: undefined\r\n            }\r\n        case ResourcesEvents.DetailedPageCompleteSendingContactEmail:\r\n            const detailedPageCompleteSendingContactEmailAction: DetailedPageCompleteSendingContactEmailAction = action as DetailedPageCompleteSendingContactEmailAction;\r\n            return {\r\n                ...state,\r\n                detailedPageContactDialogOpen: false,\r\n                detailedPageSendingContactEmail: false,\r\n                detailedPageErrorSendingContactEmail: detailedPageCompleteSendingContactEmailAction.error !== undefined\r\n                    ? {detail: detailedPageCompleteSendingContactEmailAction.error}\r\n                    : state.detailedPageErrorSendingContactEmail\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default resourcesReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\r\nimport {sendContactEmail, toggleContactResourceDialog} from \"../ResourcesActions\";\r\nimport {isDetailedPageSendingContactEmail, ResourcesState} from \"../ResourcesReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface ContactResourceDialogProps {\r\n    // set when using the component inside the page\r\n    resourceName: string;\r\n    // set when using the component inside the page\r\n    resourceEmail: string | string[];\r\n    ResourcesLocalState: ResourcesState;\r\n    toggle: () => any;\r\n    sendContactEmail: (receiver: string | string[]) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggle: () => dispatch(toggleContactResourceDialog()),\r\n        sendContactEmail: (receiver: string | string[]) => dispatch(sendContactEmail(receiver))\r\n    }\r\n}\r\n\r\nclass ContactResourceDialog extends Component<ContactResourceDialogProps, any> {\r\n    render() {\r\n        const {\r\n            resourceName,\r\n            resourceEmail,\r\n            ResourcesLocalState,\r\n            toggle,\r\n            sendContactEmail\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            open={ResourcesLocalState.detailedPageContactDialogOpen}\r\n            onClose={() => toggle()}\r\n        >\r\n            <DialogContent>\r\n                <Box\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                >\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        align=\"left\"\r\n                    >\r\n                        {`We will send an email to ${resourceName} asking them to contact you.`}\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        align=\"left\"\r\n                    >\r\n                        {`Are you happy for Invest West to share your email address with ${resourceName}?`}\r\n                    </Typography>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    isDetailedPageSendingContactEmail(ResourcesLocalState)\r\n                        ? null\r\n                        : <Button\r\n                            onClick={() => toggle()}\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                }\r\n                <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    className={css(sharedStyles.no_text_transform)}\r\n                    disabled={isDetailedPageSendingContactEmail(ResourcesLocalState)}\r\n                    onClick={() => sendContactEmail(resourceEmail)}\r\n                >\r\n                    {\r\n                        isDetailedPageSendingContactEmail(ResourcesLocalState)\r\n                            ? `Sending email to ${resourceName} ...`\r\n                            : \"Yes\"\r\n                    }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactResourceDialog);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Slide, SlideProps, Snackbar} from \"@material-ui/core\";\r\nimport {FeedbackSnackbarState} from \"./FeedbackSnackbarReducer\";\r\nimport {closeFeedbackSnackbar} from \"./FeedbackSnackbarActions\";\r\nimport {Alert} from \"@material-ui/lab\";\r\n\r\ninterface FeedbackSnackbarProps {\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    close: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        FeedbackSnackbarLocalState: state.FeedbackSnackbarLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        close: () => dispatch(closeFeedbackSnackbar())\r\n    }\r\n}\r\n\r\nclass FeedbackSnackbarNew extends Component<FeedbackSnackbarProps, any> {\r\n    render() {\r\n        const {\r\n            FeedbackSnackbarLocalState,\r\n            close\r\n        } = this.props;\r\n\r\n        return <Snackbar\r\n            open={FeedbackSnackbarLocalState.open}\r\n            anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"center\",\r\n            }}\r\n            autoHideDuration={2500}\r\n            onClose={close}\r\n            TransitionComponent={SlideTransitionUp}\r\n            transitionDuration={{\r\n                enter: 130,\r\n                exit: 130\r\n            }}\r\n        >\r\n            <Alert variant=\"filled\" severity={FeedbackSnackbarLocalState.type} onClose={close}>{FeedbackSnackbarLocalState.message}</Alert>\r\n        </Snackbar>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbarNew);\r\n\r\n/**\r\n * Slide transition - direction up\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport const SlideTransitionUp = React.forwardRef((props: SlideProps, ref) => <Slide {...props} ref={ref}\r\n                                                                                     direction=\"up\"/>);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\n\r\ninterface KeltieProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\ninterface KeltieResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst keltieLogo: string = `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`;\r\nconst sullivanFountainImg: string = `${process.env.PUBLIC_URL}/resources/keltie/sullivan-fountain.jpg`;\r\nconst richardLawrenceImg: string = `${process.env.PUBLIC_URL}/resources/keltie/richard-lawrence.jpg`;\r\n\r\nconst keltieDocuments: KeltieResource[] = [\r\n    {\r\n        name: \"An introduction to IP\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/an-introduction-to-ip.pdf`\r\n    },\r\n    {\r\n        name: \"Designs - Info Sheet\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/designs-info-sheet.pdf`\r\n    },\r\n    {\r\n        name: \"Patent searching overview guide\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patent-searching-overview-guide.pdf`\r\n    },\r\n    {\r\n        name: \"How to get the best from your IP\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/how-to-get-the-best-from-your-ip.pptx`\r\n    },\r\n    {\r\n        name: \"The tool box\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/the-tool-box.pptx`\r\n    }\r\n];\r\n\r\nconst keltieVideos: KeltieResource[] = [\r\n    {\r\n        name: \"IP for Startups: Top 5 Things You Need to Know\",\r\n        url: \"https://www.youtube.com/watch?v=r5mOCm2tzjg\"\r\n    },\r\n    {\r\n        name: \"Patents for non patent attorneys - Episode 1\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-1.mp4`\r\n    },\r\n    {\r\n        name: \"Patents for non patent attorneys - Episode 2\",\r\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-2.mp4`\r\n    },\r\n    {\r\n        name: \"Artificial Intelligence and Patents: AI Inventors\",\r\n        url: \"https://www.youtube.com/watch?v=QZOC2ZLWjPI\"\r\n    },\r\n    {\r\n        name: \"Patents and the Internet of Things\",\r\n        url: \"https://www.youtube.com/watch?v=BnyvbgUSjv4\"\r\n    },\r\n    {\r\n        name: \"IP Tips: Reducing patent spend (in light of Covid-19)\",\r\n        url: \"https://www.youtube.com/watch?v=7v00c9VpS-E\"\r\n    }\r\n];\r\n\r\nclass Keltie extends Component<KeltieProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} xl={{span: 6, offset: 3}}>\r\n                    <Paper>\r\n                        <Box padding=\"20px\">\r\n                            {/** Header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\r\n                                <Row noGutters style={{ width: \"100%\" }}>\r\n        \r\n                                    <Col sm={12} md={12} lg={12}>\r\n                                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\" paddingX=\"25px\">\r\n                                            <Box marginY=\"30px\">\r\n                                                <Typography variant=\"h3\" align=\"center\">Intellectual Property</Typography>\r\n                                            </Box>\r\n                                            <Typography variant=\"h6\" align=\"center\">A collection of resources to help entrepreneurs better understand Intellectual Property issues. This content is kindly provided by our friends at Keltie LLP.</Typography>\r\n                                        </Box>\r\n                                    </Col>\r\n                                    <Col sm={12} md={12} lg={12}>\r\n                                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" width=\"100%\" height=\"100%\">\r\n                                            <ReactPlayer url={keltieVideos[0].url} height=\"50vh\" width=\"100%\" playing={false} controls={true}/>\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Box height=\"30px\"/>\r\n\r\n                                <Row noGutters style={{ width: \"100%\"}}>\r\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\r\n                                        <Divider/>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Box height=\"30px\"/>\r\n\r\n                                <Row noGutters style={{ width: \"100%\" }}>\r\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\r\n                                        <Typography variant=\"body1\" align=\"center\">\r\n                                            Intellectual property comprises the intangible business assets that are the\r\n                                            result of creativity. In a technology business, much or even most of the\r\n                                            value of the business may lie in the intellectual property that it owns or\r\n                                            controls. While this asset value is significant, the main role of\r\n                                            intellectual property is usually to support the commercial strategy of the\r\n                                            business. It is therefore very important to understand what intellectual\r\n                                            property is needed by a business to support its commercial strategy, so that\r\n                                            the business can make good decisions about identifying and securing the\r\n                                            intellectual property that it needs as efficiently as possible.\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Tips */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Top 5 Things You Need to Know</Typography>\r\n                                <Box height=\"20px\"/>\r\n                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\r\n                                    <ol>\r\n                                        <li>\r\n                                            There are four main forms of IP Protection\r\n                                            <br/>\r\n                                            <ol type=\"a\">\r\n                                                <li><i>Patents</i> for technological innovations,</li>\r\n                                                <li><i>Trademarks</i> for branding,</li>\r\n                                                <li><i>Registered</i> Designs for the look and feel of a product,</li>\r\n                                                <li><i>Copyright</i> for creative works such as instruction manuals or\r\n                                                    software code.\r\n                                                </li>\r\n                                            </ol>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Registered vs. unregistered rights\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    There are differences in strength of registered vs unregistered\r\n                                                    rights, as well as their costs and timescales. Its important to\r\n                                                    choose the right option for your business.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Application vs. granted rights\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    When discussing registered rights, always be clear whether you have\r\n                                                    made an application for rights, or actually have granted rights.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Assessing risk - registrability searching vs Freedom To Operate (FTO)\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li>\r\n                                                    Owning a registered right, be it a trade mark, patent or registered\r\n                                                    design, does not mean that you automatically have the right to use\r\n                                                    it.\r\n                                                </li>\r\n                                                <li>\r\n                                                    Two types of searching are therefore common with IP. The first is\r\n                                                    performed to understand the chances of your application passing the\r\n                                                    registration process (i.e. patentability searching or trade mark\r\n                                                    registrability searching), whilst the second considers whether your\r\n                                                    proposed commercial activities will be impacted by pre-existing\r\n                                                    rights.\r\n                                                </li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            IP rights are jurisdictional\r\n                                            <br/>\r\n                                            <ul>\r\n                                                <li> IP rights are only enforceable in the country or region they have been granted.</li>\r\n                                            </ul>\r\n                                        </li>\r\n                                    </ol>\r\n                                </Typography>\r\n                                <br/>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    The UK IPO (Intellectual Property Office) provide funding for IP audits and support\r\n                                    for start-ups. <b>For more information on accessing IP audit funding in the South West,\r\n                                    follow this link</b>&nbsp;\r\n                                    <a href=\"https://www.businesswest.co.uk/about/partners-programmes/innovate2succeed\" target=\"_blank\">Innovate UK EDGE | Business West</a>.\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Resources</Typography>\r\n                                <Box height=\"20px\"/>\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    {\r\n                                        keltieDocuments.map((document: any) => (\r\n                                            <CustomLink\r\n                                                key={document.name}\r\n                                                url={document.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"12px\">\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box width=\"10px\"/>\r\n                                                        <Typography variant=\"body1\" align=\"left\">{document.name}</Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Training (videos) */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Training</Typography>\r\n                                <Box height=\"30px\"/>\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    {\r\n                                        keltieVideos.map((video: any, index: number) =>\r\n                                            <Box key={index} marginBottom=\"20px\">\r\n                                                <Row style={{ width: \"100%\" }}>\r\n                                                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                                                        <ReactPlayer url={video.url} height=\"auto\" width=\"100%\" playing={false} controls={true}/>\r\n                                                    </Col>\r\n                                                    <Col xs={12} sm={12} md={8} lg={9}>\r\n                                                        <Typography variant=\"subtitle1\" align=\"left\"><b>{video.name}</b></Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Box>\r\n                                        )\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" >\r\n                                <Typography variant=\"h6\" align=\"left\">About us</Typography>\r\n                                <Box height=\"15px\" />\r\n                                <Typography variant=\"body1\" align=\"justify\" >\r\n                                    Keltie is an intellectual property firm with a unique personality. A firm that’s\r\n                                    renowned for its excellence, earned by putting talented, energetic and principled\r\n                                    people at its heart.\r\n                                    <br/><br/>\r\n                                    Based in Europe but with global reach, we specialise in IP law and management. Our\r\n                                    clients benefit from an extraordinarily experienced and multi-faceted group of IP\r\n                                    experts. Our team includes patent, trade mark and design attorneys who work on every\r\n                                    technology and in all commercial fields.\r\n                                    <br/><br/>\r\n                                    Sullivan Fountain and Richard Lawrence at the Keltie Cotswolds office serve the\r\n                                    South West region and would be delighted to discuss your IP challenges further.\r\n                                </Typography>\r\n                                <Box height=\"40px\" />\r\n                                <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" >\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={keltieLogo}\r\n                                                alt=\"Keltie logo\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{ objectFit: \"cover\" }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box width=\"25px\" />\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com/staff/sullivan-fountain.html\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={sullivanFountainImg}\r\n                                                alt=\"Sullivan Fountain\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{ objectFit: \"cover\" }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box width=\"25px\" />\r\n                                    <CustomLink\r\n                                        url=\"https://www.keltie.com/staff/richard-lawrence.html\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image src={richardLawrenceImg} alt=\"Richard Lawrence\" width={MediaQueryState.isMobile ? 100 : 145} height={MediaQueryState.isMobile ? 100 : 145} style={{ objectFit: \"cover\" }} />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                                <Box height=\"60px\" />\r\n                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                                    <Box bgcolor=\"#52155A\" color=\"white\" clone >\r\n                                        <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => toggleContactResourceDialog()} > Contact us </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box height=\"20px\" />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Keltie LLP\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"sullivan.fountain@keltie.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Keltie);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Card, colors, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {Resource} from \"./Resources\";\r\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface ResourceItemProps {\r\n    resource: Resource;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nclass ResourceItem extends Component<ResourceItemProps, any> {\r\n    render() {\r\n        const {\r\n            resource,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            marginY=\"18px\"\r\n        >\r\n            <Card>\r\n                <CustomLink\r\n                    url={Routes.constructViewResourceDetailRoute(\r\n                        ManageGroupUrlState.groupNameFromUrl ?? null, resource.name)}\r\n                    color=\"black\"\r\n                    activeColor=\"none\"\r\n                    activeUnderline={false}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Box>\r\n                            <Box display=\"flex\" height=\"220px\" justifyContent=\"center\" bgcolor={colors.grey[\"200\"]}>\r\n                                <Image alt={`${resource.name} logo`} src={resource.logo} height=\"auto\" width=\"100%\" style={{ padding: 40, objectFit: \"scale-down\" }} />\r\n                            </Box>\r\n\r\n                            <Box paddingX=\"18px\" paddingY=\"20px\">\r\n                                <Typography variant=\"subtitle1\" align=\"center\" noWrap><b>{resource.name}</b></Typography>\r\n                            </Box>\r\n                        </Box>\r\n                    }\r\n                />\r\n            </Card>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\n\r\ninterface FounderCatalystProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\ninterface FounderCatalystResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst founderCatalystLogo: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`;\r\nconst justynWaterworthImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/justyn-waterworth.jpeg`;\r\nconst samSimpsonImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/sam-simpson.jpeg`;\r\nconst charlesFrankImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/charles-frank.jpeg`;\r\n\r\nconst founderCatalystResources: FounderCatalystResource[] = [\r\n    {\r\n        name: \"Model Articles of Association\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-articles-of-association.pdf`\r\n    },\r\n    {\r\n        name: \"Model Board Minutes\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-board-minutes.pdf`\r\n    },\r\n    {\r\n        name: \"Model Subscription & Shareholders’ Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-subscription-and-shareholder-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model Founder Service Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-founder-service-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model IP Assignment\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-ip-assignment.pdf`\r\n    },\r\n    {\r\n        name: \"Model Disclosure Letter\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-disclosure-letter.pdf`\r\n    },\r\n    {\r\n        name: \"Model Non-disclosure Agreement\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-non-disclosure-agreement.pdf`\r\n    },\r\n    {\r\n        name: \"Model Term Sheet\",\r\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-term-sheet.pdf`\r\n    }\r\n];\r\n\r\nclass FounderCatalyst extends Component<FounderCatalystProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        width: \"100%\"\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={5}\r\n                                        lg={4}\r\n                                        xl={3}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"center\"\r\n                                            width=\"100%\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Image\r\n                                                src={founderCatalystLogo}\r\n                                                alt=\"Founder Catalyst Logo\"\r\n                                                width=\"100%\"\r\n                                                height=\"auto\"\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        </Box>\r\n                                    </Col>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={7}\r\n                                        lg={8}\r\n                                        xl={9}\r\n                                    >\r\n                                        <Box\r\n                                            display=\"flex\"\r\n                                            flexDirection=\"column\"\r\n                                            justifyContent=\"center\"\r\n                                            alignItems=\"start\"\r\n                                            height=\"100%\"\r\n                                            paddingX=\"25px\"\r\n                                        >\r\n                                            <Box\r\n                                                marginY=\"30px\"\r\n                                            >\r\n                                                <Typography\r\n                                                    variant=\"h4\"\r\n                                                    align=\"left\"\r\n                                                >\r\n                                                    Founder Catalyst\r\n                                                </Typography>\r\n                                            </Box>\r\n                                            <Typography\r\n                                                variant=\"body1\"\r\n                                                align=\"left\"\r\n                                            >\r\n                                                Legal paperwork for founders raising investment.\r\n                                                <br/><br/>\r\n                                                A collection of resources to help entrepreneurs better understand the\r\n                                                legal requirements when equity fundraising. This content is kindly\r\n                                                provided by our friends at FounderCatalyst.\r\n                                                <br/><br/>\r\n                                                When raising investment for your business, the legal journey can be\r\n                                                slow,\r\n                                                frustrating and expensive. When do you need a lawyer? How do you find a\r\n                                                good one? How can you afford them? This page aims to demystify some of\r\n                                                the process by showing you what documents you and your investors likely\r\n                                                to need as part of your fund-raising process.\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Tips */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    8 reasons why founders use FounderCatalyst’s platform\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <ol>\r\n                                        <li>\r\n                                            Save over £3,500. The traditional lawyer approach costs between £5,000 to\r\n                                            £10,000. FounderCatalyst is £1,495 plus VAT, fixed!\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Simplifying the legal process. The FounderCatalyst platform is designed for\r\n                                            founders, to be as simple and intuitive to use as possible. The platform\r\n                                            works by asking you a series of questions in a logical order, with detailed\r\n                                            explanations alongside.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Up-to-date legal documents. Trusted documents based on the British Venture\r\n                                            Capital Association’s (BVCA) model documents, used by many of the UK’s\r\n                                            leading law firms.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            By using the FounderCatalyst platform, angel investors know you are more\r\n                                            likely to be ‘investment ready’ and due diligence will be easier. A real\r\n                                            differentiator for you in the crowded funding market.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Time is risk. The conventional legal approach can be slow and frustrating.\r\n                                            By using the FounderCatalyst platform, get your legals completed in as\r\n                                            little as 30 minutes. Updates in minutes rather than days. Deal momentum is\r\n                                            key to your funding success.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Unsure and still want to use an advisor? No problem. By using both founder\r\n                                            and advisor roles on the platform, your trusted advisor can help as much or\r\n                                            as little as you want – so you still achieve significant time and cost\r\n                                            savings.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            EIS and SEIS advance assurance a must? Proven expertise on hand to help you\r\n                                            achieve this important tax relief for your investors, at no extra charge.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            Invest West has negotiated a further 10% discount for our members. Please\r\n                                            sign up via the button below to receive your discount.\r\n                                            <br/><br/>\r\n                                            <CustomLink\r\n                                                url=\"http://www.foundercatalyst.com/v/INVESTWEST\"\r\n                                                target=\"_blank\"\r\n                                                color=\"none\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={false}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        bgcolor=\"#31C2DE\"\r\n                                                        color=\"white\"\r\n                                                        clone\r\n                                                    >\r\n                                                        <Button\r\n                                                            variant=\"contained\"\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                        >\r\n                                                            10% Discount\r\n                                                        </Button>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        </li>\r\n                                    </ol>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What documents are you and your investors likely to need?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <ol>\r\n                                        <li>\r\n                                            <b>Initial Term Sheet:</b> this summarises all the key points of the deal\r\n                                            you are offering to potential investors.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Founder Service Agreement:</b> one for each founder - it is an agreement\r\n                                            between you and the company, very similar to an employment contract.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>IP Assignment Letter:</b> this ensures that all intellectual property\r\n                                            relevant to the company has been transferred by you and other founders to\r\n                                            the company itself.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Subscription and Shareholders' Agreement (SSA):</b> this document details\r\n                                            the agreement between you and your fellow founders, the company, any\r\n                                            existing shareholders and your new investors.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Articles of Association:</b> this document works alongside the SSA and\r\n                                            contains the company's constitution.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Cap Table:</b> one for before investment and one for after. These\r\n                                            provide details of your current and future shareholders.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Resolutions:</b> for both shareholders and directors. These formally\r\n                                            allow the company to take on the new investment you are seeking.\r\n                                        </li>\r\n                                        <br/>\r\n                                        <li>\r\n                                            <b>Disclosure Letter:</b> this enables you to formally disclose any issues\r\n                                            relating to your business to your potential investors.\r\n                                        </li>\r\n                                    </ol>\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        founderCatalystResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    FounderCatalyst was created by a team of successful entrepreneurs, angel investors\r\n                                    and lawyers to simplify and accelerate the early-stage investment legal journey.\r\n                                    <br/><br/>\r\n                                    FounderCatalyst’s aim is to be the trusted legal platform of choice, simplifying and\r\n                                    managing the funding process, raising everyone’s chances of success.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"row\"\r\n                                    justifyContent=\"center\"\r\n                                >\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/justynwaterworth/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={justynWaterworthImg}\r\n                                                alt=\"Justyn Waterworth\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/samsimpson1/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={samSimpsonImg}\r\n                                                alt=\"Sam Simpson\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Box\r\n                                        width=\"25px\"\r\n                                    />\r\n                                    <CustomLink\r\n                                        url=\"https://www.linkedin.com/in/charlesfrankspeechlys/\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={charlesFrankImg}\r\n                                                alt=\"Charles Frank\"\r\n                                                width={MediaQueryState.isMobile ? 100 : 145}\r\n                                                height={MediaQueryState.isMobile ? 100 : 145}\r\n                                                style={{\r\n                                                    objectFit: \"cover\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#31C2DE\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Founder Catalyst\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"justyn@foundercatalyst.com\", \"sam@foundercatalyst.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FounderCatalyst);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\ninterface GrantFundingProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\nconst grantFundingLogo: string = `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`;\r\n\r\ninterface GrantFundingResource {\r\n    name: string;\r\n    url: string;\r\n    img: string;\r\n}\r\n\r\nconst grantFundingResources: GrantFundingResource[] = [\r\n    {\r\n        name: \"Our Services Brochure\",\r\n        url: \"https://drive.google.com/open?id=1-GiFZT-maCglNUo-7UWJrezpXL64hLz2\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/our-services-brochure.png`\r\n    },\r\n    {\r\n        name: \"The Grant Report 2020\",\r\n        url: \"https://drive.google.com/open?id=1Wz-1dDroReh4s7UspQTQJ-tSafNnv7eg\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/the-grant-report-2020.png`\r\n    },\r\n    {\r\n        name: \"Blog - Are You Missing Out on R&D Tax Credits?\",\r\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-are-you-missing-out-on-rd-tax-credits.png`\r\n    },\r\n    {\r\n        name: \"Blog - When is the Right Time to Apply for Grant Funding?\",\r\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-when-is-the-right-time-to-apply-for-grant-funding.png`\r\n    },\r\n    {\r\n        name: \"Granted Consultancy Introduction\",\r\n        url: \"https://vimeo.com/317446864\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/granted-consultancy-introduction.png`\r\n    },\r\n    {\r\n        name: \"How to Know If Your Project is Eligible for R&D Grant Funding\",\r\n        url: \"https://vimeo.com/317450389\",\r\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/how-to-know-if-your-project-is-eligible-for-rd-grant-funding.png`\r\n    }\r\n];\r\n\r\nclass GrantFunding extends Component<GrantFundingProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{span: 10, offset: 1}}\r\n                    lg={{span: 8, offset: 2}}\r\n                    xl={{span: 6, offset: 3}}\r\n                >\r\n                    <Paper>\r\n                        <Box\r\n                            padding=\"20px\"\r\n                        >\r\n                            {/** Header */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                                width=\"100%\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h4\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Grant Funding\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What are the Benefits of Grant Funding?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        There are two main types of grants:\r\n                                        <ol>\r\n                                            <li>\r\n                                                Capital/Business Growth grants and\r\n                                            </li>\r\n                                            <li>\r\n                                                R&D grants.\r\n                                            </li>\r\n                                        </ol>\r\n                                        Using Business Growth grants enables bigger, more impactful projects to be\r\n                                        realised by covering capital expenditure e.g. buildings or machinery, with\r\n                                        project success often being predicated on job growth.\r\n                                        <br/><br/>\r\n                                        Research and Development (R&D) grants allow a significant reduction in an\r\n                                        innovative product’s time to market, beating the competition and establishing\r\n                                        first-to-market status. This can have a pronounced impact on your business\r\n                                        through the increase of commercial returns and subsequent business growth.\r\n                                        <br/><br/>\r\n                                        Other benefits of grant funding include:\r\n                                        <br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                No Debt - no costs or need to provide security\r\n                                            </li>\r\n                                            <li>\r\n                                                No Equity giveaway - ensuring you retain control\r\n                                            </li>\r\n                                            <li>\r\n                                                Access to Partners – funding may cover the costs of academic and\r\n                                                commercial experts and attract renowned organisations\r\n                                            </li>\r\n                                            <li>\r\n                                                External Validation – via a competitive process that has been\r\n                                                scrutinised, supporting later access to investors.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    How do you know you are eligible for an R&D grant?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"10px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        The main focus when applying for R&D grant funding should be on the outputs of a\r\n                                        defined project. There are typically four categories for assessing project\r\n                                        eligibility:\r\n                                        <br/>\r\n                                        <ol>\r\n                                            <li>\r\n                                                <b>Innovation</b> - Is your R&D project novel, disruptive and innovative\r\n                                                with wider economic, social and environmental impacts?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Scalable</b> - Does your project have high commercial growth (and\r\n                                                ideally\r\n                                                export) potential?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>IP Assignment Letter:</b> this ensures that all intellectual property\r\n                                                relevant to the company has been transferred by you and other founders\r\n                                                to\r\n                                                the company itself.\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Funding</b> - are you seeking £50k-£5m funding for feasibility,\r\n                                                prototyping and/or testing?\r\n                                            </li>\r\n                                            <li>\r\n                                                <b>Business</b> - Have you proven the concept, put a team of (UK/EU)\r\n                                                experts in place and investigated IP protection?\r\n                                            </li>\r\n                                        </ol>\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    What Does the Application Process Typically Look Like?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        As a guide, it typically takes between 9-12 months from engaging with Granted\r\n                                        Consultancy to first drawdown of grant funds. The process involves taking into\r\n                                        account finding the right funding competition, developing the application,\r\n                                        waiting during the assessment window, progressing through due diligence and then\r\n                                        completing project kick off.\r\n                                    </Typography>\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"50px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Why Use a Grant Funding Consultancy?\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box>\r\n                                    <Typography\r\n                                        align=\"left\"\r\n                                        variant=\"body1\"\r\n                                    >\r\n                                        There are many different factors that will improve your chance of grant funding\r\n                                        success; a grant funding consultancy will know where to find suitable funding,\r\n                                        how to access it successfully and how to use it to best effect. Granted let you\r\n                                        focus on your business, saving you time while we write the grant application for\r\n                                        you.\r\n                                        <br/><br/>\r\n                                        A good consultancy will have pertinent sector expertise, the ability to upskill\r\n                                        at a rapid pace in new technologies, and experience of working with companies of\r\n                                        all sizes.\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Resources\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    flexDirection=\"column\"\r\n                                >\r\n                                    {\r\n                                        grantFundingResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box\r\n                                                        display=\"flex\"\r\n                                                        flexDirection=\"row\"\r\n                                                        alignItems=\"center\"\r\n                                                        marginBottom=\"12px\"\r\n                                                    >\r\n                                                        <Image\r\n                                                            src={resource.img}\r\n                                                            alt={resource.name}\r\n                                                            style={{\r\n                                                                objectFit: \"cover\"\r\n                                                            }}\r\n                                                        />\r\n                                                        <Box\r\n                                                            width=\"10px\"\r\n                                                        />\r\n                                                        <Typography\r\n                                                            variant=\"body1\"\r\n                                                            align=\"left\"\r\n                                                        >\r\n                                                            {resource.name}\r\n                                                        </Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box\r\n                                marginY=\"30px\"\r\n                            >\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box\r\n                                display=\"flex\"\r\n                                flexDirection=\"column\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"h6\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    About us\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"15px\"\r\n                                />\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"justify\"\r\n                                >\r\n                                    Granted Consultancy are an in-house team of funding specialists with a demonstrable\r\n                                    10-year track record of securing non-dilutive funding for innovative companies,\r\n                                    raising over £85m in grant funding and £2.5m in R&D Tax Credits for clients.\r\n                                    <br/><br/>\r\n                                    Our full range of non-dilutive funding services (grant writing, project management,\r\n                                    training and R&D tax credit support) allow our clients to focus on their business.\r\n                                    Our experience covers the full lifespan of business maturities, from start-ups to\r\n                                    multinationals.\r\n                                    <br/><br/>\r\n                                    Granted Consultancy’s expertise spans a variety of cutting-edge technologies with a\r\n                                    focus on four key areas:\r\n                                    <ul>\r\n                                        <li>\r\n                                            AI, Digital and Data\r\n                                        </li>\r\n                                        <li>\r\n                                            Clean-tech and Agri-tech\r\n                                        </li>\r\n                                        <li>\r\n                                            Health, Life Sciences and Education\r\n                                        </li>\r\n                                        <li>\r\n                                            Manufacturing, Mobility and Materials\r\n                                        </li>\r\n                                    </ul>\r\n                                    <br/><br/>\r\n                                    The Granted team thrives on learning about new technologies, innovative business\r\n                                    models and the people behind them – then taking that information and translating it\r\n                                    into a language and format that funders can understand.\r\n                                </Typography>\r\n                                <Box\r\n                                    height=\"40px\"\r\n                                />\r\n                                <Box>\r\n                                    <CustomLink\r\n                                        url=\"https://grantedltd.co.uk\"\r\n                                        target=\"_blank\"\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Image\r\n                                                src={grantFundingLogo}\r\n                                                alt=\"logo\"\r\n                                                width={MediaQueryState.isMobile ? \"100%\" : 400}\r\n                                                height=\"100%\"\r\n                                                style={{\r\n                                                    objectFit: \"contain\"\r\n                                                }}\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Box\r\n                                    height=\"60px\"\r\n                                />\r\n\r\n                                <Typography\r\n                                    align=\"left\"\r\n                                    variant=\"body1\"\r\n                                >\r\n                                    <b>Get in touch! </b>\r\n                                    <br/>\r\n                                    If you have an R&D project that you would like to explore funding for,\r\n                                </Typography>\r\n\r\n                                <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    alignItems=\"center\"\r\n                                    marginTop=\"25px\"\r\n                                >\r\n                                    <Box\r\n                                        bgcolor=\"#8DC341\"\r\n                                        color=\"white\"\r\n                                        clone\r\n                                    >\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            className={css(sharedStyles.no_text_transform)}\r\n                                            onClick={() => toggleContactResourceDialog()}\r\n                                        >\r\n                                            Contact us\r\n                                        </Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box\r\n                                    height=\"20px\"\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Grant Funding\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"info@grantedltd.co.uk\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"dangkhoa.dk19@gmail.com\"\r\n                        : \"help@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GrantFunding);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ResourcesState} from \"../../ResourcesReducer\";\r\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\r\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {AttachFile} from \"@material-ui/icons\";\r\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\r\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\r\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\ninterface MerixStudioProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ResourcesLocalState: ResourcesState;\r\n    toggleContactResourceDialog: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResourcesLocalState: state.ResourcesLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\r\n    }\r\n}\r\n\r\nconst MerixSolution: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-1.png`;\r\nconst MerixSolution3: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-4.jpg`;\r\n\r\n\r\n\r\ninterface MerixStudioResource {\r\n    name: string;\r\n    url: string;\r\n}\r\n\r\nconst MerixStudioResources: MerixStudioResource[] = [\r\n    {\r\n        name: \"Minimum Viable Product uncovered\",\r\n        url: \"https://content.merixstudio.com/insights/minimum-viable-product-uncovered-what-it-really-an/?theme=startups\"\r\n    },\r\n    {\r\n        name: \"The right solution for your product launch\",\r\n        url: \"https://learn.merixstudio.com/product-launch-ebook\"\r\n    },\r\n    {\r\n        name: \"Startup DNA\",\r\n        url: \"https://www.merixstudio.com/services/startup-dna/\"\r\n    },\r\n    {\r\n        name: \"How to launch with a bang\",\r\n        url: \"https://content.merixstudio.com/insights/how-to-launch-a-product-with-a-bang/\"\r\n    },\r\n    {\r\n        name: \"State of early-stage startups 2021\",\r\n        url: \"https://content.merixstudio.com/insights/early-stage-startups-2021-report/\"\r\n    },\r\n    {\r\n        name: \"Startup DNA, turn your idea into a prototype\",\r\n        url: \"https://content.merixstudio.com/insights/startup-dna-turn-your-idea-prototype/\"\r\n    },\r\n    {\r\n        name: \"If you're passionate about an idea give it a try\",\r\n        url: \"https://content.merixstudio.com/insights/if-youre-passionate-about-an-idea-give-it-a-try-in/\"\r\n    },\r\n    {\r\n        name: \"Prototype is just one piece of the puzzle\",\r\n        url: \"https://content.merixstudio.com/insights/prototype-just-one-piece-puzzle-interview-truman-d/\"\r\n    },\r\n    {\r\n        name: \"Pimp your pitch deck\",\r\n        url: \"https://content.merixstudio.com/insights/pimp-your-pitch-deck/\"\r\n    },\r\n    {\r\n        name: \"Building prototype in a UK based startup\",\r\n        url: \"https://content.merixstudio.com/insights/building-prototype-uk-based-startup/\"\r\n    },\r\n];\r\n\r\nclass MerixStudio extends Component<MerixStudioProps, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            toggleContactResourceDialog\r\n        } = this.props;\r\n\r\n        return <Box\r\n            height=\"100%\"\r\n            minHeight=\"100vh\"\r\n            bgcolor={colors.grey[\"200\"]}\r\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} xl={{span: 6, offset: 3}}>\r\n                    <Paper>\r\n                        <Box padding=\"20px\">\r\n                            {/** Header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\r\n                                <Typography variant=\"h4\" align=\"left\">Merixstudio</Typography>\r\n                            </Box>\r\n                            <Box>\r\n                                <Typography align=\"left\" variant=\"body1\">Merixstudio’s key expertise is the delivery of high-quality and performant web applications and cross-platform mobile apps. Based on the needs of our clients, we can support them in end-to-end product development or seamlessly extend their in-house team of engineers.</Typography>\r\n                                <CustomLink\r\n                                    url=\"https://www.merixstudio.com/contact/\"\r\n                                    target=\"_blank\"\r\n                                    color=\"none\"\r\n                                    activeColor=\"none\"\r\n                                    activeUnderline={false}\r\n                                    component=\"a\"\r\n                                    childComponent={\r\n                                        <Box bgcolor=\"#31C2DE\" color=\"white\" marginY=\"20px\" clone>\r\n                                            <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)}>Contact Us</Button>\r\n                                        </Box>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Box marginY=\"30px\">\r\n                                    <Typography variant=\"h6\" align=\"left\">The right solution for your product launch</Typography>\r\n                                </Box>\r\n                                    <Typography variant=\"body1\" align=\"center\">THE ULTIMATE GUIDE TO COMPOSING</Typography>\r\n                                    <Typography variant=\"body1\" align=\"center\">THE RIGHT SOLUTION FOR YOUR PRODUCT LAUNCH</Typography>\r\n                                <Box marginY=\"30px\">\r\n                                    <Typography variant=\"body1\" align=\"left\">Although similar at first glance, the three concepts differ considerably - especially in terms of the purpose each of them serves. The choice of which one to start with depends on many factors, including your current state of knowledge or the budget you can spend on a given project.</Typography>\r\n                                </Box>\r\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution} alt=\"Merix image\"/>\r\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution3} alt=\"Merix image\"/>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** Resources */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">Resources</Typography>\r\n                                <Box height=\"20px\"/>\r\n                                <Box display=\"flex\" flexDirection=\"column\">\r\n                                    {\r\n                                        MerixStudioResources.map((resource: any) => (\r\n                                            <CustomLink\r\n                                                key={resource.name}\r\n                                                url={resource.url}\r\n                                                target=\"_blank\"\r\n                                                color=\"black\"\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline={true}\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"12px\">\r\n                                                        <AttachFile fontSize=\"small\"/>\r\n                                                        <Box width=\"10px\"/>\r\n                                                        <Typography variant=\"body1\" align=\"left\">{resource.name}</Typography>\r\n                                                    </Box>\r\n                                                }\r\n                                            />\r\n                                        ))\r\n                                    }\r\n                                </Box>\r\n                            </Box>\r\n\r\n                            {/** Divider */}\r\n                            <Box marginY=\"30px\">\r\n                                <Divider/>\r\n                            </Box>\r\n\r\n                            {/** About us */}\r\n                            <Box display=\"flex\" flexDirection=\"column\">\r\n                                <Typography variant=\"h6\" align=\"left\">About us</Typography>\r\n                                <Typography variant=\"body1\" align=\"justify\">\r\n                                    <br/><br/>\r\n                                    Merixstudio’s key expertise is the delivery of high-quality and performant web applications\r\n                                    and cross-platform mobile apps. Based on the needs of our clients, we can support them in\r\n                                    end-to-end product development or seamlessly extend their in-house team of engineers.\r\n                                    <br/><br/>\r\n                                    <ul>\r\n                                        <li>200+ engineers</li>\r\n                                        <li>250 clients supported</li>\r\n                                    </ul>\r\n                                </Typography>\r\n\r\n                                <Typography align=\"left\" variant=\"body1\">\r\n                                    <b>Get in touch!</b>\r\n                                    <br/>\r\n                                </Typography>\r\n\r\n                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"25px\">\r\n                                    <Box bgcolor=\"#8DC341\" color=\"white\" clone>\r\n                                        <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => toggleContactResourceDialog()}>Contact us</Button>\r\n                                    </Box>\r\n                                </Box>\r\n                                <Box height=\"20px\"/>\r\n                            </Box>\r\n                        </Box>\r\n                    </Paper>\r\n                </Col>\r\n            </Row>\r\n\r\n            <ContactResourceDialog\r\n                resourceName=\"Merix Studio\"\r\n                resourceEmail={\r\n                    isProductionEnvironment()\r\n                        ? [\"g.spychalski@merixstudio.com\"]\r\n                        : isDevelopmentEnvironment()\r\n                        ? \"j.kubczak@merixstudio.com\"\r\n                        : \"support@investwest.online\"\r\n                }\r\n            />\r\n\r\n            <FeedbackSnackbarNew/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MerixStudio);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport Keltie from \"./pages/keltie/Keltie\";\r\nimport {Box, Card, Typography} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport ResourceItem from \"./ResourceItem\";\r\nimport FounderCatalyst from \"./pages/founder-catalyst/FounderCatalyst\";\r\nimport GrantFunding from \"./pages/grant-funding/GrantFunding\";\r\nimport MerixStudio from \"./pages/merix-studio/merixStudio\";\r\n\r\n\r\ninterface ResourcesProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nexport interface Resource {\r\n    name: string;\r\n    logo: string;\r\n    page: React.ReactNode;\r\n}\r\n\r\nexport const resources: Resource[] = [\r\n    {\r\n        name: \"Intellectual Property\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`,\r\n        page: <Keltie/>\r\n    },\r\n    {\r\n        name: \"Fundraising Legals\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`,\r\n        page: <FounderCatalyst/>\r\n    },\r\n    {\r\n        name: \"Grant Funding\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`,\r\n        page: <GrantFunding/>\r\n    },\r\n    {\r\n        name: \"Product Development\",\r\n        logo: `${process.env.PUBLIC_URL}/resources/merix-studio/merix-logo.png`,\r\n        page: <MerixStudio/>\r\n    }\r\n];\r\n\r\nclass Resources extends Component<ResourcesProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\r\n        >\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 4, offset: 4}}>\r\n                    <Card elevation={0}>\r\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} color=\"white\" paddingY=\"28px\">\r\n                            <Typography variant=\"h6\" align=\"center\">Resources on Invest West</Typography>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Loader */}\r\n            {/*{*/}\r\n            {/*    !isFetchingGroups(ExploreGroupsLocalState)*/}\r\n            {/*        ? null*/}\r\n            {/*        : <Row*/}\r\n            {/*            noGutters*/}\r\n            {/*        >*/}\r\n            {/*            <Col*/}\r\n            {/*                xs={12}*/}\r\n            {/*                sm={12}*/}\r\n            {/*                md={12}*/}\r\n            {/*                lg={12}*/}\r\n            {/*            >*/}\r\n            {/*                <Box*/}\r\n            {/*                    display=\"flex\"*/}\r\n            {/*                    marginY=\"80px\"*/}\r\n            {/*                    justifyContent=\"center\"*/}\r\n            {/*                >*/}\r\n            {/*                    <BeatLoader*/}\r\n            {/*                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}*/}\r\n            {/*                    />*/}\r\n            {/*                </Box>*/}\r\n            {/*            </Col>*/}\r\n            {/*        </Row>*/}\r\n            {/*}*/}\r\n\r\n            {/** Resources area */}\r\n            <Box marginTop=\"30px\">\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Row>\r\n                            {\r\n                                resources\r\n                                    .map(resource =>\r\n                                        <Col key={resource.name} xs={12} sm={12} md={3}>\r\n                                            <ResourceItem resource={resource}/>\r\n                                        </Col>\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Box>\r\n\r\n            {/** Pagination */}\r\n            {/*{*/}\r\n            {/*    // !successfullyFetchedGroups(ExploreGroupsLocalState)*/}\r\n            {/*    //     ? null*/}\r\n            {/*    //     : paginationPages === 1*/}\r\n            {/*    //     ? null*/}\r\n            {/*    //     :*/}\r\n            {/*        <Row*/}\r\n            {/*            noGutters*/}\r\n            {/*        >*/}\r\n            {/*            <Col*/}\r\n            {/*                xs={12}*/}\r\n            {/*                sm={12}*/}\r\n            {/*                md={12}*/}\r\n            {/*                lg={12}*/}\r\n            {/*            >*/}\r\n            {/*                <Box*/}\r\n            {/*                    display=\"flex\"*/}\r\n            {/*                    justifyContent=\"center\"*/}\r\n            {/*                    marginTop=\"55px\"*/}\r\n            {/*                >*/}\r\n            {/*                    <Pagination*/}\r\n            {/*                        count={0}*/}\r\n            {/*                        page={0}*/}\r\n            {/*                        color=\"primary\"*/}\r\n            {/*                        //onChange={}*/}\r\n            {/*                    />*/}\r\n            {/*                </Box>*/}\r\n            {/*            </Col>*/}\r\n            {/*        </Row>*/}\r\n            {/*}*/}\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Resources);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport Sidebar from \"react-sidebar\";\r\nimport {Badge, IconButton, Typography} from \"@material-ui/core\";\r\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport Menu from \"@material-ui/icons/Menu\";\r\nimport {HashLoader} from \"react-spinners\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\n\r\nimport UploadingDialog from \"../../shared-components/uploading-dialog/UploadingDialog\";\r\nimport EditImageDialog from \"../../shared-components/edit-image/EditImageDialog\";\r\nimport EditVideoDialog from \"../../shared-components/edit-video/EditVideoDialog\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport ChangePasswordPage from \"../../shared-components/change-password/ChangePasswordPage\";\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    HOME_TAB,\r\n    MY_OFFERS_TAB,\r\n    PROFILE_TAB,\r\n    RESOURCES_TAB\r\n} from \"../../shared-components/nav-bars/SidebarContent\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport ProfileTab from \"../../shared-components/profile/Profile\";\r\nimport NotificationsBox from \"../../shared-components/notifications/NotificationsBox\";\r\n\r\nimport * as colors from \"../../values/colors\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport queryString from \"query-string\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\r\nimport * as editUserActions from \"../../redux-store/actions/editUserActions\";\r\nimport * as notificationsActions from \"../../redux-store/actions/notificationsActions\";\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\r\n        notificationBellRef: state.manageNotifications.notificationBellRef,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\r\n        notificationRefUpdated: (ref) => dispatch(notificationsActions.notificationRefUpdated(ref)),\r\n    }\r\n};\r\n\r\nclass IssuerDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n        this.notificationBell = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n\r\n            notificationRefUpdated\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_ISSUER : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n\r\n        notificationRefUpdated(this.notificationBell.current);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork,\r\n\r\n            notificationRefUpdated\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n\r\n        notificationRefUpdated(this.notificationBell.current);\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            user,\r\n            editUserProfile_userEdited,\r\n\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser\r\n        } = this.props;\r\n\r\n        if (!user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\r\n            return;\r\n        }\r\n\r\n        if (!editUserProfile_userEdited) {\r\n            // initialize a copied instance of the user for editing\r\n            editUserProfile_setOriginalUserAndEditedUser(user);\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(user);\r\n    };\r\n\r\n    /**\r\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\r\n     */\r\n    renderPageContent = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * MY OFFERS TAB\r\n         */\r\n        if (params.tab === MY_OFFERS_TAB) {\r\n            return (\r\n                <div\r\n                    style={{\r\n                        margin: 30\r\n                    }}\r\n                >\r\n                    <OffersTable/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * PROFILE TAB\r\n         */\r\n        if (params.tab === PROFILE_TAB) {\r\n            return (\r\n                <ProfileTab/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroupsTab/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     */\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n\r\n            notifications,\r\n            notificationsAnchorEl,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Sidebar\r\n                sidebar={\r\n                    <SidebarContent dashboardProps={this.props}/>\r\n                }\r\n                shadow={false}\r\n                open={sidebarOpen}\r\n                docked={sidebarDocked}\r\n                onSetOpen={() => toggleSidebar(true)}\r\n                transitions\r\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}\r\n                }}>\r\n\r\n                <Container fluid style={{padding: 0}}>\r\n                    {/** Header */}\r\n                    <Row noGutters>\r\n                        <Col xs={12} sm={12} md={12} lg={12}>\r\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                                style={{\r\n                                    backgroundColor:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}>\r\n\r\n                                <Row style={{width: \"100%\"}} noGutters>\r\n                                    <Col xs={10} sm={10} md={11} lg={11}>\r\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                            {\r\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                    <Menu/>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                this.renderPageTitle()\r\n                                            }\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                            <div ref={this.notificationBell}>\r\n                                            <IconButton onClick={toggleNotifications}>\r\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                                </Badge>\r\n                                            </IconButton>\r\n                                            </div>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {\r\n                        this.renderPageContent()\r\n                    }\r\n\r\n                    {/** Notifications box */}\r\n                    {notificationsAnchorEl !== null &&\r\n                        <NotificationsBox/>\r\n                    }\r\n\r\n                    {/** Uploading dialog */}\r\n                    <UploadingDialog/>\r\n\r\n                    {/** Edit image dialog */}\r\n                    <EditImageDialog/>\r\n\r\n                    {/** Edit video dialog */}\r\n                    <EditVideoDialog/>\r\n                </Container>\r\n            </Sidebar>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the title of the page\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = \"\";\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case MY_OFFERS_TAB:\r\n                title = MY_OFFERS_TAB;\r\n                break;\r\n            case PROFILE_TAB:\r\n                title = PROFILE_TAB;\r\n                break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IssuerDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    }\r\n});\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport Sidebar from 'react-sidebar';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {Badge, IconButton, Typography} from '@material-ui/core';\r\nimport Menu from '@material-ui/icons/Menu';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    HOME_TAB,\r\n    PROFILE_TAB,\r\n    RESOURCES_TAB,\r\n} from '../../shared-components/nav-bars/SidebarContent';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport ProfileTab from '../../shared-components/profile/Profile';\r\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\r\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\r\nimport UploadingDialog from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport EditImageDialog from '../../shared-components/edit-image/EditImageDialog';\r\nimport UploadVideoDialog from '../../shared-components/edit-video/EditVideoDialog';\r\n\r\nimport queryString from 'query-string';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\r\n        notificationBellRef: state.manageNotifications.notificationBellRef,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\r\n        notificationRefUpdated: (ref) => dispatch(notificationsActions.notificationRefUpdated(ref)),\r\n    }\r\n};\r\n\r\nclass InvestorDashboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.notificationBell = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n\r\n            notificationRefUpdated\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_INVESTOR : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n\r\n        notificationRefUpdated(this.notificationBell.current);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork,\r\n\r\n            notificationRefUpdated\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n\r\n        notificationRefUpdated(this.notificationBell.current);\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            user,\r\n            editUserProfile_userEdited,\r\n\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser\r\n        } = this.props;\r\n\r\n        if (!user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\r\n            return;\r\n        }\r\n\r\n        if (!editUserProfile_userEdited) {\r\n            // initialize a copied instance of the user for editing\r\n            editUserProfile_setOriginalUserAndEditedUser(user);\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(user);\r\n    };\r\n\r\n    /**\r\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\r\n     */\r\n    renderPageContent = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * PROFILE TAB\r\n         */\r\n        if (params.tab === PROFILE_TAB) {\r\n            return (\r\n                <ProfileTab/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroupsTab/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n\r\n            notifications,\r\n            notificationsAnchorEl,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Sidebar\r\n                sidebar={\r\n                    <SidebarContent dashboardProps={this.props}/>\r\n                }\r\n                open={sidebarOpen}\r\n                docked={sidebarDocked}\r\n                onSetOpen={() => toggleSidebar(true)}\r\n                transitions\r\n                shadow={false}\r\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}}}>\r\n\r\n                <Container fluid style={{padding: 0}}>\r\n                    {/** Header */}\r\n                    <Row noGutters>\r\n                        <Col xs={12} sm={12} md={12} lg={12}>\r\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                                style={{\r\n                                    backgroundColor:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}>\r\n                                <Row noGutters style={{width: \"100%\"}}>\r\n                                    {/** Page title */}\r\n                                    <Col xs={10} sm={10} md={11} lg={11}>\r\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                            {\r\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                    <Menu/>\r\n                                                </IconButton>\r\n                                            }\r\n                                            {\r\n                                                this.renderPageTitle()\r\n                                            }\r\n                                        </FlexView>\r\n                                    </Col>\r\n\r\n                                    {/** Notification icon */}\r\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\r\n                                            <div ref={this.notificationBell}>\r\n                                            <IconButton onClick={toggleNotifications}>\r\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                                </Badge>\r\n                                            </IconButton>\r\n                                            </div>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                </Row>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {\r\n                        this.renderPageContent()\r\n                    }\r\n\r\n                    {/** Notifications box */}\r\n                    {notificationsAnchorEl !== null &&\r\n                        <NotificationsBox/>\r\n                    }\r\n\r\n                    {/** Uploading dialog */}\r\n                    <UploadingDialog/>\r\n\r\n                    {/** Edit image dialog */}\r\n                    <EditImageDialog/>\r\n\r\n                    {/** Upload video dialog */}\r\n                    <UploadVideoDialog/>\r\n\r\n                </Container>\r\n            </Sidebar>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render page's title\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = '';\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case PROFILE_TAB:\r\n                title = PROFILE_TAB;\r\n                break;\r\n            // case MY_PLEDGES_TAB:\r\n            //     title = MY_PLEDGES_TAB;\r\n            //     break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvestorDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    }\r\n});","import axios from \"axios\";\r\nimport {ApiRoutes} from \"../api/Api.tsx\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\n\r\n/**\r\n * Check is an email address is valid\r\n *\r\n * @param email\r\n * @returns {boolean}\r\n */\r\nexport const isValidEmailAddress = (email) => {\r\n    let RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return RegExp.test(email.trim().toLowerCase());\r\n}\r\n\r\nexport const EMAIL_ENQUIRY = 0;\r\nexport const EMAIL_INVITATION = 1;\r\n\r\nexport const sendEmail = async (\r\n    {\r\n        serverURL,\r\n        emailType,\r\n        data\r\n    }\r\n) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let requestConfig = {};\r\n\r\n        try {\r\n            // make authenticated request when sending invitation email\r\n            if (emailType === EMAIL_INVITATION) {\r\n                // get current user's id token\r\n                const idToken = await firebase.auth().currentUser.getIdToken(true);\r\n\r\n                requestConfig = {\r\n                    headers: {\r\n                        'Authorization': idToken\r\n                    }\r\n                };\r\n            }\r\n\r\n            await axios\r\n                .post(\r\n                    `${serverURL}${ApiRoutes.sendEmailRoute}`,\r\n                    {\r\n                        emailType,\r\n                        emailInfo: data\r\n                    },\r\n                    requestConfig\r\n                );\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as myUtils from '../../utils/utils';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport {\r\n    SEND_INVITATION_ERROR_HAPPENED,\r\n    SEND_INVITATION_INVITED_BEFORE,\r\n    SEND_INVITATION_PROCESSING,\r\n    SEND_INVITATION_SUCCESS,\r\n    SEND_INVITATION_USER_CANNOT_BE_INVITED\r\n} from '../../pages/admin/components/InvitationDialog';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport * as utils from \"../../utils/utils\";\r\n\r\nexport const TOGGLE_INVITATION_DIALOG = 'TOGGLE_INVITATION_DIALOG';\r\nexport const toggleInvitationDialog = () => {\r\n    return {\r\n        type: TOGGLE_INVITATION_DIALOG\r\n    }\r\n};\r\n\r\nexport const INVITATION_DIALOG_INPUT_CHANGED = 'INVITATION_DIALOG_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return {\r\n        type: INVITATION_DIALOG_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const INVITATION_DIALOG_SEND_BUTTON_CLICKED = 'INVITATION_DIALOG_SEND_BUTTON_CLICKED';\r\nexport const INVITATION_DIALOG_SEND_RESULT_CHANGED = 'INVITATION_DIALOG_SEND_RESULT_CHANGED';\r\nexport const sendInvitation = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: INVITATION_DIALOG_SEND_BUTTON_CLICKED\r\n        });\r\n\r\n        const {\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            userType\r\n        } = getState().manageInvitationDialog;\r\n\r\n        if (title === DB_CONST.USER_TITLES[0]\r\n            || firstName.trim().length === 0\r\n            || lastName.trim().length === 0\r\n            || email.trim().length === 0\r\n            || userType.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n            result: SEND_INVITATION_PROCESSING\r\n        });\r\n\r\n        //TODO: If the invitation has been sent to this user, check if this user belongs to this group\r\n        // If yes, display a message saying this user is already an investor/issuer in this group\r\n        // Otherwise, display a message saying this user is an investor/issuer in ABC group.\r\n        // Then, ask if the admin wants to invite this user to his group?\r\n        // Yes --> Send a notification to the user\r\n        // No --> Dismiss\r\n\r\n        const currentGroupAdmin = getState().auth.user;\r\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\r\n\r\n        realtimeDBUtils\r\n            .loadAngelNetworksInvitedAUser(email)\r\n            .then(angelNetworksInvitedUser => {\r\n\r\n                let invitedBefore = false;\r\n                let userIsAnIssuerOfAnotherGroup = false;\r\n\r\n                for (let angelNetworkInvitedUser of angelNetworksInvitedUser) {\r\n                    // user has been invited by this group before\r\n                    if (angelNetworkInvitedUser.Invitor.anid === groupProperties.anid) {\r\n                        invitedBefore = true;\r\n                        dispatch({\r\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                            result: SEND_INVITATION_INVITED_BEFORE,\r\n                            extraInfo: angelNetworkInvitedUser.Invitee\r\n                        });\r\n                        break;\r\n                    }\r\n\r\n                    // user is an issuer of another group\r\n                    if (angelNetworkInvitedUser.Invitee.type === DB_CONST.TYPE_ISSUER && angelNetworkInvitedUser.Invitor.anid !== groupProperties.anid) {\r\n                        userIsAnIssuerOfAnotherGroup = true;\r\n                        dispatch({\r\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                            result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\r\n                            extraInfo: null\r\n                        });\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (invitedBefore) {\r\n                    return;\r\n                }\r\n\r\n                if (userIsAnIssuerOfAnotherGroup) {\r\n                    return;\r\n                }\r\n\r\n                // the user has not been invited before by this group\r\n                if (!invitedBefore) {\r\n                    // check if user is an admin\r\n                    realtimeDBUtils\r\n                        .doesUserExist(email)\r\n                        .then(result => {\r\n                            // user is an admin\r\n                            if (result.userExists && result.hasOwnProperty('userIsAnAdmin') && result.userIsAnAdmin) {\r\n                                dispatch({\r\n                                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                    result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\r\n                                    extraInfo: null\r\n                                });\r\n                                return;\r\n                            }\r\n\r\n                            const invitedID = firebase\r\n                                .database()\r\n                                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                                .push()\r\n                                .key;\r\n\r\n                            const invitedUser = {\r\n                                title: title,\r\n                                firstName: firstName,\r\n                                lastName: lastName,\r\n                                email: email.toLowerCase(),\r\n                                type: parseInt(userType),\r\n                                // registered or not registered\r\n                                status: DB_CONST.INVITED_USER_NOT_REGISTERED,\r\n                                // id of this invited user\r\n                                id: invitedID,\r\n                                // date invited\r\n                                invitedDate: myUtils.getCurrentDate(),\r\n                                invitedBy: groupProperties.anid\r\n                            };\r\n\r\n                            // send invitation email via server\r\n                            emailUtils\r\n                                .sendEmail({\r\n                                    serverURL: clubAttributes.serverURL,\r\n                                    emailType: emailUtils.EMAIL_INVITATION,\r\n                                    data: {\r\n                                        groupName: groupProperties.displayName,\r\n                                        groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\r\n                                        groupWebsite: groupProperties.website,\r\n                                        groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\r\n                                        sender: currentGroupAdmin.email,\r\n                                        receiver: invitedUser.email,\r\n                                        receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\r\n                                        userType:\r\n                                            invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                                ?\r\n                                                \"Issuer\"\r\n                                                :\r\n                                                \"Investor\"\r\n                                        ,\r\n                                        signupURL:\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\r\n                                                :\r\n                                                `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\r\n                                    }\r\n                                })\r\n                                .then(() => {\r\n                                    // add invited user to firebase when the email has been successfully sent\r\n                                    firebase\r\n                                        .database()\r\n                                        .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                                        .child(invitedID)\r\n                                        .set(invitedUser)\r\n                                        .then(() => {\r\n\r\n                                            // track invitation sent activity\r\n                                            realtimeDBUtils\r\n                                                .trackActivity({\r\n                                                    userID: currentGroupAdmin.id,\r\n                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                    interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\r\n                                                    interactedObjectID: invitedUser.id,\r\n                                                    activitySummary:\r\n                                                        realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION\r\n                                                            .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\r\n                                                            .replace(\"%group%\", groupProperties.displayName)\r\n                                                            .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\r\n                                                    ,\r\n                                                    action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    ,\r\n                                                    value: invitedUser\r\n                                                });\r\n\r\n                                            dispatch({\r\n                                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                                result: SEND_INVITATION_SUCCESS,\r\n                                                extraInfo: null\r\n                                            });\r\n\r\n                                            dispatch({\r\n                                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                                message: \"Email has been sent.\",\r\n                                                color: \"primary\",\r\n                                                position: \"bottom\"\r\n                                            });\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    dispatch({\r\n                                        type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                        result: SEND_INVITATION_ERROR_HAPPENED,\r\n                                        extraInfo: null\r\n                                    });\r\n\r\n                                    dispatch({\r\n                                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                        message: \"Error happened.\",\r\n                                        color: \"error\",\r\n                                        position: \"bottom\"\r\n                                    });\r\n                                });\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                                result: SEND_INVITATION_ERROR_HAPPENED,\r\n                                extraInfo: null\r\n                            });\r\n\r\n                            dispatch({\r\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                                message: \"Error happened.\",\r\n                                color: \"error\",\r\n                                position: \"bottom\"\r\n                            });\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\r\n                    result: SEND_INVITATION_ERROR_HAPPENED,\r\n                    extraInfo: null\r\n                });\r\n            });\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormLabel,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as invitationDialogActions from '../../../redux-store/actions/invitationDialogActions';\r\n\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const SEND_INVITATION_NONE = 0;\r\nexport const SEND_INVITATION_PROCESSING = 1;\r\nexport const SEND_INVITATION_INVITED_BEFORE = 2;\r\nexport const SEND_INVITATION_USER_CANNOT_BE_INVITED = 3; // user is an issuer in another group or an admin\r\nexport const SEND_INVITATION_ERROR_HAPPENED = 4;\r\nexport const SEND_INVITATION_SUCCESS = 5;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        invitationDialogOpen: state.manageInvitationDialog.invitationDialogOpen,\r\n        title: state.manageInvitationDialog.title,\r\n        firstName: state.manageInvitationDialog.firstName,\r\n        lastName: state.manageInvitationDialog.lastName,\r\n        email: state.manageInvitationDialog.email,\r\n        userType: state.manageInvitationDialog.userType,\r\n        sendButtonClick: state.manageInvitationDialog.sendButtonClick,\r\n        sendResult: state.manageInvitationDialog.sendResult,\r\n        sendStatusExtraInfo: state.manageInvitationDialog.sendStatusExtraInfo\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleInputChanged: (event) => dispatch(invitationDialogActions.handleInputChanged(event)),\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog()),\r\n        sendInvitation: () => dispatch(invitationDialogActions.sendInvitation())\r\n    }\r\n};\r\n\r\nclass InvitationDialog extends Component {\r\n\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            invitationDialogOpen,\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            userType,\r\n            sendButtonClick,\r\n            sendResult,\r\n            sendStatusExtraInfo,\r\n            toggleInvitationDialog,\r\n            handleInputChanged,\r\n            sendInvitation,\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog ref={forwardedRef} open={invitationDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleInvitationDialog} {...other}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">Send invitation email</Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleInvitationDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{ marginTop: 10}}>\r\n                    <FormControl required error={sendButtonClick && title === DB_CONST.USER_TITLES[0]}>\r\n                        <FormLabel>Title</FormLabel>\r\n                        <Select name=\"title\" value={title} margin=\"dense\" input={<OutlinedInput/>} onChange={handleInputChanged}>\r\n                            {\r\n                                DB_CONST.USER_TITLES.map((title, id) => (\r\n                                    <MenuItem\r\n                                        key={id}\r\n                                        value={title}\r\n                                    >\r\n                                        {title}\r\n                                    </MenuItem>\r\n                                ))\r\n                            }\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                    <TextField\r\n                        label=\"First name\"\r\n                        placeholder=\"Write first name here ...\"\r\n                        name=\"firstName\"\r\n                        value={firstName}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && firstName.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <TextField\r\n                        label=\"Last name\"\r\n                        placeholder=\"Write last name here ...\"\r\n                        name=\"lastName\"\r\n                        value={lastName}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && lastName.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <TextField\r\n                        label=\"Email\"\r\n                        placeholder=\"Write email here ...\"\r\n                        name=\"email\"\r\n                        value={email}\r\n                        fullWidth\r\n                        margin=\"normal\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={sendButtonClick && email.length === 0}\r\n                        onChange={handleInputChanged}/>\r\n\r\n                    <FlexView marginTop={20}>\r\n                        <FormControl required error={sendButtonClick && userType.length === 0}>\r\n                            <FormLabel>User type</FormLabel>\r\n                            <RadioGroup row name=\"userType\" value={userType} onChange={handleInputChanged}>\r\n                                <FormControlLabel value={DB_CONST.TYPE_ISSUER.toString()} control={<Radio color='primary'/>} label=\"Issuer\"/>\r\n                                <FormControlLabel value={DB_CONST.TYPE_INVESTOR.toString()} control={<Radio color='primary'/>} label=\"Investor\"/>\r\n                            </RadioGroup>\r\n                        </FormControl>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderRespondCode()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={sendInvitation} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 35}}>Send\r\n                            <SendIcon fontSize=\"small\" style={{marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render send result\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderRespondCode = () => {\r\n        const {\r\n            sendResult,\r\n            sendStatusExtraInfo\r\n        } = this.props;\r\n\r\n        let res = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (sendResult) {\r\n            case SEND_INVITATION_NONE:\r\n                return null;\r\n            case SEND_INVITATION_PROCESSING:\r\n                res.msg = \"Checking...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case SEND_INVITATION_INVITED_BEFORE:\r\n                res.msg =\r\n                    sendStatusExtraInfo.hasOwnProperty('officialUserID')\r\n                        ?\r\n                        `This user is already an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} in your group.`\r\n                        :\r\n                        `You have invited this user as an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} before.`;\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_USER_CANNOT_BE_INVITED:\r\n                res.msg = \"User is an admin or an issuer of another group.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_ERROR_HAPPENED:\r\n                res.msg = \"Error happened. Couldn't invite this user.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case SEND_INVITATION_SUCCESS:\r\n                res.msg = \"Invitation has been sent to this user.\";\r\n                res.color = \"primary\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <Typography\r\n                color={res.color}\r\n                variant=\"subtitle1\"\r\n            >\r\n                {res.msg}\r\n            </Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(\r\n    React.forwardRef((props, ref) => <InvitationDialog {...props} forwardedRef={ref}/>)\r\n);","import * as myUtils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nexport const SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED = 'SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED';\r\nexport const initializeClubAttributesEdited = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED,\r\n            clubAttributes: getState().manageClubAttributes.clubAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_INPUT_CHANGED = 'SUPER_ADMIN_SETTINGS_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const clubAttributesEdited = getState().superAdminSettings.clubAttributesEdited;\r\n        const target = event.target;\r\n\r\n        let isPropertyOfClubAttributes = false;\r\n\r\n        switch (target.type) {\r\n            case 'checkbox':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.checked);\r\n\r\n                    return;\r\n                }\r\n                break;\r\n            case 'radio':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(!isNaN(target.value) ? parseInt(target.value) : target.value);\r\n\r\n                    return;\r\n                }\r\n                break;\r\n            case 'text':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfClubAttributes = true;\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.value);\r\n                }\r\n                break;\r\n            case 'textarea':\r\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfClubAttributes = true;\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n                        .child(target.name)\r\n                        .set(target.value);\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        dispatch({\r\n            type: SUPER_ADMIN_SETTINGS_INPUT_CHANGED,\r\n            name: target.name,\r\n            value: target.type === 'checkbox' ? target.checked : target.value,\r\n            isPropertyOfClubAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED = 'SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED';\r\nexport const handleQuillEditorChanged = (fieldName, content, delta, source, editor) => {\r\n    return (dispatch, getState) => {\r\n        if (editor.getText().trim().length === 0) {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\r\n                fieldName,\r\n                value: {ops: []}\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\r\n                fieldName,\r\n                value: editor.getContents()\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const saveEditedQuill = fieldName => {\r\n    return (dispatch, getState) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(fieldName)\r\n            .set(getState().superAdminSettings.clubAttributesEdited[fieldName])\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\r\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\r\n\r\n        if (isExpanded) {\r\n            dispatch({\r\n                type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                expandedPledgeFAQ: FAQ,\r\n                editExpandedPledgeFAQ: false\r\n            });\r\n        } else {\r\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                    expandedPledgeFAQ: null,\r\n                    editExpandedPledgeFAQ: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\r\nexport const toggleEditExpandedPledgeFAQ = () => {\r\n    return {\r\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\r\nexport const toggleAddNewPledgeFAQ = () => {\r\n    return {\r\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const submitNewPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer\r\n        } = getState().superAdminSettings;\r\n\r\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributes);\r\n\r\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const faq = {\r\n            id: myUtils.getCurrentDate(),\r\n            question: addedPledgeQuestion,\r\n            answer: addedPledgeAnswer\r\n        };\r\n\r\n        if (clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\r\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\r\n        } else {\r\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\r\n        }\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .update(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const saveEditedPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            clubAttributesEdited,\r\n            expandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer\r\n        } = getState().superAdminSettings;\r\n\r\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const editedFAQ = {\r\n            id: expandedPledgeFAQ.id,\r\n            question: editedPledgeQuestion,\r\n            answer: editedPledgeAnswer\r\n        };\r\n\r\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteExistingPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\r\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributesEdited);\r\n\r\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\r\n    }\r\n};\r\n\r\n\r\n","import Api, {ApiRoutes} from \"../Api\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\n\r\nexport default class SystemAttributesRepository {\r\n\r\n    /**\r\n     * Fetch system attributes\r\n     */\r\n    public async getSystemAttributes() {\r\n        return await new Api()\r\n            .request(\"get\", ApiRoutes.retrieveSystemAttributesRoute);\r\n    }\r\n\r\n    /**\r\n     * Update system attributes\r\n     */\r\n    public async updateSystemAttributes(systemAttributes: SystemAttributes) {\r\n        return await new Api()\r\n            .request(\r\n                \"put\",\r\n                ApiRoutes.updateSystemAttributesRoute,\r\n                {\r\n                    requestBody: systemAttributes,\r\n                    queryParameters: null\r\n                }\r\n            );\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\nimport Error from \"../../models/error\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\nimport SystemAttributesRepository from \"../../api/repositories/SystemAttributesRepository\";\r\nimport {setSectors} from \"../../pages/admin/components/manage-sectors/ManageSectorsActions\";\r\n\r\nexport enum ManageSystemAttributesEvents {\r\n    LoadingSystemAttributes = \"ManageSystemAttributesEvents.LoadingSystemAttributes\",\r\n    FinishedLoadingSystemAttributes = \"ManageSystemAttributesEvents.FinishedLoadingSystemAttributes\"\r\n}\r\n\r\nexport interface ManageSystemAttributesAction extends Action {\r\n}\r\n\r\nexport interface FinishedLoadingSystemAttributesAction extends ManageSystemAttributesAction {\r\n    systemAttributes: SystemAttributes | null;\r\n    error?: Error;\r\n}\r\n\r\nexport const loadSystemAttributes: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            systemAttributes,\r\n            systemAttributesLoaded,\r\n            loadingSystemAttributes\r\n        } = getState().ManageSystemAttributesState;\r\n\r\n        if (!systemAttributesLoaded && !loadingSystemAttributes && !systemAttributes) {\r\n            dispatch({\r\n                type: ManageSystemAttributesEvents.LoadingSystemAttributes\r\n            });\r\n\r\n            const finishedAction: FinishedLoadingSystemAttributesAction = {\r\n                type: ManageSystemAttributesEvents.FinishedLoadingSystemAttributes,\r\n                systemAttributes: null\r\n            }\r\n\r\n            try {\r\n                const response = await new SystemAttributesRepository().getSystemAttributes();\r\n                const systemAttributes: SystemAttributes = response.data;\r\n                finishedAction.systemAttributes = systemAttributes;\r\n                dispatch(setSectors(systemAttributes.Sectors))\r\n                return dispatch(finishedAction);\r\n            } catch (error) {\r\n                finishedAction.error = {\r\n                    detail: error.toString()\r\n                };\r\n                return dispatch(finishedAction);\r\n            }\r\n        }\r\n    }\r\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\n\r\nexport enum DocumentsDownloadEvents {\r\n    OpenRiskWarningDialog = \"DocumentsDownloadEvents.OpenRiskWarningDialog\",\r\n    CloseRiskWarningDialog = \"DocumentsDownloadEvents.CloseRiskWarningDialog\"\r\n}\r\n\r\nexport interface DocumentsDownloadAction extends Action {\r\n\r\n}\r\n\r\nexport interface DocumentClickAction extends DocumentsDownloadAction {\r\n    selectedDocument?: PitchDocument;\r\n}\r\n\r\nexport const onDocumentClick: ActionCreator<any> = (document: PitchDocument, shouldShowRiskWarning: boolean) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        if (!shouldShowRiskWarning) {\r\n            window.open(document.downloadURL, \"_blank\");\r\n            return;\r\n        }\r\n        const action: DocumentClickAction = {\r\n            type: DocumentsDownloadEvents.OpenRiskWarningDialog,\r\n            selectedDocument: document\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const onAcceptRiskWarningClick: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            selectedDocument\r\n        } = getState().DocumentsDownloadLocalState;\r\n        if (selectedDocument === undefined) {\r\n            return;\r\n        }\r\n        window.open(selectedDocument.downloadURL, \"_blank\");\r\n        return dispatch({\r\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const onCancelRiskWarningClick: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\r\n        });\r\n    }\r\n}","import {\r\n    FinishedLoadingSystemAttributesAction,\r\n    ManageSystemAttributesAction,\r\n    ManageSystemAttributesEvents\r\n} from \"../actions/manageSystemAttributesActions\";\r\nimport Error from \"../../models/error\";\r\nimport {SystemAttributes} from \"../../models/system_attributes\";\r\n\r\nexport interface ManageSystemAttributesState {\r\n    systemAttributes: SystemAttributes | null;\r\n    systemAttributesLoaded: boolean;\r\n    loadingSystemAttributes: boolean;\r\n    error?: Error;\r\n}\r\n\r\nconst initialState: ManageSystemAttributesState = {\r\n    systemAttributes: null,\r\n    systemAttributesLoaded: false,\r\n    loadingSystemAttributes: false\r\n}\r\n\r\nexport const isLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.loadingSystemAttributes;\r\n}\r\n\r\nexport const successfullyLoadedSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.systemAttributes && state.error === undefined;\r\n}\r\n\r\nexport const hasErrorLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst manageSystemAttributesReducer = (state = initialState, action: ManageSystemAttributesAction) => {\r\n    switch (action.type) {\r\n        case ManageSystemAttributesEvents.LoadingSystemAttributes:\r\n            return {\r\n                ...state,\r\n                systemAttributes: null,\r\n                systemAttributesLoaded: false,\r\n                loadingSystemAttributes: true\r\n            }\r\n        case  ManageSystemAttributesEvents.FinishedLoadingSystemAttributes:\r\n            const finishedAction: FinishedLoadingSystemAttributesAction = (action as FinishedLoadingSystemAttributesAction);\r\n            return {\r\n                ...state,\r\n                systemAttributes: finishedAction.systemAttributes,\r\n                systemAttributesLoaded: true,\r\n                loadingSystemAttributes: false,\r\n                error: finishedAction.error\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemAttributesReducer;","import {\r\n    AddNewSectorTextChangedAction,\r\n    CompletedSavingSectorsChangesAction,\r\n    ManageSectorsAction,\r\n    ManageSectorsEvents,\r\n    SetSectorsAction\r\n} from \"./ManageSectorsActions\";\r\nimport Error from \"../../../../models/error\";\r\n\r\nexport interface ManageSectorsState {\r\n    addingNewSector: boolean;\r\n    newSector: string;\r\n    sectors: string[];\r\n    savingSectors: boolean;\r\n    errorSavingSectors?: Error;\r\n}\r\n\r\nconst initialState: ManageSectorsState = {\r\n    addingNewSector: false,\r\n    newSector: \"\",\r\n    sectors: [],\r\n    savingSectors: false\r\n}\r\n\r\nexport const isSavingSectorsChanges = (state: ManageSectorsState) => {\r\n    return state.savingSectors;\r\n}\r\n\r\nexport const manageSectorsReducer = (state = initialState, action: ManageSectorsAction) => {\r\n    switch (action.type) {\r\n        case ManageSectorsEvents.SetSectors:\r\n            const setSectorsAction: SetSectorsAction = action as SetSectorsAction;\r\n            return {\r\n                ...state,\r\n                sectors: setSectorsAction.sectors\r\n            }\r\n        case ManageSectorsEvents.ToggleAddNewSector:\r\n            return {\r\n                ...state,\r\n                addingNewSector: !state.addingNewSector,\r\n                newSector: \"\"\r\n            }\r\n        case ManageSectorsEvents.AddNewSectorTextChanged:\r\n            const addNewSectorTextChangedAction: AddNewSectorTextChangedAction = action as AddNewSectorTextChangedAction;\r\n            return {\r\n                ...state,\r\n                newSector: addNewSectorTextChangedAction.value\r\n            }\r\n        case ManageSectorsEvents.SavingSectorsChanges:\r\n            return {\r\n                ...state,\r\n                savingSectors: true,\r\n                errorSavingSectors: undefined\r\n            }\r\n        case ManageSectorsEvents.CompletedSavingSectorsChanges:\r\n            const completedSavingSectorsChanges: CompletedSavingSectorsChangesAction = action as CompletedSavingSectorsChangesAction;\r\n            return {\r\n                ...state,\r\n                savingSectors: false,\r\n                errorSavingSectors: completedSavingSectorsChanges.error !== undefined\r\n                    ? {detail: completedSavingSectorsChanges.error} : state.errorSavingSectors\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSectorsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Box, Button, IconButton, TextField, Typography} from \"@material-ui/core\";\r\nimport {\r\n    ManageSystemAttributesState,\r\n    successfullyLoadedSystemAttributes\r\n} from \"../../../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isSavingSectorsChanges, ManageSectorsState} from \"./ManageSectorsReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport {\r\n    addNewSector,\r\n    cancelSectorsChanges, deleteSector,\r\n    onTextChanged,\r\n    saveSectorsChanges,\r\n    toggleAddNewSector\r\n} from \"./ManageSectorsActions\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\ninterface ManageSectorsProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n    toggleAddNewSector: () => any;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    addNewSector: () => any;\r\n    deleteSector: (sector: string) => any;\r\n    saveSectorsChanges: () => any;\r\n    cancelSectorsChanges: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageSectorsLocalState: state.ManageSectorsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleAddNewSector: () => dispatch(toggleAddNewSector()),\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        addNewSector: () => dispatch(addNewSector()),\r\n        deleteSector: (sector: string) => dispatch(deleteSector(sector)),\r\n        saveSectorsChanges: () => dispatch(saveSectorsChanges()),\r\n        cancelSectorsChanges: () => dispatch(cancelSectorsChanges())\r\n    }\r\n}\r\n\r\nclass ManageSectors extends Component<ManageSectorsProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageSectorsLocalState,\r\n            toggleAddNewSector,\r\n            onTextChanged,\r\n            addNewSector,\r\n            deleteSector,\r\n            saveSectorsChanges,\r\n            cancelSectorsChanges\r\n        } = this.props;\r\n\r\n        if (!successfullyLoadedSystemAttributes(ManageSystemAttributesState)) {\r\n            return null;\r\n        }\r\n\r\n        return <Box>\r\n            <Typography variant=\"h6\" color=\"primary\">Edit sectors</Typography>\r\n\r\n            <Box height=\"15px\"/>\r\n\r\n            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => toggleAddNewSector()}>\r\n                {\r\n                    !ManageSectorsLocalState.addingNewSector\r\n                        ? <AddIcon/>\r\n                        : <CloseIcon/>\r\n                }\r\n\r\n                <Box\r\n                    width=\"6px\"\r\n                />\r\n                {\r\n                    !ManageSectorsLocalState.addingNewSector\r\n                        ? \"Add new sector\"\r\n                        : \"Cancel adding new sector\"\r\n                }\r\n            </Button>\r\n\r\n            {\r\n                !ManageSectorsLocalState.addingNewSector\r\n                    ? null\r\n                    : <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginTop=\"10px\">\r\n                        <TextField variant=\"outlined\" margin=\"dense\" onChange={onTextChanged}/>\r\n                        <Box width=\"15px\"/>\r\n                        <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => addNewSector()}>Add</Button>\r\n                      </Box>\r\n            }\r\n\r\n            <Box height=\"30px\"/>\r\n\r\n            {\r\n                ManageSectorsLocalState.sectors.map(sector => (\r\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"10px\">\r\n                        <Typography align=\"left\" variant=\"body1\">{sector}\r\n                        </Typography>\r\n                        <Box width=\"10px\"/>\r\n                        <IconButton onClick={() => deleteSector(sector)} >\r\n                            <DeleteIcon fontSize=\"small\"/>\r\n                        </IconButton>\r\n                    </Box>\r\n                ))\r\n            }\r\n\r\n            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"20px\">\r\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => cancelSectorsChanges()}>Cancel changes</Button>\r\n                <Box width=\"15px\"/>\r\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => saveSectorsChanges()} disabled={isSavingSectorsChanges(ManageSectorsLocalState)}>\r\n                    {\r\n                        isSavingSectorsChanges(ManageSectorsLocalState)\r\n                            ? \"Saving ...\"\r\n                            : \"Save changes\"\r\n                    }\r\n                </Button>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageSectors);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CreateIcon from '@material-ui/icons/CreateOutlined';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n// React Quill - text editor\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\nimport * as ROUTES from '../../../router/routes';\r\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\r\nimport {NavLink} from 'react-router-dom';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as colors from '../../../values/colors';\r\nimport {connect} from 'react-redux';\r\nimport * as superAdminSettingsActions from '../../../redux-store/actions/superAdminSettingsActions';\r\nimport ManageSectors from \"./manage-sectors/ManageSectors\";\r\nimport FeedbackSnackbarNew from \"../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesEdited: state.superAdminSettings.clubAttributesEdited,\r\n\r\n        addNewPledgeFAQ: state.superAdminSettings.addNewPledgeFAQ,\r\n        addedPledgeQuestion: state.superAdminSettings.addedPledgeQuestion,\r\n        addedPledgeAnswer: state.superAdminSettings.addedPledgeAnswer,\r\n        expandedPledgeFAQ: state.superAdminSettings.expandedPledgeFAQ,\r\n        editExpandedPledgeFAQ: state.superAdminSettings.editExpandedPledgeFAQ,\r\n        editedPledgeQuestion: state.superAdminSettings.editedPledgeQuestion,\r\n        editedPledgeAnswer: state.superAdminSettings.editedPledgeAnswer\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        initializeClubAttributesEdited: () => dispatch(superAdminSettingsActions.initializeClubAttributesEdited()),\r\n        handleInputChanged: (event) => dispatch(superAdminSettingsActions.handleInputChanged(event)),\r\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(superAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\r\n        toggleAddNewPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleAddNewPledgeFAQ()),\r\n        submitNewPledgeFAQ: () => dispatch(superAdminSettingsActions.submitNewPledgeFAQ()),\r\n        toggleEditExpandedPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\r\n        saveEditedPledgeFAQ: () => dispatch(superAdminSettingsActions.saveEditedPledgeFAQ()),\r\n        deleteExistingPledgeFAQ: () => dispatch(superAdminSettingsActions.deleteExistingPledgeFAQ()),\r\n        handleQuillEditorChanged: (fieldName, content, delta, source, editor) => dispatch(superAdminSettingsActions.handleQuillEditorChanged(fieldName, content, delta, source, editor)),\r\n        saveEditedQuill: (fieldName) => dispatch(superAdminSettingsActions.saveEditedQuill(fieldName))\r\n    }\r\n};\r\n\r\nclass SuperAdminSettings extends Component {\r\n\r\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\r\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\r\n    };\r\n\r\n    handleQuillEditorChanged = fieldName => (content, delta, source, editor) => {\r\n        this.props.handleQuillEditorChanged(fieldName, content, delta, source, editor);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            initializeClubAttributesEdited\r\n        } = this.props;\r\n\r\n        initializeClubAttributesEdited();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesEdited,\r\n\r\n            addNewPledgeFAQ,\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer,\r\n            expandedPledgeFAQ,\r\n            editExpandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer,\r\n\r\n            handleInputChanged,\r\n            toggleAddNewPledgeFAQ,\r\n            submitNewPledgeFAQ,\r\n            toggleEditExpandedPledgeFAQ,\r\n            saveEditedPledgeFAQ,\r\n            deleteExistingPledgeFAQ,\r\n            saveEditedQuill\r\n        } = this.props;\r\n\r\n        if (!clubAttributes || !clubAttributesEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 30\r\n                }}\r\n            >\r\n                <FeedbackSnackbarNew/>\r\n                <Row\r\n                    noGutters\r\n                >\r\n                    {/** Manage system's functions */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Manage system's functions</Typography>\r\n\r\n                        <FlexView marginTop={20}>\r\n                            <FormControl>\r\n                                <FormControlLabel name=\"allowVideoUpload\"\r\n                                    control={\r\n                                        <Checkbox color=\"primary\" value={clubAttributesEdited.allowVideoUpload} checked={clubAttributesEdited.allowVideoUpload} onChange={handleInputChanged}/>\r\n                                    }\r\n                                    label=\"Allow video upload\"\r\n                                    labelPlacement=\"end\"\r\n                                />\r\n                                <FormHelperText>\r\n                                    Allow videos (Introduction video in Profile page and Pitch cover video) to be\r\n                                    uploaded to the database.\r\n                                    When turned off, the users cannot upload videos from their machines, instead they\r\n                                    can only upload a video URL.\r\n                                </FormHelperText>\r\n                            </FormControl>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Support email */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Edit support email</Typography>\r\n\r\n                        <FlexView marginTop={20}>\r\n                            <TextField name=\"supportEmail\" label=\"Support email\" value={clubAttributesEdited.supportEmail} margin=\"normal\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit sectors */}\r\n                    <Col xs={12}sm={12} md={12} lg={12}>\r\n                        <ManageSectors/>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit FAQs in Pledge Page */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">Edit FAQs in Pledge Page</Typography>\r\n\r\n                        <Button onClick={toggleAddNewPledgeFAQ} variant=\"outlined\" className={css(sharedStyles.no_text_transform)} style={{ marginTop: 18}}>\r\n                            {\r\n                                !addNewPledgeFAQ\r\n                                    ?\r\n                                    <AddIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                                    :\r\n                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                            }\r\n                            {\r\n                                !addNewPledgeFAQ\r\n                                    ?\r\n                                    \"Add new FAQ\"\r\n                                    :\r\n                                    \"Cancel adding new FAQ\"\r\n                            }\r\n                        </Button>\r\n\r\n                        {\r\n                            !addNewPledgeFAQ\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView column marginTop={15}>\r\n                                    <TextField name=\"addedPledgeQuestion\" label=\"Question\" value={addedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\r\n                                    <TextField name=\"addedPledgeAnswer\" label=\"Answer\" value={addedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} onChange={handleInputChanged} style={{marginTop: 10}}/>\r\n                                    <FlexView hAlignContent=\"right\" marginTop={10}>\r\n                                        <Button onClick={submitNewPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>Add</Button>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                        }\r\n\r\n                        <FlexView column marginTop={20}>\r\n                            {\r\n                                !clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].map(FAQ => (\r\n                                        <ExpansionPanel key={FAQ.id} elevation={0} className={css(styles.frequently_asked_question_box)} expanded={(expandedPledgeFAQ && FAQ.id === expandedPledgeFAQ.id) ? true : false} onChange={this.handleExpandPledgeFAQPanel(FAQ)}>\r\n                                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                                <Typography variant=\"body2\" align=\"left\"><b>{FAQ.question}</b></Typography>\r\n                                            </ExpansionPanelSummary>\r\n\r\n                                            <ExpansionPanelDetails>\r\n                                                <FlexView column width=\"100%\">\r\n                                                    <Typography variant=\"body2\" align=\"left\">{FAQ.answer}</Typography>\r\n\r\n                                                    <FlexView marginTop={28}>\r\n                                                        <Button onClick={toggleEditExpandedPledgeFAQ} variant=\"outlined\" color={expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ ? \"default\" : \"primary\"} className={css(sharedStyles.no_text_transform)}>\r\n                                                            {\r\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                                    ?\r\n                                                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\r\n                                                                    :\r\n                                                                    <CreateIcon fontSize=\"small\" style={{ marginRight: 6}}/>\r\n                                                            }\r\n                                                            {\r\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                                    ?\r\n                                                                    \"Cancel editing\"\r\n                                                                    :\r\n                                                                    \"Edit\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <Button onClick={deleteExistingPledgeFAQ} variant=\"outlined\" color=\"secondary\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 12}}>\r\n                                                            <DeleteIcon fontSize=\"small\" style={{ marginRight: 6}}/>\r\n                                                            Delete\r\n                                                        </Button>\r\n                                                    </FlexView>\r\n\r\n                                                    {\r\n                                                        expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\r\n                                                            ?\r\n                                                            <FlexView column width=\"100%\" hAlignContent=\"right\" marginTop={12}>\r\n                                                                <TextField name=\"editedPledgeQuestion\" label=\"Question\" value={editedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required error={editedPledgeQuestion.trim().length === 0} onChange={handleInputChanged}/>\r\n                                                                <TextField name=\"editedPledgeAnswer\" label=\"Answer\" value={editedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} error={editedPledgeAnswer.trim().length === 0} onChange={handleInputChanged} style={{marginTop: 10}}/>\r\n\r\n                                                                <Button onClick={saveEditedPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} style={{marginTop: 10}}>Save</Button>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </ExpansionPanelDetails>\r\n                                        </ExpansionPanel>\r\n                                    ))\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit privacy policy */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit privacy policy</Typography>\r\n\r\n                            <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View privacy policy page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('privacyPolicy')} modules={modules} value={clubAttributesEdited.hasOwnProperty('privacyPolicy') ? clubAttributesEdited.privacyPolicy : {ops: []}} style={{marginTop: 20 }}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('privacyPolicy')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit terms of use */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit terms of use</Typography>\r\n\r\n                            <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{ marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View terms of use page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('termsOfUse')} modules={modules} value={clubAttributesEdited.hasOwnProperty('termsOfUse') ? clubAttributesEdited.termsOfUse : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('termsOfUse')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit risk warnings */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit risk warnings</Typography>\r\n\r\n                            {/** Risk warning footer */}\r\n                            <FlexView column marginTop={30}>\r\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning footer</b></Typography>\r\n                                <br/>\r\n                                <Typography variant=\"body1\" align=\"left\" color=\"textSecondary\">\r\n                                    Risk warning footer is used in the footer of the Explore Offers page and\r\n                                    the Pledge page.\r\n                                    <br/><br/>\r\n                                    As the group's name will be populated dynamically, therefore, anywhere in the text\r\n                                    that needs to use group's name, please replace it with <b><u>%groupName%</u></b>.\r\n                                    <br/><br/>\r\n                                    Also, this risk warning footer will need to have a URL that leads to the\r\n                                    risk warning page where the information will be further explained. Therefore, please\r\n                                    use the following format to express the URL:\r\n                                    <br/><br/>\r\n                                    <b><u>%URL%any text inside%URL%</u></b>. For example:&nbsp;\r\n                                    <b>%URL%Please click here to see full risk warning.%URL%</b>. The URL doesn't need\r\n                                    to be\r\n                                    put here manually, it will be done on the development side as long as the format\r\n                                    is correct.\r\n                                </Typography>\r\n                                <br/>\r\n                                <TextField variant=\"outlined\" name=\"riskWarningFooter\" placeholder=\"Edit risk warning footer\" value={clubAttributesEdited.riskWarningFooter} onChange={handleInputChanged} multiline rowsMax={10} rows={10}/>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{marginTop: 50, marginBottom: 40}}/>\r\n\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning page</b></Typography>\r\n\r\n                                <br/>\r\n\r\n                                <NavLink to={ROUTES.RISK_WARNING} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View risk warning page</Button>\r\n                                </NavLink>\r\n\r\n                                <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('riskWarning')} modules={modules} value={clubAttributesEdited.hasOwnProperty('riskWarning') ? clubAttributesEdited.riskWarning : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                                <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                    <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('riskWarning')} style={{marginLeft: 12}}>Save</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit create pitch terms and conditions */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit create pitch terms and conditions</Typography>\r\n\r\n                            <NavLink to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View create pitch terms and conditions page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('createPitchTermsAndConditions')} modules={modules} value={clubAttributesEdited.hasOwnProperty('createPitchTermsAndConditions') ? clubAttributesEdited.createPitchTermsAndConditions : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('createPitchTermsAndConditions')} style={{marginLeft: 12}}> Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\r\n                    </Col>\r\n\r\n                    {/** Edit marketing preferences */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">Edit marketing preferences</Typography>\r\n\r\n                            <NavLink to={ROUTES.MARKETING_PREFERENCES} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\r\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View marketing preferences page</Button>\r\n                            </NavLink>\r\n\r\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('marketingPreferences')} modules={modules} value={clubAttributesEdited.hasOwnProperty('marketingPreferences') ? clubAttributesEdited.marketingPreferences : {ops: []}} style={{marginTop: 20}}/>\r\n\r\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\r\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('marketingPreferences')} style={{marginLeft: 12}}>Save</Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperAdminSettings);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    frequently_asked_question_box: {\r\n        border: `1px solid ${colors.gray_300}`,\r\n        marginTop: 12\r\n    }\r\n});","import firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\n\r\nexport const GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED = 'GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED';\r\nexport const initializeGroupAttributesEdited = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED,\r\n            group: getState().manageGroupFromParams.groupProperties\r\n        });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CHANGED = 'GROUP_ADMIN_SETTINGS_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const groupAttributesEdited = getState().groupAdminSettings.groupAttributesEdited;\r\n        const target = event.target;\r\n\r\n        let isPropertyOfGroupAttributes = false;\r\n\r\n        let updateValue = null;\r\n        let shouldUpdateDatabase = false;\r\n\r\n        switch (target.type) {\r\n            case 'checkbox':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = target.checked;\r\n                }\r\n                break;\r\n            case 'radio':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = !isNaN(target.value) ? parseInt(target.value) : target.value;\r\n                }\r\n                break;\r\n            case 'text':\r\n                if (target.name !== \"primaryColor\"\r\n                    && target.name !== \"secondaryColor\"\r\n                    && groupAttributesEdited.hasOwnProperty(target.name)\r\n                ) {\r\n                    isPropertyOfGroupAttributes = true;\r\n                    shouldUpdateDatabase = true;\r\n                    updateValue = target.value;\r\n                }\r\n                break;\r\n            case 'textarea':\r\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\r\n                    isPropertyOfGroupAttributes = true;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (shouldUpdateDatabase) {\r\n            realtimeDBUtils\r\n                .updateGroupPropertiesSetting({\r\n                    anid: groupProperties.anid,\r\n                    field: target.name,\r\n                    value: updateValue\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                        message: \"Error happened. Could not update this field.\",\r\n                        color: \"error\",\r\n                        position: \"bottom\"\r\n                    });\r\n                });\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            name: target.name,\r\n            value: target.type === 'checkbox' ? target.checked : target.value,\r\n            isPropertyOfGroupAttributes\r\n        });\r\n    }\r\n};\r\n\r\nexport const handlePitchExpiryDateChanged = date => {\r\n    return (dispatch, getState) => {\r\n        if (date && date === \"Invalid Date\") {\r\n            dispatch({\r\n                type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n                isPropertyOfGroupAttributes: true,\r\n                name: \"defaultPitchExpiryDate\",\r\n                value: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            isPropertyOfGroupAttributes: true,\r\n            name: \"defaultPitchExpiryDate\",\r\n            value:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n}\r\n\r\nexport const handleSavePitchExpiryDate = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const groupSettings = getState().groupAdminSettings.groupAttributesEdited;\r\n\r\n        realtimeDBUtils\r\n            .updateGroupPropertiesSetting({\r\n                anid: groupProperties.anid,\r\n                field: \"defaultPitchExpiryDate\",\r\n                value: groupSettings.defaultPitchExpiryDate\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not update this field.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const handleCancelEditingPitchExpiryDate = () => {\r\n    return (dispatch, getState) => {\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\r\n            isPropertyOfGroupAttributes: true,\r\n            name: \"defaultPitchExpiryDate\",\r\n            value:\r\n                !groupProperties.settings.hasOwnProperty('defaultPitchExpiryDate')\r\n                    ?\r\n                    myUtils.getDateWithDaysFurtherThanToday(1)\r\n                    :\r\n                    groupProperties.settings.defaultPitchExpiryDate\r\n        });\r\n    }\r\n}\r\n\r\nexport const GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\r\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\r\n    return (dispatch, getState) => {\r\n\r\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\r\n\r\n        if (isExpanded) {\r\n            dispatch({\r\n                type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                expandedPledgeFAQ: FAQ,\r\n                editExpandedPledgeFAQ: false\r\n            });\r\n        } else {\r\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\r\n                    expandedPledgeFAQ: null,\r\n                    editExpandedPledgeFAQ: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\r\nexport const toggleEditExpandedPledgeFAQ = () => {\r\n    return {\r\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\r\nexport const toggleAddNewPledgeFAQ = () => {\r\n    return {\r\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n    }\r\n};\r\n\r\nexport const submitNewPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer\r\n        } = getState().groupAdminSettings;\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\r\n\r\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const faq = {\r\n            id: myUtils.getCurrentDate(),\r\n            question: addedPledgeQuestion,\r\n            answer: addedPledgeAnswer\r\n        };\r\n\r\n        if (groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\r\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\r\n        } else {\r\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\r\n        }\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const saveEditedPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupAttributesEdited,\r\n            expandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer\r\n        } = getState().groupAdminSettings;\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const editedFAQ = {\r\n            id: expandedPledgeFAQ.id,\r\n            question: editedPledgeQuestion,\r\n            answer: editedPledgeAnswer\r\n        };\r\n\r\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\r\n            .then(() => {\r\n                dispatch({\r\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const deleteExistingPledgeFAQ = () => {\r\n    return (dispatch, getState) => {\r\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\r\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\r\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(groupProperties.anid)\r\n            .child('settings')\r\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\r\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\r\n    }\r\n};\r\n\r\nexport const saveGroupDetails = (field, value) => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(group.anid)\r\n            .child(field)\r\n            .set(value);\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS';\r\nexport const cancelEditingGroupDetails = (field) => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS,\r\n            name: field,\r\n            value: group[field]\r\n        });\r\n    }\r\n};\r\n\r\nexport const saveColor = field => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n        const color = field === \"primaryColor\" ? getState().groupAdminSettings.primaryColor : getState().groupAdminSettings.secondaryColor;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(group.anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(color.toUpperCase());\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR';\r\nexport const cancelEditingColor = field => {\r\n    return (dispatch, getState) => {\r\n        const group = getState().manageGroupFromParams.groupProperties;\r\n        const color = field === \"primaryColor\" ? group.settings.primaryColor : group.settings.secondaryColor;\r\n\r\n        dispatch({\r\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR,\r\n            field,\r\n            color\r\n        });\r\n    }\r\n};","import React, {Component} from \"react\";\r\n\r\nimport {\r\n    FormControl,\r\n    FormControlLabel,\r\n    Typography,\r\n    RadioGroup,\r\n    Radio,\r\n    Divider,\r\n    Button,\r\n    TextField,\r\n    ExpansionPanel,\r\n    ExpansionPanelSummary,\r\n    ExpansionPanelDetails,\r\n    Checkbox\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport DeleteIcon from \"@material-ui/icons/DeleteOutlined\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport {\r\n    Col,\r\n    Container,\r\n    Row\r\n} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as groupAdminSettingsActions from \"../../../redux-store/actions/groupAdminSettingsActions\";\r\n\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as colors from \"../../../values/colors\";\r\nimport * as utils from \"../../../utils/utils\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupDetails: state.manageGroupFromParams.groupProperties,\r\n        groupAttributesEdited: state.groupAdminSettings.groupAttributesEdited,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        groupWebsite: state.groupAdminSettings.website,\r\n        groupDescription: state.groupAdminSettings.description,\r\n        primaryColor: state.groupAdminSettings.primaryColor,\r\n        secondaryColor: state.groupAdminSettings.secondaryColor,\r\n\r\n        addNewPledgeFAQ: state.groupAdminSettings.addNewPledgeFAQ,\r\n        addedPledgeQuestion: state.groupAdminSettings.addedPledgeQuestion,\r\n        addedPledgeAnswer: state.groupAdminSettings.addedPledgeAnswer,\r\n        expandedPledgeFAQ: state.groupAdminSettings.expandedPledgeFAQ,\r\n        editExpandedPledgeFAQ: state.groupAdminSettings.editExpandedPledgeFAQ,\r\n        editedPledgeQuestion: state.groupAdminSettings.editedPledgeQuestion,\r\n        editedPledgeAnswer: state.groupAdminSettings.editedPledgeAnswer\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        initializeGroupAttributesEdited: () => dispatch(groupAdminSettingsActions.initializeGroupAttributesEdited()),\r\n        handleInputChanged: (event) => dispatch(groupAdminSettingsActions.handleInputChanged(event)),\r\n\r\n        saveGroupDetails: (field, value) => dispatch(groupAdminSettingsActions.saveGroupDetails(field, value)),\r\n        cancelEditingGroupDetails: (field) => dispatch(groupAdminSettingsActions.cancelEditingGroupDetails(field)),\r\n\r\n        saveColor: (field) => dispatch(groupAdminSettingsActions.saveColor(field)),\r\n        cancelEditingColor: (field) => dispatch(groupAdminSettingsActions.cancelEditingColor(field)),\r\n        handlePitchExpiryDateChanged: (date) => dispatch(groupAdminSettingsActions.handlePitchExpiryDateChanged(date)),\r\n        handleSavePitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleSavePitchExpiryDate()),\r\n        handleCancelEditingPitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleCancelEditingPitchExpiryDate()),\r\n\r\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(groupAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\r\n        toggleAddNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleAddNewPledgeFAQ()),\r\n        submitNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.submitNewPledgeFAQ()),\r\n        toggleEditExpandedPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\r\n        saveEditedPledgeFAQ: () => dispatch(groupAdminSettingsActions.saveEditedPledgeFAQ()),\r\n        deleteExistingPledgeFAQ: () => dispatch(groupAdminSettingsActions.deleteExistingPledgeFAQ())\r\n    }\r\n};\r\n\r\nclass GroupAdminSettings extends Component {\r\n\r\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\r\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            initializeGroupAttributesEdited\r\n        } = this.props;\r\n\r\n        initializeGroupAttributesEdited();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupDetails,\r\n            groupAttributesEdited,\r\n\r\n            clubAttributes,\r\n\r\n            groupWebsite,\r\n            groupDescription,\r\n            primaryColor,\r\n            secondaryColor,\r\n\r\n            addNewPledgeFAQ,\r\n            addedPledgeQuestion,\r\n            addedPledgeAnswer,\r\n            expandedPledgeFAQ,\r\n            editExpandedPledgeFAQ,\r\n            editedPledgeQuestion,\r\n            editedPledgeAnswer,\r\n\r\n            toggleAddNewPledgeFAQ,\r\n            submitNewPledgeFAQ,\r\n            toggleEditExpandedPledgeFAQ,\r\n            saveEditedPledgeFAQ,\r\n            deleteExistingPledgeFAQ,\r\n\r\n            handleInputChanged,\r\n            handlePitchExpiryDateChanged,\r\n            handleSavePitchExpiryDate,\r\n            handleCancelEditingPitchExpiryDate,\r\n            saveGroupDetails,\r\n            cancelEditingGroupDetails,\r\n            saveColor,\r\n            cancelEditingColor\r\n        } = this.props;\r\n\r\n        if (!groupAttributesEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 30}}>\r\n                <Row noGutters>\r\n                    {/** Manage group details */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"h6\" color=\"primary\">\r\n                            Manage group details\r\n                        </Typography>\r\n\r\n                        <FlexView marginTop={16} marginBottom={32}>\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", groupDetails.anid)\r\n                                        :\r\n                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", groupDetails.anid)\r\n                                }\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">\r\n                                    <PublicIcon style={{marginRight: 8}}/>\r\n                                    View group's public page\r\n                                </Button>\r\n                            </NavLink>\r\n                        </FlexView>\r\n\r\n                        {/** Edit group description */}\r\n                        <FlexView column marginTop={20}>\r\n                            <TextField name=\"description\" value={groupDescription} variant=\"outlined\" label=\"Group description\" multiline rowsMax={5} rows={5} onChange={handleInputChanged}/>\r\n\r\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('description')} style={{ marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('description', groupDescription)} disabled={groupDetails.description === groupDescription} style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Edit website */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FormControl fullWidth>\r\n                                <TextField label=\"Website\" placeholder=\"Official website\" name=\"website\" value={groupWebsite} fullWidth margin=\"dense\" variant=\"outlined\" required onChange={handleInputChanged}\r\n                                    error={\r\n                                        groupWebsite.trim().length === 0\r\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\r\n                                    }/>\r\n                                {\r\n                                    groupWebsite.trim().length === 0 || utils.isValidWebURL(groupWebsite)\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\">\r\n                                            Invalid website URL\r\n                                        </Typography>\r\n                                }\r\n                            </FormControl>\r\n\r\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('website')} style={{marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('website', groupWebsite)}\r\n                                    disabled={\r\n                                        groupDetails.website === groupWebsite\r\n                                        || groupWebsite.trim().length === 0\r\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\r\n                                    }\r\n                                    style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Sign up link */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FormControl fullWidth>\r\n                                <TextField label=\"Public registration link\" fullWidth margin=\"dense\" variant=\"outlined\" helperText=\"This link can be shared to unregistered issuers/investors so that they can sign up and become members of your group without sending invitation emails manually.\" value={ process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}/>\r\n                            </FormControl>\r\n                        </FlexView>\r\n\r\n                        {/** Edit primary color */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FlexView vAlignContent=\"center\">\r\n                                <TextField required name=\"primaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Primary color\" value={primaryColor.toUpperCase()} onChange={handleInputChanged}/>\r\n\r\n                                {\r\n                                    utils.isValidHexColorCode(primaryColor)\r\n                                        ?\r\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: primaryColor}}/>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                utils.isValidHexColorCode(primaryColor)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\r\n                                        Invalid color\r\n                                    </Typography>\r\n                            }\r\n\r\n                            <FlexView width=\"100%\" marginTop={10}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"primaryColor\")} style={{ marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"primaryColor\")}\r\n                                    disabled={!utils.isValidHexColorCode(primaryColor) || groupDetails.settings.primaryColor === primaryColor}\r\n                                    style={{marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n\r\n                        {/** Edit secondary color */}\r\n                        <FlexView marginTop={35} column>\r\n                            <FlexView vAlignContent=\"center\">\r\n                                <TextField required name=\"secondaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Secondary color\" value={secondaryColor.toUpperCase()} onChange={handleInputChanged}/>\r\n\r\n                                {\r\n                                    utils.isValidHexColorCode(secondaryColor)\r\n                                        ?\r\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: secondaryColor}}/>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                utils.isValidHexColorCode(secondaryColor)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\r\n                                        Invalid color\r\n                                    </Typography>\r\n                            }\r\n\r\n                            <FlexView width=\"100%\" marginTop={10}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"secondaryColor\")} style={{marginRight: 6}}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"secondaryColor\")}\r\n                                    disabled={!utils.isValidHexColorCode(secondaryColor) || groupDetails.settings.secondaryColor === secondaryColor}\r\n                                    style={{ marginLeft: 6}}>\r\n                                    Save\r\n                                </Button>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\r\n                                backgroundColor:\r\n                                    !groupDetails\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupDetails.settings.primaryColor\r\n                            }}/>\r\n                    </Col>\r\n\r\n                    {/** Manage group attributes */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView column>\r\n                            <Typography variant=\"h6\" color=\"primary\">\r\n                                Manage group attributes\r\n                            </Typography>\r\n\r\n                            {\r\n                                /**\r\n                                 * Set pitch expiry date (for QIB only)\r\n                                 */\r\n                            }\r\n                            {\r\n                                groupUserName !== \"qib\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column marginTop={30}>\r\n                                        <KeyboardDatePicker\r\n                                            autoOk\r\n                                            fullWidth\r\n                                            variant=\"dialog\"\r\n                                            inputVariant=\"outlined\"\r\n                                            label=\"Choose expired date for this pitch\"\r\n                                            format=\"dd/MM/yyyy\"\r\n                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                            value={\r\n                                                !groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                    ?\r\n                                                    utils.getDateWithDaysFurtherThanToday(1)\r\n                                                    :\r\n                                                    groupAttributesEdited.defaultPitchExpiryDate\r\n                                            }\r\n                                            InputAdornmentProps={{position: \"start\"}}\r\n                                            error={\r\n                                                groupAttributesEdited.hasOwnProperty('groupAttributesEdited')\r\n                                                    ?\r\n                                                    groupAttributesEdited.defaultPitchExpiryDate === null\r\n                                                    || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\r\n                                                    :\r\n                                                    false\r\n                                            }\r\n                                            onChange={handlePitchExpiryDateChanged}\r\n                                        />\r\n\r\n                                        <FlexView width=\"100%\" marginTop={15}>\r\n                                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={handleCancelEditingPitchExpiryDate} style={{marginRight: 6}}>\r\n                                                Cancel\r\n                                            </Button>\r\n                                            <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={handleSavePitchExpiryDate}\r\n                                                disabled={\r\n                                                    groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                        ?\r\n                                                        groupAttributesEdited.defaultPitchExpiryDate === null\r\n                                                        || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\r\n                                                        || (\r\n                                                            groupDetails.settings.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                            && groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\r\n                                                            && groupDetails.settings.defaultPitchExpiryDate === groupAttributesEdited.defaultPitchExpiryDate\r\n                                                        )\r\n                                                        :\r\n                                                        false}\r\n                                                style={{marginLeft: 6}}>\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n\r\n                                        {/** Divider */}\r\n                                        <Divider style={{marginTop: 40, marginBottom: 20, height: 3}}/>\r\n                                    </FlexView>\r\n                            }\r\n\r\n                            {\r\n                                /**\r\n                                 * Set project's visibility\r\n                                 */\r\n                            }\r\n                            <FlexView marginTop={20}>\r\n                                <FormControl>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Choose default visibility value for all newly created investment opportunities\r\n                                    </Typography>\r\n                                    <RadioGroup name=\"projectVisibility\" value={groupAttributesEdited.projectVisibility.toString()} onChange={handleInputChanged}>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PRIVATE.toString()} control={<Radio/>} label=\"Private\"/>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED.toString()} control={<Radio/>} label=\"Restricted\"/>\r\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PUBLIC.toString()} control={<Radio/>} label=\"Public\"/>\r\n                                    </RadioGroup>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {/** Divider */}\r\n                            <Divider style={{marginTop: 20, marginBottom: 20, height: 3}}/>\r\n\r\n                            {\r\n                                /**\r\n                                 * Hide/Show investors' contact details\r\n                                 */\r\n                            }\r\n                            {/*<FlexView>*/}\r\n                            {/*    <FormControl>*/}\r\n                            {/*        <FormControlLabel*/}\r\n                            {/*            name=\"makeInvestorsContactDetailsVisibleToIssuers\"*/}\r\n                            {/*            control={*/}\r\n                            {/*                <Checkbox*/}\r\n                            {/*                    color=\"primary\"*/}\r\n                            {/*                    value={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\r\n                            {/*                    checked={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\r\n                            {/*                    onChange={handleInputChanged}*/}\r\n                            {/*                />*/}\r\n                            {/*            }*/}\r\n                            {/*            label=\"Allow issuers to see investors' contact details\"*/}\r\n                            {/*            labelPlacement=\"end\"*/}\r\n                            {/*        />*/}\r\n                            {/*        <Typography*/}\r\n                            {/*            variant=\"body1\"*/}\r\n                            {/*            align=\"left\"*/}\r\n                            {/*            style={{*/}\r\n                            {/*                marginTop: 8*/}\r\n                            {/*            }}*/}\r\n                            {/*        >*/}\r\n                            {/*            <b*/}\r\n                            {/*                style={{*/}\r\n                            {/*                    color: colors.errorColor*/}\r\n                            {/*                }}*/}\r\n                            {/*            >*/}\r\n                            {/*                <u>Note:</u>&nbsp;This is a global setting.*/}\r\n                            {/*            </b>*/}\r\n                            {/*            &nbsp;When <u><b>ticked</b></u>, <b>the contact details of all investors in this*/}\r\n                            {/*            group</b> will be*/}\r\n                            {/*            made visible to the issuers.*/}\r\n                            {/*        </Typography>*/}\r\n                            {/*    </FormControl>*/}\r\n                            {/*</FlexView>*/}\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\r\n                                backgroundColor:\r\n                                    !groupDetails\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupDetails.settings.primaryColor\r\n                            }}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminSettings);\r\n\r\nconst styles = StyleSheet.create({\r\n    frequently_asked_question_box: {\r\n        border: `1px solid ${colors.gray_300}`,\r\n        marginTop: 12\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {OverlayTrigger, Tooltip} from 'react-bootstrap';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class InfoOverlay extends Component {\r\n    render() {\r\n        const {\r\n            message,\r\n            placement\r\n        } = this.props;\r\n\r\n        return (\r\n            <OverlayTrigger\r\n                trigger={['hover', 'focus']}\r\n                placement={placement}\r\n                flip\r\n                overlay={ <Tooltip id={`tooltip-${placement}`}>{message}</Tooltip> }\r\n            >\r\n                <InfoIcon fontSize=\"small\" style={{ color: colors.gray_600 }}/>\r\n            </OverlayTrigger>\r\n        );\r\n    }\r\n}","import firebase from \"../../firebase/firebaseApp\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport {getUserBasedOnID} from \"../../firebase/realtimeDBUtils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as emailUtils from \"../../utils/emailUtils\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport {\r\n    FILTER_GROUP_MEMBERS_ALL,\r\n    FILTER_HOME_MEMBERS,\r\n    FILTER_PLATFORM_MEMBERS,\r\n    FILTER_REGISTRATION_STATUS_ALL\r\n} from '../../pages/admin/components/InvitedUsers';\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const LOADING_INVITED_USERS = 'LOADING_INVITED_USERS';\r\nexport const FINISHED_LOADING_INVITED_USERS = 'FINISHED_LOADING_INVITED_USERS';\r\nexport const loadInvitedUsers = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: LOADING_INVITED_USERS\r\n        });\r\n\r\n        const admin = getState().auth.user;\r\n\r\n        realtimeDBUtils\r\n            .loadInvitedUsers(admin.superAdmin ? null : admin.anid)\r\n            .then(invitedUsers => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_INVITED_USERS,\r\n                    invitedUsers,\r\n                    error: null\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_INVITED_USERS,\r\n                    invitedUsers: [],\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_TOGGLE_SEARCH_MODE = 'INVITED_USERS_TOGGLE_SEARCH_MODE';\r\nexport const toggleInvitedUsersSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\r\n\r\n        const {\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup\r\n        } = getState().invitedUsers;\r\n\r\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        let matchedInvitedUsers;\r\n\r\n        // exit search mode\r\n        if (invitedUsersInSearchMode) {\r\n            matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                sourceInvitedUsers: invitedUsers,\r\n                searchText: null,\r\n                filterRegistrationStatus,\r\n                filterUserType,\r\n                filterMembers,\r\n                filterGroup,\r\n                currentGroupProperties\r\n            });\r\n        }\r\n        // enter search mode\r\n        else {\r\n            if (invitedUserSearchText.trim().length > 0) {\r\n                matchedInvitedUsers = prevMatchedInvitedUsers.filter(\r\n                    invitedUser => invitedUser.email.toLowerCase() === invitedUserSearchText.trim().toLowerCase()\r\n                );\r\n            } else {\r\n                matchedInvitedUsers = prevMatchedInvitedUsers;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITED_USERS_TOGGLE_SEARCH_MODE,\r\n            matchedInvitedUsers\r\n        });\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_SEARCH_VARIABLE_CHANGED = 'INVITED_USERS_SEARCH_VARIABLE_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\r\n        let matchedInvitedUsers = [];\r\n\r\n        const {\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup\r\n        } = getState().invitedUsers;\r\n\r\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const name = event.target.name;\r\n        let value = null;\r\n\r\n        switch (name) {\r\n            case 'invitedUserSearchText':\r\n                const newSearchText = event.target.value;\r\n                value = newSearchText;\r\n\r\n                // search mode is off\r\n                if (!invitedUsersInSearchMode) {\r\n                    // return the previous matchedProjects\r\n                    matchedInvitedUsers = prevMatchedInvitedUsers;\r\n                    break;\r\n                }\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: newSearchText,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterRegistrationStatus':\r\n                const newRegistrationStatusFilter = event.target.value;\r\n                value = newRegistrationStatusFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus: newRegistrationStatusFilter,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterUserType':\r\n                const newUserTypeFilter = event.target.value;\r\n                value = newUserTypeFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType: newUserTypeFilter,\r\n                    filterMembers,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterGroup':\r\n                const newGroupFilter = event.target.value;\r\n                value = newGroupFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers,\r\n                    filterGroup: newGroupFilter,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            case 'filterMembers':\r\n                const newMembersFilter = event.target.value;\r\n                value = newMembersFilter;\r\n\r\n                matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                    sourceInvitedUsers: invitedUsers,\r\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                    filterRegistrationStatus,\r\n                    filterUserType,\r\n                    filterMembers: newMembersFilter,\r\n                    filterGroup,\r\n                    currentGroupProperties\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        dispatch({\r\n            type: INVITED_USERS_SEARCH_VARIABLE_CHANGED,\r\n            name,\r\n            value,\r\n            matchedInvitedUsers\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * Get updated invitedUsers when a search criteria is changed\r\n *\r\n * @param sourceInvitedUsers\r\n * @param searchText\r\n * @param filterRegistrationStatus\r\n * @param filterUserType\r\n * @param filterMembers\r\n * @param filterGroup\r\n * @param currentGroupProperties\r\n * @returns {[]}\r\n */\r\nconst getUpdatedInvitedUsers = (\r\n    {\r\n        sourceInvitedUsers,\r\n        searchText,\r\n        filterRegistrationStatus,\r\n        filterUserType,\r\n        filterMembers,\r\n        filterGroup,\r\n        currentGroupProperties\r\n    }\r\n) => {\r\n    let matchedInvitedUsers = [];\r\n\r\n    sourceInvitedUsers.forEach(invitedUser => {\r\n        let satisfiedRegistrationStatusFilter = false;\r\n        let satisfiedUserTypeFilter = false;\r\n        let satisfiedGroupMembersFilter = false;\r\n        let satisfiedGroupFilter = false;\r\n\r\n        // filter by registration status\r\n        switch (filterRegistrationStatus) {\r\n            case FILTER_REGISTRATION_STATUS_ALL:\r\n                satisfiedRegistrationStatusFilter = true;\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                if (invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\r\n                    satisfiedRegistrationStatusFilter = true;\r\n                }\r\n                break;\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                if (invitedUser.status === DB_CONST.INVITED_USER_NOT_REGISTERED) {\r\n                    satisfiedRegistrationStatusFilter = true;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by user type\r\n        switch (filterUserType) {\r\n            case DB_CONST.TYPE_INVESTOR:\r\n                if (invitedUser.type === DB_CONST.TYPE_INVESTOR) {\r\n                    satisfiedUserTypeFilter = true;\r\n                }\r\n                break;\r\n            case DB_CONST.TYPE_ISSUER:\r\n                if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                    satisfiedUserTypeFilter = true;\r\n                }\r\n                break;\r\n            case 0: // all user type\r\n                satisfiedUserTypeFilter = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by group members (all, home or foreign)\r\n        switch (filterMembers) {\r\n            case FILTER_GROUP_MEMBERS_ALL:\r\n                satisfiedGroupMembersFilter = true;\r\n                break;\r\n            case FILTER_HOME_MEMBERS:\r\n                if (currentGroupProperties) {\r\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\r\n                        && invitedUser.requestedToJoin === false\r\n                    ) {\r\n                        satisfiedGroupMembersFilter = true;\r\n                    }\r\n                } else {\r\n                    satisfiedGroupMembersFilter = true;\r\n                }\r\n                break;\r\n            case FILTER_PLATFORM_MEMBERS:\r\n                if (currentGroupProperties) {\r\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\r\n                        && invitedUser.requestedToJoin === true\r\n                    ) {\r\n                        satisfiedGroupMembersFilter = true;\r\n                    }\r\n                } else {\r\n                    satisfiedGroupMembersFilter = true;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        // filter by a specific group\r\n        if (filterGroup !== \"null\") {\r\n            if (invitedUser.invitedBy === filterGroup) {\r\n                satisfiedGroupFilter = true;\r\n            }\r\n        }\r\n        // all groups\r\n        else {\r\n            satisfiedGroupFilter = true;\r\n        }\r\n\r\n        if (satisfiedRegistrationStatusFilter\r\n            && satisfiedUserTypeFilter\r\n            && satisfiedGroupMembersFilter\r\n            && satisfiedGroupFilter\r\n        ) {\r\n            matchedInvitedUsers.push(invitedUser);\r\n        }\r\n    });\r\n\r\n    if (searchText !== null) {\r\n        matchedInvitedUsers = matchedInvitedUsers.filter(\r\n            invitedUser => invitedUser.email.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n    }\r\n\r\n    return matchedInvitedUsers;\r\n}\r\n\r\nexport const INVITED_USERS_CHANGE_PAGE = 'INVITED_USERS_CHANGE_PAGE';\r\nexport const handleChangeTablePage = (event, newPage) => {\r\n    return {\r\n        type: INVITED_USERS_CHANGE_PAGE,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const INVITED_USERS_CHANGE_ROWS_PER_PAGE = 'INVITED_USERS_CHANGE_ROWS_PER_PAGE';\r\nexport const handleChangeTableRowsPerPage = event => {\r\n    return {\r\n        type: INVITED_USERS_CHANGE_ROWS_PER_PAGE,\r\n        rows: event.target.value\r\n    }\r\n};\r\n\r\nexport const resendInvite = invitedUser => {\r\n    return (dispatch, getState) => {\r\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\r\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n        const currentGroupAdmin = getState().auth.user;\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_INVITATION,\r\n                data: {\r\n                    groupName: groupProperties.displayName,\r\n                    groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\r\n                    groupWebsite: groupProperties.website,\r\n                    groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\r\n                    sender: currentGroupAdmin.email,\r\n                    receiver: invitedUser.email,\r\n                    receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\r\n                    userType:\r\n                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                            ?\r\n                            \"Issuer\"\r\n                            :\r\n                            \"Investor\"\r\n                    ,\r\n                    signupURL:\r\n                        groupUserName\r\n                            ?\r\n                            `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\r\n                            :\r\n                            `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\r\n                }\r\n            })\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentGroupAdmin.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\r\n                        interactedObjectID: invitedUser.id,\r\n                        activitySummary:\r\n                            realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION\r\n                                .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\r\n                                .replace(\"%group%\", groupProperties.displayName)\r\n                                .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\r\n                        ,\r\n                        action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                            .replace(\":userID\", invitedUser.id)\r\n                        ,\r\n                        value: {\r\n                            ...invitedUser,\r\n                            Invitor: null\r\n                        }\r\n                    });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Invitation resent.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED = \"INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED\";\r\nexport const addMembersFromOneGroupToAnotherGroup = (fromGroup, toGroup) => {\r\n    return async (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const addingMembersFromOneGroupToAnotherGroup = getState().invitedUsers.addingMembersFromOneGroupToAnotherGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (addingMembersFromOneGroupToAnotherGroup) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\r\n                value: true\r\n            });\r\n\r\n            await new Api()\r\n                .request(\r\n                    \"put\",\r\n                    ApiRoutes.addMembersToGroup.replace(\":group\", toGroup),\r\n                    {\r\n                        queryParameters: null,\r\n                        requestBody: {\r\n                            fromGroup,\r\n                            addUserType: \"all\"\r\n                        }\r\n                    }\r\n                );\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\r\n                value: false\r\n            });\r\n\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: \"Members added.\",\r\n                color: \"primary\",\r\n                position: \"bottom\"\r\n            });\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: error.toString(),\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const INVITED_USERS_REQUESTING_CSV_STATE_CHANGED = \"INVITED_USERS_REQUESTING_CSV_STATE_CHANGED\";\r\nexport const exportToCsv = () => {\r\n    return async (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const requestingCsv = getState().invitedUsers.requestingCsv;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (requestingCsv) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: true\r\n            });\r\n\r\n            let response = await new Api().request(\"get\", ApiRoutes.exportUsersCsvRoute);\r\n\r\n            // create a file from the csv returned by the server\r\n            const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\r\n            const link = document.createElement(\"a\");\r\n            if (link.download !== undefined) {\r\n                // create a download url\r\n                const url = URL.createObjectURL(blob);\r\n                link.setAttribute(\"href\", url);\r\n                link.setAttribute(\"download\", \"data.csv\");\r\n                link.style.visibility = \"hidden\";\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: false\r\n            });\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: error.toString(),\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n\r\n            dispatch({\r\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\r\n                value: false\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\n\r\nlet invitedUsersListener = null;\r\n\r\nexport const INVITED_USERS_CHANGED = \"INVITED_USERS_CHANGED\";\r\n\r\nexport const startListeningForInvitedUsersChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!invitedUsersListener) {\r\n            const admin = getState().auth.user;\r\n\r\n            invitedUsersListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n\r\n            invitedUsersListener\r\n                .on(\"child_added\", async (snapshot) => {\r\n                        let invitedUser = snapshot.val();\r\n\r\n                        let shouldAddInvitedUser = false;\r\n\r\n                        if (admin.superAdmin) {\r\n                            shouldAddInvitedUser = true;\r\n                        } else {\r\n                            if (invitedUser.invitedBy === admin.anid) {\r\n                                shouldAddInvitedUser = true;\r\n                            }\r\n                        }\r\n\r\n                        if (!shouldAddInvitedUser) {\r\n                            return;\r\n                        }\r\n\r\n                        let invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n                        let invitedUserIndex = invitedUsers.findIndex(existingInvitedUser => existingInvitedUser.id === invitedUser.id);\r\n                        if (invitedUserIndex === -1) {\r\n                            const {\r\n                                invitedUserSearchText,\r\n                                invitedUsersInSearchMode,\r\n                                filterRegistrationStatus,\r\n                                filterUserType,\r\n                                filterMembers,\r\n                                filterGroup\r\n                            } = getState().invitedUsers;\r\n\r\n                            const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n                            const group = await realtimeDBUtils.loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n\r\n                            invitedUser.Invitor = {\r\n                                anid: group.anid,\r\n                                displayName: group.displayName,\r\n                                logo: group.logo\r\n                            };\r\n\r\n                            if (invitedUser.hasOwnProperty(\"officialUserID\")) {\r\n                                invitedUser.officialUser = await getUserBasedOnID(invitedUser.officialUserID);\r\n                            }\r\n\r\n                            let matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                                sourceInvitedUsers: [...invitedUsers, invitedUser],\r\n                                searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                                filterRegistrationStatus,\r\n                                filterUserType,\r\n                                filterMembers,\r\n                                filterGroup,\r\n                                currentGroupProperties\r\n                            });\r\n\r\n                            return dispatch({\r\n                                type: INVITED_USERS_CHANGED,\r\n                                invitedUsers: [...getState().invitedUsers.invitedUsers, invitedUser],\r\n                                matchedInvitedUsers\r\n                            });\r\n                        }\r\n                    }\r\n                );\r\n\r\n            invitedUsersListener\r\n                .on(\"child_changed\", async (snapshot) => {\r\n                    let invitedUser = snapshot.val();\r\n\r\n                    let shouldChangeInvitedUser = false;\r\n\r\n                    if (admin.superAdmin) {\r\n                        shouldChangeInvitedUser = true;\r\n                    } else {\r\n                        if (invitedUser.invitedBy === admin.anid) {\r\n                            shouldChangeInvitedUser = true;\r\n                        }\r\n                    }\r\n\r\n                    if (!shouldChangeInvitedUser) {\r\n                        return;\r\n                    }\r\n\r\n                    let invitedUsers = [...getState().invitedUsers.invitedUsers];\r\n                    let invitedUserIndex = invitedUsers.findIndex(\r\n                        existingInvitedUser => existingInvitedUser.id === invitedUser.id\r\n                    );\r\n                    if (invitedUserIndex !== -1) {\r\n                        invitedUser.Invitor = invitedUsers[invitedUserIndex].Invitor;\r\n                        invitedUser.officialUser = invitedUsers[invitedUserIndex].officialUser;\r\n                        invitedUsers[invitedUserIndex] = invitedUser;\r\n                        const {\r\n                            invitedUserSearchText,\r\n                            invitedUsersInSearchMode,\r\n                            filterRegistrationStatus,\r\n                            filterUserType,\r\n                            filterMembers,\r\n                            filterGroup\r\n                        } = getState().invitedUsers;\r\n\r\n                        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n                        let matchedInvitedUsers = getUpdatedInvitedUsers({\r\n                            sourceInvitedUsers: [...invitedUsers],\r\n                            searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\r\n                            filterRegistrationStatus,\r\n                            filterUserType,\r\n                            filterMembers,\r\n                            filterGroup,\r\n                            currentGroupProperties\r\n                        });\r\n\r\n                        return dispatch({\r\n                            type: INVITED_USERS_CHANGED,\r\n                            invitedUsers: [...invitedUsers],\r\n                            matchedInvitedUsers\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForInvitedUsersChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (invitedUsersListener) {\r\n            invitedUsersListener.off('child_added');\r\n            invitedUsersListener.off('child_changed');\r\n            invitedUsersListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    InputLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {HashLoader} from \"react-spinners\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css} from \"aphrodite\";\r\nimport InfoOverlay from \"../../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as invitedUsersActions from \"../../../redux-store/actions/invitedUsersActions\";\r\nimport * as invitationDialogActions from \"../../../redux-store/actions/invitationDialogActions\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport * as myUtils from \"../../../utils/utils\";\r\nimport * as colors from \"../../../values/colors\";\r\n\r\nexport const FILTER_REGISTRATION_STATUS_ALL = -1;\r\n\r\nexport const FILTER_GROUP_MEMBERS_ALL = 0;\r\nexport const FILTER_HOME_MEMBERS = 1;\r\nexport const FILTER_PLATFORM_MEMBERS = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n\r\n        admin: state.auth.user,\r\n\r\n        invitedUsers: state.invitedUsers.invitedUsers,\r\n        invitedUsersLoaded: state.invitedUsers.invitedUsersLoaded,\r\n        invitedUsersBeingLoaded: state.invitedUsers.invitedUsersBeingLoaded,\r\n\r\n        invitedUsersPage: state.invitedUsers.invitedUsersPage,\r\n        invitedUsersRowsPerPage: state.invitedUsers.invitedUsersRowsPerPage,\r\n\r\n        filterRegistrationStatus: state.invitedUsers.filterRegistrationStatus,\r\n        filterUserType: state.invitedUsers.filterUserType,\r\n        filterMembers: state.invitedUsers.filterMembers,\r\n        filterGroup: state.invitedUsers.filterGroup,\r\n\r\n        invitedUserSearchText: state.invitedUsers.invitedUserSearchText,\r\n        invitedUsersInSearchMode: state.invitedUsers.invitedUsersInSearchMode,\r\n\r\n        requestingCsv: state.invitedUsers.requestingCsv,\r\n        addingMembersFromOneGroupToAnotherGroup: state.invitedUsers.addingMembersFromOneGroupToAnotherGroup,\r\n\r\n        matchedInvitedUsers: state.invitedUsers.matchedInvitedUsers\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadInvitedUsers: () => dispatch(invitedUsersActions.loadInvitedUsers()),\r\n        toggleSearchMode: () => dispatch(invitedUsersActions.toggleInvitedUsersSearchMode()),\r\n        handleInputChanged: (event) => dispatch(invitedUsersActions.handleInputChanged(event)),\r\n        handleChangeTablePage: (event, newPage) => dispatch(invitedUsersActions.handleChangeTablePage(event, newPage)),\r\n        handleChangeTableRowsPerPage: (event) => dispatch(invitedUsersActions.handleChangeTableRowsPerPage(event)),\r\n        startListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.startListeningForInvitedUsersChanged()),\r\n        resendInvite: (invitedUser) => dispatch(invitedUsersActions.resendInvite(invitedUser)),\r\n        exportToCsv: () => dispatch(invitedUsersActions.exportToCsv()),\r\n        addMembersFromOneGroupToAnotherGroup: (fromGroup, toGroup) => dispatch(invitedUsersActions.addMembersFromOneGroupToAnotherGroup(fromGroup, toGroup)),\r\n\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog())\r\n    }\r\n};\r\n\r\nclass InvitedUsers extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n\r\n            startListeningForInvitedUsersChanged\r\n        } = this.props;\r\n\r\n        if (invitedUsers && invitedUsersLoaded) {\r\n            startListeningForInvitedUsersChanged();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            admin,\r\n\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup,\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n\r\n            systemGroups,\r\n            groupsLoaded,\r\n            requestingCsv,\r\n            addingMembersFromOneGroupToAnotherGroup,\r\n\r\n            toggleInvitationDialog,\r\n            toggleSearchMode,\r\n            handleInputChanged,\r\n            exportToCsv,\r\n            addMembersFromOneGroupToAnotherGroup\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column width=\"100%\">\r\n                <Divider style={{marginBottom: 30}}/>\r\n\r\n                {/** Invite new user button - available for group admins only */}\r\n                {\r\n                    admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row style={{marginBottom: 30}}>\r\n                            <Col xs={12} md={5} lg={12}>\r\n                                <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleInvitationDialog}>\r\n                                    <Add style={{ marginRight: 10, width: 20, height: \"auto\"}}/>Invite new group member</Button>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Filters */}\r\n                <Row>\r\n                    {/** Registration status */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">Registration status</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterRegistrationStatus\"/>\r\n                                }\r\n                                style={{marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterRegistrationStatus\"\r\n                                value={filterRegistrationStatus}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={FILTER_REGISTRATION_STATUS_ALL}> All</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_NOT_REGISTERED}>Not registered</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_STATUS_ACTIVE}>Active</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** User type */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">User type</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterUserType\"/>\r\n                                }\r\n                                style={{ marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterUserType\"\r\n                                value={filterUserType}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={0}>All</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_INVESTOR}>Investor</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_ISSUER}>Issuer</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** Group members */}\r\n                    {\r\n                        !admin.superAdmin\r\n                            ?\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FormControl fullWidth>\r\n                                        <InputLabel>\r\n                                            <Typography variant=\"body1\" color=\"primary\" align=\"left\">Members</Typography>\r\n                                        </InputLabel>\r\n                                        <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterMembers\"/>\r\n                                            }\r\n                                            style={{ marginTop: 25, width: \"100%\"}}\r\n                                            name=\"filterMembers\"\r\n                                            value={filterMembers}\r\n                                            onChange={handleInputChanged}\r\n                                        >\r\n                                            <MenuItem value={FILTER_GROUP_MEMBERS_ALL} key={FILTER_GROUP_MEMBERS_ALL}>All</MenuItem>\r\n                                            <MenuItem value={FILTER_HOME_MEMBERS} key={FILTER_HOME_MEMBERS}>Home members</MenuItem>\r\n                                            <MenuItem value={FILTER_PLATFORM_MEMBERS} key={FILTER_PLATFORM_MEMBERS}>Platform members</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n\r\n                                    <FlexView marginLeft={15}>\r\n                                        <InfoOverlay\r\n                                            placement=\"right\"\r\n                                            message={\r\n                                                \"Home members are the users that registered through this group. Platform members are existing users of Invest West who requested access to this group.\"\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n                            :\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FormControl fullWidth>\r\n                                    <InputLabel>\r\n                                        <Typography variant=\"body1\" color=\"primary\" align=\"left\">Group</Typography>\r\n                                    </InputLabel>\r\n                                    <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterGroup\" disabled={!groupsLoaded}/>\r\n                                        }\r\n                                        style={{marginTop: 25, width: \"100%\"}}\r\n                                        name=\"filterGroup\"\r\n                                        value={filterGroup}\r\n                                        onChange={handleInputChanged}>\r\n                                        <MenuItem value=\"null\" key=\"null\">\r\n                                            {\r\n                                                !groupsLoaded\r\n                                                    ?\r\n                                                    \"Loading groups ...\"\r\n                                                    :\r\n                                                    \"All\"\r\n                                            }\r\n                                        </MenuItem>\r\n                                        {\r\n                                            !groupsLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                systemGroups.map(group => (\r\n                                                    <MenuItem value={group.anid} key={group.anid}>{group.displayName}</MenuItem>\r\n                                                ))\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Search email */}\r\n                <Row\r\n                    style={{ marginTop: 30,  marginBottom: 30}}>\r\n                    <Col xs={12} sm={12} md={12} lg={8}>\r\n                        <FlexView>\r\n                            <FlexView basis=\"90%\" vAlignContent=\"center\" hAlignContent=\"center\"\r\n                            >\r\n                                <TextField value={invitedUserSearchText} label=\"Search by email\" name=\"invitedUserSearchText\" fullWidth variant=\"outlined\" margin=\"dense\" onChange={handleInputChanged}/>\r\n                            </FlexView>\r\n                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" basis=\"10%\" marginLeft={10}>\r\n                                <IconButton style={{width: 50,height: 50}}\r\n                                    onClick={toggleSearchMode}>\r\n                                    {\r\n                                        !invitedUsersInSearchMode\r\n                                            ?\r\n                                            <SearchIcon/>\r\n                                            :\r\n                                            <CloseIcon/>\r\n                                    }\r\n                                </IconButton>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Add members (only investors) from QIB to Silicon Gorge and vice versa */}\r\n                {\r\n                    !admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        systemGroups.findIndex(group => group.anid === filterGroup) !== -1\r\n                        && (\r\n                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                            || systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"iap-silicon-gorge\"\r\n                        )\r\n                            ?\r\n                            <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)}\r\n                                    onClick={\r\n                                        systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                            ?\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"iap-silicon-gorge\")].anid\r\n                                            )\r\n                                            :\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"qib\")].anid\r\n                                            )\r\n                                    }\r\n                                    style={{marginRight: 10}}>\r\n                                    {\r\n                                        addingMembersFromOneGroupToAnotherGroup\r\n                                            ?\r\n                                            \"Adding ...\"\r\n                                            :\r\n                                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                                ?\r\n                                                \"Add members from QIB to Silicon Gorge\"\r\n                                                :\r\n                                                \"Add members from Silicon Gorge to QIB\"\r\n                                    }\r\n                                </Button>\r\n                            </FlexView>\r\n                            :\r\n                            null\r\n                }\r\n\r\n                {/** Export button - only available for admins */}\r\n                {\r\n                    admin.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={exportToCsv} style={{marginRight: 10}}\r\n                            >\r\n                                {\r\n                                    requestingCsv\r\n                                        ?\r\n                                        \"Exporting ...\"\r\n                                        :\r\n                                        \"Export to csv\"\r\n                                }\r\n                            </Button>\r\n\r\n                            <InfoOverlay placement=\"right\"\r\n                                message={\r\n                                    admin.superAdmin\r\n                                        ?\r\n                                        \"Export all the users in the system to a .csv file.\"\r\n                                        :\r\n                                        \"Export all the members in your group to a .csv file.\"\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                }\r\n\r\n                {\r\n                    this.renderInvitedUsersTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users table\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUsersTable() {\r\n        const {\r\n            admin,\r\n\r\n            matchedInvitedUsers,\r\n\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n\r\n            handleChangeTablePage,\r\n            handleChangeTableRowsPerPage\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper elevation={0} style={{width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Name</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Email</b></Typography>\r\n                            </TableCell>\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <Typography align=\"left\" variant=\"body2\"><b>Group</b></Typography>\r\n                                    </TableCell>\r\n                            }\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>User type</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Invited/requested to join date</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Registration status</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\" ><b>Registered/joined date</b></Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderInvitedUsersRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} count={matchedInvitedUsers.length} rowsPerPage={invitedUsersRowsPerPage} page={invitedUsersPage}\r\n                                backIconButtonProps={{\r\n                                    'aria-label': 'Previous Page',\r\n                                }}\r\n                                nextIconButtonProps={{\r\n                                    'aria-label': 'Next Page',\r\n                                }}\r\n                                SelectProps={{\r\n                                    native: true,\r\n                                }}\r\n                                onChangePage={handleChangeTablePage}\r\n                                onChangeRowsPerPage={handleChangeTableRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvitedUsersRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            admin,\r\n            invitedUsersLoaded,\r\n            matchedInvitedUsers,\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterGroup,\r\n            filterMembers,\r\n            resendInvite\r\n        } = this.props;\r\n\r\n        let renderedInvitedUsers = [];\r\n\r\n        if (matchedInvitedUsers.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={12}>\r\n                        <FlexView style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                invitedUsersLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            invitedUsersInSearchMode\r\n                                            || filterRegistrationStatus !== FILTER_REGISTRATION_STATUS_ALL\r\n                                            || filterUserType !== 0\r\n                                            || filterGroup !== \"null\"\r\n                                            || filterMembers !== FILTER_GROUP_MEMBERS_ALL\r\n                                                ?\r\n                                                \"There are no users found using your current filter criteria.\"\r\n                                                :\r\n                                                \"No users found.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let matchedUsersInvitedByTheGroup = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate !== \"none\"\r\n        );\r\n        matchedUsersInvitedByTheGroup.sort((user1, user2) => {\r\n            return user2.invitedDate - user1.invitedDate;\r\n        });\r\n\r\n        let matchedUsersRequestedToJoin = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate === \"none\"\r\n        );\r\n        matchedUsersRequestedToJoin.sort((user1, user2) => {\r\n            return user2.requestedToJoinDate - user1.requestedToJoinDate;\r\n        });\r\n\r\n        if (filterMembers === FILTER_HOME_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup];\r\n        } else if (filterMembers === FILTER_PLATFORM_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersRequestedToJoin];\r\n        } else {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup, ...matchedUsersRequestedToJoin];\r\n        }\r\n\r\n        return (\r\n            !renderedInvitedUsers\r\n                ?\r\n                null\r\n                :\r\n                renderedInvitedUsers\r\n                    .slice(invitedUsersPage * invitedUsersRowsPerPage, invitedUsersPage * invitedUsersRowsPerPage + invitedUsersRowsPerPage)\r\n                    .map(invitedUser => (\r\n                        <TableRow hover key={invitedUser.id}>\r\n                            {/** User name */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    {/** User name */}\r\n                                    <NavLink\r\n                                        to={\r\n                                            invitedUser.hasOwnProperty('officialUserID')\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.EDIT_USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                    :\r\n                                                    ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                :\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    :\r\n                                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                        }\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <Typography color=\"primary\" align=\"left\">\r\n                                            {\r\n                                                invitedUser.hasOwnProperty('officialUser')\r\n                                                    ?\r\n                                                    `${invitedUser.officialUser.firstName} ${invitedUser.officialUser.lastName}`\r\n                                                    :\r\n                                                    `${invitedUser.firstName} ${invitedUser.lastName}`\r\n                                            }\r\n                                        </Typography>\r\n                                    </NavLink>\r\n\r\n                                    {/** Resend invite button */}\r\n                                    {\r\n                                        invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            // this check to ensure only the group admin that initally invited this\r\n                                            // user can resend the invitation\r\n                                            admin.superAdmin\r\n                                            || (!admin.superAdmin\r\n                                                && groupProperties\r\n                                                && groupProperties.anid !== invitedUser.invitedBy\r\n                                            )\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={10}>\r\n                                                    <Button variant=\"outlined\" size=\"small\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={() => resendInvite(invitedUser)}>Resend invite</Button>\r\n                                                </FlexView>\r\n                                    }\r\n\r\n                                    {/** Display home/platform members */}\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 15}}>\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Email */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    <Typography align=\"left\" variant=\"body2\" paragraph={admin.superAdmin}>{invitedUser.email}</Typography>\r\n\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            <FlexView column>\r\n                                                <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>Invited ID:</u></b> {invitedUser.id}</Typography>\r\n                                                {\r\n                                                    !invitedUser.hasOwnProperty('officialUserID')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>UID:</u></b> {invitedUser.officialUserID}</Typography>\r\n                                                }\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Group the user belongs to - available only for super admins */}\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <FlexView column>\r\n                                            <Typography align=\"left\" variant=\"body2\" paragraph>\r\n                                                {invitedUser.Invitor.displayName}\r\n                                            </Typography>\r\n\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </TableCell>\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\"  variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            \"Issuer\"\r\n                                            :\r\n                                            \"Investor\"\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Date invited / requested to join / registered via public link */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.invitedDate !== \"none\"\r\n                                        && (\r\n                                            invitedUser.hasOwnProperty('requestedToJoinDate')\r\n                                            && invitedUser.requestedToJoinDate !== \"none\"\r\n                                        )\r\n                                            ?\r\n                                            `Registered via public link on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                            :\r\n                                            invitedUser.invitedDate !== \"none\"\r\n                                                ?\r\n                                                `Invited on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                                :\r\n                                                `Requested to join on ${myUtils.dateInReadableFormat(invitedUser.requestedToJoinDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Registration status */}\r\n                            <TableCell colSpan={1}>{this.renderInvitedUserRegistrationStatus(invitedUser)}</TableCell>\r\n\r\n                            {/** Date registered/joined */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        !invitedUser.hasOwnProperty('joinedDate')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            !invitedUser.requestedToJoin\r\n                                                ?\r\n                                                `Registered on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                                :\r\n                                                `Joined on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function is used to render invited users' registration status\r\n     *\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUserRegistrationStatus = invitedUser => {\r\n\r\n        let msgObj = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (invitedUser.status) {\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                msgObj.msg = 'Not registered';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                msgObj.msg = `Current ${invitedUser.type === DB_CONST.TYPE_INVESTOR ? \"investor\" : \"issuer\"}`;\r\n                msgObj.color = 'primary';\r\n                break;\r\n            case DB_CONST.INVITED_USER_DECLINED_TO_REGISTER:\r\n                msgObj.msg = 'Declined to join';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_LEFT:\r\n                msgObj.msg = 'Left';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_KICKED_OUT:\r\n                msgObj.msg = 'Kicked out';\r\n                msgObj.color = 'error';\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"left\" variant=\"body2\" color={msgObj.color}>{msgObj.msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvitedUsers);","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Dialog, DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    TextField,\r\n    Typography,\r\n    SnackbarContent,\r\n    Snackbar\r\n} from '@material-ui/core';\r\nimport {Image} from 'react-bootstrap';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport Files from 'react-files';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\r\n\r\nimport sharedStyles, {SlideTransitionDown} from '../../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as colors from '../../../values/colors';\r\nimport * as utils from '../../../utils/utils';\r\n\r\nexport const ADD_STATUS_NONE = 0;\r\nexport const ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK = 1;\r\nexport const ADD_STATUS_USER_NAME_EXISTS = 2;\r\nexport const ADD_STATUS_EMAIL_ALREADY_USED = 3;\r\nexport const ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO = 4;\r\nexport const ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE = 5;\r\nexport const ADD_STATUS_SUCCESSFULLY_ADDED = 6;\r\nexport const ADD_STATUS_ERROR_HAPPENED = 7;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PLAIN_LOGO = 1;\r\nexport const UPLOAD_LOGO_WITH_TEXT = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        addAngelNetworkDialogOpen: state.manageAddAngelNetworkDialog.addAngelNetworkDialogOpen,\r\n\r\n        angelNetworkName: state.manageAddAngelNetworkDialog.angelNetworkName,\r\n        angelNetworkUsername: state.manageAddAngelNetworkDialog.angelNetworkUsername,\r\n        email: state.manageAddAngelNetworkDialog.email,\r\n        website: state.manageAddAngelNetworkDialog.website,\r\n        primaryColor: state.manageAddAngelNetworkDialog.primaryColor,\r\n        secondaryColor: state.manageAddAngelNetworkDialog.secondaryColor,\r\n\r\n        plainLogo: state.manageAddAngelNetworkDialog.plainLogo,\r\n        loadingPlainLogo: state.manageAddAngelNetworkDialog.loadingPlainLogo,\r\n        logoWithText: state.manageAddAngelNetworkDialog.logoWithText,\r\n        loadingLogoWithText: state.manageAddAngelNetworkDialog.loadingLogoWithText,\r\n\r\n        uploadMode: state.manageAddAngelNetworkDialog.uploadMode,\r\n        uploadProgress: state.manageAddAngelNetworkDialog.uploadProgress,\r\n\r\n        imgUploadError: state.manageAddAngelNetworkDialog.imgUploadError,\r\n        imgUploadErrorSnackbarOpen: state.manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen,\r\n\r\n        addButtonClicked: state.manageAddAngelNetworkDialog.addButtonClicked,\r\n        response: state.manageAddAngelNetworkDialog.addResult\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\r\n        handleInputChanged: (event) => dispatch(addAngelNetworkDialogActions.handleAddAngelNetworkInputChanged(event)),\r\n        addNewAngelNetwork: () => dispatch(addAngelNetworkDialogActions.addNewAngelNetwork()),\r\n\r\n        handleImageFilesChanged: (mode, files) => dispatch(addAngelNetworkDialogActions.handleImageFilesChanged(mode, files)),\r\n        handleImageFileError: (mode, error, file) => dispatch(addAngelNetworkDialogActions.handleImageFileError(mode, error, file)),\r\n        closeErrorSnackbar: () => dispatch(addAngelNetworkDialogActions.closeImageFileErrorSnackbar()),\r\n        resetImageFileErrorMessageWhenSnackbarExited: () => dispatch(addAngelNetworkDialogActions.resetImageFileErrorMessageWhenSnackbarExited())\r\n    }\r\n};\r\n\r\nclass AddAngelNetworkDialog extends Component {\r\n\r\n    handleImageFilesChanged = mode => files => {\r\n        this.props.handleImageFilesChanged(mode, files);\r\n    };\r\n\r\n    handleImageFileError = mode => (error, file) => {\r\n        this.props.handleImageFileError(mode, error, file);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            addAngelNetworkDialogOpen,\r\n\r\n            angelNetworkName,\r\n            angelNetworkUsername,\r\n            email,\r\n            website,\r\n            primaryColor,\r\n            secondaryColor,\r\n\r\n            plainLogo,\r\n            loadingPlainLogo,\r\n            logoWithText,\r\n            loadingLogoWithText,\r\n\r\n            imgUploadError,\r\n            imgUploadErrorSnackbarOpen,\r\n\r\n            addButtonClicked,\r\n\r\n            uploadMode,\r\n            uploadProgress,\r\n\r\n            handleImageFilesChanged,\r\n            handleImageFileError,\r\n            toggleAddAngelNetworkDialog,\r\n            handleInputChanged,\r\n            addNewAngelNetwork,\r\n            closeErrorSnackbar,\r\n            resetImageFileErrorMessageWhenSnackbarExited,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog ref={forwardedRef} open={addAngelNetworkDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleAddAngelNetworkDialog} {...other}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">\r\n                                Add new group\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleAddAngelNetworkDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent style={{marginTop: 10}}>\r\n                    <TextField\r\n                        label=\"Group name\"\r\n                        placeholder=\"Write group's full name here ...\"\r\n                        name=\"angelNetworkName\"\r\n                        value={angelNetworkName}\r\n                        fullWidth\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={addButtonClicked && angelNetworkName.length === 0}\r\n                        onChange={handleInputChanged}\r\n                    />\r\n\r\n                    <TextField\r\n                        label=\"Group username\"\r\n                        placeholder=\"Write group's username here. E.g. aba, or qtec\"\r\n                        helperText=\"Note: Username must be unique. For convention, use lowercase letters and use - to connect words. E.g. future-space\"\r\n                        name=\"angelNetworkUsername\"\r\n                        value={angelNetworkUsername}\r\n                        fullWidth\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        required\r\n                        error={addButtonClicked && angelNetworkUsername.trim().length === 0}\r\n                        onChange={handleInputChanged}\r\n                    />\r\n\r\n                    <FormControl fullWidth style={{marginTop: 25, marginBottom: 25}}>\r\n                        <TextField\r\n                            label=\"Registered email\"\r\n                            placeholder=\"Write email here ...\"\r\n                            helperText=\"This email will be used to login to group's admin page. Once added, an email with auto-generated password will be sent to this email address.\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && email.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth>\r\n                        <TextField\r\n                            label=\"Website\"\r\n                            placeholder=\"Group's official website\"\r\n                            name=\"website\"\r\n                            value={website}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && website.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                        {\r\n                            website.trim().length === 0 || utils.isValidWebURL(website)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    color=\"error\"\r\n                                    align=\"left\"\r\n                                >\r\n                                    Invalid website URL\r\n                                </Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth style={{marginTop: 25}}>\r\n                        <TextField\r\n                            label=\"Primary color\"\r\n                            placeholder=\"E.g. #FFFFFF\"\r\n                            name=\"primaryColor\"\r\n                            value={primaryColor.toUpperCase()}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && primaryColor.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n                        {\r\n                            primaryColor.trim().length === 0 || utils.isValidHexColorCode(primaryColor)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography variant=\"body2\" color=\"error\"  align=\"left\">Invalid color</Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    <FormControl fullWidth style={{marginBottom: 25}}>\r\n                        <TextField\r\n                            label=\"Secondary color\"\r\n                            placeholder=\"E.g. #FFFFFF\"\r\n                            name=\"secondaryColor\"\r\n                            value={secondaryColor.toUpperCase()}\r\n                            fullWidth\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            required\r\n                            error={addButtonClicked && secondaryColor.trim().length === 0}\r\n                            onChange={handleInputChanged}\r\n                        />\r\n\r\n                        {\r\n                            secondaryColor.trim().length === 0 || utils.isValidHexColorCode(secondaryColor)\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography variant=\"body2\" color=\"error\" align=\"left\">Invalid color</Typography>\r\n                        }\r\n                    </FormControl>\r\n\r\n                    {/** Upload plain (main) logo (compulsory) */}\r\n                    <FlexView column>\r\n                        <Files\r\n                            className={css(styles.img_drop_zone)}\r\n                            onChange={this.handleImageFilesChanged(UPLOAD_PLAIN_LOGO)}\r\n                            onError={this.handleImageFileError(UPLOAD_PLAIN_LOGO)}\r\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                            minFileSize={0}\r\n                            multiple\r\n                            clickable\r\n                            style={{marginTop: 25}}\r\n                        >\r\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\r\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload plain logo (with no text)</FlexView>\r\n                            </Files>\r\n\r\n                        {\r\n                            !plainLogo\r\n                                ?\r\n                                null\r\n                                :\r\n                                (\r\n                                    <FlexView marginTop={20} width={270} height={270}>\r\n                                        <Image src={window.URL.createObjectURL(plainLogo)} roundedCircle thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\r\n                                    </FlexView>\r\n                                )\r\n                        }\r\n                    </FlexView>\r\n\r\n                    {/** Upload logo with text (optional) */}\r\n                    <FlexView column marginTop={25}>\r\n                        <Files\r\n                            className={css(styles.img_drop_zone)}\r\n                            onChange={this.handleImageFilesChanged(UPLOAD_LOGO_WITH_TEXT)}\r\n                            onError={this.handleImageFileError(UPLOAD_LOGO_WITH_TEXT)}\r\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\r\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                            minFileSize={0}\r\n                            multiple\r\n                            clickable\r\n                        >\r\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\r\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload logo with text (optional)</FlexView>\r\n                            </Files>\r\n\r\n                        {\r\n                            !logoWithText\r\n                                ?\r\n                                null\r\n                                :\r\n                                (\r\n                                    <FlexView marginTop={20} width={540} height={270}>\r\n                                        <Image src={window.URL.createObjectURL(logoWithText)} thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\r\n                                    </FlexView>\r\n                                )\r\n                        }\r\n                    </FlexView>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={15} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderRespondCode()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={addNewAngelNetwork} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                            disabled={\r\n                                angelNetworkName.trim().length === 0\r\n                                || angelNetworkUsername.trim().length === 0\r\n                                || email.trim().length === 0\r\n                                || website.trim().length === 0\r\n                                || (website.trim().length > 0 && !utils.isValidWebURL(website))\r\n                                || primaryColor.trim().length === 0\r\n                                || secondaryColor.trim().length === 0\r\n                                || (primaryColor.trim().length > 0 && !utils.isValidHexColorCode(primaryColor))\r\n                                || (secondaryColor.trim().length > 0 && !utils.isValidHexColorCode(secondaryColor))\r\n                                || !plainLogo\r\n                            }\r\n                            style={{ marginLeft: 35}}>\r\n                            Add\r\n                            <AddIcon fontSize=\"small\" style={{marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n\r\n                <Snackbar\r\n                    open={imgUploadErrorSnackbarOpen}\r\n                    anchorOrigin={{ vertical: 'top', horizontal: 'center',}}\r\n                    autoHideDuration={3000}\r\n                    onClose={closeErrorSnackbar}\r\n                    onExited={resetImageFileErrorMessageWhenSnackbarExited}\r\n                    TransitionComponent={SlideTransitionDown}\r\n                    transitionDuration={{ enter: 130, exit: 130}}>\r\n                    <SnackbarContent style={{backgroundColor: colors.red_700}}\r\n                        message={imgUploadError}\r\n                        action={[\r\n                            <IconButton key=\"close\" color=\"inherit\" onClick={closeErrorSnackbar}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        ]}\r\n                    />\r\n                </Snackbar>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render add angel network result\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderRespondCode = () => {\r\n        const {\r\n            response,\r\n            uploadMode,\r\n            uploadProgress\r\n        } = this.props;\r\n\r\n        let res = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (response) {\r\n            case ADD_STATUS_NONE:\r\n                return null;\r\n            case ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK:\r\n                res.msg = \"Checking if the angel network has been added before ...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_USER_NAME_EXISTS:\r\n                res.msg = \"This username has already been used.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO:\r\n                res.msg = `Uploading ${uploadMode === UPLOAD_PLAIN_LOGO ? \"plain logo\" : \"logo with text\"}, ${parseInt(uploadProgress)}% completed`;\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE:\r\n                res.msg = \"Creating angel network's profile ...\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_EMAIL_ALREADY_USED:\r\n                res.msg = \"This email has already been used.\";\r\n                res.color = \"error\";\r\n                break;\r\n            case ADD_STATUS_SUCCESSFULLY_ADDED:\r\n                res.msg = \"Added successfully. An email has been sent to the angel network for login information.\";\r\n                res.color = \"primary\";\r\n                break;\r\n            case ADD_STATUS_ERROR_HAPPENED:\r\n                res.msg = \"Error happened. Couldn't add the angel network.\";\r\n                res.color = \"error\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return (\r\n            <Typography color={res.color} variant=\"subtitle1\" align=\"left\">\r\n                {res.msg}\r\n            </Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddAngelNetworkDialog);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    img_drop_zone: {\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as myUtils from '../../utils/utils';\r\nimport {\r\n    ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK,\r\n    ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE,\r\n    ADD_STATUS_EMAIL_ALREADY_USED,\r\n    ADD_STATUS_ERROR_HAPPENED,\r\n    ADD_STATUS_SUCCESSFULLY_ADDED,\r\n    ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n    ADD_STATUS_USER_NAME_EXISTS,\r\n    UPLOAD_LOGO_WITH_TEXT,\r\n    UPLOAD_PLAIN_LOGO\r\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const TOGGLE_ADD_ANGEL_NETWORK_DIALOG = 'TOGGLE_ADD_ANGEL_NETWORK_DIALOG';\r\nexport const toggleAddAngelNetworkDialog = () => {\r\n    return {\r\n        type: TOGGLE_ADD_ANGEL_NETWORK_DIALOG\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED = 'ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED';\r\nexport const handleAddAngelNetworkInputChanged = event => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED = 'ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED';\r\nexport const ADD_ANGEL_NETWORK_RESULT_CHANGED = 'ADD_ANGEL_NETWORK_RESULT_CHANGED';\r\nexport const addNewAngelNetwork = () => {\r\n    return async (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED\r\n        });\r\n\r\n        const {\r\n            angelNetworkName,\r\n            angelNetworkUsername,\r\n            email,\r\n            website,\r\n            primaryColor,\r\n            secondaryColor,\r\n            plainLogo,\r\n            logoWithText\r\n        } = getState().manageAddAngelNetworkDialog;\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n            result: ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK\r\n        });\r\n\r\n        // generate group id\r\n        const anid = firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        try {\r\n            // check if the group username has been used or not\r\n            const snapshots = await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild(\"groupUserName\")\r\n                .equalTo(angelNetworkUsername.toLowerCase())\r\n                .once(\"value\");\r\n\r\n            // username has already exists\r\n            if (snapshots.numChildren() > 0) {\r\n                dispatch({\r\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                    result: ADD_STATUS_USER_NAME_EXISTS\r\n                });\r\n                return;\r\n            }\r\n\r\n            const checkExistingUser = await realtimeDBUtils.doesUserExist(email);\r\n\r\n            // email has already been used\r\n            if (checkExistingUser.userExists) {\r\n                dispatch({\r\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                    result: ADD_STATUS_EMAIL_ALREADY_USED\r\n                });\r\n                return;\r\n            }\r\n\r\n            // upload plain logo\r\n            const uploadedPlainLogo = await uploadLogo(dispatch, anid, UPLOAD_PLAIN_LOGO, plainLogo);\r\n\r\n            // upload logo with text\r\n            const uploadedLogoWithText = await uploadLogo(dispatch, anid, UPLOAD_LOGO_WITH_TEXT, logoWithText);\r\n\r\n            // new group properties\r\n            const newGroupProperties = {\r\n                anid,\r\n                isInvestWest: false,\r\n                displayName: angelNetworkName,\r\n                displayNameLower: angelNetworkName.toLowerCase(), // for search function\r\n                groupUserName: angelNetworkUsername.toLowerCase(),\r\n                description: \"\",\r\n                website: website,\r\n                dateAdded: myUtils.getCurrentDate(),\r\n                status: DB_CONST.GROUP_STATUS_ACTIVE,\r\n                plainLogo: [{\r\n                    storageID: uploadedPlainLogo.storageID,\r\n                    url: uploadedPlainLogo.url\r\n                }],\r\n                logoWithText:\r\n                    !uploadedLogoWithText\r\n                        ?\r\n                        null\r\n                        :\r\n                        [{\r\n                            storageID: uploadedLogoWithText.storageID,\r\n                            url: uploadedLogoWithText.url\r\n                        }],\r\n                settings: {\r\n                    projectVisibility: DB_CONST.PROJECT_VISIBILITY_PRIVATE,\r\n                    makeInvestorsContactDetailsVisibleToIssuers: false, // initially set this to false\r\n                    primaryColor: primaryColor.toUpperCase(),\r\n                    secondaryColor: secondaryColor.toUpperCase()\r\n                }\r\n            }\r\n\r\n            // add new group properties to the database\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .child(anid)\r\n                .set(newGroupProperties);\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE\r\n            });\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.addGroupAdminRoute,\r\n                {\r\n                    requestBody: {\r\n                        adder: currentUser,\r\n                        groupProperties: newGroupProperties,\r\n                        newGroupAdminEmail: email\r\n                    }\r\n                }\r\n            );\r\n\r\n            // send a notification to the newly created super group admin\r\n            await realtimeDBUtils\r\n                .sendNotification({\r\n                    title: \"Change your password\",\r\n                    message: \"Welcome to Invest West. It is important to change your password as soon as possible. Please do it by clicking on the Password tab in your dashboard.\",\r\n                    userID: anid,\r\n                    action: `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Change password`\r\n                });\r\n\r\n            // adding a new super group admin succeeds\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_SUCCESSFULLY_ADDED\r\n            });\r\n        } catch (error) {\r\n            // remove the added group properties if error happened\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .child(anid)\r\n                .remove();\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_ERROR_HAPPENED,\r\n                error\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * This function is used to upload an image (logo or profile picture)\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nconst uploadLogo = async (dispatch, anid, mode, blob) => {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!blob) {\r\n            return resolve(null);\r\n        }\r\n\r\n        let firebaseStorage = firebase.storage();\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n            result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n            progress: 0\r\n        });\r\n\r\n        let storageID = myUtils.getCurrentDate();\r\n        let storageLocation = `${mode === UPLOAD_PLAIN_LOGO ? DB_CONST.PLAIN_LOGOS_CHILD : DB_CONST.LOGOS_WITH_TEXT_CHILD}/${storageID}`;\r\n\r\n        const storageRef = firebaseStorage\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child(storageLocation);\r\n\r\n        // upload logo to firebase storage\r\n        const uploadTask = storageRef.put(blob);\r\n        uploadTask.on('state_changed', snapshot => {\r\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\r\n                progress,\r\n                mode\r\n            });\r\n            // handle error\r\n        }, error => {\r\n\r\n            dispatch({\r\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\r\n                result: ADD_STATUS_ERROR_HAPPENED,\r\n                mode\r\n            });\r\n\r\n            return reject(error);\r\n            // logo successfully uploaded\r\n        }, () => {\r\n\r\n            // get download URL of the uploaded logo\r\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\r\n\r\n                const imgUploadedObj = {\r\n                    storageID: storageID,\r\n                    url: imgDownloadURL\r\n                };\r\n\r\n                return resolve(imgUploadedObj);\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE = 'ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE';\r\nexport const ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED = 'ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED';\r\nexport const handleImageFilesChanged = (mode, files) => {\r\n    return (dispatch, getState) => {\r\n        if (getState().manageAddAngelNetworkDialog.imgUploadError.trim().length > 0 || getState().manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen) {\r\n            return null;\r\n        }\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE,\r\n            mode\r\n        });\r\n\r\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\r\n\r\n        dispatch({\r\n            type: ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED,\r\n            blob,\r\n            mode\r\n        });\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR = 'ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR';\r\nexport const handleImageFileError = (mode, error, file) => {\r\n    if (error.code === 2) {\r\n        return {\r\n            type: ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR,\r\n            error,\r\n            file,\r\n            mode\r\n        }\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR = 'ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR';\r\nexport const closeImageFileErrorSnackbar = () => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR\r\n    }\r\n};\r\n\r\nexport const ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED = 'ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED';\r\nexport const resetImageFileErrorMessageWhenSnackbarExited = () => {\r\n    return {\r\n        type: ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED\r\n    }\r\n};\r\n\r\n","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_ANGEL_NETWORKS = 'LOADING_ANGEL_NETWORKS';\r\nexport const FINISHED_LOADING_ANGEL_NETWORKS = 'FINISHED_LOADING_ANGEL_NETWORKS';\r\nexport const loadAngelNetworks = () => {\r\n    return (dispatch, getState) => {\r\n        const admin = getState().auth.user;\r\n\r\n        if (!admin || (admin && !admin.superAdmin)) {\r\n            dispatch({\r\n                type: FINISHED_LOADING_ANGEL_NETWORKS\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_ANGEL_NETWORKS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\r\n            .then(angelNetworks => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\r\n                    angelNetworks\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: ANGEL_NETWORKS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const ANGEL_NETWORKS_TABLE_INPUT_CHANGED = 'ANGEL_NETWORKS_TABLE_INPUT_CHANGED';\r\nexport const handleAngelNetworksTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n\r\n        const searchText = event.target.value;\r\n        let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n\r\n        dispatch({\r\n            type: ANGEL_NETWORKS_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedAngelNetworks\r\n        });\r\n    }\r\n};\r\n\r\nexport const TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE = 'TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().manageAngelNetworks.inSearchMode;\r\n        const searchText = getState().manageAngelNetworks.searchText;\r\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\r\n                enter: false,\r\n                matchedAngelNetworks: []\r\n            });\r\n        } else {\r\n            let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n            dispatch({\r\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\r\n                enter: true,\r\n                matchedAngelNetworks\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n// Listeners -----------------------------------------------------------------------------------------------------------\r\n\r\nlet angelNetworksListener = null;\r\n\r\nexport const ANGEL_NETWORKS_IN_TABLE_CHANGED = 'ANGEL_NETWORKS_IN_TABLE_CHANGED';\r\n\r\nexport const startListeningForAngelNetworksChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!angelNetworksListener) {\r\n            angelNetworksListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n\r\n            angelNetworksListener\r\n                .on('child_added', snapshot => {\r\n                    let angelNetwork = snapshot.val();\r\n\r\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\r\n\r\n                    if (angelNetworkIndex === -1) {\r\n                        dispatch({\r\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\r\n                            angelNetworks: [...angelNetworks, angelNetwork]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            angelNetworksListener\r\n                .on('child_changed', snapshot => {\r\n                    let angelNetwork = snapshot.val();\r\n\r\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\r\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\r\n\r\n                    if (angelNetworkIndex !== -1) {\r\n                        angelNetworks[angelNetworkIndex] = angelNetwork;\r\n                        dispatch({\r\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\r\n                            angelNetworks\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForAngelNetworksChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (angelNetworksListener) {\r\n            angelNetworksListener.off('child_added');\r\n            angelNetworksListener.off('child_changed');\r\n            angelNetworksListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    Paper,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {HashLoader} from 'react-spinners';\r\n\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../../values/colors';\r\nimport * as DB_CONST from '../../../firebase/databaseConsts';\r\nimport * as myUtils from '../../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\r\nimport * as angelNetworksActions from '../../../redux-store/actions/angelNetworksActions';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        admin: state.auth.user,\r\n\r\n        angelNetworks: state.manageAngelNetworks.angelNetworks,\r\n        loadingAngelNetworks: state.manageAngelNetworks.loadingAngelNetworks,\r\n        angelNetworksLoaded: state.manageAngelNetworks.angelNetworksLoaded,\r\n        page: state.manageAngelNetworks.page,\r\n        rowsPerPage: state.manageAngelNetworks.rowsPerPage,\r\n\r\n        searchText: state.manageAngelNetworks.searchText,\r\n        inSearchMode: state.manageAngelNetworks.inSearchMode,\r\n        matchedAngelNetworks: state.manageAngelNetworks.matchedAngelNetworks\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\r\n        loadAngelNetworks: () => dispatch(angelNetworksActions.loadAngelNetworks()),\r\n        changePage: (event, newPage) => dispatch(angelNetworksActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(angelNetworksActions.changeRowsPerPage(event)),\r\n        handleAngelNetworksTableInputChanged: (event) => dispatch(angelNetworksActions.handleAngelNetworksTableInputChanged(event)),\r\n        toggleSearchMode: () => dispatch(angelNetworksActions.toggleSearchMode()),\r\n        startListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.startListeningForAngelNetworksChanged()),\r\n        stopListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.stopListeningForAngelNetworksChanged())\r\n    }\r\n};\r\n\r\nclass AngelNetworks extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData({inComponentDidMount: true});\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            stopListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if user is set to null\r\n        if (!admin || (admin && !admin.superAdmin) || !shouldLoadOtherData) {\r\n            stopListeningForAngelNetworksChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData({inComponentDidMount: false});\r\n        this.addListener();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        stopListeningForAngelNetworksChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = ({inComponentDidMount = true}) => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            loadingAngelNetworks,\r\n            angelNetworksLoaded,\r\n\r\n            loadAngelNetworks\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (inComponentDidMount) {\r\n                if (admin && admin.superAdmin) {\r\n                    loadAngelNetworks();\r\n                }\r\n            } else {\r\n                // loadAngelNetworks() is called in componentDidUpdate which happens after every state changes\r\n                // therefore, in order to avoid unlimited calls of loadAngelNetworks, another check variable called loadingAngelNetworks\r\n                // is added to ensure the function only gets called once.\r\n                if (admin && admin.superAdmin && !loadingAngelNetworks && !angelNetworksLoaded) {\r\n                    loadAngelNetworks();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            angelNetworks,\r\n            angelNetworksLoaded,\r\n\r\n            startListeningForAngelNetworksChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (angelNetworks && angelNetworksLoaded) {\r\n                startListeningForAngelNetworksChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            toggleAddAngelNetworkDialog\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView\r\n                column\r\n                width=\"100%\"\r\n            >\r\n                <Divider style={{marginBottom: 20}}/>\r\n                <Row style={{marginBottom: 10}}>\r\n                    <Col xs={12} md={5} lg={12} style={{marginBottom: 40}}>\r\n                        <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddAngelNetworkDialog}>\r\n                            <AddIcon style={{marginRight: 10, width: 20, height: \"auto\"}}/>\r\n                            Add new group\r\n                        </Button>\r\n                    </Col>\r\n                </Row>\r\n                {\r\n                    this.renderAngelNetworksTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render angel networks table\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderAngelNetworksTable = () => {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n            admin,\r\n            angelNetworks,\r\n            page,\r\n            rowsPerPage,\r\n            searchText,\r\n            inSearchMode,\r\n            loadAngelNetworks,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            handleAngelNetworksTableInputChanged,\r\n            toggleSearchMode\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !admin || (admin && !admin.superAdmin)) {\r\n            return null;\r\n        }\r\n\r\n        // sort angel networks by added date\r\n        angelNetworks.sort((angelNetwork1, angelNetwork2) => {\r\n            return (angelNetwork2.dateAdded - angelNetwork1.dateAdded);\r\n        });\r\n\r\n        return (\r\n            <Paper elevation={1} style={{overflowX: \"auto\"}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <InputBase name=\"searchText\" value={searchText}  onChange={handleAngelNetworksTableInputChanged} fullWidth placeholder=\"Search group by name\" type=\"text\"\r\n                                        startAdornment={\r\n                                            <InputAdornment position=\"start\">\r\n                                                <OverlayTrigger trigger={['hover', 'focus']}  flip placement=\"bottom\"\r\n                                                    overlay={\r\n                                                        <Tooltip id={`tooltip-bottom`}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    \"Exit search mode\"\r\n                                                                    :\r\n                                                                    \"Enter search mode\"\r\n                                                            }\r\n                                                        </Tooltip>\r\n                                                    }>\r\n                                                    <IconButton onClick={toggleSearchMode}>\r\n                                                        {\r\n                                                            inSearchMode\r\n                                                                ?\r\n                                                                <CloseIcon/>\r\n                                                                :\r\n                                                                <SearchIcon/>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                </OverlayTrigger>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip  placement=\"bottom\"\r\n                                            overlay={\r\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\r\n                                            }>\r\n                                            <IconButton onClick={loadAngelNetworks} style={{marginLeft: 10}}>\r\n                                                <RefreshIcon/>\r\n                                            </IconButton>\r\n                                        </OverlayTrigger>\r\n                                    </FlexView>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={2}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)}  align=\"left\">Groups</Typography>\r\n                                }/>\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">ID</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">\r\n                                        Date added\r\n                                    </Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">Status</Typography>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {this.renderAngelNetworkRows()}\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination style={{backgroundColor: colors.blue_gray_50}} rowsPerPageOptions={[5, 10, 25]} count={angelNetworks.length} rowsPerPage={rowsPerPage}  page={page} backIconButtonProps={{'aria-label': 'Previous Page',}} nextIconButtonProps={{'aria-label': 'Next Page',}} SelectProps={{ native: true,}} onChangePage={changePage} onChangeRowsPerPage={changeRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render angel network rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderAngelNetworkRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            angelNetworks,\r\n            angelNetworksLoaded,\r\n            matchedAngelNetworks,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage\r\n        } = this.props;\r\n\r\n        let renderedAngelNetworks = [];\r\n\r\n        if (inSearchMode) {\r\n            renderedAngelNetworks = matchedAngelNetworks;\r\n        } else {\r\n            renderedAngelNetworks = angelNetworks;\r\n        }\r\n\r\n        if (renderedAngelNetworks.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={5}>\r\n                        <FlexView\r\n                         style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                angelNetworksLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"Can't find any groups with this name.\"\r\n                                                :\r\n                                                \"No groups added yet.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            renderedAngelNetworks.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(angelNetwork => (\r\n                <TableRow key={angelNetwork.anid} hover>\r\n                    <TableCell colSpan={2}>\r\n                        <NavLink to={Routes.constructGroupDetailRoute(groupUserName, angelNetwork.groupUserName)} className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\r\n                            <Typography color=\"primary\">{angelNetwork.displayName}</Typography>\r\n                        </NavLink>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography color=\"primary\">{angelNetwork.anid}</Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography color=\"primary\">{myUtils.dateTimeInReadableFormat(angelNetwork.dateAdded)}</Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography\r\n                            color={\r\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\r\n                                    ?\r\n                                    \"primary\"\r\n                                    :\r\n                                    \"error\"\r\n                            }>\r\n                            {\r\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\r\n                                    ?\r\n                                    \"Active\"\r\n                                    :\r\n                                    \"Suspended\"\r\n                            }\r\n                        </Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            ))\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AngelNetworks);","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nexport const MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS';\r\nexport const MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS';\r\nexport const loadJoinRequests = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!groupProperties) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadRequestsToJoin({anid: groupProperties.anid})\r\n            .then(joinRequests => {\r\n                dispatch({\r\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\r\n                    joinRequests\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\r\n                    joinRequests: [],\r\n                    error\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().manageJoinRequests.inSearchMode;\r\n        const searchText = getState().manageJoinRequests.searchText;\r\n        const joinRequests = getState().manageJoinRequests.joinRequests;\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: false,\r\n                matchedJoinRequests: []\r\n            });\r\n        } else {\r\n            let matchedJoinRequests = joinRequests.filter(joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase()));\r\n            dispatch({\r\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: true,\r\n                matchedJoinRequests\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED';\r\nexport const handleJoinRequestsTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const joinRequests = getState().manageJoinRequests.joinRequests;\r\n\r\n        const searchText = event.target.value;\r\n        let matchedJoinRequests = joinRequests.filter(\r\n            joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n\r\n        dispatch({\r\n            type: MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedJoinRequests\r\n        });\r\n    }\r\n};\r\n\r\nexport const acceptJoinRequest = (request) => {\r\n    return (dispatch, getState) => {\r\n        // remove the join request\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(request.id)\r\n            .remove()\r\n            .then(() => {\r\n                const pushKey = firebase.database().ref(DB_CONST.INVITED_USERS_CHILD).push().key;\r\n                const currentDate = utils.getCurrentDate();\r\n                // add a node in InvitedUsers\r\n                firebase\r\n                    .database()\r\n                    .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                    .child(pushKey)\r\n                    .set({\r\n                        id: pushKey,\r\n                        email: request.userProfile.email,\r\n                        firstName: request.userProfile.firstName,\r\n                        lastName: request.userProfile.lastName,\r\n                        title: request.userProfile.title,\r\n                        type: request.userProfile.type,\r\n                        status: DB_CONST.INVITED_USER_STATUS_ACTIVE,\r\n                        officialUserID: request.userID,\r\n                        invitedBy: request.groupToJoin,\r\n                        invitedDate: \"none\",\r\n                        requestedToJoin: true,\r\n                        requestedToJoinDate: currentDate,\r\n                        joinedDate: currentDate\r\n                    })\r\n                    .then(() => {\r\n                        realtimeDBUtils\r\n                            .sendNotification({\r\n                                title: `${request.group.displayName} has accepted your join request`,\r\n                                message: `Congratulations. You are now a member of ${request.group.displayName}. You can see and interact with all offers from ${request.group.displayName}.`,\r\n                                userID: request.userID,\r\n                                action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\r\n                            })\r\n                            .then(() => {\r\n                                // do something\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    });\r\n            });\r\n    }\r\n};\r\n\r\nexport const rejectJoinRequest = (request) => {\r\n    return (dispatch, getState) => {\r\n        // remove the join request\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(request.id)\r\n            .remove()\r\n            .then(() => {\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: `${request.group.displayName} has rejected your join request`,\r\n                        message: `We are so sorry that ${request.group.displayName} has rejected your join request. However, there are other groups that you can take part in.`,\r\n                        userID: request.userID,\r\n                        action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\r\n                    })\r\n                    .then(() => {\r\n                        // do something\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet joinRequestsListener = null;\r\n\r\nexport const MANAGE_JOIN_REQUESTS_CHANGED = 'MANAGE_JOIN_REQUESTS_CHANGED';\r\nexport const startListeningForJoinRequestsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const user = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!user || !groupProperties) {\r\n            return;\r\n        }\r\n\r\n        if (!joinRequestsListener) {\r\n            joinRequestsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(groupProperties.anid);\r\n\r\n            joinRequestsListener\r\n                .on('child_added', snapshot => {\r\n                    let joinRequest = snapshot.val();\r\n\r\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\r\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\r\n                    if (index === -1) {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(joinRequest.userID)\r\n                            .then(userProfile => {\r\n                                joinRequest.userProfile = userProfile;\r\n\r\n                                realtimeDBUtils\r\n                                    .loadAngelNetworkBasedOnANID(joinRequest.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n                                        joinRequest.group = angelNetwork;\r\n\r\n                                        dispatch({\r\n                                            type: MANAGE_JOIN_REQUESTS_CHANGED,\r\n                                            joinRequests: [...joinRequests, joinRequest]\r\n                                        });\r\n                                    });\r\n                            })\r\n                    }\r\n                });\r\n\r\n            joinRequestsListener\r\n                .on('child_removed', snapshot => {\r\n                    let joinRequest = snapshot.val();\r\n\r\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\r\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\r\n\r\n                    if (index !== -1) {\r\n                        joinRequests.splice(index, 1);\r\n                        dispatch({\r\n                            type: MANAGE_JOIN_REQUESTS_CHANGED,\r\n                            joinRequests\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForJoinRequestsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (joinRequestsListener) {\r\n            joinRequestsListener.off('child_added');\r\n            joinRequestsListener.off('child_removed');\r\n            joinRequestsListener = null;\r\n        }\r\n    }\r\n};\r\n","import React, {Component} from 'react';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\nimport {\r\n    Typography,\r\n    Paper,\r\n    TableHead,\r\n    TableRow,\r\n    TableCell,\r\n    TableBody,\r\n    TableFooter,\r\n    TablePagination,\r\n    Table,\r\n    InputBase,\r\n    InputAdornment,\r\n    IconButton, Button\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport FlexView from 'react-flexview';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {css} from 'aphrodite';\r\nimport {HashLoader} from 'react-spinners';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageJoinRequestsActions from '../../../redux-store/actions/manageJoinRequestsActions';\r\n\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../../values/colors';\r\nimport * as ROUTES from '../../../router/routes';\r\nimport * as myUtils from '../../../utils/utils';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n\r\n        joinRequests: state.manageJoinRequests.joinRequests,\r\n        loadingJoinRequests: state.manageJoinRequests.loadingJoinRequests,\r\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded,\r\n\r\n        searchText: state.manageJoinRequests.searchText,\r\n        inSearchMode: state.manageJoinRequests.inSearchMode,\r\n        matchedJoinRequests: state.manageJoinRequests.matchedJoinRequests,\r\n\r\n        page: state.manageJoinRequests.page,\r\n        rowsPerPage: state.manageJoinRequests.rowsPerPage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadJoinRequests: () => dispatch(manageJoinRequestsActions.loadJoinRequests()),\r\n        toggleSearchMode: () => dispatch(manageJoinRequestsActions.toggleSearchMode()),\r\n        changePage: (event, newPage) => dispatch(manageJoinRequestsActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(manageJoinRequestsActions.changeRowsPerPage(event)),\r\n        handleJoinRequestsTableInputChanged: (event) => dispatch(manageJoinRequestsActions.handleJoinRequestsTableInputChanged(event)),\r\n        acceptJoinRequest: (request) => dispatch(manageJoinRequestsActions.acceptJoinRequest(request)),\r\n        rejectJoinRequest: (request) => dispatch(manageJoinRequestsActions.rejectJoinRequest(request)),\r\n        startListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.startListeningForJoinRequestsChanged()),\r\n        stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged())\r\n    }\r\n};\r\n\r\nclass JoinRequests extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.attachListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            shouldLoadOtherData,\r\n            user,\r\n            stopListeningForJoinRequestsChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if user is set to null\r\n        if (!user || !shouldLoadOtherData) {\r\n            stopListeningForJoinRequestsChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.attachListener();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n\r\n            loadingJoinRequests,\r\n            joinRequestsLoaded,\r\n\r\n            loadJoinRequests\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (user) {\r\n                if (!loadingJoinRequests && !joinRequestsLoaded) {\r\n                    loadJoinRequests();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener\r\n     */\r\n    attachListener = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n\r\n            joinRequests,\r\n            joinRequestsLoaded,\r\n\r\n            startListeningForJoinRequestsChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (joinRequests && joinRequestsLoaded) {\r\n                startListeningForJoinRequestsChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            user,\r\n            joinRequests,\r\n            searchText,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage,\r\n            loadJoinRequests,\r\n            toggleSearchMode,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            handleJoinRequestsTableInputChanged\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded || !user) {\r\n            return null;\r\n        }\r\n\r\n        // sort join requests by request date (recent requests come first)\r\n        joinRequests.sort((joinRequest1, joinRequest2) => {\r\n            return (joinRequest2.requestedDate - joinRequest1.requestedDate);\r\n        });\r\n\r\n        return (\r\n            <Paper elevation={1} style={{ width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <InputBase name=\"searchText\" value={searchText} onChange={handleJoinRequestsTableInputChanged} fullWidth placeholder=\"Search access request by email\" type=\"text\"\r\n                                        startAdornment={\r\n                                            <InputAdornment position=\"start\">\r\n                                                <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\r\n                                                    overlay={\r\n                                                        <Tooltip id={`tooltip-bottom`}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    \"Exit search mode\"\r\n                                                                    :\r\n                                                                    \"Enter search mode\"\r\n                                                            }\r\n                                                        </Tooltip>\r\n                                                    }>\r\n                                                    <IconButton onClick={toggleSearchMode}>\r\n                                                        {\r\n                                                            inSearchMode\r\n                                                                ?\r\n                                                                <CloseIcon/>\r\n                                                                :\r\n                                                                <SearchIcon/>\r\n                                                        }\r\n                                                    </IconButton>\r\n                                                </OverlayTrigger>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\r\n                                component={\r\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\r\n                                            overlay={\r\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\r\n                                            }>\r\n                                            <IconButton onClick={loadJoinRequests} style={{marginLeft: 10}}>\r\n                                                <RefreshIcon/>\r\n                                            </IconButton>\r\n                                        </OverlayTrigger>\r\n                                    </FlexView>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <StyledTableCell colSpan={2}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>User's name</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Requested date</Typography>\r\n                                }\r\n                            />\r\n                            <StyledTableCell colSpan={1}\r\n                                cellColor={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                                textColor={colors.white}\r\n                                component={\r\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Action</Typography>\r\n                                }\r\n                            />\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderJoinRequestsRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} colSpan={5} count={joinRequests.length} rowsPerPage={rowsPerPage} page={page}\r\n                                backIconButtonProps={{'aria-label': 'Previous Page',}}\r\n                                nextIconButtonProps={{'aria-label': 'Next Page',}}\r\n                                SelectProps={{ native: true,}}\r\n                                onChangePage={changePage}\r\n                                onChangeRowsPerPage={changeRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render join requests table rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderJoinRequestsRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            joinRequests,\r\n            joinRequestsLoaded,\r\n            matchedJoinRequests,\r\n            inSearchMode,\r\n            page,\r\n            rowsPerPage,\r\n            acceptJoinRequest,\r\n            rejectJoinRequest\r\n        } = this.props;\r\n\r\n        let renderedJoinRequests = [];\r\n\r\n        if (inSearchMode) {\r\n            renderedJoinRequests = matchedJoinRequests;\r\n        } else {\r\n            renderedJoinRequests = joinRequests;\r\n        }\r\n\r\n        if (renderedJoinRequests.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={5}>\r\n                        <FlexView style={{margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                joinRequestsLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"Can't find any access request with this email.\"\r\n                                                :\r\n                                                \"No access requests yet.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            renderedJoinRequests.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(joinRequest => (\r\n                <TableRow key={joinRequest.id} hover>\r\n                    <TableCell colSpan={2}>\r\n                        <FlexView column>\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        `${ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", joinRequest.userID)}`\r\n                                        :\r\n                                        `${ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", joinRequest.userID)}`\r\n                                }\r\n                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                            >\r\n                                <Typography align=\"left\" variant=\"body1\" color=\"primary\">\r\n                                    {`${joinRequest.userProfile.title} ${joinRequest.userProfile.firstName} ${joinRequest.userProfile.lastName}`}\r\n                                </Typography>\r\n                            </NavLink>\r\n                        </FlexView>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography align=\"left\" variant=\"body1\">\r\n                            {joinRequest.userProfile.email}\r\n                        </Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <Typography align=\"left\" variant=\"body1\">\r\n                            {myUtils.dateInReadableFormat(joinRequest.requestedDate)}\r\n                        </Typography>\r\n                    </TableCell>\r\n                    <TableCell colSpan={1}>\r\n                        <FlexView>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"secondary\" onClick={() => rejectJoinRequest(joinRequest)} style={{marginRight: 6}}>Reject</Button>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"primary\" onClick={() => acceptJoinRequest(joinRequest)} style={{marginLeft: 6}}>Accept</Button>\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            ))\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JoinRequests);","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport {trackActivity} from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport {\r\n    ADD_NEW_GROUP_ADMIN_STATUS_CHECKING,\r\n    ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED,\r\n    ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\r\n} from \"../../pages/admin/components/GroupAdminsTable\";\r\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\r\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\r\n\r\nexport const GROUP_ADMINS_TABLE_SET_GROUP = 'GROUP_ADMINS_TABLE_SET_GROUP';\r\nexport const setGroup = newGroup => {\r\n    return (dispatch, getState) => {\r\n        const prevTableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (!newGroup || !prevTableGroup) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_SET_GROUP,\r\n                group: newGroup\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (prevTableGroup.anid === newGroup.anid) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_SET_GROUP,\r\n            group: newGroup\r\n        });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS';\r\nexport const GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS';\r\nexport const loadGroupAdmins = () => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                groupAdmins: []\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superAdmin) {\r\n            if (currentUser.anid !== tableGroup.anid) {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: []\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadGroupAdminsBasedOnGroupID(tableGroup.anid)\r\n            .then(groupAdmins => {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: [...groupAdmins]\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\r\n                    groupAdmins: []\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE = 'GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED = 'GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED';\r\nexport const handleInputChanged = event => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG = 'GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG';\r\nexport const toggleAddNewGroupAdminDialog = () => {\r\n    return {\r\n        type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\r\n    }\r\n};\r\n\r\nexport const GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED = 'GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED';\r\nexport const handleAddNewGroupAdmin = () => {\r\n    return async (dispatch, getState) => {\r\n        const newGroupAdminEmail = getState().manageGroupAdminsTable.newGroupAdminEmail;\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superGroupAdmin) {\r\n            return;\r\n        }\r\n\r\n        if (newGroupAdminEmail.trim().length === 0) {\r\n            dispatch({\r\n                type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n                status: ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\r\n            });\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n            status: ADD_NEW_GROUP_ADMIN_STATUS_CHECKING\r\n        });\r\n\r\n        try {\r\n            const checkResult = await realtimeDBUtils.doesUserExist(newGroupAdminEmail.toLowerCase());\r\n\r\n            // this email has already been used\r\n            if (checkResult.userExists) {\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\r\n                    status: ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED\r\n                });\r\n            } else {\r\n                const response = await new Api().request(\r\n                    \"post\",\r\n                    ApiRoutes.addGroupAdminRoute,\r\n                    {\r\n                        queryParameters: null,\r\n                        requestBody: {\r\n                            adder: currentUser,\r\n                            groupProperties: groupProperties,\r\n                            newGroupAdminEmail: newGroupAdminEmail\r\n                        }\r\n                    }\r\n                );\r\n\r\n                // obtain the newly created group admin profile from the server\r\n                const newGroupAdmin = response.data;\r\n\r\n                // track super group admin's activity\r\n                trackActivity({\r\n                    userID: currentUser.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.ADMINISTRATORS_CHILD,\r\n                    interactedObjectID: newGroupAdmin.id,\r\n                    activitySummary:\r\n                        realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN\r\n                            .replace(\"%groupAdminEmail%\", newGroupAdminEmail)\r\n                    ,\r\n                    value: newGroupAdmin\r\n                });\r\n\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Group admin added successfully.\",\r\n                    color: \"primary\",\r\n                    position: \"bottom\"\r\n                });\r\n\r\n                dispatch({\r\n                    type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\r\n                });\r\n            }\r\n        } catch (error) {\r\n            dispatch({\r\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                message: \"Error happened. Couldn't add this group admin.\",\r\n                color: \"error\",\r\n                position: \"bottom\"\r\n            });\r\n        }\r\n    }\r\n};\r\n//----------------------------------------------------------------------------------------------------------------------\r\n\r\nlet groupAdminsListener = null;\r\n\r\nexport const GROUP_ADMINS_TABLE_CHANGED = 'GROUP_ADMINS_TABLE_CHANGED';\r\nexport const startListeningForGroupAdminsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupAdminsListener) {\r\n            return;\r\n        }\r\n\r\n        const currentUser = getState().auth.user;\r\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\r\n\r\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser.superAdmin && currentUser.anid !== tableGroup.anid) {\r\n            return;\r\n        }\r\n\r\n        groupAdminsListener = firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD);\r\n\r\n        groupAdminsListener\r\n            .on('child_added', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index === -1) {\r\n\r\n                    if (groupAdmin.anid === tableGroup.anid) {\r\n                        dispatch({\r\n                            type: GROUP_ADMINS_TABLE_CHANGED,\r\n                            groupAdmins: [...groupAdmins, groupAdmin]\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n        groupAdminsListener\r\n            .on('child_changed', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index !== -1) {\r\n                    groupAdmins[index] = groupAdmin;\r\n                    dispatch({\r\n                        type: GROUP_ADMINS_TABLE_CHANGED,\r\n                        groupAdmins: [...groupAdmins]\r\n                    });\r\n                }\r\n            });\r\n\r\n        groupAdminsListener\r\n            .on('child_removed', snapshot => {\r\n                const groupAdmin = snapshot.val();\r\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\r\n\r\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\r\n                if (index !== -1) {\r\n                    groupAdmins.splice(index, 1);\r\n                    dispatch({\r\n                        type: GROUP_ADMINS_TABLE_CHANGED,\r\n                        groupAdmins: [...groupAdmins]\r\n                    });\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForGroupAdminsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupAdminsListener) {\r\n            groupAdminsListener.off('child_added');\r\n            groupAdminsListener.off('child_changed');\r\n            groupAdminsListener.off('child_removed');\r\n            groupAdminsListener = null;\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Paper,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableFooter,\r\n    TableRow,\r\n    TableCell,\r\n    Typography,\r\n    Button,\r\n    InputBase,\r\n    TablePagination,\r\n    InputAdornment,\r\n    IconButton,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    TextField\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\nimport {\r\n    HashLoader,\r\n    BeatLoader\r\n} from 'react-spinners';\r\nimport {css} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\n\r\nimport * as utils from '../../../utils/utils';\r\nimport * as colors from '../../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as groupAdminsTableActions from '../../../redux-store/actions/groupAdminsTableActions';\r\n\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_NONE = 0;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL = 1;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_CHECKING = 2;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED = 3;\r\nexport const ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n        currentUser: state.auth.user,\r\n        tableGroup: state.manageGroupAdminsTable.tableGroup,\r\n        groupAdmins: state.manageGroupAdminsTable.groupAdmins,\r\n        groupAdminsLoaded: state.manageGroupAdminsTable.groupAdminsLoaded,\r\n        loadingGroupAdmins: state.manageGroupAdminsTable.loadingGroupAdmins,\r\n        page: state.manageGroupAdminsTable.page,\r\n        rowsPerPage: state.manageGroupAdminsTable.rowsPerPage,\r\n        searchText: state.manageGroupAdminsTable.searchText,\r\n        inSearchMode: state.manageGroupAdminsTable.inSearchMode,\r\n\r\n        addNewGroupAdminDialogOpen: state.manageGroupAdminsTable.addNewGroupAdminDialogOpen,\r\n        newGroupAdminEmail: state.manageGroupAdminsTable.newGroupAdminEmail,\r\n        addNewGroupAdminStatus: state.manageGroupAdminsTable.addNewGroupAdminStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadGroupAdmins: () => dispatch(groupAdminsTableActions.loadGroupAdmins()),\r\n        changePage: (event, newPage) => dispatch(groupAdminsTableActions.changePage(event, newPage)),\r\n        changeRowsPerPage: (event) => dispatch(groupAdminsTableActions.changeRowsPerPage(event)),\r\n        handleInputChanged: (event) => dispatch(groupAdminsTableActions.handleInputChanged(event)),\r\n        toggleSearchMode: () => dispatch(groupAdminsTableActions.toggleSearchMode()),\r\n        startListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.startListeningForGroupAdminsChanged()),\r\n        stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\r\n        handleAddNewGroupAdmin: () => dispatch(groupAdminsTableActions.handleAddNewGroupAdmin()),\r\n\r\n        toggleAddNewGroupAdminDialog: () => dispatch(groupAdminsTableActions.toggleAddNewGroupAdminDialog())\r\n    }\r\n};\r\n\r\nclass GroupAdminsTable extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n        this.addListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        const {\r\n            shouldLoadOtherData,\r\n            tableGroup,\r\n            stopListeningForGroupAdminsChanged\r\n        } = this.props;\r\n\r\n        // cancel all listeners if tableGroup is set to null\r\n        if (!tableGroup || !shouldLoadOtherData) {\r\n            stopListeningForGroupAdminsChanged();\r\n            return;\r\n        }\r\n\r\n        this.loadData();\r\n        this.addListeners();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n            tableGroup,\r\n            loadingGroupAdmins,\r\n            groupAdminsLoaded,\r\n            loadGroupAdmins\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (tableGroup && !loadingGroupAdmins && !groupAdminsLoaded) {\r\n                loadGroupAdmins();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListeners = () => {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupAdmins,\r\n            groupAdminsLoaded,\r\n            startListeningForGroupAdminsChanged\r\n        } = this.props;\r\n\r\n        if (shouldLoadOtherData) {\r\n            if (groupAdmins && groupAdminsLoaded) {\r\n                startListeningForGroupAdminsChanged();\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            tableGroup,\r\n            page,\r\n            rowsPerPage,\r\n            searchText,\r\n            inSearchMode,\r\n            addNewGroupAdminDialogOpen,\r\n            newGroupAdminEmail,\r\n            addNewGroupAdminStatus,\r\n            changePage,\r\n            changeRowsPerPage,\r\n            loadGroupAdmins,\r\n            handleInputChanged,\r\n            toggleSearchMode,\r\n            handleAddNewGroupAdmin,\r\n\r\n            toggleAddNewGroupAdminDialog\r\n        } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Paper elevation={1} style={{overflowX: \"auto\"}}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\r\n                                    component={\r\n                                        <InputBase name=\"searchText\" value={searchText} onChange={handleInputChanged} fullWidth placeholder=\"Search by email\" type=\"text\"\r\n                                            startAdornment={\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" fli\r\n                                                        overlay={\r\n                                                            <Tooltip id={`tooltip-bottom`}>\r\n                                                                {\r\n                                                                    inSearchMode\r\n                                                                        ?\r\n                                                                        \"Exit search mode\"\r\n                                                                        :\r\n                                                                        \"Enter search mode\"\r\n                                                                }\r\n                                                            </Tooltip>\r\n                                                        }>\r\n                                                        <IconButton onClick={toggleSearchMode}>\r\n                                                            {\r\n                                                                inSearchMode\r\n                                                                    ?\r\n                                                                    <CloseIcon/>\r\n                                                                    :\r\n                                                                    <SearchIcon/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </OverlayTrigger>\r\n                                                </InputAdornment>\r\n                                            }\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50} component={\r\n                                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\r\n                                            {\r\n                                                currentUser.superGroupAdmin\r\n                                                && tableGroup !== null\r\n                                                && currentUser.anid === tableGroup.anid\r\n                                                    ?\r\n                                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddNewGroupAdminDialog} style={{ marginRight: 8}}>Add new group admin</Button>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                overlay={\r\n                                                    <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>}>\r\n                                                <IconButton onClick={loadGroupAdmins} style={{marginLeft: 10}}>\r\n                                                    <RefreshIcon/>\r\n                                                </IconButton>\r\n                                            </OverlayTrigger>\r\n                                        </FlexView>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                            <TableRow>\r\n                                <StyledTableCell colSpan={2}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>}/>\r\n                                <StyledTableCell colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\"  className={css(sharedStyles.white_text)}>Type</Typography>}/>\r\n                                <StyledTableCell colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Date added</Typography>}/>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderTableRows()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{backgroundColor: colors.blue_gray_50}}\r\n                                    rowsPerPageOptions={[10, 30, 50]}\r\n                                    count={this.getRenderedGroupAdmins().length}\r\n                                    rowsPerPage={rowsPerPage}\r\n                                    page={page}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={changePage}\r\n                                    onChangeRowsPerPage={changeRowsPerPage}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n\r\n                <AddGroupAdminDialog\r\n                    groupProperties={groupProperties}\r\n                    addNewGroupAdminDialogOpen={addNewGroupAdminDialogOpen}\r\n                    newGroupAdminEmail={newGroupAdminEmail}\r\n                    addNewGroupAdminStatus={addNewGroupAdminStatus}\r\n                    toggleAddNewGroupAdminDialog={toggleAddNewGroupAdminDialog}\r\n                    handleInputChanged={handleInputChanged}\r\n                    handleAddNewGroupAdmin={handleAddNewGroupAdmin}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render table rows\r\n     *\r\n     * @returns {*[]|*}\r\n     */\r\n    renderTableRows = () => {\r\n        const {\r\n            groupProperties,\r\n            groupAdminsLoaded,\r\n            page,\r\n            rowsPerPage,\r\n            inSearchMode\r\n        } = this.props;\r\n\r\n        if (this.getRenderedGroupAdmins().length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{margin: 20}}>\r\n                            {\r\n                                groupAdminsLoaded\r\n                                    ?\r\n                                    <Typography variant=\"body1\" align=\"center\">\r\n                                        {\r\n                                            inSearchMode\r\n                                                ?\r\n                                                \"No group admins found.\"\r\n                                                :\r\n                                                \"No group admins.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader\r\n                                        color={\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                        }\r\n                                    />\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            this.getRenderedGroupAdmins()\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(groupAdmin => (\r\n                    <TableRow key={groupAdmin.id} hover>\r\n                        <TableCell colSpan={2}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {groupAdmin.email}\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {\r\n                                    groupAdmin.superGroupAdmin\r\n                                        ?\r\n                                        \"Super group admin\"\r\n                                        :\r\n                                        \"Group admin\"\r\n                                }\r\n                            </Typography>\r\n                        </TableCell>\r\n                        <TableCell colSpan={1}>\r\n                            <Typography variant=\"body2\" align=\"left\">\r\n                                {utils.dateTimeInReadableFormat(groupAdmin.dateAdded)}\r\n                            </Typography>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                )\r\n            )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Get rendered group admins\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    getRenderedGroupAdmins = () => {\r\n        const {\r\n            searchText,\r\n            inSearchMode,\r\n            groupAdmins\r\n        } = this.props;\r\n\r\n        let searchedGroupAdmins = [...groupAdmins];\r\n\r\n        if (inSearchMode) {\r\n            searchedGroupAdmins = searchedGroupAdmins\r\n                .filter(groupAdmin => groupAdmin.email.includes(searchText.toLowerCase()));\r\n        }\r\n\r\n        return searchedGroupAdmins.sort((groupAdmin1, groupAdmin2) => {\r\n            return groupAdmin2.time - groupAdmin1.time;\r\n        });\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminsTable);\r\n\r\nclass AddGroupAdminDialog extends Component {\r\n    render() {\r\n        const {\r\n            forwardedRef,\r\n            addNewGroupAdminDialogOpen,\r\n            newGroupAdminEmail,\r\n            toggleAddNewGroupAdminDialog,\r\n            handleInputChanged,\r\n            handleAddNewGroupAdmin\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog open={addNewGroupAdminDialogOpen} ref={forwardedRef} fullWidth maxWidth=\"md\" onClose={toggleAddNewGroupAdminDialog}>\r\n                <DialogTitle disableTypography>\r\n                    <FlexView vAlignContent=\"center\">\r\n                        <FlexView grow={4}>\r\n                            <Typography variant='h6' color='primary' align=\"left\">Add new group admin\r\n                            </Typography>\r\n                        </FlexView>\r\n                        <FlexView grow={1} hAlignContent=\"right\">\r\n                            <IconButton onClick={toggleAddNewGroupAdminDialog}>\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        label=\"Email\"\r\n                        name=\"newGroupAdminEmail\"\r\n                        placeholder=\"Write email here\"\r\n                        value={newGroupAdminEmail}\r\n                        onChange={handleInputChanged}\r\n                        fullWidth\r\n                        required\r\n                        style={{ marginTop: 10}}/>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={20} hAlignContent=\"right\" vAlignContent=\"center\">\r\n                        {\r\n                            this.renderStatusMessage()\r\n                        }\r\n                        <Button variant=\"outlined\" color=\"primary\" onClick={handleAddNewGroupAdmin} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 20}}>Add<AddIcon fontSize=\"small\" style={{ marginLeft: 8}}/>\r\n                        </Button>\r\n                    </FlexView>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render status message\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderStatusMessage = () => {\r\n        const {\r\n            addNewGroupAdminStatus,\r\n            groupProperties\r\n        } = this.props;\r\n\r\n        let msg = {\r\n            text: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (addNewGroupAdminStatus) {\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_NONE:\r\n                return null;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL:\r\n                msg.tex = \"Please fill in the email.\";\r\n                msg.color = \"error\";\r\n                break;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_CHECKING:\r\n                return (\r\n                    <BeatLoader size={10}\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                );\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED:\r\n                msg.text = \"This email has been used by another account.\";\r\n                msg.color = \"error\";\r\n                break;\r\n            case ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS:\r\n                return null;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography color={msg.color} variant=\"body1\" align=\"left\">\r\n                {msg.text}\r\n            </Typography>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport Sidebar from 'react-sidebar';\r\nimport FlexView from 'react-flexview';\r\nimport {Col, Container, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {Accordion, AccordionDetails, AccordionSummary, Badge, Divider, IconButton, Typography} from '@material-ui/core';\r\nimport Menu from '@material-ui/icons/Menu';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport queryString from 'query-string';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\n\r\nimport SidebarContent, {\r\n    CHANGE_PASSWORD_TAB,\r\n    EXPLORE_GROUPS_TAB,\r\n    EXPLORE_OFFERS_TAB,\r\n    RESOURCES_TAB,\r\n    GROUP_ACTIVITIES_TAB,\r\n    HOME_TAB,\r\n    MY_ACTIVITIES_TAB,\r\n    SETTINGS_TAB\r\n} from '../../shared-components/nav-bars/SidebarContent';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport InvitationDialog from './components/InvitationDialog';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport SuperAdminSettings from './components/SuperAdminSettings';\r\nimport GroupAdminSettings from './components/GroupAdminSettings';\r\nimport InvitedUsers from './components/InvitedUsers';\r\nimport AngelNetWorks from './components/AngelNetworks';\r\nimport AddAngelNetWorkDialog from './components/AddAngelNetWorkDialog';\r\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\r\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\r\nimport JoinRequests from './components/JoinRequests';\r\nimport ActivitiesTable from '../../shared-components/activities-components/ActivitiesTable';\r\nimport GroupAdminsTable from './components/GroupAdminsTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as groupAdminsTableActions from '../../redux-store/actions/groupAdminsTableActions';\r\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\r\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\r\nimport {successfullyFetchedOffers} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {isProjectWaitingToGoLive} from \"../../models/project\";\r\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\r\nimport Resources from \"../resources/Resources\";\r\n\r\n\r\nexport const MAX_CARD_DETAILS_HEIGHT = 2000;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n        OffersTableLocalState: state.OffersTableLocalState,\r\n\r\n        // --- old states ----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\r\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n        notifications: state.manageNotifications.notifications,\r\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\r\n        notificationBellRef: state.manageNotifications.notificationBellRef,\r\n\r\n        joinRequests: state.manageJoinRequests.joinRequests,\r\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\r\n\r\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\r\n\r\n        groupAdminsTable_setGroup: (group) => dispatch(groupAdminsTableActions.setGroup(group)),\r\n\r\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\r\n        notificationRefUpdated: (ref) => dispatch(notificationsActions.notificationRefUpdated(ref)),\r\n    }\r\n};\r\n\r\nclass AdminDashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n        this.notificationBell = React.createRef();\r\n    }\r\n\r\n    /**\r\n     * Set required data for components used within this dashboard\r\n     */\r\n    setDataForComponents = () => {\r\n        const {\r\n            currentUser,\r\n            groupProperties,\r\n\r\n            // projectsTable_setUser,\r\n            activitiesTable_setUser,\r\n            groupAdminsTable_setGroup\r\n        } = this.props;\r\n\r\n        if (!currentUser\r\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        // // set user so that information can be used in the projects table component\r\n        // projectsTable_setUser(currentUser);\r\n\r\n        // set user so that information can be used in the activities table component\r\n        activitiesTable_setUser(\r\n            currentUser.superAdmin\r\n                ?\r\n                currentUser\r\n                :\r\n                groupProperties\r\n        );\r\n\r\n        // set group so that information can be used in the group admins table component\r\n        groupAdminsTable_setGroup(groupProperties);\r\n    };\r\n\r\n    /**\r\n     * Component will mount\r\n     */\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n\r\n            notificationRefUpdated\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.ADMIN : ROUTES.ADMIN_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n\r\n        notificationRefUpdated(this.notificationBell.current);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork,\r\n\r\n            notificationRefUpdated\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.setDataForComponents();\r\n        }\r\n\r\n        notificationRefUpdated(this.notificationBell.current);\r\n    };\r\n\r\n    /**\r\n     * Render page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n            OffersTableLocalState,\r\n\r\n            currentUser,\r\n\r\n            joinRequests,\r\n            joinRequestsLoaded\r\n        } = this.props;\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let projectsAwaitingDecision = 0;\r\n        // only do this if the table user is also set to the current admin\r\n        if (OffersTableLocalState.tableUser && OffersTableLocalState.tableUser.id === AuthenticationState.currentUser.id) {\r\n            if (successfullyFetchedOffers(OffersTableLocalState)) {\r\n                OffersTableLocalState.offerInstances.forEach(offerInstance => {\r\n                    if (isProjectWaitingToGoLive(offerInstance.projectDetail)) {\r\n                        projectsAwaitingDecision += 1;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * HOME TAB\r\n         */\r\n        if (params.tab === HOME_TAB) {\r\n            return (\r\n                <Row noGutters style={{marginBottom: 30}}>\r\n                    {/* Manage groups */}\r\n                    {\r\n                        !currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage groups</Typography>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage groups that have joined the system.</Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <AngelNetWorks/>\r\n                                        </FlexView>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/* Manage group members (group admins) / system users (super admins) */}\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <Accordion className={css(styles.card_style)}>\r\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                <FlexView column>\r\n                                    <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage system users\"\r\n                                                :\r\n                                                \"Manage group members\"\r\n                                        }\r\n                                    </Typography>\r\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage all the system users (investors and issuers) including those who have been invited but not yet registered.\"\r\n                                                :\r\n                                                \"Manage all the group members (investors and issuers) including those who have been invited but not yet registered and those who joined this group from another group.\"\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                <InvitedUsers/>\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    </Col>\r\n\r\n                    {/* Manage access requests */}\r\n                    {\r\n                        currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <FlexView width=\"100%\">\r\n                                                <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage access requests</Typography>\r\n                                                <FlexView marginLeft={28} marginTop={8}>\r\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\r\n                                                        overlay={\r\n                                                            <Tooltip id={`tooltip-top`}>\r\n                                                                {joinRequests.length} access requests\r\n                                                                are awaiting your review.\r\n                                                            </Tooltip>\r\n                                                        }>\r\n                                                        <Badge badgeContent={!joinRequestsLoaded ? 0 : joinRequests.length} color=\"error\"\r\n                                                            invisible={\r\n                                                                !joinRequestsLoaded\r\n                                                                    ?\r\n                                                                    true\r\n                                                                    :\r\n                                                                    joinRequests.length === 0\r\n                                                            }/>\r\n                                                    </OverlayTrigger>\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                                Manage access requests from other groups' investors who would like\r\n                                                to\r\n                                                join this group.\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                        <JoinRequests/>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/* Manage offers */}\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <Accordion className={css(styles.card_style)}>\r\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                <FlexView column>\r\n                                    <FlexView width=\"100%\">\r\n                                        <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage offers</Typography>\r\n                                        <FlexView marginLeft={28} marginTop={8}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\r\n                                                overlay={\r\n                                                    <Tooltip\r\n                                                        id={`tooltip-top`}\r\n                                                    >\r\n                                                        {\r\n                                                            currentUser.superAdmin\r\n                                                                ?\r\n                                                                `${projectsAwaitingDecision} offers are awaiting group admins' review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\r\n                                                                :\r\n                                                                `${projectsAwaitingDecision} offers are awaiting your review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\r\n                                                        }\r\n                                                    </Tooltip>\r\n                                                }>\r\n                                                <Badge badgeContent={projectsAwaitingDecision} color=\"error\"\r\n                                                    invisible={projectsAwaitingDecision === 0}/>\r\n                                            </OverlayTrigger>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\r\n                                        {\r\n                                            currentUser.superAdmin\r\n                                                ?\r\n                                                \"Manage all the offers created by all the issuers and group admins in the system.\"\r\n                                                :\r\n                                                \"Manage all the offers created by the issuers and group admins of this group.\"\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n                            </AccordionSummary>\r\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\r\n                                <FlexView column width=\"100%\">\r\n                                    <Divider style={{marginBottom: 15}}/>\r\n                                    <OffersTable/>\r\n                                </FlexView>\r\n                            </AccordionDetails>\r\n                        </Accordion>\r\n                    </Col>\r\n\r\n                    {/* Manage group admins */}\r\n                    {\r\n                        currentUser.superAdmin\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} md={12} lg={12}>\r\n                                <Accordion className={css(styles.card_style)}>\r\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\r\n                                        <FlexView column>\r\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage group admins</Typography>\r\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage group admins. Only super group admin can add a new group\r\n                                                admin.</Typography>\r\n                                        </FlexView>\r\n                                    </AccordionSummary>\r\n                                    <AccordionDetails>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <GroupAdminsTable/>\r\n                                        </FlexView>\r\n                                    </AccordionDetails>\r\n                                </Accordion>\r\n                            </Col>\r\n                    }\r\n\r\n                </Row>\r\n            )\r\n        }\r\n\r\n        /**\r\n         * SETTINGS TAB\r\n         */\r\n        if (params.tab === SETTINGS_TAB) {\r\n            return (\r\n                currentUser.superAdmin\r\n                    ?\r\n                    <SuperAdminSettings/>\r\n                    :\r\n                    <GroupAdminSettings/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * CHANGE PASSWORD TAB\r\n         */\r\n        if (params.tab === CHANGE_PASSWORD_TAB) {\r\n            return (\r\n                <ChangePasswordPage/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * FORUMS TAB\r\n         */\r\n        // if (params.tab === FORUMS_TAB) {\r\n        //     return (\r\n        //         <Forums/>\r\n        //     );\r\n        // }\r\n\r\n        /**\r\n         * RESOURCES TAB\r\n         */\r\n        if (params.tab === RESOURCES_TAB) {\r\n            return (\r\n                <Resources/>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * GROUP ACTIVITIES TAB\r\n         */\r\n        if (params.tab === GROUP_ACTIVITIES_TAB || params.tab === MY_ACTIVITIES_TAB) {\r\n            return (\r\n                <div\r\n                    style={{\r\n                        margin: 30\r\n                    }}\r\n                >\r\n                    <ActivitiesTable/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        /**\r\n         * EXPLORE OFFERS TAB\r\n         */\r\n        if (params.tab === EXPLORE_OFFERS_TAB) {\r\n            return <ExploreOffers/>;\r\n        }\r\n\r\n        /**\r\n         * EXPLORE GROUPS TAB\r\n         */\r\n        if (params.tab === EXPLORE_GROUPS_TAB) {\r\n            // return (\r\n            //     <ExploreGroups/>\r\n            // );\r\n            return <ExploreGroups/>;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n\r\n            sidebarDocked,\r\n            sidebarOpen,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded,\r\n\r\n            notifications,\r\n            notificationsAnchorEl,\r\n\r\n            toggleSidebar,\r\n            toggleNotifications\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !currentUserLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !currentUser\r\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return <Sidebar\r\n            sidebar={\r\n                <SidebarContent\r\n                    dashboardProps={this.props}\r\n                />\r\n            }\r\n            shadow={false}\r\n            open={sidebarOpen}\r\n            docked={sidebarDocked}\r\n            onSetOpen={() => toggleSidebar(true)}\r\n            transitions\r\n            styles={{\r\n                sidebar: {backgroundColor: colors.blue_gray_50},\r\n                content: {backgroundColor: colors.gray_100}\r\n            }}\r\n        >\r\n            <Container\r\n                fluid\r\n                style={{ padding: 0}}>\r\n                {/** Header */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\r\n                         style={{backgroundColor:\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                            }}>\r\n                            <Row style={{width: \"100%\"}} noGutters>\r\n                                {/** Page title */}\r\n                                <Col xs={10} sm={10} md={11} lg={11}>\r\n                                    <FlexView vAlignContent=\"center\" width=\"100%\">\r\n                                        {\r\n                                            <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\r\n                                                <Menu/>\r\n                                            </IconButton>\r\n                                        }\r\n                                        {\r\n                                            this.renderPageTitle()\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n\r\n                                {/** Notification icon */}\r\n                                <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\r\n                                    <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\" >\r\n                                        <div ref={this.notificationBell}>\r\n                                        <IconButton onMouseDown={ (e) => {toggleNotifications(e)} } id=\"notification-button\">\r\n                                            <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\r\n                                                <NotificationsIcon className={css(sharedStyles.white_text)}/>\r\n                                            </Badge>\r\n                                        </IconButton>\r\n                                        </div>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters style={{backgroundColor: colors.white}}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Typography variant=\"body1\" align=\"center\" style={{paddingTop: 16,paddingBottom: 16}}>\r\n                            {\r\n                                currentUser.superAdmin\r\n                                    ?\r\n                                    \"System admin\"\r\n                                    :\r\n                                    currentUser.superGroupAdmin\r\n                                        ?\r\n                                        \"Super group admin\"\r\n                                        :\r\n                                        \"Group admin\"\r\n                            }\r\n                            : <b>{currentUser.email}</b>\r\n                        </Typography>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider style={{backgroundColor: colors.kick_starter_gray_box_border}}/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n\r\n            {/** Notifications box */}\r\n            {notificationsAnchorEl !== null &&\r\n                <NotificationsBox/>\r\n            }\r\n\r\n            {/** User invitation dialog */}\r\n            <InvitationDialog/>\r\n\r\n            {/** Add angel network dialog */}\r\n            <AddAngelNetWorkDialog/>\r\n        </Sidebar>;\r\n    }\r\n\r\n    /**\r\n     * Render page's title\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderPageTitle = () => {\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        let title = '';\r\n\r\n        switch (params.tab) {\r\n            case HOME_TAB:\r\n                title = HOME_TAB;\r\n                break;\r\n            case SETTINGS_TAB:\r\n                title = SETTINGS_TAB;\r\n                break;\r\n            case CHANGE_PASSWORD_TAB:\r\n                title = CHANGE_PASSWORD_TAB;\r\n                break;\r\n            // case FORUMS_TAB:\r\n            //     title = FORUMS_TAB;\r\n            //     break;\r\n            case RESOURCES_TAB:\r\n                title = RESOURCES_TAB;\r\n                break;\r\n            case GROUP_ACTIVITIES_TAB:\r\n                title = GROUP_ACTIVITIES_TAB;\r\n                break;\r\n            case EXPLORE_GROUPS_TAB:\r\n                title = EXPLORE_GROUPS_TAB;\r\n                break;\r\n            case EXPLORE_OFFERS_TAB:\r\n                title = EXPLORE_OFFERS_TAB;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return (\r\n            <Typography variant=\"h6\" className={css(styles.page_title)}>\r\n                {title}\r\n            </Typography>\r\n        );\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminDashboard);\r\n\r\nconst styles = StyleSheet.create({\r\n    page_title: {\r\n        fontSize: 19,\r\n        marginLeft: 8,\r\n        color: colors.white\r\n    },\r\n\r\n    card_style: {\r\n        marginTop: 25,\r\n        marginLeft: 30,\r\n        marginRight: 30\r\n    },\r\n\r\n    card_details_expansion: {\r\n        maxHeight: MAX_CARD_DETAILS_HEIGHT,\r\n        overflowY: \"auto\"\r\n    }\r\n});","import React, { Component } from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\n\r\nimport * as colors from '../../values/colors';\r\n\r\nexport default class LegalDocuments extends Component {\r\n\r\n    onDeleteDocument = index => {\r\n        this.props.onDeleteDocument(index);\r\n    };\r\n\r\n    render() {\r\n\r\n        /**\r\n         * documents is an array with documents inside\r\n         * \r\n         * the document inside the array will have the following structure:\r\n         * \r\n         * {\r\n         *      file: File (obtained when uploading)\r\n         *      preview: preview obtained using FileReader\r\n         * }\r\n         */\r\n        const {\r\n            documents\r\n        } = this.props;\r\n\r\n        if (!documents || (documents && documents.length === 0)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView column marginTop={20}>\r\n                <List>\r\n                    {\r\n                        documents.map((document, index) => (\r\n                            <FlexView key={index} vAlignContent=\"center\">\r\n                                <ListItem button style={{ padding: 7 }} >\r\n                                    <img alt=\"Document\" className={css(styles.preview_icon)} src={require(\"../../img/document_icon.png\").default} />\r\n                                    <FlexView column hAlignContent=\"left\" >\r\n                                        <Typography variant=\"body2\" className={css(styles.black_text)} align=\"left\" >{document.file.name}</Typography>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{document.file.sizeReadable}</Typography>\r\n                                    </FlexView>\r\n                                </ListItem>\r\n\r\n                                <OverlayTrigger\r\n                                    trigger={['hover', 'focus']}\r\n                                    flip\r\n                                    placement=\"bottom\"\r\n                                    overlay={\r\n                                        <Tooltip id={`tooltip-bottom`} > Remove </Tooltip>\r\n                                    }>\r\n                                    <IconButton style={{ width: 44, height: 44 }} onClick={() => this.onDeleteDocument(index)}>\r\n                                        <CloseIcon fontSize=\"small\"/>\r\n                                    </IconButton>\r\n                                </OverlayTrigger>\r\n                            </FlexView>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    preview_icon: {\r\n        width: 48, \r\n        height: 48\r\n    },\r\n\r\n    file_name: {\r\n        fontSize: 14,\r\n        marginBottom: 2\r\n    },\r\n\r\n    file_size: {\r\n        fontSize: 13,\r\n        color: colors.blue_gray_700\r\n    }\r\n});","import React, { Component } from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport { StyleSheet, css } from 'aphrodite';\r\nimport {\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {\r\n    OverlayTrigger,\r\n    Tooltip\r\n} from 'react-bootstrap';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport default class DocumentsDownload extends Component {\r\n\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    onDeleteDocument = index => {\r\n        this.props.onDeleteDocument(index);\r\n    };\r\n\r\n    render() {\r\n\r\n        /**\r\n         * documents is an array with documents inside\r\n         * \r\n         * the document inside the array will have the following structure:\r\n         * \r\n         * {\r\n         *      downloadURL: download URL from firebase storage\r\n         *      fileName: ...\r\n         *      readableSize: ...\r\n         * }\r\n         */\r\n        const {\r\n            documents,\r\n            deleteEnable\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FlexView column marginTop={20} >\r\n                <List>\r\n                    {\r\n                        documents.map((document, index) => (\r\n                            document.hasOwnProperty('removed')\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView key={index} vAlignContent=\"center\" >\r\n                                    {\r\n                                        <a\r\n                                            href={document.downloadURL}\r\n                                            rel=\"noopener noreferrer\"\r\n                                            target=\"_blank\"\r\n                                            className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            style={{\r\n                                                width: \"100%\"\r\n                                            }}\r\n                                        >\r\n                                            <ListItem button style={{ padding: 7 }} >\r\n                                                <img\r\n                                                    alt=\"Document\"\r\n                                                    className={css(styles.preview_icon)}\r\n                                                    src={require(\"../../img/document_icon.png\").default}\r\n                                                />\r\n                                                <FlexView column hAlignContent=\"left\" >\r\n                                                    <Typography variant=\"body2\" className={css(styles.black_text)} align=\"left\">{document.fileName}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" >{document.readableSize}</Typography>\r\n                                                </FlexView>\r\n                                            </ListItem>\r\n                                        </a>\r\n                                    }\r\n                                    {\r\n                                        deleteEnable\r\n                                            ?\r\n                                            <OverlayTrigger\r\n                                                trigger={['hover', 'focus']}\r\n                                                flip\r\n                                                placement=\"top\"\r\n                                                overlay={\r\n                                                    <Tooltip id={`tooltip-top`}>Delete this document</Tooltip>\r\n                                                }>\r\n                                                <IconButton\r\n                                                    style={{ width: 44, height: 44 }}\r\n                                                    onClick={() => this.onDeleteDocument(index)}\r\n                                                >\r\n                                                    <CloseIcon fontSize=\"small\" />\r\n                                                </IconButton>\r\n                                            </OverlayTrigger>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                        ))\r\n                    }\r\n                </List>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    no_margin: {\r\n        margin: 0\r\n    },\r\n\r\n    preview_icon: {\r\n        width: 48, \r\n        height: 48\r\n    },\r\n\r\n    file_name: {\r\n        fontSize: 14,\r\n        marginBottom: 2\r\n    },\r\n\r\n    file_size: {\r\n        fontSize: 13,\r\n        color: colors.blue_gray_700\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","export const SELECT_PROJECT_VISIBILITY_SET_PROJECT = 'SELECT_PROJECT_VISIBILITY_SET_PROJECT';\r\nexport const setProject = project => {\r\n    return {\r\n        type: SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n        project\r\n    }\r\n};\r\n\r\nexport const HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED = 'HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED';\r\nexport const handleProjectVisibilityChanged = (event) => {\r\n    return {\r\n        type: HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED,\r\n        event\r\n    }\r\n};","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from \"@material-ui/core\";\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\nimport {isValidatingGroupUrl, successfullyValidatedGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPitchVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl fullWidth >\r\n                <FormHelperText className={css(sharedStyles.black_text)} style={{ marginBottom: 6 }}>Select pitch visibility</FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                    ?\r\n                                    ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput labelWidth={0} name=\"projectVisibilitySetting\"/>\r\n                    }\r\n                >\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PUBLIC}>\r\n                        {`Public (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full pitch will be visible to all Invest West users)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED}\r\n                    >\r\n                        {`Restricted (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this pitch will be visible to all Invest West users. Only members of your group will see the full pitch)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PRIVATE}\r\n                    >\r\n                        {`Private (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Only members of this group will see this pitch)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPitchVisibility);\r\n\r\n","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    Fab,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    Step,\r\n    StepLabel,\r\n    Stepper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Files from \"react-files\";\r\nimport {NavLink, Redirect} from \"react-router-dom\";\r\nimport {Col, Container, Image, Overlay, OverlayTrigger, Popover, ProgressBar, Row, Tooltip} from \"react-bootstrap\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {BeatLoader, HashLoader} from \"react-spinners\";\r\n\r\nimport queryString from \"query-string\";\r\n// React Quill - text editor\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nimport UploadDocuments from \"../../shared-components/upload-documents/DocumentsUpload\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport DocumentsDownload from \"../../shared-components/download-documents/DocumentsDownload\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport \"./CreateProject.scss\";\r\nimport {getGroupRouteTheme, isValidatingGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {isAuthenticating, successfullyAuthenticated} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {isLoadingSystemAttributes} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isIssuer} from \"../../models/user\";\r\nimport {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {isDraftProjectNotSubmitted} from \"../../models/project\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\nconst PITCH_COVER_FILES_CHANGED = 1;\r\nconst PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED = 2;\r\nconst PITCH_PRESENTATION_FILES_CHANGED = 3;\r\n\r\nexport const PITCH_COVER_FILE_TYPE_SELECTED = 1; // users select to upload an image or a video for their pitch cover\r\nexport const PITCH_COVER_VIDEO_URL_TYPE_SELECTED = 2; // users select to upload a video URL for their pitch cover\r\n\r\n// pitch create non-check\r\nexport const PITCH_PUBLISH_CHECK_NONE = 0;\r\n// pitch cannot be created due to missing fields\r\nexport const PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION = 1;\r\n// pitch cannot be created due to 0 or negative value of fund or equity\r\nexport const PITCH_PUBLISH_FALSE_INVALID_DATE = 2;\r\nexport const PITCH_PUBLISH_FALSE_INVALID_FUND = 3;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER = 4;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION = 5;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PITCH_COVER_MODE = 1;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 2;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 3;\r\nexport const UPLOAD_REALTIME_DB = 4;\r\nexport const UPLOAD_DONE_MODE = 5;\r\n\r\nexport const STEP_PITCH_GENERAL_INFORMATION = 0;\r\nexport const STEP_PITCH_COVER = 1;\r\nexport const STEP_PITCH_DECK = 2;\r\nexport const STEP_PITCH_SUPPORTING_DOCUMENTS = 3;\r\nexport const STEP_ACCEPT_TERMS_AND_CONDITIONS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createProject: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        groupIssuerCreateOfferFor: \"undefined\",\r\n\r\n        // pitch sector\r\n        pitchSector: '-',\r\n        // pitch project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiryDate: null,\r\n\r\n        pitchAmountRaisedToDate: '',\r\n        pitchRaiseRequired: '',\r\n        howFundIsBeingRaised: '',\r\n        financialRound: '',\r\n        pitchPostMoneyValuation: '',\r\n        detailsAboutEarlierFundraisingRounds: '',\r\n        pitchInvestorsCommitted: '',\r\n        hasSEIS: '',\r\n        hasEIS: '',\r\n\r\n        hasRaisedMoneyBefore: '',\r\n\r\n        // pitch cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // pitch cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // pitch supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // pitch presentation file (user uploads a file for pitch presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // pitch presentation text (user uses the provided text editor to make pitch presentation)\r\n        pitchPresentationText: {ops: []},\r\n        // plain text obtained from quill editor\r\n        pitchPresentationPlainText: null,\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        // T&Cs and marketing preferences ------------------------------------------------------------------------------\r\n        acceptedTermsAndConditions: false,\r\n        agreedToShareRaisePublicly: false,\r\n        agreedToReceiveLocalInvestmentInfo: false,\r\n        // -------------------------------------------------------------------------------------------------------------\r\n\r\n        projectID: null, // set when project has been successfully published to pass to UploadDialog\r\n\r\n        // customized fields (for specific groups only) ------------------------------------------------------------------\r\n        // this field is only available for QIB\r\n        qibSpecialNews: ''\r\n        // -------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass CreatePitchPageMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n        this.firebaseStorage = firebase.storage();\r\n\r\n        // listen for changes made in save project mode\r\n        this.projectEditedSaveModeRefListener = null;\r\n\r\n        // these variables contain the data that is formatted to be uploaded on Realtime DB\r\n        this.pitchCoverRealtimeDB = [];\r\n        this.pitchSupportingDocumentsRealtimeDB = [];\r\n        this.pitchPresentationDocumentRealtimeDB = [];\r\n\r\n        this.state = {\r\n            ...initState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            requestToLoadData\r\n        } = this.state;\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            recoveredFromPreviousState,\r\n            requestToLoadData,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const previousState = this.props.location.state;\r\n        // when the user clicks Save for the first time\r\n        // or when they click on the Next button in the STEP_PITCH_GENERAL_INFORMATION step\r\n        // the page will reload to take them to the edit page with the project ID.\r\n        // If the user clicks on the Next button in the STEP_PITCH_GENERAL_INFORMATION step, once the page is\r\n        // reloaded, they should be taken to the next step rather than stay in the same step.\r\n        if (previousState !== undefined && previousState !== null) {\r\n            if (!recoveredFromPreviousState) {\r\n                this.setState({\r\n                    recoveredFromPreviousState: true,\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep:\r\n                            previousState.activeStep !== -1\r\n                                ?\r\n                                previousState.activeStep\r\n                                :\r\n                                this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: !previousState.groupIssuerCreateOfferFor\r\n                            ? ManageGroupUrlState.group\r\n                                ? ManageGroupUrlState.group.anid\r\n                                : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                                    ? \"undefined\"\r\n                                    : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid\r\n                            : previousState.groupIssuerCreateOfferFor,\r\n                        requestToLoadData: !previousState.requestToLoadData ? true : previousState.requestToLoadData\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.uploadProject();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.projectEditedSaveModeRefListener) {\r\n            this.projectEditedSaveModeRefListener.off('child_changed');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to the same page with active step saved\r\n     * This will save the activeStep of the page, so when the user refreshes the page,\r\n     * they can still continue with their previous step.\r\n     *\r\n     * @param activeStep\r\n     * @param projectID\r\n     */\r\n    navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = this.state;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState) || isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (AuthenticationState.currentUser && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            requestToLoadData: false\r\n        });\r\n\r\n        // get project id from the URL\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        selectProjectVisibility_setProject(project);\r\n                    }\r\n\r\n                    // project is in draft mode\r\n                    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        if (!this.projectEditedSaveModeRefListener) {\r\n                            this.projectEditedSaveModeRefListener = this.firebaseDB\r\n                                .ref(DB_CONST.PROJECTS_CHILD)\r\n                                .orderByKey()\r\n                                .equalTo(project.id);\r\n\r\n                            this.projectEditedSaveModeRefListener\r\n                                .on('child_changed', snapshot => {\r\n\r\n                                    let project = snapshot.val();\r\n\r\n                                    this.setState({\r\n                                        projectEdited: Object.assign({}, project)\r\n                                    });\r\n                                });\r\n                        }\r\n                    }\r\n\r\n                    this.setState({\r\n                        projectBeforeEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            groupIssuerCreateOfferFor:\r\n                                !isDraftProjectNotSubmitted(project)\r\n                                    ? \"undefined\"\r\n                                    : project.hasOwnProperty('anid')\r\n                                    ? project.anid\r\n                                    : \"undefined\",\r\n                            // pitch sector\r\n                            pitchSector:\r\n                                project.hasOwnProperty('sector')\r\n                                    ?\r\n                                    project.sector\r\n                                    :\r\n                                    '-'\r\n                            ,\r\n                            // pitch project name\r\n                            pitchProjectName:\r\n                                project.hasOwnProperty('projectName')\r\n                                    ?\r\n                                    project.projectName\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchProjectDescription:\r\n                                project.hasOwnProperty('description')\r\n                                    ?\r\n                                    project.description\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchExpiryDate:\r\n                                project.Pitch.hasOwnProperty('expiredDate')\r\n                                    ?\r\n                                    project.Pitch.expiredDate\r\n                                    :\r\n                                    null\r\n                            ,\r\n                            pitchAmountRaisedToDate:\r\n                                project.Pitch.hasOwnProperty('amountRaised')\r\n                                    ?\r\n                                    Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchRaiseRequired:\r\n                                project.Pitch.hasOwnProperty('fundRequired')\r\n                                    ?\r\n                                    Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            howFundIsBeingRaised:\r\n                                project.Pitch.hasOwnProperty('howFundIsBeingRaised')\r\n                                    ?\r\n                                    project.Pitch.howFundIsBeingRaised\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            financialRound:\r\n                                project.Pitch.hasOwnProperty('financialRound')\r\n                                    ?\r\n                                    project.Pitch.financialRound\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            hasSEIS:\r\n                                project.Pitch.hasOwnProperty('hasSEIS')\r\n                                    ?\r\n                                    project.Pitch.hasSEIS\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            hasEIS:\r\n                                project.Pitch.hasOwnProperty('hasEIS')\r\n                                    ?\r\n                                    project.Pitch.hasEIS\r\n                                    :\r\n                                    ''\r\n                            ,  \r\n                            pitchPostMoneyValuation:\r\n                                project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                    ?\r\n                                    Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            detailsAboutEarlierFundraisingRounds:\r\n                                project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                    ?\r\n                                    project.Pitch.detailsAboutEarlierFundraisingRounds\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchInvestorsCommitted:\r\n                                project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                    ?\r\n                                    project.Pitch.investorsCommitted\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            hasRaisedMoneyBefore:\r\n                                project.Pitch.hasOwnProperty('amountRaised')\r\n                                    ?\r\n                                    (\r\n                                        project.Pitch.amountRaised > 0\r\n                                            ?\r\n                                            \"true\"\r\n                                            :\r\n                                            \"false\"\r\n                                    )\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchPresentationText:\r\n                                !project.Pitch.presentationText\r\n                                    ?\r\n                                    {ops: []}\r\n                                    :\r\n                                    project.Pitch.presentationText\r\n                            ,\r\n                            // this field is only available for QIB\r\n                            qibSpecialNews:\r\n                                project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                    ?\r\n                                    project.Pitch.qibSpecialNews\r\n                                    :\r\n                                    ''\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            this.setState({\r\n                projectEditedLoaded: true,\r\n                projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    groupIssuerCreateOfferFor: ManageGroupUrlState.group\r\n                        ? ManageGroupUrlState.group.anid\r\n                        : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                            ? \"undefined\"\r\n                            : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid,\r\n                    pitchExpiryDate:\r\n                        ManageGroupUrlState.group.groupUserName === \"qib\"\r\n                            ?\r\n                            // if the group is QIB,\r\n                            // set the pitch expiry date to the one specified by the QIB' admins\r\n                            // Note: must ensure the defaultPitchExpiryDate field is valid\r\n                            ManageGroupUrlState.group.settings.defaultPitchExpiryDate\r\n                            :\r\n                            this.state.createProject.pitchExpiryDate\r\n                }\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                selectProjectVisibility_setProject(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Next Step button is clicked\r\n     */\r\n    handleNextStepClick = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            hasRaisedMoneyBefore,\r\n\r\n            hasSEIS,\r\n            hasEIS,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiryDate === null\r\n                    || pitchRaiseRequired.trim().length === 0\r\n                    || howFundIsBeingRaised.trim().length === 0\r\n                    || financialRound.trim().length === 0\r\n                    || hasRaisedMoneyBefore.trim().length === 0\r\n                    || hasSEIS.trim().length === 0\r\n                    || hasEIS.trim().length === 0\r\n                    || (hasRaisedMoneyBefore === \"true\" && pitchAmountRaisedToDate.trim().length === 0)\r\n                    || (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n                    || (isIssuer(AuthenticationState.currentUser) && !(params.edit && projectEdited) && groupIssuerCreateOfferFor === \"undefined\")\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiryDate)\r\n                    ||\r\n                    (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                // if the user enters invalid value for the money, warn them\r\n                if ((hasRaisedMoneyBefore === \"true\" && !utils.getNumberFromInputString(pitchAmountRaisedToDate))\r\n                    || !utils.getNumberFromInputString(pitchRaiseRequired)\r\n                    || (pitchPostMoneyValuation.trim().length > 0 && !utils.getNumberFromInputString(pitchPostMoneyValuation))\r\n                ) {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // for QIB, pitch deck is considered as one-pager\r\n                // there will be no presentation text, so don't need to check\r\n                if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                        ) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                    // for other groups, we need to ensure the user is uploading a pitch deck file or filling\r\n                // in the text editor or both\r\n                else {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && pitchPresentationText.ops.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                            && !projectEdited.Pitch.presentationText) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Back button is clicked (got to previous step)\r\n     */\r\n    handleBackClick = () => {\r\n        const projectEdited = this.state.projectEdited;\r\n        const activeStep = this.state.createProject.activeStep;\r\n\r\n        if (activeStep === 0) {\r\n            return;\r\n        }\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                activeStep: activeStep - 1\r\n            }\r\n        });\r\n        this.navigateToTheSamePageWithActiveStepSaved(activeStep - 1, projectEdited.id);\r\n    };\r\n\r\n    /**\r\n     * Handle between selecting to upload an image or a video or adding a video URL for the pitch cover.\r\n     *\r\n     * @param type\r\n     */\r\n    handleSelectPitchCoverTypeClick = type => {\r\n\r\n        const {\r\n            pitchCoverTypeSelected,\r\n            pitchCover,\r\n            pitchCoverVideoURL\r\n        } = this.state.createProject;\r\n\r\n        if (pitchCoverTypeSelected === type) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: null,\r\n                    pitchCover: type === PITCH_COVER_FILE_TYPE_SELECTED ? [] : pitchCover,\r\n                    pitchCoverVideoURL: type === PITCH_COVER_VIDEO_URL_TYPE_SELECTED ? '' : pitchCoverVideoURL\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: type\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded changed.\r\n     */\r\n    handleFilesChanged = (mode, files) => {\r\n\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                // there can only be 1 file uploaded for the pitch cover\r\n                case PITCH_COVER_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchCover: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                // there can be more than 1 pitch supporting files\r\n                case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                    // for QIB, supporting document will be considered as pitch deck\r\n                    // so, the user can only upload one file\r\n                    if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    // for other groups, the user can upload multiple files for supporting documents\r\n                    else {\r\n                        if (projectEdited) {\r\n                            if (!projectEdited.Pitch.supportingDocuments) {\r\n                                if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            } else {\r\n                                if (pitchSupportingDocuments.length >=\r\n                                    DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                setFeedbackSnackbarContent(\r\n                                    'Max file count reached.',\r\n                                    \"error\",\r\n                                    \"bottom\"\r\n                                );\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [...prevState.createProject.pitchSupportingDocuments, fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    break;\r\n                // there can only be 1 file for pitch presentation\r\n                case PITCH_PRESENTATION_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPresentationDocument: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded have error (exceed size, type not matched, etc.).\r\n     */\r\n    handleFileError = (error, file) => {\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        setFeedbackSnackbarContent(\r\n            errorMessage,\r\n            \"error\",\r\n            \"bottom\"\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function gets called when the texts in the Create Pitch Dialog changed.\r\n     */\r\n    handleCreatePitchInputChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        if (name === \"groupIssuerCreateOfferFor\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n\r\n            const {\r\n                AuthenticationState\r\n            } = this.props;\r\n\r\n            const params = queryString.parse(this.props.location.search);\r\n\r\n            let index = AuthenticationState.groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === value);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n\r\n            // edit mode\r\n            if (params.edit) {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    search: `?edit=${params.edit}`,\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n            // create mode\r\n            else {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            // maximum characters for description is 300\r\n            if (name === \"pitchProjectDescription\" && value.trim().length >= 300) {\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle changes when the Quill editor is changed.\r\n     */\r\n    handlePitchEditorChanged = (content, delta, source, editor) => {\r\n\r\n        // check if the editor is empty (or does not have any text)\r\n        // we must ensure that a pitch body contains text\r\n        if (editor.getText().trim().length === 0) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: {ops: []}\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: editor.getContents(),\r\n                    pitchPresentationPlainText: editor.getText()\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called to create a new pitch.\r\n     */\r\n    uploadProject = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n\r\n            projectVisibilitySetting\r\n        } = this.props;\r\n\r\n        const {\r\n            projectBeforeEdited,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n            detailsAboutEarlierFundraisingRounds,\r\n            pitchInvestorsCommitted,\r\n            hasRaisedMoneyBefore,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n            pitchPresentationPlainText,\r\n\r\n            hasSEIS,\r\n            hasEIS,\r\n\r\n            agreedToShareRaisePublicly,\r\n            agreedToReceiveLocalInvestmentInfo,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.setState({\r\n                progressBeingSaved: true\r\n            });\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit && projectEdited) {\r\n            // new cover has been chosen\r\n            if (pitchCover.length > 0 || pitchCoverVideoURL.trim().length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('cover')) {\r\n                    // mark the existing cover with the 'removed' tag\r\n                    projectEdited.Pitch.cover.forEach((coverItem, index) => {\r\n                        coverItem.removed = true;\r\n                        projectEdited.Pitch.cover[index] = coverItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // new pitch presentation document has been chosen\r\n            if (pitchPresentationDocument.length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('presentationDocument')) {\r\n                    // mark the existing presentation document with the 'removed' tag\r\n                    projectEdited.Pitch.presentationDocument.forEach((presentationItem, index) => {\r\n                        presentationItem.removed = true;\r\n                        // noinspection TypeScriptValidateTypes\r\n                        projectEdited.Pitch.presentationDocument[index] = presentationItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // pitch reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n            // pitch storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(projectEdited.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectEdited.id);\r\n\r\n            // upload pitch cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload pitch supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload pitch presentation or pitch deck\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    let updatedProject = {\r\n                                        ...JSON.parse(JSON.stringify(projectEdited)),\r\n                                        issuer: null,\r\n                                        group: null,\r\n                                        anid:\r\n                                            isDraftProjectNotSubmitted(projectEdited)\r\n                                                ? groupIssuerCreateOfferFor !== \"undefined\"\r\n                                                ? groupIssuerCreateOfferFor\r\n                                                : projectEdited.anid\r\n                                                : projectEdited.anid,\r\n                                        projectName:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectName.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectName\r\n                                                :\r\n                                                pitchProjectName\r\n                                        ,\r\n                                        sector:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchSector === \"-\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchSector\r\n                                                :\r\n                                                pitchSector\r\n                                        ,\r\n                                        description:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectDescription.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectDescription\r\n                                                :\r\n                                                pitchProjectDescription\r\n                                        ,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                projectEdited.visibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                // in save progress mode --> set status to DRAFT\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // not in save progress mode --> publish mode\r\n                                                // check if the edited project is a draft one --> if so, change its status to being checked\r\n                                                // otherwise, keep the previous project status\r\n                                                projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                                    :\r\n                                                    projectEdited.status\r\n                                        ,\r\n                                        edited:\r\n                                            saveProgress\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                utils.getCurrentDate()\r\n                                        ,\r\n                                        PrimaryOffer:\r\n                                            projectEdited.PrimaryOffer\r\n                                                ?\r\n                                                projectEdited.PrimaryOffer\r\n                                                :\r\n                                                null\r\n                                        ,\r\n                                        Pitch: {\r\n                                            totalRaise:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                                :\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            amountRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                                :\r\n                                                                0\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                        :\r\n                                                        0\r\n                                            ,\r\n                                            fundRequired:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    pitchRaiseRequired.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            howFundIsBeingRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    howFundIsBeingRaised.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        howFundIsBeingRaised\r\n                                                    :\r\n                                                    howFundIsBeingRaised\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            hasSEIS:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    hasSEIS.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        hasSEIS\r\n                                                    :\r\n                                                    hasSEIS\r\n                                            ,\r\n                                            hasEIS:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    hasEIS.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        hasEIS\r\n                                                    :\r\n                                                    hasEIS\r\n                                            ,\r\n                                            postMoneyValuation:\r\n                                                pitchPostMoneyValuation.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments:\r\n                                                projectEdited.Pitch.supportingDocuments\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.supportingDocuments, ...this.pitchSupportingDocumentsRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchSupportingDocumentsRealtimeDB\r\n                                            ,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument:\r\n                                                this.pitchPresentationDocumentRealtimeDB.length === 0\r\n                                                    ?\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            projectEdited.Pitch.presentationDocument\r\n                                                            :\r\n                                                            null\r\n                                                    )\r\n                                                    :\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            [...projectEdited.Pitch.presentationDocument, ...this.pitchPresentationDocumentRealtimeDB]\r\n                                                            :\r\n                                                            this.pitchPresentationDocumentRealtimeDB\r\n                                                    )\r\n                                            ,\r\n                                            cover:\r\n                                                projectEdited.Pitch.cover\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.cover, ...this.pitchCoverRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchCoverRealtimeDB\r\n                                            ,\r\n                                            postedDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    utils.getCurrentDate()\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        utils.getCurrentDate()\r\n                                                        :\r\n                                                        projectEdited.Pitch.postedDate\r\n                                            ,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        DB_CONST.PITCH_STATUS_ON_GOING\r\n                                                        :\r\n                                                        projectEdited.Pitch.status\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    // set the updated pitch in firebase\r\n                                    projectRef\r\n                                        .child(projectEdited.id)\r\n                                        .update(updatedProject)\r\n                                        .then(() => {\r\n                                            // publish button is clicked\r\n                                            // only check and send notifications if the save progress is not triggered (save progress is only available for saving draft)\r\n                                            if (!saveProgress) {\r\n                                                // if the draft offer is published, don't need to check for sending notifications\r\n                                                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                                                    projectBeforeEdited.issuer = null;\r\n                                                    projectBeforeEdited.group = null;\r\n                                                    // track activity for editing a published project\r\n                                                    realtimeDBUtils\r\n                                                        .trackActivity({\r\n                                                            userID: AuthenticationState.currentUser.id,\r\n                                                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                            interactedObjectID: projectEdited.id,\r\n                                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT.replace(\"%project%\", projectEdited.projectName),\r\n                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id),\r\n                                                            value: {\r\n                                                                before: JSON.parse(JSON.stringify(projectBeforeEdited)),\r\n                                                                after: JSON.parse(JSON.stringify(updatedProject))\r\n                                                            }\r\n                                                        });\r\n\r\n                                                    // Send notifications to investors who voted or pledged\r\n                                                    // load votes\r\n                                                    realtimeDBUtils\r\n                                                        .loadVotes(projectEdited.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                                                        .then(votes => {\r\n\r\n                                                            let listOfInvestorsToBeNotified = [];\r\n                                                            votes.forEach(vote => {\r\n                                                                listOfInvestorsToBeNotified.push(vote.investorID);\r\n                                                            });\r\n\r\n                                                            // load pledges\r\n                                                            realtimeDBUtils\r\n                                                                .loadPledges(projectEdited.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                                .then(pledges => {\r\n                                                                    pledges.forEach(pledge => {\r\n                                                                        if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                                                            listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                                                        }\r\n                                                                    });\r\n\r\n                                                                    let notifications = [];\r\n                                                                    listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                                                        const notification = {\r\n                                                                            title: `${projectEdited.projectName} has been edited`,\r\n                                                                            message: `Please have a look at the changes that have been made in this offer. You may find some more useful information.`,\r\n                                                                            userID: investorID,\r\n                                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id)\r\n                                                                        };\r\n                                                                        notifications.push(notification);\r\n                                                                    });\r\n\r\n                                                                    // push all the notifications to firebase\r\n                                                                    Promise.all(notifications.map(notification => {\r\n                                                                        return new Promise((resolve, reject) => {\r\n                                                                            realtimeDBUtils\r\n                                                                                .sendNotification(notification)\r\n                                                                                .then(() => {\r\n                                                                                    return resolve();\r\n                                                                                })\r\n                                                                                .catch(error => {\r\n                                                                                    return reject(error);\r\n                                                                                });\r\n                                                                        });\r\n                                                                    })).then(() => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100,\r\n                                                                                projectID: projectEdited.id\r\n                                                                            }\r\n                                                                        });\r\n\r\n                                                                    }).catch(error => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100\r\n                                                                            }\r\n                                                                        });\r\n                                                                    });\r\n                                                                });\r\n                                                        });\r\n                                                }\r\n                                                // a draft offer is published\r\n                                                else {\r\n                                                    // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                    const acceptedTCsObj = {\r\n                                                        issuerID: AuthenticationState.currentUser.id,\r\n                                                        projectID: projectEdited.id,\r\n                                                        date: utils.getCurrentDate(),\r\n                                                        agreedToShareRaisePublicly\r\n                                                    };\r\n\r\n                                                    // push to Create Pitch T&Cs\r\n                                                    this.firebaseDB\r\n                                                        .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                        .push(acceptedTCsObj)\r\n                                                        .then(async () => {\r\n                                                            await new Api().request(\r\n                                                                \"post\",\r\n                                                                ApiRoutes.sendEmailRoute,\r\n                                                                {\r\n                                                                    queryParameters: null,\r\n                                                                    requestBody: {\r\n                                                                        emailType: 3,\r\n                                                                        emailInfo: {\r\n                                                                            projectID: projectEdited.id\r\n                                                                        }\r\n                                                                    }\r\n                                                                }\r\n                                                            );\r\n\r\n                                                            // track activity for creating a new project from a draft one\r\n                                                            realtimeDBUtils\r\n                                                                .trackActivity({\r\n                                                                    userID: AuthenticationState.currentUser.id,\r\n                                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                                    interactedObjectID: projectEdited.id,\r\n                                                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", updatedProject.projectName),\r\n                                                                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                                                                    value: updatedProject\r\n                                                                });\r\n\r\n                                                            // if the user is an issuer,\r\n                                                            // update the marketing preferences setting\r\n                                                            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER) {\r\n                                                                realtimeDBUtils\r\n                                                                    .updateMarketingPreferencesSetting({\r\n                                                                        userID: AuthenticationState.currentUser.id,\r\n                                                                        field: \"agreedToReceiveLocalInvestmentInfo\",\r\n                                                                        value: agreedToReceiveLocalInvestmentInfo\r\n                                                                    })\r\n                                                                    .catch(error => {\r\n                                                                        // handle error\r\n                                                                    });\r\n                                                            }\r\n\r\n                                                            this.setState({\r\n                                                                createProject: {\r\n                                                                    ...this.state.createProject,\r\n                                                                    uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                    uploadFileProgress: 100,\r\n                                                                    projectID: projectEdited.id\r\n                                                                }\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                            // save button is clicked\r\n                                            else {\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectEdited.id\r\n                                                );\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n        // in create new mode\r\n        else {\r\n            // calculate posted date (current time)\r\n            const postedDate = utils.getCurrentDate();\r\n\r\n            // pitch reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n            // get pitch's publishing id\r\n            const projectID = projectRef.push().key;\r\n\r\n            // pitch storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(AuthenticationState.currentUser.id)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectID);\r\n\r\n            // upload pitch cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload pitch supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload pitch presentation or pitch deck\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    const projectObj = {\r\n                                        id: projectID,\r\n                                        anid: groupIssuerCreateOfferFor === \"undefined\" ? ManageGroupUrlState.group.anid : groupIssuerCreateOfferFor,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                ManageGroupUrlState.group.settings.projectVisibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        issuerID:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then the issuerID is set to the id of the issuer that the\r\n                                                // group admin is creating an offer for\r\n                                                params.issuer\r\n                                                :\r\n                                                // in this case, it can be the issuer creating their own offer\r\n                                                // or a group admin is doing so for an unknown issuer --> this means\r\n                                                // the group admin clicks on the \"Create new investment opportunity\" in their\r\n                                                // main dashboard.\r\n                                                AuthenticationState.currentUser.id\r\n                                        , // this can the id of the issuer or the group admin\r\n                                        createdByGroupAdmin:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then, set the admin id as a proof of creating\r\n                                                params.admin\r\n                                                :\r\n                                                // the group admin is creating an offer for an unknown issuer\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // then, this field is also set to the group admin id\r\n                                                    AuthenticationState.currentUser.id\r\n                                                    :\r\n                                                    // this case means that the issuer is creating their own offer\r\n                                                    // so this field is set to null\r\n                                                    null\r\n                                        ,\r\n                                        projectName: saveProgress ? (pitchProjectName.trim().length === 0 ? null : pitchProjectName) : pitchProjectName,\r\n                                        sector: saveProgress ? (pitchSector === \"-\" ? null : pitchSector) : pitchSector,\r\n                                        description: saveProgress ? (pitchProjectDescription.trim().length === 0 ? null : pitchProjectDescription) : pitchProjectDescription,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // if a group admin creates the offer\r\n                                                // then let it go live\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                                    :\r\n                                                    // if an issuer creates the offer\r\n                                                    // let the group admin check it first\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                        ,\r\n                                        Pitch: {\r\n                                            totalRaise:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                                :\r\n                                                                (\r\n                                                                    pitchRaiseRequired.trim().length === 0\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                                )\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate) + utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            amountRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    (\r\n                                                        hasRaisedMoneyBefore.trim().length === 0\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            hasRaisedMoneyBefore === \"true\"\r\n                                                                ?\r\n                                                                utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                                :\r\n                                                                0\r\n                                                    )\r\n                                                    :\r\n                                                    hasRaisedMoneyBefore === \"true\"\r\n                                                        ?\r\n                                                        utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                                                        :\r\n                                                        0\r\n                                            ,\r\n                                            fundRequired:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    pitchRaiseRequired.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchRaiseRequired)\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        detailsAboutEarlierFundraisingRounds\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            howFundIsBeingRaised:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    howFundIsBeingRaised.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        howFundIsBeingRaised\r\n                                                    :\r\n                                                    howFundIsBeingRaised\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            hasSEIS:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    hasSEIS.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        hasSEIS\r\n                                                    :\r\n                                                    hasSEIS\r\n                                            ,\r\n                                            hasEIS:\r\n                                            saveProgress\r\n                                                ?\r\n                                                hasEIS.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    hasEIS\r\n                                                :\r\n                                                hasEIS\r\n                                            ,\r\n                                            postMoneyValuation:\r\n                                                pitchPostMoneyValuation.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments: this.pitchSupportingDocumentsRealtimeDB,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument: this.pitchPresentationDocumentRealtimeDB,\r\n                                            cover: this.pitchCoverRealtimeDB,\r\n                                            postedDate: postedDate,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    DB_CONST.PITCH_STATUS_ON_GOING\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    projectRef\r\n                                        .child(projectID)\r\n                                        .set(projectObj)\r\n                                        .then(() => {\r\n                                            // save button is clicked\r\n                                            if (saveProgress) {\r\n                                                // don't need to track activity for draft project\r\n\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    requestToLoadData: true,\r\n                                                    projectIDToBeLoadedAfterSavingFirstTime: projectID,\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    projectEditedLoaded: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectID\r\n                                                );\r\n                                            }\r\n                                            // publish button is clicked\r\n                                            else {\r\n                                                // track activity for creating a new project\r\n                                                realtimeDBUtils\r\n                                                    .trackActivity({\r\n                                                        userID: AuthenticationState.currentUser.id,\r\n                                                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                        interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                        interactedObjectID: projectID,\r\n                                                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", projectObj.projectName),\r\n                                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectObj.id),\r\n                                                        value: projectObj\r\n                                                    });\r\n\r\n                                                const id = this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .push()\r\n                                                    .key;\r\n\r\n                                                // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                const acceptedTCsObj = {\r\n                                                    id,\r\n                                                    issuerID: AuthenticationState.currentUser.id,\r\n                                                    projectID: projectID,\r\n                                                    date: utils.getCurrentDate()\r\n                                                };\r\n\r\n                                                this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .child(id)\r\n                                                    .set(acceptedTCsObj)\r\n                                                    .then(() => {\r\n                                                        this.setState({\r\n                                                            createProject: {\r\n                                                                ...this.state.createProject,\r\n                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                uploadFileProgress: 100,\r\n                                                                projectID: projectID\r\n                                                            }\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Upload multiple files\r\n     */\r\n    uploadMultipleFiles = async (mode, projectStorageRef) => {\r\n\r\n        const {\r\n            saveProgress\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchSupportingDocuments,\r\n            pitchPresentationDocument\r\n        } = this.state.createProject;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                openUploadingProgressDialog: !saveProgress,\r\n                uploadFileMode: mode,\r\n                uploadFileProgress: 0\r\n            }\r\n        });\r\n\r\n        let filesArray = null;\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // no pitch cover selected\r\n                if (!pitchCoverTypeSelected) {\r\n                    return null;\r\n                }\r\n                // pitch cover as a video URL\r\n                if (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED) {\r\n                    const formattedCover = {\r\n                        url: pitchCoverVideoURL,\r\n                        fileType: DB_CONST.FILE_TYPE_VIDEO,\r\n                        fileExtension: \"\",\r\n                        storageID: \"\"\r\n                    };\r\n                    this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                    return;\r\n                }\r\n                filesArray = pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                filesArray = pitchSupportingDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                filesArray = pitchPresentationDocument;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return Promise\r\n            .all(\r\n                filesArray.map(file => this.uploadIndividualFile(mode, projectStorageRef, file))\r\n            )\r\n            .then(() => {\r\n                return true;\r\n            })\r\n            .catch(error => {\r\n                return false;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Upload a single file (document)\r\n     */\r\n    uploadIndividualFile = async (mode, pitchStorageRef, document) => {\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        let docRef = null;\r\n\r\n        const storageID = utils.getCurrentDate();\r\n        const storageFileName = utils.constructStorageFileName(document, storageID);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                    .child(`${storageID}.${document.file.extension}`);\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const uploadTask = docRef.put(document.file);\r\n            uploadTask.on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: progress\r\n                        }\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask.snapshot.ref.getDownloadURL().then(fileDownloadURL => {\r\n\r\n                    let percentDone = 0;\r\n\r\n                    switch (mode) {\r\n                        case UPLOAD_PITCH_COVER_MODE:\r\n                            // capture the downloadable URL of the pitch cover and store in this variable for uploading to Realtime DB\r\n                            const formattedCover = {\r\n                                url: fileDownloadURL,\r\n                                fileType: document.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                fileExtension: document.file.extension,\r\n                                storageID: storageID\r\n                            };\r\n                            this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                            percentDone = 100 / (pitchSupportingDocuments.length);\r\n                            this.setState(prevState => ({\r\n                                createProject: {\r\n                                    ...prevState.createProject,\r\n                                    uploadFileProgress: prevState.createProject.uploadFileProgress + percentDone.toFixed(0)\r\n                                }\r\n                            }));\r\n                            const formattedSupportingDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchSupportingDocumentsRealtimeDB = [...this.pitchSupportingDocumentsRealtimeDB, formattedSupportingDocument];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                            const formattedPresentationDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchPresentationDocumentRealtimeDB = [...this.pitchPresentationDocumentRealtimeDB, formattedPresentationDocument];\r\n                            return resolve();\r\n                        default:\r\n                            return reject(\"Not existing mode\");\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function handles when a document is deleted\r\n     *\r\n     * @param mode\r\n     * @param index\r\n     */\r\n    handleDeleteDocument = (mode, index) => {\r\n\r\n        switch (mode) {\r\n            case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                let supportingDocuments = this.state.createProject.pitchSupportingDocuments;\r\n                supportingDocuments.splice(index, 1);\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchSupportingDocuments: supportingDocuments\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_PRESENTATION_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchPresentationDocument: []\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_COVER_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchCover: []\r\n                    }\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to set the reference of the Publish button so that the error message popover can be displayed properly\r\n     *\r\n     * @param target\r\n     */\r\n    attachNextStepButtonRef = target => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchNextStepButtonTarget: target\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close the popover error message displayed when the user hits the Publish click without filling all the required fields\r\n     */\r\n    handlePopoverErrorMessageClose = () => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishErrorMessageShowed: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is deleted ==> displaying a list of support documents ==> able to delete them\r\n     *\r\n     * @param index\r\n     */\r\n    handleDownloadDocumentDeleteClick = index => {\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let updatedProjectEdited = JSON.parse(JSON.stringify(projectEdited));\r\n        updatedProjectEdited.Pitch.supportingDocuments[index].removed = true;\r\n\r\n        this.setState({\r\n            projectEdited: updatedProjectEdited\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close file upload error snackbar\r\n     */\r\n    handleCloseErrorSnackbar = (event, reason) => {\r\n\r\n        if (reason === 'clickaway') {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    errorSnackbarOpen: false\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                errorSnackbarOpen: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when date changed\r\n     */\r\n    handleDateChanged = date => {\r\n\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchExpiryDate: NaN\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchExpiryDate:\r\n                    !date\r\n                        ?\r\n                        null\r\n                        :\r\n                        date.getTime()\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when accept terms and conditions checkbox changed\r\n     */\r\n    handleCheckboxChanged = event => {\r\n\r\n        const name = event.target.name;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                [name]: event.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the save progress button is clicked\r\n     */\r\n    handleSaveProgressClick = () => {\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            howFundIsBeingRaised,\r\n            financialRound,\r\n            pitchPostMoneyValuation,\r\n            hasRaisedMoneyBefore,\r\n\r\n            hasSEIS,\r\n            hasEIS,\r\n\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        if (activeStep === STEP_PITCH_GENERAL_INFORMATION) {\r\n            // check if at least one field is filled\r\n            if (pitchSector === \"-\"\r\n                && pitchProjectName.trim().length === 0\r\n                && pitchProjectDescription.trim().length === 0\r\n                && pitchExpiryDate === null\r\n                && pitchRaiseRequired.trim().length === 0\r\n                && howFundIsBeingRaised.trim().length === 0\r\n                && financialRound.trim().length === 0\r\n                && pitchPostMoneyValuation.trim().length === 0\r\n                && hasRaisedMoneyBefore.trim().length === 0\r\n                && hasEIS.trim().length === 0\r\n                && hasSEIS.trim().length === 0\r\n                && (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'You have nothing to save.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if the entered date is in a valid format or the entered date is less than the minimum date\r\n            if (isNaN(pitchExpiryDate)\r\n                ||\r\n                (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please enter a valid date.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if amount raised specified if the user chose Yes for prior investment\r\n            if (hasRaisedMoneyBefore.trim().length > 0) {\r\n                if (hasRaisedMoneyBefore === \"true\"\r\n                    && pitchAmountRaisedToDate.trim().length === 0\r\n                ) {\r\n                    setFeedbackSnackbarContent(\r\n                        'Please specify the fund you have raised.',\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // check if entered funds are valid\r\n            if ((hasRaisedMoneyBefore === \"true\"\r\n                    && pitchAmountRaisedToDate.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchAmountRaisedToDate)\r\n                )\r\n                || (pitchRaiseRequired.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchRaiseRequired)\r\n                )\r\n                || (pitchPostMoneyValuation.trim().length > 0\r\n                    && !utils.getNumberFromInputString(pitchPostMoneyValuation)\r\n                )\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please check your entered funds again.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            saveProgress: true,\r\n            progressBeingSaved: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user clicks on the Delete draft button\r\n     */\r\n    handleDeleteDraftClick = () => {\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            draftBeingDeleted: true\r\n        });\r\n\r\n        // delete pitch cover\r\n        this.deleteMultiplesOnStorage(UPLOAD_PITCH_COVER_MODE)\r\n            .then(() => {\r\n                // delete pitch deck\r\n                this.deleteMultiplesOnStorage(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE)\r\n                    .then(() => {\r\n                        // delete pitch supporting documents\r\n                        this.deleteMultiplesOnStorage(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE)\r\n                            .then(() => {\r\n                                this.firebaseDB\r\n                                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                                    .child(projectEdited.id)\r\n                                    .remove()\r\n                                    .then(() => {\r\n                                        // reset all variables and states to refresh the page\r\n                                        this.pitchCoverRealtimeDB = [];\r\n                                        this.pitchPresentationDocumentRealtimeDB = [];\r\n                                        this.pitchSupportingDocumentsRealtimeDB = [];\r\n                                        this.selectedProjectVisibilitySetting = -1;\r\n\r\n                                        this.setState({\r\n                                            ...initState\r\n                                        });\r\n\r\n                                        // remove listener\r\n                                        if (this.projectEditedSaveModeRefListener) {\r\n                                            this.projectEditedSaveModeRefListener.off('child_changed');\r\n                                        }\r\n\r\n                                        this.navigateToTheSamePageWithActiveStepSaved(0, null);\r\n                                        // reload the page\r\n                                        window.location.reload();\r\n                                    });\r\n                            });\r\n                    });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle delete multiple files on firebase storage\r\n     */\r\n    deleteMultiplesOnStorage = async (mode) => {\r\n        const {\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let storageRef = this.firebaseStorage\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(AuthenticationState.currentUser.id)\r\n            .child(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectEdited.id);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                if (!projectEdited.Pitch.cover) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.cover.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                if (!projectEdited.Pitch.presentationDocument) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.presentationDocument.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                if (!projectEdited.Pitch.supportingDocuments) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.supportingDocuments.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle delete a single file on firebase storage\r\n     */\r\n    deleteASingleFileOnStorage = async (mode, storageRef, file) => {\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // a video URL from other servers instead of from Firebase storage\r\n                if (file.storageID === \"\") {\r\n                    return;\r\n                }\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}.${file.fileExtension}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            isMobile\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            projectEditedLoaded,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            draftBeingDeleted\r\n        } = this.state;\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || isAuthenticating(AuthenticationState)\r\n        ) {\r\n            return null;\r\n        }\r\n\r\n        // when creating a new offer,\r\n        // if no user found or found user is an investor or a super admin\r\n        // --> display Page Not Found\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (successfullyAuthenticated(AuthenticationState) && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n            || (!params.edit && AuthenticationState.currentUser && (AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR\r\n                    || (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN && AuthenticationState.currentUser.superAdmin))\r\n            )\r\n        ) {\r\n            return (\r\n                <Redirect to={Routes.error404}/>\r\n            );\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit) {\r\n            // offer not loaded yet\r\n            if (!projectEditedLoaded) {\r\n                return (\r\n                    <FlexView width=\"100%\" hAlignContent=\"center\"  style={{padding: 30}}>\r\n                        <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // no offer found or found offer does not belong to the current issuer/group admin\r\n            if (\r\n                !projectEdited\r\n                // current user is an issuer that does not own the project\r\n                || (projectEdited\r\n                    && AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER\r\n                    && AuthenticationState.currentUser.id !== projectEdited.issuerID\r\n                )\r\n            ) {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n\r\n            // check editable offer\r\n            if (!utils.shouldAProjectBeEdited(AuthenticationState.currentUser, projectEdited)) {\r\n                return (\r\n                    <FlexView marginTop={50} width=\"100%\">\r\n                        <Typography variant=\"h4\" align=\"center\">This offer can't be edited anymore</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // current user is a group admin that does not own the project\r\n            if (projectEdited\r\n                && AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && !AuthenticationState.currentUser.superAdmin\r\n                && AuthenticationState.currentUser.anid !== projectEdited.anid\r\n            ) {\r\n                return <FlexView marginTop={50} hAlignContent=\"center\">\r\n                    <Typography variant=\"h4\" align=\"center\">\r\n                        {`You can only edit offers from ${getHomeGroup(AuthenticationState.groupsOfMembership).group.displayName}.`}\r\n                    </Typography>\r\n                </FlexView>;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <CreateProject\r\n                    clubAttributes={ManageSystemAttributesState.systemAttributes}\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    groupProperties={ManageGroupUrlState.group}\r\n                    params={params}\r\n                    AuthenticationState={AuthenticationState}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    projectEdited={projectEdited}\r\n                    projectEditedLoaded={projectEditedLoaded}\r\n                    saveProgress={saveProgress}\r\n                    progressBeingSaved={progressBeingSaved}\r\n                    draftBeingDeleted={draftBeingDeleted}\r\n                    isMobile={isMobile}\r\n                    createProjectState={this.state.createProject}\r\n                    onSelectPitchCoverTypeClick={this.handleSelectPitchCoverTypeClick}\r\n                    onFilesChanged={this.handleFilesChanged}\r\n                    onFilesError={this.handleFileError}\r\n                    onDeleteDocument={this.handleDeleteDocument}\r\n                    onInputChanged={this.handleCreatePitchInputChanged}\r\n                    onPitchEditorChanged={this.handlePitchEditorChanged}\r\n                    attachNextStepButtonRef={this.attachNextStepButtonRef}\r\n                    onPopoverErrorMessageClose={this.handlePopoverErrorMessageClose}\r\n                    onNextStepClick={this.handleNextStepClick}\r\n                    onBackClick={this.handleBackClick}\r\n                    onDownloadDocumentDeleteClick={this.handleDownloadDocumentDeleteClick}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCheckboxChanged={this.handleCheckboxChanged}\r\n                    onSaveProgressClick={this.handleSaveProgressClick}\r\n                    onDeleteDraftClick={this.handleDeleteDraftClick}\r\n                />\r\n\r\n                <UploadingDialog\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    open={this.state.createProject.openUploadingProgressDialog}\r\n                    uploadFileMode={this.state.createProject.uploadFileMode}\r\n                    uploadFileProgress={this.state.createProject.uploadFileProgress}\r\n                    params={params}\r\n                    projectEdited={projectEdited}\r\n                    projectID={this.state.createProject.projectID}\r\n                />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * This component contains the main UI elements for the whole page\r\n */\r\nclass CreateProject extends Component {\r\n\r\n    onNextStepClick = () => {\r\n        this.props.onNextStepClick();\r\n    };\r\n\r\n    onBackClick = () => {\r\n        this.props.onBackClick();\r\n    };\r\n\r\n    onSelectPitchCoverTypeClick = type => {\r\n        this.props.onSelectPitchCoverTypeClick(type);\r\n    };\r\n\r\n    onFilesChanged = mode => files => {\r\n        this.props.onFilesChanged(mode, files);\r\n    };\r\n\r\n    onFilesError = (error, files) => {\r\n        this.props.onFilesError(error, files);\r\n    };\r\n\r\n    onInputChanged = event => {\r\n        this.props.onInputChanged(event);\r\n    };\r\n\r\n    onPitchEditorChanged = (content, delta, source, editor) => {\r\n        this.props.onPitchEditorChanged(content, delta, source, editor);\r\n    };\r\n\r\n    onDeleteDocument = mode => index => {\r\n        this.props.onDeleteDocument(mode, index);\r\n    };\r\n\r\n    attachNextStepButtonRef = (target) => {\r\n        this.props.attachNextStepButtonRef(target);\r\n    };\r\n\r\n    onPopoverErrorMessageClose = () => {\r\n        this.props.onPopoverErrorMessageClose();\r\n    };\r\n\r\n    onDownloadDocumentDeleteClick = index => {\r\n        this.props.onDownloadDocumentDeleteClick(index);\r\n    };\r\n\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    };\r\n\r\n    onCheckboxChanged = event => {\r\n        this.props.onCheckboxChanged(event);\r\n    };\r\n\r\n    onSaveProgressClick = () => {\r\n        this.props.onSaveProgressClick();\r\n    };\r\n\r\n    onDeleteDraftClick = () => {\r\n        this.props.onDeleteDraftClick();\r\n    };\r\n\r\n    /**\r\n     * Render pop-over error message (if any) when the user clicks to move to the next step\r\n     */\r\n    renderPitchPublishErrorMessage = () => {\r\n\r\n        const {\r\n            groupUserName\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (this.props.createProjectState.pitchPublishCheck) {\r\n            case PITCH_PUBLISH_CHECK_NONE:\r\n                return null;\r\n            case PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION:\r\n                msg = \"Please fill in all the General information.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_FUND:\r\n                msg = \"Please check your entered funds again.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER:\r\n                msg = \"Please upload an image or a video for your pitch cover.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION:\r\n                // for QIB, pitch deck is a one-pager\r\n                if (groupUserName === \"qib\") {\r\n                    msg = \"Please upload your one-pager.\";\r\n                }\r\n                // for other groups, pitch deck is still pitch deck\r\n                else {\r\n                    msg = \"Please upload a file or use our provided text editor to make your pitch presentation.\";\r\n                }\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"error\">{msg}</Typography>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            clubAttributes,\r\n            groupUserName,\r\n            groupProperties,\r\n            currentUser,\r\n            params,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n            draftBeingDeleted,\r\n\r\n            isMobile,\r\n\r\n            createProjectState\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Stepper */}\r\n                <Row noGutters style={{ marginTop: 40, padding: 20}}>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            <Stepper activeStep={createProjectState.activeStep} alternativeLabel style={{ width: isMobile ? \"auto\" : \"100%\", padding: 0}}>\r\n                                <Step key={0}>\r\n                                    <StepLabel>General information</StepLabel>\r\n                                </Step>\r\n                                <Step key={1}>\r\n                                    <StepLabel>Pitch cover</StepLabel>\r\n                                </Step>\r\n                                <Step key={2}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>One-pager</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Pitch deck</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                <Step key={3}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>Pitch deck</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Supporting documents</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                {\r\n                                    params.edit && projectEdited\r\n                                        ?\r\n                                        (\r\n                                            projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Step key={4}>\r\n                                                    <StepLabel>Terms and conditions</StepLabel>\r\n                                                </Step>\r\n                                        )\r\n                                        :\r\n                                        <Step key={4}>\r\n                                            <StepLabel>Terms and conditions</StepLabel>\r\n                                        </Step>\r\n                                }\r\n                            </Stepper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main content (changed based on activeStep) */}\r\n                <Row noGutters style={{padding: 18}}>\r\n                    {\r\n                        createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION\r\n                            ?\r\n                            /**\r\n                             * General information column\r\n                             */\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                {\r\n                                    /**\r\n                                     * Step 1: General information\r\n                                     */\r\n                                }\r\n                                <FlexView column>\r\n                                    <FlexView>\r\n                                        <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 1: General information</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <SelectPitchVisibility/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {/** Let the issuer select the group they want to create an offer for */}\r\n                                    {\r\n                                        createProjectState.groupIssuerCreateOfferFor === \"undefined\"\r\n                                            ? null\r\n                                            : params.edit && projectEdited && !isDraftProjectNotSubmitted(projectEdited)\r\n                                            ? null\r\n                                            : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : AuthenticationState.groupsOfMembership === null || AuthenticationState.groupsOfMembership.length === 0\r\n                                                    ? null\r\n                                                    : <FlexView marginTop={30}>\r\n                                                        <FormControl fullWidth required>\r\n                                                            <FormLabel>Select group</FormLabel>\r\n                                                            <Select name=\"groupIssuerCreateOfferFor\" value={createProjectState.groupIssuerCreateOfferFor} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                                {\r\n                                                                    AuthenticationState.groupsOfMembership.map(\r\n                                                                        groupOfMembership =>\r\n                                                                            <MenuItem key={groupOfMembership.group.anid} value={groupOfMembership.group.anid}>{groupOfMembership.group.displayName}</MenuItem>\r\n                                                                    )\r\n                                                                }\r\n                                                            </Select>\r\n                                                        </FormControl>\r\n                                                    </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Choosing sector\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={30}>\r\n                                        <FormControl\r\n                                            fullWidth\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchSector === \"-\"\r\n                                            }\r\n                                        >\r\n                                            <FormLabel>Choose sector</FormLabel>\r\n                                            <Select name=\"pitchSector\" value={createProjectState.pitchSector} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                <MenuItem key={-1} value=\"-\">\r\n                                                    -\r\n                                                </MenuItem>\r\n                                                {\r\n                                                    !clubAttributes\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Select expiry date\r\n                                         *\r\n                                         * For QIB: Hide this section as the group admins will set\r\n                                         * the default expiry date for all the projects.\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                            Pitch expiry\r\n                                                            date: {utils.dateInReadableFormat(groupProperties.settings.defaultPitchExpiryDate)} (set\r\n                                                            by QIB admins)\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={8} lg={6}>\r\n                                                        {\r\n                                                            !params.edit || !projectEdited\r\n                                                                ?\r\n                                                                <KeyboardDatePicker\r\n                                                                    autoOk\r\n                                                                    fullWidth\r\n                                                                    variant=\"dialog\"\r\n                                                                    inputVariant=\"outlined\"\r\n                                                                    label=\"Choose expiry date for this pitch\"\r\n                                                                    format=\"dd/MM/yyyy\"\r\n                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                    value={createProjectState.pitchExpiryDate}\r\n                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                    error={\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                            && createProjectState.pitchExpiryDate === null)\r\n                                                                        ||\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                            && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                        )\r\n                                                                    }\r\n                                                                    onChange={date => this.onDateChanged(date)}\r\n                                                                />\r\n                                                                :\r\n                                                                (\r\n                                                                    utils.isDraftProject(projectEdited)\r\n                                                                        ?\r\n                                                                        <KeyboardDatePicker\r\n                                                                            autoOk\r\n                                                                            fullWidth\r\n                                                                            variant=\"dialog\"\r\n                                                                            inputVariant=\"outlined\"\r\n                                                                            label=\"Choose expiry date for this pitch\"\r\n                                                                            format=\"dd/MM/yyyy\"\r\n                                                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                            value={createProjectState.pitchExpiryDate}\r\n                                                                            InputAdornmentProps={{position: \"start\"}}\r\n                                                                            error={\r\n                                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                    && createProjectState.pitchExpiryDate === null)\r\n                                                                                || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                    && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                        || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                )\r\n                                                                            }\r\n                                                                            onChange={date => this.onDateChanged(date)}\r\n                                                                        />\r\n                                                                        :\r\n                                                                        <FlexView column>\r\n                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                {\r\n                                                                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                                                        ?\r\n                                                                                        null\r\n                                                                                        :\r\n                                                                                        projectEdited.PrimaryOffer\r\n                                                                                            ?\r\n                                                                                            `Pledge phase will be active in ${utils.dateDiff(projectEdited.PrimaryOffer.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                            :\r\n                                                                                            projectEdited.Pitch\r\n                                                                                                ?\r\n                                                                                                `Pitch phase will be active in ${utils.dateDiff(projectEdited.Pitch.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                }\r\n                                                                            </Typography>\r\n                                                                            {\r\n                                                                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                                                    ?\r\n                                                                                    null\r\n                                                                                    :\r\n                                                                                    (\r\n                                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                                                                            ?\r\n                                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                                Pitch phase has ended.\r\n                                                                                                Waiting\r\n                                                                                                for the issuer to create\r\n                                                                                                pledge.\r\n                                                                                            </Typography>\r\n                                                                                            :\r\n                                                                                            <KeyboardDatePicker\r\n                                                                                                autoOk\r\n                                                                                                fullWidth\r\n                                                                                                variant=\"dialog\"\r\n                                                                                                inputVariant=\"outlined\"\r\n                                                                                                label={\r\n                                                                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                                                                                        ?\r\n                                                                                                        \"Choose expiry date for pledge phase\"\r\n                                                                                                        :\r\n                                                                                                        \"Choose expiry date for pitch phase\"\r\n                                                                                                }\r\n                                                                                                format=\"dd/MM/yyyy\"\r\n                                                                                                minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                                value={createProjectState.pitchExpiryDate}\r\n                                                                                                InputAdornmentProps={{position: \"start\"}}\r\n                                                                                                error={\r\n                                                                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                                        && createProjectState.pitchExpiryDate === null)\r\n                                                                                                    || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                                        && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                                            || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                                    )\r\n                                                                                                }\r\n                                                                                                onChange={date => this.onDateChanged(date)}\r\n                                                                                            />\r\n                                                                                    )\r\n                                                                            }\r\n                                                                        </FlexView>\r\n                                                                )\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company name (or project name)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={20}>\r\n                                        <TextField\r\n                                            label=\"Company name\"\r\n                                            name=\"pitchProjectName\"\r\n                                            value={createProjectState.pitchProjectName}\r\n                                            fullWidth\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchProjectName.trim().length === 0\r\n                                            }\r\n                                            onChange={this.onInputChanged}\r\n                                        />\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company description (or project description)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={10}>\r\n                                        <FormControl required fullWidth>\r\n                                            <TextField\r\n                                                label=\"Please provide a brief summary of what you do (max 300 characters)\"\r\n                                                name=\"pitchProjectDescription\"\r\n                                                value={createProjectState.pitchProjectDescription}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.pitchProjectDescription.trim().length === 0\r\n                                                }\r\n                                                multiline\r\n                                                rowsMax={5}\r\n                                                rows={5}\r\n                                                onChange={this.onInputChanged}\r\n                                            />\r\n                                            <FormHelperText>\r\n                                                This will be circulated to investors in and outside region.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Amount of money that needs raising\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={50}>\r\n                                        <FormControl required fullWidth>\r\n                                            <FormLabel>How much do you want to raise?</FormLabel>\r\n                                            <TextField\r\n                                                name=\"pitchRaiseRequired\"\r\n                                                value={createProjectState.pitchRaiseRequired}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                onChange={this.onInputChanged}\r\n                                                error={\r\n                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                        && createProjectState.pitchRaiseRequired.trim().length === 0)\r\n                                                    ||\r\n                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                        && !utils.getNumberFromInputString(createProjectState.pitchRaiseRequired)\r\n                                                    )\r\n                                                }\r\n                                                InputProps={{\r\n                                                    startAdornment:\r\n                                                        <InputAdornment position=\"start\">£</InputAdornment>\r\n                                                }}\r\n                                            />\r\n                                            <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.</FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Raised money before?\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={60}>\r\n                                        <FormControl component=\"fieldset\" required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.hasRaisedMoneyBefore.trim().length === 0\r\n                                            }>\r\n                                            <FormLabel> Have you already raised money?\r\n                                            </FormLabel>\r\n                                            <RadioGroup row name=\"hasRaisedMoneyBefore\" value={createProjectState.hasRaisedMoneyBefore} onChange={this.onInputChanged}>\r\n                                                <FormControlLabel value={true.toString()} control={<Radio color=\"primary\"/>} label=\"Yes\" labelPlacement=\"start\"/>\r\n                                                <FormControlLabel value={false.toString()} control={<Radio color=\"secondary\"/>} label=\"No\" labelPlacement=\"start\"/>\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * If raised money before, ask how much has been raised?\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        createProjectState.hasRaisedMoneyBefore !== \"true\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <FlexView>\r\n                                                    <FormControl fullWidth required>\r\n                                                        <FormLabel>How much have you already raised?</FormLabel>\r\n                                                        <TextField\r\n                                                            name=\"pitchAmountRaisedToDate\"\r\n                                                            value={createProjectState.pitchAmountRaisedToDate}\r\n                                                            fullWidth\r\n                                                            variant=\"outlined\"\r\n                                                            required\r\n                                                            onChange={this.onInputChanged}\r\n                                                            error={\r\n                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                    && createProjectState.hasRaisedMoneyBefore === \"true\"\r\n                                                                    && createProjectState.pitchAmountRaisedToDate.trim().length === 0)\r\n                                                                ||\r\n                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                                    && !utils.getNumberFromInputString(createProjectState.pitchAmountRaisedToDate)\r\n                                                                )\r\n                                                            }\r\n                                                            InputProps={{\r\n                                                                startAdornment: <InputAdornment\r\n                                                                    position=\"start\">£</InputAdornment>\r\n                                                            }}\r\n                                                        />\r\n                                                        <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.</FormHelperText>\r\n                                                    </FormControl>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView marginTop={30}>\r\n                                                    <FormControl fullWidth>\r\n                                                        <FormLabel>Earlier fundraising rounds details</FormLabel>\r\n                                                        <TextField multiline name=\"detailsAboutEarlierFundraisingRounds\" value={createProjectState.detailsAboutEarlierFundraisingRounds} fullWidth variant=\"outlined\" onChange={this.onInputChanged}/>\r\n                                                        <FormHelperText>Please provide any further details on your earlier fundraising rounds</FormHelperText>\r\n                                                    </FormControl>\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * How fund is being raised?\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth>\r\n                                            <FormLabel>How are you raising? e.g. Do you have a crowdfunding page (please add a link)?</FormLabel>\r\n                                            <TextField name=\"howFundIsBeingRaised\" value={createProjectState.howFundIsBeingRaised} fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.howFundIsBeingRaised.trim().length === 0\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Financial round\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.financialRound.trim().length === 0\r\n                                            }\r\n                                        >\r\n                                            <FormLabel style={{marginBottom: 16}}>What financial round are you looking for?</FormLabel>\r\n                                            <RadioGroup name=\"financialRound\" value={createProjectState.financialRound} onChange={this.onInputChanged}>\r\n                                                {\r\n                                                    DB_CONST.FINANCIAL_ROUNDS.map(round =>\r\n                                                        <FormControlLabel key={round} value={round} control={<Radio/>} label={round}/>\r\n                                                    )\r\n                                                }\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Special news - QIB only\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                        || (\r\n                                            !groupUserName\r\n                                            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            && currentUser.superAdmin\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={45}>\r\n                                                <FormControl required fullWidth>\r\n                                                    <FormLabel>What special news should Briony talk about when she mentions your investment raise at the QIB?</FormLabel>\r\n                                                    <TextField name=\"qibSpecialNews\" value={createProjectState.qibSpecialNews} placeholder=\"This would be a good place to mention if you have already made progress in your funding round.\" fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                        error={\r\n                                                            groupUserName === \"qib\"\r\n                                                            && createProjectState.qibSpecialNews === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                            && createProjectState.qibSpecialNews.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                    <FormHelperText>QIB won't be able to mention everyone. So, you can make it REALLY exciting.</FormHelperText>\r\n                                                </FormControl>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Post money valuation\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl fullWidth>\r\n                                            <FormLabel>Enter post money valuation</FormLabel>\r\n                                            <TextField name=\"pitchPostMoneyValuation\" value={createProjectState.pitchPostMoneyValuation} fullWidth variant=\"outlined\" onChange={this.onInputChanged}\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                    && createProjectState.pitchPostMoneyValuation.trim().length > 0\r\n                                                    && !utils.getNumberFromInputString(createProjectState.pitchPostMoneyValuation)\r\n                                                }\r\n                                                InputProps={{\r\n                                                    startAdornment:\r\n                                                        <InputAdornment position=\"start\">£</InputAdornment>\r\n                                                }}/>\r\n                                            <FormHelperText>Please use commas as thousands-separators and do not use decimal numbers.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView marginTop={60}>\r\n                                        <FormControl component=\"fieldset\" required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.hasSEIS.trim().length === 0\r\n                                            }>\r\n                                            <FormLabel> Have you received SEIS advanced assurance from HMRC?\r\n                                            </FormLabel>\r\n                                            <RadioGroup name=\"hasSEIS\" value={createProjectState.hasSEIS} onChange={this.onInputChanged}>\r\n                                                {\r\n                                                    DB_CONST.SEIS_BADGE.map(round =>\r\n                                                        <FormControlLabel key={round} value={round} control={<Radio/>} label={round}/>\r\n                                                    )\r\n                                                }\r\n                                            </RadioGroup>\r\n\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView marginTop={60}>\r\n                                        <FormControl component=\"fieldset\" required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.hasEIS.trim().length === 0\r\n                                            }>\r\n                                            <FormLabel> Have you received EIS advanced assurance from HMRC?\r\n                                            </FormLabel>\r\n                                            <RadioGroup name=\"hasEIS\" value={createProjectState.hasEIS} onChange={this.onInputChanged}>\r\n                                                {\r\n                                                    DB_CONST.EIS_BADGE.map(round =>\r\n                                                        <FormControlLabel key={round} value={round} control={<Radio/>} label={round}/>\r\n                                                    )\r\n                                                }\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n\r\n                                \r\n\r\n                                <Divider style={{marginTop: 60}}/>\r\n                            </Col>\r\n                            :\r\n                            (\r\n                                createProjectState.activeStep === STEP_PITCH_COVER\r\n                                    ?\r\n                                    // Pitch cover\r\n                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <Typography color=\"primary\" variant=\"h6\" align=\"left\" style={{marginRight: 15}}>Step 2: Upload pitch cover</Typography>\r\n                                                <InfoOverlay message=\"Pitch cover is an image or video that will appear on your pitch summary tile.\" placement=\"right\"/>\r\n                                            </FlexView>\r\n\r\n                                            {\r\n                                                !params.edit || !projectEdited\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView column width=\"100%\" marginTop={25} marginBottom={25}>\r\n                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginBottom: 20}}>Your current pitch cover</Typography>\r\n\r\n                                                            {\r\n                                                                projectEdited.Pitch.cover.map((coverItem, index) => (\r\n                                                                    coverItem.hasOwnProperty('removed')\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                                            ?\r\n                                                                            <ReactPlayer key={index} playsInline url={coverItem.url} width=\"100%\" height={coverItem.storageID === \"\" ? 280 : \"auto\"} playing={false} controls={true}/>\r\n                                                                            :\r\n                                                                            <Image key={index} fluid src={coverItem.url}/>\r\n                                                                ))\r\n                                                            }\r\n\r\n                                                            <Divider style={{marginTop: 45}}/></FlexView>\r\n                                            }\r\n\r\n                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 18}}>\r\n                                                {\r\n                                                    !params.edit || !projectEdited\r\n                                                        ?\r\n                                                        \"You need to upload an image or a video for the cover of your pitch.\"\r\n                                                        :\r\n                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                            ?\r\n                                                            \"You need to upload an image or a video for the cover of your pitch.\"\r\n                                                            :\r\n                                                            \"Upload an image or a video to change your pitch cover. We will use the new cover for your pitch instead of the old one.\"\r\n                                                }\r\n                                            </Typography>\r\n\r\n                                            {\r\n                                                groupUserName !== \"qib\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>Please upload your company logo here.</Typography>\r\n                                            }\r\n\r\n                                            <FlexView column marginTop={32}>\r\n                                                <FlexView>\r\n                                                    <Button\r\n                                                        variant={\r\n                                                            createProjectState.pitchCoverTypeSelected\r\n                                                            && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                \"contained\"\r\n                                                                :\r\n                                                                \"outlined\"\r\n                                                        }\r\n                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                        color=\"primary\"\r\n                                                        onClick={() => this.onSelectPitchCoverTypeClick(PITCH_COVER_FILE_TYPE_SELECTED)}\r\n                                                    >\r\n                                                        {\r\n                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                ?\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image or a video\"\r\n                                                                    :\r\n                                                                    \"Upload an image or a video\"\r\n                                                                :\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image\"\r\n                                                                    :\r\n                                                                    \"Upload an image\"\r\n                                                        }\r\n                                                    </Button>\r\n\r\n                                                    <FlexView marginLeft={20} vAlignContent=\"center\">\r\n                                                        <Button\r\n                                                            variant={\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"contained\"\r\n                                                                    :\r\n                                                                    \"outlined\"\r\n                                                            }\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                            color=\"primary\"\r\n                                                            onClick={\r\n                                                                () => this.onSelectPitchCoverTypeClick(PITCH_COVER_VIDEO_URL_TYPE_SELECTED)\r\n                                                            }\r\n                                                            style={{marginRight: 15}}>\r\n                                                            {\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload a video URL\"\r\n                                                                    :\r\n                                                                    \"Upload a video URL\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <InfoOverlay message=\"If your company has a short explainer or introductory video, we suggest you embed it here.\" placement=\"right\"/>\r\n                                                    </FlexView>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView column marginTop={20}>\r\n                                                    {\r\n                                                        !createProjectState.pitchCoverTypeSelected\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                <FlexView column marginTop={10}>\r\n                                                                    <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_COVER_FILES_CHANGED)} onError={this.onFilesError}\r\n                                                                        accepts={\r\n                                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                ?\r\n                                                                                ['video/mp4', 'image/*']\r\n                                                                                :\r\n                                                                                ['image/*']\r\n                                                                        }\r\n                                                                        multiple\r\n                                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                        minFileSize={0}\r\n                                                                        clickable>\r\n                                                                        <Typography variant=\"body2\" align=\"left\">\r\n                                                                            {\r\n                                                                                clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                    ?\r\n                                                                                    \"Drop an image or a video here or click to upload\"\r\n                                                                                    :\r\n                                                                                    \"Drop an image here or click to upload\"\r\n                                                                            }\r\n                                                                        </Typography>\r\n                                                                    </Files>\r\n                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}><u>Note:</u> Pitch cover must not exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column>\r\n                                                                    <TextField name=\"pitchCoverVideoURL\" value={createProjectState.pitchCoverVideoURL} placeholder=\"Enter your video URL here\" variant=\"outlined\" margin=\"dense\" onChange={this.onInputChanged}/>\r\n                                                                </FlexView>\r\n                                                    }\r\n\r\n                                                    {/** Pitch cover file type preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCover.length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35}>\r\n                                                                {\r\n                                                                    createProjectState.pitchCover[0].file.type !== \"video/mp4\"\r\n                                                                        ?\r\n                                                                        <Image fluid src={createProjectState.pitchCover[0].preview}/>\r\n                                                                        :\r\n                                                                        <ReactPlayer url={createProjectState.pitchCover[0].preview} playsInline width=\"100%\" height=\"auto\" playing={false} controls={true}/>\r\n                                                                }\r\n                                                                <FlexView marginTop={10} hAlignContent=\"center\">\r\n                                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                                        overlay={\r\n                                                                            <Tooltip id={`tooltip-bottom`}>Delete this cover</Tooltip>\r\n                                                                        }>\r\n                                                                        <IconButton onClick={this.onDeleteDocument(PITCH_COVER_FILES_CHANGED)}>\r\n                                                                            <DeleteIcon fontSize=\"default\" color=\"error\"/>\r\n                                                                        </IconButton>\r\n                                                                    </OverlayTrigger>\r\n                                                                </FlexView>\r\n\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n\r\n                                                    {/** Pitch cover video URL preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCoverVideoURL.trim().length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35} height={280}>\r\n                                                                <ReactPlayer url={createProjectState.pitchCoverVideoURL} playsInline width=\"100%\" height=\"100%\" playing={false} controls={true}/>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    :\r\n                                    (\r\n                                        createProjectState.activeStep === STEP_PITCH_DECK\r\n                                            ?\r\n                                            // Pitch deck (other groups)\r\n                                            // One-pager (for QIB only)\r\n                                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                {\r\n                                                    groupUserName === \"qib\"\r\n                                                        ?\r\n                                                        // QIB pitch deck which is also known as one-pager\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Submit your one-pager</Typography>\r\n\r\n                                                            {/** Display the current one-pager if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current one-pager\"\r\n                                                                                            :\r\n                                                                                            \"You haven't submitted your one-pager.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={30}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload your one-pager</Typography>\r\n                                                                <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)} onError={this.onFilesError} accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']} multiple maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES} minFileSize={0} clickable>\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> The one-pager must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments documents={createProjectState.pitchPresentationDocument} onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}/>\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <FlexView column marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\r\n                                                                    We recommend the following headings for your\r\n                                                                    one-page, one-sided summary:\r\n                                                                    <ul>\r\n                                                                        <li>Problem</li>\r\n                                                                        <li>Solution</li>\r\n                                                                        <li>Business model</li>\r\n                                                                        <li>Market opportunity</li>\r\n                                                                        <li>Team</li>\r\n                                                                        <li>Journey so far/timeline</li>\r\n                                                                        <li>Ask/Investment proposition</li>\r\n                                                                    </ul>\r\n                                                                </Typography>\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                        :\r\n                                                        // other groups pitch deck\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Upload pitch deck</Typography>\r\n\r\n                                                            {/** Display the current pitch deck if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current pitch deck\"\r\n                                                                                            :\r\n                                                                                            \"You have no pitch deck.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                {\r\n                                                                    !params.edit || !projectEdited\r\n                                                                        ?\r\n                                                                        \"You need to either upload your pitch deck (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                        :\r\n                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                                        &&\r\n                                                                        (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            \"You need to either upload your pitch deck (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                            :\r\n                                                                            \"Upload a PDF, Word, or Power Point file to change your pitch deck. We will use the new document for your pitch deck instead of the old one.\"\r\n                                                                }\r\n                                                            </Typography>\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload pitch deck</Typography>\r\n                                                                <Files\r\n                                                                    className={css(styles.file_drop_zone)}\r\n                                                                    onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                    onError={this.onFilesError}\r\n                                                                    accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']}\r\n                                                                    multiple\r\n                                                                    maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                    minFileSize={0}\r\n                                                                    clickable\r\n                                                                >\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> Pitch deck must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments\r\n                                                                    documents={createProjectState.pitchPresentationDocument}\r\n                                                                    onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Rich text editor */}\r\n                                                            <FlexView column marginTop={20}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Write overview</Typography>\r\n                                                                <ReactQuill\r\n                                                                    theme=\"snow\"\r\n                                                                    placeholder={\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            \"Write your pitch presentation here. Add images for visual effects.\"\r\n                                                                            :\r\n                                                                            projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('presentationText')\r\n                                                                                ?\r\n                                                                                \"Write your pitch presentation here. Add images for visual effects.\"\r\n                                                                                :\r\n                                                                                \"You haven't had text presentation\" +\r\n                                                                                \" for this offer.\"\r\n                                                                    }\r\n                                                                    onChange={this.onPitchEditorChanged}\r\n                                                                    modules={modules}\r\n                                                                    value={createProjectState.pitchPresentationText}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                }\r\n                                            </Col>\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                    ?\r\n                                                    // Supporting documents (other groups)\r\n                                                    // Pitch deck (for QIB only)\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        {\r\n                                                            groupUserName === \"qib\"\r\n                                                                ?\r\n                                                                // QIB supporting document which is also known as pitch deck\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload pitch deck (optional)</Typography>\r\n\r\n                                                                    {/** Display current pitch deck if there is */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your current pitch deck</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no pitch deck.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/></FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/></FlexView>\r\n                                                                :\r\n                                                                // Other groups supporting documents\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload supporting documents</Typography>\r\n\r\n                                                                    {/** Display current supporting documents if there are */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your supporting documents</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no supporting documents.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** Explanation text */}\r\n                                                                    <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                        {\r\n                                                                            !params.edit || !projectEdited\r\n                                                                                ?\r\n                                                                                `You can upload supporting documents to help strengthen your pitch. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                :\r\n                                                                                (\r\n                                                                                    !projectEdited.Pitch.supportingDocuments\r\n                                                                                        ?\r\n                                                                                        `You can upload supporting documents to help strengthen your pitch. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                        :\r\n                                                                                        `Upload new supporting documents. \r\n                                                                        You can still upload ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length} \r\n                                                                        more documents.`\r\n                                                                                )\r\n                                                                        }\r\n                                                                    </Typography>\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 5: Accept terms and conditions</Typography>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to share raise publicly\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\" style={{marginTop: 30}}>\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToShareRaisePublicly\" value={createProjectState.agreedToShareRaisePublicly} checked={createProjectState.agreedToShareRaisePublicly} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to share news of your raise publicly e.g. via Twitter, please tick this box.</Typography>\r\n                                                                    }/>\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to receive local investment information\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToReceiveLocalInvestmentInfo\" value={createProjectState.agreedToReceiveLocalInvestmentInfo} checked={createProjectState.agreedToReceiveLocalInvestmentInfo} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to receive information about the local investment ecosystem (max 8 times a year), please tick this box.</Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to T&Cs\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <Typography variant=\"body1\" align=\"left\">Please tick the box below to confirm that you agree\r\n                                                                    to comply with the terms and conditions of creating\r\n                                                                    a pitch in our platform.</Typography>\r\n                                                                <FormControlLabel style={{marginTop: 10}}\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"acceptedTermsAndConditions\" value={createProjectState.acceptedTermsAndConditions} checked={createProjectState.acceptedTermsAndConditions} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">I've read and accept the\r\n                                                                            <b>\r\n                                                                                &nbsp;\r\n                                                                                <NavLink\r\n                                                                                    to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS}\r\n                                                                                    target=\"_blank\"\r\n                                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                                    style={{\r\n                                                                                        color:\r\n                                                                                            !groupProperties\r\n                                                                                                ?\r\n                                                                                                colors.primaryColor\r\n                                                                                                :\r\n                                                                                                groupProperties.settings.primaryColor\r\n                                                                                    }}\r\n                                                                                >\r\n                                                                                    terms and conditions.\r\n                                                                                </NavLink>\r\n                                                                            </b>\r\n                                                                        </Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                        </FlexView>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </Row>\r\n\r\n                {/** Navigation buttons */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 20, marginBottom: 120, padding: 18}}>\r\n\r\n                        {\r\n                            params.edit && projectEdited\r\n                                ?\r\n                                (\r\n                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                            ?\r\n                                            (\r\n                                                !createProjectState.acceptedTermsAndConditions\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before you submit.</Typography>\r\n                                            )\r\n                                            :\r\n                                            null\r\n                                        :\r\n                                        createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                            ?\r\n                                            <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                            :\r\n                                            null\r\n                                )\r\n                                :\r\n                                (\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                        ?\r\n                                        (\r\n                                            !createProjectState.acceptedTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                        )\r\n                                        :\r\n                                        null\r\n                                )\r\n                        }\r\n\r\n                        <FlexView width=\"100%\" hAlignContent=\"right\">\r\n                            <Button variant=\"text\" onClick={this.onBackClick} disabled={createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION} size=\"large\" className={css(sharedStyles.no_text_transform)}>Back</Button>\r\n                            <Button ref={this.attachNextStepButtonRef} variant=\"outlined\" color=\"primary\" onClick={this.onNextStepClick} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                                disabled={\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                    && !createProjectState.acceptedTermsAndConditions\r\n                                }\r\n                                style={{marginLeft: 15}}>\r\n                                {\r\n                                    progressBeingSaved\r\n                                        ?\r\n                                        <BeatLoader size={8}/>\r\n                                        :\r\n                                        params.edit && projectEdited\r\n                                            ?\r\n                                            (\r\n                                                projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                        ?\r\n                                                        \"Update\"\r\n                                                        :\r\n                                                        \"Next\"\r\n                                                    :\r\n                                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                        ?\r\n                                                        \"Submit\"\r\n                                                        :\r\n                                                        \"Save and Next\"\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                    ?\r\n                                                    \"Submit\"\r\n                                                    :\r\n                                                    \"Save and Next\"\r\n                                            )\r\n                                }\r\n                            </Button>\r\n                            <Overlay show={createProjectState.pitchPublishErrorMessageShowed} target={createProjectState.pitchNextStepButtonTarget} placement=\"bottom\">\r\n                                <Popover style={{marginTop: 14}} id=\"publish-popover-bottom\">\r\n                                    <FlexView vAlignContent=\"center\">\r\n                                        {\r\n                                            this.renderPitchPublishErrorMessage()\r\n                                        }\r\n                                        <IconButton\r\n                                            style={{width: 42, height: 42}}  onClick={this.onPopoverErrorMessageClose}>\r\n                                            <CloseIcon fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </Popover>\r\n                            </Overlay>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    (!params.edit || !projectEdited)\r\n                    || (params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT)\r\n                        ?\r\n                        <div\r\n                            style={{position: 'fixed', width: 'auto', height: 'auto', bottom: 0, right: 0, marginRight: isMobile ? 72 : 120, marginBottom: isMobile ? 80 : 100}}>\r\n                            <FlexView column>\r\n                                <div>\r\n                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                        overlay={\r\n                                            <Tooltip id={`tooltip-left`}>Save draft</Tooltip>\r\n                                        }>\r\n                                        <Fab color=\"primary\" size={isMobile ? \"medium\" : \"large\"} onClick={this.onSaveProgressClick} disabled={saveProgress && progressBeingSaved} style={{position: 'absolute',zIndex: 1}}>\r\n                                            <SaveIcon/>\r\n                                        </Fab>\r\n                                    </OverlayTrigger>\r\n                                    {\r\n                                        saveProgress && progressBeingSaved\r\n                                            ?\r\n                                            <CircularProgress thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: -6, left: -6}}/>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </div>\r\n\r\n                                {\r\n                                    params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        <div style={{marginTop: isMobile ? 62 : 72}}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                             overlay={\r\n                                                    <Tooltip id={`tooltip-left`}>Delete this draft</Tooltip>\r\n                                                }>\r\n                                                <Fab size={isMobile ? \"medium\" : \"large\"} onClick={this.onDeleteDraftClick} disabled={draftBeingDeleted} style={{ position: 'absolute', zIndex: 1}}>\r\n                                                    <DeleteIcon color=\"error\"/>\r\n                                                </Fab>\r\n                                            </OverlayTrigger>\r\n                                            {\r\n                                                draftBeingDeleted\r\n                                                    ?\r\n                                                    <CircularProgress color=\"secondary\" thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: isMobile ? 56 : 66, left: -6}}/>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </div>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n                        </div>\r\n                        :\r\n                        null\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\n/**\r\n * This component shows the uploading progress\r\n */\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupUserName,\r\n\r\n            open,\r\n            uploadFileMode,\r\n            uploadFileProgress,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            params,\r\n            projectEdited, // pass in if in edit mode\r\n            projectID,\r\n            currentUser,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog maxWidth=\"sm\" fullWidth open={open} {...other}>\r\n                <DialogTitle disableTypography={true}>\r\n                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">\r\n                        {\r\n                            uploadFileMode === UPLOAD_DONE_MODE\r\n                                ?\r\n                                \"Congratulations!\"\r\n                                :\r\n                                \"You are almost done...\"\r\n                        }\r\n                    </Typography>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <Typography variant=\"body1\" align=\"left\">\r\n                            {\r\n                                uploadFileMode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please stay tuned while we are publishing your pitch\"\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Typography>\r\n                        <FlexView column marginBottom={20}>\r\n                            {\r\n                                this.renderUploadFileMode()\r\n                            }\r\n                            {\r\n                                uploadFileMode === UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <ProgressBar style={{marginTop: 25}} striped variant=\"success\" now={uploadFileProgress} label={`${parseInt(uploadFileProgress)}%`}/>\r\n                            }\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                {\r\n                    uploadFileMode !== UPLOAD_DONE_MODE\r\n                        ?\r\n                        null\r\n                        :\r\n                        <DialogActions>\r\n                            <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20} marginRight={20} marginLeft={20}>\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.PROJECT_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":projectID\", projectID)\r\n                                            :\r\n                                            ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectID)\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{ width: \"100%\", marginRight: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}>\r\n                                        {\r\n                                            params.edit && projectEdited\r\n                                                ?\r\n                                                (\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        \"View submitted offer\"\r\n                                                        :\r\n                                                        \"View updated offer\"\r\n                                                )\r\n                                                :\r\n                                                \"View submitted offer\"\r\n                                        }\r\n                                    </Button>\r\n                                </NavLink>\r\n                                <NavLink\r\n                                    to={\r\n                                        currentUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                :\r\n                                                `${ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                            :\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    `${ROUTES.ADMIN.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                    :\r\n                                                    `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                :\r\n                                                \"\"\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{width: \"100%\", marginLeft: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}> Go back to your dashboard</Button>\r\n                                </NavLink>\r\n                            </FlexView>\r\n                        </DialogActions>\r\n                }\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    renderUploadFileMode = () => {\r\n\r\n        const {\r\n            groupUserName,\r\n            uploadFileMode,\r\n            params,\r\n            projectEdited,\r\n            currentUser\r\n        } = this.props;\r\n\r\n        switch (uploadFileMode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading pitch cover</Typography>\r\n                );\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading pitch supporting documents</Typography>\r\n                );\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\"  align=\"left\"\r\n                    >Uploading pitch presentation document</Typography>\r\n                );\r\n            case UPLOAD_REALTIME_DB:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Finalizing</Typography>\r\n                );\r\n            case UPLOAD_DONE_MODE: {\r\n                if (params.edit && projectEdited) {\r\n                    if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your offer has been successfully updated.</Typography>;\r\n                    } else if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                            {\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and publish it.\"\r\n                            }\r\n                        </Typography>;\r\n                    } else {\r\n                        return <FlexView column>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                {\r\n                                    \"Your offer has been uploaded.\\n\" +\r\n                                    \"It will not be published until the group administrator has approved\" +\r\n                                    \" it.\\n\" +\r\n                                    \"You will be notified once approved.\\n\"\r\n                                }\r\n                            </Typography>\r\n                            <br/>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Invite investors to register and view your pitch with the following link:</Typography>\r\n                            <br/>\r\n                            <Box border={1} bgcolor={colors.gray_100} padding=\"6px\">\r\n                                <CustomLink url={Routes.constructSignUpRoute(groupUserName)} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"a\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">{process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}</Typography>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </FlexView>;\r\n                    }\r\n                } else {\r\n                    return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                        {/** Note: This is unnecessary --> Consider removing it. */}\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and make it go live.\"\r\n                                :\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"It will not be published until the group administrator has approved it.\\n\" +\r\n                                \"You will be notified once approved.\"\r\n                        }\r\n                    </Typography>;\r\n                }\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreatePitchPageMain);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    file_drop_zone: {\r\n        padding: 12,\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Image, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Divider, Paper, Typography} from '@material-ui/core';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport LetterAvatar from '../../shared-components/profile/LetterAvatar';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from '../../redux-store/actions/investorSelfCertificationAgreementsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n        // Investor self-certification agreement (for investors only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement())\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass ProfilePageViewOnly extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            userToBeViewed: null,\r\n            userToBeViewedLoaded: false,\r\n\r\n            userToBeViewedInvited: null,\r\n            userToBeViewedInvitedLoaded: false,\r\n\r\n            loadingUserToBeViewed: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.USER_PROFILE : ROUTES.USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            currentUser,\r\n            currentUserLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded,\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        if (!currentUserLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser) {\r\n            if (!userToBeViewedLoaded && !userToBeViewedInvitedLoaded && !loadingUserToBeViewed) {\r\n                this.setState({\r\n                    userToBeViewedLoaded: true,\r\n                    userToBeViewedInvitedLoaded: true,\r\n                    loadingUserToBeViewed: false\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.loadUserToBeViewedProfile();\r\n\r\n        // if user has been set\r\n        if (userToBeViewed) {\r\n            if (userToBeViewed.type === DB_CONST.TYPE_INVESTOR) {\r\n                investorSelfCertificationAgreement_setUser(userToBeViewed.id);\r\n            }\r\n        }\r\n\r\n        // if user id for reference in self-certification agreement has been set\r\n        if (investorSelfCertificationAgreement_userID) {\r\n            // if self-certification agreement has not been loaded\r\n            if (!investorSelfCertificationAgreementLoaded\r\n                && !investorSelfCertificationAgreementBeingLoaded\r\n                && userToBeViewed.type === DB_CONST.TYPE_INVESTOR\r\n            ) {\r\n                loadInvestorSelfCertificationAgreement();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load profile of the user to be viewed\r\n     */\r\n    loadUserToBeViewedProfile = () => {\r\n\r\n        const {\r\n            userToBeViewed,\r\n            loadingUserToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded\r\n        } = this.state;\r\n\r\n        if (!userToBeViewed && !loadingUserToBeViewed && !userToBeViewedLoaded && !userToBeViewedInvitedLoaded) {\r\n            this.setState({\r\n                loadingUserToBeViewed: true,\r\n                userToBeViewedLoaded: false,\r\n                userToBeViewedInvitedLoaded: false\r\n            });\r\n\r\n            // this id can be wither official user id or invited id (pass invited id if the user has not registered)\r\n            // Note: this id can be official id or invited id\r\n            // if the user has registered, this id is an official id. Otherwise, it is the invited id\r\n            const userToBeViewedID = this.props.match.params.userID;\r\n\r\n            // get profile of the user to be viewed\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeViewedID)\r\n                .then(user => {\r\n                    this.setState({\r\n                        userToBeViewed: user,\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                });\r\n\r\n            // get the invited profile of this user\r\n            // first call --> assume this id is an official id\r\n            realtimeDBUtils\r\n                .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_OFFICIAL_ID)\r\n                .then(invitedUser => {\r\n                    this.setState({\r\n                        userToBeViewedInvited: invitedUser[0],\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedInvitedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // no invited user with the official id found\r\n                    // second call --> this id is an invited id\r\n                    realtimeDBUtils\r\n                        .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_INVITED_ID)\r\n                        .then(invitedUser => {\r\n                            this.setState({\r\n                                userToBeViewedInvited: invitedUser[0],\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            // if this error happens --> this id is non-sense\r\n                            this.setState({\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n\r\n            userToBeViewedInvited,\r\n            userToBeViewedInvitedLoaded,\r\n\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !currentUserLoaded\r\n            || !userToBeViewedLoaded\r\n            || !userToBeViewedInvitedLoaded\r\n            || loadingUserToBeViewed\r\n        ) {\r\n            return (\r\n                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !currentUser) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (!userToBeViewed) {\r\n            // user was invited but not yet registered\r\n            if (userToBeViewedInvited) {\r\n                return (\r\n                    <Container fluid style={{padding: 0}}>\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography align=\"center\" variant=\"h5\" style={{marginTop: 35}}>\r\n                                    {`${userToBeViewedInvited.title} ${userToBeViewedInvited.firstName} ${userToBeViewedInvited.lastName} has been invited by ${userToBeViewedInvited.Invitor.displayName} but not yet registered.`}\r\n                                </Typography>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                );\r\n            } else {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0, backgroundColor: colors.gray_100, height: \"100%\", minHeight: \"100vh\", paddingTop: 50, paddingBottom: 100, paddingLeft: 12, paddingRight: 12}}>\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <Paper elevation={1} style={{padding: 15}}>\r\n                            <Row noGutters>\r\n                                <Col xs={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                        {\r\n                                            !userToBeViewed.profilePicture\r\n                                            || (\r\n                                                userToBeViewed.profilePicture\r\n                                                && userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={userToBeViewed.firstName} lastName={userToBeViewed.lastName} width={150} height={150} textVariant=\"h4\"/>\r\n                                                :\r\n                                                <FlexView width={156} height={156}>\r\n                                                    <Image roundedCircle thumbnail src={ userToBeViewed.profilePicture[userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url} style={{width: \"100%\", maxHeight: 156, objectFit: \"contain\"}}/>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col xs={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                    <FlexView column vAlignContent=\"center\" hAlignContent=\"center\" height=\"100%\" marginTop={10} marginBottom={10}>\r\n                                        <Typography align=\"center\" variant=\"h6\">\r\n                                            {`${userToBeViewed.title} ${userToBeViewed.firstName} ${userToBeViewed.lastName}`}\r\n                                        </Typography>\r\n                                        {\r\n                                            this.renderUserStatus(userToBeViewedInvited)\r\n                                        }\r\n                                        <FlexView column marginTop={18} hAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">{`Email: ${userToBeViewed.email}`}</Typography>\r\n                                            {\r\n                                                userToBeViewed.hasOwnProperty('linkedin') && userToBeViewed.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={userToBeViewed.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64, height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Paper>\r\n\r\n                        <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                            {\r\n                                !userToBeViewed.BusinessProfile\r\n                                    ?\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">Business profile has not been uploaded.</Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    :\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15}>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\"> Company name:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.companyName}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Registration number:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.registrationNo}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Directors:&nbsp;&nbsp;\r\n                                                <ul\r\n                                                    style={{marginTop: 8}}>\r\n                                                    {\r\n                                                        userToBeViewed.BusinessProfile.directors.map((director, index) => (\r\n                                                            <li key={index}>\r\n                                                                {director}\r\n                                                            </li>\r\n                                                        ))\r\n                                                    }\r\n                                                </ul>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Business sector:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.sector}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Registered office:&nbsp;&nbsp;\r\n                                                <br/>\r\n                                                <br/>\r\n                                                {userToBeViewed.BusinessProfile.registeredOffice.address1.toUpperCase()}\r\n                                                <br/>\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.registeredOffice.address2 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.registeredOffice.address2.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.registeredOffice.address3 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.registeredOffice.address3.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {userToBeViewed.BusinessProfile.registeredOffice.townCity.toUpperCase()}, {userToBeViewed.BusinessProfile.registeredOffice.postcode.toUpperCase()}\r\n                                                <br/>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Trading address:&nbsp;&nbsp;\r\n                                                <br/>\r\n                                                <br/>\r\n                                                {userToBeViewed.BusinessProfile.tradingAddress.address1.toUpperCase()}\r\n                                                <br/>\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.tradingAddress.address2 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.tradingAddress.address2.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {\r\n                                                    userToBeViewed.BusinessProfile.tradingAddress.address3 === \"\"\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <div>\r\n                                                            {userToBeViewed.BusinessProfile.tradingAddress.address3.toUpperCase()}\r\n                                                            <br/>\r\n                                                        </div>\r\n                                                }\r\n                                                {userToBeViewed.BusinessProfile.tradingAddress.townCity.toUpperCase()}, {userToBeViewed.BusinessProfile.tradingAddress.postcode.toUpperCase()}\r\n                                                <br/>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Company Website:&nbsp;&nbsp;\r\n                                                <a href={userToBeViewed.BusinessProfile.companyWebsite} rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                                    <b>{userToBeViewed.BusinessProfile.companyWebsite}</b>\r\n                                                </a>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <FlexView column>\r\n                                                <Typography variant=\"subtitle1\" align=\"left\">Introduction video\r\n                                                </Typography>\r\n                                                <FlexView marginTop={20} marginBottom={20} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                    {\r\n                                                        !userToBeViewed.BusinessProfile.video\r\n                                                        || (\r\n                                                            userToBeViewed.BusinessProfile.video\r\n                                                            && userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed')) === -1\r\n                                                        )\r\n                                                            ?\r\n                                                            <Typography align=\"center\" variant=\"subtitle1\" color=\"textSecondary\">No introduction video available.</Typography>\r\n                                                            :\r\n                                                            <ReactPlayer\r\n                                                                url={\r\n                                                                    userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].url\r\n                                                                }\r\n                                                                playsinline\r\n                                                                width=\"100%\"\r\n                                                                height={userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].storageID === \"\" ? 360 : \"auto\"}\r\n                                                                playing={false}\r\n                                                                controls={true}/>\r\n                                                    }\r\n                                                </FlexView>\r\n                                                <Divider className={css(styles.divider_style)}/>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                            }\r\n                        </Paper>\r\n\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && userToBeViewed.type === DB_CONST.TYPE_INVESTOR\r\n                                ?\r\n                                <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Self-certification agreement</Typography>\r\n                                        <FlexView column marginTop={25} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            {\r\n                                                !investorSelfCertificationAgreement\r\n                                                    ?\r\n                                                    <Typography align=\"center\" variant=\"body1\">This investor has not completed their self certification.</Typography>\r\n                                                    :\r\n                                                    <Typography align=\"center\" variant=\"body1\"> This investor has agreed to the statement of <b>{investorSelfCertificationAgreement.type === DB_CONST.HIGH_NET_WORTH_INVESTOR_AGREEMENT ? \"High net worth investor \" : \"Self-certified sophisticated investor \"}</b> on {utils.dateInReadableFormat(investorSelfCertificationAgreement.agreedDate)}.</Typography>\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Paper>\r\n                                :\r\n                                null\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the current status of the to-be-viewed user's profile\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderUserStatus = invitedUser => {\r\n        let statusMessage = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        if (invitedUser.status) {\r\n            if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                statusMessage.msg = \"Official Issuer of Invest West\";\r\n                statusMessage.color = \"primary\";\r\n            } else {\r\n                statusMessage.msg = \"Official Investor of Invest West\";\r\n                statusMessage.color = \"primary\";\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color={statusMessage.color}>{statusMessage.msg}</Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageViewOnly);\r\n\r\nconst styles = StyleSheet.create({\r\n    divider_style: {\r\n        marginTop: 12,\r\n        marginBottom: 12\r\n    }\r\n});","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from '@material-ui/core';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPledgeVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl fullWidth >\r\n                <FormHelperText className={css(sharedStyles.black_text)} style={{ marginBottom: 6 }} >\r\n                    Select pledge visibility\r\n                </FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                groupProperties\r\n                                    ?\r\n                                    groupProperties.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput labelWidth={0} name=\"projectVisibilitySetting\" />\r\n                    }\r\n                >\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PUBLIC} >\r\n                        {`Public (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full pledge will be visible to all Invest West users)`}\r\n                    </MenuItem>\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED} >\r\n                        {`Restricted (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this pledge will be visible to all Invest West users. Only members of your group will see the full pledge)`}\r\n                    </MenuItem>\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PRIVATE} >\r\n                        {`Private (\r\n                        ${\r\n                            groupProperties\r\n                                ?\r\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        } \r\n                        Only members of this group will see this pledge)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPledgeVisibility);\r\n\r\n","import {\r\n    CREATE_PLEDGE_STATUS_INVALID_DATE,\r\n    CREATE_PLEDGE_STATUS_INVALID_FUND,\r\n    CREATE_PLEDGE_STATUS_MISSING_FIELDS,\r\n    CREATE_PLEDGE_STATUS_VALID,\r\n} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\n\r\nexport const TOGGLE_CREATE_PLEDGE_DIALOG = 'TOGGLE_CREATE_PLEDGE_DIALOG';\r\nexport const toggleCreatePledgeDialog = () => {\r\n    return {\r\n        type: TOGGLE_CREATE_PLEDGE_DIALOG\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_SET_PROJECT = 'CREATE_PLEDGE_DIALOG_SET_PROJECT';\r\nexport const setProject = (project) => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_SET_PROJECT,\r\n        project: project\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED';\r\nexport const handleInputChanged = (event) => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED,\r\n        event\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED';\r\nexport const handleDateChanged = date => {\r\n    return {\r\n        type: CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED,\r\n        date\r\n    }\r\n};\r\n\r\nexport const CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED = 'CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED';\r\nexport const createPledge = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            project,\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes\r\n        } = getState().manageCreatePledgeDialog;\r\n\r\n        // when a group admin creates a pledge, they will have the option to set the project visibility again\r\n        const projectVisibilitySetting = getState().manageSelectProjectVisibility.projectVisibilitySetting;\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        // check if all the fields in creating primary offer dialog have been filled\r\n        if (expiredDate === null) {\r\n            dispatch({\r\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                status: CREATE_PLEDGE_STATUS_MISSING_FIELDS\r\n            });\r\n        } else {\r\n            if (isNaN(expiredDate)\r\n                ||\r\n                (expiredDate && (expiredDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                dispatch({\r\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                    status: CREATE_PLEDGE_STATUS_INVALID_DATE\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (postMoneyValuation.trim().length > 0\r\n                && !utils.getNumberFromInputString(postMoneyValuation)\r\n            ) {\r\n                dispatch({\r\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                    status: CREATE_PLEDGE_STATUS_INVALID_FUND\r\n                });\r\n                return;\r\n            }\r\n\r\n            dispatch({\r\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\r\n                status: CREATE_PLEDGE_STATUS_VALID\r\n            });\r\n\r\n            const primaryOfferObj = {\r\n                status: DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING,\r\n                postMoneyValuation:\r\n                    postMoneyValuation.trim().length === 0\r\n                        ?\r\n                        null\r\n                        :\r\n                        utils.getNumberFromInputString(postMoneyValuation)\r\n                ,\r\n                expiredDate: expiredDate,\r\n                extraNotes: extraNotes.trim().length === 0 ? null : extraNotes\r\n            };\r\n\r\n            let shouldSendNotificationToIssuer = false;\r\n            // if the issuerID returns an issuer and the offer was created by a group admin\r\n            // and the group admin is creating a pledge for this offer\r\n            // then we will notify the issuer that their offer has gone to the pledge phase and is ready to\r\n            // receive pledges from investor BECAUSE the pledge will not be double checked, it will go straight to\r\n            // live when created by a group admin.\r\n            if (project.issuer.type === DB_CONST.TYPE_ISSUER\r\n                && project.hasOwnProperty('createdByGroupAdmin')\r\n                && currentUser.type === DB_CONST.TYPE_ADMIN\r\n            ) {\r\n                shouldSendNotificationToIssuer = true;\r\n            }\r\n\r\n            let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n            projectBeforeUpdating.issuer = null;\r\n            projectBeforeUpdating.group = null;\r\n            projectBeforeUpdating.pledges = null;\r\n\r\n            let updatedProject = JSON.parse(JSON.stringify(project));\r\n            updatedProject.issuer = null;\r\n            updatedProject.group = null;\r\n            updatedProject.pledges = null;\r\n\r\n            updatedProject.status =\r\n                // if an admin is creating the pledge,\r\n                // then let it go live directly\r\n                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                    ?\r\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                    :\r\n                    // if an issuer is creating the pledge,\r\n                    // then let the admin check first\r\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n            updatedProject.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED;\r\n            updatedProject.PrimaryOffer = primaryOfferObj;\r\n            // if projectVisibilitySetting = -1, then go with the previous value of visibility\r\n            updatedProject.visibility =\r\n                projectVisibilitySetting === -1 ? projectBeforeUpdating.visibility : projectVisibilitySetting;\r\n\r\n            // create primary offer node in the project\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(updatedProject)\r\n                .then(() => {\r\n                    dispatch({\r\n                        type: TOGGLE_CREATE_PLEDGE_DIALOG\r\n                    });\r\n\r\n                    // track issuer's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: currentUser.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE.replace(\"%project%\", updatedProject.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                            value: {\r\n                                before: projectBeforeUpdating,\r\n                                after: updatedProject\r\n                            }\r\n                        });\r\n\r\n                    if (shouldSendNotificationToIssuer) {\r\n                        realtimeDBUtils\r\n                            .sendNotification({\r\n                                title: project.projectName,\r\n                                message: \"Congratulations! Your investment opportunity has been published. Investors can now pledge.\",\r\n                                userID: project.issuerID,\r\n                                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                            })\r\n                            .catch(error => {\r\n                                // handle error\r\n                            });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    TextField,\r\n    Toolbar,\r\n    Typography,\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {KeyboardDatePicker} from '@material-ui/pickers';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\n\r\nimport SelectPledgeVisibility from '../select-pledge-visibility/SelectPledgeVisibility';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles, {SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as creatPledgeDialogActions from '../../redux-store/actions/createPledgeDialogActions';\r\n\r\nexport const CREATE_PLEDGE_STATUS_NONE = 0;\r\nexport const CREATE_PLEDGE_STATUS_VALID = 1;\r\nexport const CREATE_PLEDGE_STATUS_MISSING_FIELDS = 2;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_FUND = 3;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_DATE = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentUser: state.auth.user,\r\n\r\n        open: state.manageCreatePledgeDialog.open,\r\n        project: state.manageCreatePledgeDialog.project,\r\n        postMoneyValuation: state.manageCreatePledgeDialog.postMoneyValuation,\r\n        expiredDate: state.manageCreatePledgeDialog.expiredDate,\r\n        extraNotes: state.manageCreatePledgeDialog.extraNotes,\r\n        createStatus: state.manageCreatePledgeDialog.createStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreatePledgeDialog: () => dispatch(creatPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        handleInputChanged: (event) => dispatch(creatPledgeDialogActions.handleInputChanged(event)),\r\n        handleDateChanged: (date) => dispatch(creatPledgeDialogActions.handleDateChanged(date)),\r\n        createPledge: () => dispatch(creatPledgeDialogActions.createPledge())\r\n    }\r\n};\r\n\r\nclass CreatePledgeDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            currentUser,\r\n\r\n            project,\r\n\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes,\r\n            createStatus,\r\n\r\n            toggleCreatePledgeDialog,\r\n            handleInputChanged,\r\n            handleDateChanged,\r\n            createPledge,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                fullScreen\r\n                onClose={toggleCreatePledgeDialog}\r\n                TransitionComponent={\r\n                    SlideTransitionUp\r\n                }\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <AppBar elevation={0} >\r\n                        <Toolbar>\r\n                            <IconButton color=\"inherit\" onClick={toggleCreatePledgeDialog} aria-label=\"Close\" >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                            <FlexView marginLeft={10} >\r\n                                <Typography variant=\"h6\" color=\"inherit\">Create pledge</Typography>\r\n                            </FlexView>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Container fluid style={{ marginTop: 40 }} >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} >\r\n\r\n                                {/** Get the project name from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Project name\"\r\n                                    value={!project ? \"\" : project.projectName}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the Total raise from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Total fund needs raising (£)\"\r\n                                    value={!project ? \"\" : project.Pitch.totalRaise}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raised amount from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund already raised to date (£)\"\r\n                                    value={!project ? \"\" : project.Pitch.amountRaised}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raise required from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund required (£)\"\r\n                                    value={!project ? \"\" : project.Pitch.fundRequired}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the investors committed from the pitch and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Investors committed\"\r\n                                    value={!project ? \"\" : (project.Pitch.investorsCommitted ? project.Pitch.investorsCommitted : \"None\")}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the post money valuation from the pitch and put here */}\r\n                                <TextField\r\n                                    label=\"Post money valuation (£)\"\r\n                                    name=\"postMoneyValuation\"\r\n                                    value={postMoneyValuation}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n\r\n                                <FlexView marginTop={15} width=\"100%\" >\r\n                                    <KeyboardDatePicker\r\n                                        autoOk\r\n                                        variant=\"dialog\"\r\n                                        inputVariant=\"outlined\"\r\n                                        label=\"Choose expired date\"\r\n                                        format=\"dd/MM/yyyy\"\r\n                                        minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                        value={expiredDate}\r\n                                        InputAdornmentProps={{position: \"start\"}}\r\n                                        onChange={handleDateChanged}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Some notes if the Issuer wants to add */}\r\n                                <TextField\r\n                                    label=\"Your extra notes\"\r\n                                    value={extraNotes}\r\n                                    name=\"extraNotes\"\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n                            </Col>\r\n\r\n                            {\r\n                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} style={{ marginTop: 10 }} >\r\n                                        <SelectPledgeVisibility/>\r\n                                    </Col>\r\n                            }\r\n\r\n                            <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} style={{ marginTop: 40, marginBottom: 50 }} >\r\n                                <FlexView hAlignContent=\"center\" marginBottom={30} >\r\n                                    {\r\n                                        this.renderCreatePledgeError()\r\n                                    }\r\n                                </FlexView>\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Button\r\n                                        size=\"large\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={createPledge}\r\n                                    >Create pledge</Button>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render error (if has) when the user clicks on the Create button\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderCreatePledgeError = () => {\r\n        const {\r\n            createStatus\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (createStatus) {\r\n            case CREATE_PLEDGE_STATUS_NONE:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_VALID:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_MISSING_FIELDS:\r\n                msg = \"Please fill in all the fields.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_FUND:\r\n                msg = \"Please enter a valid fund.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color=\"error\">{msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.forwardRef(\r\n    (props, ref) => <CreatePledgeDialog {...props} forwardedRef={ref}/>));","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const MANAGE_PLEDGES_TABLE_SET_PROJECT = 'MANAGE_PLEDGES_TABLE_SET_PROJECT';\r\nexport const setProject = project => {\r\n    return (dispatch, getState) => {\r\n        const prevProject = getState().managePledgesTable.project;\r\n        // if the newly set project is actually the same as the one set before\r\n        // do nothing\r\n        if (prevProject && prevProject.id === project.id) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_SET_PROJECT,\r\n            project\r\n        });\r\n    };\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_LOADING_PLEDGES';\r\nexport const MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES';\r\nexport const loadPledges = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            project\r\n        } = getState().managePledgesTable;\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_LOADING_PLEDGES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n            .then(pledges => {\r\n                Promise.all(pledges.map(pledge => {\r\n                    return new Promise((resolve, reject) => {\r\n                        realtimeDBUtils\r\n                            .loadGroupsUserIsIn(pledge.investorID)\r\n                            .then(groupsInvestorIsIn => {\r\n                                pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n                                return resolve(pledges);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    dispatch({\r\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\r\n                        pledges\r\n                    });\r\n                }).catch(error => {\r\n                    dispatch({\r\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\r\n                        pledges: [],\r\n                        error\r\n                    });\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE';\r\nexport const toggleSearchMode = () => {\r\n    return (dispatch, getState) => {\r\n        const inSearchMode = getState().managePledgesTable.inSearchMode;\r\n        const searchText = getState().managePledgesTable.searchText;\r\n        const pledges = getState().managePledgesTable.pledges;\r\n\r\n        if (inSearchMode) {\r\n            dispatch({\r\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: false,\r\n                matchedPledges: []\r\n            });\r\n        } else {\r\n            let matchedPledges = pledges.filter(\r\n                pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n                    || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n            );\r\n            dispatch({\r\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\r\n                enter: true,\r\n                matchedPledges\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_PAGE_CHANGED';\r\nexport const changePage = (event, newPage) => {\r\n    return {\r\n        type: MANAGE_PLEDGES_TABLE_PAGE_CHANGED,\r\n        newPage\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED';\r\nexport const changeRowsPerPage = event => {\r\n    return {\r\n        type: MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED,\r\n        value: parseInt(event.target.value, 10)\r\n    }\r\n};\r\n\r\nexport const MANAGE_PLEDGES_TABLE_INPUT_CHANGED = 'MANAGE_PLEDGES_TABLE_INPUT_CHANGED';\r\nexport const handlePledgesTableInputChanged = event => {\r\n    return (dispatch, getState) => {\r\n        const pledges = getState().managePledgesTable.pledges;\r\n\r\n        const searchText = event.target.value;\r\n        let matchedPledges = pledges.filter(\r\n            pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n                || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\r\n        );\r\n\r\n        dispatch({\r\n            type: MANAGE_PLEDGES_TABLE_INPUT_CHANGED,\r\n            searchText,\r\n            matchedPledges\r\n        });\r\n    }\r\n};\r\n\r\n//----------------------------------------------------------------------------------------------------------------------\r\nlet pledgesListener = null;\r\n\r\nexport const MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED = 'MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED';\r\nexport const startListeningForPledgesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!pledgesListener) {\r\n            const project = getState().managePledgesTable.project;\r\n\r\n            pledgesListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.PLEDGES_CHILD)\r\n                .orderByChild('projectID')\r\n                .equalTo(project.id);\r\n\r\n            pledgesListener\r\n                .on('child_added', snapshot => {\r\n                    let pledge = snapshot.val();\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                    if (pledgeIndex === -1) {\r\n                        realtimeDBUtils\r\n                            .getUserBasedOnID(pledge.investorID)\r\n                            .then(investor => {\r\n                                pledge.investor = investor;\r\n\r\n                                realtimeDBUtils\r\n                                    .loadGroupsUserIsIn(pledge.investorID)\r\n                                    .then(groupsInvestorIsIn => {\r\n                                        pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n\r\n                                        dispatch({\r\n                                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                                            pledges: [...pledges, pledge]\r\n                                        });\r\n                                    });\r\n                            });\r\n                    }\r\n                });\r\n\r\n            pledgesListener\r\n                .on('child_changed', snapshot => {\r\n                    let pledge = snapshot.val();\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                    // pledge is in the local list\r\n                    if (pledgeIndex !== -1) {\r\n                        let updatedPledges = [...pledges];\r\n\r\n                        if (pledge.amount !== '') {\r\n                            pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                            pledge.groupsInvestorIsIn = updatedPledges[pledgeIndex].groupsInvestorIsIn;\r\n                            updatedPledges[pledgeIndex] = pledge;\r\n                        }\r\n                        else {\r\n                            updatedPledges.splice(pledgeIndex, 1);\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                            pledges: [...updatedPledges]\r\n                        });\r\n                    }\r\n                    // pledge is not in the local list\r\n                    else {\r\n                        if (pledge.amount !== '') {\r\n                            realtimeDBUtils\r\n                                .getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n\r\n                                    realtimeDBUtils\r\n                                        .loadGroupsUserIsIn(pledge.investorID)\r\n                                        .then(groupsInvestorIsIn => {\r\n                                            pledge.groupsInvestorIsIn = groupsInvestorIsIn;\r\n\r\n                                            dispatch({\r\n                                                type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                                                pledges: [...pledges, pledge]\r\n                                            });\r\n                                        });\r\n                                });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            pledgesListener\r\n                .on('child_removed', snapshot => {\r\n                    let pledgeRemovedID = snapshot.key;\r\n\r\n                    const pledges = [...getState().managePledgesTable.pledges];\r\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                    if (pledgeIndex !== -1) {\r\n                        let updatedPledges = pledges;\r\n                        updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                        dispatch({\r\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\r\n                            pledges: updatedPledges\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nexport const stopListeningForPledgesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (pledgesListener) {\r\n            pledgesListener.off('child_added');\r\n            pledgesListener.off('child_changed');\r\n            pledgesListener.off('child_removed');\r\n            pledgesListener = null;\r\n        }\r\n    }\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport EmailRepository, {\r\n    ClientEmailTypes,\r\n    ContactPitchOwnerEmailData\r\n} from \"../../../../api/repositories/EmailRepository\";\r\nimport User from \"../../../../models/user\";\r\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\n\r\nexport enum ContactPitchOwnerDialogEvents {\r\n    ToggleContactDialog = \"ContactPitchOwnerDialogEvents.ToggleContactDialog\",\r\n    SendingContactEmail = \"ContactPitchOwnerDialogEvents.SendingContactEmail\",\r\n    CompleteSendingContactEmail = \"ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\"\r\n}\r\n\r\nexport interface ContactPitchOwnerDialogAction extends Action {\r\n\r\n}\r\n\r\nexport interface ToggleContactDialogAction extends ContactPitchOwnerDialogAction {\r\n    projectName: string | null;\r\n    projectOwnerEmail: string | null;\r\n}\r\n\r\nexport interface CompleteSendingContactEmailAction extends ContactPitchOwnerDialogAction {\r\n    error?: string;\r\n}\r\n\r\nexport const toggleContactPitchOwnerDialog: ActionCreator<any> = (projectName?: string, projectOwnerEmail?: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ToggleContactDialogAction = {\r\n            type: ContactPitchOwnerDialogEvents.ToggleContactDialog,\r\n            projectName: projectName ?? null,\r\n            projectOwnerEmail: projectOwnerEmail ?? null\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const sendContactEmail: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            projectName,\r\n            projectOwnerEmail,\r\n            sendingContactEmail\r\n        } = getState().ContactPitchOwnerDialogLocalState;\r\n\r\n        if (sendingContactEmail) {\r\n            return;\r\n        }\r\n\r\n        if (!projectName || !projectOwnerEmail) {\r\n            return;\r\n        }\r\n\r\n        const {\r\n            currentUser\r\n        } = getState().AuthenticationState;\r\n\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: ContactPitchOwnerDialogEvents.SendingContactEmail\r\n        });\r\n\r\n        const completeAction: CompleteSendingContactEmailAction = {\r\n            type: ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\r\n        };\r\n\r\n        try {\r\n            const emailInfo: ContactPitchOwnerEmailData = {\r\n                receiver: projectOwnerEmail,\r\n                sender: currentUser.email,\r\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\r\n                projectName: projectName\r\n            };\r\n\r\n            await new EmailRepository().sendEmail({\r\n                emailType: ClientEmailTypes.ContactPitchOwner,\r\n                emailInfo: emailInfo\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            dispatch(completeAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {DocumentsDownloadState} from \"./DocumentsDownloadReducer\";\r\nimport {onAcceptRiskWarningClick, onCancelRiskWarningClick, onDocumentClick} from \"./DocumentsDownloadActions\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface DocumentsDownloadProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    documents: PitchDocument[];\r\n    shouldShowRiskWarningOnDownload?: boolean;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => any;\r\n    onAcceptRiskWarningClick: () => any;\r\n    onCancelRiskWarningClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        DocumentsDownloadLocalState: state.DocumentsDownloadLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => dispatch(onDocumentClick(document, shouldShowRiskWarning)),\r\n        onAcceptRiskWarningClick: () => dispatch(onAcceptRiskWarningClick()),\r\n        onCancelRiskWarningClick: () => dispatch(onCancelRiskWarningClick())\r\n    }\r\n}\r\n\r\nclass DocumentsDownload extends Component<DocumentsDownloadProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            documents,\r\n            shouldShowRiskWarningOnDownload,\r\n            DocumentsDownloadLocalState,\r\n            onDocumentClick,\r\n            onAcceptRiskWarningClick,\r\n            onCancelRiskWarningClick\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Invest West\"\r\n            );\r\n\r\n        let riskWarningTextSplits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        return <Box\r\n            marginTop=\"20px\"\r\n        >\r\n            <List>\r\n                {\r\n                    documents.map((document, index) => (\r\n                        document.removed !== undefined && document.removed\r\n                            ? null\r\n                            : <ListItem\r\n                                key={index}\r\n                                button\r\n                                onClick={() => onDocumentClick(document, shouldShowRiskWarningOnDownload ?? false)}\r\n                            >\r\n                                <img\r\n                                    alt=\"Document image\"\r\n                                    src={require(\"../../img/document_icon.png\").default}\r\n                                    width={48}\r\n                                    height={48}\r\n                                />\r\n                                <Box display=\"flex\" flexDirection=\"row\" >\r\n                                    <Typography variant=\"body2\" align=\"left\">{document.fileName}</Typography>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{document.readableSize}</Typography>\r\n                                </Box>\r\n                            </ListItem>\r\n                    ))\r\n                }\r\n            </List>\r\n\r\n            <Dialog\r\n                open={DocumentsDownloadLocalState.openRiskWarningDialog}\r\n                onClose={() => onCancelRiskWarningClick()}\r\n            >\r\n                <DialogTitle>Accept Risk Warning</DialogTitle>\r\n                <DialogContent>\r\n                    <Box marginTop=\"18px\" whiteSpace=\"pre-line\" >\r\n                        <Typography variant=\"body1\" align=\"justify\" >\r\n                            {riskWarningTextSplits[0]}\r\n                            <CustomLink\r\n                                url={Routes.nonGroupRiskWarning}\r\n                                target=\"_blank\"\r\n                                color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                                activeColor=\"none\"\r\n                                activeUnderline={true}\r\n                                component=\"nav-link\"\r\n                                childComponent={\r\n                                    riskWarningTextSplits[1]\r\n                                }\r\n                            />\r\n                            {riskWarningTextSplits[2]}\r\n                        </Typography>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Box display=\"flex\" flexDirection=\"row\" marginRight=\"4px\" marginBottom=\"4px\" >\r\n                        <Button\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onCancelRiskWarningClick()}\r\n                        >Cancel</Button>\r\n                        <Box width=\"14px\" />\r\n                        <Button\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onAcceptRiskWarningClick()}\r\n                        >Accept</Button>\r\n                    </Box>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsDownload);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\r\nimport OfferRepository, {FetchProjectsOrderByOptions} from \"../../api/repositories/OfferRepository\";\r\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\r\n\r\nexport enum GroupDetailsEvents {\r\n    LoadingData = \"GroupDetailsEvents.LoadData\",\r\n    CompleteLoadingData = \"GroupDetailsEvents.CompleteLoadingData\",\r\n    SendingAccessRequest = \"GroupDetailsEvents.SendingAccessRequest\",\r\n    CompleteSendingAccessRequest = \"GroupDetailsEvents.CompleteSendingAccessRequest\",\r\n    RemovingAccessRequest = \"GroupDetailsEvents.RemovingAccessRequest\",\r\n    CompleteRemovingAccessRequest = \"GroupDetailsEvents.CompleteRemovingAccessRequest\"\r\n}\r\n\r\nexport interface GroupDetailsAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteLoadingDataAction extends GroupDetailsAction {\r\n    group?: GroupProperties;\r\n    members?: InvitedUserWithProfile[];\r\n    offers?: ProjectInstance[];\r\n    accessRequestInstances?: AccessRequestInstance[];\r\n    error?: string;\r\n}\r\n\r\nexport interface CompleteSendingAccessRequestAction extends GroupDetailsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport interface CompleteRemovingAccessRequestAction extends GroupDetailsAction {\r\n    error?: string;\r\n    updatedAccessRequestInstances?: AccessRequestInstance[]\r\n}\r\n\r\nexport const loadData: ActionCreator<any> = (groupUserName: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            accessRequestsInstances\r\n        } = getState().GroupDetailsLocalState;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.LoadingData\r\n        });\r\n\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n\r\n        const completeAction: CompleteLoadingDataAction = {\r\n            type: GroupDetailsEvents.CompleteLoadingData\r\n        }\r\n\r\n        if (!currentUser) {\r\n            completeAction.error = \"Unauthenticated user.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (groupUserName === undefined) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const groupResponse = await new GroupRepository().getGroup(groupUserName);\r\n            const group: GroupProperties = groupResponse.data;\r\n\r\n            const membersResponse = await new GroupRepository().fetchGroupMembers(group.anid);\r\n            const members: InvitedUserWithProfile[] = membersResponse.data;\r\n\r\n            const offersResponse = await new OfferRepository().fetchOffers({\r\n                phase: \"all\",\r\n                group: group.anid,\r\n                orderBy: FetchProjectsOrderByOptions.Group\r\n            });\r\n            const offers: ProjectInstance[] = offersResponse.data;\r\n\r\n            const admin: Admin | null = isAdmin(currentUser);\r\n            if (!admin || (admin && !admin.superAdmin)) {\r\n                // user is an issuer, investor, or group admin\r\n                // and access requests have not been fetched\r\n                if (!accessRequestsInstances) {\r\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\r\n                        user: currentUser.id,\r\n                        orderBy: \"user\"\r\n                    });\r\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\r\n                }\r\n            }\r\n\r\n            completeAction.group = group;\r\n            completeAction.members = members;\r\n            completeAction.offers = offers;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const sendAccessRequest: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const group = getState().GroupDetailsLocalState.group;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.SendingAccessRequest\r\n        });\r\n\r\n        const completeAction: CompleteSendingAccessRequestAction = {\r\n            type: GroupDetailsEvents.CompleteSendingAccessRequest\r\n        };\r\n\r\n        if (!group) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, group.anid);\r\n            const accessRequestInstance: AccessRequestInstance = response.data;\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\r\n            if (currentAccessRequestInstances !== undefined) {\r\n                completeAction.updatedAccessRequestInstances = [\r\n                    ...currentAccessRequestInstances,\r\n                    accessRequestInstance\r\n                ];\r\n            } else {\r\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\r\n            }\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeAccessRequest: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const currentUser = getState().AuthenticationState.currentUser;\r\n        if (!currentUser) {\r\n            return;\r\n        }\r\n\r\n        const group = getState().GroupDetailsLocalState.group;\r\n\r\n        dispatch({\r\n            type: GroupDetailsEvents.RemovingAccessRequest\r\n        });\r\n\r\n        const completeAction: CompleteRemovingAccessRequestAction = {\r\n            type: GroupDetailsEvents.CompleteRemovingAccessRequest\r\n        };\r\n\r\n        if (!group) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().GroupDetailsLocalState.accessRequestsInstances;\r\n            if (!currentAccessRequestInstances) {\r\n                return dispatch(completeAction);\r\n            }\r\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\r\n                accessRequestInstance => accessRequestInstance.group.anid === group.anid && accessRequestInstance.user.id === currentUser.id);\r\n            if (accessRequestIndex === -1) {\r\n                return dispatch(completeAction);\r\n            }\r\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\r\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\r\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\r\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\r\n\r\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteSendingContactEmailAction,\r\n    ContactPitchOwnerDialogAction,\r\n    ContactPitchOwnerDialogEvents,\r\n    ToggleContactDialogAction\r\n} from \"./ContactPitchOwnerDialogActions\";\r\nimport Error from \"../../../../models/error\";\r\n\r\nexport interface ContactPitchOwnerDialogState {\r\n    projectName: string | null;\r\n    projectOwnerEmail: string | null;\r\n    contactDialogOpen: boolean;\r\n    sendingContactEmail: boolean;\r\n    errorSendingContactEmail?: Error;\r\n}\r\n\r\nconst initialState: ContactPitchOwnerDialogState = {\r\n    projectName: null,\r\n    projectOwnerEmail: null,\r\n    contactDialogOpen: false,\r\n    sendingContactEmail: false\r\n}\r\n\r\nexport const isSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\r\n    return state.sendingContactEmail;\r\n}\r\n\r\nexport const hasErrorSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\r\n    return !state.sendingContactEmail && state.errorSendingContactEmail !== undefined;\r\n}\r\n\r\nconst contactPitchOwnerDialogReducer = (state = initialState, action: ContactPitchOwnerDialogAction) => {\r\n    switch (action.type) {\r\n        case ContactPitchOwnerDialogEvents.ToggleContactDialog:\r\n            const toggleContactDialogAction: ToggleContactDialogAction = action as ToggleContactDialogAction;\r\n            return {\r\n                ...state,\r\n                contactDialogOpen: !state.contactDialogOpen,\r\n                projectName: toggleContactDialogAction.projectName,\r\n                projectOwnerEmail: toggleContactDialogAction.projectOwnerEmail\r\n            }\r\n        case ContactPitchOwnerDialogEvents.SendingContactEmail:\r\n            return {\r\n                ...state,\r\n                sendingContactEmail: true,\r\n                errorSendingContactEmail: undefined\r\n            }\r\n        case ContactPitchOwnerDialogEvents.CompleteSendingContactEmail:\r\n            const completeSendingContactEmailFunction: CompleteSendingContactEmailAction = action as CompleteSendingContactEmailAction;\r\n            return {\r\n                ...state,\r\n                contactDialogOpen: false,\r\n                sendingContactEmail: false,\r\n                errorSendingContactEmail: completeSendingContactEmailFunction.error !== undefined\r\n                    ? {detail: completeSendingContactEmailFunction.error}\r\n                    : state.errorSendingContactEmail\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default contactPitchOwnerDialogReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\r\nimport {ContactPitchOwnerDialogState, isSendingContactEmail} from \"./ContactPitchOwnerDialogReducer\";\r\nimport {AnyAction} from \"redux\";\r\nimport {sendContactEmail, toggleContactPitchOwnerDialog} from \"./ContactPitchOwnerDialogActions\";\r\n\r\ninterface ContactPitchOwnerDialogProps {\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n    toggleContactDialog: () => any;\r\n    sendContactEmail: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ContactPitchOwnerDialogLocalState: state.ContactPitchOwnerDialogLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        toggleContactDialog: () => dispatch(toggleContactPitchOwnerDialog()),\r\n        sendContactEmail: () => dispatch(sendContactEmail())\r\n    }\r\n}\r\n\r\nclass ContactPitchOwnerDialog extends Component<ContactPitchOwnerDialogProps, any> {\r\n    render() {\r\n        const {\r\n            ContactPitchOwnerDialogLocalState,\r\n            toggleContactDialog,\r\n            sendContactEmail\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            open={ContactPitchOwnerDialogLocalState.contactDialogOpen}\r\n            onClose={() => toggleContactDialog()}\r\n        >\r\n            <DialogContent>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Typography variant=\"body1\" align=\"left\">{`We will let the pitch owner know that you would like to find out more.`}</Typography>\r\n                    <Box height=\"20px\"/>\r\n                    <Typography variant=\"body1\" align=\"left\">{`Are you happy for us to share your email address?`}</Typography>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {\r\n                    isSendingContactEmail(ContactPitchOwnerDialogLocalState)\r\n                        ? null\r\n                        : <Button\r\n                            onClick={() => toggleContactDialog()}\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                        >Cancel</Button>\r\n                }\r\n                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={isSendingContactEmail(ContactPitchOwnerDialogLocalState)} onClick={() => sendContactEmail()}>\r\n                    {\r\n                        isSendingContactEmail(ContactPitchOwnerDialogLocalState)\r\n                            ? `Sending email to ${ContactPitchOwnerDialogLocalState.projectOwnerEmail} ...`\r\n                            : \"Yes\"\r\n                    }\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactPitchOwnerDialog);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle,\r\n    Divider,\r\n    InputBase,\r\n    Paper,\r\n    Step,\r\n    StepButton,\r\n    StepContent,\r\n    StepLabel,\r\n    Stepper,\r\n    Tab,\r\n    Tabs,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PageNotFound from \"../../shared-components/page-not-found/PageNotFound\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport CreatePledgeDialog from \"../../shared-components/create-pledge-dialog/CreatePledgeDialog\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as pledgesTableActions from \"../../redux-store/actions/pledgesTableActions\";\r\nimport * as investorSelfCertificationAgreementsActions\r\n    from \"../../redux-store/actions/investorSelfCertificationAgreementsActions\";\r\nimport * as createPledgeDialogActions from \"../../redux-store/actions/createPledgeDialogActions\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\nimport \"./ProjectDetails.scss\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport {TYPE_INVESTOR} from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectFailed,\r\n    isProjectInLivePitchPhase,\r\n    isProjectInLivePledgePhase,\r\n    isProjectLive,\r\n    isProjectOwner,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectRejectedToGoLive,\r\n    isProjectSuccessful,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingForPledgeToBeChecked,\r\n    isProjectWaitingForPledgeToBeCreated,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport DocumentsDownload from \"../../shared-components/documents-download/DocumentsDownload\";\r\nimport RiskWarning from \"../../shared-components/risk-warning/RiskWarning\";\r\nimport {toggleContactPitchOwnerDialog} from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions\";\r\nimport ContactPitchOwnerDialog from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialog\";\r\nimport FeedbackSnackbarNew from \"../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {hasAuthenticationError, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\n\r\nconst ADMIN_OFFER_STATES_PUBLISH_PITCH = 0;\r\nconst ADMIN_OFFER_STATES_MOVE_TO_PLEDGE = 1;\r\nconst ADMIN_OFFER_STATES_PUBLISH_PLEDGE = 2;\r\n\r\nconst MAIN_BODY_ADMIN_OFFER_STATES = 0;\r\nconst MAIN_BODY_CAMPAIGN = 1;\r\nconst MAIN_BODY_DOCUMENTS = 2;\r\nconst MAIN_BODY_COMMENTS = 3;\r\nconst MAIN_BODY_NOTES = 4;\r\nconst MAIN_BODY_INVESTORS_PLEDGED = 5; // only available for issuer and admin\r\n\r\nconst MAX_COVER_HEIGHT_IN_MOBILE_MODE = 240;\r\nconst MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE = 550;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        userBeingLoaded: state.auth.userBeingLoaded,\r\n        groupsUserIsIn: state.auth.groupsUserIsIn,\r\n\r\n        // Investor self-certification agreement (for investor only) ----------------------------------------------------\r\n        investorSelfCertificationAgreement_userID: state.manageInvestorSelfCertificationAgreement.userID,\r\n        investorSelfCertificationAgreement: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,\r\n        investorSelfCertificationAgreementLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,\r\n        investorSelfCertificationAgreementBeingLoaded: state.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        // Investor self-certification agreement functions --------------------------------------------------------------\r\n        investorSelfCertificationAgreement_setUser: (uid) => dispatch(investorSelfCertificationAgreementsActions.setUser(uid)),\r\n        loadInvestorSelfCertificationAgreement: () => dispatch(investorSelfCertificationAgreementsActions.loadInvestorSelfCertificationAgreement()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        pledgesTable_setProject: (project) => dispatch(pledgesTableActions.setProject(project)),\r\n        pledgesTable_stopListeningForPledgesChanged: () => dispatch(pledgesTableActions.stopListeningForPledgesChanged()),\r\n\r\n        createPledgeDialog_toggleDialog: () => dispatch(createPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        createPledgeDialog_setProject: (project) => dispatch(createPledgeDialogActions.setProject(project)),\r\n\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position)),\r\n\r\n        toggleContactPitchOwnerDialog: (projectName, projectOwnerEmail) => dispatch(toggleContactPitchOwnerDialog(projectName, projectOwnerEmail))\r\n    }\r\n};\r\n\r\nclass ProjectDetailsMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.database = firebase.database();\r\n\r\n        // project changed listener\r\n        this.projectListener = null;\r\n        // comments changed listener\r\n        this.commentsListener = null;\r\n        // comments replies changed listener\r\n        this.commentsRepliesListener = null;\r\n        // pledges changed listener\r\n        this.pledgesListener = null;\r\n        // votes changed listener\r\n        this.votesListener = null;\r\n\r\n        this.state = {\r\n            // variables to check if all the data has been loaded or being loaded\r\n            dataLoaded: false,\r\n            dataBeingLoaded: false,\r\n\r\n            investorPledge: null,\r\n            investorPledgeLoaded: false,\r\n\r\n            mainBody: MAIN_BODY_CAMPAIGN,\r\n            adminOfferStatesActiveStep: ADMIN_OFFER_STATES_PUBLISH_PITCH,\r\n\r\n            comments: [],\r\n            commentsLoaded: false,\r\n\r\n            // states for an investor to post a NEW comment\r\n            commentDialogOpen: false,\r\n            commentText: \"\",\r\n            commentSubmitClick: false,\r\n            // ---------------------------------\r\n\r\n            // existing comment of the current investor\r\n            currentComment: null,\r\n            currentCommentText: \"\",\r\n            // -------------------------------------------\r\n\r\n            // available for the issuer/group admins who own the project only\r\n            // allow the owners to reply to the investor's comments\r\n            replyingToComment: null,\r\n            replyText: \"\",\r\n            replyEdited: null,\r\n            // -------------------------------------------\r\n\r\n            // this state is used to capture the change in date when an admin wants to bring\r\n            // an expired pitch back to live\r\n            changedPitchExpiryDate: null,\r\n\r\n            // when an admin wants to send the pitch back to the issuer with some feedback rather than publish it\r\n            addingRejectFeedback: false,\r\n            rejectFeedback: \"\",\r\n            sendingProjectBack: false,\r\n\r\n            // pitch's details\r\n            projectDetail: {\r\n                // the pitch object\r\n                project: null,\r\n                projectLoaded: false,\r\n\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n\r\n                votes: [],\r\n                votesLoaded: false,\r\n\r\n                // the issuer object (the issuer who made this pitch)\r\n                projectIssuer: null,\r\n                projectIssuerLoaded: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty(\"groupUserName\")\r\n            ?\r\n            match.params.groupUserName\r\n            :\r\n            null\r\n        );\r\n        setExpectedAndCurrentPathsForChecking(\r\n            match.params.hasOwnProperty(\"groupUserName\")\r\n                ?\r\n                ROUTES.PROJECT_DETAILS\r\n                :\r\n                ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER, match.path\r\n        );\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n                if (user) {\r\n                    if (!investorSelfCertificationAgreement_userID && user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        investorSelfCertificationAgreement_setUser(user.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if user id for reference in self-certification agreement has been set\r\n            if (investorSelfCertificationAgreement_userID) {\r\n                // if self-certification agreement has not been loaded\r\n                if (!investorSelfCertificationAgreementLoaded\r\n                    && !investorSelfCertificationAgreementBeingLoaded\r\n                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                ) {\r\n                    loadInvestorSelfCertificationAgreement();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_userID,\r\n            investorSelfCertificationAgreementLoaded,\r\n            investorSelfCertificationAgreementBeingLoaded,\r\n\r\n            investorSelfCertificationAgreement_setUser,\r\n            loadInvestorSelfCertificationAgreement,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n                if (user) {\r\n                    if (!investorSelfCertificationAgreement_userID && user.type === DB_CONST.TYPE_INVESTOR) {\r\n                        investorSelfCertificationAgreement_setUser(user.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // if user id for reference in self-certification agreement has been set\r\n            if (investorSelfCertificationAgreement_userID) {\r\n                // if self-certification agreement has not been loaded\r\n                if (!investorSelfCertificationAgreementLoaded\r\n                    && !investorSelfCertificationAgreementBeingLoaded\r\n                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                ) {\r\n                    loadInvestorSelfCertificationAgreement();\r\n                }\r\n            }\r\n\r\n            // attach project changed listener\r\n            if (projectLoaded && project) {\r\n                this.attachProjectChangedListener();\r\n            }\r\n\r\n            this.loadDataWhenUIElementsChange();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            pledgesTable_stopListeningForPledgesChanged\r\n        } = this.props;\r\n\r\n        // detach pitch changed listener\r\n        this.detachProjectChangedListener();\r\n\r\n        // detach listener for votes\r\n        if (this.votesListener) {\r\n            this.votesListener.off(\"child_added\");\r\n            this.votesListener.off(\"child_changed\");\r\n            this.votesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for pledges\r\n        if (this.pledgesListener) {\r\n            this.pledgesListener.off(\"child_added\");\r\n            this.pledgesListener.off(\"child_changed\");\r\n            this.pledgesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for comments\r\n        if (this.commentsListener) {\r\n            this.commentsListener.off(\"child_added\");\r\n            this.commentsListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for comments replies\r\n        if (this.commentsRepliesListener) {\r\n            this.commentsRepliesListener.off(\"child_added\");\r\n            this.commentsRepliesListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for pledges changed in pledges table\r\n        pledgesTable_stopListeningForPledgesChanged();\r\n    }\r\n\r\n    /**\r\n     * This function is used to load data for the whole page\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            user,\r\n            userLoaded,\r\n\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        if (!userLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!user) {\r\n            if (!dataLoaded) {\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        // data is being loaded\r\n        if (dataBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            dataLoaded: false,\r\n            dataBeingLoaded: true\r\n        });\r\n\r\n        // load the requested project\r\n        const projectID = this.props.match.params.projectID;\r\n        realtimeDBUtils\r\n            .loadAParticularProject(projectID)\r\n            .then(project => {\r\n                // track activity for investors only\r\n                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_VIEW,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS.replace(\"%project%\", project.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                        });\r\n                }\r\n\r\n                // set project for the Select component that is used to choose the project visibility\r\n                selectProjectVisibility_setProject(project);\r\n\r\n                this.setState({\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        project: project,\r\n                        projectLoaded: true\r\n                    },\r\n                    mainBody:\r\n                        user.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            user.anid === project.anid\r\n                                ?\r\n                                MAIN_BODY_ADMIN_OFFER_STATES\r\n                                :\r\n                                MAIN_BODY_CAMPAIGN\r\n                            :\r\n                            MAIN_BODY_CAMPAIGN\r\n                    ,\r\n                    adminOfferStatesActiveStep:\r\n                        project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                            ?\r\n                            ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                            :\r\n                            (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED)\r\n                                ?\r\n                                ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                :\r\n                                (project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE)\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                    :\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                });\r\n\r\n                // load votes\r\n                realtimeDBUtils\r\n                    .loadVotes(project.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        this.setState({\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                votes: votes,\r\n                                votesLoaded: true\r\n                            }\r\n                        });\r\n\r\n                        // load pledges\r\n                        realtimeDBUtils\r\n                            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n\r\n                                // if the current user is an investor, check if they pledged this project\r\n                                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                                    let currentUserPledgeIndex = pledges.findIndex(pledge => pledge.investorID === user.id && pledge.amount !== '');\r\n                                    // this investor has pledges this project before\r\n                                    if (currentUserPledgeIndex !== -1) {\r\n                                        this.setState({\r\n                                            investorPledge: pledges[currentUserPledgeIndex]\r\n                                        });\r\n                                    }\r\n                                }\r\n\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: pledges,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n\r\n                                // load the profile of the Issuer or the Group Admin created this project\r\n                                // this user can be the issuer who created the offer themselves\r\n                                // or the group admin who created this offer on behalf of an unknown issuer\r\n                                // or the issuer who got the group admin create this offer for\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(project.issuerID)\r\n                                    .then(projectIssuer => {\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectIssuer: projectIssuer,\r\n                                                projectIssuerLoaded: true\r\n                                            }\r\n                                        });\r\n                                    })\r\n                                    .catch(error => {\r\n                                        this.setState({\r\n                                            dataLoaded: true,\r\n                                            dataBeingLoaded: false,\r\n                                            investorPledgeLoaded: true,\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectLoaded: true, // project is null\r\n                                                projectIssuerLoaded: true, // project issuer is null\r\n                                                votesLoaded: true,\r\n                                                pledgesLoaded: true\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        projectLoaded: true, // project is null\r\n                                        projectIssuerLoaded: true, // project issuer is null\r\n                                        votesLoaded: true,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            dataLoaded: true,\r\n                            dataBeingLoaded: false,\r\n                            investorPledgeLoaded: true,\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                projectLoaded: true, // project is null\r\n                                projectIssuerLoaded: true, // project issuer is null\r\n                                votesLoaded: true,\r\n                                pledgesLoaded: true\r\n                            }\r\n                        });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // error happens when loading the requested project\r\n                // we'll stop the loading process for all others\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Load data when UI elements change\r\n     */\r\n    loadDataWhenUIElementsChange = () => {\r\n        const {\r\n            user,\r\n\r\n            pledgesTable_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            mainBody,\r\n            commentsLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        // attach votes changed listener\r\n        if (votes && votesLoaded && project && projectLoaded) {\r\n            // votes can only happen if the project is in Pitch phase\r\n            if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                if (!this.votesListener) {\r\n                    this.votesListener = this.database\r\n                        .ref(DB_CONST.VOTES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // vote added\r\n                    this.votesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n                            if (voteIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(vote.investorID)\r\n                                    .then(investor => {\r\n                                        vote.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                votes: [...votes, vote]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // vote changed\r\n                    this.votesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n\r\n                                vote.investor = updatedVotes[voteIndex].investor;\r\n                                updatedVotes[voteIndex] = vote;\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // vote removed\r\n                    this.votesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let voteRemovedID = snapshot.key;\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === voteRemovedID);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n                                updatedVotes.splice(voteIndex, 1);\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // attach pledges changed listener\r\n        if (pledges && pledgesLoaded && projectLoaded && project) {\r\n            // pledges can only happen if the project is in Primary offer phase\r\n            if (project.status !== DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_FAILED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            ) {\r\n                if (!this.pledgesListener) {\r\n                    this.pledgesListener = this.database\r\n                        .ref(DB_CONST.PLEDGES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // new pledge added\r\n                    this.pledgesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                            if (pledgeIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(pledge.investorID)\r\n                                    .then(investor => {\r\n                                        pledge.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                pledges: [...pledges, pledge]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // pledge changed\r\n                    this.pledgesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n\r\n                                pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                                updatedPledges[pledgeIndex] = pledge;\r\n\r\n                                const currentPledge = JSON.parse(JSON.stringify(this.state.investorPledge));\r\n\r\n                                this.setState({\r\n                                    investorPledge:\r\n                                    // current pledge is not null\r\n                                        currentPledge !== null\r\n                                            ?\r\n                                            currentPledge.id === pledge.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                currentPledge\r\n                                            :\r\n                                            // current pledge is null\r\n                                            pledge.investorID === user.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                null\r\n                                    ,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: updatedPledges\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // pledge removed\r\n                    this.pledgesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let pledgeRemovedID = snapshot.key;\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n                                updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                                const currentPledge = this.state.investorPledge;\r\n                                if (!currentPledge && currentPledge.id === pledgeRemovedID) {\r\n                                    this.setState({\r\n                                        investorPledge: null,\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    this.setState({\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Pledges tab\r\n        if (mainBody === MAIN_BODY_INVESTORS_PLEDGED) {\r\n            if (project) {\r\n                pledgesTable_setProject(project);\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Comments tab\r\n        if (mainBody === MAIN_BODY_COMMENTS) {\r\n            // if comments have not been loaded yet\r\n            if (!commentsLoaded) {\r\n                // load comments\r\n                realtimeDBUtils\r\n                    .loadComments(project.id)\r\n                    .then(returnedComments => {\r\n\r\n                        realtimeDBUtils\r\n                            .loadCommentsReplies(returnedComments)\r\n                            .then(commentsWithReplies => {\r\n                                // comments loaded with replies\r\n                                this.setState({\r\n                                    comments: [...commentsWithReplies],\r\n                                    commentsLoaded: true\r\n                                });\r\n\r\n                                // attach comments listener\r\n                                if (!this.commentsListener) {\r\n                                    this.commentsListener = this.database\r\n                                        .ref(DB_CONST.COMMENTS_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    // new comment added\r\n                                    this.commentsListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n                                            comment.replies = [];\r\n\r\n                                            // assign comment to currentComment object if it belongs to the current investor\r\n                                            if (comment.commentedBy === user.id) {\r\n                                                const currentComment = this.state.currenComment;\r\n                                                if (!currentComment) {\r\n                                                    this.setState({\r\n                                                        currentComment: comment,\r\n                                                        currentCommentText: comment.comment\r\n                                                    });\r\n                                                }\r\n                                            }\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex === -1) {\r\n                                                realtimeDBUtils\r\n                                                    .getUserBasedOnID(comment.commentedBy)\r\n                                                    .then(user => {\r\n                                                        comment.author = user;\r\n                                                        this.setState({\r\n                                                            comments: [...comments, comment]\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        });\r\n\r\n                                    // comment changed\r\n                                    this.commentsListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex !== -1) {\r\n                                                let updatedComments = [...comments];\r\n                                                comment.author = updatedComments[commentIndex].author;\r\n                                                comment.replies = updatedComments[commentIndex].replies;\r\n\r\n                                                updatedComments[commentIndex] = comment;\r\n\r\n                                                // NOTE: Must explicitly call state here to avoid null from previous state\r\n                                                const currentComment = this.state.currentComment;\r\n\r\n                                                if (currentComment && currentComment.id === comment.id) {\r\n                                                    this.setState({\r\n                                                        comments: updatedComments,\r\n                                                        currentComment: comment\r\n                                                    });\r\n                                                } else {\r\n                                                    this.setState({\r\n                                                        comments: [...updatedComments]\r\n                                                    });\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n\r\n                                // attach comments replies listener\r\n                                if (!this.commentsRepliesListener) {\r\n                                    this.commentsRepliesListener = this.database\r\n                                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex === -1) {\r\n                                                    if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                                        return;\r\n                                                    }\r\n                                                    realtimeDBUtils\r\n                                                        .getUserBasedOnID(reply.repliedBy)\r\n                                                        .then(user => {\r\n                                                            reply.author = user;\r\n                                                            comment.replies = [...comment.replies, reply];\r\n\r\n                                                            comments[correspondingCommentIndex] = comment;\r\n\r\n                                                            this.setState({\r\n                                                                comments: [...comments]\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                        });\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex !== -1) {\r\n                                                    // reply has been deleted\r\n                                                    if (reply.hasOwnProperty(\"deleted\") && reply.deleted === true) {\r\n                                                        // remove reply from the local replies list\r\n                                                        comment.replies.splice(replyIndex, 1);\r\n\r\n                                                        comments[correspondingCommentIndex] = comment;\r\n\r\n                                                        this.setState({\r\n                                                            comments: [...comments]\r\n                                                        });\r\n                                                    }\r\n                                                    // reply is live\r\n                                                    else {\r\n                                                        realtimeDBUtils\r\n                                                            .getUserBasedOnID(reply.repliedBy)\r\n                                                            .then(user => {\r\n                                                                reply.author = comment.replies[replyIndex].author;\r\n                                                                comment.replies[replyIndex] = reply;\r\n\r\n                                                                comments[correspondingCommentIndex] = comment;\r\n\r\n                                                                this.setState({\r\n                                                                    comments: [...comments]\r\n                                                                });\r\n                                                            });\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    commentsLoaded: true\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            commentsLoaded: true\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Vot for pitch function\r\n     *\r\n     * @param voteVal\r\n     */\r\n    handleVotePitch = voteVal => {\r\n        const {\r\n            groupProperties,\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            project,\r\n            votes\r\n        } = this.state.projectDetail;\r\n\r\n        let currentVoteObj = getInvestorVote(votes, user);\r\n        if (currentVoteObj) {\r\n            currentVoteObj.investor = null;\r\n        }\r\n\r\n        let newVoteObj = {};\r\n\r\n        // investor has already voted before or voted and cancelled\r\n        // when an investor cancelled their vote, the vote value will be ''\r\n        if (currentVoteObj) {\r\n\r\n            newVoteObj = JSON.parse(JSON.stringify(currentVoteObj));\r\n\r\n            // the investor cancelled their vote\r\n            if (newVoteObj.voted === '') {\r\n                newVoteObj.voted = voteVal;\r\n            }\r\n            // the investor now clicks to cancel their vote\r\n            else {\r\n                newVoteObj.voted = ''; // update vote to void\r\n            }\r\n\r\n            // update the existing vote\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(newVoteObj.id)\r\n                .update(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: newVoteObj.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: currentVoteObj,\r\n                                after: newVoteObj\r\n                            }\r\n                        });\r\n                });\r\n        }\r\n        // investor has not voted before\r\n        else {\r\n            const id = this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .push()\r\n                .key;\r\n\r\n            newVoteObj.id = id;\r\n            newVoteObj.anid = groupProperties ? groupProperties.anid : null;\r\n            newVoteObj.investorID = user.id;\r\n            newVoteObj.projectID = project.id;\r\n            newVoteObj.voted = voteVal;\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(id)\r\n                .set(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity for first time voting\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: newVoteObj\r\n                        });\r\n\r\n                    // send a notification to notify the issuer\r\n                    realtimeDBUtils\r\n                        .sendNotification({\r\n                            title: \"Someone liked your pitch\",\r\n                            message: \"Congratulations. A new investor has showed interest in your pitch.\",\r\n                            userID: project.issuerID,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                        })\r\n                        .then(() => {\r\n                            // do something\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener for any changes that happen on this pitch\r\n     * Attach listener for any changes that happen on this pitch\r\n     */\r\n    attachProjectChangedListener = () => {\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (this.projectListener === null) {\r\n            this.projectListener = this.database\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id);\r\n\r\n            this.projectListener\r\n                .on(\"value\", snapshot => {\r\n                    const project = snapshot.val();\r\n                    project.group = this.state.projectDetail.project.group;\r\n                    project.issuer = this.state.projectDetail.project.issuer;\r\n\r\n                    this.setState({\r\n                        projectDetail: {\r\n                            ...this.state.projectDetail,\r\n                            project: project,\r\n                        },\r\n                        adminOfferStatesActiveStep:\r\n                            project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                ?\r\n                                ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                                :\r\n                                project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                    :\r\n                                    project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED\r\n                                    || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                        ?\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                        :\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                    });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Detach changes listener for this pitch\r\n     */\r\n    detachProjectChangedListener = () => {\r\n        if (this.projectListener) {\r\n            this.projectListener.off(\"value\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked (download it)\r\n     *\r\n     * @param downloadURL\r\n     */\r\n    handleDocumentClick = downloadURL => {\r\n        window.open(downloadURL, \"_blank\");\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go live or not\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoToPledgePhaseDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING\r\n            && project.Pitch.status !== DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoToPledgePhaseDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectPledgeGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectPledgeGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the main body tab changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    handleMainBodyTabChanged = (event, value) => {\r\n        this.setState({\r\n            mainBody: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post a comment button clicked (open a dialog for the Investors to write their comment)\r\n     */\r\n    handlePostACommentClick = () => {\r\n        this.setState({\r\n            commentDialogOpen: true\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the comment dialog is closed\r\n     */\r\n    handleCloseCommentDialog = () => {\r\n        this.setState({\r\n            commentDialogOpen: false,\r\n            commentText: '',\r\n            commentSubmitClick: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    handleTextChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    handleDateChanged = date => {\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                changedPitchExpiryDate: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            changedPitchExpiryDate:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle when the Investor clicks to submit their comment\r\n     */\r\n    handleSubmitCommentClick = () => {\r\n        const {\r\n            groupProperties,\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            commentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        this.setState({\r\n            commentSubmitClick: true\r\n        });\r\n\r\n        if (commentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const id = this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const comment = {\r\n            id,\r\n            commenterANID: groupProperties ? groupProperties.anid : null,\r\n            projectID: project.id,\r\n            commentedBy: user.id,\r\n            status: DB_CONST.COMMENT_STATUS_POSTED,\r\n            commentedDate: utils.getCurrentDate(),\r\n            comment: commentText\r\n        };\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(id)\r\n            .set(comment)\r\n            .then(() => {\r\n                // track investor's activity for posting a new comment\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: comment\r\n                    });\r\n\r\n                // send a notification to notify the issuer\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: \"Someone commented on your pitch\",\r\n                        message: \"An investor has commented on your pitch. Go and see what they said.\",\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                    .then(() => {\r\n                        this.handleCloseCommentDialog();\r\n                    })\r\n                    .catch(error => {\r\n                        this.handleCloseCommentDialog();\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment added.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                this.handleCloseCommentDialog();\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not add comment.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) cancels the update for their comment\r\n     */\r\n    handleCancelUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            currentCommentText: !currentComment.comment ? '' : currentComment.comment\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) submits the update for their comment\r\n     */\r\n    handleSubmitUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment,\r\n            currentCommentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (currentCommentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        let newComment = JSON.parse(JSON.stringify(currentComment));\r\n        newComment.status = DB_CONST.COMMENT_STATUS_EDITED;\r\n        newComment.comment = currentCommentText;\r\n        newComment.commentedDate = utils.getCurrentDate();\r\n        newComment.replies = null;\r\n        newComment.author = null;\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(newComment.id)\r\n            .update(newComment)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentComment.commentedBy,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: currentComment.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: {\r\n                            before: JSON.parse(JSON.stringify(currentComment)),\r\n                            after: newComment\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment updated.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle the input area to allow the project's owners to reply to investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    handleToggleReplyToComment = (comment, replyEdited) => {\r\n        this.setState({\r\n            replyingToComment: comment,\r\n            replyText: replyEdited ? replyEdited.text : '',\r\n            replyEdited\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    handleSubmitCommentReply = () => {\r\n        const {\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (!replyEdited) {\r\n            const commentReply = {\r\n                text: replyText,\r\n                repliedDate: utils.getCurrentDate(),\r\n                projectID: project.id,\r\n                commentID: replyingToComment.id,\r\n                repliedBy: user.id,\r\n                status: DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .postCommentReply(commentReply)\r\n                .then(replyID => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                ...commentReply,\r\n                                id: replyID\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply added.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not add reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        } else {\r\n            let replyBeforeUpdating = JSON.parse(JSON.stringify(replyEdited));\r\n            replyBeforeUpdating.author = null\r\n\r\n            let replyAfterUpdating = JSON.parse(JSON.stringify(replyBeforeUpdating));\r\n            replyAfterUpdating.text = replyText;\r\n            replyAfterUpdating.status = DB_CONST.COMMENT_REPLY_STATUS_EDITED;\r\n            replyAfterUpdating.repliedDate = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .updateCommentReply(replyAfterUpdating)\r\n                .then(() => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyAfterUpdating.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: replyBeforeUpdating,\r\n                                after: replyAfterUpdating\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply updated.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not update reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    handleDeleteCommentReply = reply => {\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .deleteCommentReply(reply.id)\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                        interactedObjectID: reply.id,\r\n                        activitySummary: realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT\r\n                            .replace(\"%projectName%\", project.projectName)\r\n                        ,\r\n                        action: ROUTES\r\n                            .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                            .replace(\":projectID\", project.id)\r\n                        ,\r\n                        value: {\r\n                            before: {\r\n                                ...reply,\r\n                                author: null\r\n                            },\r\n                            after: {\r\n                                ...reply,\r\n                                author: null,\r\n                                deleted: true\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Reply deleted.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not delete reply.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Offer states click to change active step\r\n     *\r\n     * @param step\r\n     */\r\n    handleAdminOfferStatesStepClick = step => {\r\n        this.setState({\r\n            adminOfferStatesActiveStep: step\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Bring pitch back to live again\r\n     *\r\n     * @returns {Promise<void>}\r\n     */\r\n    bringPitchBackToLive = async () => {\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            changedPitchExpiryDate\r\n        } = this.state;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await realtimeDBUtils\r\n                .bringPitchBackToLive({\r\n                    project: JSON.parse(JSON.stringify(project)),\r\n                    newPitchExpiryDate: changedPitchExpiryDate\r\n                });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Pitch is now live again.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            // handle error\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't update pitch.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.setState({\r\n            addingRejectFeedback: !this.state.addingRejectFeedback,\r\n            rejectFeedback: \"\"\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = async () => {\r\n        const {\r\n            projectDetail,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (rejectFeedback.trim().length === 0 || sendingProjectBack) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sendingProjectBack: true\r\n        });\r\n\r\n        try {\r\n            // send project back to the issuer\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendProjectBackToIssuerRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        projectID: projectDetail.project.id,\r\n                        feedback: rejectFeedback\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.setState({\r\n                sendingProjectBack: false\r\n            });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Pitch has been sent back.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't send offer back.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            isMobile,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n            groupsUserIsIn,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n\r\n            projectVisibilitySetting,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            commentDialogOpen,\r\n            commentText,\r\n            commentSubmitClick,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || isAuthenticating(AuthenticationState)) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || hasAuthenticationError(AuthenticationState)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <ProjectDetails\r\n                    AuthenticationState={this.props.AuthenticationState}\r\n                    groupUserName={groupUserName}\r\n                    groupProperties={groupProperties}\r\n                    isMobile={isMobile}\r\n                    user={user}\r\n                    userLoaded={userLoaded}\r\n                    groupsUserIsIn={groupsUserIsIn}\r\n                    investorSelfCertificationAgreement={investorSelfCertificationAgreement}\r\n                    mainBody={mainBody}\r\n                    adminOfferStatesActiveStep={adminOfferStatesActiveStep}\r\n                    comments={comments}\r\n                    commentsLoaded={commentsLoaded}\r\n                    currentComment={currentComment}\r\n                    currentCommentText={currentCommentText}\r\n                    replyingToComment={replyingToComment}\r\n                    replyText={replyText}\r\n                    replyEdited={replyEdited}\r\n                    changedPitchExpiryDate={changedPitchExpiryDate}\r\n                    addingRejectFeedback={addingRejectFeedback}\r\n                    rejectFeedback={rejectFeedback}\r\n                    sendingProjectBack={sendingProjectBack}\r\n                    project={project}\r\n                    projectLoaded={projectLoaded}\r\n                    votes={votes}\r\n                    votesLoaded={votesLoaded}\r\n                    pledges={pledges}\r\n                    pledgesLoaded={pledgesLoaded}\r\n                    investorPledge={investorPledge}\r\n                    investorPledgeLoaded={investorPledgeLoaded}\r\n                    projectIssuer={projectIssuer}\r\n                    projectIssuerLoaded={projectIssuerLoaded}\r\n                    projectVisibilitySetting={projectVisibilitySetting}\r\n                    onVote={this.handleVotePitch}\r\n                    onDocumentClick={this.handleDocumentClick}\r\n                    // only available for admins ----------------------------\r\n                    onMakeProjectGoLiveDecision={this.handleMakeProjectGoLiveDecision}\r\n                    onMakeProjectGoToPledgePhaseDecision={this.handleMakeProjectGoToPledgePhaseDecision}\r\n                    onMakeProjectPledgeGoLiveDecision={this.handleMakeProjectPledgeGoLiveDecision}\r\n                    //-------------------------------------------------------\r\n                    onTabChanged={this.handleMainBodyTabChanged}\r\n                    onPostACommentClick={this.handlePostACommentClick}\r\n                    onTextChanged={this.handleTextChanged}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCancelUpdateCurrentComment={this.handleCancelUpdateCurrentComment}\r\n                    onSubmitUpdateCurrentComment={this.handleSubmitUpdateCurrentComment}\r\n                    onToggleReplyToComment={this.handleToggleReplyToComment}\r\n                    onSubmitCommentReply={this.handleSubmitCommentReply}\r\n                    onDeleteCommentReply={this.handleDeleteCommentReply}\r\n                    onAdminOfferStatesStepClick={this.handleAdminOfferStatesStepClick}\r\n                    createPledgeDialog_toggleDialog={createPledgeDialog_toggleDialog}\r\n                    createPledgeDialog_setProject={createPledgeDialog_setProject}\r\n                    selectProjectVisibility_setProject={selectProjectVisibility_setProject}\r\n                    bringPitchBackToLive={this.bringPitchBackToLive}\r\n                    toggleRejectFeedback={this.toggleRejectFeedback}\r\n                    sendProjectBackToIssuer={this.sendProjectBackToIssuer}\r\n                    toggleContactPitchOwnerDialog={() => this.props.toggleContactPitchOwnerDialog(project.projectName, projectIssuer.email)}\r\n                />\r\n\r\n                <CommentDialog\r\n                    open={commentDialogOpen}\r\n                    project={project}\r\n                    commentText={commentText}\r\n                    commentSubmitClick={commentSubmitClick}\r\n                    onClose={this.handleCloseCommentDialog}\r\n                    onCommentTextChanged={this.handleTextChanged}\r\n                    onSubmitCommentClick={this.handleSubmitCommentClick}\r\n                />\r\n\r\n                <CreatePledgeDialog/>\r\n\r\n                <ContactPitchOwnerDialog/>\r\n\r\n                <FeedbackSnackbarNew/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ProjectDetails extends Component {\r\n\r\n    /**\r\n     * Handle when the navigation tab is changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    onTabChanged = (event, value) => {\r\n        this.props.onTabChanged(event, value);\r\n    };\r\n\r\n    /**\r\n     * Handle when text input changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    }\r\n\r\n    /**\r\n     * Handle when the vote button is clicked.\r\n     *\r\n     * @param vote\r\n     */\r\n    onVote = vote => {\r\n        this.props.onVote(vote);\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked\r\n     */\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go live (Admin only)\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoLiveDecision = decision => {\r\n        this.props.onMakeProjectGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoToPledgePhaseDecision = decision => {\r\n        this.props.onMakeProjectGoToPledgePhaseDecision(decision);\r\n    };\r\n    /**\r\n     * Make a decision whether a project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectPledgeGoLiveDecision = decision => {\r\n        this.props.onMakeProjectPledgeGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post comment button is clicked --> Open comment dialog\r\n     */\r\n    onPostACommentClick = () => {\r\n        this.props.onPostACommentClick();\r\n    };\r\n\r\n    /**\r\n     * Handle to cancel updating current comment\r\n     */\r\n    onCancelUpdateCurrentComment = () => {\r\n        this.props.onCancelUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to submit the updated comment\r\n     */\r\n    onSubmitUpdateCurrentComment = () => {\r\n        this.props.onSubmitUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle input area to allow the project's owners to reply to the investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    onDeleteCommentReply = reply => {\r\n        this.props.onDeleteCommentReply(reply);\r\n    }\r\n\r\n    /**\r\n     * Handle when the offer state is changed\r\n     *\r\n     * @param step\r\n     */\r\n    onAdminOfferStatesStepClick = step => {\r\n        this.props.onAdminOfferStatesStepClick(step);\r\n    };\r\n\r\n    /**\r\n     * Bring pitch back to live\r\n     */\r\n    bringPitchBackToLive = () => {\r\n        this.props.bringPitchBackToLive();\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.props.toggleRejectFeedback();\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = () => {\r\n        this.props.sendProjectBackToIssuer();\r\n    }\r\n\r\n    /**\r\n     * Toggle contact pitch owner dialog\r\n     */\r\n    toggleContactPitchOwnerDialog = () => {\r\n        this.props.toggleContactPitchOwnerDialog();\r\n    }\r\n\r\n    /**\r\n     * Render the page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            groupsUserIsIn,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            investorSelfCertificationAgreement,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            project,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack,\r\n\r\n            projectVisibilitySetting,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        // if the data is being loaded\r\n        // display loading\r\n        if (!pledgesLoaded\r\n            || !votesLoaded\r\n            || !investorPledgeLoaded\r\n            || !projectIssuerLoaded\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <FlexView width=\"100%\" marginTop={20} hAlignContent=\"center\">\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // return Page Not Found for security reason\r\n        if (!project\r\n            || !pledges\r\n            || !projectIssuer\r\n            // the project is private\r\n            // the user is an investor/issuer that is not in the group that owns this project\r\n            || (\r\n                project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                && (user.type === DB_CONST.TYPE_INVESTOR || user.type === DB_CONST.TYPE_ISSUER)\r\n                && (groupsUserIsIn !== null && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is temporarily closed\r\n        // only display its content to the super admins,\r\n        // group admins that own this project, and the issuer of this project\r\n        if (utils.isProjectTemporarilyClosed(project)\r\n            && (\r\n                (user.type === DB_CONST.TYPE_ISSUER && user.id !== project.issuerID)\r\n                || (user.type === DB_CONST.TYPE_INVESTOR)\r\n                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin && user.anid !== project.anid)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\">This offer has been closed temporarily.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is private\r\n        // the user is a group admin that does not own this project\r\n        if (project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n            && (user.type === DB_CONST.TYPE_ADMIN)\r\n            && !user.superAdmin\r\n            && user.anid !== project.anid\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\"> You can only edit offers from your group.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        let sortedComments = comments;\r\n        // if the list of comments is not null\r\n        if (sortedComments) {\r\n            // sort by oldest day first\r\n            sortedComments.sort((comment1, comment2) => {\r\n                return (comment1.commentedDate - comment2.commentedDate);\r\n            });\r\n\r\n            let currentCommentIndex = sortedComments.findIndex(comment => comment.commentedBy === user.id);\r\n            if (currentCommentIndex !== -1) {\r\n                const currentComment = comments[currentCommentIndex];\r\n                sortedComments.splice(currentCommentIndex, 1);\r\n                sortedComments.push(currentComment);\r\n            }\r\n\r\n            sortedComments.reverse();\r\n        }\r\n\r\n        // sort replies in each comment\r\n        sortedComments.forEach(comment => {\r\n            comment.replies.sort((reply1, reply2) => {\r\n                return reply2.repliedDate - reply1.repliedDate;\r\n            });\r\n        });\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingTop: 0, paddingBottom: 100}}>\r\n                <Row noGutters style={{paddingTop: 25, paddingBottom: 25, backgroundColor: colors.kick_starter_background_color}}>\r\n                    {/** Banner to announce if a project is temporarily closed */}\r\n                    {\r\n                        !utils.isProjectTemporarilyClosed(project)\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 0}} sm={{span: 12, offset: 0, order: 0}} md={{span: 12, offset: 0, order: 0}} lg={{span: 12, offset: 0, order: 0}}>\r\n                                <FlexView marginBottom={20} hAlignContent=\"center\" style={{backgroundColor: colors.errorColor, padding: 15}} >\r\n                                    <Typography variant=\"body2\" align=\"center\" className={css(sharedStyles.white_text)}><b>This offer has been temporarily closed.</b></Typography>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Pledge (displayed if the user is an investor and has pledged this project before) */}\r\n                    {\r\n                        !investorPledge\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 2}} sm={{span: 12, offset: 0, order: 2}} md={{span: 10, offset: 1, order: 2}} lg={{span: 10, offset: 1, order: 1}}>\r\n                                <Paper elevation={3} style={{margin: 12}} square>\r\n                                    <Row noGutters style={{padding: 6}}>\r\n                                        <Col xs={12} sm={12} md={{span: 5, order: 1}} lg={{span: 3, order: 1}}>\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" height=\"100%\" width=\"100%\" style={{padding: 10}}>\r\n                                                <CheckCircleIcon color=\"primary\" style={{marginRight: 15}}/>\r\n                                                <Typography align=\"left\" variant=\"body1\">\r\n                                                    {\r\n                                                        investorPledge.status === DB_CONST.MAKE_A_NEW_PLEDGE\r\n                                                            ?\r\n                                                            `You pledged £${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                            :\r\n                                                            `You updated your pledge to £${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                    }\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        <Col xs={12} sm={12} md={{span: 5, offset: 2, order: 2}} lg={{span: 3, offset: 6, order: 2}}>\r\n                                            <FlexView width=\"100%\" hAlignContent=\"center\" style={{padding: 10}}>\r\n                                                {\r\n                                                    !utils.isProjectInLivePledgePhase(project)\r\n                                                        ?\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"secondary\">Offer has ended. You can't change your pledge anymore.</Typography>\r\n                                                        :\r\n                                                        <NavLink\r\n                                                            to={{\r\n                                                                pathname: groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                ,\r\n                                                                search: `?project=${project.id}`\r\n                                                            }}\r\n                                                            className={css(sharedStyles.nav_link_hover)}\r\n                                                        >\r\n                                                            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">Manage your pledge</Button>\r\n                                                        </NavLink>\r\n                                                }\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Paper>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Project title and description */}\r\n                    <Col xs={{span: 12, offset: 0, order: 3}} sm={{span: 12, offset: 0, order: 3}} md={{span: 10, offset: 1, order: 3}} lg={{span: 8, offset: 2, order: 2}} style={{paddingLeft: 20, paddingRight: 20, paddingTop: 20, paddingBottom: 40}}>\r\n                        <FlexView column width=\"100%\" hAlignContent=\"center\">\r\n                            <Typography align=\"center\" variant=\"h5\" style={{marginBottom: 12}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        \"This is an offer\"\r\n                                        :\r\n                                        project.projectName\r\n                                }\r\n                            </Typography>\r\n                            <Typography className={css(styles.gray_text)} align=\"center\" variant=\"body1\" style={{whiteSpace: \"pre-line\"}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        `in ${project.sector} sector`\r\n                                        :\r\n                                        project.description\r\n                                }\r\n                            </Typography>\r\n                            {\r\n                                user.type === DB_CONST.TYPE_ADMIN\r\n                                || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)\r\n                                    ?\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" marginTop={20}>\r\n                                        {\r\n                                            !utils.shouldAProjectBeEdited(user, project)\r\n                                                ?\r\n                                                <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)} disabled>\r\n                                                    <CreateIcon style={{marginRight: 8,  width: 20, height: \"auto\"}}\r\n                                                    />Edit offer</Button>\r\n                                                :\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.EDIT_OFFER\r\n                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                            :\r\n                                                            ROUTES.EDIT_OFFER_INVEST_WEST_SUPER\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                    }\r\n                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                >\r\n                                                    <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)}>\r\n                                                        <CreateIcon style={{marginRight: 8, width: 20, height: \"auto\"}}/>Edit offer</Button>\r\n                                                </NavLink>\r\n                                        }\r\n                                        {/*<FlexView*/}\r\n                                        {/*    marginLeft={15}*/}\r\n                                        {/*>*/}\r\n                                        {/*    <InfoOverlay*/}\r\n                                        {/*        message={*/}\r\n                                        {/*            user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                        {/*                ?*/}\r\n                                        {/*                \"Edit offer.\"*/}\r\n                                        {/*                :*/}\r\n                                        {/*                utils.isDraftProject(project)*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    \"This offer is still a draft. Complete it.\"*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    !utils.shouldAProjectBeEdited(user, project)*/}\r\n                                        {/*                        ?*/}\r\n                                        {/*                        \"Pages cannot be edited.\"*/}\r\n                                        {/*                        :*/}\r\n                                        {/*                        `Pages can only be edited before the pitch phase expires. You can edit until ${utils.dateInReadableFormat(project.Pitch.expiredDate)}.`*/}\r\n                                        {/*        }*/}\r\n                                        {/*        placement=\"right\"*/}\r\n                                        {/*    />*/}\r\n                                        {/*</FlexView>*/}\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            {\r\n                                user.id === project.issuerID\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column hAlignContent=\"center\">\r\n                                        <NavLink\r\n                                            to={\r\n                                                this.shouldHideInformation()\r\n                                                || (\r\n                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                    && project.createdByGroupAdmin\r\n                                                )\r\n                                                    ?\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.VIEW_GROUP_DETAILS\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                        :\r\n                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                    :\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.USER_PROFILE\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                                        :\r\n                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                            }\r\n                                            className={css(sharedStyles.nav_link_hover, styles.black_text)}\r\n                                        >\r\n                                            <Typography align=\"center\" variant=\"body2\" style={{marginTop: 23}}>\r\n                                                {\r\n                                                    this.shouldHideInformation()\r\n                                                    || (\r\n                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                        && project.createdByGroupAdmin\r\n                                                    )\r\n                                                        ?\r\n                                                        <u>by {`${project.group.displayName}`}</u>\r\n                                                        :\r\n                                                        <u>by {`${projectIssuer.firstName} ${projectIssuer.lastName}`}</u>\r\n                                                }\r\n                                            </Typography>\r\n                                        </NavLink>\r\n                                        {\r\n                                            project.hasOwnProperty('createdByGroupAdmin')\r\n                                            && project.createdByGroupAdmin\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                projectIssuer.hasOwnProperty('linkedin')\r\n                                                && projectIssuer.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={projectIssuer.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64,  height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                        }\r\n                                    </FlexView>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Project cover (image or video) */}\r\n                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 7, offset: 1, order: 3}} style={{paddingLeft: 20, paddingRight: 20, height: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE}}>\r\n                        {\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Image src={utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, project.group)}\r\n                                    style={{\r\n                                        maxHeight:\r\n                                            isMobile\r\n                                                ?\r\n                                                MAX_COVER_HEIGHT_IN_MOBILE_MODE\r\n                                                :\r\n                                                MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE\r\n                                        ,\r\n                                        border: `1px solid ${colors.gray_300}`,\r\n                                        width: \"100%\",\r\n                                        objectFit: \"scale-down\"\r\n                                    }}\r\n                                />\r\n                                :\r\n                                project.Pitch.cover.map((coverItem, index) => (\r\n                                    coverItem.hasOwnProperty('removed')\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        (\r\n                                            coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                ?\r\n                                                <ReactPlayer\r\n                                                    key={index}\r\n                                                    url={coverItem.url}\r\n                                                    playsInline\r\n                                                    pip={true}\r\n                                                    width=\"100%\"\r\n                                                    height={coverItem.storageID === \"\" ? \"100%\" : \"auto\"}\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                />\r\n                                                :\r\n                                                <Image key={index} src={coverItem.url} style={{maxHeight: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE, border: `1px solid ${colors.gray_300}`, width: \"100%\", objectFit: \"scale-down\"}}/>\r\n                                        )\r\n                                ))\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Project information */}\r\n                    <Col xs={{span: 12, order: 4}} sm={{span: 12, order: 4}} md={{span: 12, order: 4}} lg={{span: 3, order: 4}} style={{paddingLeft: 20, paddingRight: 20}}>\r\n                        <Row noGutters>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 1}} lg={{span: 12, offset: 0, order: 1}}>\r\n                                <FlexView width=\"100%\" height={4} style={{\r\n                                        backgroundColor:\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n\r\n                            {/** Funding goal / Pledged */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 2}} lg={{span: 12, offset: 0, order: 2}}>\r\n                                <FlexView column marginTop={18}>\r\n                                    {\r\n                                        utils.isDraftProject(project)\r\n                                        || utils.isProjectWaitingToGoLive(project)\r\n                                        || utils.isProjectRejectedToGoLive(project)\r\n                                        || utils.isProjectInLivePitchPhase(project)\r\n                                        || utils.isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeCreated(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeChecked(project)\r\n                                            ?\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <FlexView column marginRight={20}>\r\n                                                    <Typography variant=\"h5\" color=\"secondary\" align=\"left\">{'£' + Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Funding goal</Typography>\r\n                                                </FlexView>\r\n                                                <InfoOverlay message=\"Funding amount sought via Invest West.\" placement=\"top\"/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <FlexView column marginRight={20}>\r\n                                                    <Typography variant=\"h5\" color=\"primary\" align=\"left\">{`£${Number(utils.calculatePledgesAmount(pledges).toFixed(2)).toLocaleString()}`}</Typography>\r\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{`pledged of £${Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`}</Typography>\r\n                                                </FlexView>\r\n                                                <InfoOverlay message=\"Total amount pledged via Invest West.\" placement=\"top\"/>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n\r\n                            {/** Post money valuation */}\r\n                            {\r\n                                !project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 3}} lg={{span: 12, offset: 0, order: 3}}>\r\n                                        <FlexView marginTop={20} vAlignContent=\"center\">\r\n                                            <FlexView column marginRight={20}>\r\n                                                <Typography variant=\"h5\" color=\"inherit\" align=\"left\">{'£' + Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()}</Typography>\r\n                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Post money valuation</Typography>\r\n                                            </FlexView>\r\n                                            <InfoOverlay message=\"This is the company post money valuation.\" placement=\"top\"/>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            \r\n\r\n                            {/** Project status */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 0, order: 4}} lg={{span: 12, offset: 0, order: 4}}>\r\n                                {\r\n                                    this.renderProjectStatus()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** SEIS badge check */}\r\n                            {\r\n                                project.Pitch.hasSEIS === \"No\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 1, offset: 1, order: 5}} lg={{span: 3, offset: 0, order: 5}}>\r\n                                        <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                    <Typography variant=\"body1\"><b>SEIS</b></Typography>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** EIS badge check */}\r\n                            {\r\n\r\n                                project.Pitch.hasEIS === \"No\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 1, offset: 1, order: 6}} lg={{span: 3, offset: 0, order: 6}}>\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color,}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                    <Typography variant=\"body1\"><b>EIS</b></Typography>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Contact us */}\r\n                            {\r\n                                isProjectOwner(AuthenticationState.currentUser, project)\r\n                                    ? null\r\n                                    : <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 5}} lg={{span: 12, offset: 0, order: 7}} style={{marginTop: 15}}>\r\n                                        <FlexView column hAlignContent=\"left\">\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={this.shouldHideInformation() || (user.type === TYPE_INVESTOR && !investorSelfCertificationAgreement)} onClick={() => this.toggleContactPitchOwnerDialog()}>Contact us</Button>\r\n                                                {/*<Button*/}\r\n                                                {/*    size=\"medium\"*/}\r\n                                                {/*    variant={getInvestorVote(votes, user) && getInvestorVote(votes, user).voted ? \"contained\" : \"outlined\"}*/}\r\n                                                {/*    color=\"primary\"*/}\r\n                                                {/*    disabled={this.shouldVoteDisabled()}*/}\r\n                                                {/*    onClick={() => this.onVote(true)}*/}\r\n                                                {/*    className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <i*/}\r\n                                                {/*        style={{*/}\r\n                                                {/*            fontSize: 21,*/}\r\n                                                {/*            marginRight: 8*/}\r\n                                                {/*        }}*/}\r\n                                                {/*        className=\"far fa-thumbs-up\"*/}\r\n                                                {/*    />*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        Like*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</Button>*/}\r\n                                                {/*<FlexView*/}\r\n                                                {/*    marginLeft={10}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*        color=\"primary\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        {this.displayVote(true)}*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</FlexView>*/}\r\n                                            </FlexView>\r\n                                            {/*{*/}\r\n                                            {/*    user.type === DB_CONST.TYPE_ISSUER*/}\r\n                                            {/*        ?*/}\r\n                                            {/*        <Typography*/}\r\n                                            {/*            variant=\"body2\"*/}\r\n                                            {/*            align=\"left\"*/}\r\n                                            {/*            color=\"error\"*/}\r\n                                            {/*            style={{*/}\r\n                                            {/*                marginTop: 10*/}\r\n                                            {/*            }}*/}\r\n                                            {/*        >*/}\r\n                                            {/*            Only investors can vote.*/}\r\n                                            {/*        </Typography>*/}\r\n                                            {/*        :*/}\r\n                                            {/*        null*/}\r\n                                            {/*}*/}\r\n                                        </FlexView>\r\n                                        {\r\n                                            this.shouldHideInformation()\r\n                                                ?\r\n                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot see detailed information of this restricted offer.</Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                        <NavLink\r\n                                                            to={\r\n                                                                groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                            }\r\n                                                            style={{marginTop: 4}}>\r\n                                                            <Typography variant=\"body2\">Request access</Typography>\r\n                                                        </NavLink>\r\n                                                    </FlexView>\r\n                                                :\r\n                                                this.renderInvestorSelfCertifyReminder()\r\n                                        }\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Pledge this project (available only for investor and only appears when the project is in the Primary offer phase) */}\r\n                            {\r\n                                !utils.isProjectInLivePledgePhase(project)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        user.type !== DB_CONST.TYPE_INVESTOR\r\n                                            ?\r\n                                            (\r\n                                                <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                    <Typography align=\"left\" variant=\"body2\">\r\n                                                        <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                    </Typography>\r\n                                                </Col>\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                investorPledge\r\n                                                    ?\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                        <Typography align=\"left\" variant=\"body2\"><u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n\r\n                                                        {\r\n                                                            user.type === DB_CONST.TYPE_INVESTOR\r\n                                                            && !investorSelfCertificationAgreement\r\n                                                                ?\r\n                                                                <Button style={{marginBottom: 14}} className={css(sharedStyles.no_text_transform)} fullWidth variant=\"outlined\" color=\"primary\" size=\"medium\"\r\n                                                                    disabled={\r\n                                                                        user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                        && !investorSelfCertificationAgreement\r\n                                                                    }\r\n                                                                >\r\n                                                                    Pledge now\r\n                                                                </Button>\r\n                                                                :\r\n                                                                <NavLink\r\n                                                                    to={{\r\n                                                                        pathname: groupUserName\r\n                                                                            ?\r\n                                                                            ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                            :\r\n                                                                            ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                        ,\r\n                                                                        search: `?project=${project.id}`\r\n                                                                    }}\r\n                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                >\r\n                                                                    <Button style={{marginBottom: 14}} className={css(sharedStyles.no_text_transform)} fullWidth variant=\"outlined\" color=\"primary\" size=\"medium\">Pledge now</Button>\r\n                                                                </NavLink>\r\n                                                        }\r\n\r\n                                                        {\r\n                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                        }\r\n\r\n                                                        <Typography align=\"left\" variant=\"body2\" style={{marginTop: 15}}>\r\n                                                            <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u></Typography>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Sections bar */}\r\n                <Row noGutters className={css(styles.sticky_body_sections_bar)}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n\r\n                    <Col style={{padding: 10}} xs={{span: 12, offset: 0}} sm={{span: 12, offset: 0}} md={{span: 12, offset: 0}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\">\r\n                            <Tabs value={mainBody} onChange={this.onTabChanged} indicatorColor=\"primary\" textColor=\"primary\" variant=\"scrollable\" scrollButtons=\"on\">\r\n                                {\r\n                                    // user is a super admin\r\n                                    // or a group admin that owns the project\r\n                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))\r\n                                    )\r\n                                    // project is not a draft\r\n                                    && !utils.isDraftProject(project)\r\n                                        ?\r\n                                        <Tab value={MAIN_BODY_ADMIN_OFFER_STATES} className={css(sharedStyles.tab_title)} fullWidth label=\"Control phases\"\r\n                                         style={{\r\n                                                color:\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        colors.secondaryColor\r\n                                                        :\r\n                                                        groupProperties.settings.secondaryColor\r\n                                            }}\r\n                                        />\r\n                                        :\r\n                                        null\r\n                                }\r\n                                {/*{*/}\r\n                                {/*    // user is a super admin*/}\r\n                                {/*    // or a group admin that owns the project*/}\r\n                                {/*    (user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                {/*        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))*/}\r\n                                {/*    )*/}\r\n                                {/*    // user is the issuer that owns the project*/}\r\n                                {/*    || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)*/}\r\n                                {/*        ?*/}\r\n                                {/*        <Tab*/}\r\n                                {/*            value={MAIN_BODY_INVESTORS_PLEDGED}*/}\r\n                                {/*            className={css(sharedStyles.tab_title)}*/}\r\n                                {/*            fullWidth*/}\r\n                                {/*            label=\"Pledges\"*/}\r\n                                {/*            style={{*/}\r\n                                {/*                color:*/}\r\n                                {/*                    !groupProperties*/}\r\n                                {/*                        ?*/}\r\n                                {/*                        colors.secondaryColor*/}\r\n                                {/*                        :*/}\r\n                                {/*                        groupProperties.settings.secondaryColor*/}\r\n                                {/*            }}*/}\r\n                                {/*        />*/}\r\n                                {/*        :*/}\r\n                                {/*        null*/}\r\n                                {/*}*/}\r\n                                <Tab value={MAIN_BODY_CAMPAIGN} className={css(sharedStyles.tab_title)} fullWidth label=\"Campaign\"/>\r\n                                <Tab value={MAIN_BODY_DOCUMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Documents\"/>\r\n                                <Tab value={MAIN_BODY_COMMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Investor comments\"/>\r\n                                <Tab value={MAIN_BODY_NOTES} className={css(sharedStyles.tab_title)} fullWidth label=\"Extra information\"/>\r\n                            </Tabs>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main body */}\r\n                <Row noGutters className={css(styles.main_body_section)}>\r\n                    {/** Offer states (only visible to Admin) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_ADMIN_OFFER_STATES\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                <FlexView column marginTop={30}>\r\n                                    <Typography variant=\"h5\"> Control phases</Typography>\r\n\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 8, order: 0}} lg={{span: 8, order: 0}}>\r\n                                            <Stepper nonLinear orientation=\"vertical\" activeStep={adminOfferStatesActiveStep} style={{marginTop: 15}}>\r\n                                                {/** Publish pitch step */}\r\n                                                <Step key={ADMIN_OFFER_STATES_PUBLISH_PITCH} completed={!utils.isProjectWaitingToGoLive(project)}>\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PITCH)}>\r\n                                                        <StepLabel>Publish pitch</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            utils.isProjectWaitingToGoLive(project)\r\n                                                                ?\r\n                                                                <FlexView column width=\"100%\" marginTop={20} className={css(styles.admin_state_control_box)}>\r\n                                                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                                                        Please check this offer\r\n                                                                        carefully\r\n                                                                        before publishing as this action cannot be\r\n                                                                        reversed. You\r\n                                                                        can control who can see this investment\r\n                                                                        opportunity\r\n                                                                        using the options below.\r\n                                                                    </Typography>\r\n\r\n                                                                    <Divider style={{marginTop: 25, marginBottom: 20}}/>\r\n\r\n                                                                    {/** Select project visibility before publishing pitch */}\r\n                                                                    <SelectPitchVisibility/>\r\n\r\n                                                                    <Divider style={{marginTop: 35, marginBottom: 25}}/>\r\n\r\n                                                                    {\r\n                                                                        !addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column>\r\n                                                                                <TextField\r\n                                                                                    label=\"Feedback\"\r\n                                                                                    placeholder=\"Feedback for issuer\"\r\n                                                                                    name=\"rejectFeedback\"\r\n                                                                                    value={rejectFeedback}\r\n                                                                                    fullWidth\r\n                                                                                    margin=\"normal\"\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    multiline\r\n                                                                                    rows={5}\r\n                                                                                    rowsMax={5}\r\n                                                                                    onChange={this.onTextChanged}\r\n                                                                                />\r\n\r\n                                                                                <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={10}>\r\n                                                                                    <FlexView marginRight={6}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={rejectFeedback.trim().length === 0} onClick={() => this.sendProjectBackToIssuer()}>\r\n                                                                                            {\r\n                                                                                                sendingProjectBack\r\n                                                                                                    ?\r\n                                                                                                    \"Sending...\"\r\n                                                                                                    :\r\n                                                                                                    \"Send\"\r\n                                                                                            }\r\n                                                                                        </Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView marginLeft={6}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => this.toggleRejectFeedback()}>Cancel</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            isProjectCreatedByGroupAdmin(project)\r\n                                                                                ?\r\n                                                                                <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish pitch</Button>\r\n                                                                                :\r\n                                                                                <FlexView>\r\n                                                                                    <FlexView grow marginRight={10}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish pitch</Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView grow marginLeft={10}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.toggleRejectFeedback()}>Send back to issuer</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        !user.superAdmin\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <Typography variant=\"body1\" color=\"error\" align=\"left\" style={{marginTop: 20}}>Only group admin can do this.</Typography>\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                isDraftProject(project)\r\n                                                                                    ?\r\n                                                                                    \"This offer is in draft phase.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has been published.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                </FlexView>\r\n                                                        }\r\n\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/** Move Pitch to Pledge step */}\r\n                                                <Step\r\n                                                    key={ADMIN_OFFER_STATES_MOVE_TO_PLEDGE}\r\n                                                    disabled={\r\n                                                        isProjectWaitingToGoLive(project)\r\n                                                        || isProjectRejectedToGoLive(project)\r\n                                                    }\r\n                                                    completed={\r\n                                                        isProjectSuccessful(project)\r\n                                                        || isProjectFailed(project)\r\n                                                        || isProjectInLivePledgePhase(project)\r\n                                                        || isProjectWaitingForPledgeToBeCreated(project)\r\n                                                        || isProjectWaitingForPledgeToBeChecked(project)\r\n                                                    }\r\n                                                >\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_MOVE_TO_PLEDGE)}>\r\n                                                        {/*<StepLabel*/}\r\n                                                        {/*    error={utils.isProjectRejectedToGoLive(project)}*/}\r\n                                                        {/*>*/}\r\n                                                        {/*    Move pitch to pledge phase*/}\r\n                                                        {/*</StepLabel>*/}\r\n                                                        <StepLabel error={utils.isProjectRejectedToGoLive(project)}>Make decision for expired pitch</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            (isProjectInLivePitchPhase(project)\r\n                                                                || isProjectPitchExpiredWaitingForAdminToCheck(project))\r\n                                                            && !isProjectWaitingForPledgeToBeCreated(project)\r\n                                                            && !isProjectWaitingForPledgeToBeChecked(project)\r\n                                                                ?\r\n                                                                <FlexView\r\n                                                                    column\r\n                                                                >\r\n                                                                    {\r\n                                                                        !isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column width=\"100%\" marginTop={20} marginBottom={20} className={css(styles.admin_state_control_box)}>\r\n                                                                                <Typography align=\"left\" variant=\"body1\" style={{marginBottom: 35}}>This pitch has expired. You can bring it back to live by updating the expiry date or close it.</Typography>\r\n\r\n                                                                                <KeyboardDatePicker\r\n                                                                                    autoOk\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"dialog\"\r\n                                                                                    inputVariant=\"outlined\"\r\n                                                                                    label=\"Update expiry date for this pitch\"\r\n                                                                                    format=\"dd/MM/yyyy\"\r\n                                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                    value={changedPitchExpiryDate}\r\n                                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                                    onChange={this.onDateChanged}\r\n                                                                                />\r\n\r\n                                                                                <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                    disabled={\r\n                                                                                        !changedPitchExpiryDate\r\n                                                                                        || isNaN(changedPitchExpiryDate)\r\n                                                                                        || changedPitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)\r\n                                                                                    }\r\n                                                                                    style={{marginTop: 25}} onClick={this.bringPitchBackToLive}>Make pitch live again</Button>\r\n\r\n                                                                                <FlexView column marginTop={100}>\r\n                                                                                    <Button fullWidth color=\"secondary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" disabled={user.superAdmin} onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}>Close pitch</Button>\r\n\r\n                                                                                    <Typography align=\"center\" variant=\"body2\" style={{marginTop: 12}}>\r\n                                                                                        <b>\r\n                                                                                            <u>\r\n                                                                                                Please do it carefully\r\n                                                                                                as you cannot\r\n                                                                                                reverse\r\n                                                                                                your action.\r\n                                                                                            </u>\r\n                                                                                        </b>\r\n                                                                                    </Typography>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/*<FlexView*/}\r\n                                                                    {/*    column*/}\r\n                                                                    {/*    width=\"100%\"*/}\r\n                                                                    {/*    marginTop={20}*/}\r\n                                                                    {/*    className={css(styles.admin_state_control_box)}*/}\r\n                                                                    {/*>*/}\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*        paragraph*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        This offer is currently in the*/}\r\n                                                                    {/*        pitch*/}\r\n                                                                    {/*        phase. You can now move it to the pledge*/}\r\n                                                                    {/*        phase.*/}\r\n                                                                    {/*        The*/}\r\n                                                                    {/*        issuer will be notified and prompted to*/}\r\n                                                                    {/*        create*/}\r\n                                                                    {/*        their*/}\r\n                                                                    {/*        pledge page.*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        <b>*/}\r\n                                                                    {/*            <u>*/}\r\n                                                                    {/*                Please do it carefully as you cannot*/}\r\n                                                                    {/*                reverse*/}\r\n                                                                    {/*                your action.*/}\r\n                                                                    {/*            </u>*/}\r\n                                                                    {/*        </b>*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Divider*/}\r\n                                                                    {/*        style={{*/}\r\n                                                                    {/*            marginTop: 30,*/}\r\n                                                                    {/*            marginBottom: 30*/}\r\n                                                                    {/*        }}*/}\r\n                                                                    {/*    />*/}\r\n\r\n                                                                    {/*    <FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginRight={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"primary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(true)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Move to pledge phase*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginLeft={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"secondary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Close pitch*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*    </FlexView>*/}\r\n\r\n                                                                    {/*    {*/}\r\n                                                                    {/*        !user.superAdmin*/}\r\n                                                                    {/*            ?*/}\r\n                                                                    {/*            null*/}\r\n                                                                    {/*            :*/}\r\n                                                                    {/*            <Typography*/}\r\n                                                                    {/*                variant=\"body1\"*/}\r\n                                                                    {/*                color=\"error\"*/}\r\n                                                                    {/*                align=\"left\"*/}\r\n                                                                    {/*                style={{*/}\r\n                                                                    {/*                    marginTop: 20*/}\r\n                                                                    {/*                }}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Only group admin can do this.*/}\r\n                                                                    {/*            </Typography>*/}\r\n                                                                    {/*    }*/}\r\n                                                                    {/*</FlexView>*/}\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                                    ?\r\n                                                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                    && project.createdByGroupAdmin\r\n                                                                                    && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                                        ?\r\n                                                                                        \"You can create a pledge page for this offer now.\"\r\n                                                                                        :\r\n                                                                                        \"The issuer has been prompted to create their pledge page. You will then be able to check the pledge before publishing.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has moved to the pledge phase.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                    {\r\n                                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                        && project.createdByGroupAdmin\r\n                                                                        && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                        && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                            ?\r\n                                                                            <FlexView marginTop={20}>\r\n                                                                                <Button color=\"primary\" variant=\"outlined\" size=\"medium\"\r\n                                                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                                                    onClick={() => {\r\n                                                                                        createPledgeDialog_toggleDialog();\r\n                                                                                        createPledgeDialog_setProject(project);\r\n                                                                                        selectProjectVisibility_setProject(project);\r\n                                                                                    }}>\r\n                                                                                    Create pledge\r\n                                                                                </Button>\r\n                                                                            </FlexView>\r\n                                                                            :\r\n                                                                            null\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/*/!** Publish Pledge step *!/*/}\r\n                                                {/*<Step*/}\r\n                                                {/*    key={ADMIN_OFFER_STATES_PUBLISH_PLEDGE}*/}\r\n                                                {/*    disabled={*/}\r\n                                                {/*        isProjectWaitingToGoLive(project)*/}\r\n                                                {/*        || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*        || isProjectInLivePitchPhase(project)*/}\r\n                                                {/*        || isProjectPitchExpiredWaitingForAdminToCheck(project)*/}\r\n                                                {/*        || isProjectFailed(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*    completed={*/}\r\n                                                {/*        isProjectFailed(project)*/}\r\n                                                {/*        || isProjectSuccessful(project)*/}\r\n                                                {/*        || isProjectInLivePledgePhase(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*>*/}\r\n                                                {/*    <StepButton*/}\r\n                                                {/*        onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PLEDGE)}*/}\r\n                                                {/*    >*/}\r\n                                                {/*        <StepLabel*/}\r\n                                                {/*            error={*/}\r\n                                                {/*                isProjectFailed(project)*/}\r\n                                                {/*                || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*            }*/}\r\n                                                {/*        >*/}\r\n                                                {/*            Publish pledge*/}\r\n                                                {/*        </StepLabel>*/}\r\n                                                {/*    </StepButton>*/}\r\n                                                {/*    <StepContent>*/}\r\n                                                {/*        {*/}\r\n                                                {/*            project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED*/}\r\n                                                {/*                ?*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                    className={css(styles.admin_state_control_box)}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                        paragraph*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        The issuer has now created their pledge page.*/}\r\n                                                {/*                        Please*/}\r\n                                                {/*                        check this carefully before publishing as you*/}\r\n                                                {/*                        cannot*/}\r\n                                                {/*                        reverse this action. You can also control who*/}\r\n                                                {/*                        can see*/}\r\n                                                {/*                        this pledge using the options below.*/}\r\n                                                {/*                    </Typography>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 25,*/}\r\n                                                {/*                            marginBottom: 20*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    /!** Select project visibility before publishing pledge *!/*/}\r\n                                                {/*                    <SelectPledgeVisibility/>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 35,*/}\r\n                                                {/*                            marginBottom: 25*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    <FlexView*/}\r\n                                                {/*                        marginTop={20}*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginRight={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"primary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({*/}\r\n                                                {/*                                    decision: true,*/}\r\n                                                {/*                                    projectVisibilitySetting*/}\r\n                                                {/*                                })}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Publish pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginLeft={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"secondary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({decision: false})}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Close pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                    </FlexView>*/}\r\n\r\n                                                {/*                    {*/}\r\n                                                {/*                        !user.superAdmin*/}\r\n                                                {/*                            ?*/}\r\n                                                {/*                            null*/}\r\n                                                {/*                            :*/}\r\n                                                {/*                            <Typography*/}\r\n                                                {/*                                variant=\"body1\"*/}\r\n                                                {/*                                color=\"error\"*/}\r\n                                                {/*                                align=\"left\"*/}\r\n                                                {/*                                style={{*/}\r\n                                                {/*                                    marginTop: 20*/}\r\n                                                {/*                                }}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Only group admin can do this.*/}\r\n                                                {/*                            </Typography>*/}\r\n                                                {/*                    }*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*                :*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        color={*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"secondary\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"primary\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        {*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"This offer has been rejected.\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"This offer has been published.\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                    </Typography>*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*        }*/}\r\n                                                {/*    </StepContent>*/}\r\n                                                {/*</Step>*/}\r\n                                            </Stepper>\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 0}} sm={{span: 12, order: 0}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}}>\r\n                                            {\r\n                                                !isProjectLive(project)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FlexView column marginTop={30}>\r\n                                                        <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                            onClick={() => realtimeDBUtils.toggleProjectLivelinessTemporarily(user, JSON.parse(JSON.stringify(project)))}\r\n                                                            disabled={\r\n                                                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                                                || (\r\n                                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                                    && user.anid !== project.anid\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"Open again\"\r\n                                                                    :\r\n                                                                    \"Close temporarily\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        {\r\n                                                            !user.superAdmin\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography variant=\"body2\" align=\"left\" color=\"error\" style={{marginTop: 12}}>Only group admins can do this.</Typography>\r\n                                                        }\r\n                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 15}}>\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"This offer will be opened again.\"\r\n                                                                    :\r\n                                                                    \"This offer will be closed temporarily and it will no longer be visible to any investors until you open it again.\"\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Main presentation (Campaign) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_CAMPAIGN\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\"> Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n\r\n                                    {\r\n                                        // pitch deck\r\n                                        !project.Pitch.presentationDocument\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography variant=\"h5\">Pitch deck</Typography>\r\n                                                <DocumentsDownload documents={project.Pitch.presentationDocument} shouldShowRiskWarningOnDownload={true}/>\r\n                                                <Divider style={{marginTop: 10}}/>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        // pitch presentation text\r\n                                        !project.Pitch.presentationText\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(project.Pitch.presentationText.ops)}} marginTop={30}/>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/*/!** Investors pledged (only available when the primary offer expired and there are investors pledging the offer) *!/*/}\r\n                    {/*{*/}\r\n                    {/*    mainBody !== MAIN_BODY_INVESTORS_PLEDGED*/}\r\n                    {/*        ?*/}\r\n                    {/*        null*/}\r\n                    {/*        :*/}\r\n                    {/*        <Col*/}\r\n                    {/*            xs={12}*/}\r\n                    {/*            sm={12}*/}\r\n                    {/*            md={12}*/}\r\n                    {/*            lg={{span: 6, offset: 3}}*/}\r\n                    {/*        >*/}\r\n                    {/*            <FlexView*/}\r\n                    {/*                column*/}\r\n                    {/*                marginTop={30}*/}\r\n                    {/*            >*/}\r\n                    {/*                <Typography*/}\r\n                    {/*                    variant=\"h5\"*/}\r\n                    {/*                    align=\"left\"*/}\r\n                    {/*                    paragraph*/}\r\n                    {/*                >*/}\r\n                    {/*                    Pledges from investors*/}\r\n                    {/*                </Typography>*/}\r\n\r\n                    {/*                /!** Pledges table *!/*/}\r\n                    {/*                <PledgesTable/>*/}\r\n                    {/*            </FlexView>*/}\r\n                    {/*        </Col>*/}\r\n                    {/*}*/}\r\n\r\n                    {/** Comments */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_COMMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}}>\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 8, order: 1}} lg={{span: 8, order: 1}} style={{marginTop: 40}}>\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography align=\"center\" style={{padding: 15, backgroundColor: colors.kick_starter_background_color_1, marginBottom: 30}} variant=\"body2\" color=\"inherit\">Only investors can post comments.</Typography>\r\n                                            }\r\n\r\n                                            {\r\n                                                !commentsLoaded\r\n                                                    ?\r\n                                                    // comments not loaded yet --> load them and wait for them to be loaded\r\n                                                    <FlexView marginTop={30} hAlignContent=\"center\" width=\"100%\">\r\n                                                        <HashLoader\r\n                                                            color={\r\n                                                                !groupProperties\r\n                                                                    ?\r\n                                                                    colors.primaryColor\r\n                                                                    :\r\n                                                                    groupProperties.settings.primaryColor\r\n                                                            }\r\n                                                        />\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    (\r\n                                                        sortedComments.length > 0\r\n                                                            ?\r\n                                                            (\r\n                                                                <FlexView className={css(styles.border_box)} style={{padding: 15, backgroundColor: colors.kick_starter_background_color}} column>\r\n                                                                    {\r\n                                                                        sortedComments.map(comment => (\r\n                                                                            (\r\n                                                                                // if the comment is from the current user\r\n                                                                                comment.commentedBy === user.id\r\n                                                                                    ?\r\n                                                                                    <FlexView key={comment.id} column marginTop={12} marginBottom={12} className={css(styles.border_box)} style={{backgroundColor: colors.white, width: \"100%\"}}>\r\n                                                                                        <Typography style={{marginTop: 15, marginBottom: 10}} variant=\"body1\" className={css(styles.gray_text)} align=\"left\">Update your comment</Typography>\r\n                                                                                        <InputBase name=\"currentCommentText\" onChange={this.onTextChanged} value={currentCommentText} fullWidth rows={5} multiline className={css(styles.border_box)}/>\r\n                                                                                        <FlexView marginTop={25} width=\"100%\" hAlignContent=\"right\">\r\n                                                                                            <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onCancelUpdateCurrentComment}>Cancel</Button>\r\n                                                                                            <Button style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" disabled={(currentComment && currentComment.comment === currentCommentText) || currentCommentText.trim().length === 0} onClick={this.onSubmitUpdateCurrentComment}>Update</Button>\r\n                                                                                        </FlexView>\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>{reply.text}</Typography>\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                                    :\r\n                                                                                    <FlexView key={comment.id} className={css(styles.border_box)} style={{backgroundColor: colors.white}} column marginTop={12} marginBottom={12}>\r\n                                                                                        {/** Date */}\r\n                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                            {\r\n                                                                                                comment.status === DB_CONST.COMMENT_STATUS_POSTED\r\n                                                                                                    ?\r\n                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                                    :\r\n                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                            }\r\n                                                                                        </Typography>\r\n\r\n                                                                                        {/** Comment author */}\r\n                                                                                        {\r\n                                                                                            user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                            && user.superAdmin\r\n                                                                                                ?\r\n                                                                                                <NavLink\r\n                                                                                                    to={\r\n                                                                                                        groupUserName\r\n                                                                                                            ?\r\n                                                                                                            ROUTES.USER_PROFILE\r\n                                                                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                            :\r\n                                                                                                            ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                    }\r\n                                                                                                >\r\n                                                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">by {comment.author.firstName} {comment.author.lastName}</Typography>\r\n                                                                                                </NavLink>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Comment text */}\r\n                                                                                        <Typography style={{marginTop: 12}} variant=\"body1\" align=\"left\">{comment.comment}</Typography>\r\n\r\n                                                                                        {/** Reply button */}\r\n                                                                                        {\r\n                                                                                            (user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                && user.id === projectIssuer.id)\r\n                                                                                            || (\r\n                                                                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                && project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                                && user.anid === project.anid\r\n                                                                                            )\r\n                                                                                                ?\r\n                                                                                                <FlexView marginTop={25}>\r\n                                                                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                                        disabled={\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited === null\r\n                                                                                                        }\r\n                                                                                                        onClick={() => this.onToggleReplyToComment(comment, null)}\r\n                                                                                                    >Reply</Button>\r\n                                                                                                </FlexView>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Reply input area */}\r\n                                                                                        {\r\n                                                                                            replyingToComment !== null\r\n                                                                                            && replyingToComment.id === comment.id\r\n                                                                                            && replyEdited === null\r\n                                                                                                ?\r\n                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>\r\n                                                                                                            {reply.text}\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Delete/edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            // allow group admins that created this project,\r\n                                                                                                            // and issuer that created this project and owns this reply\r\n                                                                                                            // to edit/delete this reply\r\n                                                                                                            (\r\n                                                                                                                user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin)\r\n                                                                                                            )\r\n                                                                                                            && user.id === projectIssuer.id\r\n                                                                                                            && user.id === reply.repliedBy\r\n                                                                                                                ?\r\n                                                                                                                <FlexView marginTop={16}>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"secondary\" onClick={() => this.onDeleteCommentReply(reply)} style={{marginRight: 10}}>Delete<DeleteIcon fontSize=\"small\" style={{marginLeft: 6}}/>\r\n                                                                                                                    </Button>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"primary\" onClick={() => this.onToggleReplyToComment(comment, reply)}>Edit<EditIcon fontSize=\"small\" style={{marginLeft: 6}}/></Button>\r\n                                                                                                                </FlexView>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n\r\n                                                                                                        {/** Reply input area to edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited !== null\r\n                                                                                                            && replyEdited.id === reply.id\r\n                                                                                                                ?\r\n                                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                            )\r\n                                                                        ))\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                            )\r\n                                                            :\r\n                                                            user.type !== DB_CONST.TYPE_INVESTOR\r\n                                                                ?\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                    <FlexView marginTop={25} column hAlignContent=\"center\">\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\" fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                    && !investorSelfCertificationAgreement\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n\r\n                                                                        {\r\n                                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                                        }\r\n                                                                    </FlexView>\r\n                                                                </FlexView>\r\n                                                    )\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}} style={{marginTop: 40}}>\r\n\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    (\r\n                                                        comments.filter(comment => comment.commentedBy === user.id).length === 0\r\n                                                            ?\r\n                                                            <FlexView column>\r\n                                                                <Typography variant=\"subtitle1\" align=\"left\" style={{marginBottom: 25}}>This is your space to offer support and feedback to the issuer. Your identity will not be shared.</Typography>\r\n\r\n                                                                {/** Post a comment - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\"fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                    && !investorSelfCertificationAgreement\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n\r\n                                                                {/** Check investor's self certification status - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        this.renderInvestorSelfCertifyReminder()\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            <Typography variant=\"subtitle1\" align=\"left\">You have already commented on this investment opportunity. You can only edit your comment.</Typography>\r\n                                                    )\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" align=\"left\">All the comments from investors are displayed anonymously here.</Typography>\r\n                                            }\r\n\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Documents */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_DOCUMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Supporting documents</Typography>\r\n\r\n                                    {\r\n                                        project.Pitch.supportingDocuments && project.Pitch.supportingDocuments.findIndex(document => !document.hasOwnProperty('removed')) !== -1\r\n                                            ?\r\n                                            <DocumentsDownload documents={project.Pitch.supportingDocuments} shouldShowRiskWarningOnDownload={true}/>\r\n                                            :\r\n                                            <Typography variant=\"body1\" color=\"textSecondary\" style={{marginTop: 35}}>No supporting documents uploaded.</Typography>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Notes */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_NOTES\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Extra information</Typography>\r\n\r\n                                    {/** Financial round */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('financialRound')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Financial round the company is looking for:&nbsp;&nbsp;\r\n                                                    <b>\r\n                                                        {project.Pitch.financialRound}\r\n                                                    </b>\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** Prior investment */}\r\n                                    <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={40} vAlignContent=\"center\">\r\n                                        <Typography variant=\"body1\" align=\"left\">Prior investment raised:&nbsp;&nbsp;<b>\r\n                                                {\r\n                                                    project.Pitch.amountRaised === 0\r\n                                                        ?\r\n                                                        \"none\"\r\n                                                        :\r\n                                                        `£${Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()}`\r\n                                                }\r\n                                            </b>\r\n                                        </Typography>\r\n\r\n                                        {/*{*/}\r\n                                        {/*    project.Pitch.amountRaised === 0*/}\r\n                                        {/*        ?*/}\r\n                                        {/*        null*/}\r\n                                        {/*        :*/}\r\n                                        {/*        <Typography*/}\r\n                                        {/*            style={{marginTop: 30}}*/}\r\n                                        {/*            variant=\"body1\"*/}\r\n                                        {/*            align=\"left\"*/}\r\n                                        {/*        >*/}\r\n                                        {/*            Investors publicly committed:*/}\r\n                                        {/*            {*/}\r\n                                        {/*                !project.Pitch.investorsCommitted*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    <b>&nbsp;&nbsp; Not provided.</b>*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    <b>&nbsp;&nbsp; {project.Pitch.investorsCommitted}</b>*/}\r\n                                        {/*            }*/}\r\n                                        {/*        </Typography>*/}\r\n                                        {/*}*/}\r\n                                    </FlexView>\r\n\r\n                                    {/** How fund is being raised */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('howFundIsBeingRaised')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">How does the company plan to raise funds:  {project.Pitch.howFundIsBeingRaised}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                   \r\n                                        \r\n                                            \r\n                                    {\r\n                                        project.Pitch.hasSEIS === \"No\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Does this pitch have a SEIS badge: <b> {project.Pitch.hasSEIS}</b></Typography>\r\n                                            </FlexView>\r\n                                    }\r\n                                            \r\n                                    \r\n\r\n                                    \r\n                                    {\r\n                                        project.Pitch.hasEIS === \"No\"\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Does this pitch have a EIS badge: <b> {project.Pitch.hasEIS}</b></Typography>\r\n                                            </FlexView>\r\n                                    }\r\n                                    \r\n\r\n                                    \r\n                                    \r\n\r\n                                    {/** Details about earlier fundraising rounds */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Details about earlier fundraising rounds:<br/><br/> {project.Pitch.detailsAboutEarlierFundraisingRounds}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** QIB - special news */}\r\n                                    {\r\n                                        project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                        && (\r\n                                            (\r\n                                                (\r\n                                                    groupProperties\r\n                                                    && groupProperties.groupUserName === \"qib\"\r\n                                                )\r\n                                                && (\r\n                                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                                        && user.anid === groupProperties.anid)\r\n                                                    || (user.type === DB_CONST.TYPE_ISSUER\r\n                                                        && user.id === project.issuerID)\r\n                                                )\r\n                                            )\r\n                                            ||\r\n                                            (\r\n                                                !groupProperties\r\n                                                && user.type === DB_CONST.TYPE_ADMIN\r\n                                                && user.superAdmin\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Special news that Briony should talk about:\r\n                                                    <br/><br/>\r\n                                                    {project.Pitch.qibSpecialNews}\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Risk warning footer */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <RiskWarning/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Prevent the investors from interacting with the offer if they have not self-certified\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvestorSelfCertifyReminder = () => {\r\n        const {\r\n            groupUserName,\r\n            user,\r\n            investorSelfCertificationAgreement,\r\n            project\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_INVESTOR) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            utils.isProjectLive(project)\r\n            && !investorSelfCertificationAgreement\r\n                ?\r\n                <FlexView column marginTop={20}>\r\n                    <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot interact with this offer as you have not completed your self certification.</Typography>\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                `${ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName)}?tab=Profile`\r\n                                :\r\n                                `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Profile`\r\n                        }\r\n                        style={{\r\n                            marginTop: 4\r\n                        }}\r\n                    >\r\n                        <Typography variant=\"body2\"><u>Self certify</u></Typography>\r\n                    </NavLink>\r\n                </FlexView>\r\n                :\r\n                null\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Function to decide if information should be hidden or not\r\n     */\r\n    shouldHideInformation = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn\r\n        } = this.props;\r\n\r\n        // user is an admin\r\n        if (user.type === DB_CONST.TYPE_ADMIN) {\r\n            // user is a super admin\r\n            if (user.superAdmin) {\r\n                return false;\r\n            }\r\n\r\n            // user is a group admin and is the group that owns the project\r\n            if (user.anid === project.anid) {\r\n                return false;\r\n            }\r\n\r\n            // other group admins must go through the checks of project's visibility\r\n            switch (project.visibility) {\r\n                case DB_CONST.PROJECT_VISIBILITY_PUBLIC:\r\n                    return false;\r\n                case DB_CONST.PROJECT_VISIBILITY_RESTRICTED:\r\n                    return true;\r\n                case DB_CONST.PROJECT_VISIBILITY_PRIVATE:\r\n                    return true;\r\n                default:\r\n                    return true;\r\n            }\r\n        }\r\n        // user is not an admin\r\n        else {\r\n            // should not hide any information if the user is an issuer that created this offer\r\n            if (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID) {\r\n                return false;\r\n            }\r\n\r\n            // if somehow groupsUserIsIn is null, information must be hidden\r\n            if (!groupsUserIsIn) {\r\n                return true;\r\n            }\r\n\r\n            // if the project is not a restricted one, should not hide any information\r\n            if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_RESTRICTED) {\r\n                return false;\r\n            }\r\n\r\n            // user is not the member of the group that posted this offer --> hide information\r\n            // otherwise, should not hide information\r\n            return groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render the status for this project\r\n     */\r\n    renderProjectStatus = () => {\r\n        const {\r\n            project\r\n        } = this.props;\r\n\r\n        let stt = {text: '', color: ''};\r\n\r\n        if (utils.isProjectWaitingToGoLive(project)\r\n            || utils.isProjectRejectedToGoLive(project)\r\n            || utils.isProjectSuccessful(project)\r\n            || utils.isProjectFailed(project)\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} marginBottom={30}>\r\n                    <Typography variant=\"body1\" color=\"error\" align=\"left\">\r\n                        {\r\n                            utils.isProjectWaitingToGoLive(project)\r\n                                ?\r\n                                \"Offer is being checked.\"\r\n                                :\r\n                                utils.isProjectRejectedToGoLive(project)\r\n                                    ?\r\n                                    \"Offer has been rejected.\"\r\n                                    :\r\n                                    \"Offer closed.\"\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (project.PrimaryOffer) {\r\n            switch (project.PrimaryOffer.status) {\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pledge phase</Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.PrimaryOffer.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_EXPIRED:\r\n                    stt.text = \"Pledge has expired.\";\r\n                    stt.color = \"primary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (project.Pitch.status) {\r\n                case DB_CONST.PITCH_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pitch phase\r\n                            </Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.Pitch.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\"\r\n                            >days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER:\r\n                    stt.text = \"Awaiting pledge page to be created.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_REJECTED:\r\n                    stt.text = \"Offer failed as its pitch was rejected.\";\r\n                    stt.color = \"error\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN:\r\n                    stt.text = \"Pitch expired. Awaiting Group Admin review.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <FlexView marginTop={30} marginBottom={30}>\r\n                <Typography align=\"left\" variant=\"body1\" color={stt.color}>{stt.text}</Typography>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Check whether voting should be disabled or not\r\n     */\r\n    shouldVoteDisabled = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn,\r\n            investorSelfCertificationAgreement\r\n        } = this.props;\r\n\r\n        // do not let the owner of the pitch vote for themselves\r\n        // also, do not let the admin vote the pitch\r\n        if (project.issuerID === firebase.auth().currentUser.uid\r\n            || user.type === DB_CONST.TYPE_ADMIN\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        if (!groupsUserIsIn) {\r\n            return true;\r\n        }\r\n\r\n        // user is not in the group that posted the offer\r\n        if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n            && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        // do not let investors who haven't uploaded self-certification vote\r\n        if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (!investorSelfCertificationAgreement) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // do not let issuers vote\r\n        if (user.type === DB_CONST.TYPE_ISSUER) {\r\n            return true;\r\n        }\r\n\r\n        // do not allow investors to vote when the Pitch has expired\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING) {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Displaying votes (number or percentage depending on the type of user who is viewing it)\r\n     *\r\n     * If an investor is viewing it, percentage should be displayed.\r\n     *\r\n     * If an issuer or admin is viewing it, number should be displayed.\r\n     */\r\n    displayVote = type => {\r\n        const {\r\n            // user,\r\n            votes\r\n        } = this.props;\r\n\r\n        let yesVotes = 0;\r\n        let noVotes = 0;\r\n\r\n        votes.forEach(vote => {\r\n            const voted = vote.voted;\r\n            if (voted !== '') {\r\n                if (voted) {\r\n                    yesVotes += 1;\r\n                } else {\r\n                    noVotes += 1;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (type) {\r\n            return yesVotes;\r\n        } else {\r\n            return noVotes\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Get investor vote\r\n *\r\n * @param votes\r\n * @param user\r\n * @returns {null|*}\r\n */\r\nconst getInvestorVote = (votes, user) => {\r\n    if (votes.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    let investorVoteIndex = votes.findIndex(vote => vote.investorID === user.id);\r\n    // investor has voted\r\n    if (investorVoteIndex !== -1) {\r\n        return votes[investorVoteIndex];\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * Comment dialog - displayed when the Investor clicks on the Comment button\r\n */\r\nclass CommentDialog extends Component {\r\n\r\n    onClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onCommentTextChanged = event => {\r\n        this.props.onCommentTextChanged(event);\r\n    };\r\n\r\n    onSubmitCommentClick = () => {\r\n        this.props.onSubmitCommentClick();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            open,\r\n            project,\r\n            commentText,\r\n            commentSubmitClick\r\n        } = this.props;\r\n\r\n        if (!project) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Dialog fullWidth open={open} onClose={this.onClose}>\r\n                <DialogTitle>Make a comment</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText align=\"left\">Please enter your comment here.</DialogContentText>\r\n                    <InputBase error={commentText.trim().length === 0 && commentSubmitClick} name=\"commentText\" value={commentText} onChange={this.onCommentTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                </DialogContent>\r\n                <DialogActions style={{paddingTop: 20, paddingBottom: 20, paddingRight: 24}}>\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onClose}>Cancel</Button>\r\n                    <Button disabled={commentText.trim().length > 0 && commentSubmitClick} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" onClick={this.onSubmitCommentClick}>Post comment</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Reply input area\r\n */\r\nclass CommentReplyInputArea extends Component {\r\n\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            replyText\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column marginTop={30} width=\"auto\">\r\n                <InputBase name=\"replyText\" value={replyText} onChange={this.onTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                <FlexView marginTop={18} width=\"100%\" hAlignContent=\"right\">\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" className={css(sharedStyles.no_text_transform)} onClick={() => this.onToggleReplyToComment(null, null)}>Cancel</Button>\r\n                    <Button disabled={replyText.trim().length === 0} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={this.onSubmitCommentReply}>Submit</Button>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectDetailsMain);\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    gray_text: {\r\n        color: colors.gray_700\r\n    },\r\n\r\n    faq_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none',\r\n        backgroundColor: colors.white,\r\n        marginBottom: 12,\r\n        ':hover': {\r\n            backgroundColor: colors.gray_50\r\n        }\r\n    },\r\n\r\n    border_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 14\r\n    },\r\n\r\n    admin_state_control_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 24,\r\n        backgroundColor: colors.gray_100\r\n    },\r\n\r\n    sticky_body_sections_bar: {\r\n        position: \"sticky\",\r\n        top: 0,\r\n        backgroundColor: colors.white,\r\n        zIndex: 1\r\n    },\r\n\r\n    main_body_section: {\r\n        minHeight: 600,\r\n        padding: 15,\r\n        backgroundColor: colors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass PrivacyPolicyPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Privacy policy\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.privacyPolicy\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.privacyPolicy.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PrivacyPolicyPage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass TermsOfUsePage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Terms of use\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.termsOfUse\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.termsOfUse.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(TermsOfUsePage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass RiskWarningPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row noGutters>\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Risk warning\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row noGutters>\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.riskWarning\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.riskWarning.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarningPage);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass CreatePitchTermsAndConditionsPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Row noGutters style={{backgroundColor: colors.gray_100}}>\r\n                                    <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}} style={{paddingTop: 30, paddingBottom: 30, paddingLeft: 12, paddingRight: 12}}>\r\n                                        <Typography variant=\"h5\" align=\"left\">\r\n                                            <b>{\"Create pitch terms and conditions\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.createPitchTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.createPitchTermsAndConditions.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CreatePitchTermsAndConditionsPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    FormLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\nconst subjects = [\r\n    \"I am an investor\",\r\n    \"I am looking to raise funds\",\r\n    \"I am a potential partner or supplier\",\r\n    \"Other query\"\r\n];\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authenticating: state.auth.authenticating,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    email: '',\r\n    subject: '-',\r\n    name: '',\r\n    phone: '',\r\n    description: '',\r\n\r\n    submitClick: false,\r\n    sending: false,\r\n    error: false,\r\n\r\n    hasSetData: false\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...initState\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.CONTACT_US : ROUTES.CONTACT_US_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Submit button is clicked\r\n     */\r\n    onSubmitClick = event => {\r\n        event.preventDefault();\r\n\r\n        const {\r\n            clubAttributes,\r\n            groupProperties,\r\n\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description\r\n        } = this.state;\r\n\r\n        if (email.trim().length === 0\r\n            || subject === \"-\"\r\n            || name.trim().length === 0\r\n            || description.trim().length === 0\r\n        ) {\r\n            this.setState({\r\n                submitClick: true\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sending: true\r\n        });\r\n\r\n        let groupID = groupProperties ? groupProperties.anid : \"InvestWestSupport\";\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_ENQUIRY,\r\n                data: {\r\n                    sender: email.toLowerCase(),\r\n                    receiver: groupID,\r\n                    subject,\r\n                    description,\r\n                    senderName: name,\r\n                    senderPhone: phone\r\n                }\r\n            })\r\n            .then(() => {\r\n                this.setState({\r\n                    ...initState\r\n                });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Your email has been successfully sent.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n\r\n                realtimeDBUtils\r\n                    .logContactUsEnquiry({\r\n                        userID: user ? user.id : null,\r\n                        anid: !groupProperties ? \"Invest West super admin\" : groupProperties.anid,\r\n                        email: email.toLowerCase(),\r\n                        name,\r\n                        phone,\r\n                        subject,\r\n                        description\r\n                    })\r\n                    .then(enquiryID => {\r\n                        // track activity for authenticated user\r\n                        if (user) {\r\n                            realtimeDBUtils\r\n                                .trackActivity({\r\n                                    userID: user.id,\r\n                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                    interactedObjectLocation: DB_CONST.CONTACT_US_ENQUIRIES_CHILD,\r\n                                    interactedObjectID: enquiryID,\r\n                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY.replace(\"%group%\", groupProperties.displayName)\r\n                                });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    error: true,\r\n                    sending: false\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            authenticating,\r\n            userLoaded,\r\n            clubAttributesLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description,\r\n            submitClick,\r\n            sending\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    marginTop={30}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={colors.primaryColor}\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || !clubAttributesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    marginTop={20}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <Row noGutters style={{padding: 14}}>\r\n                    <Col xs={12} sm={12} md={{span: 11, offset: 1}} lg={{span: 5, offset: 2}}>\r\n                        <form onSubmit={this.onSubmitClick}>\r\n                            <FlexView column marginTop={40}>\r\n                                <Typography variant=\"h4\">\r\n                                    <b>Contact Us</b>\r\n                                </Typography>\r\n\r\n                                <FlexView width=\"100%\" marginTop={40}>\r\n                                    <FormControl fullWidth required error={submitClick && email.trim().length === 0}>\r\n                                        <FormLabel> Your email address</FormLabel>\r\n                                        <TextField value={email} name=\"email\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && email.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth required error={submitClick && subject === \"-\"}>\r\n                                        <FormLabel>\r\n                                            Subject\r\n                                        </FormLabel>\r\n                                        <Select name=\"subject\" value={subject} variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} input={<OutlinedInput/>} error={submitClick && subject === \"-\"} >\r\n                                            <MenuItem value={\"-\"} key={-1}>\r\n                                                -\r\n                                            </MenuItem>\r\n                                            {\r\n                                                subjects.map((subject, index) => (\r\n                                                    <MenuItem\r\n                                                        value={subject}\r\n                                                        key={index}\r\n                                                    >\r\n                                                        {subject}\r\n                                                    </MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Name\r\n                                        </FormLabel>\r\n                                        <TextField value={name} name=\"name\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && name.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Phone number\r\n                                        </FormLabel>\r\n                                        <TextField value={phone} name=\"phone\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n                            </FlexView>\r\n\r\n                            <FlexView width=\"100%\" marginTop={25}>\r\n                                <FormControl fullWidth required error={submitClick && description.trim().length === 0}>\r\n                                    <FormLabel>\r\n                                        Description\r\n                                    </FormLabel>\r\n                                    <TextField value={description} name=\"description\" variant=\"outlined\" margin=\"dense\" multiline rows={5} rowsMax={5} onChange={this.onTextChanged} error={submitClick && description.trim().length === 0}/>\r\n                                    <FormHelperText>\r\n                                        Please enter the details of your request. A member of our support team will respond as soon as possible.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {\r\n                                sending\r\n                                    ?\r\n                                    <FlexView marginTop={30} width=\"100%\" hAlignContent=\"center\">\r\n                                        <HashLoader\r\n                                            color={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            <Row\r\n                            >\r\n                                <Col xs={12} sm={12} md={4} lg={4} style={{width: \"100%\", marginTop: 50}}>\r\n                                    <FormControl fullWidth>\r\n                                        <Button type=\"submit\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} color=\"primary\" fullWidth>\r\n                                            Submit\r\n                                        </Button>\r\n                                    </FormControl>\r\n                                </Col>\r\n                            </Row>\r\n                        </form>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Footer/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactUs);","import React, {Component} from 'react';\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Paper,\r\n    Tab,\r\n    Tabs,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport RestrictedIcon from '@material-ui/icons/VpnLock';\r\nimport PrivateIcon from '@material-ui/icons/LockOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ContactSupportIcon from '@material-ui/icons/ContactSupport';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork())\r\n    }\r\n};\r\n\r\nclass HelpPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            helpType: DB_CONST.TYPE_INVESTOR,\r\n            autoSwitching: true,\r\n            expandedPanel: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.HELP : ROUTES.HELP_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        this.autoSwitchToAppropriateHelpTab();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.autoSwitchToAppropriateHelpTab();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Switch to the appropriate Help tab based on user's type\r\n     */\r\n    autoSwitchToAppropriateHelpTab = () => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            helpType,\r\n            autoSwitching\r\n        } = this.state;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            // when the user just opened this Help page\r\n            // detect if the type of the user to automatically switch the Help tab\r\n            // this should only happen once\r\n            if (user.type !== helpType) {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        helpType: user.type,\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            } else {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle tab changed\r\n     *\r\n     * @param event\r\n     * @param newValue\r\n     */\r\n    handleTabChanged = (event, newValue) => {\r\n        this.setState({\r\n            helpType: newValue,\r\n            expandedPanel: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle panel changed\r\n     *\r\n     * @param panel\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    handleExpandPanel = panel => (event, isExpanded) => {\r\n        this.setState({\r\n            expandedPanel: isExpanded ? panel : false\r\n        });\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            helpType\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !user\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingBottom: 50}}>\r\n                <Row noGutters style={{marginTop: 40, marginBottom: 60}}>\r\n                    <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}}>\r\n                        <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20}>\r\n                            <ContactSupportIcon\r\n                                style={{\r\n                                    fontSize: \"7em\",\r\n                                    color:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}\r\n                            />\r\n                        </FlexView>\r\n                        <Typography variant=\"h4\" align=\"center\" color=\"primary\">\r\n                            How can we help you?\r\n                        </Typography>\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" marginTop={40}>\r\n                                    <Paper elevation={2} style={{width: \"100%\"}}>\r\n                                        <Tabs indicatorColor=\"primary\" textColor=\"primary\" variant=\"fullWidth\" value={helpType} onChange={this.handleTabChanged}>\r\n                                            <Tab value={DB_CONST.TYPE_INVESTOR} label=\"Investor\" className={css(sharedStyles.no_text_transform)}/>\r\n                                            <Tab value={DB_CONST.TYPE_ISSUER} label=\"Issuer\" className={css(sharedStyles.no_text_transform)}/>\r\n                                        </Tabs>\r\n                                    </Paper>\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    user.type === DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        this.renderGroupAdminHelp()\r\n                        :\r\n                        helpType === DB_CONST.TYPE_INVESTOR\r\n                            ?\r\n                            this.renderInvestorHelp()\r\n                            :\r\n                            this.renderIssuerHelp()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render group admin help\r\n     */\r\n    renderGroupAdminHelp = () => {\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n        /** Group admin guide  */\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_navigating_invest_west'} onChange={this.handleExpandPanel('group_admin_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                    Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                    tutorial showing the key functions of the site.\r\n                                </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the “My dashboard” button at the top right of the page. This will take you to your unique dashboard where you can access all the site’s functions.</Typography>\r\n                                    <img alt=\"group_admin_help_my_dashboard\" src={require(\"../../img/group_admin_help_my_dashboard.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons; home, settings, change password, audit log, explore offers, explore groups, forums, help and logout</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/group_admin_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView\r\n                                    column\r\n                                >\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your group. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"group_admin_help_notifications\" src={require(\"../../img/group_admin_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Home page */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.4. Home page</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The home page will display all the group management functions, from this page you can manage group members, manage access requests to your group, manage the group’s offers and manage group admins.</Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Manage group users */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_user_management'} onChange={this.handleExpandPanel('group_admin_help_user_management')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. User management\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The manage group members tab is used to manage exiting members, invite new users and view details of the group’s users. To access this function, click on the ‘manage group members’ tab from the home page. From this section you can view all user's names, emails, user types, the date invited/requested to join, registration status and the date they registered.</Typography>\r\n                                <img alt=\"group_admin_help_user_management\" src={require(\"../../img/group_admin_help_user_management.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Inviting a new user */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Inviting a new user</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage group members tab you can invite a new user. You will need the users title, first name, last name, email and user type. To invite a new user, click on the ‘Invite new user’ button.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_01\" src={require(\"../../img/group_admin_help_inviting_a_new_user_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">After clicking the button, enter the user’s details and select Issuer or Investor. An Issuer is a business owner or entrepreneur who will create their own offer. An Investor is someone who is looking to invest in offers and will view offers. Click the ‘send’ button to send the invite to the user’s email. If the user does not receive the invitation, you can resend the invite (see resending invites in section 2.2). You may need to ask users to check their junk or spam folder.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_02\" src={require(\"../../img/group_admin_help_inviting_a_new_user_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Resending invites */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Resending invites</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage group members tab you can resend invites to users who have previously been invited but have not yet registered.  Once in the invitation and registrations tab select the user who has already been invited and click on the ‘resend’ button. Please remind any user who has not received their invites to check their junk or spam folders in their email account.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_03\" src={require(\"../../img/group_admin_help_inviting_a_new_user_03.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 3. Manage access requests */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_access_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_access_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Manage access requests\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The access request tab is used to accept or reject investors from joining your group. Other users on the platform can request to join your group to gain access to your group’s offers. Click on the ‘access requests’ tab and this will show any pending requests, from there you can accept or reject individual requests.</Typography>\r\n                                <img alt=\"group_admin_help_manage_access_requests\" src={require(\"../../img/group_admin_help_manage_access_requests.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 4. Manage group members */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_group_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Manage group members\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>To manage all members in your group, click ‘manage group members’ from the home page. The user management page allows you to view and modify group members information; be aware you can only edit the information for invited group members and not external group members who joined the group through an access request.  To view a user’s information/activity or edit their details click on their name in the list or alternatively you can search by email address.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_requests\" src={require(\"../../img/group_admin_help_manage_group_members.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>If a user needs to be blocked or removed from the platform, please contact us support@investwest.online for assistance.</Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Manage offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_offers'} onChange={this.handleExpandPanel('group_admin_help_manage_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Manage offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>From the manage offers tab, you can view and edit all your group’s offers. The dropdown will show the offers title, its creator, its fundraising goal, and status.</Typography>\r\n\r\n                                {/** Viewing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Viewing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view an offer, open the manage offers tab and click on the title of the offer or you can also search for an offer by name.</Typography>\r\n                                    <img alt=\"group_admin_help_viewing_an_offer\" src={require(\"../../img/group_admin_help_viewing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Accepting and rejecting an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Accepting and rejecting an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>The Invest West process starts with an issuer creating an offer. The new offer will appear in your manage offers table, the bell icon will also notify you that an offer requires your attention. Newly submitted offers show a status of ‘Submitted. Awaiting group admin review’. From this section you can view each offer by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer\" src={require(\"../../img/group_admin_help_accept_reject_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>To accept or reject the offer scroll down to the bottom of the page and click on the control phases tab. From here you can change the offers default visibility (see what the different levels of visibility mean in section 10.1) as well as accept or reject the offer.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer_2\" src={require(\"../../img/group_admin_help_accept_reject_2_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Editing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a group admin you can edit an offer’s details if necessary. This can be done in the manage offers tab. To edit an offer, you first need to view it by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_01\" src={require(\"../../img/group_admin_help_edit_offer_01.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        Then you can click on the edit button on the \"Edit offer\" button.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_02\" src={require(\"../../img/group_admin_help_edit_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Temporarily closing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.4. Temporarily closing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a group admin you can temporarily close any offer (stop it being visible to any users). This can be done in the manage offers tab. Select the title of the offer (see viewing an offer in section 5.1), scroll down the bottom of the page, then click on control phases tab and press the ‘Close temporally’ button.</Typography>\r\n                                    <img alt=\"group_admin_help_temporarily_closing_an_offer\" src={require(\"../../img/group_admin_help_temporarily_closing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Reopening a temporarily closed offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.5. Reopening a temporarily closed offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        If an offer has been temporally closed (see temporarily closing an offer in\r\n                                        section 5.4), it can be re-opened. This can be done in the manage investment\r\n                                        opportunities tab. Select the title of the offer (see viewing an offer in\r\n                                        section 5.1), from here scroll down the bottom of the page, then click on\r\n                                        control phases tab and press the \"Open again\" button. Please note, an offer can\r\n                                        only be re-opened if it is temporarily closed.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_reopening_a_temporarily_closed_offer\" src={require(\"../../img/group_admin_help_reopening_a_temporarily_closed_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Manage group admins */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_admins'} onChange={this.handleExpandPanel('group_admin_help_manage_group_admins')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Manage group admins\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">This page allows you to add another Group Admin to the Group. Please be advised, only add group admins if essential as each new admin will have full administer rights to the group. To add a group admin, click on the ‘mange group admins’ tab, then click on the ‘Add new group admin’ button and enter their email address and click the ‘Add’ button.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_admins\" src={require(\"../../img/group_admin_help_manage_group_admins.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 7. Explore offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_offers'} onChange={this.handleExpandPanel('group_admin_help_explore_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Exploring offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore offers made by other issuers click on the “Explore offers” button in the navigation bar. This page provides a view how Investors view offers. This page can also be used to give issuers and group admins an idea of how offers are structured.</Typography>\r\n                                <img alt=\"group_admin_help_explore_offers\" src={require(\"../../img/group_admin_help_explore_offers.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Explore groups */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_groups'} onChange={this.handleExpandPanel('group_admin_help_explore_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the “Explore groups” button in the navigation bar. </Typography>\r\n                                <img alt=\"group_admin_help_explore_groups\" src={require(\"../../img/group_admin_help_explore_groups.png\").default} className={css(styles.image_style)}\r\n                                />\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 9. Resources */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_resources'} onChange={this.handleExpandPanel('group_admin_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    9. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore resource on Invest West, click on the “Resources” button in the navigation bar. From this page you can view a range of information and services applicable to you and your users.</Typography>\r\n                                <img alt=\"group_admin_help_resources\" src={require(\"../../img/group_admin_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 10. Settings */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'group_admin_help_settings'} onChange={this.handleExpandPanel('group_admin_help_settings')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    10. Settings\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The settings page allows you to configure the groups settings. This page allows you to add a group description, change the group’s website, alter the colour scheme, manage the default visibility of the group, configure issuer settings and edit the groups FAQ’s. This page can be accessed by clicking on the ‘settings’ button in the navigation bar. To view the groups details from the perspective of an external user not in your group click on the ‘View groups public page’ button.</Typography>\r\n                                <img alt=\"group_admin_help_settings\" src={require(\"../../img/group_admin_help_settings.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Visibility level */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>10.1. Visibility level</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>As the group admin you can set the visibility level for offers created by your Group. With Invest west having multiple groups the level of visibility is used to define which of the group’s investment opportunities are visible to other users.</Typography>\r\n\r\n                                    {/** Public */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.1. Public</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting “Public” allows all Invest West users (including users who are not a member of your group) to see an offer’s full details and also interact with the offer. Here is an example of a public offer, where all information on the offer is visible.</Typography>\r\n                                        <img alt=\"group_admin_help_public_offer\" src={require(\"../../img/group_admin_help_public_offer.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>When an offer is public all investors can also see the offers campaign, pitch deck, documents, comments and extra information.</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {/** Restricted */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.2. Restricted</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting “Restricted” allows all Invest West users (including users who are not a member of your group) to see the offer’s basic information only. Only member of your group will be able to see the offer’s full details. Here is an example of the same offer as above but restricted. Investors who are not members of your group will not be able to see the offers campaign, pitch deck, documents, comments or extra information. If they want to see this, they will be prompted to join your group.</Typography>\r\n                                        <img alt=\"group_admin_help_restricted_offer\" src={require(\"../../img/group_admin_help_restricted_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n\r\n                                    {/** Private */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.3. Private</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            Private allows only members of your group to see the offer's information. No\r\n                                            external user will be able to view the offer.\r\n                                        </Typography>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 11. Audit log */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_audit_log'} onChange={this.handleExpandPanel('group_admin_help_audit_log')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    11. Audit log\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The Audit Log is used to monitor all the activities made by the admins of the group.</Typography>\r\n                                <img alt=\"group_admin_help_audit_log\" src={require(\"../../img/group_admin_help_audit_log.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 12. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_password'} onChange={this.handleExpandPanel('group_admin_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    12. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the “Forgot your password?” button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                <img alt=\"group_admin_help_password\" src={require(\"../../img/group_admin_help_password.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Changing password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\">\r\n                                        <b>12.1. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To change your password, click on the \"Change password\" button in the navigation\r\n                                        bar. You will need to enter your old password then your new password twice.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_change_password\" src={require(\"../../img/group_admin_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 13. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_logging_out'} onChange={this.handleExpandPanel('group_admin_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    13. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"group_admin_help_logging_out\" src={require(\"../../img/group_admin_help_logging_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render investor help\r\n     */\r\n    renderInvestorHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_navigating_invest_west'} onChange={this.handleExpandPanel('investor_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>Welcome to Invest West, we are excited to work with you. Here is a basic tutorial showing the key functionalities of the site. </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">When you have logged in you can view your dashboard by clicking the “My dashboard” button at the top right of the page. This will take you to your unique dashboard where you can access all the site’s functionality.</Typography>\r\n                                    <img alt=\"investor_help_my_dashboard\" src={require(\"../../img/investor_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons home, profile button, my pledges, change password, explore groups, forums button, the contact us button, help and the logout button.</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/investor_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"investor_help_notifications\" src={require(\"../../img/investor_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_offers'} onChange={this.handleExpandPanel('investor_help_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. Offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The home page will display all the offers available to you, and their relevant information.</Typography>\r\n\r\n                                {/** Viewing offers */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Viewing offers</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">To view and interact with an offer, you need to click on that offer. The Icon at the bottom right of each tile shows the visibility of the offer. There are three visibility settings\r\n                                        <br/><br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                <PublicIcon style={{marginRight: 8}}/>\r\n                                                Public offers are viewable to all investors on the system,\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <RestrictedIcon style={{marginRight: 8}}/>\r\n                                                Restricted offers are publicly viewable but with limited information\r\n                                                and\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <PrivateIcon style={{marginRight: 8}}/>\r\n                                                Private offers are only viewable to investors that belong to the\r\n                                                same group as the offer.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                 {/** Viewing the campaign */}\r\n                                 <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Viewing the campaign</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1), the information about the offer can be found down the page. You can see the campaign, attached documents, comments and see any extra information. To see the campaign, scroll down to the bottom of the page and click on “campaign” tab, this will contain the campaign information in the form of text or a document; click on the document to download it.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers_campaign.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Commenting on an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Commenting on an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1) you can comment on that offer. Comments are public and all users can view them. To make a comment navigate to the comments section at the bottom of the offer page and click on the “investor comments” button.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_pitch_phase_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography><b>Note: You cannot interact with an offer until you have completed your self-certification form. See 5.3.</b></Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.4. Contacting the fundraiser</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an offer (see viewing offers in section 2.1) you can contact the fundraiser by clicking the “Contact us” button on the right hand side of the page.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_contacting_fundraiser.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography><b>Note: You cannot interact with an offer until you have completed your self-certification form. See 5.3.</b></Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'investor_help_exploring_groups'} onChange={this.handleExpandPanel('investor_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups and request to join them by clicking on the “Explore groups” button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_exploring_groups\" src={require(\"../../img/investor_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                       {/** 4. Resources */}\r\n                       <ExpansionPanel expanded={expandedPanel === 'investor_help_resources'} onChange={this.handleExpandPanel('investor_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resources on Invest West, click on the “Resources” button in the navigation bar. From this page you can view a range of content for investors, business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"investor_help_resources\" src={require(\"../../img/investor_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Your profile */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_your_profile'} onChange={this.handleExpandPanel('investor_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and complete your self-certification form. To access your profile page, click on the “Profile” button in the navigation bar. You need to complete your self-certification form to interact with any offer.</Typography>\r\n                                    <img alt=\"investor_help_profile\" src={require(\"../../img/investor_help_profile.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add your LinkedIn account by inserting a URL to your LinkedIn profile in, don’t forget to click the save button after you make any changes. You can also update your profile picture by clicking on the “update profile picture” button and attaching a photo. To view how users will see your profile click on the “view my public profile” button in the top right-hand side of the profile page.</Typography>\r\n                                    <img alt=\"investor_help_editing_your_profile\" src={require(\"../../img/investor_help_editing_your_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Setting up a business profile is optional, to do this you need to click on the “I want to upload my business profile” button.</Typography>\r\n                                    <img alt=\"investor_help_setting_up_business_profile\" src={require(\"../../img/investor_help_setting_up_business_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Self-certification */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Self-certification</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">All Invest West users must complete a self-certification form. You can do this in the bottom of the “Profile” page. Select the appropriate statement for your circumstances from the drop-down box and read the full statement carefully. You will be prompted to recertify every 12 months.</Typography>\r\n                                    <img alt=\"investor_help_self_certification\" src={require(\"../../img/investor_help_self_certification.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_password'} onChange={this.handleExpandPanel('investor_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph\r\n                                    >\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the “Forgot your password?” button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"investor_help_reset_password\" src={require(\"../../img/investor_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password click on the “Change password” button in the navigation bar. You will need to enter your old password then your new password twice. If you don’t know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"investor_help_change_password\" src={require(\"../../img/investor_help_change_password.png\").default}  className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                   {/** 7. Support */}\r\n                   <ExpansionPanel expanded={expandedPanel === 'investor_help_support'} onChange={this.handleExpandPanel('investor_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the “contact us” button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_support_01\" src={require(\"../../img/investor_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the “contact us” button at the top right of the page.</Typography>\r\n                                <img alt=\"investor_help_support_02\" src={require(\"../../img/investor_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_logging_out'} onChange={this.handleExpandPanel('investor_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"investor_help_log_out\" src={require(\"../../img/investor_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render issuer help\r\n     */\r\n    renderIssuerHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row\r\n                noGutters\r\n                style={{\r\n                    marginBottom: 50\r\n                }}\r\n            >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_navigating_invest_west'} onChange={this.handleExpandPanel('issuer_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                        tutorial showing the key functions of the site.\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the “My dashboard” button at the top right of the page. This will take you to your unique dashboard where you can access all the site’s functionality. The home page will display all the offers on Invest West.</Typography>\r\n                                    <img alt=\"issuer_help_my_dashboard\" src={require(\"../../img/issuer_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can get around using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three white lines. On the navigation bar there are nine main buttons; home, profile, change password, explore offers, explore groups, forums, contact us, help and the logout.</Typography>\r\n                                    <img alt=\"issuer_help_navigation_bar\" src={require(\"../../img/issuer_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"issuer_help_notifications\" src={require(\"../../img/issuer_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                         {/** 2. My offers */}\r\n                         <ExpansionPanel expanded={expandedPanel === 'issuer_help_my_offers'} onChange={this.handleExpandPanel('issuer_help_my_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. My offers\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Creating a new offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Creating a new offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        You need to set up a business profile before you can create your first offer (see setting up your business profile in section 5.2). \r\n                                        <br/><br/>\r\n                                        To create a new offer, click on the “start a new offer” button located at the top left of the home page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_01\" src={require(\"../../img/issuer_help_create_new_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you have clicked this button you will be taken to the five-step process for creating your offer, the sections marked with an Asterix are mandatory and must be filled out. You can save your funding round at any point and return to edit it later by clicking the “save” button located at the bottom right of the page.</Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_02\" src={require(\"../../img/issuer_help_create_new_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you submit your offer you will be notified that it has been successfully uploaded. It will not be published until it has been checked and approved by your Group Administrator. You will be notified once your offer is approved (or rejected). If your offer is rejected, you will get an email with feedback from your Group Administrator.</Typography>\r\n                                </FlexView>\r\n\r\n                                <br/>\r\n\r\n                                {/** Managing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Managing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">You can manage your offers from the My offers page, to view and edit an offer click on the offers title.</Typography>\r\n                                    <img alt=\"issuer_help_manage_offer\" src={require(\"../../img/issuer_help_manage_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                                    <br/>\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Editing an offer</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To edit your offer, click on the \"Edit offer\" button on the offer’s main page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_edit_offer\" src={require(\"../../img/issuer_help_edit_offer.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    {/** Replying to comments */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            <b>2.3.1. Replying to comments</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">If an investor comments on your offer you will be notified via the bell icon.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_01\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\">From the offer’s main page scroll down and click on the “Investor comments” tab, then click on the “reply” button to reply to the selected comment.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_02\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'issuer_help_exploring_groups'} onChange={this.handleExpandPanel('issuer_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the “Explore offers” button in the navigation bar. From this page you can click on specific groups to see the groups details.</Typography>\r\n                                <img alt=\"issuer_help_exploring_groups\" src={require(\"../../img/issuer_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 4. Resources */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_resources'} onChange={this.handleExpandPanel('issuer_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resource on Invest West, click on the “Resources” button in the navigation bar. From this page you can view a range of content for business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"issuer_help_resources\" src={require(\"../../img/issuer_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 5. Your profile */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_your_profile'} onChange={this.handleExpandPanel('issuer_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and upload formal documents. To access your profile page, click on the “Profile” button in the navigation bar. You need to set up a business profile before you can create your first offer.</Typography>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add in your LinkedIn account by inserting a URL to your LinkedIn profile, don’t forget to click the save button after you make any changes. You can also update your profile picture by clicking on the “update profile picture” button and attaching a photo.</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_01\" src={require(\"../../img/issuer_help_edit_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view how investors will see your profile click on the “view my public profile” button in the top right-hand side of the profile page</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_02\" src={require(\"../../img/issuer_help_edit_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To take part in invest west activities you will need to set up your business profile. To set this up go to the profile page and scroll down to the “business profile” section. You will need to fill out all fields with a *.\r\n                                        <br/><br/>\r\n                                        You can enter your registered office manually or search for your address by entering the postcode. The trading address is automatically set to the same as the registered address, if this is not the case for your business uncheck the box and enter in your trading address.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_01\" src={require(\"../../img/issuer_help_setting_business_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">When adding a director click the “add director” button, type their full name in the box provide and then click the “add” button. You must have multiple directors, but you need a minimum of one. Once all the mandatory fields have been completed the “Save” button will become available and you can click this button to finish setting up your business profile.</Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_02\" src={require(\"../../img/issuer_help_setting_business_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_password'} onChange={this.handleExpandPanel('issuer_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the “Forgot your password?” button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"issuer_help_reset_password\" src={require(\"../../img/issuer_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password, click on the “Change password” button in the navigation bar. You will need to enter your old password then your new password twice. If you don’t know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"issuer_help_change_password\" src={require(\"../../img/issuer_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 7. Support */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_support'} onChange={this.handleExpandPanel('issuer_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the “contact us” button in the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_support_01\" src={require(\"../../img/issuer_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the “contact us” button at the top right of the page.</Typography>\r\n                                <img alt=\"issuer_help_support_02\" src={require(\"../../img/issuer_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    \r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_logging_out'} onChange={this.handleExpandPanel('issuer_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To logout press the “logout” button at the bottom of the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_log_out\" src={require(\"../../img/issuer_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HelpPage);\r\n\r\nconst styles = StyleSheet.create({\r\n    image_style: {\r\n        objectFit: \"contain\"\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport React, {FormEvent} from \"react\";\r\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\n\r\nexport enum SignInEvents {\r\n    ResetAllStates = \"SignInEvents.ResetAllStates\",\r\n    TextChanged = \"SignInEvents.TextChanged\",\r\n    TogglePasswordVisibility = \"SignInEvents.TogglePasswordVisibility\",\r\n    SignInEmailError = \"SignInEvents.SignInEmailError\",\r\n    SignInPasswordError = \"SignInEvents.SignInPasswordError\",\r\n    ClearErrors = \"SignInEvents.ClearErrors\",\r\n    ToggleResetPasswordDialog = \"SignInEvents.ToggleResetPasswordDialog\",\r\n    ProcessingResetPasswordRequest = \"SignInEvents.ProcessingResetPasswordRequest\",\r\n    CompleteProcessingResetPasswordRequest = \"SignInEvents.CompleteProcessingResetPasswordRequest\"\r\n}\r\n\r\nexport interface SignInAction extends Action {\r\n}\r\n\r\nexport interface TextChangedAction extends SignInAction {\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport interface CompleteProcessingResetPasswordRequestAction extends SignInAction {\r\n    error?: string;\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: TextChangedAction = {\r\n            type: SignInEvents.TextChanged,\r\n            name: event.target.name,\r\n            value: event.target.value\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const togglePasswordVisibility: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: SignInEvents.TogglePasswordVisibility\r\n        });\r\n    }\r\n}\r\n\r\nexport const onSignInClick: ActionCreator<any> = (event: FormEvent) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            signInEmail,\r\n            signInPassword\r\n        } = getState().SignInLocalState;\r\n\r\n        event.preventDefault();\r\n\r\n        dispatch({\r\n            type: SignInEvents.ClearErrors\r\n        });\r\n\r\n        const email: string = signInEmail.trim().toLowerCase();\r\n        const password: string = signInPassword;\r\n\r\n        let allowSignIn: boolean = true;\r\n\r\n        if (email.length === 0) {\r\n            dispatch({\r\n                type: SignInEvents.SignInEmailError\r\n            });\r\n            allowSignIn = false;\r\n        }\r\n\r\n        if (password.length === 0) {\r\n            dispatch({\r\n                type: SignInEvents.SignInPasswordError\r\n            });\r\n            allowSignIn = false;\r\n        }\r\n\r\n        if (!allowSignIn) {\r\n            return;\r\n        }\r\n\r\n        return dispatch(signIn(email, password));\r\n    }\r\n}\r\n\r\nexport const toggleResetPasswordDialog: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: SignInEvents.ToggleResetPasswordDialog\r\n        });\r\n    }\r\n}\r\n\r\nexport const onSendResetPasswordClick: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: SignInEvents.ProcessingResetPasswordRequest\r\n        });\r\n\r\n        const completeAction: CompleteProcessingResetPasswordRequestAction = {\r\n            type: SignInEvents.CompleteProcessingResetPasswordRequest\r\n        }\r\n\r\n        try {\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.requestResetPasswordRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        email: getState().SignInLocalState.resetPasswordDialogEmail\r\n                    }\r\n                }\r\n            );\r\n            dispatch(toggleResetPasswordDialog());\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteLoadingDataAction,\r\n    CompleteRemovingAccessRequestAction,\r\n    CompleteSendingAccessRequestAction,\r\n    GroupDetailsAction,\r\n    GroupDetailsEvents\r\n} from \"./GroupDetailsActions\";\r\nimport GroupProperties from \"../../models/group_properties\";\r\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\r\nimport {ProjectInstance} from \"../../models/project\";\r\nimport Error from \"../../models/error\";\r\nimport {AccessRequestInstance} from \"../../models/access_request\";\r\n\r\nexport interface GroupDetailsState {\r\n    group?: GroupProperties;\r\n    members?: InvitedUserWithProfile[];\r\n    offers?: ProjectInstance[];\r\n    accessRequestsInstances?: AccessRequestInstance[];\r\n\r\n    loadingData: boolean;\r\n    dataLoaded: boolean;\r\n\r\n    error?: Error;\r\n\r\n    sendingAccessRequest: boolean;\r\n    errorSendingAccessRequest?: Error;\r\n\r\n    removingAccessRequest: boolean;\r\n    errorRemovingAccessRequest?: Error;\r\n}\r\n\r\nconst initialState: GroupDetailsState = {\r\n    loadingData: false,\r\n    dataLoaded: false,\r\n\r\n    sendingAccessRequest: false,\r\n    removingAccessRequest: false\r\n}\r\n\r\nexport const hasNotLoadedData = (state: GroupDetailsState) => {\r\n    return !state.dataLoaded && !state.loadingData;\r\n}\r\n\r\nexport const isLoadingData = (state: GroupDetailsState) => {\r\n    return !state.dataLoaded && state.loadingData;\r\n}\r\n\r\nexport const successfullyLoadedData = (state: GroupDetailsState) => {\r\n    return state.dataLoaded && !state.loadingData && state.group && state.members && state.offers && state.error === undefined;\r\n}\r\n\r\nexport const hasAccessRequestsBeenSatisfied = (state: GroupDetailsState) => {\r\n    return successfullyLoadedData(state) && state.accessRequestsInstances !== undefined;\r\n}\r\n\r\nexport const hasErrorLoadingData = (state: GroupDetailsState) => {\r\n    return state.dataLoaded && !state.loadingData && state.error !== undefined;\r\n}\r\n\r\nexport const isSendingAccessRequest = (state: GroupDetailsState) => {\r\n    return state.sendingAccessRequest;\r\n}\r\n\r\nexport const hasErrorSendingAccessRequest = (state: GroupDetailsState) => {\r\n    return !isSendingAccessRequest(state) && state.errorSendingAccessRequest !== undefined;\r\n}\r\n\r\nexport const isRemovingAccessRequest = (state: GroupDetailsState) => {\r\n    return state.removingAccessRequest;\r\n}\r\n\r\nexport const hasErrorRemovingAccessRequest = (state: GroupDetailsState) => {\r\n    return !isRemovingAccessRequest(state) && state.errorRemovingAccessRequest !== undefined;\r\n}\r\n\r\nconst groupDetailsReducer = (state = initialState, action: GroupDetailsAction) => {\r\n    switch (action.type) {\r\n        case GroupDetailsEvents.LoadingData:\r\n            return {\r\n                ...initialState,\r\n                loadingData: true,\r\n                dataLoaded: false\r\n            }\r\n        case GroupDetailsEvents.CompleteLoadingData:\r\n            const completeLoadingDataAction: CompleteLoadingDataAction = action as CompleteLoadingDataAction;\r\n            return {\r\n                ...state,\r\n                loadingData: false,\r\n                dataLoaded: true,\r\n                group: completeLoadingDataAction.group !== undefined\r\n                    ? JSON.parse(JSON.stringify(completeLoadingDataAction.group))\r\n                    : state.group,\r\n                members: completeLoadingDataAction.members !== undefined\r\n                    ? [...completeLoadingDataAction.members]\r\n                    : state.members,\r\n                offers: completeLoadingDataAction.offers !== undefined\r\n                    ? [...completeLoadingDataAction.offers]\r\n                    : state.offers,\r\n                accessRequestsInstances: completeLoadingDataAction.accessRequestInstances !== undefined\r\n                    ? [...completeLoadingDataAction.accessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                error: completeLoadingDataAction.error !== undefined\r\n                    ? {detail: completeLoadingDataAction.error}\r\n                    : state.error\r\n            }\r\n        case GroupDetailsEvents.SendingAccessRequest:\r\n            return {\r\n                ...state,\r\n                sendingAccessRequest: true,\r\n                errorSendingAccessRequest: undefined\r\n            }\r\n        case GroupDetailsEvents.CompleteSendingAccessRequest:\r\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                sendingAccessRequest: false,\r\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\r\n            }\r\n        case GroupDetailsEvents.RemovingAccessRequest:\r\n            return {\r\n                ...state,\r\n                removingAccessRequest: true,\r\n                errorRemovingAccessRequest: undefined\r\n            }\r\n        case GroupDetailsEvents.CompleteRemovingAccessRequest:\r\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\r\n            return {\r\n                ...state,\r\n                removingAccessRequest: false,\r\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\r\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\r\n                    : state.accessRequestsInstances,\r\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\r\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default groupDetailsReducer;","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    GroupDetailsState,\r\n    hasAccessRequestsBeenSatisfied,\r\n    hasErrorLoadingData,\r\n    isLoadingData, isRemovingAccessRequest, isSendingAccessRequest,\r\n    successfullyLoadedData\r\n} from \"./GroupDetailsReducer\";\r\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {Col, Image, Row} from \"react-bootstrap\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {loadData, removeAccessRequest, sendAccessRequest} from \"./GroupDetailsActions\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport {dateInReadableFormat} from \"../../utils/utils\";\r\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {CheckCircle} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface GroupDetailsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    loadData: (viewedGroupUserName: string) => any;\r\n    sendAccessRequest: () => any;\r\n    removeAccessRequest: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        GroupDetailsLocalState: state.GroupDetailsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadData: (viewedGroupUserName: string) => dispatch(loadData(viewedGroupUserName)),\r\n        sendAccessRequest: () => dispatch(sendAccessRequest()),\r\n        removeAccessRequest: () => dispatch(removeAccessRequest())\r\n    }\r\n}\r\n\r\nclass GroupDetails extends Component<GroupDetailsProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n\r\n    componentDidMount() {\r\n        this.props.loadData(this.props.match.params.viewedGroupUserName);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            GroupDetailsLocalState,\r\n            sendAccessRequest,\r\n            removeAccessRequest\r\n        } = this.props;\r\n\r\n        const currentUser = AuthenticationState.currentUser;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n        // loading\r\n        if (isLoadingData(GroupDetailsLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\r\n                <BeatLoader\r\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                />\r\n            </Box>;\r\n        }\r\n\r\n        // error\r\n        if (hasErrorLoadingData(GroupDetailsLocalState) || !successfullyLoadedData(GroupDetailsLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\r\n                <Typography variant=\"h5\" color=\"error\" align=\"center\">Error loading page. Please retry.</Typography>\r\n            </Box>;\r\n        }\r\n\r\n        let groupMember: GroupOfMembership | undefined = undefined;\r\n        if (!currentAdmin) {\r\n            groupMember = AuthenticationState.groupsOfMembership.find(\r\n                groupOfMembership => groupOfMembership.group.anid === GroupDetailsLocalState.group?.anid);\r\n        }\r\n\r\n        let hasRequestedToAccessGroup: boolean = false;\r\n        if (hasAccessRequestsBeenSatisfied(GroupDetailsLocalState)) {\r\n            hasRequestedToAccessGroup = GroupDetailsLocalState.accessRequestsInstances\r\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === GroupDetailsLocalState.group?.anid) !== -1;\r\n        }\r\n\r\n        // successfully loaded\r\n        return <Box paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}>\r\n            {/** Header section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box>\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Row noGutters>\r\n                                    {/** Logo section */}\r\n                                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                        <Box display=\"flex\"justifyContent=\"center\" alignItems=\"center\">\r\n                                            <Image alt={`${GroupDetailsLocalState.group?.displayName} logo`} src={getGroupLogo(GroupDetailsLocalState.group ?? null) ?? undefined} style={{width: \"100%\", height: \"auto\", padding: 20, objectFit: \"scale-down\"}}/>\r\n                                        </Box>\r\n                                    </Col>\r\n\r\n                                    {/** Name section */}\r\n                                    <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                        <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\r\n                                            <Typography align=\"center\" variant=\"h4\">{GroupDetailsLocalState.group?.displayName}</Typography>\r\n\r\n                                            {/** Home/platform member + joined date (available for investor and issuer) */}\r\n                                            {\r\n                                                currentAdmin\r\n                                                    ? null\r\n                                                    : !groupMember\r\n                                                    ? <Box marginTop=\"25px\">\r\n                                                        {\r\n                                                            !hasRequestedToAccessGroup\r\n                                                                ? <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => sendAccessRequest()} disabled={isSendingAccessRequest(GroupDetailsLocalState)}>\r\n                                                                    {\r\n                                                                        isSendingAccessRequest(GroupDetailsLocalState)\r\n                                                                            ? \"Sending request ...\"\r\n                                                                            : \"Join Group\"\r\n                                                                    }\r\n                                                                </Button>\r\n                                                                : <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => removeAccessRequest()} disabled={isRemovingAccessRequest(GroupDetailsLocalState)}>\r\n                                                                    {\r\n                                                                        isRemovingAccessRequest(GroupDetailsLocalState)\r\n                                                                            ? \"Cancelling ...\"\r\n                                                                            : \"Cancel request\"\r\n                                                                    }\r\n                                                                </Button>\r\n                                                        }\r\n                                                    </Box>\r\n                                                    : <Box marginTop=\"25px\">\r\n                                                        <Box display=\"flex\" flexDirection=\"row\">\r\n                                                            <CheckCircle fontSize=\"small\" color=\"primary\"/>\r\n                                                            <Box width=\"6px\"/>\r\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n                                                                {\r\n                                                                    getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\r\n                                                                        ? \"Home member\"\r\n                                                                        : \"Platform member\"\r\n                                                                }\r\n                                                            </Typography>\r\n                                                        </Box>\r\n\r\n\r\n                                                        <Box marginTop=\"5px\">\r\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\r\n                                                                Joined\r\n                                                                on: {dateInReadableFormat(groupMember.joinedDate)}\r\n                                                            </Typography>\r\n                                                        </Box>\r\n                                                    </Box>\r\n                                            }\r\n                                        </Box>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** About section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box marginTop=\"25px\">\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Typography variant=\"h6\">About</Typography>\r\n\r\n                                <Box marginTop=\"18px\" whiteSpace=\"pre-line\">\r\n                                    <Typography variant=\"body1\" align=\"left\">{GroupDetailsLocalState.group?.description}</Typography>\r\n                                </Box>\r\n\r\n                                <Box marginTop=\"18px\">\r\n                                    <Typography variant=\"body1\" align=\"left\">For more information, visit us at:&nbsp;\r\n                                        <CustomLink\r\n                                            url={GroupDetailsLocalState.group?.website ?? \"\"}\r\n                                            target=\"_blank\"\r\n                                            color=\"none\"\r\n                                            activeColor=\"none\"\r\n                                            activeUnderline={true}\r\n                                            component=\"a\"\r\n                                            childComponent={\r\n                                                GroupDetailsLocalState.group?.website ?? \"unknown\"\r\n                                            }/>\r\n                                    </Typography>\r\n                                </Box>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Statistics section */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                    <Box marginTop=\"25px\">\r\n                        <Paper>\r\n                            <Box padding=\"20px\">\r\n                                <Typography variant=\"h6\">Statistics</Typography>\r\n\r\n                                <Box marginTop=\"20px\" border={`1px solid ${colors.grey[\"300\"]}`} bgcolor={appColors.kick_starter_background_color}>\r\n                                    <Row>\r\n                                        <Col xs={12} sm={12} md={6} lg={6}>\r\n                                            <Box padding=\"18px\">\r\n                                                <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.members?.length}</Typography>\r\n                                                    <Box height=\"2px\"/>\r\n                                                <Typography variant=\"body1\" align=\"left\">Members</Typography>\r\n                                            </Box>\r\n                                        </Col>\r\n\r\n                                        <Col xs={12} sm={12} md={6} lg={6}>\r\n                                            <Box display=\"flex\" flexDirection=\"row\">\r\n                                                <Box>\r\n                                                    <Divider orientation=\"vertical\"/>\r\n                                                </Box>\r\n\r\n                                                <Box padding=\"18px\">\r\n                                                    <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.offers?.length}</Typography>\r\n\r\n                                                    <Box height=\"2px\"/>\r\n\r\n                                                    <Typography variant=\"body1\" align=\"left\">Investment opportunities</Typography>\r\n                                                </Box>\r\n                                            </Box>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Box>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupDetails);","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n};\r\n\r\nclass MarketingPreferencesPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            clubAttributes: null,\r\n            clubAttributesLoaded: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                this.setState({\r\n                    clubAttributes: clubAttributes,\r\n                    clubAttributesLoaded: true\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            clubAttributes,\r\n            clubAttributesLoaded\r\n        } = this.state;\r\n\r\n        return (\r\n            <Container\r\n                fluid\r\n                style={{\r\n                    padding: 0\r\n                }}\r\n            >\r\n                {\r\n                    !clubAttributesLoaded\r\n                        ?\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <FlexView\r\n                                    width=\"100%\"\r\n                                    marginTop={30}\r\n                                    hAlignContent=\"center\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={colors.primaryColor}\r\n                                    />\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                        :\r\n                        <Row\r\n                            noGutters\r\n                        >\r\n                            <Col\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={12}\r\n                                lg={12}\r\n                            >\r\n                                <Row\r\n                                    noGutters\r\n                                    style={{\r\n                                        backgroundColor: colors.gray_100\r\n                                    }}\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingTop: 30,\r\n                                            paddingBottom: 30,\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        <Typography\r\n                                            variant=\"h5\"\r\n                                            align=\"left\"\r\n                                        >\r\n                                            <b>{\"Marketing preferences\".toUpperCase()}</b>\r\n                                        </Typography>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row\r\n                                    noGutters\r\n                                >\r\n                                    <Col\r\n                                        xs={12}\r\n                                        sm={12}\r\n                                        md={12}\r\n                                        lg={{span: 8, offset: 2}}\r\n                                        style={{\r\n                                            paddingLeft: 12,\r\n                                            paddingRight: 12\r\n                                        }}\r\n                                    >\r\n                                        {\r\n                                            !clubAttributes.marketingPreferences\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView\r\n                                                    column\r\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.marketingPreferences.ops)}}\r\n                                                    marginTop={35}\r\n                                                />\r\n                                        }\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MarketingPreferencesPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from \"react-flexview\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport Profile from '../../shared-components/profile/Profile';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        admin: state.auth.user,\r\n        adminLoaded: state.auth.userLoaded,\r\n\r\n        editUserProfile_userEdited: state.editUser.userEdited,\r\n        projectsTable_user: state.projectsTable.user\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\r\n        editUserProfile_startOriginalUserChangedListener: () => dispatch(editUserActions.startOriginalUserChangedListener()),\r\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\r\n\r\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\r\n        // projectsTable_stopListeningForProjectsChanged: () => dispatch(projectsTableActions.stopListeningForProjectsChanged()),\r\n        // projectsTable_stopListeningForPledgesChanged: () => dispatch(projectsTableActions.stopListeningForPledgesChanged()),\r\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor: () => dispatch(projectsTableActions.stopListeningForPledgesMadeByTableInvestor()),\r\n\r\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\r\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nclass ProfilePageEditable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            userToBeEdited: null,\r\n            userToBeEditedLoaded: false,\r\n            loadingUserToBeEdited: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.EDIT_USER_PROFILE : ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            admin,\r\n\r\n            loadAngelNetwork,\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n            // projectsTable_setUser,\r\n            activitiesTable_setUser\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited\r\n        } = this.state;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n\r\n            if (admin && userToBeEdited) {\r\n                editUserProfile_setOriginalUserAndEditedUser(userToBeEdited);\r\n\r\n                // projectsTable_setUser(userToBeEdited);\r\n\r\n                activitiesTable_setUser(userToBeEdited);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            editUserProfile_setOriginalUserAndEditedUser,\r\n\r\n            // projectsTable_setUser,\r\n            // projectsTable_stopListeningForProjectsChanged,\r\n            // projectsTable_stopListeningForPledgesChanged,\r\n            // projectsTable_stopListeningForPledgesMadeByTableInvestor,\r\n\r\n            activitiesTable_setUser,\r\n            activitiesTable_stopListeningForActivitiesChanged,\r\n\r\n            editUserProfile_stopOriginalUserChangedListener\r\n        } = this.props;\r\n\r\n        // when click to go back,\r\n        // reset the user referenced in edit user profile\r\n        editUserProfile_setOriginalUserAndEditedUser(null);\r\n\r\n        // stop listening for user's profile changes if added\r\n        editUserProfile_stopOriginalUserChangedListener();\r\n\r\n        // reset the user references in projects table\r\n        // ---> avoid caches\r\n        // projectsTable_setUser(null);\r\n        // projectsTable_stopListeningForProjectsChanged();\r\n        // projectsTable_stopListeningForPledgesChanged();\r\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor();\r\n\r\n        // reset the user references in activities table\r\n        // ---> avoid caches\r\n        activitiesTable_setUser(null);\r\n        activitiesTable_stopListeningForActivitiesChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        // get user's id from the URL\r\n        const userToBeEditedID = this.props.match.params.userID;\r\n\r\n        const {\r\n            editUserProfile_startOriginalUserChangedListener\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited,\r\n            userToBeEditedLoaded,\r\n            loadingUserToBeEdited\r\n        } = this.state;\r\n\r\n        if (!userToBeEdited && !userToBeEditedLoaded && !loadingUserToBeEdited) {\r\n            this.setState({\r\n                userToBeEditedLoaded: false,\r\n                loadingUserToBeEdited: true\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeEditedID)\r\n                .then(user => {\r\n\r\n                    realtimeDBUtils\r\n                        .loadGroupsUserIsIn(userToBeEditedID)\r\n                        .then(groupsUserIsIn => {\r\n\r\n                            user.groupsUserIsIn = groupsUserIsIn;\r\n\r\n                            this.setState({\r\n                                userToBeEdited: JSON.parse(JSON.stringify(user)),\r\n                                userToBeEditedLoaded: true,\r\n                                loadingUserToBeEdited: false\r\n                            });\r\n\r\n                            // start listening for user's profile changes\r\n                            editUserProfile_startOriginalUserChangedListener();\r\n                        })\r\n                        .catch(error => {\r\n                            this.setState({\r\n                                userToBeEdited: null,\r\n                                userToBeEditedLoaded: true,\r\n                                loadingUserToBeEdited: false\r\n                            });\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        userToBeEdited: null,\r\n                        userToBeEditedLoaded: true,\r\n                        loadingUserToBeEdited: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            admin,\r\n            adminLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeEdited,\r\n            userToBeEditedLoaded\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !adminLoaded\r\n            || !userToBeEditedLoaded\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !admin\r\n            || (admin && admin.type !== DB_CONST.TYPE_ADMIN)\r\n            || !userToBeEdited\r\n        ) {\r\n            return (\r\n                <PageNotFoundWhole/>\r\n            );\r\n        }\r\n\r\n        // the group admins are trying to open this page\r\n        // to edit profile of a user that is NOT a member of their group\r\n        if (!admin.superAdmin\r\n            && userToBeEdited.hasOwnProperty('groupsUserIsIn')\r\n            && userToBeEdited.groupsUserIsIn.findIndex(group => group.anid === admin.anid) === -1\r\n        ) {\r\n            return (\r\n                <PageNotFoundWhole/>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Body */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}} style={{marginTop: 30, marginBottom: 30}}>\r\n                        {\r\n                            !userToBeEdited\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Profile/>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageEditable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport {Box, Button, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\nconst logoHeightMobile: number = 160;\r\nconst logoHeight: number = 220;\r\n\r\ninterface FrontProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Front extends Component<FrontProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{padding: 0, position: \"fixed\", height: \"100% !important\", overflowY: \"auto\", top: 0}}>\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\" paddingX=\"30px\" paddingY=\"20px\">\r\n                        <CustomLink url={Routes.constructContactUsRoute(this.props.match.params)} color=\"black\" activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeUnderline={false} component=\"nav-link\" \r\n                        childComponent={\r\n                                <Typography variant=\"body1\">Contact us</Typography>\r\n                            }/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <CustomLink\r\n                            url={\r\n                                isAuthenticating(AuthenticationState)\r\n                                    ? \"\"\r\n                                    : !successfullyAuthenticated(AuthenticationState)\r\n                                    ? Routes.constructSignInRoute(this.props.match.params)\r\n                                    : Routes.constructDashboardRoute(this.props.match.params, ManageGroupUrlState, AuthenticationState)\r\n                            }\r\n                            color=\"black\"\r\n                            activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            activeUnderline={false}\r\n                            // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                            component=\"a\"\r\n                            childComponent={\r\n                                <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">\r\n                                    {\r\n                                        isAuthenticating(AuthenticationState)\r\n                                            ? \"\"\r\n                                            : !successfullyAuthenticated(AuthenticationState)\r\n                                            ? \"Sign in\"\r\n                                            : \"Dashboard\"\r\n                                    }\r\n                                </Button>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" minHeight=\"100vh\"\r\n                        bgcolor={\r\n                            toRGBWithOpacity(\r\n                                getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                0.12\r\n                            )\r\n                        }\r\n                    >\r\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" flexGrow={3} paddingY=\"50px\">\r\n                            {\r\n                                isValidatingGroupUrl(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Image\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            !routeContainsGroupName(ManageGroupUrlState)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : getGroupLogo(ManageGroupUrlState.group)\r\n                                        }\r\n                                        style={{\r\n                                            width: \"auto\",\r\n                                            height: MediaQueryState.isMobile ? logoHeightMobile : logoHeight\r\n                                        }}\r\n                                    />\r\n                            }\r\n\r\n                            <Box height=\"20px\"/>\r\n\r\n                            <Typography color=\"primary\" variant=\"h2\" align=\"center\">\r\n                                {\r\n                                    isValidatingGroupUrl(ManageGroupUrlState)\r\n                                        ? \"\"\r\n                                        : !routeContainsGroupName(ManageGroupUrlState)\r\n                                        ? \"Invest West\"\r\n                                        : ManageGroupUrlState.group?.displayName\r\n                                }\r\n                            </Typography>\r\n\r\n                            {\r\n                                routeContainsGroupName(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Box color={colors.blueGrey[\"500\"]} marginTop=\"20px\">\r\n                                        <Typography variant=\"h4\" align=\"center\">Connecting businesses and investors</Typography>\r\n                                    </Box>\r\n                            }\r\n                        </Box>\r\n\r\n                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                            <Image alt=\"front_footer\" src={require(\"../../img/front_page_cover_image.png\").default} style={{objectFit: \"fill\"}}/>\r\n                            <Box height=\"90px\"\r\n                                bgcolor={\r\n                                    toRGBWithOpacity(\r\n                                        getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                        0.75\r\n                                    )\r\n                                }\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Front);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport React from \"react\";\r\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/utils\";\r\n\r\nexport enum ResetPasswordEvents {\r\n    VerifyingCode = \"ResetPasswordEvents.VerifyingCode\",\r\n    CompleteVerifyingCode = \"ResetPasswordEvents.CompleteVerifyingCode\",\r\n    TextChanged = \"ResetPasswordEvents.TextChanged\",\r\n    ConfirmingResetPassword = \"ResetPasswordEvents.ConfirmingResetPassword\",\r\n    CompleteConfirmingResetPassword = \"ResetPasswordEvents.CompleteConfirmingResetPassword\"\r\n}\r\n\r\nexport interface ResetPasswordAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteVerifyingCodeAction extends ResetPasswordAction {\r\n    actionCode: string | null;\r\n    email: string | null;\r\n    error?: string;\r\n}\r\n\r\nexport interface TextChangedAction extends ResetPasswordAction {\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nexport interface CompleteConfirmingResetPasswordAction extends ResetPasswordAction {\r\n    error?: string;\r\n}\r\n\r\nexport const verifyCode: ActionCreator<any> = (code: string | null) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ResetPasswordEvents.VerifyingCode\r\n        });\r\n\r\n        const completeAction: CompleteVerifyingCodeAction = {\r\n            type: ResetPasswordEvents.CompleteVerifyingCode,\r\n            actionCode: null,\r\n            email: null\r\n        };\r\n\r\n        if (code === null) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            completeAction.actionCode = code;\r\n            completeAction.email = await firebase.auth().verifyPasswordResetCode(code);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const confirmPasswordReset: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            password,\r\n            confirmedPassword,\r\n            actionCode\r\n        } = getState().ResetPasswordLocalState;\r\n\r\n        const completeAction: CompleteConfirmingResetPasswordAction = {\r\n            type: ResetPasswordEvents.CompleteConfirmingResetPassword\r\n        };\r\n\r\n        if (password.trim().length === 0 || confirmedPassword.trim().length === 0) {\r\n            completeAction.error = \"Please fill in the required fields.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (password !== confirmedPassword) {\r\n            completeAction.error = \"Passwords do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (password.trim().length < 8) {\r\n            completeAction.error = \"Password must have at least 8 characters.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\r\n            completeAction.error = \"Please select a stronger password.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        dispatch({\r\n            type: ResetPasswordEvents.ConfirmingResetPassword\r\n        });\r\n\r\n        try {\r\n            await firebase.auth().confirmPasswordReset(actionCode as string, password);\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = \"Invalid request.\";\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: TextChangedAction = {\r\n            type: ResetPasswordEvents.TextChanged,\r\n            name: event.target.name,\r\n            value: event.target.value\r\n        }\r\n        return dispatch(action);\r\n    }\r\n}","import {\r\n    CompleteProcessingResetPasswordRequestAction,\r\n    SignInAction,\r\n    SignInEvents,\r\n    TextChangedAction\r\n} from \"./SignInActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface SignInState {\r\n    signInEmail: string;\r\n    signInPassword: string;\r\n    showPassword: boolean;\r\n\r\n    errorSignInEmail: boolean;\r\n    errorSignInPassword: boolean;\r\n\r\n    showResetPasswordDialog: boolean;\r\n    resetPasswordDialogEmail: string;\r\n    resetPasswordDialogProcessing: boolean;\r\n    resetPasswordDialogEmailSent: boolean;\r\n    resetPasswordDialogError?: Error;\r\n}\r\n\r\nconst initialState: SignInState = {\r\n    signInEmail: \"\",\r\n    signInPassword: \"\",\r\n    showPassword: false,\r\n\r\n    errorSignInEmail: false,\r\n    errorSignInPassword: false,\r\n\r\n    showResetPasswordDialog: false,\r\n    resetPasswordDialogEmail: \"\",\r\n    resetPasswordDialogProcessing: false,\r\n    resetPasswordDialogEmailSent: false\r\n}\r\n\r\nexport const successfullySentResetPassword = (state: SignInState) => {\r\n    return state.resetPasswordDialogEmailSent && state.resetPasswordDialogError === undefined;\r\n}\r\n\r\nexport const errorSendingResetPassword = (state: SignInState) => {\r\n    return state.resetPasswordDialogError !== undefined;\r\n}\r\n\r\nexport const isProcessingResetPasswordRequest = (state: SignInState) => {\r\n    return state.resetPasswordDialogProcessing;\r\n}\r\n\r\nconst signInReducer = (state: SignInState = initialState, action: SignInAction) => {\r\n    switch (action.type) {\r\n        case SignInEvents.ResetAllStates:\r\n            return {\r\n                ...initialState\r\n            }\r\n        case SignInEvents.TextChanged:\r\n            const textChangedAction: TextChangedAction = (action as TextChangedAction);\r\n            return {\r\n                ...state,\r\n                [textChangedAction.name]: textChangedAction.value\r\n            }\r\n        case SignInEvents.TogglePasswordVisibility:\r\n            return {\r\n                ...state,\r\n                showPassword: !state.showPassword\r\n            }\r\n        case SignInEvents.SignInEmailError:\r\n            return {\r\n                ...state,\r\n                errorSignInEmail: true\r\n            }\r\n        case SignInEvents.SignInPasswordError:\r\n            return {\r\n                ...state,\r\n                errorSignInPassword: true\r\n            }\r\n        case SignInEvents.ClearErrors:\r\n            return {\r\n                ...state,\r\n                errorSignInEmail: false,\r\n                errorSignInPassword: false\r\n            }\r\n        case SignInEvents.ToggleResetPasswordDialog:\r\n            return {\r\n                ...state,\r\n                showResetPasswordDialog: !state.showResetPasswordDialog,\r\n                resetPasswordDialogEmail: \"\",\r\n                resetPasswordDialogError: undefined\r\n            }\r\n        case SignInEvents.ProcessingResetPasswordRequest:\r\n            return {\r\n                ...state,\r\n                resetPasswordDialogProcessing: true,\r\n                resetPasswordDialogError: undefined\r\n            }\r\n        case SignInEvents.CompleteProcessingResetPasswordRequest:\r\n            const completeAction: CompleteProcessingResetPasswordRequestAction =\r\n                (action as CompleteProcessingResetPasswordRequestAction);\r\n            return {\r\n                ...state,\r\n                resetPasswordDialogEmailSent: completeAction.error === undefined,\r\n                resetPasswordDialogError: completeAction.error !== undefined\r\n                    ? {detail: completeAction.error} : state.resetPasswordDialogError,\r\n                resetPasswordDialogProcessing: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default signInReducer;","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    InputAdornment,\r\n    Paper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport Routes from \"../../router/routes\";\r\nimport {\r\n    errorSendingResetPassword,\r\n    isProcessingResetPasswordRequest,\r\n    SignInState,\r\n    successfullySentResetPassword\r\n} from \"./SignInReducer\";\r\nimport {\r\n    onSendResetPasswordClick,\r\n    onSignInClick,\r\n    onTextChanged,\r\n    togglePasswordVisibility,\r\n    toggleResetPasswordDialog\r\n} from \"./SignInActions\";\r\nimport {\r\n    AuthenticationState,\r\n    hasAuthenticationError,\r\n    isAuthenticating\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Close} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignInProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n    SignInLocalState: SignInState;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    togglePasswordVisibility: () => any;\r\n    onSignInClick: (event: FormEvent) => any;\r\n    toggleResetPasswordDialog: () => any;\r\n    onSendResetPasswordClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        SignInLocalState: state.SignInLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        togglePasswordVisibility: () => dispatch(togglePasswordVisibility()),\r\n        onSignInClick: (event: FormEvent) => dispatch(onSignInClick(event)),\r\n        toggleResetPasswordDialog: () => dispatch(toggleResetPasswordDialog()),\r\n        onSendResetPasswordClick: () => dispatch(onSendResetPasswordClick())\r\n    }\r\n}\r\n\r\nclass SignInNew extends Component<SignInProps\r\n    & Readonly<RouteComponentProps<RouteParams>>,\r\n    {}> {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            togglePasswordVisibility,\r\n            onSignInClick,\r\n            toggleResetPasswordDialog\r\n        } = this.props;\r\n\r\n        return <Box>\r\n            {/** Sign in card */}\r\n            <Row noGutters >\r\n                <Col xs={{span: 12, offset: 0}} md={{span: 6, offset: 3}} lg={{span: 6, offset: 3}} >\r\n                    <Box display=\"flex\" width=\"100%\" justifyContent=\"center\" paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"} paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"} >\r\n                        {/** Sign in card container */}\r\n                        <Paper elevation={0} square className={css(sharedStyles.kick_starter_border_box)} style={{ width: 650, padding: MediaQueryState.isMobile ? 20 : 30 }} >\r\n                            {/** Sign in card header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" marginBottom=\"35px\" >\r\n                                <Typography variant=\"h4\" align=\"center\" paragraph color=\"primary\">Sign in to your account</Typography>\r\n                                <Typography variant=\"body1\" align=\"center\">Connecting businesses and investors across the South West of England</Typography>\r\n                            </Box>\r\n\r\n                            {/** Display message to inform the user that the reset password email\r\n                             has been successfully sent */}\r\n                            {\r\n                                !successfullySentResetPassword(SignInLocalState)\r\n                                    ? null\r\n                                    : <Box marginBottom=\"35px\" color=\"white\" bgcolor={appColors.dark_green} padding=\"15px\" >\r\n                                        <Typography variant=\"body1\" align=\"left\">An email with password reset instructions has been sent to your email address.</Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Signin error */}\r\n                            {\r\n                                !hasAuthenticationError(AuthenticationState)\r\n                                    ? null\r\n                                    : <Box marginBottom=\"35px\" padding=\"15px\" color=\"white\" bgcolor=\"error.main\" >\r\n                                        <Typography variant=\"body1\" align=\"left\">\r\n                                       {/** {AuthenticationState.error?.detail} */}\r\n                                       Error: Username or password not recognised\r\n                                        </Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Sign in form */}\r\n                            <form onSubmit={onSignInClick} >\r\n                                <Box display=\"flex\" flexDirection=\"column\" >\r\n                                    {/** Email field */}\r\n                                    <FormControl>\r\n                                        <TextField label=\"Email address\" name=\"signInEmail\" value={SignInLocalState.signInEmail} margin=\"normal\" variant=\"outlined\" error={SignInLocalState.errorSignInEmail} onChange={onTextChanged} />\r\n                                    </FormControl>\r\n\r\n                                    {/** Password field */}\r\n                                    <FormControl>\r\n                                        <TextField\r\n                                            label=\"Password\"\r\n                                            name=\"signInPassword\"\r\n                                            type={SignInLocalState.showPassword ? \"text\" : \"password\"}\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            error={SignInLocalState.errorSignInPassword}\r\n                                            onChange={onTextChanged}\r\n                                            InputProps={{\r\n                                                endAdornment: (\r\n                                                    <InputAdornment position=\"end\" >\r\n                                                        <IconButton edge=\"end\" aria-label=\"Toggle password visibility\" onClick={togglePasswordVisibility} >\r\n                                                            {\r\n                                                                SignInLocalState.showPassword\r\n                                                                    ?\r\n                                                                    <VisibilityOff/>\r\n                                                                    :\r\n                                                                    <Visibility/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                ),\r\n                                            }}\r\n                                        />\r\n                                    </FormControl>\r\n\r\n                                    <Box marginTop=\"35px\" marginBottom=\"45px\" >\r\n                                        <Typography variant=\"body1\" align=\"center\" >\r\n                                            By clicking Sign In, you agree to our&nbsp;\r\n                                            <CustomLink url={Routes.nonGroupTermsOfUse} target=\"_blank\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Terms of use\" } />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink url={Routes.nonGroupPrivacyPolicy} target=\"_blank\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Privacy policy\" } />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {\r\n                                        !isAuthenticating(AuthenticationState)\r\n                                            ? null\r\n                                            : <Box display=\"flex\" marginBottom=\"45px\" justifyContent=\"center\" >\r\n                                                <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                                            </Box>\r\n                                    }\r\n\r\n                                    <FormControl>\r\n                                        <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\" className={css(sharedStyles.no_text_transform)}>Sign in</Button>\r\n                                    </FormControl>\r\n\r\n                                    {/** Sign up */}\r\n                                    <Box display=\"flex\" marginTop=\"25px\" justifyContent=\"center\" >\r\n                                        <Typography variant=\"body1\" >\r\n                                            Don't have an Invest West account? &nbsp;\r\n                                            <CustomLink url={Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")} color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Sign up\" } />\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {/** Forgot password */}\r\n                                    <Box display=\"flex\" marginTop=\"16px\" justifyContent=\"center\" onClick={toggleResetPasswordDialog} >\r\n                                        <Typography variant=\"body1\" color=\"primary\" className={css(sharedStyles.nav_link_hover)}>Forgot your password?</Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            </form>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Reset password dialog */}\r\n            <ResetPasswordDialogComponent/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInNew);\r\n\r\nclass ResetPasswordDialog extends Component<SignInProps, {}> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            toggleResetPasswordDialog,\r\n            onSendResetPasswordClick\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            fullWidth\r\n            maxWidth=\"sm\"\r\n            fullScreen={this.props.MediaQueryState.isMobile}\r\n            open={SignInLocalState.showResetPasswordDialog}\r\n            onClose={toggleResetPasswordDialog}\r\n        >\r\n            <DialogTitle>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                    <Box display=\"flex\" justifyContent=\"flex-start\" flexGrow={2}>\r\n                        <Typography variant=\"h5\" align=\"left\">Reset Your Password</Typography>\r\n                    </Box>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                        <IconButton onClick={toggleResetPasswordDialog}>\r\n                            <Close/>\r\n                        </IconButton>\r\n                    </Box>\r\n                </Box>\r\n            </DialogTitle>\r\n\r\n            <DialogContent style={{ padding: 0 }}>\r\n                <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" marginTop=\"15px\" paddingX=\"24px\">\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                        <Typography variant=\"body1\" align=\"left\">Please provide the email address you used when you signed up for your Invest West account.</Typography>\r\n                        <Box height=\"25px\"/>\r\n                        <Typography variant=\"body1\" align=\"left\">We will send you an email with a link to reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b></Typography>\r\n                    </Box>\r\n\r\n                    <Box height=\"42px\"/>\r\n\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                        {/** Display error */}\r\n                        {\r\n                            !errorSendingResetPassword(SignInLocalState)\r\n                                ? null\r\n                                : <Box width=\"100%\" bgcolor=\"error.main\" padding=\"15px\" marginBottom=\"42px\" color=\"white\">\r\n                                    <Typography variant=\"body1\" align=\"left\">Unable to send request password email.</Typography>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Processing indicator */}\r\n                        {\r\n                            !isProcessingResetPasswordRequest(SignInLocalState)\r\n                                ? null\r\n                                : <Box display=\"flex\" justifyContent=\"center\" marginBottom=\"42px\">\r\n                                    <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Email input */}\r\n                        <TextField name=\"resetPasswordDialogEmail\" value={SignInLocalState.resetPasswordDialogEmail} label=\"Email address\" variant=\"outlined\" fullWidth onChange={onTextChanged}/>\r\n                    </Box>\r\n\r\n                    <Box height=\"25px\"/>\r\n                </Box>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" padding=\"8px\">\r\n                    <Button color=\"primary\" variant=\"contained\" size=\"medium\" onClick={onSendResetPasswordClick} className={css(sharedStyles.no_text_transform)} disabled={SignInLocalState.resetPasswordDialogEmail.trim().length === 0}>Send</Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nconst ResetPasswordDialogComponent = connect(mapStateToProps, mapDispatchToProps)(ResetPasswordDialog);\r\n\r\n","import React, {Component} from \"react\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport {Box, Typography} from \"@material-ui/core\";\r\nimport * as appColors from \"../../values/colors\";\r\n\r\nexport default class PageNotFound extends Component<any, any> {\r\n    render() {\r\n        return <Container\r\n            fluid\r\n            style={{ padding: 0 }}\r\n        >\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Box display=\"flex\" flexDirection=\"column\" width=\"100%\" height=\"100%\" alignItems=\"center\" marginTop=\"120px\" >\r\n                        <Box color={appColors.primaryColor} >\r\n                            <Typography variant=\"h1\" align=\"center\" >404 error</Typography>\r\n                        </Box>\r\n                        <Box height=\"40px\" />\r\n                        <Typography variant=\"h2\" align=\"center\" >Page not found</Typography>\r\n                        <Box height=\"25px\" />\r\n                        <Typography variant=\"h2\" color=\"textSecondary\" align=\"center\">We're sorry, the page you requested could not be found.</Typography>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName,\r\n    successfullyValidatedGroupUrl\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {Box, Button, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport Routes from \"../../router/routes\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface HeaderProps extends HeaderLocalProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\ninterface HeaderLocalProps {\r\n    routePath: string;\r\n    homUrl: string;\r\n    dashboardUrl: string;\r\n    signInUrl: string;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass Header extends Component<HeaderProps, {}> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            routePath,\r\n            homUrl,\r\n            dashboardUrl,\r\n            signInUrl\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{ padding: 0 }} >\r\n            <Row noGutters style={{ paddingTop: 10, paddingBottom: 10, backgroundColor: appColors.white }}>\r\n                {/** Home/Dashboard */}\r\n                <Col xs={{span: 6, order: 3}} sm={{span: 6, order: 3}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}} >\r\n                    <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" alignItems=\"center\" marginLeft=\"30px\" >\r\n                        {\r\n                            successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={homUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\">Home</Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n\r\n                        {\r\n                            isAuthenticating(AuthenticationState)\r\n                                ? null\r\n                                : !successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={dashboardUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\">Dashboard</Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Logo */}\r\n                <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <CustomLink\r\n                            color=\"none\"\r\n                            activeColor=\"none\"\r\n                            activeUnderline={false}\r\n                            url={homUrl}\r\n                            component=\"nav-link\"\r\n                            childComponent={\r\n                                <Box display=\"flex\" flexDirection=\"column\" width=\"125px\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\r\n                                    <img\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                ? null\r\n                                                : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                    ? require(\"../../img/logo.png\").default\r\n                                                    : successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                                        ? getGroupLogo(ManageGroupUrlState.group)\r\n                                                        : null\r\n                                        }\r\n                                        style={{ width: \"auto\", height: 36, objectFit: \"contain\" }}\r\n                                    />\r\n                                    <Box height=\"3px\" />\r\n                                    <Box\r\n                                        fontWeight=\"fontWeightBold\"\r\n                                        color={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? appColors.primaryColor\r\n                                                : \"primary.main\"\r\n                                        }\r\n                                    >\r\n                                        <Typography variant=\"body1\" noWrap >\r\n                                            {\r\n                                                Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                    ? \"Invest West\"\r\n                                                    : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                    ? \"\"\r\n                                                    : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                        ? \"Invest West\"\r\n                                                        : ManageGroupUrlState.group?.displayName\r\n                                            }\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n\r\n                {\r\n                    !MediaQueryState.isMobile\r\n                        ? null\r\n                        : <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} >\r\n                            <Box marginY=\"10px\" >\r\n                                <Divider/>\r\n                            </Box>\r\n                        </Col>\r\n                }\r\n\r\n                {/** Sign in/Avatar */}\r\n                <Col xs={{span: 6, order: 4}} sm={{span: 6, order: 4}} md={{span: 4, order: 3}} lg={{span: 4, order: 3}} >\r\n                    {\r\n                        isAuthenticating(AuthenticationState)\r\n                            ? null\r\n                            : !successfullyAuthenticated(AuthenticationState)\r\n                            ? Routes.isSignInRoute(routePath)\r\n                                ? null\r\n                                : <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" justifyContent=\"flex-end\" alignItems=\"center\" marginRight=\"30px\" >\r\n                                    <CustomLink\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        url={signInUrl}\r\n                                        // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">Sign in</Button>\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                            : null\r\n                    }\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Divider */}\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../redux-store/reducers\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    successfullyValidatedGroupUrl\r\n} from \"../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport Routes from \"./routes\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {validateGroupUrl} from \"../redux-store/actions/manageGroupUrlActions\";\r\nimport {\r\n    AuthenticationState,\r\n    authIsNotInitialized,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../redux-store/reducers/authenticationReducer\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport Header from \"../shared-components/header/Header\";\r\nimport {signIn, signOut} from \"../redux-store/actions/authenticationActions\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport {RouteParams} from \"./router\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport {\r\n    isLoadingSystemAttributes,\r\n    ManageSystemAttributesState\r\n} from \"../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {loadSystemAttributes} from \"../redux-store/actions/manageSystemAttributesActions\";\r\nimport User, {isInvestor, isIssuer} from \"../models/user\";\r\nimport Admin, {isAdmin} from \"../models/admin\";\r\nimport GroupOfMembership from \"../models/group_of_membership\";\r\nimport {BarLoader} from \"react-spinners\";\r\n\r\ninterface GroupRouteProps extends GroupRouteLocalProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    loadSystemAttributes: () => any;\r\n    validateGroupUrl: (path: string, groupUserName: string | null) => any;\r\n    signIn: () => any;\r\n    signOut: () => any;\r\n}\r\n\r\ninterface GroupRouteLocalProps {\r\n    showHeader: boolean;\r\n    backgroundColor?: string;\r\n    component: React.ReactNode;\r\n}\r\n\r\ninterface GroupRouteState {\r\n    navigatingFromSignInOrSignUpToDashboard: boolean;\r\n    navigatingToSignIn: boolean;\r\n    navigatingToError: boolean;\r\n}\r\n\r\nconst initialState: GroupRouteState = {\r\n    navigatingFromSignInOrSignUpToDashboard: false,\r\n    navigatingToSignIn: false,\r\n    navigatingToError: false\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadSystemAttributes: () => dispatch(loadSystemAttributes()),\r\n        validateGroupUrl: (path: string, groupUserName: string | null) => dispatch(validateGroupUrl(path, groupUserName)),\r\n        signIn: () => dispatch(signIn()),\r\n        signOut: () => dispatch(signOut())\r\n    }\r\n}\r\n\r\nclass GroupRoute extends Component<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>, GroupRouteState> {\r\n    private authListener: firebase.default.Unsubscribe | null;\r\n    private routePath: string;\r\n    private routeParams: any;\r\n\r\n    constructor(props: GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>) {\r\n        super(props);\r\n        this.authListener = null;\r\n        this.routePath = this.props.match.path;\r\n        this.routeParams = this.props.match.params;\r\n        this.state = {\r\n            ...initialState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateRouteAndAuthentication();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>>, prevState: Readonly<GroupRouteState>, snapshot?: any) {\r\n        this.validateRouteAndAuthentication();\r\n\r\n        // system attributes are being loaded\r\n        if (isLoadingSystemAttributes(this.props.ManageSystemAttributesState)) {\r\n            return;\r\n        }\r\n\r\n        // group url is being validated\r\n        if (isValidatingGroupUrl(this.props.ManageGroupUrlState)) {\r\n            return;\r\n        }\r\n\r\n        // invalid group url --> redirect to 404 page\r\n        if (!successfullyValidatedGroupUrl(this.props.ManageGroupUrlState) && !this.state.navigatingToError) {\r\n            this.setState({\r\n                navigatingToError: true\r\n            });\r\n            this.props.history.push(Routes.error404);\r\n            return;\r\n        }\r\n\r\n        // redirect an unauthenticated user to the sign in route if they try to access protected routes\r\n        if (Routes.isProtectedRoute(this.routePath)\r\n            && !authIsNotInitialized(this.props.AuthenticationState)\r\n            && !isAuthenticating(this.props.AuthenticationState)\r\n            && !successfullyAuthenticated(this.props.AuthenticationState)\r\n            && !this.state.navigatingToSignIn\r\n        ) {\r\n            this.setState({\r\n                navigatingToSignIn: true\r\n            });\r\n            this.props.history.push(Routes.constructSignInRoute(this.routeParams));\r\n        }\r\n\r\n        // redirect the user to their dashboard if they are on the sign in/up route and are successfully authenticated\r\n        if ((Routes.isSignInRoute(this.routePath) || Routes.isSignUpRoute(this.routePath))\r\n            && successfullyAuthenticated(this.props.AuthenticationState)\r\n            && !this.state.navigatingFromSignInOrSignUpToDashboard\r\n        ) {\r\n            const dashboardRoute: string = Routes.constructDashboardRoute(this.routeParams, this.props.ManageGroupUrlState, this.props.AuthenticationState);\r\n            this.setState({\r\n                navigatingFromSignInOrSignUpToDashboard: true\r\n            });\r\n            this.props.history.push(dashboardRoute);\r\n        }\r\n\r\n        // redirect the user to 404 page if they are trying to access routes that are not meant for them\r\n        if (successfullyAuthenticated(this.props.AuthenticationState)) {\r\n            const currentUser: User | Admin | null = this.props.AuthenticationState.currentUser;\r\n            if (currentUser) {\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n                let shouldRedirectToError: boolean = false;\r\n\r\n                if (Routes.isRouteReservedForSuperAdmin(this.routePath)) {\r\n                    if (!currentAdmin || (currentAdmin && !currentAdmin.superAdmin)) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                } else if (Routes.isGroupAdminRoute(this.routePath)) {\r\n                    if (!currentAdmin) {\r\n                        shouldRedirectToError = true;\r\n                    } else {\r\n                        const adminGroup: GroupOfMembership = this.props.AuthenticationState.groupsOfMembership[0];\r\n                        if (adminGroup.group.groupUserName !== this.routeParams.groupUserName) {\r\n                            shouldRedirectToError = true;\r\n                        }\r\n                    }\r\n                } else if (Routes.isIssuerDashboardRoute(this.routePath)) {\r\n                    if (!isIssuer(currentUser)) {\r\n                        shouldRedirectToError = true;\r\n                    } else if (this.props.AuthenticationState.groupsOfMembership\r\n                        .filter(groupOfMembership =>\r\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\r\n                    ) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                } else if (Routes.isInvestorDashboardRoute(this.routePath)) {\r\n                    if (!isInvestor(currentUser)) {\r\n                        shouldRedirectToError = true;\r\n                    } else if (this.props.AuthenticationState.groupsOfMembership\r\n                        .filter(groupOfMembership =>\r\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\r\n                    ) {\r\n                        shouldRedirectToError = true;\r\n                    }\r\n                }\r\n\r\n                if (shouldRedirectToError && !this.state.navigatingToError) {\r\n                    this.setState({\r\n                        navigatingToError: true\r\n                    });\r\n                    this.props.history.push(Routes.error404);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath) && this.state.navigatingFromSignInOrSignUpToDashboard) {\r\n            this.setState({\r\n                navigatingFromSignInOrSignUpToDashboard: false\r\n            });\r\n        }\r\n\r\n        if (Routes.isSignInRoute(this.routePath) && this.state.navigatingToSignIn) {\r\n            this.setState({\r\n                navigatingToSignIn: false\r\n            });\r\n        }\r\n\r\n        if (Routes.isErrorRoute(this.routePath) && this.state.navigatingToError) {\r\n            this.setState({\r\n                navigatingToError: false\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.detachAuthListener();\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            showHeader,\r\n            backgroundColor\r\n        } = this.props;\r\n\r\n        this.updateRouteAndParams();\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || (successfullyValidatedGroupUrl(ManageGroupUrlState) && authIsNotInitialized(AuthenticationState))\r\n            || ((!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath))\r\n                && isAuthenticating(AuthenticationState))\r\n        ) {\r\n            return (\r\n                <Box>\r\n                    <BarLoader\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                        width=\"100%\"\r\n                        height={4}\r\n                    />\r\n                </Box>\r\n            );\r\n        }\r\n\r\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState)) {\r\n            return (\r\n                <Container\r\n                    fluid\r\n                    style={{\r\n                        padding: 0,\r\n                        height: backgroundColor !== undefined ? \"100%\" : \"none\",\r\n                        minHeight: backgroundColor !== undefined ? \"100vh\" : \"none\",\r\n                        backgroundColor: backgroundColor ?? \"none\"\r\n                    }}\r\n                >\r\n                    {\r\n                        !showHeader\r\n                            ? null\r\n                            : <Row\r\n                                noGutters\r\n                            >\r\n                                <Col\r\n                                    xs={12}\r\n                                    sm={12}\r\n                                    md={12}\r\n                                    lg={12}\r\n                                >\r\n                                    <Header\r\n                                        routePath={this.routePath}\r\n                                        homUrl={Routes.constructHomeRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\r\n                                        dashboardUrl={Routes.constructDashboardRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\r\n                                        signInUrl={Routes.constructSignInRoute(this.routeParams)}\r\n                                    />\r\n                                </Col>\r\n                            </Row>\r\n                    }\r\n\r\n                    <Row\r\n                        noGutters\r\n                    >\r\n                        <Box\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                        >\r\n                            {\r\n                                this.props.component\r\n                            }\r\n                        </Box>\r\n                    </Row>\r\n                </Container>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    validateRouteAndAuthentication = () => {\r\n        this.updateRouteAndParams();\r\n\r\n        this.props.loadSystemAttributes();\r\n\r\n        this.props.validateGroupUrl(\r\n            this.routePath, this.routeParams.hasOwnProperty(\"groupUserName\")\r\n                ? this.routeParams.groupUserName : null\r\n        );\r\n\r\n        this.attachAuthListener();\r\n    }\r\n\r\n    updateRouteAndParams = () => {\r\n        this.routePath = this.props.match.path;\r\n        this.routeParams = this.props.match.params;\r\n    }\r\n\r\n    attachAuthListener = () => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState) && !this.authListener) {\r\n            this.authListener = firebase.auth().onAuthStateChanged(firebaseUser => {\r\n                if (firebaseUser) {\r\n                    this.props.signIn();\r\n                } else {\r\n                    this.props.signOut();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    detachAuthListener = () => {\r\n        if (this.authListener) {\r\n            this.authListener();\r\n            this.authListener = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupRoute);","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport InvitedUser from \"../../models/invited_user\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\nimport React from \"react\";\r\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/passwordUtils\";\r\nimport {isValidEmailAddress} from \"../../utils/emailUtils\";\r\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport enum SignUpEvents {\r\n    LoadingInvitedUser = \"SignUpEvents.LoadingInvitedUser\",\r\n    CompleteLoadingInvitedUser = \"SignUpEvents.CompleteLoadingInvitedUser\",\r\n    InputFieldChanged = \"SignUpEvents.InputFieldChanged\",\r\n    CreatingAccount = \"SignUpEvents.CreatingAccount\",\r\n    CompleteCreatingAccount = \"SignUpEvents.CompleteCreatingAccount\"\r\n}\r\n\r\nexport interface SignUpAction extends Action {\r\n\r\n}\r\n\r\nexport interface CompleteLoadingInvitedUserAction extends SignUpAction {\r\n    invitedUser?: InvitedUser;\r\n    error?: string;\r\n}\r\n\r\nexport interface InputFieldChangedAction extends SignUpAction {\r\n    name: string;\r\n    value: string | boolean;\r\n}\r\n\r\nexport interface CompleteCreatingAccountAction extends SignUpAction {\r\n    error?: string;\r\n}\r\n\r\nexport const loadInvitedUser: ActionCreator<any> = (invitedUserID: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n\r\n        const completeAction: CompleteLoadingInvitedUserAction = {\r\n            type: SignUpEvents.CompleteLoadingInvitedUser\r\n        };\r\n\r\n        try {\r\n            dispatch({\r\n                type: SignUpEvents.LoadingInvitedUser\r\n            });\r\n\r\n            const response = await new UserRepository().retrieveInvitedUser(invitedUserID);\r\n            const invitedUser: InvitedUser = response.data;\r\n            completeAction.invitedUser = JSON.parse(JSON.stringify(invitedUser));\r\n            return dispatch(completeAction);\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const handleInputFieldChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const inputFieldType: string = event.target.type;\r\n        const inputFieldName: string = event.target.name;\r\n        const inputFieldValue: string = event.target.value;\r\n        const inputFieldChecked: boolean = event.target.checked;\r\n\r\n        const action: InputFieldChangedAction = {\r\n            type: SignUpEvents.InputFieldChanged,\r\n            name: inputFieldName,\r\n            value: inputFieldType === \"checkbox\" ? inputFieldChecked : inputFieldValue\r\n        };\r\n\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const createAccount: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            invitedUser,\r\n            userType,\r\n            title,\r\n            firstName,\r\n            lastName,\r\n            email,\r\n            confirmedEmail,\r\n            password,\r\n            confirmedPassword,\r\n            acceptMarketingPreferences\r\n        } = getState().SignUpLocalState;\r\n\r\n        const {\r\n            group\r\n        } = getState().ManageGroupUrlState;\r\n\r\n        const completeAction: CompleteCreatingAccountAction = {\r\n            type: SignUpEvents.CompleteCreatingAccount\r\n        };\r\n\r\n        // invalid email address\r\n        if (!isValidEmailAddress(email) || !isValidEmailAddress(confirmedEmail)) {\r\n            completeAction.error = \"Please enter a valid email address.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // emails not match\r\n        if (email.trim().toLocaleLowerCase() !== confirmedEmail.trim().toLocaleLowerCase()) {\r\n            completeAction.error = \"Emails do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // passwords not match\r\n        if (password !== confirmedPassword) {\r\n            completeAction.error = \"Passwords do not match.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        // password not strong enough\r\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\r\n            completeAction.error = \"Password is too weak. Please select a stronger password.\";\r\n            return dispatch(completeAction);\r\n        }\r\n\r\n        try {\r\n            dispatch({\r\n                type: SignUpEvents.CreatingAccount\r\n            });\r\n\r\n            await new UserRepository().signUp({\r\n                isPublicRegistration: invitedUser === undefined,\r\n                invitedUserID: invitedUser !== undefined ? invitedUser.id : undefined,\r\n                userProfile: {\r\n                    title,\r\n                    firstName,\r\n                    lastName,\r\n                    email,\r\n                    type: userType\r\n                },\r\n                password,\r\n                groupID: invitedUser ? invitedUser.invitedBy : group?.anid ?? \"\",\r\n                acceptMarketingPreferences: acceptMarketingPreferences\r\n            });\r\n\r\n            dispatch(completeAction);\r\n            return dispatch(signIn(email, password));\r\n        } catch (error) {\r\n            completeAction.error = error.toString();\r\n            return dispatch(completeAction);\r\n        }\r\n    }\r\n}","import {\r\n    CompleteConfirmingResetPasswordAction,\r\n    CompleteVerifyingCodeAction,\r\n    ResetPasswordAction,\r\n    ResetPasswordEvents,\r\n    TextChangedAction\r\n} from \"./ResetPasswordActions\";\r\nimport Error from \"../../models/error\";\r\n\r\nexport interface ResetPasswordState {\r\n    verifyingCode: boolean;\r\n    codeVerified: boolean;\r\n    actionCode: string | null;\r\n    email: string | null;\r\n    errorVerifyingCode?: Error;\r\n\r\n    password: string;\r\n    confirmedPassword: string;\r\n\r\n    resettingPassword: boolean;\r\n    passwordReset: boolean;\r\n    errorResettingPassword?: Error;\r\n}\r\n\r\nconst initialState: ResetPasswordState = {\r\n    verifyingCode: false,\r\n    codeVerified: false,\r\n    actionCode: null,\r\n    email: null,\r\n\r\n    password: \"\",\r\n    confirmedPassword: \"\",\r\n\r\n    resettingPassword: false,\r\n    passwordReset: false\r\n}\r\n\r\nexport const isVerifyingCode = (state: ResetPasswordState) => {\r\n    return state.verifyingCode && !state.codeVerified;\r\n}\r\n\r\nexport const successfullyVerifyingCode = (state: ResetPasswordState) => {\r\n    return !state.verifyingCode && state.codeVerified && state.email !== null && state.errorVerifyingCode === undefined;\r\n}\r\n\r\nexport const hasErrorVerifyingCode = (state: ResetPasswordState) => {\r\n    return !state.verifyingCode && state.codeVerified && state.email === null && state.errorVerifyingCode !== undefined;\r\n}\r\n\r\nexport const isResettingPassword = (state: ResetPasswordState) => {\r\n    return state.resettingPassword && !state.passwordReset;\r\n}\r\n\r\nexport const successfullyResettingPassword = (state: ResetPasswordState) => {\r\n    return !state.resettingPassword && state.passwordReset && state.errorResettingPassword === undefined;\r\n}\r\n\r\nexport const hasErrorResettingPassword = (state: ResetPasswordState) => {\r\n    return !state.resettingPassword && !state.passwordReset && state.errorResettingPassword !== undefined;\r\n}\r\n\r\nconst resetPasswordReducer = (state = initialState, action: ResetPasswordAction) => {\r\n    switch (action.type) {\r\n        case ResetPasswordEvents.VerifyingCode:\r\n            return {\r\n                ...state,\r\n                verifyingCode: true,\r\n                codeVerified: false\r\n            }\r\n        case ResetPasswordEvents.CompleteVerifyingCode:\r\n            const completeVerifyingCodeAction: CompleteVerifyingCodeAction = action as CompleteVerifyingCodeAction;\r\n            return {\r\n                ...state,\r\n                verifyingCode: false,\r\n                codeVerified: true,\r\n                actionCode: completeVerifyingCodeAction.actionCode,\r\n                email: completeVerifyingCodeAction.email,\r\n                errorVerifyingCode: completeVerifyingCodeAction.error !== undefined ? {detail: completeVerifyingCodeAction.error} : state.errorVerifyingCode\r\n            }\r\n        case ResetPasswordEvents.TextChanged:\r\n            const textChangedAction: TextChangedAction = action as TextChangedAction;\r\n            return {\r\n                ...state,\r\n                [textChangedAction.name]: textChangedAction.value\r\n            }\r\n        case ResetPasswordEvents.ConfirmingResetPassword:\r\n            return {\r\n                ...state,\r\n                resettingPassword: true,\r\n                passwordReset: false,\r\n                errorResettingPassword: undefined\r\n            }\r\n        case ResetPasswordEvents.CompleteConfirmingResetPassword:\r\n            const completeConfirmingResetPasswordAction: CompleteConfirmingResetPasswordAction = action as CompleteConfirmingResetPasswordAction;\r\n            return {\r\n                ...state,\r\n                resettingPassword: false,\r\n                passwordReset: completeConfirmingResetPasswordAction.error === undefined,\r\n                errorResettingPassword: completeConfirmingResetPasswordAction.error ? {detail: completeConfirmingResetPasswordAction.error} : state.errorResettingPassword\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default resetPasswordReducer;","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppState } from \"../../redux-store/reducers\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AnyAction } from \"redux\";\r\nimport { Box, Button, TextField, Typography } from \"@material-ui/core\";\r\nimport { Redirect, RouteComponentProps } from \"react-router-dom\";\r\nimport { RouteParams } from \"../../router/router\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { css } from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport queryString from \"query-string\";\r\nimport { confirmPasswordReset, onTextChanged, verifyCode } from \"./ResetPasswordActions\";\r\nimport {\r\n    hasErrorResettingPassword,\r\n    hasErrorVerifyingCode,\r\n    isResettingPassword,\r\n    isVerifyingCode,\r\n    ResetPasswordState,\r\n    successfullyResettingPassword\r\n} from \"./ResetPasswordReducer\";\r\nimport { HashLoader } from \"react-spinners\";\r\nimport { getGroupRouteTheme, ManageGroupUrlState } from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport { MediaQueryState } from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface ResetPasswordProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    verifyCode: (code: string | null) => any;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    confirmPasswordReset: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        ResetPasswordLocalState: state.ResetPasswordLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        verifyCode: (code: string | null) => dispatch(verifyCode(code)),\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        confirmPasswordReset: () => dispatch(confirmPasswordReset())\r\n    }\r\n}\r\n\r\nclass ResetPassword extends Component<ResetPasswordProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n\r\n    componentDidMount() {\r\n        const params = queryString.parse(this.props.location.search);\r\n        if (params.oobCode) {\r\n            const actionCode: string | string[] | null | undefined = params.oobCode;\r\n            if (actionCode) {\r\n                this.props.verifyCode(actionCode as string);\r\n            } else {\r\n                this.props.verifyCode(null);\r\n            }\r\n        } else {\r\n            this.props.verifyCode(null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            MediaQueryState,\r\n            ResetPasswordLocalState,\r\n            onTextChanged,\r\n            confirmPasswordReset\r\n        } = this.props;\r\n\r\n        // verifying code\r\n        if (isVerifyingCode(ResetPasswordLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\r\n                <HashLoader\r\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                />\r\n            </Box>;\r\n        }\r\n\r\n        // failed to verify code\r\n        if (hasErrorVerifyingCode(ResetPasswordLocalState)) {\r\n            return <Redirect\r\n                to={Routes.error404}\r\n            />;\r\n        }\r\n\r\n        // password has been successfully updated\r\n        if (successfullyResettingPassword(ResetPasswordLocalState)) {\r\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\r\n                <Typography\r\n                    variant=\"h5\"\r\n                    color=\"primary\"\r\n                    align=\"center\"\r\n                >\r\n                    Your password has been updated.\r\n                </Typography>\r\n            </Box>;\r\n        }\r\n\r\n        return <Box\r\n            paddingX={MediaQueryState.isMobile ? \"18px\" : \"0px\"}\r\n            paddingY={MediaQueryState.isMobile ? \"30px\" : \"60px\"}\r\n        >\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={{ span: 6, offset: 3 }}\r\n                    lg={{ span: 4, offset: 4 }}\r\n                >\r\n                    <Box>\r\n                        <Typography\r\n                            variant=\"h4\"\r\n                            align=\"left\"\r\n                        >\r\n                            Reset Password\r\n                        </Typography>\r\n                        <Box\r\n                            height=\"40px\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            label=\"Password\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            onChange={onTextChanged}\r\n                        />\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            label=\"Confirm Password\"\r\n                            name=\"confirmedPassword\"\r\n                            type=\"password\"\r\n                            onChange={onTextChanged}\r\n                        />\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        {\r\n                            !hasErrorResettingPassword(ResetPasswordLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    width=\"100%\"\r\n                                    bgcolor=\"error.main\"\r\n                                    padding=\"15px\"\r\n                                    marginBottom=\"20px\"\r\n                                    color=\"white\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        align=\"left\"\r\n                                    >\r\n                                        {ResetPasswordLocalState.errorResettingPassword?.detail}\r\n                                    </Typography>\r\n                                </Box>\r\n                        }\r\n                        {\r\n                            !isResettingPassword(ResetPasswordLocalState)\r\n                                ? null\r\n                                : <Box\r\n                                    display=\"flex\"\r\n                                    justifyContent=\"center\"\r\n                                    marginBottom=\"20px\"\r\n                                >\r\n                                    <HashLoader\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                    />\r\n                                </Box>\r\n                        }\r\n                        <Box\r\n                            height=\"25px\"\r\n                        />\r\n                        <Box\r\n                            display=\"flex\"\r\n                            justifyContent=\"flex-end\"\r\n                        >\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                color=\"primary\"\r\n                                size=\"large\"\r\n                                onClick={() => confirmPasswordReset()}\r\n                            >\r\n                                Submit\r\n                            </Button>\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPassword);\r\n","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {resources} from \"../Resources\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Routes from \"../../../router/routes\";\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {}\r\n}\r\n\r\nclass ResourceDetail extends Component<any, any> {\r\n    render() {\r\n        const resourceName = this.props.match.params.resourceName;\r\n        const resourceIndex = resources.findIndex(resource => resource.name === resourceName);\r\n        if (resourceIndex !== -1) {\r\n            const resource = resources[resourceIndex];\r\n            return resource.page;\r\n        }\r\n\r\n        return <Redirect to={Routes.error404}/>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceDetail);","export const PASSWORD_VERY_WEAK = 1;\r\nexport const PASSWORD_WEAK = 2;\r\nexport const PASSWORD_GOOD = 3;\r\nexport const PASSWORD_STRONG = 4;\r\nexport const PASSWORD_VERY_STRONG = 5;\r\nconst passwordBlacklist: string[] = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\r\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\r\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\r\n\r\n/**\r\n * This function is used to check the strength of the password.\r\n *\r\n * @param {*} password\r\n */\r\nexport const checkPasswordStrength = (password: string) => {\r\n    let strength = 0;\r\n    const minLength = 8;\r\n    // If the password length is less than or equal to minLength\r\n    if (password.length < minLength) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    } else {\r\n        strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\r\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\r\n        // strength = PASSWORD_WEAK;\r\n    }\r\n\r\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\r\n    if (password.length > minLength &&\r\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\r\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\r\n        // strength = PASSWORD_GOOD;\r\n    }\r\n\r\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\r\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_STRONG;\r\n    }\r\n\r\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\r\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\r\n        // strength = PASSWORD_VERY_STRONG;\r\n    }\r\n\r\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\r\n        strength = PASSWORD_VERY_WEAK;\r\n    }\r\n\r\n    return strength;\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\n\r\nconst screenSizeQueries = {\r\n    mobile: `(min-width: 320px) and (max-width: 480px) and (orientation: portrait), (min-height: 320px) and (max-height: 480px) and (orientation: landscape)`,\r\n    tablet: `(min-width: 768px) and (max-width: 1024px) and (orientation: portrait), (min-height: 768px) and (max-height: 1024px) and (orientation: landscape)`,\r\n    laptop: `(min-width: 1200px) and (max-width: 1600px) and (orientation: landscape)`,\r\n    desktop: `(min-width: 1600px) and (orientation: landscape)`,\r\n    minHeight: `(min-height: 1200px)`\r\n}\r\n\r\nexport const mobileScreen = window.matchMedia(screenSizeQueries.mobile);\r\nexport const tabletScreen = window.matchMedia(screenSizeQueries.tablet);\r\nexport const laptopScreen = window.matchMedia(screenSizeQueries.laptop);\r\nexport const desktopScreen = window.matchMedia(screenSizeQueries.desktop);\r\nexport const minHeightScreen = window.matchMedia(screenSizeQueries.minHeight);\r\n\r\nexport enum MediaQueryEvents {\r\n    MediaQueryChanged = \"MediaQueryEvents.MediaQueryChanged\"\r\n}\r\n\r\nexport interface MediaQueryAction extends Action {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport const addMediaQueryListeners: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        mobileScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isMobile', mobileScreen.matches));\r\n        tabletScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isTablet', tabletScreen.matches));\r\n        laptopScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isLaptop', laptopScreen.matches));\r\n        desktopScreen.addEventListener('change',\r\n            () => listener(dispatch, 'isDesktop', desktopScreen.matches));\r\n        minHeightScreen.addEventListener('change',\r\n            () => listener(dispatch, 'minHeightScreen', minHeightScreen.matches));\r\n    }\r\n};\r\n\r\nexport const removeMediaQueryListeners: ActionCreator<any> = () => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        mobileScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        tabletScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        laptopScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        desktopScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n\r\n        minHeightScreen.removeEventListener('change',\r\n            () => listener(null, null, null));\r\n    }\r\n};\r\n\r\nconst listener = (dispatch: Dispatch | null, name: string | null, value: boolean | null) => {\r\n    if (dispatch) {\r\n        return dispatch({\r\n            type: MediaQueryEvents.MediaQueryChanged,\r\n            name,\r\n            value\r\n        });\r\n    }\r\n};","import {\r\n    CompleteCreatingAccountAction,\r\n    CompleteLoadingInvitedUserAction,\r\n    InputFieldChangedAction,\r\n    SignUpAction,\r\n    SignUpEvents\r\n} from \"./SignUpActions\";\r\nimport Error from \"../../models/error\";\r\nimport InvitedUser from \"../../models/invited_user\";\r\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\r\n\r\nexport interface SignUpState {\r\n    invitedUser?: InvitedUser;\r\n    invitedUserLoaded: boolean;\r\n    loadingInvitedUser: boolean;\r\n    errorLoadingInvitedUser?: Error;\r\n\r\n    userType: number;\r\n    title: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    confirmedEmail: string;\r\n    password: string;\r\n    confirmedPassword: string;\r\n    acceptMarketingPreferences: boolean;\r\n\r\n    creatingAccount: boolean;\r\n    errorCreatingAccount?: Error;\r\n}\r\n\r\nconst initialState: SignUpState = {\r\n    invitedUserLoaded: false,\r\n    loadingInvitedUser: false,\r\n\r\n    userType: -1,\r\n    title: \"-1\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    confirmedEmail: \"\",\r\n    password: \"\",\r\n    confirmedPassword: \"\",\r\n    acceptMarketingPreferences: false,\r\n\r\n    creatingAccount: false\r\n}\r\n\r\nexport const isLoadingInvitedUser = (state: SignUpState) => {\r\n    return !state.invitedUserLoaded && state.loadingInvitedUser;\r\n}\r\n\r\nexport const hasSuccessfullyLoadedInvitedUser = (state: SignUpState) => {\r\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser !== undefined && state.errorLoadingInvitedUser === undefined;\r\n}\r\n\r\nexport const hasErrorLoadingInvitedUser = (state: SignUpState) => {\r\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser === undefined && state.errorLoadingInvitedUser !== undefined;\r\n}\r\n\r\nexport const notFoundInvitedUser = (state: SignUpState) => {\r\n    return hasErrorLoadingInvitedUser(state) && state.errorLoadingInvitedUser && state.errorLoadingInvitedUser.detail.includes(\"404\");\r\n}\r\n\r\nexport const isCreatingAccount = (state: SignUpState) => {\r\n    return state.creatingAccount;\r\n}\r\n\r\nexport const hasErrorCreatingAccount = (state: SignUpState) => {\r\n    return !state.creatingAccount && state.errorCreatingAccount !== undefined;\r\n}\r\n\r\nconst signUpReducer = (state = initialState, action: SignUpAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            return initialState;\r\n        case SignUpEvents.LoadingInvitedUser:\r\n            return {\r\n                ...state,\r\n                invitedUser: undefined,\r\n                invitedUserLoaded: false,\r\n                loadingInvitedUser: true,\r\n                errorLoadingInvitedUser: undefined\r\n            }\r\n        case SignUpEvents.CompleteLoadingInvitedUser:\r\n            const completeLoadingInvitedUserAction: CompleteLoadingInvitedUserAction = action as CompleteLoadingInvitedUserAction;\r\n            return {\r\n                ...state,\r\n                invitedUser: completeLoadingInvitedUserAction.invitedUser,\r\n                invitedUserLoaded: true,\r\n                loadingInvitedUser: false,\r\n                errorLoadingInvitedUser: completeLoadingInvitedUserAction.error !== undefined\r\n                    ? {detail: completeLoadingInvitedUserAction.error} : state.errorLoadingInvitedUser,\r\n                userType: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.type : state.userType,\r\n                title: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.title : state.title,\r\n                firstName: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.firstName : state.firstName,\r\n                lastName: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.lastName : state.lastName,\r\n                email: completeLoadingInvitedUserAction.invitedUser\r\n                    ? completeLoadingInvitedUserAction.invitedUser.email : state.email\r\n            }\r\n        case SignUpEvents.InputFieldChanged:\r\n            const inputFieldChangedAction: InputFieldChangedAction = action as InputFieldChangedAction;\r\n            return {\r\n                ...state,\r\n                [inputFieldChangedAction.name]: inputFieldChangedAction.value\r\n            }\r\n        case SignUpEvents.CreatingAccount:\r\n            return {\r\n                ...state,\r\n                creatingAccount: true,\r\n                successfullyCreatedAccount: false,\r\n                errorCreatingAccount: undefined\r\n            }\r\n        case SignUpEvents.CompleteCreatingAccount:\r\n            const completeCreatingAccountAction: CompleteCreatingAccountAction = action as CompleteCreatingAccountAction;\r\n            return {\r\n                ...state,\r\n                creatingAccount: false,\r\n                errorCreatingAccount: completeCreatingAccountAction.error\r\n                    ? {detail: completeCreatingAccountAction.error} : state.errorCreatingAccount\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default signUpReducer;","/**\r\n * Invited user interface\r\n */\r\nimport User from \"./user\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport Project from \"./project\";\r\nimport InvestorSelfCertification from \"./investor_self_certification\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\nimport Pledge from \"./pledge\";\r\n\r\nexport default interface InvitedUser {\r\n    id: string;\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    title: string;\r\n    type: number;\r\n    status: number;\r\n\r\n    /**\r\n     * id of the group that the user is in\r\n     */\r\n    invitedBy: string;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds):\r\n     *      - indicates the date an unregistered user was invited by [invitedBy] group.\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = \"none\"\r\n     *\r\n     *      - indicates the date an unregistered user used PUBLIC URL to registered to [invitedBy] group\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = date in milliseconds\r\n     *\r\n     * --> \"none\": the user who requested to join the [invitedBy] group from their home group\r\n     */\r\n    invitedDate: number | \"none\";\r\n\r\n    /**\r\n     * this field only exists when the user is a registered user and [officialUserID] must map to a valid User profile\r\n     */\r\n    officialUserID?: string;\r\n\r\n    /**\r\n     * the date the user joined a group either\r\n     *\r\n     * - by invitation (an unregistered user was invited by a group admin)\r\n     *\r\n     * - or by registering via the PUBLIC URL (an unregistered registered to group a group via its public url)\r\n     *\r\n     * - or by requesting to access (the user must send a request access which has to be accepted by the group admins)\r\n     */\r\n    joinedDate?: number;\r\n\r\n    /**\r\n     * can be true or false\r\n     *\r\n     * --> true: the user to requested to join a group from their home group\r\n     *\r\n     * --> false: the other cases specified above\r\n     */\r\n    requestedToJoin?: boolean;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds): the user to requested to join a group from their home group or registered to a group\r\n     * via its PUBLIC URL\r\n     *\r\n     * --> \"none\": the user was invited to a group\r\n     */\r\n    requestedToJoinDate?: number | \"none\";\r\n}\r\n\r\n/**\r\n * Invited user with official profile\r\n */\r\nexport interface InvitedUserWithProfile extends InvitedUser {\r\n    profile?: User;\r\n    homeGroup: GroupProperties;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    offersCreated?: Project[]; // for issuers\r\n    pledges?: Pledge[]; // for investors\r\n    certification?: InvestorSelfCertification | null; // self-certification of investors (undefined: user is an issuer, null: an investor has not certified)\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a user in csv\r\n */\r\nexport interface InvitedUserCsv {\r\n    name: string; // user's official profile --> title + first name + last name\r\n    email: string;\r\n    userType: \"investor\" | \"issuer\";\r\n    memberType: \"home\" | \"platform\";\r\n    homeGroup?: string; // specified only when exporting to csv for super admins\r\n    statusInGroup: \"unregistered\" | \"active\"; // this list will be expanded more in the future\r\n    joinedDate: string | undefined;\r\n    offersCreated: string | \"none\" | \"not applicable\"; // none if the issuer has not created any offers, not applicable if the user is not an issuer\r\n    pledges: number | \"not applicable\"; // number of pledges for investor, not applicable if the user is not an issuer\r\n    certifiedDate: string | \"not certified\" | \"not applicable\";\r\n}\r\n\r\n/**\r\n * Check if an invited user a home member in a group\r\n *\r\n * @param user\r\n */\r\nexport const isHomeMember = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    // if either of these 2 fields is undefined, it means the invited user has been invited\r\n    // by a group and not yet registered\r\n    if (user.requestedToJoin === undefined || user.requestedToJoinDate === undefined) {\r\n        return true;\r\n    }\r\n\r\n    // user was invited\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate === \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // user registered via the public url\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate !== \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // in other cases, the user is not a home member of the group\r\n    return false;\r\n}\r\n\r\n/**\r\n * Check if an invited user has registered or not\r\n *\r\n * @param user\r\n */\r\nexport const hasRegistered = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    return user.officialUserID !== undefined;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {UserTitles} from \"../../models/user\";\r\nimport {AuthenticationState, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {createAccount, handleInputFieldChanged, loadInvitedUser} from \"./SignUpActions\";\r\nimport {\r\n    hasErrorCreatingAccount,\r\n    hasErrorLoadingInvitedUser,\r\n    isCreatingAccount,\r\n    isLoadingInvitedUser,\r\n    notFoundInvitedUser,\r\n    SignUpState\r\n} from \"./SignUpReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {BarLoader} from \"react-spinners\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../../firebase/databaseConsts\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {hasRegistered} from \"../../models/invited_user\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignUpProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    AuthenticationState: AuthenticationState;\r\n    SignUpLocalState: SignUpState;\r\n    loadInvitedUser: (invitedUserID: string) => any;\r\n    handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    createAccount: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        SignUpLocalState: state.SignUpLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadInvitedUser: (invitedUserID: string) => dispatch(loadInvitedUser(invitedUserID)),\r\n        handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(handleInputFieldChanged(event)),\r\n        createAccount: () => dispatch(createAccount())\r\n    }\r\n}\r\n\r\nclass SignUpNew extends Component<SignUpProps & Readonly<RouteComponentProps<RouteParams>>, {}> {\r\n    // invited user id (optional parameter from the url)\r\n    // if invitedUserId = undefined --> public registration\r\n    private invitedUserId: string | undefined;\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadInvitedUser\r\n        } = this.props;\r\n\r\n        this.invitedUserId = this.props.match.params.id;\r\n        if (this.invitedUserId) {\r\n            loadInvitedUser(this.invitedUserId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignUpLocalState,\r\n            handleInputFieldChanged,\r\n            createAccount\r\n        } = this.props;\r\n\r\n        // invited user ID is specified in the url\r\n        if (this.invitedUserId) {\r\n            // loading invited user\r\n            if (isLoadingInvitedUser(SignUpLocalState)) {\r\n                return (\r\n                    <Box>\r\n                        <BarLoader\r\n                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            width=\"100%\"\r\n                            height={4}\r\n                        />\r\n                    </Box>\r\n                );\r\n            }\r\n\r\n            // error loading invited user (network error or not found)\r\n            // OR user has already signed up\r\n            if (hasErrorLoadingInvitedUser(SignUpLocalState)\r\n                || (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser))\r\n            ) {\r\n                return <Box\r\n                    marginTop=\"30px\"\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                    alignItems=\"center\"\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        color=\"error\"\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"This registration URL is not valid.\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"You have already registered. Please sign in.\"\r\n                                // other error\r\n                                : `${SignUpLocalState.errorLoadingInvitedUser?.detail}`\r\n                        }\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Button\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={() => {\r\n                            // invalid invitedUserID\r\n                            if (notFoundInvitedUser(SignUpLocalState)) {\r\n                                this.props.history.replace(\r\n                                    Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")\r\n                                );\r\n                                window.location.reload();\r\n                                return;\r\n                            }\r\n\r\n                            // user has already signed up\r\n                            if (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)) {\r\n                                this.props.history.push(Routes.constructSignInRoute(this.props.match.params));\r\n                                return;\r\n                            }\r\n\r\n                            // other error\r\n                            window.location.reload();\r\n                        }}\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"Go to public registration\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"Sign in\"\r\n                                // other error\r\n                                : \"Retry\"\r\n                        }\r\n                    </Button>\r\n                </Box>;\r\n            }\r\n        }\r\n\r\n        return <Box>\r\n            {/** Sign up card */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={{span: 12, offset: 0}}\r\n                    sm={{span: 12, offset: 0}}\r\n                    md={{span: 8, offset: 2}}\r\n                    lg={{span: 4, offset: 4}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        width=\"100%\"\r\n                        justifyContent=\"center\"\r\n                        paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"}\r\n                        paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"}\r\n                    >\r\n                        <Paper\r\n                            elevation={0}\r\n                            square\r\n                            className={css(sharedStyles.kick_starter_border_box)}\r\n                            style={{\r\n                                width: 650,\r\n                                padding: MediaQueryState.isMobile ? 20 : 30\r\n                            }}\r\n                        >\r\n                            <Typography\r\n                                align=\"center\"\r\n                                variant=\"h5\"\r\n                                color=\"primary\"\r\n                            >\r\n                                {`Welcome to ${ManageGroupUrlState.group?.displayName}`}\r\n                            </Typography>\r\n\r\n                            <Box\r\n                                height=\"20px\"\r\n                            />\r\n\r\n                            {/** Hash loader */}\r\n                            {\r\n                                isCreatingAccount(SignUpLocalState) || isAuthenticating(AuthenticationState)\r\n                                    ? <Box\r\n                                        display=\"flex\"\r\n                                        marginY=\"20px\"\r\n                                        justifyContent=\"center\"\r\n                                    >\r\n                                        <HashLoader\r\n                                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        />\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** Error message */}\r\n                            {\r\n                                !hasErrorCreatingAccount(SignUpLocalState)\r\n                                    ? <Box\r\n                                        marginY=\"20px\"\r\n                                    >\r\n                                        <Typography\r\n                                            align=\"center\"\r\n                                            variant=\"body1\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            {SignUpLocalState.errorCreatingAccount?.detail}\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                                disabled={this.invitedUserId !== undefined}\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        What would you like to do?\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"userType\"\r\n                                    value={SignUpLocalState.userType}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value={-1}\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_INVESTOR}\r\n                                        value={TYPE_INVESTOR}\r\n                                    >\r\n                                        Invest\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_ISSUER}\r\n                                        value={TYPE_ISSUER}\r\n                                    >\r\n                                        Raise funds\r\n                                    </MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"30px\"\r\n                            />\r\n\r\n                            {/** Title */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Title\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"title\"\r\n                                    value={SignUpLocalState.title}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value=\"-1\"\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    {\r\n                                        UserTitles.map((title, index) => (\r\n                                            <MenuItem\r\n                                                key={index}\r\n                                                value={title}\r\n                                            >\r\n                                                {title}\r\n                                            </MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"25px\"\r\n                            />\r\n\r\n                            {/** Names */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** First name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"First name\"\r\n                                        name=\"firstName\"\r\n                                        value={SignUpLocalState.firstName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Last name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Last name\"\r\n                                        name=\"lastName\"\r\n                                        value={SignUpLocalState.lastName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Emails */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** Email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Email\"\r\n                                        name=\"email\"\r\n                                        value={SignUpLocalState.email}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        disabled={this.invitedUserId !== undefined}\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Re-enter email\"\r\n                                        name=\"confirmedEmail\"\r\n                                        value={SignUpLocalState.confirmedEmail}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Passwords */}\r\n                            <Box>\r\n                                {/** Password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Password\"\r\n                                        name=\"password\"\r\n                                        value={SignUpLocalState.password}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Confirm password\"\r\n                                        name=\"confirmedPassword\"\r\n                                        value={SignUpLocalState.confirmedPassword}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Marketing preferences checkbox */}\r\n                            <Box\r\n                                marginTop=\"18px\"\r\n                            >\r\n                                <FormControl>\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        flexDirection=\"row\"\r\n                                        alignItems=\"center\"\r\n                                    >\r\n                                        <Checkbox\r\n                                            name=\"acceptMarketingPreferences\"\r\n                                            color=\"primary\"\r\n                                            checked={SignUpLocalState.acceptMarketingPreferences}\r\n                                            onChange={handleInputFieldChanged}\r\n                                        />\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Accept&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.nonGroupMarketingPreferences}\r\n                                                target=\"_blank\"\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    \"marketing preferences\"\r\n                                                }\r\n                                            />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** T&Cs */}\r\n                            <Box\r\n                                marginTop=\"25px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    By signing up, you agree to our&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupTermsOfUse}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Terms of use\"\r\n                                        }\r\n                                    />\r\n                                    &nbsp;and&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupPrivacyPolicy}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Privacy policy\"\r\n                                        }\r\n                                    />\r\n                                    .\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Create Account button */}\r\n                            <Box\r\n                                marginTop=\"40px\"\r\n                                display=\"flex\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                <Button\r\n                                    className={css(sharedStyles.no_text_transform)}\r\n                                    color=\"primary\"\r\n                                    variant=\"contained\"\r\n                                    disabled={\r\n                                        SignUpLocalState.userType === -1\r\n                                        || SignUpLocalState.title === \"-1\"\r\n                                        || SignUpLocalState.firstName.trim().length === 0\r\n                                        || SignUpLocalState.lastName.trim().length === 0\r\n                                        || SignUpLocalState.email.trim().length === 0\r\n                                        || SignUpLocalState.confirmedEmail.trim().length === 0\r\n                                        || SignUpLocalState.password.trim().length === 0\r\n                                        || SignUpLocalState.confirmedPassword.trim().length === 0\r\n                                    }\r\n                                    onClick={() => createAccount()}\r\n                                >\r\n                                    Create account\r\n                                </Button>\r\n                            </Box>\r\n\r\n                            {/** Sign in if have an account */}\r\n                            <Box\r\n                                marginTop=\"20px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    Already have an Invest West account?&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.constructSignInRoute(this.props.match.params)}\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"nav-link\"\r\n                                        childComponent={\r\n                                            \"Sign in\"\r\n                                        }\r\n                                    />\r\n                                </Typography>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpNew);","import React from \"react\";\r\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\r\nimport IssuerDashboard from \"../pages/dashboard-issuer/IssuerDashboard\";\r\nimport InvestorDashboard from \"../pages/dashboard-investor/InvestorDashboard\";\r\nimport AdminDashboard from \"../pages/admin/AdminDashboard\";\r\nimport CreatePitchPage from \"../pages/create-project/CreateProject\";\r\nimport UserProfile from \"../pages/profile/ProfilePageViewOnly\";\r\nimport ProjectDetails from \"../pages/project-details/ProjectDetails\";\r\nimport PrivacyPolicyPage from \"../pages/system-public-pages/PrivacyPolicyPage\";\r\nimport TermsOfUsePage from \"../pages/system-public-pages/TermsOfUsePage\";\r\nimport RiskWarningPage from \"../pages/system-public-pages/RiskWarningPage\";\r\nimport CreatePitchTermsAndConditionsPage from \"../pages/system-public-pages/CreatePitchTermsAndConditionsPage\";\r\nimport ContactUs from \"../pages/system-public-pages/ContactUs\";\r\nimport HelpPage from \"../pages/system-public-pages/HelpPage\";\r\nimport GroupDetails from \"../pages/group-details/GroupDetails\";\r\nimport MarketingPreferencesPage from \"../pages/system-public-pages/MarketingPreferencesPage\";\r\nimport ProfilePageEditable from \"../pages/profile/ProfilePageEditable\";\r\n\r\nimport Front from \"../pages/front/Front\";\r\nimport SignIn from \"../pages/signin/SignInNew\";\r\nimport PageNotFound from \"../shared-components/page-not-found/PageNotFoundNew\";\r\n\r\nimport Routes from \"./routes\";\r\nimport GroupRoute from \"./GroupRoute\";\r\nimport ResetPassword from \"../pages/reset-password/ResetPassword\";\r\nimport ResourceDetail from \"../pages/resources/pages/ResourceDetail\";\r\nimport SignUpNew from \"../pages/signup/SignUpNew\";\r\nimport {colors} from \"@material-ui/core\";\r\n\r\n/**\r\n * Parameters in the url\r\n */\r\nexport interface RouteParams {\r\n    groupUserName: string;\r\n\r\n    [params: string]: string;\r\n}\r\n\r\nconst AppRouter = () => (\r\n    <BrowserRouter>\r\n        <Switch>\r\n            <Route path={Routes.groupSignUp} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignUpNew {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupSignUp} exact\r\n                            // @ts-ignore\r\n                            render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                                // @ts-ignore\r\n                                                            component={<SignUpNew {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupFront} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\r\n            <Route path={Routes.groupFront} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n            <Route path={Routes.groupSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n            <Route path={Routes.superAdminSignIn} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<SignIn {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupAdminDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<AdminDashboard {...props}/>}/>}/>\r\n            <Route path={Routes.groupAdminDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<AdminDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupIssuerDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<IssuerDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupInvestorDashboard} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={false}\r\n                                                component={<InvestorDashboard {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProjectDetails {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProjectDetails {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupCreateOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchPage {...props}/>}/>}/>\r\n            <Route path={Routes.groupCreateOffer} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewGroup} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<GroupDetails {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewGroup} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\r\n                       // @ts-ignore\r\n                                                component={<GroupDetails {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<UserProfile {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<UserProfile {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupViewResourceDetail} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ResourceDetail {...props}/>}/>}/>\r\n            <Route path={Routes.groupViewResourceDetail} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ResourceDetail {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupEditUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\r\n            <Route path={Routes.groupEditUserProfile} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.groupHelp} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<HelpPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupContactUs} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs {...props}/>}/>}/>\r\n            <Route path={Routes.groupContactUs} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<ContactUs {...props}/>}/>}/>\r\n\r\n\r\n\r\n            <Route path={Routes.nonGroupPrivacyPolicy} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<PrivacyPolicyPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupTermsOfUse} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<TermsOfUsePage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupRiskWarning} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<RiskWarningPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupCreatePitchTermsAndConditions} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<CreatePitchTermsAndConditionsPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupMarketingPreferences} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<MarketingPreferencesPage {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.nonGroupAuthAction} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                       // @ts-ignore\r\n                                                component={<ResetPassword {...props}/>}/>}/>\r\n\r\n            <Route path={Routes.error404} exact\r\n                // @ts-ignore\r\n                   render={props => <GroupRoute {...props} showHeader={true}\r\n                                                component={<PageNotFound {...props}/>}/>}/>\r\n\r\n            {/** Handle undefined paths */}\r\n            <Route\r\n                // @ts-ignore\r\n                render={props => <GroupRoute {...props} showHeader={true}\r\n                                             component={<PageNotFound {...props}/>}/>}/>\r\n\r\n        </Switch>\r\n    </BrowserRouter>\r\n);\r\n\r\nexport default AppRouter;\r\n","import React, {Component} from 'react';\r\nimport {\r\n    IconButton,\r\n    Snackbar,\r\n    SnackbarContent\r\n} from '@material-ui/core';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport {SlideTransitionDown, SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        group: state.manageGroupFromParams.groupProperties,\r\n\r\n        open: state.manageFeedbackSnackbar.open,\r\n        message: state.manageFeedbackSnackbar.message,\r\n        color: state.manageFeedbackSnackbar.color,\r\n        position: state.manageFeedbackSnackbar.position\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar()),\r\n        resetStatesWhenSnackbarClosed: () => dispatch(feedbackSnackbarActions.resetStatesWhenSnackbarClosed())\r\n    }\r\n};\r\n\r\nclass FeedbackSnackbar extends Component {\r\n\r\n    render() {\r\n        const {\r\n            group,\r\n\r\n            open,\r\n            message,\r\n            color,\r\n            position,\r\n\r\n            closeFeedbackSnackbar,\r\n            resetStatesWhenSnackbarClosed\r\n        } = this.props;\r\n\r\n        return (\r\n            <Snackbar\r\n                open={open}\r\n                anchorOrigin={{\r\n                    vertical: position === \"\" ? \"bottom\" : position, // default vertical anchor is bottom\r\n                    horizontal: 'center',\r\n                }}\r\n                autoHideDuration={2500}\r\n                onClose={closeFeedbackSnackbar}\r\n                onExited={resetStatesWhenSnackbarClosed}\r\n                TransitionComponent={\r\n                    position === \"bottom\"\r\n                        ?\r\n                        SlideTransitionUp\r\n                        :\r\n                        position === \"top\"\r\n                            ?\r\n                            SlideTransitionDown\r\n                            :\r\n                            null\r\n                }\r\n                transitionDuration={{\r\n                    enter: 130,\r\n                    exit: 130\r\n                }}\r\n            >\r\n                <SnackbarContent\r\n                    style={{\r\n                        backgroundColor:\r\n                            color === \"primary\"\r\n                                ?\r\n                                !group\r\n                                    ?\r\n                                    colors.primaryColor\r\n                                    :\r\n                                    group.settings.primaryColor\r\n                                :\r\n                                color === \"error\"\r\n                                    ?\r\n                                    colors.errorColor\r\n                                    :\r\n                                    \"\"\r\n                    }}\r\n                    message={\r\n                        <span>\r\n                            {\r\n                                color === \"error\"\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <CheckCircleIcon style={{ marginRight: 8 }}/>\r\n                            }\r\n                            {message}\r\n                        </span>\r\n                    }\r\n                    action={[\r\n                        <IconButton key=\"close\" color=\"inherit\" onClick={closeFeedbackSnackbar}>\r\n                            <CloseIcon/>\r\n                        </IconButton>\r\n                    ]}\r\n                />\r\n            </Snackbar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbar);","import firebase from '../../firebase/firebaseApp';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_CLUB_ATTRIBUTES = 'LOADING_CLUB_ATTRIBUTES';\r\nexport const CLUB_ATTRIBUTES_LOADED = 'CLUB_ATTRIBUTES_LOADED';\r\nexport const loadClubAttributes = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const {\r\n            clubAttributesLoaded,\r\n            clubAttributesBeingLoaded\r\n        } = getState().manageClubAttributes;\r\n\r\n        if (!clubAttributesLoaded && clubAttributesBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_CLUB_ATTRIBUTES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadClubAttributes()\r\n            .then(clubAttributes => {\r\n                dispatch({\r\n                    type: CLUB_ATTRIBUTES_LOADED,\r\n                    clubAttributes\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const CLUB_ATTRIBUTES_CHANGED = 'CLUB_ATTRIBUTES_CHANGED';\r\nexport const startListeningForClubAttributesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        let clubAttributesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\r\n\r\n        clubAttributesRef\r\n            .on('child_changed', snapshot => {\r\n                dispatch({\r\n                    type: CLUB_ATTRIBUTES_CHANGED,\r\n                    key: snapshot.key,\r\n                    value: snapshot.val()\r\n                });\r\n            });\r\n    }\r\n};\r\n\r\nexport const stopListeningForClubAttributesChanged = () => {\r\n    return (dispatch, getState) => {\r\n        let clubAttributesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\r\n\r\n        clubAttributesRef.off('child_changed');\r\n    }\r\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../reducers\";\r\nimport {signOut} from \"./authenticationActions\";\r\nimport {logout} from \"./authActions\";\r\n\r\nexport enum ManageSystemIdleTimeEvents {\r\n    OnActive = \"ManageSystemIdleTimeEvents.OnActive\",\r\n    OnIdle = \"ManageSystemIdleTimeEvents.OnIdle\"\r\n}\r\n\r\nexport interface ManageSystemIdleTimeAction extends Action {\r\n\r\n}\r\n\r\n// Called when the user is no longer idle\r\nexport const onActive: ActionCreator<any> = (event: Event) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch({\r\n            type: ManageSystemIdleTimeEvents.OnActive\r\n        });\r\n    }\r\n}\r\n\r\n// Called when the user is now idle\r\nexport const onIdle: ActionCreator<any> = (event: Event) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        dispatch({\r\n            type: ManageSystemIdleTimeEvents.OnIdle\r\n        });\r\n        // TODO: Remove this line when all the components have been migrated to the new authentication flow\r\n        // @ts-ignore\r\n        dispatch(logout());\r\n        return await dispatch(signOut());\r\n    }\r\n}","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_SYSTEM_GROUPS = 'LOADING_SYSTEM_GROUPS';\r\nexport const FINISHED_LOADING_SYSTEM_GROUPS = 'FINISHED_LOADING_SYSTEM_GROUPS';\r\nexport const loadGroups = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            loadingGroups,\r\n            groupsLoaded\r\n        } = getState().manageSystemGroups;\r\n\r\n        if (!loadingGroups && !groupsLoaded) {\r\n            dispatch({\r\n                type: LOADING_SYSTEM_GROUPS\r\n            });\r\n\r\n            realtimeDBUtils\r\n                .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\r\n                .then(groups => {\r\n                    dispatch({\r\n                        type: FINISHED_LOADING_SYSTEM_GROUPS,\r\n                        groups: [...groups]\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                });\r\n        }\r\n    }\r\n};\r\n\r\nlet groupsListener = null;\r\n\r\nexport const SYSTEM_GROUPS_CHANGED = 'SYSTEM_GROUPS_CHANGED';\r\nexport const startListeningForSystemGroupsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (!groupsListener) {\r\n            groupsListener = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n\r\n            groupsListener\r\n                .on('child_added', snapshot => {\r\n                    const group = snapshot.val();\r\n\r\n                    let groups = [...getState().manageSystemGroups.systemGroups];\r\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\r\n                    if (groupIndex === -1) {\r\n                        dispatch({\r\n                            type: SYSTEM_GROUPS_CHANGED,\r\n                            groups: [...groups, group]\r\n                        });\r\n                    }\r\n                });\r\n\r\n            groupsListener\r\n                .on('child_changed', snapshot => {\r\n                    const group = snapshot.val();\r\n\r\n                    let groups = [...getState().manageSystemGroups.systemGroups];\r\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\r\n                    if (groupIndex !== -1) {\r\n\r\n                        groups[groupIndex] = group;\r\n\r\n                        dispatch({\r\n                            type: SYSTEM_GROUPS_CHANGED,\r\n                            groups: [...groups]\r\n                        });\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForSystemGroupsChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (groupsListener) {\r\n            groupsListener.off('child_added');\r\n            groupsListener.off('child_changed');\r\n            groupsListener = null;\r\n        }\r\n    }\r\n}","import {ManageSystemIdleTimeAction, ManageSystemIdleTimeEvents} from \"../actions/manageSystemIdleTimeActions\";\r\nimport {AuthenticationAction, AuthenticationEvents} from \"../actions/authenticationActions\";\r\n\r\n// active timeout: 1 hour\r\nexport const activeTimeOut = 1000 * 60 * 60;\r\n\r\nexport interface ManageSystemIdleTimeState {\r\n    nowIdle: boolean;\r\n    nowActive: boolean;\r\n}\r\n\r\nconst initialState: ManageSystemIdleTimeState = {\r\n    nowIdle: false,\r\n    nowActive: true\r\n}\r\n\r\nexport const isUserNowIdle = (state: ManageSystemIdleTimeState) => {\r\n    return state.nowIdle && !state.nowActive;\r\n}\r\n\r\nexport const isUserNowActive = (state: ManageSystemIdleTimeState) => {\r\n    return state.nowActive && !state.nowIdle;\r\n}\r\n\r\nconst manageSystemIdleTimeReducer = (state = initialState, action: ManageSystemIdleTimeAction | AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.SignOut:\r\n            return initialState;\r\n        case ManageSystemIdleTimeEvents.OnActive:\r\n            return {\r\n                ...state,\r\n                nowActive: true,\r\n                nowIdle: false\r\n            }\r\n        case ManageSystemIdleTimeEvents.OnIdle:\r\n            return {\r\n                ...state,\r\n                nowActive: false,\r\n                nowIdle: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemIdleTimeReducer;","import React, {Component} from 'react';\r\nimport {createMuiTheme, MuiThemeProvider, responsiveFontSizes} from '@material-ui/core/styles';\r\nimport {MuiPickersUtilsProvider} from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport AppRouter from \"./router/router.tsx\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from './redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {AUTH_SUCCESS} from './pages/signin/Signin';\r\n\r\nimport FeedbackSnackbar from './shared-components/feedback-snackbar/FeedbackSnackbar';\r\n\r\nimport firebase from './firebase/firebaseApp';\r\nimport * as colors from './values/colors';\r\nimport * as authActions from './redux-store/actions/authActions';\r\nimport * as clubAttributesActions from './redux-store/actions/clubAttributesActions';\r\nimport * as mediaQueryActions from './redux-store/actions/mediaQueryActions';\r\nimport * as invitedUsersActions from './redux-store/actions/invitedUsersActions';\r\nimport * as manageJoinRequestsActions from './redux-store/actions/manageJoinRequestsActions';\r\nimport * as activitiesTableActions from './redux-store/actions/activitiesTableActions';\r\nimport * as groupAdminsTableActions from './redux-store/actions/groupAdminsTableActions';\r\nimport * as forumsActions from './redux-store/actions/forumsActions';\r\nimport * as editUserActions from './redux-store/actions/editUserActions';\r\nimport * as manageSystemGroupsActions from './redux-store/actions/manageSystemGroupsActions';\r\nimport {signIn} from \"./redux-store/actions/authenticationActions\";\r\nimport {getGroupRouteTheme} from \"./redux-store/reducers/manageGroupUrlReducer\";\r\nimport IdleTimer from \"react-idle-timer\";\r\nimport {activeTimeOut} from \"./redux-store/reducers/manageSystemIdleTimeReducer\";\r\nimport {onIdle} from \"./redux-store/actions/manageSystemIdleTimeActions\";\r\n\r\n// map redux states to props of this component\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        /**\r\n         * Old state --------------------------------------------------------------------------------------------------\r\n         */\r\n        // angel network loaded from anid from URL params\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // user --------------------------------------------------------------------------------------------------------\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authStatus: state.auth.authStatus,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        forums: state.manageForums.forums,\r\n\r\n        // club attributes ---------------------------------------------------------------------------------------------\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // system groups -----------------------------------------------------------------------------------------------\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n        loadingGroups: state.manageSystemGroups.loadingGroups\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\n// map redux dispatch (actions) to props of this component\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        signIn: () => dispatch(signIn()),\r\n        onIdle: (event) => dispatch(onIdle(event)),\r\n\r\n        /**\r\n         * Old dispatch ------------------------------------------------------------------------------------------------\r\n         */\r\n        startListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.startListeningForAngelNetworkChanged()),\r\n        stopListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.stopListeningForAngelNetworkChanged()),\r\n\r\n        // auth functions  ---------------------------------------------------------------------------------------------\r\n        initializeAuthState: () => dispatch(authActions.initializeAuthState()),\r\n        getUserProfileAndValidateUser: (uid) => dispatch(authActions.getUserProfileAndValidateUser(uid)),\r\n        startListeningForUserProfileChanges: () => dispatch(authActions.startListeningForUserProfileChanges()),\r\n        stopListeningForUserProfileChanges: () => dispatch(authActions.stopListeningForUserProfileChanges()),\r\n        startListeningForGroupsUserIsIn: () => dispatch(authActions.startListeningForGroupsUserIsIn()),\r\n        stopListeningForGroupsUserIsIn: () => dispatch(authActions.stopListeningForGroupsUserIsIn()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // club attributes functions  ----------------------------------------------------------------------------------\r\n        loadClubAttributes: () => dispatch(clubAttributesActions.loadClubAttributes()),\r\n        startListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.startListeningForClubAttributesChanged()),\r\n        stopListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.stopListeningForClubAttributesChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // media query functions  --------------------------------------------------------------------------------------\r\n        addMediaQueryListeners: () => dispatch(mediaQueryActions.addMediaQueryListeners()),\r\n        removeMediaQueryListeners: () => dispatch(mediaQueryActions.removeMediaQueryListeners()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        adminDashboard_stopListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.stopListeningForInvitedUsersChanged()),\r\n\r\n        joinRequestsTable_stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged()),\r\n\r\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\r\n\r\n        groupAdminsTable_stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\r\n\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\r\n\r\n        loadSystemGroups: () => dispatch(manageSystemGroupsActions.loadGroups()),\r\n        startListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.startListeningForSystemGroupsChanged()),\r\n        stopListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.stopListeningForSystemGroupsChanged())\r\n    }\r\n};\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseAuth = firebase.auth();\r\n        this.authListener = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            addMediaQueryListeners\r\n        } = this.props;\r\n\r\n        // add media query listeners\r\n        addMediaQueryListeners();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadClubAttributesIfNotLoaded();\r\n            this.attachListeners();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadClubAttributesIfNotLoaded();\r\n            this.attachListeners();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            removeMediaQueryListeners,\r\n            stopListeningForAngelNetworkChanged,\r\n            stopListeningForClubAttributesChanged\r\n        } = this.props;\r\n\r\n        /**\r\n         * These listeners are global for whole system.\r\n         * Therefore, they should only be cancelled when the page is destroyed.\r\n         */\r\n        // cancel listening for auth state changed\r\n        this.authListener();\r\n        this.authListener = null;\r\n        // remove media query listeners\r\n        removeMediaQueryListeners();\r\n        // stop listening for angel network's changes\r\n        stopListeningForAngelNetworkChanged();\r\n        // stop listening for club attributes' changes\r\n        stopListeningForClubAttributesChanged();\r\n        /**\r\n         * ////---------------------------------------------------------------------------------------------------------\r\n         */\r\n\r\n        // cancel all other listeners when the page is destroyed\r\n        this.cancelAllListeners();\r\n    }\r\n\r\n    /**\r\n     * Cancel all listeners used in the components within the system\r\n     */\r\n    cancelAllListeners = () => {\r\n        const {\r\n            stopListeningForUserProfileChanges,\r\n\r\n            stopListeningForGroupsUserIsIn,\r\n\r\n            joinRequestsTable_stopListeningForJoinRequestsChanged,\r\n\r\n            adminDashboard_stopListeningForInvitedUsersChanged,\r\n\r\n            activitiesTable_stopListeningForActivitiesChanged,\r\n\r\n            groupAdminsTable_stopListeningForGroupAdminsChanged,\r\n\r\n            stopListeningForForumsChanged,\r\n            stopListeningForThreadsChanged,\r\n            stopListeningForThreadRepliesChanged,\r\n\r\n            editUserProfile_stopOriginalUserChangedListener,\r\n\r\n            stopListeningForSystemGroupsChanged\r\n        } = this.props;\r\n        // stop listening for user's profile changes\r\n        stopListeningForUserProfileChanges();\r\n        // stop listening for groups user is in changes\r\n        stopListeningForGroupsUserIsIn();\r\n\r\n        // stop listening for join requests changes in the JoinRequests table component\r\n        joinRequestsTable_stopListeningForJoinRequestsChanged();\r\n\r\n        // stop listening for invited users changes in the InvitedUsers component\r\n        adminDashboard_stopListeningForInvitedUsersChanged();\r\n\r\n        // stop listening for activities changes in the ActivitiesTable component\r\n        activitiesTable_stopListeningForActivitiesChanged();\r\n\r\n        // stop listening for group admins changes in the GroupAdminsTable component\r\n        groupAdminsTable_stopListeningForGroupAdminsChanged();\r\n\r\n        // stop listening for forums changes\r\n        stopListeningForForumsChanged();\r\n        // stop listening for threads changes\r\n        stopListeningForThreadsChanged();\r\n        // stop listening for thread replies changes\r\n        stopListeningForThreadRepliesChanged();\r\n\r\n        // stop listening for edited user's changes\r\n        // this should get called if the current user and the user being edited are different\r\n        editUserProfile_stopOriginalUserChangedListener();\r\n\r\n        // stop listening for system groups changes\r\n        stopListeningForSystemGroupsChanged();\r\n    };\r\n\r\n    /**\r\n     * Load club attributes\r\n     */\r\n    loadClubAttributesIfNotLoaded = () => {\r\n        const {\r\n            clubAttributesLoaded,\r\n            clubAttributesBeingLoaded,\r\n\r\n            loadClubAttributes\r\n        } = this.props;\r\n\r\n        if (!clubAttributesLoaded && !clubAttributesBeingLoaded) {\r\n            // load club attributes\r\n            loadClubAttributes();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load all the groups in the system\r\n     * --> This should be done as soon as the user is logged in\r\n     */\r\n    loadSystemGroups = () => {\r\n        const {\r\n            groupsLoaded,\r\n            loadingGroups,\r\n\r\n            loadSystemGroups\r\n        } = this.props;\r\n\r\n        if (!groupsLoaded && !loadingGroups) {\r\n            // load system groups\r\n            loadSystemGroups();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attach listeners\r\n     */\r\n    attachListeners = () => {\r\n        const {\r\n            authStatus,\r\n\r\n            user,\r\n            userLoaded,\r\n            clubAttributesLoaded,\r\n            groupsLoaded,\r\n\r\n            initializeAuthState,\r\n            getUserProfileAndValidateUser,\r\n            startListeningForClubAttributesChanged,\r\n            startListeningForUserProfileChanges,\r\n            startListeningForAngelNetworkChanged,\r\n            startListeningForGroupsUserIsIn,\r\n            startListeningForSystemGroupsChanged\r\n        } = this.props;\r\n\r\n        startListeningForAngelNetworkChanged();\r\n\r\n        if (user && userLoaded && authStatus === AUTH_SUCCESS) {\r\n            // start listening for user's profile changes\r\n            startListeningForUserProfileChanges();\r\n            // start listening for groups user is in changes\r\n            startListeningForGroupsUserIsIn();\r\n\r\n            if (groupsLoaded) {\r\n                // start listening for system groups changed\r\n                startListeningForSystemGroupsChanged();\r\n            }\r\n        }\r\n\r\n        if (clubAttributesLoaded) {\r\n            // start listening for club attributes' changes\r\n            startListeningForClubAttributesChanged();\r\n        }\r\n\r\n        if (!this.authListener) {\r\n            // listen for auth state changed\r\n            this.authListener = this.firebaseAuth\r\n                .onAuthStateChanged(firebaseUser => {\r\n                    // call this function to always set userLoaded to false when user is signed out\r\n                    initializeAuthState();\r\n                    // if user is authenticated\r\n                    if (firebaseUser) {\r\n                        getUserProfileAndValidateUser(firebaseUser.uid);\r\n\r\n                        // load system groups\r\n                        this.loadSystemGroups();\r\n                    }\r\n                    // user is not authenticated\r\n                    else {\r\n                        getUserProfileAndValidateUser(null);\r\n                        // the listeners used in components within the system must be cancelled\r\n                        // when the logged in user logs out\r\n                        this.cancelAllListeners();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    getTheme = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            groupPropertiesLoaded,\r\n            groupProperties,\r\n            shouldLoadOtherData\r\n        } = this.props;\r\n\r\n        if (ManageGroupUrlState.group) {\r\n            return getGroupRouteTheme(ManageGroupUrlState);\r\n        }\r\n\r\n        if (!groupPropertiesLoaded || !shouldLoadOtherData || !groupProperties) {\r\n            return defaultTheme;\r\n        }\r\n\r\n        return responsiveFontSizes(\r\n            createMuiTheme({\r\n                palette: {\r\n                    primary: {\r\n                        main: groupProperties.settings.primaryColor\r\n                    },\r\n\r\n                    secondary: {\r\n                        main: groupProperties.settings.secondaryColor\r\n                    },\r\n\r\n                    text: {\r\n                        secondary: colors.blue_gray_700,\r\n                    }\r\n                },\r\n                typography: {\r\n                    fontFamily: \"Muli, sans-serif\"\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <IdleTimer\r\n                    timeout={activeTimeOut}\r\n                    onIdle={this.props.onIdle}\r\n                />\r\n\r\n                <MuiThemeProvider\r\n                    theme={this.getTheme()}\r\n                >\r\n                    <MuiPickersUtilsProvider\r\n                        utils={DateFnsUtils}\r\n                    >\r\n                        <AppRouter/>\r\n\r\n                        {/** Feedback snackbar */}\r\n                        <FeedbackSnackbar/>\r\n                    </MuiPickersUtilsProvider>\r\n                </MuiThemeProvider>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// export the App component using redux connect to hook up states and actions\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nexport const defaultTheme = responsiveFontSizes(createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: colors.primaryColor\r\n        },\r\n\r\n        secondary: {\r\n            main: colors.secondaryColor\r\n        },\r\n\r\n        text: {\r\n            secondary: colors.blue_gray_700,\r\n        }\r\n    },\r\n    typography: {\r\n        fontFamily: \"Muli, sans-serif\"\r\n    }\r\n}));","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport User from \"../../models/user\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport React from \"react\";\r\n\r\nexport enum ProfileEvents {\r\n    SetCopiedUser = \"PersonalDetailsEvents.SetCopiedUser\"\r\n}\r\n\r\nexport interface ProfileAction extends Action {\r\n\r\n}\r\n\r\nexport interface SetCopiedUserAction extends ProfileAction {\r\n    copiedUser?: User;\r\n    firstTimeSetCopiedUser?: true; // true or undefined\r\n}\r\n\r\nexport const setCopiedUser: ActionCreator<any> = (user: User | null, firstTimeSetCopiedUser?: true) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetCopiedUserAction = {\r\n            type: ProfileEvents.SetCopiedUser,\r\n            copiedUser: user ? JSON.parse(JSON.stringify(user)) : undefined,\r\n            firstTimeSetCopiedUser\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n// These are the input field categories corresponding to different groups of input fields in the Profile page\r\nexport enum InputCategories {\r\n    // includes text fields in the Personal details section\r\n    PersonalDetails = \"InputCategories.PersonalDetails\",\r\n    // includes text fields in the Business profile section\r\n    BusinessProfile = \"InputCategories.BusinessProfile\",\r\n    // includes text fields in the Registered office section (subsection of Business profile)\r\n    RegisteredOffice = \"InputCategories.RegisteredOffice\",\r\n    // includes text fields in the Trading address section (subsection of Business profile)\r\n    TradingAddress = \"InputCategories.TradingAddress\",\r\n    // includes text fields in the Director section (subsection of Business profile)\r\n    Director = \"InputCategories.Director\",\r\n    // includes all checkboxes in Business profile section\r\n    BusinessProfileCheckBox = \"InputCategories.BusinessProfileCheckBox\"\r\n}\r\n\r\nexport const handleInputFieldChanged: ActionCreator<any> = (inputCategory: InputCategories, event: React.ChangeEvent<HTMLInputElement>) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        let currentCopiedUser: User | undefined = JSON.parse(JSON.stringify(getState().ProfileLocalState.copiedUser));\r\n        if (!currentCopiedUser) {\r\n            return;\r\n        }\r\n\r\n        // let newBusinessProfile: BusinessProfile = getState().ProfileLocalState.BusinessProfileState.newBusinessProfile;\r\n        //\r\n        // const inputFieldName: string = event.target.name;\r\n        // const inputFieldValue: string = event.target.value;\r\n        // const inputFieldChecked: boolean = event.target.checked;\r\n        //\r\n        // switch (inputCategory) {\r\n        //     case InputCategories.PersonalDetails:\r\n        //         currentCopiedUser = {\r\n        //             ...currentCopiedUser,\r\n        //             [inputFieldName]: inputFieldValue\r\n        //         }\r\n        //         return dispatch(setCopiedUser(currentCopiedUser));\r\n        //     case InputCategories.BusinessProfile:\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     [inputFieldName]: inputFieldValue\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 [inputFieldName]: inputFieldValue\r\n        //             }\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     case InputCategories.RegisteredOffice: {\r\n        //         if (inputFieldValue === \"none\") {\r\n        //             return;\r\n        //         }\r\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\r\n        //         if (!foundAddresses) {\r\n        //             return;\r\n        //         }\r\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\r\n        //         if (index === -1) {\r\n        //             return;\r\n        //         }\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     registeredOffice: foundAddresses[index]\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 registeredOffice: foundAddresses[index]\r\n        //             };\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     }\r\n        //     case InputCategories.TradingAddress: {\r\n        //         if (inputFieldValue === \"none\") {\r\n        //             return;\r\n        //         }\r\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\r\n        //         if (!foundAddresses) {\r\n        //             return;\r\n        //         }\r\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\r\n        //         if (index === -1) {\r\n        //             return;\r\n        //         }\r\n        //         if (hasBusinessProfile(currentCopiedUser)) {\r\n        //             currentCopiedUser = {\r\n        //                 ...currentCopiedUser,\r\n        //                 // @ts-ignore\r\n        //                 BusinessProfile: {\r\n        //                     ...currentCopiedUser.BusinessProfile,\r\n        //                     tradingAddress: foundAddresses[index]\r\n        //                 }\r\n        //             }\r\n        //             return dispatch(setCopiedUser(currentCopiedUser));\r\n        //         } else {\r\n        //             newBusinessProfile = {\r\n        //                 ...newBusinessProfile,\r\n        //                 tradingAddress: foundAddresses[index]\r\n        //             };\r\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\r\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\r\n        //                 updatedNewBusinessProfile: newBusinessProfile\r\n        //             };\r\n        //             return dispatch(updateNewBusinessProfileAction);\r\n        //         }\r\n        //     }\r\n        //     case InputCategories.BusinessProfileCheckBox:\r\n        //         const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = {\r\n        //             type: BusinessProfileEvents.CheckBoxChanged,\r\n        //             name: inputFieldName,\r\n        //             value: inputFieldChecked\r\n        //         };\r\n        //         return dispatch(businessProfileCheckBoxChangedAction);\r\n        //     default:\r\n        //         return;\r\n        // }\r\n    }\r\n}","import * as authActions from '../actions/authActions';\r\nimport {\r\n    INVALID_AUTH_NONE,\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\n// auth initial state\r\nconst initState = {\r\n    signingIn: false,\r\n    authenticating: false,\r\n    authStatus: INVALID_AUTH_NONE,\r\n\r\n    preventValidatingUserWhenSigningUp: false,\r\n\r\n    user: null,\r\n    userLoaded: false,\r\n    userBeingLoaded: false,\r\n\r\n    groupsUserIsIn: null,\r\n    loadingGroupsUserIsIn: false,\r\n    groupsUserIsInLoaded: false\r\n};\r\n\r\nconst authReducer = (state = initState, action) => {\r\n\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return {\r\n                ...initState,\r\n                authenticating: state.authenticating,\r\n                authStatus: state.authStatus\r\n            };\r\n        case authActions.INITIALIZE_AUTH_STATE:\r\n            return {\r\n                ...initState,\r\n                authenticating: state.authenticating,\r\n                authStatus: state.authStatus\r\n            };\r\n        case authActions.TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP:\r\n            return {\r\n                ...state,\r\n                preventValidatingUserWhenSigningUp: action.shouldPrevent\r\n            };\r\n        case authActions.RESET_AUTH_STATUS:\r\n            return {\r\n                ...state,\r\n                authStatus: INVALID_AUTH_NONE\r\n            };\r\n        case authActions.SIGNING_IN:\r\n            return {\r\n                ...state,\r\n                singingIn: true\r\n            };\r\n        case authActions.AUTHENTICATING:\r\n            return {\r\n                ...state,\r\n                singingIn: false,\r\n                authenticating: true,\r\n                authStatus: INVALID_AUTH_NONE,\r\n                preventValidatingUserWhenSigningUp: false,\r\n\r\n                user: null,\r\n                userLoaded: false,\r\n                userBeingLoaded: true,\r\n\r\n                groupsUserIsIn: null,\r\n                loadingGroupsUserIsIn: false,\r\n                groupsUserIsInLoaded: false\r\n            };\r\n        case authActions.AUTH_LOADING_GROUPS_USER_IS_IN:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [],\r\n                loadingGroupsUserIsIn: true,\r\n                groupsUserIsInLoaded: false\r\n            };\r\n        case authActions.AUTH_GROUPS_USER_IS_IN_LOADED:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [...action.groups],\r\n                loadingGroupsUserIsIn: false,\r\n                groupsUserIsInLoaded: true\r\n            };\r\n        case authActions.FINISHED_AUTHENTICATING:\r\n            return {\r\n                ...state,\r\n                signingIn: false,\r\n                authenticating: false,\r\n                authStatus: action.authStatus,\r\n                preventValidatingUserWhenSigningUp: false,\r\n\r\n                user: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.user,\r\n                userLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? true : state.userLoaded,\r\n                userBeingLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.userBeingLoaded,\r\n\r\n                groupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.groupsUserIsIn,\r\n                loadingGroupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.loadingGroupsUserIsIn,\r\n                groupsUserIsInLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.groupsUserIsInLoaded\r\n            };\r\n        // set state when finished loading user's profile\r\n        case authActions.USER_PROFILE_LOADED:\r\n            return {\r\n                ...state,\r\n                user: JSON.parse(JSON.stringify(action.user)),\r\n                userLoaded: true,\r\n                userBeingLoaded: false\r\n            };\r\n        // when user's profile has changed\r\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\r\n            return {\r\n                ...state,\r\n                user: JSON.parse(JSON.stringify(action.userChanged))\r\n            };\r\n        case authActions.GROUPS_USER_IS_IN_HAVE_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupsUserIsIn: [...action.groups]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n\r\n\r\n","import * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../actions/editUserActions';\r\nimport * as editImageActions from '../actions/editImageActions';\r\nimport * as editVideoActions from '../actions/editVideoActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    BusinessProfile: {\r\n        companyName: '',\r\n        registrationNo: '',\r\n        sector: 'None',\r\n        companyWebsite: '',\r\n\r\n        registeredOffice: {\r\n            address1: '',\r\n            address2: '',\r\n            address3: '',\r\n            townCity: '',\r\n            postcode: ''\r\n        },\r\n\r\n        tradingAddress: {\r\n            address1: '',\r\n            address2: '',\r\n            address3: '',\r\n            townCity: '',\r\n            postcode: ''\r\n        },\r\n\r\n        directors: []\r\n    },\r\n\r\n    logoToBeUploaded: null,\r\n    videoToBeUploaded: null,\r\n\r\n    registeredOfficeSearchPostcode: '', // field for user to fill in with postcode\r\n    registeredOfficeEnterAddressManually: false,\r\n    registeredOfficeRecommendedAddresses: null, // searched addresses from entered postcode\r\n\r\n    tradingAddressSameAsRegisteredOffice: true,\r\n    tradingAddressSearchPostcode: '', // field for user to fill in with postcode\r\n    tradingAddressEnterAddressManually: false,\r\n    tradingAddressRecommendedAddresses: null, // searched addresses from entered postcode\r\n\r\n    expandBusinessProfileFilling: false // this field is only available for investor\r\n};\r\n\r\nconst createBusinessProfileReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    [action.fieldName]: action.fieldValue\r\n                }\r\n            };\r\n        case createBusinessProfileActions.REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice: {\r\n                        ...state.BusinessProfile.registeredOffice,\r\n                        [action.fieldName]: action.fieldValue\r\n                    }\r\n                }\r\n            };\r\n        case createBusinessProfileActions.TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        ...state.BusinessProfile.tradingAddress,\r\n                        [action.fieldName]: action.fieldValue\r\n                    }\r\n                }\r\n            };\r\n        case createBusinessProfileActions.BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.fieldValue,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice:\r\n                        action.fieldName !== \"registeredOfficeSearchPostcode\"\r\n                            ?\r\n                            state.BusinessProfile.registeredOffice\r\n                            :\r\n                            {\r\n                                address1: '',\r\n                                address2: '',\r\n                                address3: '',\r\n                                townCity: '',\r\n                                postcode: ''\r\n                            },\r\n                    tradingAddress:\r\n                        action.fieldName !== \"tradingAddressSearchPostcode\"\r\n                            ?\r\n                            state.BusinessProfile.tradingAddress\r\n                            :\r\n                            {\r\n                                address1: '',\r\n                                address2: '',\r\n                                address3: '',\r\n                                townCity: '',\r\n                                postcode: ''\r\n                            }\r\n                },\r\n                registeredOfficeEnterAddressManually:\r\n                    action.fieldName !== \"registeredOfficeSearchPostcode\" ? state.registeredOfficeEnterAddressManually : false,\r\n                registeredOfficeRecommendedAddresses:\r\n                    action.fieldName !== \"registeredOfficeSearchPostcode\" ? state.registeredOfficeRecommendedAddresses : null,\r\n                tradingAddressEnterAddressManually:\r\n                    action.fieldName !== \"tradingAddressSearchPostcode\" ? state.tradingAddressEnterAddressManually : false,\r\n                tradingAddressRecommendedAddresses:\r\n                    action.fieldName !== \"tradingAddressSearchPostcode\" ? state.tradingAddressRecommendedAddresses : null,\r\n            };\r\n        case createBusinessProfileActions.SEARCHING_REGISTERED_OFFICE_ADDRESSES:\r\n            return state;\r\n        case createBusinessProfileActions.DONE_SEARCHING_REGISTERED_OFFICE_ADDRESSES:\r\n            return {\r\n                ...state,\r\n                registeredOfficeRecommendedAddresses: action.results\r\n            };\r\n        case createBusinessProfileActions.SEARCHING_TRADING_ADDRESSES:\r\n            return state;\r\n        case createBusinessProfileActions.DONE_SEARCHING_TRADING_ADDRESSES:\r\n            return {\r\n                ...state,\r\n                tradingAddressRecommendedAddresses: action.results\r\n            };\r\n        case createBusinessProfileActions.SELECT_REGISTERED_OFFICE_RECOMMENDED_ADDRESS:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    registeredOffice: {\r\n                        ...state.BusinessProfile.registeredOffice,\r\n                        address1: action.selectedAddress[0],\r\n                        address2: action.selectedAddress[1],\r\n                        address3: action.selectedAddress[2],\r\n                        townCity: action.selectedAddress[3],\r\n                        postcode: state.registeredOfficeSearchPostcode.toUpperCase(),\r\n                    }\r\n                },\r\n                registeredOfficeEnterAddressManually: true,\r\n                registeredOfficeSearchPostcode: '',\r\n                registeredOfficeRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.SELECT_TRADING_ADDRESS_RECOMMENDED_ADDRESS:\r\n            return {\r\n                ...state,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        ...state.BusinessProfile.tradingAddress,\r\n                        address1: action.selectedAddress[0],\r\n                        address2: action.selectedAddress[1],\r\n                        address3: action.selectedAddress[2],\r\n                        townCity: action.selectedAddress[3],\r\n                        postcode: state.tradingAddressSearchPostcode.toUpperCase(),\r\n                    }\r\n                },\r\n                tradingAddressEnterAddressManually: true,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY:\r\n            return {\r\n                ...state,\r\n                registeredOfficeEnterAddressManually: !state.registeredOfficeEnterAddressManually,\r\n                registeredOfficeSearchPostcode: '',\r\n                registeredOfficeRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY:\r\n            return {\r\n                ...state,\r\n                tradingAddressEnterAddressManually: !state.tradingAddressEnterAddressManually,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_TRADING_ADDRESS_SAME_AS_REGISTERED_OFFICE:\r\n            return {\r\n                ...state,\r\n                tradingAddressSameAsRegisteredOffice: action.checked,\r\n                tradingAddressSearchPostcode: '',\r\n                tradingAddressRecommendedAddresses: null,\r\n                tradingAddressEnterAddressManually: false,\r\n                BusinessProfile: {\r\n                    ...state.BusinessProfile,\r\n                    tradingAddress: {\r\n                        address1: '',\r\n                        address2: '',\r\n                        address3: '',\r\n                        townCity: '',\r\n                        postcode: ''\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.ADD_NEW_DIRECTOR_TEMPORARILY:\r\n            // update this state only when creating a new business profile\r\n            if (!action.isEditingExistingBusinessProfile) {\r\n                return {\r\n                    ...state,\r\n                    BusinessProfile: {\r\n                        ...state.BusinessProfile,\r\n                        directors: [...state.BusinessProfile.directors, action.director]\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editUserActions.DELETE_DIRECTOR_TEMPORARILY:\r\n            if (!action.isEditingExistingBusinessProfile) {\r\n                let editedDirectors = JSON.parse(JSON.stringify(state.BusinessProfile.directors));\r\n                editedDirectors.splice(action.index, 1);\r\n                return {\r\n                    ...state,\r\n                    BusinessProfile: {\r\n                        ...state.BusinessProfile,\r\n                        directors: editedDirectors\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\r\n            return {\r\n                ...state,\r\n                logoToBeUploaded: action.blob\r\n            };\r\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\r\n            return {\r\n                ...state,\r\n                videoToBeUploaded: action.video\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                expandBusinessProfileFilling: state.expandBusinessProfileFilling\r\n            };\r\n        case createBusinessProfileActions.TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR:\r\n            return {\r\n                ...initState,\r\n                expandBusinessProfileFilling: !state.expandBusinessProfileFilling\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default createBusinessProfileReducer;","import * as editUserActions from '../actions/editUserActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    // this variable is to ensure the user's profile won't be able to be edited\r\n    // by the group admins if they don't belong to that group\r\n    // if the originalUser has the \"groupsUserIsIn\" property\r\n    // and the group admins do not belong to the user's home group,\r\n    // then they won't be able to edit this user's profile.\r\n    allowEditing: true,\r\n\r\n    // original user object\r\n    originalUser: null,\r\n    // user edited object\r\n    userEdited: null,\r\n\r\n    // when a new director is being added\r\n    addNewDirector: false,\r\n    newDirectorText: ''\r\n};\r\n\r\n// Reducer\r\nconst editUserReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editUserActions.SET_ORIGINAL_USER_AND_EDITED_USER:\r\n            return {\r\n                ...state,\r\n                originalUser: action.user,\r\n                userEdited: action.user,\r\n                allowEditing: action.allowEditing\r\n            };\r\n        case editUserActions.EDIT_PERSONAL_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    [action.edit.property]: action.edit.value\r\n                }\r\n            };\r\n        case editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        [action.edit.property]: action.edit.value\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        registeredOffice: {\r\n                            ...state.userEdited.BusinessProfile.registeredOffice,\r\n                            [action.edit.property]: action.edit.value\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.EDIT_TRADING_ADDRESS_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: {\r\n                        ...state.userEdited.BusinessProfile,\r\n                        tradingAddress: {\r\n                            ...state.userEdited.BusinessProfile.tradingAddress,\r\n                            [action.edit.property]: action.edit.value\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        case editUserActions.TOGGLE_ADD_NEW_DIRECTOR:\r\n            return {\r\n                ...state,\r\n                addNewDirector: !state.addNewDirector,\r\n                newDirectorText: state.addNewDirector ? '' : state.newDirectorText\r\n            };\r\n        case editUserActions.ADDING_NEW_DIRECTOR:\r\n            return {\r\n                ...state,\r\n                [action.edit.property]: action.edit.value\r\n            };\r\n        case editUserActions.ADD_NEW_DIRECTOR_TEMPORARILY:\r\n            // update this state only when editing an existing business profile\r\n            if (action.isEditingExistingBusinessProfile) {\r\n                return {\r\n                    ...state,\r\n                    userEdited: {\r\n                        ...state.userEdited,\r\n                        BusinessProfile: {\r\n                            ...state.userEdited.BusinessProfile,\r\n                            directors: [...state.userEdited.BusinessProfile.directors, state.newDirectorText]\r\n                        }\r\n                    },\r\n                    addNewDirector: false,\r\n                    newDirectorText: ''\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                addNewDirector: false,\r\n                newDirectorText: ''\r\n            };\r\n        case editUserActions.DELETE_DIRECTOR_TEMPORARILY:\r\n            // update this state only when editing an existing business profile\r\n            if (action.isEditingExistingBusinessProfile) {\r\n                let editedDirectors = JSON.parse(JSON.stringify(state.userEdited.BusinessProfile.directors));\r\n                editedDirectors.splice(action.index, 1);\r\n                return {\r\n                    ...state,\r\n                    userEdited: {\r\n                        ...state.userEdited,\r\n                        BusinessProfile: {\r\n                            ...state.userEdited.BusinessProfile,\r\n                            directors: editedDirectors\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            return state;\r\n        case editUserActions.RESET_PERSONAL_INFORMATION:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    title: state.originalUser.title,\r\n                    firstName: state.originalUser.firstName,\r\n                    lastName: state.originalUser.lastName,\r\n                    email: state.originalUser.email,\r\n                    linkedin: !state.originalUser.linkedin ? '' : state.originalUser.linkedin\r\n                }\r\n            };\r\n        case editUserActions.RESET_BUSINESS_PROFILE:\r\n            return {\r\n                ...state,\r\n                userEdited: {\r\n                    ...state.userEdited,\r\n                    BusinessProfile: JSON.parse(JSON.stringify(state.originalUser.BusinessProfile))\r\n                }\r\n            };\r\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\r\n            return {\r\n                ...state,\r\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\r\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\r\n            };\r\n        case editUserActions.EDIT_USER_ORIGINAL_USER_CHANGED:\r\n            return {\r\n                ...state,\r\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\r\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editUserReducer;","import * as editImageActions from '../actions/editImageActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport {\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_LOGO_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nconst initState = {\r\n    editImageDialogOpen: false,\r\n    mode: null,\r\n\r\n    imgEditor: null,\r\n    imgEdited: null, // blob file obtained after editing\r\n\r\n    imgZoom: 1,\r\n\r\n    imgPreEdited: null, // file chosen from computer or url from previous logos\r\n    imgPreEditedLoaded: true,\r\n    imgPreIndex: -1, // index of previous image in the original list (not sorted) on firebase (when choose)\r\n\r\n    previousPhotos: null\r\n};\r\n\r\nconst editImageReducer = (state = initState, action) => {\r\n\r\n    switch(action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editImageActions.TOGGLE_EDIT_IMAGE_DIALOG:\r\n            return {\r\n                ...state,\r\n                editImageDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editImageDialogOpen,\r\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\r\n                imgPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.imgPreIndex : -1,\r\n                previousPhotos:\r\n                    action.mode === UPLOAD_LOGO_MODE\r\n                        ?\r\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.logo)\r\n                            ?\r\n                            []\r\n                            :\r\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.logo))\r\n                        :\r\n                        action.mode === UPLOAD_PROFILE_PICTURE_MODE\r\n                            ?\r\n                            !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.profilePicture)\r\n                                ?\r\n                                []\r\n                                :\r\n                                JSON.parse(JSON.stringify(action.user.profilePicture))\r\n                            :\r\n                            [],\r\n                imgEdited: null,\r\n                imgZoom: 1,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: true\r\n            };\r\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case editImageActions.SET_IMAGE_EDITOR_REFERENCE:\r\n            return {\r\n                ...state,\r\n                imgEditor: action.editor\r\n            };\r\n        case editImageActions.LOADING_IMAGE_FILE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: false\r\n            };\r\n        case editImageActions.IMAGE_FILES_LOADED:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: window.URL.createObjectURL(action.blob),\r\n                imgPreEditedLoaded: true,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.IMAGE_ZOOM_CHANGED:\r\n            return {\r\n                ...state,\r\n                imgZoom: action.zoom\r\n            };\r\n        case editImageActions.LOADING_PREVIOUS_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: false,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.FINISHED_LOADING_PREVIOUS_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: window.URL.createObjectURL(action.blob),\r\n                imgPreEditedLoaded: true,\r\n                imgPreIndex: state.previousPhotos.length - 1 - action.selectedIndex, // get the original index\r\n            };\r\n        case editImageActions.CANCEL_EDITING_CURRENT_IMAGE:\r\n            return {\r\n                ...state,\r\n                imgPreEdited: null,\r\n                imgPreEditedLoaded: true,\r\n                imgEdited: null,\r\n                imgZoom: 1,\r\n                imgPreIndex: -1\r\n            };\r\n        case editImageActions.EDITED_IMAGE_OBTAINED:\r\n            return {\r\n                ...state,\r\n                imgEdited: action.blob\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editImageReducer;","import * as editVideoActions from '../actions/editVideoActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\r\nimport {\r\n    UPLOAD_VIDEO_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\n\r\nconst initState = {\r\n    editVideoDialogOpen: false,\r\n    mode: null,\r\n\r\n    videoTypeSelected: null,\r\n    videoChosen: null,\r\n    previousVideos: null,\r\n    videoPreIndex: -1\r\n};\r\n\r\nconst editVideoReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case editVideoActions.TOGGLE_EDIT_VIDEO_DIALOG:\r\n            return {\r\n                ...state,\r\n                editVideoDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editVideoDialogOpen,\r\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\r\n                videoPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoPreIndex : -1,\r\n                previousVideos:\r\n                    action.mode === UPLOAD_VIDEO_MODE\r\n                        ?\r\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.video)\r\n                            ?\r\n                            []\r\n                            :\r\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.video))\r\n                        :\r\n                        [],\r\n                videoChosen: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoChosen : null,\r\n                videoTypeSelected: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoTypeSelected : null\r\n            };\r\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\r\n            return {\r\n                ...initState,\r\n                mode: state.mode\r\n            };\r\n        case editVideoActions.VIDEO_TYPE_CHOSEN:\r\n            return {\r\n                ...state,\r\n                videoTypeSelected: action.videoType,\r\n                videoChosen: null,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.VIDEO_URL_CHANGED:\r\n            return {\r\n                ...state,\r\n                videoChosen: action.url\r\n            };\r\n        case editVideoActions.VIDEO_FILE_CHANGED:\r\n            return {\r\n                ...state,\r\n                videoChosen: action.blob,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.CANCEL_EDITING_CURRENT_VIDEO:\r\n            return {\r\n                ...state,\r\n                videoChosen: null,\r\n                videoPreIndex: -1\r\n            };\r\n        case editVideoActions.PREVIOUS_VIDEO_SELECTED:\r\n            return {\r\n                ...state,\r\n                videoChosen: state.previousVideos[action.selectedIndex].url,\r\n                videoPreIndex: state.previousVideos.length - 1 - action.selectedIndex,\r\n                videoTypeSelected: null\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default editVideoReducer;","import * as uploadFilesActions from '../actions/uploadFilesActions';\r\nimport {\r\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\r\n    UPLOAD_PITCH_COVER_MODE,\r\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\r\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    mode: null, // file upload mode (e.g. Legal documents, Pitch cover, Pitch deck, and Pitch supporting documents)\r\n    filesToBeUploaded: {\r\n        legalDocuments: [],\r\n        pitchCover: [],\r\n        pitchPresentationDocument: [],\r\n        pitchSupportingDocuments: []\r\n    }, // arrays of files that will be uploaded to Firebase storage\r\n    filesDBReferences: {\r\n        legalDocuments: [],\r\n        pitchCover: [],\r\n        pitchPresentationDocument: [],\r\n        pitchSupportingDocuments: []\r\n    }, // references of the uploaded files in the Firebase realtime DB\r\n\r\n    fileUploadErrorMessage: '',\r\n    fileUploadErrorSnackbarOpen: false\r\n};\r\n\r\nconst uploadFilesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case uploadFilesActions.DELETE_TO_BE_UPLOADED_FILE:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_COVER\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT\r\n                            ?\r\n                            action.updatedFilesToBeUploaded\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_ALL_FILES:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                },\r\n                filesDBReferences: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                        && action.hasOwnProperty('waitingForUploadingReferences')\r\n                        && !action.waitingForUploadingReferences\r\n                            ?\r\n                            []\r\n                            :\r\n                            state.filesDBReferences.pitchSupportingDocuments\r\n                },\r\n                mode: null,\r\n                fileUploadErrorMessage: '',\r\n                fileUploadErrorSnackbarOpen: false\r\n            };\r\n        case uploadFilesActions.FILE_UPLOAD_CHANGED:\r\n            return {\r\n                ...state,\r\n                filesToBeUploaded: {\r\n                    ...state.filesToBeUploaded,\r\n                    legalDocuments:\r\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\r\n                            ?\r\n                            [...state.filesToBeUploaded.legalDocuments, action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.legalDocuments,\r\n                    pitchCover:\r\n                        action.mode === UPLOAD_PITCH_COVER_MODE\r\n                            ?\r\n                            [action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchCover,\r\n                    pitchPresentationDocument:\r\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\r\n                            ?\r\n                            [action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchPresentationDocument,\r\n                    pitchSupportingDocuments:\r\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\r\n                            ?\r\n                            [...state.filesToBeUploaded.pitchSupportingDocuments, action.fileRead]\r\n                            :\r\n                            state.filesToBeUploaded.pitchSupportingDocuments\r\n                }\r\n            };\r\n        case uploadFilesActions.FILE_UPLOAD_ERROR:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorMessage: action.error,\r\n                fileUploadErrorSnackbarOpen: true\r\n            };\r\n        case uploadFilesActions.CLOSE_FILE_UPLOAD_ERROR_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorSnackbarOpen: false\r\n            };\r\n        case uploadFilesActions.RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED:\r\n            return {\r\n                ...state,\r\n                fileUploadErrorMessage: ''\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_LEGAL_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    legalDocuments: [...state.filesDBReferences.legalDocuments, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_COVER:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchCover: [...state.filesDBReferences.pitchCover, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchPresentationDocument: [...state.filesDBReferences.pitchPresentationDocument, action.fileDBRef]\r\n                }\r\n            };\r\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT:\r\n            return {\r\n                ...state,\r\n                filesDBReferences: {\r\n                    ...state.filesDBReferences,\r\n                    pitchSupportingDocuments: [...state.filesDBReferences.pitchSupportingDocuments, action.fileDBRef]\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default uploadFilesReducer;","import * as uploadingStatusActions from '../actions/uploadingStatusActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    UPLOAD_NONE\r\n} from '../../shared-components/uploading-dialog/UploadingDialog';\r\nimport {DISMISS_UPLOADING_STATUS} from \"../actions/uploadingStatusActions\";\r\n\r\nconst initState = {\r\n    mode: UPLOAD_NONE,\r\n    progress: 0\r\n};\r\n\r\nconst uploadingStatusReducer = (state = initState, action) => {\r\n    switch(action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case uploadingStatusActions.UPLOADING:\r\n            return {\r\n                mode: action.mode,\r\n                progress: action.progress\r\n            };\r\n        case DISMISS_UPLOADING_STATUS:\r\n            return {\r\n                mode: UPLOAD_NONE,\r\n                progress: 0\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default uploadingStatusReducer;","import * as changePasswordActions from '../actions/changePasswordActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    PASSWORD_CHANGE_NONE,\r\n    PASSWORD_CHANGE_RE_AUTH\r\n} from '../../shared-components/change-password/ChangePasswordPage';\r\n\r\nconst initState = {\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    newPasswordVerified: '',\r\n    passwordChangeResponseCode: PASSWORD_CHANGE_NONE\r\n};\r\n\r\nconst changePasswordReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case changePasswordActions.RE_AUTHENTICATING_USER:\r\n            return {\r\n                ...state,\r\n                passwordChangeResponseCode: PASSWORD_CHANGE_RE_AUTH\r\n            };\r\n        case changePasswordActions.RESET_CHANGE_PASSWORD:\r\n            return {\r\n                ...state,\r\n                currentPassword: '',\r\n                newPassword: '',\r\n                newPasswordVerified: '',\r\n                passwordChangeResponseCode: action.hasOwnProperty('responseCode') ? action.responseCode : PASSWORD_CHANGE_NONE\r\n            };\r\n        case changePasswordActions.CHANGE_PASSWORD_TEXT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case changePasswordActions.ERROR_CHANGING_PASSWORD:\r\n            return {\r\n                ...state,\r\n                passwordChangeResponseCode: action.errorCode\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default changePasswordReducer;","import * as clubAttributesActions from '../actions/clubAttributesActions';\r\n\r\nconst initState = {\r\n    clubAttributes: null,\r\n    clubAttributesLoaded: false,\r\n    clubAttributesBeingLoaded: false\r\n};\r\n\r\nconst clubAttributesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case clubAttributesActions.LOADING_CLUB_ATTRIBUTES:\r\n            return {\r\n                ...state,\r\n                clubAttributes: null,\r\n                clubAttributesLoaded: false,\r\n                clubAttributesBeingLoaded: true\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_LOADED:\r\n            return {\r\n                ...state,\r\n                clubAttributes: JSON.parse(JSON.stringify(action.clubAttributes)),\r\n                clubAttributesLoaded: true,\r\n                clubAttributesBeingLoaded: false\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributes: {\r\n                    ...state.clubAttributes,\r\n                    [action.key]: action.value\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default clubAttributesReducer;","import React, {Component} from 'react';\r\nimport {Button, TextField, Typography} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        createForumName: state.manageForums.createForumName,\r\n        createForumDesc: state.manageForums.createForumDesc,\r\n        createForumAuthor: state.manageForums.createForumAuthor,\r\n        createForumError: state.manageForums.createForumError,\r\n        forumEdited: state.manageForums.forumEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        createNewForum: () => dispatch(forumsActions.createNewForum()),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\r\n    }\r\n};\r\n\r\nclass CreateForum extends Component {\r\n    render() {\r\n        const {\r\n            createForumName,\r\n            createForumDesc,\r\n            createForumError,\r\n            forumEdited,\r\n\r\n            toggleCreateNewForum,\r\n            createNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column >\r\n                <Typography paragraph variant=\"h6\" color=\"primary\" >\r\n                    {\r\n                        forumEdited\r\n                            ?\r\n                            \"Edit forum\"\r\n                            :\r\n                            \"Create forum\"\r\n                    }\r\n                </Typography>\r\n                {\r\n                    forumEdited\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Typography paragraph variant=\"body1\" color=\"textSecondary\" align=\"left\">Forums are made up of individual discussion threads that can be organised around a particular subject. Create forums to organise discussions.</Typography>\r\n                }\r\n                <FlexView column marginTop={10} >\r\n                    <Typography variant=\"subtitle1\">Forum information</Typography>\r\n                    <TextField\r\n                        name=\"createForumName\"\r\n                        label=\"Name\"\r\n                        required\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        value={createForumName}\r\n                        error={createForumError && createForumName.trim().length === 0}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n                    <TextField\r\n                        name=\"createForumDesc\"\r\n                        label=\"Description\"\r\n                        placeholder=\"(optional)\"\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        multiline\r\n                        rows={4}\r\n                        rowsMax={4}\r\n                        value={createForumDesc}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n                    <Row noGutters >\r\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }} >\r\n                            <FlexView>\r\n                                {\r\n                                    !createForumError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\">Please enter forum name.</Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }}>\r\n                            <FlexView hAlignContent=\"right\" >\r\n                                <FlexView marginRight={5} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleCreateNewForum(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView marginLeft={5} >\r\n                                    <Button variant=\"contained\" color=\"primary\" onClick={createNewForum} className={css(sharedStyles.no_text_transform)}>Submit</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateForum);","import React, {Component} from 'react';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Button, TextField, Typography} from '@material-ui/core';\r\nimport ReactQuill from 'react-quill';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        createThreadName: state.manageForums.createThreadName,\r\n        createThreadBriefDesc: state.manageForums.createThreadBriefDesc,\r\n        createThreadMessage: state.manageForums.createThreadMessage,\r\n        createThreadError: state.manageForums.createThreadError,\r\n        threadEdited: state.manageForums.threadEdited\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        createNewThread: () => dispatch(forumsActions.createNewThread()),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor))\r\n    }\r\n};\r\n\r\nclass CreateThread extends Component {\r\n\r\n    /**\r\n     * Handle react quill changed\r\n     *\r\n     * @param field\r\n     * @returns {Function}\r\n     */\r\n    handleQuillChanged = field => (content, delta, source, editor) => {\r\n        this.props.handleQuillChanged(field, editor);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            createThreadName,\r\n            createThreadBriefDesc,\r\n            createThreadMessage,\r\n            createThreadError,\r\n            threadEdited,\r\n\r\n            toggleCreateNewThread,\r\n            createNewThread,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        return (\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <FlexView column >\r\n                        <Typography paragraph variant=\"h6\" color=\"primary\" >\r\n                            {\r\n                                threadEdited\r\n                                    ?\r\n                                    \"Edit thread\"\r\n                                    :\r\n                                    \"Create thread\"\r\n                            }\r\n                        </Typography>\r\n                        {\r\n                            threadEdited\r\n                                ?\r\n                                null\r\n                                :\r\n                                <Typography paragraph variant=\"body1\" color=\"textSecondary\" align=\"left\">A thread is a series of posts related to the same subject. Threads provide an organisational structure within a forum for users to share posts on similar topics. Creating a thread posts the first message.</Typography>\r\n                        }\r\n                        <FlexView column marginTop={10} >\r\n                            <Typography variant=\"body1\">Thread information</Typography>\r\n\r\n                            <TextField\r\n                                name=\"createThreadName\"\r\n                                label=\"Name\"\r\n                                required\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                value={createThreadName}\r\n                                error={createThreadError && createThreadName.trim().length === 0}\r\n                                onChange={handleForumsInputChanged}\r\n                            />\r\n\r\n                            <TextField\r\n                                name=\"createThreadBriefDesc\"\r\n                                label=\"Brief description\"\r\n                                required\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                value={createThreadBriefDesc}\r\n                                error={createThreadError && createThreadBriefDesc.trim().length === 0}\r\n                                onChange={handleForumsInputChanged}\r\n                            />\r\n\r\n                            <FlexView column marginTop={40} >\r\n                                <Typography paragraph variant=\"body1\">Thread message</Typography>\r\n                                <ReactQuill\r\n                                    placeholder=\"Write your thread message here. Add images for visual effects.\"\r\n                                    theme=\"snow\"\r\n                                    value={createThreadMessage}\r\n                                    onChange={this.handleQuillChanged(forumsActions.THREAD_CONTENT_QUILL)}\r\n                                    modules={modules}\r\n                                />\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </Col>\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Row noGutters >\r\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }}>\r\n                            <FlexView>\r\n                                {\r\n                                    !createThreadError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\">Please fill in the required fields.</Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }}>\r\n                            <FlexView hAlignContent=\"right\">\r\n                                <FlexView marginRight={5}>\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleCreateNewThread(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView marginLeft={5} >\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={createNewThread}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Submit</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateThread);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from 'react-flexview';\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {SORT_BY_CURRENT_USER, SORT_BY_LAST, SORT_BY_OLDEST} from './Forums';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        threadsTablePage: state.manageForums.threadsTablePage,\r\n        threadsTableRowsPerPage: state.manageForums.threadsTableRowsPerPage,\r\n\r\n        threadsLoadMode: state.manageForums.threadsLoadMode,\r\n        threadsSortedMode: state.manageForums.threadsSortedMode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        deleteThread: (threadID) => dispatch(forumsActions.deleteThread(threadID)),\r\n        goBackToForumsList: () => dispatch(forumsActions.goBackToForumsList()),\r\n        clickOnAParticularThread: (thread) => dispatch(forumsActions.clickOnAParticularThread(thread)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass IndividualForum extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    /**\r\n     * Render threads table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderThreads = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            forumThreadsLoaded,\r\n            forumThreads,\r\n            threadsSortedMode,\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            toggleCreateNewThread,\r\n            deleteThread,\r\n            clickOnAParticularThread\r\n        } = this.props;\r\n\r\n        if (!forumThreadsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={20} >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedThreads = [];\r\n\r\n        switch (threadsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n                sortedThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread1.dateCreated - thread2.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedThreads.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <Typography variant=\"body1\" align=\"center\" style={{ marginTop: 20, marginBottom: 20 }}>No threads created.</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedThreads\r\n                .slice(threadsTablePage * threadsTableRowsPerPage, threadsTablePage * threadsTableRowsPerPage + threadsTableRowsPerPage)\r\n                .map(thread => (\r\n                        <TableRow\r\n                            key={thread.id}\r\n                            hover\r\n                        >\r\n                            <TableCell>\r\n                                <Typography align=\"left\" variant=\"body2\" >{utils.dateTimeInReadableFormat(thread.dateCreated)}</Typography>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 400 }} >\r\n                                <FlexView column hAlignContent=\"left\" >\r\n                                    <ButtonBase onClick={() => clickOnAParticularThread(thread)} >\r\n                                        <Typography align=\"left\" variant=\"body2\" color=\"primary\" noWrap>{thread.name}</Typography>\r\n                                    </ButtonBase>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                        && (\r\n                                            !thread.hasOwnProperty('deleted')\r\n                                            || (\r\n                                                thread.hasOwnProperty('deleted')\r\n                                                && thread.deleted === false\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={12} >\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"secondary\"\r\n                                                    onClick={() => deleteThread(thread.id)}\r\n                                                    style={{ marginRight: 10 }}\r\n                                                >Delete\r\n                                                    <DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }}/>\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => toggleCreateNewThread(true, JSON.parse(JSON.stringify(thread)))}\r\n                                                > Edit\r\n                                                    <EditIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 400 }} >\r\n                                <Typography align=\"left\" variant=\"body2\" noWrap>{thread.description}</Typography>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 200 }} >\r\n                                <Typography align=\"left\" variant=\"body2\" noWrap >\r\n                                    {\r\n                                        thread.author.type !== DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            // normal users\r\n                                            `${thread.author.firstName} ${thread.author.lastName}`\r\n                                            :\r\n                                            thread.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                \"Invest West Super Admin\"\r\n                                                :\r\n                                                // group admins\r\n                                                `${thread.author.groupDetails.displayName} Admin`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            threadsLoadMode,\r\n            threadsSortedMode,\r\n\r\n            toggleCreateNewThread,\r\n            handleForumsInputChanged,\r\n            goBackToForumsList\r\n        } = this.props;\r\n\r\n        let sortedThreads = [...forumThreads];\r\n\r\n        if (threadsSortedMode === SORT_BY_CURRENT_USER) {\r\n            sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n            sortedThreads.sort((thread1, thread2) => {\r\n                return (thread2.dateCreated - thread1.dateCreated);\r\n            });\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <FlexView vAlignContent=\"center\" >\r\n                    <IconButton color=\"primary\" aria-label=\"Back\" onClick={goBackToForumsList} >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView marginLeft={8} >\r\n                        <Typography color=\"primary\" variant=\"h6\">{`Forum: ${forumSelected.name}`}</Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <FlexView marginTop={12} marginBottom={24} >\r\n                    <Typography variant=\"body2\" align=\"left\" >\r\n                        {\r\n                            !forumSelected.hasOwnProperty('lastEdited')\r\n                                ?\r\n                                `Created on: ${utils.dateTimeInReadableFormat(forumSelected.dateCreated)}`\r\n                                :\r\n                                `Last edited: ${utils.dateTimeInReadableFormat(forumSelected.lastEdited)}`\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n\r\n                <Typography variant=\"body1\" align=\"left\"><b><u>Description:</u></b></Typography>\r\n\r\n                <Typography variant=\"body1\" align=\"left\" style={{ whiteSpace: \"pre-line\", marginTop: 6 }}>{forumSelected.description}</Typography>\r\n\r\n                <Divider style={{ height: 2, marginTop: 35, marginBottom: 35, backgroundColor: colors.blue_gray_100 }} />\r\n\r\n                <FlexView marginBottom={35} >\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        onClick={() => toggleCreateNewThread(true, null)}\r\n                    >\r\n                        <AddIcon fontSize=\"small\" style={{ marginRight: 10 }}/>Create thread\r\n                    </Button>\r\n                </FlexView>\r\n\r\n                {/** Filters */}\r\n                <Container fluid style={{ padding: 0, marginBottom: 40 }} >\r\n                    <Row>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                                ?\r\n                                <Col xs={12} sm={12} md={4} lg={2} >\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Mode</Typography>\r\n                                        <Paper>\r\n                                            <FormControl fullWidth >\r\n                                                <Select\r\n                                                    value={threadsLoadMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput labelWidth={0} name=\"threadsLoadMode\" />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem value={realtimeDBUtils.LOAD_LIVE_THREADS}>Live threads</MenuItem>\r\n                                                    <MenuItem value={realtimeDBUtils.LOAD_DELETED_THREADS}>Deleted threads</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                                :\r\n                                null\r\n                        }\r\n                        <Col xs={12} sm={12} md={4} lg={2} >\r\n                            <FlexView column >\r\n                                <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Sort by</Typography>\r\n                                <Paper>\r\n                                    <FormControl fullWidth >\r\n                                        <Select\r\n                                            value={threadsSortedMode}\r\n                                            onChange={handleForumsInputChanged}\r\n                                            margin=\"dense\"\r\n                                            input={\r\n                                                <OutlinedInput labelWidth={0} name=\"threadsSortedMode\" />\r\n                                            }\r\n                                        >\r\n                                            <MenuItem value={SORT_BY_LAST}>Newest</MenuItem>\r\n                                            <MenuItem value={SORT_BY_CURRENT_USER}>Mine</MenuItem>\r\n                                            <MenuItem value={SORT_BY_OLDEST}>Oldest</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Paper>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n\r\n                {/** Threads table */}\r\n                <Paper style={{ overflowX: \"auto\" }}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Date</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Thread</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Description</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Author</b></Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderThreads()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[5, 20, 50]}\r\n                                    count={sortedThreads.length}\r\n                                    rowsPerPage={threadsTableRowsPerPage}\r\n                                    page={threadsTablePage}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={this.tableChangePage('threads')}\r\n                                    onChangeRowsPerPage={this.tableChangeRowsPerPage('threads')}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualForum);","import React, {Component} from 'react';\r\n\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport {Button, Paper, TextField, Typography} from '@material-ui/core';\r\nimport ReactQuill from 'react-quill';\r\nimport {Col, Row} from 'react-bootstrap';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        submitThreadReply: () => dispatch(forumsActions.submitThreadReply()),\r\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\r\n    }\r\n};\r\n\r\nclass CreateReply extends Component {\r\n\r\n    /**\r\n     * Handle react quill changed\r\n     *\r\n     * @param field\r\n     * @returns {Function}\r\n     */\r\n    handleQuillChanged = field => (content, delta, source, editor) => {\r\n        this.props.handleQuillChanged(field, editor);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            threadReplySubject,\r\n            threadReplyMessage,\r\n            createThreadReplyError,\r\n\r\n            handleForumsInputChanged,\r\n            submitThreadReply,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper style={{ marginTop: 20 }} className={css(styles.thread_reply_style)} >\r\n                <FlexView column >\r\n                    <TextField\r\n                        name=\"threadReplySubject\"\r\n                        label=\"Subject\"\r\n                        required\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        value={threadReplySubject}\r\n                        error={createThreadReplyError && threadReplySubject.trim().length === 0}\r\n                        onChange={handleForumsInputChanged}\r\n                    />\r\n\r\n                    <FlexView column marginTop={30} >\r\n                        <Typography paragraph variant=\"body1\" >Message *</Typography>\r\n                        <ReactQuill\r\n                            placeholder=\"Write your reply here. Add images for visual effects.\"\r\n                            value={threadReplyMessage}\r\n                            theme=\"snow\"\r\n                            onChange={this.handleQuillChanged(forumsActions.THREAD_REPLY_CONTENT_QUILL)}\r\n                            modules={modules}\r\n                        />\r\n                    </FlexView>\r\n\r\n                    <Row noGutters >\r\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }}>\r\n                            <FlexView>\r\n                                {\r\n                                    !createThreadReplyError\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\" > Please fill in the required fields. </Typography>\r\n                                }\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }} >\r\n                            <FlexView hAlignContent=\"right\" >\r\n                                <FlexView marginRight={5} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        onClick={() => toggleThreadReply(false, null)}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView marginLeft={5}>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={submitThreadReply}\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                    >Submit</Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            </Paper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateReply);\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});\r\n","import React, {Component} from 'react';\r\n\r\nimport {Button, IconButton, Paper, Typography} from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {Image} from 'react-bootstrap';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport LetterAvatar from '../profile/LetterAvatar';\r\nimport CreateReply from './CreateReply';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst AVATAR_MAX_HEIGHT = 75;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplyEdited: state.manageForums.threadReplyEdited,\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        deleteThreadReply: (threadReplyID) => dispatch(forumsActions.deleteThreadReply(threadReplyID)),\r\n        goBackToThreadsList: () => dispatch(forumsActions.goBackToThreadsList())\r\n    }\r\n};\r\n\r\nclass IndividualThread extends Component {\r\n\r\n    /**\r\n     * Render replies within this thread\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderReplies = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            forumThreadReplies,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            toggleThreadReply,\r\n            deleteThreadReply\r\n        } = this.props;\r\n\r\n        if (forumThreadReplies.length === 0) {\r\n            return;\r\n        }\r\n\r\n        forumThreadReplies.sort((reply1, reply2) => {\r\n            return (reply2.replyDate - reply1.replyDate);\r\n        });\r\n\r\n        return forumThreadReplies.map(reply => (\r\n            <Paper key={reply.id} className={css(styles.thread_reply_style)} >\r\n                {\r\n                    reply.hasOwnProperty('deleted')\r\n                    && reply.deleted === true\r\n                        ?\r\n                        <FlexView>\r\n                            <Typography variant=\"body1\" align=\"left\"><i>This reply has been removed.</i></Typography>\r\n                        </FlexView>\r\n                        :\r\n                        <FlexView column width=\"100%\" >\r\n                            <FlexView vAlignContent=\"center\" marginBottom={10} width=\"100%\" >\r\n                                {/** Author's avatar */}\r\n                                <FlexView hAlignContent=\"left\" >\r\n                                    {\r\n                                        reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            reply.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                <FlexView\r\n                                                    width={AVATAR_MAX_HEIGHT}\r\n                                                    height={AVATAR_MAX_HEIGHT}\r\n                                                >\r\n                                                    <Image roundedCircle thumbnail src={require('../../img/admin_logo.png').default} style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }} />\r\n                                                </FlexView>\r\n                                                :\r\n                                                // group admins\r\n                                                <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={ utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, reply.author.groupDetails) }\r\n                                                        style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            :\r\n                                            (\r\n                                                !reply.author.profilePicture\r\n                                                || (reply.author.profilePicture && reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                                    ?\r\n                                                    // normal users with no profile picture\r\n                                                    <LetterAvatar\r\n                                                        firstName={reply.author.firstName}\r\n                                                        lastName={reply.author.lastName}\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                        textVariant=\"h5\"\r\n                                                    />\r\n                                                    :\r\n                                                    // normal users with profile picture\r\n                                                    <FlexView\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                    >\r\n                                                        <Image\r\n                                                            roundedCircle\r\n                                                            thumbnail\r\n                                                            src={\r\n                                                                reply.author.profilePicture[reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                            }\r\n                                                            style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                        />\r\n                                                    </FlexView>\r\n                                            )\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                {/** Author name and dates */}\r\n                                <FlexView column marginLeft={15} hAlignContent=\"left\" >\r\n                                    <Typography variant=\"body1\" align=\"left\" >\r\n                                        <b>\r\n                                            {\r\n                                                reply.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // normal users\r\n                                                    `${reply.author.firstName} ${reply.author.lastName}`\r\n                                                    :\r\n                                                    reply.author.superAdmin\r\n                                                        ?\r\n                                                        // super admins\r\n                                                        \"Invest West Super Admin\"\r\n                                                        :\r\n                                                        // group admins\r\n                                                        `${reply.author.groupDetails.displayName} Admin`\r\n                                            }\r\n                                        </b>\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle2\" align=\"left\" >\r\n                                        {\r\n                                            !reply.hasOwnProperty('lastEdited')\r\n                                                ?\r\n                                                `Replied on: ${utils.dateTimeInReadableFormat(reply.replyDate)}`\r\n                                                :\r\n                                                `Last edited: ${utils.dateTimeInReadableFormat(reply.lastEdited)}`\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n\r\n                                {/** Delete/Edit reply */}\r\n                                {\r\n                                    (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                    ) || currentUser.id === reply.author.id\r\n                                        ?\r\n                                        <FlexView hAlignContent=\"left\" vAlignContent=\"center\" marginLeft={60} >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"secondary\"\r\n                                                onClick={() => deleteThreadReply(reply.id)}\r\n                                                style={{ marginRight: 10 }}\r\n                                            >Delete<DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"primary\"\r\n                                                onClick={() => toggleThreadReply(true, JSON.parse(JSON.stringify(reply)))}\r\n                                            >Edit<EditIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                !reply.message\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column marginTop={15} dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(reply.message.ops)}} />\r\n                            }\r\n\r\n                            {\r\n                                threadInReplyMode\r\n                                && threadReplyEdited\r\n                                && threadReplyEdited.id === reply.id\r\n                                    ?\r\n                                    <CreateReply/>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </FlexView>\r\n                }\r\n            </Paper>\r\n        ));\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupProperties,\r\n\r\n            forumThreadSelected,\r\n            forumThreadRepliesLoaded,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            goBackToThreadsList,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        if (!forumThreadRepliesLoaded) {\r\n            return (\r\n                <FlexView hAlignContent=\"center\" >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <FlexView vAlignContent=\"center\" marginBottom={24} >\r\n                    <IconButton color=\"primary\" aria-label=\"Back\" onClick={goBackToThreadsList} >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView marginLeft={8} >\r\n                        <Typography color=\"primary\" variant=\"h6\">{`Thread: ${forumThreadSelected.name}`}</Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <Paper className={css(styles.thread_reply_style)} >\r\n                    <FlexView column >\r\n                        <FlexView vAlignContent=\"center\" marginBottom={10} >\r\n                            {\r\n                                forumThreadSelected.author.type === DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    forumThreadSelected.author.superAdmin\r\n                                        ?\r\n                                        // super admins\r\n                                        <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={require('../../img/admin_logo.png').default}\r\n                                                style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                            />\r\n                                        </FlexView>\r\n                                        :\r\n                                        // group admins\r\n                                        <FlexView\r\n                                            width={AVATAR_MAX_HEIGHT}\r\n                                            height={AVATAR_MAX_HEIGHT}\r\n                                        >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={\r\n                                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, forumThreadSelected.author.groupDetails)\r\n                                                }\r\n                                                style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                            />\r\n                                        </FlexView>\r\n                                    :\r\n                                    (\r\n                                        !forumThreadSelected.author.profilePicture\r\n                                        || (forumThreadSelected.author.profilePicture && forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                            ?\r\n                                            // normal users with no profile picture\r\n                                            <LetterAvatar\r\n                                                firstName={forumThreadSelected.author.firstName}\r\n                                                lastName={forumThreadSelected.author.lastName}\r\n                                                width={AVATAR_MAX_HEIGHT}\r\n                                                height={AVATAR_MAX_HEIGHT}\r\n                                                textVariant=\"h5\"\r\n                                            />\r\n                                            :\r\n                                            // normal users with profile picture\r\n                                            <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        forumThreadSelected.author.profilePicture[forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    )\r\n                            }\r\n                            <FlexView column marginLeft={15} marginBottom={10} >\r\n                                <Typography variant=\"body1\" >\r\n                                    <b>\r\n                                        {\r\n                                            forumThreadSelected.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                // normal users\r\n                                                `${forumThreadSelected.author.firstName} ${forumThreadSelected.author.lastName}`\r\n                                                :\r\n                                                forumThreadSelected.author.superAdmin\r\n                                                    ?\r\n                                                    // super admins\r\n                                                    \"Invest West Super Admin\"\r\n                                                    :\r\n                                                    // group admins\r\n                                                    `${forumThreadSelected.author.groupDetails.displayName} Admin`\r\n                                        }\r\n                                    </b>\r\n                                </Typography>\r\n\r\n                                <Typography variant=\"subtitle2\" align=\"left\" >\r\n                                    {\r\n                                        !forumThreadSelected.hasOwnProperty('lastEdited')\r\n                                            ?\r\n                                            `Created on: ${utils.dateTimeInReadableFormat(forumThreadSelected.dateCreated)}`\r\n                                            :\r\n                                            `Last edited: ${utils.dateTimeInReadableFormat(forumThreadSelected.lastEdited)}`\r\n                                    }\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                        <Typography variant=\"body1\" align=\"left\"><b><u>Description:</u></b></Typography>\r\n                        <Typography variant=\"body1\" align=\"left\" style={{ whiteSpace: \"pre-line\", marginTop: 6, marginBottom: 15 }}>{forumThreadSelected.description}</Typography>\r\n                        {\r\n                            !forumThreadSelected.message\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    column\r\n                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(forumThreadSelected.message.ops)}}\r\n                                    marginTop={25}\r\n                                />\r\n                        }\r\n                        {\r\n                            threadInReplyMode\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView marginTop={25} marginBottom={8} >\r\n                                    <Button\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleThreadReply(true, null)}\r\n                                    >Reply</Button>\r\n                                </FlexView>\r\n                        }\r\n                    </FlexView>\r\n                </Paper>\r\n                {\r\n                    !threadInReplyMode\r\n                        ?\r\n                        null\r\n                        :\r\n                        threadReplyEdited\r\n                            ?\r\n                            null\r\n                            :\r\n                            <CreateReply/>\r\n                }\r\n                <FlexView column marginTop={20} >\r\n                    {\r\n                        this.renderReplies()\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualThread);\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css} from 'aphrodite';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    FormControl,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\nimport CreateForum from './CreateForum';\r\nimport CreateThread from './CreateThread';\r\nimport IndividualForum from './IndividualForum';\r\nimport IndividualThread from './IndividualThread';\r\nimport './Forums.scss';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const MODE_FORUMS_MAIN = 0;\r\nexport const MODE_CREATE_FORUM = 1;\r\nexport const MODE_VIEW_FORUM = 2;\r\nexport const MODE_CREATE_THREAD = 3;\r\nexport const MODE_VIEW_THREAD = 4;\r\n\r\nexport const SORT_BY_CURRENT_USER = 0;\r\nexport const SORT_BY_LAST = 1;\r\nexport const SORT_BY_OLDEST = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        modeForums: state.manageForums.modeForums,\r\n\r\n        forumsSortedMode: state.manageForums.forumsSortedMode,\r\n        forumsLoadMode: state.manageForums.forumsLoadMode,\r\n\r\n        forums: state.manageForums.forums,\r\n        forumsLoaded: state.manageForums.forumsLoaded,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        forumsTablePage: state.manageForums.forumsTablePage,\r\n        forumsTableRowsPerPage: state.manageForums.forumsTableRowsPerPage,\r\n\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadForums: (mode) => dispatch(forumsActions.loadForums(mode)),\r\n        startListeningForForumsChanged: () => dispatch(forumsActions.startListeningForForumsChanged()),\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        startListeningForThreadsChanged: () => dispatch(forumsActions.startListeningForThreadsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        startListeningForThreadRepliesChanged: () => dispatch(forumsActions.startListeningForThreadRepliesChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        clickOnAParticularForum: (forum) => dispatch(forumsActions.clickOnAParticularForum(forum)),\r\n        deleteForum: (forumID) => dispatch(forumsActions.deleteForum(forumID)),\r\n\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass Forums extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadForums\r\n        } = this.props;\r\n\r\n        // load forums when this component is displayed\r\n        loadForums(realtimeDBUtils.LOAD_LIVE_FORUMS);\r\n\r\n        // call add and remove listeners here because when switching to another tab, all the listeners will be removed,\r\n        // but when switching back to the Forums tab, the componentDidUpdate won't be called. As a result, the listeners\r\n        // will not be added according to the state of the forum components.\r\n        // Therefore, we call add and remove listeners explicitly in this componentDidMount to ensure\r\n        // the listeners will be added accordingly to the Forums state.\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    /**\r\n     * Add and remove listeners accordingly to the Forums state\r\n     */\r\n    addAndRemoveListeners = () => {\r\n        const {\r\n            forums,\r\n            forumsLoaded,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n            forumThreadsLoaded,\r\n\r\n            forumThreadSelected,\r\n            forumThreadReplies,\r\n            forumThreadRepliesLoaded,\r\n\r\n            startListeningForForumsChanged,\r\n            startListeningForThreadsChanged,\r\n            stopListeningForThreadsChanged,\r\n            startListeningForThreadRepliesChanged,\r\n            stopListeningForThreadRepliesChanged\r\n        } = this.props;\r\n\r\n        // forums have been loaded\r\n        if (forums && forumsLoaded) {\r\n            startListeningForForumsChanged();\r\n        }\r\n\r\n        // if the user is viewing threads of a particular forum\r\n        // and all the threads have been loaded\r\n        if (forumSelected && forumThreads && forumThreadsLoaded) {\r\n            startListeningForThreadsChanged();\r\n        }\r\n\r\n        // remove threads listener when the user is not viewing the threads\r\n        if (!forumSelected && !forumThreadsLoaded) {\r\n            stopListeningForThreadsChanged();\r\n        }\r\n\r\n        // if the user is viewing the replies within a particular thread\r\n        // and all replies have been loaded\r\n        if (forumThreadSelected && forumThreadReplies && forumThreadRepliesLoaded) {\r\n            startListeningForThreadRepliesChanged();\r\n        }\r\n\r\n        // remove replies listener when the user is not viewing the replies\r\n        if (!forumThreadSelected && !forumThreadRepliesLoaded) {\r\n            stopListeningForThreadRepliesChanged();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render content of the Forums tab\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderContent = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n            modeForums,\r\n\r\n            forums,\r\n\r\n            forumsSortedMode,\r\n            forumsLoadMode,\r\n\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            toggleCreateNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        switch (modeForums) {\r\n            case MODE_FORUMS_MAIN: {\r\n\r\n                let sortedForums = [...forums];\r\n\r\n                if (forumsSortedMode === SORT_BY_CURRENT_USER) {\r\n                    sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                    sortedForums.sort((forum1, forum2) => {\r\n                        return (forum2.dateCreated - forum1.dateCreated)\r\n                    });\r\n                }\r\n\r\n                return (\r\n                    <FlexView column >\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" >\r\n                            Forums are made up of individual discussion threads that can be organised around a\r\n                            particular subject.\r\n                            Create forums to organise discussions.\r\n                            <br/>\r\n                            <u>Note that all forums are visible across the Invest West network.</u>\r\n                        </Typography>\r\n                        <FlexView marginTop={35} marginBottom={35} >\r\n                            <Button\r\n                                color=\"primary\"\r\n                                variant=\"outlined\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                onClick={() => toggleCreateNewForum(true, null)}\r\n                            >\r\n                                <AddIcon fontSize=\"small\" style={{ marginRight: 10 }} />\r\n                                Create forum\r\n                            </Button>\r\n                        </FlexView>\r\n\r\n                        {/** Filters */}\r\n                        <Container fluid style={{ padding: 0, marginBottom: 40 }} >\r\n                            <Row>\r\n                                {\r\n                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                    && currentUser.superAdmin\r\n                                        ?\r\n                                        <Col xs={12} sm={12} md={4} lg={2} >\r\n                                            <FlexView column >\r\n                                                <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Mode</Typography>\r\n                                                <Paper>\r\n                                                    <FormControl fullWidth >\r\n                                                        <Select\r\n                                                            value={forumsLoadMode}\r\n                                                            onChange={handleForumsInputChanged}\r\n                                                            margin=\"dense\"\r\n                                                            input={\r\n                                                                <OutlinedInput labelWidth={0} name=\"forumsLoadMode\" /> }\r\n                                                        >\r\n                                                            <MenuItem value={realtimeDBUtils.LOAD_LIVE_FORUMS}>Live forums</MenuItem>\r\n                                                            <MenuItem value={realtimeDBUtils.LOAD_DELETED_FORUMS}>Deleted forums</MenuItem>\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Paper>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        :\r\n                                        null\r\n                                }\r\n                                <Col xs={12} sm={12} md={4} lg={2} >\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Sort by</Typography>\r\n                                        <Paper>\r\n                                            <FormControl fullWidth >\r\n                                                <Select\r\n                                                    value={forumsSortedMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput labelWidth={0} name=\"forumsSortedMode\" />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem value={SORT_BY_LAST}>Newest</MenuItem>\r\n                                                    <MenuItem value={SORT_BY_CURRENT_USER}>Mine</MenuItem>\r\n                                                    <MenuItem value={SORT_BY_OLDEST}>Oldest</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n\r\n                        {/** Forums table */}\r\n                        <Paper style={{ overflowX: \"auto\" }} >\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Date</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Forum</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Description</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Author</b></Typography>\r\n                                            }\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {\r\n                                        this.renderForums()\r\n                                    }\r\n                                </TableBody>\r\n                                <TableFooter>\r\n                                    <TableRow>\r\n                                        <TablePagination\r\n                                            style={{\r\n                                                backgroundColor: colors.blue_gray_50\r\n                                            }}\r\n                                            rowsPerPageOptions={[5, 20, 50]}\r\n                                            count={sortedForums.length}\r\n                                            rowsPerPage={forumsTableRowsPerPage}\r\n                                            page={forumsTablePage}\r\n                                            backIconButtonProps={{\r\n                                                'aria-label': 'Previous Page',\r\n                                            }}\r\n                                            nextIconButtonProps={{\r\n                                                'aria-label': 'Next Page',\r\n                                            }}\r\n                                            SelectProps={{\r\n                                                native: true,\r\n                                            }}\r\n                                            onChangePage={this.tableChangePage('forums')}\r\n                                            onChangeRowsPerPage={this.tableChangeRowsPerPage('forums')}\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableFooter>\r\n                            </Table>\r\n                        </Paper>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            case MODE_CREATE_FORUM:\r\n                return (\r\n                    <CreateForum/>\r\n                );\r\n\r\n            case MODE_VIEW_FORUM:\r\n                return (\r\n                    <IndividualForum/>\r\n                );\r\n\r\n            case MODE_CREATE_THREAD:\r\n                return (\r\n                    <CreateThread/>\r\n                );\r\n\r\n            case MODE_VIEW_THREAD:\r\n                return (\r\n                    <IndividualThread/>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render forums table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderForums = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n\r\n            forums,\r\n            forumsLoaded,\r\n            forumsSortedMode,\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            clickOnAParticularForum,\r\n            deleteForum,\r\n            toggleCreateNewForum\r\n        } = this.props;\r\n\r\n        if (!forumsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={20} >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedForums = [];\r\n\r\n        switch (forumsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                sortedForums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum1.dateCreated - forum2.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedForums.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <Typography variant=\"body1\" align=\"center\" style={{ marginTop: 20, marginBottom: 20 }}>No forums created.</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedForums\r\n                .slice(forumsTablePage * forumsTableRowsPerPage, forumsTablePage * forumsTableRowsPerPage + forumsTableRowsPerPage)\r\n                .map(forum => (\r\n                        <ForumRow\r\n                            currentUser={currentUser}\r\n                            key={forum.id}\r\n                            forum={forum}\r\n                            onForumClick={clickOnAParticularForum}\r\n                            deleteForum={deleteForum}\r\n                            toggleEditForum={toggleCreateNewForum}\r\n                        />\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 30 }} >\r\n                {\r\n                    this.renderContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Forums);\r\n\r\n\r\n/**\r\n * Forum row component ------------------------------------------------------------------------------------------------------------------\r\n */\r\nclass ForumRow extends Component {\r\n\r\n    onForumClick = forum => {\r\n        this.props.onForumClick(forum);\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            currentUser,\r\n            forum,\r\n\r\n            deleteForum,\r\n            toggleEditForum\r\n        } = this.props;\r\n\r\n        return (\r\n            <TableRow hover >\r\n                <TableCell> <Typography align=\"left\" variant=\"body2\">{utils.dateTimeInReadableFormat(forum.dateCreated)}</Typography>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 400 }} >\r\n                    <FlexView column hAlignContent=\"left\" >\r\n                        <ButtonBase onClick={() => this.onForumClick(forum)} >\r\n                            <Typography align=\"left\" variant=\"body2\" color=\"primary\" noWrap>{forum.name}</Typography>\r\n                        </ButtonBase>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                            && (\r\n                                !forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            )\r\n                                ?\r\n                                <FlexView marginTop={12} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"secondary\"\r\n                                        onClick={() => deleteForum(forum.id)}\r\n                                        style={{ marginRight: 10 }}\r\n                                    >Delete\r\n                                        <DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleEditForum(true, JSON.parse(JSON.stringify(forum)))}\r\n                                    >Edit\r\n                                        <EditIcon fontSize=\"small\" style={{ marginLeft: 6 }}/>\r\n                                    </Button>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 400 }}>\r\n                    <Typography variant=\"body2\" align=\"left\" noWrap>{forum.description}</Typography>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 200 }} >\r\n                    <Typography align=\"left\" variant=\"body2\" noWrap >\r\n                        {\r\n                            forum.author.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // normal users\r\n                                `${forum.author.firstName} ${forum.author.lastName}`\r\n                                :\r\n                                forum.author.superAdmin\r\n                                    ?\r\n                                    // super admins\r\n                                    \"Invest West Super Admin\"\r\n                                    :\r\n                                    // group admins\r\n                                    `${forum.author.groupDetails.displayName} Admin`\r\n                        }\r\n                    </Typography>\r\n                </TableCell>\r\n            </TableRow>\r\n        )\r\n    }\r\n}\r\n","import {\r\n    MODE_CREATE_FORUM,\r\n    MODE_CREATE_THREAD,\r\n    MODE_FORUMS_MAIN,\r\n    MODE_VIEW_FORUM,\r\n    MODE_VIEW_THREAD,\r\n    SORT_BY_LAST\r\n} from '../../shared-components/forums/Forums';\r\nimport * as forumsActions from '../actions/forumsActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\n\r\nconst initState = {\r\n    modeForums: MODE_FORUMS_MAIN,\r\n\r\n    forumsSortedMode: SORT_BY_LAST,\r\n    forumsLoadMode: realtimeDBUtils.LOAD_LIVE_FORUMS,\r\n\r\n    threadsLoadMode: realtimeDBUtils.LOAD_LIVE_THREADS,\r\n    threadsSortedMode: SORT_BY_LAST,\r\n\r\n    forums: [],\r\n    forumsLoaded: false,\r\n\r\n    forumsTablePage: 0,\r\n    forumsTableRowsPerPage: 5,\r\n\r\n    forumSelected: null,\r\n    forumThreads: [],\r\n    forumThreadsLoaded: false,\r\n\r\n    forumThreadSelected: null,\r\n    forumThreadReplies: [],\r\n    forumThreadRepliesLoaded: false,\r\n\r\n    threadsTablePage: 0,\r\n    threadsTableRowsPerPage: 5,\r\n\r\n    createForumName: '',\r\n    createForumDesc: '',\r\n    createForumAuthor: null,\r\n    createForumError: false,\r\n    forumEdited: null,\r\n\r\n    createThreadName: '',\r\n    createThreadBriefDesc: '',\r\n    createThreadMessage: {ops: []},\r\n    createThreadError: false,\r\n    threadEdited: null,\r\n\r\n    threadInReplyMode: false,\r\n    threadReplyEdited: null,\r\n    threadReplySubject: '',\r\n    threadReplyMessage: {ops: []},\r\n    createThreadReplyError: false\r\n};\r\n\r\nconst forumsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case forumsActions.GO_BACK_TO_FORUMS_MAIN:\r\n            return {\r\n                ...initState,\r\n                forums: state.forums,\r\n                forumsLoaded: state.forumsLoaded,\r\n                forumsSortedMode: state.forumsSortedMode,\r\n                forumsLoadMode: state.forumsLoadMode,\r\n\r\n                forumsTablePage: state.forumsTablePage,\r\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\r\n            };\r\n        case forumsActions.LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [],\r\n                forumsLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [...action.forums],\r\n                forumsLoaded: true\r\n            };\r\n        case forumsActions.ERROR_LOADING_FORUMS:\r\n            return {\r\n                ...state,\r\n                forums: [],\r\n                forumsLoaded: true\r\n            };\r\n        case forumsActions.TOGGLE_CREATE_NEW_FORUM:\r\n            return {\r\n                ...state,\r\n                modeForums: action.open\r\n                    ?\r\n                    MODE_CREATE_FORUM\r\n                    :\r\n                    MODE_FORUMS_MAIN\r\n                ,\r\n                forumEdited: action.forumEdited\r\n                    ?\r\n                    JSON.parse(JSON.stringify(action.forumEdited))\r\n                    :\r\n                    null\r\n                ,\r\n                createForumName:\r\n                    action.forumEdited\r\n                        ?\r\n                        action.forumEdited.name\r\n                        :\r\n                        ''\r\n                ,\r\n                createForumDesc:\r\n                    action.forumEdited\r\n                        ?\r\n                        action.forumEdited.description\r\n                        :\r\n                        ''\r\n                ,\r\n                createForumError: false,\r\n                createForumAuthor: null\r\n            };\r\n        case forumsActions.ERROR_CREATING_NEW_FORUM:\r\n            return {\r\n                ...state,\r\n                createForumError: true\r\n            };\r\n        case forumsActions.FORUMS_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case forumsActions.LOADING_THREADS_IN_A_FORUM:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_FORUM,\r\n                forumSelected: JSON.parse(JSON.stringify(action.forumSelected)),\r\n                forumThreadsLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_THREADS_IN_A_FORUM:\r\n            return {\r\n                ...state,\r\n                forumThreads: [...action.threads],\r\n                forumThreadsLoaded: true\r\n            };\r\n        case forumsActions.GO_BACK_TO_FORUMS_LIST:\r\n            return {\r\n                ...initState,\r\n                forums: state.forums,\r\n                forumsLoaded: state.forumsLoaded,\r\n                forumsSortedMode: state.forumsSortedMode,\r\n                forumsLoadMode: state.forumsLoadMode,\r\n\r\n                forumsTablePage: state.forumsTablePage,\r\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\r\n            };\r\n        case forumsActions.TOGGLE_CREATE_NEW_THREAD:\r\n            return {\r\n                ...state,\r\n                modeForums: action.open\r\n                    ?\r\n                    MODE_CREATE_THREAD\r\n                    :\r\n                    MODE_VIEW_FORUM\r\n                ,\r\n                threadEdited: action.threadEdited\r\n                    ?\r\n                    JSON.parse(JSON.stringify(action.threadEdited))\r\n                    :\r\n                    null\r\n                ,\r\n                createThreadName: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.name\r\n                    :\r\n                    ''\r\n                ,\r\n                createThreadBriefDesc: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.description\r\n                    :\r\n                    ''\r\n                ,\r\n                createThreadMessage: action.threadEdited\r\n                    ?\r\n                    action.threadEdited.message\r\n                    :\r\n                    {ops: []}\r\n                ,\r\n                createThreadError: false\r\n            };\r\n        case forumsActions.ERROR_CREATING_NEW_THREAD:\r\n            return {\r\n                ...state,\r\n                createThreadError: true\r\n            };\r\n        case forumsActions.LOADING_REPLIES_IN_A_THREAD:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_THREAD,\r\n                forumThreadSelected: JSON.parse(JSON.stringify(action.threadSelected)),\r\n                forumThreadRepliesLoaded: false\r\n            };\r\n        case forumsActions.FINISHED_LOADING_REPLIES_IN_A_THREAD:\r\n            return {\r\n                ...state,\r\n                forumThreadReplies: [...action.replies],\r\n                forumThreadRepliesLoaded: true\r\n            };\r\n        case forumsActions.GO_BACK_TO_THREADS_LIST:\r\n            return {\r\n                ...state,\r\n                modeForums: MODE_VIEW_FORUM,\r\n                forumThreadSelected: null,\r\n                forumThreadReplies: [],\r\n                forumThreadRepliesLoaded: false,\r\n\r\n                threadInReplyMode: false,\r\n                threadReplyMessage: {ops: []}\r\n            };\r\n        case forumsActions.TOGGLE_THREAD_REPLY:\r\n            return {\r\n                ...state,\r\n                threadInReplyMode: action.open,\r\n                threadReplyEdited: JSON.parse(JSON.stringify(action.threadReplyEdited)),\r\n                threadReplySubject: action.open\r\n                    ?\r\n                    action.threadReplyEdited\r\n                        ?\r\n                        action.threadReplyEdited.subject\r\n                        :\r\n                        `RE: ${state.forumThreadSelected.name}`\r\n                    :\r\n                    ''\r\n                ,\r\n                threadReplyMessage: action.open\r\n                    ?\r\n                    action.threadReplyEdited\r\n                        ?\r\n                        action.threadReplyEdited.message\r\n                        :\r\n                        {ops: []}\r\n                    :\r\n                    {ops: []}\r\n                ,\r\n                createThreadReplyError: false\r\n            };\r\n        case forumsActions.ERROR_CREATING_THREAD_REPLY:\r\n            return {\r\n                ...state,\r\n                createThreadReplyError: true\r\n            };\r\n        case forumsActions.FORUMS_QUILL_CHANGED:\r\n            return {\r\n                ...state,\r\n                createThreadMessage: action.field === forumsActions.THREAD_CONTENT_QUILL ? action.quill : state.createThreadMessage,\r\n                threadReplyMessage: action.field === forumsActions.THREAD_REPLY_CONTENT_QUILL ? action.quill : state.threadReplyMessage\r\n            };\r\n        case forumsActions.FORUMS_CHANGED:\r\n            return {\r\n                ...state,\r\n                forums: [...action.forumsChanged]\r\n            };\r\n        case forumsActions.THREADS_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumThreads: [...action.threadsChanged]\r\n            };\r\n        case forumsActions.THREAD_REPLIES_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumThreadReplies: [...action.repliesChanged]\r\n            };\r\n        case forumsActions.MANAGE_FORUMS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumsTablePage: action.table === 'forums' ? action.newPage : state.forumsTablePage,\r\n                threadsTablePage: action.table === 'threads' ? action.newPage : state.threadsTablePage\r\n            };\r\n        case forumsActions.MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                forumsTableRowsPerPage: action.table === 'forums' ? action.value : state.forumsTableRowsPerPage,\r\n                threadsTableRowsPerPage: action.table === 'threads' ? action.value : state.threadsTableRowsPerPage,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default forumsReducer;","import * as notificationsActions from '../actions/notificationsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    notificationsAnchorEl: null,\r\n    notificationBellRef: undefined,\r\n\r\n    notifications: [],\r\n    loadingNotifications: false,\r\n    notificationsLoaded: false\r\n};\r\n\r\nconst notificationsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case notificationsActions.TOGGLE_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                notificationsAnchorEl: action.notificationsAnchorEl,\r\n            };\r\n        case notificationsActions.NOTIFICATIONBELL_REF:\r\n            return {\r\n                ...state,\r\n                notificationBellRef: action.notificationBellRef\r\n            };\r\n        case notificationsActions.LOADING_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                loadingNotifications: true,\r\n                notificationsLoaded: false\r\n            };\r\n        case notificationsActions.FINISHED_LOADING_NOTIFICATIONS:\r\n            return {\r\n                ...state,\r\n                loadingNotifications: false,\r\n                notificationsLoaded: true,\r\n                notifications: [...action.notifications]\r\n            };\r\n        case notificationsActions.NOTIFICATIONS_LIST_CHANGED:\r\n            return {\r\n                ...state,\r\n                notifications: [...action.notifications]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default notificationsReducer;","import * as mediaQueryActions from '../actions/mediaQueryActions';\r\nimport * as dashboardSidebarActions from '../actions/dashboardSidebarActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {MediaQueryEvents} from \"../actions/mediaQueryActions\";\r\n\r\nconst initState = {\r\n    sidebarDocked: mediaQueryActions.laptopScreen.matches || mediaQueryActions.desktopScreen.matches,\r\n    sidebarOpen: false\r\n};\r\n\r\nconst dashboardSidebarReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case dashboardSidebarActions.TOGGLE_SIDEBAR:\r\n            return {\r\n                ...state,\r\n                sidebarDocked: action.hasOwnProperty('sidebarDocked') ? action.sidebarDocked : state.sidebarDocked,\r\n                sidebarOpen: action.sidebarOpen\r\n            };\r\n        case MediaQueryEvents.MediaQueryChanged:\r\n            return {\r\n                ...state,\r\n                sidebarDocked:\r\n                    action.name === 'isLaptop' || action.name === 'isDesktop'\r\n                        ?\r\n                        action.value\r\n                        :\r\n                        state.sidebarDocked\r\n                ,\r\n                sidebarOpen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default dashboardSidebarReducer;","import {\r\n    desktopScreen,\r\n    laptopScreen,\r\n    MediaQueryAction,\r\n    MediaQueryEvents,\r\n    minHeightScreen,\r\n    mobileScreen,\r\n    tabletScreen\r\n} from \"../actions/mediaQueryActions\";\r\n\r\nexport interface MediaQueryState {\r\n    isMobile: boolean;\r\n    isTablet: boolean;\r\n    isLaptop: boolean;\r\n    isDesktop: boolean;\r\n    minHeightScreen: boolean;\r\n}\r\n\r\nconst initState: MediaQueryState = {\r\n    isMobile: mobileScreen.matches,\r\n    isTablet: tabletScreen.matches,\r\n    isLaptop: laptopScreen.matches,\r\n    isDesktop: desktopScreen.matches,\r\n    minHeightScreen: minHeightScreen.matches\r\n};\r\n\r\nconst mediaQueryReducer = (state = initState, action: MediaQueryAction) => {\r\n    if (action.type === MediaQueryEvents.MediaQueryChanged) {\r\n        return {\r\n            ...state,\r\n            [action.name]: action.value\r\n        };\r\n    } else {\r\n        return state;\r\n    }\r\n};\r\n\r\nexport default mediaQueryReducer;","import * as superAdminSettingsActions from '../actions/superAdminSettingsActions';\r\nimport * as clubAttributesActions from '../actions/clubAttributesActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nconst initState = {\r\n    clubAttributesEdited: null,\r\n\r\n    addNewPledgeFAQ: false,\r\n    addedPledgeQuestion: '',\r\n    addedPledgeAnswer: '',\r\n    expandedPledgeFAQ: null,\r\n    editExpandedPledgeFAQ: false,\r\n    editedPledgeQuestion: '',\r\n    editedPledgeAnswer: ''\r\n};\r\n\r\nconst superAdminSettingsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: JSON.parse(JSON.stringify(action.clubAttributes))\r\n            };\r\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: {\r\n                    ...state.clubAttributesEdited,\r\n                    [action.key]: action.value\r\n                },\r\n                expandedPledgeFAQ:\r\n                    !state.expandedPledgeFAQ\r\n                        ?\r\n                        null\r\n                        :\r\n                        action.key !== DB_CONST.PLEDGE_FAQS_CHILD\r\n                            ?\r\n                            state.expandedPledgeFAQ\r\n                            :\r\n                            !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\r\n                                ?\r\n                                null\r\n                                :\r\n                                !state.expandedPledgeFAQ\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id) === -1\r\n                                        ?\r\n                                        state.expandedPledgeFAQ\r\n                                        :\r\n                                        action.value[action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id)]\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INPUT_CHANGED:\r\n            const isPropertyOfClubAttributes = action.isPropertyOfClubAttributes;\r\n\r\n            if (isPropertyOfClubAttributes) {\r\n                return {\r\n                    ...state,\r\n                    clubAttributesEdited: {\r\n                        ...state.clubAttributesEdited,\r\n                        [action.name]: action.value\r\n                    }\r\n                };\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    [action.name]: action.value\r\n                };\r\n            }\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED:\r\n            return {\r\n                ...state,\r\n                clubAttributesEdited: {\r\n                    ...state.clubAttributesEdited,\r\n                    [action.fieldName]: action.value\r\n                }\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\r\n            return {\r\n                ...state,\r\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\r\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\r\n                addedPledgeQuestion: '',\r\n                addedPledgeAnswer: ''\r\n            };\r\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\r\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\r\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default superAdminSettingsReducer;","import * as groupAdminSettingsActions from \"../actions/groupAdminSettingsActions\";\r\nimport * as manageANIDFromParamsActions from \"../actions/manageGroupFromParamsActions\";\r\nimport * as authActions from \"../actions/authActions\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as utils from \"../../utils/utils\"\r\n\r\nconst initState = {\r\n    groupAttributesEdited: null,\r\n\r\n    website: '',\r\n    description: '',\r\n    primaryColor: '',\r\n    secondaryColor: '',\r\n\r\n    addNewPledgeFAQ: false,\r\n    addedPledgeQuestion: '',\r\n    addedPledgeAnswer: '',\r\n    expandedPledgeFAQ: null,\r\n    editExpandedPledgeFAQ: false,\r\n    editedPledgeQuestion: '',\r\n    editedPledgeAnswer: ''\r\n};\r\n\r\nconst groupAdminSettingsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED:\r\n\r\n            let groupSettings = JSON.parse(JSON.stringify(action.group.settings));\r\n            // if the defaultPitchExpiryDate property does not exist,\r\n            // assign it with an initial value\r\n            if (!groupSettings.hasOwnProperty('defaultPitchExpiryDate')) {\r\n                groupSettings.defaultPitchExpiryDate = utils.getDateWithDaysFurtherThanToday(1);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                groupAttributesEdited: groupSettings,\r\n                website:  action.group.hasOwnProperty('website') ? action.group.website : '',\r\n                description: action.group.hasOwnProperty('description') ? action.group.description : '',\r\n                primaryColor: action.group.settings.primaryColor,\r\n                secondaryColor: action.group.settings.secondaryColor\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CHANGED:\r\n            const isPropertyOfGroupAttributes = action.isPropertyOfGroupAttributes;\r\n\r\n            if (isPropertyOfGroupAttributes) {\r\n                return {\r\n                    ...state,\r\n                    groupAttributesEdited: {\r\n                        ...state.groupAttributesEdited,\r\n                        [action.name]: action.value\r\n                    }\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    [action.name]: action.value\r\n                };\r\n            }\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\r\n            if (action.key === 'settings') {\r\n                return {\r\n                    ...state,\r\n                    groupAttributesEdited: JSON.parse(JSON.stringify(action.value)),\r\n                    primaryColor: action.value.primaryColor,\r\n                    secondaryColor: action.value.secondaryColor,\r\n                    expandedPledgeFAQ:\r\n                        !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\r\n                            ?\r\n                            null\r\n                            :\r\n                            !state.expandedPledgeFAQ\r\n                                ?\r\n                                null\r\n                                :\r\n                                action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id) !== -1\r\n                                    ?\r\n                                    action.value[DB_CONST.PLEDGE_FAQS_CHILD][action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id)]\r\n                                    :\r\n                                    state.expandedPledgeFAQ\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    [action.key]: action.value\r\n                }\r\n            }\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\r\n            return {\r\n                ...state,\r\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\r\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\r\n                addedPledgeQuestion: '',\r\n                addedPledgeAnswer: ''\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\r\n            return {\r\n                ...state,\r\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\r\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\r\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value\r\n            };\r\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR:\r\n            return {\r\n                ...state,\r\n                primaryColor: action.field === \"primaryColor\" ? action.color : state.primaryColor,\r\n                secondaryColor: action.field === \"secondaryColor\" ? action.color : state.secondaryColor\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default groupAdminSettingsReducer;","import * as legalDocumentsActions from '../actions/legalDocumentsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    userID: null,\r\n\r\n    legalDocuments: null,\r\n    legalDocumentsLoaded: false,\r\n    legalDocumentsBeingLoaded: false\r\n};\r\n\r\nconst legalDocumentsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT: {\r\n            return initState;\r\n        }\r\n        case legalDocumentsActions.LEGAL_DOCUMENTS_SET_USER:\r\n            return {\r\n                ...state,\r\n                userID: action.userID\r\n            };\r\n        case legalDocumentsActions.LOADING_LEGAL_DOCUMENTS:\r\n            return {\r\n                ...state,\r\n                legalDocuments: [],\r\n                legalDocumentsLoaded: false,\r\n                legalDocumentsBeingLoaded: true\r\n            };\r\n        case legalDocumentsActions.FINISHED_LOADING_LEGAL_DOCUMENTS:\r\n            return {\r\n                ...state,\r\n                legalDocuments: action.legalDocuments,\r\n                legalDocumentsLoaded: true,\r\n                legalDocumentsBeingLoaded: false\r\n            };\r\n        case legalDocumentsActions.LEGAL_DOCUMENTS_CHANGED: {\r\n            return {\r\n                ...state,\r\n                legalDocuments: action.legalDocuments\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default legalDocumentsReducer;\r\n\r\n","import * as invitedUsersActions from '../actions/invitedUsersActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {FILTER_GROUP_MEMBERS_ALL, FILTER_REGISTRATION_STATUS_ALL} from '../../pages/admin/components/InvitedUsers';\r\n\r\nconst initState = {\r\n    invitedUsers: [],\r\n    invitedUsersLoaded: false,\r\n    invitedUsersBeingLoaded: false,\r\n\r\n    invitedUsersPage: 0,\r\n    invitedUsersRowsPerPage: 5,\r\n\r\n    filterRegistrationStatus: FILTER_REGISTRATION_STATUS_ALL,\r\n    filterUserType: 0, // all user types\r\n    filterGroup: \"null\", // no group selected --> all\r\n    filterMembers: FILTER_GROUP_MEMBERS_ALL, // display all members (including home and foreign members) for group admins\r\n\r\n    invitedUserSearchText: '',\r\n    invitedUsersInSearchMode: false,\r\n\r\n    requestingCsv: false,\r\n\r\n    addingMembersFromOneGroupToAnotherGroup: false,\r\n\r\n    matchedInvitedUsers: []\r\n};\r\n\r\nconst invitedUsersReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case invitedUsersActions.LOADING_INVITED_USERS:\r\n            return {\r\n                ...state,\r\n                invitedUsers: [],\r\n                invitedUsersLoaded: false,\r\n                invitedUsersBeingLoaded: true\r\n            };\r\n        case invitedUsersActions.FINISHED_LOADING_INVITED_USERS:\r\n            return {\r\n                ...state,\r\n                invitedUsers: [...action.invitedUsers],\r\n                matchedInvitedUsers: [...action.invitedUsers],\r\n                invitedUsersLoaded: true,\r\n                invitedUsersBeingLoaded: false\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                invitedUsersInSearchMode: !state.invitedUsersInSearchMode,\r\n                invitedUserSearchText: state.invitedUsersInSearchMode ? '' : state.invitedUserSearchText,\r\n                invitedUsersPage: 0,\r\n                matchedInvitedUsers: action.matchedInvitedUsers\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_SEARCH_VARIABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.name]: action.value,\r\n                matchedInvitedUsers: action.matchedInvitedUsers,\r\n                invitedUsersPage: 0\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGE_PAGE:\r\n            return {\r\n                ...state,\r\n                invitedUsersPage: action.newPage\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGE_ROWS_PER_PAGE:\r\n            return {\r\n                ...state,\r\n                invitedUsersRowsPerPage: parseInt(action.rows, 10),\r\n                invitedUsersPage: 0\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_CHANGED:\r\n            return {\r\n                ...state,\r\n                invitedUsers: action.invitedUsers,\r\n                matchedInvitedUsers: action.matchedInvitedUsers\r\n            };\r\n        case invitedUsersActions.INVITED_USERS_REQUESTING_CSV_STATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                requestingCsv: action.value\r\n            }\r\n        case invitedUsersActions.INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                addingMembersFromOneGroupToAnotherGroup: action.value\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default invitedUsersReducer;","import * as invitationDialogActions from '../actions/invitationDialogActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    SEND_INVITATION_NONE,\r\n    SEND_INVITATION_SUCCESS\r\n} from '../../pages/admin/components/InvitationDialog';\r\n\r\nconst initState = {\r\n    invitationDialogOpen: false,\r\n\r\n    title: DB_CONST.USER_TITLES[0],\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    userType: '',\r\n\r\n    sendButtonClick: false,\r\n    sendResult: SEND_INVITATION_NONE,\r\n    sendStatusExtraInfo: null\r\n};\r\n\r\nconst invitationDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case invitationDialogActions.TOGGLE_INVITATION_DIALOG:\r\n            return {\r\n                ...initState,\r\n                invitationDialogOpen: !state.invitationDialogOpen\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_SEND_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                sendButtonClick: true\r\n            };\r\n        case invitationDialogActions.INVITATION_DIALOG_SEND_RESULT_CHANGED:\r\n            return {\r\n                ...state,\r\n                sendResult: action.result,\r\n\r\n                title: action.result === SEND_INVITATION_SUCCESS ? DB_CONST.USER_TITLES[0] : state.title,\r\n                firstName: action.result === SEND_INVITATION_SUCCESS ? '' : state.firstName,\r\n                lastName: action.result === SEND_INVITATION_SUCCESS ? '' : state.lastName,\r\n                email: action.result === SEND_INVITATION_SUCCESS ? '' : state.email,\r\n                userType: action.result === SEND_INVITATION_SUCCESS ? '' : state.userType,\r\n\r\n                sendButtonClick: action.result === SEND_INVITATION_SUCCESS ? false : state.sendButtonClick,\r\n\r\n                sendStatusExtraInfo: action.extraInfo\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default invitationDialogReducer;","import * as addAngelNetworkDialogActions from '../actions/addAngelNetworkDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    ADD_STATUS_NONE,\r\n    ADD_STATUS_SUCCESSFULLY_ADDED,\r\n    UPLOAD_PLAIN_LOGO,\r\n    UPLOAD_NONE,\r\n    UPLOAD_LOGO_WITH_TEXT\r\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\n\r\nconst initState = {\r\n    addAngelNetworkDialogOpen: false,\r\n\r\n    angelNetworkName: '',\r\n    angelNetworkUsername: '',\r\n    email: '',\r\n    website: '',\r\n    primaryColor: '',\r\n    secondaryColor: '',\r\n\r\n    plainLogo: null,\r\n    loadingPlainLogo: false,\r\n    logoWithText: null,\r\n    loadingLogoWithText: false,\r\n\r\n    uploadMode: UPLOAD_NONE,\r\n    uploadProgress: 0,\r\n\r\n    imgUploadError: '',\r\n    imgUploadErrorSnackbarOpen: false,\r\n\r\n    addButtonClicked: false,\r\n    addResult: ADD_STATUS_NONE,\r\n};\r\n\r\nconst addAngelNetworkDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case addAngelNetworkDialogActions.TOGGLE_ADD_ANGEL_NETWORK_DIALOG:\r\n            return {\r\n                ...initState,\r\n                addAngelNetworkDialogOpen: !state.addAngelNetworkDialogOpen\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                addButtonClicked: true\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESULT_CHANGED:\r\n            return {\r\n                ...state,\r\n                addResult: action.result,\r\n\r\n                angelNetworkName: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkName,\r\n                angelNetworkUsername: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkUsername,\r\n                email: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.email,\r\n                primaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.primaryColor,\r\n                secondaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.secondaryColor,\r\n\r\n                plainLogo: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.plainLogo,\r\n                logoWithText: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.logoWithText,\r\n\r\n                uploadMode: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? UPLOAD_NONE : action.hasOwnProperty('mode') ? action.mode : state.uploadMode,\r\n                uploadProgress: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? 0 : action.hasOwnProperty('progress') ? action.progress : state.uploadProgress,\r\n\r\n                addButtonClicked: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? false : state.addButtonClicked\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE:\r\n            return {\r\n                ...state,\r\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? null : state.plainLogo,\r\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? true : state.loadingPlainLogo,\r\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? null : state.logoWithText,\r\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? true : state.loadingLogoWithText\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED:\r\n            return {\r\n                ...state,\r\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? action.blob : state.plainLogo,\r\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? false : state.loadingPlainLogo,\r\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? action.blob : state.logoWithText,\r\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? false : state.loadingLogoWithText\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR:\r\n            return {\r\n                ...state,\r\n                imgUploadError: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\r\n                imgUploadErrorSnackbarOpen: true\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED:\r\n            return {\r\n                ...state,\r\n                imgUploadError: ''\r\n            };\r\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                imgUploadErrorSnackbarOpen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default addAngelNetworkDialogReducer;","import * as manageANIDFromParamsActions from '../actions/manageGroupFromParamsActions';\r\n\r\nconst initState = {\r\n    groupUserName: null,\r\n    anid: null,\r\n\r\n    groupProperties: null,\r\n    groupPropertiesLoaded: false,\r\n    angelNetworkBeingLoaded: false,\r\n\r\n    expectedPath: null,\r\n    currentPath: null,\r\n    shouldLoadOtherData: false\r\n};\r\n\r\nconst manageGroupFromParamsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case manageANIDFromParamsActions.SET_GROUP_USER_NAME_FROM_PARAMS:\r\n            return {\r\n                ...state,\r\n                groupUserName: action.groupUserName,\r\n                groupProperties: null,\r\n                groupPropertiesLoaded: false,\r\n                angelNetworkBeingLoaded: false\r\n            };\r\n        case manageANIDFromParamsActions.SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING:\r\n            return {\r\n                ...state,\r\n                expectedPath: action.expectedPath,\r\n                currentPath: action.currentPath\r\n            };\r\n        case manageANIDFromParamsActions.LOADING_ANGEL_NETWORK:\r\n            return {\r\n                ...state,\r\n                groupProperties: null,\r\n                groupPropertiesLoaded: false,\r\n                angelNetworkBeingLoaded: true,\r\n                shouldLoadOtherData: false\r\n            };\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_LOADED:\r\n            return {\r\n                ...state,\r\n                groupProperties: JSON.parse(JSON.stringify(action.angelNetwork)),\r\n                groupPropertiesLoaded: true,\r\n                angelNetworkBeingLoaded: false,\r\n                shouldLoadOtherData: action.shouldLoadOtherData\r\n            };\r\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupProperties: {\r\n                    ...state.groupProperties,\r\n                    [action.key]: action.value\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageGroupFromParamsReducer;\r\n\r\n","import * as investorSelfCertificationAgreementsActions from '../actions/investorSelfCertificationAgreementsActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as FIRBASE_CONST from '../../firebase/databaseConsts';\r\n\r\nconst initState = {\r\n    userID: null,\r\n\r\n    // type of agreement\r\n    statementType: FIRBASE_CONST.SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT,\r\n    // used to control checkboxes if the user has not done this before\r\n    checkBox1Ticked: false,\r\n    checkBox2Ticked: false,\r\n    checkBox3Ticked: false,\r\n\r\n    investorSelfCertificationAgreement: null,\r\n    investorSelfCertificationAgreementLoaded: false,\r\n    investorSelfCertificationAgreementBeingLoaded: false\r\n};\r\n\r\nconst investorSelfCertificationAgreementsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_SET_USER:\r\n            return {\r\n                ...initState,\r\n                userID: action.uid\r\n            };\r\n        case investorSelfCertificationAgreementsActions.LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: null,\r\n                investorSelfCertificationAgreementLoaded: false,\r\n                investorSelfCertificationAgreementBeingLoaded: true\r\n            };\r\n        case investorSelfCertificationAgreementsActions.FINISHED_LOADING_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: JSON.parse(JSON.stringify(action.result)),\r\n                investorSelfCertificationAgreementLoaded: true,\r\n                investorSelfCertificationAgreementBeingLoaded: false\r\n            };\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_TICK_BOX_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.checked\r\n            };\r\n        case investorSelfCertificationAgreementsActions.INVESTOR_SELF_CERTIFICATION_AGREEMENT_STATEMENT_TYPE_CHANGED:\r\n            return {\r\n                ...state,\r\n                statementType: action.event.target.value,\r\n                checkBox1Ticked: false,\r\n                checkBox2Ticked: false\r\n            };\r\n        case investorSelfCertificationAgreementsActions.UPDATE_INVESTOR_SELF_CERTIFICATION_AGREEMENT:\r\n            return {\r\n                ...state,\r\n                investorSelfCertificationAgreement: JSON.parse(JSON.stringify(action.agreement))\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default investorSelfCertificationAgreementsReducer;","import * as angelNetworksActions from '../actions/angelNetworksActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    angelNetworks: [],\r\n    loadingAngelNetworks: false,\r\n    angelNetworksLoaded: false,\r\n    page: 0,\r\n    rowsPerPage: 5,\r\n\r\n    searchText: '', // string typed to search angel networks by name\r\n    inSearchMode: false, // when the search button is clicked --> show X icon to exit search mode\r\n    matchedAngelNetworks: [] // angel networks that match\r\n};\r\n\r\nconst angelNetworksReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case angelNetworksActions.LOADING_ANGEL_NETWORKS:\r\n            return {\r\n                ...state,\r\n                loadingAngelNetworks: true,\r\n                angelNetworksLoaded: false,\r\n                angelNetworks: []\r\n            };\r\n        case angelNetworksActions.FINISHED_LOADING_ANGEL_NETWORKS:\r\n            return {\r\n                ...state,\r\n                loadingAngelNetworks: false,\r\n                angelNetworksLoaded: true,\r\n                angelNetworks: action.hasOwnProperty('angelNetworks') ? [...action.angelNetworks] : []\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\r\n            };\r\n        case angelNetworksActions.TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\r\n            };\r\n        case angelNetworksActions.ANGEL_NETWORKS_IN_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                angelNetworks: [...action.angelNetworks]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default angelNetworksReducer;","import * as manageJoinRequestsActions from '../actions/manageJoinRequestsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    joinRequests: [],\r\n    loadingJoinRequests: false,\r\n    joinRequestsLoaded: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n    matchedJoinRequests: [],\r\n\r\n    page: 0,\r\n    rowsPerPage: 5\r\n};\r\n\r\nconst manageJoinRequestsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS:\r\n            return {\r\n                ...state,\r\n                joinRequests: [],\r\n                loadingJoinRequests: true,\r\n                joinRequestsLoaded: false\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS:\r\n            return {\r\n                ...state,\r\n                joinRequests: [...action.joinRequests],\r\n                loadingJoinRequests: false,\r\n                joinRequestsLoaded: true\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedJoinRequests: action.matchedJoinRequests\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedJoinRequests: action.matchedJoinRequests\r\n            };\r\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_CHANGED:\r\n            return {\r\n                ...state,\r\n                joinRequests: [...action.joinRequests]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageJoinRequestsReducer;","import * as pledgesTableActions from '../actions/pledgesTableActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    project: null,\r\n\r\n    pledges: [],\r\n    pledgesLoaded: false,\r\n    loadingPledges: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n    matchedPledges: [],\r\n\r\n    page: 0,\r\n    rowsPerPage: 10\r\n};\r\n\r\nconst pledgesTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_SET_PROJECT:\r\n            return {\r\n                ...initState,\r\n                project: JSON.parse(JSON.stringify(action.project))\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_LOADING_PLEDGES:\r\n            return {\r\n                ...state,\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n                loadingPledges: true\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES:\r\n            return {\r\n                ...state,\r\n                pledges: [...action.pledges],\r\n                pledgesLoaded: true,\r\n                loadingPledges: false\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value,\r\n                page: 0\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                searchText: action.searchText,\r\n                matchedPledges: [...action.matchedPledges]\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                inSearchMode: action.enter,\r\n                searchText: !action.enter ? '' : state.searchText,\r\n                matchedPledges: [...action.matchedPledges]\r\n            };\r\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED:\r\n            return {\r\n                ...state,\r\n                pledges: [...action.pledges]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default pledgesTableReducer;","import * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\r\n\r\nconst initState = {\r\n    open: false,\r\n    message: '',\r\n    color: '', // primary or error\r\n    position: '' // top or bottom\r\n};\r\n\r\nconst feedbackSnackbarReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case feedbackSnackbarActions.CLOSE_FEEDBACK_SNACKBAR:\r\n            return {\r\n                ...state,\r\n                open: false\r\n            };\r\n        case feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT:\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                message: action.message,\r\n                color: action.color,\r\n                position: action.position\r\n            };\r\n        case feedbackSnackbarActions.RESET_STATES_WHEN_SNACKBAR_CLOSED:\r\n            return {\r\n                ...initState\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default feedbackSnackbarReducer;","import * as activitiesTableActions from '../actions/activitiesTableActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    tableUser: null,\r\n\r\n    activities: [],\r\n    activitiesLoaded: false,\r\n    loadingActivities: false,\r\n\r\n    page: 0,\r\n    rowsPerPage: 10\r\n};\r\n\r\nconst activitiesTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case activitiesTableActions.ACTIVITIES_TABLE_SET_TABLE_USER:\r\n            return {\r\n                ...initState,\r\n                tableUser: JSON.parse(JSON.stringify(action.user))\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_LOADING_ACTIVITIES:\r\n            return {\r\n                ...state,\r\n                activities: [],\r\n                activitiesLoaded: false,\r\n                loadingActivities: true\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES:\r\n            return {\r\n                ...state,\r\n                activities: [...action.activities],\r\n                activitiesLoaded: true,\r\n                loadingActivities: false\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_IN_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                activities: [...action.activities]\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                page: action.newPage\r\n            };\r\n        case activitiesTableActions.ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default activitiesTableReducer;","import * as manageJSONCompareChangesDialogActions from '../actions/manageJSONCompareChangesDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    dialogOpen: false,\r\n    jsonBefore: {},\r\n    jsonAfter: {}\r\n};\r\n\r\nconst manageJSONCompareChangesDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_SET_DATA:\r\n            return {\r\n                ...state,\r\n                dialogOpen: true,\r\n                jsonBefore: JSON.parse(JSON.stringify(action.jsonBefore)),\r\n                jsonAfter: JSON.parse(JSON.stringify(action.jsonAfter))\r\n            };\r\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_RESET_DATA:\r\n            return {\r\n                ...state,\r\n                dialogOpen: false,\r\n                jsonBefore: {},\r\n                jsonAfter: {}\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default manageJSONCompareChangesDialogReducer;","import * as groupAdminsTableActions from '../actions/groupAdminsTableActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {ADD_NEW_GROUP_ADMIN_STATUS_NONE} from '../../pages/admin/components/GroupAdminsTable';\r\n\r\nconst initState = {\r\n    tableGroup: null,\r\n\r\n    groupAdmins: [],\r\n    groupAdminsLoaded: false,\r\n    loadingGroupAdmins: false,\r\n\r\n    searchText: '',\r\n    inSearchMode: false,\r\n\r\n    page: 0,\r\n    rowsPerPage: 10,\r\n\r\n    addNewGroupAdminDialogOpen: false,\r\n    newGroupAdminEmail: '',\r\n    addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\r\n};\r\n\r\nconst groupAdminsTableReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_SET_GROUP:\r\n            return {\r\n                ...initState,\r\n                tableGroup: JSON.parse(JSON.stringify(action.group))\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [],\r\n                groupAdminsLoaded: false,\r\n                loadingGroupAdmins: true\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [...action.groupAdmins],\r\n                groupAdminsLoaded: true,\r\n                loadingGroupAdmins: false\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.newPage\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED:\r\n            return {\r\n                ...state,\r\n                rowsPerPage: action.value\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE:\r\n            return {\r\n                ...state,\r\n                searchText: state.inSearchMode ? '' : state.searchText,\r\n                inSearchMode: !state.inSearchMode\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG:\r\n            return {\r\n                ...state,\r\n                addNewGroupAdminDialogOpen: !state.addNewGroupAdminDialogOpen,\r\n                newGroupAdminEmail: '',\r\n                addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_CHANGED:\r\n            return {\r\n                ...state,\r\n                groupAdmins: [...action.groupAdmins]\r\n            };\r\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED:\r\n            return {\r\n                ...state,\r\n                addNewGroupAdminStatus: action.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default groupAdminsTableReducer;","import * as createPledgeDialogActions from '../actions/createPledgeDialogActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport * as utils from '../../utils/utils';\r\nimport {CREATE_PLEDGE_STATUS_NONE} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\r\n\r\nconst initState = {\r\n    open: false,\r\n    project: null,\r\n    postMoneyValuation: '',\r\n    expiredDate: null,\r\n    extraNotes: '',\r\n    createStatus: CREATE_PLEDGE_STATUS_NONE\r\n};\r\n\r\nconst createPledgeDialogReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createPledgeDialogActions.TOGGLE_CREATE_PLEDGE_DIALOG:\r\n            return {\r\n                ...initState,\r\n                open: !state.open\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_SET_PROJECT:\r\n            return {\r\n                ...state,\r\n                project: JSON.parse(JSON.stringify(action.project)),\r\n                postMoneyValuation:\r\n                    action.project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                        ?\r\n                        Number(action.project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                        :\r\n                        ''\r\n                ,\r\n                expiredDate: utils.getDateWithDaysFurtherThanToday(1),\r\n                extraNotes: ''\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED:\r\n            return {\r\n                ...state,\r\n                expiredDate:\r\n                    action.date && action.date === \"Invalid Date\"\r\n                        ?\r\n                        NaN\r\n                        :\r\n                        action.date === null\r\n                            ?\r\n                            null\r\n                            :\r\n                            action.date.getTime()\r\n            };\r\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED:\r\n            return {\r\n                ...state,\r\n                createStatus: action.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default createPledgeDialogReducer;","import * as selectProjectVisibilityActions from '../actions/selectProjectVisibilityActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    projectVisibilitySetting: -1,\r\n    project: null\r\n};\r\n\r\nconst selectProjectVisibilityReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT:\r\n            return {\r\n                ...initState,\r\n                project: JSON.parse(JSON.stringify(action.project))\r\n            };\r\n        case selectProjectVisibilityActions.HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED:\r\n            return {\r\n                ...state,\r\n                [action.event.target.name]: action.event.target.value\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default selectProjectVisibilityReducer;","import * as manageSystemGroupsActions from '../actions/manageSystemGroupsActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    systemGroups: [],\r\n    loadingGroups: false,\r\n    groupsLoaded: false\r\n};\r\n\r\nconst manageSystemGroupsReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageSystemGroupsActions.LOADING_SYSTEM_GROUPS:\r\n            return {\r\n                ...state,\r\n                systemGroups: [],\r\n                loadingGroups: true,\r\n                groupsLoaded: false\r\n            };\r\n        case manageSystemGroupsActions.FINISHED_LOADING_SYSTEM_GROUPS:\r\n            return {\r\n                ...state,\r\n                systemGroups: action.groups,\r\n                loadingGroups: false,\r\n                groupsLoaded: true\r\n            };\r\n        case manageSystemGroupsActions.SYSTEM_GROUPS_CHANGED:\r\n            return {\r\n                ...state,\r\n                systemGroups: action.groups\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageSystemGroupsReducer;","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nexport const LOADING_MARKETING_PREFERENCES = 'LOADING_MARKETING_PREFERENCES';\r\nexport const FINISHED_LOADING_MARKETING_PREFERENCES = 'FINISHED_LOADING_MARKETING_PREFERENCES';\r\nexport const loadMarketingPreferences = () => {\r\n    return (dispatch, getState) => {\r\n\r\n        const currentUser = getState().auth.user;\r\n\r\n        if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n            // do not allow group admins to load marketing preferences\r\n            if (!currentUser.superAdmin) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch({\r\n            type: LOADING_MARKETING_PREFERENCES\r\n        });\r\n\r\n        realtimeDBUtils\r\n            .loadMarketingPreferences(\r\n                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                    ?\r\n                    null\r\n                    :\r\n                    currentUser.id\r\n            )\r\n            .then(marketingPreferences => {\r\n                dispatch({\r\n                    type: FINISHED_LOADING_MARKETING_PREFERENCES,\r\n                    marketingPreferences\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\r\n                    message: \"Error happened. Could not load marketing preferences.\",\r\n                    color: \"error\",\r\n                    position: \"bottom\"\r\n                });\r\n            });\r\n    }\r\n}","import * as manageMarketingPreferencesActions from '../actions/manageMarketingPreferencesActions';\r\nimport * as authActions from '../actions/authActions';\r\n\r\nconst initState = {\r\n    marketingPreferences: [],\r\n    loadingMarketingPreferences: false,\r\n    marketingPreferencesLoaded: false\r\n};\r\n\r\nconst manageMarketingPreferencesReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case manageMarketingPreferencesActions.LOADING_MARKETING_PREFERENCES:\r\n            return {\r\n                ...state,\r\n                marketingPreferences: [],\r\n                loadingMarketingPreferences: true,\r\n                marketingPreferencesLoaded: false\r\n            };\r\n        case manageMarketingPreferencesActions.FINISHED_LOADING_MARKETING_PREFERENCES:\r\n            return {\r\n                ...state,\r\n                marketingPreferences: JSON.parse(JSON.stringify(action.marketingPreferences)),\r\n                loadingMarketingPreferences: false,\r\n                marketingPreferencesLoaded: true\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default manageMarketingPreferencesReducer;","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as selectProjectVisibilityActions from \"../actions/selectProjectVisibilityActions\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport {\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n    PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n    PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n    STEP_ACCEPT_TERMS_AND_CONDITIONS,\r\n    STEP_PITCH_COVER,\r\n    STEP_PITCH_DECK,\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    STEP_PITCH_SUPPORTING_DOCUMENTS,\r\n    PITCH_COVER_FILE_TYPE_SELECTED,\r\n    PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n} from \"../../pages/create-project/CreateProject\";\r\nimport * as ROUTES from \"../../router/routes\";\r\n\r\nexport const CREATE_PROJECT_SET_COMPONENT_PROPS = \"CREATE_PROJECT_SET_COMPONENT_PROPS\";\r\nexport const setComponentContext = (context) => {\r\n    return {\r\n        type: CREATE_PROJECT_SET_COMPONENT_PROPS,\r\n        context\r\n    }\r\n}\r\n\r\nexport const CREATE_PROJECT_LOADING_DATA = \"CREATE_PROJECT_LOADING_DATA\";\r\nexport const CREATE_PROJECT_FINISHED_LOADING_DATA = \"CREATE_PROJECT_FINISHED_LOADING_DATA\";\r\n\r\nexport const CREATE_PROJECT_MODE_EDIT = 1;\r\nexport const CREATE_PROJECT_MODE_CREATE_NEW = 2;\r\n\r\n/**\r\n * Load data\r\n *\r\n * @param params\r\n * @returns {Promise<function(...[*]=)>}\r\n */\r\nexport const loadData = async (params) => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = getState().manageCreateProject;\r\n\r\n        if (!currentUser\r\n            ||\r\n            (currentUser && currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n                dispatch({\r\n                    type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                    error: \"Error happened.\"\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: CREATE_PROJECT_LOADING_DATA\r\n        });\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if ((currentUser.type === DB_CONST.TYPE_ADMIN && currentUser.anid === project.anid)\r\n                        && (groupProperties && groupProperties.anid === project.anid)\r\n                    ) {\r\n                        dispatch({\r\n                            type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                            project\r\n                        });\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        projectEdited: project,\r\n                        mode: CREATE_PROJECT_MODE_EDIT\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        error: error\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            dispatch({\r\n                type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                mode: CREATE_PROJECT_MODE_CREATE_NEW\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && (groupProperties && groupProperties.anid === currentUser.anid)\r\n            ) {\r\n                dispatch({\r\n                    type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                    project: null\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Navigate to the same page with active step saved\r\n * This will save the activeStep of the page, so when the user refreshes the page,\r\n * they can still continue with their previous step.\r\n *\r\n * @param activeStep\r\n * @param projectID\r\n */\r\nexport const navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const componentContext = getState().manageCreateProject.componentContext;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const handleMoveToNextStep = (params) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = getState().manageCreateProject;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiredDate,\r\n\r\n            pitchAmountRaisedToDate,\r\n            pitchRaiseRequired,\r\n            pitchPostMoneyValuation,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            hasRaisedMoneyBefore\r\n        } = getState().manageCreateProject.createNewPitch;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiredDate === null\r\n                    || pitchRaiseRequired.trim().length === 0\r\n                    || hasRaisedMoneyBefore.trim().length === 0\r\n                    || (hasRaisedMoneyBefore === \"true\" && pitchAmountRaisedToDate.trim().length === 0)) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiredDate)\r\n                    ||\r\n                    (pitchExpiredDate && (pitchExpiredDate < myUtils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                // if the user enters invalid value for the money, warn them\r\n                if ((hasRaisedMoneyBefore === \"true\" && !myUtils.getNumberFromInputString(pitchAmountRaisedToDate))\r\n                    || !myUtils.getNumberFromInputString(pitchRaiseRequired)\r\n                    || (pitchPostMoneyValuation.trim().length > 0 && !myUtils.getNumberFromInputString(pitchPostMoneyValuation))\r\n                ) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (pitchPresentationDocument.length === 0\r\n                        && pitchPresentationText.ops.length === 0\r\n                        && (\r\n                            !projectEdited.Pitch.presentationDocument\r\n                            ||\r\n                            (\r\n                                projectEdited.Pitch.presentationDocument\r\n                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                            )\r\n                        )\r\n                        && !projectEdited.Pitch.presentationText) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not created their pitch presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                    if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    }\r\n}\r\n\r\nlet draftProjectListener = null;\r\n\r\nexport const CREATE_PROJECT_DRAFT_PROJECT_CHANGED = \"CREATE_PROJECT_DRAFT_PROJECT_CHANGED\";\r\nexport const startListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const projectEdited = getState().manageCreateProject.projectEdited;\r\n\r\n        if (utils.isDraftProject(projectEdited)) {\r\n            if (!draftProjectListener) {\r\n                draftProjectListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                    .orderByKey()\r\n                    .equalTo(projectEdited.id);\r\n\r\n                draftProjectListener\r\n                    .on('child_changed', snapshot => {\r\n\r\n                        let project = snapshot.val();\r\n\r\n                        this.setState({\r\n                            projectEdited: Object.assign({}, project)\r\n                        });\r\n                        dispatch({\r\n                            type: CREATE_PROJECT_DRAFT_PROJECT_CHANGED,\r\n                            projectChanged: project\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (draftProjectListener) {\r\n            draftProjectListener.off('child_changed');\r\n            draftProjectListener = null;\r\n        }\r\n    }\r\n}","import * as createProjectActions from '../actions/createProjectActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    UPLOAD_NONE\r\n} from '../../pages/create-project/CreateProject';\r\n\r\nconst initState = {\r\n    componentContext: null,\r\n\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createNewPitch: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        // pitch sector\r\n        pitchSector: '-',\r\n        // pitch project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiredDate: null,\r\n\r\n        pitchAmountRaisedToDate: '',\r\n        pitchRaiseRequired: '',\r\n        pitchPostMoneyValuation: '',\r\n        pitchInvestorsCommitted: '',\r\n\r\n        hasRaisedMoneyBefore: '',\r\n\r\n        // pitch cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // pitch cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // pitch supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // pitch presentation file (user uploads a file for pitch presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // pitch presentation text (user uses the provided text editor to make pitch presentation)\r\n        pitchPresentationText: {ops: []},\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        snackbarErrorMessage: '',\r\n        errorSnackbarOpen: false,\r\n\r\n        acceptedTermsAndConditions: false,\r\n\r\n        projectID: null // set when project has been successfully published to pass to UploadDialog\r\n    }\r\n};\r\n\r\nconst createProjectReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createProjectActions.CREATE_PROJECT_SET_COMPONENT_PROPS:\r\n            return {\r\n                ...state,\r\n                componentContext: action.context\r\n            }\r\n        case createProjectActions.CREATE_PROJECT_LOADING_DATA:\r\n            return {\r\n                ...state,\r\n                requestToLoadData: false\r\n            };\r\n        case createProjectActions.CREATE_PROJECT_FINISHED_LOADING_DATA: {\r\n            if (action.hasOwnProperty('error')) {\r\n                return {\r\n                    ...state,\r\n                    projectEditedLoaded: true,\r\n                    projectIDToBeLoadedAfterSavingFirstTime: null\r\n                }\r\n            }\r\n            else {\r\n                // error\r\n                if (!action.hasOwnProperty('mode')) {\r\n                    return initState;\r\n                }\r\n\r\n                switch (action.mode) {\r\n                    case createProjectActions.CREATE_PROJECT_MODE_EDIT: {\r\n                        const project = JSON.parse(JSON.stringify(action.projectEdited));\r\n\r\n                        return {\r\n                            ...state,\r\n                            projectBeforeEdited: project,\r\n                            projectEdited: project,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                            createNewPitch: {\r\n                                ...state.createNewPitch,\r\n                                // pitch sector\r\n                                pitchSector:\r\n                                    project.hasOwnProperty('sector')\r\n                                        ?\r\n                                        project.sector\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                // pitch project name\r\n                                pitchProjectName:\r\n                                    project.hasOwnProperty('projectName')\r\n                                        ?\r\n                                        project.projectName\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchProjectDescription:\r\n                                    project.hasOwnProperty('description')\r\n                                        ?\r\n                                        project.description\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchExpiredDate:\r\n                                    project.Pitch.hasOwnProperty('expiredDate')\r\n                                        ?\r\n                                        project.Pitch.expiredDate\r\n                                        :\r\n                                        null\r\n                                ,\r\n                                pitchAmountRaisedToDate:\r\n                                    project.Pitch.hasOwnProperty('amountRaised')\r\n                                        ?\r\n                                        Number(project.Pitch.amountRaised.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchRaiseRequired:\r\n                                    project.Pitch.hasOwnProperty('fundRequired')\r\n                                        ?\r\n                                        Number(project.Pitch.fundRequired.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchPostMoneyValuation:\r\n                                    project.Pitch.hasOwnProperty('postMoneyValuation')\r\n                                        ?\r\n                                        Number(project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchInvestorsCommitted:\r\n                                    project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                        ?\r\n                                        project.Pitch.investorsCommitted\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                hasRaisedMoneyBefore:\r\n                                    project.Pitch.hasOwnProperty('amountRaised')\r\n                                        ?\r\n                                        (\r\n                                            project.Pitch.amountRaised > 0\r\n                                                ?\r\n                                                \"true\"\r\n                                                :\r\n                                                \"false\"\r\n                                        )\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                pitchPresentationText:\r\n                                    !project.Pitch.presentationText\r\n                                        ?\r\n                                        {ops: []}\r\n                                        :\r\n                                        project.Pitch.presentationText\r\n                            }\r\n                        };\r\n                    }\r\n                    case createProjectActions.CREATE_PROJECT_MODE_CREATE_NEW:\r\n                        return {\r\n                            ...state,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null\r\n                        };\r\n                    default:\r\n                        return initState;\r\n                }\r\n            }\r\n        }\r\n        case createProjectActions.CREATE_PROJECT_DRAFT_PROJECT_CHANGED:\r\n            return {\r\n                ...state,\r\n                projectEdited: JSON.parse(JSON.stringify(action.projectChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default createProjectReducer;","import {DocumentClickAction, DocumentsDownloadAction, DocumentsDownloadEvents} from \"./DocumentsDownloadActions\";\r\nimport {PitchDocument} from \"../../models/project\";\r\n\r\nexport interface DocumentsDownloadState {\r\n    selectedDocument?: PitchDocument;\r\n    openRiskWarningDialog: boolean;\r\n}\r\n\r\nconst initialState: DocumentsDownloadState = {\r\n    openRiskWarningDialog: false\r\n}\r\n\r\nconst documentsDownloadReducer = (state: DocumentsDownloadState = initialState, action: DocumentsDownloadAction) => {\r\n    switch (action.type) {\r\n        case DocumentsDownloadEvents.OpenRiskWarningDialog:\r\n            const openRiskWarningDialogAction: DocumentClickAction = action as DocumentClickAction;\r\n            return {\r\n                ...state,\r\n                selectedDocument: openRiskWarningDialogAction.selectedDocument,\r\n                openRiskWarningDialog: true\r\n            }\r\n        case DocumentsDownloadEvents.CloseRiskWarningDialog:\r\n            return {\r\n                ...state,\r\n                selectedDocument: undefined,\r\n                openRiskWarningDialog: false\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default documentsDownloadReducer;","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\r\nimport {ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport {openFeedbackSnackbar} from \"../../../feedback-snackbar/FeedbackSnackbarActions\";\r\nimport {FeedbackSnackbarTypes} from \"../../../feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport React from \"react\";\r\nimport {EditImageDialogModes, isDeletingProfilePicture, isSavingProfilePicture} from \"../../ProfileReducer\";\r\nimport UserRepository from \"../../../../api/repositories/UserRepository\";\r\nimport User from \"../../../../models/user\";\r\nimport {updateUserChanges} from \"../../../../redux-store/actions/authenticationActions\";\r\nimport FileRepository from \"../../../../api/repositories/FileRepository\";\r\nimport {getCurrentDate} from \"../../../../utils/utils\";\r\nimport {PROFILE_PICTURES_CHILD, USERS_CHILD} from \"../../../../firebase/databaseConsts\";\r\n\r\nexport enum EditImageDialogEvents {\r\n    ToggleDialog = \"EditImageDialogEvents.ToggleDialog\",\r\n    SetEditor = \"EditImageDialogEvents.SetEditor\",\r\n    ChangeMode = \"EditImageDialogEvents.ChangeMode\",\r\n    SuccessfullySelectedImage = \"EditImageDialogEvents.SuccessfullySelectedImage\",\r\n    SliderChanged = \"EditImageDialogEvents.SliderChanged\",\r\n    SavingImage = \"EditImageDialogEvents.SavingImage\",\r\n    DeletingImage = \"EditImageDialogEvents.DeletingImage\"\r\n}\r\n\r\nexport interface EditImageDialogAction extends ProfileAction {\r\n\r\n}\r\n\r\nexport interface ToggleDialogAction extends EditImageDialogAction {\r\n    // when set (must be a URL), the dialog will be opened in \"Display photo\" mode\r\n    image?: string;\r\n}\r\n\r\nexport interface SetEditorAction extends EditImageDialogAction {\r\n    editor: any;\r\n}\r\n\r\nexport interface ChangeModeAction extends EditImageDialogAction {\r\n    mode: EditImageDialogModes;\r\n}\r\n\r\nexport interface SuccessfullySelectedImageAction extends EditImageDialogAction {\r\n    selectedImage: File;\r\n}\r\n\r\nexport interface SliderChangedAction extends EditImageDialogAction {\r\n    name: string;\r\n    value: number;\r\n}\r\n\r\nexport interface SavingImageAction extends EditImageDialogAction {\r\n    saving: boolean;\r\n}\r\n\r\nexport interface DeletingImageAction extends EditImageDialogAction {\r\n    deleting: boolean;\r\n}\r\n\r\nexport const toggleDialog: ActionCreator<any> = (image?: string) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ToggleDialogAction = {\r\n            type: EditImageDialogEvents.ToggleDialog,\r\n            image\r\n        };\r\n        dispatch(action);\r\n        if (image) {\r\n            dispatch(changeMode(EditImageDialogModes.DisplayPhoto));\r\n        }\r\n    }\r\n}\r\n\r\nexport const setEditor: ActionCreator<any> = (editor: any) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SetEditorAction = {\r\n            type: EditImageDialogEvents.SetEditor,\r\n            editor\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\nexport const changeMode: ActionCreator<any> = (mode: EditImageDialogModes) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeModeAction = {\r\n            type: EditImageDialogEvents.ChangeMode,\r\n            mode\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n/**\r\n * Handle when an image is successfully selected\r\n *\r\n * @param files\r\n */\r\nexport const handleImageChanged: ActionCreator<any> = (files: File[]) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        // error happened\r\n        if (files.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const imageFile: File = files[0];\r\n        const action: SuccessfullySelectedImageAction = {\r\n            type: EditImageDialogEvents.SuccessfullySelectedImage,\r\n            selectedImage: imageFile\r\n        };\r\n        dispatch(action);\r\n        return dispatch(changeMode(EditImageDialogModes.EditPhoto));\r\n    }\r\n}\r\n\r\n/**\r\n * Handle when an image is unsuccessfully selected due to oversize, etc.\r\n *\r\n * Note: when this event occur, handleImageChanged is also called with files = [].\r\n *\r\n * @param error\r\n * @param file\r\n */\r\nexport const handleImageError: ActionCreator<any> = (error: MediaError, file: File) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, error.message))\r\n    }\r\n}\r\n\r\nexport const handleSliderChanged: ActionCreator<any> = (sliderName: string, value: number) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: SliderChangedAction = {\r\n            type: EditImageDialogEvents.SliderChanged,\r\n            name: sliderName,\r\n            value\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}\r\n\r\n/**\r\n * Save edited image as a new profile picture\r\n */\r\nexport const saveImage: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            EditImageDialogState\r\n        } = getState().ProfileLocalState;\r\n\r\n        const editor: any = EditImageDialogState.editor;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        if (isSavingProfilePicture(EditImageDialogState)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Note: this can only be done if cors is set.\r\n            // To set cors on Firebase, follow this: https://stackoverflow.com/questions/37760695/firebase-storage-and-access-control-allow-origin/37765371\r\n            const canvas: HTMLCanvasElement = editor.getImage();\r\n            // @ts-ignore\r\n            const editedImageAsBlob: Blob = await new Promise(resolve => canvas.toBlob(resolve));\r\n\r\n            const savingImageAction: SavingImageAction = {\r\n                type: EditImageDialogEvents.SavingImage,\r\n                saving: true\r\n            };\r\n            dispatch(savingImageAction);\r\n\r\n            const storageID: number = getCurrentDate();\r\n            const imageUrl = await new FileRepository().uploadSingleFile({\r\n                file: editedImageAsBlob,\r\n                fileName: storageID,\r\n                storageLocation: `${USERS_CHILD}/${copiedUser.id}/${PROFILE_PICTURES_CHILD}`\r\n            });\r\n\r\n            // update user\r\n            const response = await new UserRepository().updateUser({\r\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\r\n                newProfilePicture: {\r\n                    storageID,\r\n                    url: imageUrl\r\n                }\r\n            });\r\n\r\n            const updatedUser: User = response.data;\r\n\r\n            dispatch(toggleDialog());\r\n            dispatch(updateUserChanges(updatedUser));\r\n            return dispatch(setCopiedUser(updatedUser));\r\n        } catch (error) {\r\n            const errorSavingImageAction: SavingImageAction = {\r\n                type: EditImageDialogEvents.SavingImage,\r\n                saving: false\r\n            };\r\n            dispatch(errorSavingImageAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not save profile photo.\"));\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Delete current profile picture\r\n */\r\nexport const deleteImage: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            EditImageDialogState\r\n        } = getState().ProfileLocalState;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        if (isDeletingProfilePicture(EditImageDialogState)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const deletingImageAction: DeletingImageAction = {\r\n                type: EditImageDialogEvents.DeletingImage,\r\n                deleting: true\r\n            };\r\n            dispatch(deletingImageAction);\r\n\r\n            // update user\r\n            const response = await new UserRepository().updateUser({\r\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\r\n                removeProfilePicture: true\r\n            });\r\n\r\n            const updatedUser: User = response.data;\r\n\r\n            dispatch(changeMode(EditImageDialogModes.AddPhoto));\r\n            dispatch(updateUserChanges(updatedUser));\r\n            return dispatch(setCopiedUser(updatedUser));\r\n        }\r\n        catch (error) {\r\n            const deletingImageAction: DeletingImageAction = {\r\n                type: EditImageDialogEvents.DeletingImage,\r\n                deleting: false\r\n            };\r\n            dispatch(deletingImageAction);\r\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not delete profile photo.\"));\r\n        }\r\n    }\r\n}","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\r\nimport User, {BusinessProfile, hasBusinessProfile} from \"../../../../models/user\";\r\nimport {ActionCreator, Dispatch} from \"redux\";\r\nimport {AppState} from \"../../../../redux-store/reducers\";\r\nimport Address from \"../../../../models/address\";\r\nimport AddressRepository from \"../../../../api/repositories/AddressRepository\";\r\nimport {AddressStates} from \"../../ProfileReducer\";\r\n\r\nexport enum BusinessProfileEvents {\r\n    NewBusinessProfileChanged = \"BusinessProfileEvents.NewBusinessProfileChanged\",\r\n    CheckBoxChanged = \"BusinessProfileEvents.CheckBoxChanged\",\r\n    FindingAddress = \"BusinessProfileEvents.FindingAddress\",\r\n    FinishedFindingAddress = \"BusinessProfileEvents.FinishedFindingAddress\",\r\n    ChangeAddressState = \"BusinessProfileEvents.ChangeAddressState\"\r\n}\r\n\r\nexport interface BusinessProfileAction extends ProfileAction {\r\n\r\n}\r\n\r\nexport interface ToggleEnterAddressManuallyAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\"\r\n}\r\n\r\nexport interface FindingAddressAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n}\r\n\r\nexport interface FinishedFindingAddressAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n    foundAddresses: Address[] | undefined;\r\n    error?: string;\r\n}\r\n\r\nexport interface ChangeAddressFindingStateAction extends BusinessProfileAction {\r\n    mode: \"registeredOffice\" | \"tradingAddress\";\r\n    addressState: AddressStates;\r\n}\r\n\r\nexport interface BusinessProfileCheckBoxChangedAction extends BusinessProfileAction {\r\n    name: string;\r\n    value: boolean;\r\n}\r\n\r\nexport const findAddress: ActionCreator<any> = (mode: \"registeredOffice\" | \"tradingAddress\") => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            copiedUser,\r\n            BusinessProfileState\r\n        } = getState().ProfileLocalState;\r\n\r\n        if (!copiedUser) {\r\n            return;\r\n        }\r\n\r\n        let postcode: string;\r\n\r\n        // if (hasBusinessProfile(copiedUser)) {\r\n        //     if (mode === \"registeredOffice\") {\r\n        //         postcode = copiedUser.BusinessProfile?.registeredOffice.postcode ?? \"\";\r\n        //     } else {\r\n        //         postcode = copiedUser.BusinessProfile?.tradingAddress.postcode ?? \"\";\r\n        //     }\r\n        // } else {\r\n        //     if (mode === \"registeredOffice\") {\r\n        //         postcode = BusinessProfileState.newBusinessProfile.registeredOffice.postcode;\r\n        //     } else {\r\n        //         postcode = BusinessProfileState.newBusinessProfile.tradingAddress.postcode;\r\n        //     }\r\n        // }\r\n\r\n        const finishedFindingAddressAction: FinishedFindingAddressAction = {\r\n            type: BusinessProfileEvents.FinishedFindingAddress,\r\n            mode,\r\n            foundAddresses: undefined\r\n        };\r\n\r\n        try {\r\n            const findingAddressAction: FindingAddressAction = {\r\n                type: BusinessProfileEvents.FindingAddress,\r\n                mode\r\n            };\r\n            dispatch(findingAddressAction);\r\n\r\n            const results: Address[] = await new AddressRepository().findAddress(\"dummy postcode\");\r\n            finishedFindingAddressAction.foundAddresses = [...results];\r\n            dispatch(finishedFindingAddressAction);\r\n            return dispatch(changeAddressFindingState(mode, AddressStates.DisplayFoundAddresses));\r\n        } catch (error) {\r\n            finishedFindingAddressAction.error = error.toString();\r\n            dispatch(finishedFindingAddressAction);\r\n            return dispatch(changeAddressFindingState(mode, AddressStates.EnterPostcode));\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeAddressFindingState: ActionCreator<any> = (mode: \"registeredOffice\" | \"tradingAddress\", addressState: AddressStates) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: ChangeAddressFindingStateAction = {\r\n            type: BusinessProfileEvents.ChangeAddressState,\r\n            mode,\r\n            addressState\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import {ProfileAction, ProfileEvents, SetCopiedUserAction} from \"./ProfileActions\";\r\nimport User, {BusinessProfile} from \"../../models/user\";\r\nimport Error from \"../../models/error\";\r\nimport {\r\n    ChangeModeAction,\r\n    DeletingImageAction,\r\n    EditImageDialogEvents,\r\n    SavingImageAction,\r\n    SetEditorAction,\r\n    SliderChangedAction,\r\n    SuccessfullySelectedImageAction,\r\n    ToggleDialogAction\r\n} from \"./components/edit-image-dialog/EditImageDialogActions\";\r\nimport {\r\n    BusinessProfileCheckBoxChangedAction,\r\n    BusinessProfileEvents,\r\n    ChangeAddressFindingStateAction,\r\n    FindingAddressAction,\r\n    FinishedFindingAddressAction\r\n} from \"./components/business-profile/BusinessProfileActions\";\r\nimport Address from \"../../models/address\";\r\n\r\n// State for Personal details section\r\nexport interface PersonalDetailsState {\r\n\r\n}\r\n\r\nexport enum AddressStates {\r\n    EnterPostcode = \"AddressFindingStates.EnterPostcode\",\r\n    FindingAddresses = \"AddressFindingStates.FindingAddresses\",\r\n    DisplayFoundAddresses = \"AddressFindingStates.DisplayFoundAddresses\"\r\n}\r\n\r\n// State for Business profile section\r\nexport interface BusinessProfileState {\r\n    // this state is used to keeping track of the changes in Business profile\r\n    editedBusinessProfile: BusinessProfile;\r\n    // find address by postcode state for Registered office section\r\n    registeredOfficeState: AddressStates;\r\n    // find address by postcode state for Registered office section\r\n    tradingAddressState: AddressStates;\r\n    // list of addresses found by postcode from Registered office section\r\n    foundAddressesForRegisteredOffice?: Address[];\r\n    // list of addresses found by postcode from Trading address section\r\n    foundAddressesForTradingAddress?: Address[];\r\n    // error finding addresses for Registered office\r\n    errorFindingAddressesForRegisteredOffice?: Error;\r\n    // error finding addresses for Trading address\r\n    errorFindingAddressesForTradingAddress?: Error;\r\n    tradingAddressSameAsRegisteredOffice: boolean;\r\n}\r\n\r\nexport enum EditImageDialogModes {\r\n    AddPhoto = \"EditImageDialogModes.AddPhoto\",\r\n    EditPhoto = \"EditImageDialogModes.EditPhoto\",\r\n    DisplayPhoto = \"EditImageDialogModes.DisplayPhoto\"\r\n}\r\n\r\n// State for Edit Image dialog\r\nexport interface EditImageDialogState {\r\n    dialogOpen: boolean;\r\n    mode: EditImageDialogModes;\r\n    // reference to the editor\r\n    editor?: any;\r\n    rawImage?: File | string;\r\n    editedImage?: Blob;\r\n\r\n    scale: number;\r\n    rotate: number;\r\n\r\n    savingImage: boolean;\r\n    deletingImage: boolean;\r\n}\r\n\r\n// State for the whole Profile page\r\nexport interface ProfileState {\r\n    copiedUser?: User;\r\n    hasInitiallySetCopiedUser: boolean;\r\n    PersonalDetailsState: PersonalDetailsState;\r\n    BusinessProfileState: BusinessProfileState;\r\n    EditImageDialogState: EditImageDialogState;\r\n}\r\n\r\n// initial state for Personal details section\r\nconst initialPersonalDetailsState: PersonalDetailsState = {}\r\n\r\n// initial state for Business profile section\r\nconst initialBusinessProfileState: BusinessProfileState = {\r\n    editedBusinessProfile: {\r\n        companyName: \"\",\r\n        companyWebsite: \"\",\r\n        registrationNo: \"\",\r\n        sector: \"none\",\r\n        directors: [\"\"],\r\n        registeredOffice: {\r\n            address1: \"none\",\r\n            address2: \"\",\r\n            address3: \"\",\r\n            postcode: \"\",\r\n            townCity: \"\"\r\n        },\r\n        tradingAddress: {\r\n            address1: \"none\",\r\n            address2: \"\",\r\n            address3: \"\",\r\n            postcode: \"\",\r\n            townCity: \"\"\r\n        },\r\n        logo: [\r\n            {\r\n                storageID: -1,\r\n                url: \"\"\r\n            }\r\n        ]\r\n    },\r\n    registeredOfficeState: AddressStates.EnterPostcode,\r\n    tradingAddressState: AddressStates.EnterPostcode,\r\n    tradingAddressSameAsRegisteredOffice: true\r\n}\r\n\r\n// initial state for Edit Image dialog\r\nconst initialEditImageDialogState: EditImageDialogState = {\r\n    dialogOpen: false,\r\n    mode: EditImageDialogModes.AddPhoto,\r\n\r\n    scale: 1,\r\n    rotate: 0,\r\n\r\n    savingImage: false,\r\n    deletingImage: false\r\n}\r\n\r\n// initial state for the whole Profile page\r\nconst initialState: ProfileState = {\r\n    hasInitiallySetCopiedUser: false,\r\n    PersonalDetailsState: initialPersonalDetailsState,\r\n    BusinessProfileState: initialBusinessProfileState,\r\n    EditImageDialogState: initialEditImageDialogState\r\n}\r\n\r\nexport const hasInitiallySetCopiedUser = (state: ProfileState) => {\r\n    return state.hasInitiallySetCopiedUser;\r\n}\r\n\r\nexport const isSavingProfilePicture = (state: EditImageDialogState) => {\r\n    return state.savingImage;\r\n}\r\n\r\nexport const isDeletingProfilePicture = (state: EditImageDialogState) => {\r\n    return state.deletingImage;\r\n}\r\n\r\nexport const hasErrorFindingAddressForRegisteredOffice = (state: BusinessProfileState) => {\r\n    return state.errorFindingAddressesForRegisteredOffice !== undefined;\r\n}\r\n\r\nexport const hasErrorFindingAddressForTradingAddress = (state: BusinessProfileState) => {\r\n    return state.errorFindingAddressesForTradingAddress !== undefined;\r\n}\r\n\r\nconst profileReducer = (state = initialState, action: ProfileAction) => {\r\n    switch (action.type) {\r\n        case ProfileEvents.SetCopiedUser:\r\n            const setCopiedUserAction: SetCopiedUserAction = action as SetCopiedUserAction;\r\n            return {\r\n                ...state,\r\n                copiedUser: setCopiedUserAction.copiedUser,\r\n                hasInitiallySetCopiedUser: setCopiedUserAction.firstTimeSetCopiedUser === true ? true : state.hasInitiallySetCopiedUser\r\n            }\r\n        case EditImageDialogEvents.ToggleDialog:\r\n            const toggleDialogAction: ToggleDialogAction = action as ToggleDialogAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...initialEditImageDialogState,\r\n                    dialogOpen: !state.EditImageDialogState.dialogOpen,\r\n                    rawImage: toggleDialogAction.image\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SetEditor:\r\n            const setEditorAction: SetEditorAction = action as SetEditorAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    editor: setEditorAction.editor\r\n                }\r\n            }\r\n        case EditImageDialogEvents.ChangeMode:\r\n            const changeModeAction: ChangeModeAction = action as ChangeModeAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    mode: changeModeAction.mode\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SuccessfullySelectedImage:\r\n            const successfullySelectedImageAction: SuccessfullySelectedImageAction = action as SuccessfullySelectedImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    rawImage: successfullySelectedImageAction.selectedImage\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SliderChanged:\r\n            const sliderChangedAction: SliderChangedAction = action as SliderChangedAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    [sliderChangedAction.name]: sliderChangedAction.value\r\n                }\r\n            }\r\n        case EditImageDialogEvents.SavingImage:\r\n            const savingImageAction: SavingImageAction = action as SavingImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    savingImage: savingImageAction.saving\r\n                }\r\n            }\r\n        case EditImageDialogEvents.DeletingImage:\r\n            const deletingImageAction: DeletingImageAction = action as DeletingImageAction;\r\n            return {\r\n                ...state,\r\n                EditImageDialogState: {\r\n                    ...state.EditImageDialogState,\r\n                    deletingImage: deletingImageAction.deleting\r\n                }\r\n            }\r\n        // case BusinessProfileEvents.NewBusinessProfileChanged:\r\n        //     const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = action as UpdateNewBusinessProfileAction;\r\n        //     return {\r\n        //         ...state,\r\n        //         BusinessProfileState: {\r\n        //             ...state.BusinessProfileState,\r\n        //             newBusinessProfile: updateNewBusinessProfileAction.updatedNewBusinessProfile\r\n        //         }\r\n        //     }\r\n        case BusinessProfileEvents.CheckBoxChanged:\r\n            const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = action as BusinessProfileCheckBoxChangedAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    [businessProfileCheckBoxChangedAction.name]: businessProfileCheckBoxChangedAction.value\r\n                }\r\n            }\r\n        case BusinessProfileEvents.FindingAddress:\r\n            const findingAddressAction: FindingAddressAction = action as FindingAddressAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    registeredOfficeState: findingAddressAction.mode === \"registeredOffice\"\r\n                        ? AddressStates.FindingAddresses : state.BusinessProfileState.registeredOfficeState,\r\n                    tradingAddressState: findingAddressAction.mode === \"tradingAddress\"\r\n                        ? AddressStates.FindingAddresses : state.BusinessProfileState.tradingAddressState\r\n                }\r\n            }\r\n        case BusinessProfileEvents.FinishedFindingAddress:\r\n            const finishedFindingAddressAction: FinishedFindingAddressAction = action as FinishedFindingAddressAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    foundAddressesForRegisteredOffice: finishedFindingAddressAction.mode === \"registeredOffice\"\r\n                        ? finishedFindingAddressAction.foundAddresses : state.BusinessProfileState.foundAddressesForRegisteredOffice,\r\n                    foundAddressesForTradingAddress: finishedFindingAddressAction.mode === \"tradingAddress\"\r\n                        ? finishedFindingAddressAction.foundAddresses : state.BusinessProfileState.foundAddressesForTradingAddress,\r\n                    errorFindingAddressesForRegisteredOffice: finishedFindingAddressAction.mode === \"registeredOffice\" && finishedFindingAddressAction.error !== undefined\r\n                        ? {detail: finishedFindingAddressAction.error} : state.BusinessProfileState.errorFindingAddressesForRegisteredOffice,\r\n                    errorFindingAddressesForTradingAddress: finishedFindingAddressAction.mode === \"tradingAddress\" && finishedFindingAddressAction.error !== undefined\r\n                        ? {detail: finishedFindingAddressAction.error} : state.BusinessProfileState.errorFindingAddressesForTradingAddress\r\n                }\r\n            }\r\n        case BusinessProfileEvents.ChangeAddressState:\r\n            const changeAddressStateAction: ChangeAddressFindingStateAction = action as ChangeAddressFindingStateAction;\r\n            return {\r\n                ...state,\r\n                BusinessProfileState: {\r\n                    ...state.BusinessProfileState,\r\n                    registeredOfficeState: changeAddressStateAction.mode === \"registeredOffice\"\r\n                        ? changeAddressStateAction.addressState : state.BusinessProfileState.registeredOfficeState,\r\n                    tradingAddressState: changeAddressStateAction.mode === \"tradingAddress\"\r\n                        ? changeAddressStateAction.addressState : state.BusinessProfileState.tradingAddressState,\r\n                    // if addressState is set to EnterPostcode, reset other states to initial values\r\n                    foundAddressesForRegisteredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.foundAddressesForRegisteredOffice,\r\n                    foundAddressesForTradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.foundAddressesForTradingAddress,\r\n                    errorFindingAddressesForRegisteredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.errorFindingAddressesForRegisteredOffice,\r\n                    errorFindingAddressesForTradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                    && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                        ? undefined : state.BusinessProfileState.errorFindingAddressesForTradingAddress,\r\n                    editedBusinessProfile: {\r\n                        ...state.BusinessProfileState.editedBusinessProfile,\r\n                        registeredOffice: changeAddressStateAction.mode === \"registeredOffice\"\r\n                        && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                            ? initialBusinessProfileState.editedBusinessProfile.registeredOffice\r\n                            : state.BusinessProfileState.editedBusinessProfile.registeredOffice,\r\n                        tradingAddress: changeAddressStateAction.mode === \"tradingAddress\"\r\n                        && changeAddressStateAction.addressState === AddressStates.EnterPostcode\r\n                            ? initialBusinessProfileState.editedBusinessProfile.tradingAddress\r\n                            : state.BusinessProfileState.editedBusinessProfile.tradingAddress\r\n                    }\r\n                }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import {combineReducers} from \"redux\";\r\nimport authReducer from './authReducer';\r\nimport createBusinessProfileReducer from './createBusinessProfileReducer';\r\nimport editUserReducer from './editUserReducer';\r\nimport editImageReducer from './editImageReducer';\r\nimport editVideoReducer from './editVideoReducer';\r\nimport uploadFilesReducer from './uploadFilesReducer';\r\nimport uploadingStatusReducer from './uploadingStatusReducer';\r\nimport changePasswordReducer from './changePasswordReducer';\r\nimport clubAttributesReducer from './clubAttributesReducer';\r\nimport forumsReducer from './forumsReducer';\r\nimport notificationsReducer from './notificationsReducer';\r\nimport dashboardSidebarReducer from './dashboardSidebarReducer';\r\nimport mediaQueryReducer, {MediaQueryState} from './mediaQueryReducer';\r\nimport superAdminSettingsReducer from './superAdminSettingsReducer';\r\nimport groupAdminSettingsReducer from './groupAdminSettingsReducer';\r\nimport legalDocumentsReducer from './legalDocumentsReducer';\r\nimport invitedUsersReducer from './invitedUsersReducer';\r\nimport invitationDialogReducer from './invitationDialogReducer';\r\nimport addAngelNetworkDialogReducer from './addAngelNetworkDialogReducer';\r\nimport manageGroupFromParamsReducer from './manageGroupFromParamsReducer';\r\nimport investorSelfCertificationAgreementsReducer from './investorSelfCertificationAgreementsReducer';\r\nimport angelNetworksReducer from './angelNetworksReducer';\r\nimport manageJoinRequestsReducer from './manageJoinRequestsReducer';\r\nimport pledgesTableReducer from './pledgesTableReducer';\r\nimport feedbackSnackbarReducer from './feedbackSnackbarReducer';\r\nimport activitiesTableReducer from './activitiesTableReducer';\r\nimport manageJSONCompareChangesDialogReducer from './manageJSONCompareChangesDialogReducer';\r\nimport groupAdminsTableReducer from './groupAdminsTableReducer';\r\nimport createPledgeDialogReducer from './createPledgeDialogReducer';\r\nimport selectProjectVisibilityReducer from './selectProjectVisiblityReducer';\r\nimport manageSystemGroupsReducer from './manageSystemGroupsReducer';\r\nimport manageMarketingPreferencesReducer from './manageMarketingPreferencesReducer';\r\nimport createProjectReducer from './createProjectReducer';\r\nimport manageGroupUrlReducer, {ManageGroupUrlState} from \"./manageGroupUrlReducer\";\r\nimport signInReducer, {SignInState} from \"../../pages/signin/SignInReducer\";\r\nimport authenticationReducer, {AuthenticationState} from \"./authenticationReducer\";\r\nimport manageSystemAttributesReducer, {ManageSystemAttributesState} from \"./manageSystemAttributesReducer\";\r\nimport exploreOffersReducer, {ExploreOffersState} from \"../../shared-components/explore-offers/ExploreOffersReducer\";\r\nimport offersTableReducer, {OffersTableStates} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {ExploreGroupsState} from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport newExploreGroupsReducer from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport groupDetailsReducer, {GroupDetailsState} from \"../../pages/group-details/GroupDetailsReducer\";\r\nimport manageSystemIdleTimeReducer, {ManageSystemIdleTimeState} from \"./manageSystemIdleTimeReducer\";\r\nimport resetPasswordReducer, {ResetPasswordState} from \"../../pages/reset-password/ResetPasswordReducer\";\r\nimport resourcesReducer, {ResourcesState} from \"../../pages/resources/ResourcesReducer\";\r\nimport feedbackSnackbarReducerNew, {FeedbackSnackbarState} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport documentsDownloadReducer, {DocumentsDownloadState} from \"../../shared-components/documents-download/DocumentsDownloadReducer\";\r\nimport contactPitchOwnerDialogReducer, {ContactPitchOwnerDialogState} from \"../../pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer\";\r\nimport profileReducer, {ProfileState} from \"../../shared-components/profile/ProfileReducer\";\r\nimport signUpReducer, {SignUpState} from \"../../pages/signup/SignUpReducer\";\r\nimport manageSectorsReducer, {ManageSectorsState} from \"../../pages/admin/components/manage-sectors/ManageSectorsReducer\";\r\n\r\nexport interface AppState {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemIdleTimeState: ManageSystemIdleTimeState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n\r\n    SignInLocalState: SignInState;\r\n    SignUpLocalState: SignUpState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    OffersTableLocalState: OffersTableStates;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    ResourcesLocalState: ResourcesState;\r\n\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n\r\n    ProfileLocalState: ProfileState;\r\n\r\n    // mitigation plan for the old states of old reducers\r\n    [oldReducers: string]: any;\r\n}\r\n\r\nconst rootReducer = combineReducers<AppState>({\r\n    MediaQueryState: mediaQueryReducer,\r\n    ManageSystemIdleTimeState: manageSystemIdleTimeReducer,\r\n    ManageGroupUrlState: manageGroupUrlReducer,\r\n    AuthenticationState: authenticationReducer,\r\n    ManageSystemAttributesState: manageSystemAttributesReducer,\r\n\r\n    SignInLocalState: signInReducer,\r\n    SignUpLocalState: signUpReducer,\r\n    ExploreOffersLocalState: exploreOffersReducer,\r\n    OffersTableLocalState: offersTableReducer,\r\n    ExploreGroupsLocalState: newExploreGroupsReducer,\r\n    GroupDetailsLocalState: groupDetailsReducer,\r\n    ResetPasswordLocalState: resetPasswordReducer,\r\n    ResourcesLocalState: resourcesReducer,\r\n\r\n    FeedbackSnackbarLocalState: feedbackSnackbarReducerNew,\r\n    DocumentsDownloadLocalState: documentsDownloadReducer,\r\n    ContactPitchOwnerDialogLocalState: contactPitchOwnerDialogReducer,\r\n\r\n    ManageSectorsLocalState: manageSectorsReducer,\r\n\r\n    ProfileLocalState: profileReducer,\r\n\r\n    // Old reducers --------------------------\r\n    auth: authReducer,\r\n    createBusinessProfile: createBusinessProfileReducer,\r\n    editUser: editUserReducer,\r\n    editImage: editImageReducer,\r\n    editVideo: editVideoReducer,\r\n    uploadFiles: uploadFilesReducer,\r\n    uploadingStatus: uploadingStatusReducer,\r\n    changePassword: changePasswordReducer,\r\n    manageClubAttributes: clubAttributesReducer,\r\n    manageForums: forumsReducer,\r\n    manageNotifications: notificationsReducer,\r\n    dashboardSidebar: dashboardSidebarReducer,\r\n    superAdminSettings: superAdminSettingsReducer,\r\n    groupAdminSettings: groupAdminSettingsReducer,\r\n    legalDocuments: legalDocumentsReducer,\r\n    invitedUsers: invitedUsersReducer,\r\n    manageInvitationDialog: invitationDialogReducer,\r\n    manageAddAngelNetworkDialog: addAngelNetworkDialogReducer,\r\n    manageGroupFromParams: manageGroupFromParamsReducer,\r\n    manageInvestorSelfCertificationAgreement: investorSelfCertificationAgreementsReducer,\r\n    manageAngelNetworks: angelNetworksReducer,\r\n    manageJoinRequests: manageJoinRequestsReducer,\r\n    managePledgesTable: pledgesTableReducer,\r\n    manageFeedbackSnackbar: feedbackSnackbarReducer,\r\n    manageActivitiesTable: activitiesTableReducer,\r\n    manageJSONCompareChangesDialog: manageJSONCompareChangesDialogReducer,\r\n    manageGroupAdminsTable: groupAdminsTableReducer,\r\n    manageCreatePledgeDialog: createPledgeDialogReducer,\r\n    manageSelectProjectVisibility: selectProjectVisibilityReducer,\r\n    manageSystemGroups: manageSystemGroupsReducer,\r\n    manageMarketingPreferences: manageMarketingPreferencesReducer,\r\n    manageCreateProject: createProjectReducer,\r\n});\r\n\r\nexport default rootReducer;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport {applyMiddleware, createStore, Store} from \"redux\";\r\nimport rootReducer, {AppState} from \"./redux-store/reducers\";\r\nimport {Provider} from \"react-redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst store: Store<AppState> = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n    <Provider\r\n        store={store}\r\n    >\r\n        <App/>\r\n    </Provider>,\r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}