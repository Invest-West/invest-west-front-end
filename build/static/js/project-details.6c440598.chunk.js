"use strict";(self.webpackChunkinvest_west=self.webpackChunkinvest_west||[]).push([[923],{32011:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(89379),o=n(65043),r=n(97508),a=n(14033),s=n(50631),l=n(56740),d=n(99346),c=n(70579);class m extends o.Component{render(){const{FeedbackSnackbarLocalState:e,close:t}=this.props;return(0,c.jsx)(a.A,{open:e.open,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2500,onClose:t,TransitionComponent:p,transitionDuration:{enter:130,exit:130},children:(0,c.jsx)(d.A,{variant:"filled",severity:e.type,onClose:t,children:e.message})})}}const h=(0,r.Ng)(e=>({FeedbackSnackbarLocalState:e.FeedbackSnackbarLocalState}),e=>({close:()=>e((0,l.vA)())}))(m),p=o.forwardRef((e,t)=>(0,c.jsx)(s.A,(0,i.A)((0,i.A)({},e),{},{ref:t,direction:"up"})))},63950:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC0FBMVEUAAAAA//8Af/8AqqoAf78AmcwAqtQAkdoAn98AjcYAmcwAotAAlNQAnNcAkdoAmcwAj88AltIAm9QAk9YAltAAm9IAlNQAmNYAk9cAl88AmtEAldMAlNUAl88AmtAAltIAmNMAlNQAl9UAltEAmdIAldMAl9QAlNUAltAAldIAl9MAlNQAltUAmNIAldMAl9QAmNIAldMAl9MAmdQAltEAmNEAldIAldMAltQAmNEAltIAl9IAldMAltMAmNQAltEAl9IAldIAltMAmNMAltQAl9EAldIAl9IAmNMAltMAl9QAltIAl9IAmNMAltMAl9QAltEAl9IAldIAltMAl9MAltQAl9EAldIAltIAl9MAltMAl9QAltIAl9IAmNIAltMAl9MAltQAl9IAmNIAltIAl9MAltMAl9QAmNIAltIAl9MAltMAl9MAldEAltIAl9IAltMAl9MAltMAltIAl9IAltIAl9MAltMAl9MAl9IAltIAl9IAltMAl9MAl9MAltIAl9IAltEAl9MAltMAltIAl9IAltIAl9MAltMAldMAl9IAltIAl9IAltMAldMAl9MAltIAl9IAltEAl9MAl9MAltMAl9IAltIAldMAl9MAltIAl9IAltEAldMAl9MAl9IAltEAldMAl9MAltMAl9IAltIAl9EAl9MAldMAl9MAltIAl9IAl9EAl9MAltMAl9IAldEAl9MAltMAl9MAldEAl9EAldMAl9MAltIAldIAl9EAldMAl9MAltMAl9IAl9EAldEAl9MAltMAl9MAl9IAldEAl9EAldMAl9MAltMAldIAl9EAldEAl9MAltMAldMAl9EAldEAl9EAltMAldMAl9IAldEAl9EAldMAl9MAl9MAldIAl9EAldEAl9MAl9MAldMAl9EAldEAl9EAltMAldMAl9MAldEAl9EAldEAldMAl9MAldMAl9EAldEAl9NBjL3XAAAA73RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExYXGBkaGxwdHyAhIiMkJScoKSorLC4vMDE0NTY5Ojs8PT4/QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeI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"},66347:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(65043),o=n(97508),r=n(63532),a=n(16702),s=n(76986),l=n(66187),d=n(64742),c=n(74698),m=n(70579);class h extends i.Component{render(){const{ManageSystemAttributesState:e,ManageGroupUrlState:t}=this.props;if(!e.systemAttributes)return null;let n=e.systemAttributes.riskWarningFooter;n=n.split("%groupName%").join(t.group?t.group.displayName:"Invest West");let i=n.split("%URL%");const o=i[1];return(0,m.jsxs)(a.A,{border:"1px solid ".concat(s.A[600]),borderRadius:"24px",padding:"24px",bgcolor:s.A[100],children:[(0,m.jsx)(l.A,{variant:"body1",align:"left",children:(0,m.jsx)("u",{children:"Risk warning"})}),(0,m.jsx)(a.A,{marginTop:"18px",whiteSpace:"pre-line",children:(0,m.jsxs)(l.A,{variant:"body1",align:"justify",children:[i[0],(0,m.jsx)(c.A,{url:d.Ay.nonGroupRiskWarning,target:"_blank",color:(0,r.gR)(t).palette.error.main,activeColor:"none",activeUnderline:!0,component:"nav-link",childComponent:o}),i[2]]})})]})}}const p=(0,o.Ng)(e=>({ManageSystemAttributesState:e.ManageSystemAttributesState,ManageGroupUrlState:e.ManageGroupUrlState}))(h)},67501:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ee});var i=n(89379),o=n(65043),r=n(4328),a=n(58684),s=n(66187),l=n(20495),d=n(30105),c=n(5571),m=n(28814),h=n(52643),p=n(63990),A=n(81497),g=n(58168),u=n(80045),x=n(43024),y=n(47573),f=n(75992),j=n(26841),b=n(64867),C=o.forwardRef(function(e,t){var n=e.active,i=e.alternativeLabel,r=e.children,a=e.classes,s=e.className,l=e.completed,d=e.disabled,c=(e.expanded,e.icon),m=(e.last,e.optional),h=e.orientation,p=(0,u.A)(e,["active","alternativeLabel","children","classes","className","completed","disabled","expanded","icon","last","optional","orientation"]),A={active:n,alternativeLabel:i,completed:l,disabled:d,icon:c,optional:m,orientation:h},y=(0,b.A)(r,["StepLabel"])?o.cloneElement(r,A):o.createElement(j.A,A,r);return o.createElement(f.A,(0,g.A)({focusRipple:!0,disabled:d,TouchRippleProps:{className:a.touchRipple},className:(0,x.A)(a.root,a[h],s),ref:t},p),y)});const v=(0,y.A)({root:{width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},horizontal:{},vertical:{justifyContent:"flex-start",padding:"8px",margin:"-8px"},touchRipple:{color:"rgba(0, 0, 0, 0.3)"}},{name:"MuiStepButton"})(C);var D=n(97563),S=o.forwardRef(function(e,t){var n=e.active,i=(e.alternativeLabel,e.children),r=e.classes,a=e.className,s=(e.completed,e.expanded),l=e.last,d=(e.optional,e.orientation,e.TransitionComponent),c=void 0===d?D.A:d,m=e.transitionDuration,h=void 0===m?"auto":m,p=e.TransitionProps,A=(0,u.A)(e,["active","alternativeLabel","children","classes","className","completed","expanded","last","optional","orientation","TransitionComponent","transitionDuration","TransitionProps"]);var y=h;return"auto"!==h||c.muiSupportAuto||(y=void 0),o.createElement("div",(0,g.A)({className:(0,x.A)(r.root,a,l&&r.last),ref:t},A),o.createElement(c,(0,g.A)({in:n||s,className:r.transition,timeout:y,unmountOnExit:!0},p),i))});const I=(0,y.A)(function(e){return{root:{marginTop:8,marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:"1px solid ".concat("light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600])},last:{borderLeft:"none"},transition:{}}},{name:"MuiStepContent"})(S);var P=n(26943),k=n(10581),L=n(28130),T=n(85883),N=n(43867),w=o.forwardRef(function(e,t){return o.createElement(s.A,(0,g.A)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))});const M=(0,y.A)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(w);var B=n(52907),O=n(77252),R=n(20969),E=n(7991),_=n(61072),U=n(78602),H=n(53519),F=n(33637),V=n(52517),Q=n.n(V),W=n(62582),G=n(1043),z=n.n(G),q=n(32313),Y=n(90149),J=n(96776),X=n(94419),K=n(27836),Z=n(70304),$=n(67309),ee=n(97508),te=n(70002),ne=n(9616),ie=n(10063),oe=n(61343),re=n(59799),ae=n(94106),se=n(36677),le=n(43693),de=n(43608),ce=n(93976),me=n(64742),he=n(81350),pe=n(92197),Ae=n(89459),ge=n(17376),ue=n(16702),xe=n(9989),ye=n(87603),fe=n(99854),je=n(63532),be=n(74698),Ce=n(70579);class ve extends o.Component{render(){const{ManageSystemAttributesState:e,ManageGroupUrlState:t,documents:i,shouldShowRiskWarningOnDownload:o,DocumentsDownloadLocalState:r,onDocumentClick:l,onAcceptRiskWarningClick:c,onCancelRiskWarningClick:m}=this.props;if(!i||0===i.length)return null;if(!e.systemAttributes)return null;let h=e.systemAttributes.riskWarningFooter;h=h.split("%groupName%").join(t.group?t.group.displayName:"Invest West");let p=h.split("%URL%");return(0,Ce.jsxs)(ue.A,{marginTop:"20px",children:[(0,Ce.jsx)(xe.A,{children:i.map((e,t)=>void 0!==e.removed&&e.removed?null:(0,Ce.jsxs)(ye.A,{button:!0,onClick:()=>l(e,null!==o&&void 0!==o&&o),children:[(0,Ce.jsx)("img",{alt:"Document image",src:n(66447).default,width:48,height:48}),(0,Ce.jsxs)(ue.A,{display:"flex",flexDirection:"row",children:[(0,Ce.jsx)(s.A,{variant:"body2",align:"left",children:e.fileName}),(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:e.readableSize})]})]},t))}),(0,Ce.jsxs)(L.A,{open:r.openRiskWarningDialog,onClose:()=>m(),children:[(0,Ce.jsx)(T.A,{children:"Accept Risk Warning"}),(0,Ce.jsx)(N.A,{children:(0,Ce.jsx)(ue.A,{marginTop:"18px",whiteSpace:"pre-line",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"justify",children:[p[0],(0,Ce.jsx)(be.A,{url:me.Ay.nonGroupRiskWarning,target:"_blank",color:(0,je.gR)(t).palette.error.main,activeColor:"none",activeUnderline:!0,component:"nav-link",childComponent:p[1]}),p[2]]})})}),(0,Ce.jsx)(B.A,{children:(0,Ce.jsxs)(ue.A,{display:"flex",flexDirection:"row",marginRight:"4px",marginBottom:"4px",children:[(0,Ce.jsx)(d.A,{className:(0,a.AH)(ce.Ay.no_text_transform),onClick:()=>m(),children:"Cancel"}),(0,Ce.jsx)(ue.A,{width:"14px"}),(0,Ce.jsx)(d.A,{color:"primary",variant:"contained",className:(0,a.AH)(ce.Ay.no_text_transform),onClick:()=>c(),children:"Accept"})]})})]})]})}}const De=(0,ee.Ng)(e=>({ManageSystemAttributesState:e.ManageSystemAttributesState,ManageGroupUrlState:e.ManageGroupUrlState,DocumentsDownloadLocalState:e.DocumentsDownloadLocalState}),e=>({onDocumentClick:(t,n)=>e((0,fe.RT)(t,n)),onAcceptRiskWarningClick:()=>e((0,fe.$O)()),onCancelRiskWarningClick:()=>e((0,fe.tc)())}))(ve);var Se=n(66347),Ie=n(12516),Pe=n(64305);class ke extends o.Component{render(){const{ContactPitchOwnerDialogLocalState:e,toggleContactDialog:t,sendContactEmail:n}=this.props;return(0,Ce.jsxs)(L.A,{open:e.contactDialogOpen,onClose:()=>t(),children:[(0,Ce.jsx)(N.A,{children:(0,Ce.jsxs)(ue.A,{display:"flex",flexDirection:"column",children:[(0,Ce.jsx)(s.A,{variant:"body1",align:"left",children:"We will let the pitch owner know that you would like to find out more."}),(0,Ce.jsx)(ue.A,{height:"20px"}),(0,Ce.jsx)(s.A,{variant:"body1",align:"left",children:"Are you happy for us to share your email address?"})]})}),(0,Ce.jsxs)(B.A,{children:[(0,Pe.h4)(e)?null:(0,Ce.jsx)(d.A,{onClick:()=>t(),className:(0,a.AH)(ce.Ay.no_text_transform),children:"Cancel"}),(0,Ce.jsx)(d.A,{color:"primary",variant:"contained",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:(0,Pe.h4)(e),onClick:()=>n(),children:(0,Pe.h4)(e)?"Sending email to ".concat(e.projectOwnerEmail," ..."):"Yes"})]})]})}}const Le=(0,ee.Ng)(e=>({ContactPitchOwnerDialogLocalState:e.ContactPitchOwnerDialogLocalState}),e=>({toggleContactDialog:()=>e((0,Ie.ss)()),sendContactEmail:()=>e((0,Ie.Pe)())}))(ke);var Te=n(32011),Ne=n(63191);class we extends o.Component{constructor(e){super(e),this.loadData=()=>{const{user:e,userLoaded:t,selectProjectVisibility_setProject:n}=this.props,{dataLoaded:o,dataBeingLoaded:r}=this.state;if(!t)return;if(!e&&!o)return void this.setState({dataLoaded:!0,dataBeingLoaded:!1,investorPledgeLoaded:!0,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{projectLoaded:!0,projectIssuerLoaded:!0,votesLoaded:!0,pledgesLoaded:!0})});if(r)return;this.setState({dataLoaded:!1,dataBeingLoaded:!0});const a=this.props.match.params.projectID;de.c7(a).then(t=>{e.type===le.mP&&de.rB({userID:e.id,activityType:le.VV,interactedObjectLocation:le.qV,interactedObjectID:t.id,activitySummary:de.AP.replace("%project%",t.projectName),action:me.L5.replace(":projectID",t.id)}),n(t),this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{project:t,projectLoaded:!0}),mainBody:e.type===le.Vi&&e.anid===t.anid?0:1,adminOfferStatesActiveStep:t.status===le.xz?0:t.status===le.Q3||t.status===le._Y?1:t.status===le.cV||t.status===le.nB?2:0}),de.Qi(t.id,null,de.g8).then(n=>{this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{votes:n,votesLoaded:!0})}),de.LJ(t.id,null,de.dH).then(n=>{if(e.type===le.mP){let t=n.findIndex(t=>t.investorID===e.id&&""!==t.amount);-1!==t&&this.setState({investorPledge:n[t]})}this.setState({dataLoaded:!0,dataBeingLoaded:!1,investorPledgeLoaded:!0,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{pledges:n,pledgesLoaded:!0})}),de.BN(t.issuerID).then(e=>{this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{projectIssuer:e,projectIssuerLoaded:!0})})}).catch(e=>{this.setState({dataLoaded:!0,dataBeingLoaded:!1,investorPledgeLoaded:!0,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{projectLoaded:!0,projectIssuerLoaded:!0,votesLoaded:!0,pledgesLoaded:!0})})})}).catch(e=>{this.setState({dataLoaded:!0,dataBeingLoaded:!1,investorPledgeLoaded:!0,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{projectLoaded:!0,projectIssuerLoaded:!0,votesLoaded:!0,pledgesLoaded:!0})})})}).catch(e=>{this.setState({dataLoaded:!0,dataBeingLoaded:!1,investorPledgeLoaded:!0,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{projectLoaded:!0,projectIssuerLoaded:!0,votesLoaded:!0,pledgesLoaded:!0})})})}).catch(e=>{this.setState({dataLoaded:!0,dataBeingLoaded:!1,investorPledgeLoaded:!0,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{projectLoaded:!0,projectIssuerLoaded:!0,votesLoaded:!0,pledgesLoaded:!0})})})},this.loadDataWhenUIElementsChange=()=>{const{user:e,pledgesTable_setProject:t}=this.props,{mainBody:n,commentsLoaded:o}=this.state,{project:r,projectLoaded:a,pledges:s,pledgesLoaded:l,votes:d,votesLoaded:c}=this.state.projectDetail;d&&c&&r&&a&&r.status===le.Q3&&(this.votesListener||(this.votesListener=this.database.ref(le.PI).orderByChild("projectID").equalTo(r.id),this.votesListener.on("child_added",e=>{let t=e.val();const n=this.state.projectDetail.votes;-1===n.findIndex(e=>e.id===t.id)&&de.BN(t.investorID).then(e=>{t.investor=e,this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{votes:[...n,t]})})})}),this.votesListener.on("child_changed",e=>{let t=e.val();const n=this.state.projectDetail.votes;let o=n.findIndex(e=>e.id===t.id);if(-1!==o){let e=n;t.investor=e[o].investor,e[o]=t,this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{votes:e})})}}),this.votesListener.on("child_removed",e=>{let t=e.key;const n=this.state.projectDetail.votes;let o=n.findIndex(e=>e.id===t);if(-1!==o){let e=n;e.splice(o,1),this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{votes:e})})}}))),s&&l&&a&&r&&r.status!==le.xz&&r.status!==le.YS&&r.status!==le.Q3&&(this.pledgesListener||(this.pledgesListener=this.database.ref(le.eo).orderByChild("projectID").equalTo(r.id),this.pledgesListener.on("child_added",e=>{let t=e.val(),n=[...this.state.projectDetail.pledges];-1===n.findIndex(e=>e.id===t.id)&&de.BN(t.investorID).then(e=>{t.investor=e,this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{pledges:[...n,t]})})})}),this.pledgesListener.on("child_changed",t=>{let n=t.val(),o=[...this.state.projectDetail.pledges],r=o.findIndex(e=>e.id===n.id);if(-1!==r){let t=o;n.investor=t[r].investor,t[r]=n;const a=JSON.parse(JSON.stringify(this.state.investorPledge));this.setState({investorPledge:null!==a?a.id===n.id?""===n.amount?null:JSON.parse(JSON.stringify(n)):a:n.investorID===e.id?""===n.amount?null:JSON.parse(JSON.stringify(n)):null,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{pledges:t})})}}),this.pledgesListener.on("child_removed",e=>{let t=e.key,n=[...this.state.projectDetail.pledges],o=n.findIndex(e=>e.id===t);if(-1!==o){let e=n;e.splice(o,1);const r=this.state.investorPledge;r||r.id!==t?this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{pledges:e})}):this.setState({investorPledge:null,projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{pledges:e})})}}))),5===n&&r&&t(r),3===n&&(o||de.lb(r.id).then(t=>{de.pg(t).then(t=>{this.setState({comments:[...t],commentsLoaded:!0}),this.commentsListener||(this.commentsListener=this.database.ref(le.I0).orderByChild("projectID").equalTo(r.id),this.commentsListener.on("child_added",t=>{let n=t.val();if(n.replies=[],n.commentedBy===e.id){this.state.currenComment||this.setState({currentComment:n,currentCommentText:n.comment})}let i=[...this.state.comments];-1===i.findIndex(e=>e.id===n.id)&&de.BN(n.commentedBy).then(e=>{n.author=e,this.setState({comments:[...i,n]})})}),this.commentsListener.on("child_changed",e=>{let t=e.val(),n=[...this.state.comments],i=n.findIndex(e=>e.id===t.id);if(-1!==i){let e=[...n];t.author=e[i].author,t.replies=e[i].replies,e[i]=t;const o=this.state.currentComment;o&&o.id===t.id?this.setState({comments:e,currentComment:t}):this.setState({comments:[...e]})}})),this.commentsRepliesListener||(this.commentsRepliesListener=this.database.ref(le.UN).orderByChild("projectID").equalTo(r.id),this.commentsRepliesListener.on("child_added",e=>{let t=e.val(),n=[...this.state.comments];const i=n.findIndex(e=>e.id===t.commentID);if(-1!==i){let e=n[i];if(-1===e.replies.findIndex(e=>e.id===t.id)){if(t.hasOwnProperty("deleted")&&!0===t.deleted)return;de.BN(t.repliedBy).then(o=>{t.author=o,e.replies=[...e.replies,t],n[i]=e,this.setState({comments:[...n]})})}}}),this.commentsRepliesListener.on("child_changed",e=>{let t=e.val(),n=[...this.state.comments];const i=n.findIndex(e=>e.id===t.commentID);if(-1!==i){let e=n[i];const o=e.replies.findIndex(e=>e.id===t.id);-1!==o&&(t.hasOwnProperty("deleted")&&!0===t.deleted?(e.replies.splice(o,1),n[i]=e,this.setState({comments:[...n]})):de.BN(t.repliedBy).then(r=>{t.author=e.replies[o].author,e.replies[o]=t,n[i]=e,this.setState({comments:[...n]})}))}}))}).catch(e=>{this.setState({commentsLoaded:!0})})}).catch(e=>{this.setState({commentsLoaded:!0})}))},this.handleVotePitch=e=>{const{groupProperties:t,user:n}=this.props,{project:i,votes:o}=this.state.projectDetail;let r=Be(o,n);r&&(r.investor=null);let a={};if(r)a=JSON.parse(JSON.stringify(r)),""===a.voted?a.voted=e:a.voted="",a.date=Y.AV(),this.database.ref(le.PI).child(a.id).update(a).then(()=>{de.rB({userID:n.id,activityType:le.Q$,interactedObjectLocation:le.PI,interactedObjectID:a.id,activitySummary:de.Xj.replace("%project%",i.projectName),action:me.L5.replace(":projectID",i.id),value:{before:r,after:a}})});else{const o=this.database.ref(le.PI).push().key;a.id=o,a.anid=t?t.anid:null,a.investorID=n.id,a.projectID=i.id,a.voted=e,a.date=Y.AV(),this.database.ref(le.PI).child(o).set(a).then(()=>{de.rB({userID:n.id,activityType:le.Q$,interactedObjectLocation:le.PI,interactedObjectID:o,activitySummary:de.xW.replace("%project%",i.projectName),action:me.L5.replace(":projectID",i.id),value:a}),de._Y({title:"Someone liked your pitch",message:"Congratulations. A new investor has showed interest in your pitch.",userID:i.issuerID,action:me.L5.replace(":projectID",i.id)}).then(()=>{}).catch(e=>{})})}},this.attachProjectChangedListener=()=>{const{project:e}=this.state.projectDetail;null===this.projectListener&&(this.projectListener=this.database.ref(le.qV).child(e.id),this.projectListener.on("value",e=>{const t=e.val();t.group=this.state.projectDetail.project.group,t.issuer=this.state.projectDetail.project.issuer,this.setState({projectDetail:(0,i.A)((0,i.A)({},this.state.projectDetail),{},{project:t}),adminOfferStatesActiveStep:t.status===le.xz?0:t.status===le.Q3||t.status===le._Y?1:t.status===le.cV||t.status===le.nB?2:0})}))},this.detachProjectChangedListener=()=>{this.projectListener&&this.projectListener.off("value")},this.handleDocumentClick=e=>{window.open(e,"_blank")},this.handleMakeProjectGoLiveDecision=e=>{const{user:t}=this.props,{project:n}=this.state.projectDetail;de.yh(t,JSON.parse(JSON.stringify(n)),e).then(()=>{}).catch(e=>{})},this.handleMakeProjectGoToPledgePhaseDecision=e=>{const{user:t}=this.props,{project:n}=this.state.projectDetail;n.Pitch.status!==le.VY&&n.Pitch.status!==le.Oi||de.rm(t,JSON.parse(JSON.stringify(n)),e).then(()=>{}).catch(e=>{})},this.handleMakeProjectPledgeGoLiveDecision=e=>{const{user:t}=this.props,{project:n}=this.state.projectDetail;de.Ff(t,JSON.parse(JSON.stringify(n)),e).then(()=>{}).catch(e=>{})},this.handleMainBodyTabChanged=(e,t)=>{this.setState({mainBody:t})},this.handlePostACommentClick=()=>{this.setState({commentDialogOpen:!0})},this.handleCloseCommentDialog=()=>{this.setState({commentDialogOpen:!1,commentText:"",commentSubmitClick:!1})},this.handleTextChanged=e=>{const t=e.target.name,n=e.target.value;this.setState({[t]:n})},this.handleDateChanged=e=>{e&&"Invalid Date"===e?this.setState({changedPitchExpiryDate:NaN}):this.setState({changedPitchExpiryDate:e?e.getTime():null})},this.handleSubmitCommentClick=()=>{const{groupProperties:e,user:t,setFeedbackSnackbarContent:n}=this.props,{commentText:i}=this.state,{project:o}=this.state.projectDetail;if(this.setState({commentSubmitClick:!0}),0===i.trim().length)return;const r=this.database.ref(le.I0).push().key,a={id:r,commenterANID:e?e.anid:null,projectID:o.id,commentedBy:t.id,status:le.Fg,commentedDate:Y.AV(),comment:i};this.database.ref(le.I0).child(r).set(a).then(()=>{de.rB({userID:t.id,activityType:le.Q$,interactedObjectLocation:le.I0,interactedObjectID:r,activitySummary:de.xj.replace("%project%",o.projectName),action:me.L5.replace(":projectID",o.id),value:a}),de._Y({title:"Someone commented on your pitch",message:"An investor has commented on your pitch. Go and see what they said.",userID:o.issuerID,action:me.L5.replace(":projectID",o.id)}).then(()=>{this.handleCloseCommentDialog()}).catch(e=>{this.handleCloseCommentDialog()}),n("Comment added.","primary","bottom")}).catch(e=>{this.handleCloseCommentDialog(),n("Error happened. Could not add comment.","error","bottom")})},this.handleCancelUpdateCurrentComment=()=>{const{currentComment:e}=this.state;this.setState({currentCommentText:e.comment?e.comment:""})},this.handleSubmitUpdateCurrentComment=()=>{const{currentComment:e,currentCommentText:t}=this.state,{project:n}=this.state.projectDetail,{setFeedbackSnackbarContent:i}=this.props;if(0===t.trim().length)return;let o=JSON.parse(JSON.stringify(e));o.status=le.V3,o.comment=t,o.commentedDate=Y.AV(),o.replies=null,o.author=null,this.database.ref(le.I0).child(o.id).update(o).then(()=>{de.rB({userID:e.commentedBy,activityType:le.Q$,interactedObjectLocation:le.I0,interactedObjectID:e.id,activitySummary:de.KY.replace("%project%",n.projectName),action:me.L5.replace(":projectID",n.id),value:{before:JSON.parse(JSON.stringify(e)),after:o}}),i("Comment updated.","primary","bottom")})},this.handleToggleReplyToComment=(e,t)=>{this.setState({replyingToComment:e,replyText:t?t.text:"",replyEdited:t})},this.handleSubmitCommentReply=()=>{const{replyingToComment:e,replyText:t,replyEdited:n}=this.state,{project:o}=this.state.projectDetail,{user:r,setFeedbackSnackbarContent:a}=this.props;if(n){let e=JSON.parse(JSON.stringify(n));e.author=null;let i=JSON.parse(JSON.stringify(e));i.text=t,i.status=le._k,i.repliedDate=Y.AV(),de.Zv(i).then(()=>{de.rB({userID:r.id,activityType:le.Q$,interactedObjectLocation:le.UN,interactedObjectID:i.id,activitySummary:de.bf.replace("%projectName%",o.projectName),action:me.L5.replace(":projectID",o.id),value:{before:e,after:i}}),this.handleToggleReplyToComment(null,null),a("Reply updated.","primary","bottom")}).catch(e=>{a("Error happened. Could not update reply.","error","bottom")})}else{const n={text:t,repliedDate:Y.AV(),projectID:o.id,commentID:e.id,repliedBy:r.id,status:le.QG};de.m4(n).then(e=>{de.rB({userID:r.id,activityType:le.Q$,interactedObjectLocation:le.UN,interactedObjectID:e,activitySummary:de.cG.replace("%projectName%",o.projectName),action:me.L5.replace(":projectID",o.id),value:(0,i.A)((0,i.A)({},n),{},{id:e})}),this.handleToggleReplyToComment(null,null),a("Reply added.","primary","bottom")}).catch(e=>{a("Error happened. Could not add reply.","error","bottom")})}},this.handleDeleteCommentReply=e=>{const{user:t,setFeedbackSnackbarContent:n}=this.props,{project:o}=this.state.projectDetail;de.zp(e.id).then(()=>{de.rB({userID:t.id,activityType:le.Q$,interactedObjectLocation:le.UN,interactedObjectID:e.id,activitySummary:de.v_.replace("%projectName%",o.projectName),action:me.L5.replace(":projectID",o.id),value:{before:(0,i.A)((0,i.A)({},e),{},{author:null}),after:(0,i.A)((0,i.A)({},e),{},{author:null,deleted:!0})}}),n("Reply deleted.","primary","bottom")}).catch(e=>{n("Error happened. Could not delete reply.","error","bottom")})},this.handleAdminOfferStatesStepClick=e=>{this.setState({adminOfferStatesActiveStep:e})},this.bringPitchBackToLive=async()=>{const{project:e}=this.state.projectDetail,{changedPitchExpiryDate:t}=this.state,{user:n,setFeedbackSnackbarContent:i}=this.props;if(n.type===le.Vi)try{await de.H4({project:JSON.parse(JSON.stringify(e)),newPitchExpiryDate:t}),i("Pitch is now live again.","primary","bottom")}catch(o){i("Error happened. Couldn't update pitch.","error","bottom")}},this.toggleRejectFeedback=()=>{this.setState({addingRejectFeedback:!this.state.addingRejectFeedback,rejectFeedback:""})},this.sendProjectBackToIssuer=async()=>{const{projectDetail:e,rejectFeedback:t,sendingProjectBack:n}=this.state,{setFeedbackSnackbarContent:i}=this.props;if(0!==t.trim().length&&!n){this.setState({sendingProjectBack:!0});try{await(new Ae.A).request("post",Ae.v.sendProjectBackToIssuerRoute,{queryParameters:null,requestBody:{projectID:e.project.id,feedback:t}}),this.setState({sendingProjectBack:!1}),i("Pitch has been sent back.","primary","bottom")}catch(o){i("Error happened. Couldn't send offer back.","error","bottom")}}},this.database=se.A.database(),this.projectListener=null,this.commentsListener=null,this.commentsRepliesListener=null,this.pledgesListener=null,this.votesListener=null,this.state={dataLoaded:!1,dataBeingLoaded:!1,investorPledge:null,investorPledgeLoaded:!1,mainBody:1,adminOfferStatesActiveStep:0,comments:[],commentsLoaded:!1,commentDialogOpen:!1,commentText:"",commentSubmitClick:!1,currentComment:null,currentCommentText:"",replyingToComment:null,replyText:"",replyEdited:null,changedPitchExpiryDate:null,addingRejectFeedback:!1,rejectFeedback:"",sendingProjectBack:!1,projectDetail:{project:null,projectLoaded:!1,pledges:[],pledgesLoaded:!1,votes:[],votesLoaded:!1,projectIssuer:null,projectIssuerLoaded:!1}}}componentDidMount(){const{groupPropertiesLoaded:e,shouldLoadOtherData:t,user:n,userLoaded:i,userBeingLoaded:o,investorSelfCertificationAgreement_userID:r,investorSelfCertificationAgreementLoaded:a,investorSelfCertificationAgreementBeingLoaded:s,setGroupUserNameFromParams:l,setExpectedAndCurrentPathsForChecking:d,loadAngelNetwork:c,investorSelfCertificationAgreement_setUser:m,loadInvestorSelfCertificationAgreement:h}=this.props,{dataLoaded:p,dataBeingLoaded:A}=this.state,g=this.props.match;l(g.params.hasOwnProperty("groupUserName")?g.params.groupUserName:null),d(g.params.hasOwnProperty("groupUserName")?me.$U:me.L5,g.path),c(),e&&t&&(!o&&i&&(A||p||this.loadData(),n&&(r||n.type!==le.mP||m(n.id))),r&&(a||s||n.type!==le.mP||h())),console.log("Page loaded. Authentication status:",this.props.AuthenticationState.isAuthenticated?"Authenticated":"Not Authenticated"),console.log("Current user on page load:",this.props.AuthenticationState.currentUser)}componentDidUpdate(e,t,n){const{groupPropertiesLoaded:i,shouldLoadOtherData:o,user:r,userLoaded:a,userBeingLoaded:s,investorSelfCertificationAgreement_userID:l,investorSelfCertificationAgreementLoaded:d,investorSelfCertificationAgreementBeingLoaded:c,investorSelfCertificationAgreement_setUser:m,loadInvestorSelfCertificationAgreement:h,loadAngelNetwork:p}=this.props,{dataLoaded:A,dataBeingLoaded:g}=this.state,{project:u,projectLoaded:x}=this.state.projectDetail;p(),i&&o&&(!s&&a&&(g||A||this.loadData(),r&&(l||r.type!==le.mP||m(r.id))),l&&(d||c||r.type!==le.mP||h()),x&&u&&this.attachProjectChangedListener(),this.loadDataWhenUIElementsChange())}componentWillUnmount(){const{pledgesTable_stopListeningForPledgesChanged:e}=this.props;this.detachProjectChangedListener(),this.votesListener&&(this.votesListener.off("child_added"),this.votesListener.off("child_changed"),this.votesListener.off("child_removed")),this.pledgesListener&&(this.pledgesListener.off("child_added"),this.pledgesListener.off("child_changed"),this.pledgesListener.off("child_removed")),this.commentsListener&&(this.commentsListener.off("child_added"),this.commentsListener.off("child_changed")),this.commentsRepliesListener&&(this.commentsRepliesListener.off("child_added"),this.commentsRepliesListener.off("child_changed")),e()}render(){const{AuthenticationState:e,isMobile:t,groupUserName:n,groupProperties:i,groupPropertiesLoaded:o,shouldLoadOtherData:a,authStatus:s,authenticating:l,user:d,userLoaded:c,groupsUserIsIn:m,investorSelfCertificationAgreement:h,createPledgeDialog_toggleDialog:p,createPledgeDialog_setProject:A,projectVisibilitySetting:g,selectProjectVisibility_setProject:u}=this.props,{investorPledge:x,investorPledgeLoaded:y,mainBody:f,adminOfferStatesActiveStep:j,comments:b,commentsLoaded:C,commentDialogOpen:v,commentText:D,commentSubmitClick:S,currentComment:I,currentCommentText:P,replyingToComment:k,replyText:L,replyEdited:T,changedPitchExpiryDate:N,addingRejectFeedback:w,rejectFeedback:M,sendingProjectBack:B}=this.state,{project:O,projectLoaded:R,pledges:E,pledgesLoaded:_,votes:U,votesLoaded:H,projectIssuer:F,projectIssuerLoaded:V}=this.state.projectDetail;return o?a?l||!c||(0,Ne.nG)(e)?(0,Ce.jsx)(r.A,{marginTop:30,hAlignContent:"center",children:(0,Ce.jsx)(Q(),{color:i?i.settings.primaryColor:q.eq})}):s!==he.zG||!d||(0,Ne.pz)(e)?(0,Ce.jsx)(X.A,{}):(0,Ce.jsxs)("div",{children:[(0,Ce.jsx)(Me,{AuthenticationState:this.props.AuthenticationState,groupUserName:n,groupProperties:i,isMobile:t,user:d,userLoaded:c,groupsUserIsIn:m,investorSelfCertificationAgreement:h,mainBody:f,adminOfferStatesActiveStep:j,comments:b,commentsLoaded:C,currentComment:I,currentCommentText:P,replyingToComment:k,replyText:L,replyEdited:T,changedPitchExpiryDate:N,addingRejectFeedback:w,rejectFeedback:M,sendingProjectBack:B,project:O,projectLoaded:R,votes:U,votesLoaded:H,pledges:E,pledgesLoaded:_,investorPledge:x,investorPledgeLoaded:y,projectIssuer:F,projectIssuerLoaded:V,projectVisibilitySetting:g,onVote:this.handleVotePitch,onDocumentClick:this.handleDocumentClick,onMakeProjectGoLiveDecision:this.handleMakeProjectGoLiveDecision,onMakeProjectGoToPledgePhaseDecision:this.handleMakeProjectGoToPledgePhaseDecision,onMakeProjectPledgeGoLiveDecision:this.handleMakeProjectPledgeGoLiveDecision,onTabChanged:this.handleMainBodyTabChanged,onPostACommentClick:this.handlePostACommentClick,onTextChanged:this.handleTextChanged,onDateChanged:this.handleDateChanged,onCancelUpdateCurrentComment:this.handleCancelUpdateCurrentComment,onSubmitUpdateCurrentComment:this.handleSubmitUpdateCurrentComment,onToggleReplyToComment:this.handleToggleReplyToComment,onSubmitCommentReply:this.handleSubmitCommentReply,onDeleteCommentReply:this.handleDeleteCommentReply,onAdminOfferStatesStepClick:this.handleAdminOfferStatesStepClick,createPledgeDialog_toggleDialog:p,createPledgeDialog_setProject:A,selectProjectVisibility_setProject:u,bringPitchBackToLive:this.bringPitchBackToLive,toggleRejectFeedback:this.toggleRejectFeedback,sendProjectBackToIssuer:this.sendProjectBackToIssuer,toggleContactPitchOwnerDialog:()=>this.props.toggleContactPitchOwnerDialog(O.projectName,F.email)}),(0,Ce.jsx)(Oe,{open:v,project:O,commentText:D,commentSubmitClick:S,onClose:this.handleCloseCommentDialog,onCommentTextChanged:this.handleTextChanged,onSubmitCommentClick:this.handleSubmitCommentClick}),(0,Ce.jsx)(K.Ay,{}),(0,Ce.jsx)(Le,{}),(0,Ce.jsx)(Te.A,{})]}):(0,Ce.jsx)(X.A,{}):(0,Ce.jsx)(r.A,{marginTop:30,hAlignContent:"center",children:(0,Ce.jsx)(Q(),{color:q.eq})})}}class Me extends o.Component{constructor(){super(...arguments),this.onTabChanged=(e,t)=>{this.props.onTabChanged(e,t)},this.onTextChanged=e=>{this.props.onTextChanged(e)},this.onDateChanged=e=>{this.props.onDateChanged(e)},this.onVote=e=>{this.props.onVote(e)},this.onDocumentClick=e=>{this.props.onDocumentClick(e)},this.onMakeProjectGoLiveDecision=e=>{this.props.onMakeProjectGoLiveDecision(e)},this.onMakeProjectGoToPledgePhaseDecision=e=>{this.props.onMakeProjectGoToPledgePhaseDecision(e)},this.onMakeProjectPledgeGoLiveDecision=e=>{this.props.onMakeProjectPledgeGoLiveDecision(e)},this.onPostACommentClick=()=>{this.props.onPostACommentClick()},this.onCancelUpdateCurrentComment=()=>{this.props.onCancelUpdateCurrentComment()},this.onSubmitUpdateCurrentComment=()=>{this.props.onSubmitUpdateCurrentComment()},this.onToggleReplyToComment=(e,t)=>{this.props.onToggleReplyToComment(e,t)},this.onSubmitCommentReply=()=>{this.props.onSubmitCommentReply()},this.onDeleteCommentReply=e=>{this.props.onDeleteCommentReply(e)},this.onAdminOfferStatesStepClick=e=>{this.props.onAdminOfferStatesStepClick(e)},this.bringPitchBackToLive=()=>{this.props.bringPitchBackToLive()},this.toggleRejectFeedback=()=>{this.props.toggleRejectFeedback()},this.sendProjectBackToIssuer=()=>{this.props.sendProjectBackToIssuer()},this.toggleContactPitchOwnerDialog=()=>{this.props.toggleContactPitchOwnerDialog()},this.renderPageContent=()=>{const{AuthenticationState:e,groupsUserIsIn:t,groupUserName:i,groupProperties:o,isMobile:g,user:u,investorSelfCertificationAgreement:x,mainBody:y,adminOfferStatesActiveStep:f,comments:b,commentsLoaded:C,project:D,pledges:S,pledgesLoaded:L,votesLoaded:T,investorPledge:N,investorPledgeLoaded:w,projectIssuer:M,projectIssuerLoaded:B,currentComment:V,currentCommentText:G,replyingToComment:X,replyText:K,replyEdited:ee,changedPitchExpiryDate:te,addingRejectFeedback:ne,rejectFeedback:ie,sendingProjectBack:oe,projectVisibilitySetting:re,createPledgeDialog_toggleDialog:ae,createPledgeDialog_setProject:se,selectProjectVisibility_setProject:he}=this.props;if(!L||!T||!w||!B)return(0,Ce.jsx)(_.A,{noGutters:!0,children:(0,Ce.jsx)(U.A,{xs:12,md:12,lg:12,children:(0,Ce.jsx)(r.A,{width:"100%",marginTop:20,hAlignContent:"center",children:(0,Ce.jsx)(Q(),{color:o?o.settings.primaryColor:q.eq})})})});if(!D||!S||!M||D.visibility===le.DY&&(u.type===le.mP||u.type===le.rX)&&null!==t&&-1===t.findIndex(e=>e.anid===D.anid))return(0,Ce.jsx)(_.A,{noGutters:!0,children:(0,Ce.jsx)(U.A,{xs:12,md:12,lg:12,children:(0,Ce.jsx)(J.A,{})})});if(Y.M0(D)&&(u.type===le.rX&&u.id!==D.issuerID||u.type===le.mP||u.type===le.Vi&&!u.superAdmin&&u.anid!==D.anid))return(0,Ce.jsx)(_.A,{noGutters:!0,style:{marginLeft:10,marginRight:10},children:(0,Ce.jsx)(U.A,{xs:12,md:{span:10,offset:1},lg:{span:8,offset:2},children:(0,Ce.jsx)(r.A,{marginTop:40,hAlignContent:"center",children:(0,Ce.jsx)(s.A,{variant:"h5",align:"center",children:"This offer has been closed temporarily."})})})});if(D.visibility===le.DY&&u.type===le.Vi&&!u.superAdmin&&u.anid!==D.anid)return(0,Ce.jsx)(_.A,{noGutters:!0,style:{marginLeft:10,marginRight:10},children:(0,Ce.jsx)(U.A,{xs:12,md:{span:10,offset:1},lg:{span:8,offset:2},children:(0,Ce.jsx)(r.A,{marginTop:40,hAlignContent:"center",children:(0,Ce.jsx)(s.A,{variant:"h5",align:"center",children:" You can only edit offers from your group."})})})});let Ae=b;if(Ae){Ae.sort((e,t)=>e.commentedDate-t.commentedDate);let e=Ae.findIndex(e=>e.commentedBy===u.id);if(-1!==e){const t=b[e];Ae.splice(e,1),Ae.push(t)}Ae.reverse()}return Ae.forEach(e=>{e.replies.sort((e,t)=>t.repliedDate-e.repliedDate)}),(0,Ce.jsxs)(H.A,{fluid:!0,style:{paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:100},children:[(0,Ce.jsxs)(_.A,{noGutters:!0,style:{paddingTop:25,paddingBottom:25,backgroundColor:q.yO},children:[Y.M0(D)?(0,Ce.jsx)(U.A,{xs:{span:12,offset:0,order:0},sm:{span:12,offset:0,order:0},md:{span:12,offset:0,order:0},lg:{span:12,offset:0,order:0},children:(0,Ce.jsx)(r.A,{marginBottom:20,hAlignContent:"center",style:{backgroundColor:q.Qt,padding:15},children:(0,Ce.jsx)(s.A,{variant:"body2",align:"center",className:(0,a.AH)(ce.Ay.white_text),children:(0,Ce.jsx)("b",{children:"This offer has been temporarily closed."})})})}):null,N?(0,Ce.jsx)(U.A,{xs:{span:12,offset:0,order:2},sm:{span:12,offset:0,order:2},md:{span:10,offset:1,order:2},lg:{span:10,offset:1,order:1},children:(0,Ce.jsx)(l.A,{elevation:3,style:{margin:12},square:!0,children:(0,Ce.jsxs)(_.A,{noGutters:!0,style:{padding:6},children:[(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:5,order:1},lg:{span:3,order:1},children:(0,Ce.jsxs)(r.A,{hAlignContent:"center",vAlignContent:"center",height:"100%",width:"100%",style:{padding:10},children:[(0,Ce.jsx)(E.A,{color:"primary",style:{marginRight:15}}),(0,Ce.jsx)(s.A,{align:"left",variant:"body1",children:N.status===le.EE?"You pledged \xa3".concat(Number(N.amount.toFixed(2)).toLocaleString(),"."):"You updated your pledge to \xa3".concat(Number(N.amount.toFixed(2)).toLocaleString(),".")})]})}),(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:5,offset:2,order:2},lg:{span:3,offset:6,order:2},children:(0,Ce.jsx)(r.A,{width:"100%",hAlignContent:"center",style:{padding:10},children:Y.Hd(D)?(0,Ce.jsx)(W.k2,{to:{pathname:i?me.eQ.replace(":groupUserName",i):me.MI,search:"?project=".concat(D.id)},className:(0,a.AH)(ce.Ay.nav_link_hover),children:(0,Ce.jsx)(d.A,{className:(0,a.AH)(ce.Ay.no_text_transform),variant:"outlined",color:"primary",children:"Manage your pledge"})}):(0,Ce.jsx)(s.A,{align:"left",variant:"body2",color:"secondary",children:"Offer has ended. You can't change your pledge anymore."})})})]})})}):null,(0,Ce.jsx)(U.A,{xs:{span:12,offset:0,order:3},sm:{span:12,offset:0,order:3},md:{span:10,offset:1,order:3},lg:{span:8,offset:2,order:2},style:{paddingLeft:20,paddingRight:20,paddingTop:20,paddingBottom:40},children:(0,Ce.jsxs)(r.A,{column:!0,width:"100%",hAlignContent:"center",children:[(0,Ce.jsx)(s.A,{align:"center",variant:"h5",style:{marginBottom:12},children:this.shouldHideInformation()?"This is an offer":D.projectName}),(0,Ce.jsx)(s.A,{className:(0,a.AH)(_e.gray_text),align:"center",variant:"body1",style:{whiteSpace:"pre-line"},children:this.shouldHideInformation()?"in ".concat(D.sector," sector"):D.description}),u.type===le.Vi||u.type===le.rX&&u.id===D.issuerID?(0,Ce.jsx)(r.A,{width:"100%",hAlignContent:"center",vAlignContent:"center",marginTop:20,children:Y.cQ(u,D)?(0,Ce.jsx)(W.k2,{to:i?me.mK.replace(":groupUserName",i).replace(":projectID",D.id):me.I_.replace(":projectID",D.id),className:(0,a.AH)(ce.Ay.nav_link_hover_without_changing_text_color),children:(0,Ce.jsxs)(d.A,{color:"default",variant:"outlined",size:"medium",className:(0,a.AH)(ce.Ay.no_text_transform),children:[(0,Ce.jsx)(R.A,{style:{marginRight:8,width:20,height:"auto"}}),"Edit offer"]})}):(0,Ce.jsxs)(d.A,{color:"default",variant:"outlined",size:"medium",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:!0,children:[(0,Ce.jsx)(R.A,{style:{marginRight:8,width:20,height:"auto"}}),"Edit offer"]})}):null,u.id===D.issuerID?null:(0,Ce.jsxs)(r.A,{column:!0,hAlignContent:"center",children:[(0,Ce.jsx)(W.k2,{to:this.shouldHideInformation()||D.hasOwnProperty("createdByGroupAdmin")&&D.createdByGroupAdmin?i?me.xQ.replace(":groupUserName",i).replace(":groupID",D.group.groupUserName):me.lx.replace(":groupID",D.group.groupUserName):i?me.YH.replace(":groupUserName",i).replace(":userID",M.id):me.yB.replace(":userID",M.id),className:(0,a.AH)(ce.Ay.nav_link_hover,_e.black_text),children:(0,Ce.jsx)(s.A,{align:"center",variant:"body2",style:{marginTop:23},children:this.shouldHideInformation()||D.hasOwnProperty("createdByGroupAdmin")&&D.createdByGroupAdmin?(0,Ce.jsxs)("u",{children:["by ","".concat(D.group.displayName)]}):(0,Ce.jsxs)("u",{children:["by ","".concat(M.firstName," ").concat(M.lastName)]})})}),D.hasOwnProperty("createdByGroupAdmin")&&D.createdByGroupAdmin?null:M.hasOwnProperty("linkedin")&&M.linkedin.trim().length>0?(0,Ce.jsx)("a",{href:M.linkedin,target:"_blank",rel:"noopener noreferrer",children:(0,Ce.jsx)("img",{alt:"linkedin_logo",src:n(63950).default,style:{width:64,height:64}})}):null]})]})}),(0,Ce.jsx)(U.A,{xs:{span:12,order:1},sm:{span:12,order:1},md:{span:12,order:1},lg:{span:7,offset:1,order:3},style:{paddingLeft:20,paddingRight:20,height:g?240:550},children:this.shouldHideInformation()?(0,Ce.jsx)(F.A,{src:Y.h$(Y.w2,D.group),style:{maxHeight:g?240:550,border:"1px solid ".concat(q.kR),width:"100%",objectFit:"scale-down"}}):D.Pitch.cover.map((e,t)=>e.hasOwnProperty("removed")?null:e.fileType===le.Yb?(0,Ce.jsx)(z(),{url:e.url,playsInline:!0,pip:!0,width:"100%",height:""===e.storageID?"100%":"auto",playing:!1,controls:!0},t):(0,Ce.jsx)(F.A,{src:e.url,style:{maxHeight:g?240:550,border:"1px solid ".concat(q.kR),width:"100%",objectFit:"scale-down"}},t))}),(0,Ce.jsx)(U.A,{xs:{span:12,order:4},sm:{span:12,order:4},md:{span:12,order:4},lg:{span:3,order:4},style:{paddingLeft:20,paddingRight:20},children:(0,Ce.jsxs)(_.A,{noGutters:!0,children:[(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:10,offset:1,order:1},lg:{span:12,offset:0,order:1},children:(0,Ce.jsx)(r.A,{width:"100%",height:4,style:{backgroundColor:o?o.settings.primaryColor:q.eq}})}),(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:5,offset:1,order:2},lg:{span:12,offset:0,order:2},children:(0,Ce.jsx)(r.A,{column:!0,marginTop:18,children:Y.Db(D)||Y.mI(D)||Y.Wy(D)||Y.oO(D)||Y.RM(D)||Y.TW(D)||Y.mF(D)?(0,Ce.jsxs)(r.A,{vAlignContent:"center",children:[(0,Ce.jsxs)(r.A,{column:!0,marginRight:20,children:[(0,Ce.jsx)(s.A,{variant:"h5",color:"secondary",align:"left",children:"\xa3"+Number(D.Pitch.fundRequired.toFixed(2)).toLocaleString()}),(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:"Funding goal"})]}),(0,Ce.jsx)($.A,{message:"Funding amount sought via Invest West.",placement:"top"})]}):(0,Ce.jsxs)(r.A,{vAlignContent:"center",children:[(0,Ce.jsxs)(r.A,{column:!0,marginRight:20,children:[(0,Ce.jsx)(s.A,{variant:"h5",color:"primary",align:"left",children:"\xa3".concat(Number(Y.dH(S).toFixed(2)).toLocaleString())}),(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:"pledged of \xa3".concat(Number(D.Pitch.fundRequired.toFixed(2)).toLocaleString()," goal")})]}),(0,Ce.jsx)($.A,{message:"Total amount pledged via Invest West.",placement:"top"})]})})}),D.Pitch.hasOwnProperty("postMoneyValuation")?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:5,offset:1,order:3},lg:{span:12,offset:0,order:3},children:(0,Ce.jsxs)(r.A,{marginTop:20,vAlignContent:"center",children:[(0,Ce.jsxs)(r.A,{column:!0,marginRight:20,children:[(0,Ce.jsx)(s.A,{variant:"h5",color:"inherit",align:"left",children:"\xa3"+Number(D.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()}),(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:"Post money valuation"})]}),(0,Ce.jsx)($.A,{message:"This is the company post money valuation.",placement:"top"})]})}):null,(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:5,offset:0,order:4},lg:{span:12,offset:0,order:4},children:this.renderProjectStatus()}),"Yes"===D.Pitch.hasSEIS?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:1,offset:1,order:5},lg:{span:3,offset:0,order:5},children:(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,hAlignContent:"center",vAlignContent:"center",children:(0,Ce.jsx)(s.A,{variant:"body1",children:(0,Ce.jsx)("b",{children:"SEIS"})})})}):null,"Yes"===D.Pitch.hasEIS?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:1,offset:1,order:6},lg:{span:3,offset:0,order:6},children:(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},hAlignContent:"center",vAlignContent:"center",children:(0,Ce.jsx)(s.A,{variant:"body1",children:(0,Ce.jsx)("b",{children:"EIS"})})})}):null,(0,ge.PV)(e.currentUser,D)?null:(0,Ce.jsxs)(U.A,{xs:12,sm:12,md:{span:10,offset:1,order:5},lg:{span:12,offset:0,order:7},style:{marginTop:15},children:[(0,Ce.jsx)(r.A,{column:!0,hAlignContent:"left",children:(0,Ce.jsx)(r.A,{hAlignContent:"center",vAlignContent:"center",children:(0,Ce.jsx)(d.A,{color:"primary",variant:"contained",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:this.shouldHideInformation()||u.type===le.mP&&!x,onClick:()=>this.toggleContactPitchOwnerDialog(),children:"Contact us"})})}),this.shouldHideInformation()?u.type===le.Vi?(0,Ce.jsx)(r.A,{column:!0,marginTop:20,children:(0,Ce.jsx)(s.A,{align:"left",variant:"body2",color:"textSecondary",children:"You cannot see detailed information of this restricted offer."})}):(0,Ce.jsxs)(r.A,{column:!0,marginTop:20,children:[(0,Ce.jsxs)(s.A,{align:"left",variant:"body2",color:"textSecondary",children:["Restricted to ",D.group.displayName," members."]}),(0,Ce.jsx)(W.k2,{to:i?me.xQ.replace(":groupUserName",i).replace(":groupID",D.group.groupUserName):me.lx.replace(":groupID",D.group.groupUserName),style:{marginTop:4},children:(0,Ce.jsx)(s.A,{variant:"body2",children:"Request access"})})]}):this.renderInvestorSelfCertifyReminder()]}),Y.Hd(D)?u.type!==le.mP||N?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:{span:10,offset:1,order:6},lg:{span:12,offset:0,order:6},style:{marginTop:30},children:(0,Ce.jsx)(s.A,{align:"left",variant:"body2",children:(0,Ce.jsxs)("u",{children:["Closes on ",Y.Oy(D.PrimaryOffer.expiredDate),"."]})})}):(0,Ce.jsxs)(U.A,{xs:12,sm:12,md:{span:10,offset:1,order:6},lg:{span:12,offset:0,order:6},style:{marginTop:30},children:[u.type!==le.mP||x?(0,Ce.jsx)(W.k2,{to:{pathname:i?me.eQ.replace(":groupUserName",i):me.MI,search:"?project=".concat(D.id)},className:(0,a.AH)(ce.Ay.nav_link_hover),children:(0,Ce.jsx)(d.A,{style:{marginBottom:14},className:(0,a.AH)(ce.Ay.no_text_transform),fullWidth:!0,variant:"outlined",color:"primary",size:"medium",children:"Pledge now"})}):(0,Ce.jsx)(d.A,{style:{marginBottom:14},className:(0,a.AH)(ce.Ay.no_text_transform),fullWidth:!0,variant:"outlined",color:"primary",size:"medium",disabled:u.type===le.mP&&!x,children:"Pledge now"}),this.renderInvestorSelfCertifyReminder(),(0,Ce.jsx)(s.A,{align:"left",variant:"body2",style:{marginTop:15},children:(0,Ce.jsxs)("u",{children:["Closes on ",Y.Oy(D.PrimaryOffer.expiredDate),"."]})})]}):null]})})]}),(0,Ce.jsxs)(_.A,{noGutters:!0,className:(0,a.AH)(_e.sticky_body_sections_bar),children:[(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:12,children:(0,Ce.jsx)(c.A,{})}),(0,Ce.jsx)(U.A,{style:{padding:10},xs:{span:12,offset:0},sm:{span:12,offset:0},md:{span:12,offset:0},lg:{span:8,offset:2},children:(0,Ce.jsx)(r.A,{hAlignContent:"center",children:(0,Ce.jsxs)(m.A,{value:y,onChange:this.onTabChanged,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"on",children:[u.type!==le.Vi||!u.superAdmin&&(u.superAdmin||u.anid!==D.anid)||Y.Db(D)?null:(0,Ce.jsx)(h.A,{value:0,className:(0,a.AH)(ce.Ay.tab_title),fullWidth:!0,label:"Control phases",style:{color:o?o.settings.secondaryColor:q.oD}}),(0,Ce.jsx)(h.A,{value:1,className:(0,a.AH)(ce.Ay.tab_title),fullWidth:!0,label:"Campaign"}),(0,Ce.jsx)(h.A,{value:2,className:(0,a.AH)(ce.Ay.tab_title),fullWidth:!0,label:"Documents"}),(0,Ce.jsx)(h.A,{value:3,className:(0,a.AH)(ce.Ay.tab_title),fullWidth:!0,label:"Investor comments"}),(0,Ce.jsx)(h.A,{value:4,className:(0,a.AH)(ce.Ay.tab_title),fullWidth:!0,label:"Extra information"})]})})}),(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:12,children:(0,Ce.jsx)(c.A,{})})]}),(0,Ce.jsxs)(_.A,{noGutters:!0,className:(0,a.AH)(_e.main_body_section),children:[0!==y?null:(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsx)(s.A,{variant:"h5",children:" Control phases"}),(0,Ce.jsxs)(_.A,{children:[(0,Ce.jsx)(U.A,{xs:{span:12,order:1},sm:{span:12,order:1},md:{span:8,order:0},lg:{span:8,order:0},children:(0,Ce.jsxs)(p.A,{nonLinear:!0,orientation:"vertical",activeStep:f,style:{marginTop:15},children:[(0,Ce.jsxs)(A.A,{completed:!Y.mI(D),children:[(0,Ce.jsx)(v,{onClick:()=>this.onAdminOfferStatesStepClick(0),children:(0,Ce.jsx)(j.A,{children:"Publish pitch"})}),(0,Ce.jsx)(I,{children:Y.mI(D)?(0,Ce.jsxs)(r.A,{column:!0,width:"100%",marginTop:20,className:(0,a.AH)(_e.admin_state_control_box),children:[(0,Ce.jsx)(s.A,{variant:"body1",align:"left",paragraph:!0,children:"Please check this offer carefully before publishing as this action cannot be reversed. You can control who can see this investment opportunity using the options below."}),(0,Ce.jsx)(c.A,{style:{marginTop:25,marginBottom:20}}),(0,Ce.jsx)(Z.A,{}),(0,Ce.jsx)(c.A,{style:{marginTop:35,marginBottom:25}}),ne?(0,Ce.jsxs)(r.A,{column:!0,children:[(0,Ce.jsx)(P.A,{label:"Feedback",placeholder:"Feedback for issuer",name:"rejectFeedback",value:ie,fullWidth:!0,margin:"normal",variant:"outlined",required:!0,multiline:!0,rows:5,rowsMax:5,onChange:this.onTextChanged}),(0,Ce.jsxs)(r.A,{width:"100%",hAlignContent:"right",marginTop:10,children:[(0,Ce.jsx)(r.A,{marginRight:6,children:(0,Ce.jsx)(d.A,{fullWidth:!0,color:"primary",variant:"contained",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:0===ie.trim().length,onClick:()=>this.sendProjectBackToIssuer(),children:oe?"Sending...":"Send"})}),(0,Ce.jsx)(r.A,{marginLeft:6,children:(0,Ce.jsx)(d.A,{fullWidth:!0,color:"secondary",variant:"outlined",className:(0,a.AH)(ce.Ay.no_text_transform),onClick:()=>this.toggleRejectFeedback(),children:"Cancel"})})]})]}):null,ne?null:(0,ge.VI)(D)?(0,Ce.jsx)(d.A,{fullWidth:!0,color:"primary",variant:"contained",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:u.superAdmin,onClick:()=>this.onMakeProjectGoLiveDecision({decision:!0,projectVisibilitySetting:re}),children:"Publish pitch"}):(0,Ce.jsxs)(r.A,{children:[(0,Ce.jsx)(r.A,{grow:!0,marginRight:10,children:(0,Ce.jsx)(d.A,{fullWidth:!0,color:"primary",variant:"contained",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:u.superAdmin,onClick:()=>this.onMakeProjectGoLiveDecision({decision:!0,projectVisibilitySetting:re}),children:"Publish pitch"})}),(0,Ce.jsx)(r.A,{grow:!0,marginLeft:10,children:(0,Ce.jsx)(d.A,{fullWidth:!0,color:"secondary",variant:"outlined",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:u.superAdmin,onClick:()=>this.toggleRejectFeedback(),children:"Send back to issuer"})})]}),u.superAdmin?(0,Ce.jsx)(s.A,{variant:"body1",color:"error",align:"left",style:{marginTop:20},children:"Only group admin can do this."}):null]}):(0,Ce.jsx)(r.A,{column:!0,width:"100%",marginTop:20,children:(0,Ce.jsx)(s.A,{color:(0,ge.Wy)(D)?"secondary":"primary",align:"left",variant:"body1",children:(0,ge.Wy)(D)?"This offer has been rejected.":(0,ge.Db)(D)?"This offer is in draft phase.":"This offer has been published."})})})]},0),(0,Ce.jsxs)(A.A,{disabled:(0,ge.mI)(D)||(0,ge.Wy)(D),completed:(0,ge.Id)(D)||(0,ge.Di)(D)||(0,ge.Hd)(D)||(0,ge.TW)(D)||(0,ge.mF)(D),children:[(0,Ce.jsx)(v,{onClick:()=>this.onAdminOfferStatesStepClick(1),children:(0,Ce.jsx)(j.A,{error:Y.Wy(D),children:"Make decision for expired pitch"})}),(0,Ce.jsx)(I,{children:!(0,ge.oO)(D)&&!(0,ge.RM)(D)||(0,ge.TW)(D)||(0,ge.mF)(D)?(0,Ce.jsxs)(r.A,{column:!0,width:"100%",marginTop:20,children:[(0,Ce.jsx)(s.A,{color:Y.Di(D)?"secondary":"primary",align:"left",variant:"body1",children:Y.Di(D)?"This offer has been rejected.":D.Pitch.status===le.Ht?D.hasOwnProperty("createdByGroupAdmin")&&D.createdByGroupAdmin&&o&&D.anid===o.anid?"You can create a pledge page for this offer now.":"The issuer has been prompted to create their pledge page. You will then be able to check the pledge before publishing.":"This offer has moved to the pledge phase."}),D.hasOwnProperty("createdByGroupAdmin")&&D.createdByGroupAdmin&&o&&D.anid===o.anid&&D.Pitch.status===le.Ht?(0,Ce.jsx)(r.A,{marginTop:20,children:(0,Ce.jsx)(d.A,{color:"primary",variant:"outlined",size:"medium",className:(0,a.AH)(ce.Ay.no_text_transform),onClick:()=>{ae(),se(D),he(D)},children:"Create pledge"})}):null]}):(0,Ce.jsx)(r.A,{column:!0,children:(0,ge.RM)(D)?(0,Ce.jsxs)(r.A,{column:!0,width:"100%",marginTop:20,marginBottom:20,className:(0,a.AH)(_e.admin_state_control_box),children:[(0,Ce.jsx)(s.A,{align:"left",variant:"body1",style:{marginBottom:35},children:"This pitch has expired. You can bring it back to live by updating the expiry date or close it."}),(0,Ce.jsx)(pe.s,{autoOk:!0,fullWidth:!0,variant:"dialog",inputVariant:"outlined",label:"Update expiry date for this pitch",format:"dd/MM/yyyy",minDate:Y.IS(1),value:te,InputAdornmentProps:{position:"start"},onChange:this.onDateChanged}),(0,Ce.jsx)(d.A,{variant:"contained",color:"primary",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:!te||isNaN(te)||te<Y.IS(0),style:{marginTop:25},onClick:this.bringPitchBackToLive,children:"Make pitch live again"}),(0,Ce.jsxs)(r.A,{column:!0,marginTop:100,children:[(0,Ce.jsx)(d.A,{fullWidth:!0,color:"secondary",className:(0,a.AH)(ce.Ay.no_text_transform),variant:"contained",disabled:u.superAdmin,onClick:()=>this.onMakeProjectGoToPledgePhaseDecision(!1),children:"Close pitch"}),(0,Ce.jsx)(s.A,{align:"center",variant:"body2",style:{marginTop:12},children:(0,Ce.jsx)("b",{children:(0,Ce.jsx)("u",{children:"Please do it carefully as you cannot reverse your action."})})})]})]}):null})})]},1)]})}),(0,Ce.jsx)(U.A,{xs:{span:12,order:0},sm:{span:12,order:0},md:{span:4,order:1},lg:{span:4,order:1},children:(0,ge.KW)(D)?(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsx)(d.A,{variant:"outlined",color:"primary",className:(0,a.AH)(ce.Ay.no_text_transform),onClick:()=>de._8(u,JSON.parse(JSON.stringify(D))),disabled:u.type!==le.Vi||u.type===le.Vi&&u.anid!==D.anid,children:(0,ge.M0)(D)?"Open again":"Close temporarily"}),u.superAdmin?(0,Ce.jsx)(s.A,{variant:"body2",align:"left",color:"error",style:{marginTop:12},children:"Only group admins can do this."}):null,(0,Ce.jsx)(s.A,{variant:"body2",align:"left",style:{marginTop:15},children:(0,ge.M0)(D)?"This offer will be opened again.":"This offer will be closed temporarily and it will no longer be visible to any investors until you open it again."})]}):null})]})]})}),1!==y?null:this.shouldHideInformation()?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:u.type===le.Vi?(0,Ce.jsx)(r.A,{column:!0,marginTop:30,hAlignContent:"center",children:(0,Ce.jsxs)(s.A,{align:"center",variant:"h5",children:["Restricted to ",D.group.displayName," members."]})}):(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsxs)(s.A,{align:"left",variant:"h5",children:["Restricted to ",D.group.displayName," members."]}),(0,Ce.jsx)(W.k2,{to:i?me.xQ.replace(":groupUserName",i).replace(":groupID",D.group.groupUserName):me.lx.replace(":groupID",D.group.groupUserName),style:{marginTop:10},children:(0,Ce.jsx)(s.A,{variant:"body1",children:" Request access"})})]})}):(0,Ce.jsxs)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:[D.Pitch.presentationDocument?(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsx)(s.A,{variant:"h5",children:"Pitch deck"}),(0,Ce.jsx)(De,{documents:D.Pitch.presentationDocument,shouldShowRiskWarningOnDownload:!0}),(0,Ce.jsx)(c.A,{style:{marginTop:10}})]}):null,D.Pitch.presentationText?(0,Ce.jsx)(r.A,{column:!0,dangerouslySetInnerHTML:{__html:Y.h_(D.Pitch.presentationText.ops)},marginTop:30}):null]}),3!==y?null:this.shouldHideInformation()?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:u.type===le.Vi?(0,Ce.jsx)(r.A,{column:!0,marginTop:30,hAlignContent:"center",children:(0,Ce.jsxs)(s.A,{align:"center",variant:"h5",children:["Restricted to ",D.group.displayName," members."]})}):(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsxs)(s.A,{align:"left",variant:"h5",children:["Restricted to ",D.group.displayName," members."]}),(0,Ce.jsx)(W.k2,{to:i?me.xQ.replace(":groupUserName",i).replace(":groupID",D.group.groupUserName):me.lx.replace(":groupID",D.group.groupUserName),style:{marginTop:10},children:(0,Ce.jsx)(s.A,{variant:"body1",children:"Request access"})})]})}):(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:8,offset:2},children:(0,Ce.jsxs)(_.A,{children:[(0,Ce.jsxs)(U.A,{xs:{span:12,order:2},sm:{span:12,order:2},md:{span:8,order:1},lg:{span:8,order:1},style:{marginTop:40},children:[u.type===le.mP?null:(0,Ce.jsx)(s.A,{align:"center",style:{padding:15,backgroundColor:q.C0,marginBottom:30},variant:"body2",color:"inherit",children:"Only investors can post comments."}),C?Ae.length>0?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{padding:15,backgroundColor:q.yO},column:!0,children:Ae.map(e=>e.commentedBy===u.id?(0,Ce.jsxs)(r.A,{column:!0,marginTop:12,marginBottom:12,className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.ON,width:"100%"},children:[(0,Ce.jsx)(s.A,{style:{marginTop:15,marginBottom:10},variant:"body1",className:(0,a.AH)(_e.gray_text),align:"left",children:"Update your comment"}),(0,Ce.jsx)(k.A,{name:"currentCommentText",onChange:this.onTextChanged,value:G,fullWidth:!0,rows:5,multiline:!0,className:(0,a.AH)(_e.border_box)}),(0,Ce.jsxs)(r.A,{marginTop:25,width:"100%",hAlignContent:"right",children:[(0,Ce.jsx)(d.A,{size:"small",color:"default",variant:"text",onClick:this.onCancelUpdateCurrentComment,children:"Cancel"}),(0,Ce.jsx)(d.A,{style:{marginLeft:15},size:"small",color:"inherit",variant:"outlined",disabled:V&&V.comment===G||0===G.trim().length,onClick:this.onSubmitUpdateCurrentComment,children:"Update"})]}),e.replies.map(e=>(0,Ce.jsxs)(r.A,{height:"100%",width:"100%",marginLeft:24,marginTop:35,children:[(0,Ce.jsx)(c.A,{style:{backgroundColor:_e.gray_text,height:"auto",width:6}}),(0,Ce.jsxs)(r.A,{column:!0,marginLeft:10,marginRight:24,width:"100%",children:[(0,Ce.jsx)(s.A,{variant:"body2",className:(0,a.AH)(_e.gray_text),align:"left",children:e.status===le.QG?"Posted: ".concat(Y.Oy(e.repliedDate)):"Edited: ".concat(Y.Oy(e.repliedDate))}),(0,Ce.jsx)(W.k2,{to:e.author.type===le.Vi?i?me.xQ.replace(":groupUserName",i).replace(":groupID",e.author.anid):me.lx.replace(":groupID",e.author.anid):i?me.YH.replace(":groupUserName",i).replace(":userID",e.author.id):me.yB.replace(":userID",e.author.id),children:(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:e.author.type===le.Vi?u.type===le.Vi&&u.superAdmin?"by group admin - ".concat(e.author.email):"by group admin":"by ".concat(e.author.firstName," ").concat(e.author.lastName)})}),(0,Ce.jsx)(s.A,{variant:"body2",align:"left",style:{marginTop:12},children:e.text})]})]},e.id))]},e.id):(0,Ce.jsxs)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.ON},column:!0,marginTop:12,marginBottom:12,children:[(0,Ce.jsx)(s.A,{variant:"body2",className:(0,a.AH)(_e.gray_text),align:"left",children:e.status===le.Fg?"Posted: ".concat(Y.Oy(e.commentedDate)):"Edited: ".concat(Y.Oy(e.commentedDate))}),u.type===le.Vi&&u.superAdmin?(0,Ce.jsx)(W.k2,{to:i?me.YH.replace(":groupUserName",i).replace(":userID",e.author.id):me.yB.replace(":userID",e.author.id),children:(0,Ce.jsxs)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:["by ",e.author.firstName," ",e.author.lastName]})}):null,(0,Ce.jsx)(s.A,{style:{marginTop:12},variant:"body1",align:"left",children:e.comment}),u.type===le.rX&&u.id===M.id||u.type===le.Vi&&D.hasOwnProperty("createdByGroupAdmin")&&u.anid===D.anid?(0,Ce.jsx)(r.A,{marginTop:25,children:(0,Ce.jsx)(d.A,{variant:"outlined",size:"small",className:(0,a.AH)(ce.Ay.no_text_transform),disabled:null!==X&&X.id===e.id&&null===ee,onClick:()=>this.onToggleReplyToComment(e,null),children:"Reply"})}):null,null!==X&&X.id===e.id&&null===ee?(0,Ce.jsx)(Re,{replyText:K,replyEdited:ee,onToggleReplyToComment:this.onToggleReplyToComment,onSubmitCommentReply:this.onSubmitCommentReply,onTextChanged:this.onTextChanged}):null,e.replies.map(t=>(0,Ce.jsxs)(r.A,{height:"100%",width:"100%",marginLeft:24,marginTop:35,children:[(0,Ce.jsx)(c.A,{style:{backgroundColor:_e.gray_text,height:"auto",width:6}}),(0,Ce.jsxs)(r.A,{column:!0,marginLeft:10,marginRight:24,width:"100%",children:[(0,Ce.jsx)(s.A,{variant:"body2",className:(0,a.AH)(_e.gray_text),align:"left",children:t.status===le.QG?"Posted: ".concat(Y.Oy(t.repliedDate)):"Edited: ".concat(Y.Oy(t.repliedDate))}),(0,Ce.jsx)(W.k2,{to:t.author.type===le.Vi?i?me.xQ.replace(":groupUserName",i).replace(":groupID",t.author.anid):me.lx.replace(":groupID",t.author.anid):i?me.YH.replace(":groupUserName",i).replace(":userID",t.author.id):me.yB.replace(":userID",t.author.id),children:(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:t.author.type===le.Vi?u.type===le.Vi&&u.superAdmin?"by group admin - ".concat(t.author.email):"by group admin":"by ".concat(t.author.firstName," ").concat(t.author.lastName)})}),(0,Ce.jsx)(s.A,{variant:"body2",align:"left",style:{marginTop:12},children:t.text}),u.type!==le.rX&&(u.type!==le.Vi||u.superAdmin)||u.id!==M.id||u.id!==t.repliedBy?null:(0,Ce.jsxs)(r.A,{marginTop:16,children:[(0,Ce.jsxs)(d.A,{variant:"outlined",className:(0,a.AH)(ce.Ay.no_text_transform),size:"small",color:"secondary",onClick:()=>this.onDeleteCommentReply(t),style:{marginRight:10},children:["Delete",(0,Ce.jsx)(O.A,{fontSize:"small",style:{marginLeft:6}})]}),(0,Ce.jsxs)(d.A,{variant:"outlined",className:(0,a.AH)(ce.Ay.no_text_transform),size:"small",color:"primary",onClick:()=>this.onToggleReplyToComment(e,t),children:["Edit",(0,Ce.jsx)(R.A,{fontSize:"small",style:{marginLeft:6}})]})]}),null!==X&&X.id===e.id&&null!==ee&&ee.id===t.id?(0,Ce.jsx)(Re,{replyText:K,replyEdited:ee,onToggleReplyToComment:this.onToggleReplyToComment,onSubmitCommentReply:this.onSubmitCommentReply,onTextChanged:this.onTextChanged}):null]})]},t.id))]},e.id))}):u.type!==le.mP?(0,Ce.jsx)(r.A,{hAlignContent:"center",vAlignContent:"center",column:!0,style:{padding:30,backgroundColor:q.yO},children:(0,Ce.jsx)(s.A,{variant:"body2",children:"No comments yet"})}):(0,Ce.jsxs)(r.A,{hAlignContent:"center",vAlignContent:"center",column:!0,style:{padding:30,backgroundColor:q.yO},children:[(0,Ce.jsx)(s.A,{variant:"body2",children:"No comments yet"}),(0,Ce.jsxs)(r.A,{marginTop:25,column:!0,hAlignContent:"center",children:[(0,Ce.jsx)("div",{children:(0,Ce.jsx)(d.A,{size:"small",onClick:this.onPostACommentClick,variant:"outlined",color:"inherit",fullWidth:!1,disabled:Y.KW(D)&&u.type===le.mP&&!x,children:"Post a comment"})}),this.renderInvestorSelfCertifyReminder()]})]}):(0,Ce.jsx)(r.A,{marginTop:30,hAlignContent:"center",width:"100%",children:(0,Ce.jsx)(Q(),{color:o?o.settings.primaryColor:q.eq})})]}),(0,Ce.jsx)(U.A,{xs:{span:12,order:1},sm:{span:12,order:1},md:{span:4,order:2},lg:{span:4,order:2},style:{marginTop:40},children:u.type===le.mP?0===b.filter(e=>e.commentedBy===u.id).length?(0,Ce.jsxs)(r.A,{column:!0,children:[(0,Ce.jsx)(s.A,{variant:"subtitle1",align:"left",style:{marginBottom:25},children:"This is your space to offer support and feedback to the issuer. Your identity will not be shared."}),C&&b.length>0?(0,Ce.jsx)("div",{children:(0,Ce.jsx)(d.A,{size:"small",onClick:this.onPostACommentClick,variant:"outlined",color:"inherit",fullWidth:!1,disabled:Y.KW(D)&&u.type===le.mP&&!x,children:"Post a comment"})}):null,C&&b.length>0?this.renderInvestorSelfCertifyReminder():null]}):(0,Ce.jsx)(s.A,{variant:"subtitle1",align:"left",children:"You have already commented on this investment opportunity. You can only edit your comment."}):(0,Ce.jsx)(s.A,{variant:"subtitle1",align:"left",children:"All the comments from investors are displayed anonymously here."})})]})}),2!==y?null:this.shouldHideInformation()?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:u.type===le.Vi?(0,Ce.jsx)(r.A,{column:!0,marginTop:30,hAlignContent:"center",children:(0,Ce.jsxs)(s.A,{align:"center",variant:"h5",children:["Restricted to ",D.group.displayName," members."]})}):(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsxs)(s.A,{align:"left",variant:"h5",children:["Restricted to ",D.group.displayName," members."]}),(0,Ce.jsx)(W.k2,{to:i?me.xQ.replace(":groupUserName",i).replace(":groupID",D.group.groupUserName):me.lx.replace(":groupID",D.group.groupUserName),style:{marginTop:10},children:(0,Ce.jsx)(s.A,{variant:"body1",children:"Request access"})})]})}):(0,Ce.jsxs)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},style:{marginTop:30},children:[(0,Ce.jsx)(s.A,{variant:"h5",color:"inherit",children:"Supporting documents"}),D.Pitch.supportingDocuments&&-1!==D.Pitch.supportingDocuments.findIndex(e=>!e.hasOwnProperty("removed"))?(0,Ce.jsx)(De,{documents:D.Pitch.supportingDocuments,shouldShowRiskWarningOnDownload:!0}):(0,Ce.jsx)(s.A,{variant:"body1",color:"textSecondary",style:{marginTop:35},children:"No supporting documents uploaded."})]}),4!==y?null:this.shouldHideInformation()?(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:u.type===le.Vi?(0,Ce.jsx)(r.A,{column:!0,marginTop:30,hAlignContent:"center",children:(0,Ce.jsxs)(s.A,{align:"center",variant:"h5",children:["Restricted to ",D.group.displayName," members."]})}):(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,children:[(0,Ce.jsxs)(s.A,{align:"left",variant:"h5",children:["Restricted to ",D.group.displayName," members."]}),(0,Ce.jsx)(W.k2,{to:i?me.xQ.replace(":groupUserName",i).replace(":groupID",D.group.groupUserName):me.lx.replace(":groupID",D.group.groupUserName),style:{marginTop:10},children:(0,Ce.jsx)(s.A,{variant:"body1",children:"Request access"})})]})}):(0,Ce.jsxs)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},style:{marginTop:30},children:[(0,Ce.jsx)(s.A,{variant:"h5",color:"inherit",children:"Extra information"}),D.Pitch.hasOwnProperty("financialRound")?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Financial round the company is looking for:\xa0\xa0",(0,Ce.jsx)("b",{children:D.Pitch.financialRound})]})}):null,(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:40,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Prior investment raised:\xa0\xa0",(0,Ce.jsx)("b",{children:0===D.Pitch.amountRaised?"none":"\xa3".concat(Number(D.Pitch.amountRaised.toFixed(2)).toLocaleString())})]})}),D.Pitch.hasOwnProperty("howFundIsBeingRaised")?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["How does the company plan to raise funds:  ",D.Pitch.howFundIsBeingRaised]})}):null,"Yes"===D.Pitch.hasSEIS?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Does this pitch have a SEIS badge: ",(0,Ce.jsxs)("b",{children:[" ",D.Pitch.hasSEIS]})]})}):(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Does this pitch have a SEIS badge: ",(0,Ce.jsx)("b",{children:" No "})]})}),"Yes"===D.Pitch.hasEIS?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Does this pitch have a EIS badge: ",(0,Ce.jsxs)("b",{children:[" ",D.Pitch.hasEIS]})]})}):(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Does this pitch have a EIS badge: ",(0,Ce.jsx)("b",{children:" No "})]})}),D.Pitch.hasOwnProperty("detailsAboutEarlierFundraisingRounds")?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Details about earlier fundraising rounds:",(0,Ce.jsx)("br",{}),(0,Ce.jsx)("br",{})," ",D.Pitch.detailsAboutEarlierFundraisingRounds]})}):null,D.Pitch.hasOwnProperty("qibSpecialNews")&&(o&&"qib"===o.groupUserName&&(u.type===le.Vi&&u.anid===o.anid||u.type===le.rX&&u.id===D.issuerID)||!o&&u.type===le.Vi&&u.superAdmin)?(0,Ce.jsx)(r.A,{className:(0,a.AH)(_e.border_box),style:{backgroundColor:q.yO},column:!0,marginTop:30,vAlignContent:"center",children:(0,Ce.jsxs)(s.A,{variant:"body1",align:"left",children:["Special news that Briony should talk about:",(0,Ce.jsx)("br",{}),(0,Ce.jsx)("br",{}),D.Pitch.qibSpecialNews]})}):null]})]}),(0,Ce.jsx)(_.A,{noGutters:!0,children:(0,Ce.jsx)(U.A,{xs:12,sm:12,md:12,lg:{span:6,offset:3},children:(0,Ce.jsx)(Se.A,{})})})]})},this.renderInvestorSelfCertifyReminder=()=>{const{groupUserName:e,user:t,investorSelfCertificationAgreement:n,project:i}=this.props;return t.type!==le.mP?null:Y.KW(i)&&!n?(0,Ce.jsxs)(r.A,{column:!0,marginTop:20,children:[(0,Ce.jsx)(s.A,{align:"left",variant:"body2",color:"textSecondary",children:"You cannot interact with this offer as you have not completed your self certification."}),(0,Ce.jsx)(W.k2,{to:"".concat(e?me.Cg.replace(":groupUserName",e):me.Au,"?tab=Profile"),style:{marginTop:4},children:(0,Ce.jsx)(s.A,{variant:"body2",children:(0,Ce.jsx)("u",{children:"Self certify"})})})]}):null},this.shouldHideInformation=()=>{const{project:e,user:t,groupsUserIsIn:n}=this.props;if(t.type!==le.Vi)return(t.type!==le.rX||t.id!==e.issuerID)&&(!n||e.visibility===le.V2&&-1===n.findIndex(t=>t.anid===e.anid));if(t.superAdmin)return!1;if(t.anid===e.anid)return!1;switch(e.visibility){case le.li:return!1;case le.V2:case le.DY:default:return!0}},this.renderProjectStatus=()=>{const{project:e}=this.props;let t={text:"",color:""};if(Y.mI(e)||Y.Wy(e)||Y.Id(e)||Y.Di(e))return(0,Ce.jsx)(r.A,{marginTop:30,marginBottom:30,children:(0,Ce.jsx)(s.A,{variant:"body1",color:"error",align:"left",children:Y.mI(e)?"Offer is being checked.":Y.Wy(e)?"Offer has been rejected.":"Offer closed."})});if(e.PrimaryOffer)switch(e.PrimaryOffer.status){case le.GQ:return(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,marginBottom:30,children:[(0,Ce.jsx)(s.A,{variant:"body2",color:"primary",align:"left",children:"Offer is in pledge phase"}),(0,Ce.jsx)(s.A,{variant:"h5",color:"textPrimary",align:"left",children:Y.AC(e.PrimaryOffer.expiredDate)}),(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:"days remaining"})]});case le.Fq:t.text="Pledge has expired.",t.color="primary"}else switch(e.Pitch.status){case le.VY:return(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,marginBottom:30,children:[(0,Ce.jsx)(s.A,{variant:"body2",color:"primary",align:"left",children:"Offer is in pitch phase"}),(0,Ce.jsx)(s.A,{variant:"h5",color:"textPrimary",align:"left",children:Y.AC(e.Pitch.expiredDate)}),(0,Ce.jsx)(s.A,{variant:"body2",color:"textSecondary",align:"left",children:"days remaining"})]});case le.Ht:t.text="Awaiting pledge page to be created.",t.color="textSecondary";break;case le.NN:t.text="Offer failed as its pitch was rejected.",t.color="error";break;case le.Oi:t.text="Pitch expired. Awaiting Group Admin review.",t.color="textSecondary"}return(0,Ce.jsx)(r.A,{marginTop:30,marginBottom:30,children:(0,Ce.jsx)(s.A,{align:"left",variant:"body1",color:t.color,children:t.text})})},this.shouldVoteDisabled=()=>{const{project:e,user:t,groupsUserIsIn:n,investorSelfCertificationAgreement:i}=this.props;return e.issuerID===se.A.auth().currentUser.uid||t.type===le.Vi||(!n||(e.visibility!==le.li&&-1===n.findIndex(t=>t.anid===e.anid)||(t.type===le.mP&&!i||(t.type===le.rX||(e.Pitch.status!==le.VY||void 0)))))},this.displayVote=e=>{const{votes:t}=this.props;let n=0,i=0;return t.forEach(e=>{const t=e.voted;""!==t&&(t?n+=1:i+=1)}),e?n:i}}render(){return(0,Ce.jsx)(H.A,{fluid:!0,style:{padding:0},children:this.renderPageContent()})}}const Be=(e,t)=>{if(0===e.length)return null;let n=e.findIndex(e=>e.investorID===t.id);return-1!==n?e[n]:null};class Oe extends o.Component{constructor(){super(...arguments),this.onClose=()=>{this.props.onClose()},this.onCommentTextChanged=e=>{this.props.onCommentTextChanged(e)},this.onSubmitCommentClick=()=>{this.props.onSubmitCommentClick()}}render(){const{open:e,project:t,commentText:n,commentSubmitClick:i}=this.props;return t?(0,Ce.jsxs)(L.A,{fullWidth:!0,open:e,onClose:this.onClose,children:[(0,Ce.jsx)(T.A,{children:"Make a comment"}),(0,Ce.jsxs)(N.A,{children:[(0,Ce.jsx)(M,{align:"left",children:"Please enter your comment here."}),(0,Ce.jsx)(k.A,{error:0===n.trim().length&&i,name:"commentText",value:n,onChange:this.onCommentTextChanged,rows:5,fullWidth:!0,multiline:!0,className:(0,a.AH)(_e.border_box)})]}),(0,Ce.jsxs)(B.A,{style:{paddingTop:20,paddingBottom:20,paddingRight:24},children:[(0,Ce.jsx)(d.A,{size:"small",color:"default",variant:"text",onClick:this.onClose,children:"Cancel"}),(0,Ce.jsx)(d.A,{disabled:n.trim().length>0&&i,style:{marginLeft:15},size:"small",color:"inherit",variant:"outlined",onClick:this.onSubmitCommentClick,children:"Post comment"})]})]}):null}}class Re extends o.Component{constructor(){super(...arguments),this.onToggleReplyToComment=(e,t)=>{this.props.onToggleReplyToComment(e,t)},this.onSubmitCommentReply=()=>{this.props.onSubmitCommentReply()},this.onTextChanged=e=>{this.props.onTextChanged(e)}}render(){const{replyText:e}=this.props;return(0,Ce.jsxs)(r.A,{column:!0,marginTop:30,width:"auto",children:[(0,Ce.jsx)(k.A,{name:"replyText",value:e,onChange:this.onTextChanged,rows:5,fullWidth:!0,multiline:!0,className:(0,a.AH)(_e.border_box)}),(0,Ce.jsxs)(r.A,{marginTop:18,width:"100%",hAlignContent:"right",children:[(0,Ce.jsx)(d.A,{size:"small",color:"default",variant:"text",className:(0,a.AH)(ce.Ay.no_text_transform),onClick:()=>this.onToggleReplyToComment(null,null),children:"Cancel"}),(0,Ce.jsx)(d.A,{disabled:0===e.trim().length,style:{marginLeft:15},size:"small",color:"inherit",variant:"outlined",className:(0,a.AH)(ce.Ay.no_text_transform),onClick:this.onSubmitCommentReply,children:"Submit"})]})]})}}const Ee=(0,ee.Ng)(e=>({AuthenticationState:e.AuthenticationState,isMobile:e.MediaQueryState.isMobile,groupUserName:e.manageGroupFromParams.groupUserName,groupProperties:e.manageGroupFromParams.groupProperties,groupPropertiesLoaded:e.manageGroupFromParams.groupPropertiesLoaded,shouldLoadOtherData:e.manageGroupFromParams.shouldLoadOtherData,authStatus:e.auth.authStatus,authenticating:e.auth.authenticating,user:e.auth.user,userLoaded:e.auth.userLoaded,userBeingLoaded:e.auth.userBeingLoaded,groupsUserIsIn:e.auth.groupsUserIsIn,investorSelfCertificationAgreement_userID:e.manageInvestorSelfCertificationAgreement.userID,investorSelfCertificationAgreement:e.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreement,investorSelfCertificationAgreementLoaded:e.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementLoaded,investorSelfCertificationAgreementBeingLoaded:e.manageInvestorSelfCertificationAgreement.investorSelfCertificationAgreementBeingLoaded,projectVisibilitySetting:e.manageSelectProjectVisibility.projectVisibilitySetting}),e=>({setGroupUserNameFromParams:t=>e(te.QT(t)),setExpectedAndCurrentPathsForChecking:(t,n)=>e(te.uF(t,n)),loadAngelNetwork:()=>e(te.Ad()),investorSelfCertificationAgreement_setUser:t=>e(ie.gV(t)),loadInvestorSelfCertificationAgreement:()=>e(ie.Ze()),pledgesTable_setProject:t=>e(ne.od(t)),pledgesTable_stopListeningForPledgesChanged:()=>e(ne.bC()),createPledgeDialog_toggleDialog:()=>e(oe.Oi()),createPledgeDialog_setProject:t=>e(oe.od(t)),selectProjectVisibility_setProject:t=>e(re.od(t)),setFeedbackSnackbarContent:(t,n,i)=>e(ae.iA(t,n,i)),toggleContactPitchOwnerDialog:(t,n)=>e((0,Ie.ss)(t,n))}))(we),_e=a.vv.create({gray_text:{color:q.kf},faq_box:{border:"1px solid ".concat(q.AB),boxShadow:"none",backgroundColor:q.ON,marginBottom:12,":hover":{backgroundColor:q.WT}},border_box:{border:"1px solid ".concat(q.AB),padding:14},admin_state_control_box:{border:"1px solid ".concat(q.AB),padding:24,backgroundColor:q.Aw},sticky_body_sections_bar:{position:"sticky",top:0,backgroundColor:q.ON,zIndex:1},main_body_section:{minHeight:600,padding:15,backgroundColor:q.ON},black_text:{color:q.Ql}})},99346:(e,t,n)=>{n.d(t,{A:()=>b});var i=n(80045),o=n(58168),r=n(65043),a=n(43024),s=n(82454),l=n(47573),d=n(20495),c=n(91917);const m=(0,c.A)(r.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),h=(0,c.A)(r.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),p=(0,c.A)(r.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),A=(0,c.A)(r.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),g=(0,c.A)(r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var u=n(17339),x=n(74822),y={success:r.createElement(m,{fontSize:"inherit"}),warning:r.createElement(h,{fontSize:"inherit"}),error:r.createElement(p,{fontSize:"inherit"}),info:r.createElement(A,{fontSize:"inherit"})},f=r.createElement(g,{fontSize:"small"}),j=r.forwardRef(function(e,t){var n=e.action,s=e.children,l=e.classes,c=e.className,m=e.closeText,h=void 0===m?"Close":m,p=e.color,A=e.icon,g=e.iconMapping,j=void 0===g?y:g,b=e.onClose,C=e.role,v=void 0===C?"alert":C,D=e.severity,S=void 0===D?"success":D,I=e.variant,P=void 0===I?"standard":I,k=(0,i.A)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return r.createElement(d.A,(0,o.A)({role:v,square:!0,elevation:0,className:(0,a.A)(l.root,l["".concat(P).concat((0,x.A)(p||S))],c),ref:t},k),!1!==A?r.createElement("div",{className:l.icon},A||j[S]||y[S]):null,r.createElement("div",{className:l.message},s),null!=n?r.createElement("div",{className:l.action},n):null,null==n&&b?r.createElement("div",{className:l.action},r.createElement(u.A,{size:"small","aria-label":h,title:h,color:"inherit",onClick:b},f)):null)});const b=(0,l.A)(function(e){var t="light"===e.palette.type?s.e$:s.a,n="light"===e.palette.type?s.a:s.e$;return{root:(0,o.A)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:n(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:n(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:n(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:n(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}},{name:"MuiAlert"})(j)}}]);
//# sourceMappingURL=project-details.6c440598.chunk.js.map